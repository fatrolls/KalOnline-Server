/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

CMemory **__cdecl operator_new(size_t Size);
void __cdecl operator_delete(void *pBlock);
// void __userpurge CBillingPacket::OnIOCallback(CBillingPacket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
void __thiscall CIOBuffer::Release(CIOBuffer *this); // idb
// _DWORD *__usercall CDBSocket::CDBSocket_0@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CIOObject::AddRef(volatile int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CIOObject::OnFree(CIOObject *this); // idb
// void unknown_libname_1();
// CIOObject *__userpurge CIOObject::`vector deleting destructor'@<eax>(CIOObject *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int a2);
// _DWORD *__usercall CAuthSocket::_CAuthSocket@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// int __usercall CAuthSocket::Start@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
_DWORD *__thiscall sub_4012D0(void *this);
// _DWORD *__thiscall unknown_libname_2(_DWORD *this);
// BOOL __usercall CAuthSocket::Stop@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __userpurge CAuthSocket::Initialize(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, LONG Value);
// void __userpurge CNMSocket::OnTimer(CNMSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int nId);
// void __usercall sub_401490(CIOObject *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CAuthSocket::OnRead(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
LONG __thiscall CIOBuffer::AddRef(volatile LONG *this);
BOOL __thiscall CIOObject::PostObject(CIOObject *this, int nId);
// void __usercall CAuthSocket::Process(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, unsigned __int16 *a1);
// void __usercall CIOObject::Release(volatile int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CAuthSocket::Write(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char a1, ...);
CAuthPacket *MemoryPool_CAuthPacket::_Alloc();
void __thiscall CIOSpinLock::Enter(CIOSpinLock *this); // idb
LONG __thiscall CIOSpinLock::Leave(volatile LONG *this);
void __cdecl CMemoryPool<CBillingPacket>::Free(CBillingPacket *pT); // idb
CAuthPacket *__thiscall CAuthPacket::CAuthPacket(CAuthPacket *this);
void __thiscall CIOObject::CIOObject(CIOObject *this); // idb
void *__thiscall CIOObject::_scalar_deleting_destructor_(void *this, char a2);
_DWORD *__thiscall CIOSocket::CIOTimerInstance::_CIOTimerInstance(void *this);
LONG __thiscall CMemoryPool_CAuthPacket::_CPool::_CPool(void *this);
LONG CMemoryPool<CBillingPacket>::FreeAll();
void __thiscall CMemoryPool_CSkill::_CPool::_CPool(void *this);
void __cdecl CMemoryPool_CSkill::_FreeAll(void *);
CBase *__thiscall CBase::CBase(CBase *this);
// void __usercall CBase::OnDelete(volatile int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __stdcall unknown_libname_3(int a1);
// void __stdcall CMonster::ResetNextMove(int a1, int a2);
// void *__userpurge CBase::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CBase::_CBase@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CBase::OnFree(void (__thiscall ***this)(void *, int)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall CBase::Set(void *this, int a2, int a3);
// _DWORD *__thiscall std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(_DWORD *this, _DWORD *a2);
int __thiscall sub_402360(_DWORD *this);
int __thiscall sub_402380(_DWORD *this);
lisp::var *__thiscall lisp::var::pop(lisp::var *this, lisp::var *result); // idb
// CMemory **__userpurge CBaseList::Push@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// int __usercall CBaseList::Pop@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
CMemory **CMemoryPool_CBaseList::_Alloc();
LONG __cdecl CMemoryPool_CBaseList::_Free(int a1);
LONG __cdecl CMemoryPool_CBaseList::_CPool::_CPool();
LONG __cdecl CMemoryPool_CBaseList::_FreeAll();
_DWORD *__thiscall sub_402550(_DWORD *this);
int __stdcall CBuff::UpdateBuff(int a1, int a2);
_DWORD *__thiscall std__locale__facet___scalar_deleting_destructor_(_DWORD *this, char a2);
_DWORD *__thiscall sub_4025F0(_DWORD *this);
CBuffMoveSpeed *__cdecl CBuff::CreateBuff(int a1, int a2, int a3, int a4);
CBuffMoveSpeed *__thiscall CBuffMoveSpeed::CBuffMoveSpeed(CBuffMoveSpeed *this, int a2, int a3, int a4);
CBuff *__thiscall CBuff::CBuff(CBuff *this, int a2, int a3, int a4, int a5);
CBuffStone *__thiscall CBuffStone::CBuffStone(CBuffStone *this, int a2, int a3, int a4, int a5);
void __stdcall CBuffMeditation::CBuffMeditation(int, int, int);
CBuffFatalChance *__thiscall CBuffFatalChance::CBuffFatalChance(CBuffFatalChance *this, int a2, int a3, int a4, int a5);
CBuff *__thiscall CBuffRevivalSequela::CBuffRevivalSequela(CBuff *this, int a2, int a3, int a4);
int __thiscall CBuffStun::CBuffStun(int this, int a2, int a3, int a4);
int __thiscall CBuffMoveStop::CBuffMoveStop(int this, int a2, int a3, int a4);
int __thiscall CBuffPoison::CBuffPoison(int this, int a2, int a3, int a4);
int __thiscall CBuffPoisonCloud::CBuffPoisonCloud(int this, int a2, int a3, int a4);
CBuff *__thiscall CBuffHaste::CBuffHaste(CBuff *this, int a2, int a3, int a4);
CBuff *__thiscall CBuffHP::CBuffHP(CBuff *this, int a2, int a3, int a4);
CBuff *__thiscall CBuffMP::CBuffMP(CBuff *this, int a2, int a3, int a4);
int __thiscall CBuffSleep::CBuffSleep(int this, int a2, int a3, int a4);
_DWORD *__thiscall sub_405FD0(_DWORD *this, int a2, int a3, int a4, int a5);
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::Copy(void *this);
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(CBuffCTDefensePer *this, void *Src);
_DWORD *__thiscall sub_406090(_DWORD *this, int a2, int a3, int a4);
CBuffCTHealing *__thiscall CBuffCTHealing::Copy(void *this);
CBuffCTHealing *__thiscall CBuffCTHealing::CBuffCTHealing(CBuffCTHealing *this, void *Src);
_DWORD *__thiscall sub_406150(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
_DWORD *__thiscall CBuffCTPrtyPtEx::Copy(void *this);
_DWORD *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(_DWORD *this, void *Src);
int __thiscall CBuffSuffering::CBuffSuffering(int this, int a2, int a3, int a4);
CBuff *__thiscall CBuffInchantWeapon::CBuffInchantWeapon(CBuff *this, int a2, int a3, int a4);
int __thiscall CBuffSpiritDmg::CBuffSpiritDmg(int this, int a2, int a3, int a4);
int __thiscall CBuffFlagPrty::CBuffFlagPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
CBuff *__thiscall CBuffFlagHP::CBuffFlagHP(CBuff *this, int a2, int a3, int a4);
int __thiscall CBuffBerserk::CBuffBerserk(int this, int a2, int a3, int a4, int a5);
int __thiscall CBuffSilenceShot::CBuffSilenceShot(int this, int a2, int a3, int a4);
int __thiscall CBuffManaBurn::CBuffManaBurn(int this, int a2, int a3, int a4);
int __thiscall CBuffPrty::CBuffPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall CBuffPrtyEx::CBuffPrtyEx(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
_DWORD *__thiscall CBuffExpire::CBuffExpire(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7);
_DWORD *__thiscall CBuffExpireEvent::CBuffExpireEvent(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall sub_4065D0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7);
CBuffRemainEx *__thiscall CBuffRemainEx::CBuffRemainEx(CBuffRemainEx *this, int a2, int a3, int a4, int a5, int a6);
CBuffRemain *__thiscall CBuffRemain::CBuffRemain(CBuffRemain *this);
int __thiscall CBuffRemainDead::CBuffRemainDead(int this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CBuffRemainDeadEx::CBuffRemainDeadEx(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall CBuffRemainXBlow::CBuffRemainXBlow(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CBuffRemainPrty::CBuffRemainPrty(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7);
_DWORD *__thiscall CBuffRemainCount::CBuffRemainCount(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall CBuffRemainPet::CBuffRemainPet(int this, int a2, int a3);
int __stdcall CBuffRemainPet::SetBuff(int a1);
int __thiscall CBuffHydrochloricAcid::CBuffHydrochloricAcid(int this, int a2, int a3, int a4);
CBuffMixDamage *__thiscall CBuffMixDamage::CBuffMixDamage(CBuffMixDamage *this, int a2, int a3, int a4, int a5);
// int __stdcall CSkill::CanExcuteM(int a1, int a2);
BOOL __thiscall CBuff::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffMoveSpeed::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffMoveSpeed::FreeBuff(_DWORD *this, int a2);
int __thiscall CBuffMoveSpeed::UpdateBuff(_DWORD *this, int a2, _DWORD *a3);
__int64 __thiscall CChar::IsMState(_QWORD *this, __int64 a2);
int __thiscall CBuffMoveSpeed::IsExpired(_DWORD *this, _QWORD *a2);
int __thiscall CBuffStone::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffStone::FreeBuff(_DWORD *this, int a2);
int __stdcall CBuffMeditation::ApplyBuff(int a1);
int __stdcall CBuffMeditation::FreeBuff(int a1);
BOOL __thiscall CBuffMeditation::IsExpired(_DWORD *this, _DWORD *a2);
int __cdecl RandomBetween(int nMin, int nMax);
int __thiscall BuffFatalChance::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffFatalChance::FreeBuff(_DWORD *this, int a2);
int __thiscall CBuffRevivalSequela::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffRevivalSequela::FreeBuff(_DWORD *this, int a2);
int __thiscall CBuffRevivalSequela::UpdateBuff(_DWORD *this, int a2, int a3);
int __thiscall CBuffStun::ApplyBuff(_DWORD *this, _DWORD *a2);
int __stdcall CBuffStun::FreeBuff(int a1);
int __thiscall CBuffStun::UpdateBuff(_DWORD *this, int a2, int a3);
int __thiscall CBuffStun::IsExpired(_DWORD *this, _QWORD *a2);
int __thiscall CBuffMoveStop::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffMoveStop::FreeBuff(void *this, int a2);
int __thiscall CBuffMoveStop::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffMoveStop::IsExpired(_DWORD *this, _QWORD *a2);
int __stdcall CBuffPoison::ApplyBuff(int a1);
int __stdcall CBuffPoison::FreeBuff(int a1);
int __thiscall CBuffPoison::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffPoison::IsExpired(_DWORD *this, int a2);
// int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD *this);
int __stdcall CBuffPoisonCloud::ApplyBuff(int a1);
int __stdcall CBuffPoisonCloud::FreeBuff(int a1);
int __thiscall CBuffPoisonCloud::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffPoisonCloud::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffHaste::ApplyBuff(_DWORD *this, _QWORD *a2);
int __thiscall CBuffHaste::FreeBuff(_DWORD *this, int a2);
int __stdcall CBuffHP::ApplyBuff(_QWORD *a1);
int __stdcall CBuffHP::FreeBuff(int a1);
int __stdcall CBuffMP::ApplyBuff(_QWORD *a1);
int __stdcall CBuffMP::FreeBuff(int a1);
BOOL __thiscall CBuffMP::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffSleep::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffSleep::FreeBuff(void *this, int a2);
int __thiscall CBuffSleep::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffSleep::IsExpired(_DWORD *this, _QWORD *a2);
int __thiscall CBuffCTDefensePer::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffCTDefensePer::FreeBuff(_DWORD *this, int a2);
int __stdcall CBuffCTHealing::ApplyBuff(int a1);
int __stdcall CBuffCTHealing::FreeBuff(int a1);
int __thiscall CBuffCTHealing::IsExpired(_DWORD *this, _DWORD *a2);
int __thiscall CBuffCTPrtyPtEx::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffCTPrtyPtEx::FreeBuff(_DWORD *this, int a2);
int __stdcall CBuffSuffering::ApplyBuff(int a1);
int __stdcall CBuffSuffering::FreeBuff(int a1);
int __thiscall CBuffSuffering::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffSuffering::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffInchantWeapon::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffInchantWeapon::FreeBuff(_DWORD *this, int a2);
int __stdcall CBuffSpiritDmg::ApplyBuff(int a1);
int __stdcall CBuffSpiritDmg::FreeBuff(int a1);
int __thiscall CBuffSpiritDmg::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffSpiritDmg::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffFlagPrty::ApplyBuff(_DWORD *this, int a2);
_DWORD *__thiscall CBuffFlagPrty::FreeBuff(_DWORD *this, int a2);
int __stdcall CBuffFlagHP::ApplyBuff(int a1);
int __stdcall CBuffFlagHP::FreeBuff(int a1);
int __thiscall CBuffFlagHP::UpdateBuff(_DWORD *this, int a2, int a3);
BOOL __thiscall CBuffHP::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffBerserk::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffBerserk::FreeBuff(_DWORD *this, int a2);
int __stdcall CBuffSilenceShot::ApplyBuff(int a1);
int __stdcall CBuffSilenceShot::FreeBuff(int a1);
int __thiscall CBuffSilenceShot::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffSilenceShot::IsExpired(_DWORD *this, _QWORD *a2);
int __stdcall CBuffManaBurn::ApplyBuff(int a1);
int __stdcall CBuffManaBurn::FreeBuff(int a1);
int __thiscall CBuffManaBurn::UpdateBuff(_DWORD *this, int a2, _QWORD *a3);
int __thiscall CBuffManaBurn::IsExpired(_DWORD *this, _QWORD *a2);
int __thiscall CBuffPrty::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffPrty::FreeBuff(int this, _QWORD *a2);
int __thiscall CBuffPrty::UpdateBuff(void *this, _DWORD *a2, _QWORD *a3);
int __thiscall CBuff::IsPrty(_DWORD *this, int a2);
BOOL __thiscall CBuffPrty::IsExpired(int this, _QWORD *a2);
int __thiscall CBuffPrtyEx::ApplyBuff(_DWORD *this, int a2);
_DWORD *__thiscall CBuffPrtyEx::FreeBuff(_DWORD *this, int a2);
int __thiscall CChar::IsMStateEx(_DWORD *this, int a2);
int __thiscall CBuffPrtyEx::UpdateBuff(_DWORD *this, _DWORD *a2, int a3);
BOOL __thiscall CBuffPrtyEx::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffExpire::SetBuff(_DWORD *this, _DWORD *a2);
int __thiscall CBuffExpire::ApplyBuff(_DWORD *this, _DWORD *a2);
BOOL __thiscall CBuffExpire::IsExpired(_DWORD *this, int a2);
int __thiscall CBuffExpireEvent::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffExpireEvent::FreeBuff(_DWORD *this, int a2);
int __thiscall CBuffExpireLuckyStone2::ApplyBuff(_DWORD *this, _DWORD *a2);
__int64 __thiscall CChar::IsBState(_QWORD *this, __int64 a2);
int __thiscall CBuffRemain::SetBuff(_DWORD *this, int a2);
int __thiscall CBuffRemain::ApplyBuff(_DWORD *this, _DWORD *a2);
void __thiscall CBuffExpire::FreeBuff(_DWORD *this, _DWORD *a2);
int __thiscall CBuffRemain::IsExpired(_DWORD *this, int a2);
void __thiscall CBuffRemain::SaveRemain(_DWORD *this, int a2);
int __thiscall CBuffRemainEx::SetBuff(_DWORD *this, int a2);
LONG __thiscall CChar::AddGState(volatile LONG *this, int a2);
int __thiscall CBuffRemainEx::ApplyBuff(_DWORD *this, _DWORD *a2);
void __thiscall CBuffRemainEx::FreeBuff(_DWORD *this, _DWORD *a2);
int __thiscall CBuffRemainDead::SetBuff(_DWORD *this, int a2);
int __thiscall BuffRemainDead::ApplyBuff(_DWORD *this, int a2);
void __thiscall CBuffRemainDead::FreeBuff(_DWORD *this, int a2);
int __thiscall CBuffRemainDeadEx::SetBuff(_DWORD *this, int a2);
_DWORD *__thiscall CPlayer::AddEState(_DWORD *this, int a2);
int __thiscall CBuffRemainXBlow::ApplyBuff(_DWORD *this, _DWORD *a2);
int __thiscall CBuffRemainPrty::SetBuff(_DWORD *this, int a2);
int __thiscall CBuffRemainPrty::ApplyBuff(_DWORD *this, _DWORD *a2);
int __thiscall CBuffRemainPrty::FreeBuff(_DWORD *this, _DWORD *a2);
int __thiscall CBuffRemainCount::UpdateBuff(_DWORD *this, _DWORD *a2, int a3);
int __thiscall CBuffRemainLuckyStone1::ApplyBuff(_DWORD *this, _DWORD *a2);
int __thiscall CBuffRemainPet::ApplyBuff(_DWORD *this, int a2);
void __thiscall CBuffRemainPet::FreeBuff(_DWORD *this, int a2);
// int __userpurge CBuffRemainPet::IsExpired@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a2);
int __thiscall CBuffHydrochloricAcid::ApplyBuff(_DWORD *this, int a2);
int __stdcall CBuffHydrochloricAcid::FreeBuff(int a1);
int __thiscall CBuffHydrochloricAcid::IsExpired(_DWORD *this, int *a2);
int __thiscall CBuffMixDamage::ApplyBuff(_DWORD *this, int a2);
int __thiscall CBuffMixDamage::IsExpired(_DWORD *this, int *a2);
CCalendar *__thiscall CCalendar::CCalendar(CCalendar *this);
_DWORD *__thiscall CCalendar::_scalar_deleting_destructor_(_DWORD *this, char a2);
_DWORD *__thiscall CCalendar::_CCalendar(_DWORD *this);
// void __usercall CCalendar::Start(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __setargv();
int CCalendar::GetTime();
// void __userpurge CCalendar::OnTimer(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __usercall CCalendar::ElapseTime(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int CCalendar::IsIntercalary();
CChar *__thiscall CChar::CChar(CChar *this);
BOOL __thiscall CChar::Index(_DWORD *this, int a2);
int __stdcall CMonsterSiegeGunBall::Damage(int a1, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CChar::AddMState(_DWORD *this, int a2, int a3);
LONG __thiscall CChar::SubGState(volatile LONG *this, int a2);
LONG __thiscall CChar::AddMStateEx(volatile LONG *this, int a2);
LONG __thiscall CChar::SubMStateEx(volatile LONG *this, int a2);
int __thiscall CChar::SubMState(_DWORD *this, int a2, int a3);
int __thiscall CChar::GetFinalDefense(_DWORD *this, int a1);
int __thiscall CChar::GetFinalAbsorb(void *this, int a2);
int __thiscall CChar::GetFinalResist(_DWORD *this, int a1, int a2);
int __stdcall CChar::GetMSpeed(int a1);
// void __userpurge CChar::UpdateChild(volatile int *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void *__userpurge CChar::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CChar::_CChar@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall CChar::ReviseProperty(_DWORD *this);
int __thiscall CChar::GetDropPt(_DWORD *this, int *a2);
_DWORD *__thiscall CChar::SetXY(_DWORD *this, _DWORD *a2);
void __thiscall CChar::SetDirection(_DWORD *this, int Number, int a3);
int __thiscall CChar::SetReverseDirection(_DWORD *this, __int16 a2);
BOOL __thiscall CChar::IsNormal(int this);
int __thiscall CBase::IsDeleted(_DWORD *this);
int __thiscall CChar::IsGState(_DWORD *this, int a2);
// void __userpurge CChar::SetBuff(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// int __userpurge CChar::AddBuff@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a2);
int __thiscall CChar::_FindBuff(_DWORD *this, int a2);
// int __userpurge CChar::GetBuffRemain@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __userpurge CChar::UpdateBuff(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __usercall CChar::RefreshBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge CChar::CancelBuff(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __usercall CChar::CancelAllBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CChar::DeleteAllBuff(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge CChar::CancelBuffPrty(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
// void __usercall CChar::ResetAllBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CChar::SaveAllBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CChar::WriteInSight(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, char a2, ...);
// void __usercall CChar::WriteInRect(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, char a2, int a3, ...);
void __thiscall CConfig::CConfig(CConfig *this); // idb
_DWORD *__thiscall std__ios_base__ios_base(_DWORD *this);
void __thiscall CConfig::_CConfig(CConfig *this);
void __thiscall CConfig::Close(CConfig *this); // idb
void __cdecl free_var(int (__thiscall ***a1)(_DWORD));
int __thiscall sub_40BCA0(_DWORD *this);
int __thiscall sub_40BCC0(_DWORD *this);
int __thiscall sub_40BCE0(_DWORD *this);
int __thiscall sub_40BD00(_DWORD *this);
int __thiscall sub_40BD20(_DWORD *this);
int __thiscall CConfig::GetToken(char *this);
lisp::var *__thiscall CConfig::Find(CConfig *this, lisp::var *result, const char *key); // idb
_DWORD *__thiscall CConfig::GetValue(int this, _DWORD *a2);
void __thiscall lisp::_string::_string(lisp::_string *this, const char *str); // idb
_DWORD *sub_40C330();
_DWORD *__thiscall std__ios_base__ios_base_0(_DWORD *this);
const char *sub_40C360();
// char unknown_libname_7();
char *__cdecl Strdup(const char *str); // idb
_DWORD *__thiscall CConfig::GetList(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_40C4E0(_DWORD *this, int a2);
_DWORD *__thiscall lisp::_cons::_cons(_DWORD *this, int a2, int a3);
// char *__thiscall unknown_libname_8(char *this);
// char *__thiscall unknown_libname_9(char *this);
int __thiscall CConfig::Open(_DWORD *this, char *FileName);
int __thiscall sub_40C8D0(_DWORD *this);
const char *__thiscall CConfig::Get(CConfig *this, const char *key); // idb
const char *__thiscall CConfig::Get(CConfig *this, const char *key, const char *defaultValue); // idb
int __thiscall sub_40C970(CConfig *this, char *String2);
int __thiscall CConfig::GetInt(CConfig *this, char *String2, int a3);
int __cdecl CConfig::GetTimeStamp(); // idb
int __thiscall CDBPacket::OnIOCallback(CIOBuffer **this, int a2, int a3, int a4);
_DWORD *__thiscall CDBSocket::CDBSocket(_DWORD *this);
void *__thiscall CDBSocket::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CDBSocket::_CDBSocket(_DWORD *this);
int CDBSocket::Start();
void CDBSocket::Stop();
BOOL CDBSocket::OnClose();
void __thiscall CDBSocket::OnRead(int this);
void __cdecl CDBSocket::Process(unsigned __int16 *a1);
int __thiscall CSocket::IsSBit(_DWORD *this, char a2);
void CDBSocket::Write(char a1, ...);
CDBPacket *CMemoryPool_CDBPacket::_Alloc();
LONG __cdecl CMemoryPool_CDBPacket::_Free(int a1);
CDBPacket *__thiscall CDBPacket::CDBPacket(CDBPacket *this);
void *__thiscall CDBPacket::_scalar_deleting_destructor_(void *this, char a2);
void __thiscall CMemoryPool_CDBPacket::_CPool::_CPool(int *);
LONG CMemoryPool_CDBPacket::_FreeAll();
_DWORD *__thiscall CFindPath::CFindPath(_DWORD *this);
int __thiscall CFindPath::_CFindPath(void *this);
int __thiscall CFindPath::FindPath(void *this, int *a2, int *a3);
int __cdecl sub_40E130(_DWORD *a1, _DWORD *a2);
int __thiscall CFindPath::CalcH(_DWORD *this, _DWORD *a2);
int __thiscall CFindPath::GetBestNode(_DWORD *this);
_DWORD *__thiscall CFindPath::FreeNode(_DWORD *this);
int __stdcall sub_40E270(int a1);
_DWORD *__thiscall CFindPath::LinkChild(int *this, int a2, int Number, int a4);
_DWORD *__thiscall CFindPath::CheckList(_DWORD *this, _DWORD *a2, unsigned int a3);
_DWORD *__stdcall CFindPath::Propagation(_DWORD *a1);
_DWORD *__thiscall CFindPath::Insert(int *this, _DWORD *a2);
int CMemoryPool_CFindPath::NODE::_Alloc();
LONG __cdecl CMemoryPool_CFindPath::NODE::_Free(_DWORD *a1);
_DWORD *__thiscall CFindPath::NODE::NODE(_DWORD *this, int a2, int a3);
_DWORD *__thiscall CMemoryPool_CAuthPacket::_CPool::CPool(_DWORD *this);
LONG __thiscall CMemoryPool_CFindPath::NODE::_CPool::_CPool(void *this);
void __cdecl CMemoryPool_CFindPath::NODE::_FreeAll(void *);
_DWORD *__thiscall CGoto::CGoto(_DWORD *this);
void *__thiscall CGoto::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CGoto::_CGoto(_DWORD *this);
int __cdecl CGoto::FindGoto(char *_Keyval, _DWORD *a2);
int __thiscall CGoto::Set(_DWORD *this, int a2, char a3);
int __thiscall CGoto::OnLoad(_DWORD *this);
_DWORD *__thiscall CPortal::CPortal(_DWORD *this);
void *__thiscall CPortal::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CPortal::_CPortal(_DWORD *this);
int __thiscall CPortal::Set(_DWORD *this, int a2, int a3);
int __thiscall CPortal::OnLoad(_DWORD *this);
int __cdecl CPortal::OpenPortal(int a1);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::insert(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *result, const std::pair<char const * const,CItem *> *_Val); // idb
bool __thiscall StrCmp::operator()(StrCmp *this, const char *a, const char *b); // idb
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::find(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval); // idb
void *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(_DWORD *this, void *a2);
CMemory ***__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::push_back(int *this, const void *a2);
_DWORD *__thiscall sub_40F000(_DWORD *this, _DWORD *a2, _DWORD *a3);
int __thiscall sub_40F040(void *this);
int __cdecl sub_40F060(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result); // idb
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::lower_bound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval); // idb
int __thiscall sub_40F0D0(int *this, int a2, char a3, int C, int a5);
int __thiscall sub_40F510(void *this);
void __thiscall std::length_error::length_error(std::length_error *this, const std::string *_Message); // idb
int __thiscall sub_40F580(int this, std::string *_Right);
void __thiscall std::locale::facet::facet(std::locale::facet *this, unsigned int _Initrefs); // idb
// int __thiscall unknown_libname_10(_DWORD *this);
void *__thiscall sub_40F610(void *this, char a2);
_DWORD *__thiscall sub_40F640(_DWORD *this);
_DWORD *__thiscall sub_40F660(int this);
std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *__thiscall sub_40F680(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this, char a2);
void __thiscall std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>::~time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this); // idb
void __thiscall sub_40F6E0(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this);
std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *__thiscall sub_40F700(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this, char a2);
void __thiscall std::string::string(std::string *this, const std::string *_Right); // idb
void __thiscall sub_40F780(std::string *this);
std::string *__thiscall std::string::assign(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count); // idb
// int __cdecl std::char_traits<char>::copy(void *, void *Src, size_t Size); idb
// int __thiscall unknown_libname_11(_DWORD); weak
void __thiscall std::string::_Tidy(std::string *this, bool _Built, unsigned int _Newsize); // idb
std::string *__thiscall std::string::erase(std::string *this, unsigned int _Off, unsigned int _Count); // idb
void *__cdecl sub_40F9B0(void *a1, void *Src, size_t Size);
void __thiscall std::string::_Eos(std::string *this, unsigned int _Newsize); // idb
// _DWORD __cdecl std::char_traits<char>::assign(_DWORD, _DWORD); weak
BOOL __thiscall std::string::_Grow(std::string *this, unsigned int _Newsize, bool _Trim);
// int __thiscall unknown_libname_32(_DWORD); weak
void __thiscall sub_40FB00(std::string *this, int a2, size_t Size);
CMemory **__stdcall sub_40FC00(size_t Size);
CMemory **__cdecl sub_40FC50(size_t Size);
CMemory ***__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_Insert(_DWORD *this, char a2, const void *a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_40FCF0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
void __thiscall std::string::string(std::string *this, const char *_Ptr); // idb
std::string *__thiscall std::string::assign(std::string *this, const char *_Ptr); // idb
// int __cdecl std::char_traits<char>::length(char *Str); idb
std::string *__thiscall std::string::assign(std::string *this, const char *_Ptr, unsigned int _Num); // idb
bool __thiscall std::string::_Inside(std::string *this, const char *_Ptr); // idb
// int __cdecl _tolower(int C);
int sub_40FE70();
std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const char *const *_Keyval); // idb
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lrotate(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Wherenode); // idb
int *__thiscall sub_410050(int *this, int a2);
CMemory **__stdcall sub_410180(int a1, int a2, int a3, _DWORD *a4, char a5);
// void *__cdecl operator new(unsigned int, void *); idb
CMemory **__stdcall sub_410210(int a1, int a2, const void *a3);
_DWORD *__thiscall sub_410280(_DWORD *this, unsigned int a2);
CMemory **__stdcall sub_4102F0(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_410310(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
int std::allocator<CryptoPP::Integer>::max_size();
CMemory **__stdcall sub_410360(int a1);
int sub_410380();
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::_Dec(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this); // idb
_DWORD *__thiscall sub_410480(_DWORD *this, int a2, int a3, int a4, _DWORD *a5, char a6);
_DWORD *__thiscall sub_4104E0(_DWORD *this, int a2, int a3, const void *a4);
std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *__cdecl std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Max(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Pnode); // idb
CMemory **__cdecl sub_410560(int a1);
CMemory **__cdecl sub_410580(int a1);
void __thiscall std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>>::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>>(std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *this); // idb
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const iless *_Parg, const std::allocator<std::pair<char const * const,CItem *> > *_Al); // idb
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Init(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this); // idb
int sub_410680();
void *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(void *this);
int sub_4107E0();
void __thiscall sub_410880(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
void __thiscall sub_4108A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this);
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tidy(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this); // idb
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::erase(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_410A10(int *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_4111A0(_DWORD *this, std::string *a2);
void __thiscall sub_4111D0(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this);
std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *__thiscall sub_4111F0(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this, char a2);
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::clear(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this); // idb
std::vector<std::string>::iterator *__thiscall std::vector<std::string>::iterator::operator++(std::vector<std::string>::iterator *this, std::vector<std::string>::iterator *result, int __formal); // idb
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Erase(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Rootnode); // idb
int __cdecl sub_411330(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_411370(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_411390(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this);
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::_Inc(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this); // idb
void __cdecl std::swap<char>(char *_Left, char *_Right); // idb
char *__thiscall CGuild::CGuild(char *this);
void *__thiscall CGuild::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CGuild::_CGuild(_DWORD *this);
int __thiscall sub_4116E0(void *this);
void CGuild::Stop();
int __thiscall CBase::Delete(char *this);
void CGuild::SecondProcess();
int __cdecl CGuild::MinuteProcess(unsigned int a1);
void __thiscall CGuild::OnDelete(int this);
int __cdecl CGuild::IsLoad(char a1);
void __cdecl CGuild::Load(char *a1, char *packet, int a3);
void __cdecl CGuild::Login(int a1);
void __cdecl CGuild::LoginCastle(int a1, int a2);
void __thiscall CGuild::Logout(int this, int a2);
void __cdecl CGuild::DelPlayer(int a1, int a2);
int __cdecl CGuild::CreateTrial(int a1);
void __thiscall CChar::Lock(int this);
void __thiscall CChar::Unlock(int this);
unsigned int __thiscall CParty::GetSize(int this);
int __thiscall CGuild::CreateTrialSecedeAnswer(char *this, int a2, int a3, int a4);
int __thiscall CGuild::CreateConsent(char *this, int a2, int a3);
int __thiscall CGuild::IsAllConsent(int this);
int __stdcall CGuild::CreateGuildName(int, char *Str1); // idb
int __thiscall CGuild::CreateGuildNameAnswer(int this, int a2, int a3, char *Source);
int __thiscall CGuild::IsSkillAble(_DWORD *this, int a2, char a3);
int __thiscall CGuild::Conflux(_DWORD *this, int a2, int a3);
int __cdecl CGuild::ConfluxAnswer(_DWORD *a1, int a2, char a3, int a4);
int __cdecl CGuild::ConfluxSecedeAnswer(int a1, int a2, int a3);
BOOL __thiscall CGuild::IsTempMemberFUll(int this);
int __thiscall CGuild::Secession(_DWORD *this, int a2);
int __thiscall CGuild::Banish(_DWORD *this, int a2, char *Str1);
int __thiscall CGuild::Appointment(_DWORD *this, int a2, char *Str1, char *a4);
int __thiscall CGuild::Dissolution(int this, int a2);
int __thiscall CGuild::TitleChange(int this, int a2, char *Str1, char *Source);
int __thiscall CGuild::SetTodayMessage(int this, int a2, char *Source);
void __thiscall CGuild::GetTodayMessage(char *this, int a2);
int __thiscall CGuild::SendMemberInfo(int this, int a2, int a3);
int __thiscall CGuild::AdminInfo(_DWORD *this, int a2);
int __thiscall CGuild::BasicInfo(_DWORD *this, int a2);
int __thiscall CGuild::SetSkillAble(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall CGuild::CheckStandard(int *this, _DWORD *a2, int a3);
int __thiscall CGuild::SetStandard(int *this, _DWORD *a2, int a3);
int __thiscall CGuild::OnSetStandard(int this, int a2, int a3, int a4, int a5);
int __thiscall CGuild::SetExpADD(int *this, _DWORD *a2, int a3);
int __cdecl CGuild::SetExp(char *Str, int); // idb
int __stdcall CGuild::SetConnectTell(int a1, int a2);
void __stdcall CGuild::SetMemberLelvelUp(int a1, unsigned __int8 a2);
int __thiscall CGuild::GetTitle2Class(const char *this, char *Str1);
char *__thiscall CGuild::GetClass2Title(char *this, int a2);
char *__thiscall CGuild::SetClassTitle(char *this, int a2, char *Source);
BOOL __thiscall CGuild::IsMemberFull(int this);
int __thiscall CGuild::IsAppointmentFull(int this, int a2);
int __thiscall CGuild::GetAppointmentLimitTime(int this, int a2);
int __stdcall CGuild::IsSameName(char *Str1); // idb
CIOObject *__cdecl sub_416230(char a1);
int __cdecl CGuild::FindGuild(char *Str1); // idb
int __thiscall CGuild::FindLeaderPlayer(int this);
const char *__thiscall CGuild::GetLeaderName(int this);
int __thiscall CGuild::FindMember(int this, int a2, char *Str1);
// char *__usercall CGuild::Create@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char *a4);
// int __userpurge CGuild::MemberADD@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7);
// _DWORD *__userpurge CGuild::MemberDEL@<eax>(int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int a4);
// BOOL __userpurge CGuild::SetLevel@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int a4);
int __cdecl CGuild::GetGuildSkill(int a1);
void __thiscall CGuild::SetPointADD(_DWORD *this, int a2, int a3, int a4);
int __thiscall CGuild::CalPenaltyLevel(int *this);
int __thiscall CGuild::CalPenaltyTLevel(int *this);
void __stdcall CGuild::BroadcastLock(void *a1, int a2);
BOOL __thiscall CGuild::Broadcast(int this, void *Src, int a3);
// void __usercall CGuild::SendPlayerSight(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, void *Src, int a6);
int __thiscall CGuild::AllianceOffer(_DWORD *this, int a2, char *Str1, int a4);
int __thiscall CGuild::AllianceOfferAnswer(int this, int a2, int a3, int a4, int a5);
int __thiscall CGuild::SetAlliance(int this, int a2, int a3);
void __thiscall CGuild::AllianceBroadcast(_DWORD *this, int a2);
BOOL sub_4173F0();
BOOL CGuild::IsDeclareWarPeriod();
BOOL CGuild::IsWarWaitingPeriod();
BOOL CGuild::IsWarringPeriod();
__time32_t CGuild::GetWarEndTime();
int __thiscall CGuild::WarDeclare(_DWORD *this, int a2, int a3);
void __cdecl CGuild::WarDelcareList(int a1, char a2);
int __thiscall CGuild::TrialUnfurlStandard(_DWORD *this, _DWORD *a2, int a3);
void __thiscall CGuild::UnfurlStandard(int this, int a2, int a3);
void __cdecl CGuild::BrokenStandard(int a1);
void __cdecl CGuild::BrokenGate(int a1, int a2);
int __cdecl CGuild::CanAttack(CIOObject *a1, CIOObject *a2);
int __thiscall CGuild::CastleInfo(void *this, int a2, char a3);
int __stdcall CGuild::TaxRateControl(int a1, int a2, int a3);
int __thiscall CGuild::TaxLevy(_DWORD *this, int a2, int a3);
int __cdecl CGuild::CastleGateNPC(int a1, char a2, int a3);
int __stdcall CGuild::CastleSetGateLmit(int a1, int a2, int a3);
int __thiscall CGuild::IsAlliancePeriod(_DWORD *this, int a2);
void __cdecl CGuild::ChangePlayerName(int a1, int a2, char *Source);
void __cdecl CGuild::ChangeGuildName(int a1, int a2, char *Source);
int __thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval);
_DWORD *__thiscall sub_418480(_DWORD *this);
void __thiscall std::map<unsigned long,ncf::kernel::NetworkSession *>::map<unsigned long,ncf::kernel::NetworkSession *>(std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *this); // idb
int __thiscall sub_418510(void *this);
_DWORD *__thiscall sub_418530(_DWORD *this);
int __thiscall std::vector<unsigned long>::size(std::vector<unsigned long> *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4185D0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __stdcall sub_418670(void *a1);
BOOL __stdcall sub_4186F0(_DWORD *a1, _DWORD *a2);
int __stdcall sub_418710(void *a1);
int __thiscall sub_418790(_DWORD *this);
int __thiscall sub_4187B0(int *this);
int *__thiscall sub_418860(int *this);
int *__thiscall sub_418880(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4188A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
std::pair<char const * const,CItem *> *__cdecl sub_418940(std::pair<char const * const,CItem *> *a1, char *_Val1, CItem *_Val2);
_BYTE *__cdecl sub_418960(_BYTE *a1, _BYTE *a2);
_WORD *__cdecl sub_418980(_WORD *a1, _WORD *a2);
_BYTE *__cdecl sub_4189A0(_BYTE *a1, char a2);
BOOL __cdecl std::_Distance2<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, char a2, _DWORD *a3);
void *__thiscall sub_418A00(void *this);
int __thiscall sub_418A30(int *this);
int __thiscall sub_418A50(int *this);
int __thiscall sub_418A70(int *this);
_DWORD *__thiscall CAlliance::CAlliance(_DWORD *this);
void *__thiscall CAlliance::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CAlliance::_CAlliance(_DWORD *this);
void CAlliance::Stop();
int __thiscall CAlliance::Clear(int this);
void __thiscall CAlliance::OnDelete(int this);
int __cdecl CAlliance::IsLoad(int a1);
void __cdecl CAlliance::Load(char *packet);
void __cdecl CAlliance::LoadSetGuild(int a1, int a2, int a3);
void *__thiscall CAlliance::DeleteSetGuild(void *this, int a2);
int __cdecl CAlliance::Join(char *a1, char *Source, int a3, int a4, char *a5, int a6, int a7);
void CAlliance::PostponeExpire();
void __thiscall CAlliance::Postpone(_DWORD *this, int a2, unsigned int a3);
void __cdecl CAlliance::Expire(unsigned int a1);
void __thiscall CAlliance::AllianceInfo(const char *this, int a2);
_DWORD *__thiscall CAlliance::Add(_DWORD *this, int a2);
int __thiscall CAlliance::GetSize(_DWORD *this);
volatile int *__thiscall CWar::SetGuild(volatile int **this, volatile int *a2);
void __thiscall CAlliance::BroadcastLock(_DWORD *this, void *a2);
void *__thiscall CAlliance::Broadcast(void *this, void *a2);
void __cdecl CAlliance::ChangeLeaderName(int a1, int a2, char *Source);
void __cdecl CAlliance::ChangeGuildName(int a1, int a2, char *Source);
char *__thiscall CCastle::CCastle(char *this);
void *__thiscall CCastle::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CCastle::_CCastle(_DWORD *this);
BOOL CCastle::Start();
void CCastle::Stop();
void __cdecl CCastle::Load(int a1, int a2);
BOOL __cdecl CCastle::SetWarGuild(volatile int *a1, volatile int *a2);
int __cdecl CCastle::WarBegin(int a1);
int __cdecl CCastle::WarPortal(int a1, int a2, int a3, int a4);
int __thiscall CCastle::_WarMsg(_DWORD *this, void *a2);
void __thiscall CCastle::WarMsg(_DWORD *this, void *a2);
int __cdecl CCastle::WarList(_DWORD *a1, int a2);
void __thiscall CCastle::OnDelete(int this);
volatile int *__thiscall CCastle::SetGuild(volatile int **this, volatile int *a2);
int __cdecl CCastle::GetCastle(char a1);
int __cdecl CCastle::GetMonsterTile2CID(int a1, int a2, int a3);
int __thiscall CCastle::SubGateState(void *this, int a2, int a3);
BOOL __thiscall CCastle::IsLord(_DWORD *this, int a2);
BOOL __thiscall CCastle::IsAlliance(_DWORD *this, int a2);
int __thiscall CCastle::IsAlreadyDeclare(_DWORD *this, int a2);
int __cdecl CCastle::IsAllCastleWarRelation(int a1);
void __cdecl CCastle::Login(_DWORD *a1, int a2);
void __thiscall CCastle::WarAllianceADD(_DWORD *this, int a2, int a3, int a4, char *a5);
void __thiscall CCastle::WarADD(_DWORD *this, int a2, int a3, char *Source, int a5);
int __thiscall CCastle::GetWarSize(_DWORD *this);
void __thiscall CCastle::WarDelcareList(_DWORD *this, int a2);
BOOL __thiscall CCastle::IsStandardAlive(_DWORD *this);
int __thiscall CCastle::GetStandardUnfurl(_DWORD *this);
void __thiscall CCastle::SetStandardUnfurl(_DWORD *this, int a2);
void __thiscall CCastle::SetCurStandardGuild(int this, int a2, int a3);
void __cdecl CCastle::UnfurlStandardCancel(int a1);
int __thiscall CCastle::BrokenStandard(_DWORD *this, int a2);
int __cdecl CCastle::CreateStandard(int, int, char *Source, int); // idb
void __thiscall CCastle::CreateGate(int this, int a2, int a3, char *Source);
int *__stdcall CCastle::CreateNoExistGate(int a1, int a2, char *Source);
int __cdecl CCastle::IsGateAlive(char a1, unsigned int _Pos);
int __thiscall CCastle::GetTaxRate(_DWORD *this);
void __thiscall CCastle::SetTaxRate(_DWORD *this, int a2, int a3);
BOOL __thiscall CCastle::IsPayment(_DWORD *this);
int __thiscall CCastle::GetTax(_DWORD *this);
void __thiscall CCastle::AddTax(_DWORD *this, int a2);
int __thiscall CCastle::ResetTax(_DWORD *this, int a2);
char CCastle::TaxSave();
int __thiscall CCastle::IsGateUse(_DWORD *this, int a2);
int __thiscall CCastle::IsGateUseWarring(_DWORD *this, int a2);
int __cdecl CCastle::GateGoto(int a1, int a2);
int __thiscall CCastle::SetGateLimit(_DWORD *this, int a2, int a3);
void __cdecl CCastle::SetWarRemainSecondTime(int a1);
void __cdecl CCastle::ChangeLeaderName(int a1, char *Source);
void __cdecl CCastle::ChangeGuildName(int a1, char *Source);
void __thiscall CCastle::SetLordDeclare(_DWORD *this, int a2);
void CCastle::SecondProcess();
int __thiscall CCastle::WarEnd(int this);
int __thiscall CCastle::IsWarEnd(_DWORD *this);
void __thiscall CCastle::ChangeLord(int this);
int CCastle::IsWarDeclared();
_DWORD *__thiscall CWar::CWar(_DWORD *this);
void *__thiscall CWar::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CWar::_CWar(_DWORD *this);
BOOL CWar::Start();
void __cdecl CWar::Load(int a1, char *packet);
void __thiscall CWar::OnDelete(volatile int **this);
_DWORD *__thiscall CWar::ADD(_DWORD *this, int a2);
int __thiscall CWar::Clear(int this);
_DWORD *__thiscall sub_41C710(_DWORD *this);
_DWORD *__thiscall sub_41C770(_DWORD *this);
void __thiscall std::vector<CIOSocket::CIOTimer>::vector<CIOSocket::CIOTimer>(std::vector<CIOSocket::CIOTimer> *this); // idb
unsigned int *__thiscall std::vector<unsigned long>::operator[](std::vector<unsigned long> *this, unsigned int _Pos); // idb
void __thiscall std::vector<CIOSocket::CIOTimer>::push_back(std::vector<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Val); // idb
void *__thiscall std___String_base___String_base(void *this);
int __stdcall sub_41C8D0(void *a1);
int __stdcall sub_41C950(void *a1);
_DWORD *__thiscall std::vector<CIOSocket::CIOTimer>::insert(int *this, _DWORD *a2, void *Src, int a4);
unsigned int *__thiscall std::vector<unsigned long>::_Ufill(std::vector<unsigned long> *this, unsigned int *_Ptr, unsigned int _Count, const unsigned int *_Val); // idb
void __thiscall std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *this, const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *_Val1, const bool *_Val2); // idb
_DWORD *__thiscall sub_41CAB0(_DWORD *this);
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval); // idb
unsigned int __thiscall sub_41CB60(std::allocator<unsigned long> *this);
void __thiscall sub_41CB80(int this, void *Src, int _Count, int a4);
CMemory **__stdcall sub_41CE40(int a1);
std::vector<unsigned long>::iterator *__thiscall std::vector<unsigned long>::iterator::operator+=(std::vector<unsigned long>::iterator *this, int _Off); // idb
int __thiscall std::vector<CIOSocket::CIOTimer>::iterator::operator-(std::vector<CIOSocket::CIOTimer>::iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right); // idb
_DWORD *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::const_iterator::operator++(_DWORD *this);
int __thiscall sub_41CEE0(_DWORD *this, _DWORD *a2);
// _DWORD __stdcall unknown_libname_12(_DWORD); weak
unsigned int *__stdcall std::vector<CIOSocket::CIOTimer>::_Ucopy<CIOSocket::CIOTimer *>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest);
void __cdecl sub_41CF60(unsigned int *_First, unsigned int _Count, unsigned int *_Val);
void *__cdecl std::_Copy_backward_opt<unsigned long *,unsigned long *>(void *Src, int a2, int a3);
// int __cdecl unknown_libname_13(void *Src, int, void *); idb
void *__thiscall sub_41D000(void *this);
void *__thiscall sub_41D030(void *this);
int __thiscall sub_41D060(int *this);
int __thiscall sub_41D080(int *this);
int __thiscall sub_41D0A0(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D150(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_41D1F0(int *this);
int __thiscall sub_41D210(int *this);
int __thiscall sub_41D230(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D2E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall CInitItem::CInitItem(_DWORD *this);
void *__thiscall CInitItem::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CInitItem::_CInitItem(int this);
int __thiscall sub_41D5C0(void *this);
int CInitItem::Open();
int __cdecl CInitItem::FindKey(char a1);
_DWORD *CInitItem::Copy();
int __thiscall CInitItem::Set(char *this, int a2, int a3);
int __thiscall CInitItem::OnLoad(int this);
int __stdcall CInitItem::SetSpec(int a1);
_DWORD *__thiscall sub_41EAA0(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_41EAE0(_DWORD *this, int a2);
int __thiscall CSpecPrty::CSpecPrty(int this, int a2, char *a3, struct CryptoPP::CallStack *a4);
int __thiscall CSpec::CSpec(int this, int a2, int a3);
_DWORD *__thiscall CSpecGState::CSpecGState(_DWORD *this, int a2);
// Concurrency::scheduler_worker_creation_error *__thiscall CSpecTeleport::CSpecTeleport(Concurrency::scheduler_worker_creation_error *this, const char *a2, int a3);
// _DWORD __thiscall CSpecRefresh::CSpecRefresh(Concurrency::scheduler_worker_creation_error *__hidden this, const char *, int); idb
_DWORD *__thiscall CSpecCharming::CSpecCharming(_DWORD *this, int a2);
_DWORD *__thiscall CSpecRepair::CSpecRepair(_DWORD *this, int a2);
_DWORD *__thiscall CSpecChangePrefix::CSpecChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CSpecProtect::CSpecProtect(_DWORD *this);
_DWORD *__thiscall CSpecBuff::CSpecBuff(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall CSpecRevival::CSpecRevival(_DWORD *this, int a2);
BOOL __thiscall CInitItem::ApplySpec(int this, int a2);
BOOL __thiscall CInitItem::FreeSpec(int this, int a2);
int __thiscall CInitItem::Use(int this, int a2);
int __thiscall CInitItem::Enchant(int this, int a2, int a3);
int __cdecl CInitItem::GetSpecValue(int a1, int a2, char a3);
_DWORD *__thiscall CPrefix::CPrefix(_DWORD *this);
void *__thiscall CPrefix::_scalar_deleting_destructor_(void *this, char a2);
// _DWORD *__usercall CPrefix::_CPrefix@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
_DWORD *CPrefix::Copy();
int __thiscall CPrefix::Set(_DWORD *this, char *_Val1, int a3);
int __thiscall CPrefix::OnLoad(CItem *this);
BOOL __thiscall CPrefix::ApplySpec(int this, int a2);
BOOL __thiscall CPrefix::FreeSpec(int this, int a2);
int __thiscall CSpecPrty::ApplySpec(_DWORD *this, int a2);
int __thiscall CSpecPrty::FreeSpec(_DWORD *this, int a2);
LONG __thiscall CSpecGState::ApplySpec(int *this, volatile LONG *a2);
LONG __thiscall CSpecGState::FreeSpec(int *this, volatile LONG *a2);
int __thiscall CSpecTeleport::Use(_DWORD *this, _DWORD *a2);
int __thiscall CParty::ExistOnPK(int this);
int __thiscall CSpecRefresh::Use(_DWORD *this, int a2);
int __thiscall CSpecCharming::Enchant(_DWORD *this, int a2, int a3);
int __stdcall CSpecRepair::Enchant(int a1, int a2);
int __thiscall CSpecChangePrefix::Enchant(_DWORD *this, int a2, int a3);
int __stdcall CSpecProtect::Enchant_(int a1, int a2);
int __thiscall CSpecBuff::Use(int *this, int a2);
int __thiscall CSpecRevival::Use(_DWORD *this, _DWORD *a2);
void *__thiscall sub_41FFC0(void *this);
int __thiscall sub_41FFF0(void *this);
int __thiscall sub_420010(void *this);
_DWORD *__thiscall sub_420030(int *this, _DWORD *a2, int a3);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_420060(int this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::pair<char const * const,CItem *> *a3);
bool __thiscall iless::operator()(iless *this, const char *a, const char *b); // idb
int __thiscall sub_420250(void *this);
int __thiscall sub_420270(int this, int a2, char a3, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *a4, std::pair<char const * const,CItem *> *a5);
int __thiscall sub_4206B0(int this);
_DWORD *__thiscall sub_420760(_DWORD *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420780(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_420820(_DWORD *this);
int __stdcall sub_420880(void *a1);
void *__cdecl sub_420900(int a1);
void *__thiscall sub_420920(void *this);
void *__thiscall std::_Tree_ptr<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_ptr<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(void *this, _BYTE *a2, char a3);
void __thiscall std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(std::pair<char const * const,CItem *> *this, const char *const *_Val1, CItem *const *_Val2); // idb
int __thiscall sub_4209C0(void *this);
int __thiscall sub_4209E0(void *this);
int __thiscall sub_420A00(int this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420AB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_420B50(_DWORD *this);
int __stdcall sub_420BB0(void *a1);
_DWORD *__thiscall CInitMap::CInitMap(_DWORD *this);
void *__thiscall CInitMap::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CInitMap::_CInitMap(_DWORD *this);
int __thiscall CInitMap::Set(void *this, int a2, int a3);
int __thiscall CInitMap::OnLoad(void *this);
// unsigned int __usercall SnapCurrentProcessMiniDump@<eax>(DWORD a1@<eax>, DWORD a2@<edx>, DWORD a3@<ecx>, DWORD a4@<ebx>, DWORD a5@<edi>, DWORD a6@<esi>, _CONTEXT *lpContext);
void __thiscall CIOException::CInit::CInit(CIOException::CInit *this); // idb
char *__cdecl GetFilePart(char *source); // idb
// void __usercall __noreturn sub_4210E0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// int CIOException::Lock(void); weak
// int CIOException::Unlock(void); weak
BOOL sendMail();
int __cdecl sendMail_0(const char *host, const char *from, const char *to, const char *body); // idb
int __cdecl sendFile(unsigned int sock, const char *name); // idb
// void __usercall GenerateExceptionReport(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, _EXCEPTION_POINTERS *data);
void hprintf(void *LogFile, char *Format, ...); // idb
void __cdecl CreateMiniDump(_EXCEPTION_POINTERS *pException); // idb
void __cdecl RecordModuleList(void *LogFile); // idb
// int __cdecl _getdrive();
// int __cdecl sub_422180(HANDLE hFile); idb
const char *__cdecl GetExceptionDescription(unsigned int ExceptionCode); // idb
void __cdecl PrintStack(void *LogFile, unsigned int begin, unsigned int end); // idb
void __cdecl ImageHelpStackWalk(void *LogFile, _CONTEXT *ptrContext); // idb
void __cdecl IntelStackWalk(void *LogFile, _CONTEXT *ptrContext); // idb
// LONG __userpurge RecordExceptionInfo@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, _EXCEPTION_POINTERS *data);
void __thiscall CIOException::CInit::~CInit(CIOException::CInit *this); // idb
int __cdecl ELOG(char *Format, char); // idb
// void __usercall EBREAK(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// int __usercall EBreak@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
int __cdecl CIOException::Filter(_EXCEPTION_POINTERS *pExp); // idb
void __cdecl CIOException::Open(const char *szMailServer, const char *szMailFrom, const char *szMailTo); // idb
BOOL CIOException::Enable();
LONG CIOException::Disable();
LONG CIOException::IsEnable();
void __stdcall CIOException::SendMail();
LONG CIOException::ToggleRaise();
void __cdecl CIOException::DumpStack(int nThread, void **hThread, unsigned int *nThreadId); // idb
void __cdecl ImageHelpStackWalk_0(void *LogFile, void *hThread); // idb
void __thiscall CIOSpinLock::Wait(CIOSpinLock *this); // idb
void __thiscall CIOCriticalSection::CIOCriticalSection(CIOCriticalSection *this); // idb
// void __usercall CIOCriticalSection::~CIOCriticalSection(CIOCriticalSection *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CIOCriticalSection::Enter(CIOCriticalSection *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CIOCriticalSection::Leave(CIOCriticalSection *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void CIOSocket::CInit::_CInit();
// int __usercall CIOSocket::CreateIOThread@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int nThread);
unsigned int __thiscall CIOSocket::AddIOThread(void *this);
int __cdecl CIOSocket::CloseIOThread(); // idb
void __cdecl CIOSocket::FreeIOThread(); // idb
_DWORD *__thiscall std__locale__facet___facet(_DWORD *this);
// void __userpurge CIOObject::AddRef(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, volatile int *pRef);
// void __userpurge CIOObject::Release(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, volatile int *pRef);
// int __userpurge CIOObject::RegisterWait@<eax>(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, void *handle);
// void __userpurge CIOObject::AddTimer(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwTime, int nId);
void __thiscall CIOSocket::CIOTimer::CIOTimer(CIOSocket::CIOTimer *this, CIOObject *pObject, unsigned int dwTime, int nId); // idb
// void __userpurge CIOObject::OnTimerCallback(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int nId);
// void __userpurge CIOObject::OnIOCallback(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
void __thiscall CIOSocket::CIOTimerInstance::OnTimerCallback(CIOSocket::CIOTimerInstance *this, int nId); // idb
void __thiscall CIOSocket::CIOTimerInstance::OnIOCallback(CIOSocket::CIOTimerInstance *this, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped); // idb
// unsigned int __userpurge CIOSocket::WaitThread@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *__formal);
void __stdcall __noreturn CIOSocket::IOThread(void *arglist);
void __cdecl CIOSocket::DumpStack(); // idb
// void __stdcall `vector constructor iterator'(void *, unsigned int, int, void *(__thiscall *)(void *)); idb
CMemory **__cdecl CIOBuffer::Alloc();
void __thiscall CIOBuffer::Free(CIOBuffer *this); // idb
void __cdecl CIOBuffer::FreeAll(); // idb
// int __userpurge CIOSocket::CIOSocket@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
void *__thiscall CIOSocket::_scalar_deleting_destructor_(void *this, char a2);
// _DWORD *__usercall CIOSocket::_CIOSocket@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CIOSocket::Close(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CIOSocket::GracefulClose(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CIOSocket::OnIOCallback(CIOSocket *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped); // idb
void __thiscall CIOSocket::OnCreate(CIOSocket *this);
// void __userpurge CIOSocket::ReadCallback(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwTransferred);
// void __userpurge CIOSocket::Read(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwLeft);
// void __userpurge CIOSocket::WriteCallback(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwTransferred);
// void __userpurge CIOSocket::Write(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOBuffer *pBuffer);
void __thiscall CIOServer::CIOServer(CIOServer *this); // idb
int __thiscall CIOServer::_scalar_deleting_destructor_(void *this, char a2);
void __thiscall std::numpunct<char>::~numpunct<char>(std::numpunct<char> *this); // idb
void __thiscall CIOServer::Close(CIOServer *this); // idb
// int __userpurge CIOServer::Start@<eax>(CIOServer *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int nPort);
void __thiscall CIOServer::OnWaitCallback(CIOServer *this); // idb
void __thiscall CIOServer::Stop(CIOServer *this); // idb
// void __userpurge CIOServer::OnIOCallback(CIOServer *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped);
// void __usercall CIOSocket::Initialize(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
BOOL __thiscall sub_424D30(std::vector<CIOSocket::CIOTimer> *this);
CIOSocket::CIOTimer *__thiscall sub_424D50(std::vector<CIOSocket::CIOTimer> *this);
void __thiscall std::priority_queue<CIOSocket::CIOTimer>::push(std::priority_queue<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Pred); // idb
void __thiscall std::priority_queue<CIOSocket::CIOTimer>::pop(std::priority_queue<CIOSocket::CIOTimer> *this); // idb
CIOSocket::CIOTimer *__thiscall std::vector<CIOSocket::CIOTimer>::front(std::vector<CIOSocket::CIOTimer> *this); // idb
CIOSocket::CIOTimer *__thiscall sub_424E30(int this, CIOSocket::CIOTimer *_Val);
void __thiscall std::vector<CIOSocket::CIOTimer>::pop_back(std::vector<CIOSocket::CIOTimer> *this); // idb
_DWORD *__thiscall sub_424EF0(int *this, _DWORD *a2, CIOSocket::CIOTimer *a3, int *a4);
void __thiscall std::vector<CIOSocket::CIOTimer>::_Destroy(std::vector<CIOSocket::CIOTimer> *this, CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last); // idb
void __thiscall sub_424FA0(int this, CIOSocket::CIOTimer *a2, unsigned int _Count, int *a4);
int __thiscall sub_425280(_DWORD *this, _DWORD *a2);
_DWORD *__cdecl std::push_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2);
int __cdecl std::pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2, char a3);
void __cdecl std::_Uninitialized_fill_n<CIOSocket::CIOTimer *,unsigned int,CIOSocket::CIOTimer,std::allocator<CIOSocket::CIOTimer>>(CIOSocket::CIOTimer *_First, unsigned int _Count, const CIOSocket::CIOTimer *_Val);
void __cdecl std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, const CIOSocket::CIOTimer *_Val); // idb
_DWORD *__thiscall sub_4253A0(_DWORD *this);
int sub_4253C0();
_DWORD *__cdecl std::_Push_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2);
_DWORD *std::_Pop_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, ...);
// int __cdecl unknown_libname_14(_DWORD, _DWORD); weak
_DWORD *__cdecl std::_Copy_backward_opt<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(_DWORD *a1, _DWORD *a2, _DWORD *a3);
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall std::vector<CIOSocket::CIOTimer>::iterator::operator+(std::vector<CIOSocket::CIOTimer>::iterator *this, std::vector<CIOSocket::CIOTimer>::iterator *result, int _Off); // idb
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall sub_425550(std::vector<CIOSocket::CIOTimer>::iterator *this, int a2);
_DWORD *__cdecl std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6);
_DWORD *__cdecl std::_Pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, char a3, int a4, int a5, int a6);
BOOL __stdcall sub_4256A0(_DWORD *a1, _DWORD *a2);
BOOL __thiscall sub_4256C0(_DWORD *this, _DWORD *a2);
_DWORD *__cdecl std::_Adjust_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6);
std::vector<CIOSocket::CIOTimer> *__thiscall sub_425830(std::vector<CIOSocket::CIOTimer> *this);
std::vector<CIOSocket::CIOTimer> *__thiscall sub_425850(std::vector<CIOSocket::CIOTimer> *this);
CIOObject *__thiscall CIOSocket::CIOTimerInstance::CIOTimerInstance(CIOObject *this);
// Concurrency::details::_Condition_variable *__thiscall CIOBuffer::CSlot::CSlot(Concurrency::details::_Condition_variable *this);
void __thiscall sub_4258D0(std::vector<CIOSocket::CIOTimer> *this);
_DWORD *__thiscall CItem::CItem(_DWORD *this);
int __thiscall CItem::Use(_DWORD *this, int a2);
int __thiscall CItem::Enchant(_DWORD *this, int a2, int a3);
int __stdcall CItem::ChangePrefix(int a1, int a2, int a3, int a4);
void *__thiscall CItem::_scalar_deleting_destructor_(void *this, char a2);
// _DWORD *__usercall CItem::_CItem@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __cdecl CItem::InsertInitItem(const char *const *_Val2);
int __cdecl CItem::InsertPrefix(const char *const *_Val2);
int __cdecl CItem::InsertItemGroup(const char *const *_Val2);
void CItem::ReloadItemGroup();
CConfig *__thiscall CObjectDB::CObjectDB(CConfig *this);
void __thiscall CObjectDB::_CObjectDB(CConfig *this);
int __cdecl CItem::FindInitItem(char a1);
int __cdecl CItem::FindPrefix(char a1);
int __cdecl CItem::NewItem(_DWORD *a1);
_DWORD *__thiscall CItemMask::CItemMask(_DWORD *this, int a2);
BOOL __thiscall CItemDefense::IsBroken(_DWORD *this);
void *__thiscall CItemMask::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CItemStandard::CItemStandard(_DWORD *this, int a2);
int __thiscall CItemStandard::_CItemStandard(void *this);
int __cdecl sub_426060(int a1, _DWORD *a2);
int __cdecl CItem::CreateItem(char a1, int a2, int a3, int a4);
int __cdecl CItem::CreateCheatItem(char a1, int a2, int a3, int a4);
_DWORD *__thiscall CItem::AddState(_DWORD *this, int a2);
_DWORD *__cdecl CItem::CreateOwnItem(char a1, int a2, int a3, int a4);
int __cdecl CItem::CreateDropItem(char a1, int a2);
int __cdecl CItem::CreateQuestItem(char a1);
int CItem::Close();
int CItem::ClearItemGroup();
void __thiscall CItem::OnTimer(CIOObject *this, int a2);
int __thiscall CItem::PutInfo(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_426810(_DWORD *this, int a2, _DWORD *a3);
_DWORD *__thiscall CItem::Init(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItem::SendDelete(_DWORD *this, int a2, int a3);
int __thiscall CItem::SendCreate(_DWORD *this, int a2, int a3);
int __thiscall CItem::Trash(int this, int a2, int a3);
int __thiscall CItem::Erase(int this, int a2);
void __thiscall sub_426AD0(_DWORD *this, int a2, int a3);
void __thiscall CItem::Insert(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItem::UpdateNum(int this, int a2, int a3, int a4);
void __thiscall CItem::Drop(CIOObject *this, _DWORD *a2, _DWORD *a3, int a4, int a5, int a6, int a7);
_DWORD *__thiscall CItem::Trade(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall CItem::CanSell(_DWORD *this, int a2);
int __thiscall CItem::IsState(_DWORD *this, int a2);
BOOL __thiscall CItem::CanTrade(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall CItem::CanDrop(_DWORD *this, int a2, int a3);
int __thiscall CItem::StorageOut(_DWORD *this, int a2, int a3, int a4, int a5);
void __thiscall CItem::ForcedStorageIn(_DWORD *this, int a2, int a3, int a4, int a5);
LONG CItem::NewIID();
int __thiscall CItem::GetSellMoney(_DWORD *this, int a2);
int __thiscall CItem::SetEtc(_DWORD *this, int a2);
void __thiscall CItem::SendItemInfo(void *this, int a2, char a3);
void __stdcall CItem::InsertItem(int a1, int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CItemWeapon::CItemWeapon(_DWORD *this, int a2);
int __thiscall CItemGeneral::_CItemGeneral(void *this);
int __thiscall CItemWeapon::PutInfo(int this, _DWORD *a2, int a3);
int __thiscall CItemWeapon::Init2(_DWORD *this, int a2, _DWORD *a3);
int __thiscall CItemWeapon::Init(_DWORD *this, char a2, int a3, int a4);
void __thiscall CItemWeapon::SetWearState(_DWORD *this, int a2);
int __thiscall CItem::SubState(_DWORD *this, int a2);
int __thiscall CPlayer::AddWState(_DWORD *this, char a2);
int __thiscall CPlayer::IsWState(_DWORD *this, char a2);
int __thiscall CItemWeapon::Trash(int this, int a2, int a3);
int __thiscall CItemWeapon::Erase(int this, int a2);
int *__thiscall CItemWeapon::ApplySpec(int *this, _DWORD *a2);
int __thiscall CItemWeapon::FreeSpec(int *this, _DWORD *a2);
void __thiscall CItemWeapon::PutOn(_DWORD *this, int a2);
void __thiscall CItemWeapon::PutOff(_DWORD *this, _DWORD *a2);
int __thiscall CPlayer::SubWState(_DWORD *this, char a2);
void __thiscall sub_428D00(_DWORD *this, int a2, int a3);
int __thiscall CItemWeapon::UpdateNum(int this, int a2, int a3, int a4);
BOOL __thiscall CItemDefense::CanSell(_DWORD *this, int a2);
int __thiscall CItemWeapon::StorageIn(int this, int a2, int a3);
void __thiscall CItemWeapon::ForcedStorageIn(_DWORD *this, int a2, int a3, const char *a4, int a5);
signed int __thiscall CItemWeapon::Charming(_DWORD *this, int a2, int a3);
int __thiscall CItem::GetLevel(_DWORD *this);
int __thiscall CItemWeapon::CharmingCheat(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemDefense::Repair(_DWORD *this, int a2);
int __thiscall CItemWeapon::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall CItemWeapon::Protect(_DWORD *this, int a2);
int __thiscall CItemWeapon::GetSellMoney(_DWORD *this, int a2);
int __thiscall CItemWeapon::UpgradeDestroy(CIOObject *this, int a2);
void __thiscall CItemWeapon::UpgradeRateUp(_DWORD *this, int a2);
void __thiscall CItemWeapon::UpgradeLevel(CIOObject *this, int a2);
_DWORD *__thiscall CItemDefense::CItemDefense(_DWORD *this, int a2);
void *__thiscall CItemGeneral::_scalar_deleting_destructor_(void *this, char a2);
void **__thiscall CItemDefense::PutInfo(int this, void **a2, int a3);
int __thiscall CItemDefense::Init2(_DWORD *this, int a2, _DWORD *a3);
void __thiscall CItemDefense::SetWearState(_DWORD *this, _DWORD *a2);
int __thiscall CItemDefense::Trash(int this, int a2, int a3);
int __thiscall CItemDefense::Erase(int this, int a2);
int __thiscall CItemDefense::ApplySpec(int *this, int a2);
int __thiscall CItemDefense::FreeSpec(int *this, int a2);
void __thiscall CItemDefense::PutOn(_DWORD *this, _DWORD *a2);
void __thiscall CItemDefense::PutOff(_DWORD *this, _DWORD *a2);
void __thiscall sub_42AE20(_DWORD *this, int a2, int a3);
void __thiscall CItemDefense::Insert(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemDefense::UpdateNum(int this, int a2, int a3, int a4);
int __thiscall CItemDefense::StorageIn(int this, int a2, int a3);
int __thiscall CItemDefense::Charming(_DWORD *this, int a2, int a3);
int __thiscall CItemDefense::CharmingCheat(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemDefense::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall CItemDefense::Protect(_DWORD *this, int a2);
int __thiscall CItemDefense::GetSellMoney(_DWORD *this, int a2);
int __thiscall CItemDefense::UpgradeDestroy(CIOObject *this, int a2);
void __thiscall CItemMask::SetWearState(_DWORD *this, int a2);
int __stdcall CItemMask::PutOn(int a1);
_DWORD *__thiscall CItemMask::Init(_DWORD *this, int a2, int a3, int a4);
void __thiscall CItemStandard::SetWearState(_DWORD *this, int a2);
int *__thiscall CItemStandard::ApplySpec(int *this, int a2);
int *__thiscall CItemStandard::FreeSpec(int *this, int a2);
void __thiscall CItemStandard::PutOn(_DWORD *this, _DWORD *a2);
void __thiscall CItemStandard::PutOff(_DWORD *this, _DWORD *a2);
int __stdcall CItemStandard::CanDrop(int a1, int a2);
BOOL __thiscall CItemStandard::CanTrade(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemStandard::Broken(CIOObject *this, _DWORD *a2, int a3);
_DWORD *__thiscall CItemOrnament::CItemOrnament(_DWORD *this, int a2);
int __thiscall CItemOrnament::Init(_DWORD *this, char a2, int a3, int a4);
void __thiscall CItemOrnament::SetWearState(_DWORD *this, _DWORD *a2);
int __thiscall CItemOrnament::Trash(int this, int a2, int a3);
int __thiscall CItemOrnament::Erase(int this, int a2);
BOOL __thiscall CItemOrnament::ApplySpec(int *this, int a2);
BOOL __thiscall CItemOrnament::FreeSpec(int *this, int a2);
void __thiscall CItemOrnament::PutOn(_DWORD *this, _DWORD *a2);
void __thiscall CItemOrnament::PutOff(_DWORD *this, _DWORD *a2);
void __thiscall CItemOrnament::Insert(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemOrnament::UpdateNum(int this, int a2, int a3, int a4);
BOOL __thiscall CItemTransform::CanDrop(_DWORD *this, int a2, int a3);
int __thiscall CItemOrnament::StorageIn(int this, int a2, int a3);
void __thiscall CItemOrnament::ForcedStorageIn(_DWORD *this, int a2, int a3, const char *a4, int a5);
int __thiscall CItemOrnament::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall CItemOrnament::GetSellMoney(_DWORD *this, int a2);
int __thiscall CItemOrnament::UpgradeDestroy(CIOObject *this, int a2);
_DWORD *__thiscall CItemGeneral::CItemGeneral(_DWORD *this, int a2);
int __thiscall CItem::Sum(_DWORD *this, int a2);
int __thiscall CItemGeneral::Use(int *this, _DWORD *a2);
int __thiscall CItemGeneral::Trade(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemGeneral::StorageIn(int this, int a2, int a3);
int __thiscall CItemGeneral::StorageOut(char *this, int a2, int a3, int a4, _DWORD *a5);
int __thiscall CItemGeneral::Enchant(int *this, int a2, int a3);
_DWORD *__thiscall CItemQuest::CItemQuest(_DWORD *this, int a2);
int __thiscall CItemGeneral::UpdateNum(char *this, int a2, int a3, int a4);
BOOL __thiscall CItemQuest::CanMerge(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall CItemMoney::CItemMoney(_DWORD *this, int a2);
BOOL __thiscall CItemMoney::CanMerge(_DWORD *this, int a2);
int __thiscall CItemMoney::Trash(int this, int a2, int a3);
void __thiscall CItemMoney::Insert(_DWORD *this, _DWORD *a2, int a3, int a4);
int __thiscall CItemMoney::UpdateNum(char *this, int a2, int a3, LONG Value);
void __thiscall CItemMoney::Drop(CIOObject *this, _DWORD *a2, _DWORD *a3, int a4, int a5, int a6, int a7);
int __thiscall CItemMoney::Trade(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemMoney::StorageIn(int this, int a2, int a3);
int __thiscall CItemMoney::StorageOut(int this, int a2, int a3, int a4, _DWORD *a5);
int __thiscall CItemMoney::SetEtc(_DWORD *this, int a2);
_DWORD *__thiscall CItemTransform::CItemTransform(_DWORD *this, int a2);
void **__thiscall CItemTransform::PutInfo(int this, void **a2, int a3);
int __thiscall sub_42E710(_DWORD *this, int a2, _DWORD *a3);
_DWORD *__thiscall CItemTransform::Init(_DWORD *this, int a2, int a3, int a4);
void __thiscall CItemTransform::SetWearState(_DWORD *this, _DWORD *a2);
int __thiscall CItemTransform::Trash(int this, int a2, int a3);
int __thiscall CItemTransform::Erase(int this, int a2);
int __thiscall CItemTransform::ApplySpec(_DWORD *this, int a2);
int __thiscall CItemTransform::FreeSpec(_DWORD *this, int a2);
void __thiscall CItemTransform::PutOn(_DWORD *this, _DWORD *a2);
void __thiscall CItemTransform::PutOff(_DWORD *this, _DWORD *a2);
void __thiscall CItemTransform::Insert(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemTransform::UpdateNum(int this, int a2, int a3, int a4);
BOOL __thiscall CItemTransform::CanTrade(_DWORD *this, int a2, int a3, int a4);
int __thiscall CItemTransform::StorageIn(int this, int a2, int a3);
void __thiscall CItemTransform::ForcedStorageIn(_DWORD *this, int a2, int a3, const char *a4, int a5);
void __thiscall CItemTransform::UpdateExp(_DWORD *this, _DWORD *a2, int a3);
void __thiscall CItemTransform::CheatLevelUp(_DWORD *this, int a2, int a3);
void __thiscall CItemTransform::SaveInfo(_DWORD *this, int a2);
// void __userpurge CItemTransform::ApplyTransform(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, volatile LONG *a2, int a3);
int __thiscall CItemTransform::FreeTransform(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_42F590(_DWORD *this);
_DWORD *__thiscall sub_42F5F0(int *this);
_DWORD *__thiscall sub_42F650(_DWORD *this);
int __stdcall sub_42F6B0(void *a1);
int __stdcall sub_42F730(void *a1);
int __stdcall sub_42F7B0(void *a1);
// int __thiscall unknown_libname_15(_DWORD); weak
int __thiscall sub_42F840(int *this);
int __cdecl sub_42F920(int a1);
_WORD *__cdecl sub_42F960(_WORD *a1, __int16 a2);
void *__thiscall sub_42F980(void *this);
void __stdcall sub_42F9B0(void *_Ptr, int _Val);
void *__thiscall sub_42F9D0(void *this);
void __cdecl initp_misc_winxfltr(void *);
void *__thiscall sub_42FA10(void *this);
int __thiscall sub_42FA40(int *this);
int __thiscall sub_42FA60(int *this);
int __thiscall sub_42FA80(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FB30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_42FBD0(int *this);
int __thiscall sub_42FBF0(int *this);
int __thiscall sub_42FC10(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FCC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_42FD60(int *this);
int __thiscall sub_42FD80(int *this);
int __thiscall sub_42FDA0(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FE50(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
CGroup *CGroup::Copy();
CGroup *__thiscall CGroup::CGroup(CGroup *this);
// void *__userpurge CGroup::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CGroup::_CGroup@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall CGroup::Set(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_430160(_DWORD *this);
_DWORD *__thiscall sub_4301A0(_DWORD *this, int a2);
int __thiscall CGroup::OnLoad(CItem *this);
void __thiscall CGroup::GetItemInfo(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __cdecl CItemGroup::InsertGroup(const char *const *_Val2);
_DWORD *CItemGroup::ClearGroup();
CItemGroup *CItemGroup::Copy();
CItemGroup *__thiscall CItemGroup::CItemGroup(CItemGroup *this);
// void *__userpurge CItemGroup::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CItemGroup::_CItemGroup@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall CItemGroup::Set(_DWORD *this, int a2, int a3);
int __thiscall CItemGroup::OnLoad(const char *const *this);
int __stdcall CItemGroup::FindGroup(int a1);
void __thiscall CItemGroup::GetItemInfo(void *this, int a2, _DWORD *a3, _DWORD *a4);
int __thiscall CItemGroup::GetFirstGroup(void *this);
// void __usercall CGoods::ForcedStorageIn(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2, void *Src);
_DWORD *CGoods::ClearGoods();
CGoods *CGoods::Copy();
CGoods *__thiscall CGoods::CGoods(CGoods *this);
// void *__userpurge CGoods::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CGoods::_CGoods@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall CGoods::Set(_DWORD *this, int a2, int a3);
int __thiscall CGoods::OnLoad(int this);
void __thiscall sub_430B90(std::vector<CSyncPacket::CElement> *this);
CSyncPacket::CElement *__thiscall sub_430BB0(int this, CSyncPacket::CElement *_Val);
void *__thiscall sub_430C20(int *this, void *a2);
_DWORD *__thiscall sub_430C40(int *this);
IPAddrMask *__thiscall sub_430CA0(int this, IPAddrMask *_Val);
_DWORD *__thiscall sub_430D10(int *this);
CIOSocket::CIOTimer *__thiscall sub_430D70(int this, CIOSocket::CIOTimer *_Val);
int __thiscall sub_430DE0(void *this);
_DWORD *__thiscall sub_430E00(int *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_430E30(int *this, _DWORD *a2, int a3);
int __thiscall std::vector<CSyncPacket::CElement>::size(std::vector<CSyncPacket::CElement> *this);
_DWORD *__thiscall sub_430EA0(int *this, _DWORD *a2, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *a3, int *a4);
void __thiscall std::vector<CSyncPacket::CElement>::_Tidy(std::vector<CSyncPacket::CElement> *this); // idb
int __cdecl sub_430F90(int a1);
int __stdcall sub_430FA0(void *a1);
_DWORD *__thiscall sub_431020(int *this, _DWORD *a2, IPAddrMask *a3, int *a4);
void __thiscall std::vector<IPAddrMask>::_Tidy(std::vector<IPAddrMask> *this); // idb
int __cdecl sub_431110(int a1);
int __stdcall sub_431120(void *a1);
int __thiscall std::vector<CIOSocket::CIOTimer>::size(std::vector<CIOSocket::CIOTimer> *this);
_DWORD *__thiscall sub_4311E0(int *this, _DWORD *a2, CIOSocket::CIOTimer *a3, int *a4);
char __thiscall std::vector<CIOSocket::CIOTimer>::_Buy(std::vector<CIOSocket::CIOTimer> *this, unsigned int _Capacity);
void __thiscall std::vector<CIOSocket::CIOTimer>::_Tidy(std::vector<CIOSocket::CIOTimer> *this); // idb
_DWORD *__thiscall sub_431350(_DWORD *this);
// _DWORD __stdcall unknown_libname_16(_DWORD); weak
_DWORD *__thiscall sub_431390(_DWORD *this);
char *__stdcall sub_4313B0(char *a1, char *a2);
void __thiscall sub_4313E0(int this, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_First, unsigned int _Count, int *a4);
char *__stdcall sub_4316C0(char *a1, char *a2);
void __thiscall sub_4316F0(int this, IPAddrMask *_First, unsigned int _Count, int *a4);
void *__stdcall sub_4319C0(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Rarg, std::pair<char const * const,CItem *> *_Val, char a5);
void __thiscall sub_431A40(int this, CIOSocket::CIOTimer *a2, unsigned int _Count, int *a4);
_DWORD *__thiscall sub_431D20(int *this, _DWORD *a2, int _Off);
int __thiscall sub_431D50(int *this, _DWORD *a2);
unsigned int __thiscall std::allocator<boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime>>::timer_base *>::bucket_type>::max_size(std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *this); // idb
int __thiscall sub_431DB0(_DWORD *this, _DWORD *a2);
int __thiscall sub_431DD0(_DWORD *this, _DWORD *a2);
void *__cdecl sub_431DF0(void *a1, int a2, int a3);
void *__stdcall sub_431E30(int a1, int a2, void *a3);
void *__stdcall sub_431E60(int a1, int a2, void *a3);
void *__cdecl sub_431E90(void *a1, int a2, int a3);
_DWORD *__cdecl std::_Copy_backward_opt<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,std::forward_iterator_tag>(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl std::_Copy_backward_opt<IPAddrMask *,IPAddrMask *>(_DWORD *a1, _DWORD *a2, _DWORD *a3);
char *__cdecl std::_Destroy_range<CIOSocket::CIOTimer>(char *a1, char *a2);
CIOSocket::CIOTimer *__cdecl std::_Uninitialized_copy<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *,std::allocator<CIOSocket::CIOTimer>>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest);
void __cdecl std::_Construct<CSyncPacket::CElement,CSyncPacket::CElement>(CSyncPacket::CElement *_Ptr, const CSyncPacket::CElement *_Val); // idb
void *__thiscall sub_432030(void *this);
void *__thiscall std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(void *this, _BYTE *a2, char a3);
void *__thiscall sub_4320A0(void *this);
int __thiscall sub_4320D0(int *this);
int __thiscall sub_4320F0(int *this);
int __thiscall sub_432110(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4321C0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_432260(int *this);
int __thiscall sub_432280(int *this);
int __thiscall sub_4322A0(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_432350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall lisp::var::operator=(_DWORD *this, int a2);
int __thiscall sub_432410(const char **this);
unsigned int __thiscall sub_432430(const char **this);
int __thiscall lisp::_cons::length(lisp::_cons *this); // idb
_DWORD *__thiscall sub_4324B0(_DWORD *this);
void __thiscall CLog::CInit::~CInit(CLog::CInit *this); // idb
void __cdecl CLog::AddV(int nType, char *format, char *va); // idb
// int __thiscall CSocket::Lock(_DWORD); weak
// int __thiscall CSocket::Unlock(_DWORD); weak
void __cdecl CLog::Flush(); // idb
void LOG_INFO(char *format, ...); // idb
void LOG_NORMAL(char *format, ...); // idb
void LOG_ERR(char *format, ...); // idb
int CMainConfig::Open();
void __thiscall sub_432EC0(int this);
_DWORD *CMainConfig::Close();
const char *__cdecl GetStr(int nIndex); // idb
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::insert(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *result, const std::pair<int const ,CSocket *> *_Val); // idb
_DWORD *__thiscall sub_433110(int *this);
std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *result, const int *_Keyval); // idb
// _DWORD __stdcall _lambda_9ab38a79c03e1e04423ad6818173354b_::_lambda_9ab38a79c03e1e04423ad6818173354b_(_DWORD, std::string *_Right); weak
int __cdecl sub_433230(int a1);
void *__thiscall sub_433240(int *this, void *a2, _DWORD *a3);
int __stdcall sub_433270(void *); // idb
void *__thiscall sub_4332F0(int *this, void *a2, char a3, int a4, int a5);
int __cdecl sub_433730(int a1);
int *__thiscall sub_433740(int *this, int a2);
CMemory **__stdcall sub_433870(int a1, int a2, int a3, int a4, char a5);
void __stdcall sub_4338F0(void *a1, int a2);
void __stdcall sub_433910(void *a1);
int __thiscall sub_433930(int *this);
int __thiscall sub_433950(int *this);
void *__thiscall std::_Tree_nod<std::_Tmap_traits<std::string,void *,std::less<std::string>,std::allocator<std::pair<std::string const,void *>>,0>>::_Node::_Node(void *this, int a2, int a3, int a4, int a5, char a6);
char *__thiscall std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>(char *this, int a2);
int __cdecl sub_433AB0(int a1);
// void __cdecl __ExceptionPtrDestroy(void *); idb
CMemory **__cdecl sub_433B00(int a1);
void *__thiscall sub_433B20(void *this, char a2);
void __thiscall sub_433B50(void *this);
std::string *__thiscall sub_433B70(std::string *this, char *Str);
void __thiscall std::string::string(std::string *this); // idb
void *__thiscall sub_433BC0(void *this);
int __thiscall sub_433BF0(int *this);
int __thiscall sub_433C10(int *this);
int __thiscall sub_433C30(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_433CE0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_433D80(int *this, _DWORD *a2, int a3);
int *__thiscall sub_434510(int *this, int *a2, int a3);
int __thiscall sub_434540(int *this);
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd);
ATOM __cdecl MyRegisterClass(HINSTANCE__ *hInstance);
int __cdecl sub_434790(HINSTANCE hInstance, int nCmdShow); // idb
int sub_434840();
// LRESULT __userpurge sub_4348E0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, HWND hWndParent, UINT Msg, WPARAM wParam, LPARAM lParam);
int __stdcall About(HWND__ *hDlg, unsigned int message, unsigned int wParam, int lParam); // idb
// INT_PTR __userpurge sub_434ED0@<eax>(DWORD a1@<ebx>, DWORD a2@<esi>, HWND hDlg, UINT a4, WPARAM a5, LPARAM a6);
INT_PTR __stdcall DialogFunc(HWND, UINT, WPARAM, LPARAM); // idb
// unsigned int __userpurge StartAddress@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *a4);
// unsigned int __userpurge sub_435500@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *a4);
std::string *__thiscall sub_4355E0(std::string *this, std::string *_Right);
std::string *__thiscall std::string::append(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count); // idb
void *__thiscall CMemory::CInit::CInit(void *this);
void __thiscall CMemory::CMemory(CMemory *this); // idb
int __thiscall CMemory::_heap_init(CMemory *this); // idb
int __thiscall CMemory::__sbh_heap_init(CMemory *this, unsigned int threshold); // idb
CMemory **__cdecl CMemory::_malloc(unsigned int size);
_DWORD *__thiscall CMemory::_heap_alloc_base(CMemory *this, unsigned int size);
_DWORD *__thiscall CMemory::__sbh_alloc_block(CMemory *this, int intSize);
CMemory::tagHeader *__thiscall CMemory::__sbh_alloc_new_region(CMemory *this); // idb
int __thiscall CMemory::__sbh_alloc_new_group(CMemory *this, CMemory::tagHeader *pHeader); // idb
void __cdecl CMemory::_free(void *pBlock); // idb
void __thiscall CMemory::_free_base(CMemory *this, void *pBlock); // idb
CMemory::tagHeader *__thiscall CMemory::__sbh_find_block(CMemory *this, void *pvAlloc); // idb
void __thiscall CMemory::__sbh_free_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc); // idb
CMemory **__cdecl CMemory::_realloc(void *pBlock, unsigned int newsize);
void *__thiscall CMemory::_realloc_base(CMemory *this, void *pBlock, unsigned int newsize); // idb
int __thiscall CMemory::__sbh_resize_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc, int intNew); // idb
void *__cdecl CNoMemoryObject::operator_new(size_t Size);
void __thiscall CMemory::_mlock(int this);
void __thiscall CMemory::_munlock(int this);
int __stdcall sub_4370E0(int a1, int a2, int a3, int (__thiscall *a4)(int));
CInitMonster *__thiscall CInitMonster::CInitMonster(CInitMonster *this);
// void *__userpurge CInitMonster::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CInitMonster::_CInitMonster@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
CInitMonster *CInitMonster::Copy();
int __thiscall CInitMonster::Set(char *this, int a2, int a3);
int __thiscall CInitMonster::OnLoad(int this);
// void __userpurge CInitMonster::DropItemEx(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, char a3, int a4, int a5, int *a6, int a7);
// void __userpurge CInitMonster::DropItem(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int a4, int a5, int a6);
BOOL __thiscall CSMap::IsValidTile(_DWORD *this, int *a1, int a2);
BOOL __thiscall CCellMap::IsValidTile(void *this, _DWORD *a2, int a3, char a4);
int __thiscall CCellMap::GetTile(_DWORD *this, _DWORD *a2);
int __thiscall CSMap::_GetCellMap(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_4382D0(_DWORD *this);
void *__thiscall CGenMonster::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CGenMonster::_CGenMonster(void *);
CGenMonster *__thiscall CGenMonster::CGenMonster(CGenMonster *this, _DWORD *a2, int a3, int a4, int a5);
_DWORD *CGenMonster::Copy();
int __thiscall CGenMonster::Set(_DWORD *this, int a2, int a3);
int __thiscall CGenMonster::OnLoad(int this);
// void __userpurge CGenMonster::OnTimer(CIOObject *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
int *__thiscall CGenMonster::GetGenTile(_DWORD *this, int *a2, int a3);
// void __usercall CGenMonster::Stop(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
CMonsterObject *__thiscall CMonsterObject::CMonsterObject(CMonsterObject *this);
_DWORD *__thiscall CLink::Initialize(_DWORD *this);
void *__thiscall CMonsterObject::_scalar_deleting_destructor_(void *this, char a2);
// void __userpurge CMonsterObject::OnTimer(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
_DWORD *__thiscall CLink::MoveTo(_DWORD *this, int a2);
// void __userpurge CMonsterObject::Insert(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CLink *a2);
void __thiscall CLink::Insert(CLink *this, CLink *pLink); // idb
// int __usercall CMonsterObject::Stop@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall sub_438DB0(int this);
int __thiscall CMonster::GetGID(_DWORD *this);
char *CMonster::GetGuildName();
void __stdcall CMonster::Summon(int a1, int a2, int a3, int a4);
// void *__userpurge CMonster::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CMonster::_CMonster@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall CChar::GetDefense(_DWORD *this, int a2);
int __thiscall CChar::GetAbsorb(_DWORD *this);
int __thiscall CChar::GetResist(_DWORD *this, int a2);
CMonster *__thiscall CMonster::CMonster(CMonster *this, _DWORD *a2);
// void __usercall CMonster::Start(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall CMonster::Stop(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
LONG CMonster::Size();
CMonsterMaguni *__cdecl CMonster::NewMonster(int a1, int a2);
CMonsterMaguni *__thiscall CMonsterMaguni::CMonsterMaguni(CMonsterMaguni *this, int a2);
int __thiscall CMonsterReal::GetAttackType(_DWORD *this);
int __thiscall CMonsterReal::ResetNextMove(_DWORD *this, int a2, int a3);
// _DWORD *__usercall CMonsterReal::_CMonsterReal@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall sub_4398F0(void *this);
CMonsterMaguniWithSkillOnly *__thiscall CMonsterMaguniWithSkillOnly::CMonsterMaguniWithSkillOnly(CMonsterMaguniWithSkillOnly *this, int a2);
// void *__userpurge CMonsterMaguniWithSkillOnly::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CMonsterMaguniWithSkillOnly::_CMonsterMaguniWithSkillOnly@<eax>(void *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
CMonsterMaguniWithSkill *__thiscall CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(CMonsterMaguniWithSkill *this, int a2);
CMonsterInactive *__thiscall CMonsterInactive::CMonsterInactive(CMonsterInactive *this, int a2);
_DWORD *__thiscall sub_439A00(_DWORD *this, _DWORD *a2);
// void *__userpurge CMonsterNotReal::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CMonsterNotReal::_CMonsterNotReal@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void *__userpurge CMonsterMagic::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CMonsterInactive::_CMonsterInactive@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
_DWORD *__thiscall sub_439AD0(_DWORD *this);
CMonsterNotReal *__thiscall CMonsterNotReal::CMonsterNotReal(CMonsterNotReal *this);
int __thiscall CMonsterGuildWar::GetGID(_DWORD *this);
char *__thiscall CMonsterGuildWar::GetGuildName(char *this);
CMonsterItem *__thiscall CMonsterItem::CMonsterItem(CMonsterItem *this, _DWORD *a2);
// void *__userpurge CMonsterItem::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// _DWORD *__usercall CMonsterItem::_CMonsterItem@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
_DWORD *__thiscall sub_439BD0(_DWORD *this, _DWORD *a2);
CMonsterBlackBug *__thiscall CMonsterBlackBug::CMonsterBlackBug(CMonsterBlackBug *this, int a2);
CMonsterEgg *__thiscall CMonsterEgg::CMonsterEgg(CMonsterEgg *this, int a2);
CMonsterCocoon *__thiscall CMonsterCocoon::CMonsterCocoon(CMonsterCocoon *this, int a2);
_DWORD *__thiscall sub_439D20(_DWORD *this, int a2);
CMonsterFireFlower *__thiscall CMonsterFireFlower::CMonsterFireFlower(CMonsterFireFlower *this, int a2);
_DWORD *__thiscall sub_439DE0(_DWORD *this);
char *__thiscall CMonsterSiegeGun::GetGuildName(char *this);
_DWORD *__thiscall sub_439EA0(_DWORD *this);
// void *__userpurge CMonsterSiegeGun::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
CMonsterSiegeGunRuins *__thiscall CMonsterSiegeGunRuins::CMonsterSiegeGunRuins(CMonsterSiegeGunRuins *this);
CMonsterWithSkillOnly *__thiscall CMonsterWithSkillOnly::CMonsterWithSkillOnly(CMonsterWithSkillOnly *this, int a2);
CMonsterInvaderBoss *__thiscall CMonsterInvaderBoss::CMonsterInvaderBoss(CMonsterInvaderBoss *this, int a2);
// int __usercall CMonster::Create@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, _DWORD *a1, int a2);
int __thiscall CChar::GetMaxHP(_DWORD *this);
// CIOObject *__usercall CMonster::FindMonster@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1);
// void __usercall CMonster::GetMonsterList(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2);
// volatile int *__usercall CMonster::ScanMonster@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1);
// void __usercall CMonster::OnDelete(Concurrency::details::_CancellationTokenRegistration *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CMonster::SendDelete(_DWORD *this, int a2, int a3);
void __thiscall CMonster::SendCreate(_DWORD *this, int a2, int a3);
// CIOObject **__userpurge CMonster::SetTarget@<eax>(CIOObject **this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2);
int __thiscall CMonster::SetProperty(int this, int a2);
int __thiscall CMonster::AI(void *this);
// void __userpurge CMonster::Add(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __usercall CMonster::Remove(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CLink::Remove(CLink *this); // idb
// volatile int *__usercall CMonster::GetOperatorName@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
BOOL __thiscall CMonster::CanAttack(_QWORD *this, _QWORD *a2, int a3);
char *__thiscall sub_43A7D0(char *this);
// void *__userpurge CMonsterReal::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
CMonsterReal *__thiscall CMonsterReal::CMonsterReal(CMonsterReal *this, _DWORD *a2);
// void __usercall CMonsterReal::OnDelete(Concurrency::details::_CancellationTokenRegistration *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CMonsterReal::SendCreate(_DWORD *this, int a2, int a3);
// int __userpurge CMonsterReal::Damage@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, _DWORD *a4, _DWORD *a5, _DWORD *a6, int a7);
int __thiscall CChar::GetFinalDamage(_DWORD *this, _DWORD *a2, int a3, int a4);
// void __userpurge CMonsterReal::Defense(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2);
void *__thiscall CMonsterReal::ReviseProperty(_DWORD *this);
int __stdcall CChar::GetMaxMP(_DWORD *);
// int __userpurge CMonsterReal::SetTarget@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2);
// void __usercall CMonsterReal::UpdateProperty(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, int a3, int a4);
// void __usercall CMonsterReal::UpdatePrtyPt(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, int a3, int a4, int a5);
int __thiscall CChar::GetStr(_DWORD *this);
int __thiscall CChar::GetHth(_DWORD *this);
int __thiscall CChar::GetInt(_DWORD *this);
int __thiscall CChar::GetWis(_DWORD *this);
int __thiscall Char::GetDex(_DWORD *this);
// void __usercall CMonsterReal::UpdatePrtyPer(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, int a3, int a4, int a5);
// void __userpurge CPlayer::AddMState(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// void __userpurge CPlayer::SubMState(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
BOOL __thiscall CMonsterReal::SetProperty(_DWORD *this, _DWORD *a2);
int __thiscall CFindPath::Init(_DWORD *this, int a2, int a3, int a4);
// void __userpurge CMonsterReal::Add(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __usercall CMonsterReal::Remove(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CMonsterReal::AI(int *this);
// void __usercall CMonsterReal::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// CIOObject *__userpurge CMonsterReal::AddHostility@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD esi0@<esi>, CIOObject *a2, CItem *_Val2, int a4);
// void __userpurge CMonsterReal::RemoveHostility(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, volatile int *a2);
int __thiscall CMonsterReal::GetMSpeed(int *this, int a2);
// void __usercall CMonsterReal::Attack(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
__int64 __cdecl sub_43D870(_DWORD *a1, _DWORD *a2);
int __thiscall CChar::GetASpeed(_DWORD *this);
int __thiscall CChar::GetAttack(void *this);
int __thiscall CChar::GetMinAttack(_DWORD *this);
int __thiscall CChar::GetMaxAttack(_DWORD *this);
BOOL __thiscall CChar::CheckHit(int this, _DWORD *a2, int a3);
int __thiscall CChar::GetHit(_DWORD *this);
int __thiscall CChar::GetDodge(_DWORD *this);
// signed int __usercall CMonsterReal::Move@<eax>(signed int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// int __userpurge CMonsterReal::GetRandomPt@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int *a2);
// int __userpurge CSMap::IsMoveTile@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3, int Number, int a5, int a6);
// int __userpurge CellMap::IsMoveTile@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, Concurrency::details::_CancellationTokenRegistration *a2, _DWORD *a3, int a4, int a5);
// struct Concurrency::details::_CancellationTokenState *__thiscall Concurrency::details::_CancellationTokenRegistration::_GetToken(Concurrency::details::_CancellationTokenRegistration *__hidden this); idb
int __thiscall CCellMap::GetLock(_DWORD *this, int *a2);
// int __userpurge CMonsterReal::GetChasePt@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int *a2, unsigned int *a3);
BOOL __thiscall CFindPath::IsGoal(_DWORD *this);
int __thiscall CFindPath::GetPixel(_DWORD *this);
int __thiscall CFindPath::SetNextPath(_DWORD *this);
// Concurrency::details::_CancellationTokenRegistration *__usercall CMonsterReal::ScanSight@<eax>(int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterReal::ManageBuff(_QWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// int __userpurge CMonsterReal::ApplyDamage@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int *a5, int a6, int *a7, int a8);
int __thiscall CChar::GetFatalDamage(int this, int a2, _DWORD *a3, int a4);
// int __userpurge CMonsterReal::AfterDamage@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int a4);
// void __userpurge CMonsterReal::AllotTransformExp(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// int __userpurge CMonsterReal::AllotExp@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int *a3, int *a4);
int __thiscall sub_43F1A0(void *this);
// void __usercall CMonsterReal::ResetHostility(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// int __userpurge CMonsterMaguni::Damage@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7);
// DWORD __userpurge CMonsterMaguni::Die@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int *a4, int *a5);
// CIOObject **__userpurge CMonsterMaguniWithSkillOnly::SetTarget@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2);
// void __usercall CMonsterMaguniWithSkillOnly::AI(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterMaguniWithSkillOnly::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterMaguniWithSkill::AI(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterMaguniWithSkill::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterMaguniWithSkill::Attack(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall sub_440070(int this);
int __thiscall CMonsterTowerBoss::IsIgnore(_DWORD *this);
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::CMonsterTowerBoss(CMonsterTowerBoss *this, int a2, int a3);
// int __usercall CMonsterTowerBoss::Create@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall CMonsterTowerBoss::OnDelete(Concurrency::details::_CancellationTokenRegistration *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge CMonsterTowerBoss::Defense(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2);
// void __usercall CMonsterMaguniMaster::AI(int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterTowerBoss::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterTowerBoss::Attack(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge CMonsterTowerBoss::UpdateChild(volatile int *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
CGenMonster *__thiscall CMonsterTowerBoss::Summon(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall CMonsterTowerBoss::Reaction(_DWORD *this, int a2, int a3);
// _DWORD *__usercall CMonsterTowerBoss::OnSummon@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __stdcall CMonsterNotReal::AddBuff(int a1);
// int __userpurge CMonsterInactive::Damage@<eax>(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, _DWORD *a6, int a7);
int __thiscall CMonsterInactive::SetProperty(_DWORD *this, int a2);
// void __userpurge CMonsterInactive::Add(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
CMonsterGuildWar *__thiscall CMonsterGuildWar::CMonsterGuildWar(CMonsterGuildWar *this, int a2, int a3, int a4, int a5, char *Source);
// CMonsterGuildWar *__usercall CMonsterGuildWar::Create@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, int a2, int a3, int a4, int a5, char *Source, int a7);
BOOL __thiscall CInitMonster::IsRace(_DWORD *this, int a2);
// int __userpurge CMonsterGuildWar::Damage@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, _DWORD *a6, int a7);
int __thiscall CMonsterGuildWar::SetProperty(char *this, int a2);
void __thiscall CMonsterGuildWar::Tick(_DWORD *this);
void __thiscall CMonsterGuildWar::SetGuild(int this, int a2, char *Source);
// void __userpurge CPlayer::SubGState(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// int __userpurge CMonsterItem::Damage@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5, int a6, int a7);
// void __usercall CMonsterItem::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge CMonsterItem::Add(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __usercall CMonsterItem::Remove(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
CMonsterMagic *__thiscall CMonsterMagic::CMonsterMagic(CMonsterMagic *this, int a2, int a3, int a4, int a5, int a6);
// CMonsterMagic *__usercall CMonsterMagic::Create@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, int a2, int *a3, int a4, int a5, int a6, int a7);
// void __usercall CMonsterMagic::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall CMonsterMagic::SetProperty(int this, int a2);
// void __userpurge CMonsterMagic::Add(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __usercall CMonsterBlackBug::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge CMonsterReal::Die(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int *a4, int *a5);
// int __userpurge CMonsterBlackBug::Damage@<eax>(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7);
// void __userpurge CMonsterBlackBug::UpdateChild(volatile int *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
CGenMonster *__thiscall CMonsterBlackBug::Summon(_DWORD *this, int a2, int a3, int a4, int a5);
void __thiscall CMonsterSiegeGunRuins::AI(int *this);
// void __usercall CMonsterEgg::Tick(char *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// _DWORD *__userpurge CMonsterEgg::Summon@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5);
// _DWORD *__usercall CMonsterEgg::OnSummon@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterCocoon::Tick(char *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterMaguniMaster::Create(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2);
CMonsterMaguniMaster *__thiscall CMonsterMaguniMaster::CMonsterMaguniMaster(CMonsterMaguniMaster *this);
// void __usercall CMonsterMaguniMaster::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
CMonsterBigBirdMother *__thiscall CMonsterBigBirdMother::CMonsterBigBirdMother(CMonsterBigBirdMother *this);
// void __usercall CMonsterBigBirdMother::Create(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall CMonsterBigBirdMother::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
CGenMonster *__thiscall CMonsterBigBirdMother::Summon(_DWORD *this, int a2, int a3, int a4, int a5);
// _DWORD *__usercall CMonsterBigBirdMother::OnSummon@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// int __usercall CMonsterBigBirdMother::Move@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// int __userpurge CMonsterBigBirdMother::Damage@<eax>(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7);
// unsigned int __usercall CMonsterBigBirdMother::Attack@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterFireFlower::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterBigBirdMaster::Create(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1);
CMonsterBigBirdMaster *__thiscall CMonsterBigBirdMaster::CMonsterBigBirdMaster(CMonsterBigBirdMaster *this);
// _DWORD *__usercall CMonsterFireFlower::_CMonsterFireFlower@<eax>(void *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CMonsterBigBirdMaster::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CMonsterMaguniMaster::Die(int this, int a2, int a3, int *a4, int *a5);
int __thiscall CMonsterSiegeGun::CMonsterSiegeGun(int this, int a2, int a3, int a4, char *Source, int a6);
_DWORD *__cdecl CMonsterSiegeGun::Create(int a1, int a2, int a3, int a4, int a5, char *Source, int a7);
void __thiscall CMonsterSiegeGun::AI(int *this);
void __thiscall CMonsterSiegeGun::Tick(_DWORD *this);
void __thiscall CMonsterSiegeGun::Die(_DWORD *this, int a2, int a3, int a4, int a5);
void __thiscall CMonsterSiegeGun::SetFire(_DWORD *this, _DWORD *a2);
int __thiscall CMonsterSiegeGun::Summon(_DWORD *this, char a2, int a3, int a4, int a5);
void __thiscall CMonsterSiegeGun::SetOperator(_DWORD *this, int a2);
int __thiscall CMonsterSiegeGun::Damage(char *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7);
int __thiscall CMonsterSiegeGunBall::CMonsterSiegeGunBall(int this, int a2, int a3, int a4, int a5);
_DWORD *__cdecl CMonsterSiegeGunBall::Create(char a1, int a2, int *a3, int a4);
void __thiscall CMonsterSiegeGunBall::Tick(int this);
void __thiscall CMonsterSiegeGunBall::AI(int *this);
void __thiscall CMonsterSiegeGunRuins::Tick(int this);
void __thiscall CMonsterWithSkillOnly::Tick(int this);
void __thiscall CMonsterWithSkillOnly::Attack(_DWORD *this);
void __thiscall CMonsterInvaderBoss::AI(int *this);
void __thiscall CMonsterInvaderBoss::Tick(_DWORD *this);
void __thiscall sub_445B20(std::vector<CIOSocket::CIOTimer> *this);
int __thiscall sub_445B40(_DWORD *this, int a2);
BOOL __thiscall sub_445B60(std::vector<CIOSocket::CIOTimer> *this);
CIOSocket::CIOTimer *__thiscall sub_445B80(int this, CIOSocket::CIOTimer *_Val);
void __thiscall sub_445BF0(std::vector<IPAddrMask> *this);
IPAddrMask *__thiscall sub_445C10(int this, IPAddrMask *_Val);
void *__thiscall sub_445C80(void *this);
int __thiscall sub_445CB0(void *this);
int __thiscall sub_445CD0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int *_Keyval);
_DWORD *__thiscall sub_445D30(int *this);
_DWORD *__thiscall sub_445D90(int *this);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_445DF0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::pair<char const * const,CItem *> *a3);
int __thiscall sub_445FA0(int *this, int *a2);
_DWORD *__thiscall sub_446000(int *this);
_DWORD *__thiscall sub_446060(int *this, _DWORD *a2, int a3);
int *__thiscall sub_446090(int *this, int *a2, int a3);
void *__thiscall sub_4460C0(void *this);
int __thiscall sub_4460F0(int *this);
BOOL __thiscall sub_446110(void *this);
_DWORD *__thiscall sub_446130(int *this, _DWORD *a2, _DWORD *a3);
int __thiscall std::vector<CIOSocket::CIOTimer>::capacity(std::vector<CIOSocket::CIOTimer> *this);
_DWORD *__thiscall sub_446200(int *this, _DWORD *a2, CIOSocket::CIOTimer *a3, int *a4);
CIOSocket::CIOTimer *__thiscall std::vector<CIOSocket::CIOTimer>::_Ufill(std::vector<CIOSocket::CIOTimer> *this, CIOSocket::CIOTimer *_Ptr, unsigned int _Count, const CIOSocket::CIOTimer *_Val); // idb
_DWORD *__thiscall sub_4462B0(int *this, _DWORD *a2, IPAddrMask *a3, int *a4);
// int __thiscall unknown_libname_18(_DWORD); weak
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_446350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::equal_range(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *result, const int *_Keyval); // idb
int __stdcall sub_446430(void *a1);
int __thiscall sub_4464B0(int *this);
int __stdcall sub_446560(void *a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4465E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __stdcall sub_446680(void *a1);
void *__thiscall sub_446700(void *this, int a2);
void *__thiscall sub_446720(int *this, void *a2, _DWORD *a3);
int __thiscall sub_446750(int *this);
unsigned int __thiscall sub_446800(std::allocator<CIOSocket::CIOTimer> *this);
void __thiscall sub_446820(int this, CIOSocket::CIOTimer *a2, unsigned int _Count, int *a4);
void sub_446B00();
CMemory **__stdcall sub_446B40(int a1);
unsigned int __thiscall sub_446B60(std::allocator<std::pair<char const * const,CItem *> > *this);
void __thiscall sub_446B80(int this, IPAddrMask *_First, unsigned int _Count, int *a4);
CMemory **__stdcall sub_446E50(int a1);
void *__thiscall sub_446E70(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, int *_Keyval);
int __thiscall sub_446EA0(int *this, _DWORD *a2);
_DWORD *__thiscall sub_446F30(int *this);
// _DWORD __cdecl unknown_libname_19(_DWORD); weak
_DWORD *__thiscall sub_446FA0(int *this, _DWORD *a2, int _Off);
// _DWORD __stdcall unknown_libname_20(_DWORD); weak
int __cdecl sub_446FF0(int a1);
int __cdecl sub_447000(int a1);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447010(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_4470B0(int *this, _DWORD *a2);
int __cdecl sub_4470E0(int a1);
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Ubound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval); // idb
void *sub_4471B0();
int __stdcall sub_4472D0(void *a1);
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall std::vector<CIOSocket::CIOTimer>::iterator::operator+=(std::vector<CIOSocket::CIOTimer>::iterator *this, int _Off); // idb
_DWORD *__thiscall sub_447370(int *this);
// _DWORD __stdcall unknown_libname_21(_DWORD); weak
int __stdcall sub_4473F0(void *a1);
void __cdecl std::_Destroy_range<CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last);
CIOSocket::CIOTimer *__stdcall sub_4474B0(int _First, int _Last, void *_Dest);
CIOSocket::CIOTimer *__cdecl std::copy_backward<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest); // idb
void __cdecl std::fill<IPAddrMask *,IPAddrMask>(IPAddrMask *_First, IPAddrMask *_Last, const IPAddrMask *_Val); // idb
// _DWORD __stdcall std___Init_locks__operator_(_DWORD); weak
// _DWORD __cdecl unknown_libname_23(_DWORD); weak
void *__cdecl sub_447570(void *a1, int a2, int a3);
void __stdcall sub_4475D0(void *_Ptr, int _Val);
void *__cdecl sub_4475F0(int a1, int a2, void *a3);
void *__cdecl sub_447660(int a1, int a2, void *a3);
void __cdecl std::_Construct<CIOSocket::CIOTimer,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_Ptr, const CIOSocket::CIOTimer *_Val); // idb
void __cdecl std::_Construct<IPAddrMask,IPAddrMask>(IPAddrMask *_Ptr, const IPAddrMask *_Val); // idb
void *__thiscall sub_447760(void *this);
void *__thiscall sub_447790(void *this);
void *__thiscall sub_4477C0(void *this);
int __thiscall sub_4477F0(int *this);
int __thiscall sub_447810(int *this);
int __thiscall sub_447830(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4478E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_447980(int *this);
int __thiscall sub_4479A0(int *this);
int __thiscall sub_4479C0(int *this);
int __thiscall sub_447A70(int *this);
int __thiscall sub_447A90(int *this);
int __thiscall sub_447AB0(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447B60(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall CInitNPC::CInitNPC(_DWORD *this);
void *__thiscall CInitNPC::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CInitNPC::_CInitNPC(_DWORD *this);
BOOL CInitNPC::Close();
_DWORD *CInitNPC::Copy();
int __thiscall CInitNPC::Set(_DWORD *this, int a2, int a3);
int __thiscall CInitNPC::OnLoad(int this);
_DWORD *__thiscall CGenNPC::CGenNPC(_DWORD *this);
void *__thiscall CGenNPC::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CGenNPC::_CGenNPC(_DWORD *this);
BOOL CGenNPC::Close();
_DWORD *CGenNPC::Copy();
int __thiscall CGenNPC::Set(_DWORD *this, int a2, int a3);
int __thiscall CGenNPC::OnLoad(int this);
int __thiscall CNPCObject::CNPCObject(int this);
void __thiscall CNPCObject::_CNPCObject(void *);
void __thiscall CNPCObject::OnTimer(int this, int a2);
void __thiscall CNPCObject::Insert(int this, CLink *a2);
int __thiscall CNPC::CNPC(int this, _DWORD *a2);
BOOL __thiscall sub_448820(int *this, int a2);
int __cdecl sub_448870(_DWORD *a1, _DWORD *a2);
void __stdcall CGunnery::ExcutePassive(int a1, int a2, int a3);
void *__thiscall CNPC::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CNPC::_CNPC(_DWORD *this);
void __cdecl CNPC::Create(_DWORD *a1);
_DWORD *__thiscall CNPCTeleport::CNPCTeleport(_DWORD *this, _DWORD *a2);
int __thiscall NPCScenario::_CNPCScenario(_DWORD *this);
_DWORD *__thiscall CNPCMerchant::CNPCMerchant(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall CNPCInformant::_scalar_deleting_destructor_(_DWORD *this, char a2);
_DWORD *__thiscall CNPCQuest::CNPCQuest(_DWORD *this, _DWORD *a2);
BOOL __thiscall CNPCQuest::CanReply(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall CNPCScenario::CNPCScenario(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall CNPCDoor::CNPCDoor(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall CNPCSiegeGunStone::CNPCSiegeGunStone(_DWORD *this, _DWORD *a2);
LONG CNPC::Size();
void CNPC::Start();
int CNPC::Stop();
int __cdecl CNPC::FindNPC(char a1);
int __cdecl CNPC::CanReply(char a1, int a2);
// void __usercall sub_4490A0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5);
void __thiscall CNPC::OnDelete(Concurrency::details::_CancellationTokenRegistration *this);
void __thiscall CNPC::SendDelete(_DWORD *this, int a2, int a3);
void __thiscall CNPC::SendCreate(_DWORD *this, int a2, int a3);
void __thiscall CMonsterReal::AddGState(int this, int a2);
void __thiscall CNPC::Reply(_DWORD *this, int a2);
void __cdecl CNPC::WarRelationShow(int a1, int a2);
void __thiscall CNPC::Add(int this);
LONG __thiscall CNPC::Remove(_DWORD *this);
int __thiscall CMonster::IsRemoved(int this);
void __thiscall CNPC::SetProperty(_DWORD *this, int a2, _DWORD *a3);
void __thiscall CNPC::Show(Concurrency::details::_CancellationTokenRegistration *this, int a2);
void __cdecl CNPC::GetNPCList(int a1, int a2, int a3);
void __thiscall CNPCQuest::Reply(int *this, int a2);
void __cdecl CNPCScenario::MirrorGState(int a1, int a2);
void __cdecl CNPCScenario::ThroneGState(int a1, int a2);
void __cdecl CNPCScenario::ResetBossTower(int a1);
void __thiscall CNPCScenario::Tick(int *this);
void __thiscall CNPCScenario::InitScenario(_DWORD *this);
void __thiscall CNPCScenario::Process(int *this, int a2, void *Src, int end);
int __thiscall CNPCTeleport::Process(_DWORD *this, int a2, void *Src, int end);
void __thiscall CNPCDoor::Tick(_DWORD *this);
void __thiscall CNPCDoor::Process(_DWORD *this, int a2, void *Src, int end);
void __thiscall CNPCSiegeGunStone::Reply(_DWORD *this, int a2);
void __thiscall CNPCSiegeGunStone::Tick(_DWORD *this);
int __thiscall CPlayer::SubEState(_DWORD *this, int a2);
int __thiscall CPlayer::IsEState(_DWORD *this, int a2);
void __thiscall CNPCSiegeGunStone::SiegeGunSet(int this, _DWORD *a2, int a3, int a4);
int __thiscall CPlayerSkill::IsSkill(_DWORD *this, int a2);
void __thiscall CNPCSiegeGunStone::SiegeGunUnSet(_DWORD *this, _DWORD *a2, int a3);
void __thiscall CNPCSiegeGunStone::Show(Concurrency::details::_CancellationTokenRegistration *this, int a2);
void __thiscall CNPCSiegeGunStone::SendCreate(_DWORD *this, int a2, int a3);
void __thiscall CNPCSiegeGunStone::SetOperator(_DWORD *this, int a2);
void __thiscall CNPCSiegeGunStone::SetSiegeGun(_DWORD *this, int a2);
int __thiscall sub_44ADC0(int *this, int *a2);
_DWORD *__thiscall sub_44AE20(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, _DWORD *a2, int *a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44AEB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_44AF50(int *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_44B6E0(int *this);
int *__thiscall sub_44B740(int *this);
int *__thiscall sub_44B760(int *this);
int __stdcall sub_44B780(void *a1);
unsigned int __thiscall sub_44B800(int this);
_DWORD *__thiscall sub_44B820(_DWORD *this, int a2, int a3, _DWORD *a4);
unsigned int __thiscall std::allocator<unsigned long>::max_size(std::allocator<unsigned long> *this); // idb
void *__thiscall sub_44B880(void *this);
void *__thiscall sub_44B8B0(void *this);
void *__thiscall sub_44B8E0(void *this);
// int __thiscall LocaleUpdate__GetLocaleT(_DWORD); weak
int __thiscall sub_44B920(int *this);
int __thiscall sub_44B940(int *this);
int __thiscall sub_44B960(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BA10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_44BAB0(int *this);
int __stdcall sub_44BB10(void *a1);
int __thiscall sub_44BB90(int *this);
int __thiscall sub_44BBB0(int *this);
int __thiscall sub_44BBD0(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BC80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_44BD20(int *this);
int __stdcall sub_44BD80(void *a1);
int __thiscall sub_44BE00(int *this);
int __thiscall sub_44BE20(int *this);
int __thiscall sub_44BE40(int *this);
int sub_44BEF0();
int __thiscall CObjectDB::Open(int this, char *FileName);
int __cdecl CObjectDB::FindSymbol(char a1);
int __thiscall CObjectDB::Load(void *this, int a2);
int __stdcall sub_44C860(_DWORD *a1, int a2);
void CObjectDB::Close();
LONG CObjectDB::CanReload();
_DWORD *__thiscall sub_44C970(iless *this, _DWORD *a2, const char **a3);
void *__thiscall sub_44CA00(int *this, void *a2, const char **a3);
int __thiscall sub_44CA30(int *this, const char **a2);
int *__thiscall sub_44CAC0(int *this, int a2);
int *__thiscall sub_44CBF0(int *this, int a2);
void *__stdcall sub_44CD20(int a1);
void *__thiscall sub_44CD40(void *this);
void __stdcall sub_44CD70(void *a1);
void *__thiscall sub_44CD90(void *this);
void __cdecl std::_Construct<std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node *,std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node *>(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **_Ptr, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *const *_Val); // idb
_DWORD *__thiscall CQuest::CQuest(_DWORD *this);
_DWORD *__thiscall CQuest::_scalar_deleting_destructor_(_DWORD *this, char a2);
void *__thiscall std::_List_ptr<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_ptr<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(void *this, char a2);
CMemory **__cdecl sub_44CEC0(int a1);
int __thiscall sub_44CEE0(int *this);
int __thiscall sub_44CF00(int *this);
int __thiscall sub_44CF20(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44CFD0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_44D070(int *this);
int __stdcall sub_44D0D0(void *a1);
int __thiscall sub_44D150(int *this);
int __thiscall sub_44D170(int *this);
int __thiscall sub_44D190(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44D240(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_44D2E0(int *this);
int __stdcall sub_44D340(void *a1);
int __thiscall CParty::CParty(int this, CIOObject *a2);
void *__thiscall CParty::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall Party::_CParty(char *this);
int __cdecl CParty::FindParty(char a1);
int __cdecl CParty::Accept(CIOObject *a1, CIOObject *a2);
void __cdecl sub_44D620(int a1, int a2);
void __thiscall CParty::OnFree(CIOObject *this);
void __thiscall CParty::OnTimer(int this, int a2);
void __thiscall CParty::Add(int this);
void __thiscall CParty::Remove(volatile int *this);
int __thiscall CParty::IsHead(int this, int a2);
int __thiscall CParty::IsMember(_DWORD *this, int a2);
int __thiscall CParty::FindTopLevel(_DWORD *this);
void __thiscall CParty::Join(int this, int a2, CIOObject *a3);
void __thiscall CParty::Leave(int this, CIOObject *a2);
void __thiscall CParty::Delete(int this);
void __thiscall CParty::Exile(int this, int a2, CIOObject *a3);
void __thiscall CParty::AllotExp(int this, int *a2, int a3, int a4);
void __thiscall CParty::SendPartyInfo(int this, int a2);
void __thiscall CParty::UpdateMemberHP(int this, _DWORD *a2);
void __thiscall CParty::UpdateMemberLevel(int this, _DWORD *a2);
void __thiscall CParty::Broadcast(int this, void *a2, int a3);
void __thiscall CParty::_Broadcast(_DWORD *this, void *Src, int a3);
volatile int *__thiscall CParty::GetRandomPlayer(int this);
int __thiscall CParty::Teleport(int this, int a2, int a3);
_DWORD *__thiscall CParty::StoreItem(int this, _DWORD *a2);
int __thiscall CParty::DistributeItem(int this, _DWORD *a2);
void __thiscall CParty::AllotTransformExp(int this, int a2, _DWORD *a3);
void __thiscall CParty::Healing(int this, _DWORD *a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall CParty::Chant(void *this, _DWORD *a2, int *a3);
int __thiscall CParty::GetPlayerList(int this);
_DWORD *__thiscall CParty::_GetPlayerList(_DWORD *this);
int __thiscall CParty::GetLuckySize(int this, int a2);
void __thiscall sub_44F580(std::vector<unsigned long> *this);
int __thiscall sub_44F5A0(unsigned int **this, int a2, void *a3);
int __thiscall sub_44F600(int *this, int *a2);
int __thiscall std::vector<unsigned long>::capacity(std::vector<unsigned long> *this);
char __thiscall std::vector<unsigned long>::_Buy(std::vector<unsigned long> *this, unsigned int _Capacity);
void __stdcall sub_44F720(unsigned int *_First, unsigned int *_Last);
void __thiscall std::vector<unsigned long>::_Tidy(std::vector<unsigned long> *this); // idb
void *__thiscall sub_44F7C0(void *this, char a2);
_DWORD *__thiscall sub_44F7E0(int *this, _DWORD *a2, int _Off);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44F810(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_44F8B0(int *this);
_DWORD *__thiscall sub_44F8D0(int *this);
int __stdcall sub_44F930(void *a1);
_DWORD *__cdecl sub_44F9B0(_DWORD *a1, int a2);
unsigned int *__cdecl std::copy_backward<unsigned long *,unsigned long *>(unsigned int *_First, unsigned int *_Last, unsigned int *_Dest); // idb
void __cdecl std::_Destroy_range<unsigned long>(unsigned int *_First, unsigned int *_Last);
void __cdecl std::_Uninitialized_fill_n<unsigned long *,unsigned int,unsigned long,std::allocator<unsigned long>>(unsigned int *_First, unsigned int _Count, const unsigned int *_Val);
void __cdecl std::fill<unsigned long *,unsigned long>(unsigned int *_First, unsigned int *_Last, const unsigned int *_Val); // idb
void *__cdecl sub_44FAC0(void *Src, int a2, int a3);
CMemory **__cdecl sub_44FB00(int a1);
unsigned int *__cdecl std::_Uninitialized_copy<unsigned long *,unsigned long *,std::allocator<unsigned long>>(unsigned int *_First, unsigned int *_Last, unsigned int *_Dest);
void __cdecl std::fill_n<unsigned long *,unsigned int,unsigned long>(unsigned int *_First, unsigned int _Count, const unsigned int *_Val); // idb
void *__thiscall sub_44FB90(void *this);
void *__thiscall std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(void *this, _BYTE *a2, char a3);
int __thiscall sub_44FBF0(int *this);
int __thiscall sub_44FC10(int *this);
int __thiscall sub_44FC30(int *this);
// CMemory **__usercall sub_44FCE0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char a4, ...);
int __cdecl sub_44FD40(int a1, int a2);
void __thiscall CPlayerObject::OnTimer(CIOObject *this, int a2);
int __thiscall CPlayer::CPlayer(int this, int a2, int a3, int a4);
void __stdcall Player::SendPacket(void *Src);
void __thiscall CPlayer::SendMove(void *this, void *a2, void *Src);
_DWORD *__thiscall CPlayer::InitGambleInfo(_DWORD *this);
void *__thiscall CPlayer::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CPlayer::_CPlayer(char *this);
int __thiscall sub_450650(int *this);
int __thiscall sub_450670(int *this);
int __thiscall sub_450690(void *this);
int __thiscall sub_4506B0(int *this);
int __thiscall sub_4506D0(int *this);
int __thiscall sub_4506F0(int *this);
int __thiscall sub_450710(int *this);
void CPlayer::Start();
CIOObject *__cdecl CPlayer::ScanPlayer(char a1);
CIOObject *__cdecl sub_450810(int a1);
// CIOObject *__usercall CPlayer::FindPlayer@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1);
// void __usercall CPlayer::WriteAll(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char a4, ...);
// void __usercall CPlayer::WriteInMap(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, char a2, ...);
// void __usercall CPlayer::LogPlayerStatistic(DWORD a1@<ebx>, DWORD a2@<esi>);
// void __usercall CPlayer::OnFree(void (__thiscall ***this)(void *, int)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CPlayer::OnDelete(int this);
int __thiscall CPlayer::IsPBit(_DWORD *this, char a2);
void __thiscall CPlayer::SendDelete(_DWORD *this, int a2, void *Src);
void __thiscall CPlayer::SendCreate(_DWORD *this, _DWORD *a2, void *Src);
void __thiscall CPlayer::AI(int this);
int __thiscall CPlayer::Damage(volatile LONG *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7);
void __thiscall CPlayer::InfoDie(void *this, int a2, int a3);
int __thiscall CPlayer::ReviseProperty(_DWORD *this);
void __thiscall CPlayer::AddMStateEx(int this, int a2);
void __thiscall CPlayer::AddBState(int this, int a2, int a3, int a4);
void __thiscall CPlayer::SubMStateEx(int this, int a2);
void __thiscall CPlayer::SubBState(int this, int a2, int a3);
int __thiscall CPlayer::GetFinalDefense(_DWORD *this, int a2);
int __thiscall CPlayer::GetFinalAbsorb(_DWORD *this, int a2);
int __thiscall CPlayer::GetFinalResist(_DWORD *this, int a2, int a3);
int __thiscall CPlayer::GetMSpeed(int this, int a2);
BOOL __thiscall CPlayer::GetAttackType(_DWORD *this);
BOOL __thiscall CPlayer::CheckBlock(_DWORD *this, _DWORD *a2);
void __thiscall CPlayer::UpdateTransformExp(int this, int a2);
int __thiscall CPlayer::Add(int this);
LONG __thiscall CPlayer::Remove(int this);
void __thiscall CPlayer::Tick(int this);
int __thiscall CPlayer::GetAutoRefreshHP(_DWORD *this);
int __thiscall CPlayer::GetAutoRefreshMP(_DWORD *this);
void __cdecl CPlayer::WarPortalAll(int a1, int a2);
void __stdcall CPlayer::Send(void *Src);
void CPlayer::Write(int a1, char a2, ...);
void __thiscall CPlayer::Process(int this, int a2, void *Src, int end);
int __thiscall CPlayer::GetInvenSize(_DWORD *this);
void __stdcall CPlayer::ExchangeBoddariToItem(int a1, int a2);
void __thiscall CPlayer::ExchahgeItem(int this, CIOObject *a2, int a3, int a4, int a5, int a6);
int __thiscall CPlayer::GetNeedPoint(_DWORD *this, int a2);
int __thiscall CPlayer::OnLoadPlayer(int this, int a2);
_DWORD *__thiscall sub_457E30(_DWORD *this);
_DWORD *__thiscall sub_457E60(_DWORD *this);
int __thiscall CPlayer::_Create(int this);
int __thiscall CChar::GetMinMagic(_DWORD *this);
int __thiscall CChar::GetMaxMagic(_DWORD *this);
void __thiscall CPlayer::GameStart(int this);
void __thiscall CPlayer::GameRestart(int this);
int __thiscall CSocket::Id(_DWORD *this);
void __thiscall CPlayer::SaveAllProperty(int this, int a2);
void __cdecl CPlayer::UpdateProperty(_DWORD *a1, int a2, int a3, __int64 a4);
void __cdecl CPlayer::UpdatePrtyPt(_DWORD *a1, int a2, int a3, int a4, int a5);
void __cdecl CPlayer::UpdatePrtyPer(_DWORD *a1, int a2, int a3, int a4, int a5);
void __thiscall CPlayer::Attack(_DWORD *this, int a2, int a3);
void __thiscall CPlayer::LevelUp(_DWORD *this);
void __thiscall CPlayer::Teleport(_DWORD *this, int a2, _DWORD *a3, int a4, int a5);
int __thiscall CSMap::IsOnTile(_DWORD *this, int *a2, int a3);
int __thiscall CCellMap::IsOnTile(_DWORD *this, _DWORD *a2, int a3);
void __thiscall CPlayer::OnTeleport(int this, int a2, int a3);
int __stdcall CPlayer::_IntoInven(CIOObject *_Val2);
void __stdcall CPlayer::_OutofInven(CIOObject *a1);
int __thiscall CPlayer::FindItem(int this, int a2, int a3);
int __thiscall CPlayer::_FindItem(int this, int a2, int a3);
int __thiscall CPlayer::_FindMergeItem(int this, int a2);
void __thiscall CPlayer::BuyItemEx(int this, int a2, int a3, int a4, void *Src, int end);
void __thiscall CPlayer::SellItem(int this, int a2, int a3, void *Src, int end);
void __thiscall CPlayer::DropItem(int this, char a2, int a3);
void __thiscall CPlayer::TrashItem(int this, char a2);
int __thiscall CPlayer::RemoveItem(int this, int a2, int a3, int a4);
void __thiscall CPlayer::PutOnItem(int this, char a2);
void __thiscall CPlayer::PutOffItem(int this, char a2);
void __thiscall CPlayer::UseItem(int this, char a2);
int __thiscall CPlayer::InsertItem(int this, int a2, int a3);
int __thiscall CPlayer::_InsertItem(_DWORD *this, int a2, CIOObject *a3);
void __thiscall CPlayer::EnchantItem(int this, int a2, int a3);
void __thiscall CPlayer::UpgradeItem(int this, int a2, char a3);
void __thiscall CPlayer::AskTrade(_DWORD *this, int a2);
int __thiscall CPlayer::OnAskTrade(_DWORD *this, int a2, int a3);
void __thiscall CPlayer::CancelTrade(_DWORD *this);
int __thiscall CPlayer::_EndTrade(int this, int a2);
void __thiscall CPlayer::ShowOffItem(int this, int a2, void *Src, int end);
int __thiscall CTrade::IsEnd(_DWORD *this);
int __thiscall CTrade::GetOther(_DWORD *this, int a2);
void __thiscall CPlayer::TradeAgreed(_DWORD *this);
int __thiscall CPlayer::_CheckTrade(_DWORD *this);
BOOL __thiscall CPlayer::_TradeItem(_DWORD *this, _DWORD *a2);
void __thiscall CPlayer::_StorageIn(int this, int a2, int a3, int a4);
int __stdcall CPlayer::_StorageOut(char a1, int a2);
int __thiscall CPlayer::_FindStorageItem(int this, int a2, _DWORD *a3, int a4, int a5);
void __thiscall CPlayer::StorageInfo(int this);
void __thiscall CPlayer::PutInStorage(int this, int a2, int a3, void *Src, int end);
void __thiscall CPlayer::PutOutStorage(int this, int a2, int a3, void *Src, int end);
void __thiscall CPlayer::SetStallInfo(int this, int a2, void *Src, int end);
char *__thiscall sub_45F300(char *this, int a2);
void __thiscall CPlayer::GetStallInfo(int this, int a2, int a3);
void __thiscall CPlayer::SwitchStall(int this, int a2);
int __thiscall CChar::IsGStateExcept(_DWORD *this, int a2);
void __thiscall CPlayer::BuyItemAtStall(_DWORD *this, int a1, int a3, int a4, void *Src, int end);
int __thiscall sub_45F9A0(int this);
int __thiscall sub_45F9D0(int this, int a2);
void __cdecl sub_45FA10(unsigned int a1, unsigned int a2);
void __cdecl sub_45FA60(int a1, int a2);
void __thiscall CPlayer::AskParty(_DWORD *this, int a2);
void __thiscall CPlayer::OnAskParty(CIOObject *this, int a2, int a3);
void __thiscall CPlayer::LeaveParty(CIOObject *this);
void __thiscall CPlayer::ExileParty(_DWORD *this, int a2);
unsigned int __thiscall CPlayer::GetPartySize(_DWORD *this);
void __thiscall CPlayer::UpdatePartyMember(_DWORD *this, int a2);
void __thiscall CPlayer::SaveQuestFlag(int this, int a2, int a3);
BOOL __thiscall CPlayer::CheckQuestFlag(int this, int a2);
int __thiscall CPlayer::CheckQuestClear(int this, char a2);
void __thiscall CPlayer::QuestGuide(int this, int a2);
void __thiscall CPlayer::AskPvP(_DWORD *this, int a2);
void __cdecl sub_460490(unsigned int a1, unsigned int a2);
void __thiscall CPlayer::OnAskPvP(int this, int a2, int a3);
void __thiscall CPlayer::OnPvP(int this);
void __thiscall CPlayer::EndPvP(int this, volatile int *a2, int a3, int a4, int a5);
void __thiscall CPlayer::ProcessMsg(int this, char *Str1);
void __thiscall CPlayer::ChatCommand(int this, char *Str1);
void __thiscall CPlayer::Rest(volatile LONG *this, int a2);
int __thiscall CPlayer::CutdownExp(int this, int a2);
// void __usercall CPlayer::Revival(volatile LONG *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CPlayer::RevivalSkill(_DWORD *this, int a2, int a3);
// int __userpurge CPlayer::RevivalItem@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
void __thiscall CPlayer::SaveRevivalPt(_DWORD *this, int a2, int a3);
void __thiscall CPlayer::ProcessEvent(CIOObject *this, int a2, void *Src, int end);
void __thiscall CPlayer::OnProcessEvent(_DWORD *this, int a2, void *Src);
void __thiscall CPlayer::InitStat(char *this);
_DWORD *__thiscall CPlayer::EventInsert(_DWORD *this, int a2);
_DWORD *__thiscall CPlayer::EventRemoveAll(_DWORD *this);
BOOL __thiscall CPlayer::EventIsMoraTime(_DWORD *this);
unsigned int __thiscall CPlayer::EventSetMora(_DWORD *this, int a2);
void __thiscall CPlayer::EventSaveDB(_DWORD *this);
void __thiscall CPlayer::MLMProcess(int this, int a2, void *Src, int end);
int *__thiscall sub_466AB0(int *this, int a2, int a3, void *Src, int a5, int a6, int a7, int a8);
// void __usercall sub_466B20(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, unsigned int a4, unsigned int a5);
// void __usercall sub_466B70(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5);
void __thiscall CPlayer::MLMLoad(int this, _DWORD *a2);
_DWORD *__thiscall CPlayer::_MLMInsert(_DWORD **this, _DWORD *a2);
void __thiscall CPlayer::MLMDelete(int this, int a2, int a3);
void __thiscall CPlayer::_MLMDelete(_DWORD **this, int a2, int a3);
void __thiscall CPlayer::MLMDeleteAll(int this);
void __thiscall CPlayer::MLMUpdate(int this, int a2, int a3, int a4);
_DWORD *__thiscall CPlayer::_MLMFind(_DWORD *this, int a2, int a3);
void __thiscall CPlayer::_MLMGet(_DWORD *this, void **a2, int a3);
int __thiscall CPlayer::MLMPupilNum(int this);
void __thiscall CPlayer::MLMPayMoney(int this, int a2);
void __thiscall CPlayer::MLMAccumFee(int this, int a2);
void __thiscall CPlayer::MLMLevelUp(int this);
void __thiscall CPlayer::FRDProcess(int this, int a2, void *packet, int end);
_DWORD *__thiscall sub_468200(_DWORD *this);
int *__thiscall sub_468240(int *this, int a2, void *Src, int a4);
int __thiscall CPlayer::MailSend(int this, int a2, int a3, char *Str2, int a5, int a6, int a7, int a8, int a9, int a10, int a11);
void __thiscall CPlayer::MailSendResult(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12);
// void __userpurge CPlayer::MAILProcess(int ecx0@<ecx>, DWORD a2@<ebx>, int *a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
_DWORD *__thiscall sub_469C80(_DWORD *this);
int __thiscall CPlayer::IsCooking(int this, int a2);
int __thiscall CPlayer::Cooking(int this, int a2);
volatile int *__thiscall CPlayer::GetGuild(_DWORD *this);
void __thiscall CPlayer::SetGuild(CIOObject **this, CIOObject *a2);
int __thiscall CPlayer::GetGID(_DWORD *this);
void __thiscall CPlayer::SetGID(_DWORD *this, int a2);
void __thiscall CPlayer::SetGuildLevel(_DWORD *this, int a2);
void __thiscall CPlayer::SetGuildName(char *this, char *Source);
void __thiscall CPlayer::SetGuildStandard(_DWORD *this, int a2);
void __thiscall CPlayer::SetGuildClass(int this, int a2, char *Source);
int *__thiscall CPlayer::GetGuildName(int *this);
int __thiscall CPlayer::GetGuildStandard(int *this);
int *__thiscall CPlayer::GetGuildClassTitle(int *this);
// int __userpurge CPlayer::IsDefenseSide@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
int __thiscall CPlayer::CanAttack(int this, int a2, int a3);
void __thiscall CPlayer::PKKill(int this, int a2);
int __thiscall sub_46B2C0(int this);
int CPlayer::GetDropItemMask();
// int __userpurge CPlayer::AddBuff@<eax>(_QWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a2);
// void __usercall CPlayer::PKBulletinInfoSend(void *this@<ecx>, DWORD a2@<ebx>, char *a3@<edi>, DWORD a4@<esi>);
// void __usercall CPlayer::PKBulletinLoad(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1);
// void __usercall CPlayer::ScanONPKPlayer(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall CPlayer::EventBuff(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1);
// void __usercall CPlayer::DropItemONPKDie(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge CPlayer::Transform(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// void __usercall CPlayer::FreeTransform(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CPlayer::BreakStandard(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CPlayer::RefreshStandardBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
BOOL __thiscall CPlayer::IsWearBuffStandard(int *this);
// void __userpurge CPlayer::Bless(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// void __userpurge CPlayer::SetSystemCode(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2);
// void __userpurge CPlayer::SetEventCode(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2);
int __thiscall CPlayer::IsPCBang(_DWORD *this);
// void __userpurge CPlayer::Shortcut(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, void *Src, int end);
// void __userpurge CPlayer::OnGetMyTelPt(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, char *packet);
_DWORD *__thiscall sub_46C290(_DWORD *this);
void __thiscall sub_46C2D0(std::string *this);
// void __userpurge CPlayer::SetMyTelPt(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, void *Src, int end);
_DWORD *__thiscall sub_46C920(_DWORD *this, int a2, _DWORD *a3, int a4);
// void __userpurge CPlayer::OnSetMyTelPt(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, void *Src);
int __thiscall CPlayer::GetPalsyDamage(_DWORD *this, _DWORD *a2);
int __thiscall CPlayer::CanMove(_DWORD *this);
// void __userpurge CPlayer::NPCProcess(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, char a2, int a3, int a4, int a5);
void __thiscall CPlayer::ChangePlayerName(char *this, char *Str);
// void __userpurge CPlayer::OnChangePlayerName(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, char *Source);
void __thiscall CPlayer::ChangeGuildName(char *this, char *Str);
// void __userpurge CPlayer::OnChangeGuildName(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, char *Source);
// void __userpurge CPlayer::EventProcessNPC(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4);
int __stdcall CPlayer::SubState(int *a1, int a2);
int __stdcall CPlayer::IsState(int a1, int a2);
int __thiscall CPlayer::InsertOwnItem(void *this, int a1, int a2);
void __thiscall CPlayer::ExchangeDanjiToItem(void *this, int a1, int a2);
void __thiscall CPlayer::SiegeGunProcess(_DWORD *this, int a2, int a3, int a4, int a5);
void __thiscall CPlayer::SiegeGunControl(_DWORD *this, int a2, void *Src, int a4);
void __thiscall CPlayer::SiegeGunUnset(_DWORD *this, int a2);
int __thiscall CPlayer::ReturnToPoint(_DWORD *this, int a2);
int CPlayer::CountWarrelationPlayer();
void __thiscall CPlayer::EnforceItem(int this, int a2, int a3, int a4, int a5, int a6, char a7);
int __thiscall sub_46EF70(_DWORD *this);
int __stdcall sub_46EF90(int a1, int a2, int a3);
BOOL __stdcall sub_46F2C0(int a1);
void __thiscall sub_46F320(void *this, CIOObject *a2);
// void __userpurge sub_46F350(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_4703E0(int *this, int a1);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_470440(int this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, int a3);
int __thiscall sub_470600(int *this, int a1);
_DWORD *__thiscall sub_470660(StrCmp *this, _DWORD *a2, const char **a3);
void *__thiscall sub_4706F0(void *this);
int __thiscall sub_470720(int *this);
int __thiscall sub_470740(int *this, int *a2);
std::vector<IPAddrMask> *__thiscall sub_4707A0(std::vector<IPAddrMask> *this);
IPAddrMask *__thiscall sub_4707D0(int this, IPAddrMask *_Val);
void *__thiscall sub_470840(void *this);
int __thiscall sub_470870(int *this);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_470890(int this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, int a3);
int __thiscall sub_470A40(int *this, int a1);
void *__thiscall sub_470AA0(void *this);
int __thiscall sub_470AD0(void *this);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_470AF0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, const void *a3);
_DWORD *__thiscall sub_470CA0(int *this, _DWORD *a2, int a3);
int __thiscall sub_471430(int *this, _DWORD *a2);
_DWORD *__thiscall sub_471490(int *this);
_DWORD *__thiscall sub_4714F0(int *this, _DWORD *a2, _DWORD *a3);
void *__thiscall sub_471580(void *this);
int __thiscall sub_4715B0(int *this);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_4715D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, _DWORD *a3);
int __thiscall sub_471780(int *this, _DWORD *a2);
_DWORD *__thiscall sub_4717E0(int *this);
_DWORD *__thiscall sub_471840(int *this, _DWORD *a2, _DWORD *a3);
void *__thiscall sub_4718D0(void *this);
int __thiscall sub_471900(int *this);
int __thiscall sub_471920(int *this, _DWORD *a2);
void *__thiscall sub_471980(void *this);
int __thiscall sub_4719B0(int *this);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_4719D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, const void *a3);
int __thiscall sub_471B80(int *this, _DWORD *a2);
_DWORD *__thiscall sub_471BE0(int *this);
_DWORD *__thiscall sub_471C40(int *this, _DWORD *a2, _DWORD *a3);
void *__thiscall sub_471CD0(void *this);
int __thiscall sub_471D00(int *this);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_471D20(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::string *a3);
bool __stdcall sub_471ED0(void *a1, void *a2);
_DWORD *__thiscall sub_471F00(int *this, _DWORD *a2, int a3);
int __thiscall sub_472690(int *this, void *a2);
_DWORD *__thiscall sub_4726F0(int *this, _DWORD *a2, void *a3);
bool __thiscall sub_472780(_DWORD *this);
CMemory ***__thiscall sub_4727A0(int *this, const void *a2);
_DWORD *__thiscall sub_4727D0(int *this);
int *__thiscall sub_472800(_DWORD *this, int *a2, char a3, const void *a4);
_DWORD *__thiscall sub_472830(_DWORD *this, _DWORD *a2, const void *a3);
_DWORD *__thiscall sub_472860(_DWORD *this, _DWORD *a2, _DWORD *a3);
int *__thiscall sub_472890(int *this, int *a2, int a3);
_DWORD *__thiscall sub_4728C0(_DWORD *this, _DWORD *a2, const void *a3);
_DWORD *__thiscall sub_4728F0(_DWORD *this, _DWORD *a2, const void *a3);
_DWORD *__thiscall sub_472920(_DWORD *this, _DWORD *a2, const void *a3);
int __thiscall sub_472950(int this, std::string *_Right, _DWORD *a3);
int *__thiscall sub_472990(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4729B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
void *__thiscall sub_472A50(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, int *_Keyval);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472A80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
void *__thiscall sub_472B20(int *this, void *a2, const char **a3);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_472B50(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, const char **a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472B90(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_472C30(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, int *a3);
int __thiscall sub_472C70(int *this);
int __thiscall std::vector<IPAddrMask>::capacity(std::vector<IPAddrMask> *this);
int __thiscall std::vector<IPAddrMask>::size(std::vector<IPAddrMask> *this);
_DWORD *__thiscall sub_472DA0(int *this, _DWORD *a2, IPAddrMask *a3, int *a4);
char __thiscall std::vector<IPAddrMask>::_Buy(std::vector<IPAddrMask> *this, unsigned int _Capacity);
IPAddrMask *__thiscall std::vector<IPAddrMask>::_Ufill(std::vector<IPAddrMask> *this, IPAddrMask *_Ptr, unsigned int _Count, const IPAddrMask *_Val); // idb
void *__thiscall sub_472ED0(void *this, _BYTE *a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_472FB0(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3);
void *__thiscall sub_472FF0(int *this, void *a2, char a3, int a4, const void *a5);
int __thiscall sub_473430(int *this);
int __cdecl sub_4734E0(int a1);
int __cdecl sub_4734F0(int a1);
int __cdecl sub_473500(int a1);
void *__thiscall sub_473520(void *this, _BYTE *a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473560(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
void *__thiscall sub_473600(int *this, void *a2, _DWORD *a3);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_473630(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3);
int __stdcall sub_473670(void *a1);
void *__thiscall sub_4736F0(int *this, void *a2, char a3, int a4, const void *a5);
int *__thiscall sub_473B30(int *this, int a2);
int __cdecl sub_473C60(int a1);
int __cdecl sub_473CA0(int a1);
int *__thiscall sub_473CE0(int *this, int a2);
int __thiscall sub_473E10(int *this);
int __cdecl sub_473EC0(int a1);
void *__thiscall sub_473ED0(void *this, _BYTE *a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
void *__thiscall sub_473FB0(int *this, void *a2, _DWORD *a3);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_473FE0(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3);
int __stdcall sub_474020(void *a1);
void *__thiscall sub_4740A0(int *this, void *a2, char a3, int a4, _DWORD *a5);
int __thiscall sub_4744E0(int *this);
// _DWORD __cdecl unknown_libname_25(_DWORD); weak
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4745A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
int __thiscall sub_474640(int *this);
int __cdecl sub_4746F0(int a1);
void *__thiscall sub_474700(void *this, _BYTE *a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474740(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
void *__thiscall sub_4747E0(int *this, void *a2, _DWORD *a3);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_474810(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3);
int __stdcall sub_474850(void *a1);
void *__thiscall sub_4748D0(int *this, void *a2, char a3, int a4, const void *a5);
int __thiscall sub_474D10(int *this);
int __cdecl sub_474DC0(int a1);
int __cdecl sub_474DD0(int a1);
void *__thiscall sub_474DE0(void *this, _BYTE *a2, int a3);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474E20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
void *__thiscall sub_474EC0(int *this, void *a2, void *a3);
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_474EF0(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, void *a3);
void *__thiscall sub_474F30(int *this, void *a2, char a3, int a4, std::string *a5);
int *__thiscall sub_475370(int *this, int a2);
int __cdecl sub_4754A0(int a1);
int __cdecl sub_4754E0(int a1);
int *__thiscall sub_475520(int *this, int a2);
int __thiscall sub_475650(int *this);
void __stdcall sub_475700(void *a1);
CMemory ***__thiscall sub_475720(_DWORD *this, char a2, const void *a3);
_DWORD *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::erase(int this, _DWORD *a2, int a3);
// _DWORD *__thiscall std___Container_base___Container_base(_DWORD *this);
int *__thiscall sub_475880(int *this);
int *__thiscall sub_4758A0(int *this);
int *__thiscall sub_4758C0(int *this);
int *__thiscall sub_4758E0(int *this);
int *__thiscall sub_475900(int *this);
int *__thiscall sub_475920(int *this);
int *__thiscall sub_475940(int *this);
int __thiscall sub_475960(int *this);
int *__thiscall sub_475980(int *this);
int *__thiscall sub_4759A0(int *this);
_DWORD *__thiscall sub_4759C0(int *this);
_DWORD *__thiscall sub_475A20(int *this);
void *__thiscall sub_475A80(int *this, void *a2, const char **a3);
int __thiscall sub_475AB0(int *this, const char **a2);
_DWORD *__thiscall sub_475B40(int *this);
void __thiscall sub_475BA0(int this, IPAddrMask *_First, unsigned int _Count, int *a4);
_DWORD *__thiscall sub_475E70(int *this, _DWORD *a2, int a3);
_DWORD *__thiscall sub_476600(int *this);
int __thiscall sub_476660(int *this, _DWORD *a2);
int *__thiscall sub_4766F0(int *this, int a2);
CMemory **__stdcall sub_476820(int a1, int a2, int a3, const void *a4, char a5);
int sub_4768A0();
void *__thiscall sub_4768C0(int *this, void *a2, _DWORD *a3);
int *__thiscall sub_4768F0(int *this);
int __thiscall sub_476960(int *this, _DWORD *a2);
CMemory **__stdcall sub_4769F0(int a1, int a2, int a3, const void *a4, char a5);
int __cdecl sub_476A70(int a1);
unsigned int __thiscall sub_476A80(int this);
_DWORD *__thiscall sub_476AA0(int *this, _DWORD *a2, int a3);
void *__thiscall sub_477230(int *this, void *a2, _DWORD *a3);
int *__thiscall sub_477260(int *this);
int __thiscall sub_4772D0(int *this, _DWORD *a2);
int *__thiscall sub_477360(int *this, int a2);
int *__thiscall sub_477490(int *this, int a2);
CMemory **__stdcall sub_4775C0(int a1, int a2, int a3, _DWORD *a4, char a5);
int sub_477640();
_DWORD *__thiscall sub_477660(int *this);
void *__thiscall sub_4776C0(int *this, void *a2, _DWORD *a3);
int *__thiscall sub_4776F0(int *this);
int __cdecl sub_477760(int a1);
int sub_477770();
_DWORD *__thiscall sub_477790(int *this, _DWORD *a2, int a3);
void *__thiscall sub_477F20(int *this, void *a2, _DWORD *a3);
int *__thiscall sub_477F50(int *this);
int __thiscall sub_477FC0(int *this, _DWORD *a2);
int *__thiscall sub_478050(int *this, int a2);
int *__thiscall sub_478180(int *this, int a2);
CMemory **__stdcall sub_4782B0(int a1, int a2, int a3, const void *a4, char a5);
int sub_478330();
_DWORD *__thiscall sub_478350(int *this);
void *__thiscall sub_4783B0(int *this, void *a2, void *a3);
int *__thiscall sub_4783E0(int *this);
int __thiscall sub_478450(int *this, void *a2);
CMemory **__stdcall sub_4784E0(int a1, int a2, int a3, std::string *a4, char a5);
CMemory **__stdcall sub_478560(int a1, int a2, const void *a3);
_DWORD *__thiscall sub_4785D0(_DWORD *this, unsigned int a2);
CMemory **__stdcall sub_478640(int a1);
int *__thiscall sub_478660(int *this);
int *__thiscall sub_478680(int *this, int *a2, int a3);
int *__thiscall sub_4786B0(int *this);
int *__thiscall sub_4786D0(int *this);
int *__thiscall sub_4786F0(int *this);
_DWORD *__stdcall sub_478710(_DWORD *a1, int a2);
int *__thiscall sub_478740(int *this);
int *__thiscall sub_478760(int *this, int *a2, int a3);
int *__thiscall sub_478790(int *this);
int *__thiscall sub_4787B0(int *this);
int *__thiscall sub_4787E0(int *this, int *a2, int a3);
int *__thiscall sub_478810(int *this);
int *__thiscall sub_478830(int *this);
void *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::clear(int *this);
void __thiscall std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *this, const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *_Val1, const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *_Val2); // idb
int __stdcall sub_478920(void *a1);
int __thiscall sub_4789A0(int *this, _DWORD *a2);
int __stdcall sub_478A30(void *a1);
int __thiscall sub_478AB0(int *this);
int __thiscall sub_478AD0(int *this, const char **a2);
int __stdcall sub_478B60(void *a1);
unsigned int __thiscall std::allocator<std::pair<char const * const,CItem *>>::max_size(std::allocator<std::pair<char const * const,CItem *> > *this); // idb
int __stdcall sub_478C10(void *a1);
int __thiscall sub_478C90(int *this, _DWORD *a2);
CMemory **sub_478D20();
int sub_478E40();
CMemory **__stdcall sub_478E70(int a1);
int __cdecl sub_478E90(int a1);
int __cdecl sub_478ED0(int a1);
int __thiscall sub_478F10(int *this, _DWORD *a2);
CMemory **sub_478FA0();
unsigned int __thiscall std::allocator<CIOSocket::CIOTimer>::max_size(std::allocator<CIOSocket::CIOTimer> *this); // idb
CMemory **__stdcall sub_4790F0(int a1);
int __stdcall sub_479110(void *a1);
int __cdecl sub_479190(int a1);
int __thiscall sub_4791D0(int *this, _DWORD *a2);
CMemory **sub_479260();
int std::allocator<std::pair<std::string const,void *>>::max_size();
CMemory **__stdcall sub_4793B0(int a1);
int __cdecl sub_4793D0(int a1);
int __cdecl sub_479410(int a1);
int __thiscall sub_479450(int *this, _DWORD *a2);
CMemory **sub_4794E0();
int sub_479600();
CMemory **__stdcall sub_479630(int a1);
int __stdcall sub_479650(void *); // idb
int __thiscall sub_4796D0(int *this, void *a2);
CMemory **sub_479760();
int std::allocator<CryptoPP::ECPPoint>::max_size();
int sub_4798B0();
int *__thiscall sub_4798D0(int *this);
int __thiscall sub_4798F0(int *this);
int __thiscall sub_4799D0(int *this);
int __thiscall sub_479AB0(int *this);
int *__thiscall sub_479B70(int *this);
int __thiscall sub_479B90(int *this);
int __thiscall sub_479C70(int *this);
int __thiscall sub_479D50(int *this);
_DWORD *__thiscall sub_479E10(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6);
_DWORD *__thiscall sub_479E60(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6);
_DWORD *__thiscall sub_479EB0(_DWORD *this, int a2, int a3, int a4, _DWORD *a5, char a6);
_DWORD *__thiscall sub_479F10(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6);
_DWORD *__thiscall sub_479F60(_DWORD *this, int a2, int a3, int a4, std::string *a5, char a6);
_DWORD *__thiscall sub_479FB0(_DWORD *this, int a2, int a3, const void *a4);
int __thiscall sub_479FF0(int this, std::string *_Right);
int sub_47A030();
int *__thiscall sub_47A060(int *this);
int *__thiscall sub_47A080(int *this);
int __thiscall sub_47A0A0(int *this);
int __thiscall sub_47A160(int *this);
_DWORD *__cdecl sub_47A220(_DWORD *a1, _DWORD *a2);
_DWORD *__cdecl sub_47A240(_DWORD *a1, _DWORD *a2);
int __cdecl sub_47A260(int a1, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14);
BOOL __cdecl std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A2B0(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A2E0(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A310(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A340(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A370(int a1, char a2, _DWORD *a3);
// void __cdecl __ExceptionPtrDestroy(void *); idb
char *__cdecl sub_47A3B0(char *a1, char *a2);
_DWORD *__cdecl sub_47A3F0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
CMemory **__cdecl sub_47A430(int a1);
CMemory **__cdecl sub_47A450(int a1);
CMemory **__cdecl sub_47A470(int a1);
CMemory **__cdecl sub_47A490(int a1);
CMemory **__cdecl sub_47A4B0(int a1);
void *__thiscall sub_47A4D0(void *this, char a2);
void __thiscall sub_47A500(int this);
BOOL __cdecl sub_47A520(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A560(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A5A0(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A5E0(int a1, char a2, _DWORD *a3);
BOOL __cdecl sub_47A620(int a1, char a2, _DWORD *a3);
char *__cdecl std::_Destroy_range<std::allocator<boost::shared_ptr<boost::asio::detail::win_mutex>>>(char *a1, char *a2);
void *__cdecl sub_47A690(int a1, int a2, void *a3);
void __stdcall sub_47A6D0(void *_Ptr, int _Val);
void *__thiscall sub_47A6F0(void *this);
void *__thiscall sub_47A720(void *this, _BYTE *a2, int a3);
void *__thiscall sub_47A760(void *this);
void *__thiscall sub_47A790(void *this);
int sub_47A7D0();
void *__thiscall std::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(void *this, char a2);
CIOObject *__thiscall sub_47A8B0(CIOObject *this);
int __thiscall sub_47A8D0(int *this);
int __thiscall sub_47A8F0(int *this);
int __thiscall sub_47A910(int *this);
int __thiscall sub_47A9C0(int *this);
int __thiscall sub_47A9E0(int *this);
int __thiscall sub_47AA00(int *this);
BOOL __thiscall sub_47AAB0(_DWORD *this, int a2);
BOOL __thiscall sub_47AAE0(_DWORD *this, int a2);
BOOL __thiscall sub_47AB00(int *this, int a2);
BOOL __thiscall sub_47AB60(_DWORD *this, int a2);
// int __userpurge sub_47AB90@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
BOOL __thiscall sub_47AC50(_DWORD *this, int a2);
BOOL __thiscall sub_47AC80(_DWORD *this, int a2);
int __thiscall sub_47ACA0(_DWORD *this, int a2);
BOOL __thiscall sub_47ACC0(_DWORD *this, int a2);
int __thiscall sub_47ACF0(_DWORD *this, _DWORD *a2);
void __thiscall sub_47AD50(_DWORD *this, int a2);
void __thiscall sub_47AD80(_DWORD **this, int a1);
void __thiscall sub_47ADA0(_DWORD *this, int a2);
int __thiscall sub_47AE20(_DWORD *this, int a2);
// BOOL __userpurge sub_47AE50@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
// void __userpurge sub_47AF80(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
void __thiscall sub_47B000(_DWORD *this, _DWORD *a2);
void __thiscall sub_47B050(_DWORD *this, _DWORD *a2);
void __thiscall sub_47B0A0(_DWORD *this, int a2);
void __thiscall sub_47B0C0(_DWORD *this, int a2);
int __thiscall sub_47B0E0(_DWORD *this, _DWORD *a2);
void __thiscall sub_47B1B0(_DWORD *this, int a2);
void __stdcall sub_47B1D0(int a1);
void __thiscall sub_47B1F0(_DWORD *this, int a2);
int *__thiscall sub_47B230(int *this);
int __thiscall CCase::SetCondition(int *this, int a1);
_DWORD *__thiscall sub_47B8A0(_DWORD *this);
_DWORD *__thiscall sub_47B8E0(_DWORD *this, int a2);
_DWORD *__thiscall std__locale__facet__facet(_DWORD *this, int a2);
void *__thiscall sub_47B940(void *this, char a2);
void __thiscall std__locale__facet___facet_0(_DWORD *this);
int __thiscall sub_47B990(_DWORD *this);
_DWORD *__thiscall sub_47B9B0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47B9E0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47BA10(_DWORD *this, int a2);
_DWORD *__thiscall sub_47BA40(_DWORD *this, int a2);
void *__thiscall sub_47BA70(void *this, char a2);
void __thiscall sub_47BAA0(_DWORD *this);
_DWORD *__thiscall sub_47BAC0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47BAF0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47BB20(_DWORD *this, int a2);
_DWORD *__thiscall sub_47BB50(_DWORD *this, int a2);
_DWORD *__thiscall sub_47BB80(_DWORD *this, int a2);
_DWORD *__thiscall sub_47BBB0(_DWORD *this, char a2);
// int __userpurge CQuest::SetAction@<eax>(int ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int a1);
_DWORD *__thiscall sub_47C470(_DWORD *this, int a2);
void *__thiscall sub_47C4A0(void *this, char a2);
_DWORD *__thiscall std__locale__facet___facet_1(_DWORD *this);
_DWORD *__thiscall sub_47C4F0(_DWORD *this);
_DWORD *__thiscall sub_47C510(_DWORD *this, int a2);
_DWORD *__thiscall std__locale__facet__facet_0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C570(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C5A0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C5D0(_DWORD *this, char a2);
int __thiscall sub_47C600(int this, int a2);
void *__thiscall sub_47C630(void *this, char a2);
_DWORD *__thiscall sub_47C660(int this);
_DWORD *__thiscall sub_47C680(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C6B0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C6E0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C710(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C740(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C770(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C7A0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C7D0(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C800(_DWORD *this, int a2);
_DWORD *__thiscall sub_47C830(_DWORD *this, int a2);
int __thiscall sub_47C880(int *this, int a2);
BOOL __thiscall sub_47C910(int *this, int a2);
// _DWORD *__usercall sub_47C980@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void *__thiscall ActionItem::_CActionItem(void *this, char a2);
// void __usercall sub_47CA50(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// CSocket *__usercall CServer::FindSocket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int nId);
// void __usercall sub_47CB40(DWORD a1@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int nId, int a2);
int __thiscall sub_47CB80(_DWORD *this, int a2, int a3);
_DWORD *__thiscall CQuest::_CQuest(_DWORD *this);
// int __userpurge CQuest::SetCase@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int *a4, int a5);
int __thiscall sub_47CE60(int this);
void __thiscall CQuest::Proceed(_DWORD *this, int a2);
std::vector<CSyncPacket::CElement> *__thiscall sub_47CF60(std::vector<CSyncPacket::CElement> *this);
CSyncPacket::CElement *__thiscall sub_47CF90(int this, CSyncPacket::CElement *_Val);
CMemory ***__thiscall sub_47D000(int *this, int a1);
_DWORD *__thiscall sub_47D030(_DWORD *this);
BOOL __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(std::vector<CIOSocket::CIOTimer>::const_iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right);
_DWORD *__thiscall sub_47D0A0(int *this, _DWORD *a2, int a3);
int __thiscall std::vector<CSyncPacket::CElement>::capacity(std::vector<CSyncPacket::CElement> *this);
_DWORD *__thiscall sub_47D110(int *this, _DWORD *a2, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *a3, int *a4);
char __thiscall std::vector<CSyncPacket::CElement>::_Buy(std::vector<CSyncPacket::CElement> *this, unsigned int _Capacity);
CSyncPacket::CElement *__thiscall std::vector<CSyncPacket::CElement>::_Ufill(std::vector<CSyncPacket::CElement> *this, CSyncPacket::CElement *_Ptr, unsigned int _Count, const CSyncPacket::CElement *_Val); // idb
CMemory ***__thiscall sub_47D240(_DWORD *this, char a2, _DWORD *a3);
int sub_47D2C0();
int *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_Tidy(int *this);
unsigned int __thiscall sub_47D3D0(std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *this);
void __thiscall sub_47D3F0(int this, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_First, unsigned int _Count, int *a4);
CMemory **__stdcall sub_47D6D0(int a1);
CMemory **__stdcall sub_47D6F0(int a1, int a2, _DWORD *a3);
_DWORD *__thiscall sub_47D760(_DWORD *this, unsigned int a2);
int __thiscall sub_47D7D0(int *this, _DWORD *a2);
std::vector<CSyncPacket::CElement>::iterator *__thiscall std::vector<CSyncPacket::CElement>::iterator::operator+=(std::vector<CSyncPacket::CElement>::iterator *this, int _Off); // idb
void *__cdecl sub_47D820(void *a1, int a2, int a3);
char *__cdecl sub_47D860(char *a1, char *a2);
void __cdecl std::_Fill<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>(boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_First, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_Last, const boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_Val); // idb
_DWORD *__cdecl sub_47D8E0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
CMemory **__cdecl sub_47D920(int a1);
void *__cdecl sub_47D940(void *a1, int a2, int a3);
char *__cdecl std::_Destroy_range<std::allocator<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>>(char *a1, char *a2);
void *__cdecl sub_47D9D0(int a1, int a2, void *a3);
void __stdcall sub_47DA10(void *_Ptr, int _Val);
void *__cdecl sub_47DA30(int a1, int a2, void *a3);
void *__thiscall sub_47DAA0(void *this);
int __thiscall sub_47DAD0(int *this);
int __thiscall sub_47DAF0(int *this);
int __thiscall sub_47DB10(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47DBC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_47DC60(int *this);
int __stdcall sub_47DCC0(void *a1);
void __thiscall CRWLock::CRWLock(CRWLock *this); // idb
// void __usercall CRWLock::~CRWLock(CRWLock *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
LONG __thiscall sub_47DDE0(volatile LONG *this);
void __thiscall CRWLock::ReadLock(CRWLock *this); // idb
LONG __thiscall sub_47E030(volatile LONG *this);
LONG __thiscall sub_47E060(volatile LONG *this);
// void __usercall CRWLock::ReadUnlock(CRWLock *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CRWLock::WriteLock(CRWLock *this); // idb
// void __usercall CRWLock::WriteUnlock(CRWLock *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CScreen::CScreen(CScreen *this); // idb
// void __usercall CScreen::~CScreen(CScreen *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall CScreen::Open(CScreen *this, int nWidth, int nHeight); // idb
void CScreen::Add(CScreen *this, unsigned int color, const char *format, ...); // idb
void __thiscall CScreen::AddString(CScreen *this, unsigned int color, const char *string); // idb
// void __thiscall CScreen::Empty(Concurrency::details::WorkSearchContext *__hidden this); idb
void __thiscall CScreen::OnPaint(CScreen *this); // idb
// int __usercall sub_47E5F0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall sub_47E620(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, CItem *_Val2);
// void __usercall sub_47E6B0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4);
int __cdecl sub_47E700();
int sub_47E710();
// void __usercall sub_47E720(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall sub_47E780(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// volatile int *__usercall sub_47E800@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4);
// void __usercall sub_47E880(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// _DWORD *__userpurge sub_47E940@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5);
int __thiscall sub_47E990(int *this, int *a2);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47E9F0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
unsigned int __thiscall sub_47EA90(int this);
_DWORD *__thiscall sub_47EAB0(int *this);
void *__thiscall sub_47EB10(int *this, void *a2, _DWORD *a3);
int __thiscall CServer::SendAlive(_DWORD *this);
int __stdcall sub_47EB60(void *a1);
void *__thiscall sub_47EBE0(void *this);
int *__thiscall sub_47EC10(int *this);
CIOServer *__thiscall sub_47EC80(CIOServer *this);
std::numpunct<char> *__thiscall sub_47ECA0(std::numpunct<char> *this, char a2);
void __thiscall sub_47ECD0(std::numpunct<char> *this);
int __thiscall sub_47ECF0(int *this);
int __thiscall sub_47ED10(int *this);
int __thiscall sub_47ED30(int *this);
int __thiscall sub_47EDE0(int this);
// _DWORD *__userpurge sub_47EEA0@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5);
// _DWORD *__usercall sub_47EED0@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall sub_47EEF0(_DWORD *this, int a2, int a3);
int __thiscall CInitSkill::OnLoad(_DWORD *this);
_DWORD *__thiscall sub_47F450(_DWORD *this);
LONG __thiscall sub_47F4D0(_DWORD *this);
int sub_47F560();
int sub_47F5D0();
int __thiscall sub_47F680(_DWORD *this, int a2);
void __thiscall CPlayerSkill::SetSkill(_DWORD *this, int a2, int a3);
void *__thiscall sub_47F760(const void *this);
int __thiscall sub_47F780(_DWORD *this, int a2, int a3);
void __thiscall sub_47F7A0(int *this, int a2);
int __thiscall sub_47F910(_DWORD *this, int a2, int a3);
void __thiscall sub_47F970(int *this, int a2);
void __thiscall sub_47FA60(int *this, int a2, int a3);
int __thiscall sub_47FBB0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_47FC00(_DWORD *this);
int sub_47FC50(_DWORD *a1, int a2, ...);
void __thiscall sub_47FC90(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_47FD70(_DWORD *this, int a2);
void __thiscall sub_47FF00(int *this, int a2);
void __thiscall CPlayerSkill::ChangeOccupationAutoLearnSkill(void *this);
void __thiscall sub_480240(int *this, int a2);
void __thiscall sub_4802D0(_DWORD *this);
void __thiscall sub_480340(_DWORD *this, int a2);
int __thiscall sub_480390(_DWORD *this, int a2, int a3);
void __thiscall sub_4803E0(_DWORD **this);
void __thiscall sub_480540(int *this);
_DWORD *__thiscall sub_480830(_DWORD *this);
int __thiscall sub_480870(int this);
int __thiscall sub_4808E0(int *this);
void sub_480900();
int sub_480910();
int __thiscall sub_480970(int *this, int a2);
int __thiscall sub_480A00(int this);
BOOL __thiscall sub_480A80(int *this, int a2);
// int __userpurge sub_480B70@<eax>(int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5);
// _DWORD *__userpurge sub_480C50@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a5);
_DWORD *__thiscall sub_480CD0(_DWORD *this);
// void __userpurge sub_480CF0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a5);
_DWORD *__thiscall sub_480D40(_DWORD *this);
int __thiscall sub_480E10(_DWORD *this, int a2);
BOOL __thiscall sub_480E40(_DWORD *this, int a2, int a3);
BOOL __thiscall sub_480E80(void *this, _DWORD *a2, int a3);
int __thiscall sub_480F20(_DWORD *this, int a2);
BOOL __stdcall sub_480F80(int a1, int a2);
BOOL __thiscall sub_481000(_DWORD *this, int a2);
int __thiscall sub_481040(void *this, int a2);
int __thiscall sub_481070(_DWORD *this, _DWORD *a1);
int __thiscall sub_481150(_DWORD *this, _DWORD *a1);
// int __userpurge sub_481210@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __stdcall sub_481330(_DWORD *a1, _DWORD *a2);
// void __userpurge sub_4813A0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_4814F0(_DWORD *this, _DWORD *a2, int a3, int a4);
int __thiscall sub_481630(_DWORD *this, _DWORD *a2, int a3, int a4);
int __thiscall sub_4816F0(_DWORD *this, _DWORD *a2, int a3, int a4);
// void __userpurge sub_481750(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __stdcall sub_481970(int *a1);
BOOL __thiscall sub_4819A0(void *this, _DWORD *a2, int a3);
void __thiscall CUpBow::ExcutePassive(_DWORD *this, int a2, void *Src, int end);
BOOL __thiscall sub_481E80(_DWORD *this, int a2);
int __thiscall sub_481F10(_DWORD *this, _DWORD *a2);
int __thiscall sub_481F30(_DWORD *this, _DWORD *a2);
int __thiscall sub_481F60(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_481FD0(_DWORD *this, _DWORD *a2);
int __thiscall sub_482000(void *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7);
int __thiscall sub_4820C0(_DWORD *this, _DWORD *a2);
int __thiscall sub_4820F0(_DWORD *this, _DWORD *a2);
int __thiscall sub_482130(_DWORD *this, _DWORD *a2);
int __thiscall sub_482160(int *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7);
int __thiscall sub_482260(void *this, void *a2, _DWORD *a3, int a4, _DWORD *a5, int a6, unsigned int *a7);
int __thiscall sub_482340(_DWORD *this, int a2, int a3);
BOOL __thiscall sub_482370(_DWORD *this, int a2);
BOOL __thiscall sub_4823E0(void *this, _DWORD *a2, int a3);
int __thiscall sub_482430(_DWORD *this, int a2, int a3);
int __thiscall sub_482490(void *this, _DWORD *a2);
BOOL __thiscall sub_4824E0(_DWORD *this, int a2);
BOOL __thiscall sub_482570(void *this, _DWORD *a2, int a3);
int __thiscall sub_482610(_DWORD *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7);
int __thiscall sub_482710(_DWORD *this, int a2, int a3);
BOOL __thiscall sub_482770(_DWORD *this, int a2);
BOOL __thiscall sub_4827E0(void *this, _DWORD *a2, int a3);
// void __userpurge sub_482830(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_482960(_DWORD *this, _DWORD *a2);
int __thiscall sub_482990(_DWORD *this, _DWORD *a2);
int __thiscall sub_4829B0(_DWORD *this, int a2, int a3);
int __thiscall sub_482A00(_DWORD *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7);
int __thiscall sub_482B20(_DWORD *this, int a2, int a3);
int __thiscall sub_482B70(_DWORD *this, int a2, int a3);
int __thiscall sub_482D30(_DWORD *this);
BOOL __thiscall sub_482D60(_DWORD *this, int a2);
int __thiscall sub_482DF0(_DWORD *this, int a2, int a3);
int __thiscall sub_482E20(void *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7);
BOOL __thiscall sub_482F40(_DWORD *this, int a2);
// void __userpurge sub_482FA0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_483230(_DWORD *this);
int __thiscall sub_483260(void *this, int a2);
int __thiscall sub_4832A0(_DWORD *this, int a2);
int __thiscall sub_483310(void *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall CMagic::Excute(void *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_4833D0(void *this, int a2, _DWORD *a3);
int __thiscall sub_483460(_DWORD *this, _DWORD *a2, int a3);
BOOL __thiscall sub_4834E0(_DWORD *this, int a2);
int __thiscall sub_483520(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_4835A0(_DWORD *this, _DWORD *a2);
int __thiscall sub_4835E0(_DWORD *this, _DWORD *a2, int a3);
BOOL __thiscall sub_483670(_DWORD *this, int a2);
int __thiscall sub_4836B0(_DWORD *this, _DWORD *a2);
int __thiscall sub_4836E0(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_483770(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_4837F0(_DWORD *this, _DWORD *a2);
int __thiscall sub_483830(_DWORD *this, _DWORD *a2, int a3);
BOOL __thiscall sub_4838C0(_DWORD *this, int a2);
int __thiscall sub_483930(_DWORD *this, _DWORD *a2, int a3);
int __stdcall sub_483A00(_DWORD *a1);
int __thiscall sub_483B50(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_483C70(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_483DB0(_DWORD *this, _DWORD *a2);
int __thiscall sub_483DF0(_DWORD *this, _DWORD *a2, int a3);
BOOL __thiscall sub_483F10(_DWORD *this, int a2);
int __thiscall sub_483F50(_DWORD *this, _DWORD *a2);
int __thiscall sub_483F80(_DWORD *this, _DWORD *a2, int a3);
BOOL __thiscall sub_4840C0(_DWORD *this, int a2);
// void __userpurge sub_484100(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_4844A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a6);
// void __userpurge sub_484710(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7);
// void __userpurge sub_4849E0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6);
// void __userpurge sub_484BE0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_484EE0(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_484F60(_DWORD *this, _DWORD *a2);
int __thiscall CMagicWidePos::Excute(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_485030(_DWORD *this, _DWORD *a2);
int __thiscall sub_485060(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_4850D0(_DWORD *this, _DWORD *a2);
int __thiscall sub_485100(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
BOOL __thiscall sub_485170(_DWORD *this, int a2);
int __thiscall sub_485200(_DWORD *this, int a2);
int __thiscall sub_485230(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
BOOL __thiscall CMagicWideIce::GetMagic(_DWORD *this, int a2);
int __thiscall sub_485310(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_485400(_DWORD *this, _DWORD *a2);
int __thiscall sub_485430(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_4854A0(_DWORD *this, _DWORD *a2);
// void __userpurge sub_4854D0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_4855D0(void *this, int a2, int a3);
// void __userpurge sub_485610(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
_DWORD *__thiscall CChainLitning::GetMagic(_DWORD *this, _DWORD *a2, int a3, int a4);
_DWORD *__thiscall CChainLitning::Redistribute(_DWORD *this, _DWORD *a2, int a3, int a4);
// CMonsterMagic *__userpurge sub_485840@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, _DWORD *a4, int a5, int a6);
// CMonsterMagic *__userpurge sub_4858C0@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int *a5, int a6, int a7);
BOOL __thiscall sub_485930(_DWORD *this, int a2);
// void __userpurge sub_485970(_DWORD *a1@<ecx>, DWORD a2@<ebx>, _DWORD *a3, int a4, int a5);
int __thiscall sub_485AB0(_DWORD *this, _DWORD *a2);
BOOL __thiscall sub_485AE0(void *this, _DWORD *a2, _DWORD *a3);
// void __userpurge sub_485B80(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_485CE0(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_485D80(_DWORD *this, _DWORD *a2);
int __thiscall sub_485DC0(int *this, _DWORD *a2, int a3);
int __thiscall sub_485E60(_DWORD *this, _DWORD *a2);
int __thiscall sub_485E90(_DWORD *this, _DWORD *a2, int a3);
BOOL __thiscall sub_485EF0(_DWORD *this, int a2);
int __stdcall sub_485F50(int a1, _DWORD *a2);
int __thiscall sub_485F70(_DWORD *this, _DWORD *a2);
int __thiscall sub_485FA0(_DWORD *this, int a2, _DWORD *a3);
BOOL __thiscall sub_485FD0(_DWORD *this, int a2);
int __stdcall sub_486030(int a1, _DWORD *a2);
_DWORD *__thiscall sub_486050(_DWORD *this, _DWORD *a2, int a3, int a4);
BOOL __thiscall sub_4860B0(_DWORD *this, int a2);
int __thiscall sub_4860F0(_DWORD *this, _DWORD *a2, int a3, int a4);
BOOL __thiscall sub_4861F0(_DWORD *this, int a2);
int __thiscall sub_4862A0(_DWORD *this, _DWORD *a2);
int __stdcall sub_4862F0(_DWORD *a1, int a2, int a3);
int __stdcall sub_486350(_DWORD *a1, int a2, int a3);
BOOL __thiscall sub_4863B0(_DWORD *this, _DWORD *a2, int a3);
// void __userpurge sub_486420(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7);
_DWORD *__thiscall sub_486500(_DWORD *this, _DWORD *a2, int a3, int a4);
_DWORD *__thiscall sub_486560(_DWORD *this, _DWORD *a2, int a3, int a4);
_DWORD *__thiscall sub_4865C0(_DWORD *this, _DWORD *a2, int a3, int a4);
// void __userpurge sub_486620(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
BOOL __thiscall sub_4866D0(_DWORD *this, int a2);
BOOL __thiscall sub_486760(_DWORD *this, int a2);
BOOL __thiscall sub_486860(void *this, _DWORD *a2, _DWORD *a3);
// void __userpurge sub_486910(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_486A50(_DWORD *this, int a2, _DWORD *a3);
int __thiscall sub_486AA0(_DWORD *this, _DWORD *a2);
int __thiscall sub_486AE0(_DWORD *this, int a2, _DWORD *a3);
int __thiscall sub_486B60(_DWORD *this, int a2, _DWORD *a3);
int __thiscall sub_486BF0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_486C60(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_486C90(_DWORD *this, _DWORD *a2, int a3, int a4);
BOOL __thiscall sub_486CF0(_DWORD *this, int a2);
// void __userpurge sub_486D50(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
BOOL __thiscall sub_486E20(void *this, _DWORD *a2, int *a3);
// void __userpurge sub_486EC0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_487000(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_487190(_DWORD *this, _DWORD *a2);
// void __userpurge sub_4871C0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
int __thiscall sub_487390(_DWORD *this, _DWORD *a2);
int __thiscall sub_487430(_DWORD *this, _DWORD *a2);
int __thiscall sub_487460(_DWORD *this, _DWORD *a2);
int __stdcall sub_487490(int a1);
BOOL __thiscall sub_4874D0(_DWORD *this, int a2);
// void __userpurge sub_487510(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
// void __userpurge sub_4875B0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_487860(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
BOOL __thiscall sub_487900(void *this, _DWORD *a2, _DWORD *a3);
// void __userpurge sub_4879D0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_487AE0(_DWORD *this, int a2);
BOOL __thiscall sub_487B40(void *this, _DWORD *a2, _DWORD *a3);
// void __userpurge sub_487BF0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_487CF0(void *this, _DWORD *a2, _DWORD *a3);
// void __userpurge sub_487DB0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_487EF0(int (__thiscall ***a1)(_DWORD, int, CIOObject *)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
int __thiscall sub_488010(_DWORD *this, _DWORD *a2, int a3, int a4);
int __thiscall sub_4880D0(_DWORD *this, int a2, int a3);
BOOL __thiscall sub_488160(_DWORD *this, int a2);
// void __userpurge sub_4881A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
BOOL __thiscall sub_488260(_DWORD *this, int a2);
BOOL __thiscall sub_4882D0(_DWORD *this, int a2);
// void __userpurge sub_488330(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_488540(_DWORD *this, int a2);
// void __userpurge sub_4885A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_4887B0(_DWORD *this, int a2);
// void __userpurge sub_488820(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall CSuffering::Excute(_DWORD *this, int a2);
// void __userpurge sub_4889F0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_488B30(_DWORD *this, int a2);
// void __userpurge sub_488B70(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_488CF0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_488E50(_DWORD *this, int a2);
// void __userpurge sub_488E90(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_489030(_DWORD *this, int a2);
// void __userpurge sub_489090(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_4891E0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_489320(void *this, _DWORD *a2, _DWORD *a3);
int __thiscall sub_4893C0(_DWORD *this, _DWORD *a2);
void __thiscall CDarknessVision::CanSkillUp(_DWORD *this, int a2, void *Src, int end);
BOOL __thiscall sub_489550(void *this, _DWORD *a2, int a3);
int __thiscall sub_4895C0(_DWORD *this, _DWORD *a2);
// void __userpurge sub_4895E0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
// void __userpurge sub_4896C0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
BOOL __thiscall sub_4897F0(void *this, _DWORD *a2, _DWORD *a3);
// void __userpurge sub_489890(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
BOOL __thiscall sub_489A10(void *this, _DWORD *a2, int a3);
// int __userpurge sub_489AA0@<eax>(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a1, int a6);
// void __userpurge sub_489B30(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_489CE0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, _DWORD *a6);
int __thiscall sub_489D90(_DWORD *this, int a2, int a3, int a4);
int __thiscall CSkillBuff::CanExcute(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall sub_489E10(void *this, _DWORD *a2, int a3);
int __thiscall CSkillBuff::PreExcute(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall sub_489EA0(_DWORD *this, int a2);
int __thiscall sub_489EE0(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall sub_489F20(_DWORD *this, int a2);
int __thiscall sub_489F60(_DWORD *this, int a2, int a3, int a4);
BOOL __thiscall sub_489FA0(void *this, _DWORD *a2, int a3);
int __thiscall sub_489FF0(void *this, int a2, _DWORD *a3, _DWORD *a4);
BOOL __thiscall sub_48A050(void *this, _DWORD *a2, int a3);
int __thiscall sub_48A070(_DWORD *this, int a2, int a3, _DWORD *a4);
BOOL __thiscall sub_48A0D0(void *this, _DWORD *a2, int a3);
int __thiscall sub_48A120(_DWORD *this, int a2, _DWORD *a3, _DWORD *a4);
BOOL __thiscall sub_48A1A0(_DWORD *this, int a2);
int __thiscall sub_48A1E0(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall sub_48A240(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall CStrenUpInt::Apply(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall sub_48A300(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall CCloudSight::CanExcute(_DWORD *this, int a2, int a3, _DWORD *a4);
BOOL __thiscall sub_48A3C0(_DWORD *this, int a2);
int __thiscall sub_48A400(_DWORD *this, int a2, int a3, _DWORD *a4);
int __thiscall sub_48A480(void *this, int a2, int a3, _DWORD *a4);
int __thiscall sub_48A4D0(void *this, int a2, int a3, _DWORD *a4);
// void __userpurge sub_48A520(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, _DWORD *a7);
BOOL __thiscall CMeshDefense::CanSkillUp(void *this, _DWORD *a2, int a3);
// void __userpurge sub_48A5D0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
int __thiscall sub_48A680(_DWORD *this, int a2);
BOOL __thiscall sub_48A6D0(_DWORD *this, int a2);
int __thiscall sub_48A770(_DWORD *this, int a2);
int __thiscall sub_48A7B0(_DWORD *this, int a2);
int __thiscall sub_48A7F0(_DWORD *this, int a2);
int __thiscall sub_48A830(_DWORD *this, int a2);
int __thiscall sub_48A870(_DWORD *this, int a2);
// void __userpurge sub_48A8B0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5);
// void __userpurge sub_48A9A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
CBuffMoveSpeed *__thiscall sub_48AAF0(_DWORD *this, int a2);
BOOL __thiscall sub_48AB30(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall sub_48AB90(_DWORD *this, int a2);
BOOL __thiscall sub_48ABC0(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall sub_48AC20(_DWORD *this, int a2);
BOOL __thiscall sub_48AC50(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall sub_48ACB0(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall sub_48ACE0(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall sub_48AD10(_DWORD *this, int a2);
BOOL __thiscall sub_48AD40(_DWORD *this, int a2);
CBuffMoveSpeed *__thiscall sub_48ADA0(_DWORD *this, int a2);
int __stdcall sub_48ADD0(int a1, int a2);
BOOL __thiscall sub_48AE00(_DWORD *this, _DWORD *a2, int a3);
int __stdcall sub_48AE50(int a1, int a2);
int __thiscall sub_48AE70(void *this, int a2, int a3, int a4, int a5, int a6);
// void __userpurge sub_48AED0(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
int __stdcall sub_48AF60(int a1, int a2);
int __thiscall sub_48AF90(_DWORD *this, int a2);
int __stdcall sub_48AFC0(int a1, int a2);
int __thiscall CChantDefLightning::CreateBuff(void *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7);
// void __userpurge sub_48B0E0(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
int __stdcall sub_48B170(int a1, int a2);
BOOL __thiscall sub_48B1A0(_DWORD *this, _DWORD *a2, int a3);
// void __userpurge sub_48B230(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end);
// void __userpurge sub_48B440(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
int __stdcall sub_48B4D0(_DWORD *a1);
int __stdcall sub_48B510(_DWORD *a1);
int __stdcall sub_48B550(_DWORD *a1);
int __thiscall sub_48B590(void *this, int a2, int a3);
int __thiscall sub_48B5C0(_DWORD *this, _DWORD *a2);
// void __userpurge sub_48B630(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
LONG __thiscall CTDiamondClow::Excute(_DWORD *this, volatile LONG *a2, int a3);
// void __userpurge sub_48B9C0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, _DWORD *a6);
// void __userpurge sub_48BB50(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6);
int __thiscall sub_48BC80(void *this, int a2, int a3);
int __thiscall sub_48BCB0(void *this, int a2, int a3);
int __stdcall sub_48BCE0(int a1);
// void __userpurge sub_48BD00(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6);
int __thiscall CDoSpiritAbsorb::ExcuteM(void *this, int a2);
int __thiscall sub_48BF30(void *this, int a2, int a3);
int __thiscall sub_48BF60(void *this, int a2, int a3);
int __stdcall sub_48BFA0(_DWORD *a1);
int __thiscall sub_48C040(_DWORD *this, _DWORD *a2);
// void __userpurge sub_48C110(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1);
int __stdcall CMFireRain::GetMagicM(_DWORD *a1);
// void __userpurge sub_48C310(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1);
int __stdcall CMSpark::ExcuteM(_DWORD *a1);
// void __userpurge sub_48C610(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1);
int __stdcall sub_48C7D0(_DWORD *a1);
// int __userpurge sub_48C880@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6);
// void __userpurge sub_48C950(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, _DWORD *a6);
int __stdcall sub_48CA70(_DWORD *a1);
int __thiscall sub_48CAA0(void *this, int a2, int a3);
void __thiscall sub_48CAD0(void *this, int a2, int a3);
// void __userpurge sub_48CB10(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1);
int __stdcall sub_48CDA0(int a1);
int __stdcall sub_48CDC0(int a1);
// CMonsterMagic *__userpurge sub_48CDE0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5, int a6);
int __stdcall sub_48CE20(int a1);
void __stdcall CDemonBeastSummon::ExcuteM(int a1, int pChar); // idb
int __stdcall sub_48CEB0(_DWORD *a1);
int __stdcall sub_48CEE0(int a1);
// void __userpurge sub_48CF20(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6);
BOOL __stdcall sub_48D100(_QWORD *a1, int a2);
int __thiscall sub_48D140(int *this, _DWORD *a2, int a3, int a4);
BOOL __thiscall CPurgatorialFlame::AddMagicMonster(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3);
// void __userpurge sub_48D1D0(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1);
// CMonsterMagic *__userpurge sub_48D390@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, _DWORD *a4, int a5, int a6);
int __stdcall sub_48D3F0(int a1);
// void __userpurge sub_48D440(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6);
void *__thiscall sub_48D680(void *this);
int __thiscall sub_48D6B0(int *this);
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_48D6D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::pair<char const * const,CItem *> *a3);
_DWORD *sub_48D880();
LONG __cdecl sub_48D900(int a1);
int __thiscall sub_48D930(int *this);
BOOL __stdcall sub_48D9E0(_DWORD *a1, _DWORD *a2);
// int __thiscall unknown_libname_27(_DWORD, _DWORD); weak
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_48DA20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_48DAC0(int *this);
int __thiscall sub_48DB20(int *this);
void __thiscall std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Rarg, const std::pair<char const * const,CItem *> *_Val, char _Carg); // idb
int __stdcall sub_48DC30(void *a1);
_DWORD *__thiscall sub_48DCB0(_DWORD *this);
_DWORD *__thiscall sub_48DCD0(_DWORD *this);
_DWORD *__thiscall sub_48DCF0(_DWORD *this);
_DWORD *__thiscall sub_48DD10(_DWORD *this);
_DWORD *__thiscall sub_48DD30(_DWORD *this);
_DWORD *__thiscall sub_48DD50(_DWORD *this);
_DWORD *__thiscall sub_48DD70(_DWORD *this);
_DWORD *__thiscall sub_48DD90(_DWORD *this);
int __thiscall sub_48DDB0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DDD0(_DWORD *this);
int __thiscall sub_48DDF0(_DWORD *this, int a2, int a3);
int __thiscall sub_48DE10(_DWORD *this);
_DWORD *__thiscall sub_48DE30(_DWORD *this);
int sub_48DE50();
int __thiscall sub_48DE60(_DWORD *this, int a2);
int __thiscall sub_48DE80(_DWORD *this, int a2);
int __thiscall sub_48DEA0(_DWORD *this);
_DWORD *__thiscall sub_48DEC0(_DWORD *this);
int __thiscall sub_48DEE0(_DWORD *this);
int __thiscall sub_48DF00(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DF20(_DWORD *this);
int __thiscall sub_48DF40(_DWORD *this);
int __thiscall sub_48DF60(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DF80(_DWORD *this);
int __stdcall sub_48DFA0(int a1, int a2);
int __thiscall sub_48DFB0(_DWORD *this);
int __thiscall sub_48DFD0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48DFF0(_DWORD *this);
int __thiscall sub_48E010(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_48E030(_DWORD *this);
int __thiscall sub_48E050(_DWORD *this, int a2, int a3);
int CReturn::CReturn();
_DWORD *__thiscall sub_48E080(_DWORD *this);
int __thiscall sub_48E0A0(int *this, int a2, int a3);
int sub_48E0E0();
int __thiscall CUpBow::CUpBow(_DWORD *this);
_DWORD *__thiscall CUpConCen::CUpConCen(_DWORD *this);
int __thiscall CPullSwing::CPullSwing(_DWORD *this, int a2, int a3);
int __thiscall CBlow::CBlow(_DWORD *this);
_DWORD *__thiscall CPullSwing::GetSpendMP(_DWORD *this);
int __thiscall sub_48E190(int *this, int a2, int a3);
_DWORD *__thiscall CThunder::GetHit(_DWORD *this);
_DWORD *__thiscall CShot::CShot(_DWORD *this);
_DWORD *__thiscall CShot::GetHostility(_DWORD *this);
_DWORD *__thiscall sub_48E230(_DWORD *this);
_DWORD *__thiscall sub_48E250(_DWORD *this);
int sub_48E270();
int __thiscall CMock::CMock(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E2B0(_DWORD *this);
int __thiscall sub_48E2D0(_DWORD *this, int a2);
int __thiscall sub_48E2F0(_DWORD *this);
int __thiscall sub_48E310(_DWORD *this, int a2, int a3);
_DWORD *__thiscall sub_48E330(_DWORD *this);
_DWORD *__thiscall sub_48E350(_DWORD *this);
_DWORD *__thiscall CNegative::GetHostility(_DWORD *this);
_DWORD *__thiscall CNegative::GetSpendMP(_DWORD *this);
_DWORD *__thiscall CFlameArrow::CFlameArrow(_DWORD *this);
_DWORD *__thiscall CFlameArrow::GetAttack(_DWORD *this);
_DWORD *__thiscall CTranscendental::CTranscendental(_DWORD *this);
int __thiscall CTranscendental::GetAttack(_DWORD *this, int a2);
_DWORD *__thiscall CUpperSlash::CUpperSlash(_DWORD *this);
_DWORD *__thiscall CUpperSlash::GetAttack(_DWORD *this);
int __thiscall sub_48E480(_DWORD *this, int a2);
_DWORD *__thiscall CUpperSlash::GetHostility(_DWORD *this);
_DWORD *__thiscall sub_48E4C0(_DWORD *this);
int __thiscall sub_48E4E0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E500(_DWORD *this);
_DWORD *__thiscall sub_48E520(_DWORD *this);
_DWORD *__thiscall sub_48E540(_DWORD *this);
_DWORD *__thiscall sub_48E560(_DWORD *this);
_DWORD *__thiscall sub_48E580(_DWORD *this);
int CInfernal::CInfernal();
_DWORD *__thiscall sub_48E5C0(_DWORD *this);
_DWORD *__thiscall sub_48E5E0(_DWORD *this);
_DWORD *__thiscall sub_48E600(_DWORD *this);
_DWORD *__thiscall sub_48E620(_DWORD *this);
int CExplosion::GetSpendMP();
_DWORD *__thiscall sub_48E650(_DWORD *this);
int CGetherShot::CGetherShot();
_DWORD *__thiscall sub_48E680(_DWORD *this);
_DWORD *__thiscall sub_48E6A0(_DWORD *this);
_DWORD *__thiscall sub_48E6C0(_DWORD *this);
_DWORD *__thiscall sub_48E6E0(_DWORD *this);
int __stdcall sub_48E700(int a1, int a2, int a3);
_DWORD *__thiscall CSpiritBlast::CSpiritBlast(_DWORD *this);
CMagic *__thiscall CMagic::CMagic(CMagic *this);
CFire *__thiscall CFire::CFire(CFire *this);
CFireExplosion *__thiscall CFireExplosion::CFireExplosion(CFireExplosion *this, int a2);
CFireEruption *__thiscall CFireEruption::CFireEruption(CFireEruption *this);
CIce *__thiscall CIce::CIce(CIce *this, int a2);
_DWORD *__thiscall CIce::GetSpendMP(_DWORD *this);
int __thiscall sub_48E7F0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E810(_DWORD *this);
int __thiscall sub_48E830(_DWORD *this);
_DWORD *__thiscall sub_48E850(_DWORD *this);
int __thiscall sub_48E870(_DWORD *this);
_DWORD *__thiscall sub_48E890(_DWORD *this);
_DWORD *__thiscall sub_48E8B0(_DWORD *this);
int __thiscall sub_48E8D0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48E8F0(_DWORD *this);
_DWORD *__thiscall sub_48E910(_DWORD *this);
_DWORD *__thiscall sub_48E930(_DWORD *this);
_DWORD *__thiscall sub_48E950(_DWORD *this);
_DWORD *__thiscall CExplosiveBurst::GetAddValueType(_DWORD *this);
_DWORD *__thiscall sub_48E990(_DWORD *this);
_DWORD *__thiscall sub_48E9B0(_DWORD *this);
_DWORD *__thiscall sub_48E9D0(_DWORD *this);
_DWORD *__thiscall sub_48E9F0(_DWORD *this);
CIceRequiem *__thiscall CIceRequiem::CIceRequiem(CIceRequiem *this);
_DWORD *__thiscall CIceRequiem::GetAddValueType(_DWORD *this);
_DWORD *__thiscall sub_48EA50(_DWORD *this);
_DWORD *__thiscall sub_48EA70(_DWORD *this);
_DWORD *__thiscall sub_48EA90(_DWORD *this);
int __thiscall sub_48EAB0(_DWORD *this, int a2);
CIceStorm *__thiscall CIceStorm::CIceStorm(CIceStorm *this);
CFireRain *__thiscall CFireRain::CFireRain(CFireRain *this, int a2);
CPoisonCloud *__thiscall CPoisonCloud::CPoisonCloud(CPoisonCloud *this);
_DWORD *__thiscall CManaBurn::GetSpendMP(_DWORD *this);
CHealing *__thiscall CHealing::CHealing(CHealing *this);
_DWORD *__thiscall CMShock::GetSpendMP(_DWORD *this);
CHealingAny *__thiscall CHealingAny::CHealingAny(CHealingAny *this);
_DWORD *__thiscall CUpperSmash::GetSpendMP(_DWORD *this);
int CHealingAnyPlus::CHealingAnyPlus();
_DWORD *__thiscall sub_48EBE0(_DWORD *this);
_DWORD *__thiscall sub_48EC00(_DWORD *this);
int __thiscall sub_48EC20(_DWORD *this, int a2);
int sub_48EC40();
CHealingAnyQuick *__thiscall CHealingAnyQuick::CHealingAnyQuick(CHealingAnyQuick *this);
CHealingInstance *__thiscall CHealingInstance::CHealingInstance(CHealingInstance *this);
_DWORD *__thiscall CHealingInstance::GetSpendMP(_DWORD *this);
CHealingGreatRe *__thiscall CHealingGreatRe::CHealingGreatRe(CHealingGreatRe *this);
CRest *__thiscall CRest::CRest(CRest *this, int a2);
CUpFatal *__thiscall CUpFatal::CUpFatal(CUpFatal *this);
CUpFatal2 *__thiscall CUpFatal2::CUpFatal2(CUpFatal2 *this);
CUpFatal3 *__thiscall CUpFatal3::CUpFatal3(CUpFatal3 *this);
CMeditation *__thiscall CMeditation::CMeditation(CMeditation *this);
BOOL __thiscall sub_48ED70(_DWORD *this, int a2, unsigned int a3);
CUpFire *__thiscall CUpFire::CUpFire(CUpFire *this);
CFatalChance *__thiscall CFatalChance::CFatalChance(CFatalChance *this);
CUpBlockShield *__thiscall CUpBlockShield::CUpBlockShield(CUpBlockShield *this);
CGunnery *__thiscall CGunnery::CGunnery(CGunnery *this, int a2);
CRevival *__thiscall CRevival::CRevival(CRevival *this);
CResurrection *__thiscall CResurrection::CResurrection(CResurrection *this);
int __thiscall CResurrection::GetSpendMP(_DWORD *this, int a2);
CReincarnate *__thiscall CReincarnate::CReincarnate(CReincarnate *this);
int __thiscall CReincarnate::GetSpendMP(_DWORD *this, int a2);
CUpEvade *__thiscall CUpEvade::CUpEvade(CUpEvade *this);
CUpRFEvade *__thiscall CUpRFEvade::CUpRFEvade(CUpRFEvade *this);
CStoneShield *__thiscall CStoneShield::CStoneShield(CStoneShield *this);
CHaste *__thiscall CHaste::CHaste(CHaste *this, int a2);
CFrostBlast *__thiscall CFrostBlast::CFrostBlast(CFrostBlast *this);
CHealingParty *__thiscall CHealingParty::CHealingParty(CHealingParty *this);
_DWORD *__thiscall CMPoisonCloud::GetResistNum(_DWORD *this);
int __thiscall sub_48EFB0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48EFD0(_DWORD *this);
_DWORD *__thiscall sub_48EFF0(_DWORD *this);
CWildAccuracy *__thiscall CWildAccuracy::CWildAccuracy(CWildAccuracy *this);
CPoisonArrow *__thiscall CPoisonArrow::CPoisonArrow(CPoisonArrow *this);
CWildStrength *__thiscall CWildStrength::CWildStrength(CWildStrength *this, int a2);
CProtect *__thiscall CProtect::CProtect(CProtect *this);
_DWORD *__thiscall CProtect::GetSpendMP(_DWORD *this);
CShieldSmash *__thiscall CShieldSmash::CShieldSmash(CShieldSmash *this, int a2);
CSilenceArrow *__thiscall CSilenceArrow::CSilenceArrow(CSilenceArrow *this);
CProtectRange *__thiscall CProtectRange::CProtectRange(CProtectRange *this, int a2);
CUpReinforceVitality *__thiscall CUpReinforceVitality::CUpReinforceVitality(CUpReinforceVitality *this);
int __thiscall CUpReinforceVitality::CanLearn(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F150(_DWORD *this);
CUpAttackRange *__thiscall CUpAttackRange::CUpAttackRange(CUpAttackRange *this, int a2);
CVitalityDrain *__thiscall CVitalityDrain::CVitalityDrain(CVitalityDrain *this);
CSuffering *__thiscall CSuffering::CSuffering(CSuffering *this, int a2);
_DWORD *__thiscall CHaste::GetSpendMP(_DWORD *this);
// CRainforceDefense *__thiscall CRainforceDefense::CRainforceDefense(CRainforceDefense *this, const struct type_info *a2);
_DWORD *__thiscall sub_48F200(_DWORD *this);
_DWORD *__thiscall sub_48F220(_DWORD *this);
_DWORD *__thiscall sub_48F240(_DWORD *this);
_DWORD *__thiscall sub_48F260(_DWORD *this);
_DWORD *__thiscall sub_48F280(_DWORD *this);
_DWORD *__thiscall sub_48F2A0(_DWORD *this);
_DWORD *__thiscall sub_48F2C0(_DWORD *this);
_DWORD *__thiscall sub_48F2E0(_DWORD *this);
_DWORD *__thiscall sub_48F300(_DWORD *this);
_DWORD *__thiscall sub_48F320(_DWORD *this);
_DWORD *__thiscall sub_48F340(_DWORD *this);
_DWORD *__thiscall sub_48F360(_DWORD *this);
_DWORD *__thiscall sub_48F380(_DWORD *this);
int __thiscall sub_48F3A0(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F3C0(_DWORD *this);
_DWORD *__thiscall sub_48F3E0(_DWORD *this);
_DWORD *__thiscall sub_48F400(_DWORD *this);
_DWORD *__thiscall sub_48F420(_DWORD *this);
int __thiscall sub_48F440(_DWORD *this, int a2);
_DWORD *__thiscall sub_48F460(_DWORD *this);
_DWORD *__thiscall sub_48F480(_DWORD *this);
_DWORD *__thiscall sub_48F4A0(_DWORD *this);
_DWORD *__thiscall sub_48F4C0(_DWORD *this);
_DWORD *__thiscall sub_48F4E0(_DWORD *this);
_DWORD *__thiscall sub_48F500(_DWORD *this);
_DWORD *__thiscall sub_48F520(_DWORD *this);
_DWORD *__thiscall sub_48F540(_DWORD *this);
_DWORD *__thiscall sub_48F560(_DWORD *this);
_DWORD *__thiscall sub_48F580(_DWORD *this);
_DWORD *__thiscall sub_48F5A0(_DWORD *this);
CManaBurn *__thiscall CManaBurn::CManaBurn(CManaBurn *this);
CMeshChance *__thiscall CMeshChance::CMeshChance(CMeshChance *this);
CMeshStr *__thiscall CMeshStr::CMeshStr(CMeshStr *this);
CMeshHth *__thiscall CMeshHth::CMeshHth(CMeshHth *this);
CMeshDex *__thiscall CMeshDex::CMeshDex(CMeshDex *this);
CMeshInt *__thiscall CMeshInt::CMeshInt(CMeshInt *this);
CMeshWis *__thiscall CMeshWis::CMeshWis(CMeshWis *this);
CMeshDefense *__thiscall CMeshDefense::CMeshDefense(CMeshDefense *this);
CVanishConfi *__thiscall CVanishConfi::CVanishConfi(CVanishConfi *this);
int CDestroySight::CDestroySight();
_DWORD *__thiscall sub_48F6F0(_DWORD *this);
int sub_48F710();
CBerserk *__thiscall CBerserk::CBerserk(CBerserk *this);
CSkillSelfBuff *__thiscall CSkillSelfBuff::CSkillSelfBuff(CSkillSelfBuff *this);
int __thiscall CBerserk::GetSpendMP(_DWORD *this);
CResistLightning *__thiscall CResistLightning::CResistLightning(CResistLightning *this);
CResistIce *__thiscall CResistIce::CResistIce(CResistIce *this);
CResistFire *__thiscall CResistFire::CResistFire(CResistFire *this);
CResistCurse *__thiscall CResistCurse::CResistCurse(CResistCurse *this);
_DWORD *__thiscall CResistPalsy::GetSpendMP(_DWORD *this);
CResistPalsy *__thiscall CResistPalsy::CResistPalsy(CResistPalsy *this);
CEmergencyEscape *__thiscall CEmergencyEscape::CEmergencyEscape(CEmergencyEscape *this);
int CChantProtect::CChantProtect();
_DWORD *__thiscall sub_48F870(_DWORD *this);
_DWORD *__thiscall sub_48F890(_DWORD *this);
BOOL __thiscall sub_48F8B0(_DWORD *this, int a2, int a3);
int CChantDefFire::CChantDefFire();
_DWORD *__thiscall sub_48F910(_DWORD *this);
int sub_48F930();
CChantBattle *__thiscall CChantBattle::CChantBattle(CChantBattle *this);
int CTLitningBlast::CTLitningBlast();
_DWORD *__thiscall sub_48F970(_DWORD *this);
_DWORD *__thiscall sub_48F990(_DWORD *this);
_DWORD *__thiscall sub_48F9B0(_DWORD *this);
_DWORD *__thiscall sub_48F9D0(_DWORD *this);
int sub_48F9F0();
CTFury *__thiscall CTFury::CTFury(CTFury *this);
int CTGroundSplinter::CTGroundSplinter();
CBerserk *__thiscall sub_48FA30(CBerserk *this);
int sub_48FA50();
int CTDiamondClow::CTDiamondClow();
_DWORD *__thiscall sub_48FA70(_DWORD *this);
_DWORD *__thiscall sub_48FA90(_DWORD *this);
CDoFury *__thiscall CDoFury::CDoFury(CDoFury *this);
int CDoGroundFeal::GetAddValueType();
// int Concurrency::details::UMSThreadInternalContext::GetContextKind();
_DWORD *__thiscall sub_48FAF0(_DWORD *this);
_DWORD *__thiscall sub_48FB10(_DWORD *this);
_DWORD *__thiscall sub_48FB30(_DWORD *this);
_DWORD *__thiscall sub_48FB50(_DWORD *this);
_DWORD *__thiscall sub_48FB70(_DWORD *this);
_DWORD *__thiscall sub_48FB90(_DWORD *this);
_DWORD *__thiscall sub_48FBB0(_DWORD *this);
_DWORD *__thiscall sub_48FBD0(_DWORD *this);
_DWORD *__thiscall sub_48FBF0(_DWORD *this);
_DWORD *__thiscall CDoOverrun::GetAddValueType(_DWORD *this);
int sub_48FC40();
int CSkill_MonsterMagic::CSkill_MonsterMagic();
_DWORD *__thiscall sub_48FC60(_DWORD *this);
_DWORD *__thiscall sub_48FC90(_DWORD *this);
_DWORD *__thiscall sub_48FCB0(_DWORD *this);
int CMIceStorm::CMIceStorm();
_DWORD *__thiscall sub_48FCE0(_DWORD *this);
int sub_48FD10();
_DWORD *__thiscall sub_48FD20(_DWORD *this, int a2, int a3);
// void *__usercall sub_48FD60@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int *__thiscall sub_48FDE0(int *this, char a2);
// CCompleteFire *__userpurge CCompleteFire::CCompleteFire@<eax>(CCompleteFire *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int a5);
int __thiscall CCellMap::AllocTile(_DWORD *this);
CMFireFlowerExplosion *__thiscall CMFireFlowerExplosion::CMFireFlowerExplosion(CMFireFlowerExplosion *this, FILE *Stream);
int __thiscall sub_490070(_DWORD *this, _DWORD *a2);
int __thiscall CCellMap::_CCellMap(_DWORD *this, _DWORD *a2, int *a3);
// int __userpurge sub_490220@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5);
CRWLock *__thiscall sub_4902D0(_DWORD *this, _DWORD *a2, _DWORD *a3);
int __thiscall sub_490470(_DWORD *this, _DWORD *a2, int *a3);
// CRWLock *__userpurge CCellMap::ReadUnlock@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// void __userpurge CSellMap::SendDelete(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, _DWORD *a3, int a4);
// void __userpurge CCellMap::GetRWLockRect(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, _DWORD *a3, int a4);
// void __userpurge CSellMap::SendCreate(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, _DWORD *a3, int a4);
// void __userpurge CSellMap::SendPacket(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, int a3);
// void __userpurge CSellMap::GetPlayerList(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, void **a3);
// void __userpurge CSellMap::GetPlayerMonsterList(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, void **a3);
// int __userpurge CSellMap::GetClosestPlayer@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, Concurrency::details::_CancellationTokenRegistration **a3);
// int __userpurge CSellMap::GetMonster@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, Concurrency::details::_CancellationTokenRegistration **a4);
_DWORD *__thiscall sub_490DC0(_DWORD *this);
// void __usercall CCellMap::GetPlayerList(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void *__userpurge sub_490E70@<eax>(void *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5);
// int __usercall CSMap::LoadMap@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1);
// _DWORD *__userpurge sub_491010@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// void __usercall sub_491040(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
int __cdecl sub_491080(int a1);
int __thiscall sub_4910A0(char *this, _DWORD *a2, int *a3);
// int __userpurge sub_491150@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int *a6);
int __thiscall sub_491200(char *this, _DWORD *a2, _DWORD *a3, int *a4);
// int __userpurge sub_4912B0@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int *a7);
// int __userpurge sub_491360@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, _DWORD *a3);
// int __userpurge sub_4913E0@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, Concurrency::details::_CancellationTokenRegistration *a2, int a3);
// int __userpurge CSMap::ReadLock@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD esi0@<esi>, Concurrency::details::_CancellationTokenRegistration *a2, int Number, int a4, int a5, int a6, int a7);
_DWORD *__stdcall sub_492440(_DWORD *a1, _DWORD *a2, int a3);
int *__stdcall sub_492510(int *a1, int *a2);
int __thiscall sub_492570(_DWORD *this, int *a2);
// int __userpurge sub_4925C0@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, Concurrency::details::_CancellationTokenRegistration *a5, int Number, int a7, int a8, int a9);
// int __userpurge sub_493390@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4);
// int __userpurge sub_493440@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
// void *__userpurge sub_4934F0@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6);
// void *__userpurge sub_4935A0@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6);
// Concurrency::details::_CancellationTokenRegistration *__userpurge sub_493650@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6);
// Concurrency::details::_CancellationTokenRegistration *__userpurge sub_493770@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7);
// void __userpurge sub_4938A0(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, int a3, int *a4);
// void __userpurge sub_493CD0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
int __thiscall sub_493E80(_DWORD *this, int a2, int a3);
// int __usercall sub_493EB0@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void *__thiscall sub_493EE0(void *this);
void *__thiscall sub_493F10(void *); // idb
// void *__userpurge sub_493F60@<eax>(void *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5);
// _DWORD *__usercall sub_493F90@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall sub_493FC0(int *this);
int __thiscall sub_493FE0(int *this);
int __thiscall sub_494000(int *this);
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4940B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4);
_DWORD *__thiscall sub_494150(int *this);
int __stdcall sub_4941B0(void *a1);
int __stdcall sub_494230(_BYTE *a1);
// _DWORD *__userpurge sub_4942C0@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6);
// _DWORD *__userpurge sub_494400@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5);
// _DWORD *__usercall sub_494430@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall sub_494450(struct in_addr *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall CIOSocket::Recv(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall sub_494700(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
int __thiscall sub_494760(volatile LONG *this);
int __thiscall sub_4947C0(SOCKET *this);
// void __userpurge CSocket::_CSocket(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, void *Src);
// void __usercall CSocket::Write(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, char a2, ...);
// void __userpurge CSocket::Process(struct in_addr *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned __int16 *a2);
// int __userpurge sub_495770@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5, int a6, void *Src);
// void __userpurge sub_4958F0(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4);
// void __userpurge sub_495980(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7);
// void __userpurge sub_4959B0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7);
// void __userpurge sub_4959E0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src);
// void __userpurge sub_495A90(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
// void __userpurge sub_495B20(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
// void __usercall sub_495C20(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __userpurge sub_495C50(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, const char *a7);
// void __userpurge sub_495CC0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, const char *a7);
// void __userpurge sub_495D30(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// void __userpurge CSocket::OnDelPlayer(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3);
// void __userpurge sub_495F90(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5);
// void __userpurge sub_496030(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int a7);
// void __userpurge sub_496150(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
BOOL CStatus::Update();
// struct Concurrency::details::UMSThreadProxy *__thiscall Concurrency::details::UMSFreeVirtualProcessorRoot::GetExecutingProxy(Concurrency::details::UMSFreeVirtualProcessorRoot *__hidden this); idb
void *__thiscall sub_496300(void *this);
// void *__thiscall unknown_libname_31(void *); idb
int __thiscall sub_4964E0(int *this);
// int __userpurge sub_496520@<eax>(int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5);
int __thiscall sub_496550(Concurrency::details::_CancellationTokenRegistration **this, Concurrency::details::_CancellationTokenRegistration *a2);
// Concurrency::details::_CancellationTokenRegistration *__userpurge CTile::GetItem@<eax>(Concurrency::details::_CancellationTokenRegistration **this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2);
volatile signed __int32 *__thiscall sub_496640(volatile signed __int32 *this, int a2, int a3);
// void *__userpurge sub_496690@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2);
// CTables *__usercall CTables::CTables@<eax>(CTables *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
// void __usercall sub_496700(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, _DWORD *a1, _DWORD *a2);
// void __usercall sub_496880(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>);
void __thiscall sub_4968F0(int this, int a2);
void __thiscall sub_496990(int this, _DWORD *a2);
// void __userpurge Encode(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char chCodeNum, unsigned __int8 *ptr, int len);
// void __userpurge Decode(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char chCodeNum, unsigned __int8 *ptr, int len);
void __cdecl InitRandom(); // idb
unsigned int __cdecl Random();
int __cdecl _Random();
int __fastcall BitSet(volatile signed __int32 *pBit, unsigned int nOffset); // idb
int __fastcall BitReset(volatile signed __int32 *pBit, unsigned int nOffset); // idb
// void *__userpurge WritePacket@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, void *a1, int a2);
// char *__usercall WritePacket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char *packet, const char *__formal, ...);
// void *__userpurge ReadPacketV@<eax>(DWORD a1@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, void *Src, int a2);
// void *__usercall ReadPacket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *Src, ...);
// void *__userpurge ScanPacketV@<eax>(DWORD a1@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, void *Src, int a2, int a3);
// char *__usercall ScanPacket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char *packet, char *end, const char *__formal, ...);
char *__stdcall GetString(char *packet, char *str); // idb
char *__stdcall PutString(char *packet, const char *str); // idb
void __cdecl init_codepage();
int __stdcall mbstricmp(const char *s1, const char *s2); // idb
int __stdcall IsValidString(const char *str); // idb
int __stdcall IsValidName(const char *name); // idb
int __stdcall IsValidAdminName(const char *name); // idb
std::string *__cdecl sub_497C20(std::string *a1);
void __thiscall InitCodePage::InitCodePage(InitCodePage *this); // idb
// BOOL __stdcall MiniDumpWriteDump(HANDLE hProcess, DWORD ProcessId, HANDLE hFile, MINIDUMP_TYPE DumpType, PMINIDUMP_EXCEPTION_INFORMATION ExceptionParam, PMINIDUMP_USER_STREAM_INFORMATION UserStreamParam, PMINIDUMP_CALLBACK_INFORMATION CallbackParam);
int __stdcall Initialize_AES_ChiperText(int *a1);
int __stdcall Encode_AES_Rijndael(void *Src, int, int, void *, int); // idb
int __stdcall Decode_AES_Rijndael(void *Src, int, int, void *, int); // idb
int __stdcall sub_497DF3(FILE *Stream, int); // idb
// int __userpurge sub_497E3E@<eax>(int a1, char *a2, int a3, FILE *Stream, int a5, size_t *a6);
int __stdcall sub_4983BD(FILE *Stream, void *, size_t ElementCount, int, int); // idb
// int __usercall sub_4988C1@<eax>(int a1@<ebp>);
unsigned int __cdecl Initialize_AES_Rijndael_BlockSize(int a1);
__int16 __cdecl Initialize_AES_ChiperText(int *a1, int a2, char a3, int a4);
__int16 __cdecl Encode_AES_Rijndael_Block(_DWORD *a1, int *a2, int a3);
__int16 __cdecl Decode_AES_Rijndael_Block(_DWORD *a1, int *a2, int a3);
__int16 __cdecl Initialize_AES_ChiperText_1(int a1, int *a2, int a3);
__int16 __cdecl Initialize_AES_ChiperText_2(int a1, int *a2, int a3);
void *__cdecl Encode_AES_Rijndael(int a1, void *a2, void *Src, int a4, int a5);
void *__cdecl Decode_AES_Rijndael(int a1, void *a2, void *Src, int a4, int a5);
// void __thiscall __noreturn std::_String_base::_Xran(std::_String_base *__hidden this); idb
void __thiscall std::runtime_error::runtime_error(std::runtime_error *this, const std::runtime_error *__that); // idb
std::runtime_error *__thiscall sub_49F271(std::runtime_error *this, struct exception *__that);
// void __thiscall std::_String_base::_Xlen(std::_String_base *__hidden this); idb
std::runtime_error *__thiscall sub_49F2C9(std::runtime_error *this, struct exception *__that);
int __cdecl j_operator_new(size_t Size); // idb
// void *__cdecl memcpy(void *, const void *Src, size_t Size);
// int report_failure(void); weak
void __thiscall sub_49F65E(void *this);
// void *__cdecl memset(void *, int Val, size_t Size);
// int __cdecl atexit(void (__cdecl *)());
// __time32_t __cdecl time(__time32_t *const Time);
// struct tm *__cdecl localtime(const __time32_t *const Time);
// int __cdecl abs(int Number);
// int __cdecl fclose(FILE *Stream);
// int __cdecl isalnum(int C);
// int __cdecl ungetc_0(int Character, FILE *Stream);
// int __cdecl fgetc(FILE *Stream);
// size_t __cdecl strlen(const char *Str);
// FILE *__cdecl fopen(const char *FileName, const char *Mode);
// int __cdecl strcmp(const char *Str1, const char *Str2);
// void *__cdecl memcpy_0(void *, const void *Src, size_t Size);
// char *__cdecl strcpy(char *Destination, const char *Source);
// __time32_t __cdecl mktime(struct tm *const Tm);
// int sprintf(char *const Buffer, const char *const Format, ...);
int __cdecl sub_4A0647(int a1);
// char *__cdecl strrchr(const char *Str, int Ch);
// size_t __cdecl strcspn(const char *Str, const char *Control);
// size_t __cdecl strspn(const char *Str, const char *Control);
// struct tm *__cdecl gmtime(const __time32_t *const Time);
// void *__cdecl memchr(const void *Buf, int Val, size_t MaxCount);
// int __cdecl _vsnprintf(char *const Buffer, const size_t BufferCount, const char *const Format, va_list ArgList);
// int _snprintf(char *const Buffer, const size_t BufferCount, const char *const Format, ...);
// uintptr_t __cdecl _beginthreadex(void *Security, unsigned int StackSize, _beginthreadex_proc_type StartAddress, void *ArgList, unsigned int InitFlag, unsigned int *ThrdAddr);
// int __cdecl strtol(const char *String, char **EndPtr, int Radix);
// unsigned int __cdecl strtoul(const char *String, char **EndPtr, int Radix);
// size_t __cdecl fwrite(const void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
unsigned int __cdecl fread_0(void *buffer, unsigned int size, unsigned int count, _iobuf *stream);
// int __cdecl vsprintf(char *const Buffer, const char *const Format, va_list ArgList);
// _DWORD __cdecl flsall(_DWORD); weak
// int __cdecl fflush(FILE *Stream);
int sub_4A1236();
// int fscanf(FILE *const Stream, const char *const Format, ...);
int __cdecl j__atol(const char *String);
// void *__cdecl malloc(size_t Size);
// int sscanf(const char *const Buffer, const char *const Format, ...);
// char *__cdecl strncpy(char *Destination, const char *Source, size_t Count);
_DWORD __cdecl j_operator_delete(void *pBlock); // weak
// size_t __cdecl fread(void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
size_t __cdecl sub_4A17A2(void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
// char *__cdecl strchr(const char *Str, int Val);
// void __cdecl srand(unsigned int Seed);
// int __cdecl tolower(int C);
// int __cdecl fseek(FILE *Stream, int Offset, int Origin);
// int __cdecl ftell(FILE *Stream);
// int __cdecl _filelength(int FileHandle);
// void __stdcall __noreturn _CxxThrowException(void *pExceptionObject, _ThrowInfo *pThrowInfo);
// exception *__thiscall exception::exception(exception *__hidden this, const struct exception *); idb
void __thiscall sub_4A2489(void *this);
void *__thiscall sub_4A24AC(void *this, char a2);
// void __cdecl free(void *Block);
// void __cdecl _lock_file(FILE *Stream);
// void __cdecl _unlock_file(FILE *Stream);
// int __thiscall write_char(FILE *File); idb
// int __cdecl write_multi_char(char, int, FILE *File); idb
// int __cdecl write_string(_DWORD); weak
// int __cdecl _output(FILE *File, int, int); idb
void __cdecl _RTC_Terminate();
void __cdecl sub_4A7C3D(); // idb
// void __cdecl __noreturn terminate(); idb
void __cdecl __noreturn _inconsistency(); // idb
// int CPtoLCID(void); weak
// int setSBCS(void); weak
// int setSBUpLow(void); weak
// int __cdecl _setmbcp_lk(UINT CodePage); idb
// int __cdecl wctomb(char *MbCh, wchar_t WCh);
// _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD); weak
int __cdecl sub_4AA18E(int a1, int a2);
int __cdecl sub_4AA1A4(int a1, int a2);
int __cdecl _atoflt(_CRT_FLOAT *Result, const char *String);
int __cdecl sub_4AA1F7(int a1, int a2);
// int __cdecl _stricmp(const char *String1, const char *String2);
// _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __cdecl _fileno(FILE *Stream);
// int __usercall sub_4ABF90@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
int sub_4ABFB0();
int sub_4ABFD0();
int sub_4ABFF0();
int sub_4AC010();
int sub_4AC030();
int sub_4AC050();
_DWORD *sub_4AC070();
int sub_4AC090();
int sub_4AC0B0();
int sub_4AC0D0();
int sub_4AC0F0();
int sub_4AC110();
int sub_4AC130();
int sub_4AC150();
int sub_4AC170();
int sub_4AC190();
int sub_4AC1B0();
int sub_4AC1D0();
void sub_4AC1F0();
int sub_4AC930();
int sub_4AC950();
int sub_4AC970();
int sub_4AC990();
int sub_4AC9B0();
void sub_4AC9D0();
int sub_4AC9F0();
int sub_4ACA10();
int sub_4ACA30();
int sub_4ACA50();
int sub_4ACA70();
int sub_4ACA90();
_DWORD *sub_4ACAB0();
_DWORD *sub_4ACAC0();
int sub_4ACAD0();
int sub_4ACAF0();
int sub_4ACB10();
int sub_4ACB30();
int sub_4ACB50();
int sub_4ACB70();
int sub_4ACB90();
int sub_4ACBB0();
int sub_4ACBD0();
int sub_4ACBF0();
int sub_4ACC10();
void *sub_4ACC30();
DWORD sub_4ACC40();
int sub_4ACC50();
int sub_4ACC70();
int sub_4ACC90();
int sub_4ACCB0();
int sub_4ACCD0();
int sub_4ACCF0();
int sub_4ACD10();
int sub_4ACD30();
int sub_4ACD60();
int sub_4ACD80();
int sub_4ACDA0();
int sub_4ACDC0();
int sub_4ACDE0();
int sub_4ACE00();
int sub_4ACE20();
int sub_4ACE40();
int sub_4ACE60();
int sub_4ACE80();
int sub_4ACEA0();
int sub_4ACEC0();
void sub_4ACEE0();
int sub_4AE1D0();
void sub_4AE1F0();
DWORD sub_4AE6A0();
int sub_4AE6B0();
int sub_4AE6D0();
DWORD sub_4AE6F0();
int sub_4AE700();
int sub_4AE720();
int sub_4AE740();
int sub_4AE760();
int sub_4AE780();
int sub_4AE7A0();
int sub_4AE7D0();
int sub_4AE7F0();
int sub_4AE810();
int sub_4AE830();
int sub_4AE850();
int sub_4AE870();
int sub_4AE890();
int sub_4AE8B0();
int sub_4AE8D0();
int sub_4AE8F0();
int sub_4AE910();
void sub_4AE930();
CMeshDefense *sub_4B23C0();
CMemory **sub_4B2580();
DWORD sub_4B2F00();
int sub_4B2F10();
DWORD sub_4B2F30();
int sub_4B2F40();
int sub_4B2F70();
int sub_4B2F90();
void sub_4B2FB0();
// void __usercall sub_4B2FC0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B2FD0(); // idb
void __cdecl sub_4B2FE0(); // idb
void __cdecl sub_4B2FF0(); // idb
void __cdecl sub_4B3000(); // idb
void __cdecl sub_4B3010(); // idb
void __cdecl sub_4B3020(); // idb
void __cdecl sub_4B3030(); // idb
void __cdecl sub_4B3040(); // idb
void __cdecl sub_4B3050(); // idb
void __cdecl sub_4B3060(); // idb
void __cdecl sub_4B3070(); // idb
// void __usercall sub_4B3080(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3090(); // idb
// void __usercall sub_4B30A0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B30B0(); // idb
// void __usercall sub_4B30C0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B30D0(); // idb
void __cdecl sub_4B30E0(); // idb
// void __usercall sub_4B30F0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3100(); // idb
void __cdecl sub_4B3110(); // idb
void __cdecl sub_4B3120(); // idb
void __cdecl sub_4B3130(); // idb
void __cdecl sub_4B3140(); // idb
void __cdecl sub_4B3150(); // idb
// void __usercall sub_4B3160(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3170(); // idb
void __cdecl sub_4B3180(); // idb
// void __usercall sub_4B3190(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B31A0(); // idb
void __cdecl sub_4B31B0(); // idb
void __cdecl sub_4B31C0(); // idb
void __cdecl sub_4B31D0(); // idb
void __cdecl sub_4B31E0(); // idb
void __cdecl sub_4B31F0(); // idb
void __cdecl sub_4B3200(); // idb
void __cdecl sub_4B3210(); // idb
void __cdecl sub_4B3220(); // idb
void __cdecl sub_4B3230(); // idb
void __cdecl sub_4B3240(); // idb
// void __usercall sub_4B3250(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3260(); // idb
// void __usercall sub_4B3270(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3280(); // idb
// void __usercall sub_4B3290(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B32A0(); // idb
void __cdecl sub_4B32B0(); // idb
void __cdecl sub_4B32D0(); // idb
void __cdecl sub_4B32E0(); // idb
void __cdecl sub_4B32F0(); // idb
void __cdecl sub_4B3300(); // idb
void __cdecl sub_4B3310(); // idb
void __cdecl sub_4B3320(); // idb
// void __usercall sub_4B3330(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3340(); // idb
// void __usercall sub_4B3350(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall sub_4B3360(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
// void __usercall sub_4B3370(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3380(); // idb
void __cdecl sub_4B3390(); // idb
void __cdecl sub_4B33A0(); // idb
// void __usercall sub_4B33B0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B33C0(); // idb
// void __usercall sub_4B33D0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B33E0(); // idb
// void __usercall sub_4B33F0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3400(); // idb
void __cdecl sub_4B3410(); // idb
// void __usercall sub_4B3430(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3440(); // idb
// void __usercall sub_4B3450(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3460(); // idb
void __cdecl sub_4B3470(); // idb
// void __usercall sub_4B3480(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3490(); // idb
void __cdecl sub_4B34A0(); // idb
// void __usercall sub_4B34B0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B34C0(); // idb
void __cdecl sub_4B34D0(); // idb
void __cdecl sub_4B34E0(); // idb
void __cdecl sub_4B34F0(); // idb
// void __usercall sub_4B3510(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>);
void __cdecl sub_4B3520(); // idb
// int __stdcall AntiCpSvr_5(_DWORD, _DWORD); weak
// int __stdcall AntiCpSvr_3(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int AntiCpSvr_2(void); weak
// int __stdcall AntiCpSvr_1(_DWORD); weak
// int __stdcall AntiCpSvr_4(_DWORD, _DWORD, _DWORD); weak
// int __stdcall AntiCpSvr_6(_DWORD, _DWORD, _DWORD); weak
// BOOL __stdcall GetTextMetricsA(HDC hdc, LPTEXTMETRICA lptm);
// BOOL __stdcall TextOutA(HDC hdc, int x, int y, LPCSTR lpString, int c);
// COLORREF __stdcall SetTextColor(HDC hdc, COLORREF color);
// BOOL __stdcall GetCPInfo(UINT CodePage, LPCPINFO lpCPInfo);
// LONG __stdcall InterlockedDecrement(volatile LONG *lpAddend);
// DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
// HANDLE __stdcall CreateEventA(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCSTR lpName);
// BOOL __stdcall CloseHandle(HANDLE hObject);
// BOOL __stdcall ResetEvent(HANDLE hEvent);
// LONG __stdcall InterlockedExchange(volatile LONG *Target, LONG Value);
// BOOL __stdcall SetEvent(HANDLE hEvent);
// LONG __stdcall InterlockedIncrement(volatile LONG *lpAddend);
// BOOL __stdcall PostQueuedCompletionStatus(HANDLE CompletionPort, DWORD dwNumberOfBytesTransferred, ULONG_PTR dwCompletionKey, LPOVERLAPPED lpOverlapped);
// LONG __stdcall InterlockedCompareExchange(volatile LONG *Destination, LONG Exchange, LONG Comperand);
// DWORD __stdcall GetTickCount();
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// BOOL __stdcall GetThreadContext(HANDLE hThread, LPCONTEXT lpContext);
// HANDLE __stdcall GetCurrentThread();
// LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);
// LPSTR __stdcall lstrcpyA(LPSTR lpString1, LPCSTR lpString2);
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall __noreturn ExitProcess(UINT uExitCode);
// void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// BOOL __stdcall DeleteFileA(LPCSTR lpFileName);
// BOOL __stdcall MoveFileExA(LPCSTR lpExistingFileName, LPCSTR lpNewFileName, DWORD dwFlags);
// BOOL __stdcall ReadFile(HANDLE hFile, LPVOID lpBuffer, DWORD nNumberOfBytesToRead, LPDWORD lpNumberOfBytesRead, LPOVERLAPPED lpOverlapped);
// HANDLE __stdcall CreateFileA(LPCSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
// HANDLE __stdcall GetCurrentProcess();
// SIZE_T __stdcall VirtualQuery(LPCVOID lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, SIZE_T dwLength);
// DWORD __stdcall GetCurrentThreadId();
// void __stdcall GetLocalTime(LPSYSTEMTIME lpSystemTime);
// DWORD __stdcall SetFilePointer(HANDLE hFile, LONG lDistanceToMove, PLONG lpDistanceToMoveHigh, DWORD dwMoveMethod);
// void __stdcall OutputDebugStringA(LPCSTR lpOutputString);
// BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// DWORD __stdcall GetCurrentProcessId();
// BOOL __stdcall SetThreadPriority(HANDLE hThread, int nPriority);
// void __stdcall GetSystemInfo(LPSYSTEM_INFO lpSystemInfo);
// BOOL __stdcall IsBadWritePtr(LPVOID lp, UINT_PTR ucb);
// void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// DWORD __stdcall ResumeThread(HANDLE hThread);
// DWORD __stdcall SuspendThread(HANDLE hThread);
// void __stdcall Sleep(DWORD dwMilliseconds);
// BOOL __stdcall SwitchToThread();
// BOOL __stdcall TryEnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// HANDLE __stdcall CreateIoCompletionPort(HANDLE FileHandle, HANDLE ExistingCompletionPort, ULONG_PTR CompletionKey, DWORD NumberOfConcurrentThreads);
// BOOL __stdcall SetProcessPriorityBoost(HANDLE hProcess, BOOL bDisablePriorityBoost);
// DWORD __stdcall WaitForMultipleObjects(DWORD nCount, const HANDLE *lpHandles, BOOL bWaitAll, DWORD dwMilliseconds);
// BOOL __stdcall GetQueuedCompletionStatus(HANDLE CompletionPort, LPDWORD lpNumberOfBytesTransferred, PULONG_PTR lpCompletionKey, LPOVERLAPPED *lpOverlapped, DWORD dwMilliseconds);
// DWORD __stdcall SetThreadIdealProcessor(HANDLE hThread, DWORD dwIdealProcessor);
// DWORD __stdcall GetLastError();
// LONG __stdcall InterlockedExchangeAdd(volatile LONG *Addend, LONG Value);
// HANDLE __stdcall CreateMutexA(LPSECURITY_ATTRIBUTES lpMutexAttributes, BOOL bInitialOwner, LPCSTR lpName);
// BOOL __stdcall HeapDestroy(HANDLE hHeap);
// HANDLE __stdcall HeapCreate(DWORD flOptions, SIZE_T dwInitialSize, SIZE_T dwMaximumSize);
// BOOL __stdcall HeapFree(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem);
// BOOL __stdcall VirtualFree(LPVOID lpAddress, SIZE_T dwSize, DWORD dwFreeType);
// LPVOID __stdcall HeapAlloc(HANDLE hHeap, DWORD dwFlags, SIZE_T dwBytes);
// LPVOID __stdcall VirtualAlloc(LPVOID lpAddress, SIZE_T dwSize, DWORD flAllocationType, DWORD flProtect);
// LPVOID __stdcall HeapReAlloc(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem, SIZE_T dwBytes);
// SIZE_T __stdcall HeapSize(HANDLE hHeap, DWORD dwFlags, LPCVOID lpMem);
// BOOL __stdcall IsDBCSLeadByte(BYTE TestChar);
// UINT __stdcall GetACP();
// void __stdcall RaiseException(DWORD dwExceptionCode, DWORD dwExceptionFlags, DWORD nNumberOfArguments, const ULONG_PTR *lpArguments);
// int __stdcall lstrlenA(LPCSTR lpString);
// HDC __stdcall BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint);
// BOOL __stdcall GetClientRect(HWND hWnd, LPRECT lpRect);
// BOOL __stdcall EndPaint(HWND hWnd, const PAINTSTRUCT *lpPaint);
// BOOL __stdcall SetDlgItemInt(HWND hDlg, int nIDDlgItem, UINT uValue, BOOL bSigned);
// UINT __stdcall GetDlgItemTextA(HWND hDlg, int nIDDlgItem, LPSTR lpString, int cchMax);
// UINT __stdcall IsDlgButtonChecked(HWND hDlg, int nIDButton);
// UINT __stdcall GetDlgItemInt(HWND hDlg, int nIDDlgItem, BOOL *lpTranslated, BOOL bSigned);
// HWND __stdcall GetDlgItem(HWND hDlg, int nIDDlgItem);
// BOOL __stdcall EnableWindow(HWND hWnd, BOOL bEnable);
// BOOL __stdcall EndDialog(HWND hDlg, INT_PTR nResult);
// INT_PTR __stdcall DialogBoxParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType);
// BOOL __stdcall DestroyWindow(HWND hWnd);
// void __stdcall PostQuitMessage(int nExitCode);
// HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
// HMENU __stdcall GetMenu(HWND hWnd);
// BOOL __stdcall EnableMenuItem(HMENU hMenu, UINT uIDEnableItem, UINT uEnable);
// BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow);
// BOOL __stdcall UpdateWindow(HWND hWnd);
// HICON __stdcall LoadIconA(HINSTANCE hInstance, LPCSTR lpIconName);
// HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);
// ATOM __stdcall RegisterClassExA(const WNDCLASSEXA *);
// int __stdcall LoadStringA(HINSTANCE hInstance, UINT uID, LPSTR lpBuffer, int cchBufferMax);
// HACCEL __stdcall LoadAcceleratorsA(HINSTANCE hInstance, LPCSTR lpTableName);
// BOOL __stdcall GetMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax);
// int __stdcall TranslateAcceleratorA(HWND hWnd, HACCEL hAccTable, LPMSG lpMsg);
// BOOL __stdcall TranslateMessage(const MSG *lpMsg);
// LRESULT __stdcall DispatchMessageA(const MSG *lpMsg);
// BOOL __stdcall SetWindowTextA(HWND hWnd, LPCSTR lpString);
// BOOL __stdcall InvalidateRect(HWND hWnd, const RECT *lpRect, BOOL bErase);
// int __stdcall wvsprintfA(LPSTR, LPCSTR, va_list arglist);
// int wsprintfA(LPSTR, LPCSTR, ...);
// BOOL __stdcall PtInRect(const RECT *lprc, POINT pt);
// BOOL __stdcall PostMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// BOOL __stdcall KillTimer(HWND hWnd, UINT_PTR uIDEvent);
// UINT_PTR __stdcall SetTimer(HWND hWnd, UINT_PTR nIDEvent, UINT uElapse, TIMERPROC lpTimerFunc);
// int __stdcall shutdown(SOCKET s, int how);
// char *__stdcall inet_ntoa(struct in_addr in);
// SOCKET __stdcall accept(SOCKET s, struct sockaddr *addr, int *addrlen);
// BOOL __stdcall WSAResetEvent(HANDLE hEvent);
// int __stdcall WSAGetLastError();
// u_long __stdcall htonl(u_long hostlong);
// int __stdcall listen(SOCKET s, int backlog);
// HANDLE __stdcall WSACreateEvent();
// int __stdcall WSAEventSelect(SOCKET s, HANDLE hEventObject, int lNetworkEvents);
// BOOL __stdcall WSACloseEvent(HANDLE hEvent);
// int __stdcall WSASend(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesSent, DWORD dwFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// int __stdcall WSARecv(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesRecvd, LPDWORD lpFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// int __stdcall WSAStartup(WORD wVersionRequested, LPWSADATA lpWSAData);
// int __stdcall WSACleanup();
// int __stdcall setsockopt(SOCKET s, int level, int optname, const char *optval, int optlen);
// int __stdcall recv(SOCKET s, char *buf, int len, int flags);
// int __stdcall send(SOCKET s, const char *buf, int len, int flags);
// int __stdcall getsockname(SOCKET s, struct sockaddr *name, int *namelen);
// SOCKET __stdcall socket(int af, int type, int protocol);
// int __stdcall bind(SOCKET s, const struct sockaddr *name, int namelen);
// unsigned int __stdcall inet_addr(const char *cp);
// struct hostent *__stdcall gethostbyname(const char *name);
// u_short __stdcall htons(u_short hostshort);
// int __stdcall connect(SOCKET s, const struct sockaddr *name, int namelen);
// int __stdcall closesocket(SOCKET s);
// DWORD __stdcall SymGetModuleBase(HANDLE hProcess, DWORD dwAddr);
// PVOID __stdcall SymFunctionTableAccess(HANDLE hProcess, DWORD AddrBase);
// BOOL __stdcall StackWalk(DWORD MachineType, HANDLE hProcess, HANDLE hThread, LPSTACKFRAME StackFrame, PVOID ContextRecord, PREAD_PROCESS_MEMORY_ROUTINE ReadMemoryRoutine, PFUNCTION_TABLE_ACCESS_ROUTINE FunctionTableAccessRoutine, PGET_MODULE_BASE_ROUTINE GetModuleBaseRoutine, PTRANSLATE_ADDRESS_ROUTINE TranslateAddress);
// BOOL __stdcall SymFromAddr(HANDLE hProcess, DWORD64 Address, PDWORD64 Displacement, PSYMBOL_INFO Symbol);
// DWORD __stdcall UnDecorateSymbolName(PCSTR name, PSTR outputString, DWORD maxStringLength, DWORD flags);
// BOOL __stdcall SymGetLineFromAddr64(HANDLE hProcess, DWORD64 qwAddr, PDWORD pdwDisplacement, PIMAGEHLP_LINE64 Line64);
// BOOL __stdcall SymInitialize(HANDLE hProcess, PCSTR UserSearchPath, BOOL fInvadeProcess);
// DWORD __stdcall SymGetOptions();
// DWORD __stdcall SymSetOptions(DWORD SymOptions);
// BOOL __stdcall SymCleanup(HANDLE hProcess);

//-------------------------------------------------------------------------
// Data declarations

void *(__thiscall *off_4B433C)(CIOObject *__hidden this, unsigned int) = &CIOObject::`vector deleting destructor'; // weak
const char Src = '\0'; // idb
int (__stdcall *off_4B4564)(int) = &CDBPacket::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B457C)(int) = &CIOObject::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B4598)(int) = &CBase::_scalar_deleting_destructor_; // weak
void *(__thiscall *off_4B4630[2])(std::_Ref_count_base *__hidden this, const struct type_info *) = { &CRainforceDefense::CRainforceDefense, &CRainforceDefense::CRainforceDefense }; // weak
void *(__thiscall *off_4B467C)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
void *(__thiscall *off_4B4698)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
void *(__thiscall *off_4B46B4)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
void *(__thiscall *off_4B46D0)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
int (__stdcall *off_4B46EC[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffRevivalSequela::ApplyBuff,
  &CBuffRevivalSequela::FreeBuff
}; // weak
int (__stdcall *off_4B4708[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffStun::ApplyBuff,
  &CBuffStun::FreeBuff
}; // weak
int (__stdcall *off_4B4724[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffMoveStop::ApplyBuff,
  &CBuffMoveStop::FreeBuff
}; // weak
int (__stdcall *off_4B4740[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffPoison::ApplyBuff,
  &CBuffPoison::FreeBuff
}; // weak
int (__stdcall *off_4B475C[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffPoisonCloud::ApplyBuff,
  &CBuffPoisonCloud::FreeBuff
}; // weak
int (__stdcall *off_4B4778[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffHaste::ApplyBuff,
  &CBuffHaste::FreeBuff
}; // weak
int (__stdcall *off_4B4794[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffHP::ApplyBuff,
  &CBuffHP::FreeBuff
}; // weak
int (__stdcall *off_4B47B0[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffMP::ApplyBuff,
  &CBuffMP::FreeBuff
}; // weak
int (__stdcall *off_4B47CC[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffSleep::ApplyBuff,
  &CBuffSleep::FreeBuff
}; // weak
void *(__thiscall *off_4B47E8)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
void *(__thiscall *off_4B4804)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
void *(__thiscall *off_4B4820)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
int (__stdcall *off_4B483C[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffSuffering::ApplyBuff,
  &CBuffSuffering::FreeBuff
}; // weak
int (__stdcall *off_4B4858[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffInchantWeapon::ApplyBuff,
  &CBuffInchantWeapon::FreeBuff
}; // weak
int (__stdcall *off_4B4874[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffSpiritDmg::ApplyBuff,
  &CBuffSpiritDmg::FreeBuff
}; // weak
int (__stdcall *off_4B4890[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffFlagPrty::ApplyBuff,
  &CBuffFlagPrty::FreeBuff
}; // weak
int (__stdcall *off_4B48AC[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffFlagHP::ApplyBuff,
  &CBuffFlagHP::FreeBuff
}; // weak
int (__stdcall *off_4B48C8[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffBerserk::ApplyBuff,
  &CBuffBerserk::FreeBuff
}; // weak
int (__stdcall *off_4B48E4[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffSilenceShot::ApplyBuff,
  &CBuffSilenceShot::FreeBuff
}; // weak
int (__stdcall *off_4B4900[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffManaBurn::ApplyBuff,
  &CBuffManaBurn::FreeBuff
}; // weak
int (__stdcall *off_4B491C[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffPrty::ApplyBuff,
  &CBuffPrty::FreeBuff
}; // weak
int (__stdcall *off_4B4938[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffPrtyEx::ApplyBuff,
  &CBuffPrtyEx::FreeBuff
}; // weak
int (__stdcall *off_4B4954[3])(int) = { &CBuffExpire::SetBuff, &CBuffExpire::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B4970[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffExpireEvent::ApplyBuff,
  &CBuffExpireEvent::FreeBuff
}; // weak
int (__stdcall *off_4B498C[3])(int) =
{
  &CBuffExpire::SetBuff,
  &CBuffExpireLuckyStone2::ApplyBuff,
  &CBuffExpire::FreeBuff
}; // weak
int (__stdcall *off_4B49A8[3])(int) = { &CBuffRemain::SetBuff, &CBuffRemain::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B49C4[3])(int) = { &CBuffRemainEx::SetBuff, &CBuffRemainEx::ApplyBuff, &CBuffRemainEx::FreeBuff }; // weak
int (__stdcall *off_4B49E0[3])(int) =
{
  &CBuffRemainDead::SetBuff,
  &BuffRemainDead::ApplyBuff,
  &CBuffRemainDead::FreeBuff
}; // weak
int (__stdcall *off_4B49FC[3])(int) =
{
  &CBuffRemainDeadEx::SetBuff,
  &BuffRemainDead::ApplyBuff,
  &CBuffRemainDead::FreeBuff
}; // weak
int (__stdcall *off_4B4A18[3])(int) = { &CBuffRemain::SetBuff, &CBuffRemainXBlow::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B4A34[3])(int) =
{
  &CBuffRemainPrty::SetBuff,
  &CBuffRemainPrty::ApplyBuff,
  &CBuffRemainPrty::FreeBuff
}; // weak
int (__stdcall *off_4B4A50[3])(int) = { &CBuffRemain::SetBuff, &CBuffRemain::ApplyBuff, &CBuffExpire::FreeBuff }; // weak
int (__stdcall *off_4B4A6C[3])(int) =
{
  &CBuffRemain::SetBuff,
  &CBuffRemainLuckyStone1::ApplyBuff,
  &CBuffExpire::FreeBuff
}; // weak
int (__stdcall *off_4B4A88[3])(int) =
{
  &CBuffRemainPet::SetBuff,
  &CBuffRemainPet::ApplyBuff,
  &CBuffRemainPet::FreeBuff
}; // weak
int (__stdcall *off_4B4AA4[3])(int) =
{
  &CRainforceDefense::CRainforceDefense,
  &CBuffHydrochloricAcid::ApplyBuff,
  &CBuffHydrochloricAcid::FreeBuff
}; // weak
void *(__thiscall *off_4B4AC0)(std::_Ref_count_base *__hidden this, const struct type_info *) = &CRainforceDefense::CRainforceDefense; // weak
int (__stdcall *off_4B4AF8)(int) = &CCalendar::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B4B10)(int) = &CChar::_scalar_deleting_destructor_; // weak
int (*off_4B4BCC[39])() =
{
  &unknown_libname_10,
  &sub_432410,
  &sub_432430,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_17,
  &unknown_libname_7,
  &unknown_libname_28,
  &sub_40C360,
  &unknown_libname_28,
  &unknown_libname_28,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_28,
  &sub_40C360,
  &unknown_libname_10,
  &unknown_libname_10,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_17,
  &unknown_libname_28,
  &sub_40C360,
  &unknown_libname_28,
  &unknown_libname_28,
  &unknown_libname_8,
  &unknown_libname_9,
  &unknown_libname_17,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7
}; // weak
int (*off_4B4BF4[29])() =
{
  &sub_40C360,
  &unknown_libname_28,
  &unknown_libname_28,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_28,
  &sub_40C360,
  &unknown_libname_10,
  &unknown_libname_10,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_17,
  &unknown_libname_28,
  &sub_40C360,
  &unknown_libname_28,
  &unknown_libname_28,
  &unknown_libname_8,
  &unknown_libname_9,
  &unknown_libname_17,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7
}; // weak
int (*off_4B4C1C[19])() =
{
  &sub_40C360,
  &unknown_libname_10,
  &unknown_libname_10,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_17,
  &unknown_libname_28,
  &sub_40C360,
  &unknown_libname_28,
  &unknown_libname_28,
  &unknown_libname_8,
  &unknown_libname_9,
  &unknown_libname_17,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7
}; // weak
int (*off_4B4C44[9])() =
{
  &sub_40C360,
  &unknown_libname_28,
  &unknown_libname_28,
  &unknown_libname_8,
  &unknown_libname_9,
  &unknown_libname_17,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_7
}; // weak
int (__stdcall *off_4B4CEC)(int) = &CDBSocket::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B4EE8)(int) = &CDBPacket::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B4F00)(int) = &CGoto::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B4F48)(int) = &CPortal::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B4FAC)(int) = &sub_40F610; // weak
int (__stdcall *off_4B4FF0)(int) = &CGuild::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B56A0)(int) = &CAlliance::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B5798)(int) = &CCastle::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B58F0)(int) = &CWar::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B5978)(int) = &CInitItem::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B5AA8[2])(int) = { &CSpecPrty::ApplySpec, &CSpecPrty::FreeSpec }; // weak
int (__stdcall *off_4B5AB8[2])(int) = { &unknown_libname_3, &unknown_libname_3 }; // weak
int (__stdcall *off_4B5AC8[2])(int) = { &CSpecGState::ApplySpec, &CSpecGState::FreeSpec }; // weak
int (__stdcall *off_4B5AF8[2])(int) = { &unknown_libname_3, &unknown_libname_3 }; // weak
int (__stdcall *off_4B5B08[2])(int) = { &unknown_libname_3, &unknown_libname_3 }; // weak
int (__stdcall *off_4B5B18[2])(int) = { &unknown_libname_3, &unknown_libname_3 }; // weak
int (__stdcall *off_4B5B28[2])(int) = { &unknown_libname_3, &unknown_libname_3 }; // weak
int (__stdcall *off_4B5B38[3])(int) = { &unknown_libname_3, &unknown_libname_3, &CSpecBuff::Use }; // weak
int (__stdcall *off_4B5B48[3])(int) = { &unknown_libname_3, &unknown_libname_3, &CSpecRevival::Use }; // weak
int (__stdcall *off_4B5B58)(int) = &CPrefix::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B5D58)(int) = &CInitMap::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B6624)(int) = &CIOSocket::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B66D8)(char a2) = &CIOServer::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B677C)(int) = &CDBPacket::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B6798)(int) = &CItem::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B69E0)(int) = &CItemMask::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B6AC0)(int) = &CItemMask::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B6C50)(int) = &CItemGeneral::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B6E58)(int) = &CItemGeneral::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7038)(int) = &CItemGeneral::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7118)(int) = &CItemGeneral::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7248)(int) = &CItemGeneral::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7328)(int) = &CItemGeneral::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7470)(int) = &CItemGeneral::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7558)(int) = &CGroup::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B75D8)(int) = &CItemGroup::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7678)(int) = &CGoods::_scalar_deleting_destructor_; // weak
int (*off_4B76F0[10])() =
{
  &sub_40C360,
  &unknown_libname_28,
  &unknown_libname_28,
  &sub_40C330,
  &sub_40C330,
  &unknown_libname_7,
  &unknown_libname_17,
  &unknown_libname_7,
  &unknown_libname_7,
  &unknown_libname_28
}; // weak
int (__stdcall *off_4B7CE0)(int) = &CInitMonster::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7DC8)(int) = &CGenMonster::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7E78)(int) = &CMonsterObject::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7E90)(int) = &CMonster::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B7F88)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8090)(int) = &CMonsterMaguniWithSkillOnly::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8198)(int) = &CMonsterMaguniWithSkillOnly::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B82A0)(int) = &CMonsterMagic::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8398)(int) = &CMonsterNotReal::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8490)(int) = &CMonsterMagic::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8588)(int) = &CMonsterItem::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8680)(int) = &CMonsterMagic::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8778)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8880)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8988)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8A90)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8B98)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8CA0)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8DA8)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8EB0)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B8FB8)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B90C0)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B91D8)(int) = &CMonsterReal::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9308)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9470)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9578)(int) = &CMonsterSiegeGun::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9680)(int) = &CInitNPC::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B96F8)(int) = &CGenNPC::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B97A0)(int) = &CMonsterObject::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B97B8)(int) = &CNPC::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B98F0)(int) = &CNPCInformant::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B99D0)(int) = &CNPCInformant::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9AB0)(int) = &CNPCInformant::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9B90)(int) = &CNPCInformant::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9C70)(int) = &CNPCInformant::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4B9D50)(int) = &CNPCInformant::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4BA5A0)(int) = &CQuest::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4BA5E8)(int) = &CParty::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4BA660)(int) = &CPlayer::_scalar_deleting_destructor_; // weak
void *off_4BAC50 = (void *)0x494962; // weak
int (__stdcall *off_4BBF54)(int) = &CDBPacket::_scalar_deleting_destructor_; // weak
int (__stdcall *off_4BC020[3])(int) = { &sub_47BBB0, &sub_47AAB0, &sub_47B940 }; // weak
int (__stdcall *off_4BC028)(int) = &sub_47B940; // weak
int (__stdcall *off_4BC030[18])(int) =
{
  &sub_47BBB0,
  &sub_47AAE0,
  &sub_47BBB0,
  &sub_47AB00,
  &sub_47BBB0,
  &sub_47AB60,
  &sub_47BA70,
  &sub_47AB90,
  &sub_47BBB0,
  &sub_47AC50,
  &sub_47BBB0,
  &sub_47AC80,
  &sub_47BBB0,
  &sub_47ACA0,
  &sub_47BBB0,
  &sub_47ACC0,
  &sub_47BBB0,
  &sub_47ACF0
}; // weak
int (__stdcall *off_4BC038[16])(int) =
{
  &sub_47BBB0,
  &sub_47AB00,
  &sub_47BBB0,
  &sub_47AB60,
  &sub_47BA70,
  &sub_47AB90,
  &sub_47BBB0,
  &sub_47AC50,
  &sub_47BBB0,
  &sub_47AC80,
  &sub_47BBB0,
  &sub_47ACA0,
  &sub_47BBB0,
  &sub_47ACC0,
  &sub_47BBB0,
  &sub_47ACF0
}; // weak
int (__stdcall *off_4BC040[14])(int) =
{
  &sub_47BBB0,
  &sub_47AB60,
  &sub_47BA70,
  &sub_47AB90,
  &sub_47BBB0,
  &sub_47AC50,
  &sub_47BBB0,
  &sub_47AC80,
  &sub_47BBB0,
  &sub_47ACA0,
  &sub_47BBB0,
  &sub_47ACC0,
  &sub_47BBB0,
  &sub_47ACF0
}; // weak
int (__stdcall *off_4BC048[12])(int) =
{
  &sub_47BA70,
  &sub_47AB90,
  &sub_47BBB0,
  &sub_47AC50,
  &sub_47BBB0,
  &sub_47AC80,
  &sub_47BBB0,
  &sub_47ACA0,
  &sub_47BBB0,
  &sub_47ACC0,
  &sub_47BBB0,
  &sub_47ACF0
}; // weak
int (__stdcall *off_4BC050[10])(int) =
{
  &sub_47BBB0,
  &sub_47AC50,
  &sub_47BBB0,
  &sub_47AC80,
  &sub_47BBB0,
  &sub_47ACA0,
  &sub_47BBB0,
  &sub_47ACC0,
  &sub_47BBB0,
  &sub_47ACF0
}; // weak
int (__stdcall *off_4BC058[8])(int) =
{
  &sub_47BBB0,
  &sub_47AC80,
  &sub_47BBB0,
  &sub_47ACA0,
  &sub_47BBB0,
  &sub_47ACC0,
  &sub_47BBB0,
  &sub_47ACF0
}; // weak
int (__stdcall *off_4BC060[6])(int) = { &sub_47BBB0, &sub_47ACA0, &sub_47BBB0, &sub_47ACC0, &sub_47BBB0, &sub_47ACF0 }; // weak
int (__stdcall *off_4BC068[4])(int) = { &sub_47BBB0, &sub_47ACC0, &sub_47BBB0, &sub_47ACF0 }; // weak
int (__stdcall *off_4BC070[2])(int) = { &sub_47BBB0, &sub_47ACF0 }; // weak
int (__stdcall *off_4BC110[3])(int) = { &sub_47C5D0, &sub_47AD50, &sub_47C4A0 }; // weak
int (__stdcall *off_4BC118)(int) = &sub_47C4A0; // weak
int (__stdcall *off_4BC120[26])(int) =
{
  &sub_47C5D0,
  &sub_47AD80,
  &sub_47C5D0,
  &sub_47ADA0,
  &sub_47C5D0,
  &sub_47AE20,
  &sub_47C630,
  &sub_47AE50,
  &sub_47C5D0,
  &sub_47AF80,
  &sub_47C5D0,
  &sub_47B000,
  &sub_47C5D0,
  &sub_47B050,
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC128[24])(int) =
{
  &sub_47C5D0,
  &sub_47ADA0,
  &sub_47C5D0,
  &sub_47AE20,
  &sub_47C630,
  &sub_47AE50,
  &sub_47C5D0,
  &sub_47AF80,
  &sub_47C5D0,
  &sub_47B000,
  &sub_47C5D0,
  &sub_47B050,
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC130[22])(int) =
{
  &sub_47C5D0,
  &sub_47AE20,
  &sub_47C630,
  &sub_47AE50,
  &sub_47C5D0,
  &sub_47AF80,
  &sub_47C5D0,
  &sub_47B000,
  &sub_47C5D0,
  &sub_47B050,
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC138[20])(int) =
{
  &sub_47C630,
  &sub_47AE50,
  &sub_47C5D0,
  &sub_47AF80,
  &sub_47C5D0,
  &sub_47B000,
  &sub_47C5D0,
  &sub_47B050,
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC140[18])(int) =
{
  &sub_47C5D0,
  &sub_47AF80,
  &sub_47C5D0,
  &sub_47B000,
  &sub_47C5D0,
  &sub_47B050,
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC148[16])(int) =
{
  &sub_47C5D0,
  &sub_47B000,
  &sub_47C5D0,
  &sub_47B050,
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC150[14])(int) =
{
  &sub_47C5D0,
  &sub_47B050,
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC158[12])(int) =
{
  &sub_47C5D0,
  &sub_47B0A0,
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC160[10])(int) =
{
  &sub_47C5D0,
  &sub_47B0C0,
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC168[8])(int) =
{
  &sub_47C5D0,
  &sub_47B0E0,
  &sub_47C5D0,
  &sub_47B1B0,
  &sub_47C5D0,
  &sub_47B1D0,
  &sub_47C5D0,
  &sub_47B1F0
}; // weak
int (__stdcall *off_4BC170[6])(int) = { &sub_47C5D0, &sub_47B1B0, &sub_47C5D0, &sub_47B1D0, &sub_47C5D0, &sub_47B1F0 }; // weak
int (__stdcall *off_4BC178[4])(int) = { &sub_47C5D0, &sub_47B1D0, &sub_47C5D0, &sub_47B1F0 }; // weak
int (__stdcall *off_4BC180[2])(int) = { &sub_47C5D0, &sub_47B1F0 }; // weak
int (__stdcall *off_4BC224)(int) = &sub_47ECA0; // weak
int (__stdcall *off_4BC240)(int) = &sub_47EEA0; // weak
int (__stdcall *off_4BC3F0)(int, int) = &sub_48D100; // weak
int (__stdcall *off_4BC440)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC490)(int, int) = &sub_481330; // weak
int (__stdcall *off_4BC4E0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC530)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC580)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC5D0)(int, int) = &sub_4819A0; // weak
int (__stdcall *off_4BC630)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC690)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC6F0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC750)(int, int) = &sub_4827E0; // weak
int (__stdcall *off_4BC7A0)(int, int) = &sub_4827E0; // weak
int (__stdcall *off_4BC7F0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC850)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC8B0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC910)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC970)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BC9D0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCA30)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCA90)(int, int) = &sub_4823E0; // weak
int (__stdcall *off_4BCAF0)(int, int) = &sub_482570; // weak
int (__stdcall *off_4BCB50)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCBB0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCC10)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCC70)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCCD0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCD30)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCD90)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCDF0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCE50)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCEB0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCF10)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCF70)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BCFD0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD030)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD090)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD0F0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD150)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD1C0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD230)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD2A0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD310)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD380)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD3F0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD460)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD4D0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD540)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD5B0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD620)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD690)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD700)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD770)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BD7E0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BD830)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BD888)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BD8E0)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BD938)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BD990)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BD9E8)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BDA40)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDA90)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDAE0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDB30)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDB80)(int, int) = &sub_4863B0; // weak
int (__stdcall *off_4BDBD0)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDC20)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDC70)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDCC0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BDD10)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDD60)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDDB0)(int, int) = &sub_486860; // weak
int (__stdcall *off_4BDE08)(int, int) = &sub_486860; // weak
int (__stdcall *off_4BDE60)(int, int) = &sub_486860; // weak
int (__stdcall *off_4BDEB8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDF08)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BDF58)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BDFA8)(int, int) = &sub_486E20; // weak
int (__stdcall *off_4BDFF8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE048)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE0A8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE108)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE168)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE1B8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE208)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE258)(int, int) = &sub_487900; // weak
int (__stdcall *off_4BE2A8)(int, int) = &sub_487B40; // weak
int (__stdcall *off_4BE2F8)(int, int) = &sub_487CF0; // weak
int (__stdcall *off_4BE348)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BE398)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE3E8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE438)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE488)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE4D8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE528)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BE578)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BE5C8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE618)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE668)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE6B8)(int, int) = &sub_485AE0; // weak
int (__stdcall *off_4BE708)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BE758)(int, int) = &sub_4827E0; // weak
int (__stdcall *off_4BE7A8)(int, int) = &sub_489320; // weak
int (__stdcall *off_4BE7F8)(int, int) = &sub_489550; // weak
int (__stdcall *off_4BE848)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BE898)(int, int) = &sub_4897F0; // weak
int (__stdcall *off_4BE8E8)(int, int) = &sub_489E10; // weak
int (__stdcall *off_4BE948)(int, int) = &sub_489A10; // weak
int (__stdcall *off_4BE9A8)(int, int) = &sub_489E10; // weak
int (__stdcall *off_4BEA08)(int, int) = &sub_489E10; // weak
int (__stdcall *off_4BEA68)(int, int) = &sub_489E10; // weak
int (__stdcall *off_4BEAC8)(int, int) = &sub_489E10; // weak
int (__stdcall *off_4BEB28)(int, int) = &sub_489FA0; // weak
int (__stdcall *off_4BEB88)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEBE8)(int, int) = &sub_48A0D0; // weak
int (__stdcall *off_4BEC48)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BECA8)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BED08)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BED68)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEDC8)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEE28)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEE88)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEEE8)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEF48)(int, int) = &sub_48A050; // weak
int (__stdcall *off_4BEFA8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF000)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF058)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF0B0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF108)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF160)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF1B8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF210)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF268)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF2C0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF318)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF370)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF3C8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF420)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF478)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF4D0)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF528)(int, int) = &sub_48B1A0; // weak
int (__stdcall *off_4BF588)(int, int) = &sub_48AE00; // weak
int (__stdcall *off_4BF5F8)(int, int) = &sub_48AE00; // weak
int (__stdcall *off_4BF648)(int, int) = &sub_48B1A0; // weak
int (__stdcall *off_4BF6A8)(int, int) = &sub_48B1A0; // weak
int (__stdcall *off_4BF708)(int, int) = &sub_48AE00; // weak
int (__stdcall *off_4BF758)(int, int) = &sub_48B1A0; // weak
int (__stdcall *off_4BF7B8)(int, int) = &sub_48B1A0; // weak
int (__stdcall *off_4BF808)(int, int) = &sub_48AE00; // weak
int (__stdcall *off_4BF858)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF8C8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF938)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BF9A8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFA18)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BFA68)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BFAB8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BFB08)(int, int) = &sub_489A10; // weak
int (__stdcall *off_4BFB68)(int, int) = &sub_489A10; // weak
int (__stdcall *off_4BFBC8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BFC38)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFCA8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFD18)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFD88)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFDF8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFE68)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4BFEB8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFF28)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4BFF98)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0008)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0068)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C00D8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0148)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C01B8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0218)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0268)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C02C8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0328)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0388)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C03E8)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0458)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C04C8)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0538)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0598)(int, int) = &sub_480E80; // weak
int (__stdcall *off_4C0608)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0678)(int, int) = &CMeshDefense::CanSkillUp; // weak
int (__stdcall *off_4C0934)(int) = &sub_493F60; // weak
int (__stdcall *off_4C0950)(int) = &sub_494400; // weak
int (__stdcall *off_4C0E08)(int) = &sub_496690; // weak
unsigned __int8 g_chEncodeCode[64][256] =
{
  {
    41u,
    44u,
    153u,
    99u,
    159u,
    141u,
    220u,
    254u,
    163u,
    170u,
    158u,
    74u,
    96u,
    245u,
    177u,
    73u,
    218u,
    63u,
    250u,
    102u,
    87u,
    84u,
    11u,
    157u,
    81u,
    171u,
    166u,
    77u,
    83u,
    107u,
    169u,
    150u,
    210u,
    10u,
    117u,
    192u,
    36u,
    247u,
    223u,
    38u,
    54u,
    116u,
    22u,
    106u,
    152u,
    217u,
    145u,
    26u,
    98u,
    72u,
    253u,
    133u,
    244u,
    27u,
    222u,
    212u,
    198u,
    193u,
    235u,
    160u,
    59u,
    48u,
    88u,
    136u,
    209u,
    226u,
    70u,
    15u,
    78u,
    202u,
    194u,
    61u,
    146u,
    101u,
    75u,
    31u,
    142u,
    5u,
    67u,
    65u,
    47u,
    103u,
    125u,
    251u,
    89u,
    151u,
    111u,
    221u,
    13u,
    34u,
    94u,
    147u,
    109u,
    14u,
    113u,
    168u,
    219u,
    52u,
    174u,
    187u,
    236u,
    228u,
    8u,
    195u,
    231u,
    33u,
    241u,
    45u,
    86u,
    128u,
    112u,
    79u,
    127u,
    71u,
    42u,
    55u,
    53u,
    3u,
    214u,
    123u,
    37u,
    1u,
    225u,
    216u,
    21u,
    17u,
    85u,
    104u,
    179u,
    233u,
    155u,
    238u,
    232u,
    68u,
    115u,
    119u,
    39u,
    131u,
    124u,
    246u,
    252u,
    93u,
    164u,
    203u,
    189u,
    28u,
    183u,
    66u,
    122u,
    19u,
    135u,
    80u,
    240u,
    6u,
    9u,
    76u,
    208u,
    24u,
    30u,
    156u,
    144u,
    46u,
    234u,
    35u,
    97u,
    224u,
    181u,
    121u,
    62u,
    190u,
    255u,
    108u,
    90u,
    167u,
    149u,
    148u,
    2u,
    23u,
    185u,
    227u,
    139u,
    239u,
    137u,
    180u,
    40u,
    105u,
    243u,
    143u,
    126u,
    7u,
    4u,
    242u,
    201u,
    110u,
    211u,
    118u,
    56u,
    57u,
    25u,
    172u,
    20u,
    176u,
    205u,
    182u,
    12u,
    51u,
    132u,
    154u,
    175u,
    173u,
    162u,
    213u,
    120u,
    184u,
    161u,
    95u,
    32u,
    0u,
    215u,
    60u,
    206u,
    130u,
    82u,
    69u,
    129u,
    207u,
    16u,
    197u,
    230u,
    64u,
    138u,
    92u,
    186u,
    196u,
    188u,
    91u,
    43u,
    237u,
    204u,
    100u,
    134u,
    114u,
    49u,
    199u,
    50u,
    191u,
    165u,
    18u,
    29u,
    140u,
    58u,
    200u,
    178u,
    248u,
    229u,
    249u
  },
  {
    36u,
    62u,
    123u,
    246u,
    161u,
    106u,
    25u,
    158u,
    47u,
    101u,
    40u,
    136u,
    84u,
    156u,
    131u,
    146u,
    174u,
    52u,
    67u,
    108u,
    120u,
    124u,
    31u,
    150u,
    231u,
    242u,
    187u,
    78u,
    0u,
    137u,
    23u,
    64u,
    14u,
    61u,
    236u,
    81u,
    180u,
    148u,
    102u,
    226u,
    241u,
    113u,
    200u,
    145u,
    15u,
    194u,
    94u,
    181u,
    34u,
    79u,
    216u,
    3u,
    160u,
    185u,
    50u,
    109u,
    162u,
    18u,
    190u,
    143u,
    147u,
    99u,
    201u,
    58u,
    183u,
    11u,
    12u,
    230u,
    1u,
    115u,
    198u,
    168u,
    251u,
    16u,
    225u,
    105u,
    126u,
    134u,
    250u,
    205u,
    196u,
    93u,
    118u,
    138u,
    152u,
    184u,
    125u,
    65u,
    234u,
    30u,
    121u,
    203u,
    140u,
    132u,
    89u,
    252u,
    49u,
    207u,
    163u,
    128u,
    112u,
    204u,
    214u,
    72u,
    199u,
    253u,
    98u,
    57u,
    173u,
    179u,
    157u,
    237u,
    202u,
    212u,
    182u,
    244u,
    169u,
    164u,
    240u,
    192u,
    248u,
    135u,
    165u,
    249u,
    127u,
    19u,
    229u,
    222u,
    130u,
    243u,
    104u,
    38u,
    245u,
    32u,
    68u,
    59u,
    85u,
    209u,
    107u,
    176u,
    139u,
    129u,
    5u,
    210u,
    35u,
    172u,
    217u,
    193u,
    28u,
    208u,
    178u,
    60u,
    53u,
    155u,
    254u,
    74u,
    227u,
    111u,
    82u,
    247u,
    77u,
    151u,
    4u,
    17u,
    33u,
    91u,
    233u,
    95u,
    41u,
    238u,
    149u,
    110u,
    24u,
    56u,
    86u,
    44u,
    45u,
    228u,
    211u,
    88u,
    220u,
    221u,
    197u,
    10u,
    51u,
    191u,
    223u,
    235u,
    100u,
    114u,
    195u,
    54u,
    71u,
    43u,
    83u,
    189u,
    70u,
    55u,
    166u,
    92u,
    22u,
    80u,
    29u,
    142u,
    87u,
    48u,
    6u,
    171u,
    75u,
    13u,
    232u,
    73u,
    39u,
    153u,
    215u,
    186u,
    63u,
    119u,
    103u,
    26u,
    206u,
    255u,
    117u,
    167u,
    188u,
    37u,
    177u,
    96u,
    116u,
    97u,
    27u,
    76u,
    21u,
    144u,
    122u,
    154u,
    141u,
    170u,
    175u,
    66u,
    224u,
    9u,
    69u,
    20u,
    239u,
    133u,
    7u,
    42u,
    8u,
    219u,
    159u,
    218u,
    213u,
    2u,
    46u,
    90u
  },
  {
    232u,
    105u,
    85u,
    82u,
    194u,
    212u,
    12u,
    186u,
    168u,
    24u,
    170u,
    228u,
    126u,
    221u,
    166u,
    193u,
    214u,
    235u,
    25u,
    136u,
    40u,
    17u,
    154u,
    226u,
    252u,
    146u,
    23u,
    42u,
    249u,
    231u,
    204u,
    229u,
    38u,
    109u,
    2u,
    153u,
    240u,
    135u,
    244u,
    54u,
    176u,
    121u,
    5u,
    57u,
    120u,
    152u,
    239u,
    79u,
    118u,
    207u,
    78u,
    70u,
    177u,
    122u,
    110u,
    90u,
    243u,
    200u,
    48u,
    191u,
    89u,
    202u,
    8u,
    80u,
    219u,
    100u,
    150u,
    62u,
    148u,
    20u,
    74u,
    218u,
    37u,
    241u,
    180u,
    10u,
    45u,
    175u,
    73u,
    185u,
    238u,
    133u,
    99u,
    254u,
    125u,
    173u,
    195u,
    77u,
    123u,
    93u,
    64u,
    39u,
    141u,
    131u,
    210u,
    209u,
    14u,
    127u,
    15u,
    95u,
    184u,
    55u,
    217u,
    174u,
    104u,
    160u,
    46u,
    92u,
    86u,
    139u,
    171u,
    206u,
    250u,
    101u,
    50u,
    22u,
    67u,
    227u,
    60u,
    30u,
    29u,
    149u,
    215u,
    223u,
    164u,
    115u,
    84u,
    3u,
    245u,
    222u,
    163u,
    94u,
    132u,
    0u,
    189u,
    103u,
    51u,
    134u,
    112u,
    142u,
    234u,
    7u,
    71u,
    182u,
    187u,
    198u,
    242u,
    87u,
    49u,
    28u,
    237u,
    21u,
    56u,
    236u,
    58u,
    26u,
    41u,
    114u,
    116u,
    9u,
    246u,
    201u,
    147u,
    69u,
    172u,
    91u,
    251u,
    1u,
    108u,
    179u,
    98u,
    203u,
    178u,
    161u,
    63u,
    144u,
    151u,
    31u,
    4u,
    162u,
    138u,
    128u,
    211u,
    208u,
    167u,
    224u,
    6u,
    65u,
    111u,
    220u,
    165u,
    197u,
    76u,
    253u,
    130u,
    119u,
    159u,
    196u,
    75u,
    59u,
    33u,
    192u,
    199u,
    35u,
    129u,
    43u,
    32u,
    169u,
    216u,
    53u,
    34u,
    97u,
    190u,
    188u,
    44u,
    107u,
    66u,
    72u,
    18u,
    183u,
    230u,
    156u,
    16u,
    213u,
    157u,
    96u,
    13u,
    247u,
    155u,
    88u,
    81u,
    145u,
    52u,
    117u,
    113u,
    137u,
    248u,
    205u,
    181u,
    36u,
    11u,
    143u,
    83u,
    68u,
    106u,
    61u,
    158u,
    255u,
    140u,
    19u,
    225u,
    47u,
    233u,
    27u,
    102u,
    124u
  },
  {
    68u,
    160u,
    153u,
    53u,
    61u,
    0u,
    4u,
    103u,
    225u,
    203u,
    59u,
    184u,
    131u,
    9u,
    31u,
    172u,
    146u,
    37u,
    198u,
    178u,
    88u,
    30u,
    22u,
    187u,
    101u,
    227u,
    151u,
    83u,
    99u,
    100u,
    64u,
    147u,
    84u,
    250u,
    185u,
    207u,
    161u,
    130u,
    42u,
    122u,
    74u,
    85u,
    162u,
    96u,
    87u,
    126u,
    50u,
    106u,
    169u,
    180u,
    44u,
    7u,
    58u,
    222u,
    80u,
    183u,
    166u,
    136u,
    2u,
    51u,
    16u,
    254u,
    23u,
    127u,
    33u,
    19u,
    138u,
    229u,
    205u,
    223u,
    11u,
    129u,
    29u,
    118u,
    239u,
    62u,
    3u,
    109u,
    70u,
    144u,
    17u,
    140u,
    56u,
    97u,
    49u,
    218u,
    190u,
    224u,
    28u,
    26u,
    27u,
    226u,
    91u,
    54u,
    35u,
    241u,
    110u,
    40u,
    176u,
    219u,
    210u,
    201u,
    155u,
    93u,
    213u,
    191u,
    237u,
    63u,
    15u,
    199u,
    220u,
    113u,
    134u,
    163u,
    24u,
    245u,
    196u,
    186u,
    125u,
    38u,
    194u,
    60u,
    231u,
    168u,
    236u,
    78u,
    148u,
    25u,
    92u,
    152u,
    158u,
    197u,
    135u,
    132u,
    116u,
    156u,
    89u,
    179u,
    143u,
    173u,
    121u,
    174u,
    72u,
    246u,
    252u,
    240u,
    75u,
    98u,
    34u,
    133u,
    119u,
    21u,
    115u,
    208u,
    102u,
    189u,
    255u,
    41u,
    141u,
    248u,
    204u,
    112u,
    217u,
    249u,
    167u,
    36u,
    76u,
    10u,
    123u,
    209u,
    232u,
    94u,
    45u,
    221u,
    165u,
    244u,
    79u,
    251u,
    8u,
    52u,
    32u,
    195u,
    211u,
    66u,
    192u,
    1u,
    81u,
    69u,
    230u,
    149u,
    18u,
    200u,
    233u,
    170u,
    14u,
    171u,
    142u,
    108u,
    238u,
    214u,
    247u,
    177u,
    67u,
    86u,
    202u,
    157u,
    228u,
    234u,
    150u,
    235u,
    175u,
    12u,
    215u,
    182u,
    90u,
    95u,
    164u,
    124u,
    137u,
    46u,
    128u,
    73u,
    111u,
    181u,
    55u,
    77u,
    13u,
    154u,
    243u,
    47u,
    120u,
    107u,
    139u,
    6u,
    206u,
    188u,
    20u,
    82u,
    145u,
    242u,
    212u,
    71u,
    159u,
    48u,
    39u,
    114u,
    216u,
    253u,
    104u,
    5u,
    43u,
    57u,
    105u,
    117u,
    65u,
    193u
  },
  {
    31u,
    62u,
    116u,
    68u,
    59u,
    148u,
    128u,
    217u,
    89u,
    67u,
    71u,
    109u,
    76u,
    228u,
    20u,
    138u,
    96u,
    82u,
    55u,
    218u,
    35u,
    175u,
    19u,
    181u,
    32u,
    25u,
    154u,
    253u,
    163u,
    156u,
    53u,
    160u,
    38u,
    233u,
    234u,
    11u,
    137u,
    23u,
    102u,
    64u,
    187u,
    3u,
    123u,
    15u,
    72u,
    164u,
    21u,
    212u,
    169u,
    182u,
    16u,
    152u,
    186u,
    242u,
    57u,
    97u,
    168u,
    243u,
    45u,
    86u,
    226u,
    6u,
    98u,
    215u,
    94u,
    183u,
    50u,
    225u,
    122u,
    139u,
    85u,
    26u,
    214u,
    134u,
    42u,
    84u,
    39u,
    60u,
    151u,
    101u,
    65u,
    170u,
    209u,
    155u,
    73u,
    124u,
    224u,
    17u,
    108u,
    167u,
    129u,
    130u,
    149u,
    165u,
    112u,
    114u,
    63u,
    143u,
    189u,
    240u,
    100u,
    30u,
    104u,
    27u,
    204u,
    221u,
    237u,
    18u,
    135u,
    180u,
    36u,
    14u,
    159u,
    93u,
    2u,
    184u,
    202u,
    70u,
    153u,
    185u,
    52u,
    190u,
    80u,
    90u,
    174u,
    28u,
    103u,
    54u,
    113u,
    106u,
    78u,
    231u,
    83u,
    200u,
    193u,
    117u,
    161u,
    120u,
    29u,
    210u,
    144u,
    107u,
    118u,
    41u,
    150u,
    252u,
    125u,
    249u,
    213u,
    69u,
    235u,
    207u,
    8u,
    177u,
    166u,
    247u,
    219u,
    157u,
    10u,
    244u,
    198u,
    222u,
    211u,
    115u,
    201u,
    172u,
    206u,
    74u,
    140u,
    197u,
    99u,
    232u,
    227u,
    250u,
    245u,
    4u,
    56u,
    158u,
    7u,
    88u,
    145u,
    192u,
    205u,
    49u,
    46u,
    34u,
    179u,
    127u,
    91u,
    147u,
    136u,
    230u,
    255u,
    194u,
    188u,
    9u,
    223u,
    43u,
    12u,
    87u,
    33u,
    121u,
    37u,
    178u,
    229u,
    126u,
    162u,
    248u,
    216u,
    5u,
    1u,
    254u,
    79u,
    195u,
    119u,
    44u,
    146u,
    133u,
    142u,
    173u,
    241u,
    171u,
    66u,
    236u,
    239u,
    246u,
    81u,
    22u,
    110u,
    220u,
    58u,
    141u,
    24u,
    48u,
    77u,
    111u,
    40u,
    208u,
    196u,
    203u,
    131u,
    251u,
    95u,
    92u,
    238u,
    61u,
    0u,
    132u,
    199u,
    13u,
    75u,
    105u,
    47u,
    176u,
    191u,
    51u
  },
  {
    153u,
    249u,
    226u,
    180u,
    157u,
    225u,
    118u,
    57u,
    81u,
    4u,
    179u,
    20u,
    149u,
    42u,
    80u,
    239u,
    29u,
    155u,
    243u,
    22u,
    46u,
    62u,
    199u,
    183u,
    244u,
    215u,
    28u,
    79u,
    111u,
    187u,
    217u,
    195u,
    25u,
    108u,
    174u,
    178u,
    134u,
    26u,
    89u,
    9u,
    218u,
    11u,
    23u,
    3u,
    194u,
    106u,
    253u,
    216u,
    119u,
    121u,
    213u,
    14u,
    59u,
    48u,
    101u,
    69u,
    2u,
    165u,
    71u,
    56u,
    212u,
    18u,
    228u,
    54u,
    200u,
    230u,
    84u,
    237u,
    88u,
    123u,
    190u,
    185u,
    176u,
    117u,
    78u,
    128u,
    27u,
    17u,
    229u,
    1u,
    192u,
    224u,
    203u,
    99u,
    53u,
    103u,
    77u,
    177u,
    126u,
    66u,
    43u,
    133u,
    52u,
    132u,
    241u,
    110u,
    210u,
    129u,
    55u,
    182u,
    34u,
    242u,
    151u,
    175u,
    113u,
    125u,
    12u,
    114u,
    205u,
    115u,
    83u,
    124u,
    60u,
    232u,
    104u,
    95u,
    198u,
    130u,
    85u,
    197u,
    37u,
    82u,
    127u,
    154u,
    146u,
    207u,
    100u,
    102u,
    39u,
    116u,
    93u,
    10u,
    7u,
    35u,
    184u,
    235u,
    38u,
    246u,
    16u,
    161u,
    245u,
    31u,
    76u,
    167u,
    144u,
    209u,
    142u,
    156u,
    6u,
    191u,
    63u,
    75u,
    87u,
    159u,
    122u,
    254u,
    109u,
    148u,
    15u,
    41u,
    36u,
    145u,
    64u,
    8u,
    105u,
    73u,
    238u,
    152u,
    150u,
    44u,
    255u,
    250u,
    169u,
    247u,
    160u,
    138u,
    204u,
    163u,
    251u,
    196u,
    219u,
    141u,
    139u,
    92u,
    220u,
    227u,
    58u,
    120u,
    21u,
    171u,
    240u,
    40u,
    236u,
    96u,
    90u,
    97u,
    158u,
    172u,
    166u,
    91u,
    19u,
    189u,
    223u,
    168u,
    98u,
    162u,
    67u,
    170u,
    231u,
    173u,
    208u,
    135u,
    47u,
    50u,
    107u,
    136u,
    193u,
    24u,
    32u,
    5u,
    30u,
    61u,
    137u,
    51u,
    186u,
    72u,
    164u,
    143u,
    131u,
    86u,
    68u,
    181u,
    201u,
    45u,
    0u,
    188u,
    221u,
    147u,
    140u,
    13u,
    94u,
    214u,
    252u,
    70u,
    112u,
    65u,
    202u,
    211u,
    206u,
    233u,
    74u,
    49u,
    33u,
    248u,
    234u,
    222u
  },
  {
    126u,
    74u,
    35u,
    205u,
    65u,
    89u,
    91u,
    101u,
    83u,
    103u,
    174u,
    144u,
    30u,
    145u,
    48u,
    183u,
    156u,
    210u,
    128u,
    99u,
    18u,
    176u,
    61u,
    223u,
    116u,
    159u,
    200u,
    141u,
    60u,
    117u,
    19u,
    73u,
    166u,
    233u,
    133u,
    123u,
    26u,
    252u,
    208u,
    125u,
    43u,
    243u,
    32u,
    37u,
    81u,
    15u,
    236u,
    239u,
    21u,
    201u,
    251u,
    78u,
    8u,
    120u,
    140u,
    5u,
    129u,
    228u,
    97u,
    139u,
    96u,
    75u,
    14u,
    72u,
    198u,
    160u,
    222u,
    181u,
    170u,
    137u,
    161u,
    185u,
    106u,
    85u,
    248u,
    112u,
    225u,
    132u,
    95u,
    134u,
    217u,
    36u,
    34u,
    130u,
    109u,
    230u,
    25u,
    10u,
    121u,
    40u,
    57u,
    211u,
    188u,
    39u,
    168u,
    175u,
    6u,
    167u,
    46u,
    199u,
    86u,
    53u,
    76u,
    79u,
    135u,
    45u,
    118u,
    249u,
    84u,
    218u,
    187u,
    87u,
    100u,
    165u,
    66u,
    221u,
    94u,
    224u,
    219u,
    172u,
    58u,
    242u,
    28u,
    52u,
    146u,
    49u,
    158u,
    178u,
    179u,
    136u,
    41u,
    59u,
    237u,
    244u,
    7u,
    227u,
    90u,
    9u,
    238u,
    92u,
    194u,
    102u,
    148u,
    254u,
    189u,
    229u,
    250u,
    13u,
    54u,
    190u,
    180u,
    214u,
    246u,
    149u,
    111u,
    104u,
    80u,
    162u,
    88u,
    191u,
    122u,
    68u,
    119u,
    182u,
    203u,
    67u,
    63u,
    212u,
    62u,
    154u,
    29u,
    173u,
    196u,
    231u,
    16u,
    42u,
    245u,
    17u,
    204u,
    234u,
    77u,
    20u,
    138u,
    11u,
    240u,
    33u,
    50u,
    235u,
    107u,
    247u,
    169u,
    24u,
    153u,
    44u,
    98u,
    184u,
    110u,
    127u,
    147u,
    124u,
    4u,
    226u,
    131u,
    207u,
    69u,
    255u,
    55u,
    215u,
    151u,
    193u,
    93u,
    143u,
    202u,
    12u,
    70u,
    216u,
    56u,
    115u,
    71u,
    64u,
    177u,
    253u,
    171u,
    2u,
    213u,
    195u,
    142u,
    152u,
    1u,
    0u,
    220u,
    22u,
    163u,
    47u,
    108u,
    114u,
    155u,
    3u,
    51u,
    23u,
    82u,
    192u,
    27u,
    232u,
    164u,
    209u,
    113u,
    186u,
    31u,
    150u,
    105u,
    157u,
    38u,
    197u,
    241u,
    206u
  },
  {
    56u,
    3u,
    196u,
    117u,
    14u,
    199u,
    240u,
    148u,
    122u,
    75u,
    188u,
    67u,
    25u,
    220u,
    129u,
    192u,
    201u,
    58u,
    167u,
    181u,
    18u,
    221u,
    140u,
    151u,
    153u,
    250u,
    68u,
    227u,
    126u,
    184u,
    82u,
    54u,
    215u,
    213u,
    70u,
    19u,
    223u,
    121u,
    119u,
    233u,
    200u,
    204u,
    109u,
    232u,
    145u,
    48u,
    149u,
    244u,
    120u,
    108u,
    39u,
    123u,
    87u,
    30u,
    222u,
    136u,
    88u,
    133u,
    4u,
    166u,
    86u,
    73u,
    154u,
    2u,
    46u,
    238u,
    66u,
    225u,
    131u,
    13u,
    241u,
    135u,
    72u,
    218u,
    132u,
    63u,
    230u,
    79u,
    41u,
    38u,
    161u,
    209u,
    34u,
    150u,
    53u,
    163u,
    219u,
    234u,
    138u,
    144u,
    235u,
    226u,
    17u,
    124u,
    100u,
    115u,
    183u,
    92u,
    97u,
    231u,
    101u,
    76u,
    59u,
    127u,
    105u,
    125u,
    175u,
    165u,
    61u,
    193u,
    249u,
    162u,
    55u,
    187u,
    203u,
    28u,
    103u,
    251u,
    247u,
    137u,
    178u,
    118u,
    21u,
    74u,
    152u,
    98u,
    71u,
    35u,
    78u,
    214u,
    160u,
    81u,
    114u,
    24u,
    93u,
    45u,
    164u,
    110u,
    69u,
    185u,
    85u,
    51u,
    189u,
    40u,
    104u,
    217u,
    42u,
    207u,
    57u,
    15u,
    95u,
    83u,
    176u,
    198u,
    229u,
    179u,
    8u,
    20u,
    37u,
    5u,
    134u,
    9u,
    195u,
    139u,
    197u,
    156u,
    6u,
    29u,
    116u,
    157u,
    143u,
    12u,
    168u,
    190u,
    16u,
    146u,
    94u,
    252u,
    158u,
    43u,
    216u,
    246u,
    248u,
    237u,
    243u,
    173u,
    65u,
    211u,
    77u,
    60u,
    142u,
    191u,
    36u,
    90u,
    205u,
    27u,
    208u,
    169u,
    64u,
    10u,
    99u,
    32u,
    49u,
    141u,
    147u,
    106u,
    33u,
    236u,
    212u,
    206u,
    80u,
    52u,
    44u,
    23u,
    62u,
    171u,
    210u,
    112u,
    50u,
    159u,
    255u,
    84u,
    170u,
    253u,
    254u,
    224u,
    113u,
    245u,
    194u,
    239u,
    182u,
    1u,
    202u,
    7u,
    228u,
    89u,
    96u,
    130u,
    172u,
    22u,
    111u,
    31u,
    186u,
    11u,
    180u,
    128u,
    155u,
    91u,
    107u,
    242u,
    47u,
    102u,
    177u,
    0u,
    26u,
    174u
  },
  {
    209u,
    59u,
    216u,
    92u,
    140u,
    215u,
    118u,
    185u,
    99u,
    176u,
    11u,
    182u,
    166u,
    42u,
    66u,
    6u,
    30u,
    252u,
    115u,
    82u,
    41u,
    8u,
    165u,
    60u,
    80u,
    116u,
    255u,
    37u,
    64u,
    71u,
    193u,
    227u,
    149u,
    217u,
    139u,
    34u,
    75u,
    103u,
    5u,
    148u,
    97u,
    27u,
    56u,
    28u,
    73u,
    219u,
    221u,
    152u,
    112u,
    88u,
    214u,
    129u,
    53u,
    188u,
    90u,
    211u,
    52u,
    107u,
    101u,
    31u,
    244u,
    132u,
    29u,
    122u,
    69u,
    84u,
    78u,
    24u,
    20u,
    192u,
    57u,
    72u,
    100u,
    58u,
    119u,
    143u,
    35u,
    174u,
    111u,
    213u,
    47u,
    159u,
    131u,
    2u,
    108u,
    85u,
    198u,
    93u,
    253u,
    124u,
    207u,
    146u,
    23u,
    68u,
    120u,
    36u,
    224u,
    168u,
    232u,
    65u,
    233u,
    204u,
    154u,
    241u,
    12u,
    251u,
    1u,
    123u,
    54u,
    142u,
    220u,
    133u,
    242u,
    14u,
    181u,
    206u,
    238u,
    150u,
    187u,
    43u,
    173u,
    33u,
    254u,
    16u,
    145u,
    63u,
    156u,
    15u,
    208u,
    127u,
    32u,
    22u,
    77u,
    160u,
    40u,
    126u,
    245u,
    94u,
    239u,
    105u,
    184u,
    117u,
    229u,
    234u,
    83u,
    247u,
    3u,
    231u,
    189u,
    19u,
    55u,
    98u,
    114u,
    250u,
    195u,
    197u,
    226u,
    0u,
    190u,
    141u,
    38u,
    240u,
    51u,
    125u,
    102u,
    87u,
    128u,
    4u,
    225u,
    109u,
    95u,
    67u,
    17u,
    212u,
    147u,
    228u,
    202u,
    50u,
    39u,
    164u,
    137u,
    236u,
    203u,
    136u,
    237u,
    175u,
    113u,
    194u,
    62u,
    200u,
    9u,
    25u,
    155u,
    138u,
    26u,
    135u,
    172u,
    191u,
    70u,
    79u,
    96u,
    151u,
    91u,
    243u,
    170u,
    199u,
    183u,
    223u,
    235u,
    201u,
    171u,
    157u,
    130u,
    13u,
    169u,
    186u,
    49u,
    153u,
    230u,
    218u,
    248u,
    222u,
    134u,
    177u,
    210u,
    121u,
    18u,
    249u,
    86u,
    45u,
    246u,
    196u,
    46u,
    89u,
    178u,
    76u,
    106u,
    44u,
    163u,
    167u,
    21u,
    74u,
    7u,
    158u,
    162u,
    10u,
    110u,
    179u,
    104u,
    48u,
    144u,
    81u,
    61u,
    180u,
    205u,
    161u
  },
  {
    50u,
    41u,
    78u,
    27u,
    62u,
    147u,
    190u,
    56u,
    120u,
    209u,
    32u,
    84u,
    224u,
    142u,
    228u,
    26u,
    51u,
    143u,
    222u,
    233u,
    161u,
    238u,
    85u,
    151u,
    225u,
    252u,
    195u,
    248u,
    48u,
    133u,
    74u,
    192u,
    172u,
    137u,
    70u,
    184u,
    105u,
    136u,
    226u,
    72u,
    157u,
    129u,
    240u,
    146u,
    169u,
    103u,
    19u,
    38u,
    116u,
    149u,
    208u,
    121u,
    234u,
    220u,
    125u,
    43u,
    246u,
    20u,
    114u,
    205u,
    65u,
    73u,
    66u,
    95u,
    177u,
    79u,
    176u,
    39u,
    63u,
    171u,
    204u,
    83u,
    131u,
    71u,
    178u,
    117u,
    123u,
    44u,
    154u,
    186u,
    90u,
    247u,
    21u,
    167u,
    3u,
    126u,
    61u,
    148u,
    59u,
    119u,
    162u,
    53u,
    49u,
    68u,
    218u,
    76u,
    16u,
    236u,
    198u,
    112u,
    165u,
    191u,
    170u,
    237u,
    173u,
    152u,
    197u,
    55u,
    107u,
    243u,
    163u,
    199u,
    244u,
    5u,
    155u,
    22u,
    110u,
    235u,
    24u,
    230u,
    77u,
    69u,
    203u,
    132u,
    7u,
    216u,
    35u,
    182u,
    124u,
    138u,
    52u,
    156u,
    29u,
    206u,
    104u,
    81u,
    241u,
    14u,
    10u,
    11u,
    98u,
    174u,
    54u,
    102u,
    99u,
    217u,
    239u,
    254u,
    212u,
    97u,
    134u,
    166u,
    46u,
    4u,
    150u,
    194u,
    111u,
    200u,
    45u,
    175u,
    109u,
    1u,
    115u,
    185u,
    210u,
    88u,
    141u,
    140u,
    202u,
    164u,
    223u,
    160u,
    181u,
    250u,
    17u,
    242u,
    94u,
    227u,
    91u,
    36u,
    58u,
    135u,
    153u,
    0u,
    33u,
    80u,
    87u,
    100u,
    28u,
    219u,
    92u,
    57u,
    108u,
    96u,
    232u,
    67u,
    13u,
    189u,
    34u,
    168u,
    253u,
    215u,
    42u,
    60u,
    139u,
    47u,
    221u,
    130u,
    196u,
    113u,
    86u,
    25u,
    31u,
    127u,
    12u,
    158u,
    23u,
    245u,
    106u,
    187u,
    201u,
    118u,
    144u,
    207u,
    82u,
    179u,
    213u,
    145u,
    211u,
    183u,
    255u,
    18u,
    30u,
    9u,
    188u,
    128u,
    75u,
    89u,
    37u,
    101u,
    159u,
    40u,
    2u,
    122u,
    251u,
    231u,
    93u,
    214u,
    8u,
    193u,
    229u,
    6u,
    180u,
    249u,
    15u,
    64u
  },
  {
    108u,
    161u,
    230u,
    252u,
    189u,
    192u,
    27u,
    29u,
    188u,
    4u,
    32u,
    143u,
    152u,
    38u,
    5u,
    93u,
    162u,
    233u,
    240u,
    121u,
    210u,
    203u,
    25u,
    72u,
    211u,
    111u,
    112u,
    226u,
    185u,
    213u,
    51u,
    99u,
    250u,
    180u,
    191u,
    194u,
    182u,
    109u,
    126u,
    82u,
    202u,
    84u,
    47u,
    39u,
    241u,
    18u,
    1u,
    142u,
    228u,
    127u,
    174u,
    12u,
    129u,
    128u,
    96u,
    53u,
    148u,
    122u,
    144u,
    165u,
    164u,
    116u,
    9u,
    248u,
    80u,
    231u,
    147u,
    216u,
    247u,
    40u,
    13u,
    146u,
    207u,
    166u,
    221u,
    104u,
    92u,
    160u,
    48u,
    50u,
    52u,
    181u,
    197u,
    124u,
    67u,
    62u,
    6u,
    31u,
    87u,
    85u,
    107u,
    91u,
    251u,
    219u,
    119u,
    105u,
    237u,
    153u,
    54u,
    133u,
    100u,
    168u,
    136u,
    115u,
    255u,
    179u,
    220u,
    55u,
    120u,
    243u,
    42u,
    208u,
    63u,
    158u,
    215u,
    59u,
    28u,
    131u,
    154u,
    172u,
    205u,
    218u,
    2u,
    238u,
    242u,
    106u,
    254u,
    70u,
    76u,
    227u,
    30u,
    244u,
    139u,
    73u,
    167u,
    7u,
    249u,
    118u,
    223u,
    37u,
    19u,
    245u,
    65u,
    95u,
    78u,
    22u,
    217u,
    198u,
    15u,
    43u,
    41u,
    224u,
    176u,
    201u,
    44u,
    102u,
    130u,
    89u,
    33u,
    171u,
    232u,
    60u,
    163u,
    229u,
    98u,
    140u,
    132u,
    150u,
    79u,
    214u,
    190u,
    113u,
    156u,
    90u,
    169u,
    61u,
    175u,
    236u,
    145u,
    199u,
    26u,
    184u,
    246u,
    141u,
    234u,
    239u,
    101u,
    200u,
    173u,
    178u,
    46u,
    134u,
    155u,
    66u,
    212u,
    71u,
    68u,
    74u,
    94u,
    110u,
    159u,
    170u,
    11u,
    125u,
    97u,
    157u,
    225u,
    75u,
    253u,
    151u,
    193u,
    45u,
    20u,
    14u,
    123u,
    149u,
    103u,
    222u,
    196u,
    24u,
    135u,
    86u,
    187u,
    117u,
    183u,
    0u,
    209u,
    17u,
    138u,
    49u,
    114u,
    204u,
    36u,
    16u,
    137u,
    206u,
    64u,
    69u,
    77u,
    3u,
    8u,
    21u,
    57u,
    34u,
    195u,
    186u,
    10u,
    35u,
    58u,
    23u,
    56u,
    81u,
    83u,
    88u,
    235u,
    177u
  },
  {
    97u,
    167u,
    52u,
    50u,
    54u,
    4u,
    103u,
    48u,
    18u,
    71u,
    108u,
    126u,
    62u,
    177u,
    166u,
    12u,
    47u,
    170u,
    114u,
    198u,
    215u,
    55u,
    33u,
    172u,
    247u,
    15u,
    64u,
    238u,
    46u,
    57u,
    16u,
    221u,
    73u,
    128u,
    28u,
    137u,
    85u,
    203u,
    228u,
    8u,
    171u,
    192u,
    72u,
    58u,
    67u,
    98u,
    191u,
    94u,
    224u,
    80u,
    164u,
    254u,
    169u,
    69u,
    91u,
    93u,
    109u,
    212u,
    2u,
    56u,
    132u,
    145u,
    233u,
    143u,
    201u,
    53u,
    42u,
    185u,
    125u,
    206u,
    76u,
    44u,
    242u,
    253u,
    88u,
    223u,
    105u,
    235u,
    131u,
    20u,
    116u,
    182u,
    202u,
    1u,
    162u,
    31u,
    252u,
    230u,
    199u,
    22u,
    104u,
    129u,
    204u,
    244u,
    86u,
    36u,
    207u,
    13u,
    70u,
    38u,
    14u,
    200u,
    138u,
    251u,
    196u,
    161u,
    234u,
    155u,
    176u,
    181u,
    209u,
    17u,
    246u,
    156u,
    24u,
    141u,
    189u,
    150u,
    135u,
    183u,
    142u,
    190u,
    120u,
    7u,
    117u,
    102u,
    148u,
    106u,
    34u,
    32u,
    236u,
    30u,
    218u,
    118u,
    136u,
    205u,
    153u,
    59u,
    139u,
    0u,
    160u,
    122u,
    248u,
    237u,
    115u,
    180u,
    89u,
    158u,
    23u,
    245u,
    60u,
    154u,
    186u,
    113u,
    124u,
    49u,
    27u,
    220u,
    66u,
    250u,
    5u,
    217u,
    210u,
    25u,
    79u,
    39u,
    163u,
    40u,
    127u,
    249u,
    123u,
    11u,
    61u,
    195u,
    21u,
    241u,
    3u,
    225u,
    165u,
    26u,
    157u,
    87u,
    107u,
    19u,
    119u,
    240u,
    78u,
    173u,
    208u,
    184u,
    95u,
    41u,
    147u,
    96u,
    65u,
    83u,
    255u,
    100u,
    43u,
    111u,
    232u,
    174u,
    134u,
    149u,
    77u,
    130u,
    231u,
    75u,
    152u,
    151u,
    82u,
    144u,
    179u,
    197u,
    219u,
    6u,
    35u,
    159u,
    187u,
    178u,
    112u,
    193u,
    226u,
    110u,
    188u,
    214u,
    229u,
    9u,
    10u,
    168u,
    101u,
    92u,
    90u,
    133u,
    227u,
    29u,
    211u,
    63u,
    216u,
    84u,
    194u,
    222u,
    99u,
    74u,
    140u,
    243u,
    239u,
    81u,
    213u,
    175u,
    146u,
    121u,
    51u,
    37u,
    45u,
    68u
  },
  {
    218u,
    173u,
    144u,
    28u,
    57u,
    32u,
    80u,
    226u,
    229u,
    29u,
    249u,
    205u,
    103u,
    23u,
    108u,
    190u,
    250u,
    38u,
    198u,
    128u,
    52u,
    93u,
    96u,
    90u,
    159u,
    61u,
    150u,
    60u,
    127u,
    136u,
    71u,
    15u,
    122u,
    87u,
    110u,
    236u,
    74u,
    149u,
    166u,
    11u,
    112u,
    195u,
    69u,
    3u,
    147u,
    177u,
    85u,
    12u,
    101u,
    47u,
    139u,
    30u,
    243u,
    228u,
    163u,
    187u,
    174u,
    89u,
    232u,
    225u,
    211u,
    178u,
    151u,
    59u,
    98u,
    192u,
    24u,
    1u,
    46u,
    49u,
    206u,
    154u,
    27u,
    207u,
    126u,
    176u,
    133u,
    45u,
    31u,
    117u,
    50u,
    18u,
    102u,
    203u,
    111u,
    58u,
    255u,
    6u,
    77u,
    107u,
    88u,
    155u,
    167u,
    118u,
    170u,
    75u,
    121u,
    36u,
    169u,
    222u,
    135u,
    251u,
    186u,
    202u,
    37u,
    148u,
    141u,
    63u,
    67u,
    113u,
    241u,
    124u,
    156u,
    62u,
    64u,
    199u,
    252u,
    171u,
    8u,
    142u,
    41u,
    9u,
    253u,
    115u,
    137u,
    153u,
    197u,
    234u,
    210u,
    81u,
    48u,
    184u,
    92u,
    40u,
    20u,
    168u,
    70u,
    14u,
    160u,
    219u,
    125u,
    83u,
    214u,
    230u,
    134u,
    109u,
    5u,
    42u,
    132u,
    181u,
    179u,
    191u,
    138u,
    79u,
    157u,
    25u,
    221u,
    246u,
    238u,
    104u,
    10u,
    84u,
    39u,
    223u,
    114u,
    233u,
    235u,
    164u,
    242u,
    254u,
    172u,
    209u,
    212u,
    227u,
    13u,
    19u,
    193u,
    86u,
    73u,
    180u,
    123u,
    245u,
    26u,
    55u,
    119u,
    4u,
    204u,
    33u,
    143u,
    231u,
    105u,
    53u,
    76u,
    158u,
    216u,
    247u,
    43u,
    66u,
    54u,
    131u,
    244u,
    220u,
    95u,
    82u,
    44u,
    35u,
    146u,
    194u,
    130u,
    99u,
    188u,
    145u,
    106u,
    213u,
    56u,
    68u,
    17u,
    116u,
    91u,
    100u,
    0u,
    78u,
    152u,
    189u,
    16u,
    22u,
    94u,
    240u,
    161u,
    21u,
    129u,
    175u,
    248u,
    239u,
    34u,
    97u,
    7u,
    162u,
    165u,
    182u,
    201u,
    72u,
    65u,
    185u,
    200u,
    224u,
    237u,
    196u,
    51u,
    120u,
    2u,
    217u,
    215u,
    183u,
    208u,
    140u
  },
  {
    111u,
    241u,
    92u,
    17u,
    188u,
    177u,
    164u,
    226u,
    185u,
    124u,
    43u,
    199u,
    223u,
    161u,
    225u,
    209u,
    74u,
    10u,
    25u,
    179u,
    167u,
    166u,
    137u,
    145u,
    14u,
    2u,
    155u,
    189u,
    53u,
    31u,
    4u,
    162u,
    90u,
    35u,
    253u,
    18u,
    88u,
    9u,
    210u,
    16u,
    213u,
    28u,
    255u,
    107u,
    59u,
    8u,
    87u,
    234u,
    49u,
    134u,
    105u,
    212u,
    83u,
    45u,
    228u,
    197u,
    180u,
    206u,
    81u,
    96u,
    125u,
    133u,
    158u,
    132u,
    29u,
    99u,
    95u,
    97u,
    76u,
    240u,
    236u,
    91u,
    42u,
    120u,
    65u,
    117u,
    231u,
    191u,
    98u,
    82u,
    215u,
    21u,
    169u,
    151u,
    103u,
    23u,
    174u,
    247u,
    221u,
    201u,
    163u,
    27u,
    154u,
    70u,
    238u,
    68u,
    11u,
    211u,
    130u,
    0u,
    113u,
    122u,
    222u,
    248u,
    146u,
    85u,
    48u,
    194u,
    80u,
    119u,
    108u,
    138u,
    123u,
    40u,
    165u,
    129u,
    63u,
    44u,
    6u,
    143u,
    128u,
    249u,
    71u,
    244u,
    170u,
    46u,
    30u,
    171u,
    19u,
    190u,
    237u,
    239u,
    24u,
    100u,
    114u,
    149u,
    196u,
    229u,
    1u,
    106u,
    198u,
    64u,
    153u,
    152u,
    243u,
    61u,
    157u,
    54u,
    121u,
    118u,
    89u,
    147u,
    77u,
    250u,
    205u,
    12u,
    216u,
    159u,
    173u,
    78u,
    160u,
    127u,
    175u,
    141u,
    233u,
    102u,
    86u,
    178u,
    207u,
    224u,
    38u,
    200u,
    183u,
    230u,
    219u,
    66u,
    227u,
    168u,
    47u,
    93u,
    51u,
    156u,
    144u,
    251u,
    32u,
    57u,
    140u,
    208u,
    36u,
    3u,
    220u,
    34u,
    26u,
    218u,
    13u,
    182u,
    135u,
    184u,
    193u,
    116u,
    94u,
    214u,
    15u,
    58u,
    235u,
    101u,
    150u,
    55u,
    203u,
    5u,
    126u,
    67u,
    39u,
    142u,
    73u,
    139u,
    195u,
    56u,
    204u,
    217u,
    109u,
    62u,
    245u,
    176u,
    187u,
    84u,
    172u,
    192u,
    33u,
    7u,
    112u,
    110u,
    37u,
    186u,
    202u,
    246u,
    72u,
    22u,
    20u,
    242u,
    75u,
    136u,
    52u,
    254u,
    252u,
    60u,
    115u,
    79u,
    131u,
    104u,
    69u,
    50u,
    148u,
    41u,
    232u,
    181u
  },
  {
    107u,
    163u,
    213u,
    223u,
    140u,
    169u,
    1u,
    28u,
    30u,
    172u,
    131u,
    217u,
    106u,
    53u,
    239u,
    0u,
    210u,
    166u,
    50u,
    247u,
    190u,
    251u,
    156u,
    121u,
    59u,
    29u,
    36u,
    60u,
    230u,
    174u,
    70u,
    4u,
    171u,
    41u,
    108u,
    134u,
    229u,
    184u,
    175u,
    234u,
    146u,
    126u,
    7u,
    123u,
    236u,
    18u,
    202u,
    10u,
    168u,
    250u,
    116u,
    24u,
    97u,
    155u,
    117u,
    38u,
    34u,
    81u,
    206u,
    136u,
    248u,
    161u,
    167u,
    103u,
    21u,
    13u,
    235u,
    89u,
    221u,
    142u,
    137u,
    46u,
    105u,
    151u,
    178u,
    208u,
    194u,
    186u,
    118u,
    141u,
    157u,
    86u,
    150u,
    110u,
    45u,
    26u,
    40u,
    2u,
    122u,
    65u,
    56u,
    159u,
    9u,
    222u,
    51u,
    227u,
    224u,
    3u,
    152u,
    72u,
    180u,
    15u,
    109u,
    62u,
    125u,
    135u,
    96u,
    75u,
    87u,
    64u,
    71u,
    90u,
    255u,
    23u,
    225u,
    11u,
    69u,
    84u,
    5u,
    66u,
    143u,
    128u,
    22u,
    240u,
    101u,
    170u,
    114u,
    214u,
    42u,
    83u,
    98u,
    127u,
    35u,
    73u,
    148u,
    198u,
    188u,
    196u,
    74u,
    237u,
    160u,
    17u,
    211u,
    173u,
    12u,
    16u,
    25u,
    158u,
    58u,
    253u,
    246u,
    238u,
    100u,
    111u,
    200u,
    244u,
    154u,
    189u,
    37u,
    182u,
    228u,
    63u,
    218u,
    233u,
    54u,
    93u,
    132u,
    68u,
    76u,
    226u,
    48u,
    94u,
    43u,
    201u,
    133u,
    245u,
    183u,
    31u,
    88u,
    220u,
    232u,
    20u,
    27u,
    139u,
    55u,
    124u,
    252u,
    149u,
    215u,
    8u,
    82u,
    145u,
    85u,
    187u,
    6u,
    207u,
    212u,
    193u,
    231u,
    181u,
    249u,
    164u,
    79u,
    243u,
    195u,
    39u,
    162u,
    92u,
    80u,
    129u,
    99u,
    241u,
    191u,
    78u,
    144u,
    242u,
    219u,
    254u,
    102u,
    95u,
    147u,
    47u,
    57u,
    19u,
    177u,
    61u,
    67u,
    44u,
    192u,
    204u,
    52u,
    49u,
    130u,
    199u,
    185u,
    33u,
    112u,
    138u,
    14u,
    203u,
    115u,
    179u,
    119u,
    153u,
    104u,
    197u,
    77u,
    120u,
    113u,
    216u,
    91u,
    32u,
    209u,
    176u,
    205u,
    165u
  },
  {
    59u,
    238u,
    94u,
    189u,
    146u,
    132u,
    192u,
    220u,
    91u,
    16u,
    121u,
    235u,
    17u,
    254u,
    106u,
    195u,
    85u,
    56u,
    233u,
    242u,
    169u,
    1u,
    0u,
    222u,
    27u,
    31u,
    26u,
    38u,
    110u,
    62u,
    11u,
    144u,
    107u,
    217u,
    140u,
    186u,
    35u,
    64u,
    83u,
    232u,
    136u,
    172u,
    224u,
    76u,
    162u,
    98u,
    175u,
    15u,
    141u,
    33u,
    60u,
    226u,
    2u,
    205u,
    108u,
    176u,
    245u,
    88u,
    97u,
    127u,
    248u,
    228u,
    154u,
    69u,
    51u,
    179u,
    182u,
    101u,
    40u,
    241u,
    240u,
    210u,
    117u,
    191u,
    29u,
    128u,
    152u,
    90u,
    95u,
    166u,
    86u,
    120u,
    21u,
    165u,
    177u,
    81u,
    115u,
    82u,
    180u,
    155u,
    211u,
    125u,
    246u,
    200u,
    216u,
    234u,
    14u,
    214u,
    213u,
    212u,
    158u,
    174u,
    3u,
    250u,
    199u,
    10u,
    54u,
    72u,
    229u,
    209u,
    105u,
    135u,
    206u,
    151u,
    4u,
    202u,
    87u,
    99u,
    116u,
    227u,
    45u,
    134u,
    203u,
    20u,
    252u,
    255u,
    70u,
    119u,
    19u,
    153u,
    170u,
    237u,
    22u,
    204u,
    18u,
    68u,
    55u,
    46u,
    201u,
    239u,
    89u,
    219u,
    30u,
    73u,
    171u,
    130u,
    225u,
    34u,
    126u,
    112u,
    138u,
    48u,
    49u,
    244u,
    161u,
    8u,
    194u,
    78u,
    5u,
    251u,
    96u,
    197u,
    7u,
    249u,
    36u,
    93u,
    223u,
    37u,
    181u,
    43u,
    196u,
    215u,
    129u,
    156u,
    42u,
    183u,
    102u,
    47u,
    57u,
    80u,
    168u,
    167u,
    92u,
    32u,
    208u,
    159u,
    190u,
    139u,
    178u,
    147u,
    218u,
    65u,
    100u,
    75u,
    109u,
    41u,
    9u,
    123u,
    67u,
    187u,
    118u,
    28u,
    163u,
    243u,
    236u,
    122u,
    188u,
    185u,
    133u,
    111u,
    24u,
    50u,
    173u,
    66u,
    79u,
    53u,
    160u,
    157u,
    103u,
    71u,
    113u,
    12u,
    25u,
    150u,
    149u,
    143u,
    137u,
    230u,
    61u,
    39u,
    114u,
    164u,
    207u,
    13u,
    193u,
    6u,
    104u,
    198u,
    63u,
    131u,
    148u,
    124u,
    74u,
    253u,
    23u,
    84u,
    231u,
    44u,
    145u,
    58u,
    247u,
    142u,
    77u,
    52u,
    221u,
    184u
  },
  {
    42u,
    230u,
    100u,
    175u,
    74u,
    202u,
    23u,
    111u,
    52u,
    73u,
    242u,
    184u,
    189u,
    103u,
    191u,
    137u,
    159u,
    167u,
    153u,
    58u,
    190u,
    144u,
    199u,
    149u,
    172u,
    16u,
    129u,
    213u,
    76u,
    94u,
    165u,
    26u,
    121u,
    19u,
    60u,
    227u,
    222u,
    232u,
    7u,
    32u,
    231u,
    166u,
    205u,
    117u,
    186u,
    15u,
    198u,
    39u,
    62u,
    178u,
    67u,
    82u,
    59u,
    95u,
    148u,
    5u,
    2u,
    92u,
    255u,
    194u,
    156u,
    185u,
    160u,
    219u,
    174u,
    169u,
    84u,
    145u,
    142u,
    141u,
    221u,
    150u,
    12u,
    83u,
    96u,
    36u,
    61u,
    70u,
    78u,
    68u,
    44u,
    180u,
    223u,
    43u,
    54u,
    171u,
    106u,
    247u,
    64u,
    245u,
    210u,
    225u,
    228u,
    40u,
    65u,
    35u,
    45u,
    201u,
    200u,
    89u,
    0u,
    90u,
    162u,
    218u,
    211u,
    97u,
    125u,
    251u,
    229u,
    98u,
    69u,
    85u,
    3u,
    197u,
    105u,
    33u,
    79u,
    152u,
    246u,
    239u,
    176u,
    220u,
    87u,
    71u,
    49u,
    115u,
    253u,
    112u,
    216u,
    21u,
    99u,
    192u,
    72u,
    233u,
    206u,
    135u,
    80u,
    38u,
    164u,
    34u,
    134u,
    48u,
    131u,
    163u,
    50u,
    143u,
    88u,
    133u,
    252u,
    136u,
    102u,
    18u,
    204u,
    151u,
    212u,
    237u,
    209u,
    139u,
    6u,
    41u,
    120u,
    195u,
    179u,
    29u,
    24u,
    123u,
    10u,
    9u,
    109u,
    31u,
    132u,
    55u,
    234u,
    124u,
    236u,
    28u,
    181u,
    248u,
    110u,
    20u,
    155u,
    107u,
    27u,
    254u,
    86u,
    226u,
    118u,
    158u,
    224u,
    17u,
    113u,
    57u,
    138u,
    240u,
    101u,
    168u,
    214u,
    104u,
    4u,
    11u,
    128u,
    154u,
    93u,
    63u,
    161u,
    46u,
    244u,
    8u,
    140u,
    188u,
    183u,
    114u,
    81u,
    56u,
    77u,
    196u,
    14u,
    37u,
    116u,
    51u,
    53u,
    30u,
    122u,
    241u,
    243u,
    207u,
    157u,
    170u,
    119u,
    177u,
    217u,
    182u,
    147u,
    25u,
    173u,
    130u,
    146u,
    108u,
    250u,
    47u,
    126u,
    249u,
    203u,
    22u,
    1u,
    75u,
    127u,
    66u,
    193u,
    235u,
    208u,
    13u,
    91u,
    215u,
    238u,
    187u
  },
  {
    87u,
    218u,
    100u,
    255u,
    165u,
    9u,
    202u,
    136u,
    30u,
    80u,
    56u,
    154u,
    187u,
    41u,
    111u,
    105u,
    91u,
    35u,
    158u,
    55u,
    240u,
    166u,
    245u,
    181u,
    114u,
    1u,
    172u,
    195u,
    243u,
    29u,
    117u,
    224u,
    47u,
    122u,
    159u,
    151u,
    212u,
    127u,
    126u,
    92u,
    104u,
    211u,
    190u,
    2u,
    149u,
    250u,
    99u,
    36u,
    132u,
    184u,
    207u,
    162u,
    28u,
    42u,
    113u,
    81u,
    74u,
    96u,
    60u,
    26u,
    4u,
    76u,
    221u,
    137u,
    246u,
    247u,
    222u,
    110u,
    170u,
    219u,
    185u,
    191u,
    210u,
    72u,
    19u,
    109u,
    78u,
    152u,
    69u,
    229u,
    135u,
    179u,
    232u,
    18u,
    124u,
    134u,
    98u,
    145u,
    206u,
    33u,
    160u,
    174u,
    182u,
    20u,
    85u,
    93u,
    101u,
    5u,
    12u,
    252u,
    133u,
    138u,
    23u,
    208u,
    178u,
    0u,
    204u,
    164u,
    13u,
    249u,
    215u,
    121u,
    65u,
    77u,
    64u,
    90u,
    139u,
    234u,
    147u,
    198u,
    242u,
    216u,
    94u,
    70u,
    189u,
    125u,
    220u,
    48u,
    200u,
    155u,
    173u,
    120u,
    67u,
    199u,
    22u,
    103u,
    118u,
    63u,
    107u,
    71u,
    108u,
    194u,
    14u,
    230u,
    143u,
    58u,
    53u,
    238u,
    16u,
    82u,
    253u,
    129u,
    175u,
    177u,
    157u,
    148u,
    254u,
    119u,
    171u,
    112u,
    231u,
    228u,
    106u,
    34u,
    188u,
    66u,
    144u,
    123u,
    225u,
    97u,
    38u,
    142u,
    203u,
    193u,
    241u,
    115u,
    75u,
    40u,
    223u,
    163u,
    196u,
    128u,
    11u,
    213u,
    183u,
    88u,
    3u,
    168u,
    32u,
    8u,
    43u,
    24u,
    251u,
    39u,
    57u,
    239u,
    61u,
    46u,
    150u,
    153u,
    45u,
    68u,
    205u,
    10u,
    217u,
    95u,
    37u,
    180u,
    244u,
    6u,
    17u,
    227u,
    27u,
    25u,
    50u,
    62u,
    169u,
    49u,
    226u,
    54u,
    176u,
    79u,
    197u,
    214u,
    130u,
    83u,
    140u,
    192u,
    7u,
    21u,
    51u,
    236u,
    116u,
    89u,
    146u,
    161u,
    237u,
    84u,
    141u,
    156u,
    235u,
    201u,
    102u,
    167u,
    44u,
    31u,
    131u,
    86u,
    248u,
    233u,
    209u,
    52u,
    15u,
    186u,
    59u,
    73u
  },
  {
    88u,
    249u,
    30u,
    164u,
    42u,
    228u,
    132u,
    198u,
    131u,
    227u,
    7u,
    184u,
    5u,
    168u,
    177u,
    57u,
    241u,
    133u,
    0u,
    202u,
    9u,
    183u,
    47u,
    171u,
    45u,
    181u,
    84u,
    213u,
    235u,
    220u,
    155u,
    219u,
    37u,
    16u,
    200u,
    13u,
    101u,
    53u,
    68u,
    58u,
    224u,
    43u,
    10u,
    148u,
    31u,
    129u,
    19u,
    173u,
    116u,
    71u,
    79u,
    229u,
    118u,
    85u,
    44u,
    78u,
    246u,
    138u,
    109u,
    243u,
    244u,
    160u,
    4u,
    237u,
    231u,
    239u,
    95u,
    80u,
    89u,
    15u,
    112u,
    135u,
    212u,
    81u,
    248u,
    124u,
    242u,
    38u,
    20u,
    26u,
    221u,
    233u,
    180u,
    236u,
    12u,
    185u,
    147u,
    28u,
    203u,
    97u,
    114u,
    193u,
    110u,
    195u,
    93u,
    67u,
    55u,
    217u,
    69u,
    90u,
    2u,
    245u,
    167u,
    156u,
    174u,
    187u,
    123u,
    22u,
    65u,
    73u,
    54u,
    163u,
    105u,
    247u,
    165u,
    18u,
    35u,
    140u,
    56u,
    29u,
    92u,
    24u,
    190u,
    34u,
    113u,
    250u,
    143u,
    120u,
    222u,
    205u,
    111u,
    134u,
    60u,
    52u,
    170u,
    201u,
    121u,
    157u,
    108u,
    149u,
    36u,
    240u,
    188u,
    189u,
    172u,
    196u,
    253u,
    91u,
    61u,
    139u,
    66u,
    11u,
    104u,
    107u,
    145u,
    3u,
    199u,
    21u,
    162u,
    207u,
    208u,
    94u,
    232u,
    127u,
    152u,
    46u,
    154u,
    211u,
    141u,
    128u,
    119u,
    41u,
    51u,
    136u,
    87u,
    179u,
    192u,
    70u,
    40u,
    83u,
    14u,
    33u,
    48u,
    197u,
    186u,
    223u,
    142u,
    238u,
    125u,
    6u,
    150u,
    122u,
    137u,
    204u,
    161u,
    1u,
    169u,
    63u,
    99u,
    214u,
    178u,
    176u,
    50u,
    254u,
    126u,
    166u,
    98u,
    77u,
    158u,
    96u,
    75u,
    106u,
    215u,
    225u,
    102u,
    234u,
    100u,
    27u,
    39u,
    210u,
    82u,
    216u,
    230u,
    62u,
    130u,
    194u,
    251u,
    49u,
    255u,
    218u,
    32u,
    146u,
    23u,
    117u,
    64u,
    115u,
    206u,
    17u,
    153u,
    175u,
    252u,
    226u,
    103u,
    74u,
    151u,
    191u,
    76u,
    159u,
    72u,
    209u,
    144u,
    86u,
    59u,
    182u,
    8u,
    25u
  },
  {
    81u,
    157u,
    84u,
    10u,
    80u,
    221u,
    42u,
    66u,
    193u,
    77u,
    180u,
    184u,
    202u,
    207u,
    48u,
    53u,
    239u,
    9u,
    3u,
    198u,
    44u,
    27u,
    211u,
    63u,
    143u,
    130u,
    215u,
    24u,
    132u,
    234u,
    19u,
    167u,
    247u,
    92u,
    61u,
    39u,
    46u,
    244u,
    79u,
    240u,
    101u,
    220u,
    29u,
    187u,
    160u,
    151u,
    31u,
    205u,
    150u,
    141u,
    231u,
    17u,
    128u,
    38u,
    126u,
    213u,
    60u,
    216u,
    172u,
    204u,
    72u,
    165u,
    246u,
    57u,
    21u,
    254u,
    252u,
    91u,
    194u,
    136u,
    169u,
    225u,
    168u,
    158u,
    148u,
    45u,
    164u,
    236u,
    232u,
    140u,
    62u,
    114u,
    162u,
    175u,
    71u,
    217u,
    235u,
    251u,
    200u,
    129u,
    253u,
    119u,
    33u,
    203u,
    103u,
    197u,
    249u,
    43u,
    41u,
    139u,
    22u,
    145u,
    112u,
    94u,
    195u,
    144u,
    135u,
    2u,
    54u,
    123u,
    142u,
    86u,
    105u,
    36u,
    8u,
    214u,
    108u,
    134u,
    40u,
    190u,
    248u,
    176u,
    209u,
    124u,
    212u,
    233u,
    73u,
    208u,
    23u,
    125u,
    65u,
    229u,
    238u,
    85u,
    255u,
    131u,
    95u,
    26u,
    237u,
    111u,
    133u,
    188u,
    47u,
    67u,
    174u,
    98u,
    11u,
    224u,
    201u,
    87u,
    69u,
    118u,
    120u,
    7u,
    14u,
    74u,
    28u,
    181u,
    82u,
    68u,
    226u,
    146u,
    5u,
    228u,
    6u,
    149u,
    218u,
    4u,
    18u,
    183u,
    89u,
    163u,
    1u,
    110u,
    166u,
    241u,
    76u,
    159u,
    93u,
    52u,
    16u,
    56u,
    199u,
    64u,
    121u,
    138u,
    137u,
    161u,
    49u,
    154u,
    156u,
    206u,
    210u,
    25u,
    147u,
    88u,
    34u,
    30u,
    117u,
    222u,
    178u,
    223u,
    219u,
    59u,
    100u,
    155u,
    196u,
    116u,
    182u,
    153u,
    55u,
    12u,
    102u,
    245u,
    113u,
    97u,
    192u,
    243u,
    75u,
    227u,
    96u,
    250u,
    152u,
    51u,
    179u,
    37u,
    90u,
    186u,
    122u,
    109u,
    173u,
    58u,
    107u,
    0u,
    35u,
    189u,
    104u,
    242u,
    127u,
    70u,
    78u,
    185u,
    106u,
    83u,
    32u,
    50u,
    171u,
    13u,
    99u,
    20u,
    177u,
    115u,
    170u,
    15u,
    191u,
    230u
  },
  {
    49u,
    138u,
    144u,
    231u,
    246u,
    26u,
    247u,
    109u,
    168u,
    255u,
    89u,
    141u,
    123u,
    20u,
    21u,
    29u,
    253u,
    78u,
    103u,
    96u,
    160u,
    175u,
    227u,
    25u,
    187u,
    73u,
    57u,
    222u,
    223u,
    43u,
    38u,
    106u,
    133u,
    185u,
    163u,
    150u,
    112u,
    127u,
    137u,
    205u,
    35u,
    189u,
    22u,
    6u,
    124u,
    19u,
    211u,
    72u,
    201u,
    128u,
    13u,
    119u,
    208u,
    194u,
    159u,
    115u,
    44u,
    71u,
    171u,
    23u,
    181u,
    63u,
    212u,
    59u,
    79u,
    149u,
    204u,
    219u,
    84u,
    148u,
    139u,
    30u,
    68u,
    8u,
    249u,
    62u,
    232u,
    145u,
    12u,
    100u,
    129u,
    180u,
    32u,
    101u,
    167u,
    27u,
    233u,
    210u,
    142u,
    186u,
    170u,
    121u,
    40u,
    251u,
    130u,
    155u,
    1u,
    242u,
    31u,
    176u,
    234u,
    209u,
    165u,
    28u,
    236u,
    41u,
    48u,
    125u,
    104u,
    36u,
    77u,
    229u,
    91u,
    75u,
    152u,
    92u,
    161u,
    110u,
    221u,
    131u,
    206u,
    50u,
    220u,
    117u,
    99u,
    113u,
    207u,
    67u,
    240u,
    55u,
    245u,
    105u,
    146u,
    61u,
    14u,
    151u,
    250u,
    196u,
    183u,
    225u,
    228u,
    199u,
    134u,
    166u,
    51u,
    64u,
    102u,
    54u,
    90u,
    42u,
    238u,
    122u,
    190u,
    15u,
    58u,
    226u,
    5u,
    16u,
    120u,
    10u,
    216u,
    136u,
    37u,
    198u,
    0u,
    147u,
    107u,
    235u,
    241u,
    86u,
    118u,
    74u,
    46u,
    218u,
    56u,
    34u,
    3u,
    97u,
    184u,
    164u,
    252u,
    85u,
    87u,
    237u,
    108u,
    239u,
    18u,
    197u,
    33u,
    154u,
    195u,
    4u,
    53u,
    82u,
    202u,
    114u,
    156u,
    162u,
    80u,
    132u,
    173u,
    11u,
    70u,
    193u,
    140u,
    126u,
    178u,
    93u,
    52u,
    191u,
    244u,
    47u,
    192u,
    9u,
    243u,
    135u,
    172u,
    248u,
    188u,
    116u,
    200u,
    158u,
    215u,
    213u,
    224u,
    157u,
    76u,
    174u,
    17u,
    169u,
    111u,
    177u,
    203u,
    217u,
    179u,
    81u,
    24u,
    83u,
    214u,
    66u,
    2u,
    182u,
    94u,
    98u,
    39u,
    45u,
    60u,
    7u,
    88u,
    95u,
    69u,
    153u,
    143u,
    230u,
    254u,
    65u
  },
  {
    186u,
    53u,
    28u,
    238u,
    113u,
    212u,
    14u,
    243u,
    152u,
    40u,
    255u,
    77u,
    206u,
    63u,
    78u,
    129u,
    41u,
    142u,
    33u,
    144u,
    179u,
    60u,
    93u,
    157u,
    249u,
    175u,
    245u,
    56u,
    51u,
    34u,
    52u,
    224u,
    3u,
    139u,
    221u,
    57u,
    47u,
    69u,
    228u,
    231u,
    203u,
    101u,
    75u,
    162u,
    222u,
    151u,
    71u,
    111u,
    62u,
    190u,
    153u,
    9u,
    105u,
    5u,
    131u,
    160u,
    225u,
    38u,
    35u,
    214u,
    166u,
    192u,
    209u,
    72u,
    64u,
    171u,
    95u,
    46u,
    178u,
    232u,
    61u,
    118u,
    185u,
    6u,
    97u,
    87u,
    79u,
    4u,
    122u,
    16u,
    184u,
    170u,
    135u,
    70u,
    201u,
    147u,
    234u,
    158u,
    252u,
    173u,
    202u,
    117u,
    73u,
    8u,
    242u,
    247u,
    0u,
    112u,
    116u,
    143u,
    172u,
    207u,
    120u,
    50u,
    84u,
    161u,
    104u,
    68u,
    121u,
    200u,
    174u,
    67u,
    248u,
    44u,
    136u,
    42u,
    191u,
    148u,
    114u,
    130u,
    137u,
    31u,
    240u,
    180u,
    133u,
    193u,
    211u,
    94u,
    110u,
    134u,
    59u,
    181u,
    90u,
    205u,
    141u,
    230u,
    85u,
    80u,
    83u,
    246u,
    199u,
    219u,
    20u,
    7u,
    119u,
    253u,
    12u,
    194u,
    154u,
    169u,
    239u,
    81u,
    204u,
    128u,
    49u,
    155u,
    176u,
    43u,
    183u,
    1u,
    159u,
    86u,
    223u,
    92u,
    124u,
    45u,
    13u,
    22u,
    195u,
    99u,
    76u,
    100u,
    54u,
    98u,
    215u,
    21u,
    18u,
    2u,
    146u,
    229u,
    10u,
    24u,
    106u,
    39u,
    167u,
    11u,
    132u,
    82u,
    138u,
    198u,
    150u,
    58u,
    197u,
    108u,
    254u,
    109u,
    29u,
    23u,
    237u,
    27u,
    208u,
    227u,
    25u,
    30u,
    66u,
    127u,
    103u,
    220u,
    96u,
    55u,
    189u,
    37u,
    140u,
    48u,
    126u,
    36u,
    115u,
    123u,
    125u,
    182u,
    168u,
    244u,
    107u,
    226u,
    236u,
    145u,
    149u,
    17u,
    251u,
    250u,
    163u,
    196u,
    216u,
    156u,
    91u,
    32u,
    89u,
    65u,
    177u,
    188u,
    102u,
    74u,
    233u,
    217u,
    15u,
    88u,
    164u,
    187u,
    19u,
    241u,
    165u,
    26u,
    218u,
    235u,
    210u,
    213u
  },
  {
    137u,
    116u,
    185u,
    130u,
    235u,
    88u,
    162u,
    31u,
    125u,
    129u,
    146u,
    61u,
    63u,
    106u,
    60u,
    83u,
    22u,
    243u,
    221u,
    71u,
    65u,
    4u,
    48u,
    244u,
    105u,
    138u,
    220u,
    68u,
    133u,
    149u,
    72u,
    175u,
    27u,
    53u,
    190u,
    206u,
    193u,
    189u,
    218u,
    112u,
    115u,
    174u,
    183u,
    245u,
    30u,
    128u,
    139u,
    213u,
    154u,
    147u,
    211u,
    25u,
    10u,
    44u,
    59u,
    159u,
    67u,
    173u,
    119u,
    40u,
    69u,
    14u,
    201u,
    145u,
    230u,
    73u,
    52u,
    75u,
    166u,
    74u,
    34u,
    84u,
    20u,
    56u,
    143u,
    1u,
    32u,
    226u,
    26u,
    107u,
    240u,
    239u,
    117u,
    23u,
    212u,
    236u,
    55u,
    223u,
    86u,
    207u,
    70u,
    242u,
    250u,
    62u,
    198u,
    136u,
    108u,
    80u,
    246u,
    7u,
    132u,
    229u,
    234u,
    194u,
    97u,
    126u,
    15u,
    47u,
    210u,
    196u,
    167u,
    192u,
    76u,
    104u,
    103u,
    255u,
    94u,
    200u,
    37u,
    99u,
    123u,
    6u,
    19u,
    111u,
    87u,
    222u,
    45u,
    179u,
    49u,
    228u,
    141u,
    177u,
    191u,
    170u,
    29u,
    114u,
    247u,
    171u,
    122u,
    39u,
    100u,
    43u,
    109u,
    11u,
    164u,
    134u,
    90u,
    208u,
    18u,
    232u,
    58u,
    28u,
    3u,
    254u,
    51u,
    66u,
    131u,
    186u,
    101u,
    251u,
    195u,
    140u,
    16u,
    216u,
    127u,
    120u,
    184u,
    158u,
    151u,
    178u,
    155u,
    92u,
    180u,
    161u,
    160u,
    118u,
    157u,
    12u,
    50u,
    163u,
    124u,
    0u,
    135u,
    91u,
    79u,
    153u,
    169u,
    46u,
    217u,
    227u,
    199u,
    172u,
    36u,
    225u,
    113u,
    204u,
    148u,
    9u,
    176u,
    42u,
    85u,
    54u,
    95u,
    24u,
    188u,
    238u,
    110u,
    8u,
    82u,
    202u,
    253u,
    249u,
    77u,
    219u,
    165u,
    2u,
    21u,
    203u,
    89u,
    248u,
    78u,
    182u,
    252u,
    150u,
    93u,
    156u,
    224u,
    142u,
    121u,
    233u,
    241u,
    197u,
    81u,
    144u,
    64u,
    102u,
    209u,
    237u,
    214u,
    98u,
    187u,
    38u,
    168u,
    205u,
    215u,
    181u,
    17u,
    13u,
    152u,
    96u,
    41u,
    35u,
    33u,
    57u,
    5u,
    231u
  },
  {
    50u,
    82u,
    221u,
    47u,
    218u,
    217u,
    166u,
    153u,
    102u,
    137u,
    109u,
    158u,
    167u,
    216u,
    182u,
    246u,
    192u,
    183u,
    199u,
    236u,
    49u,
    241u,
    185u,
    175u,
    234u,
    177u,
    77u,
    184u,
    57u,
    34u,
    204u,
    42u,
    235u,
    35u,
    68u,
    146u,
    56u,
    143u,
    62u,
    247u,
    27u,
    255u,
    90u,
    70u,
    11u,
    132u,
    173u,
    211u,
    201u,
    224u,
    80u,
    22u,
    4u,
    222u,
    227u,
    64u,
    205u,
    36u,
    18u,
    228u,
    238u,
    58u,
    168u,
    37u,
    179u,
    119u,
    63u,
    117u,
    129u,
    99u,
    232u,
    24u,
    187u,
    40u,
    128u,
    210u,
    154u,
    231u,
    163u,
    170u,
    152u,
    92u,
    151u,
    214u,
    69u,
    157u,
    145u,
    32u,
    61u,
    200u,
    142u,
    33u,
    144u,
    44u,
    207u,
    147u,
    122u,
    89u,
    125u,
    206u,
    138u,
    243u,
    245u,
    148u,
    181u,
    190u,
    174u,
    81u,
    104u,
    2u,
    111u,
    244u,
    66u,
    43u,
    155u,
    139u,
    54u,
    95u,
    29u,
    140u,
    176u,
    178u,
    96u,
    31u,
    161u,
    108u,
    79u,
    59u,
    118u,
    52u,
    3u,
    134u,
    230u,
    113u,
    16u,
    83u,
    226u,
    86u,
    71u,
    100u,
    110u,
    253u,
    195u,
    212u,
    14u,
    202u,
    208u,
    233u,
    51u,
    116u,
    251u,
    141u,
    105u,
    193u,
    240u,
    97u,
    85u,
    130u,
    84u,
    45u,
    23u,
    1u,
    12u,
    164u,
    171u,
    76u,
    249u,
    198u,
    126u,
    242u,
    162u,
    196u,
    67u,
    0u,
    46u,
    188u,
    75u,
    120u,
    124u,
    93u,
    98u,
    87u,
    30u,
    239u,
    203u,
    55u,
    220u,
    78u,
    15u,
    127u,
    237u,
    223u,
    123u,
    219u,
    72u,
    133u,
    13u,
    160u,
    213u,
    229u,
    21u,
    10u,
    215u,
    38u,
    91u,
    53u,
    5u,
    248u,
    172u,
    8u,
    41u,
    191u,
    88u,
    115u,
    60u,
    149u,
    6u,
    39u,
    136u,
    17u,
    254u,
    114u,
    106u,
    150u,
    252u,
    107u,
    135u,
    194u,
    9u,
    25u,
    189u,
    225u,
    28u,
    74u,
    156u,
    131u,
    165u,
    73u,
    121u,
    19u,
    65u,
    20u,
    103u,
    26u,
    7u,
    209u,
    180u,
    101u,
    186u,
    197u,
    48u,
    159u,
    94u,
    169u,
    112u,
    250u
  },
  {
    189u,
    173u,
    238u,
    69u,
    180u,
    22u,
    151u,
    143u,
    3u,
    108u,
    120u,
    162u,
    31u,
    77u,
    26u,
    101u,
    103u,
    20u,
    118u,
    183u,
    67u,
    174u,
    231u,
    179u,
    73u,
    113u,
    27u,
    92u,
    149u,
    205u,
    220u,
    227u,
    29u,
    19u,
    97u,
    61u,
    93u,
    212u,
    111u,
    219u,
    232u,
    223u,
    145u,
    203u,
    10u,
    85u,
    161u,
    158u,
    51u,
    206u,
    150u,
    214u,
    186u,
    117u,
    7u,
    198u,
    9u,
    136u,
    157u,
    210u,
    64u,
    65u,
    255u,
    133u,
    34u,
    178u,
    6u,
    199u,
    87u,
    200u,
    201u,
    116u,
    13u,
    132u,
    246u,
    253u,
    138u,
    33u,
    146u,
    91u,
    53u,
    12u,
    38u,
    126u,
    105u,
    62u,
    140u,
    215u,
    197u,
    163u,
    249u,
    84u,
    81u,
    129u,
    229u,
    141u,
    127u,
    254u,
    107u,
    8u,
    226u,
    79u,
    181u,
    123u,
    192u,
    171u,
    211u,
    95u,
    125u,
    17u,
    75u,
    76u,
    130u,
    204u,
    114u,
    28u,
    167u,
    168u,
    24u,
    222u,
    16u,
    188u,
    216u,
    83u,
    30u,
    243u,
    96u,
    43u,
    230u,
    193u,
    71u,
    121u,
    94u,
    44u,
    175u,
    207u,
    68u,
    15u,
    86u,
    37u,
    177u,
    142u,
    35u,
    55u,
    185u,
    221u,
    165u,
    135u,
    54u,
    59u,
    194u,
    225u,
    60u,
    147u,
    115u,
    182u,
    90u,
    66u,
    40u,
    80u,
    78u,
    56u,
    247u,
    154u,
    191u,
    237u,
    11u,
    156u,
    235u,
    153u,
    233u,
    172u,
    41u,
    148u,
    88u,
    160u,
    236u,
    100u,
    187u,
    218u,
    109u,
    2u,
    128u,
    239u,
    217u,
    242u,
    102u,
    213u,
    139u,
    250u,
    21u,
    39u,
    137u,
    241u,
    32u,
    251u,
    240u,
    110u,
    89u,
    63u,
    134u,
    36u,
    122u,
    159u,
    45u,
    4u,
    228u,
    244u,
    52u,
    195u,
    202u,
    209u,
    74u,
    70u,
    112u,
    104u,
    23u,
    82u,
    1u,
    72u,
    144u,
    166u,
    131u,
    252u,
    124u,
    176u,
    57u,
    14u,
    155u,
    48u,
    119u,
    18u,
    46u,
    190u,
    25u,
    152u,
    49u,
    184u,
    224u,
    169u,
    208u,
    50u,
    164u,
    245u,
    106u,
    58u,
    170u,
    196u,
    47u,
    0u,
    5u,
    99u,
    42u,
    98u,
    234u,
    248u
  },
  {
    251u,
    44u,
    19u,
    9u,
    88u,
    53u,
    220u,
    159u,
    48u,
    169u,
    113u,
    248u,
    62u,
    255u,
    174u,
    134u,
    59u,
    96u,
    42u,
    200u,
    215u,
    151u,
    183u,
    247u,
    31u,
    221u,
    224u,
    216u,
    41u,
    166u,
    228u,
    11u,
    79u,
    208u,
    13u,
    146u,
    43u,
    167u,
    125u,
    239u,
    69u,
    28u,
    155u,
    61u,
    20u,
    10u,
    240u,
    176u,
    226u,
    29u,
    252u,
    147u,
    245u,
    225u,
    223u,
    91u,
    219u,
    47u,
    39u,
    142u,
    145u,
    234u,
    213u,
    243u,
    35u,
    114u,
    238u,
    95u,
    253u,
    182u,
    66u,
    160u,
    187u,
    149u,
    92u,
    133u,
    77u,
    102u,
    100u,
    52u,
    177u,
    236u,
    40u,
    204u,
    87u,
    227u,
    26u,
    27u,
    106u,
    76u,
    80u,
    18u,
    78u,
    179u,
    231u,
    172u,
    63u,
    193u,
    7u,
    94u,
    99u,
    57u,
    235u,
    188u,
    124u,
    189u,
    144u,
    139u,
    121u,
    115u,
    3u,
    230u,
    181u,
    197u,
    191u,
    126u,
    165u,
    122u,
    162u,
    1u,
    12u,
    16u,
    161u,
    89u,
    21u,
    168u,
    250u,
    210u,
    138u,
    229u,
    56u,
    75u,
    64u,
    111u,
    109u,
    2u,
    196u,
    127u,
    93u,
    60u,
    171u,
    97u,
    103u,
    148u,
    71u,
    51u,
    0u,
    173u,
    129u,
    55u,
    49u,
    156u,
    32u,
    98u,
    164u,
    190u,
    65u,
    22u,
    4u,
    180u,
    82u,
    205u,
    218u,
    112u,
    249u,
    5u,
    150u,
    192u,
    86u,
    206u,
    90u,
    24u,
    30u,
    104u,
    246u,
    74u,
    68u,
    194u,
    14u,
    8u,
    184u,
    141u,
    136u,
    105u,
    152u,
    54u,
    137u,
    175u,
    170u,
    203u,
    241u,
    81u,
    15u,
    120u,
    199u,
    163u,
    25u,
    17u,
    186u,
    157u,
    217u,
    207u,
    67u,
    23u,
    209u,
    140u,
    73u,
    84u,
    143u,
    131u,
    72u,
    116u,
    132u,
    232u,
    37u,
    108u,
    214u,
    135u,
    195u,
    38u,
    85u,
    110u,
    185u,
    153u,
    237u,
    36u,
    154u,
    233u,
    58u,
    123u,
    211u,
    117u,
    83u,
    119u,
    158u,
    107u,
    45u,
    212u,
    178u,
    101u,
    130u,
    198u,
    128u,
    244u,
    46u,
    33u,
    202u,
    222u,
    242u,
    254u,
    50u,
    118u,
    201u,
    6u,
    34u,
    70u
  },
  {
    255u,
    4u,
    41u,
    168u,
    216u,
    194u,
    188u,
    26u,
    50u,
    62u,
    187u,
    143u,
    105u,
    220u,
    109u,
    144u,
    211u,
    146u,
    78u,
    58u,
    73u,
    43u,
    229u,
    248u,
    133u,
    151u,
    40u,
    111u,
    135u,
    90u,
    13u,
    10u,
    241u,
    126u,
    12u,
    232u,
    97u,
    182u,
    139u,
    205u,
    227u,
    91u,
    176u,
    167u,
    47u,
    71u,
    34u,
    94u,
    206u,
    49u,
    74u,
    189u,
    35u,
    234u,
    121u,
    210u,
    64u,
    14u,
    102u,
    154u,
    179u,
    63u,
    33u,
    88u,
    228u,
    93u,
    145u,
    199u,
    247u,
    202u,
    224u,
    165u,
    36u,
    70u,
    180u,
    95u,
    253u,
    86u,
    82u,
    110u,
    136u,
    237u,
    213u,
    223u,
    172u,
    186u,
    254u,
    233u,
    103u,
    215u,
    81u,
    124u,
    56u,
    190u,
    175u,
    57u,
    193u,
    174u,
    129u,
    157u,
    238u,
    152u,
    225u,
    92u,
    87u,
    37u,
    18u,
    164u,
    46u,
    192u,
    83u,
    21u,
    217u,
    31u,
    207u,
    148u,
    208u,
    201u,
    17u,
    119u,
    120u,
    156u,
    222u,
    5u,
    134u,
    235u,
    52u,
    23u,
    29u,
    184u,
    9u,
    209u,
    53u,
    196u,
    185u,
    25u,
    244u,
    38u,
    250u,
    1u,
    137u,
    51u,
    242u,
    245u,
    117u,
    147u,
    198u,
    77u,
    104u,
    22u,
    15u,
    246u,
    140u,
    231u,
    122u,
    89u,
    75u,
    153u,
    48u,
    161u,
    158u,
    19u,
    130u,
    54u,
    183u,
    3u,
    7u,
    252u,
    45u,
    173u,
    39u,
    131u,
    107u,
    72u,
    85u,
    80u,
    243u,
    27u,
    30u,
    96u,
    239u,
    125u,
    68u,
    114u,
    84u,
    2u,
    66u,
    98u,
    0u,
    171u,
    236u,
    214u,
    101u,
    149u,
    221u,
    218u,
    219u,
    44u,
    150u,
    230u,
    138u,
    170u,
    16u,
    132u,
    76u,
    116u,
    79u,
    204u,
    159u,
    178u,
    177u,
    203u,
    181u,
    67u,
    141u,
    155u,
    24u,
    100u,
    8u,
    112u,
    191u,
    20u,
    123u,
    65u,
    28u,
    69u,
    59u,
    108u,
    99u,
    226u,
    169u,
    115u,
    195u,
    249u,
    118u,
    55u,
    127u,
    142u,
    212u,
    60u,
    61u,
    200u,
    240u,
    6u,
    251u,
    32u,
    106u,
    113u,
    163u,
    11u,
    197u,
    160u,
    162u,
    42u,
    128u,
    166u
  },
  {
    247u,
    3u,
    243u,
    87u,
    31u,
    27u,
    234u,
    46u,
    93u,
    127u,
    83u,
    88u,
    193u,
    174u,
    221u,
    41u,
    38u,
    181u,
    238u,
    188u,
    150u,
    57u,
    104u,
    49u,
    77u,
    97u,
    149u,
    246u,
    190u,
    40u,
    123u,
    214u,
    178u,
    39u,
    170u,
    67u,
    158u,
    216u,
    118u,
    119u,
    250u,
    227u,
    148u,
    91u,
    117u,
    182u,
    164u,
    37u,
    146u,
    60u,
    79u,
    198u,
    108u,
    224u,
    80u,
    207u,
    159u,
    105u,
    147u,
    61u,
    29u,
    44u,
    144u,
    205u,
    165u,
    186u,
    63u,
    217u,
    209u,
    96u,
    95u,
    30u,
    54u,
    131u,
    155u,
    5u,
    103u,
    114u,
    134u,
    52u,
    202u,
    167u,
    162u,
    201u,
    68u,
    223u,
    116u,
    53u,
    76u,
    139u,
    82u,
    225u,
    156u,
    196u,
    112u,
    199u,
    231u,
    56u,
    244u,
    204u,
    122u,
    145u,
    18u,
    6u,
    13u,
    0u,
    115u,
    130u,
    179u,
    151u,
    109u,
    220u,
    138u,
    84u,
    253u,
    137u,
    94u,
    28u,
    23u,
    142u,
    58u,
    42u,
    251u,
    34u,
    241u,
    208u,
    232u,
    25u,
    32u,
    9u,
    143u,
    197u,
    235u,
    121u,
    213u,
    153u,
    194u,
    12u,
    187u,
    203u,
    90u,
    237u,
    66u,
    47u,
    157u,
    206u,
    62u,
    71u,
    129u,
    154u,
    1u,
    55u,
    252u,
    212u,
    229u,
    126u,
    10u,
    73u,
    15u,
    101u,
    113u,
    24u,
    166u,
    22u,
    185u,
    230u,
    102u,
    183u,
    172u,
    135u,
    215u,
    163u,
    184u,
    2u,
    176u,
    65u,
    50u,
    248u,
    228u,
    160u,
    133u,
    21u,
    132u,
    64u,
    136u,
    19u,
    218u,
    255u,
    85u,
    152u,
    75u,
    100u,
    7u,
    222u,
    106u,
    191u,
    98u,
    86u,
    200u,
    210u,
    168u,
    43u,
    211u,
    36u,
    195u,
    161u,
    141u,
    92u,
    107u,
    17u,
    33u,
    16u,
    69u,
    175u,
    99u,
    74u,
    81u,
    233u,
    240u,
    140u,
    89u,
    26u,
    8u,
    128u,
    192u,
    125u,
    226u,
    236u,
    242u,
    11u,
    48u,
    59u,
    4u,
    78u,
    20u,
    177u,
    70u,
    110u,
    239u,
    120u,
    45u,
    189u,
    173u,
    180u,
    111u,
    14u,
    245u,
    35u,
    171u,
    124u,
    169u,
    249u,
    72u,
    254u,
    51u,
    219u
  },
  {
    232u,
    199u,
    137u,
    118u,
    35u,
    129u,
    128u,
    184u,
    219u,
    201u,
    38u,
    120u,
    161u,
    98u,
    12u,
    163u,
    200u,
    142u,
    21u,
    112u,
    104u,
    235u,
    22u,
    105u,
    208u,
    213u,
    209u,
    122u,
    85u,
    247u,
    100u,
    37u,
    197u,
    67u,
    46u,
    78u,
    68u,
    150u,
    86u,
    238u,
    123u,
    27u,
    51u,
    110u,
    205u,
    33u,
    92u,
    148u,
    153u,
    239u,
    210u,
    249u,
    52u,
    230u,
    94u,
    212u,
    44u,
    50u,
    183u,
    4u,
    240u,
    179u,
    89u,
    64u,
    6u,
    13u,
    95u,
    253u,
    30u,
    231u,
    159u,
    141u,
    113u,
    25u,
    252u,
    245u,
    124u,
    202u,
    84u,
    18u,
    147u,
    81u,
    155u,
    34u,
    224u,
    164u,
    28u,
    62u,
    140u,
    87u,
    162u,
    192u,
    158u,
    23u,
    133u,
    55u,
    193u,
    254u,
    19u,
    10u,
    83u,
    204u,
    144u,
    114u,
    9u,
    244u,
    166u,
    20u,
    102u,
    207u,
    24u,
    228u,
    106u,
    17u,
    53u,
    77u,
    0u,
    36u,
    66u,
    151u,
    223u,
    127u,
    221u,
    194u,
    93u,
    191u,
    80u,
    255u,
    111u,
    251u,
    172u,
    107u,
    165u,
    182u,
    154u,
    189u,
    11u,
    5u,
    146u,
    130u,
    243u,
    97u,
    32u,
    126u,
    70u,
    131u,
    246u,
    138u,
    43u,
    176u,
    157u,
    82u,
    42u,
    215u,
    250u,
    14u,
    71u,
    65u,
    134u,
    173u,
    125u,
    109u,
    79u,
    69u,
    185u,
    214u,
    45u,
    187u,
    156u,
    171u,
    121u,
    76u,
    47u,
    56u,
    57u,
    139u,
    181u,
    234u,
    177u,
    220u,
    188u,
    225u,
    108u,
    88u,
    26u,
    73u,
    167u,
    91u,
    248u,
    168u,
    48u,
    72u,
    29u,
    119u,
    59u,
    149u,
    203u,
    195u,
    218u,
    152u,
    174u,
    178u,
    206u,
    75u,
    237u,
    116u,
    58u,
    229u,
    103u,
    211u,
    40u,
    227u,
    3u,
    60u,
    190u,
    241u,
    217u,
    180u,
    39u,
    99u,
    16u,
    74u,
    90u,
    7u,
    117u,
    49u,
    54u,
    41u,
    226u,
    31u,
    160u,
    63u,
    233u,
    143u,
    169u,
    222u,
    236u,
    242u,
    135u,
    1u,
    175u,
    198u,
    196u,
    136u,
    15u,
    8u,
    101u,
    2u,
    115u,
    170u,
    132u,
    216u,
    145u,
    186u,
    61u,
    96u
  },
  {
    41u,
    175u,
    57u,
    117u,
    92u,
    126u,
    32u,
    129u,
    14u,
    249u,
    73u,
    30u,
    171u,
    231u,
    248u,
    25u,
    174u,
    221u,
    23u,
    59u,
    64u,
    147u,
    255u,
    95u,
    179u,
    139u,
    22u,
    121u,
    133u,
    98u,
    50u,
    199u,
    165u,
    56u,
    83u,
    234u,
    195u,
    146u,
    155u,
    66u,
    176u,
    180u,
    245u,
    58u,
    235u,
    7u,
    161u,
    160u,
    78u,
    181u,
    19u,
    131u,
    68u,
    173u,
    223u,
    99u,
    91u,
    145u,
    51u,
    193u,
    35u,
    74u,
    225u,
    162u,
    105u,
    214u,
    100u,
    43u,
    236u,
    217u,
    187u,
    106u,
    159u,
    9u,
    46u,
    167u,
    207u,
    26u,
    127u,
    39u,
    251u,
    60u,
    224u,
    190u,
    189u,
    206u,
    119u,
    61u,
    250u,
    140u,
    143u,
    94u,
    75u,
    241u,
    15u,
    2u,
    186u,
    67u,
    238u,
    69u,
    172u,
    93u,
    63u,
    0u,
    108u,
    17u,
    31u,
    80u,
    157u,
    70u,
    163u,
    77u,
    21u,
    111u,
    72u,
    49u,
    137u,
    164u,
    115u,
    16u,
    205u,
    102u,
    192u,
    212u,
    120u,
    229u,
    118u,
    204u,
    1u,
    239u,
    85u,
    123u,
    219u,
    10u,
    34u,
    226u,
    86u,
    197u,
    18u,
    42u,
    109u,
    200u,
    104u,
    246u,
    209u,
    128u,
    240u,
    170u,
    125u,
    33u,
    124u,
    210u,
    211u,
    113u,
    6u,
    247u,
    79u,
    110u,
    184u,
    228u,
    203u,
    230u,
    4u,
    218u,
    153u,
    44u,
    151u,
    141u,
    28u,
    45u,
    116u,
    55u,
    202u,
    185u,
    182u,
    82u,
    38u,
    237u,
    136u,
    84u,
    215u,
    29u,
    37u,
    149u,
    122u,
    252u,
    156u,
    62u,
    65u,
    233u,
    191u,
    183u,
    253u,
    88u,
    87u,
    40u,
    244u,
    227u,
    81u,
    169u,
    142u,
    11u,
    201u,
    76u,
    188u,
    27u,
    5u,
    24u,
    135u,
    71u,
    154u,
    114u,
    152u,
    177u,
    90u,
    158u,
    53u,
    132u,
    8u,
    168u,
    103u,
    89u,
    107u,
    213u,
    48u,
    232u,
    54u,
    20u,
    112u,
    96u,
    222u,
    242u,
    101u,
    36u,
    198u,
    208u,
    243u,
    220u,
    13u,
    196u,
    130u,
    52u,
    166u,
    97u,
    254u,
    134u,
    148u,
    194u,
    150u,
    138u,
    3u,
    216u,
    178u,
    47u,
    12u,
    144u
  },
  {
    165u,
    6u,
    41u,
    251u,
    95u,
    197u,
    60u,
    226u,
    166u,
    86u,
    177u,
    214u,
    96u,
    70u,
    100u,
    230u,
    132u,
    233u,
    143u,
    24u,
    154u,
    220u,
    193u,
    211u,
    187u,
    106u,
    114u,
    153u,
    68u,
    198u,
    69u,
    194u,
    73u,
    137u,
    36u,
    157u,
    136u,
    150u,
    18u,
    67u,
    84u,
    21u,
    102u,
    139u,
    11u,
    237u,
    148u,
    189u,
    23u,
    35u,
    113u,
    44u,
    242u,
    179u,
    145u,
    12u,
    55u,
    164u,
    239u,
    43u,
    99u,
    50u,
    248u,
    149u,
    110u,
    204u,
    47u,
    174u,
    81u,
    140u,
    26u,
    31u,
    71u,
    59u,
    209u,
    16u,
    200u,
    38u,
    163u,
    190u,
    122u,
    111u,
    127u,
    79u,
    184u,
    247u,
    255u,
    123u,
    186u,
    74u,
    65u,
    58u,
    57u,
    63u,
    30u,
    117u,
    240u,
    128u,
    222u,
    97u,
    205u,
    138u,
    61u,
    29u,
    159u,
    1u,
    235u,
    124u,
    130u,
    172u,
    224u,
    39u,
    229u,
    208u,
    176u,
    120u,
    142u,
    147u,
    109u,
    116u,
    156u,
    185u,
    210u,
    119u,
    192u,
    169u,
    32u,
    195u,
    94u,
    225u,
    42u,
    212u,
    129u,
    62u,
    104u,
    250u,
    72u,
    80u,
    171u,
    252u,
    125u,
    135u,
    158u,
    228u,
    121u,
    221u,
    161u,
    54u,
    7u,
    8u,
    207u,
    183u,
    85u,
    199u,
    19u,
    10u,
    206u,
    134u,
    90u,
    2u,
    241u,
    93u,
    82u,
    25u,
    88u,
    103u,
    244u,
    238u,
    92u,
    34u,
    115u,
    5u,
    217u,
    17u,
    152u,
    3u,
    219u,
    253u,
    162u,
    155u,
    46u,
    215u,
    180u,
    182u,
    22u,
    75u,
    175u,
    98u,
    20u,
    168u,
    151u,
    101u,
    78u,
    254u,
    37u,
    131u,
    167u,
    141u,
    9u,
    53u,
    4u,
    160u,
    202u,
    40u,
    243u,
    108u,
    173u,
    13u,
    105u,
    64u,
    196u,
    77u,
    33u,
    246u,
    48u,
    112u,
    76u,
    133u,
    232u,
    234u,
    201u,
    249u,
    66u,
    89u,
    191u,
    223u,
    27u,
    49u,
    213u,
    107u,
    144u,
    245u,
    45u,
    181u,
    146u,
    118u,
    218u,
    126u,
    51u,
    56u,
    52u,
    14u,
    170u,
    178u,
    87u,
    28u,
    0u,
    216u,
    231u,
    203u,
    188u,
    236u,
    91u,
    227u,
    83u,
    15u
  },
  {
    42u,
    180u,
    98u,
    52u,
    127u,
    89u,
    11u,
    49u,
    110u,
    242u,
    253u,
    56u,
    240u,
    119u,
    167u,
    146u,
    135u,
    151u,
    207u,
    209u,
    72u,
    226u,
    220u,
    198u,
    212u,
    27u,
    12u,
    103u,
    23u,
    161u,
    55u,
    44u,
    205u,
    141u,
    249u,
    174u,
    121u,
    136u,
    173u,
    77u,
    175u,
    208u,
    211u,
    252u,
    91u,
    70u,
    66u,
    73u,
    21u,
    34u,
    85u,
    190u,
    172u,
    189u,
    217u,
    65u,
    61u,
    6u,
    4u,
    192u,
    101u,
    74u,
    100u,
    238u,
    60u,
    178u,
    10u,
    37u,
    90u,
    33u,
    150u,
    114u,
    57u,
    162u,
    140u,
    181u,
    106u,
    139u,
    223u,
    39u,
    160u,
    239u,
    116u,
    203u,
    51u,
    142u,
    153u,
    197u,
    251u,
    45u,
    112u,
    40u,
    22u,
    228u,
    236u,
    166u,
    164u,
    157u,
    31u,
    118u,
    171u,
    29u,
    123u,
    248u,
    229u,
    129u,
    35u,
    168u,
    124u,
    32u,
    93u,
    156u,
    231u,
    176u,
    82u,
    5u,
    58u,
    158u,
    1u,
    143u,
    3u,
    234u,
    216u,
    210u,
    130u,
    24u,
    246u,
    183u,
    46u,
    247u,
    195u,
    215u,
    232u,
    16u,
    86u,
    107u,
    244u,
    134u,
    199u,
    122u,
    177u,
    102u,
    97u,
    113u,
    17u,
    137u,
    20u,
    76u,
    25u,
    224u,
    185u,
    115u,
    163u,
    26u,
    170u,
    117u,
    147u,
    68u,
    94u,
    71u,
    47u,
    250u,
    104u,
    67u,
    78u,
    214u,
    83u,
    95u,
    7u,
    196u,
    254u,
    243u,
    84u,
    120u,
    218u,
    9u,
    152u,
    155u,
    126u,
    187u,
    69u,
    53u,
    105u,
    48u,
    225u,
    54u,
    14u,
    59u,
    237u,
    213u,
    245u,
    19u,
    64u,
    188u,
    148u,
    186u,
    62u,
    13u,
    15u,
    109u,
    132u,
    2u,
    128u,
    193u,
    87u,
    201u,
    144u,
    96u,
    255u,
    79u,
    81u,
    108u,
    184u,
    241u,
    133u,
    222u,
    99u,
    191u,
    182u,
    88u,
    179u,
    43u,
    219u,
    206u,
    221u,
    18u,
    159u,
    50u,
    230u,
    194u,
    149u,
    36u,
    227u,
    30u,
    63u,
    235u,
    200u,
    233u,
    204u,
    75u,
    28u,
    138u,
    131u,
    41u,
    154u,
    80u,
    111u,
    165u,
    38u,
    169u,
    8u,
    92u,
    125u,
    202u,
    0u,
    145u
  },
  {
    172u,
    180u,
    73u,
    244u,
    10u,
    199u,
    84u,
    14u,
    158u,
    237u,
    13u,
    123u,
    37u,
    140u,
    233u,
    249u,
    69u,
    42u,
    128u,
    226u,
    240u,
    171u,
    111u,
    115u,
    157u,
    153u,
    35u,
    252u,
    126u,
    254u,
    102u,
    142u,
    253u,
    227u,
    92u,
    178u,
    246u,
    200u,
    174u,
    183u,
    59u,
    114u,
    67u,
    176u,
    225u,
    221u,
    207u,
    86u,
    130u,
    131u,
    216u,
    77u,
    154u,
    81u,
    166u,
    99u,
    170u,
    70u,
    208u,
    83u,
    255u,
    20u,
    116u,
    64u,
    38u,
    79u,
    186u,
    250u,
    245u,
    28u,
    210u,
    168u,
    148u,
    12u,
    201u,
    97u,
    215u,
    155u,
    24u,
    219u,
    182u,
    107u,
    211u,
    61u,
    181u,
    177u,
    127u,
    6u,
    9u,
    135u,
    117u,
    228u,
    106u,
    48u,
    4u,
    30u,
    82u,
    95u,
    248u,
    44u,
    15u,
    184u,
    17u,
    202u,
    165u,
    98u,
    188u,
    132u,
    50u,
    25u,
    212u,
    5u,
    121u,
    41u,
    122u,
    133u,
    159u,
    62u,
    31u,
    91u,
    78u,
    60u,
    85u,
    242u,
    101u,
    160u,
    247u,
    222u,
    22u,
    2u,
    18u,
    209u,
    46u,
    204u,
    109u,
    239u,
    232u,
    223u,
    137u,
    144u,
    8u,
    167u,
    175u,
    108u,
    162u,
    231u,
    90u,
    47u,
    113u,
    151u,
    63u,
    43u,
    139u,
    136u,
    51u,
    52u,
    191u,
    104u,
    196u,
    236u,
    217u,
    185u,
    58u,
    206u,
    147u,
    39u,
    190u,
    3u,
    26u,
    192u,
    21u,
    220u,
    23u,
    152u,
    55u,
    163u,
    138u,
    76u,
    27u,
    187u,
    110u,
    57u,
    112u,
    56u,
    164u,
    34u,
    66u,
    161u,
    234u,
    189u,
    29u,
    32u,
    7u,
    75u,
    214u,
    229u,
    203u,
    105u,
    145u,
    0u,
    143u,
    194u,
    1u,
    224u,
    124u,
    235u,
    218u,
    251u,
    179u,
    205u,
    120u,
    146u,
    213u,
    156u,
    103u,
    169u,
    93u,
    198u,
    149u,
    118u,
    11u,
    94u,
    100u,
    33u,
    36u,
    119u,
    238u,
    96u,
    53u,
    197u,
    193u,
    68u,
    173u,
    125u,
    72u,
    230u,
    89u,
    243u,
    19u,
    134u,
    40u,
    49u,
    74u,
    80u,
    129u,
    54u,
    87u,
    150u,
    65u,
    195u,
    16u,
    71u,
    241u,
    141u,
    88u,
    45u
  },
  {
    141u,
    14u,
    154u,
    62u,
    13u,
    205u,
    22u,
    80u,
    6u,
    38u,
    168u,
    206u,
    66u,
    37u,
    52u,
    164u,
    31u,
    95u,
    56u,
    208u,
    29u,
    104u,
    255u,
    142u,
    237u,
    46u,
    106u,
    193u,
    27u,
    98u,
    155u,
    203u,
    169u,
    157u,
    54u,
    147u,
    121u,
    93u,
    248u,
    113u,
    105u,
    138u,
    57u,
    74u,
    176u,
    3u,
    137u,
    8u,
    76u,
    9u,
    179u,
    200u,
    12u,
    23u,
    19u,
    86u,
    71u,
    236u,
    24u,
    196u,
    7u,
    241u,
    171u,
    47u,
    15u,
    233u,
    224u,
    229u,
    53u,
    102u,
    195u,
    78u,
    108u,
    189u,
    83u,
    159u,
    243u,
    174u,
    26u,
    246u,
    43u,
    75u,
    163u,
    239u,
    198u,
    140u,
    188u,
    120u,
    90u,
    145u,
    222u,
    28u,
    25u,
    58u,
    128u,
    182u,
    172u,
    209u,
    39u,
    69u,
    135u,
    232u,
    178u,
    129u,
    252u,
    127u,
    11u,
    117u,
    177u,
    132u,
    60u,
    144u,
    16u,
    110u,
    84u,
    72u,
    212u,
    42u,
    126u,
    194u,
    134u,
    240u,
    67u,
    122u,
    51u,
    202u,
    97u,
    148u,
    247u,
    44u,
    244u,
    59u,
    170u,
    184u,
    199u,
    161u,
    228u,
    197u,
    136u,
    5u,
    4u,
    119u,
    87u,
    146u,
    114u,
    41u,
    100u,
    77u,
    61u,
    160u,
    115u,
    111u,
    40u,
    210u,
    118u,
    181u,
    191u,
    187u,
    21u,
    79u,
    0u,
    82u,
    175u,
    226u,
    65u,
    254u,
    50u,
    223u,
    207u,
    17u,
    101u,
    186u,
    143u,
    49u,
    107u,
    64u,
    55u,
    183u,
    1u,
    81u,
    215u,
    96u,
    2u,
    156u,
    85u,
    216u,
    123u,
    88u,
    112u,
    99u,
    32u,
    125u,
    217u,
    253u,
    150u,
    149u,
    201u,
    130u,
    185u,
    190u,
    234u,
    221u,
    220u,
    36u,
    48u,
    231u,
    213u,
    235u,
    103u,
    20u,
    242u,
    238u,
    68u,
    10u,
    167u,
    204u,
    245u,
    89u,
    116u,
    30u,
    165u,
    94u,
    225u,
    34u,
    230u,
    139u,
    151u,
    45u,
    152u,
    35u,
    92u,
    109u,
    219u,
    180u,
    249u,
    133u,
    251u,
    162u,
    218u,
    211u,
    173u,
    91u,
    250u,
    73u,
    63u,
    33u,
    131u,
    158u,
    227u,
    153u,
    192u,
    70u,
    124u,
    166u,
    18u,
    214u
  },
  {
    57u,
    37u,
    246u,
    54u,
    253u,
    254u,
    174u,
    180u,
    159u,
    129u,
    193u,
    107u,
    53u,
    177u,
    109u,
    244u,
    40u,
    192u,
    123u,
    47u,
    247u,
    46u,
    69u,
    15u,
    25u,
    146u,
    92u,
    23u,
    11u,
    157u,
    33u,
    38u,
    86u,
    165u,
    197u,
    16u,
    90u,
    234u,
    59u,
    98u,
    205u,
    36u,
    48u,
    156u,
    71u,
    237u,
    73u,
    28u,
    24u,
    251u,
    88u,
    238u,
    225u,
    112u,
    124u,
    10u,
    104u,
    93u,
    199u,
    249u,
    79u,
    213u,
    221u,
    12u,
    103u,
    141u,
    91u,
    50u,
    5u,
    167u,
    224u,
    226u,
    191u,
    196u,
    218u,
    31u,
    164u,
    13u,
    102u,
    74u,
    168u,
    32u,
    133u,
    22u,
    161u,
    117u,
    217u,
    188u,
    105u,
    30u,
    121u,
    101u,
    20u,
    56u,
    3u,
    122u,
    151u,
    42u,
    227u,
    21u,
    187u,
    189u,
    137u,
    240u,
    198u,
    17u,
    89u,
    63u,
    27u,
    222u,
    82u,
    140u,
    173u,
    134u,
    243u,
    153u,
    4u,
    186u,
    95u,
    175u,
    148u,
    87u,
    154u,
    126u,
    230u,
    166u,
    182u,
    241u,
    1u,
    204u,
    184u,
    149u,
    29u,
    158u,
    231u,
    18u,
    210u,
    120u,
    183u,
    236u,
    35u,
    215u,
    203u,
    116u,
    216u,
    106u,
    162u,
    150u,
    143u,
    55u,
    26u,
    44u,
    160u,
    66u,
    111u,
    207u,
    85u,
    80u,
    62u,
    0u,
    49u,
    172u,
    2u,
    181u,
    78u,
    138u,
    131u,
    220u,
    179u,
    255u,
    41u,
    147u,
    212u,
    245u,
    60u,
    96u,
    68u,
    70u,
    108u,
    195u,
    206u,
    51u,
    119u,
    142u,
    248u,
    84u,
    155u,
    185u,
    43u,
    178u,
    163u,
    208u,
    9u,
    130u,
    72u,
    39u,
    233u,
    239u,
    76u,
    8u,
    34u,
    6u,
    7u,
    118u,
    19u,
    83u,
    99u,
    114u,
    64u,
    58u,
    75u,
    228u,
    235u,
    110u,
    127u,
    232u,
    139u,
    219u,
    152u,
    81u,
    171u,
    202u,
    252u,
    242u,
    125u,
    100u,
    211u,
    77u,
    176u,
    145u,
    194u,
    94u,
    132u,
    209u,
    169u,
    135u,
    214u,
    61u,
    65u,
    45u,
    14u,
    136u,
    144u,
    170u,
    67u,
    115u,
    97u,
    223u,
    190u,
    52u,
    201u,
    250u,
    113u,
    128u,
    200u,
    229u
  },
  {
    180u,
    234u,
    230u,
    24u,
    246u,
    130u,
    178u,
    243u,
    71u,
    108u,
    219u,
    90u,
    70u,
    172u,
    147u,
    83u,
    204u,
    229u,
    17u,
    123u,
    140u,
    15u,
    139u,
    209u,
    189u,
    121u,
    154u,
    105u,
    150u,
    200u,
    250u,
    55u,
    195u,
    60u,
    19u,
    191u,
    134u,
    3u,
    37u,
    63u,
    168u,
    92u,
    78u,
    197u,
    136u,
    106u,
    252u,
    7u,
    198u,
    88u,
    67u,
    65u,
    217u,
    111u,
    162u,
    184u,
    138u,
    225u,
    127u,
    115u,
    1u,
    58u,
    46u,
    132u,
    228u,
    221u,
    166u,
    93u,
    120u,
    185u,
    98u,
    36u,
    226u,
    99u,
    145u,
    249u,
    73u,
    183u,
    205u,
    57u,
    181u,
    41u,
    128u,
    114u,
    117u,
    56u,
    149u,
    163u,
    224u,
    188u,
    247u,
    158u,
    214u,
    206u,
    148u,
    82u,
    53u,
    110u,
    211u,
    126u,
    171u,
    176u,
    11u,
    6u,
    95u,
    133u,
    23u,
    174u,
    222u,
    202u,
    62u,
    75u,
    116u,
    233u,
    119u,
    89u,
    85u,
    61u,
    129u,
    0u,
    179u,
    244u,
    125u,
    141u,
    103u,
    22u,
    122u,
    91u,
    131u,
    35u,
    72u,
    165u,
    254u,
    242u,
    153u,
    5u,
    118u,
    215u,
    14u,
    8u,
    81u,
    167u,
    9u,
    16u,
    186u,
    86u,
    33u,
    18u,
    237u,
    28u,
    207u,
    45u,
    34u,
    27u,
    187u,
    194u,
    248u,
    87u,
    251u,
    220u,
    44u,
    94u,
    238u,
    203u,
    79u,
    213u,
    255u,
    160u,
    124u,
    39u,
    26u,
    192u,
    232u,
    156u,
    241u,
    157u,
    159u,
    144u,
    74u,
    10u,
    177u,
    20u,
    212u,
    137u,
    235u,
    40u,
    48u,
    96u,
    155u,
    43u,
    223u,
    30u,
    245u,
    253u,
    170u,
    143u,
    51u,
    239u,
    210u,
    107u,
    104u,
    182u,
    66u,
    25u,
    31u,
    135u,
    84u,
    2u,
    216u,
    113u,
    97u,
    59u,
    193u,
    142u,
    69u,
    64u,
    151u,
    190u,
    231u,
    49u,
    12u,
    240u,
    218u,
    80u,
    68u,
    101u,
    102u,
    201u,
    32u,
    77u,
    4u,
    21u,
    52u,
    76u,
    38u,
    199u,
    146u,
    164u,
    112u,
    169u,
    47u,
    50u,
    100u,
    173u,
    227u,
    152u,
    208u,
    29u,
    236u,
    175u,
    196u,
    13u,
    109u,
    54u,
    161u,
    42u
  },
  {
    69u,
    120u,
    33u,
    67u,
    16u,
    4u,
    211u,
    237u,
    195u,
    104u,
    60u,
    36u,
    103u,
    61u,
    193u,
    220u,
    196u,
    100u,
    247u,
    63u,
    12u,
    48u,
    118u,
    21u,
    169u,
    42u,
    150u,
    198u,
    99u,
    231u,
    82u,
    253u,
    149u,
    136u,
    157u,
    76u,
    242u,
    62u,
    187u,
    192u,
    127u,
    24u,
    112u,
    166u,
    226u,
    236u,
    119u,
    138u,
    44u,
    58u,
    74u,
    145u,
    93u,
    122u,
    41u,
    188u,
    110u,
    212u,
    64u,
    23u,
    46u,
    203u,
    114u,
    156u,
    161u,
    255u,
    243u,
    248u,
    155u,
    80u,
    81u,
    109u,
    233u,
    154u,
    184u,
    132u,
    168u,
    20u,
    56u,
    206u,
    146u,
    92u,
    245u,
    238u,
    179u,
    137u,
    123u,
    162u,
    173u,
    113u,
    227u,
    213u,
    191u,
    83u,
    40u,
    68u,
    51u,
    72u,
    219u,
    252u,
    9u,
    31u,
    148u,
    18u,
    115u,
    55u,
    130u,
    129u,
    57u,
    194u,
    141u,
    125u,
    8u,
    79u,
    176u,
    254u,
    121u,
    11u,
    214u,
    35u,
    124u,
    75u,
    142u,
    6u,
    90u,
    204u,
    98u,
    45u,
    84u,
    249u,
    165u,
    235u,
    200u,
    222u,
    97u,
    17u,
    223u,
    160u,
    201u,
    177u,
    37u,
    5u,
    171u,
    7u,
    210u,
    228u,
    234u,
    225u,
    66u,
    209u,
    77u,
    139u,
    172u,
    133u,
    244u,
    30u,
    131u,
    78u,
    29u,
    167u,
    216u,
    180u,
    199u,
    126u,
    208u,
    39u,
    95u,
    73u,
    163u,
    143u,
    14u,
    101u,
    88u,
    230u,
    215u,
    13u,
    232u,
    32u,
    128u,
    239u,
    241u,
    53u,
    2u,
    134u,
    47u,
    240u,
    22u,
    27u,
    186u,
    49u,
    224u,
    151u,
    218u,
    38u,
    190u,
    183u,
    15u,
    229u,
    182u,
    102u,
    0u,
    175u,
    205u,
    116u,
    174u,
    96u,
    250u,
    91u,
    221u,
    52u,
    54u,
    144u,
    207u,
    26u,
    111u,
    107u,
    217u,
    178u,
    71u,
    108u,
    65u,
    251u,
    170u,
    43u,
    147u,
    140u,
    34u,
    152u,
    94u,
    85u,
    164u,
    3u,
    105u,
    246u,
    135u,
    202u,
    189u,
    89u,
    181u,
    70u,
    87u,
    159u,
    10u,
    197u,
    28u,
    117u,
    106u,
    86u,
    50u,
    59u,
    158u,
    153u,
    185u,
    19u,
    25u,
    1u
  },
  {
    76u,
    241u,
    144u,
    50u,
    160u,
    116u,
    16u,
    140u,
    249u,
    110u,
    29u,
    130u,
    93u,
    15u,
    37u,
    108u,
    229u,
    235u,
    106u,
    224u,
    165u,
    58u,
    237u,
    172u,
    65u,
    49u,
    125u,
    191u,
    98u,
    240u,
    12u,
    220u,
    232u,
    2u,
    218u,
    215u,
    246u,
    103u,
    204u,
    69u,
    23u,
    196u,
    94u,
    145u,
    142u,
    0u,
    230u,
    149u,
    205u,
    211u,
    238u,
    34u,
    155u,
    51u,
    56u,
    157u,
    41u,
    150u,
    102u,
    188u,
    47u,
    176u,
    104u,
    80u,
    100u,
    210u,
    248u,
    192u,
    239u,
    201u,
    169u,
    255u,
    107u,
    109u,
    40u,
    42u,
    138u,
    83u,
    252u,
    25u,
    63u,
    52u,
    30u,
    194u,
    132u,
    186u,
    179u,
    206u,
    153u,
    66u,
    99u,
    20u,
    54u,
    163u,
    254u,
    31u,
    113u,
    124u,
    187u,
    68u,
    183u,
    57u,
    122u,
    209u,
    203u,
    161u,
    88u,
    33u,
    24u,
    245u,
    48u,
    143u,
    164u,
    177u,
    112u,
    118u,
    86u,
    55u,
    221u,
    27u,
    85u,
    247u,
    217u,
    4u,
    101u,
    21u,
    154u,
    146u,
    202u,
    212u,
    162u,
    119u,
    158u,
    189u,
    151u,
    199u,
    170u,
    82u,
    168u,
    43u,
    28u,
    78u,
    3u,
    67u,
    250u,
    45u,
    10u,
    173u,
    253u,
    227u,
    231u,
    208u,
    60u,
    71u,
    111u,
    175u,
    8u,
    131u,
    6u,
    39u,
    26u,
    13u,
    17u,
    79u,
    89u,
    11u,
    62u,
    128u,
    22u,
    59u,
    251u,
    200u,
    70u,
    190u,
    75u,
    148u,
    32u,
    53u,
    193u,
    180u,
    19u,
    72u,
    195u,
    117u,
    92u,
    96u,
    135u,
    121u,
    74u,
    234u,
    182u,
    225u,
    44u,
    7u,
    35u,
    244u,
    197u,
    226u,
    213u,
    159u,
    36u,
    219u,
    222u,
    14u,
    114u,
    233u,
    115u,
    64u,
    228u,
    152u,
    123u,
    87u,
    207u,
    184u,
    120u,
    95u,
    84u,
    214u,
    178u,
    198u,
    181u,
    73u,
    134u,
    1u,
    18u,
    91u,
    223u,
    90u,
    216u,
    167u,
    174u,
    166u,
    46u,
    139u,
    127u,
    9u,
    38u,
    61u,
    133u,
    185u,
    81u,
    105u,
    242u,
    137u,
    136u,
    126u,
    141u,
    171u,
    243u,
    97u,
    147u,
    129u,
    236u,
    5u,
    156u,
    77u
  },
  {
    138u,
    9u,
    131u,
    40u,
    185u,
    71u,
    195u,
    28u,
    36u,
    122u,
    41u,
    197u,
    33u,
    166u,
    66u,
    190u,
    184u,
    241u,
    77u,
    217u,
    81u,
    62u,
    32u,
    209u,
    208u,
    15u,
    95u,
    102u,
    253u,
    159u,
    245u,
    191u,
    16u,
    183u,
    210u,
    194u,
    176u,
    120u,
    249u,
    250u,
    132u,
    87u,
    187u,
    145u,
    150u,
    88u,
    67u,
    23u,
    141u,
    178u,
    45u,
    3u,
    180u,
    106u,
    29u,
    116u,
    44u,
    171u,
    46u,
    50u,
    229u,
    242u,
    227u,
    1u,
    124u,
    203u,
    30u,
    75u,
    139u,
    17u,
    114u,
    168u,
    248u,
    230u,
    221u,
    246u,
    8u,
    213u,
    6u,
    149u,
    83u,
    160u,
    254u,
    147u,
    68u,
    162u,
    63u,
    225u,
    232u,
    60u,
    177u,
    113u,
    91u,
    186u,
    235u,
    222u,
    163u,
    152u,
    220u,
    255u,
    107u,
    79u,
    49u,
    97u,
    153u,
    216u,
    240u,
    48u,
    22u,
    96u,
    47u,
    207u,
    86u,
    0u,
    92u,
    43u,
    64u,
    69u,
    130u,
    198u,
    137u,
    59u,
    252u,
    89u,
    223u,
    134u,
    165u,
    224u,
    57u,
    58u,
    189u,
    103u,
    112u,
    126u,
    70u,
    27u,
    155u,
    228u,
    212u,
    72u,
    181u,
    201u,
    206u,
    193u,
    94u,
    104u,
    244u,
    101u,
    234u,
    56u,
    146u,
    18u,
    204u,
    243u,
    105u,
    7u,
    110u,
    31u,
    158u,
    238u,
    2u,
    108u,
    21u,
    239u,
    215u,
    117u,
    10u,
    175u,
    109u,
    99u,
    111u,
    179u,
    161u,
    172u,
    128u,
    98u,
    148u,
    136u,
    211u,
    144u,
    196u,
    53u,
    84u,
    37u,
    55u,
    173u,
    143u,
    4u,
    251u,
    74u,
    76u,
    205u,
    51u,
    135u,
    218u,
    157u,
    167u,
    119u,
    182u,
    200u,
    236u,
    54u,
    156u,
    142u,
    26u,
    219u,
    52u,
    61u,
    82u,
    118u,
    38u,
    13u,
    11u,
    73u,
    170u,
    127u,
    24u,
    35u,
    237u,
    93u,
    80u,
    39u,
    20u,
    214u,
    123u,
    174u,
    154u,
    231u,
    199u,
    121u,
    85u,
    65u,
    25u,
    42u,
    133u,
    115u,
    226u,
    202u,
    19u,
    125u,
    5u,
    164u,
    247u,
    100u,
    169u,
    188u,
    129u,
    78u,
    233u,
    12u,
    140u,
    151u,
    90u,
    14u,
    34u,
    192u
  },
  {
    176u,
    62u,
    252u,
    228u,
    229u,
    164u,
    26u,
    47u,
    217u,
    9u,
    195u,
    199u,
    36u,
    59u,
    44u,
    194u,
    154u,
    148u,
    224u,
    211u,
    70u,
    13u,
    43u,
    166u,
    120u,
    197u,
    21u,
    219u,
    202u,
    165u,
    236u,
    212u,
    159u,
    12u,
    67u,
    209u,
    215u,
    72u,
    178u,
    191u,
    125u,
    181u,
    87u,
    188u,
    19u,
    221u,
    206u,
    52u,
    109u,
    15u,
    40u,
    131u,
    225u,
    124u,
    28u,
    11u,
    115u,
    234u,
    0u,
    200u,
    214u,
    192u,
    4u,
    196u,
    246u,
    126u,
    144u,
    132u,
    66u,
    64u,
    46u,
    232u,
    23u,
    218u,
    163u,
    250u,
    8u,
    118u,
    53u,
    93u,
    155u,
    130u,
    171u,
    147u,
    122u,
    108u,
    156u,
    14u,
    86u,
    143u,
    248u,
    92u,
    61u,
    230u,
    133u,
    253u,
    180u,
    249u,
    63u,
    153u,
    204u,
    106u,
    169u,
    83u,
    97u,
    74u,
    210u,
    55u,
    127u,
    140u,
    103u,
    134u,
    157u,
    201u,
    182u,
    58u,
    170u,
    187u,
    121u,
    137u,
    128u,
    81u,
    45u,
    76u,
    20u,
    24u,
    77u,
    102u,
    51u,
    207u,
    88u,
    240u,
    190u,
    198u,
    139u,
    174u,
    3u,
    6u,
    10u,
    17u,
    226u,
    172u,
    80u,
    94u,
    41u,
    29u,
    98u,
    69u,
    244u,
    71u,
    233u,
    129u,
    222u,
    142u,
    30u,
    149u,
    152u,
    251u,
    175u,
    49u,
    173u,
    31u,
    85u,
    25u,
    114u,
    213u,
    141u,
    48u,
    123u,
    75u,
    33u,
    145u,
    193u,
    5u,
    79u,
    82u,
    216u,
    239u,
    242u,
    179u,
    241u,
    90u,
    205u,
    22u,
    243u,
    235u,
    37u,
    186u,
    151u,
    158u,
    91u,
    135u,
    136u,
    138u,
    110u,
    65u,
    2u,
    104u,
    189u,
    146u,
    16u,
    162u,
    223u,
    116u,
    39u,
    119u,
    238u,
    255u,
    57u,
    54u,
    60u,
    56u,
    107u,
    167u,
    227u,
    32u,
    105u,
    231u,
    161u,
    177u,
    183u,
    7u,
    150u,
    78u,
    73u,
    68u,
    220u,
    203u,
    254u,
    35u,
    208u,
    50u,
    95u,
    42u,
    113u,
    112u,
    1u,
    247u,
    100u,
    185u,
    84u,
    101u,
    27u,
    18u,
    160u,
    237u,
    168u,
    117u,
    111u,
    34u,
    96u,
    184u,
    89u,
    245u,
    99u,
    38u
  },
  {
    107u,
    92u,
    238u,
    10u,
    120u,
    175u,
    109u,
    178u,
    182u,
    19u,
    41u,
    169u,
    4u,
    3u,
    61u,
    36u,
    217u,
    224u,
    35u,
    239u,
    255u,
    22u,
    180u,
    72u,
    47u,
    89u,
    139u,
    151u,
    237u,
    209u,
    253u,
    62u,
    98u,
    96u,
    76u,
    200u,
    190u,
    73u,
    88u,
    192u,
    203u,
    221u,
    181u,
    55u,
    32u,
    78u,
    219u,
    123u,
    9u,
    50u,
    12u,
    173u,
    210u,
    122u,
    214u,
    141u,
    8u,
    60u,
    193u,
    65u,
    6u,
    31u,
    46u,
    111u,
    56u,
    135u,
    240u,
    0u,
    138u,
    23u,
    197u,
    248u,
    165u,
    137u,
    126u,
    13u,
    213u,
    38u,
    155u,
    93u,
    87u,
    229u,
    24u,
    199u,
    42u,
    68u,
    127u,
    16u,
    249u,
    112u,
    233u,
    53u,
    51u,
    140u,
    18u,
    179u,
    242u,
    95u,
    223u,
    228u,
    187u,
    69u,
    99u,
    142u,
    148u,
    37u,
    143u,
    54u,
    90u,
    161u,
    226u,
    225u,
    167u,
    83u,
    158u,
    144u,
    79u,
    25u,
    106u,
    102u,
    159u,
    118u,
    136u,
    26u,
    174u,
    251u,
    44u,
    236u,
    241u,
    129u,
    45u,
    208u,
    82u,
    191u,
    48u,
    84u,
    222u,
    207u,
    30u,
    149u,
    201u,
    147u,
    172u,
    234u,
    86u,
    121u,
    230u,
    189u,
    124u,
    21u,
    216u,
    195u,
    2u,
    254u,
    130u,
    49u,
    75u,
    114u,
    164u,
    14u,
    232u,
    231u,
    27u,
    153u,
    105u,
    134u,
    198u,
    194u,
    152u,
    11u,
    5u,
    215u,
    40u,
    235u,
    116u,
    113u,
    131u,
    128u,
    74u,
    39u,
    71u,
    211u,
    70u,
    176u,
    244u,
    20u,
    154u,
    34u,
    227u,
    1u,
    66u,
    17u,
    85u,
    132u,
    246u,
    58u,
    108u,
    218u,
    103u,
    205u,
    33u,
    166u,
    110u,
    162u,
    183u,
    247u,
    168u,
    28u,
    202u,
    157u,
    245u,
    206u,
    250u,
    212u,
    177u,
    160u,
    101u,
    184u,
    52u,
    77u,
    146u,
    220u,
    43u,
    59u,
    125u,
    97u,
    145u,
    196u,
    150u,
    57u,
    252u,
    64u,
    188u,
    204u,
    104u,
    80u,
    186u,
    243u,
    91u,
    156u,
    133u,
    170u,
    81u,
    29u,
    171u,
    119u,
    115u,
    185u,
    15u,
    117u,
    100u,
    67u,
    63u,
    7u,
    94u,
    163u
  },
  {
    153u,
    21u,
    118u,
    101u,
    140u,
    136u,
    72u,
    163u,
    81u,
    94u,
    161u,
    219u,
    208u,
    13u,
    130u,
    105u,
    169u,
    11u,
    180u,
    1u,
    36u,
    88u,
    175u,
    239u,
    61u,
    157u,
    119u,
    5u,
    22u,
    60u,
    115u,
    207u,
    246u,
    86u,
    198u,
    178u,
    172u,
    230u,
    135u,
    28u,
    206u,
    245u,
    114u,
    252u,
    197u,
    220u,
    6u,
    132u,
    78u,
    122u,
    97u,
    110u,
    91u,
    37u,
    139u,
    50u,
    106u,
    126u,
    15u,
    241u,
    41u,
    147u,
    23u,
    168u,
    20u,
    64u,
    9u,
    128u,
    223u,
    154u,
    152u,
    204u,
    54u,
    226u,
    66u,
    113u,
    205u,
    84u,
    129u,
    0u,
    138u,
    240u,
    102u,
    225u,
    228u,
    174u,
    127u,
    162u,
    56u,
    194u,
    244u,
    24u,
    40u,
    248u,
    171u,
    216u,
    67u,
    242u,
    196u,
    214u,
    92u,
    99u,
    192u,
    185u,
    111u,
    164u,
    18u,
    255u,
    131u,
    151u,
    188u,
    32u,
    52u,
    149u,
    195u,
    83u,
    233u,
    76u,
    42u,
    167u,
    19u,
    213u,
    229u,
    26u,
    95u,
    80u,
    170u,
    186u,
    12u,
    249u,
    58u,
    45u,
    121u,
    190u,
    89u,
    120u,
    109u,
    234u,
    150u,
    191u,
    159u,
    212u,
    87u,
    29u,
    71u,
    117u,
    236u,
    59u,
    85u,
    155u,
    17u,
    2u,
    33u,
    222u,
    254u,
    247u,
    218u,
    235u,
    14u,
    201u,
    75u,
    69u,
    148u,
    7u,
    93u,
    250u,
    30u,
    107u,
    189u,
    100u,
    25u,
    237u,
    160u,
    62u,
    158u,
    217u,
    133u,
    35u,
    224u,
    176u,
    70u,
    79u,
    181u,
    90u,
    187u,
    73u,
    38u,
    146u,
    202u,
    124u,
    123u,
    16u,
    27u,
    57u,
    103u,
    200u,
    182u,
    156u,
    143u,
    199u,
    177u,
    166u,
    238u,
    51u,
    47u,
    34u,
    39u,
    134u,
    55u,
    82u,
    179u,
    116u,
    142u,
    3u,
    112u,
    203u,
    243u,
    53u,
    98u,
    210u,
    145u,
    8u,
    144u,
    232u,
    96u,
    44u,
    48u,
    63u,
    215u,
    193u,
    108u,
    74u,
    137u,
    211u,
    251u,
    183u,
    141u,
    68u,
    10u,
    184u,
    49u,
    227u,
    221u,
    46u,
    253u,
    31u,
    231u,
    173u,
    4u,
    165u,
    125u,
    43u,
    209u,
    77u,
    65u,
    104u
  },
  {
    23u,
    213u,
    190u,
    70u,
    20u,
    154u,
    111u,
    252u,
    214u,
    130u,
    206u,
    200u,
    228u,
    64u,
    189u,
    19u,
    24u,
    18u,
    193u,
    246u,
    232u,
    134u,
    184u,
    110u,
    132u,
    168u,
    165u,
    174u,
    73u,
    255u,
    223u,
    7u,
    144u,
    91u,
    32u,
    45u,
    195u,
    113u,
    92u,
    127u,
    196u,
    74u,
    142u,
    37u,
    105u,
    48u,
    167u,
    188u,
    121u,
    204u,
    187u,
    210u,
    124u,
    117u,
    54u,
    21u,
    14u,
    147u,
    176u,
    66u,
    75u,
    8u,
    108u,
    149u,
    194u,
    229u,
    244u,
    58u,
    36u,
    38u,
    253u,
    33u,
    47u,
    68u,
    61u,
    40u,
    135u,
    43u,
    181u,
    241u,
    131u,
    192u,
    1u,
    248u,
    88u,
    35u,
    179u,
    10u,
    84u,
    83u,
    180u,
    254u,
    230u,
    95u,
    86u,
    72u,
    172u,
    126u,
    227u,
    109u,
    114u,
    4u,
    71u,
    5u,
    120u,
    78u,
    138u,
    242u,
    137u,
    145u,
    209u,
    55u,
    123u,
    146u,
    202u,
    59u,
    245u,
    53u,
    31u,
    119u,
    80u,
    11u,
    159u,
    141u,
    224u,
    240u,
    85u,
    225u,
    140u,
    161u,
    39u,
    216u,
    250u,
    27u,
    169u,
    79u,
    249u,
    82u,
    236u,
    156u,
    17u,
    211u,
    251u,
    51u,
    151u,
    203u,
    215u,
    112u,
    97u,
    247u,
    102u,
    198u,
    56u,
    77u,
    25u,
    221u,
    65u,
    93u,
    231u,
    122u,
    212u,
    129u,
    185u,
    237u,
    207u,
    175u,
    50u,
    103u,
    28u,
    3u,
    153u,
    69u,
    101u,
    81u,
    12u,
    34u,
    0u,
    100u,
    235u,
    152u,
    199u,
    89u,
    158u,
    41u,
    239u,
    6u,
    197u,
    115u,
    116u,
    218u,
    157u,
    222u,
    177u,
    57u,
    125u,
    205u,
    26u,
    148u,
    173u,
    94u,
    217u,
    183u,
    42u,
    128u,
    104u,
    155u,
    166u,
    238u,
    13u,
    139u,
    133u,
    243u,
    49u,
    90u,
    29u,
    44u,
    178u,
    171u,
    107u,
    99u,
    22u,
    234u,
    52u,
    67u,
    160u,
    226u,
    182u,
    162u,
    143u,
    201u,
    164u,
    118u,
    96u,
    208u,
    15u,
    191u,
    186u,
    163u,
    150u,
    106u,
    220u,
    62u,
    98u,
    136u,
    76u,
    63u,
    219u,
    46u,
    16u,
    60u,
    9u,
    2u,
    87u,
    233u,
    170u,
    30u
  },
  {
    165u,
    157u,
    18u,
    127u,
    71u,
    9u,
    121u,
    237u,
    148u,
    119u,
    230u,
    173u,
    172u,
    28u,
    114u,
    166u,
    147u,
    108u,
    152u,
    170u,
    164u,
    238u,
    62u,
    202u,
    178u,
    234u,
    81u,
    245u,
    3u,
    56u,
    43u,
    180u,
    55u,
    154u,
    109u,
    33u,
    57u,
    189u,
    163u,
    89u,
    60u,
    190u,
    83u,
    186u,
    96u,
    87u,
    253u,
    84u,
    201u,
    228u,
    14u,
    90u,
    175u,
    66u,
    82u,
    86u,
    240u,
    93u,
    65u,
    31u,
    210u,
    187u,
    110u,
    200u,
    32u,
    233u,
    156u,
    123u,
    63u,
    132u,
    155u,
    102u,
    34u,
    138u,
    225u,
    64u,
    177u,
    10u,
    92u,
    184u,
    250u,
    53u,
    2u,
    216u,
    219u,
    91u,
    75u,
    128u,
    144u,
    12u,
    35u,
    15u,
    122u,
    242u,
    149u,
    236u,
    105u,
    211u,
    150u,
    232u,
    80u,
    176u,
    142u,
    111u,
    76u,
    199u,
    129u,
    74u,
    103u,
    48u,
    39u,
    54u,
    72u,
    51u,
    98u,
    181u,
    17u,
    24u,
    69u,
    23u,
    220u,
    5u,
    217u,
    95u,
    27u,
    185u,
    229u,
    204u,
    113u,
    193u,
    146u,
    118u,
    26u,
    22u,
    183u,
    231u,
    195u,
    227u,
    140u,
    205u,
    59u,
    239u,
    42u,
    88u,
    252u,
    136u,
    254u,
    151u,
    179u,
    41u,
    143u,
    235u,
    85u,
    131u,
    167u,
    174u,
    107u,
    36u,
    214u,
    115u,
    223u,
    244u,
    197u,
    52u,
    198u,
    0u,
    125u,
    208u,
    97u,
    126u,
    169u,
    68u,
    29u,
    73u,
    45u,
    21u,
    58u,
    7u,
    19u,
    194u,
    209u,
    135u,
    112u,
    141u,
    207u,
    159u,
    130u,
    221u,
    243u,
    251u,
    101u,
    203u,
    106u,
    162u,
    134u,
    79u,
    11u,
    40u,
    182u,
    117u,
    158u,
    104u,
    78u,
    188u,
    30u,
    222u,
    137u,
    241u,
    50u,
    249u,
    46u,
    16u,
    246u,
    77u,
    192u,
    8u,
    94u,
    215u,
    226u,
    160u,
    212u,
    124u,
    13u,
    255u,
    25u,
    38u,
    191u,
    168u,
    145u,
    247u,
    116u,
    37u,
    213u,
    248u,
    224u,
    61u,
    171u,
    67u,
    1u,
    47u,
    139u,
    133u,
    99u,
    206u,
    70u,
    161u,
    100u,
    120u,
    196u,
    4u,
    218u,
    44u,
    20u,
    49u,
    6u,
    153u
  },
  {
    200u,
    99u,
    226u,
    73u,
    174u,
    192u,
    228u,
    64u,
    66u,
    147u,
    93u,
    96u,
    153u,
    60u,
    91u,
    254u,
    158u,
    110u,
    255u,
    250u,
    76u,
    248u,
    206u,
    9u,
    13u,
    251u,
    98u,
    108u,
    113u,
    191u,
    70u,
    40u,
    225u,
    82u,
    71u,
    165u,
    28u,
    182u,
    90u,
    229u,
    247u,
    179u,
    104u,
    253u,
    177u,
    12u,
    30u,
    220u,
    241u,
    10u,
    79u,
    130u,
    80u,
    246u,
    194u,
    156u,
    49u,
    101u,
    37u,
    87u,
    63u,
    148u,
    141u,
    109u,
    245u,
    180u,
    137u,
    195u,
    16u,
    240u,
    181u,
    46u,
    121u,
    0u,
    38u,
    223u,
    155u,
    42u,
    249u,
    34u,
    208u,
    136u,
    77u,
    51u,
    139u,
    20u,
    107u,
    31u,
    209u,
    237u,
    45u,
    238u,
    205u,
    144u,
    210u,
    184u,
    185u,
    198u,
    56u,
    55u,
    142u,
    115u,
    202u,
    58u,
    48u,
    68u,
    103u,
    204u,
    72u,
    62u,
    39u,
    105u,
    119u,
    32u,
    112u,
    227u,
    168u,
    29u,
    120u,
    149u,
    50u,
    160u,
    234u,
    3u,
    124u,
    131u,
    189u,
    6u,
    126u,
    169u,
    75u,
    116u,
    54u,
    47u,
    19u,
    166u,
    233u,
    1u,
    85u,
    173u,
    211u,
    5u,
    203u,
    83u,
    161u,
    214u,
    21u,
    106u,
    134u,
    199u,
    183u,
    36u,
    215u,
    216u,
    145u,
    143u,
    8u,
    111u,
    24u,
    69u,
    14u,
    100u,
    95u,
    18u,
    224u,
    25u,
    212u,
    221u,
    232u,
    23u,
    135u,
    86u,
    152u,
    35u,
    44u,
    138u,
    252u,
    235u,
    11u,
    231u,
    167u,
    59u,
    132u,
    128u,
    197u,
    2u,
    81u,
    84u,
    243u,
    157u,
    154u,
    159u,
    175u,
    218u,
    140u,
    125u,
    190u,
    230u,
    242u,
    219u,
    172u,
    151u,
    67u,
    97u,
    27u,
    163u,
    150u,
    122u,
    178u,
    186u,
    94u,
    57u,
    146u,
    65u,
    4u,
    213u,
    193u,
    102u,
    129u,
    118u,
    162u,
    176u,
    187u,
    15u,
    53u,
    17u,
    164u,
    133u,
    33u,
    89u,
    43u,
    92u,
    22u,
    114u,
    123u,
    171u,
    170u,
    61u,
    217u,
    207u,
    7u,
    196u,
    222u,
    188u,
    78u,
    239u,
    201u,
    127u,
    244u,
    41u,
    74u,
    26u,
    236u,
    52u,
    88u,
    117u
  },
  {
    223u,
    151u,
    25u,
    104u,
    199u,
    207u,
    176u,
    255u,
    183u,
    156u,
    75u,
    13u,
    179u,
    87u,
    132u,
    85u,
    138u,
    15u,
    67u,
    82u,
    16u,
    171u,
    172u,
    244u,
    177u,
    12u,
    247u,
    235u,
    218u,
    74u,
    6u,
    118u,
    105u,
    101u,
    128u,
    188u,
    123u,
    161u,
    21u,
    102u,
    248u,
    41u,
    201u,
    1u,
    84u,
    140u,
    190u,
    66u,
    209u,
    234u,
    23u,
    88u,
    133u,
    50u,
    106u,
    89u,
    206u,
    43u,
    91u,
    197u,
    198u,
    195u,
    181u,
    46u,
    76u,
    5u,
    117u,
    213u,
    59u,
    26u,
    7u,
    169u,
    42u,
    163u,
    45u,
    186u,
    237u,
    212u,
    94u,
    222u,
    210u,
    107u,
    32u,
    233u,
    227u,
    200u,
    17u,
    95u,
    226u,
    134u,
    100u,
    208u,
    108u,
    184u,
    166u,
    113u,
    191u,
    69u,
    150u,
    57u,
    18u,
    110u,
    175u,
    187u,
    196u,
    121u,
    122u,
    220u,
    79u,
    114u,
    81u,
    162u,
    230u,
    120u,
    86u,
    251u,
    68u,
    116u,
    180u,
    159u,
    154u,
    130u,
    27u,
    31u,
    111u,
    144u,
    80u,
    152u,
    221u,
    109u,
    168u,
    3u,
    224u,
    49u,
    92u,
    232u,
    215u,
    216u,
    125u,
    146u,
    44u,
    63u,
    131u,
    246u,
    245u,
    93u,
    48u,
    250u,
    249u,
    65u,
    252u,
    28u,
    47u,
    203u,
    204u,
    173u,
    153u,
    11u,
    253u,
    217u,
    141u,
    37u,
    4u,
    112u,
    124u,
    34u,
    228u,
    73u,
    22u,
    192u,
    70u,
    127u,
    202u,
    143u,
    19u,
    96u,
    214u,
    61u,
    129u,
    60u,
    145u,
    158u,
    165u,
    53u,
    14u,
    58u,
    254u,
    83u,
    97u,
    160u,
    136u,
    174u,
    20u,
    182u,
    239u,
    40u,
    231u,
    10u,
    8u,
    33u,
    242u,
    135u,
    90u,
    78u,
    99u,
    24u,
    0u,
    9u,
    126u,
    62u,
    148u,
    170u,
    139u,
    52u,
    2u,
    241u,
    225u,
    142u,
    77u,
    71u,
    211u,
    115u,
    147u,
    205u,
    30u,
    229u,
    157u,
    35u,
    238u,
    189u,
    193u,
    194u,
    119u,
    149u,
    137u,
    219u,
    167u,
    38u,
    56u,
    39u,
    98u,
    243u,
    240u,
    155u,
    64u,
    54u,
    29u,
    236u,
    178u,
    185u,
    36u,
    51u,
    55u,
    72u,
    164u,
    103u
  },
  {
    108u,
    235u,
    128u,
    252u,
    109u,
    7u,
    15u,
    46u,
    55u,
    241u,
    170u,
    233u,
    101u,
    127u,
    130u,
    132u,
    111u,
    161u,
    103u,
    151u,
    91u,
    244u,
    52u,
    164u,
    147u,
    225u,
    209u,
    182u,
    219u,
    175u,
    47u,
    26u,
    168u,
    80u,
    114u,
    216u,
    23u,
    239u,
    222u,
    82u,
    206u,
    215u,
    14u,
    78u,
    86u,
    95u,
    156u,
    62u,
    75u,
    48u,
    135u,
    56u,
    131u,
    122u,
    133u,
    72u,
    205u,
    11u,
    50u,
    4u,
    31u,
    1u,
    119u,
    100u,
    99u,
    160u,
    74u,
    217u,
    146u,
    190u,
    96u,
    159u,
    104u,
    25u,
    189u,
    167u,
    19u,
    67u,
    155u,
    154u,
    65u,
    193u,
    121u,
    118u,
    196u,
    152u,
    248u,
    149u,
    8u,
    237u,
    183u,
    203u,
    145u,
    162u,
    211u,
    59u,
    115u,
    71u,
    192u,
    228u,
    81u,
    117u,
    107u,
    250u,
    54u,
    165u,
    223u,
    10u,
    113u,
    236u,
    251u,
    77u,
    247u,
    84u,
    150u,
    163u,
    44u,
    87u,
    17u,
    29u,
    185u,
    24u,
    129u,
    240u,
    68u,
    102u,
    204u,
    106u,
    199u,
    79u,
    30u,
    157u,
    179u,
    148u,
    184u,
    9u,
    220u,
    221u,
    116u,
    140u,
    43u,
    213u,
    34u,
    254u,
    60u,
    171u,
    202u,
    187u,
    232u,
    242u,
    207u,
    198u,
    246u,
    176u,
    70u,
    141u,
    38u,
    142u,
    21u,
    177u,
    85u,
    110u,
    158u,
    49u,
    41u,
    53u,
    138u,
    5u,
    136u,
    36u,
    172u,
    16u,
    169u,
    98u,
    18u,
    229u,
    200u,
    234u,
    178u,
    105u,
    13u,
    6u,
    238u,
    210u,
    69u,
    139u,
    76u,
    230u,
    245u,
    112u,
    191u,
    27u,
    174u,
    201u,
    224u,
    97u,
    64u,
    253u,
    173u,
    125u,
    144u,
    58u,
    94u,
    212u,
    120u,
    0u,
    181u,
    126u,
    20u,
    57u,
    2u,
    45u,
    249u,
    3u,
    40u,
    243u,
    134u,
    22u,
    143u,
    188u,
    42u,
    194u,
    166u,
    195u,
    231u,
    35u,
    51u,
    73u,
    92u,
    63u,
    123u,
    218u,
    37u,
    83u,
    214u,
    12u,
    32u,
    186u,
    66u,
    227u,
    226u,
    208u,
    33u,
    39u,
    180u,
    88u,
    89u,
    124u,
    90u,
    197u,
    93u,
    255u,
    61u,
    153u,
    137u,
    28u
  },
  {
    145u,
    255u,
    125u,
    154u,
    28u,
    239u,
    23u,
    144u,
    40u,
    30u,
    11u,
    43u,
    150u,
    92u,
    101u,
    88u,
    251u,
    250u,
    69u,
    51u,
    147u,
    118u,
    156u,
    56u,
    52u,
    103u,
    195u,
    204u,
    109u,
    1u,
    175u,
    192u,
    41u,
    141u,
    130u,
    194u,
    171u,
    82u,
    172u,
    188u,
    66u,
    177u,
    222u,
    33u,
    189u,
    218u,
    32u,
    236u,
    220u,
    238u,
    213u,
    20u,
    229u,
    186u,
    155u,
    93u,
    2u,
    127u,
    252u,
    122u,
    182u,
    24u,
    117u,
    221u,
    57u,
    10u,
    124u,
    187u,
    168u,
    132u,
    197u,
    96u,
    37u,
    231u,
    211u,
    208u,
    21u,
    45u,
    209u,
    91u,
    245u,
    179u,
    0u,
    123u,
    253u,
    166u,
    104u,
    129u,
    203u,
    50u,
    46u,
    81u,
    116u,
    153u,
    62u,
    235u,
    223u,
    151u,
    58u,
    12u,
    136u,
    198u,
    97u,
    113u,
    83u,
    44u,
    193u,
    181u,
    119u,
    180u,
    5u,
    100u,
    184u,
    137u,
    112u,
    87u,
    6u,
    167u,
    105u,
    18u,
    34u,
    219u,
    244u,
    196u,
    61u,
    16u,
    157u,
    99u,
    108u,
    135u,
    165u,
    170u,
    48u,
    107u,
    161u,
    228u,
    148u,
    176u,
    254u,
    164u,
    26u,
    126u,
    163u,
    42u,
    216u,
    233u,
    73u,
    240u,
    102u,
    14u,
    217u,
    149u,
    201u,
    59u,
    183u,
    67u,
    74u,
    138u,
    68u,
    39u,
    7u,
    3u,
    25u,
    142u,
    190u,
    146u,
    131u,
    76u,
    70u,
    22u,
    4u,
    15u,
    174u,
    49u,
    206u,
    139u,
    35u,
    85u,
    86u,
    210u,
    84u,
    169u,
    230u,
    232u,
    152u,
    234u,
    191u,
    224u,
    94u,
    225u,
    120u,
    55u,
    63u,
    89u,
    53u,
    207u,
    9u,
    64u,
    226u,
    80u,
    111u,
    247u,
    95u,
    159u,
    31u,
    128u,
    185u,
    140u,
    60u,
    227u,
    110u,
    8u,
    133u,
    72u,
    158u,
    143u,
    162u,
    246u,
    17u,
    38u,
    71u,
    160u,
    36u,
    205u,
    79u,
    65u,
    248u,
    173u,
    54u,
    90u,
    237u,
    202u,
    212u,
    13u,
    106u,
    134u,
    114u,
    77u,
    242u,
    249u,
    29u,
    75u,
    27u,
    19u,
    98u,
    199u,
    121u,
    47u,
    178u,
    243u,
    115u,
    241u,
    78u,
    214u,
    215u,
    200u
  },
  {
    58u,
    135u,
    211u,
    206u,
    167u,
    157u,
    128u,
    95u,
    218u,
    189u,
    164u,
    73u,
    119u,
    158u,
    126u,
    63u,
    170u,
    9u,
    17u,
    48u,
    91u,
    85u,
    254u,
    41u,
    53u,
    230u,
    237u,
    134u,
    42u,
    77u,
    149u,
    131u,
    79u,
    153u,
    159u,
    200u,
    194u,
    105u,
    150u,
    176u,
    12u,
    235u,
    40u,
    205u,
    215u,
    35u,
    147u,
    249u,
    45u,
    109u,
    28u,
    245u,
    244u,
    133u,
    107u,
    88u,
    33u,
    129u,
    108u,
    169u,
    190u,
    231u,
    228u,
    208u,
    92u,
    22u,
    52u,
    6u,
    116u,
    34u,
    57u,
    179u,
    252u,
    100u,
    210u,
    233u,
    143u,
    2u,
    182u,
    113u,
    229u,
    120u,
    47u,
    62u,
    255u,
    203u,
    97u,
    78u,
    248u,
    238u,
    173u,
    204u,
    216u,
    125u,
    101u,
    117u,
    240u,
    155u,
    198u,
    191u,
    46u,
    253u,
    132u,
    177u,
    111u,
    27u,
    250u,
    236u,
    82u,
    151u,
    121u,
    183u,
    18u,
    25u,
    172u,
    162u,
    227u,
    68u,
    187u,
    140u,
    80u,
    142u,
    66u,
    247u,
    61u,
    195u,
    65u,
    14u,
    175u,
    161u,
    232u,
    196u,
    163u,
    241u,
    184u,
    56u,
    220u,
    234u,
    160u,
    243u,
    246u,
    217u,
    239u,
    30u,
    64u,
    139u,
    7u,
    49u,
    146u,
    225u,
    251u,
    21u,
    166u,
    171u,
    219u,
    11u,
    145u,
    185u,
    72u,
    124u,
    98u,
    71u,
    76u,
    201u,
    94u,
    1u,
    20u,
    5u,
    23u,
    137u,
    19u,
    89u,
    144u,
    242u,
    38u,
    59u,
    13u,
    165u,
    213u,
    122u,
    174u,
    199u,
    197u,
    99u,
    24u,
    141u,
    90u,
    29u,
    8u,
    86u,
    15u,
    156u,
    67u,
    0u,
    224u,
    4u,
    148u,
    114u,
    123u,
    127u,
    54u,
    60u,
    104u,
    110u,
    221u,
    96u,
    223u,
    180u,
    3u,
    112u,
    37u,
    181u,
    106u,
    44u,
    193u,
    102u,
    152u,
    118u,
    26u,
    87u,
    50u,
    222u,
    51u,
    39u,
    10u,
    75u,
    16u,
    168u,
    178u,
    93u,
    186u,
    207u,
    103u,
    81u,
    115u,
    154u,
    84u,
    55u,
    83u,
    36u,
    226u,
    136u,
    43u,
    69u,
    130u,
    32u,
    209u,
    74u,
    202u,
    138u,
    192u,
    31u,
    70u,
    214u,
    188u,
    212u
  },
  {
    159u,
    174u,
    178u,
    212u,
    14u,
    116u,
    103u,
    142u,
    145u,
    138u,
    187u,
    119u,
    81u,
    242u,
    146u,
    186u,
    249u,
    214u,
    151u,
    182u,
    134u,
    94u,
    102u,
    46u,
    44u,
    32u,
    82u,
    215u,
    69u,
    135u,
    165u,
    12u,
    143u,
    193u,
    208u,
    141u,
    247u,
    124u,
    8u,
    209u,
    21u,
    1u,
    241u,
    53u,
    90u,
    253u,
    86u,
    35u,
    75u,
    31u,
    218u,
    245u,
    228u,
    83u,
    96u,
    222u,
    15u,
    10u,
    201u,
    225u,
    191u,
    239u,
    129u,
    37u,
    197u,
    60u,
    59u,
    181u,
    169u,
    89u,
    101u,
    213u,
    248u,
    18u,
    207u,
    152u,
    52u,
    234u,
    189u,
    20u,
    67u,
    220u,
    54u,
    243u,
    71u,
    126u,
    79u,
    56u,
    6u,
    72u,
    244u,
    205u,
    76u,
    161u,
    175u,
    136u,
    130u,
    55u,
    132u,
    120u,
    200u,
    29u,
    51u,
    63u,
    176u,
    206u,
    58u,
    9u,
    190u,
    38u,
    156u,
    154u,
    137u,
    57u,
    150u,
    11u,
    121u,
    148u,
    117u,
    203u,
    162u,
    230u,
    115u,
    114u,
    92u,
    166u,
    173u,
    111u,
    155u,
    252u,
    47u,
    237u,
    125u,
    184u,
    219u,
    25u,
    73u,
    33u,
    28u,
    43u,
    22u,
    192u,
    157u,
    149u,
    42u,
    255u,
    0u,
    112u,
    113u,
    39u,
    127u,
    109u,
    80u,
    93u,
    45u,
    105u,
    50u,
    17u,
    64u,
    123u,
    85u,
    23u,
    48u,
    5u,
    62u,
    168u,
    122u,
    199u,
    24u,
    131u,
    118u,
    195u,
    210u,
    70u,
    179u,
    194u,
    198u,
    229u,
    65u,
    66u,
    250u,
    171u,
    231u,
    202u,
    254u,
    2u,
    99u,
    238u,
    183u,
    153u,
    87u,
    224u,
    77u,
    139u,
    227u,
    196u,
    108u,
    49u,
    235u,
    13u,
    177u,
    84u,
    41u,
    16u,
    164u,
    221u,
    246u,
    110u,
    167u,
    36u,
    98u,
    232u,
    88u,
    236u,
    3u,
    180u,
    128u,
    133u,
    163u,
    97u,
    140u,
    19u,
    172u,
    188u,
    74u,
    204u,
    91u,
    107u,
    40u,
    185u,
    211u,
    216u,
    27u,
    78u,
    233u,
    95u,
    4u,
    104u,
    226u,
    100u,
    106u,
    223u,
    158u,
    240u,
    61u,
    217u,
    30u,
    68u,
    144u,
    7u,
    170u,
    147u,
    34u,
    26u,
    251u,
    160u
  },
  {
    51u,
    253u,
    174u,
    207u,
    43u,
    108u,
    190u,
    98u,
    68u,
    164u,
    167u,
    93u,
    110u,
    230u,
    97u,
    233u,
    200u,
    137u,
    4u,
    83u,
    11u,
    67u,
    192u,
    74u,
    131u,
    132u,
    249u,
    127u,
    197u,
    94u,
    21u,
    156u,
    90u,
    70u,
    215u,
    218u,
    8u,
    113u,
    53u,
    246u,
    184u,
    106u,
    9u,
    142u,
    199u,
    40u,
    178u,
    22u,
    6u,
    26u,
    81u,
    7u,
    198u,
    105u,
    37u,
    79u,
    220u,
    213u,
    160u,
    77u,
    247u,
    182u,
    35u,
    171u,
    121u,
    75u,
    179u,
    89u,
    65u,
    195u,
    104u,
    205u,
    143u,
    34u,
    33u,
    50u,
    248u,
    229u,
    212u,
    52u,
    48u,
    86u,
    185u,
    136u,
    216u,
    101u,
    15u,
    119u,
    172u,
    5u,
    80u,
    150u,
    20u,
    219u,
    116u,
    96u,
    100u,
    24u,
    47u,
    92u,
    18u,
    103u,
    17u,
    125u,
    36u,
    128u,
    28u,
    209u,
    117u,
    84u,
    135u,
    186u,
    31u,
    153u,
    32u,
    55u,
    0u,
    211u,
    232u,
    227u,
    188u,
    46u,
    78u,
    146u,
    159u,
    222u,
    122u,
    140u,
    95u,
    112u,
    124u,
    99u,
    157u,
    176u,
    147u,
    181u,
    196u,
    175u,
    88u,
    14u,
    120u,
    183u,
    45u,
    102u,
    69u,
    243u,
    214u,
    107u,
    217u,
    238u,
    111u,
    194u,
    254u,
    2u,
    252u,
    149u,
    201u,
    152u,
    144u,
    236u,
    239u,
    54u,
    13u,
    29u,
    134u,
    251u,
    39u,
    228u,
    166u,
    76u,
    242u,
    62u,
    126u,
    60u,
    158u,
    250u,
    226u,
    61u,
    123u,
    208u,
    240u,
    3u,
    71u,
    63u,
    30u,
    177u,
    234u,
    129u,
    169u,
    23u,
    118u,
    225u,
    191u,
    206u,
    235u,
    163u,
    245u,
    165u,
    237u,
    138u,
    204u,
    145u,
    162u,
    85u,
    19u,
    139u,
    114u,
    73u,
    49u,
    58u,
    187u,
    66u,
    244u,
    168u,
    148u,
    12u,
    25u,
    38u,
    255u,
    64u,
    203u,
    170u,
    10u,
    173u,
    210u,
    133u,
    57u,
    161u,
    87u,
    72u,
    151u,
    154u,
    109u,
    141u,
    189u,
    223u,
    180u,
    115u,
    130u,
    59u,
    193u,
    155u,
    41u,
    42u,
    1u,
    221u,
    224u,
    44u,
    241u,
    16u,
    27u,
    56u,
    202u,
    231u,
    91u,
    82u
  },
  {
    163u,
    238u,
    125u,
    18u,
    215u,
    145u,
    117u,
    88u,
    4u,
    162u,
    142u,
    207u,
    237u,
    173u,
    252u,
    6u,
    241u,
    79u,
    213u,
    201u,
    46u,
    230u,
    77u,
    80u,
    56u,
    243u,
    91u,
    226u,
    75u,
    92u,
    33u,
    143u,
    62u,
    112u,
    44u,
    218u,
    166u,
    12u,
    99u,
    248u,
    134u,
    184u,
    167u,
    49u,
    2u,
    221u,
    71u,
    74u,
    124u,
    3u,
    225u,
    175u,
    110u,
    58u,
    186u,
    11u,
    164u,
    210u,
    127u,
    73u,
    165u,
    114u,
    101u,
    181u,
    82u,
    204u,
    178u,
    83u,
    240u,
    84u,
    131u,
    27u,
    128u,
    29u,
    65u,
    54u,
    41u,
    161u,
    197u,
    255u,
    228u,
    222u,
    90u,
    111u,
    35u,
    94u,
    171u,
    42u,
    229u,
    220u,
    156u,
    139u,
    21u,
    194u,
    146u,
    202u,
    22u,
    16u,
    76u,
    169u,
    176u,
    47u,
    182u,
    95u,
    70u,
    86u,
    208u,
    192u,
    132u,
    155u,
    214u,
    57u,
    100u,
    144u,
    154u,
    130u,
    69u,
    102u,
    106u,
    30u,
    1u,
    17u,
    244u,
    53u,
    67u,
    121u,
    188u,
    133u,
    249u,
    151u,
    180u,
    14u,
    236u,
    129u,
    216u,
    212u,
    149u,
    108u,
    98u,
    59u,
    23u,
    172u,
    253u,
    239u,
    227u,
    115u,
    137u,
    96u,
    193u,
    81u,
    126u,
    219u,
    217u,
    138u,
    40u,
    120u,
    170u,
    0u,
    37u,
    140u,
    235u,
    26u,
    109u,
    122u,
    232u,
    116u,
    251u,
    97u,
    7u,
    66u,
    51u,
    93u,
    189u,
    34u,
    63u,
    36u,
    118u,
    48u,
    50u,
    89u,
    105u,
    168u,
    10u,
    150u,
    211u,
    195u,
    72u,
    31u,
    87u,
    233u,
    185u,
    39u,
    152u,
    68u,
    107u,
    199u,
    177u,
    247u,
    245u,
    104u,
    141u,
    103u,
    64u,
    43u,
    187u,
    20u,
    159u,
    148u,
    5u,
    160u,
    242u,
    61u,
    179u,
    191u,
    174u,
    224u,
    234u,
    13u,
    8u,
    25u,
    190u,
    32u,
    85u,
    19u,
    28u,
    196u,
    45u,
    183u,
    223u,
    123u,
    254u,
    78u,
    206u,
    200u,
    38u,
    113u,
    52u,
    203u,
    119u,
    15u,
    231u,
    246u,
    158u,
    135u,
    136u,
    9u,
    250u,
    198u,
    209u,
    60u,
    157u,
    24u,
    205u,
    147u,
    153u,
    55u
  },
  {
    135u,
    197u,
    139u,
    28u,
    154u,
    229u,
    141u,
    59u,
    147u,
    123u,
    9u,
    69u,
    221u,
    103u,
    204u,
    232u,
    205u,
    30u,
    216u,
    245u,
    208u,
    43u,
    63u,
    83u,
    23u,
    193u,
    219u,
    97u,
    250u,
    24u,
    159u,
    207u,
    189u,
    239u,
    241u,
    142u,
    184u,
    78u,
    12u,
    134u,
    177u,
    218u,
    200u,
    109u,
    118u,
    124u,
    202u,
    169u,
    68u,
    60u,
    254u,
    136u,
    6u,
    49u,
    42u,
    213u,
    188u,
    48u,
    178u,
    35u,
    163u,
    224u,
    211u,
    62u,
    195u,
    36u,
    38u,
    88u,
    107u,
    46u,
    175u,
    29u,
    161u,
    157u,
    67u,
    119u,
    130u,
    187u,
    80u,
    114u,
    31u,
    126u,
    18u,
    120u,
    66u,
    228u,
    33u,
    172u,
    251u,
    156u,
    82u,
    17u,
    234u,
    209u,
    55u,
    225u,
    180u,
    164u,
    144u,
    186u,
    121u,
    89u,
    243u,
    85u,
    50u,
    20u,
    167u,
    111u,
    90u,
    212u,
    41u,
    222u,
    174u,
    170u,
    148u,
    44u,
    100u,
    242u,
    53u,
    246u,
    168u,
    32u,
    171u,
    152u,
    39u,
    2u,
    150u,
    122u,
    249u,
    79u,
    140u,
    54u,
    230u,
    15u,
    125u,
    108u,
    173u,
    149u,
    16u,
    101u,
    117u,
    247u,
    115u,
    166u,
    151u,
    91u,
    104u,
    57u,
    14u,
    179u,
    110u,
    51u,
    25u,
    65u,
    244u,
    217u,
    86u,
    192u,
    137u,
    162u,
    58u,
    181u,
    102u,
    22u,
    93u,
    92u,
    21u,
    77u,
    47u,
    19u,
    165u,
    11u,
    210u,
    112u,
    238u,
    194u,
    45u,
    5u,
    185u,
    191u,
    235u,
    10u,
    52u,
    26u,
    223u,
    252u,
    190u,
    105u,
    199u,
    0u,
    231u,
    8u,
    56u,
    75u,
    255u,
    215u,
    129u,
    27u,
    7u,
    214u,
    13u,
    94u,
    106u,
    71u,
    198u,
    37u,
    81u,
    61u,
    74u,
    158u,
    138u,
    4u,
    99u,
    253u,
    236u,
    145u,
    3u,
    87u,
    98u,
    40u,
    131u,
    226u,
    220u,
    176u,
    73u,
    146u,
    34u,
    182u,
    133u,
    196u,
    128u,
    206u,
    84u,
    143u,
    113u,
    72u,
    203u,
    70u,
    127u,
    240u,
    227u,
    132u,
    95u,
    116u,
    248u,
    153u,
    76u,
    201u,
    155u,
    160u,
    1u,
    64u,
    183u,
    237u,
    233u,
    96u
  },
  {
    240u,
    9u,
    21u,
    132u,
    182u,
    222u,
    47u,
    92u,
    25u,
    220u,
    225u,
    53u,
    115u,
    70u,
    202u,
    213u,
    159u,
    157u,
    57u,
    167u,
    209u,
    242u,
    15u,
    166u,
    84u,
    105u,
    147u,
    208u,
    56u,
    185u,
    227u,
    144u,
    31u,
    126u,
    189u,
    136u,
    12u,
    4u,
    155u,
    237u,
    215u,
    252u,
    61u,
    174u,
    29u,
    24u,
    58u,
    62u,
    34u,
    201u,
    135u,
    194u,
    13u,
    95u,
    248u,
    180u,
    200u,
    54u,
    247u,
    41u,
    44u,
    110u,
    181u,
    32u,
    103u,
    10u,
    94u,
    116u,
    212u,
    102u,
    128u,
    39u,
    107u,
    199u,
    7u,
    77u,
    88u,
    190u,
    129u,
    156u,
    146u,
    254u,
    75u,
    154u,
    137u,
    49u,
    22u,
    51u,
    210u,
    153u,
    100u,
    178u,
    211u,
    101u,
    69u,
    184u,
    71u,
    165u,
    11u,
    42u,
    89u,
    106u,
    120u,
    187u,
    143u,
    255u,
    130u,
    207u,
    214u,
    91u,
    206u,
    236u,
    193u,
    66u,
    83u,
    230u,
    141u,
    79u,
    18u,
    63u,
    170u,
    235u,
    37u,
    221u,
    249u,
    104u,
    64u,
    251u,
    191u,
    50u,
    192u,
    46u,
    87u,
    90u,
    23u,
    19u,
    179u,
    158u,
    38u,
    78u,
    188u,
    85u,
    232u,
    125u,
    243u,
    93u,
    250u,
    205u,
    217u,
    140u,
    118u,
    203u,
    81u,
    173u,
    253u,
    131u,
    231u,
    177u,
    80u,
    160u,
    163u,
    1u,
    148u,
    216u,
    5u,
    98u,
    121u,
    162u,
    112u,
    233u,
    114u,
    171u,
    68u,
    218u,
    239u,
    60u,
    108u,
    27u,
    223u,
    36u,
    43u,
    6u,
    168u,
    65u,
    3u,
    48u,
    246u,
    244u,
    226u,
    238u,
    17u,
    145u,
    97u,
    124u,
    138u,
    40u,
    150u,
    133u,
    219u,
    204u,
    33u,
    59u,
    134u,
    172u,
    245u,
    139u,
    35u,
    96u,
    113u,
    0u,
    2u,
    241u,
    8u,
    175u,
    186u,
    117u,
    30u,
    196u,
    197u,
    45u,
    28u,
    119u,
    198u,
    161u,
    82u,
    228u,
    111u,
    142u,
    229u,
    149u,
    224u,
    195u,
    151u,
    164u,
    55u,
    74u,
    176u,
    26u,
    183u,
    14u,
    152u,
    67u,
    76u,
    52u,
    73u,
    86u,
    109u,
    234u,
    169u,
    122u,
    72u,
    123u,
    99u,
    16u,
    127u,
    20u
  },
  {
    244u,
    41u,
    216u,
    46u,
    131u,
    199u,
    254u,
    181u,
    96u,
    191u,
    95u,
    103u,
    9u,
    151u,
    169u,
    138u,
    82u,
    51u,
    63u,
    6u,
    229u,
    242u,
    127u,
    61u,
    15u,
    112u,
    88u,
    94u,
    220u,
    107u,
    233u,
    102u,
    162u,
    4u,
    98u,
    241u,
    146u,
    130u,
    27u,
    182u,
    237u,
    201u,
    137u,
    224u,
    73u,
    34u,
    86u,
    217u,
    54u,
    115u,
    106u,
    255u,
    178u,
    119u,
    81u,
    108u,
    155u,
    32u,
    236u,
    26u,
    202u,
    142u,
    124u,
    92u,
    190u,
    168u,
    134u,
    172u,
    114u,
    52u,
    11u,
    72u,
    31u,
    167u,
    180u,
    0u,
    39u,
    90u,
    140u,
    125u,
    37u,
    218u,
    240u,
    47u,
    76u,
    104u,
    231u,
    160u,
    78u,
    206u,
    70u,
    59u,
    247u,
    75u,
    29u,
    197u,
    174u,
    87u,
    62u,
    185u,
    7u,
    196u,
    132u,
    53u,
    68u,
    171u,
    71u,
    213u,
    1u,
    77u,
    200u,
    157u,
    111u,
    165u,
    136u,
    44u,
    8u,
    123u,
    83u,
    150u,
    60u,
    22u,
    93u,
    189u,
    42u,
    13u,
    116u,
    118u,
    2u,
    69u,
    89u,
    214u,
    21u,
    50u,
    45u,
    57u,
    223u,
    35u,
    97u,
    58u,
    65u,
    128u,
    184u,
    120u,
    105u,
    19u,
    166u,
    163u,
    33u,
    230u,
    74u,
    25u,
    43u,
    170u,
    109u,
    228u,
    239u,
    235u,
    209u,
    192u,
    208u,
    183u,
    145u,
    156u,
    66u,
    14u,
    221u,
    24u,
    17u,
    243u,
    193u,
    227u,
    144u,
    161u,
    152u,
    110u,
    143u,
    148u,
    173u,
    139u,
    16u,
    121u,
    5u,
    91u,
    67u,
    234u,
    48u,
    154u,
    212u,
    133u,
    188u,
    252u,
    117u,
    186u,
    177u,
    20u,
    79u,
    225u,
    246u,
    141u,
    101u,
    10u,
    187u,
    38u,
    207u,
    179u,
    164u,
    205u,
    211u,
    198u,
    203u,
    36u,
    85u,
    253u,
    219u,
    126u,
    176u,
    175u,
    245u,
    49u,
    194u,
    251u,
    149u,
    249u,
    18u,
    28u,
    215u,
    195u,
    159u,
    238u,
    3u,
    113u,
    232u,
    129u,
    226u,
    55u,
    135u,
    40u,
    12u,
    80u,
    64u,
    23u,
    147u,
    204u,
    222u,
    56u,
    99u,
    153u,
    100u,
    84u,
    158u,
    248u,
    30u,
    122u,
    210u,
    250u
  },
  {
    173u,
    10u,
    9u,
    103u,
    39u,
    83u,
    15u,
    41u,
    79u,
    76u,
    97u,
    43u,
    120u,
    21u,
    149u,
    139u,
    141u,
    225u,
    112u,
    150u,
    219u,
    211u,
    143u,
    160u,
    82u,
    189u,
    196u,
    104u,
    248u,
    47u,
    205u,
    216u,
    144u,
    231u,
    67u,
    102u,
    200u,
    208u,
    59u,
    133u,
    164u,
    140u,
    111u,
    207u,
    137u,
    125u,
    222u,
    68u,
    19u,
    249u,
    85u,
    185u,
    58u,
    24u,
    78u,
    92u,
    119u,
    253u,
    124u,
    235u,
    4u,
    161u,
    152u,
    179u,
    252u,
    234u,
    180u,
    227u,
    218u,
    201u,
    221u,
    95u,
    3u,
    168u,
    13u,
    212u,
    134u,
    28u,
    146u,
    202u,
    159u,
    122u,
    60u,
    62u,
    98u,
    131u,
    53u,
    138u,
    130u,
    73u,
    23u,
    157u,
    194u,
    117u,
    210u,
    217u,
    50u,
    57u,
    65u,
    38u,
    18u,
    88u,
    84u,
    56u,
    116u,
    11u,
    171u,
    32u,
    255u,
    123u,
    36u,
    63u,
    228u,
    127u,
    184u,
    162u,
    213u,
    195u,
    0u,
    237u,
    193u,
    148u,
    158u,
    106u,
    209u,
    14u,
    44u,
    46u,
    70u,
    94u,
    247u,
    151u,
    33u,
    71u,
    186u,
    29u,
    242u,
    45u,
    109u,
    99u,
    254u,
    74u,
    232u,
    224u,
    190u,
    49u,
    198u,
    153u,
    31u,
    86u,
    118u,
    178u,
    75u,
    101u,
    238u,
    145u,
    27u,
    135u,
    107u,
    8u,
    25u,
    177u,
    114u,
    176u,
    187u,
    191u,
    61u,
    42u,
    54u,
    30u,
    170u,
    72u,
    77u,
    245u,
    214u,
    20u,
    90u,
    12u,
    5u,
    147u,
    2u,
    16u,
    55u,
    113u,
    182u,
    155u,
    244u,
    142u,
    108u,
    236u,
    230u,
    48u,
    132u,
    87u,
    166u,
    66u,
    169u,
    126u,
    121u,
    229u,
    89u,
    6u,
    220u,
    128u,
    34u,
    17u,
    96u,
    241u,
    243u,
    52u,
    181u,
    115u,
    80u,
    35u,
    81u,
    226u,
    183u,
    22u,
    91u,
    154u,
    129u,
    240u,
    250u,
    251u,
    199u,
    188u,
    163u,
    233u,
    203u,
    246u,
    100u,
    175u,
    37u,
    197u,
    204u,
    1u,
    26u,
    105u,
    206u,
    40u,
    215u,
    156u,
    136u,
    172u,
    64u,
    174u,
    165u,
    167u,
    51u,
    110u,
    239u,
    69u,
    192u,
    223u,
    93u,
    7u
  },
  {
    16u,
    170u,
    56u,
    115u,
    26u,
    36u,
    80u,
    217u,
    145u,
    152u,
    41u,
    35u,
    95u,
    144u,
    159u,
    12u,
    24u,
    156u,
    200u,
    46u,
    87u,
    165u,
    149u,
    201u,
    69u,
    103u,
    11u,
    15u,
    31u,
    191u,
    169u,
    195u,
    183u,
    228u,
    52u,
    173u,
    47u,
    210u,
    222u,
    45u,
    209u,
    158u,
    187u,
    218u,
    251u,
    73u,
    102u,
    214u,
    112u,
    119u,
    66u,
    76u,
    50u,
    180u,
    205u,
    226u,
    172u,
    100u,
    248u,
    146u,
    34u,
    229u,
    120u,
    140u,
    88u,
    177u,
    235u,
    181u,
    130u,
    75u,
    117u,
    122u,
    99u,
    93u,
    147u,
    199u,
    136u,
    244u,
    8u,
    193u,
    6u,
    225u,
    13u,
    141u,
    101u,
    150u,
    162u,
    28u,
    19u,
    10u,
    153u,
    25u,
    72u,
    40u,
    142u,
    92u,
    223u,
    90u,
    224u,
    151u,
    74u,
    123u,
    63u,
    157u,
    49u,
    184u,
    131u,
    208u,
    27u,
    216u,
    220u,
    203u,
    86u,
    255u,
    111u,
    234u,
    106u,
    94u,
    246u,
    167u,
    1u,
    126u,
    213u,
    221u,
    135u,
    166u,
    32u,
    182u,
    105u,
    174u,
    207u,
    240u,
    198u,
    231u,
    30u,
    57u,
    233u,
    104u,
    249u,
    232u,
    179u,
    127u,
    202u,
    65u,
    116u,
    114u,
    245u,
    247u,
    97u,
    190u,
    98u,
    138u,
    176u,
    241u,
    51u,
    91u,
    175u,
    70u,
    59u,
    5u,
    3u,
    84u,
    160u,
    239u,
    14u,
    107u,
    121u,
    185u,
    253u,
    53u,
    194u,
    197u,
    238u,
    252u,
    211u,
    38u,
    20u,
    189u,
    48u,
    109u,
    54u,
    118u,
    83u,
    139u,
    43u,
    42u,
    9u,
    29u,
    4u,
    137u,
    196u,
    78u,
    192u,
    110u,
    154u,
    113u,
    212u,
    108u,
    2u,
    168u,
    178u,
    236u,
    161u,
    215u,
    204u,
    237u,
    163u,
    82u,
    155u,
    96u,
    71u,
    21u,
    79u,
    0u,
    171u,
    230u,
    77u,
    143u,
    68u,
    227u,
    55u,
    250u,
    85u,
    242u,
    206u,
    7u,
    22u,
    61u,
    186u,
    62u,
    64u,
    33u,
    39u,
    124u,
    254u,
    133u,
    60u,
    188u,
    81u,
    37u,
    125u,
    44u,
    18u,
    23u,
    17u,
    89u,
    129u,
    132u,
    243u,
    67u,
    128u,
    134u,
    58u,
    164u,
    219u,
    148u
  },
  {
    52u,
    133u,
    120u,
    163u,
    116u,
    79u,
    151u,
    162u,
    1u,
    117u,
    174u,
    196u,
    119u,
    57u,
    14u,
    159u,
    7u,
    23u,
    106u,
    54u,
    254u,
    85u,
    200u,
    5u,
    227u,
    8u,
    87u,
    138u,
    249u,
    215u,
    128u,
    173u,
    183u,
    228u,
    171u,
    199u,
    82u,
    11u,
    233u,
    237u,
    9u,
    195u,
    4u,
    134u,
    96u,
    100u,
    198u,
    98u,
    150u,
    25u,
    214u,
    207u,
    216u,
    69u,
    229u,
    88u,
    243u,
    245u,
    240u,
    203u,
    205u,
    36u,
    68u,
    131u,
    42u,
    3u,
    251u,
    219u,
    74u,
    179u,
    191u,
    242u,
    118u,
    149u,
    46u,
    65u,
    152u,
    16u,
    75u,
    136u,
    147u,
    148u,
    226u,
    181u,
    168u,
    67u,
    164u,
    51u,
    114u,
    123u,
    38u,
    17u,
    40u,
    122u,
    31u,
    62u,
    221u,
    172u,
    178u,
    135u,
    107u,
    13u,
    91u,
    37u,
    18u,
    95u,
    61u,
    189u,
    12u,
    19u,
    197u,
    141u,
    217u,
    234u,
    73u,
    211u,
    81u,
    232u,
    142u,
    247u,
    188u,
    111u,
    30u,
    94u,
    157u,
    241u,
    130u,
    59u,
    210u,
    76u,
    49u,
    89u,
    212u,
    244u,
    202u,
    33u,
    97u,
    20u,
    115u,
    193u,
    235u,
    27u,
    55u,
    204u,
    146u,
    192u,
    231u,
    93u,
    158u,
    169u,
    156u,
    28u,
    90u,
    48u,
    72u,
    108u,
    143u,
    165u,
    64u,
    109u,
    6u,
    63u,
    166u,
    110u,
    132u,
    180u,
    112u,
    177u,
    50u,
    105u,
    2u,
    184u,
    170u,
    144u,
    153u,
    41u,
    99u,
    154u,
    83u,
    66u,
    84u,
    124u,
    161u,
    34u,
    22u,
    155u,
    86u,
    187u,
    255u,
    182u,
    246u,
    236u,
    45u,
    137u,
    186u,
    225u,
    248u,
    127u,
    102u,
    160u,
    77u,
    176u,
    223u,
    39u,
    167u,
    35u,
    10u,
    185u,
    113u,
    238u,
    209u,
    24u,
    47u,
    43u,
    218u,
    103u,
    92u,
    32u,
    129u,
    220u,
    104u,
    206u,
    253u,
    121u,
    101u,
    250u,
    58u,
    175u,
    194u,
    222u,
    15u,
    252u,
    44u,
    139u,
    239u,
    224u,
    190u,
    126u,
    213u,
    0u,
    201u,
    29u,
    53u,
    208u,
    56u,
    70u,
    26u,
    78u,
    140u,
    145u,
    21u,
    125u,
    71u,
    80u,
    230u,
    60u
  },
  {
    31u,
    73u,
    122u,
    212u,
    217u,
    255u,
    1u,
    100u,
    94u,
    11u,
    214u,
    95u,
    84u,
    221u,
    203u,
    156u,
    242u,
    14u,
    12u,
    90u,
    168u,
    195u,
    65u,
    162u,
    218u,
    234u,
    139u,
    63u,
    247u,
    219u,
    194u,
    183u,
    189u,
    159u,
    80u,
    103u,
    105u,
    213u,
    125u,
    113u,
    166u,
    249u,
    76u,
    135u,
    106u,
    88u,
    163u,
    22u,
    97u,
    72u,
    50u,
    201u,
    64u,
    41u,
    226u,
    118u,
    57u,
    82u,
    69u,
    235u,
    38u,
    25u,
    36u,
    55u,
    128u,
    68u,
    17u,
    222u,
    23u,
    119u,
    79u,
    6u,
    26u,
    77u,
    181u,
    240u,
    204u,
    134u,
    75u,
    127u,
    198u,
    87u,
    112u,
    70u,
    142u,
    130u,
    202u,
    15u,
    60u,
    152u,
    98u,
    246u,
    85u,
    169u,
    173u,
    54u,
    109u,
    190u,
    146u,
    58u,
    193u,
    170u,
    102u,
    245u,
    148u,
    165u,
    114u,
    21u,
    101u,
    132u,
    46u,
    67u,
    108u,
    184u,
    86u,
    89u,
    24u,
    180u,
    176u,
    158u,
    110u,
    136u,
    111u,
    206u,
    191u,
    47u,
    18u,
    19u,
    140u,
    115u,
    28u,
    45u,
    42u,
    211u,
    71u,
    229u,
    4u,
    9u,
    188u,
    250u,
    81u,
    154u,
    231u,
    164u,
    123u,
    254u,
    200u,
    2u,
    241u,
    93u,
    131u,
    20u,
    53u,
    91u,
    66u,
    48u,
    177u,
    145u,
    174u,
    224u,
    29u,
    83u,
    117u,
    8u,
    160u,
    129u,
    35u,
    178u,
    233u,
    121u,
    33u,
    155u,
    179u,
    192u,
    116u,
    208u,
    230u,
    232u,
    34u,
    3u,
    215u,
    244u,
    199u,
    236u,
    175u,
    49u,
    237u,
    209u,
    124u,
    220u,
    104u,
    239u,
    210u,
    172u,
    13u,
    92u,
    107u,
    147u,
    51u,
    187u,
    153u,
    228u,
    32u,
    150u,
    185u,
    251u,
    197u,
    44u,
    99u,
    61u,
    0u,
    96u,
    248u,
    196u,
    30u,
    37u,
    62u,
    126u,
    59u,
    205u,
    207u,
    137u,
    52u,
    39u,
    138u,
    7u,
    144u,
    5u,
    225u,
    167u,
    161u,
    43u,
    16u,
    243u,
    227u,
    186u,
    141u,
    252u,
    74u,
    40u,
    238u,
    78u,
    151u,
    149u,
    56u,
    223u,
    120u,
    182u,
    10u,
    133u,
    216u,
    143u,
    157u,
    27u,
    171u,
    253u
  },
  {
    106u,
    112u,
    231u,
    247u,
    190u,
    55u,
    87u,
    103u,
    117u,
    174u,
    15u,
    249u,
    146u,
    223u,
    9u,
    144u,
    17u,
    16u,
    171u,
    240u,
    96u,
    80u,
    70u,
    21u,
    149u,
    67u,
    245u,
    74u,
    57u,
    4u,
    29u,
    83u,
    154u,
    202u,
    252u,
    31u,
    107u,
    253u,
    196u,
    238u,
    54u,
    7u,
    84u,
    35u,
    164u,
    203u,
    193u,
    168u,
    110u,
    32u,
    30u,
    230u,
    232u,
    173u,
    229u,
    86u,
    192u,
    226u,
    41u,
    142u,
    241u,
    140u,
    178u,
    81u,
    68u,
    209u,
    34u,
    46u,
    18u,
    78u,
    138u,
    44u,
    236u,
    242u,
    28u,
    182u,
    224u,
    5u,
    92u,
    124u,
    167u,
    227u,
    208u,
    97u,
    45u,
    216u,
    199u,
    255u,
    69u,
    89u,
    157u,
    183u,
    48u,
    43u,
    158u,
    134u,
    14u,
    127u,
    197u,
    137u,
    3u,
    40u,
    153u,
    114u,
    113u,
    133u,
    22u,
    53u,
    235u,
    186u,
    188u,
    143u,
    99u,
    248u,
    60u,
    13u,
    101u,
    47u,
    59u,
    1u,
    141u,
    219u,
    126u,
    42u,
    206u,
    91u,
    180u,
    104u,
    181u,
    6u,
    51u,
    82u,
    176u,
    204u,
    102u,
    163u,
    95u,
    61u,
    20u,
    36u,
    64u,
    8u,
    122u,
    151u,
    207u,
    218u,
    198u,
    2u,
    75u,
    88u,
    217u,
    125u,
    79u,
    98u,
    38u,
    120u,
    152u,
    131u,
    63u,
    105u,
    220u,
    116u,
    37u,
    155u,
    165u,
    161u,
    136u,
    189u,
    90u,
    52u,
    19u,
    160u,
    26u,
    172u,
    94u,
    156u,
    145u,
    205u,
    201u,
    246u,
    111u,
    73u,
    187u,
    148u,
    191u,
    25u,
    175u,
    170u,
    135u,
    128u,
    194u,
    71u,
    222u,
    130u,
    211u,
    237u,
    225u,
    39u,
    100u,
    177u,
    24u,
    185u,
    166u,
    215u,
    233u,
    10u,
    139u,
    210u,
    228u,
    11u,
    159u,
    179u,
    115u,
    27u,
    66u,
    212u,
    62u,
    214u,
    162u,
    72u,
    0u,
    49u,
    23u,
    254u,
    200u,
    150u,
    76u,
    234u,
    251u,
    147u,
    108u,
    243u,
    123u,
    65u,
    85u,
    132u,
    56u,
    195u,
    239u,
    50u,
    169u,
    93u,
    58u,
    244u,
    213u,
    221u,
    12u,
    77u,
    129u,
    118u,
    33u,
    184u,
    250u,
    121u,
    109u,
    119u
  },
  {
    102u,
    209u,
    73u,
    97u,
    114u,
    69u,
    133u,
    165u,
    127u,
    26u,
    126u,
    252u,
    173u,
    59u,
    95u,
    184u,
    100u,
    222u,
    178u,
    145u,
    65u,
    35u,
    250u,
    134u,
    107u,
    161u,
    54u,
    103u,
    156u,
    71u,
    243u,
    149u,
    12u,
    139u,
    58u,
    98u,
    116u,
    181u,
    235u,
    37u,
    248u,
    92u,
    244u,
    51u,
    236u,
    32u,
    230u,
    13u,
    8u,
    16u,
    247u,
    70u,
    61u,
    177u,
    204u,
    203u,
    191u,
    111u,
    141u,
    249u,
    216u,
    157u,
    3u,
    219u,
    40u,
    245u,
    18u,
    128u,
    137u,
    182u,
    28u,
    167u,
    183u,
    25u,
    135u,
    0u,
    85u,
    79u,
    166u,
    231u,
    232u,
    242u,
    131u,
    93u,
    208u,
    94u,
    198u,
    253u,
    4u,
    48u,
    226u,
    19u,
    91u,
    34u,
    146u,
    27u,
    33u,
    10u,
    101u,
    86u,
    87u,
    188u,
    31u,
    1u,
    240u,
    200u,
    82u,
    76u,
    186u,
    45u,
    121u,
    211u,
    136u,
    24u,
    67u,
    254u,
    104u,
    207u,
    172u,
    20u,
    64u,
    90u,
    38u,
    6u,
    106u,
    80u,
    75u,
    14u,
    120u,
    81u,
    49u,
    11u,
    223u,
    229u,
    233u,
    205u,
    15u,
    195u,
    206u,
    213u,
    77u,
    72u,
    119u,
    189u,
    199u,
    36u,
    176u,
    117u,
    150u,
    96u,
    148u,
    164u,
    143u,
    214u,
    53u,
    217u,
    158u,
    228u,
    234u,
    144u,
    42u,
    140u,
    185u,
    43u,
    192u,
    238u,
    132u,
    62u,
    44u,
    241u,
    227u,
    175u,
    39u,
    155u,
    57u,
    108u,
    193u,
    162u,
    210u,
    153u,
    237u,
    218u,
    202u,
    55u,
    84u,
    180u,
    154u,
    190u,
    47u,
    124u,
    22u,
    123u,
    221u,
    83u,
    110u,
    68u,
    99u,
    196u,
    5u,
    29u,
    246u,
    169u,
    151u,
    66u,
    239u,
    88u,
    171u,
    7u,
    225u,
    152u,
    220u,
    112u,
    17u,
    201u,
    30u,
    215u,
    179u,
    197u,
    224u,
    170u,
    122u,
    168u,
    115u,
    159u,
    174u,
    142u,
    78u,
    130u,
    212u,
    113u,
    160u,
    9u,
    60u,
    255u,
    138u,
    46u,
    2u,
    129u,
    163u,
    63u,
    118u,
    187u,
    125u,
    109u,
    56u,
    23u,
    21u,
    89u,
    251u,
    41u,
    147u,
    52u,
    194u,
    50u,
    74u,
    105u
  },
  {
    94u,
    122u,
    71u,
    249u,
    74u,
    77u,
    4u,
    41u,
    108u,
    35u,
    239u,
    29u,
    215u,
    178u,
    45u,
    133u,
    193u,
    235u,
    24u,
    2u,
    97u,
    172u,
    56u,
    152u,
    25u,
    26u,
    192u,
    174u,
    113u,
    170u,
    107u,
    167u,
    153u,
    38u,
    137u,
    201u,
    49u,
    5u,
    69u,
    212u,
    243u,
    86u,
    176u,
    160u,
    115u,
    78u,
    142u,
    204u,
    149u,
    87u,
    102u,
    14u,
    156u,
    128u,
    141u,
    36u,
    205u,
    90u,
    101u,
    241u,
    233u,
    127u,
    34u,
    7u,
    155u,
    72u,
    161u,
    206u,
    255u,
    224u,
    68u,
    210u,
    89u,
    179u,
    51u,
    225u,
    169u,
    104u,
    110u,
    1u,
    175u,
    79u,
    54u,
    171u,
    208u,
    222u,
    28u,
    98u,
    177u,
    190u,
    58u,
    211u,
    134u,
    39u,
    19u,
    168u,
    18u,
    228u,
    50u,
    83u,
    6u,
    121u,
    148u,
    166u,
    43u,
    207u,
    188u,
    109u,
    185u,
    92u,
    143u,
    66u,
    194u,
    73u,
    3u,
    247u,
    154u,
    150u,
    131u,
    151u,
    186u,
    173u,
    227u,
    250u,
    157u,
    181u,
    240u,
    182u,
    216u,
    196u,
    184u,
    252u,
    198u,
    132u,
    159u,
    61u,
    220u,
    46u,
    96u,
    70u,
    218u,
    82u,
    105u,
    55u,
    234u,
    145u,
    230u,
    165u,
    138u,
    246u,
    187u,
    8u,
    47u,
    93u,
    33u,
    183u,
    136u,
    40u,
    91u,
    103u,
    144u,
    11u,
    129u,
    17u,
    12u,
    85u,
    213u,
    232u,
    191u,
    31u,
    27u,
    139u,
    245u,
    189u,
    59u,
    53u,
    130u,
    62u,
    217u,
    223u,
    202u,
    84u,
    116u,
    20u,
    158u,
    57u,
    22u,
    118u,
    15u,
    254u,
    42u,
    253u,
    99u,
    162u,
    10u,
    63u,
    242u,
    197u,
    9u,
    214u,
    119u,
    80u,
    140u,
    88u,
    221u,
    146u,
    117u,
    65u,
    124u,
    226u,
    135u,
    95u,
    16u,
    244u,
    75u,
    200u,
    60u,
    23u,
    67u,
    126u,
    231u,
    52u,
    164u,
    112u,
    111u,
    81u,
    114u,
    21u,
    248u,
    64u,
    199u,
    237u,
    13u,
    120u,
    76u,
    44u,
    0u,
    203u,
    147u,
    251u,
    30u,
    106u,
    37u,
    163u,
    100u,
    32u,
    229u,
    125u,
    123u,
    236u,
    48u,
    219u,
    209u,
    238u,
    180u,
    195u
  },
  {
    200u,
    140u,
    109u,
    153u,
    195u,
    91u,
    231u,
    116u,
    49u,
    243u,
    146u,
    2u,
    6u,
    158u,
    206u,
    86u,
    102u,
    176u,
    23u,
    250u,
    183u,
    9u,
    190u,
    148u,
    61u,
    134u,
    172u,
    234u,
    77u,
    178u,
    83u,
    201u,
    97u,
    7u,
    3u,
    171u,
    87u,
    84u,
    208u,
    223u,
    193u,
    55u,
    209u,
    159u,
    185u,
    152u,
    179u,
    118u,
    124u,
    230u,
    254u,
    143u,
    30u,
    196u,
    51u,
    232u,
    81u,
    188u,
    79u,
    233u,
    197u,
    45u,
    32u,
    130u,
    204u,
    236u,
    207u,
    15u,
    58u,
    145u,
    125u,
    103u,
    214u,
    167u,
    219u,
    76u,
    85u,
    182u,
    53u,
    31u,
    65u,
    170u,
    40u,
    18u,
    191u,
    203u,
    129u,
    5u,
    115u,
    120u,
    94u,
    56u,
    113u,
    101u,
    104u,
    139u,
    126u,
    226u,
    151u,
    70u,
    131u,
    220u,
    74u,
    244u,
    122u,
    52u,
    114u,
    62u,
    147u,
    235u,
    28u,
    247u,
    105u,
    181u,
    138u,
    252u,
    66u,
    123u,
    198u,
    4u,
    27u,
    238u,
    25u,
    75u,
    141u,
    210u,
    0u,
    199u,
    184u,
    111u,
    221u,
    154u,
    10u,
    137u,
    14u,
    150u,
    63u,
    119u,
    249u,
    161u,
    174u,
    98u,
    93u,
    168u,
    82u,
    21u,
    24u,
    42u,
    162u,
    144u,
    127u,
    205u,
    186u,
    246u,
    156u,
    173u,
    222u,
    237u,
    33u,
    166u,
    110u,
    202u,
    112u,
    64u,
    128u,
    92u,
    177u,
    44u,
    239u,
    142u,
    165u,
    41u,
    50u,
    54u,
    20u,
    35u,
    59u,
    194u,
    228u,
    224u,
    117u,
    57u,
    80u,
    71u,
    225u,
    169u,
    8u,
    121u,
    26u,
    253u,
    89u,
    163u,
    17u,
    96u,
    1u,
    248u,
    187u,
    149u,
    108u,
    13u,
    213u,
    241u,
    132u,
    99u,
    255u,
    78u,
    215u,
    36u,
    88u,
    90u,
    16u,
    229u,
    242u,
    60u,
    245u,
    34u,
    133u,
    67u,
    180u,
    95u,
    69u,
    72u,
    160u,
    212u,
    43u,
    175u,
    68u,
    251u,
    135u,
    217u,
    11u,
    37u,
    192u,
    157u,
    100u,
    38u,
    73u,
    39u,
    46u,
    48u,
    106u,
    47u,
    189u,
    107u,
    211u,
    22u,
    19u,
    155u,
    227u,
    136u,
    12u,
    218u,
    29u,
    164u,
    216u,
    240u
  },
  {
    19u,
    150u,
    67u,
    221u,
    176u,
    27u,
    226u,
    183u,
    96u,
    148u,
    151u,
    194u,
    103u,
    20u,
    44u,
    139u,
    165u,
    54u,
    131u,
    164u,
    158u,
    184u,
    112u,
    227u,
    213u,
    217u,
    247u,
    130u,
    169u,
    238u,
    29u,
    118u,
    88u,
    135u,
    200u,
    9u,
    109u,
    21u,
    34u,
    89u,
    234u,
    205u,
    86u,
    76u,
    223u,
    93u,
    236u,
    121u,
    108u,
    30u,
    136u,
    105u,
    111u,
    17u,
    2u,
    237u,
    188u,
    144u,
    249u,
    53u,
    91u,
    167u,
    28u,
    50u,
    24u,
    92u,
    68u,
    255u,
    232u,
    220u,
    77u,
    47u,
    4u,
    101u,
    7u,
    138u,
    100u,
    199u,
    198u,
    55u,
    173u,
    207u,
    69u,
    216u,
    137u,
    8u,
    248u,
    10u,
    132u,
    116u,
    3u,
    254u,
    71u,
    84u,
    14u,
    81u,
    94u,
    120u,
    122u,
    189u,
    219u,
    154u,
    245u,
    124u,
    12u,
    113u,
    1u,
    187u,
    41u,
    129u,
    45u,
    110u,
    152u,
    142u,
    141u,
    235u,
    82u,
    233u,
    179u,
    209u,
    203u,
    125u,
    133u,
    174u,
    85u,
    178u,
    64u,
    35u,
    56u,
    162u,
    215u,
    149u,
    229u,
    192u,
    117u,
    61u,
    181u,
    140u,
    155u,
    25u,
    128u,
    11u,
    37u,
    166u,
    13u,
    168u,
    190u,
    22u,
    18u,
    225u,
    32u,
    161u,
    185u,
    36u,
    52u,
    193u,
    6u,
    99u,
    228u,
    57u,
    65u,
    5u,
    156u,
    196u,
    78u,
    240u,
    123u,
    80u,
    26u,
    171u,
    211u,
    79u,
    127u,
    195u,
    95u,
    182u,
    58u,
    51u,
    74u,
    206u,
    157u,
    218u,
    60u,
    104u,
    241u,
    180u,
    212u,
    73u,
    98u,
    40u,
    224u,
    214u,
    33u,
    59u,
    16u,
    231u,
    177u,
    115u,
    0u,
    114u,
    253u,
    153u,
    146u,
    38u,
    222u,
    42u,
    208u,
    43u,
    143u,
    62u,
    31u,
    49u,
    15u,
    243u,
    90u,
    250u,
    170u,
    70u,
    23u,
    48u,
    147u,
    159u,
    66u,
    186u,
    87u,
    119u,
    83u,
    252u,
    134u,
    246u,
    97u,
    175u,
    160u,
    210u,
    145u,
    63u,
    239u,
    202u,
    242u,
    197u,
    72u,
    102u,
    230u,
    244u,
    75u,
    106u,
    172u,
    251u,
    191u,
    46u,
    126u,
    163u,
    107u,
    204u,
    39u,
    201u
  }
};
_UNKNOWN unk_4CD658; // weak
int AES_Rijndael_Te0[256] =
{
  -966564955,
  -126059388,
  -294160487,
  -159679603,
  -855539,
  -697603139,
  -563122255,
  -1849309868,
  1613770832,
  33620227,
  -832084055,
  1445669757,
  -402719207,
  -1244145822,
  1303096294,
  -327780710,
  -1882535355,
  528646813,
  -1983264448,
  -92439161,
  -268764651,
  -1302767125,
  -1907931191,
  -68095989,
  1101901292,
  -1277897625,
  1604494077,
  1169141738,
  597466303,
  1403299063,
  -462261610,
  -1681866661,
  1974974402,
  -503448292,
  1033081774,
  1277568618,
  1815492186,
  2118074177,
  -168298750,
  -2083730353,
  1748251740,
  1369810420,
  -773462732,
  -101584632,
  -495881837,
  -1411852173,
  1647391059,
  706024767,
  134480908,
  -1782069422,
  1176707941,
  -1648114850,
  806885416,
  932615841,
  168101135,
  798661301,
  235341577,
  605164086,
  461406363,
  -538779075,
  -840176858,
  1311188841,
  2142417613,
  -361400929,
  302582043,
  495158174,
  1479289972,
  874125870,
  907746093,
  -596742478,
  -1269146898,
  1537253627,
  -1538108682,
  1983593293,
  -1210657183,
  2108928974,
  1378429307,
  -572267714,
  1580150641,
  327451799,
  -1504488459,
  -1177431704,
  0,
  -1041371860,
  1075847264,
  -469959649,
  2041688520,
  -1235526675,
  -731223362,
  -1916023994,
  1740553945,
  1916352843,
  -1807070498,
  -1739830060,
  -1336387352,
  -2049978550,
  -1143943061,
  -974131414,
  1336584933,
  -302253290,
  -2042412091,
  -1706209833,
  1714631509,
  293963156,
  -1975171633,
  -369493744,
  67240454,
  -25198719,
  -1605349136,
  2017213508,
  631218106,
  1269344483,
  -1571728909,
  1571005438,
  -2143272768,
  93294474,
  1066570413,
  563977660,
  1882732616,
  -235539196,
  1673313503,
  2008463041,
  -1344611723,
  1109467491,
  537923632,
  -436207846,
  -34344178,
  -1076702611,
  -2117218996,
  403442708,
  638784309,
  -1007883217,
  -1101045791,
  899127202,
  -2008791860,
  773265209,
  -1815821225,
  1437050866,
  -58818942,
  2050833735,
  -932944724,
  -1168286233,
  840505643,
  -428641387,
  -1067425632,
  427917720,
  -1638969391,
  -1545806721,
  1143087718,
  1412049534,
  999329963,
  193497219,
  -1941551414,
  -940642775,
  1807268051,
  672404540,
  -1478566279,
  -1134666014,
  369822493,
  -1378100362,
  -606019525,
  1681011286,
  1949973070,
  336202270,
  -1840690725,
  201721354,
  1210328172,
  -1201906460,
  -1614626211,
  -1110191250,
  1135389935,
  -1000185178,
  965841320,
  831886756,
  -739974089,
  -226920053,
  -706222286,
  -1949775805,
  1849112409,
  -630362697,
  26054028,
  -1311386268,
  -1672589614,
  1235855840,
  -663982924,
  -1403627782,
  -202050553,
  -806688219,
  -899324497,
  -193299826,
  1202630377,
  268961816,
  1874508501,
  -260540280,
  1243948399,
  1546530418,
  941366308,
  1470539505,
  1941222599,
  -1748580783,
  -873928669,
  -1579295364,
  -395021156,
  1042226977,
  -1773450275,
  1639824860,
  227249030,
  260737669,
  -529502064,
  2084453954,
  1907733956,
  -865704278,
  -1874310952,
  100860677,
  -134810111,
  470683154,
  -1033805405,
  1781871967,
  -1370007559,
  1773779408,
  394692241,
  -1715355304,
  974986535,
  664706745,
  -639508168,
  -336005101,
  731420851,
  571543859,
  -764843589,
  -1445340816,
  126783113,
  865375399,
  765172662,
  1008606754,
  361203602,
  -907417312,
  -2016489911,
  -1437248001,
  1344809080,
  -1512054918,
  59542671,
  1503764984,
  160008576,
  437062935,
  1707065306,
  -672733647,
  -2076032314,
  -798463816,
  -2109652541,
  697932208,
  1512910199,
  504303377,
  2075177163,
  -1470868228,
  1841019862,
  739644986
}; // idb
int AES_Rijndael_Te1[256] =
{
  -1513725085,
  -2064089988,
  -1712425097,
  -1913226373,
  234877682,
  -1110021269,
  -1310822545,
  1418839493,
  1348481072,
  50462977,
  -1446090905,
  2102799147,
  434634494,
  1656084439,
  -431117397,
  -1695779210,
  1167051466,
  -1658879358,
  1082771913,
  -2013627011,
  368048890,
  -340633255,
  -913422521,
  201060592,
  -331240019,
  1739838676,
  -44064094,
  -364531793,
  -1088185188,
  -145513308,
  -1763413390,
  1536934080,
  -1032472649,
  484572669,
  -1371696237,
  1783375398,
  1517041206,
  1098792767,
  49674231,
  1334037708,
  1550332980,
  -195975771,
  886171109,
  150598129,
  -1813876367,
  1940642008,
  1398944049,
  1059722517,
  201851908,
  1385547719,
  1699095331,
  1587397571,
  674240536,
  -1590192490,
  252314885,
  -1255171430,
  151914247,
  908333586,
  -1692696448,
  1038082786,
  651029483,
  1766729511,
  -847269198,
  -1612024459,
  454166793,
  -1642232957,
  1951935532,
  775166490,
  758520603,
  -1294176658,
  -290170278,
  -77881184,
  -157003182,
  1299594043,
  1639438038,
  -830622797,
  2068982057,
  1054729187,
  1901997871,
  -1760328572,
  -173649069,
  1757008337,
  0,
  750906861,
  1614815264,
  535035132,
  -931548751,
  -306816165,
  -1093375382,
  1183697867,
  -647512386,
  1265776953,
  -560706998,
  -728216500,
  -391096232,
  1250283471,
  1807470800,
  717615087,
  -447763798,
  384695291,
  -981056701,
  -677753523,
  1432761139,
  -1810791035,
  -813021883,
  283769337,
  100925954,
  -2114027649,
  -257929136,
  1148730428,
  -1171939425,
  -481580888,
  -207466159,
  -27417693,
  -1065336768,
  -1979347057,
  -1388342638,
  -1138647651,
  1215313976,
  82966005,
  -547111748,
  -1049119050,
  1974459098,
  1665278241,
  807407632,
  451280895,
  251524083,
  1841287890,
  1283575245,
  337120268,
  891687699,
  801369324,
  -507617441,
  -1573546089,
  -863484860,
  959321879,
  1469301956,
  -229267545,
  -2097381762,
  1199193405,
  -1396153244,
  -407216803,
  724703513,
  -1780059277,
  -1598005152,
  -1743158911,
  -778154161,
  2141445340,
  1715741218,
  2119445034,
  -1422159728,
  -2096396152,
  -896776634,
  700968686,
  -747915080,
  1009259540,
  2041044702,
  -490971554,
  487983883,
  1991105499,
  1004265696,
  1449407026,
  1316239930,
  504629770,
  -611169975,
  168560134,
  1816667172,
  -457679780,
  1570751170,
  1857934291,
  -280777556,
  -1497079198,
  -1472622191,
  -1540254315,
  936633572,
  -1947043463,
  852879335,
  1133234376,
  1500395319,
  -1210421907,
  -1946055283,
  1689376213,
  -761508274,
  -532043351,
  -1260884884,
  -89369002,
  133428468,
  634383082,
  -1345690267,
  -1896580486,
  -381178194,
  403703816,
  -714097990,
  -1997506440,
  1867130149,
  1918643758,
  607656988,
  -245913946,
  -948718412,
  1368901318,
  600565992,
  2090982877,
  -1662487436,
  557719327,
  -577352885,
  -597574211,
  -2045932661,
  -2062579062,
  -1864339344,
  1115438654,
  -999180875,
  -1429445018,
  -661632952,
  84280067,
  33027830,
  303828494,
  -1547542175,
  1600795957,
  -106014889,
  -798377543,
  -1860729210,
  1486471617,
  658119965,
  -1188585826,
  953803233,
  334231800,
  -1288988520,
  857870609,
  -1143838359,
  1890179545,
  -1995993458,
  -1489791852,
  -1238525029,
  574365214,
  -1844082809,
  550103529,
  1233637070,
  -5614251,
  2018519080,
  2057691103,
  -1895592820,
  -128343647,
  -2146858615,
  387583245,
  -630865985,
  836232934,
  -964410814,
  -1194301336,
  -1014873791,
  -1339450983,
  2002398509,
  287182607,
  -881086288,
  -56077228,
  -697451589,
  975967766
}; // idb
int AES_Rijndael_Te2[256] =
{
  1671808611,
  2089089148,
  2006576759,
  2072901243,
  -233963534,
  1807603307,
  1873927791,
  -984313403,
  810573872,
  16974337,
  1739181671,
  729634347,
  -31856642,
  -681396777,
  -1410970197,
  1989864566,
  -901410870,
  -2103631998,
  -918517303,
  2106063485,
  -99225606,
  1508618841,
  1204391495,
  -267650064,
  -1377025619,
  -731401260,
  -1560453214,
  -1343601233,
  -1665195108,
  -1527295068,
  1922491506,
  -1067738176,
  -1211992649,
  -48438787,
  -1817297517,
  644500518,
  911895606,
  1061256767,
  -150800905,
  -867204148,
  878471220,
  -1510714971,
  -449523227,
  -251069967,
  1905517169,
  -663508008,
  827548209,
  356461077,
  67897348,
  -950889017,
  593839651,
  -1017209405,
  405286936,
  -1767819370,
  84871685,
  -1699401830,
  118033927,
  305538066,
  -2137318528,
  -499261470,
  -349778453,
  661212711,
  -1295155278,
  1973414517,
  152769033,
  -2086789757,
  745822252,
  439235610,
  455947803,
  1857215598,
  1525593178,
  -1594139744,
  1391895634,
  994932283,
  -698239018,
  -1278313037,
  695947817,
  -482419229,
  795958831,
  -2070473852,
  1408607827,
  -781665839,
  0,
  -315833875,
  543178784,
  -65018884,
  -1312261711,
  1542305371,
  1790891114,
  -884568629,
  -1093048386,
  961245753,
  1256100938,
  1289001036,
  1491644504,
  -817199665,
  -798245936,
  -282409489,
  -1427812438,
  -82383365,
  1137018435,
  1305975373,
  861234739,
  -2053893755,
  1171229253,
  -116332039,
  33948674,
  2139225727,
  1357946960,
  1011120188,
  -1615190625,
  -1461498968,
  1374921297,
  -1543610973,
  1086357568,
  -1886780017,
  -1834139758,
  -1648615011,
  944271416,
  -184225291,
  -1126210628,
  -1228834890,
  -629821478,
  560153121,
  271589392,
  -15014401,
  -217121293,
  -764559406,
  -850624051,
  202643468,
  322250259,
  -332413972,
  1608629855,
  -1750977129,
  1154254916,
  389623319,
  -1000893500,
  -1477290585,
  2122513534,
  1028094525,
  1689045092,
  1575467613,
  422261273,
  1939203699,
  1621147744,
  -2120738431,
  1339137615,
  -595614756,
  577127458,
  712922154,
  -1867826288,
  -2004677752,
  1187679302,
  -299251730,
  -1194103880,
  339486740,
  -562452514,
  1591917662,
  186455563,
  -612979237,
  -532948000,
  844522546,
  978220090,
  169743370,
  1239126601,
  101321734,
  611076132,
  1558493276,
  -1034051646,
  -747717165,
  -1393605716,
  1655096418,
  -1851246191,
  -1784401515,
  -466103324,
  2039214713,
  -416098841,
  -935097400,
  928607799,
  1840765549,
  -1920204403,
  -714821163,
  1322425422,
  -1444918871,
  1823791212,
  1459268694,
  -200805388,
  -366620694,
  1706019429,
  2056189050,
  -1360443474,
  135794696,
  -1160417350,
  2022240376,
  628050469,
  779246638,
  472135708,
  -1494132826,
  -1261997132,
  -967731258,
  -400307224,
  -579034659,
  1956440180,
  522272287,
  1272813131,
  -1109630531,
  -1954148981,
  -1970991222,
  1888542832,
  1044544574,
  -1245417035,
  1722469478,
  1222152264,
  50660867,
  -167643146,
  236067854,
  1638122081,
  895445557,
  1475980887,
  -1177523783,
  -2037311610,
  -1051158079,
  489110045,
  -1632032866,
  -516367903,
  -132912136,
  -1733088360,
  288563729,
  1773916777,
  -646927911,
  -1903622258,
  -1800981612,
  -1682559589,
  505560094,
  -2020469369,
  -383727127,
  -834041906,
  1442818645,
  678973480,
  -545610273,
  -1936784500,
  -1577559647,
  -1988097655,
  219617805,
  -1076206145,
  -432941082,
  1120306242,
  1756942440,
  1103331905,
  -1716508263,
  762796589,
  252780047,
  -1328841808,
  1425844308,
  -1143575109,
  372911126
}; // idb
int AES_Rijndael_Te3[256] =
{
  1667474886,
  2088535288,
  2004326894,
  2071694838,
  -219017729,
  1802223062,
  1869591006,
  -976923503,
  808472672,
  16843522,
  1734846926,
  724270422,
  -16901657,
  -673750347,
  -1414797747,
  1987484396,
  -892713585,
  -2105369313,
  -909557623,
  2105378810,
  -84273681,
  1499065266,
  1195886990,
  -252703749,
  -1381110719,
  -724277325,
  -1566376609,
  -1347425723,
  -1667449053,
  -1532692653,
  1920112356,
  -1061135461,
  -1212693899,
  -33743647,
  -1819038147,
  640051788,
  909531756,
  1061110142,
  -134806795,
  -859025533,
  875846760,
  -1515850671,
  -437963567,
  -235861767,
  1903268834,
  -656903253,
  825316194,
  353713962,
  67374088,
  -943238507,
  589522246,
  -1010606435,
  404236336,
  -1768513225,
  84217610,
  -1701137105,
  117901582,
  303183396,
  -2139055333,
  -488489505,
  -336910643,
  656894286,
  -1296904833,
  1970642922,
  151591698,
  -2088526307,
  741110872,
  437923380,
  454765878,
  1852748508,
  1515908788,
  -1600062629,
  1381168804,
  993742198,
  -690593353,
  -1280061827,
  690584402,
  -471646499,
  791638366,
  -2071685357,
  1398011302,
  -774805319,
  0,
  -303223615,
  538992704,
  -50585629,
  -1313748871,
  1532751286,
  1785380564,
  -875870579,
  -1094788761,
  960056178,
  1246420628,
  1280103576,
  1482221744,
  -808498555,
  -791647301,
  -269538619,
  -1431640753,
  -67430675,
  1128514950,
  1296947098,
  859002214,
  -2054843375,
  1162203018,
  -101117719,
  33687044,
  2139062782,
  1347481760,
  1010582648,
  -1616922075,
  -1465326773,
  1364325282,
  -1549533603,
  1077985408,
  -1886418427,
  -1835881153,
  -1650607071,
  943212656,
  -168491791,
  -1128472733,
  -1229536905,
  -623217233,
  555836226,
  269496352,
  -58651,
  -202174723,
  -757961281,
  -842183551,
  202118168,
  320025894,
  -320065597,
  1600119230,
  -1751670219,
  1145359496,
  387397934,
  -993765485,
  -1482165675,
  2122220284,
  1027426170,
  1684319432,
  1566435258,
  421079858,
  1936954854,
  1616945344,
  -2122213351,
  1330631070,
  -589529181,
  572679748,
  707427924,
  -1869567173,
  -2004319477,
  1179044492,
  -286381625,
  -1195846805,
  336870440,
  -555845209,
  1583276732,
  185277718,
  -606374227,
  -522175525,
  842159716,
  976899700,
  168435220,
  1229577106,
  101059084,
  606366792,
  1549591736,
  -1027449441,
  -741118275,
  -1397952701,
  1650632388,
  -1852725191,
  -1785355215,
  -454805549,
  2038008818,
  -404278571,
  -926399605,
  926374254,
  1835907034,
  -1920103423,
  -707435343,
  1313788572,
  -1448484791,
  1819063512,
  1448540844,
  -185333773,
  -353753649,
  1701162954,
  2054852340,
  -1364268729,
  134748176,
  -1162160785,
  2021165296,
  623210314,
  774795868,
  471606328,
  -1499008681,
  -1263220877,
  -960081513,
  -387439669,
  -572687199,
  1953799400,
  522133822,
  1263263126,
  -1111630751,
  -1953790451,
  -1970633457,
  1886425312,
  1044267644,
  -1246378895,
  1718004428,
  1212733584,
  50529542,
  -151649801,
  235803164,
  1633788866,
  892690282,
  1465383342,
  -1179004823,
  -2038001385,
  -1044293479,
  488449850,
  -1633765081,
  -505333543,
  -117959701,
  -1734823125,
  286339874,
  1768537042,
  -640061271,
  -1903261433,
  -1802197197,
  -1684294099,
  505291324,
  -2021158379,
  -370597687,
  -825341561,
  1431699370,
  673740880,
  -539002203,
  -1936945405,
  -1583220647,
  -1987477495,
  218961690,
  -1077945755,
  -421121577,
  1111672452,
  1751693520,
  1094828930,
  -1717981143,
  757954394,
  252645662,
  -1330590853,
  1414855848,
  -1145317779,
  370555436
}; // idb
int AES_Rijndael_Te4[256] =
{
  1660944384,
  2080374784,
  1996488704,
  2063597568,
  -234881024,
  1795162112,
  1862270976,
  -989855744,
  805306368,
  16777216,
  1728053248,
  721420288,
  -33554432,
  -687865856,
  -1426063360,
  1979711488,
  -905969664,
  -2113929216,
  -922746880,
  2097152000,
  -100663296,
  1493172224,
  1191182336,
  -268435456,
  -1392508928,
  -738197504,
  -1577058304,
  -1358954496,
  -1677721600,
  -1543503872,
  1912602624,
  -1073741824,
  -1224736768,
  -50331648,
  -1828716544,
  637534208,
  905969664,
  1056964608,
  -150994944,
  -872415232,
  872415232,
  -1526726656,
  -452984832,
  -251658240,
  1895825408,
  -671088640,
  822083584,
  352321536,
  67108864,
  -956301312,
  587202560,
  -1023410176,
  402653184,
  -1778384896,
  83886080,
  -1711276032,
  117440512,
  301989888,
  2147483648,
  -503316480,
  -352321536,
  654311424,
  -1308622848,
  1962934272,
  150994944,
  -2097152000,
  738197504,
  436207616,
  452984832,
  1845493760,
  1509949440,
  -1610612736,
  1375731712,
  989855744,
  -704643072,
  -1291845632,
  687865856,
  -486539264,
  788529152,
  -2080374784,
  1392508928,
  -788529152,
  0,
  -318767104,
  536870912,
  -67108864,
  -1325400064,
  1526726656,
  1778384896,
  -889192448,
  -1107296256,
  956301312,
  1241513984,
  1275068416,
  1476395008,
  -822083584,
  -805306368,
  -285212672,
  -1442840576,
  -83886080,
  1124073472,
  1291845632,
  855638016,
  -2063597568,
  1157627904,
  -117440512,
  33554432,
  2130706432,
  1342177280,
  1006632960,
  -1627389952,
  -1476395008,
  1358954496,
  -1560281088,
  1073741824,
  -1895825408,
  -1845493760,
  -1660944384,
  939524096,
  -184549376,
  -1140850688,
  -1241513984,
  -637534208,
  553648128,
  268435456,
  -16777216,
  -218103808,
  -771751936,
  -855638016,
  201326592,
  318767104,
  -335544320,
  1593835520,
  -1761607680,
  1140850688,
  385875968,
  -1006632960,
  -1493172224,
  2113929216,
  1023410176,
  1677721600,
  1560281088,
  419430400,
  1929379840,
  1610612736,
  -2130706432,
  1325400064,
  -603979776,
  570425344,
  704643072,
  -1879048192,
  -2013265920,
  1174405120,
  -301989888,
  -1207959552,
  335544320,
  -570425344,
  1577058304,
  184549376,
  -620756992,
  -536870912,
  838860800,
  973078528,
  167772160,
  1224736768,
  100663296,
  603979776,
  1543503872,
  -1040187392,
  -754974720,
  -1409286144,
  1644167168,
  -1862270976,
  -1795162112,
  -469762048,
  2030043136,
  -419430400,
  -939524096,
  922746880,
  1828716544,
  -1929379840,
  -721420288,
  1308622848,
  -1459617792,
  1811939328,
  1442840576,
  -201326592,
  -369098752,
  1694498816,
  2046820352,
  -1375731712,
  134217728,
  -1174405120,
  2013265920,
  620756992,
  771751936,
  469762048,
  -1509949440,
  -1275068416,
  -973078528,
  -402653184,
  -587202560,
  1946157056,
  520093696,
  1258291200,
  -1124073472,
  -1962934272,
  -1979711488,
  1879048192,
  1040187392,
  -1258291200,
  1711276032,
  1207959552,
  50331648,
  -167772160,
  234881024,
  1627389952,
  889192448,
  1459617792,
  -1191182336,
  -2046820352,
  -1056964608,
  486539264,
  -1644167168,
  -520093696,
  -134217728,
  -1744830464,
  285212672,
  1761607680,
  -654311424,
  -1912602624,
  -1811939328,
  -1694498816,
  503316480,
  -2030043136,
  -385875968,
  -838860800,
  1426063360,
  671088640,
  -553648128,
  -1946157056,
  -1593835520,
  -1996488704,
  218103808,
  -1090519040,
  -436207616,
  1107296256,
  1744830464,
  1090519040,
  -1728053248,
  754974720,
  251658240,
  -1342177280,
  1409286144,
  -1157627904,
  369098752
}; // idb
int AES_Rijndael_Te5[256] =
{
  6488064,
  8126464,
  7798784,
  8060928,
  15859712,
  7012352,
  7274496,
  12910592,
  3145728,
  65536,
  6750208,
  2818048,
  16646144,
  14090240,
  11206656,
  7733248,
  13238272,
  8519680,
  13172736,
  8192000,
  16384000,
  5832704,
  4653056,
  15728640,
  11337728,
  13893632,
  10616832,
  11468800,
  10223616,
  10747904,
  7471104,
  12582912,
  11993088,
  16580608,
  9633792,
  2490368,
  3538944,
  4128768,
  16187392,
  13369344,
  3407872,
  10813440,
  15007744,
  15794176,
  7405568,
  14155776,
  3211264,
  1376256,
  262144,
  13041664,
  2293760,
  12779520,
  1572864,
  9830400,
  327680,
  10092544,
  458752,
  1179648,
  8388608,
  14811136,
  15400960,
  2555904,
  11665408,
  7667712,
  589824,
  8585216,
  2883584,
  1703936,
  1769472,
  7208960,
  5898240,
  10485760,
  5373952,
  3866624,
  14024704,
  11730944,
  2686976,
  14876672,
  3080192,
  8650752,
  5439488,
  13697024,
  0,
  15532032,
  2097152,
  16515072,
  11599872,
  5963776,
  6946816,
  13303808,
  12451840,
  3735552,
  4849664,
  4980736,
  5767168,
  13565952,
  13631488,
  15663104,
  11141120,
  16449536,
  4390912,
  5046272,
  3342336,
  8716288,
  4521984,
  16318464,
  131072,
  8323072,
  5242880,
  3932160,
  10420224,
  11010048,
  5308416,
  10682368,
  4194304,
  9371648,
  9568256,
  10289152,
  3670016,
  16056320,
  12320768,
  11927552,
  14286848,
  2162688,
  1048576,
  16711680,
  15925248,
  13762560,
  13434880,
  786432,
  1245184,
  15466496,
  6225920,
  9895936,
  4456448,
  1507328,
  12845056,
  10944512,
  8257536,
  3997696,
  6553600,
  6094848,
  1638400,
  7536640,
  6291456,
  8454144,
  5177344,
  14417920,
  2228224,
  2752512,
  9437184,
  8912896,
  4587520,
  15597568,
  12058624,
  1310720,
  14548992,
  6160384,
  720896,
  14352384,
  14680064,
  3276800,
  3801088,
  655360,
  4784128,
  393216,
  2359296,
  6029312,
  12713984,
  13828096,
  11272192,
  6422528,
  9502720,
  9764864,
  14942208,
  7929856,
  15138816,
  13107200,
  3604480,
  7143424,
  9240576,
  13959168,
  5111808,
  11075584,
  7077888,
  5636096,
  15990784,
  15335424,
  6619136,
  7995392,
  11403264,
  524288,
  12189696,
  7864320,
  2424832,
  3014656,
  1835008,
  10878976,
  11796480,
  12976128,
  15204352,
  14483456,
  7602176,
  2031616,
  4915200,
  12386304,
  9109504,
  9043968,
  7340032,
  4063232,
  11862016,
  6684672,
  4718592,
  196608,
  16121856,
  917504,
  6356992,
  3473408,
  5701632,
  12124160,
  8781824,
  12648448,
  1900544,
  10354688,
  14745600,
  16252928,
  9961472,
  1114112,
  6881280,
  14221312,
  9306112,
  9699328,
  10158080,
  1966080,
  8847360,
  15269888,
  13500416,
  5570560,
  2621440,
  14614528,
  9175040,
  10551296,
  8978432,
  851968,
  12517376,
  15073280,
  4325376,
  6815744,
  4259840,
  10027008,
  2949120,
  983040,
  11534336,
  5505024,
  12255232,
  1441792
}; // idb
int AES_Rijndael_Te6[256] =
{
  25344,
  31744,
  30464,
  31488,
  61952,
  27392,
  28416,
  50432,
  12288,
  256,
  26368,
  11008,
  65024,
  55040,
  43776,
  30208,
  51712,
  33280,
  51456,
  32000,
  64000,
  22784,
  18176,
  61440,
  44288,
  54272,
  41472,
  44800,
  39936,
  41984,
  29184,
  49152,
  46848,
  64768,
  37632,
  9728,
  13824,
  16128,
  63232,
  52224,
  13312,
  42240,
  58624,
  61696,
  28928,
  55296,
  12544,
  5376,
  1024,
  50944,
  8960,
  49920,
  6144,
  38400,
  1280,
  39424,
  1792,
  4608,
  32768,
  57856,
  60160,
  9984,
  45568,
  29952,
  2304,
  33536,
  11264,
  6656,
  6912,
  28160,
  23040,
  40960,
  20992,
  15104,
  54784,
  45824,
  10496,
  58112,
  12032,
  33792,
  21248,
  53504,
  0,
  60672,
  8192,
  64512,
  45312,
  23296,
  27136,
  51968,
  48640,
  14592,
  18944,
  19456,
  22528,
  52992,
  53248,
  61184,
  43520,
  64256,
  17152,
  19712,
  13056,
  34048,
  17664,
  63744,
  512,
  32512,
  20480,
  15360,
  40704,
  43008,
  20736,
  41728,
  16384,
  36608,
  37376,
  40192,
  14336,
  62720,
  48128,
  46592,
  55808,
  8448,
  4096,
  65280,
  62208,
  53760,
  52480,
  3072,
  4864,
  60416,
  24320,
  38656,
  17408,
  5888,
  50176,
  42752,
  32256,
  15616,
  25600,
  23808,
  6400,
  29440,
  24576,
  33024,
  20224,
  56320,
  8704,
  10752,
  36864,
  34816,
  17920,
  60928,
  47104,
  5120,
  56832,
  24064,
  2816,
  56064,
  57344,
  12800,
  14848,
  2560,
  18688,
  1536,
  9216,
  23552,
  49664,
  54016,
  44032,
  25088,
  37120,
  38144,
  58368,
  30976,
  59136,
  51200,
  14080,
  27904,
  36096,
  54528,
  19968,
  43264,
  27648,
  22016,
  62464,
  59904,
  25856,
  31232,
  44544,
  2048,
  47616,
  30720,
  9472,
  11776,
  7168,
  42496,
  46080,
  50688,
  59392,
  56576,
  29696,
  7936,
  19200,
  48384,
  35584,
  35328,
  28672,
  15872,
  46336,
  26112,
  18432,
  768,
  62976,
  3584,
  24832,
  13568,
  22272,
  47360,
  34304,
  49408,
  7424,
  40448,
  57600,
  63488,
  38912,
  4352,
  26880,
  55552,
  36352,
  37888,
  39680,
  7680,
  34560,
  59648,
  52736,
  21760,
  10240,
  57088,
  35840,
  41216,
  35072,
  3328,
  48896,
  58880,
  16896,
  26624,
  16640,
  39168,
  11520,
  3840,
  45056,
  21504,
  47872,
  5632
}; // idb
int AES_Rijndael_S[256] =
{
  99,
  124,
  119,
  123,
  242,
  107,
  111,
  197,
  48,
  1,
  103,
  43,
  254,
  215,
  171,
  118,
  202,
  130,
  201,
  125,
  250,
  89,
  71,
  240,
  173,
  212,
  162,
  175,
  156,
  164,
  114,
  192,
  183,
  253,
  147,
  38,
  54,
  63,
  247,
  204,
  52,
  165,
  229,
  241,
  113,
  216,
  49,
  21,
  4,
  199,
  35,
  195,
  24,
  150,
  5,
  154,
  7,
  18,
  128,
  226,
  235,
  39,
  178,
  117,
  9,
  131,
  44,
  26,
  27,
  110,
  90,
  160,
  82,
  59,
  214,
  179,
  41,
  227,
  47,
  132,
  83,
  209,
  0,
  237,
  32,
  252,
  177,
  91,
  106,
  203,
  190,
  57,
  74,
  76,
  88,
  207,
  208,
  239,
  170,
  251,
  67,
  77,
  51,
  133,
  69,
  249,
  2,
  127,
  80,
  60,
  159,
  168,
  81,
  163,
  64,
  143,
  146,
  157,
  56,
  245,
  188,
  182,
  218,
  33,
  16,
  255,
  243,
  210,
  205,
  12,
  19,
  236,
  95,
  151,
  68,
  23,
  196,
  167,
  126,
  61,
  100,
  93,
  25,
  115,
  96,
  129,
  79,
  220,
  34,
  42,
  144,
  136,
  70,
  238,
  184,
  20,
  222,
  94,
  11,
  219,
  224,
  50,
  58,
  10,
  73,
  6,
  36,
  92,
  194,
  211,
  172,
  98,
  145,
  149,
  228,
  121,
  231,
  200,
  55,
  109,
  141,
  213,
  78,
  169,
  108,
  86,
  244,
  234,
  101,
  122,
  174,
  8,
  186,
  120,
  37,
  46,
  28,
  166,
  180,
  198,
  232,
  221,
  116,
  31,
  75,
  189,
  139,
  138,
  112,
  62,
  181,
  102,
  72,
  3,
  246,
  14,
  97,
  53,
  87,
  185,
  134,
  193,
  29,
  158,
  225,
  248,
  152,
  17,
  105,
  217,
  142,
  148,
  155,
  30,
  135,
  233,
  206,
  85,
  40,
  223,
  140,
  161,
  137,
  13,
  191,
  230,
  66,
  104,
  65,
  153,
  45,
  15,
  176,
  84,
  187,
  22
}; // idb
int AES_Rijndael_Td0[256] =
{
  1374988112,
  2118214995,
  437757123,
  975658646,
  1001089995,
  530400753,
  -1392879445,
  1273168787,
  540080725,
  -1384747530,
  -1999866223,
  -184398811,
  1340463100,
  -987051049,
  641025152,
  -1251826801,
  -558802359,
  632953703,
  1172967064,
  1576976609,
  -1020300030,
  -2125664238,
  -1924753501,
  1809054150,
  59727847,
  361929877,
  -1083344149,
  -1789765158,
  -725712083,
  1484005843,
  1239443753,
  -1899378620,
  1975683434,
  -191989384,
  -1722270101,
  666464733,
  -1092530250,
  -259478249,
  -920605594,
  2110667444,
  1675577880,
  -451268222,
  -1756286112,
  1649639237,
  -1318815776,
  -1150570876,
  -25059300,
  -116905068,
  1883793496,
  -1891238631,
  -1797362553,
  1383856311,
  -1418472669,
  1917518562,
  -484470953,
  1716890410,
  -1293211641,
  800440835,
  -2033878118,
  -751368027,
  807962610,
  599762354,
  33778362,
  -317291940,
  -1966138325,
  -1485196142,
  -217582864,
  1315562145,
  1708848333,
  101039829,
  -785096161,
  -995688822,
  875451293,
  -1561111136,
  92987698,
  -1527321739,
  193195065,
  1080094634,
  1584504582,
  -1116860335,
  1042385657,
  -1763899843,
  -583137874,
  1306967366,
  -1856729675,
  1908694277,
  67556463,
  1615861247,
  429456164,
  -692196969,
  -1992277044,
  1742315127,
  -1326955843,
  126454664,
  -417768648,
  2043211483,
  -1585706425,
  2084704233,
  -125559095,
  0,
  159417987,
  841739592,
  504459436,
  1817866830,
  -49348613,
  260388950,
  1034867998,
  908933415,
  168810852,
  1750902305,
  -1688513327,
  607530554,
  202008497,
  -1822955761,
  -1259432238,
  463180190,
  -2134850225,
  1641816226,
  1517767529,
  470948374,
  -493635062,
  -1063245083,
  1008918595,
  303765277,
  235474187,
  -225720403,
  766945465,
  337553864,
  1475418501,
  -1351284916,
  -291906117,
  -1551933187,
  -150919521,
  1551037884,
  1147550661,
  1543208500,
  -1958532746,
  -886847780,
  -1225917336,
  -1192955549,
  -684598070,
  1113818384,
  328671808,
  -2067394272,
  -2058738563,
  -759480840,
  -1359400431,
  -953573011,
  496906059,
  -592301837,
  226906860,
  2009195472,
  733156972,
  -1452230247,
  294930682,
  1206477858,
  -1459843900,
  -1594867942,
  1451044056,
  573804783,
  -2025238841,
  -650587711,
  -1932877058,
  -1730933962,
  -1493859889,
  -1518674392,
  -625504730,
  1068351396,
  742039012,
  1350078989,
  1784663195,
  1417561698,
  -158526526,
  -1864845080,
  775550814,
  -2101104651,
  -1621262146,
  1775276924,
  1876241833,
  -819653965,
  -928212677,
  270040487,
  -392404114,
  -616842373,
  -853116919,
  1851332852,
  -325404927,
  -2091935064,
  -426414491,
  -1426069890,
  566021896,
  -283776794,
  -1159226407,
  1248802510,
  -358676012,
  699432150,
  832877231,
  708780849,
  -962227152,
  899835584,
  1951317047,
  -58537306,
  -527380304,
  866637845,
  -251357110,
  1106041591,
  2144161806,
  395441711,
  1984812685,
  1139781709,
  -861254316,
  -459930401,
  -1630423581,
  1282050075,
  -1054072904,
  1181045119,
  -1654724092,
  25965917,
  -91786125,
  -83148498,
  -1285087910,
  -1831087534,
  -384805325,
  1842759443,
  -1697160820,
  933301370,
  1509430414,
  -351060855,
  -827774994,
  -1218328267,
  -518199827,
  2051518780,
  -1663901863,
  1441952575,
  404016761,
  1942435775,
  1408749034,
  1610459739,
  -549621996,
  2017778566,
  -894438527,
  -1184316354,
  941896748,
  -1029488545,
  371049330,
  -1126030068,
  675039627,
  -15887039,
  967311729,
  135050206,
  -659233636,
  1683407248,
  2076935265,
  -718096784,
  1215061108,
  -793225406
}; // weak
int AES_Rijndael_Td1[256] =
{
  1347548327,
  1400783205,
  -1021700188,
  -1774573730,
  -885281941,
  -249586363,
  -1414727080,
  -1823743229,
  1428173050,
  -156404115,
  -1853305738,
  636813900,
  -61872681,
  -674944309,
  -2144979644,
  -1883938141,
  1239331162,
  1730525723,
  -1740248562,
  -513933632,
  46346101,
  310463728,
  -1551022441,
  -966011911,
  -419197089,
  -1793748324,
  -339776134,
  -627748263,
  768917123,
  -749177823,
  692707433,
  1150208456,
  1786102409,
  2029293177,
  1805211710,
  -584599183,
  -1229004465,
  401639597,
  1724457132,
  -1266823622,
  409198410,
  -2098914767,
  1620529459,
  1164071807,
  -525245321,
  -2068091986,
  486441376,
  -1795618773,
  1483753576,
  428819965,
  -2020286868,
  -1219331080,
  598438867,
  -495826174,
  1474502543,
  711349675,
  129166120,
  53458370,
  -1702443653,
  -1512884472,
  -231724921,
  -1306280027,
  -1174273174,
  1559041666,
  730517276,
  -1834518092,
  -252508174,
  -1588696606,
  -848962828,
  -721025602,
  533804130,
  -1966823682,
  -1657524653,
  -1599933611,
  839224033,
  1973745387,
  957055980,
  -1438621457,
  106852767,
  1371368976,
  -113368694,
  1033297158,
  -1361232379,
  1179510461,
  -1248766835,
  91341917,
  1862534868,
  -10465259,
  605657339,
  -1747534359,
  -863420349,
  2003294622,
  -1112479678,
  -2012771957,
  954669403,
  -612775698,
  1201765386,
  -377732593,
  -906460130,
  0,
  -2096529274,
  1211247597,
  -1407315600,
  1315723890,
  -67301633,
  1443857720,
  507358933,
  657861945,
  1678381017,
  560487590,
  -778347692,
  975451694,
  -1324610969,
  261314535,
  -759894378,
  -1642357871,
  1333838021,
  -1570644960,
  1767536459,
  370938394,
  182621114,
  -440360918,
  1128014560,
  487725847,
  185469197,
  -1376613433,
  -1188186456,
  -938205527,
  -2057834215,
  1286567175,
  -1141990947,
  -39616672,
  -1611202266,
  -1134791947,
  -985373125,
  878443390,
  1988838185,
  -590666810,
  1756818940,
  1673061617,
  -891866660,
  272786309,
  1075025698,
  545572369,
  2105887268,
  -120407235,
  296679730,
  1841768865,
  1260232239,
  -203640272,
  -334657966,
  -797457949,
  1814803222,
  -1716948807,
  -99511224,
  575138148,
  -995558260,
  446754879,
  -665420500,
  -282971248,
  -947435186,
  -1042728751,
  -24327518,
  915985419,
  -811141759,
  681933534,
  651868046,
  -1539330625,
  -466863459,
  223377554,
  -1687527476,
  1649704518,
  -1024029421,
  -393160520,
  1580087799,
  -175979601,
  -1096852096,
  2087309459,
  -1452288723,
  -1278270190,
  1003007129,
  -1492117379,
  1860738147,
  2077965243,
  164439672,
  -194094824,
  32283319,
  -1467789414,
  1709610350,
  2125135846,
  136428751,
  -420538904,
  -642062437,
  -833982666,
  -722821367,
  -701910916,
  -1355701070,
  824852259,
  818324884,
  -1070226842,
  930369212,
  -1493400886,
  -1327460144,
  355706840,
  1257309336,
  -146674470,
  243256656,
  790073846,
  -1921626666,
  1296297904,
  1422699085,
  -538667516,
  -476130891,
  457992840,
  -1195299809,
  2135319889,
  77422314,
  1560382517,
  1945798516,
  788204353,
  1521706781,
  1385356242,
  870912086,
  325965383,
  -1936009375,
  2050466060,
  -1906706412,
  -1981082820,
  -288446169,
  901210569,
  -304014107,
  1014646705,
  1503449823,
  1062597235,
  2031621326,
  -1082931401,
  -363595827,
  1533017514,
  350174575,
  -2038938405,
  -2117423117,
  1052338372,
  741876788,
  1606591296,
  1914052035,
  213705253,
  -1960297399,
  1107234197,
  1899603969,
  -569897805,
  -1663519516,
  -1872472383,
  1635502980,
  1893020342,
  1950903388,
  1120974935
}; // weak
int AES_Rijndael_Td2[256] =
{
  -1487908364,
  1699970625,
  -1530717673,
  1586903591,
  1808481195,
  1173430173,
  1487645946,
  59984867,
  -95084496,
  1844882806,
  1989249228,
  1277555970,
  -671330331,
  -875051734,
  1149249077,
  -1550863006,
  1514790577,
  459744698,
  244860394,
  -1058972162,
  1963115311,
  -267222708,
  -1750889146,
  -104436781,
  1608975247,
  -1667951214,
  2062270317,
  1507497298,
  -2094148418,
  567498868,
  1764313568,
  -935031095,
  -1989511742,
  2037970062,
  1047239000,
  1910319033,
  1337376481,
  -1390940024,
  -1402549984,
  984907214,
  1243112415,
  830661914,
  861968209,
  2135253587,
  2011214180,
  -1367032981,
  -1608712575,
  731183368,
  1750626376,
  -48656571,
  1820824798,
  -122203525,
  -752637069,
  48394827,
  -1890065633,
  -1423284651,
  671593195,
  -1039978571,
  2073724613,
  145085239,
  -2014171096,
  -1515052097,
  1790575107,
  -2107839210,
  472615631,
  -1265457287,
  -219090169,
  -492745111,
  -187865638,
  -1093335547,
  1646252340,
  -24460122,
  1402811438,
  1436590835,
  -516815478,
  -344611594,
  -331805821,
  -274055072,
  -1626972559,
  273792366,
  -1963377119,
  104699613,
  95345982,
  -1119466010,
  -1917480620,
  1560637892,
  -730921978,
  369057872,
  -81520232,
  -375925059,
  1137477952,
  -1636341799,
  1119727848,
  -1954019447,
  1530455833,
  -287606328,
  172466556,
  266959938,
  516552836,
  0,
  -2038232704,
  -314035669,
  1890328081,
  1917742170,
  -262898,
  945164165,
  -719438418,
  958871085,
  -647755249,
  -1507760036,
  1423022939,
  775562294,
  1739656202,
  -418409641,
  -1764576018,
  -1851909221,
  -984645440,
  547512796,
  1265195639,
  437656594,
  -1173691757,
  719700128,
  -532464606,
  387781147,
  218828297,
  -944901493,
  -1464259146,
  -1446505442,
  428169201,
  122466165,
  -574886247,
  1627235199,
  648017665,
  -172204942,
  1002783846,
  2117360635,
  695634755,
  -958608605,
  -60246291,
  -245122844,
  -590686415,
  -2062531997,
  574624663,
  287343814,
  612205898,
  1039717051,
  840019705,
  -1586641111,
  793451934,
  821288114,
  1391201670,
  -472877119,
  376187827,
  -1181111952,
  1224348052,
  1679968233,
  -1933268740,
  1058709744,
  752375421,
  -1863376333,
  1321699145,
  -775825096,
  -1560376118,
  188127444,
  -2117097739,
  -567761542,
  -1910056265,
  -1079754835,
  -1645990854,
  -1844621192,
  -862229921,
  1180849278,
  331544205,
  -1192718120,
  -144822727,
  -1342864701,
  -2134991011,
  -1820562992,
  766078933,
  313773861,
  -1724135252,
  2108100632,
  1668212892,
  -1149510853,
  2013908262,
  418672217,
  -1224610662,
  -1700232369,
  1852171925,
  -427906305,
  -821550660,
  -387518699,
  -1680229657,
  919489135,
  164948639,
  2094410160,
  -1297141340,
  590424639,
  -1808742747,
  1723872674,
  -1137216434,
  -895026046,
  -793714544,
  -669699161,
  -1739919100,
  -621329940,
  1343127501,
  -164685935,
  -695372211,
  -1337113617,
  1297403050,
  81781910,
  -1243373871,
  -2011476886,
  532201772,
  1367295589,
  -368796322,
  895287692,
  1953757831,
  1093597963,
  492483431,
  -766340389,
  1446242576,
  1192455638,
  1636604631,
  209336225,
  344873464,
  1015671571,
  669961897,
  -919226527,
  -437395172,
  -1321436601,
  -547775278,
  1933530610,
  -830924780,
  935293895,
  -840281097,
  -1436852227,
  1863638845,
  -611944380,
  -209597777,
  -1002522264,
  875313188,
  1080017571,
  -1015933411,
  621591778,
  1233856572,
  -1790836979,
  24197544,
  -1277294580,
  -459482956,
  -1047501738,
  -2073986101,
  -1234119374,
  1551124588,
  1463996600
}; // weak
int AES_Rijndael_Td3[256] =
{
  -190361519,
  1097159550,
  396673818,
  660510266,
  -1418998981,
  -1656360673,
  -94852180,
  -486304949,
  821712160,
  1986918061,
  -864644728,
  38544885,
  -438830001,
  718002117,
  893681702,
  1654886325,
  -1319482914,
  -1172609243,
  -368142267,
  -20913827,
  796197571,
  1290801793,
  1184342925,
  -738605461,
  -1889540349,
  -1835231979,
  1836772287,
  1381620373,
  -1098699308,
  1948373848,
  -529979063,
  -909622130,
  -1031181707,
  -1904641804,
  1480485785,
  -1183720153,
  -514869570,
  -2001922064,
  548169417,
  -835013507,
  -548792221,
  439452389,
  1362321559,
  1400849762,
  1685577905,
  1806599355,
  -2120213250,
  137073913,
  1214797936,
  1174215055,
  -563312748,
  2079897426,
  1943217067,
  1258480242,
  529487843,
  1437280870,
  -349698126,
  -1245576401,
  -981755258,
  923313619,
  679998000,
  -1079659997,
  57326082,
  377642221,
  -820237430,
  2041877159,
  133361907,
  1776460110,
  -621490843,
  96392454,
  878845905,
  -1493267772,
  777231668,
  -212492126,
  -1964953083,
  -152341084,
  -2081670901,
  1626319424,
  1906247262,
  1846563261,
  562755902,
  -586793578,
  1040559837,
  -423803315,
  1418573201,
  -1000536719,
  114585348,
  1343618912,
  -1728371687,
  -1108764714,
  1078185097,
  -643926169,
  -398279248,
  -1987344377,
  425408743,
  -923870343,
  2081048481,
  1108339068,
  -2078357000,
  0,
  -2138668279,
  736970802,
  292596766,
  1517440620,
  251657213,
  -2059905521,
  -1361764803,
  758720310,
  265905162,
  1554391400,
  1532285339,
  908999204,
  174567692,
  1474760595,
  -292105548,
  -1684955621,
  -1060810880,
  -601841055,
  2001430874,
  303699484,
  -1816524062,
  -1607801408,
  585122620,
  454499602,
  151849742,
  -1949848078,
  -1230456531,
  514443284,
  -249985705,
  1963412655,
  -1713521682,
  2137062819,
  19308535,
  1928707164,
  1715193156,
  -75615141,
  1126790795,
  600235211,
  -302225226,
  -453942344,
  836553431,
  1669664834,
  -1759363053,
  -971956092,
  1243905413,
  -1153566510,
  -114159186,
  698445255,
  -1641067747,
  -1305414692,
  -2041385971,
  -1042034569,
  -1290376149,
  1891211689,
  -1807156719,
  -379313593,
  -57883480,
  -264299872,
  2100090966,
  865136418,
  1229899655,
  953270745,
  -895287668,
  -737462632,
  -176042074,
  2061379749,
  -1215420710,
  -1379949505,
  983426092,
  2022837584,
  1607244650,
  2118541908,
  -1928084746,
  -658970480,
  972512814,
  -1011878526,
  1568718495,
  -795640727,
  -718427793,
  621982671,
  -1399243832,
  410887952,
  -1671205144,
  1002142683,
  645401037,
  1494807662,
  -1699282452,
  1335535747,
  -1787927066,
  -1671510,
  -1127282655,
  367585007,
  -409216582,
  1865862730,
  -1626745622,
  -1333995991,
  -1531793615,
  1059270954,
  -1517014842,
  -1570324427,
  1320957812,
  -2100648196,
  -1865371424,
  -1479011021,
  77089521,
  -321194175,
  -850391425,
  -1846137065,
  1305906550,
  -273658557,
  -1437772596,
  -1778065436,
  -776608866,
  1787304780,
  740276417,
  1699839814,
  1592394909,
  -1942659839,
  -2022411270,
  188821243,
  1729977011,
  -606973294,
  274084841,
  -699985043,
  -681472870,
  -1593017801,
  -132870567,
  322734571,
  -1457000754,
  1640576439,
  484830689,
  1202797690,
  -757114468,
  -227328171,
  349075736,
  -952647821,
  -137500077,
  -39167137,
  1030690015,
  1155237496,
  -1342996022,
  1757691577,
  607398968,
  -1556062270,
  499347990,
  -500888388,
  1011452712,
  227885567,
  -1476300487,
  213114376,
  -1260086056,
  1455525988,
  -880516741,
  850817237,
  1817998408,
  -1202240816
}; // weak
int AES_Rijndael_Td4[256] =
{
  1375731712,
  150994944,
  1778384896,
  -721420288,
  805306368,
  905969664,
  -1526726656,
  939524096,
  -1090519040,
  1073741824,
  -1560281088,
  -1644167168,
  -2130706432,
  -218103808,
  -687865856,
  -83886080,
  2080374784,
  -486539264,
  956301312,
  -2113929216,
  -1694498816,
  788529152,
  -16777216,
  -2030043136,
  872415232,
  -1912602624,
  1124073472,
  1140850688,
  -1006632960,
  -570425344,
  -385875968,
  -889192448,
  1409286144,
  2063597568,
  -1811939328,
  838860800,
  -1509949440,
  -1040187392,
  587202560,
  1023410176,
  -301989888,
  1275068416,
  -1795162112,
  184549376,
  1107296256,
  -100663296,
  -1023410176,
  1308622848,
  134217728,
  771751936,
  -1593835520,
  1711276032,
  671088640,
  -654311424,
  603979776,
  -1308622848,
  1979711488,
  1526726656,
  -1577058304,
  1224736768,
  1828716544,
  -1962934272,
  -788529152,
  620756992,
  1912602624,
  -134217728,
  -167772160,
  1677721600,
  -2046820352,
  1744830464,
  -1744830464,
  369098752,
  -738197504,
  -1543503872,
  1543503872,
  -872415232,
  1560281088,
  1694498816,
  -1241513984,
  -1845493760,
  1811939328,
  1879048192,
  1207959552,
  1342177280,
  -50331648,
  -318767104,
  -1191182336,
  -637534208,
  1577058304,
  352321536,
  1174405120,
  1459617792,
  -1493172224,
  -1929379840,
  -1660944384,
  -2080374784,
  -1879048192,
  -671088640,
  -1426063360,
  0,
  -1946157056,
  -1140850688,
  -754974720,
  167772160,
  -150994944,
  -469762048,
  1476395008,
  83886080,
  -1207959552,
  -1291845632,
  1157627904,
  100663296,
  -805306368,
  738197504,
  503316480,
  -1895825408,
  -905969664,
  1056964608,
  251658240,
  33554432,
  -1056964608,
  -1358954496,
  -1124073472,
  50331648,
  16777216,
  318767104,
  -1979711488,
  1795162112,
  973078528,
  -1862270976,
  285212672,
  1090519040,
  1325400064,
  1728053248,
  -603979776,
  -369098752,
  -1761607680,
  -234881024,
  -822083584,
  -838860800,
  -268435456,
  -1275068416,
  -436207616,
  1929379840,
  -1778384896,
  -1409286144,
  1946157056,
  570425344,
  -419430400,
  -1392508928,
  889192448,
  -2063597568,
  -503316480,
  -117440512,
  922746880,
  -402653184,
  469762048,
  1962934272,
  -553648128,
  1845493760,
  1191182336,
  -251658240,
  436207616,
  1895825408,
  486539264,
  687865856,
  -989855744,
  -1996488704,
  1862270976,
  -1224736768,
  1644167168,
  234881024,
  -1442840576,
  402653184,
  -1107296256,
  452984832,
  -67108864,
  1442840576,
  1040187392,
  1258291200,
  -973078528,
  -771751936,
  2030043136,
  536870912,
  -1711276032,
  -620756992,
  -1073741824,
  -33554432,
  2013265920,
  -855638016,
  1509949440,
  -201326592,
  520093696,
  -587202560,
  -1476395008,
  855638016,
  -2013265920,
  117440512,
  -956301312,
  822083584,
  -1325400064,
  301989888,
  268435456,
  1493172224,
  654311424,
  2147483648,
  -335544320,
  1593835520,
  1610612736,
  1358954496,
  2130706432,
  -1459617792,
  419430400,
  -1258291200,
  1241513984,
  218103808,
  754974720,
  -452984832,
  2046820352,
  -1627389952,
  -1828716544,
  -922746880,
  -1677721600,
  -285212672,
  -1610612736,
  -536870912,
  989855744,
  1291845632,
  -1375731712,
  704643072,
  -184549376,
  -1342177280,
  -939524096,
  -352321536,
  -1157627904,
  1006632960,
  -2097152000,
  1392508928,
  -1728053248,
  1627389952,
  385875968,
  721420288,
  67108864,
  2113929216,
  -1174405120,
  1996488704,
  -704643072,
  637534208,
  -520093696,
  1761607680,
  335544320,
  1660944384,
  1426063360,
  553648128,
  201326592,
  2097152000
}; // weak
int AES_Rijndael_Td6[256] =
{
  5373952,
  589824,
  6946816,
  13959168,
  3145728,
  3538944,
  10813440,
  3670016,
  12517376,
  4194304,
  10682368,
  10354688,
  8454144,
  15925248,
  14090240,
  16449536,
  8126464,
  14876672,
  3735552,
  8519680,
  10158080,
  3080192,
  16711680,
  8847360,
  3407872,
  9306112,
  4390912,
  4456448,
  12845056,
  14548992,
  15269888,
  13303808,
  5505024,
  8060928,
  9699328,
  3276800,
  10878976,
  12713984,
  2293760,
  3997696,
  15597568,
  4980736,
  9764864,
  720896,
  4325376,
  16384000,
  12779520,
  5111808,
  524288,
  3014656,
  10551296,
  6684672,
  2621440,
  14221312,
  2359296,
  11665408,
  7733248,
  5963776,
  10616832,
  4784128,
  7143424,
  9109504,
  13697024,
  2424832,
  7471104,
  16252928,
  16121856,
  6553600,
  8781824,
  6815744,
  9961472,
  1441792,
  13893632,
  10747904,
  6029312,
  13369344,
  6094848,
  6619136,
  11927552,
  9568256,
  7077888,
  7340032,
  4718592,
  5242880,
  16580608,
  15532032,
  12124160,
  14286848,
  6160384,
  1376256,
  4587520,
  5701632,
  10944512,
  9240576,
  10289152,
  8650752,
  9437184,
  14155776,
  11206656,
  0,
  9175040,
  12320768,
  13828096,
  655360,
  16187392,
  14942208,
  5767168,
  327680,
  12058624,
  11730944,
  4521984,
  393216,
  13631488,
  2883584,
  1966080,
  9371648,
  13238272,
  4128768,
  983040,
  131072,
  12648448,
  11468800,
  12386304,
  196608,
  65536,
  1245184,
  9043968,
  7012352,
  3801088,
  9502720,
  1114112,
  4259840,
  5177344,
  6750208,
  14417920,
  15335424,
  9895936,
  15859712,
  13565952,
  13500416,
  15728640,
  11796480,
  15073280,
  7536640,
  9830400,
  11272192,
  7602176,
  2228224,
  15138816,
  11337728,
  3473408,
  8716288,
  14811136,
  16318464,
  3604480,
  15204352,
  1835008,
  7667712,
  14614528,
  7208960,
  4653056,
  15794176,
  1703936,
  7405568,
  1900544,
  2686976,
  12910592,
  8978432,
  7274496,
  11993088,
  6422528,
  917504,
  11141120,
  1572864,
  12451840,
  1769472,
  16515072,
  5636096,
  4063232,
  4915200,
  12976128,
  13762560,
  7929856,
  2097152,
  10092544,
  14352384,
  12582912,
  16646144,
  7864320,
  13434880,
  5898240,
  15990784,
  2031616,
  14483456,
  11010048,
  3342336,
  8912896,
  458752,
  13041664,
  3211264,
  11599872,
  1179648,
  1048576,
  5832704,
  2555904,
  8388608,
  15466496,
  6225920,
  6291456,
  5308416,
  8323072,
  11075584,
  1638400,
  11862016,
  4849664,
  851968,
  2949120,
  15007744,
  7995392,
  10420224,
  9633792,
  13172736,
  10223616,
  15663104,
  10485760,
  14680064,
  3866624,
  5046272,
  11403264,
  2752512,
  16056320,
  11534336,
  13107200,
  15400960,
  12255232,
  3932160,
  8585216,
  5439488,
  10027008,
  6356992,
  1507328,
  2818048,
  262144,
  8257536,
  12189696,
  7798784,
  14024704,
  2490368,
  14745600,
  6881280,
  1310720,
  6488064,
  5570560,
  2162688,
  786432,
  8192000
}; // weak
int AES_Rijndael_Td7[256] =
{
  20992,
  2304,
  27136,
  54528,
  12288,
  13824,
  42240,
  14336,
  48896,
  16384,
  41728,
  40448,
  33024,
  62208,
  55040,
  64256,
  31744,
  58112,
  14592,
  33280,
  39680,
  12032,
  65280,
  34560,
  13312,
  36352,
  17152,
  17408,
  50176,
  56832,
  59648,
  51968,
  21504,
  31488,
  37888,
  12800,
  42496,
  49664,
  8960,
  15616,
  60928,
  19456,
  38144,
  2816,
  16896,
  64000,
  49920,
  19968,
  2048,
  11776,
  41216,
  26112,
  10240,
  55552,
  9216,
  45568,
  30208,
  23296,
  41472,
  18688,
  27904,
  35584,
  53504,
  9472,
  29184,
  63488,
  62976,
  25600,
  34304,
  26624,
  38912,
  5632,
  54272,
  41984,
  23552,
  52224,
  23808,
  25856,
  46592,
  37376,
  27648,
  28672,
  18432,
  20480,
  64768,
  60672,
  47360,
  55808,
  24064,
  5376,
  17920,
  22272,
  42752,
  36096,
  40192,
  33792,
  36864,
  55296,
  43776,
  0,
  35840,
  48128,
  54016,
  2560,
  63232,
  58368,
  22528,
  1280,
  47104,
  45824,
  17664,
  1536,
  53248,
  11264,
  7680,
  36608,
  51712,
  16128,
  3840,
  512,
  49408,
  44800,
  48384,
  768,
  256,
  4864,
  35328,
  27392,
  14848,
  37120,
  4352,
  16640,
  20224,
  26368,
  56320,
  59904,
  38656,
  61952,
  52992,
  52736,
  61440,
  46080,
  58880,
  29440,
  38400,
  44032,
  29696,
  8704,
  59136,
  44288,
  13568,
  34048,
  57856,
  63744,
  14080,
  59392,
  7168,
  29952,
  57088,
  28160,
  18176,
  61696,
  6656,
  28928,
  7424,
  10496,
  50432,
  35072,
  28416,
  46848,
  25088,
  3584,
  43520,
  6144,
  48640,
  6912,
  64512,
  22016,
  15872,
  19200,
  50688,
  53760,
  30976,
  8192,
  39424,
  56064,
  49152,
  65024,
  30720,
  52480,
  23040,
  62464,
  7936,
  56576,
  43008,
  13056,
  34816,
  1792,
  50944,
  12544,
  45312,
  4608,
  4096,
  22784,
  9984,
  32768,
  60416,
  24320,
  24576,
  20736,
  32512,
  43264,
  6400,
  46336,
  18944,
  3328,
  11520,
  58624,
  31232,
  40704,
  37632,
  51456,
  39936,
  61184,
  40960,
  57344,
  15104,
  19712,
  44544,
  10752,
  62720,
  45056,
  51200,
  60160,
  47872,
  15360,
  33536,
  21248,
  39168,
  24832,
  5888,
  11008,
  1024,
  32256,
  47616,
  30464,
  54784,
  9728,
  57600,
  26880,
  5120,
  25344,
  21760,
  8448,
  3072,
  32000
}; // weak
int AES_Rijndael_Si[256] =
{
  82,
  9,
  106,
  213,
  48,
  54,
  165,
  56,
  191,
  64,
  163,
  158,
  129,
  243,
  215,
  251,
  124,
  227,
  57,
  130,
  155,
  47,
  255,
  135,
  52,
  142,
  67,
  68,
  196,
  222,
  233,
  203,
  84,
  123,
  148,
  50,
  166,
  194,
  35,
  61,
  238,
  76,
  149,
  11,
  66,
  250,
  195,
  78,
  8,
  46,
  161,
  102,
  40,
  217,
  36,
  178,
  118,
  91,
  162,
  73,
  109,
  139,
  209,
  37,
  114,
  248,
  246,
  100,
  134,
  104,
  152,
  22,
  212,
  164,
  92,
  204,
  93,
  101,
  182,
  146,
  108,
  112,
  72,
  80,
  253,
  237,
  185,
  218,
  94,
  21,
  70,
  87,
  167,
  141,
  157,
  132,
  144,
  216,
  171,
  0,
  140,
  188,
  211,
  10,
  247,
  228,
  88,
  5,
  184,
  179,
  69,
  6,
  208,
  44,
  30,
  143,
  202,
  63,
  15,
  2,
  193,
  175,
  189,
  3,
  1,
  19,
  138,
  107,
  58,
  145,
  17,
  65,
  79,
  103,
  220,
  234,
  151,
  242,
  207,
  206,
  240,
  180,
  230,
  115,
  150,
  172,
  116,
  34,
  231,
  173,
  53,
  133,
  226,
  249,
  55,
  232,
  28,
  117,
  223,
  110,
  71,
  241,
  26,
  113,
  29,
  41,
  197,
  137,
  111,
  183,
  98,
  14,
  170,
  24,
  190,
  27,
  252,
  86,
  62,
  75,
  198,
  210,
  121,
  32,
  154,
  219,
  192,
  254,
  120,
  205,
  90,
  244,
  31,
  221,
  168,
  51,
  136,
  7,
  199,
  49,
  177,
  18,
  16,
  89,
  39,
  128,
  236,
  95,
  96,
  81,
  127,
  169,
  25,
  181,
  74,
  13,
  45,
  229,
  122,
  159,
  147,
  201,
  156,
  239,
  160,
  224,
  59,
  77,
  174,
  42,
  245,
  176,
  200,
  235,
  187,
  60,
  131,
  83,
  153,
  97,
  23,
  43,
  4,
  126,
  186,
  119,
  214,
  38,
  225,
  105,
  20,
  99,
  85,
  33,
  12,
  125
}; // weak
int AES_Rijndael_U1[256] =
{
  0,
  235474187,
  470948374,
  303765277,
  941896748,
  908933415,
  607530554,
  708780849,
  1883793496,
  2118214995,
  1817866830,
  1649639237,
  1215061108,
  1181045119,
  1417561698,
  1517767529,
  -527380304,
  -291906117,
  -58537306,
  -225720403,
  -659233636,
  -692196969,
  -995688822,
  -894438527,
  -1864845080,
  -1630423581,
  -1932877058,
  -2101104651,
  -1459843900,
  -1493859889,
  -1259432238,
  -1159226407,
  -616842373,
  -718096784,
  -953573011,
  -920605594,
  -484470953,
  -317291940,
  -15887039,
  -251357110,
  -1418472669,
  -1518674392,
  -1218328267,
  -1184316354,
  -1822955761,
  -1654724092,
  -1891238631,
  -2125664238,
  1001089995,
  899835584,
  666464733,
  699432150,
  59727847,
  226906860,
  530400753,
  294930682,
  1273168787,
  1172967064,
  1475418501,
  1509430414,
  1942435775,
  2110667444,
  1876241833,
  1641816226,
  -1384747530,
  -1551933187,
  -1318815776,
  -1083344149,
  -1789765158,
  -1688513327,
  -1992277044,
  -2025238841,
  -583137874,
  -751368027,
  -1054072904,
  -819653965,
  -451268222,
  -351060855,
  -116905068,
  -150919521,
  1306967366,
  1139781709,
  1374988112,
  1610459739,
  1975683434,
  2076935265,
  1775276924,
  1742315127,
  1034867998,
  866637845,
  566021896,
  800440835,
  92987698,
  193195065,
  429456164,
  395441711,
  1984812685,
  2017778566,
  1784663195,
  1683407248,
  1315562145,
  1080094634,
  1383856311,
  1551037884,
  101039829,
  135050206,
  437757123,
  337553864,
  1042385657,
  807962610,
  573804783,
  742039012,
  -1763899843,
  -1730933962,
  -1966138325,
  -2067394272,
  -1359400431,
  -1594867942,
  -1293211641,
  -1126030068,
  -426414491,
  -392404114,
  -91786125,
  -191989384,
  -558802359,
  -793225406,
  -1029488545,
  -861254316,
  1106041591,
  1340463100,
  1576976609,
  1408749034,
  2043211483,
  2009195472,
  1708848333,
  1809054150,
  832877231,
  1068351396,
  766945465,
  599762354,
  159417987,
  126454664,
  361929877,
  463180190,
  -1585706425,
  -1351284916,
  -1116860335,
  -1285087910,
  -1722270101,
  -1756286112,
  -2058738563,
  -1958532746,
  -785096161,
  -549621996,
  -853116919,
  -1020300030,
  -384805325,
  -417768648,
  -184398811,
  -83148498,
  -1697160820,
  -1797362553,
  -2033878118,
  -1999866223,
  -1561111136,
  -1392879445,
  -1092530250,
  -1326955843,
  -358676012,
  -459930401,
  -158526526,
  -125559095,
  -759480840,
  -592301837,
  -827774994,
  -1063245083,
  2051518780,
  1951317047,
  1716890410,
  1750902305,
  1113818384,
  1282050075,
  1584504582,
  1350078989,
  168810852,
  67556463,
  371049330,
  404016761,
  841739592,
  1008918595,
  775550814,
  540080725,
  -325404927,
  -493635062,
  -259478249,
  -25059300,
  -725712083,
  -625504730,
  -928212677,
  -962227152,
  -1663901863,
  -1831087534,
  -2134850225,
  -1899378620,
  -1527321739,
  -1426069890,
  -1192955549,
  -1225917336,
  202008497,
  33778362,
  270040487,
  504459436,
  875451293,
  975658646,
  675039627,
  641025152,
  2084704233,
  1917518562,
  1615861247,
  1851332852,
  1147550661,
  1248802510,
  1484005843,
  1451044056,
  933301370,
  967311729,
  733156972,
  632953703,
  260388950,
  25965917,
  328671808,
  496906059,
  1206477858,
  1239443753,
  1543208500,
  1441952575,
  2144161806,
  1908694277,
  1675577880,
  1842759443,
  -684598070,
  -650587711,
  -886847780,
  -987051049,
  -283776794,
  -518199827,
  -217582864,
  -49348613,
  -1485196142,
  -1452230247,
  -1150570876,
  -1251826801,
  -1621262146,
  -1856729675,
  -2091935064,
  -1924753501
}; // weak
int AES_Rijndael_U2[256] =
{
  0,
  185469197,
  370938394,
  487725847,
  741876788,
  657861945,
  975451694,
  824852259,
  1483753576,
  1400783205,
  1315723890,
  1164071807,
  1950903388,
  2135319889,
  1649704518,
  1767536459,
  -1327460144,
  -1141990947,
  -1493400886,
  -1376613433,
  -1663519516,
  -1747534359,
  -1966823682,
  -2117423117,
  -393160520,
  -476130891,
  -24327518,
  -175979601,
  -995558260,
  -811141759,
  -759894378,
  -642062437,
  2077965243,
  1893020342,
  1841768865,
  1724457132,
  1474502543,
  1559041666,
  1107234197,
  1257309336,
  598438867,
  681933534,
  901210569,
  1052338372,
  261314535,
  77422314,
  428819965,
  310463728,
  -885281941,
  -1070226842,
  -584599183,
  -701910916,
  -419197089,
  -334657966,
  -249586363,
  -99511224,
  -1823743229,
  -1740248562,
  -2057834215,
  -1906706412,
  -1082931401,
  -1266823622,
  -1452288723,
  -1570644960,
  -156404115,
  -39616672,
  -525245321,
  -339776134,
  -627748263,
  -778347692,
  -863420349,
  -947435186,
  -1361232379,
  -1512884472,
  -1195299809,
  -1278270190,
  -2098914767,
  -1981082820,
  -1795618773,
  -1611202266,
  1179510461,
  1296297904,
  1347548327,
  1533017514,
  1786102409,
  1635502980,
  2087309459,
  2003294622,
  507358933,
  355706840,
  136428751,
  53458370,
  839224033,
  957055980,
  605657339,
  790073846,
  -1921626666,
  -2038938405,
  -1687527476,
  -1872472383,
  -1588696606,
  -1438621457,
  -1219331080,
  -1134791947,
  -721025602,
  -569897805,
  -1021700188,
  -938205527,
  -113368694,
  -231724921,
  -282971248,
  -466863459,
  1033297158,
  915985419,
  730517276,
  545572369,
  296679730,
  446754879,
  129166120,
  213705253,
  1709610350,
  1860738147,
  1945798516,
  2029293177,
  1239331162,
  1120974935,
  1606591296,
  1422699085,
  -146674470,
  -61872681,
  -513933632,
  -363595827,
  -612775698,
  -797457949,
  -848962828,
  -966011911,
  -1355701070,
  -1539330625,
  -1188186456,
  -1306280027,
  -2096529274,
  -2012771957,
  -1793748324,
  -1642357871,
  1201765386,
  1286567175,
  1371368976,
  1521706781,
  1805211710,
  1620529459,
  2105887268,
  1988838185,
  533804130,
  350174575,
  164439672,
  46346101,
  870912086,
  954669403,
  636813900,
  788204353,
  -1936009375,
  -2020286868,
  -1702443653,
  -1853305738,
  -1599933611,
  -1414727080,
  -1229004465,
  -1112479678,
  -722821367,
  -538667516,
  -1024029421,
  -906460130,
  -120407235,
  -203640272,
  -288446169,
  -440360918,
  1014646705,
  930369212,
  711349675,
  560487590,
  272786309,
  457992840,
  106852767,
  223377554,
  1678381017,
  1862534868,
  1914052035,
  2031621326,
  1211247597,
  1128014560,
  1580087799,
  1428173050,
  32283319,
  182621114,
  401639597,
  486441376,
  768917123,
  651868046,
  1003007129,
  818324884,
  1503449823,
  1385356242,
  1333838021,
  1150208456,
  1973745387,
  2125135846,
  1673061617,
  1756818940,
  -1324610969,
  -1174273174,
  -1492117379,
  -1407315600,
  -1657524653,
  -1774573730,
  -1960297399,
  -2144979644,
  -377732593,
  -495826174,
  -10465259,
  -194094824,
  -985373125,
  -833982666,
  -749177823,
  -665420500,
  2050466060,
  1899603969,
  1814803222,
  1730525723,
  1443857720,
  1560382517,
  1075025698,
  1260232239,
  575138148,
  692707433,
  878443390,
  1062597235,
  243256656,
  91341917,
  409198410,
  325965383,
  -891866660,
  -1042728751,
  -590666810,
  -674944309,
  -420538904,
  -304014107,
  -252508174,
  -67301633,
  -1834518092,
  -1716948807,
  -2068091986,
  -1883938141,
  -1096852096,
  -1248766835,
  -1467789414,
  -1551022441
}; // weak
int AES_Rijndael_U3[256] =
{
  0,
  218828297,
  437656594,
  387781147,
  875313188,
  958871085,
  775562294,
  590424639,
  1750626376,
  1699970625,
  1917742170,
  2135253587,
  1551124588,
  1367295589,
  1180849278,
  1265195639,
  -793714544,
  -574886247,
  -895026046,
  -944901493,
  -459482956,
  -375925059,
  -24460122,
  -209597777,
  -1192718120,
  -1243373871,
  -1560376118,
  -1342864701,
  -1933268740,
  -2117097739,
  -1764576018,
  -1680229657,
  -1149510853,
  -1234119374,
  -1586641111,
  -1402549984,
  -1890065633,
  -2107839210,
  -1790836979,
  -1739919100,
  -752637069,
  -567761542,
  -919226527,
  -1002522264,
  -418409641,
  -368796322,
  -48656571,
  -267222708,
  1808481195,
  1723872674,
  1910319033,
  2094410160,
  1608975247,
  1391201670,
  1173430173,
  1224348052,
  59984867,
  244860394,
  428169201,
  344873464,
  935293895,
  984907214,
  766078933,
  547512796,
  1844882806,
  1627235199,
  2011214180,
  2062270317,
  1507497298,
  1423022939,
  1137477952,
  1321699145,
  95345982,
  145085239,
  532201772,
  313773861,
  830661914,
  1015671571,
  731183368,
  648017665,
  -1119466010,
  -1337113617,
  -1487908364,
  -1436852227,
  -1989511742,
  -2073986101,
  -1820562992,
  -1636341799,
  -719438418,
  -669699161,
  -821550660,
  -1039978571,
  -516815478,
  -331805821,
  -81520232,
  -164685935,
  -695372211,
  -611944380,
  -862229921,
  -1047501738,
  -492745111,
  -274055072,
  -122203525,
  -172204942,
  -1093335547,
  -1277294580,
  -1530717673,
  -1446505442,
  -1963377119,
  -2014171096,
  -1863376333,
  -1645990854,
  104699613,
  188127444,
  472615631,
  287343814,
  840019705,
  1058709744,
  671593195,
  621591778,
  1852171925,
  1668212892,
  1953757831,
  2037970062,
  1514790577,
  1463996600,
  1080017571,
  1297403050,
  -621329940,
  -671330331,
  -1058972162,
  -840281097,
  -287606328,
  -472877119,
  -187865638,
  -104436781,
  -1297141340,
  -1079754835,
  -1464259146,
  -1515052097,
  -2038232704,
  -1954019447,
  -1667951214,
  -1851909221,
  172466556,
  122466165,
  273792366,
  492483431,
  1047239000,
  861968209,
  612205898,
  695634755,
  1646252340,
  1863638845,
  2013908262,
  1963115311,
  1446242576,
  1530455833,
  1277555970,
  1093597963,
  1636604631,
  1820824798,
  2073724613,
  1989249228,
  1436590835,
  1487645946,
  1337376481,
  1119727848,
  164948639,
  81781910,
  331544205,
  516552836,
  1039717051,
  821288114,
  669961897,
  719700128,
  -1321436601,
  -1137216434,
  -1423284651,
  -1507760036,
  -2062531997,
  -2011476886,
  -1626972559,
  -1844621192,
  -647755249,
  -730921978,
  -1015933411,
  -830924780,
  -314035669,
  -532464606,
  -144822727,
  -95084496,
  -1224610662,
  -1173691757,
  -1390940024,
  -1608712575,
  -2094148418,
  -1910056265,
  -1724135252,
  -1808742747,
  -547775278,
  -766340389,
  -984645440,
  -935031095,
  -344611594,
  -427906305,
  -245122844,
  -60246291,
  1739656202,
  1790575107,
  2108100632,
  1890328081,
  1402811438,
  1586903591,
  1233856572,
  1149249077,
  266959938,
  48394827,
  369057872,
  418672217,
  1002783846,
  919489135,
  567498868,
  752375421,
  209336225,
  24197544,
  376187827,
  459744698,
  945164165,
  895287692,
  574624663,
  793451934,
  1679968233,
  1764313568,
  2117360635,
  1933530610,
  1343127501,
  1560637892,
  1243112415,
  1192455638,
  -590686415,
  -775825096,
  -958608605,
  -875051734,
  -387518699,
  -437395172,
  -219090169,
  -262898,
  -1265457287,
  -1181111952,
  -1367032981,
  -1550863006,
  -2134991011,
  -1917480620,
  -1700232369,
  -1750889146
}; // weak
int AES_Rijndael_U4[257] =
{
  0,
  151849742,
  303699484,
  454499602,
  607398968,
  758720310,
  908999204,
  1059270954,
  1214797936,
  1097159550,
  1517440620,
  1400849762,
  1817998408,
  1699839814,
  2118541908,
  2001430874,
  -1865371424,
  -1713521682,
  -2100648196,
  -1949848078,
  -1260086056,
  -1108764714,
  -1493267772,
  -1342996022,
  -658970480,
  -776608866,
  -895287668,
  -1011878526,
  -57883480,
  -176042074,
  -292105548,
  -409216582,
  1002142683,
  850817237,
  698445255,
  548169417,
  529487843,
  377642221,
  227885567,
  77089521,
  1943217067,
  2061379749,
  1640576439,
  1757691577,
  1474760595,
  1592394909,
  1174215055,
  1290801793,
  -1418998981,
  -1570324427,
  -1183720153,
  -1333995991,
  -1889540349,
  -2041385971,
  -1656360673,
  -1807156719,
  -486304949,
  -368142267,
  -249985705,
  -132870567,
  -952647821,
  -835013507,
  -718427793,
  -601841055,
  1986918061,
  2137062819,
  1685577905,
  1836772287,
  1381620373,
  1532285339,
  1078185097,
  1229899655,
  1040559837,
  923313619,
  740276417,
  621982671,
  439452389,
  322734571,
  137073913,
  19308535,
  -423803315,
  -273658557,
  -190361519,
  -39167137,
  -1031181707,
  -880516741,
  -795640727,
  -643926169,
  -1361764803,
  -1479011021,
  -1127282655,
  -1245576401,
  -1964953083,
  -2081670901,
  -1728371687,
  -1846137065,
  1305906550,
  1155237496,
  1607244650,
  1455525988,
  1776460110,
  1626319424,
  2079897426,
  1928707164,
  96392454,
  213114376,
  396673818,
  514443284,
  562755902,
  679998000,
  865136418,
  983426092,
  -586793578,
  -737462632,
  -820237430,
  -971956092,
  -114159186,
  -264299872,
  -349698126,
  -500888388,
  -1787927066,
  -1671205144,
  -2022411270,
  -1904641804,
  -1319482914,
  -1202240816,
  -1556062270,
  -1437772596,
  -321194175,
  -438830001,
  -20913827,
  -137500077,
  -923870343,
  -1042034569,
  -621490843,
  -738605461,
  -1531793615,
  -1379949505,
  -1230456531,
  -1079659997,
  -2138668279,
  -1987344377,
  -1835231979,
  -1684955621,
  2081048481,
  1963412655,
  1846563261,
  1729977011,
  1480485785,
  1362321559,
  1243905413,
  1126790795,
  878845905,
  1030690015,
  645401037,
  796197571,
  274084841,
  425408743,
  38544885,
  188821243,
  -681472870,
  -563312748,
  -981755258,
  -864644728,
  -212492126,
  -94852180,
  -514869570,
  -398279248,
  -1626745622,
  -1778065436,
  -1928084746,
  -2078357000,
  -1153566510,
  -1305414692,
  -1457000754,
  -1607801408,
  1202797690,
  1320957812,
  1437280870,
  1554391400,
  1669664834,
  1787304780,
  1906247262,
  2022837584,
  265905162,
  114585348,
  499347990,
  349075736,
  736970802,
  585122620,
  972512814,
  821712160,
  -1699282452,
  -1816524062,
  -2001922064,
  -2120213250,
  -1098699308,
  -1215420710,
  -1399243832,
  -1517014842,
  -757114468,
  -606973294,
  -1060810880,
  -909622130,
  -152341084,
  -1671510,
  -453942344,
  -302225226,
  174567692,
  57326082,
  410887952,
  292596766,
  777231668,
  660510266,
  1011452712,
  893681702,
  1108339068,
  1258480242,
  1343618912,
  1494807662,
  1715193156,
  1865862730,
  1948373848,
  2100090966,
  -1593017801,
  -1476300487,
  -1290376149,
  -1172609243,
  -2059905521,
  -1942659839,
  -1759363053,
  -1641067747,
  -379313593,
  -529979063,
  -75615141,
  -227328171,
  -850391425,
  -1000536719,
  -548792221,
  -699985043,
  836553431,
  953270745,
  600235211,
  718002117,
  367585007,
  484830689,
  133361907,
  251657213,
  2041877159,
  1891211689,
  1806599355,
  1654886325,
  1568718495,
  1418573201,
  1335535747,
  1184342925,
  5061488
}; // weak
int (__stdcall *off_4D270C)(int) = &sub_40F680; // weak
void *std::length_error::`vftable' = &sub_40F700; // weak
void *std::out_of_range::`vftable' = &sub_4111F0; // weak
void *exception::`vftable' = &sub_4A24AC; // weak
void (*dword_4D3C90[2])(void) = { NULL, NULL }; // idb
void (*dword_4D3C98)(void) = NULL; // idb
int dword_4D52FC[223] =
{
  0,
  31,
  28,
  31,
  30,
  31,
  30,
  31,
  31,
  30,
  31,
  30,
  31,
  573190714,
  34214426,
  606876732,
  67900444,
  640562750,
  101586462,
  674248768,
  135272480,
  556347705,
  17371417,
  590033723,
  51057435,
  623719741,
  84743453,
  657405759,
  118429471,
  271583272,
  541071416,
  254740263,
  524228407,
  237897254,
  507385398,
  221054245,
  490542389,
  204211236,
  473699380,
  187368227,
  456856371,
  170525218,
  440013362,
  153682209,
  423170353,
  556347705,
  17371417,
  573190714,
  34214426,
  590033723,
  51057435,
  606876732,
  657405759,
  118429471,
  640562750,
  101586462,
  623719741,
  84743453,
  67900444,
  100925953,
  235670024,
  353571087,
  471537943,
  403378446,
  469959937,
  169149967,
  67900183,
  118491162,
  34411547,
  622801961,
  673068847,
  807480627,
  942092588,
  707671330,
  538780722,
  17630222,
  134942466,
  201722371,
  117442821,
  67571456,
  17629710,
  185337354,
  134415625,
  135135492,
  184681997,
  118033423,
  330243,
  34081807,
  117508356,
  235080453,
  218497034,
  235405583,
  67308294,
  218236681,
  168099852,
  117705987,
  235405839,
  167837708,
  84609286,
  185011712,
  17630218,
  101451781,
  251790089,
  17434637,
  33820419,
  201786891,
  151913728,
  235470858,
  84869894,
  118230273,
  134349835,
  150996749,
  168166403,
  235210754,
  17763084,
  151258637,
  200456,
  201457931,
  118360581,
  854529,
  117967110,
  51252996,
  201458955,
  51252487,
  168363520,
  84410881,
  251923467,
  84609037,
  50335494,
  201459460,
  151915009,
  591370,
  218565388,
  235077903,
  67633669,
  100667139,
  135069962,
  184878089,
  235013900,
  17042434,
  101386759,
  251856136,
  151912461,
  201460494,
  17630980,
  168755205,
  101189891,
  184615428,
  134679818,
  84674831,
  234881798,
  118229003,
  218238465,
  150998790,
  50660362,
  252313868,
  134611465,
  67308800,
  184878862,
  33820426,
  84478983,
  235733254,
  134417152,
  84872713,
  51120130,
  168034311,
  101387521,
  201458436,
  168756489,
  117509643,
  218628102,
  235014916,
  218628111,
  118033411,
  17172997,
  118161421,
  167840004,
  201655054,
  101191426,
  218825729,
  235340556,
  134614794,
  34145536,
  135072518,
  118096897,
  251659529,
  201523726,
  67633677,
  17501958,
  235079946,
  118226949,
  135073537,
  67568394,
  184943884,
  34147840,
  17042183,
  34475017,
  218760704,
  134546191,
  118358274,
  218630660,
  592911,
  184943875,
  353634064,
  287050781,
  437718785,
  169808389,
  236455938,
  151198496,
  102632723,
  419695382,
  128,
  64,
  32,
  16,
  8,
  4,
  2,
  1,
  8,
  4,
  2,
  1
}; // idb
int dword_4D5678[] = { 0 }; // weak
int dword_4D567C[199] =
{
  0,
  5,
  0,
  24,
  0,
  60,
  0,
  160,
  0,
  328,
  0,
  542,
  0,
  814,
  0,
  1157,
  0,
  1588,
  0,
  2250,
  0,
  3086,
  0,
  4135,
  0,
  5444,
  0,
  7068,
  0,
  9126,
  0,
  11660,
  0,
  14769,
  0,
  18572,
  0,
  23214,
  0,
  29155,
  0,
  36409,
  0,
  45245,
  0,
  55988,
  0,
  69026,
  0,
  85569,
  0,
  105656,
  0,
  130009,
  0,
  159494,
  0,
  195150,
  0,
  238225,
  0,
  290216,
  0,
  352918,
  0,
  428488,
  0,
  519513,
  0,
  629149,
  0,
  761081,
  0,
  919784,
  0,
  1110624,
  0,
  1340045,
  0,
  1615778,
  0,
  1947099,
  0,
  2345141,
  0,
  2823265,
  0,
  3397501,
  0,
  4087087,
  0,
  4915108,
  0,
  5909267,
  0,
  7102808,
  0,
  8535623,
  0,
  10255633,
  0,
  12320243,
  0,
  14798389,
  0,
  17772795,
  0,
  21342730,
  0,
  25627317,
  0,
  30769501,
  0,
  36940820,
  0,
  44347118,
  0,
  53235407,
  0,
  63902104,
  0,
  76702906,
  0,
  92064653,
  0,
  110499551,
  0,
  132622249,
  0,
  159170373,
  0,
  191028978,
  0,
  229260177,
  0,
  275138508,
  0,
  330193415,
  0,
  396260232,
  0,
  1188853398,
  0,
  1426699190,
  0,
  1712116603,
  0,
  2054620005,
  0,
  -1829340653,
  0,
  -1336130088,
  0,
  -744274761,
  0,
  -34045671,
  0,
  818231987,
  1,
  1840968092,
  1,
  -1226713032,
  1,
  246033263,
  2,
  2013331761,
  2,
  -160874348,
  2,
  -1910925179,
  3,
  1142977669,
  4,
  512696930,
  5,
  615356692,
  6,
  1597545108,
  7,
  -659799336,
  8,
  -1650622408,
  10,
  -1121619783,
  12,
  1231173733,
  15,
  1477549070,
  18,
  55216106,
  22,
  1784393987,
  26,
  -1294549657,
  31,
  164682435,
  38,
  -1520209136,
  45
}; // idb
_DWORD dword_4D5998[8] = { 1, 100, 0, 249185, 259478, 1, -1, 0 }; // idb
int dword_4D59B8[36] =
{
  1,
  101,
  0,
  249575,
  257781,
  1,
  -1,
  1,
  101,
  0,
  250333,
  258664,
  1,
  0,
  1,
  101,
  0,
  248538,
  261538,
  0,
  1,
  1,
  101,
  0,
  248775,
  263384,
  2,
  1,
  1,
  101,
  0,
  252583,
  262508,
  2,
  1,
  0
}; // idb
_DWORD dword_4D5A48[70] =
{
  1,
  217,
  0,
  252436,
  262389,
  0,
  0,
  1,
  218,
  0,
  252631,
  262541,
  0,
  0,
  1,
  223,
  0,
  248643,
  263282,
  0,
  0,
  1,
  224,
  0,
  248797,
  263420,
  0,
  0,
  1,
  225,
  0,
  249578,
  257960,
  0,
  0,
  1,
  226,
  0,
  249578,
  257724,
  0,
  0,
  1,
  227,
  0,
  250135,
  258657,
  0,
  0,
  1,
  228,
  0,
  250372,
  258672,
  0,
  0,
  1,
  229,
  0,
  248544,
  261024,
  0,
  0,
  1,
  230,
  0,
  248532,
  261576,
  0,
  0
}; // idb
int dword_4D5B60[] = { 1 }; // weak
int dword_4D5B64[] = { 0 }; // weak
int dword_4D5B68[] = { 245760 }; // weak
int dword_4D5B6C[] = { 266592 }; // weak
int dword_4D5B70[] = { 254560 }; // weak
int dword_4D5B74[] = { 254144 }; // weak
int dword_4D5B78[] = { 0 }; // weak
LONG g_nEnable = 1; // idb
LONG g_bRaise = 1; // idb
LONG dword_4D5B84 = -1; // idb
int dword_4D5B88[24] =
{
  10000000,
  10000000,
  10000000,
  10000000,
  9200000,
  8200000,
  7000000,
  5600000,
  4000000,
  3200000,
  1200000,
  600000,
  400000,
  100000,
  50000,
  10000,
  1000,
  100,
  10,
  10,
  10,
  10,
  10,
  10
}; // idb
int dword_4D5BE8[24] =
{
  10000000,
  8900000,
  5300000,
  3700000,
  1900000,
  1400000,
  800000,
  300000,
  50000,
  10000,
  1000,
  100,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10
}; // idb
int dword_4D5C48[24] =
{
  10000000,
  6700000,
  3800000,
  1500000,
  900000,
  50000,
  10000,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10,
  10
}; // idb
int dword_4D5CA8[102] =
{
  0,
  7680,
  9120,
  11520,
  14880,
  19200,
  24480,
  30720,
  37920,
  46080,
  55200,
  65280,
  76320,
  88320,
  101280,
  115200,
  130080,
  145920,
  162720,
  180480,
  199200,
  218880,
  239520,
  261120,
  283680,
  307200,
  331680,
  357120,
  383520,
  410880,
  439200,
  468480,
  498720,
  529920,
  562080,
  595200,
  629280,
  664320,
  700320,
  737280,
  775200,
  814080,
  853920,
  894720,
  936480,
  979200,
  1022880,
  1067520,
  1113120,
  1159680,
  1207200,
  1255680,
  1305120,
  1355520,
  1406880,
  1459200,
  1512480,
  1566720,
  1621920,
  1678080,
  1735200,
  1793280,
  1852320,
  1912320,
  1973280,
  2035200,
  2098080,
  2161920,
  2226720,
  2292480,
  2359200,
  2426880,
  2495520,
  2565120,
  2635680,
  2707200,
  2779680,
  2853120,
  2927520,
  3002880,
  3079200,
  3156480,
  3234720,
  3313920,
  3394080,
  3475200,
  3557280,
  3640320,
  3724320,
  3809280,
  3895200,
  3982080,
  4069920,
  4158720,
  4248480,
  4339200,
  4430880,
  4523520,
  4617120,
  4711680,
  4807200,
  0
}; // idb
int dword_4D5E40[20] = { 50, 46, 42, 38, 34, 30, 26, 22, 18, 14, 10, 8, 6, 4, 2, 1, 1, 1, 1, 1 }; // idb
int dword_4D5E90[22] = { 50, 40, 30, 20, 15, 10, 8, 6, 4, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 }; // idb
int dword_4D5EE8[20] = { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 3, 3, 4, 5, 6 }; // idb
int dword_4D5F38[22] =
{
  5,
  6,
  6,
  7,
  7,
  8,
  8,
  9,
  10,
  11,
  13,
  15,
  18,
  21,
  24,
  24,
  24,
  24,
  24,
  24,
  24,
  0
}; // idb
int dword_4D5F90[22] =
{
  0,
  0,
  0,
  1,
  1,
  2,
  2,
  3,
  4,
  5,
  6,
  10,
  18,
  29,
  74,
  100,
  100,
  100,
  100,
  100,
  100,
  0
}; // idb
int dword_4D5FE8[21] = { 0, 0, 0, 0, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4 }; // idb
int dword_4D603C[11] = { 0, 0, 0, 1, 3, 5, 8, 14, 29, 50, 100 }; // idb
int dword_4D6068[10] = { 10, 20, 20, 20, 20, 20, 20, 20, 20, 20 }; // idb
int dword_4D6090[] = { 2 }; // weak
int dword_4D60A4[] = { 30 }; // weak
int dword_4D60A8[] = { 4 }; // weak
int dword_4D60AC[] = { 1 }; // weak
int dword_4D60B0[] = { 36 }; // weak
int dword_4D60B4[] = { 45 }; // weak
int dword_4D60B8[122] =
{
  60,
  3,
  3,
  0,
  0,
  4,
  40,
  4,
  1,
  45,
  45,
  60,
  4,
  2,
  0,
  0,
  6,
  20,
  3,
  1,
  45,
  54,
  80,
  4,
  3,
  0,
  0,
  3,
  30,
  3,
  1,
  54,
  54,
  80,
  4,
  6,
  0,
  0,
  2,
  40,
  4,
  1,
  18,
  36,
  100,
  3,
  4,
  0,
  0,
  3,
  50,
  4,
  1,
  27,
  45,
  100,
  0,
  6,
  2,
  0,
  4,
  20,
  1,
  4,
  27,
  18,
  80,
  0,
  4,
  3,
  0,
  3,
  30,
  1,
  4,
  36,
  27,
  80,
  0,
  4,
  2,
  6,
  0,
  30,
  1,
  3,
  27,
  18,
  100,
  0,
  0,
  3,
  4,
  3,
  40,
  1,
  3,
  36,
  27,
  120,
  4,
  4,
  0,
  6,
  4,
  40,
  4,
  1,
  45,
  45,
  80,
  0,
  4,
  4,
  6,
  4,
  40,
  1,
  4,
  36,
  36,
  100
}; // idb
unsigned int color = 16711680u; // idb
char *off_4D62AC = &Src; // weak
int dword_4D62B0[] = { 55364 }; // weak
int dword_4D62B4[9] = { 8354, 55370, 9801, 56642, 11073, 59369, 9802, 59369, 8352 }; // idb
int dword_4D62D8[6] = { 1, 2, 10, 50, 300, 0 }; // idb
int dword_4D62F0[8] = { 761, 762, 763, 764, 765, 766, 767, 768 }; // idb
int dword_4D6310[8] = { 880, 881, 882, 0, 0, 0, 0, 0 }; // idb
int dword_4D6330[40] =
{
  883,
  884,
  885,
  886,
  0,
  0,
  0,
  0,
  239,
  10,
  266,
  5,
  239,
  10,
  267,
  2,
  239,
  10,
  268,
  1,
  240,
  100,
  269,
  1,
  240,
  200,
  270,
  1,
  241,
  1000,
  271,
  1,
  241,
  1000,
  272,
  1,
  446,
  500,
  447,
  1
}; // idb
int dword_4D63D0[] = { 1 }; // weak
int dword_4D63D4[] = { 1 }; // weak
int dword_4D63D8[177] =
{
  200001,
  2,
  1,
  200002,
  3,
  1,
  200003,
  4,
  6,
  200004,
  5,
  8,
  200005,
  6,
  10,
  200006,
  7,
  11,
  200007,
  8,
  12,
  200008,
  9,
  13,
  200009,
  10,
  14,
  200010,
  11,
  15,
  200011,
  37,
  15,
  200066,
  12,
  16,
  200012,
  13,
  17,
  200013,
  14,
  18,
  200014,
  15,
  19,
  200015,
  16,
  20,
  200016,
  17,
  21,
  200017,
  18,
  23,
  200018,
  19,
  25,
  200019,
  20,
  26,
  200020,
  21,
  27,
  200021,
  22,
  28,
  200022,
  23,
  29,
  200023,
  27,
  30,
  200026,
  28,
  31,
  200027,
  29,
  32,
  200028,
  24,
  33,
  200024,
  30,
  34,
  200029,
  31,
  35,
  200030,
  25,
  36,
  200025,
  32,
  37,
  200031,
  33,
  38,
  200032,
  34,
  39,
  200033,
  35,
  40,
  200034,
  36,
  41,
  200047,
  39,
  41,
  200048,
  38,
  42,
  200049,
  40,
  42,
  200050,
  45,
  43,
  200051,
  41,
  43,
  200052,
  46,
  44,
  200053,
  42,
  44,
  200054,
  44,
  45,
  200055,
  43,
  45,
  200056,
  47,
  46,
  200057,
  48,
  47,
  200058,
  49,
  48,
  200059,
  50,
  49,
  200060,
  51,
  50,
  200061,
  52,
  51,
  200062,
  53,
  52,
  200063,
  58,
  53,
  200064,
  59,
  54,
  200065,
  60,
  55,
  200065,
  61,
  56,
  200065,
  62,
  57,
  200065,
  63,
  58,
  200065,
  64,
  59,
  200065,
  65,
  60
}; // idb
int dword_4D669C[4] = { 200065, 34280, 137140, 308571 }; // idb
int dword_4D66AC[4] = { 617142, 357, 761, 857 }; // idb
int dword_4D66BC[] = { 11 }; // weak
int dword_4D66C0[] = { 50 }; // weak
int dword_4D66C4[11] = { 5, 9, 36, 10, 7, 22, 15, 5, 8, 20, 0 }; // idb
int dword_4D66F0[] = { 0 }; // weak
int dword_4D66F4[149] =
{
  0,
  5,
  0,
  24,
  0,
  60,
  0,
  160,
  0,
  328,
  0,
  542,
  0,
  814,
  0,
  1157,
  0,
  1588,
  0,
  2250,
  0,
  3086,
  0,
  4135,
  0,
  5444,
  0,
  7068,
  0,
  9126,
  0,
  11660,
  0,
  14769,
  0,
  18572,
  0,
  23214,
  0,
  29155,
  0,
  36409,
  0,
  45245,
  0,
  55988,
  0,
  69026,
  0,
  85569,
  0,
  105656,
  0,
  130009,
  0,
  159494,
  0,
  195150,
  0,
  238225,
  0,
  290216,
  0,
  352918,
  0,
  428488,
  0,
  519513,
  0,
  629149,
  0,
  761081,
  0,
  919784,
  0,
  1110624,
  0,
  1340045,
  0,
  1615778,
  0,
  1947099,
  0,
  2345141,
  0,
  2823265,
  0,
  3397501,
  0,
  4087087,
  0,
  4915108,
  0,
  5909267,
  0,
  7102808,
  0,
  8535623,
  0,
  10255633,
  0,
  12320243,
  0,
  14798389,
  0,
  17772795,
  0,
  21342730,
  0,
  25627317,
  0,
  30769501,
  0,
  36940820,
  0,
  44347118,
  0,
  53235407,
  0,
  63902104,
  0,
  76702906,
  0,
  92064653,
  0,
  110499551,
  0,
  132622249,
  0,
  159170373,
  0,
  191028978,
  0,
  229260177,
  0,
  275138508,
  0,
  330193415,
  0,
  396260232,
  0,
  1188853398,
  0,
  1426699190,
  0,
  1712116603,
  0,
  2054620005,
  0
}; // idb
__int64 qword_4D6948 = 2465626643i64; // weak
int dword_4D6A10[3] = { 10, 14, 13 }; // idb
int dword_4D6A1C[3] = { 13, 10, 12 }; // idb
int dword_4D6A7C[3] = { 654, 655, 656 }; // idb
int dword_4D6A88[12] = { 500, 500, 3000, 10000, 0, 50, 5, 65, 0, 30, 5, 50 }; // idb
int dword_4D6AB8[3] = { 10, 14, 13 }; // idb
int dword_4D6AC4[231] =
{
  1,
  90,
  22,
  0,
  0,
  5,
  0,
  24,
  0,
  60,
  0,
  160,
  0,
  328,
  0,
  542,
  0,
  814,
  0,
  1157,
  0,
  1588,
  0,
  2250,
  0,
  3086,
  0,
  4135,
  0,
  5444,
  0,
  7068,
  0,
  9126,
  0,
  11660,
  0,
  14769,
  0,
  18572,
  0,
  23214,
  0,
  29155,
  0,
  36409,
  0,
  45245,
  0,
  55988,
  0,
  69026,
  0,
  85569,
  0,
  105656,
  0,
  130009,
  0,
  159494,
  0,
  195150,
  0,
  238225,
  0,
  290216,
  0,
  352918,
  0,
  428488,
  0,
  519513,
  0,
  629149,
  0,
  761081,
  0,
  919784,
  0,
  1110624,
  0,
  1340045,
  0,
  1615778,
  0,
  1947099,
  0,
  2345141,
  0,
  2823265,
  0,
  3397501,
  0,
  4087087,
  0,
  4915108,
  0,
  5909267,
  0,
  7102808,
  0,
  8535623,
  0,
  10255633,
  0,
  12320243,
  0,
  14798389,
  0,
  17772795,
  0,
  21342730,
  0,
  25627317,
  0,
  30769501,
  0,
  36940820,
  0,
  44347118,
  0,
  53235407,
  0,
  63902104,
  0,
  76702906,
  0,
  92064653,
  0,
  110499551,
  0,
  132622249,
  0,
  159170373,
  0,
  191028978,
  0,
  229260177,
  0,
  275138508,
  0,
  330193415,
  0,
  396260232,
  0,
  1188853398,
  0,
  1426699190,
  0,
  1712116603,
  0,
  2054620005,
  0,
  -1829340653,
  0,
  -1336130088,
  0,
  -744274761,
  0,
  -34045671,
  0,
  818231987,
  1,
  1840968092,
  1,
  -1226713032,
  1,
  246033263,
  2,
  2013331761,
  2,
  -160874348,
  2,
  -1910925179,
  3,
  1142977669,
  4,
  512696930,
  5,
  615356692,
  6,
  1597545108,
  7,
  -659799336,
  8,
  -1650622408,
  10,
  -1121619783,
  12,
  1231173733,
  15,
  1477549070,
  18,
  55216106,
  22,
  1784393987,
  26,
  -1294549657,
  31,
  164682435,
  38,
  -1520209136,
  45,
  10,
  14,
  13,
  13,
  10,
  12,
  18,
  16,
  8,
  8,
  10,
  180,
  120,
  8,
  10,
  18,
  16,
  8,
  170,
  140,
  14,
  10,
  8,
  10,
  18,
  160,
  160,
  0
}; // idb
int dword_4D6E60[] = { 32 }; // weak
int dword_4D6E64[601] =
{
  0,
  31,
  1,
  31,
  1,
  31,
  2,
  31,
  3,
  31,
  4,
  31,
  5,
  31,
  6,
  31,
  7,
  30,
  8,
  30,
  9,
  30,
  10,
  29,
  11,
  29,
  12,
  29,
  12,
  28,
  13,
  28,
  14,
  28,
  15,
  27,
  15,
  27,
  16,
  27,
  16,
  26,
  17,
  26,
  18,
  25,
  18,
  25,
  19,
  25,
  19,
  24,
  20,
  24,
  20,
  24,
  21,
  23,
  21,
  23,
  21,
  22,
  22,
  22,
  22,
  0,
  0,
  1,
  0,
  2,
  0,
  3,
  0,
  4,
  0,
  5,
  0,
  6,
  0,
  7,
  0,
  8,
  0,
  9,
  0,
  10,
  0,
  10,
  0,
  11,
  0,
  12,
  0,
  13,
  0,
  13,
  0,
  14,
  0,
  14,
  0,
  15,
  0,
  15,
  0,
  16,
  0,
  16,
  0,
  17,
  0,
  17,
  0,
  18,
  0,
  18,
  0,
  19,
  0,
  19,
  0,
  20,
  0,
  20,
  0,
  21,
  0,
  21,
  0,
  22,
  0,
  22,
  0,
  23,
  0,
  23,
  0,
  24,
  0,
  24,
  0,
  25,
  0,
  25,
  0,
  26,
  0,
  26,
  0,
  27,
  0,
  27,
  0,
  28,
  0,
  28,
  0,
  29,
  0,
  29,
  0,
  30,
  0,
  30,
  0,
  31,
  0,
  31,
  0,
  32,
  0,
  32,
  0,
  33,
  0,
  33,
  0,
  34,
  1,
  34,
  2,
  35,
  3,
  35,
  4,
  36,
  5,
  36,
  6,
  37,
  7,
  37,
  8,
  38,
  9,
  38,
  10,
  39,
  11,
  39,
  12,
  40,
  13,
  40,
  14,
  41,
  15,
  41,
  16,
  42,
  17,
  42,
  18,
  43,
  19,
  43,
  20,
  44,
  21,
  44,
  22,
  45,
  23,
  45,
  24,
  46,
  25,
  46,
  26,
  47,
  27,
  47,
  28,
  48,
  29,
  48,
  30,
  49,
  31,
  49,
  32,
  50,
  33,
  50,
  34,
  51,
  35,
  51,
  36,
  52,
  37,
  52,
  38,
  53,
  39,
  53,
  40,
  54,
  41,
  54,
  42,
  55,
  43,
  55,
  44,
  56,
  45,
  56,
  46,
  57,
  47,
  57,
  48,
  58,
  49,
  58,
  50,
  59,
  41,
  59,
  52,
  60,
  53,
  60,
  54,
  61,
  55,
  61,
  56,
  62,
  57,
  62,
  58,
  63,
  59,
  63,
  60,
  64,
  61,
  64,
  62,
  65,
  63,
  65,
  64,
  66,
  65,
  66,
  66,
  67,
  67,
  67,
  68,
  68,
  69,
  68,
  70,
  69,
  71,
  69,
  72,
  70,
  73,
  70,
  74,
  71,
  75,
  71,
  76,
  72,
  77,
  72,
  78,
  73,
  79,
  73,
  80,
  74,
  81,
  74,
  82,
  75,
  83,
  75,
  84,
  76,
  85,
  76,
  86,
  77,
  87,
  77,
  88,
  78,
  89,
  78,
  90,
  79,
  91,
  79,
  92,
  80,
  93,
  80,
  94,
  81,
  95,
  81,
  96,
  82,
  97,
  82,
  98,
  83,
  99,
  83,
  100,
  84,
  101,
  84,
  102,
  85,
  103,
  85,
  104,
  86,
  105,
  86,
  106,
  87,
  107,
  87,
  108,
  88,
  109,
  88,
  110,
  89,
  111,
  89,
  112,
  90,
  113,
  90,
  114,
  91,
  115,
  91,
  116,
  92,
  117,
  92,
  118,
  93,
  119,
  93,
  120,
  94,
  121,
  94,
  122,
  95,
  123,
  95,
  124,
  96,
  125,
  96,
  126,
  97,
  127,
  97,
  128,
  98,
  129,
  98,
  130,
  99,
  131,
  99,
  132,
  100,
  133,
  100,
  134,
  101,
  135,
  101,
  136,
  102,
  137,
  102,
  138,
  103,
  139,
  103,
  140,
  104,
  141,
  104,
  142,
  105,
  143,
  105,
  144,
  106,
  145,
  106,
  146,
  107,
  147,
  107,
  148,
  108,
  149,
  108,
  150,
  109,
  151,
  109,
  152,
  110,
  153,
  110,
  154,
  111,
  155,
  111,
  156,
  112,
  157,
  112,
  158,
  113,
  159,
  113,
  160,
  114,
  161,
  114,
  162,
  115,
  163,
  115,
  164,
  116,
  165,
  116,
  166,
  117,
  167,
  117,
  168,
  118,
  169,
  118,
  170,
  119,
  171,
  119,
  172,
  120,
  173,
  120,
  174,
  121,
  175,
  121,
  176,
  122,
  177,
  122,
  178,
  123,
  179,
  123,
  180,
  124,
  181,
  124,
  182,
  125,
  183,
  125,
  184,
  126,
  185,
  126,
  186,
  127,
  187,
  127,
  188,
  128,
  189,
  128,
  190,
  129,
  191,
  129,
  192,
  130,
  193,
  130,
  194,
  131,
  195,
  700,
  1000,
  800,
  0,
  0,
  258043,
  259381,
  16049,
  0,
  0,
  265022,
  262538,
  16190,
  0,
  0,
  266040,
  284976,
  22650,
  0,
  0,
  255825,
  288802,
  27050,
  0,
  0,
  267618,
  242946,
  19630,
  0,
  0,
  232954,
  294672,
  45300,
  0
}; // idb
_UNKNOWN unk_4D77C8; // weak
int dword_4D7900[] = { 0 }; // weak
int dword_4D7960[250] =
{
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8
}; // idb
int dword_4D7D48[250] =
{
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  5,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  6,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  7,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8,
  8
}; // idb
int dword_4D8130[102] =
{
  0,
  0,
  0,
  0,
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  12,
  13,
  14,
  15,
  16,
  17,
  18,
  19,
  20,
  22,
  24,
  26,
  28,
  30,
  32,
  34,
  36,
  38,
  40,
  43,
  46,
  49,
  52,
  55,
  58,
  61,
  64,
  67,
  70,
  74,
  78,
  82,
  86,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  90,
  0
}; // idb
int dword_4D82C8[52] =
{
  50,
  52,
  52,
  54,
  54,
  56,
  56,
  58,
  58,
  60,
  60,
  62,
  62,
  64,
  64,
  66,
  66,
  68,
  68,
  70,
  70,
  72,
  72,
  74,
  74,
  76,
  76,
  78,
  78,
  80,
  80,
  82,
  82,
  84,
  84,
  86,
  86,
  88,
  88,
  90,
  90,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  95,
  0
}; // idb
int dword_4D8398[100] =
{
  0,
  0,
  0,
  1,
  1,
  3,
  3,
  6,
  6,
  9,
  9,
  12,
  12,
  15,
  15,
  18,
  18,
  21,
  21,
  24,
  24,
  27,
  27,
  30,
  30,
  33,
  33,
  36,
  36,
  39,
  39,
  42,
  42,
  45,
  45,
  48,
  48,
  51,
  51,
  54,
  54,
  57,
  57,
  60,
  60,
  63,
  63,
  66,
  66,
  69,
  69,
  72,
  72,
  75,
  75,
  78,
  78,
  81,
  81,
  84,
  84,
  87,
  87,
  90,
  90,
  93,
  93,
  96,
  96,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99,
  99
}; // idb
int dword_4D8528[210] =
{
  0,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100
}; // idb
int dword_4D8870[210] =
{
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  25,
  25,
  25,
  50,
  50,
  50,
  100,
  100,
  100,
  100,
  100,
  100,
  100
}; // idb
int dword_4D8BB8[61] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  10,
  10,
  20,
  20,
  30,
  30,
  40,
  40,
  50,
  50,
  60,
  60,
  70,
  70,
  80,
  80,
  90,
  90,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100,
  100
}; // idb
int dword_4D8CAC[14] = { 89, 83, 74, 65, 56, 48, 32, 19, 5, 3, 0, 91, 93, 95 }; // idb
int dword_4D8CE4[7] = { 0, 25, 50, 75, 90, 95, 0 }; // idb
int dword_4D8D00[] = { 0 }; // weak
int dword_4D9180[6] = { 4, 4, 5, 1, 5, 3 }; // idb
int dword_4D9198[3] = { 4, 1, 2 }; // idb
int dword_4D91A4[11] = { 0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20 }; // idb
int dword_4D91D0[16] = { 6, 7, 8, 9, 10, 70, 71, 72, 73, 74, 32, 33, 34, 35, 36, 0 }; // idb
int dword_4D9210[14] = { 30, 21, 15, 12, 9, 5, 1, 30, 21, 15, 12, 9, 5, 1 }; // idb
int dword_4D9248[8] = { 42, 26, 17, 14, 11, 6, 2, 0 }; // idb
int dword_4D9268[21] =
{
  0,
  10,
  11,
  11,
  12,
  12,
  13,
  13,
  14,
  14,
  15,
  15,
  16,
  16,
  17,
  17,
  18,
  18,
  19,
  19,
  20
}; // idb
int dword_4D92BC[8] = { 100, 115, 130, 145, 160, 175, 190, 200 }; // idb
int dword_4D92DC[8] = { 100, 85, 70, 55, 40, 25, 10, 0 }; // idb
int dword_4D92FC[9] = { 100, 115, 130, 145, 160, 175, 190, 200, 0 }; // idb
int dword_4D9320[288] =
{
  100,
  100,
  100,
  100,
  100,
  100,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  85,
  70,
  70,
  70,
  70,
  70,
  55,
  55,
  55,
  40,
  40,
  40,
  25,
  25,
  25,
  10,
  0,
  0,
  1996959894,
  -301047508,
  -1727442502,
  124634137,
  1886057615,
  -379345611,
  -1637575261,
  249268274,
  2044508324,
  -522852066,
  -1747789432,
  162941995,
  2125561021,
  -407360249,
  -1866523247,
  498536548,
  1789927666,
  -205950648,
  -2067906082,
  450548861,
  1843258603,
  -187386543,
  -2083289657,
  325883990,
  1684777152,
  -43845254,
  -1973040660,
  335633487,
  1661365465,
  -99664541,
  -1928851979,
  997073096,
  1281953886,
  -715111964,
  -1570279054,
  1006888145,
  1258607687,
  -770865667,
  -1526024853,
  901097722,
  1119000684,
  -608450090,
  -1396901568,
  853044451,
  1172266101,
  -589951537,
  -1412350631,
  651767980,
  1373503546,
  -925412992,
  -1076862698,
  565507253,
  1454621731,
  -809855591,
  -1195530993,
  671266974,
  1594198024,
  -972236366,
  -1324619484,
  795835527,
  1483230225,
  -1050600021,
  -1234817731,
  1994146192,
  31158534,
  -1731059524,
  -271249366,
  1907459465,
  112637215,
  -1614814043,
  -390540237,
  2013776290,
  251722036,
  -1777751922,
  -519137256,
  2137656763,
  141376813,
  -1855689577,
  -429695999,
  1802195444,
  476864866,
  -2056965928,
  -228458418,
  1812370925,
  453092731,
  -2113342271,
  -183516073,
  1706088902,
  314042704,
  -1950435094,
  -54949764,
  1658658271,
  366619977,
  -1932296973,
  -69972891,
  1303535960,
  984961486,
  -1547960204,
  -725929758,
  1256170817,
  1037604311,
  -1529756563,
  -740887301,
  1131014506,
  879679996,
  -1385723834,
  -631195440,
  1141124467,
  855842277,
  -1442165665,
  -586318647,
  1342533948,
  654459306,
  -1106571248,
  -921952122,
  1466479909,
  544179635,
  -1184443383,
  -832445281,
  1591671054,
  702138776,
  -1328506846,
  -942167884,
  1504918807,
  783551873,
  -1212326853,
  -1061524307,
  -306674912,
  -1698712650,
  62317068,
  1957810842,
  -355121351,
  -1647151185,
  81470997,
  1943803523,
  -480048366,
  -1805370492,
  225274430,
  2053790376,
  -468791541,
  -1828061283,
  167816743,
  2097651377,
  -267414716,
  -2029476910,
  503444072,
  1762050814,
  -144550051,
  -2140837941,
  426522225,
  1852507879,
  -19653770,
  -1982649376,
  282753626,
  1742555852,
  -105259153,
  -1900089351,
  397917763,
  1622183637,
  -690576408,
  -1580100738,
  953729732,
  1340076626,
  -776247311,
  -1497606297,
  1068828381,
  1219638859,
  -670225446,
  -1358292148,
  906185462,
  1090812512,
  -547295293,
  -1469587627,
  829329135,
  1181335161,
  -882789492,
  -1134132454,
  628085408,
  1382605366,
  -871598187,
  -1156888829,
  570562233,
  1426400815,
  -977650754,
  -1296233688,
  733239954,
  1555261956,
  -1026031705,
  -1244606671,
  752459403,
  1541320221,
  -1687895376,
  -328994266,
  1969922972,
  40735498,
  -1677130071,
  -351390145,
  1913087877,
  83908371,
  -1782625662,
  -491226604,
  2075208622,
  213261112,
  -1831694693,
  -438977011,
  2094854071,
  198958881,
  -2032938284,
  -237706686,
  1759359992,
  534414190,
  -2118248755,
  -155638181,
  1873836001,
  414664567,
  -2012718362,
  -15766928,
  1711684554,
  285281116,
  -1889165569,
  -127750551,
  1634467795,
  376229701,
  -1609899400,
  -686959890,
  1308918612,
  956543938,
  -1486412191,
  -799009033,
  1231636301,
  1047427035,
  -1362007478,
  -640263460,
  1088359270,
  936918000,
  -1447252397,
  -558129467,
  1202900863,
  817233897,
  -1111625188,
  -893730166,
  1404277552,
  615818150,
  -1160759803,
  -841546093,
  1423857449,
  601450431,
  -1285129682,
  -1000256840,
  1567103746,
  711928724,
  -1274298825,
  -1022587231,
  1510334235,
  755167117
}; // idb
int dword_4D9830 = -1153374642; // weak
int (*off_4DA1C8)(void) = &terminate; // weak
_UNKNOWN unk_4DA3E0; // weak
_UNKNOWN unk_4DA3F8; // weak
HANDLE hEvent = NULL; // idb
int dword_4DA6E4 = 0; // weak
int dword_4DA6E8 = 0; // weak
_UNKNOWN unk_4DA6EC; // weak
int dword_4DA6F0[4] = { 0, 0, 0, 0 }; // idb
LONG Target = 0; // idb
int dword_4DA75C = 0; // weak
LONG dword_4DA760 = 0; // idb
int dword_4DA764 = 0; // weak
LONG dword_4DA768 = 0; // idb
LONG Addend = 0; // idb
int dword_4DA770 = 0; // weak
LONG dword_4DA774 = 0; // idb
int dword_4DA778 = 0; // weak
int dword_4DA77C = 0; // weak
int dword_4DA780 = 0; // weak
int dword_4DA784 = 0; // weak
int dword_4DA788 = 0; // weak
int dword_4DA78C = 0; // weak
int dword_4DA790 = 0; // weak
int dword_4DA794 = 0; // weak
_DWORD dword_4DA798[4] = { 0, 0, 0, 0 }; // idb
HANDLE hObject = NULL; // idb
int dword_4DA7AC = 0; // weak
_DWORD dword_4DA7B8[4] = { 0, 0, 0, 0 }; // idb
int dword_4DA7C8 = 0; // weak
int dword_4DA824 = 0; // idb
int dword_4DA828[6198] =
{
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  
}; // weak
int dword_4E0900; // weak
LONG dword_4E0904; // idb
_DWORD dword_4E0908[17]; // idb
_UNKNOWN unk_4E094C; // weak
int dword_4E0958[3]; // idb
int dword_4E0964; // weak
int dword_4E0968[3]; // idb
int dword_4E0974[3]; // idb
_UNKNOWN unk_4E0980; // weak
HANDLE hHandle; // idb
int dword_4E099C; // weak
int dword_4E09A0; // weak
int dword_4E09A4[3]; // idb
_UNKNOWN unk_4E09B0; // weak
int dword_4E09C8[3]; // idb
_UNKNOWN unk_4E09D4; // weak
_UNKNOWN unk_4E09F0; // weak
_UNKNOWN unk_4E0A00; // weak
_UNKNOWN unk_4E0A08; // weak
_UNKNOWN unk_4E0A10; // weak
_UNKNOWN unk_4E0A18; // weak
_UNKNOWN unk_4E0A20; // weak
_UNKNOWN unk_4E0A28; // weak
_UNKNOWN unk_4E0A30; // weak
_UNKNOWN unk_4E0A38; // weak
_UNKNOWN unk_4E0A40; // weak
_UNKNOWN unk_4E0A48; // weak
_UNKNOWN unk_4E0A50; // weak
_UNKNOWN unk_4E0A58; // weak
_UNKNOWN unk_4E0A60; // weak
_UNKNOWN unk_4E0A68; // weak
_UNKNOWN unk_4E0A70; // weak
_UNKNOWN unk_4E0A78; // weak
_UNKNOWN unk_4E0A80; // weak
_UNKNOWN unk_4E0A88; // weak
_UNKNOWN unk_4E0A90; // weak
_UNKNOWN unk_4E0A98; // weak
_UNKNOWN unk_4E0AA0; // weak
_UNKNOWN unk_4E0AA8; // weak
_UNKNOWN unk_4E0AB0; // weak
_UNKNOWN unk_4E0AB8; // weak
_UNKNOWN unk_4E0AC0; // weak
_UNKNOWN unk_4E0AC8; // weak
_UNKNOWN unk_4E0AD0; // weak
_UNKNOWN unk_4E0AD8; // weak
_UNKNOWN unk_4E0AE0; // weak
_UNKNOWN unk_4E0AE8; // weak
_UNKNOWN unk_4E0AF0; // weak
_UNKNOWN unk_4E0AF8; // weak
_UNKNOWN unk_4E0B00; // weak
_UNKNOWN unk_4E0B08; // weak
_UNKNOWN unk_4E0B10; // weak
_UNKNOWN unk_4E0B18; // weak
_UNKNOWN unk_4E0B20; // weak
_UNKNOWN unk_4E0B28; // weak
_UNKNOWN unk_4E0B30; // weak
_UNKNOWN unk_4E0B38; // weak
_UNKNOWN unk_4E0B40; // weak
_UNKNOWN unk_4E0B48; // weak
_UNKNOWN unk_4E0B50; // weak
_UNKNOWN unk_4E0B58; // weak
_UNKNOWN unk_4E0B60; // weak
_UNKNOWN unk_4E0B68; // weak
int dword_4E0B70; // weak
char begin[]; // idb
LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter; // idb
CHAR byte_4E0B80[264]; // idb
CHAR FileName[260]; // idb
__time32_t dword_4E0D8C; // idb
struct _RTL_CRITICAL_SECTION CriticalSection; // idb
char *g_szMailServer; // idb
char *g_szMailFrom; // idb
char *g_szMailTo; // idb
_UNKNOWN unk_4E0DB4; // weak
int dword_4E0DB8; // weak
void *nThread; // idb
void *nThreadId; // idb
void **hThread; // idb
DWORD nCount; // idb
int dword_4E0DD0[64]; // idb
HANDLE Handles[64]; // idb
int dword_4E0FD0; // weak
HANDLE handle; // idb
LONG dword_4E0FD8; // idb
LONG dword_4E0FDC; // idb
HANDLE ExistingCompletionPort; // idb
LONG dword_4E0FE4; // idb
_UNKNOWN unk_4E0FE8; // weak
_UNKNOWN unk_4E100C; // weak
_UNKNOWN unk_4E1020; // weak
LONG pRef; // idb
_DWORD dword_4E1030[32]; // idb
LONG dword_4E10B0; // idb
int dword_4E10B4[3]; // idb
int dword_4E10C0[3]; // idb
int dword_4E10CC[3]; // idb
_UNKNOWN unk_4E10D8; // weak
int dword_4E10F0[3]; // idb
int dword_4E10FC[3]; // idb
_DWORD dword_4E1108; // idb
_DWORD dword_4E110C; // idb
int dword_4E1110[3]; // idb
FILE *Stream; // idb
_UNKNOWN unk_4E1128; // weak
_UNKNOWN unk_4E115C; // weak
char dword_4E1160[]; // idb
int dword_4E1164; // weak
u_short hostshort; // idb
u_short dword_4E116C; // idb
u_short nPort; // idb
char dword_4E1174[]; // idb
int dword_4E1178; // weak
int dword_4E117C; // weak
int dword_4E1180; // weak
int dword_4E1184; // weak
int dword_4E1188; // weak
int dword_4E118C; // weak
char dword_4E1190[]; // idb
_UNKNOWN unk_4E1194; // weak
_UNKNOWN unk_4E11B0; // weak
_UNKNOWN unk_4E11CC; // weak
_UNKNOWN unk_4E11E8; // weak
_UNKNOWN unk_4E1204; // weak
_UNKNOWN unk_4E1220; // weak
_UNKNOWN unk_4E123C; // weak
int dword_4E1258[3]; // idb
_UNKNOWN unk_4E1264; // weak
HANDLE dword_4E1280; // idb
CHAR ClassName[104]; // idb
CHAR WindowName[100]; // idb
HINSTANCE hInstance; // idb
int dword_4E1358[4]; // idb
_UNKNOWN unk_4E1368; // weak
_UNKNOWN unk_4E158E; // weak
UINT uValue; // idb
int dword_4E17B8; // weak
LONG dword_4E17C0; // idb
int dword_4E17C8[16]; // idb
_UNKNOWN unk_4E1808; // weak
LONG dword_4E1810; // idb
int dword_4E1814; // weak
int dword_4E181C; // weak
int dword_4E1820[3]; // idb
_UNKNOWN unk_4E182C; // weak
int dword_4E184C[3]; // idb
_UNKNOWN unk_4E1858; // weak
int dword_4E1870[3]; // idb
_UNKNOWN unk_4E187C; // weak
_DWORD dword_4E1898[22]; // idb
_UNKNOWN unk_4E18F0; // weak
int dword_4E1930[26]; // weak
int dword_4E1998[26]; // weak
int dword_4E1A00[25]; // weak
int dword_4E1A64; // weak
int dword_4E1A68; // weak
int dword_4E1A70[8]; // idb
int dword_4E1A90; // weak
int dword_4E1A94; // weak
LONG dword_4E1A98; // idb
int dword_4E1A9C[3]; // idb
int dword_4E1AA8[3]; // idb
int dword_4E1AB4[3]; // idb
_UNKNOWN unk_4E1AC0; // weak
int dword_4E1AD8[24]; // weak
_UNKNOWN unk_4E1B38; // weak
_UNKNOWN unk_4E1B58; // weak
_UNKNOWN unk_4E1B78; // weak
LONG dword_4E1B98; // idb
int dword_4E1B9C[3]; // idb
_UNKNOWN unk_4E1BA8; // weak
_UNKNOWN unk_4E1BB0; // weak
_UNKNOWN unk_4E1BB8; // weak
_UNKNOWN unk_4E1BC0; // weak
_UNKNOWN unk_4E1BC8; // weak
_UNKNOWN unk_4E1BD0; // weak
_UNKNOWN unk_4E1BD8; // weak
_UNKNOWN unk_4E1BE0; // weak
_UNKNOWN unk_4E1BE8; // weak
_UNKNOWN unk_4E1BF0; // weak
_UNKNOWN unk_4E1BF8; // weak
_UNKNOWN unk_4E1C00; // weak
_UNKNOWN unk_4E1C08; // weak
_UNKNOWN unk_4E1C10; // weak
_UNKNOWN unk_4E1C18; // weak
_UNKNOWN unk_4E1C20; // weak
_UNKNOWN unk_4E1C28; // weak
_UNKNOWN unk_4E1C30; // weak
_UNKNOWN unk_4E1C38; // weak
_UNKNOWN unk_4E1C40; // weak
_UNKNOWN unk_4E1C48; // weak
_UNKNOWN unk_4E1C50; // weak
_UNKNOWN unk_4E1C58; // weak
_UNKNOWN unk_4E1C60; // weak
_UNKNOWN unk_4E1C68; // weak
_UNKNOWN unk_4E1C70; // weak
_UNKNOWN unk_4E1C78; // weak
_UNKNOWN unk_4E1C80; // weak
_UNKNOWN unk_4E1C88; // weak
_UNKNOWN unk_4E1C90; // weak
_UNKNOWN unk_4E1C98; // weak
_UNKNOWN unk_4E1CA0; // weak
_UNKNOWN unk_4E1CA8; // weak
_UNKNOWN unk_4E1CB0; // weak
_UNKNOWN unk_4E1CB8; // weak
_UNKNOWN unk_4E1CC0; // weak
_UNKNOWN unk_4E1CC8; // weak
_UNKNOWN unk_4E1CD0; // weak
_UNKNOWN unk_4E1CD8; // weak
_UNKNOWN unk_4E1CE0; // weak
_UNKNOWN unk_4E1CE8; // weak
_UNKNOWN unk_4E1CF0; // weak
_UNKNOWN unk_4E1CF8; // weak
_UNKNOWN unk_4E1D00; // weak
_UNKNOWN unk_4E1D08; // weak
_UNKNOWN unk_4E1D10; // weak
_UNKNOWN unk_4E1D18; // weak
_UNKNOWN unk_4E1D20; // weak
_UNKNOWN unk_4E1D28; // weak
_UNKNOWN unk_4E1D30; // weak
_UNKNOWN unk_4E1D38; // weak
_UNKNOWN unk_4E1D40; // weak
_UNKNOWN unk_4E1D48; // weak
_UNKNOWN unk_4E1D50; // weak
_UNKNOWN unk_4E1D58; // weak
_UNKNOWN unk_4E1D60; // weak
_UNKNOWN unk_4E1D68; // weak
_UNKNOWN unk_4E1D70; // weak
_UNKNOWN unk_4E1D78; // weak
_UNKNOWN unk_4E1D80; // weak
_UNKNOWN unk_4E1D88; // weak
_UNKNOWN unk_4E1D90; // weak
_UNKNOWN unk_4E1D98; // weak
_UNKNOWN unk_4E1DA0; // weak
_UNKNOWN unk_4E1DA8; // weak
_UNKNOWN unk_4E1DB0; // weak
_UNKNOWN unk_4E1DB8; // weak
_UNKNOWN unk_4E1DC0; // weak
_UNKNOWN unk_4E1DC8; // weak
_UNKNOWN unk_4E1DD0; // weak
_UNKNOWN unk_4E1DD8; // weak
_UNKNOWN unk_4E1DE0; // weak
_UNKNOWN unk_4E1DE8; // weak
_UNKNOWN unk_4E1DF0; // weak
_UNKNOWN unk_4E1DF8; // weak
_UNKNOWN unk_4E1E00; // weak
_UNKNOWN unk_4E1E08; // weak
_UNKNOWN unk_4E1E10; // weak
_UNKNOWN unk_4E1E18; // weak
_UNKNOWN unk_4E1E20; // weak
_UNKNOWN unk_4E1E28; // weak
_UNKNOWN unk_4E1E30; // weak
_UNKNOWN unk_4E1E38; // weak
_UNKNOWN unk_4E1E40; // weak
_UNKNOWN unk_4E1E48; // weak
_UNKNOWN unk_4E1E50; // weak
_UNKNOWN unk_4E1E58; // weak
_UNKNOWN unk_4E1E60; // weak
_UNKNOWN unk_4E1E68; // weak
_UNKNOWN unk_4E1E70; // weak
_UNKNOWN unk_4E1E78; // weak
_UNKNOWN unk_4E1E80; // weak
_UNKNOWN unk_4E1E88; // weak
_UNKNOWN unk_4E1E90; // weak
_UNKNOWN unk_4E1E98; // weak
_UNKNOWN unk_4E1EA0; // weak
_UNKNOWN unk_4E1EA8; // weak
_UNKNOWN unk_4E1EB0; // weak
_UNKNOWN unk_4E1EB8; // weak
_UNKNOWN unk_4E1EC0; // weak
_UNKNOWN unk_4E1EC8; // weak
_UNKNOWN unk_4E1ED0; // weak
_UNKNOWN unk_4E1ED8; // weak
_UNKNOWN unk_4E1EE0; // weak
_UNKNOWN unk_4E1EE8; // weak
_UNKNOWN unk_4E1EF0; // weak
_UNKNOWN unk_4E1EF8; // weak
_UNKNOWN unk_4E1F00; // weak
_UNKNOWN unk_4E1F08; // weak
_UNKNOWN unk_4E1F10; // weak
_UNKNOWN unk_4E1F18; // weak
_UNKNOWN unk_4E1F20; // weak
_UNKNOWN unk_4E1F28; // weak
_UNKNOWN unk_4E1F30; // weak
int dword_4E1F38[4]; // idb
_UNKNOWN unk_4E1F48; // weak
_UNKNOWN unk_4E1F50; // weak
_UNKNOWN unk_4E1F58; // weak
_UNKNOWN unk_4E1F60; // weak
_UNKNOWN unk_4E1F68; // weak
_UNKNOWN unk_4E1F70; // weak
_UNKNOWN unk_4E1F78; // weak
_UNKNOWN unk_4E1F80; // weak
_UNKNOWN unk_4E1F88; // weak
_UNKNOWN unk_4E1F90; // weak
_UNKNOWN unk_4E1F98; // weak
_UNKNOWN unk_4E1FA0; // weak
_UNKNOWN unk_4E1FA8; // weak
_UNKNOWN unk_4E1FB0; // weak
LONG dword_4E1FB8; // idb
int dword_4E1FC0; // weak
int dword_4E1FC4[3]; // idb
_UNKNOWN unk_4E1FD0; // weak
int dword_4E1FF0; // weak
int dword_4E1FF4; // weak
int dword_4E1FF8; // weak
LONG dword_4E1FFC; // idb
LONG dword_4E2000; // idb
int dword_4E2004; // weak
int dword_4E200C[2]; // weak
LONG dword_4E2014; // idb
int dword_4E201C; // weak
int dword_4E2020[3]; // idb
_UNKNOWN unk_4E202C; // weak
int dword_4E2044[3]; // idb
_UNKNOWN unk_4E2050; // weak
int dword_4E2068[4]; // idb
_UNKNOWN unk_4E2078; // weak
_UNKNOWN unk_4E2098; // weak
_UNKNOWN unk_4E20B8; // weak
int dword_4E20D0[3]; // idb
_UNKNOWN unk_4E20DC; // weak
_UNKNOWN unk_4E20F4; // weak
int dword_4E2104; // weak
int dword_4E2108; // weak
int dword_4E210C[3]; // idb
_UNKNOWN unk_4E2118; // weak
CScreen *dword_4E2130; // idb
HWND hWnd; // idb
int dword_4E2138; // weak
int dword_4E213C; // weak
_UNKNOWN pLink; // weak
__time32_t Time; // idb
int dword_4E214C[3]; // idb
_UNKNOWN unk_4E2158; // weak
int dword_4E2168; // weak
_UNKNOWN unk_4E2170; // weak
int dword_4E2188; // weak
int dword_4E218C[3]; // idb
int dword_4E2198[4]; // idb
int dword_4E21A8[]; // weak
_UNKNOWN unk_4E21B0; // weak
_UNKNOWN unk_4E21B8; // weak
_UNKNOWN unk_4E21C0; // weak
_UNKNOWN unk_4E21C8; // weak
_UNKNOWN unk_4E21D0; // weak
_UNKNOWN unk_4E21D8; // weak
_UNKNOWN unk_4E21E0; // weak
_UNKNOWN unk_4E21E8; // weak
_UNKNOWN unk_4E21F0; // weak
_UNKNOWN unk_4E21F8; // weak
_UNKNOWN unk_4E2200; // weak
_UNKNOWN unk_4E2208; // weak
_UNKNOWN unk_4E2210; // weak
_UNKNOWN unk_4E2218; // weak
_UNKNOWN unk_4E2220; // weak
_UNKNOWN unk_4E2228; // weak
_UNKNOWN unk_4E2230; // weak
_UNKNOWN unk_4E2238; // weak
_UNKNOWN unk_4E2240; // weak
_UNKNOWN unk_4E2248; // weak
_UNKNOWN unk_4E2250; // weak
_UNKNOWN unk_4E2258; // weak
_UNKNOWN unk_4E2260; // weak
_UNKNOWN unk_4E2268; // weak
_UNKNOWN unk_4E2270; // weak
_UNKNOWN unk_4E2278; // weak
_UNKNOWN unk_4E2280; // weak
_UNKNOWN unk_4E2288; // weak
_UNKNOWN unk_4E2290; // weak
_UNKNOWN unk_4E2298; // weak
_UNKNOWN unk_4E22A0; // weak
_UNKNOWN unk_4E22A8; // weak
_UNKNOWN unk_4E22B0; // weak
_UNKNOWN unk_4E22B8; // weak
_UNKNOWN unk_4E22C0; // weak
_UNKNOWN unk_4E22C8; // weak
_UNKNOWN unk_4E22D0; // weak
_UNKNOWN unk_4E22D8; // weak
_UNKNOWN unk_4E22E0; // weak
_UNKNOWN unk_4E22E8; // weak
_UNKNOWN unk_4E22F0; // weak
_UNKNOWN unk_4E22F8; // weak
_UNKNOWN unk_4E2300; // weak
_UNKNOWN unk_4E2308; // weak
_UNKNOWN unk_4E2310; // weak
_UNKNOWN unk_4E2318; // weak
_UNKNOWN unk_4E2320; // weak
_UNKNOWN unk_4E2328; // weak
_UNKNOWN unk_4E2330; // weak
_UNKNOWN unk_4E2338; // weak
_UNKNOWN unk_4E2340; // weak
_UNKNOWN unk_4E2348; // weak
_UNKNOWN unk_4E2350; // weak
_UNKNOWN unk_4E2358; // weak
_UNKNOWN unk_4E2360; // weak
_UNKNOWN unk_4E2368; // weak
_UNKNOWN unk_4E2370; // weak
_UNKNOWN unk_4E2378; // weak
_UNKNOWN unk_4E2380; // weak
_UNKNOWN unk_4E2388; // weak
_UNKNOWN unk_4E2390; // weak
_UNKNOWN unk_4E2398; // weak
_UNKNOWN unk_4E23A0; // weak
_UNKNOWN unk_4E23A8; // weak
_UNKNOWN unk_4E23B0; // weak
_UNKNOWN unk_4E23B8; // weak
_UNKNOWN unk_4E23C0; // weak
_UNKNOWN unk_4E23C8; // weak
_UNKNOWN unk_4E23D0; // weak
_UNKNOWN unk_4E23D8; // weak
_UNKNOWN unk_4E23E0; // weak
_UNKNOWN unk_4E23E8; // weak
_UNKNOWN unk_4E23F0; // weak
_UNKNOWN unk_4E23F8; // weak
_UNKNOWN unk_4E2400; // weak
_UNKNOWN unk_4E2408; // weak
_UNKNOWN unk_4E2410; // weak
_UNKNOWN unk_4E2418; // weak
_UNKNOWN unk_4E2420; // weak
_UNKNOWN unk_4E2428; // weak
_UNKNOWN unk_4E2430; // weak
_UNKNOWN unk_4E2438; // weak
_UNKNOWN unk_4E2440; // weak
_UNKNOWN unk_4E2448; // weak
_UNKNOWN unk_4E2450; // weak
_UNKNOWN unk_4E2458; // weak
_UNKNOWN unk_4E2460; // weak
_UNKNOWN unk_4E2468; // weak
_UNKNOWN unk_4E2470; // weak
_UNKNOWN unk_4E2478; // weak
_UNKNOWN unk_4E2480; // weak
_UNKNOWN unk_4E2488; // weak
_UNKNOWN unk_4E2490; // weak
_UNKNOWN unk_4E2498; // weak
_UNKNOWN unk_4E24A0; // weak
_UNKNOWN unk_4E24A8; // weak
_UNKNOWN unk_4E24B0; // weak
_UNKNOWN unk_4E24B8; // weak
_UNKNOWN unk_4E24C0; // weak
_UNKNOWN unk_4E24C8; // weak
_UNKNOWN unk_4E24D0; // weak
_UNKNOWN unk_4E24D8; // weak
_UNKNOWN unk_4E24E0; // weak
_UNKNOWN unk_4E24E8; // weak
_UNKNOWN unk_4E24F0; // weak
_UNKNOWN unk_4E24F8; // weak
_UNKNOWN unk_4E2500; // weak
_UNKNOWN unk_4E2508; // weak
_UNKNOWN unk_4E2510; // weak
_UNKNOWN unk_4E2518; // weak
_UNKNOWN unk_4E2520; // weak
_UNKNOWN unk_4E2528; // weak
_UNKNOWN unk_4E2530; // weak
_UNKNOWN unk_4E2538; // weak
_UNKNOWN unk_4E2540; // weak
_UNKNOWN unk_4E2548; // weak
_UNKNOWN unk_4E2550; // weak
_UNKNOWN unk_4E2558; // weak
_UNKNOWN unk_4E2560; // weak
int dword_4E2568; // weak
_UNKNOWN unk_4E2570; // weak
_UNKNOWN unk_4E2578; // weak
_UNKNOWN unk_4E2580; // weak
_UNKNOWN unk_4E2588; // weak
_UNKNOWN unk_4E2590; // weak
_UNKNOWN unk_4E2598; // weak
_UNKNOWN unk_4E25A0; // weak
_UNKNOWN unk_4E25A8; // weak
_UNKNOWN unk_4E25B0; // weak
_UNKNOWN unk_4E25B8; // weak
_UNKNOWN unk_4E25C0; // weak
_UNKNOWN unk_4E25C8; // weak
_UNKNOWN unk_4E25D0; // weak
_UNKNOWN unk_4E25D8; // weak
_UNKNOWN unk_4E25E0; // weak
_UNKNOWN unk_4E25E8; // weak
_UNKNOWN unk_4E25F0; // weak
_UNKNOWN unk_4E25F8; // weak
_UNKNOWN unk_4E2600; // weak
_UNKNOWN unk_4E2608; // weak
_UNKNOWN unk_4E2610; // weak
_UNKNOWN unk_4E2618; // weak
_UNKNOWN unk_4E2620; // weak
_UNKNOWN unk_4E2628; // weak
_UNKNOWN unk_4E2630; // weak
_UNKNOWN unk_4E2638; // weak
_UNKNOWN unk_4E2640; // weak
_UNKNOWN unk_4E2648; // weak
_UNKNOWN unk_4E2650; // weak
_UNKNOWN unk_4E2658; // weak
_UNKNOWN unk_4E2660; // weak
int dword_4E2668[]; // weak
int dword_4E266C; // weak
int dword_4E2670; // weak
int dword_4E2674; // weak
int dword_4E2678; // weak
int dword_4E267C; // weak
int dword_4E2680; // weak
int dword_4E2684; // weak
int dword_4E2688; // weak
int dword_4E2690[]; // weak
int dword_4E2694; // weak
int dword_4E2698; // weak
int dword_4E269C; // weak
int dword_4E26A0; // weak
int dword_4E26A4; // weak
int dword_4E26A8; // weak
int dword_4E26AC; // weak
int dword_4E26B0; // weak
int dword_4E26B4; // weak
int dword_4E26B8; // weak
int dword_4E26BC; // weak
int dword_4E26C0; // weak
int dword_4E26C4; // weak
int dword_4E26C8; // weak
int dword_4E26CC; // weak
int dword_4E26D0; // weak
int dword_4E26D4; // weak
int dword_4E26D8; // weak
int dword_4E26DC; // weak
int dword_4E26E0; // weak
int dword_4E26E4; // weak
int dword_4E26E8; // weak
int dword_4E26EC; // weak
int dword_4E26F0; // weak
int dword_4E26F4; // weak
int dword_4E26F8; // weak
int dword_4E26FC; // weak
int dword_4E2700; // weak
int dword_4E2704; // weak
int dword_4E2708; // weak
int dword_4E270C; // weak
int dword_4E2710; // weak
int dword_4E2714; // weak
int dword_4E2718; // weak
int dword_4E271C; // weak
int dword_4E2720; // weak
int dword_4E2724; // weak
int dword_4E2728; // weak
int dword_4E272C; // weak
int dword_4E2730; // weak
int dword_4E2738; // weak
int dword_4E2740; // weak
int dword_4E2744; // weak
int dword_4E2748[3]; // idb
int dword_4E2754; // weak
_UNKNOWN unk_4E2758; // weak
LONG dword_4E2ED8; // idb
_UNKNOWN unk_4E2EDC; // weak
int (__cdecl *dword_4E2F10)(_DWORD); // weak
int dword_4E2F18[210]; // idb
int dword_4E3260[210]; // idb
int dword_4E35A8; // weak
int dword_4E35AC; // weak
int dword_4E35B0; // weak
_UNKNOWN unk_4E35B4; // weak
int dword_4E35B8; // weak
char byte_4E35C0[256]; // idb
LONG g_nRandIndex; // idb
int dword_4E36C4[]; // weak
int g_nRandtable[32]; // idb
int ACP_ID; // weak
_UNKNOWN unk_4E374C; // weak
int dword_4E3750; // weak


//----- (00401000) --------------------------------------------------------
CMemory **__cdecl operator_new(size_t Size)
{
  return CMemory::_malloc(Size);
}

//----- (00401020) --------------------------------------------------------
void __cdecl operator_delete(void *pBlock)
{
  CMemory::_free(pBlock);
}

//----- (00401040) --------------------------------------------------------
void __userpurge CBillingPacket::OnIOCallback(CBillingPacket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  CAuthSocket::Process(a2, a3, a4, (unsigned __int16 *)dwTransferred);
  CIOBuffer::Release(*((CIOBuffer **)this + 4));
  CMemoryPool<CBillingPacket>::Free(this);
}

//----- (00401070) --------------------------------------------------------
void __thiscall CIOBuffer::Release(CIOBuffer *this)
{
  if ( !InterlockedDecrement((volatile LONG *)this + 2001) )
    CIOBuffer::Free(this);
}

//----- (004010A0) --------------------------------------------------------
_DWORD *__usercall CDBSocket::CDBSocket_0@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOSocket::CIOSocket((int)this, a2, a3, a4, 0);
  *this = &off_4B433C;
  CIOObject::AddRef(this, a2, a3, a4);
  return this;
}
// 4B433C: using guessed type void *(__thiscall *off_4B433C)(CIOObject *__hidden this, unsigned int);

//----- (004010D0) --------------------------------------------------------
void __usercall CIOObject::AddRef(volatile int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOObject::AddRef((CIOObject *)a1, a2, a3, a4, a1 + 3);
}

//----- (004010F0) --------------------------------------------------------
void __thiscall CIOObject::OnFree(CIOObject *this)
{
  if ( this )
    (**(void (__thiscall ***)(CIOObject *, int))this)(this, 1);
}

//----- (00401140) --------------------------------------------------------
CIOObject *__userpurge CIOObject::`vector deleting destructor'@<eax>(CIOObject *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int a2)
{
  CAuthSocket::_CAuthSocket(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00401170) --------------------------------------------------------
_DWORD *__usercall CAuthSocket::_CAuthSocket@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *this = &off_4B433C;
  return CIOSocket::_CIOSocket((int)this, a2, a3, a4);
}
// 4B433C: using guessed type void *(__thiscall *off_4B433C)(CIOObject *__hidden this, unsigned int);

//----- (00401190) --------------------------------------------------------
int __usercall CAuthSocket::Start@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  const char *v3; // eax
  const char *v4; // eax
  struct hostent *v6; // [esp+0h] [ebp-1Ch]
  struct sockaddr name; // [esp+4h] [ebp-18h] BYREF
  int v8; // [esp+14h] [ebp-8h]
  SOCKET s; // [esp+18h] [ebp-4h]

  v8 = dword_4D9830;
  s = socket(2, 1, 0);
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_WORD *)name.sa_data = 0;
  bind(s, &name, 16);
  name.sa_family = 2;
  v3 = (const char *)sub_4012D0(&unk_4E11CC);
  *(_DWORD *)&name.sa_data[2] = inet_addr(v3);
  if ( *(_DWORD *)&name.sa_data[2] == -1 )
  {
    v4 = (const char *)sub_4012D0(&unk_4E11CC);
    v6 = gethostbyname(v4);
    if ( !v6 )
    {
LABEL_11:
      closesocket(s);
      return 0;
    }
    memcpy(&name.sa_data[2], *(const void **)v6->h_addr_list, v6->h_length);
  }
  *(_WORD *)name.sa_data = htons(hostshort);
  if ( connect(s, &name, 16) == -1 )
  {
    LOG_ERR("Can't connect to Auth Server");
    goto LABEL_11;
  }
  if ( !dword_4DA6E8 )
    hEvent = CreateEventA(0, 1, 0, 0);
  CAuthSocket::Initialize((int)dword_4DA6F0, a1, a2, a3, s);
  if ( !dword_4DA6E8 )
    WaitForSingleObject(hEvent, 0xFFFFFFFF);
  return dword_4DA6E8;
}
// 4D9830: using guessed type int dword_4D9830;
// 4DA6E8: using guessed type int dword_4DA6E8;

//----- (004012D0) --------------------------------------------------------
_DWORD *__thiscall sub_4012D0(void *this)
{
  return unknown_libname_2(this);
}

//----- (00401320) --------------------------------------------------------
BOOL __usercall CAuthSocket::Stop@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  BOOL result; // eax

  dword_4DA6E4 = 1;
  result = ResetEvent(hEvent);
  if ( Target != -1 )
  {
    CAuthSocket::Write(a1, a2, a3, 4, &Src);
    WaitForSingleObject(hEvent, 0xFFFFFFFF);
    result = CloseHandle(hEvent);
    hEvent = 0;
  }
  return result;
}
// 4DA6E4: using guessed type int dword_4DA6E4;

//----- (00401380) --------------------------------------------------------
void __userpurge CAuthSocket::Initialize(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, LONG Value)
{
  CIOBuffer *v6; // [esp+4h] [ebp-8h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 20), a2, a3, a4);
  if ( InterlockedExchange(&Target, Value) == -1 )
    CIOObject::AddRef(dword_4DA6F0, a2, a3, a4);
  memset((void *)(this + 52), 0, 0x14u);
  memset((void *)(this + 72), 0, 0x14u);
  *(_DWORD *)(*(_DWORD *)(this + 92) + 8000) = 0;
  *(_DWORD *)(this + 104) = 0;
  while ( *(_DWORD *)(this + 96) )
  {
    v6 = *(CIOBuffer **)(this + 96);
    *(_DWORD *)(this + 96) = *((_DWORD *)v6 + 2002);
    CIOBuffer::Free(v6);
  }
  *(_DWORD *)(this + 100) = 0;
  *(_DWORD *)(this + 96) = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 20), a2, a3, a4);
  CIOSocket::Initialize((CIOSocket *)this, a2, a3, a4);
}

//----- (00401460) --------------------------------------------------------
void __userpurge CNMSocket::OnTimer(CNMSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int nId)
{
  if ( !dword_4DA6E4 && !CAuthSocket::Start(a2, a3, a4) )
    CIOObject::AddTimer(this, a2, a3, a4, 10000u, 0);
}
// 4DA6E4: using guessed type int dword_4DA6E4;

//----- (00401490) --------------------------------------------------------
void __usercall sub_401490(CIOObject *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( !dword_4DA6E8 || dword_4DA6E4 )
  {
    SetEvent(hEvent);
  }
  else
  {
    LOG_ERR("Connection closed from Auth Server");
    CIOObject::AddTimer(a1, a2, a3, a4, 0x2710u, 0);
  }
}
// 4DA6E4: using guessed type int dword_4DA6E4;
// 4DA6E8: using guessed type int dword_4DA6E8;

//----- (004014E0) --------------------------------------------------------
void __usercall CAuthSocket::OnRead(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int dwNumberOfBytesTransferred; // [esp+4h] [ebp-14h]
  CAuthPacket *v6; // [esp+8h] [ebp-10h]
  unsigned int v7; // [esp+Ch] [ebp-Ch]
  unsigned __int16 *v8; // [esp+10h] [ebp-8h]
  unsigned int Size; // [esp+14h] [ebp-4h]

  Size = *(_DWORD *)(*(_DWORD *)(this + 92) + 8000);
  v8 = *(unsigned __int16 **)(this + 92);
  while ( 1 )
  {
    dwNumberOfBytesTransferred = (int)v8;
    if ( Size < 2 )
      break;
    v7 = *v8;
    if ( Size < v7 )
      break;
    Size -= v7;
    v8 = (unsigned __int16 *)((char *)v8 + v7);
    v6 = MemoryPool_CAuthPacket::_Alloc();
    *((_DWORD *)v6 + 4) = *(_DWORD *)(this + 92);
    CIOBuffer::AddRef(*(volatile LONG **)(this + 92));
    CIOObject::PostObject(v6, dwNumberOfBytesTransferred);
  }
  CIOSocket::Read((CIOSocket *)this, a2, a3, a4, Size);
}

//----- (00401570) --------------------------------------------------------
LONG __thiscall CIOBuffer::AddRef(volatile LONG *this)
{
  return InterlockedIncrement(this + 2001);
}

//----- (00401590) --------------------------------------------------------
BOOL __thiscall CIOObject::PostObject(CIOObject *this, int nId)
{
  return PostQueuedCompletionStatus(ExistingCompletionPort, nId, (ULONG_PTR)this, 0);
}

//----- (004015C0) --------------------------------------------------------
void __usercall CAuthSocket::Process(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, unsigned __int16 *a1)
{
  int v4; // [esp+4h] [ebp-E0h] BYREF
  volatile int *v5; // [esp+8h] [ebp-DCh]
  int v6; // [esp+Ch] [ebp-D8h] BYREF
  int v7; // [esp+10h] [ebp-D4h] BYREF
  CIOObject *v8; // [esp+14h] [ebp-D0h]
  int v9; // [esp+18h] [ebp-CCh] BYREF
  int v10; // [esp+1Ch] [ebp-C8h] BYREF
  int v11; // [esp+20h] [ebp-C4h] BYREF
  char v12[4]; // [esp+24h] [ebp-C0h] BYREF
  char v13[4]; // [esp+28h] [ebp-BCh] BYREF
  char v14[4]; // [esp+2Ch] [ebp-B8h] BYREF
  char v15[4]; // [esp+30h] [ebp-B4h] BYREF
  unsigned __int16 v16; // [esp+34h] [ebp-B0h] BYREF
  int v17; // [esp+38h] [ebp-ACh] BYREF
  int v18; // [esp+3Ch] [ebp-A8h] BYREF
  volatile int *v19; // [esp+40h] [ebp-A4h]
  int v20; // [esp+44h] [ebp-A0h] BYREF
  int v21; // [esp+48h] [ebp-9Ch] BYREF
  int v22; // [esp+4Ch] [ebp-98h] BYREF
  volatile int *v23; // [esp+50h] [ebp-94h]
  unsigned __int8 v24; // [esp+57h] [ebp-8Dh] BYREF
  int v25; // [esp+58h] [ebp-8Ch] BYREF
  unsigned __int8 v26; // [esp+5Fh] [ebp-85h] BYREF
  CIOObject *v27; // [esp+60h] [ebp-84h]
  int v28; // [esp+64h] [ebp-80h] BYREF
  volatile int *v29; // [esp+68h] [ebp-7Ch]
  unsigned __int8 v30; // [esp+6Fh] [ebp-75h] BYREF
  int v31; // [esp+70h] [ebp-74h] BYREF
  const char *v32; // [esp+74h] [ebp-70h] BYREF
  int v33; // [esp+78h] [ebp-6Ch] BYREF
  volatile int *v34; // [esp+7Ch] [ebp-68h]
  unsigned __int8 v35; // [esp+83h] [ebp-61h] BYREF
  int v36; // [esp+84h] [ebp-60h] BYREF
  const char *v37; // [esp+88h] [ebp-5Ch] BYREF
  int v38; // [esp+8Ch] [ebp-58h] BYREF
  volatile int *v39; // [esp+90h] [ebp-54h]
  int v40; // [esp+94h] [ebp-50h] BYREF
  volatile int *v41; // [esp+98h] [ebp-4Ch]
  unsigned __int16 v42; // [esp+9Ch] [ebp-48h] BYREF
  int v43; // [esp+A0h] [ebp-44h] BYREF
  unsigned __int16 v44; // [esp+A4h] [ebp-40h] BYREF
  int v45; // [esp+A8h] [ebp-3Ch] BYREF
  volatile int *v46; // [esp+ACh] [ebp-38h]
  unsigned __int8 v47; // [esp+B3h] [ebp-31h] BYREF
  unsigned __int16 v48; // [esp+B4h] [ebp-30h] BYREF
  unsigned __int16 v49; // [esp+B8h] [ebp-2Ch] BYREF
  int v50; // [esp+BCh] [ebp-28h] BYREF
  void *v51; // [esp+C0h] [ebp-24h] BYREF
  volatile int *v52; // [esp+C4h] [ebp-20h]
  unsigned __int8 v53; // [esp+CAh] [ebp-1Ah] BYREF
  unsigned __int8 v54; // [esp+CBh] [ebp-19h] BYREF
  int v55; // [esp+CCh] [ebp-18h] BYREF
  int v56; // [esp+D0h] [ebp-14h] BYREF
  int v57; // [esp+D4h] [ebp-10h] BYREF
  unsigned __int8 v58; // [esp+DAh] [ebp-Ah] BYREF
  unsigned __int8 v59; // [esp+DBh] [ebp-9h] BYREF
  void *Src; // [esp+DCh] [ebp-8h]
  char v61[4]; // [esp+E0h] [ebp-4h]

  Src = (char *)a1 + 3;
  *(_DWORD *)v61 = *((unsigned __int8 *)a1 + 2);
  switch ( *(_DWORD *)v61 )
  {
    case 0:
      ReadPacket(ebx0, a2, a3, Src, "bdb", &v59, &unk_4DA6EC, &v58);
      if ( v59 <= 2u )
      {
        if ( v58 == dword_4E35B8 )
        {
          dword_4DA6E8 = 1;
          SetEvent(hEvent);
          CAuthSocket::Write(ebx0, a2, a3, 8, "wb", dword_4E1188, dword_4E1184);
          LOG_NORMAL("Auth server version (Version:%d)", v59);
          sub_47E880(ebx0, a2, a3);
        }
        else
        {
          LOG_ERR("Country Code is different (AuthSvr:%d, MainSvr:%d)", v58, dword_4E35B8);
          CIOSocket::Close((CIOSocket *)&unk_4DA6F0, ebx0, a2, a3);
        }
      }
      else
      {
        LOG_ERR("Auth version is different (AuthSvr:%d, MainSvr:%d)", v59, 2);
        CIOSocket::Close((CIOSocket *)&unk_4DA6F0, ebx0, a2, a3);
      }
      break;
    case 1:
      ReadPacket(ebx0, a2, a3, Src, "ddbbdds", &v50, &v56, &v53, &v54, &v57, &v55, &v51);
      v52 = sub_47E800(ebx0, a2, a3, v50);
      if ( v52 )
      {
        sub_495770((int)v52, ebx0, a2, a3, v53, v56, v54, v57, v55, v51);
        CIOObject::Release(v52, ebx0, a2, a3);
      }
      else if ( v53 == 1 )
      {
        CAuthSocket::Write(ebx0, a2, a3, 2, "dddwbdddb", v50, v56, 0, 0, v54, v55, 0, 0, 7);
      }
      break;
    case 2:
      ReadPacket(ebx0, a2, a3, Src, "dbww", &v45, &v47, &v48, &v49);
      v46 = sub_47E800(ebx0, a2, a3, v45);
      if ( v46 )
      {
        sub_495980((int)v46, ebx0, a2, a3, v47, v48, v49);
        CIOObject::Release(v46, ebx0, a2, a3);
      }
      break;
    case 3:
      ReadPacket(ebx0, a2, a3, Src, "dwwd", &v40, &v42, &v44, &v43);
      v41 = sub_47E800(ebx0, a2, a3, v40);
      if ( v41 )
      {
        sub_4959B0((int)v41, ebx0, a2, a3, v42, v44, v43);
        CIOObject::Release(v41, ebx0, a2, a3);
      }
      break;
    case 4:
      ReadPacket(ebx0, a2, a3, Src, "d", &v38);
      v39 = sub_47E800(ebx0, a2, a3, v38);
      if ( v39 )
      {
        sub_495C20((int)v39, ebx0, a2, a3);
        CIOObject::Release(v39, ebx0, a2, a3);
      }
      break;
    case 5:
      ReadPacket(ebx0, a2, a3, Src, "dbds", &v33, &v35, &v36, &v37);
      v34 = sub_47E800(ebx0, a2, a3, v33);
      if ( v34 )
      {
        sub_495C50((int)v34, ebx0, a2, a3, v35, v36, v37);
        CIOObject::Release(v34, ebx0, a2, a3);
      }
      break;
    case 6:
      ReadPacket(ebx0, a2, a3, Src, "dbds", &v28, &v30, &v31, &v32);
      v29 = sub_47E800(ebx0, a2, a3, v28);
      if ( v29 )
      {
        sub_495CC0((int)v29, ebx0, a2, a3, v30, v31, v32);
        CIOObject::Release(v29, ebx0, a2, a3);
      }
      break;
    case 7:
      Src = ReadPacket(ebx0, a2, a3, Src, "db", &v25, &v26);
      v27 = sub_450810(v25);
      if ( v27 )
      {
        CPlayer::OnProcessEvent(v27, v26, Src);
        CIOObject::Release(v27, ebx0, a2, a3, (volatile int *)v27 + 88);
      }
      break;
    case 8:
      CDBSocket::Write(53, "m", Src, (char *)a1 + *a1 - (_BYTE *)Src);
      break;
    case 9:
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        Src = ReadPacket(ebx0, a2, a3, Src, "db", &v22, &v24);
        v23 = sub_47E800(ebx0, a2, a3, v22);
        if ( v23 )
        {
          sub_496030((int)v23, ebx0, a2, a3, v24, Src, (int)a1 + *a1);
          CIOObject::Release(v23, ebx0, a2, a3);
        }
      }
      break;
    case 0xA:
      ReadPacket(ebx0, a2, a3, Src, "ddd", &v18, &v21, &v20);
      v19 = sub_47E800(ebx0, a2, a3, v18);
      if ( v19 )
      {
        CSocket::Write(ebx0, a2, a3, (int)v19, 99, "dd", v21, v20);
        CIOObject::Release(v19, ebx0, a2, a3);
      }
      break;
    case 0xB:
      Src = ReadPacket(ebx0, a2, a3, Src, "dw", &v17, &v16);
      CGoods::ForcedStorageIn(ebx0, a2, a3, v17, v16, Src);
      break;
    case 0xC:
      Src = ReadPacket(ebx0, a2, a3, Src, "ds", v15, v14);
      if ( *(int *)v15 >= 0 )
      {
        if ( *(_DWORD *)v15 )
        {
          if ( dword_4E17B8 )
          {
            LOG_INFO("[Shutdown] Shutdown's already started. (%d min. remains)", dword_4E17B8 / 60000);
          }
          else
          {
            if ( **(_BYTE **)v14 )
            {
              CPlayer::WriteAll(ebx0, a2, a3, 15, "s", *(_DWORD *)v14);
              if ( dword_4E35B8 == 1 )
                LOG_NORMAL("[GM Command] Notice from Auth : %s", *(const char **)v14);
            }
            dword_4E17B8 = 60000 * *(_DWORD *)v15;
            SetTimer(hWnd, 2u, 0x2710u, 0);
            LOG_NORMAL("Shutdown's started. (%d min. remains)", *(_DWORD *)v15);
          }
        }
        else if ( dword_4E17B8 )
        {
          KillTimer(hWnd, 2u);
          dword_4E17B8 = 0;
          LOG_NORMAL("Shutdown's canceled.");
        }
      }
      else if ( **(_BYTE **)v14 )
      {
        CPlayer::WriteAll(ebx0, a2, a3, 15, "s", *(_DWORD *)v14);
        if ( dword_4E35B8 == 1 )
          LOG_NORMAL("[GM Command] Notice from Auth : %s", *(const char **)v14);
      }
      break;
    case 0xD:
      ReadPacket(ebx0, a2, a3, Src, "dd", v12, v13);
      break;
    case 0xE:
      v7 = 0;
      v11 = 0;
      v9 = 0;
      v10 = 0;
      ReadPacket(ebx0, a2, a3, Src, "dddd", &v7, &v11, &v10, &v9);
      v8 = CPlayer::ScanPlayer(v7);
      if ( v8 )
      {
        CPlayer::EventProcessNPC(v8, ebx0, a2, a3, v10, v9, 3);
        CIOObject::Release(v8, ebx0, a2, a3, (volatile int *)v8 + 88);
      }
      break;
    case 0xF:
      ReadPacket(ebx0, a2, a3, Src, "dd", &v6, &v4);
      CDBSocket::Write(80, "d", v6);
      v5 = sub_47E800(ebx0, a2, a3, v4);
      if ( v5 )
      {
        BitSet(v5 + 27, 7u);
        CIOObject::Release(v5, ebx0, a2, a3);
      }
      break;
    default:
      LOG_ERR("invalid packet type at CAuthSocket::Process Type(%d)", *(_DWORD *)v61);
      break;
  }
}
// 4DA6E8: using guessed type int dword_4DA6E8;
// 4E1184: using guessed type int dword_4E1184;
// 4E1188: using guessed type int dword_4E1188;
// 4E17B8: using guessed type int dword_4E17B8;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00401DE0) --------------------------------------------------------
void __usercall CIOObject::Release(volatile int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOObject::Release((CIOObject *)this, a2, a3, a4, this + 3);
}

//----- (00401E00) --------------------------------------------------------
void __usercall CAuthSocket::Write(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char a1, ...)
{
  CMemory **v4; // [esp+4h] [ebp-Ch]
  va_list va; // [esp+1Ch] [ebp+Ch] BYREF

  va_start(va, a1);
  if ( Target != -1 )
  {
    v4 = CIOBuffer::Alloc();
    *((_BYTE *)v4 + 2) = a1;
    *(_WORD *)v4 = (unsigned __int16)WritePacket(ebx0, a2, a3, (char *)v4 + 3, (int)va) - (_WORD)v4;
    v4[2000] = (CMemory *)*(unsigned __int16 *)v4;
    CIOSocket::Write((CIOSocket *)&unk_4DA6F0, ebx0, a2, a3, (CIOBuffer *)v4);
  }
}

//----- (00401E80) --------------------------------------------------------
CAuthPacket *MemoryPool_CAuthPacket::_Alloc()
{
  CAuthPacket *result; // eax
  CAuthPacket *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA768);
  v3 = dword_4DA764;
  if ( dword_4DA764 )
  {
    dword_4DA764 = *(_DWORD *)(dword_4DA764 + 16);
    CIOSpinLock::Leave(&dword_4DA768);
    result = (CAuthPacket *)v3;
  }
  else
  {
    CIOSpinLock::Leave(&dword_4DA768);
    v2 = operator_new(0x14u);
    if ( v2 )
      v1 = CAuthPacket::CAuthPacket((CAuthPacket *)v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 4DA764: using guessed type int dword_4DA764;

//----- (00401F00) --------------------------------------------------------
void __thiscall CIOSpinLock::Enter(CIOSpinLock *this)
{
  if ( InterlockedCompareExchange((volatile LONG *)this, 1, 0) )
    CIOSpinLock::Wait(this);
}

//----- (00401F30) --------------------------------------------------------
LONG __thiscall CIOSpinLock::Leave(volatile LONG *this)
{
  return InterlockedExchange(this, 0);
}

//----- (00401F50) --------------------------------------------------------
void __cdecl CMemoryPool<CBillingPacket>::Free(CBillingPacket *pT)
{
  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA768);
  *((_DWORD *)pT + 4) = dword_4DA764;
  dword_4DA764 = (int)pT;
  CIOSpinLock::Leave(&dword_4DA768);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (00401F80) --------------------------------------------------------
CAuthPacket *__thiscall CAuthPacket::CAuthPacket(CAuthPacket *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B4564;
  return this;
}
// 4B4564: using guessed type int (__stdcall *off_4B4564)(int);

//----- (00401FA0) --------------------------------------------------------
void __thiscall CIOObject::CIOObject(CIOObject *this)
{
  *(_DWORD *)this = &off_4B457C;
  *((_DWORD *)this + 1) = 1;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 1;
}
// 4B457C: using guessed type int (__stdcall *off_4B457C)(int);

//----- (00401FE0) --------------------------------------------------------
void *__thiscall CIOObject::_scalar_deleting_destructor_(void *this, char a2)
{
  std__locale__facet___facet(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00402010) --------------------------------------------------------
_DWORD *__thiscall CIOSocket::CIOTimerInstance::_CIOTimerInstance(void *this)
{
  return std__locale__facet___facet(this);
}

//----- (00402030) --------------------------------------------------------
LONG __thiscall CMemoryPool_CAuthPacket::_CPool::_CPool(void *this)
{
  return CMemoryPool<CBillingPacket>::FreeAll();
}

//----- (00402040) --------------------------------------------------------
LONG CMemoryPool<CBillingPacket>::FreeAll()
{
  void (__thiscall ***v1)(_DWORD, int); // [esp+Ch] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA768);
  while ( 1 )
  {
    v1 = (void (__thiscall ***)(_DWORD, int))dword_4DA764;
    if ( !dword_4DA764 )
      break;
    dword_4DA764 = *(_DWORD *)(dword_4DA764 + 16);
    if ( v1 )
      (**v1)(v1, 1);
  }
  return CIOSpinLock::Leave(&dword_4DA768);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004020B0) --------------------------------------------------------
void __thiscall CMemoryPool_CSkill::_CPool::_CPool(void *this)
{
  CMemoryPool_CSkill::_FreeAll(this);
}

//----- (004020C0) --------------------------------------------------------
void __cdecl CMemoryPool_CSkill::_FreeAll(void *a1)
{
  void *v1; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA760);
  while ( 1 )
  {
    v1 = (void *)dword_4DA75C;
    if ( !dword_4DA75C )
      break;
    dword_4DA75C = *(_DWORD *)(dword_4DA75C + 4);
    operator_delete(v1);
  }
  CIOSpinLock::Leave(&dword_4DA760);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (00402110) --------------------------------------------------------
CBase *__thiscall CBase::CBase(CBase *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B4598;
  *((_DWORD *)this + 4) = -6;
  *((_DWORD *)this + 7) = InterlockedIncrement(&Addend);
  *((_DWORD *)this + 6) = 0;
  *((_DWORD *)this + 5) = 0;
  InterlockedIncrement((volatile LONG *)this + 2);
  InterlockedDecrement((volatile LONG *)this + 3);
  return this;
}
// 4B4598: using guessed type int (__stdcall *off_4B4598)(int);

//----- (00402180) --------------------------------------------------------
void __usercall CBase::OnDelete(volatile int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOObject::Release((CIOObject *)this, a2, a3, a4, this + 2);
}

//----- (004021C0) --------------------------------------------------------
void *__userpurge CBase::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CBase::_CBase(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (004021F0) --------------------------------------------------------
_DWORD *__usercall CBase::_CBase@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *this = &off_4B4598;
  if ( this[4] != -6 )
    EBREAK(a2, a3, a4);
  return std__locale__facet___facet(this);
}
// 4B4598: using guessed type int (__stdcall *off_4B4598)(int);

//----- (00402220) --------------------------------------------------------
void __usercall CBase::OnFree(void (__thiscall ***this)(void *, int)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( this[4] != (void (__thiscall **)(void *, int))-6 )
    EBREAK(a2, a3, a4);
  if ( this )
    (**this)(this, 1);
}

//----- (00402270) --------------------------------------------------------
int __thiscall CBase::Set(void *this, int a2, int a3)
{
  int result; // eax
  lisp::var *v4; // eax
  int v5; // ecx
  lisp::var *v6; // eax
  const char *v7; // eax
  int v8; // [esp-4h] [ebp-1Ch] BYREF
  void *v9; // [esp+0h] [ebp-18h]
  char v10[8]; // [esp+4h] [ebp-14h] BYREF
  char v11[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v12[4]; // [esp+10h] [ebp-8h]
  char v13[4]; // [esp+14h] [ebp-4h] BYREF
  int v14; // [esp+20h] [ebp+8h]

  v9 = this;
  if ( a2 )
  {
    v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v10);
    v7 = (const char *)sub_402360(v6);
    LOG_ERR("invalid symbol(%d) value(%s) at CBase::Set", a2, v7);
    result = 0;
  }
  else
  {
    do
    {
      if ( (unsigned __int8)sub_402380(&a3) )
        return 1;
      lisp::var::pop((lisp::var *)&a3, (lisp::var *)v13);
      v4 = lisp::var::pop((lisp::var *)v13, (lisp::var *)v11);
      *(_DWORD *)v12 = sub_402360(v4);
      v14 = CObjectDB::FindSymbol(v12[0]);
      if ( !v14 )
      {
        LOG_ERR("invalid symbol(%s) at CBase::Set", *(const char **)v12);
        return 0;
      }
      v8 = v5;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v8,
        v13);
    }
    while ( (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)v9 + 28))(v9, v14, v8) );
    result = 0;
  }
  return result;
}
// 4022E8: variable 'v5' is possibly undefined

//----- (00402360) --------------------------------------------------------
int __thiscall sub_402360(_DWORD *this)
{
  return (**(int (__thiscall ***)(_DWORD, _DWORD *))*this)(*this, this);
}

//----- (00402380) --------------------------------------------------------
int __thiscall sub_402380(_DWORD *this)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)*this + 24))(*this, this);
}

//----- (004023A0) --------------------------------------------------------
lisp::var *__thiscall lisp::var::pop(lisp::var *this, lisp::var *result)
{
  _DWORD *v2; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = *(_DWORD *)this;
  *(_DWORD *)this = *(_DWORD *)(*(int (__thiscall **)(lisp::var *))(**(_DWORD **)this + 16))(this);
  v2 = (_DWORD *)(*(int (__thiscall **)(int))(*(_DWORD *)v4 + 12))(v4);
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    result,
    v2);
  return result;
}

//----- (004023F0) --------------------------------------------------------
CMemory **__userpurge CBaseList::Push@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  CMemory **v7; // [esp+4h] [ebp-4h]

  v7 = CMemoryPool_CBaseList::_Alloc();
  CIOObject::AddRef((volatile int *)a2, ebx0, a3, a4);
  *v7 = (CMemory *)a2;
  v7[1] = (CMemory *)this;
  return v7;
}

//----- (00402430) --------------------------------------------------------
int __usercall CBaseList::Pop@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v6; // [esp+4h] [ebp-4h]

  v6 = *(_DWORD *)(this + 4);
  CIOObject::Release(*(volatile int **)this, a2, a3, a4);
  CMemoryPool_CBaseList::_Free(this);
  return v6;
}

//----- (00402460) --------------------------------------------------------
CMemory **CMemoryPool_CBaseList::_Alloc()
{
  CMemory **result; // eax
  CMemory **v1; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA774);
  v1 = (CMemory **)dword_4DA770;
  if ( dword_4DA770 )
  {
    dword_4DA770 = *(_DWORD *)(dword_4DA770 + 4);
    CIOSpinLock::Leave(&dword_4DA774);
    result = v1;
  }
  else
  {
    CIOSpinLock::Leave(&dword_4DA774);
    result = operator_new(8u);
  }
  return result;
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004024C0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CBaseList::_Free(int a1)
{
  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA774);
  *(_DWORD *)(a1 + 4) = dword_4DA770;
  dword_4DA770 = a1;
  return CIOSpinLock::Leave(&dword_4DA774);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004024F0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CBaseList::_CPool::_CPool()
{
  return CMemoryPool_CBaseList::_FreeAll();
}

//----- (00402500) --------------------------------------------------------
LONG __cdecl CMemoryPool_CBaseList::_FreeAll()
{
  void *v1; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA774);
  while ( 1 )
  {
    v1 = (void *)dword_4DA770;
    if ( !dword_4DA770 )
      break;
    dword_4DA770 = *(_DWORD *)(dword_4DA770 + 4);
    operator_delete(v1);
  }
  return CIOSpinLock::Leave(&dword_4DA774);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (00402550) --------------------------------------------------------
_DWORD *__thiscall sub_402550(_DWORD *this)
{
  *this = off_4B4630;
  this[5] = 0;
  return this;
}
// 4B4630: using guessed type void *(__thiscall *off_4B4630[2])(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00402580) --------------------------------------------------------
int __stdcall CBuff::UpdateBuff(int a1, int a2)
{
  if ( a1 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a1, 1);
  return 0;
}

//----- (004025C0) --------------------------------------------------------
_DWORD *__thiscall std__locale__facet___scalar_deleting_destructor_(_DWORD *this, char a2)
{
  sub_4025F0(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (004025F0) --------------------------------------------------------
_DWORD *__thiscall sub_4025F0(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = off_4B4630;
  return result;
}
// 4B4630: using guessed type void *(__thiscall *off_4B4630[2])(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00402610) --------------------------------------------------------
CBuffMoveSpeed *__cdecl CBuff::CreateBuff(int a1, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax
  int v6; // [esp+0h] [ebp-540h]
  int v7; // [esp+4h] [ebp-53Ch]
  CBuffMixDamage *v8; // [esp+8h] [ebp-538h]
  CBuffMoveSpeed *v9; // [esp+Ch] [ebp-534h]
  CBuffMoveSpeed *v10; // [esp+10h] [ebp-530h]
  CBuffMoveSpeed *v11; // [esp+14h] [ebp-52Ch]
  CBuffMoveSpeed *v12; // [esp+18h] [ebp-528h]
  CBuffMoveSpeed *v13; // [esp+1Ch] [ebp-524h]
  CBuffMoveSpeed *v14; // [esp+20h] [ebp-520h]
  CBuffMoveSpeed *v15; // [esp+24h] [ebp-51Ch]
  CBuffMoveSpeed *v16; // [esp+28h] [ebp-518h]
  CBuffMoveSpeed *v17; // [esp+2Ch] [ebp-514h]
  CBuffMoveSpeed *v18; // [esp+30h] [ebp-510h]
  int v19; // [esp+34h] [ebp-50Ch]
  CBuffRemainEx *v20; // [esp+38h] [ebp-508h]
  int v21; // [esp+3Ch] [ebp-504h]
  CBuffMoveSpeed *v22; // [esp+40h] [ebp-500h]
  CBuffMoveSpeed *v23; // [esp+44h] [ebp-4FCh]
  CBuffMoveSpeed *v24; // [esp+48h] [ebp-4F8h]
  CBuffMoveSpeed *v25; // [esp+4Ch] [ebp-4F4h]
  int v26; // [esp+50h] [ebp-4F0h]
  CBuffMoveSpeed *v27; // [esp+54h] [ebp-4ECh]
  CBuffMoveSpeed *v28; // [esp+58h] [ebp-4E8h]
  CBuffMoveSpeed *v29; // [esp+5Ch] [ebp-4E4h]
  CBuffMoveSpeed *v30; // [esp+60h] [ebp-4E0h]
  CBuffMoveSpeed *v31; // [esp+64h] [ebp-4DCh]
  CBuffMoveSpeed *v32; // [esp+68h] [ebp-4D8h]
  CBuffMoveSpeed *v33; // [esp+6Ch] [ebp-4D4h]
  CBuffMoveSpeed *v34; // [esp+70h] [ebp-4D0h]
  CBuffMoveSpeed *v35; // [esp+74h] [ebp-4CCh]
  CBuffMoveSpeed *v36; // [esp+78h] [ebp-4C8h]
  CBuffMoveSpeed *v37; // [esp+7Ch] [ebp-4C4h]
  CBuffMoveSpeed *v38; // [esp+80h] [ebp-4C0h]
  CBuffMoveSpeed *v39; // [esp+84h] [ebp-4BCh]
  CBuffMoveSpeed *v40; // [esp+88h] [ebp-4B8h]
  CBuffMoveSpeed *v41; // [esp+8Ch] [ebp-4B4h]
  CBuffMoveSpeed *v42; // [esp+90h] [ebp-4B0h]
  CBuffMoveSpeed *v43; // [esp+94h] [ebp-4ACh]
  CBuffMoveSpeed *v44; // [esp+98h] [ebp-4A8h]
  CBuffMoveSpeed *v45; // [esp+9Ch] [ebp-4A4h]
  CBuffMoveSpeed *v46; // [esp+A0h] [ebp-4A0h]
  CBuffMoveSpeed *v47; // [esp+A4h] [ebp-49Ch]
  CBuffMoveSpeed *v48; // [esp+A8h] [ebp-498h]
  CBuffMoveSpeed *v49; // [esp+ACh] [ebp-494h]
  CBuffMoveSpeed *v50; // [esp+B0h] [ebp-490h]
  CBuffMoveSpeed *v51; // [esp+B4h] [ebp-48Ch]
  CBuffMoveSpeed *v52; // [esp+B8h] [ebp-488h]
  CBuffMoveSpeed *v53; // [esp+BCh] [ebp-484h]
  int v54; // [esp+C0h] [ebp-480h]
  int v55; // [esp+C4h] [ebp-47Ch]
  int v56; // [esp+C8h] [ebp-478h]
  int v57; // [esp+CCh] [ebp-474h]
  int v58; // [esp+D0h] [ebp-470h]
  int v59; // [esp+D4h] [ebp-46Ch]
  int v60; // [esp+D8h] [ebp-468h]
  int v61; // [esp+DCh] [ebp-464h]
  int v62; // [esp+E0h] [ebp-460h]
  int v63; // [esp+E4h] [ebp-45Ch]
  int v64; // [esp+E8h] [ebp-458h]
  int v65; // [esp+ECh] [ebp-454h]
  int v66; // [esp+F0h] [ebp-450h]
  int v67; // [esp+F4h] [ebp-44Ch]
  int v68; // [esp+F8h] [ebp-448h]
  int v69; // [esp+FCh] [ebp-444h]
  int v70; // [esp+100h] [ebp-440h]
  int v71; // [esp+104h] [ebp-43Ch]
  int v72; // [esp+108h] [ebp-438h]
  int v73; // [esp+10Ch] [ebp-434h]
  int v74; // [esp+110h] [ebp-430h]
  int v75; // [esp+114h] [ebp-42Ch]
  int v76; // [esp+118h] [ebp-428h]
  int v77; // [esp+11Ch] [ebp-424h]
  int v78; // [esp+120h] [ebp-420h]
  int v79; // [esp+124h] [ebp-41Ch]
  int v80; // [esp+128h] [ebp-418h]
  CBuff *v81; // [esp+12Ch] [ebp-414h]
  int v82; // [esp+130h] [ebp-410h]
  int v83; // [esp+134h] [ebp-40Ch]
  int v84; // [esp+138h] [ebp-408h]
  int v85; // [esp+13Ch] [ebp-404h]
  int v86; // [esp+140h] [ebp-400h]
  int v87; // [esp+144h] [ebp-3FCh]
  int v88; // [esp+148h] [ebp-3F8h]
  CBuff *v89; // [esp+14Ch] [ebp-3F4h]
  int v90; // [esp+150h] [ebp-3F0h]
  CBuffMoveSpeed *v91; // [esp+154h] [ebp-3ECh]
  int v92; // [esp+158h] [ebp-3E8h]
  CBuffMoveSpeed *v93; // [esp+15Ch] [ebp-3E4h]
  CBuffMoveSpeed *v94; // [esp+160h] [ebp-3E0h]
  CBuffMoveSpeed *v95; // [esp+164h] [ebp-3DCh]
  CBuffMoveSpeed *v96; // [esp+168h] [ebp-3D8h]
  CBuffMoveSpeed *v97; // [esp+16Ch] [ebp-3D4h]
  CBuffMoveSpeed *v98; // [esp+170h] [ebp-3D0h]
  int v99; // [esp+174h] [ebp-3CCh]
  int v100; // [esp+178h] [ebp-3C8h]
  int v101; // [esp+17Ch] [ebp-3C4h]
  int v102; // [esp+180h] [ebp-3C0h]
  int v103; // [esp+184h] [ebp-3BCh]
  int v104; // [esp+188h] [ebp-3B8h]
  int v105; // [esp+18Ch] [ebp-3B4h]
  int v106; // [esp+190h] [ebp-3B0h]
  CBuff *v107; // [esp+194h] [ebp-3ACh]
  CBuff *v108; // [esp+198h] [ebp-3A8h]
  int v109; // [esp+19Ch] [ebp-3A4h]
  int v110; // [esp+1A0h] [ebp-3A0h]
  int v111; // [esp+1A4h] [ebp-39Ch]
  CBuff *v112; // [esp+1A8h] [ebp-398h]
  int v113; // [esp+1ACh] [ebp-394h]
  int v114; // [esp+1B0h] [ebp-390h]
  int v115; // [esp+1B4h] [ebp-38Ch]
  int v116; // [esp+1B8h] [ebp-388h]
  int v117; // [esp+1BCh] [ebp-384h]
  int v118; // [esp+1C0h] [ebp-380h]
  int v119; // [esp+1C4h] [ebp-37Ch]
  CBuff *v120; // [esp+1C8h] [ebp-378h]
  CBuffFatalChance *v121; // [esp+1CCh] [ebp-374h]
  CBuffMoveSpeed *v122; // [esp+1D0h] [ebp-370h]
  CBuffStone *v123; // [esp+1D4h] [ebp-36Ch]
  CBuffMoveSpeed *v124; // [esp+1D8h] [ebp-368h]
  CMemory **v125; // [esp+1E0h] [ebp-360h]
  CMemory **v126; // [esp+1E4h] [ebp-35Ch]
  CMemory **v127; // [esp+1E8h] [ebp-358h]
  CMemory **v128; // [esp+1ECh] [ebp-354h]
  CMemory **v129; // [esp+1F0h] [ebp-350h]
  CMemory **v130; // [esp+1F4h] [ebp-34Ch]
  CMemory **v131; // [esp+1F8h] [ebp-348h]
  CMemory **v132; // [esp+1FCh] [ebp-344h]
  CMemory **v133; // [esp+200h] [ebp-340h]
  CMemory **v134; // [esp+204h] [ebp-33Ch]
  CMemory **v135; // [esp+208h] [ebp-338h]
  CMemory **v136; // [esp+20Ch] [ebp-334h]
  CMemory **v137; // [esp+210h] [ebp-330h]
  CMemory **v138; // [esp+214h] [ebp-32Ch]
  CMemory **v139; // [esp+218h] [ebp-328h]
  CMemory **v140; // [esp+21Ch] [ebp-324h]
  CMemory **v141; // [esp+220h] [ebp-320h]
  CMemory **v142; // [esp+224h] [ebp-31Ch]
  CMemory **v143; // [esp+228h] [ebp-318h]
  CMemory **v144; // [esp+22Ch] [ebp-314h]
  CMemory **v145; // [esp+230h] [ebp-310h]
  CMemory **v146; // [esp+234h] [ebp-30Ch]
  CMemory **v147; // [esp+238h] [ebp-308h]
  CMemory **v148; // [esp+23Ch] [ebp-304h]
  CMemory **v149; // [esp+240h] [ebp-300h]
  CMemory **v150; // [esp+244h] [ebp-2FCh]
  CMemory **v151; // [esp+248h] [ebp-2F8h]
  CMemory **v152; // [esp+24Ch] [ebp-2F4h]
  CMemory **v153; // [esp+250h] [ebp-2F0h]
  CMemory **v154; // [esp+254h] [ebp-2ECh]
  CMemory **v155; // [esp+258h] [ebp-2E8h]
  CMemory **v156; // [esp+25Ch] [ebp-2E4h]
  CMemory **v157; // [esp+260h] [ebp-2E0h]
  CMemory **v158; // [esp+264h] [ebp-2DCh]
  CMemory **v159; // [esp+268h] [ebp-2D8h]
  CMemory **v160; // [esp+26Ch] [ebp-2D4h]
  CMemory **v161; // [esp+270h] [ebp-2D0h]
  CMemory **v162; // [esp+274h] [ebp-2CCh]
  CMemory **v163; // [esp+278h] [ebp-2C8h]
  CMemory **v164; // [esp+27Ch] [ebp-2C4h]
  CMemory **v165; // [esp+280h] [ebp-2C0h]
  CMemory **v166; // [esp+284h] [ebp-2BCh]
  CMemory **v167; // [esp+288h] [ebp-2B8h]
  CMemory **v168; // [esp+28Ch] [ebp-2B4h]
  CMemory **v169; // [esp+290h] [ebp-2B0h]
  CMemory **v170; // [esp+294h] [ebp-2ACh]
  CMemory **v171; // [esp+298h] [ebp-2A8h]
  CMemory **v172; // [esp+29Ch] [ebp-2A4h]
  CMemory **v173; // [esp+2A0h] [ebp-2A0h]
  CMemory **v174; // [esp+2A4h] [ebp-29Ch]
  CMemory **v175; // [esp+2A8h] [ebp-298h]
  CMemory **v176; // [esp+2ACh] [ebp-294h]
  CMemory **v177; // [esp+2B0h] [ebp-290h]
  CMemory **v178; // [esp+2B4h] [ebp-28Ch]
  CMemory **v179; // [esp+2B8h] [ebp-288h]
  CMemory **v180; // [esp+2BCh] [ebp-284h]
  CMemory **v181; // [esp+2C0h] [ebp-280h]
  CMemory **v182; // [esp+2C4h] [ebp-27Ch]
  CMemory **v183; // [esp+2C8h] [ebp-278h]
  CMemory **v184; // [esp+2CCh] [ebp-274h]
  CMemory **v185; // [esp+2D0h] [ebp-270h]
  CMemory **v186; // [esp+2D4h] [ebp-26Ch]
  CMemory **v187; // [esp+2D8h] [ebp-268h]
  CMemory **v188; // [esp+2DCh] [ebp-264h]
  CMemory **v189; // [esp+2E0h] [ebp-260h]
  CMemory **v190; // [esp+2E4h] [ebp-25Ch]
  CMemory **v191; // [esp+2E8h] [ebp-258h]
  CMemory **v192; // [esp+2ECh] [ebp-254h]
  CMemory **v193; // [esp+2F0h] [ebp-250h]
  CMemory **v194; // [esp+2F4h] [ebp-24Ch]
  CMemory **v195; // [esp+2F8h] [ebp-248h]
  CMemory **v196; // [esp+2FCh] [ebp-244h]
  CMemory **v197; // [esp+300h] [ebp-240h]
  CMemory **v198; // [esp+304h] [ebp-23Ch]
  CMemory **v199; // [esp+308h] [ebp-238h]
  CMemory **v200; // [esp+30Ch] [ebp-234h]
  CMemory **v201; // [esp+310h] [ebp-230h]
  CMemory **v202; // [esp+314h] [ebp-22Ch]
  CMemory **v203; // [esp+318h] [ebp-228h]
  CMemory **v204; // [esp+31Ch] [ebp-224h]
  CMemory **v205; // [esp+320h] [ebp-220h]
  CMemory **v206; // [esp+324h] [ebp-21Ch]
  CMemory **v207; // [esp+328h] [ebp-218h]
  CMemory **v208; // [esp+32Ch] [ebp-214h]
  CMemory **v209; // [esp+330h] [ebp-210h]
  CMemory **v210; // [esp+334h] [ebp-20Ch]
  CMemory **v211; // [esp+338h] [ebp-208h]
  CMemory **v212; // [esp+33Ch] [ebp-204h]
  CMemory **v213; // [esp+340h] [ebp-200h]
  CMemory **v214; // [esp+344h] [ebp-1FCh]
  CMemory **v215; // [esp+348h] [ebp-1F8h]
  CMemory **v216; // [esp+34Ch] [ebp-1F4h]
  CMemory **v217; // [esp+350h] [ebp-1F0h]
  CMemory **v218; // [esp+354h] [ebp-1ECh]
  CMemory **v219; // [esp+358h] [ebp-1E8h]
  CMemory **v220; // [esp+35Ch] [ebp-1E4h]
  CMemory **v221; // [esp+360h] [ebp-1E0h]
  CMemory **v222; // [esp+364h] [ebp-1DCh]
  CMemory **v223; // [esp+368h] [ebp-1D8h]
  CMemory **v224; // [esp+36Ch] [ebp-1D4h]
  CMemory **v225; // [esp+370h] [ebp-1D0h]
  CMemory **v226; // [esp+374h] [ebp-1CCh]
  CMemory **v227; // [esp+378h] [ebp-1C8h]
  CMemory **v228; // [esp+37Ch] [ebp-1C4h]
  CMemory **v229; // [esp+380h] [ebp-1C0h]
  CMemory **v230; // [esp+384h] [ebp-1BCh]
  CMemory **v231; // [esp+388h] [ebp-1B8h]
  CMemory **v232; // [esp+38Ch] [ebp-1B4h]
  CMemory **v233; // [esp+390h] [ebp-1B0h]
  CMemory **v234; // [esp+394h] [ebp-1ACh]
  CMemory **v235; // [esp+398h] [ebp-1A8h]
  CMemory **v236; // [esp+39Ch] [ebp-1A4h]
  CMemory **v237; // [esp+3A0h] [ebp-1A0h]
  CMemory **v238; // [esp+3A4h] [ebp-19Ch]
  CMemory **v239; // [esp+3A8h] [ebp-198h]
  CMemory **v240; // [esp+3ACh] [ebp-194h]
  CMemory **v241; // [esp+3B4h] [ebp-18Ch]
  CMemory **v242; // [esp+3B8h] [ebp-188h]
  int v243; // [esp+534h] [ebp-Ch]
  CBuffMoveSpeed *v244; // [esp+53Ch] [ebp-4h]

  v244 = 0;
  v243 = a2;
  switch ( a1 )
  {
    case 0:
      v242 = operator_new(0x1Cu);
      if ( v242 )
        v124 = CBuffMoveSpeed::CBuffMoveSpeed((CBuffMoveSpeed *)v242, a1, 1000 * a2, a3);
      else
        v124 = 0;
      v244 = v124;
      break;
    case 1:
      v241 = operator_new(0x1Cu);
      if ( v241 )
        v123 = CBuffStone::CBuffStone((CBuffStone *)v241, a1, 1000 * a2, a3, a4);
      else
        v123 = 0;
      v244 = v123;
      break;
    case 2:
      if ( operator_new(0x1Cu) )
      {
        CBuffMeditation::CBuffMeditation(a1, 1000 * a2, a3);
        v122 = v4;
      }
      else
      {
        v122 = 0;
      }
      v244 = v122;
      break;
    case 3:
      v240 = operator_new(0x1Cu);
      if ( v240 )
        v121 = CBuffFatalChance::CBuffFatalChance((CBuffFatalChance *)v240, a1, 1000 * a2, a3, a4);
      else
        v121 = 0;
      v244 = v121;
      break;
    case 4:
      v239 = operator_new(0x18u);
      if ( v239 )
        v120 = CBuffRevivalSequela::CBuffRevivalSequela((CBuff *)v239, a1, 1000 * a2, a3);
      else
        v120 = 0;
      v244 = v120;
      break;
    case 5:
      v238 = operator_new(0x30u);
      if ( v238 )
        v119 = CBuffPrty::CBuffPrty((int)v238, a1, 1000 * a2, 1, 64, 0, 27, a3, 2, a3);
      else
        v119 = 0;
      v244 = (CBuffMoveSpeed *)v119;
      break;
    case 6:
      v237 = operator_new(0x30u);
      if ( v237 )
        v118 = CBuffPrty::CBuffPrty((int)v237, a1, 1000 * a2, 1, 128, 0, 28, a3, 2, a3);
      else
        v118 = 0;
      v244 = (CBuffMoveSpeed *)v118;
      break;
    case 7:
      v236 = operator_new(0x1Cu);
      if ( v236 )
        v117 = CBuffStun::CBuffStun((int)v236, a1, 1000 * a2, 0);
      else
        v117 = 0;
      v244 = (CBuffMoveSpeed *)v117;
      break;
    case 8:
      v235 = operator_new(0x1Cu);
      if ( v235 )
        v116 = CBuffMoveStop::CBuffMoveStop((int)v235, a1, 1000 * a2, 0);
      else
        v116 = 0;
      v244 = (CBuffMoveSpeed *)v116;
      break;
    case 9:
      v234 = operator_new(0x30u);
      if ( v234 )
        v115 = CBuffPrty::CBuffPrty((int)v234, a1, 1000 * a2, 2, 1024, 0, 9, a3, 1, 0);
      else
        v115 = 0;
      v244 = (CBuffMoveSpeed *)v115;
      break;
    case 10:
      v233 = operator_new(0x30u);
      if ( v233 )
        v114 = CBuffPrty::CBuffPrty((int)v233, a1, 1000 * a2, 2, 2048, 0, 11, a3, 1, 0);
      else
        v114 = 0;
      v244 = (CBuffMoveSpeed *)v114;
      break;
    case 11:
      v232 = operator_new(0x20u);
      if ( v232 )
        v113 = CBuffPoison::CBuffPoison((int)v232, a1, 1000 * a2, a3);
      else
        v113 = 0;
      v244 = (CBuffMoveSpeed *)v113;
      break;
    case 12:
      v231 = operator_new(0x18u);
      if ( v231 )
        v112 = CBuffHaste::CBuffHaste((CBuff *)v231, a1, 1000 * a2, a3);
      else
        v112 = 0;
      v244 = v112;
      break;
    case 13:
      v230 = operator_new(0x30u);
      if ( v230 )
        v111 = CBuffPrty::CBuffPrty((int)v230, a1, 1000 * a2, 2, 0x4000, 0, 37, a3, 2, 0);
      else
        v111 = 0;
      v244 = (CBuffMoveSpeed *)v111;
      break;
    case 14:
      v229 = operator_new(0x30u);
      if ( v229 )
        v110 = CBuffPrty::CBuffPrty((int)v229, a1, 1000 * a2, 2, 0x8000, 0, 0, 0, 0, 0);
      else
        v110 = 0;
      v244 = (CBuffMoveSpeed *)v110;
      break;
    case 15:
      v228 = operator_new(0x30u);
      if ( v228 )
        v109 = CBuffPrty::CBuffPrty((int)v228, a1, 1000 * a2, 4, 0x10000, 0, 0, 0, 0, 0);
      else
        v109 = 0;
      v244 = (CBuffMoveSpeed *)v109;
      break;
    case 16:
      v161 = operator_new(0x20u);
      if ( v161 )
        v42 = (CBuffMoveSpeed *)sub_4065D0(v161, a1, a2, 0, 128, 0, 64);
      else
        v42 = 0;
      v244 = v42;
      break;
    case 17:
      v160 = operator_new(0x20u);
      if ( v160 )
        v41 = (CBuffMoveSpeed *)sub_4065D0(v160, a1, a2, 0, 256, 0, 64);
      else
        v41 = 0;
      v244 = v41;
      break;
    case 18:
      v227 = operator_new(0x18u);
      if ( v227 )
        v108 = CBuffHP::CBuffHP((CBuff *)v227, a1, 1000 * a2, a3);
      else
        v108 = 0;
      v244 = v108;
      break;
    case 19:
      v226 = operator_new(0x18u);
      if ( v226 )
        v107 = CBuffMP::CBuffMP((CBuff *)v226, a1, 1000 * a2, a3);
      else
        v107 = 0;
      v244 = v107;
      break;
    case 20:
      v225 = operator_new(0x30u);
      if ( v225 )
        v106 = CBuffPrty::CBuffPrty((int)v225, a1, 1000 * a2, 4, 0x400000, 0, 17, a3, 2, 0);
      else
        v106 = 0;
      v244 = (CBuffMoveSpeed *)v106;
      break;
    case 21:
      v224 = operator_new(0x30u);
      if ( v224 )
        v105 = CBuffPrty::CBuffPrty((int)v224, a1, 1000 * a2, 4, 0x800000, 0, 9, a3, 2, 0);
      else
        v105 = 0;
      v244 = (CBuffMoveSpeed *)v105;
      break;
    case 22:
      v223 = operator_new(0x30u);
      if ( v223 )
        v104 = CBuffPrty::CBuffPrty((int)v223, a1, 1000 * a2, 4, 0x1000000, 0, 0, 0, 0, 0);
      else
        v104 = 0;
      v244 = (CBuffMoveSpeed *)v104;
      break;
    case 23:
      v222 = operator_new(0x30u);
      if ( v222 )
        v103 = CBuffPrty::CBuffPrty((int)v222, a1, 1000 * a2, 2, 0x2000000, 0, 0, 0, 0, 0);
      else
        v103 = 0;
      v244 = (CBuffMoveSpeed *)v103;
      break;
    case 24:
      v221 = operator_new(0x30u);
      if ( v221 )
        v102 = CBuffPrty::CBuffPrty((int)v221, a1, 1000 * a2, 2, 0x4000000, 0, 0, 0, 0, 0);
      else
        v102 = 0;
      v244 = (CBuffMoveSpeed *)v102;
      break;
    case 25:
      v220 = operator_new(0x30u);
      if ( v220 )
        v101 = CBuffPrty::CBuffPrty((int)v220, a1, 1000 * a2, 2, 0x8000000, 0, 0, 0, 0, 0);
      else
        v101 = 0;
      v244 = (CBuffMoveSpeed *)v101;
      break;
    case 26:
      v219 = operator_new(0x1Cu);
      if ( v219 )
        v100 = CBuffSleep::CBuffSleep((int)v219, a1, 1000 * a2, a3);
      else
        v100 = 0;
      v244 = (CBuffMoveSpeed *)v100;
      break;
    case 27:
      v218 = operator_new(0x30u);
      if ( v218 )
        v99 = CBuffPrty::CBuffPrty((int)v218, a1, 1000 * a2, 2, 0x20000000, 0, 15, a3, 2, a4);
      else
        v99 = 0;
      v244 = (CBuffMoveSpeed *)v99;
      break;
    case 28:
      v217 = operator_new(0x1Cu);
      if ( v217 )
        v98 = (CBuffMoveSpeed *)sub_405FD0(v217, a1, 1000 * a2, a3, a4);
      else
        v98 = 0;
      v244 = v98;
      break;
    case 29:
      v209 = operator_new(0x1Cu);
      if ( v209 )
        v90 = CBuffSuffering::CBuffSuffering((int)v209, a1, 1000 * a2, a3);
      else
        v90 = 0;
      v244 = (CBuffMoveSpeed *)v90;
      break;
    case 30:
      if ( !a3 )
        v243 = a2 + time(0);
      v172 = operator_new(0x20u);
      if ( v172 )
        v53 = (CBuffMoveSpeed *)CBuffExpire::CBuffExpire(v172, a1, v243, 0, 2, 0, 32);
      else
        v53 = 0;
      v244 = v53;
      break;
    case 31:
      if ( !a3 )
        v243 = a2 + time(0);
      v171 = operator_new(0x20u);
      if ( v171 )
        v52 = (CBuffMoveSpeed *)CBuffExpire::CBuffExpire(v171, a1, v243, 0, 4, 0, 32);
      else
        v52 = 0;
      v244 = v52;
      break;
    case 32:
      if ( !a3 )
        v243 = a2 + time(0);
      v170 = operator_new(0x20u);
      if ( v170 )
        v51 = (CBuffMoveSpeed *)CBuffExpire::CBuffExpire(v170, a1, v243, 0, 8, 0, 32);
      else
        v51 = 0;
      v244 = v51;
      break;
    case 33:
      if ( !a3 )
        v243 = a2 + time(0);
      v165 = operator_new(0x20u);
      if ( v165 )
        v46 = (CBuffMoveSpeed *)CBuffExpireEvent::CBuffExpireEvent(v165, a1, v243, 0, 16, 0);
      else
        v46 = 0;
      v244 = v46;
      break;
    case 34:
      if ( !a3 )
        v243 = a2 + time(0);
      v164 = operator_new(0x20u);
      if ( v164 )
        v45 = (CBuffMoveSpeed *)CBuffExpireEvent::CBuffExpireEvent(v164, a1, v243, 0, 32, 0);
      else
        v45 = 0;
      v244 = v45;
      break;
    case 35:
      if ( !a3 )
        v243 = a2 + time(0);
      v163 = operator_new(0x20u);
      if ( v163 )
        v44 = (CBuffMoveSpeed *)CBuffExpireEvent::CBuffExpireEvent(v163, a1, v243, 0, 64, 0);
      else
        v44 = 0;
      v244 = v44;
      break;
    case 36:
      v208 = operator_new(0x18u);
      if ( v208 )
        v89 = CBuffInchantWeapon::CBuffInchantWeapon((CBuff *)v208, a1, 1000 * a2, a3);
      else
        v89 = 0;
      v244 = v89;
      break;
    case 37:
      v207 = operator_new(0x30u);
      if ( v207 )
        v88 = CBuffPrty::CBuffPrty((int)v207, a1, 1000 * a2, 2, 0, 2, 15, a3, 1, a4);
      else
        v88 = 0;
      v244 = (CBuffMoveSpeed *)v88;
      break;
    case 38:
      v216 = operator_new(0x1Cu);
      if ( v216 )
        v97 = (CBuffMoveSpeed *)sub_406090(v216, a1, 1000 * a2, a3);
      else
        v97 = 0;
      v244 = v97;
      break;
    case 39:
      v206 = operator_new(0x1Cu);
      if ( v206 )
        v87 = CBuffSpiritDmg::CBuffSpiritDmg((int)v206, a1, 1000 * a2, a3);
      else
        v87 = 0;
      v244 = (CBuffMoveSpeed *)v87;
      break;
    case 40:
      v205 = operator_new(0x30u);
      if ( v205 )
        v86 = CBuffFlagPrty::CBuffFlagPrty((int)v205, a1, 1000 * a2, 1, 0, 16, 32, a3, 2, 0);
      else
        v86 = 0;
      v244 = (CBuffMoveSpeed *)v86;
      break;
    case 41:
      v204 = operator_new(0x30u);
      if ( v204 )
        v85 = CBuffFlagPrty::CBuffFlagPrty((int)v204, a1, 1000 * a2, 1, 0, 32, 27, a3, 2, a3);
      else
        v85 = 0;
      v244 = (CBuffMoveSpeed *)v85;
      break;
    case 42:
      v203 = operator_new(0x30u);
      if ( v203 )
        v84 = CBuffFlagPrty::CBuffFlagPrty((int)v203, a1, 1000 * a2, 1, 0, 64, 28, a3, 2, a3);
      else
        v84 = 0;
      v244 = (CBuffMoveSpeed *)v84;
      break;
    case 43:
      v202 = operator_new(0x30u);
      if ( v202 )
        v83 = CBuffFlagPrty::CBuffFlagPrty((int)v202, a1, 1000 * a2, 1, 0, 128, 16, a3, 1, 0);
      else
        v83 = 0;
      v244 = (CBuffMoveSpeed *)v83;
      break;
    case 44:
      v201 = operator_new(0x30u);
      if ( v201 )
        v82 = CBuffFlagPrty::CBuffFlagPrty((int)v201, a1, 1000 * a2, 1, 0, 256, 29, a3, 1, 0);
      else
        v82 = 0;
      v244 = (CBuffMoveSpeed *)v82;
      break;
    case 45:
      v200 = operator_new(0x18u);
      if ( v200 )
        v81 = CBuffFlagHP::CBuffFlagHP((CBuff *)v200, a1, 1000 * a2, a3);
      else
        v81 = 0;
      v244 = v81;
      break;
    case 46:
      v198 = operator_new(0x2Cu);
      if ( v198 )
        v79 = CBuffPrtyEx::CBuffPrtyEx((int)v198, a1, 1000 * a2, 2, 1, 0, 0, a3, 1, 0);
      else
        v79 = 0;
      v244 = (CBuffMoveSpeed *)v79;
      break;
    case 47:
      v197 = operator_new(0x2Cu);
      if ( v197 )
        v78 = CBuffPrtyEx::CBuffPrtyEx((int)v197, a1, 1000 * a2, 2, 2, 0, 1, a3, 1, 0);
      else
        v78 = 0;
      v244 = (CBuffMoveSpeed *)v78;
      break;
    case 48:
      v196 = operator_new(0x2Cu);
      if ( v196 )
        v77 = CBuffPrtyEx::CBuffPrtyEx((int)v196, a1, 1000 * a2, 2, 4, 0, 4, a3, 1, 0);
      else
        v77 = 0;
      v244 = (CBuffMoveSpeed *)v77;
      break;
    case 49:
      v195 = operator_new(0x2Cu);
      if ( v195 )
        v76 = CBuffPrtyEx::CBuffPrtyEx((int)v195, a1, 1000 * a2, 2, 8, 0, 2, a3, 1, 0);
      else
        v76 = 0;
      v244 = (CBuffMoveSpeed *)v76;
      break;
    case 50:
      v194 = operator_new(0x2Cu);
      if ( v194 )
        v75 = CBuffPrtyEx::CBuffPrtyEx((int)v194, a1, 1000 * a2, 2, 16, 0, 31, a3, 2, 0);
      else
        v75 = 0;
      v244 = (CBuffMoveSpeed *)v75;
      break;
    case 51:
      v159 = operator_new(0x20u);
      if ( v159 )
        v40 = (CBuffMoveSpeed *)sub_4065D0(v159, a1, a2, 0, 512, 0, 32);
      else
        v40 = 0;
      v244 = v40;
      break;
    case 52:
      v158 = operator_new(0x20u);
      if ( v158 )
        v39 = (CBuffMoveSpeed *)sub_4065D0(v158, a1, a2, 0, 1024, 0, 32);
      else
        v39 = 0;
      v244 = v39;
      break;
    case 53:
      v157 = operator_new(0x20u);
      if ( v157 )
        v38 = (CBuffMoveSpeed *)CBuffRemainXBlow::CBuffRemainXBlow(v157, a1, a2, 0, 2048, 0);
      else
        v38 = 0;
      v244 = v38;
      break;
    case 54:
      v156 = operator_new(0x20u);
      if ( v156 )
        v37 = (CBuffMoveSpeed *)CBuffRemainXBlow::CBuffRemainXBlow(v156, a1, a2, 0, 4096, 0);
      else
        v37 = 0;
      v244 = v37;
      break;
    case 55:
      v155 = operator_new(0x20u);
      if ( v155 )
        v36 = (CBuffMoveSpeed *)sub_4065D0(v155, a1, a2, 0, 0x2000, 0, 32);
      else
        v36 = 0;
      v244 = v36;
      break;
    case 56:
      v154 = operator_new(0x20u);
      if ( v154 )
        v35 = (CBuffMoveSpeed *)sub_4065D0(v154, a1, a2, 0, 0x4000, 0, 32);
      else
        v35 = 0;
      v244 = v35;
      break;
    case 57:
      v153 = operator_new(0x20u);
      if ( v153 )
        v34 = (CBuffMoveSpeed *)sub_4065D0(v153, a1, a2, 0, 0x8000, 0, 32);
      else
        v34 = 0;
      v244 = v34;
      break;
    case 58:
      v152 = operator_new(0x20u);
      if ( v152 )
        v33 = (CBuffMoveSpeed *)CBuffRemainCount::CBuffRemainCount(v152, a1, a2, 0, 0x10000, 0);
      else
        v33 = 0;
      v244 = v33;
      break;
    case 59:
      v151 = operator_new(0x20u);
      if ( v151 )
        v32 = (CBuffMoveSpeed *)CBuffRemainCount::CBuffRemainCount(v151, a1, a2, 0, 0x20000, 0);
      else
        v32 = 0;
      v244 = v32;
      break;
    case 60:
      v150 = operator_new(0x28u);
      if ( v150 )
        v31 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v150, a1, a2, 5, 0, 0x40000, 0);
      else
        v31 = 0;
      v244 = v31;
      break;
    case 61:
      v149 = operator_new(0x28u);
      if ( v149 )
        v30 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v149, a1, a2, 10, 1, 0x80000, 0);
      else
        v30 = 0;
      v244 = v30;
      break;
    case 62:
      v148 = operator_new(0x28u);
      if ( v148 )
        v29 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v148, a1, a2, 5, 2, 0x100000, 0);
      else
        v29 = 0;
      v244 = v29;
      break;
    case 63:
      v147 = operator_new(0x28u);
      if ( v147 )
        v28 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v147, a1, a2, 10, 3, 0x200000, 0);
      else
        v28 = 0;
      v244 = v28;
      break;
    case 64:
      v146 = operator_new(0x28u);
      if ( v146 )
        v27 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v146, a1, a2, 5, 4, 0x400000, 0);
      else
        v27 = 0;
      v244 = v27;
      break;
    case 65:
      v145 = operator_new(0x20u);
      if ( v145 )
        v26 = CBuffRemainDead::CBuffRemainDead((int)v145, a1, a2, 0, 0, 256);
      else
        v26 = 0;
      v244 = (CBuffMoveSpeed *)v26;
      break;
    case 66:
      v144 = operator_new(0x20u);
      if ( v144 )
        v25 = (CBuffMoveSpeed *)CBuffRemainDeadEx::CBuffRemainDeadEx(v144, a1, a2, 0, 32);
      else
        v25 = 0;
      v244 = v25;
      break;
    case 67:
      v143 = operator_new(0x20u);
      if ( v143 )
        v24 = (CBuffMoveSpeed *)CBuffRemainDeadEx::CBuffRemainDeadEx(v143, a1, a2, 0, 64);
      else
        v24 = 0;
      v244 = v24;
      break;
    case 68:
      v142 = operator_new(0x20u);
      if ( v142 )
        v23 = (CBuffMoveSpeed *)CBuffRemainDeadEx::CBuffRemainDeadEx(v142, a1, a2, 0, 128);
      else
        v23 = 0;
      v244 = v23;
      break;
    case 69:
      v199 = operator_new(0x1Cu);
      if ( v199 )
        v80 = CBuffBerserk::CBuffBerserk((int)v199, a1, 1000 * a2, a3, a4);
      else
        v80 = 0;
      v244 = (CBuffMoveSpeed *)v80;
      break;
    case 70:
      v215 = operator_new(0x24u);
      if ( v215 )
        v96 = (CBuffMoveSpeed *)sub_406150(v215, a1, 1000 * a2, a3, 16, 20, 64, 0);
      else
        v96 = 0;
      v244 = v96;
      break;
    case 71:
      v214 = operator_new(0x24u);
      if ( v214 )
        v95 = (CBuffMoveSpeed *)sub_406150(v214, a1, 1000 * a2, a3, 16, 19, 128, 0);
      else
        v95 = 0;
      v244 = v95;
      break;
    case 72:
      v213 = operator_new(0x24u);
      if ( v213 )
        v94 = (CBuffMoveSpeed *)sub_406150(v213, a1, 1000 * a2, a3, 16, 18, 256, 0);
      else
        v94 = 0;
      v244 = v94;
      break;
    case 73:
      v212 = operator_new(0x24u);
      if ( v212 )
        v93 = (CBuffMoveSpeed *)sub_406150(v212, a1, 1000 * a2, a3, 16, 9, 512, 0);
      else
        v93 = 0;
      v244 = v93;
      break;
    case 74:
      v210 = operator_new(0x24u);
      if ( v210 )
        v91 = (CBuffMoveSpeed *)sub_406150(v210, a1, 1000 * a2, a3, 16, 12, 1024, 0);
      else
        v91 = 0;
      v244 = v91;
      break;
    case 75:
      v211 = operator_new(0x2Cu);
      if ( v211 )
        v92 = CBuffPrtyEx::CBuffPrtyEx((int)v211, a1, 1000 * a2, 2, 2048, 0, 15, a3, 1, a4);
      else
        v92 = 0;
      v244 = (CBuffMoveSpeed *)v92;
      break;
    case 76:
      v193 = operator_new(0x2Cu);
      if ( v193 )
        v74 = CBuffPrtyEx::CBuffPrtyEx((int)v193, a1, 1000 * a2, 2, 4096, 0, 20, a3, 1, 0);
      else
        v74 = 0;
      v244 = (CBuffMoveSpeed *)v74;
      break;
    case 77:
      v192 = operator_new(0x2Cu);
      if ( v192 )
        v73 = CBuffPrtyEx::CBuffPrtyEx((int)v192, a1, 1000 * a2, 2, 0x2000, 0, 19, a3, 1, 0);
      else
        v73 = 0;
      v244 = (CBuffMoveSpeed *)v73;
      break;
    case 78:
      v191 = operator_new(0x2Cu);
      if ( v191 )
        v72 = CBuffPrtyEx::CBuffPrtyEx((int)v191, a1, 1000 * a2, 2, 0x4000, 0, 18, a3, 1, 0);
      else
        v72 = 0;
      v244 = (CBuffMoveSpeed *)v72;
      break;
    case 79:
      v190 = operator_new(0x2Cu);
      if ( v190 )
        v71 = CBuffPrtyEx::CBuffPrtyEx((int)v190, a1, 1000 * a2, 2, 0x8000, 0, 21, a3, 1, 0);
      else
        v71 = 0;
      v244 = (CBuffMoveSpeed *)v71;
      break;
    case 80:
      v189 = operator_new(0x2Cu);
      if ( v189 )
        v70 = CBuffPrtyEx::CBuffPrtyEx((int)v189, a1, 1000 * a2, 2, 0x10000, 0, 22, a3, 1, 0);
      else
        v70 = 0;
      v244 = (CBuffMoveSpeed *)v70;
      break;
    case 81:
      v188 = operator_new(0x1Cu);
      if ( v188 )
        v69 = CBuffSilenceShot::CBuffSilenceShot((int)v188, a1, 1000 * a2, a3);
      else
        v69 = 0;
      v244 = (CBuffMoveSpeed *)v69;
      break;
    case 82:
      v187 = operator_new(0x2Cu);
      if ( v187 )
        v68 = CBuffPrtyEx::CBuffPrtyEx((int)v187, a1, 1000 * a2, 1, 0x20000, 0, 32, a3, 2, 0);
      else
        v68 = 0;
      v244 = (CBuffMoveSpeed *)v68;
      break;
    case 83:
      v186 = operator_new(0x2Cu);
      if ( v186 )
        v67 = CBuffPrtyEx::CBuffPrtyEx((int)v186, a1, 1000 * a2, 4, 0x40000, 0, 38, a3, 3, 0);
      else
        v67 = 0;
      v244 = (CBuffMoveSpeed *)v67;
      break;
    case 84:
      v185 = operator_new(0x1Cu);
      if ( v185 )
        v66 = CBuffManaBurn::CBuffManaBurn((int)v185, a1, 1000 * a2, a3);
      else
        v66 = 0;
      v244 = (CBuffMoveSpeed *)v66;
      break;
    case 85:
      v184 = operator_new(0x2Cu);
      if ( v184 )
        v65 = CBuffPrtyEx::CBuffPrtyEx((int)v184, a1, 1000 * a2, 4, 0x80000, 0, 31, a3, 2, 0);
      else
        v65 = 0;
      v244 = (CBuffMoveSpeed *)v65;
      break;
    case 86:
      v183 = operator_new(0x2Cu);
      if ( v183 )
        v64 = CBuffPrtyEx::CBuffPrtyEx((int)v183, a1, 1000 * a2, 4, 0x100000, 0, 0, a3, 2, 0);
      else
        v64 = 0;
      v244 = (CBuffMoveSpeed *)v64;
      break;
    case 87:
      v182 = operator_new(0x2Cu);
      if ( v182 )
        v63 = CBuffPrtyEx::CBuffPrtyEx((int)v182, a1, 1000 * a2, 4, 0x200000, 0, 1, a3, 2, 0);
      else
        v63 = 0;
      v244 = (CBuffMoveSpeed *)v63;
      break;
    case 88:
      v181 = operator_new(0x2Cu);
      if ( v181 )
        v62 = CBuffPrtyEx::CBuffPrtyEx((int)v181, a1, 1000 * a2, 4, 0x400000, 0, 4, a3, 2, 0);
      else
        v62 = 0;
      v244 = (CBuffMoveSpeed *)v62;
      break;
    case 89:
      v180 = operator_new(0x2Cu);
      if ( v180 )
        v61 = CBuffPrtyEx::CBuffPrtyEx((int)v180, a1, 1000 * a2, 4, 0x800000, 0, 2, a3, 2, 0);
      else
        v61 = 0;
      v244 = (CBuffMoveSpeed *)v61;
      break;
    case 90:
      v179 = operator_new(0x2Cu);
      if ( v179 )
        v60 = CBuffPrtyEx::CBuffPrtyEx((int)v179, a1, 1000 * a2, 4, 0x1000000, 0, 3, a3, 2, 0);
      else
        v60 = 0;
      v244 = (CBuffMoveSpeed *)v60;
      break;
    case 91:
      v178 = operator_new(0x2Cu);
      if ( v178 )
        v59 = CBuffPrtyEx::CBuffPrtyEx((int)v178, a1, 1000 * a2, 4, 0x2000000, 0, 15, a3, 2, a4);
      else
        v59 = 0;
      v244 = (CBuffMoveSpeed *)v59;
      break;
    case 92:
      v177 = operator_new(0x20u);
      if ( v177 )
        v58 = CBuffPoisonCloud::CBuffPoisonCloud((int)v177, a1, 1000 * a2, a3);
      else
        v58 = 0;
      v244 = (CBuffMoveSpeed *)v58;
      break;
    case 93:
      v176 = operator_new(0x2Cu);
      if ( v176 )
        v57 = CBuffPrtyEx::CBuffPrtyEx((int)v176, a1, 1000 * a2, 4, 0x4000000, 0, 9, a3, 2, 0);
      else
        v57 = 0;
      v244 = (CBuffMoveSpeed *)v57;
      break;
    case 94:
      v175 = operator_new(0x30u);
      if ( v175 )
        v56 = CBuffPrty::CBuffPrty((int)v175, a1, 1000 * a2, 4, 0, 0x2000, 0, 0, 0, 0);
      else
        v56 = 0;
      v244 = (CBuffMoveSpeed *)v56;
      break;
    case 95:
      v174 = operator_new(0x30u);
      if ( v174 )
        v55 = CBuffPrty::CBuffPrty((int)v174, a1, 1000 * a2, 2, 0, 0x4000, 16, a3, 1, 0);
      else
        v55 = 0;
      v244 = (CBuffMoveSpeed *)v55;
      break;
    case 96:
      v173 = operator_new(0x30u);
      if ( v173 )
        v54 = CBuffPrty::CBuffPrty((int)v173, a1, 1000 * a2, 2, 0, 0x8000, 29, a3, 1, 0);
      else
        v54 = 0;
      v244 = (CBuffMoveSpeed *)v54;
      break;
    case 97:
      if ( !a3 )
        v243 = a2 + time(0);
      v169 = operator_new(0x20u);
      if ( v169 )
        v50 = (CBuffMoveSpeed *)CBuffExpire::CBuffExpire(v169, a1, v243, 0, 0x800000, 0, 32);
      else
        v50 = 0;
      v244 = v50;
      break;
    case 98:
      if ( !a3 )
        v243 = a2 + time(0);
      v168 = operator_new(0x20u);
      if ( v168 )
        v49 = (CBuffMoveSpeed *)CBuffExpire::CBuffExpire(v168, a1, v243, 0, 0x1000000, 0, 32);
      else
        v49 = 0;
      v244 = v49;
      break;
    case 99:
      if ( !a3 )
        v243 = a2 + time(0);
      v167 = operator_new(0x20u);
      if ( v167 )
        v48 = (CBuffMoveSpeed *)CBuffExpire::CBuffExpire(v167, a1, v243, 0, 0x2000000, 0, 32);
      else
        v48 = 0;
      v244 = v48;
      break;
    case 100:
      v141 = operator_new(0x20u);
      if ( v141 )
        v22 = (CBuffMoveSpeed *)CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(v141, a1, a2, 0, 0x4000000, 0);
      else
        v22 = 0;
      v244 = v22;
      break;
    case 101:
      if ( !a3 )
        v243 = a2 + time(0);
      v166 = operator_new(0x20u);
      if ( v166 )
        v47 = (CBuffMoveSpeed *)CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(v166, a1, v243, 0, 0x8000000, 0);
      else
        v47 = 0;
      v244 = v47;
      break;
    case 102:
      if ( !a3 )
        v243 = a2 + time(0);
      v162 = operator_new(0x20u);
      if ( v162 )
        v43 = (CBuffMoveSpeed *)CBuffExpire::CBuffExpire(v162, a1, v243, 0, 0x10000000, 0, 128);
      else
        v43 = 0;
      v244 = v43;
      break;
    case 103:
      v140 = operator_new(0x28u);
      if ( v140 )
        v21 = CBuffRemainPet::CBuffRemainPet((int)v140, a1, 1);
      else
        v21 = 0;
      v244 = (CBuffMoveSpeed *)v21;
      break;
    case 104:
      v139 = operator_new(0x20u);
      if ( v139 )
        v20 = CBuffRemainEx::CBuffRemainEx((CBuffRemainEx *)v139, a1, a2, 0, 256, 1);
      else
        v20 = 0;
      v244 = v20;
      break;
    case 105:
      v138 = operator_new(0x20u);
      if ( v138 )
        v19 = CBuffHydrochloricAcid::CBuffHydrochloricAcid((int)v138, a1, 4000, 800);
      else
        v19 = 0;
      v244 = (CBuffMoveSpeed *)v19;
      break;
    case 106:
      v137 = operator_new(0x28u);
      if ( v137 )
        v18 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v137, a1, a2, a3, 0, 0, 2);
      else
        v18 = 0;
      v244 = v18;
      break;
    case 107:
      v136 = operator_new(0x28u);
      if ( v136 )
        v17 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v136, a1, a2, a3, 1, 0, 4);
      else
        v17 = 0;
      v244 = v17;
      break;
    case 108:
      v135 = operator_new(0x28u);
      if ( v135 )
        v16 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v135, a1, a2, a3, 2, 0, 8);
      else
        v16 = 0;
      v244 = v16;
      break;
    case 109:
      v134 = operator_new(0x28u);
      if ( v134 )
        v15 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v134, a1, a2, a3, 3, 0, 16);
      else
        v15 = 0;
      v244 = v15;
      break;
    case 110:
      v133 = operator_new(0x28u);
      if ( v133 )
        v14 = (CBuffMoveSpeed *)CBuffRemainPrty::CBuffRemainPrty(v133, a1, a2, a3, 4, 0, 32);
      else
        v14 = 0;
      v244 = v14;
      break;
    case 111:
      v132 = operator_new(0x20u);
      if ( v132 )
        v13 = (CBuffMoveSpeed *)sub_4065D0(v132, a1, a2, 0, 0, 64, 32);
      else
        v13 = 0;
      v244 = v13;
      break;
    case 112:
      if ( !a3 )
        v243 = a2 + time(0);
      v131 = operator_new(0x20u);
      if ( v131 )
        v12 = (CBuffMoveSpeed *)CBuffExpireEvent::CBuffExpireEvent(v131, a1, v243, 0, 0, 128);
      else
        v12 = 0;
      v244 = v12;
      break;
    case 113:
      if ( !a3 )
        v243 = a2 + time(0);
      v130 = operator_new(0x20u);
      if ( v130 )
        v11 = (CBuffMoveSpeed *)CBuffExpireEvent::CBuffExpireEvent(v130, a1, v243, 0, 0, 256);
      else
        v11 = 0;
      v244 = v11;
      break;
    case 114:
      if ( !a3 )
        v243 = a2 + time(0);
      v129 = operator_new(0x20u);
      if ( v129 )
        v10 = (CBuffMoveSpeed *)CBuffExpireEvent::CBuffExpireEvent(v129, a1, v243, 0, 0, 512);
      else
        v10 = 0;
      v244 = v10;
      break;
    case 115:
      v128 = operator_new(0x20u);
      if ( v128 )
        v9 = (CBuffMoveSpeed *)sub_4065D0(v128, a1, a2, 0, 0, 1024, 32);
      else
        v9 = 0;
      v244 = v9;
      break;
    case 116:
      v127 = operator_new(0x28u);
      if ( v127 )
        v8 = CBuffMixDamage::CBuffMixDamage((CBuffMixDamage *)v127, a1, 1000 * a2, a3, a4);
      else
        v8 = 0;
      v244 = v8;
      break;
    case 117:
      v126 = operator_new(0x2Cu);
      if ( v126 )
        v7 = CBuffPrtyEx::CBuffPrtyEx((int)v126, a1, 1000 * a2, 1, 0, 0x20000, 15, a3, 1, a4);
      else
        v7 = 0;
      v244 = (CBuffMoveSpeed *)v7;
      break;
    case 118:
      v125 = operator_new(0x2Cu);
      if ( v125 )
        v6 = CBuffPrtyEx::CBuffPrtyEx((int)v125, a1, 1000 * a2, 1, 0, 0x40000, 32, a3, 2, 0);
      else
        v6 = 0;
      v244 = (CBuffMoveSpeed *)v6;
      break;
    default:
      LOG_ERR("CBuff::CreateBuff() Invalid Buff Type.(Buff:%d)", a1);
      break;
  }
  return v244;
}
// 402789: variable 'v4' is possibly undefined

//----- (00405C60) --------------------------------------------------------
CBuffMoveSpeed *__thiscall CBuffMoveSpeed::CBuffMoveSpeed(CBuffMoveSpeed *this, int a2, int a3, int a4)
{
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)this = &off_4B467C;
  *((_DWORD *)this + 6) = 0;
  return this;
}
// 4B467C: using guessed type void *(__thiscall *off_4B467C)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00405CA0) --------------------------------------------------------
CBuff *__thiscall CBuff::CBuff(CBuff *this, int a2, int a3, int a4, int a5)
{
  *(_DWORD *)this = off_4B4630;
  *((_DWORD *)this + 1) = a2;
  *((_DWORD *)this + 2) = a3 + GetTickCount();
  *((_DWORD *)this + 3) = a4;
  *((_DWORD *)this + 4) = a5;
  *((_DWORD *)this + 5) = 0;
  return this;
}
// 4B4630: using guessed type void *(__thiscall *off_4B4630[2])(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00405CF0) --------------------------------------------------------
CBuffStone *__thiscall CBuffStone::CBuffStone(CBuffStone *this, int a2, int a3, int a4, int a5)
{
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)this = &off_4B4698;
  *((_DWORD *)this + 6) = a5;
  return this;
}
// 4B4698: using guessed type void *(__thiscall *off_4B4698)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00405D30) --------------------------------------------------------
void __stdcall CBuffMeditation::CBuffMeditation(int a1, int a2, int a3)
{
  CBuff *v3; // ecx
  CBuff *v4; // [esp+0h] [ebp-4h]

  v4 = v3;
  CBuff::CBuff(v3, a1, a2, a3, 2);
  *(_DWORD *)v4 = &off_4B46B4;
  *((_DWORD *)v4 + 6) = GetTickCount() + 4000;
}
// 405D34: variable 'v3' is possibly undefined
// 4B46B4: using guessed type void *(__thiscall *off_4B46B4)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00405D70) --------------------------------------------------------
CBuffFatalChance *__thiscall CBuffFatalChance::CBuffFatalChance(CBuffFatalChance *this, int a2, int a3, int a4, int a5)
{
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)this = &off_4B46D0;
  *((_DWORD *)this + 6) = a5;
  return this;
}
// 4B46D0: using guessed type void *(__thiscall *off_4B46D0)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00405DB0) --------------------------------------------------------
CBuff *__thiscall CBuffRevivalSequela::CBuffRevivalSequela(CBuff *this, int a2, int a3, int a4)
{
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)this = off_4B46EC;
  return this;
}
// 4B46EC: using guessed type int (__stdcall *off_4B46EC[3])(int);

//----- (00405DE0) --------------------------------------------------------
int __thiscall CBuffStun::CBuffStun(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B4708;
  *(_DWORD *)(this + 24) = 0;
  return this;
}
// 4B4708: using guessed type int (__stdcall *off_4B4708[3])(int);

//----- (00405E20) --------------------------------------------------------
int __thiscall CBuffMoveStop::CBuffMoveStop(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B4724;
  *(_DWORD *)(this + 24) = 0;
  return this;
}
// 4B4724: using guessed type int (__stdcall *off_4B4724[3])(int);

//----- (00405E60) --------------------------------------------------------
int __thiscall CBuffPoison::CBuffPoison(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B4740;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = GetTickCount() + 2000;
  return this;
}
// 4B4740: using guessed type int (__stdcall *off_4B4740[3])(int);

//----- (00405EB0) --------------------------------------------------------
int __thiscall CBuffPoisonCloud::CBuffPoisonCloud(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B475C;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = GetTickCount() + 2000;
  return this;
}
// 4B475C: using guessed type int (__stdcall *off_4B475C[3])(int);

//----- (00405F00) --------------------------------------------------------
CBuff *__thiscall CBuffHaste::CBuffHaste(CBuff *this, int a2, int a3, int a4)
{
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)this = off_4B4778;
  return this;
}
// 4B4778: using guessed type int (__stdcall *off_4B4778[3])(int);

//----- (00405F30) --------------------------------------------------------
CBuff *__thiscall CBuffHP::CBuffHP(CBuff *this, int a2, int a3, int a4)
{
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)this = off_4B4794;
  return this;
}
// 4B4794: using guessed type int (__stdcall *off_4B4794[3])(int);

//----- (00405F60) --------------------------------------------------------
CBuff *__thiscall CBuffMP::CBuffMP(CBuff *this, int a2, int a3, int a4)
{
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)this = off_4B47B0;
  return this;
}
// 4B47B0: using guessed type int (__stdcall *off_4B47B0[3])(int);

//----- (00405F90) --------------------------------------------------------
int __thiscall CBuffSleep::CBuffSleep(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B47CC;
  *(_DWORD *)(this + 24) = 0;
  return this;
}
// 4B47CC: using guessed type int (__stdcall *off_4B47CC[3])(int);

//----- (00405FD0) --------------------------------------------------------
_DWORD *__thiscall sub_405FD0(_DWORD *this, int a2, int a3, int a4, int a5)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 16);
  *this = &off_4B47E8;
  this[6] = a5;
  return this;
}
// 4B47E8: using guessed type void *(__thiscall *off_4B47E8)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00406010) --------------------------------------------------------
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::Copy(void *this)
{
  CBuffCTDefensePer *v2; // [esp+0h] [ebp-Ch]
  CMemory **v4; // [esp+8h] [ebp-4h]

  v4 = operator_new(0x1Cu);
  if ( v4 )
    v2 = CBuffCTDefensePer::CBuffCTDefensePer((CBuffCTDefensePer *)v4, this);
  else
    v2 = 0;
  return v2;
}

//----- (00406050) --------------------------------------------------------
CBuffCTDefensePer *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(CBuffCTDefensePer *this, void *Src)
{
  sub_402550(this);
  *(_DWORD *)this = &off_4B47E8;
  memcpy(this, Src, 0x1Cu);
  return this;
}
// 4B47E8: using guessed type void *(__thiscall *off_4B47E8)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00406090) --------------------------------------------------------
_DWORD *__thiscall sub_406090(_DWORD *this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 16);
  *this = &off_4B4804;
  this[6] = GetTickCount() + 3000;
  return this;
}
// 4B4804: using guessed type void *(__thiscall *off_4B4804)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (004060D0) --------------------------------------------------------
CBuffCTHealing *__thiscall CBuffCTHealing::Copy(void *this)
{
  CBuffCTHealing *v2; // [esp+0h] [ebp-Ch]
  CMemory **v4; // [esp+8h] [ebp-4h]

  v4 = operator_new(0x1Cu);
  if ( v4 )
    v2 = CBuffCTHealing::CBuffCTHealing((CBuffCTHealing *)v4, this);
  else
    v2 = 0;
  return v2;
}

//----- (00406110) --------------------------------------------------------
CBuffCTHealing *__thiscall CBuffCTHealing::CBuffCTHealing(CBuffCTHealing *this, void *Src)
{
  sub_402550(this);
  *(_DWORD *)this = &off_4B4804;
  memcpy(this, Src, 0x1Cu);
  return this;
}
// 4B4804: using guessed type void *(__thiscall *off_4B4804)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00406150) --------------------------------------------------------
_DWORD *__thiscall sub_406150(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, a5);
  *this = &off_4B4820;
  this[7] = a6;
  this[8] = a7;
  this[6] = a8;
  return this;
}
// 4B4820: using guessed type void *(__thiscall *off_4B4820)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (004061A0) --------------------------------------------------------
_DWORD *__thiscall CBuffCTPrtyPtEx::Copy(void *this)
{
  _DWORD *v2; // [esp+0h] [ebp-Ch]
  CMemory **v4; // [esp+8h] [ebp-4h]

  v4 = operator_new(0x24u);
  if ( v4 )
    v2 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v4, this);
  else
    v2 = 0;
  return v2;
}

//----- (004061E0) --------------------------------------------------------
_DWORD *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(_DWORD *this, void *Src)
{
  sub_402550(this);
  *this = &off_4B4820;
  memcpy(this, Src, 0x24u);
  return this;
}
// 4B4820: using guessed type void *(__thiscall *off_4B4820)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00406220) --------------------------------------------------------
int __thiscall CBuffSuffering::CBuffSuffering(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B483C;
  *(_DWORD *)(this + 24) = 0;
  return this;
}
// 4B483C: using guessed type int (__stdcall *off_4B483C[3])(int);

//----- (00406260) --------------------------------------------------------
CBuff *__thiscall CBuffInchantWeapon::CBuffInchantWeapon(CBuff *this, int a2, int a3, int a4)
{
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)this = off_4B4858;
  return this;
}
// 4B4858: using guessed type int (__stdcall *off_4B4858[3])(int);

//----- (00406290) --------------------------------------------------------
int __thiscall CBuffSpiritDmg::CBuffSpiritDmg(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B4874;
  *(_DWORD *)(this + 24) = 0;
  return this;
}
// 4B4874: using guessed type int (__stdcall *off_4B4874[3])(int);

//----- (004062D0) --------------------------------------------------------
int __thiscall CBuffFlagPrty::CBuffFlagPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a8, a4);
  *(_DWORD *)this = off_4B4890;
  *(_DWORD *)(this + 24) = a9;
  *(_DWORD *)(this + 32) = a7;
  *(_DWORD *)(this + 40) = a5;
  *(_DWORD *)(this + 44) = a6;
  *(_DWORD *)(this + 28) = a10;
  return this;
}
// 4B4890: using guessed type int (__stdcall *off_4B4890[3])(int);

//----- (00406330) --------------------------------------------------------
CBuff *__thiscall CBuffFlagHP::CBuffFlagHP(CBuff *this, int a2, int a3, int a4)
{
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)this = off_4B48AC;
  return this;
}
// 4B48AC: using guessed type int (__stdcall *off_4B48AC[3])(int);

//----- (00406360) --------------------------------------------------------
int __thiscall CBuffBerserk::CBuffBerserk(int this, int a2, int a3, int a4, int a5)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 2);
  *(_DWORD *)this = off_4B48C8;
  *(_DWORD *)(this + 24) = a5;
  return this;
}
// 4B48C8: using guessed type int (__stdcall *off_4B48C8[3])(int);

//----- (004063A0) --------------------------------------------------------
int __thiscall CBuffSilenceShot::CBuffSilenceShot(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B48E4;
  *(_DWORD *)(this + 24) = 0;
  return this;
}
// 4B48E4: using guessed type int (__stdcall *off_4B48E4[3])(int);

//----- (004063E0) --------------------------------------------------------
int __thiscall CBuffManaBurn::CBuffManaBurn(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B4900;
  *(_DWORD *)(this + 24) = 0;
  return this;
}
// 4B4900: using guessed type int (__stdcall *off_4B4900[3])(int);

//----- (00406420) --------------------------------------------------------
int __thiscall CBuffPrty::CBuffPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a8, a4);
  *(_DWORD *)this = off_4B491C;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = a9;
  *(_DWORD *)(this + 36) = a7;
  *(_DWORD *)(this + 40) = a5;
  *(_DWORD *)(this + 44) = a6;
  *(_DWORD *)(this + 32) = a10;
  return this;
}
// 4B491C: using guessed type int (__stdcall *off_4B491C[3])(int);

//----- (00406490) --------------------------------------------------------
int __thiscall CBuffPrtyEx::CBuffPrtyEx(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a8, a4);
  *(_DWORD *)this = off_4B4938;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = a9;
  *(_DWORD *)(this + 36) = a7;
  *(_DWORD *)(this + 40) = a5;
  *(_DWORD *)(this + 32) = a10;
  return this;
}
// 4B4938: using guessed type int (__stdcall *off_4B4938[3])(int);

//----- (004064F0) --------------------------------------------------------
_DWORD *__thiscall CBuffExpire::CBuffExpire(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  sub_402550(this);
  *this = off_4B4954;
  this[1] = a2;
  this[2] = a3;
  this[3] = a4;
  this[6] = a5;
  this[7] = a6;
  this[4] = a7;
  return this;
}
// 4B4954: using guessed type int (__stdcall *off_4B4954[3])(int);

//----- (00406550) --------------------------------------------------------
_DWORD *__thiscall CBuffExpireEvent::CBuffExpireEvent(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  CBuffExpire::CBuffExpire(this, a2, a3, a4, a5, a6, 128);
  *this = off_4B4970;
  return this;
}
// 4B4970: using guessed type int (__stdcall *off_4B4970[3])(int);

//----- (00406590) --------------------------------------------------------
_DWORD *__thiscall CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  CBuffExpire::CBuffExpire(this, a2, a3, a4, a5, a6, 32);
  *this = off_4B498C;
  return this;
}
// 4B498C: using guessed type int (__stdcall *off_4B498C[3])(int);

//----- (004065D0) --------------------------------------------------------
_DWORD *__thiscall sub_4065D0(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  sub_402550(this);
  *this = off_4B49A8;
  this[1] = a2;
  this[2] = a3;
  this[3] = a4;
  this[6] = a5;
  this[7] = a6;
  this[4] = a7;
  return this;
}
// 4B49A8: using guessed type int (__stdcall *off_4B49A8[3])(int);

//----- (00406630) --------------------------------------------------------
CBuffRemainEx *__thiscall CBuffRemainEx::CBuffRemainEx(CBuffRemainEx *this, int a2, int a3, int a4, int a5, int a6)
{
  CBuffRemain::CBuffRemain(this);
  *(_DWORD *)this = off_4B49C4;
  *((_DWORD *)this + 1) = a2;
  *((_DWORD *)this + 2) = a3;
  *((_DWORD *)this + 3) = a4;
  *((_DWORD *)this + 6) = a5;
  *((_DWORD *)this + 4) = a6;
  return this;
}
// 4B49C4: using guessed type int (__stdcall *off_4B49C4[3])(int);

//----- (00406680) --------------------------------------------------------
CBuffRemain *__thiscall CBuffRemain::CBuffRemain(CBuffRemain *this)
{
  sub_402550(this);
  *(_DWORD *)this = off_4B49A8;
  return this;
}
// 4B49A8: using guessed type int (__stdcall *off_4B49A8[3])(int);

//----- (004066A0) --------------------------------------------------------
int __thiscall CBuffRemainDead::CBuffRemainDead(int this, int a2, int a3, int a4, int a5, int a6)
{
  CBuffRemain::CBuffRemain((CBuffRemain *)this);
  *(_DWORD *)this = off_4B49E0;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = a3;
  *(_DWORD *)(this + 12) = a4;
  *(_DWORD *)(this + 24) = a5;
  *(_DWORD *)(this + 16) = a6;
  return this;
}
// 4B49E0: using guessed type int (__stdcall *off_4B49E0[3])(int);

//----- (004066F0) --------------------------------------------------------
_DWORD *__thiscall CBuffRemainDeadEx::CBuffRemainDeadEx(_DWORD *this, int a2, int a3, int a4, int a5)
{
  CBuffRemainDead::CBuffRemainDead((int)this, a2, a3, a4, a5, 256);
  *this = off_4B49FC;
  return this;
}
// 4B49FC: using guessed type int (__stdcall *off_4B49FC[3])(int);

//----- (00406730) --------------------------------------------------------
_DWORD *__thiscall CBuffRemainXBlow::CBuffRemainXBlow(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  sub_4065D0(this, a2, a3, a4, a5, a6, 32);
  *this = off_4B4A18;
  return this;
}
// 4B4A18: using guessed type int (__stdcall *off_4B4A18[3])(int);

//----- (00406770) --------------------------------------------------------
_DWORD *__thiscall CBuffRemainPrty::CBuffRemainPrty(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  sub_4065D0(this, a2, a3, a4, a6, a7, 32);
  *this = off_4B4A34;
  this[8] = a5;
  return this;
}
// 4B4A34: using guessed type int (__stdcall *off_4B4A34[3])(int);

//----- (004067B0) --------------------------------------------------------
_DWORD *__thiscall CBuffRemainCount::CBuffRemainCount(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  sub_4065D0(this, a2, a3, a4, a5, a6, 32);
  *this = off_4B4A50;
  return this;
}
// 4B4A50: using guessed type int (__stdcall *off_4B4A50[3])(int);

//----- (004067F0) --------------------------------------------------------
_DWORD *__thiscall CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  sub_4065D0(this, a2, a3, a4, a5, a6, 1);
  *this = off_4B4A6C;
  return this;
}
// 4B4A6C: using guessed type int (__stdcall *off_4B4A6C[3])(int);

//----- (00406830) --------------------------------------------------------
int __thiscall CBuffRemainPet::CBuffRemainPet(int this, int a2, int a3)
{
  CBuffRemain::CBuffRemain((CBuffRemain *)this);
  *(_DWORD *)this = off_4B4A88;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 16) = a3;
  *(_DWORD *)(this + 8) = 7200;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 32) = 0;
  return this;
}
// 4B4A88: using guessed type int (__stdcall *off_4B4A88[3])(int);

//----- (00406890) --------------------------------------------------------
int __stdcall CBuffRemainPet::SetBuff(int a1)
{
  return 1;
}

//----- (004068B0) --------------------------------------------------------
int __thiscall CBuffHydrochloricAcid::CBuffHydrochloricAcid(int this, int a2, int a3, int a4)
{
  CBuff::CBuff((CBuff *)this, a2, a3, a4, 4);
  *(_DWORD *)this = off_4B4AA4;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  return this;
}
// 4B4AA4: using guessed type int (__stdcall *off_4B4AA4[3])(int);

//----- (00406900) --------------------------------------------------------
CBuffMixDamage *__thiscall CBuffMixDamage::CBuffMixDamage(CBuffMixDamage *this, int a2, int a3, int a4, int a5)
{
  sub_402550(this);
  *(_DWORD *)this = &off_4B4AC0;
  *((_DWORD *)this + 1) = a2;
  *((_DWORD *)this + 2) = a3 + GetTickCount();
  *((_DWORD *)this + 3) = a5;
  *((_DWORD *)this + 6) = a4;
  *((_DWORD *)this + 9) = a3;
  *((_DWORD *)this + 4) = 1;
  *((_DWORD *)this + 5) = 0;
  return this;
}
// 4B4AC0: using guessed type void *(__thiscall *off_4B4AC0)(std::_Ref_count_base *__hidden this, const struct type_info *);

//----- (00406990) --------------------------------------------------------
BOOL __thiscall CBuff::IsExpired(_DWORD *this, int a2)
{
  return (int)(this[2] - GetTickCount()) <= 0;
}

//----- (004069C0) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 2, 0);
  (*(void (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 1, this[3]);
  return 1;
}

//----- (00406A00) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 0, this[3]);
  this[3] = 0;
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 2, 0);
}

//----- (00406A40) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::UpdateBuff(_DWORD *this, int a2, _DWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 2i64) )
    (*(void (__thiscall **)(_DWORD *, int, _DWORD))(*a3 + 104))(a3, 2, 0);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  a3[65] -= this[3];
  this[3] = *(_DWORD *)(a2 + 12);
  (*(void (__cdecl **)(_DWORD *, int, int, _DWORD))(*a3 + 96))(a3, 32, 1, this[3]);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00406BA0) --------------------------------------------------------
__int64 __thiscall CChar::IsMState(_QWORD *this, __int64 a2)
{
  return a2 & this[36];
}

//----- (00406BD0) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::IsExpired(_DWORD *this, _QWORD *a2)
{
  if ( !CChar::IsMState(a2, 2i64) )
    return 0;
  if ( CBuff::IsExpired(this, (int)a2) )
    (*(void (__thiscall **)(_DWORD *, _QWORD *))(*this + 8))(this, a2);
  return 0;
}

//----- (00406C20) --------------------------------------------------------
int __thiscall CBuffStone::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 92))(a2, 16, 1, this[3]);
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 15, 1, this[6], this[6]);
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 4, 0);
  return 1;
}

//----- (00406C80) --------------------------------------------------------
int __thiscall CBuffStone::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 16, 0, this[3]);
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 15, 0, this[6], this[6]);
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 4, 0);
}

//----- (00406CE0) --------------------------------------------------------
int __stdcall CBuffMeditation::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a1 + 104))(a1, 8, 0);
  return 1;
}

//----- (00406D10) --------------------------------------------------------
int __stdcall CBuffMeditation::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 8, 0);
}

//----- (00406D30) --------------------------------------------------------
BOOL __thiscall CBuffMeditation::IsExpired(_DWORD *this, _DWORD *a2)
{
  int v2; // esi
  int v5; // [esp+Ch] [ebp-8h]
  DWORD v6; // [esp+10h] [ebp-4h]

  v6 = GetTickCount();
  if ( v6 >= this[6] )
  {
    if ( CChar::IsNormal((int)a2) && a2[69] < ((int (__thiscall *)(int))CChar::GetMaxMP)((int)a2) )
    {
      v2 = this[3] * CChar::GetWis(a2) / 15;
      v5 = RandomBetween(0, this[3] + 1) + v2;
      if ( v5 >= 5 * this[3] + 5 )
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 88))(a2, 8, 1, 5 * this[3] + 5);
      else
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 88))(a2, 8, 1, v5);
    }
    this[6] = v6 + 4000;
  }
  return CBuff::IsExpired(this, (int)a2);
}

//----- (00406E10) --------------------------------------------------------
int __cdecl Random_0(int nMin, int nMax)
{
  int result; // eax

  if ( nMin >= nMax )
    result = nMin;
  else
    result = nMin + _Random() % (unsigned int)(nMax - nMin + 1);
  return result;
}

//----- (00406E40) --------------------------------------------------------
int __thiscall BuffFatalChance::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 96))(a2, 31, 1, this[3]);
  (*(void (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 1, this[6]);
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 16, 0);
  return 1;
}

//----- (00406EA0) --------------------------------------------------------
int __thiscall CBuffFatalChance::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 31, 0, this[3]);
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 0, this[6]);
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 16, 0);
}

//----- (00406EF0) --------------------------------------------------------
int __thiscall CBuffRevivalSequela::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 1, this[3], this[3]);
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 28, 1, this[3], this[3]);
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 32, 0);
  return 1;
}

//----- (00406F60) --------------------------------------------------------
int __thiscall CBuffRevivalSequela::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 0, this[3], this[3]);
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 28, 0, this[3], this[3]);
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 32, 0);
}

//----- (00406FC0) --------------------------------------------------------
int __thiscall CBuffRevivalSequela::UpdateBuff(_DWORD *this, int a2, int a3)
{
  this[2] = *(_DWORD *)(a2 + 8);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00407010) --------------------------------------------------------
int __thiscall CBuffStun::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  (*(void (__thiscall **)(_DWORD *, int, _DWORD))(*a2 + 104))(a2, 256, 0);
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
  {
    a2[117] = this[2];
    (*(void (__thiscall **)(_DWORD *, _DWORD, int))(*a2 + 228))(a2, this[2], 1);
  }
  return 1;
}

//----- (00407080) --------------------------------------------------------
int __stdcall CBuffStun::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 256, 0);
}

//----- (004070A0) --------------------------------------------------------
int __thiscall CBuffStun::UpdateBuff(_DWORD *this, int a2, int a3)
{
  DWORD v5; // [esp+2Ch] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState((_QWORD *)a3, 256i64) )
    (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a3 + 104))(a3, 256, 0);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 64))(a3) )
  {
    *(_DWORD *)(a3 + 468) = this[2];
    (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a3 + 228))(a3, this[2], 1);
  }
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00407200) --------------------------------------------------------
int __thiscall CBuffStun::IsExpired(_DWORD *this, _QWORD *a2)
{
  if ( !CChar::IsMState(a2, 256i64) )
    return 0;
  if ( CBuff::IsExpired(this, (int)a2) )
    (*(void (__thiscall **)(_DWORD *, _QWORD *))(*this + 8))(this, a2);
  return 0;
}

//----- (00407260) --------------------------------------------------------
int __thiscall CBuffMoveStop::ApplyBuff(_DWORD *this, int a2)
{
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
    (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 228))(a2, this[2], 1);
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 512, 0);
  return 1;
}

//----- (004072B0) --------------------------------------------------------
int __thiscall CBuffMoveStop::FreeBuff(void *this, int a2)
{
  DWORD v2; // eax

  if ( (*(int (__thiscall **)(int, void *))(*(_DWORD *)a2 + 64))(a2, this) )
  {
    v2 = GetTickCount();
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a2 + 228))(a2, v2, 1);
  }
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 512, 0);
}

//----- (00407300) --------------------------------------------------------
int __thiscall CBuffMoveStop::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 512i64) )
    (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a3 + 104))(a3, 512, 0);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( (*(int (__thiscall **)(_QWORD *))(*(_DWORD *)a3 + 64))(a3) )
    (*(void (__thiscall **)(_QWORD *, _DWORD, int))(*(_DWORD *)a3 + 228))(a3, this[2], 1);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00407440) --------------------------------------------------------
int __thiscall CBuffMoveStop::IsExpired(_DWORD *this, _QWORD *a2)
{
  if ( !CChar::IsMState(a2, 512i64) )
    return 0;
  if ( CBuff::IsExpired(this, (int)a2) )
    (*(void (__thiscall **)(_DWORD *, _QWORD *))(*this + 8))(this, a2);
  return 0;
}

//----- (004074A0) --------------------------------------------------------
int __stdcall CBuffPoison::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a1 + 104))(a1, 4096, 0);
  return 1;
}

//----- (004074D0) --------------------------------------------------------
int __stdcall CBuffPoison::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 4096, 0);
}

//----- (004074F0) --------------------------------------------------------
int __thiscall CBuffPoison::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 4096i64) )
    (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a3 + 104))(a3, 4096, 0);
  this[3] = *(_DWORD *)(a2 + 12);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00407620) --------------------------------------------------------
int __thiscall CBuffPoison::IsExpired(_DWORD *this, int a2)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-24h]
  int v5; // [esp+0h] [ebp-18h]
  DWORD v7; // [esp+14h] [ebp-4h]

  if ( !CChar::IsMState((_QWORD *)a2, 4096i64) )
    return 0;
  v7 = GetTickCount();
  if ( v7 >= this[7] )
  {
    if ( *(int *)(a2 + 272) > 1 )
    {
      if ( *(_DWORD *)(a2 + 272) <= this[3] )
        v5 = *(_DWORD *)(a2 + 272) - 1;
      else
        v5 = this[3];
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 7, 0, v5);
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
      {
        v4 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
        v3 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
        CPlayer::Write(a2, 10, "bbddww", 3, 13, v3, v4, v5, 0);
      }
      else if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
      {
        *(_DWORD *)(a2 + 472) = GetTickCount() + 20000;
      }
    }
    this[7] = v7 + 2000;
  }
  if ( CBuff::IsExpired(this, a2) )
    (*(void (__thiscall **)(_DWORD *, int))(*this + 8))(this, a2);
  return 0;
}

//----- (00407780) --------------------------------------------------------
int __stdcall CBuffPoisonCloud::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 104))(a1, 0, 4096);
  return 1;
}

//----- (004077B0) --------------------------------------------------------
int __stdcall CBuffPoisonCloud::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 124))(a1, 0, 4096);
}

//----- (004077D0) --------------------------------------------------------
int __thiscall CBuffPoisonCloud::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 0x100000000000i64) )
    (*(void (__thiscall **)(_QWORD *, _DWORD, int))(*(_DWORD *)a3 + 104))(a3, 0, 4096);
  this[3] = *(_DWORD *)(a2 + 12);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00407900) --------------------------------------------------------
int __thiscall CBuffPoisonCloud::IsExpired(_DWORD *this, int a2)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-24h]
  int v5; // [esp+0h] [ebp-18h]
  DWORD v7; // [esp+14h] [ebp-4h]

  if ( !CChar::IsMState((_QWORD *)a2, 0x100000000000i64) )
    return 0;
  v7 = GetTickCount();
  if ( v7 >= this[7] )
  {
    if ( *(int *)(a2 + 272) > 1 )
    {
      if ( *(_DWORD *)(a2 + 272) <= this[3] )
        v5 = *(_DWORD *)(a2 + 272) - 1;
      else
        v5 = this[3];
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 7, 0, v5);
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
      {
        v4 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
        v3 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
        CPlayer::Write(a2, 10, "bbddww", 12, 42, v3, v4, v5, 0);
      }
      else if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
      {
        *(_DWORD *)(a2 + 472) = GetTickCount() + 20000;
      }
    }
    this[7] = v7 + 1000;
  }
  if ( CBuff::IsExpired(this, a2) )
    (*(void (__thiscall **)(_DWORD *, int))(*this + 8))(this, a2);
  return 0;
}

//----- (00407A40) --------------------------------------------------------
int __thiscall CBuffHaste::ApplyBuff(_DWORD *this, _QWORD *a2)
{
  if ( CPlayer::IsWearBuffStandard((int *)a2) )
    return 0;
  if ( CChar::IsMState(a2, 1i64) )
    (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 1, 0);
  (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 0x2000, 0);
  (*(void (__cdecl **)(_QWORD *, int, int, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 1, this[3]);
  return 1;
}

//----- (00407AC0) --------------------------------------------------------
int __thiscall CBuffHaste::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 0x2000, 0);
  return (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 0, this[3]);
}

//----- (00407B00) --------------------------------------------------------
int __stdcall CBuffHP::ApplyBuff(_QWORD *a1)
{
  if ( CChar::IsMState(a1, 1i64) )
    (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 1, 0);
  (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0x100000, 0);
  CPlayer::Rest((volatile LONG *)a1, 1);
  return 1;
}

//----- (00407B60) --------------------------------------------------------
int __stdcall CBuffHP::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0x100000, 0);
}

//----- (00407B80) --------------------------------------------------------
int __stdcall CBuffMP::ApplyBuff(_QWORD *a1)
{
  if ( CChar::IsMState(a1, 1i64) )
    (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 1, 0);
  (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0x200000, 0);
  CPlayer::Rest((volatile LONG *)a1, 1);
  return 1;
}

//----- (00407BE0) --------------------------------------------------------
int __stdcall CBuffMP::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0x200000, 0);
}

//----- (00407C00) --------------------------------------------------------
BOOL __thiscall CBuffMP::IsExpired(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 1, this[3]);
  return CBuff::IsExpired(this, a2);
}

//----- (00407C40) --------------------------------------------------------
int __thiscall CBuffSleep::ApplyBuff(_DWORD *this, int a2)
{
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
    (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 228))(a2, this[2], 1);
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 0x10000000, 0);
  return 1;
}

//----- (00407C90) --------------------------------------------------------
int __thiscall CBuffSleep::FreeBuff(void *this, int a2)
{
  DWORD v2; // eax

  if ( (*(int (__thiscall **)(int, void *))(*(_DWORD *)a2 + 64))(a2, this) )
  {
    v2 = GetTickCount();
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a2 + 228))(a2, v2, 1);
  }
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 0x10000000, 0);
}

//----- (00407CE0) --------------------------------------------------------
int __thiscall CBuffSleep::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 0x10000000i64) )
    (*(void (__thiscall **)(_QWORD *, int, _DWORD))(*(_DWORD *)a3 + 104))(a3, 0x10000000, 0);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( (*(int (__thiscall **)(_QWORD *))(*(_DWORD *)a3 + 64))(a3) )
    (*(void (__thiscall **)(_QWORD *, _DWORD, int))(*(_DWORD *)a3 + 228))(a3, this[2], 1);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00407E20) --------------------------------------------------------
int __thiscall CBuffSleep::IsExpired(_DWORD *this, _QWORD *a2)
{
  if ( !CChar::IsMState(a2, 0x10000000i64) )
    return 0;
  if ( CBuff::IsExpired(this, (int)a2) )
    (*(void (__thiscall **)(_DWORD *, _QWORD *))(*this + 8))(this, a2);
  return 0;
}

//----- (00407E80) --------------------------------------------------------
int __thiscall CBuffCTDefensePer::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 15, 1, this[3], this[6]);
  (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 104))(a2, 0x40000000, 0);
  return 1;
}

//----- (00407ED0) --------------------------------------------------------
int __thiscall CBuffCTDefensePer::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 15, 0, this[3], this[6]);
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 124))(a2, 0x40000000, 0);
}

//----- (00407F10) --------------------------------------------------------
int __stdcall CBuffCTHealing::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 104))(a1, 0, 4);
  return 1;
}

//----- (00407F40) --------------------------------------------------------
int __stdcall CBuffCTHealing::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 124))(a1, 0, 4);
}

//----- (00407F60) --------------------------------------------------------
int __thiscall CBuffCTHealing::IsExpired(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  DWORD v5; // [esp+4h] [ebp-4h]

  v5 = GetTickCount();
  if ( v5 >= this[6] )
  {
    if ( CChar::IsNormal((int)a2) && a2[68] < CChar::GetMaxHP(a2) )
    {
      v2 = RandomBetween(0, 6);
      (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 88))(a2, 7, 1, this[3] + v2);
    }
    this[6] = v5 + 3000;
  }
  return 0;
}

//----- (00407FE0) --------------------------------------------------------
int __thiscall CBuffCTPrtyPtEx::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, this[7], 1, this[3], this[6]);
  (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)a2 + 116))(a2, this[8]);
  return 1;
}

//----- (00408030) --------------------------------------------------------
int __thiscall CBuffCTPrtyPtEx::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, this[7], 0, this[3], this[6]);
  return (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)a2 + 120))(a2, this[8]);
}

//----- (00408080) --------------------------------------------------------
int __stdcall CBuffSuffering::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, unsigned int, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0x80000000, 0);
  return 1;
}

//----- (004080B0) --------------------------------------------------------
int __stdcall CBuffSuffering::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, unsigned int, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0x80000000, 0);
}

//----- (004080D0) --------------------------------------------------------
int __thiscall CBuffSuffering::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 0x80000000i64) )
    (*(void (__thiscall **)(_QWORD *, unsigned int, _DWORD))(*(_DWORD *)a3 + 104))(a3, 0x80000000, 0);
  this[3] = *(_DWORD *)(a2 + 12);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00408200) --------------------------------------------------------
int __thiscall CBuffSuffering::IsExpired(_DWORD *this, int a2)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-20h]
  int v5; // [esp+0h] [ebp-14h]

  if ( !CChar::IsMState((_QWORD *)a2, 0x80000000i64) )
    return 0;
  if ( *(int *)(a2 + 272) > 1 )
  {
    if ( *(_DWORD *)(a2 + 272) <= this[3] )
      v5 = *(_DWORD *)(a2 + 272) - 1;
    else
      v5 = this[3];
    (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 7, 0, v5);
    if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
    {
      v4 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      v3 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      CPlayer::Write(a2, 10, "bbddww", 5, 13, v3, v4, v5, 0);
    }
    else if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
    {
      *(_DWORD *)(a2 + 472) = GetTickCount() + 20000;
    }
  }
  if ( CBuff::IsExpired(this, a2) )
    (*(void (__thiscall **)(_DWORD *, int))(*this + 8))(this, a2);
  return 0;
}

//----- (00408310) --------------------------------------------------------
int __thiscall CBuffInchantWeapon::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 27, 1, this[3], this[3]);
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 28, 1, this[3], this[3]);
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 104))(a2, 0, 1);
  return 1;
}

//----- (00408380) --------------------------------------------------------
int __thiscall CBuffInchantWeapon::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 27, 0, this[3], this[3]);
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 28, 0, this[3], this[3]);
  return (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 124))(a2, 0, 1);
}

//----- (004083E0) --------------------------------------------------------
int __stdcall CBuffSpiritDmg::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 104))(a1, 0, 8);
  return 1;
}

//----- (00408410) --------------------------------------------------------
int __stdcall CBuffSpiritDmg::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 124))(a1, 0, 8);
}

//----- (00408430) --------------------------------------------------------
int __thiscall CBuffSpiritDmg::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 0x800000000i64) )
    (*(void (__thiscall **)(_QWORD *, _DWORD, int))(*(_DWORD *)a3 + 104))(a3, 0, 8);
  this[3] = *(_DWORD *)(a2 + 12);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00408550) --------------------------------------------------------
int __thiscall CBuffSpiritDmg::IsExpired(_DWORD *this, int a2)
{
  int v3; // eax
  int v4; // [esp-Ch] [ebp-20h]
  int v5; // [esp+0h] [ebp-14h]

  if ( !CChar::IsMState((_QWORD *)a2, 0x800000000i64) )
    return 0;
  if ( *(int *)(a2 + 272) > 1 )
  {
    if ( *(_DWORD *)(a2 + 272) <= this[3] )
      v5 = *(_DWORD *)(a2 + 272) - 1;
    else
      v5 = this[3];
    (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 7, 0, v5);
    if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
    {
      v4 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      v3 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      CPlayer::Write(a2, 10, "bbddww", 6, 13, v3, v4, v5, 0);
    }
    else if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
    {
      *(_DWORD *)(a2 + 472) = GetTickCount() + 20000;
    }
  }
  if ( CBuff::IsExpired(this, a2) )
    (*(void (__thiscall **)(_DWORD *, int))(*this + 8))(this, a2);
  return 0;
}

//----- (00408660) --------------------------------------------------------
int __thiscall CBuffFlagPrty::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, this[10], this[11]);
  if ( this[6] )
  {
    switch ( this[6] )
    {
      case 1:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, this[8], 1, this[3], this[7]);
        break;
      case 2:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, this[8], 1, this[3], this[7]);
        break;
      case 3:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, this[8], 1, this[3], this[7]);
        break;
    }
  }
  return 1;
}

//----- (00408730) --------------------------------------------------------
_DWORD *__thiscall CBuffFlagPrty::FreeBuff(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, this[10], this[11]);
  result = this;
  if ( this[6] )
  {
    if ( this[6] == 1 )
    {
      result = (_DWORD *)(*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
                           a2,
                           this[8],
                           0,
                           this[3],
                           this[7]);
    }
    else if ( this[6] == 2 )
    {
      result = (_DWORD *)(*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
                           a2,
                           this[8],
                           0,
                           this[3],
                           this[7]);
    }
    else
    {
      result = this;
      if ( this[6] == 3 )
        result = (_DWORD *)(*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
                             a2,
                             this[8],
                             0,
                             this[3],
                             this[7]);
    }
  }
  return result;
}

//----- (00408800) --------------------------------------------------------
int __stdcall CBuffFlagHP::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 104))(a1, 0, 512);
  return 1;
}

//----- (00408830) --------------------------------------------------------
int __stdcall CBuffFlagHP::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 124))(a1, 0, 512);
}

//----- (00408850) --------------------------------------------------------
int __thiscall CBuffFlagHP::UpdateBuff(_DWORD *this, int a2, int a3)
{
  this[3] = *(_DWORD *)(a2 + 12);
  this[2] = *(_DWORD *)(a2 + 8);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (004088B0) --------------------------------------------------------
BOOL __thiscall CBuffHP::IsExpired(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)a2 + 88))(a2, 7, 1, this[3]);
  return CBuff::IsExpired(this, a2);
}

//----- (004088F0) --------------------------------------------------------
int __thiscall CBuffBerserk::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 1, this[3], this[3]);
  (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 15, 1, this[6], this[6]);
  (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 116))(a2, 32);
  return 1;
}

//----- (00408960) --------------------------------------------------------
int __thiscall CBuffBerserk::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 0, this[3], this[3]);
  (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 15, 0, this[6], this[6]);
  return (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 120))(a2, 32);
}

//----- (004089C0) --------------------------------------------------------
int __stdcall CBuffSilenceShot::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 104))(a1, 0, 1024);
  return 1;
}

//----- (004089F0) --------------------------------------------------------
int __stdcall CBuffSilenceShot::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 124))(a1, 0, 1024);
}

//----- (00408A10) --------------------------------------------------------
int __thiscall CBuffSilenceShot::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 0x40000000000i64) )
    (*(void (__thiscall **)(_QWORD *, _DWORD, int))(*(_DWORD *)a3 + 104))(a3, 0, 1024);
  this[3] = *(_DWORD *)(a2 + 12);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00408B40) --------------------------------------------------------
int __thiscall CBuffSilenceShot::IsExpired(_DWORD *this, _QWORD *a2)
{
  if ( !CChar::IsMState(a2, 0x40000000000i64) )
    return 0;
  (*(void (__cdecl **)(_QWORD *, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 0, this[3]);
  if ( CBuff::IsExpired(this, (int)a2) )
    (*(void (__thiscall **)(_DWORD *, _QWORD *))(*this + 8))(this, a2);
  return 0;
}

//----- (00408BB0) --------------------------------------------------------
int __stdcall CBuffManaBurn::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 104))(a1, 0, 2048);
  return 1;
}

//----- (00408BE0) --------------------------------------------------------
int __stdcall CBuffManaBurn::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a1 + 124))(a1, 0, 2048);
}

//----- (00408C00) --------------------------------------------------------
int __thiscall CBuffManaBurn::UpdateBuff(_DWORD *this, int a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMState(a3, 0x80000000000i64) )
    (*(void (__thiscall **)(_QWORD *, _DWORD, int))(*(_DWORD *)a3 + 104))(a3, 0, 2048);
  this[3] = *(_DWORD *)(a2 + 12);
  this[2] = *(_DWORD *)(a2 + 8);
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a2, 1);
  return 1;
}

//----- (00408D30) --------------------------------------------------------
int __thiscall CBuffManaBurn::IsExpired(_DWORD *this, _QWORD *a2)
{
  if ( !CChar::IsMState(a2, 0x80000000000i64) )
    return 0;
  (*(void (__cdecl **)(_QWORD *, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 0, this[3]);
  if ( CBuff::IsExpired(this, (int)a2) )
    (*(void (__thiscall **)(_DWORD *, _QWORD *))(*this + 8))(this, a2);
  return 0;
}

//----- (00408DA0) --------------------------------------------------------
int __thiscall CBuffPrty::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, this[10], this[11]);
  if ( this[7] )
  {
    switch ( this[7] )
    {
      case 1:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, this[9], 1, this[3], this[8]);
        break;
      case 2:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, this[9], 1, this[3], this[8]);
        break;
      case 3:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, this[9], 1, this[3], this[8]);
        break;
    }
  }
  return 1;
}

//----- (00408E70) --------------------------------------------------------
int __thiscall CBuffPrty::FreeBuff(int this, _QWORD *a2)
{
  int result; // eax
  __int64 v3; // [esp+0h] [ebp-Ch]

  v3 = CChar::IsMState(a2, *(_QWORD *)(this + 40));
  result = HIDWORD(v3) | v3;
  if ( v3 )
  {
    (*(void (__thiscall **)(_QWORD *, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(
      a2,
      *(_DWORD *)(this + 40),
      *(_DWORD *)(this + 44));
    result = this;
    if ( *(_DWORD *)(this + 28) )
    {
      if ( *(_DWORD *)(this + 28) == 1 )
      {
        result = (*(int (__cdecl **)(_QWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
                   a2,
                   *(_DWORD *)(this + 36),
                   0,
                   *(_DWORD *)(this + 12),
                   *(_DWORD *)(this + 32));
      }
      else if ( *(_DWORD *)(this + 28) == 2 )
      {
        result = (*(int (__cdecl **)(_QWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
                   a2,
                   *(_DWORD *)(this + 36),
                   0,
                   *(_DWORD *)(this + 12),
                   *(_DWORD *)(this + 32));
      }
      else
      {
        result = this;
        if ( *(_DWORD *)(this + 28) == 3 )
          result = (*(int (__cdecl **)(_QWORD *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
                     a2,
                     *(_DWORD *)(this + 36),
                     0,
                     *(_DWORD *)(this + 12),
                     *(_DWORD *)(this + 32));
      }
    }
  }
  return result;
}

//----- (00408F60) --------------------------------------------------------
int __thiscall CBuffPrty::UpdateBuff(void *this, _DWORD *a2, _QWORD *a3)
{
  DWORD v5; // [esp+28h] [ebp-4h]

  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::UpdateBuff((int)a2, (int)a3);
  v5 = GetTickCount();
  if ( *((int *)this + 6) < 5 )
  {
    ++*((_DWORD *)this + 6);
  }
  else
  {
    if ( *((_DWORD *)this + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(a2, 1);
      return 0;
    }
    *((_DWORD *)this + 6) = 0;
  }
  if ( !CChar::IsMState(a3, *((_QWORD *)this + 5)) )
  {
    *((_DWORD *)this + 3) = a2[3];
    *((_DWORD *)this + 8) = a2[8];
    (*(void (__thiscall **)(void *, _QWORD *))(*(_DWORD *)this + 4))(this, a3);
  }
  *((_DWORD *)this + 2) = a2[2];
  *((_DWORD *)this + 2) -= dword_4D8CE4[*((_DWORD *)this + 6)] * (*((_DWORD *)this + 2) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(a2, 1);
  return 1;
}

//----- (004090C0) --------------------------------------------------------
int __thiscall CBuff::IsPrty(_DWORD *this, int a2)
{
  return a2 & this[4];
}

//----- (004090E0) --------------------------------------------------------
BOOL __thiscall CBuffPrty::IsExpired(int this, _QWORD *a2)
{
  if ( !CBuff::IsPrty((_DWORD *)this, 4) )
    return CBuff::IsExpired((_DWORD *)this, (int)a2);
  if ( !CChar::IsMState(a2, *(_QWORD *)(this + 40)) )
    return 0;
  if ( CBuff::IsExpired((_DWORD *)this, (int)a2) )
    (*(void (__thiscall **)(int, _QWORD *))(*(_DWORD *)this + 8))(this, a2);
  return 0;
}

//----- (00409160) --------------------------------------------------------
int __thiscall CBuffPrtyEx::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)a2 + 116))(a2, this[10]);
  if ( this[7] )
  {
    switch ( this[7] )
    {
      case 1:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, this[9], 1, this[3], this[8]);
        break;
      case 2:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, this[9], 1, this[3], this[8]);
        break;
      case 3:
        (*(void (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, this[9], 1, this[3], this[8]);
        break;
    }
  }
  return 1;
}

//----- (00409230) --------------------------------------------------------
_DWORD *__thiscall CBuffPrtyEx::FreeBuff(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  result = (_DWORD *)CChar::IsMStateEx((_DWORD *)a2, this[10]);
  if ( result )
  {
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)a2 + 120))(a2, this[10]);
    result = this;
    if ( this[7] )
    {
      if ( this[7] == 1 )
      {
        result = (_DWORD *)(*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
                             a2,
                             this[9],
                             0,
                             this[3],
                             this[8]);
      }
      else if ( this[7] == 2 )
      {
        result = (_DWORD *)(*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
                             a2,
                             this[9],
                             0,
                             this[3],
                             this[8]);
      }
      else
      {
        result = this;
        if ( this[7] == 3 )
          result = (_DWORD *)(*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
                               a2,
                               this[9],
                               0,
                               this[3],
                               this[8]);
      }
    }
  }
  return result;
}

//----- (00409310) --------------------------------------------------------
int __thiscall CChar::IsMStateEx(_DWORD *this, int a2)
{
  return a2 & this[74];
}

//----- (00409330) --------------------------------------------------------
int __thiscall CBuffPrtyEx::UpdateBuff(_DWORD *this, _DWORD *a2, int a3)
{
  DWORD v5; // [esp+20h] [ebp-4h]

  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::UpdateBuff((int)a2, a3);
  v5 = GetTickCount();
  if ( (int)this[6] < 5 )
  {
    ++this[6];
  }
  else
  {
    if ( this[2] + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(a2, 1);
      return 0;
    }
    this[6] = 0;
  }
  if ( !CChar::IsMStateEx((_DWORD *)a3, this[10]) )
  {
    this[3] = a2[3];
    this[8] = a2[8];
    (*(void (__thiscall **)(_DWORD *, int))(*this + 4))(this, a3);
  }
  this[2] = a2[2];
  this[2] -= dword_4D8CE4[this[6]] * (this[2] - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(a2, 1);
  return 1;
}

//----- (00409480) --------------------------------------------------------
BOOL __thiscall CBuffPrtyEx::IsExpired(_DWORD *this, int a2)
{
  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::IsExpired(this, a2);
  if ( !CChar::IsMStateEx((_DWORD *)a2, this[10]) )
    return 0;
  if ( CBuff::IsExpired(this, a2) )
    (*(void (__thiscall **)(_DWORD *, int))(*this + 8))(this, a2);
  return 0;
}

//----- (004094F0) --------------------------------------------------------
int __thiscall CBuffExpire::SetBuff(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  __time32_t v3; // eax

  if ( (unsigned int)time(0) <= this[2] )
  {
    v3 = time(0);
    (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, int))(*a2 + 108))(a2, this[6], this[7], this[2] - v3);
    result = 1;
  }
  else
  {
    CDBSocket::Write(25, "dbdb", a2[113], this[1], this[2], 1);
    result = 0;
  }
  return result;
}

//----- (00409570) --------------------------------------------------------
int __thiscall CBuffExpire::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  __time32_t v2; // eax

  v2 = time(0);
  (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, int))(*a2 + 108))(a2, this[6], this[7], this[2] - v2);
  CDBSocket::Write(25, "dbdb", a2[113], this[1], this[2], 0);
  return 1;
}

//----- (004095E0) --------------------------------------------------------
BOOL __thiscall CBuffExpire::IsExpired(_DWORD *this, int a2)
{
  return this[2] < (unsigned int)time(0);
}

//----- (00409610) --------------------------------------------------------
int __thiscall CBuffExpireEvent::ApplyBuff(_DWORD *this, int a2)
{
  __time32_t v2; // eax

  v2 = time(0);
  (*(void (__thiscall **)(int, _DWORD, _DWORD, int))(*(_DWORD *)a2 + 108))(a2, this[6], this[7], this[2] - v2);
  (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)a2 + 96))(a2, 27, 1, 10, 10);
  (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)a2 + 96))(a2, 28, 1, 10, 10);
  return 1;
}

//----- (00409680) --------------------------------------------------------
int __thiscall CBuffExpireEvent::FreeBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)a2 + 128))(a2, this[6], this[7]);
  (*(void (__cdecl **)(int, int, _DWORD, int, int))(*(_DWORD *)a2 + 96))(a2, 27, 0, 10, 10);
  return (*(int (__cdecl **)(int, int, _DWORD, int, int))(*(_DWORD *)a2 + 96))(a2, 28, 0, 10, 10);
}

//----- (004096E0) --------------------------------------------------------
int __thiscall CBuffExpireLuckyStone2::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  int result; // eax

  if ( CChar::IsBState(a2, 0x4000000i64) )
    result = 0;
  else
    result = CBuffExpire::ApplyBuff(this, a2);
  return result;
}

//----- (00409720) --------------------------------------------------------
__int64 __thiscall CChar::IsBState(_QWORD *this, __int64 a2)
{
  return a2 & this[38];
}

//----- (00409750) --------------------------------------------------------
int __thiscall CBuffRemain::SetBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 108))(a2, this[6], this[7], this[2]);
  return 1;
}

//----- (00409780) --------------------------------------------------------
int __thiscall CBuffRemain::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD, _DWORD))(*a2 + 108))(a2, this[6], this[7], this[2]);
  CDBSocket::Write(25, "dbdb", a2[113], this[1], this[2], 0);
  return 1;
}

//----- (004097E0) --------------------------------------------------------
void __thiscall CBuffExpire::FreeBuff(_DWORD *this, _DWORD *a2)
{
  (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*a2 + 128))(a2, this[6], this[7]);
  CDBSocket::Write(25, "dbdb", a2[113], this[1], this[2], 1);
}

//----- (00409830) --------------------------------------------------------
int __thiscall CBuffRemain::IsExpired(_DWORD *this, int a2)
{
  if ( !--this[2] )
    return 1;
  if ( !(this[2] % 0x3Cu) )
    CDBSocket::Write(25, "dbdb", *(_DWORD *)(a2 + 452), this[1], this[2], 2);
  return 0;
}

//----- (004098A0) --------------------------------------------------------
void __thiscall CBuffRemain::SaveRemain(_DWORD *this, int a2)
{
  CDBSocket::Write(25, "dbdb", *(_DWORD *)(a2 + 452), this[1], this[2], 2);
}

//----- (004098E0) --------------------------------------------------------
int __thiscall CBuffRemainEx::SetBuff(_DWORD *this, int a2)
{
  CChar::AddGState((volatile LONG *)a2, this[6]);
  return 1;
}

//----- (00409910) --------------------------------------------------------
LONG __thiscall CChar::AddGState(volatile LONG *this, int a2)
{
  return InterlockedExchange(this + 70, a2 | *((_DWORD *)this + 70));
}

//----- (00409940) --------------------------------------------------------
int __thiscall CBuffRemainEx::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  (*(void (__thiscall **)(_DWORD *, _DWORD))(*a2 + 100))(a2, this[6]);
  CDBSocket::Write(25, "dbdb", a2[113], this[1], this[2], 0);
  return 1;
}

//----- (00409990) --------------------------------------------------------
void __thiscall CBuffRemainEx::FreeBuff(_DWORD *this, _DWORD *a2)
{
  (*(void (__thiscall **)(_DWORD *, _DWORD))(*a2 + 112))(a2, this[6]);
  CDBSocket::Write(25, "dbdb", a2[113], this[1], this[2], 1);
}

//----- (004099E0) --------------------------------------------------------
int __thiscall CBuffRemainDead::SetBuff(_DWORD *this, int a2)
{
  CChar::AddGState((volatile LONG *)a2, 2);
  *(_DWORD *)(a2 + 1448) = 1000 * this[2] + GetTickCount();
  *(_DWORD *)(a2 + 1452) = 1000 * this[2] + GetTickCount();
  return 1;
}

//----- (00409A40) --------------------------------------------------------
int __thiscall BuffRemainDead::ApplyBuff(_DWORD *this, int a2)
{
  CDBSocket::Write(25, "dbdb", *(_DWORD *)(a2 + 452), this[1], this[2], 0);
  return 1;
}

//----- (00409A80) --------------------------------------------------------
void __thiscall CBuffRemainDead::FreeBuff(_DWORD *this, int a2)
{
  CDBSocket::Write(25, "dbdb", *(_DWORD *)(a2 + 452), this[1], this[2], 1);
}

//----- (00409AC0) --------------------------------------------------------
int __thiscall CBuffRemainDeadEx::SetBuff(_DWORD *this, int a2)
{
  CPlayer::AddEState((_DWORD *)a2, this[6]);
  return 1;
}

//----- (00409AF0) --------------------------------------------------------
_DWORD *__thiscall CPlayer::AddEState(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  result = this;
  this[142] |= a2;
  return result;
}

//----- (00409B20) --------------------------------------------------------
int __thiscall CBuffRemainXBlow::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  int result; // eax

  if ( CChar::IsBState(a2, 4096i64) && this[1] == 53 || CChar::IsBState(a2, 2048i64) && this[1] == 54 )
    result = 0;
  else
    result = CBuffRemain::ApplyBuff(this, a2);
  return result;
}

//----- (00409BA0) --------------------------------------------------------
int __thiscall CBuffRemainPrty::SetBuff(_DWORD *this, int a2)
{
  if ( !CBuffRemain::SetBuff(this, a2) )
    return 0;
  (*(void (__cdecl **)(int, _DWORD, int, _DWORD))(*(_DWORD *)a2 + 92))(a2, this[8], 1, this[3]);
  return 1;
}

//----- (00409BF0) --------------------------------------------------------
int __thiscall CBuffRemainPrty::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  if ( !CBuffRemain::ApplyBuff(this, a2) )
    return 0;
  (*(void (__cdecl **)(_DWORD *, _DWORD, int, _DWORD))(*a2 + 92))(a2, this[8], 1, this[3]);
  return 1;
}

//----- (00409C40) --------------------------------------------------------
int __thiscall CBuffRemainPrty::FreeBuff(_DWORD *this, _DWORD *a2)
{
  CBuffExpire::FreeBuff(this, a2);
  return (*(int (__cdecl **)(_DWORD *, _DWORD, _DWORD, _DWORD))(*a2 + 92))(a2, this[8], 0, this[3]);
}

//----- (00409C80) --------------------------------------------------------
int __thiscall CBuffRemainCount::UpdateBuff(_DWORD *this, _DWORD *a2, int a3)
{
  if ( this == a2 )
  {
    if ( !--this[2] )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*this + 8))(this, a3);
      return 0;
    }
    goto LABEL_11;
  }
  if ( (unsigned int)(a2[2] + this[2]) <= 0x2710 )
  {
    this[2] += a2[2];
    if ( a2 )
      std__locale__facet___scalar_deleting_destructor_(a2, 1);
LABEL_11:
    CPlayer::Write(a3, 68, "bId", 74, this[6], this[7], this[2]);
    (*(void (__thiscall **)(_DWORD *, int))(*this + 24))(this, a3);
    return 1;
  }
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(a2, 1);
  return 0;
}

//----- (00409D80) --------------------------------------------------------
int __thiscall CBuffRemainLuckyStone1::ApplyBuff(_DWORD *this, _DWORD *a2)
{
  int result; // eax

  if ( CChar::IsBState(a2, 0x8000000i64) )
    result = 0;
  else
    result = CBuffRemain::ApplyBuff(this, a2);
  return result;
}

//----- (00409DC0) --------------------------------------------------------
int __thiscall CBuffRemainPet::ApplyBuff(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-Ch]
  int i; // [esp+8h] [ebp-4h]

  for ( i = 0; i <= 4; ++i )
    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, i, 1, 5);
  this[8] = RandomBetween(0, 2);
  v3 = this[8];
  if ( v3 )
  {
    if ( v3 == 1 )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x80000);
    }
    else if ( v3 == 2 )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x100000);
    }
  }
  else
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x40000);
  }
  CPlayer::Write(a2, 47, "bb", 0, this[8]);
  return 1;
}

//----- (00409E90) --------------------------------------------------------
void __thiscall CBuffRemainPet::FreeBuff(_DWORD *this, int a2)
{
  int v2; // [esp+4h] [ebp-Ch]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i <= 4; ++i )
    (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 92))(a2, i, 0, 5);
  v2 = this[8];
  switch ( v2 )
  {
    case 0:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 112))(a2, 0x40000);
      goto LABEL_9;
    case 1:
LABEL_9:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 112))(a2, 0x80000);
      goto LABEL_10;
    case 2:
LABEL_10:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 112))(a2, 0x100000);
      break;
  }
  switch ( this[3] )
  {
    case 1:
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 5, 0, 25);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 120))(a2, 0x8000000);
      break;
    case 2:
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 6, 0, 25);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 120))(a2, 0x10000000);
      break;
    case 3:
      (*(void (__cdecl **)(int, int, _DWORD, int, int))(*(_DWORD *)a2 + 96))(a2, 27, 0, 25, 25);
      (*(void (__cdecl **)(int, int, _DWORD, int, int))(*(_DWORD *)a2 + 96))(a2, 28, 0, 25, 25);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 120))(a2, 0x20000000);
      break;
    case 4:
      (*(void (__cdecl **)(int, int, _DWORD, int, int))(*(_DWORD *)a2 + 96))(a2, 15, 0, 25, 25);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 120))(a2, 0x40000000);
      break;
    default:
      break;
  }
  this[3] = 0;
  CPlayer::Write(a2, 47, "bb", 1, this[8]);
}

//----- (0040A040) --------------------------------------------------------
int __userpurge CBuffRemainPet::IsExpired@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a2)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax

  if ( !--this[2] )
    return 1;
  if ( this[3] )
  {
    if ( this[2] % 0x384u < 0x12C )
    {
      switch ( this[3] )
      {
        case 1:
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 5, 0, 25);
          (*(void (__thiscall **)(_DWORD *, int))(*a2 + 120))(a2, 0x8000000);
          break;
        case 2:
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 6, 0, 25);
          (*(void (__thiscall **)(_DWORD *, int))(*a2 + 120))(a2, 0x10000000);
          break;
        case 3:
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 96))(a2, 27, 0, 25, 25);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 96))(a2, 28, 0, 25, 25);
          (*(void (__thiscall **)(_DWORD *, int))(*a2 + 120))(a2, 0x20000000);
          break;
        case 4:
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 96))(a2, 15, 0, 25, 25);
          (*(void (__thiscall **)(_DWORD *, int))(*a2 + 120))(a2, 0x40000000);
          break;
        default:
          break;
      }
      this[3] = 0;
    }
  }
  else if ( this[2] % 0x384u > 0x12C )
  {
    this[3] = RandomBetween(1, 4);
    switch ( this[3] )
    {
      case 1:
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 5, 1, 25);
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 116))(a2, 0x8000000);
        v6 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CChar::WriteInSight(ebx0, a3, a4, (int)a2, 73, "db", v6, 24);
        break;
      case 2:
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 6, 1, 25);
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 116))(a2, 0x10000000);
        v7 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CChar::WriteInSight(ebx0, a3, a4, (int)a2, 73, "db", v7, 25);
        break;
      case 3:
        (*(void (__cdecl **)(_DWORD *, int, int, int, int))(*a2 + 96))(a2, 27, 1, 25, 25);
        (*(void (__cdecl **)(_DWORD *, int, int, int, int))(*a2 + 96))(a2, 28, 1, 25, 25);
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 116))(a2, 0x20000000);
        v8 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CChar::WriteInSight(ebx0, a3, a4, (int)a2, 73, "db", v8, 26);
        break;
      case 4:
        (*(void (__cdecl **)(_DWORD *, int, int, int, int))(*a2 + 96))(a2, 15, 1, 25, 25);
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 116))(a2, 0x40000000);
        v9 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CChar::WriteInSight(ebx0, a3, a4, (int)a2, 73, "db", v9, 27);
        break;
      default:
        return 0;
    }
  }
  return 0;
}

//----- (0040A330) --------------------------------------------------------
int __thiscall CBuffHydrochloricAcid::ApplyBuff(_DWORD *this, int a2)
{
  (*(void (__thiscall **)(int, unsigned int))(*(_DWORD *)a2 + 116))(a2, 0x80000000);
  this[2] = GetTickCount() + 20000;
  return 1;
}

//----- (0040A370) --------------------------------------------------------
int __stdcall CBuffHydrochloricAcid::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)a1 + 120))(a1, 0x80000000);
}

//----- (0040A390) --------------------------------------------------------
int __thiscall CBuffHydrochloricAcid::IsExpired(_DWORD *this, int *a2)
{
  int v3; // [esp+0h] [ebp-10h]
  DWORD v5; // [esp+Ch] [ebp-4h]

  v5 = GetTickCount();
  if ( a2[68] > 1 && this[7] < v5 )
  {
    if ( a2[68] <= this[3] )
      v3 = a2[68] - 1;
    else
      v3 = this[3];
    (*(void (__cdecl **)(int *, int, _DWORD, int))(*a2 + 88))(a2, 7, 0, v3);
    if ( (*(int (__thiscall **)(int *))(*a2 + 60))(a2) )
    {
      CPlayer::Write((int)a2, 69, "bw", 7, a2[68]);
      CPlayer::UpdatePartyMember(a2, 7);
    }
    ++this[6];
    this[7] = v5 + 2500;
  }
  if ( !CBuff::IsExpired(this, (int)a2) && (int)this[6] <= 10 )
    return 0;
  (*(void (__thiscall **)(_DWORD *, int *))(*this + 8))(this, a2);
  return 1;
}

//----- (0040A4A0) --------------------------------------------------------
int __thiscall CBuffMixDamage::ApplyBuff(_DWORD *this, int a2)
{
  this[8] = this[9] + GetTickCount();
  this[2] = GetTickCount() + this[6] * this[9] + 1000;
  return 1;
}

//----- (0040A4F0) --------------------------------------------------------
int __thiscall CBuffMixDamage::IsExpired(_DWORD *this, int *a2)
{
  int v3; // [esp+0h] [ebp-10h]
  DWORD v5; // [esp+Ch] [ebp-4h]

  v5 = GetTickCount();
  if ( a2[68] > 1 && this[8] < v5 )
  {
    if ( a2[68] <= this[3] )
      v3 = a2[68] - 1;
    else
      v3 = this[3];
    (*(void (__cdecl **)(int *, int, _DWORD, int))(*a2 + 88))(a2, 7, 0, v3);
    if ( (*(int (__thiscall **)(int *))(*a2 + 60))(a2) )
    {
      CPlayer::Write((int)a2, 69, "bw", 7, a2[68]);
      CPlayer::UpdatePartyMember(a2, 7);
    }
    else if ( (*(int (__thiscall **)(int *))(*a2 + 64))(a2) )
    {
      a2[118] = GetTickCount() + 20000;
    }
    --this[6];
    this[8] = this[9] + v5;
  }
  if ( !CBuff::IsExpired(this, (int)a2) && (int)this[6] >= 1 )
    return 0;
  (*(void (__thiscall **)(_DWORD *, int *))(*this + 8))(this, a2);
  return 1;
}

//----- (0040A620) --------------------------------------------------------
CCalendar *__thiscall CCalendar::CCalendar(CCalendar *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B4AF8;
  return this;
}
// 4B4AF8: using guessed type int (__stdcall *off_4B4AF8)(int);

//----- (0040A640) --------------------------------------------------------
_DWORD *__thiscall CCalendar::_scalar_deleting_destructor_(_DWORD *this, char a2)
{
  CCalendar::_CCalendar(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0040A670) --------------------------------------------------------
_DWORD *__thiscall CCalendar::_CCalendar(_DWORD *this)
{
  *this = &off_4B4AF8;
  return std__locale__facet___facet(this);
}
// 4B4AF8: using guessed type int (__stdcall *off_4B4AF8)(int);

//----- (0040A690) --------------------------------------------------------
void __usercall CCalendar::Start(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  __time32_t Time; // [esp+0h] [ebp-8h] BYREF
  struct tm *v4; // [esp+4h] [ebp-4h]

  Time = time(0);
  v4 = localtime(&Time);
  dword_4DA77C = v4->tm_year + 1900;
  dword_4DA780 = v4->tm_mon + 1;
  dword_4DA784 = v4->tm_mday;
  dword_4DA788 = v4->tm_hour;
  dword_4DA78C = v4->tm_min;
  dword_4DA790 = v4->tm_sec;
  dword_4DA794 = GetTickCount();
  CIOObject::AddTimer((CIOObject *)&unk_4DA798, a1, a2, a3, 1000u, 0);
}
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;
// 4DA784: using guessed type int dword_4DA784;
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;
// 4DA790: using guessed type int dword_4DA790;
// 4DA794: using guessed type int dword_4DA794;

//----- (0040A730) --------------------------------------------------------
int CCalendar::GetTime()
{
  return dword_4DA78C + (dword_4DA788 << 8);
}
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;

//----- (0040A750) --------------------------------------------------------
void __userpurge CCalendar::OnTimer(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  CCalendar::ElapseTime((CIOObject *)this, ebx0, a3, a4);
}

//----- (0040A770) --------------------------------------------------------
void __usercall CCalendar::ElapseTime(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v4; // [esp+0h] [ebp-10h]
  unsigned int v6; // [esp+Ch] [ebp-4h]

  if ( !dword_4DA778 )
  {
    v6 = GetTickCount();
    while ( v6 >= dword_4DA794 )
    {
      dword_4DA794 += 1000;
      ++dword_4DA790;
      if ( ((dword_4E1174[0] & 2) == 0 || (*(_WORD *)dword_4E1174 & 0x2000) != 0) && !(dword_4DA790 % 30) )
        sub_47E780(a2, a3, a4);
      CGuild::SecondProcess();
      if ( dword_4DA790 >= 60 )
      {
        dword_4DA790 = 0;
        ++dword_4DA78C;
        CGuild::MinuteProcess(v6);
        CPlayer::ScanONPKPlayer(a2, a3, a4);
        if ( (dword_4E1174[0] & 2) != 0 && (dword_4E1178 & 0x40) != 0 && !(dword_4DA78C % 10) )
          CPlayer::EventBuff(a2, a3, a4, 0);
        if ( dword_4DA78C >= 60 )
        {
          dword_4DA78C = 0;
          ++dword_4DA788;
          CPlayer::LogPlayerStatistic(a2, a4);
          if ( (dword_4E1174[0] & 2) == 0
            && (dword_4E1178 & 0x40) != 0
            && (dword_4DA788 == 1 || dword_4DA788 == 12 || dword_4DA788 == 20) )
          {
            CPlayer::EventBuff(a2, a3, a4, 0);
          }
          if ( dword_4DA788 >= 24 )
          {
            dword_4DA788 = 0;
            ++dword_4DA784;
            v4 = CCalendar::IsIntercalary() ? 29 : dword_4D52FC[dword_4DA780];
            if ( dword_4DA784 > v4 )
            {
              dword_4DA784 = 1;
              if ( ++dword_4DA780 > 12 )
              {
                dword_4DA780 = 1;
                ++dword_4DA77C;
              }
            }
          }
        }
      }
    }
    CIOObject::AddTimer(this, a2, a3, a4, dword_4DA794 - v6, 0);
  }
}
// 4DA778: using guessed type int dword_4DA778;
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;
// 4DA784: using guessed type int dword_4DA784;
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;
// 4DA790: using guessed type int dword_4DA790;
// 4DA794: using guessed type int dword_4DA794;
// 4E1178: using guessed type int dword_4E1178;

//----- (0040A990) --------------------------------------------------------
int CCalendar::IsIntercalary()
{
  int v1; // [esp+4h] [ebp-4h]

  v1 = 0;
  if ( dword_4DA780 == 2 )
  {
    if ( dword_4DA77C % 400 )
    {
      v1 = 1;
    }
    else if ( dword_4DA77C % 100 )
    {
      v1 = 0;
    }
    else if ( dword_4DA77C % 4 )
    {
      v1 = 1;
    }
  }
  return v1;
}
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;

//----- (0040AA10) --------------------------------------------------------
CChar *__thiscall CChar::CChar(CChar *this)
{
  CBase::CBase(this);
  *(_DWORD *)this = &off_4B4B10;
  CIOCriticalSection::CIOCriticalSection((CChar *)((char *)this + 364));
  CIOCriticalSection::CIOCriticalSection((CChar *)((char *)this + 396));
  *((_DWORD *)this + 88) = 0;
  *((_DWORD *)this + 89) = 0;
  memset((char *)this + 32, 0, 0x19u);
  *((_DWORD *)this + 15) = 0;
  memset((char *)this + 64, 0, 0x1Cu);
  memset((char *)this + 92, 0, 0x60u);
  memset((char *)this + 188, 0, 0x54u);
  *((_DWORD *)this + 68) = 0;
  *((_DWORD *)this + 69) = 0;
  *((_DWORD *)this + 70) = 0;
  *((_DWORD *)this + 72) = 0;
  *((_DWORD *)this + 73) = 0;
  *((_DWORD *)this + 74) = 0;
  *((_DWORD *)this + 76) = 0;
  *((_DWORD *)this + 77) = 0;
  *((_DWORD *)this + 78) = 0;
  *((_DWORD *)this + 79) = 0;
  *((_DWORD *)this + 80) = 0;
  *((_DWORD *)this + 82) = -1;
  *((_DWORD *)this + 81) = -1;
  *((_DWORD *)this + 84) = -1;
  *((_DWORD *)this + 83) = -1;
  *((_DWORD *)this + 85) = -1;
  *((_DWORD *)this + 86) = 0;
  *((_DWORD *)this + 87) = 1;
  *((_DWORD *)this + 90) = 0;
  return this;
}
// 4B4B10: using guessed type int (__stdcall *off_4B4B10)(int);

//----- (0040ABB0) --------------------------------------------------------
BOOL __thiscall CChar::Index(_DWORD *this, int a2)
{
  return a2 == this[86];
}

//----- (0040ABD0) --------------------------------------------------------
int __stdcall CMonsterSiegeGunBall::Damage(int a1, int a2, int a3, int a4, int a5, int a6)
{
  return 0;
}

//----- (0040ABE0) --------------------------------------------------------
_DWORD *__thiscall CChar::AddMState(_DWORD *this, int a2, int a3)
{
  int v3; // edx
  _DWORD *result; // eax

  v3 = a3 | this[73];
  result = this;
  this[72] |= a2;
  this[73] = v3;
  return result;
}

//----- (0040AC20) --------------------------------------------------------
LONG __thiscall CChar::SubGState(volatile LONG *this, int a2)
{
  return InterlockedExchange(this + 70, this[70] & ~a2);
}

//----- (0040AC50) --------------------------------------------------------
LONG __thiscall CChar::AddMStateEx(volatile LONG *this, int a2)
{
  return InterlockedExchange(this + 74, a2 | *((_DWORD *)this + 74));
}

//----- (0040AC80) --------------------------------------------------------
LONG __thiscall CChar::SubMStateEx(volatile LONG *this, int a2)
{
  return InterlockedExchange(this + 74, this[74] & ~a2);
}

//----- (0040ACB0) --------------------------------------------------------
int __thiscall CChar::SubMState(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // ecx

  result = this[72] & ~a2;
  v4 = this[73] & ~a3;
  this[72] = result;
  this[73] = v4;
  return result;
}

//----- (0040ACF0) --------------------------------------------------------
int __thiscall CChar::GetFinalDefense(_DWORD *this, int a1)
{
  int v2; // eax

  v2 = (*(int (__thiscall **)(int))(*(_DWORD *)a1 + 156))(a1);
  return CChar::GetDefense(this, v2);
}

//----- (0040AD20) --------------------------------------------------------
int __thiscall CChar::GetFinalAbsorb(void *this, int a2)
{
  return CChar::GetAbsorb(this);
}

//----- (0040AD40) --------------------------------------------------------
int __thiscall CChar::GetFinalResist(_DWORD *this, int a1, int a2)
{
  return CChar::GetResist(this, a2) / 10;
}

//----- (0040AD70) --------------------------------------------------------
int __stdcall CChar::GetMSpeed(int a1)
{
  return 1600;
}

//----- (0040AD90) --------------------------------------------------------
void __userpurge CChar::UpdateChild(volatile int *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  CIOObject::Release(this, ebx0, a3, a4);
}

//----- (0040ADB0) --------------------------------------------------------
void *__userpurge CChar::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CChar::_CChar((int)this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0040ADE0) --------------------------------------------------------
_DWORD *__usercall CChar::_CChar@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *(_DWORD *)this = &off_4B4B10;
  CChar::DeleteAllBuff(this, a2, a3, a4);
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 396), a2, a3, a4);
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 364), a2, a3, a4);
  return CBase::_CBase((_DWORD *)this, a2, a3, a4);
}
// 4B4B10: using guessed type int (__stdcall *off_4B4B10)(int);

//----- (0040AE20) --------------------------------------------------------
int __thiscall CChar::ReviseProperty(_DWORD *this)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-10h]
  int v4; // [esp+Ch] [ebp-Ch]
  int v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  this[21] += 52 * this[15] / 3;
  this[22] += 8 * this[15] + 140;
  v4 = CChar::GetStr(this);
  v3 = CChar::GetInt(this);
  v6 = CChar::GetWis(this);
  v5 = Char::GetDex(this);
  this[30] += v5 / 8 + 15 * v4 / 54;
  this[31] += v5 / 3;
  this[32] += (v5 - 5) / 11 + (11 * v4 - 80) / 30 + 7 * this[15] / 10 + 1;
  this[33] += 18 * v5 / 77 + (8 * v4 - 25) / 15 + this[15];
  this[34] = v6 / 7 + (7 * v3 - 20) / 12 + this[34] - 3;
  this[35] = 14 * v6 / 45 + 7 * v3 / 12 + this[35] - 3;
  this[40] += v3 / 9;
  this[41] += v3 / 9;
  this[42] += v3 / 9;
  this[43] += v6 / 9;
  result = this[44] + CChar::GetHth(this) / 9;
  this[44] = result;
  return result;
}

//----- (0040B060) --------------------------------------------------------
int __thiscall CChar::GetDropPt(_DWORD *this, int *a2)
{
  int result; // eax
  int nMin; // [esp+4h] [ebp-10h]
  int v5; // [esp+8h] [ebp-Ch]
  int nMax; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h]

  nMin = this[83] - 16;
  v5 = this[84] + 16;
  nMax = this[83] + 16;
  v7 = this[84] - 16;
  do
  {
    do
    {
      *a2 = RandomBetween(nMin, nMax);
      a2[1] = RandomBetween(v7, v5);
    }
    while ( abs(*a2 - this[83]) < 8 );
    result = abs(a2[1] - this[84]);
  }
  while ( result < 8 );
  return result;
}

//----- (0040B110) --------------------------------------------------------
_DWORD *__thiscall CChar::SetXY(_DWORD *this, _DWORD *a2)
{
  int v2; // edx
  _DWORD *result; // eax

  v2 = a2[1];
  this[83] = *a2;
  this[84] = v2;
  this[81] = (int)*a2 >> 5;
  this[82] = (int)a2[1] >> 5;
  result = this;
  this[86] = (((int)*a2 >> 3) & 3) + 4 * (((int)a2[1] >> 3) & 3);
  return result;
}

//----- (0040B180) --------------------------------------------------------
void __thiscall CChar::SetDirection(_DWORD *this, int Number, int a3)
{
  int v4; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  if ( Number || a3 )
  {
    v4 = abs(Number);
    v5 = abs(a3);
    if ( v4 < v5 || v4 <= 127 )
    {
      if ( v4 < v5 && v5 > 127 )
      {
        Number = 127 * Number / v5;
        LOBYTE(a3) = a3 <= 0 ? -127 : 127;
      }
    }
    else
    {
      a3 = 127 * a3 / v4;
      LOWORD(Number) = Number <= 0 ? -127 : 127;
    }
    this[87] = (unsigned __int8)a3 + (unsigned __int16)((_WORD)Number << 8);
  }
}

//----- (0040B240) --------------------------------------------------------
int __thiscall CChar::SetReverseDirection(_DWORD *this, __int16 a2)
{
  int result; // eax

  result = (unsigned __int8)-(char)a2 + ((255 - a2) & 0xFF00);
  this[87] = result;
  return result;
}

//----- (0040B280) --------------------------------------------------------
BOOL __thiscall CChar::IsNormal(int this)
{
  return *(int *)(this + 272) > 0
      && !CBase::IsDeleted((_DWORD *)this)
      && !CChar::IsGState((_DWORD *)this, 35)
      && !CChar::IsMState((_QWORD *)this, 0x80000i64);
}

//----- (0040B2F0) --------------------------------------------------------
int __thiscall CBase::IsDeleted(_DWORD *this)
{
  return this[5] & 1;
}

//----- (0040B310) --------------------------------------------------------
int __thiscall CChar::IsGState(_DWORD *this, int a2)
{
  return a2 & this[70];
}

//----- (0040B330) --------------------------------------------------------
void __userpurge CChar::SetBuff(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  int v6; // [esp+0h] [ebp-14h]
  CBuffMoveSpeed *v8; // [esp+10h] [ebp-4h]

  v8 = CBuff::CreateBuff(a2, a3, 1, v6);
  if ( v8 )
  {
    if ( (**(int (__thiscall ***)(CBuffMoveSpeed *, int))v8)(v8, this) )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), ebx0, edi0, a4);
      *((_DWORD *)v8 + 5) = *(_DWORD *)(this + 360);
      *(_DWORD *)(this + 360) = v8;
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), ebx0, edi0, a4);
    }
    else
    {
      std__locale__facet___scalar_deleting_destructor_(v8, 1);
    }
  }
}
// 40B378: conditional instruction was optimized away because of '%var_4.4!=0'
// 40B343: variable 'v6' is possibly undefined

//----- (0040B3D0) --------------------------------------------------------
int __userpurge CChar::AddBuff@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a2)
{
  int v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  if ( !a2 )
    return 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
  v8 = CChar::_FindBuff((_DWORD *)this, a2[1]);
  if ( v8 )
  {
    v7 = (*(int (__thiscall **)(int, _DWORD *, int))(*(_DWORD *)v8 + 12))(v8, a2, this);
  }
  else
  {
    v7 = (*(int (__thiscall **)(_DWORD *, int))(*a2 + 4))(a2, this);
    if ( v7 )
    {
      a2[5] = *(_DWORD *)(this + 360);
      *(_DWORD *)(this + 360) = a2;
    }
    else
    {
      std__locale__facet___scalar_deleting_destructor_(a2, 1);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
  return v7;
}
// 40B470: conditional instruction was optimized away because of '%arg_0.4!=0'

//----- (0040B4A0) --------------------------------------------------------
int __thiscall CChar::_FindBuff(_DWORD *this, int a2)
{
  int i; // [esp+4h] [ebp-4h]

  for ( i = this[90]; i && *(_DWORD *)(i + 4) != a2; i = *(_DWORD *)(i + 20) )
    ;
  return i;
}

//----- (0040B4E0) --------------------------------------------------------
int __userpurge CChar::GetBuffRemain@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  int v7; // [esp+4h] [ebp-8h]
  int v8; // [esp+8h] [ebp-4h]

  v8 = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
  v7 = CChar::_FindBuff((_DWORD *)this, a2);
  if ( v7 )
    v8 = *(_DWORD *)(v7 + 8);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
  return v8;
}

//----- (0040B540) --------------------------------------------------------
void __userpurge CChar::UpdateBuff(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  _DWORD *i; // [esp+10h] [ebp-8h]
  _DWORD *v7; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
  v7 = (_DWORD *)(this + 360);
  for ( i = *(_DWORD **)(this + 360); i; i = (_DWORD *)i[5] )
  {
    if ( i[1] == a2 )
    {
      if ( !(*(int (__thiscall **)(_DWORD *, _DWORD *, int))(*i + 12))(i, i, this) )
      {
        *v7 = i[5];
        std__locale__facet___scalar_deleting_destructor_(i, 1);
      }
      break;
    }
    v7 = i + 5;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
}
// 40B5B7: conditional instruction was optimized away because of '%var_8.4!=0'

//----- (0040B5F0) --------------------------------------------------------
void __usercall CChar::RefreshBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  _DWORD *i; // [esp+10h] [ebp-8h]
  _DWORD **v6; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), a2, a3, a4);
  v6 = (_DWORD **)(this + 360);
  for ( i = *(_DWORD **)(this + 360); i; i = *v6 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int))(*i + 16))(i, this) )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*i + 8))(i, this);
      *v6 = (_DWORD *)i[5];
      std__locale__facet___scalar_deleting_destructor_(i, 1);
    }
    else
    {
      v6 = (_DWORD **)(i + 5);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), a2, a3, a4);
}
// 40B667: conditional instruction was optimized away because of '%var_8.4!=0'

//----- (0040B6A0) --------------------------------------------------------
void __userpurge CChar::CancelBuff(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  _DWORD *i; // [esp+10h] [ebp-8h]
  _DWORD *v7; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
  v7 = (_DWORD *)(this + 360);
  for ( i = *(_DWORD **)(this + 360); i; i = (_DWORD *)i[5] )
  {
    if ( i[1] == a2 )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*i + 8))(i, this);
      *v7 = i[5];
      std__locale__facet___scalar_deleting_destructor_(i, 1);
      break;
    }
    v7 = i + 5;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), ebx0, a3, a4);
}
// 40B70F: conditional instruction was optimized away because of '%var_8.4!=0'

//----- (0040B750) --------------------------------------------------------
void __usercall CChar::CancelAllBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  _DWORD *i; // [esp+10h] [ebp-8h]
  _DWORD **v6; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), a2, a3, a4);
  v6 = (_DWORD **)(this + 360);
  for ( i = *(_DWORD **)(this + 360); i; i = *v6 )
  {
    (*(void (__thiscall **)(_DWORD *, int))(*i + 8))(i, this);
    *v6 = (_DWORD *)i[5];
    std__locale__facet___scalar_deleting_destructor_(i, 1);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), a2, a3, a4);
}
// 40B7B4: conditional instruction was optimized away because of '%var_8.4!=0'

//----- (0040B7E0) --------------------------------------------------------
void __usercall CChar::DeleteAllBuff(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  _DWORD *i; // [esp+10h] [ebp-8h]
  _DWORD **v6; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 364), a2, a3, a4);
  v6 = (_DWORD **)(a1 + 360);
  for ( i = *(_DWORD **)(a1 + 360); i; i = *v6 )
  {
    *v6 = (_DWORD *)i[5];
    std__locale__facet___scalar_deleting_destructor_(i, 1);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 364), a2, a3, a4);
}
// 40B835: conditional instruction was optimized away because of '%var_8.4!=0'

//----- (0040B870) --------------------------------------------------------
void __userpurge CChar::CancelBuffPrty(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  _DWORD *i; // [esp+10h] [ebp-8h]
  _DWORD **v7; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 364), a2, a3, a4);
  v7 = (_DWORD **)(a1 + 360);
  for ( i = *(_DWORD **)(a1 + 360); i; i = *v7 )
  {
    if ( (a5 & i[4]) != 0 )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*i + 8))(i, a1);
      *v7 = (_DWORD *)i[5];
      std__locale__facet___scalar_deleting_destructor_(i, 1);
    }
    else
    {
      v7 = (_DWORD **)(i + 5);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 364), a2, a3, a4);
}
// 40B8DF: conditional instruction was optimized away because of '%var_8.4!=0'

//----- (0040B920) --------------------------------------------------------
void __usercall CChar::ResetAllBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int i; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), a2, a3, a4);
  for ( i = *(_DWORD *)(this + 360); i; i = *(_DWORD *)(i + 20) )
    (**(void (__thiscall ***)(int, int))i)(i, this);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), a2, a3, a4);
}

//----- (0040B980) --------------------------------------------------------
void __usercall CChar::SaveAllBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 364), a2, a3, a4);
  for ( i = *(_DWORD **)(this + 360); i; i = (_DWORD *)i[5] )
    (*(void (__thiscall **)(_DWORD *, int))(*i + 24))(i, this);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 364), a2, a3, a4);
}

//----- (0040B9E0) --------------------------------------------------------
void __usercall CChar::WriteInSight(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, char a2, ...)
{
  CMemory **v5; // [esp+0h] [ebp-10h]
  va_list va; // [esp+20h] [ebp+10h] BYREF

  va_start(va, a2);
  v5 = CIOBuffer::Alloc();
  *((_BYTE *)v5 + 2) = a2;
  *(_WORD *)v5 = (unsigned __int16)WritePacket(ebx0, edi0, a3, (char *)v5 + 3, (int)va) - (_WORD)v5;
  v5[2000] = (CMemory *)*(unsigned __int16 *)v5;
  sub_493440(*(char **)(a1 + 320), ebx0, edi0, a3, (_DWORD *)(a1 + 324), (int)v5, 25);
  CIOBuffer::Release((CIOBuffer *)v5);
}

//----- (0040BA70) --------------------------------------------------------
void __usercall CChar::WriteInRect(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, char a2, int a3, ...)
{
  CMemory **v6; // [esp+0h] [ebp-10h]
  va_list va; // [esp+24h] [ebp+14h] BYREF

  va_start(va, a3);
  v6 = CIOBuffer::Alloc();
  *((_BYTE *)v6 + 2) = a2;
  *(_WORD *)v6 = (unsigned __int16)WritePacket(ebx0, edi0, esi0, (char *)v6 + 3, (int)va) - (_WORD)v6;
  v6[2000] = (CMemory *)*(unsigned __int16 *)v6;
  sub_493440(*(char **)(a1 + 320), ebx0, edi0, esi0, (_DWORD *)(a1 + 324), (int)v6, a3);
  CIOBuffer::Release((CIOBuffer *)v6);
}

//----- (0040BB00) --------------------------------------------------------
void __thiscall CConfig::CConfig(CConfig *this)
{
  std__ios_base__ios_base((_DWORD *)this + 130);
  *((_DWORD *)this + 128) = 0;
}

//----- (0040BB30) --------------------------------------------------------
_DWORD *__thiscall std__ios_base__ios_base(_DWORD *this)
{
  *this = &unk_4E110C;
  return this;
}

//----- (0040BB50) --------------------------------------------------------
void __thiscall CConfig::_CConfig(CConfig *this)
{
  CConfig::Close(this);
}

//----- (0040BB70) --------------------------------------------------------
void __thiscall CConfig::Close(CConfig *this)
{
  int (__thiscall ***v1)(_DWORD); // ecx
  int (__thiscall ***v2)(_DWORD); // [esp-4h] [ebp-10h] BYREF
  CConfig *v3; // [esp+0h] [ebp-Ch]

  v3 = this;
  if ( *((_DWORD *)this + 128) )
  {
    fclose(*((FILE **)v3 + 128));
    *((_DWORD *)v3 + 128) = 0;
  }
  v2 = (int (__thiscall ***)(_DWORD))((char *)v3 + 520);
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    &v2,
    (_DWORD *)v3 + 130);
  free_var(v2);
  v2 = v1;
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    &v2,
    &dword_4E1108);
  lisp::var::operator=(v2);
}
// 40BBC0: variable 'v1' is possibly undefined
// 4323F0: using guessed type _DWORD __stdcall lisp::var::operator=(_DWORD);

//----- (0040BBE0) --------------------------------------------------------
void __cdecl free_var(int (__thiscall ***a1)(_DWORD))
{
  _DWORD *v1; // eax
  int (__thiscall ***v2)(_DWORD); // ecx
  _DWORD *v3; // eax
  int (__thiscall ***v4)(_DWORD); // ecx
  void *v5; // eax
  int (__thiscall ***v6[6])(_DWORD); // [esp-4h] [ebp-1Ch] BYREF
  int (__thiscall ***v7)(_DWORD); // [esp+14h] [ebp-4h]

  if ( (unsigned __int8)sub_40BCE0(&a1) )
  {
    v1 = (_DWORD *)sub_40BCA0(&a1);
    v6[0] = v2;
    std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
      v6,
      v1);
    free_var(v6[0]);
    v3 = (_DWORD *)sub_40BCC0(&a1);
    v6[0] = v4;
    std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
      v6,
      v3);
    free_var(v6[0]);
    v6[3] = a1;
    operator_delete(a1);
  }
  else if ( (unsigned __int8)sub_40BD00(&a1) )
  {
    v7 = a1;
    v5 = (void *)(**a1)(a1);
    CMemory::_free(v5);
    v6[2] = v7;
    operator_delete(v7);
  }
  else if ( (unsigned __int8)sub_40BD20(&a1) )
  {
    operator_delete(a1);
  }
}
// 40BBFD: variable 'v2' is possibly undefined
// 40BC16: variable 'v4' is possibly undefined

//----- (0040BCA0) --------------------------------------------------------
int __thiscall sub_40BCA0(_DWORD *this)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)*this + 12))(*this, this);
}

//----- (0040BCC0) --------------------------------------------------------
int __thiscall sub_40BCC0(_DWORD *this)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)*this + 16))(*this, this);
}

//----- (0040BCE0) --------------------------------------------------------
int __thiscall sub_40BCE0(_DWORD *this)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)*this + 20))(*this, this);
}

//----- (0040BD00) --------------------------------------------------------
int __thiscall sub_40BD00(_DWORD *this)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)*this + 28))(*this, this);
}

//----- (0040BD20) --------------------------------------------------------
int __thiscall sub_40BD20(_DWORD *this)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)*this + 32))(*this, this);
}

//----- (0040BD40) --------------------------------------------------------
int __thiscall CConfig::GetToken(char *this)
{
  int result; // eax
  int v2; // [esp+10h] [ebp-14h]
  int C; // [esp+1Ch] [ebp-8h]
  int Ca; // [esp+1Ch] [ebp-8h]
  int Cb; // [esp+1Ch] [ebp-8h]
  int Cc; // [esp+1Ch] [ebp-8h]
  int Cd; // [esp+1Ch] [ebp-8h]
  char *v9; // [esp+20h] [ebp-4h]
  char *i; // [esp+20h] [ebp-4h]

  while ( 2 )
  {
    C = fgetc(*((FILE **)this + 128));
    switch ( C )
    {
      case -1:
        return 0;
      case 9:
      case 13:
      case 32:
        continue;
      case 10:
        ++*((_DWORD *)this + 129);
        return 3;
      case 34:
        v9 = this;
        while ( 2 )
        {
          Ca = fgetc(*((FILE **)this + 128));
          switch ( Ca )
          {
            case -1:
              return 0;
            case 10:
              ++*((_DWORD *)this + 129);
              return 3;
            case 13:
              continue;
            case 34:
              Cb = fgetc(*((FILE **)this + 128));
              if ( Cb == -1 )
              {
                *v9 = 0;
                return 2;
              }
              if ( Cb == 34 )
              {
                *v9++ = 34;
                continue;
              }
              break;
            default:
              *v9++ = Ca;
              continue;
          }
          break;
        }
        goto LABEL_19;
      case 39:
        v9 = this;
        while ( 2 )
        {
          Cc = fgetc(*((FILE **)this + 128));
          switch ( Cc )
          {
            case -1:
              return 0;
            case 10:
              ++*((_DWORD *)this + 129);
              return 3;
            case 13:
              continue;
            case 39:
              Cb = fgetc(*((FILE **)this + 128));
              if ( Cb == -1 )
              {
                *v9 = 0;
                result = 2;
              }
              else
              {
                if ( Cb == 39 )
                {
                  *v9++ = 39;
                  continue;
                }
LABEL_19:
                ungetc_0(Cb, *((FILE **)this + 128));
                *v9 = 0;
                result = 2;
              }
              break;
            default:
              *v9++ = Cc;
              continue;
          }
          break;
        }
        return result;
      case 40:
        return 7;
      case 41:
        return 8;
      case 44:
        return 5;
      case 58:
        return 6;
      case 59:
        do
        {
          v2 = fgetc(*((FILE **)this + 128));
          if ( v2 == -1 )
            return 0;
        }
        while ( v2 != 10 );
        ++*((_DWORD *)this + 129);
        return 3;
      case 61:
        return 4;
      default:
        if ( isalnum(C) || C == 45 )
        {
          *this = C;
          for ( i = this + 1; ; ++i )
          {
            Cd = fgetc(*((FILE **)this + 128));
            if ( Cd == -1 )
              goto LABEL_41;
            if ( !isalnum(Cd) )
              break;
            *i = Cd;
          }
          ungetc_0(Cd, *((FILE **)this + 128));
LABEL_41:
          *i = 0;
          return 1;
        }
        return 9;
    }
  }
}

//----- (0040C1B0) --------------------------------------------------------
lisp::var *__thiscall CConfig::Find(CConfig *this, lisp::var *result, const char *key)
{
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  const char *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v8; // eax
  const char *v9; // ecx
  const char *v10[3]; // [esp-4h] [ebp-10h] BYREF
  int v11; // [esp+8h] [ebp-4h] BYREF

  v10[1] = (const char *)this;
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    &v11,
    (_DWORD *)this + 130);
  while ( !(unsigned __int8)sub_402380(&v11) )
  {
    v10[0] = key;
    v3 = (_DWORD *)sub_40BCA0(&v11);
    v4 = (_DWORD *)sub_40BCA0(v3);
    v5 = (const char *)sub_402360(v4);
    if ( !_stricmp(v5, v10[0]) )
    {
      v6 = (_DWORD *)sub_40BCA0(&v11);
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        result,
        v6);
      return result;
    }
    v8 = (_DWORD *)sub_40BCC0(&v11);
    v10[0] = v9;
    std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
      v10,
      v8);
    lisp::var::operator=(&v11, (int)v10[0]);
  }
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    result,
    &dword_4E1108);
  return result;
}
// 40C21E: variable 'v9' is possibly undefined

//----- (0040C250) --------------------------------------------------------
_DWORD *__thiscall CConfig::GetValue(int this, _DWORD *a2)
{
  const char *v2; // eax
  int v3; // eax
  _DWORD *result; // eax
  lisp::_string *v6; // [esp+8h] [ebp-8h]
  int v7; // [esp+Ch] [ebp-4h]

  do
    v7 = CConfig::GetToken((char *)this);
  while ( v7 == 3 );
  if ( v7 == 1 || v7 == 2 )
  {
    v6 = (lisp::_string *)operator_new(8u);
    if ( v6 )
    {
      v2 = Strdup((const char *)this);
      lisp::_string::_string(v6, v2);
      unknown_libname_20(v3);
    }
    else
    {
      unknown_libname_20(0);
    }
    result = a2;
  }
  else
  {
    if ( v7 == 7 )
    {
      CConfig::GetList((_DWORD *)this, a2);
    }
    else
    {
      *(_DWORD *)(this + 524) = v7;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        a2,
        &dword_4E1108);
    }
    result = a2;
  }
  return result;
}
// 40C2A3: variable 'v3' is possibly undefined
// 446FD0: using guessed type _DWORD __stdcall unknown_libname_20(_DWORD);

//----- (0040C300) --------------------------------------------------------
void __thiscall lisp::_string::_string(lisp::_string *this, const char *str)
{
  std__ios_base__ios_base_0(this);
  *(_DWORD *)this = off_4B4BCC;
  *((_DWORD *)this + 1) = str;
}
// 40C340: using guessed type int __thiscall std__ios_base__ios_base_0(_DWORD);
// 4B4BCC: using guessed type int (*off_4B4BCC[39])();

//----- (0040C330) --------------------------------------------------------
_DWORD *sub_40C330()
{
  return &dword_4E1108;
}

//----- (0040C340) --------------------------------------------------------
_DWORD *__thiscall std__ios_base__ios_base_0(_DWORD *this)
{
  *this = off_4B4BF4;
  return this;
}
// 4B4BF4: using guessed type int (*off_4B4BF4[29])();

//----- (0040C360) --------------------------------------------------------
const char *sub_40C360()
{
  return &Src;
}

//----- (0040C380) --------------------------------------------------------
char *__cdecl Strdup(const char *str)
{
  void *v1; // eax
  unsigned int v3; // [esp-4h] [ebp-8h]

  v3 = strlen(str) + 1;
  v1 = CMemory::_malloc(v3);
  return (char *)memcpy(v1, str, v3);
}

//----- (0040C3C0) --------------------------------------------------------
_DWORD *__thiscall CConfig::GetList(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax
  unsigned __int8 v3; // al
  int (__thiscall ***v4)(_DWORD); // ecx
  int v5; // ecx
  int v6; // [esp-8h] [ebp-30h] BYREF
  int (__thiscall ***v7)(_DWORD); // [esp-4h] [ebp-2Ch] BYREF
  int v8; // [esp+0h] [ebp-28h]
  int v9; // [esp+4h] [ebp-24h]
  _DWORD *v10; // [esp+8h] [ebp-20h]
  void *v11; // [esp+14h] [ebp-14h]
  int v13; // [esp+20h] [ebp-8h] BYREF
  int v14; // [esp+24h] [ebp-4h] BYREF

  v10 = this;
  CConfig::GetValue((int)this, &v14);
  if ( (unsigned __int8)sub_402380(&v14) )
  {
    if ( v10[131] == 8 )
    {
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        a2,
        &dword_4E1108);
      result = a2;
    }
    else
    {
      if ( operator_new(8u) )
        v9 = sub_40C4E0(v10[131]);
      else
        v9 = 0;
      unknown_libname_20(v9);
      result = a2;
    }
  }
  else
  {
    CConfig::GetList(&v13);
    v3 = sub_40BD20(&v13);
    if ( v3 )
    {
      v7 = (int (__thiscall ***)(_DWORD))v3;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v7,
        &v14);
      free_var(v7);
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        a2,
        &v13);
      result = a2;
    }
    else
    {
      v11 = operator_new(0xCu);
      if ( v11 )
      {
        v7 = v4;
        std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
          &v7,
          &v13);
        v6 = v5;
        std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
          &v6,
          &v14);
        v8 = lisp::_cons::_cons(v11, v6, v7);
      }
      else
      {
        v8 = 0;
      }
      unknown_libname_20(v8);
      result = a2;
    }
  }
  return result;
}
// 40C49D: variable 'v4' is possibly undefined
// 40C4A9: variable 'v5' is possibly undefined
// 40BD20: using guessed type int __thiscall sub_40BD20(_DWORD);
// 40C4E0: using guessed type _DWORD __stdcall sub_40C4E0(_DWORD);
// 40C510: using guessed type int __thiscall lisp::_cons::_cons(_DWORD, _DWORD, _DWORD);
// 446FD0: using guessed type _DWORD __stdcall unknown_libname_20(_DWORD);

//----- (0040C4E0) --------------------------------------------------------
_DWORD *__thiscall sub_40C4E0(_DWORD *this, int a2)
{
  std__ios_base__ios_base_0(this);
  *this = off_4B4C1C;
  this[1] = a2;
  return this;
}
// 4B4C1C: using guessed type int (*off_4B4C1C[19])();

//----- (0040C510) --------------------------------------------------------
_DWORD *__thiscall lisp::_cons::_cons(_DWORD *this, int a2, int a3)
{
  std__ios_base__ios_base_0(this);
  *this = off_4B4C44;
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    this + 1,
    &a2);
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    this + 2,
    &a3);
  return this;
}
// 4B4C44: using guessed type int (*off_4B4C44[9])();

//----- (0040C590) --------------------------------------------------------
int __thiscall CConfig::Open(_DWORD *this, char *FileName)
{
  int (__thiscall ***v3)(_DWORD); // ecx
  int (__thiscall ***v4)(_DWORD); // ecx
  const char *v5; // eax
  int v6; // eax
  int (__thiscall ***v7)(_DWORD); // ecx
  lisp::var *v8; // eax
  int (__thiscall ***v9)(_DWORD); // ecx
  int (__thiscall ***v10)(_DWORD); // ecx
  int (__thiscall ***v11)(_DWORD); // ecx
  int v12; // eax
  int v13; // ecx
  int v14; // ecx
  int v15; // [esp-8h] [ebp-6Ch]
  int v16; // [esp-8h] [ebp-6Ch]
  int (__thiscall ***v17)(_DWORD); // [esp-4h] [ebp-68h] BYREF
  _DWORD *v18; // [esp+0h] [ebp-64h]
  _DWORD *v19; // [esp+4h] [ebp-60h]
  int v20; // [esp+8h] [ebp-5Ch]
  int v21; // [esp+Ch] [ebp-58h]
  int v22; // [esp+10h] [ebp-54h]
  void *Src; // [esp+14h] [ebp-50h]
  lisp::_string *v24; // [esp+1Ch] [ebp-48h]
  _DWORD *v25; // [esp+28h] [ebp-3Ch]
  _DWORD *v26; // [esp+34h] [ebp-30h]
  int v27[3]; // [esp+3Ch] [ebp-28h] BYREF
  lisp::_string *v28; // [esp+48h] [ebp-1Ch]
  int v29; // [esp+50h] [ebp-14h] BYREF
  int v30; // [esp+54h] [ebp-10h]
  char *String2; // [esp+58h] [ebp-Ch]
  int v32; // [esp+5Ch] [ebp-8h]
  int v33; // [esp+60h] [ebp-4h] BYREF

  Src = this;
  this[128] = fopen(FileName, "rb");
  if ( !*((_DWORD *)Src + 128) )
  {
    LOG_ERR("'%s' File open failed at CConfig::Open", FileName);
    return 0;
  }
  std__ios_base__ios_base(&v33);
  v30 = (int)Src + 520;
  *((_DWORD *)Src + 129) = 1;
  while ( 1 )
  {
    v32 = CConfig::GetToken((char *)Src);
    v22 = v32;
    if ( !v32 )
      break;
    if ( v22 == 1 )
    {
      String2 = Strdup((const char *)Src);
      v32 = CConfig::GetToken((char *)Src);
      if ( v32 != 4 )
        goto LABEL_33;
      v32 = CConfig::GetToken((char *)Src);
      std__ios_base__ios_base(&v29);
      if ( v32 == 1 || v32 == 2 )
      {
        v28 = (lisp::_string *)operator_new(8u);
        if ( v28 )
        {
          v5 = Strdup((const char *)Src);
          lisp::_string::_string(v28, v5);
          v21 = v6;
        }
        else
        {
          v21 = 0;
        }
        v17 = v4;
        unknown_libname_20(v21);
        lisp::var::operator=(v17);
      }
      else
      {
        if ( v32 != 7 )
          goto LABEL_33;
        v17 = v3;
        CConfig::GetList(Src, &v17);
        lisp::var::operator=(v17);
        if ( (unsigned __int8)sub_40BD20(&v29) )
        {
          v32 = sub_40C8D0(&v29);
          v17 = v7;
          std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
            &v17,
            &v29);
          free_var(v17);
LABEL_33:
          LOG_ERR("Invalid format %s(%d) at CConfig::Open", FileName, *((_DWORD *)Src + 129));
          CMemory::_free(String2);
          goto LABEL_34;
        }
      }
      v8 = CConfig::Find((CConfig *)Src, (lisp::var *)v27, String2);
      if ( (unsigned __int8)sub_402380(v8) )
      {
        v26 = operator_new(0xCu);
        if ( v26 )
        {
          v25 = operator_new(0xCu);
          if ( v25 )
          {
            v24 = (lisp::_string *)operator_new(8u);
            if ( v24 )
            {
              lisp::_string::_string(v24, String2);
              v20 = v12;
            }
            else
            {
              v20 = 0;
            }
            v17 = v11;
            std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
              &v17,
              &v29);
            v15 = v13;
            unknown_libname_20(v20);
            v19 = lisp::_cons::_cons(v25, v15, (int)v17);
          }
          else
          {
            v19 = 0;
          }
          v17 = v10;
          std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
            &v17,
            &dword_4E1108);
          v16 = v14;
          unknown_libname_20(v19);
          v18 = lisp::_cons::_cons(v26, v16, (int)v17);
        }
        else
        {
          v18 = 0;
        }
        v17 = v9;
        unknown_libname_20(v18);
        lisp::var::operator=(v17);
        v30 = sub_40BCC0(v30);
      }
      else
      {
        LOG_ERR("Duplicate key %s(%d) at CConfig::Open", FileName, *((_DWORD *)Src + 129));
        CMemory::_free(String2);
        std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
          &v17,
          &v29);
        free_var(v17);
      }
LABEL_34:
      while ( v32 != 3 && v32 )
        v32 = CConfig::GetToken((char *)Src);
    }
    else if ( v22 != 3 )
    {
      LOG_ERR("Invalid format %s(%d) at CConfig::Open", FileName, *((_DWORD *)Src + 129));
    }
  }
  fclose(*((FILE **)Src + 128));
  *((_DWORD *)Src + 128) = 0;
  return 1;
}
// 40C694: variable 'v6' is possibly undefined
// 40C6A0: variable 'v4' is possibly undefined
// 40C6BC: variable 'v3' is possibly undefined
// 40C6E8: variable 'v7' is possibly undefined
// 40C773: variable 'v12' is possibly undefined
// 40C77F: variable 'v11' is possibly undefined
// 40C78B: variable 'v13' is possibly undefined
// 40C7AB: variable 'v10' is possibly undefined
// 40C7B8: variable 'v14' is possibly undefined
// 40C7D8: variable 'v9' is possibly undefined
// 40BCC0: using guessed type int __thiscall sub_40BCC0(_DWORD);
// 40BD20: using guessed type int __thiscall sub_40BD20(_DWORD);
// 40C8D0: using guessed type int __thiscall sub_40C8D0(_DWORD);
// 4323F0: using guessed type _DWORD __stdcall lisp::var::operator=(_DWORD);
// 446FD0: using guessed type _DWORD __stdcall unknown_libname_20(_DWORD);

//----- (0040C8D0) --------------------------------------------------------
int __thiscall sub_40C8D0(_DWORD *this)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD *))(*(_DWORD *)*this + 4))(*this, this);
}

//----- (0040C8F0) --------------------------------------------------------
const char *__thiscall CConfig::Get(CConfig *this, const char *key)
{
  lisp::var *v2; // eax
  _DWORD *v3; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  v2 = CConfig::Find(this, (lisp::var *)&v5, key);
  v3 = (_DWORD *)sub_40BCC0(v2);
  return (const char *)sub_402360(v3);
}
// 40BCC0: using guessed type int __thiscall sub_40BCC0(_DWORD);

//----- (0040C920) --------------------------------------------------------
const char *__thiscall CConfig::Get(CConfig *this, const char *key, const char *defaultValue)
{
  _DWORD *v4; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  CConfig::Find(this, (lisp::var *)&v5, key);
  if ( (unsigned __int8)sub_402380(&v5) )
    return defaultValue;
  v4 = (_DWORD *)sub_40BCC0(&v5);
  return (const char *)sub_402360(v4);
}
// 40BCC0: using guessed type int __thiscall sub_40BCC0(_DWORD);

//----- (0040C970) --------------------------------------------------------
int __thiscall sub_40C970(CConfig *this, char *String2)
{
  lisp::var *v2; // eax
  _DWORD *v3; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  v2 = CConfig::Find(this, (lisp::var *)&v5, String2);
  v3 = (_DWORD *)sub_40BCC0(v2);
  return sub_40C8D0(v3);
}
// 40BCC0: using guessed type int __thiscall sub_40BCC0(_DWORD);

//----- (0040C9A0) --------------------------------------------------------
int __thiscall CConfig::GetInt(CConfig *this, char *String2, int a3)
{
  _DWORD *v4; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  CConfig::Find(this, (lisp::var *)&v5, String2);
  if ( (unsigned __int8)sub_402380(&v5) )
    return a3;
  v4 = (_DWORD *)sub_40BCC0(&v5);
  return sub_40C8D0(v4);
}
// 40BCC0: using guessed type int __thiscall sub_40BCC0(_DWORD);

//----- (0040C9F0) --------------------------------------------------------
int __cdecl CConfig::GetTimeStamp()
{
  int result; // eax
  HMODULE v1; // [esp+4h] [ebp-8h]
  _DWORD *v2; // [esp+8h] [ebp-4h]

  v1 = GetModuleHandleA(0);
  if ( !v1 )
    return 0;
  if ( *(_WORD *)v1 != 23117 )
    return 0;
  v2 = (_DWORD *)((char *)v1 + *((_DWORD *)v1 + 15));
  if ( *v2 == 17744 )
    result = v2[2];
  else
    result = 0;
  return result;
}

//----- (0040CA50) --------------------------------------------------------
int __thiscall CDBPacket::OnIOCallback(CIOBuffer **this, int a2, int a3, int a4)
{
  CDBSocket::Process(a3);
  CIOBuffer::Release(this[4]);
  return CMemoryPool_CDBPacket::_Free(this);
}
// 40CD90: using guessed type _DWORD __cdecl sub_40CD90(_DWORD);
// 40DD70: using guessed type _DWORD __cdecl sub_40DD70(_DWORD);

//----- (0040CA80) --------------------------------------------------------
_DWORD *__thiscall CDBSocket::CDBSocket(_DWORD *this)
{
  CIOSocket::CIOSocket(0);
  *this = &off_4B4CEC;
  CIOObject::AddRef(this);
  return this;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 424120: using guessed type _DWORD __stdcall CIOSocket::CIOSocket(_DWORD);
// 4B4CEC: using guessed type int (__stdcall *off_4B4CEC)(int);

//----- (0040CAB0) --------------------------------------------------------
void *__thiscall CDBSocket::_scalar_deleting_destructor_(void *this, char a2)
{
  CDBSocket::_CDBSocket(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 40CAE0: using guessed type int __thiscall CDBSocket::_CDBSocket(_DWORD);

//----- (0040CAE0) --------------------------------------------------------
int __thiscall CDBSocket::_CDBSocket(_DWORD *this)
{
  *this = &off_4B4CEC;
  return CIOSocket::_CIOSocket(this, this);
}
// 4241F0: using guessed type int __thiscall CIOSocket::_CIOSocket(_DWORD, _DWORD);
// 4B4CEC: using guessed type int (__stdcall *off_4B4CEC)(int);

//----- (0040CB00) --------------------------------------------------------
int CDBSocket::Start()
{
  const char *v0; // eax
  const char *v1; // eax
  struct hostent *v3; // [esp+0h] [ebp-1Ch]
  struct sockaddr name; // [esp+4h] [ebp-18h] BYREF
  int v5; // [esp+14h] [ebp-8h]
  SOCKET s; // [esp+18h] [ebp-4h]

  v5 = dword_4D9830;
  s = socket(2, 1, 0);
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_WORD *)name.sa_data = 0;
  bind(s, &name, 16);
  name.sa_family = 2;
  v0 = (const char *)sub_4012D0(&unk_4E11B0);
  *(_DWORD *)&name.sa_data[2] = inet_addr(v0);
  if ( *(_DWORD *)&name.sa_data[2] == -1 )
  {
    v1 = (const char *)sub_4012D0(&unk_4E11B0);
    v3 = gethostbyname(v1);
    if ( !v3 )
      goto LABEL_7;
    memcpy(&name.sa_data[2], *(const void **)v3->h_addr_list, v3->h_length);
  }
  *(_WORD *)name.sa_data = htons(dword_4E116C);
  if ( connect(s, &name, 16) != -1 )
  {
    dword_4DA7C8 = s;
    hObject = CreateEventA(0, 1, 0, 0);
    CIOSocket::Initialize((CIOSocket *)&unk_4DA7B8);
    WaitForSingleObject(hObject, 0xFFFFFFFF);
    hObject = 0;
    CloseHandle(0);
    return dword_4DA7AC;
  }
  LOG_ERR("Can't connect to DB Server");
LABEL_7:
  closesocket(s);
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;
// 4DA7AC: using guessed type int dword_4DA7AC;
// 4DA7C8: using guessed type int dword_4DA7C8;

//----- (0040CC40) --------------------------------------------------------
void CDBSocket::Stop()
{
  if ( dword_4DA7AC )
  {
    dword_4DA7AC = 0;
    hObject = CreateEventA(0, 1, 0, 0);
    CDBSocket::Write(32, &Src);
    WaitForSingleObject(hObject, 0xFFFFFFFF);
    CloseHandle(hObject);
    hObject = 0;
  }
}
// 40DC80: using guessed type _DWORD CDBSocket::Write(char, ...);
// 4DA7AC: using guessed type int dword_4DA7AC;

//----- (0040CCA0) --------------------------------------------------------
BOOL CDBSocket::OnClose()
{
  if ( !dword_4DA7AC )
    return SetEvent(hObject);
  dword_4DA7AC = 0;
  LOG_ERR("Connection closed from DB Server");
  return PostMessageA(hWnd, 0x111u, 0x8009u, 0);
}
// 4DA7AC: using guessed type int dword_4DA7AC;

//----- (0040CD00) --------------------------------------------------------
void __thiscall CDBSocket::OnRead(int this)
{
  int dwNumberOfBytesTransferred; // [esp+4h] [ebp-14h]
  CIOObject *v3; // [esp+8h] [ebp-10h]
  unsigned int v4; // [esp+Ch] [ebp-Ch]
  unsigned __int16 *v5; // [esp+10h] [ebp-8h]
  unsigned int Size; // [esp+14h] [ebp-4h]

  Size = *(_DWORD *)(*(_DWORD *)(this + 92) + 8000);
  v5 = *(unsigned __int16 **)(this + 92);
  while ( 1 )
  {
    dwNumberOfBytesTransferred = (int)v5;
    if ( Size < 2 )
      break;
    v4 = *v5;
    if ( Size < v4 )
      break;
    Size -= v4;
    v5 = (unsigned __int16 *)((char *)v5 + v4);
    v3 = (CIOObject *)CMemoryPool_CDBPacket::_Alloc();
    *((_DWORD *)v3 + 4) = *(_DWORD *)(this + 92);
    CIOBuffer::AddRef(*(volatile LONG **)(this + 92));
    CIOObject::PostObject(v3, dwNumberOfBytesTransferred);
  }
  CIOSocket::Read((CIOSocket *)this, Size);
}
// 40DCF0: using guessed type int sub_40DCF0(void);

//----- (0040CD90) --------------------------------------------------------
void __cdecl CDBSocket::Process(unsigned __int16 *a1)
{
  volatile int *v1; // [esp+Ch] [ebp-178h]
  unsigned __int8 v2; // [esp+13h] [ebp-171h]
  volatile int *v3; // [esp+18h] [ebp-16Ch]
  unsigned __int16 v4; // [esp+1Ch] [ebp-168h]
  unsigned __int8 v5; // [esp+23h] [ebp-161h]
  volatile int *v6; // [esp+28h] [ebp-15Ch]
  char *v7; // [esp+38h] [ebp-14Ch]
  unsigned __int8 v8; // [esp+3Fh] [ebp-145h]
  volatile int *v9; // [esp+40h] [ebp-144h]
  char *v10; // [esp+48h] [ebp-13Ch]
  unsigned __int8 v11; // [esp+4Fh] [ebp-135h]
  volatile int *v12; // [esp+50h] [ebp-134h]
  char v13; // [esp+5Fh] [ebp-125h]
  char v14; // [esp+67h] [ebp-11Dh]
  unsigned __int8 v15; // [esp+6Fh] [ebp-115h]
  volatile int *v16; // [esp+70h] [ebp-114h]
  unsigned __int8 v17; // [esp+7Bh] [ebp-109h]
  volatile int *v18; // [esp+7Ch] [ebp-108h]
  unsigned __int8 v19; // [esp+83h] [ebp-101h]
  CIOObject *v20; // [esp+88h] [ebp-FCh]
  volatile int *v21; // [esp+90h] [ebp-F4h]
  unsigned __int8 v22; // [esp+97h] [ebp-EDh]
  char v23; // [esp+9Fh] [ebp-E5h]
  volatile int *v24; // [esp+A0h] [ebp-E4h]
  unsigned __int8 v25; // [esp+A6h] [ebp-DEh]
  unsigned __int8 v26; // [esp+A7h] [ebp-DDh]
  volatile int *v27; // [esp+ACh] [ebp-D8h]
  unsigned __int8 v28; // [esp+B3h] [ebp-D1h]
  volatile int *v29; // [esp+B8h] [ebp-CCh]
  unsigned __int8 v30; // [esp+BFh] [ebp-C5h]
  int v31; // [esp+C0h] [ebp-C4h]
  unsigned __int8 v32; // [esp+C7h] [ebp-BDh]
  int v33; // [esp+C8h] [ebp-BCh]
  int v34; // [esp+CCh] [ebp-B8h]
  int v35; // [esp+D0h] [ebp-B4h]
  volatile int *v36; // [esp+D4h] [ebp-B0h]
  unsigned __int8 v37; // [esp+DBh] [ebp-A9h]
  int v38; // [esp+DCh] [ebp-A8h]
  volatile int *v39; // [esp+E4h] [ebp-A0h]
  int v40; // [esp+F0h] [ebp-94h]
  volatile int *v41; // [esp+F4h] [ebp-90h]
  CIOObject *v42; // [esp+FCh] [ebp-88h]
  char *Source; // [esp+100h] [ebp-84h]
  unsigned __int8 v44; // [esp+107h] [ebp-7Dh]
  int v45; // [esp+108h] [ebp-7Ch]
  volatile int *v46; // [esp+118h] [ebp-6Ch]
  int v47; // [esp+11Ch] [ebp-68h]
  volatile int *v48; // [esp+120h] [ebp-64h]
  int v49; // [esp+128h] [ebp-5Ch]
  int v50; // [esp+12Ch] [ebp-58h]
  volatile int *v51; // [esp+130h] [ebp-54h]
  unsigned __int8 v52; // [esp+13Bh] [ebp-49h]
  volatile int *v53; // [esp+13Ch] [ebp-48h]
  volatile int *v54; // [esp+144h] [ebp-40h]
  unsigned __int8 v55; // [esp+14Bh] [ebp-39h]
  volatile int *v56; // [esp+150h] [ebp-34h]
  unsigned __int8 v57; // [esp+157h] [ebp-2Dh]
  volatile int *v58; // [esp+15Ch] [ebp-28h]
  unsigned __int8 v59; // [esp+163h] [ebp-21h]
  volatile int *v60; // [esp+168h] [ebp-1Ch]
  unsigned __int16 v61; // [esp+16Ch] [ebp-18h]
  unsigned __int8 v62; // [esp+171h] [ebp-13h]
  unsigned __int8 v63; // [esp+172h] [ebp-12h]
  unsigned __int8 v64; // [esp+173h] [ebp-11h]
  int v65; // [esp+174h] [ebp-10h]
  int v66; // [esp+178h] [ebp-Ch]
  void *Src; // [esp+17Ch] [ebp-8h]
  void *Srca; // [esp+17Ch] [ebp-8h]
  void *Srcb; // [esp+17Ch] [ebp-8h]
  void *Srcc; // [esp+17Ch] [ebp-8h]
  void *Srcd; // [esp+17Ch] [ebp-8h]
  _BYTE *Srce; // [esp+17Ch] [ebp-8h]
  void *Srcl; // [esp+17Ch] [ebp-8h]
  char *Srcm; // [esp+17Ch] [ebp-8h]
  void *Srcf; // [esp+17Ch] [ebp-8h]
  char *Srcg; // [esp+17Ch] [ebp-8h]
  void *Srch; // [esp+17Ch] [ebp-8h]
  void *Srci; // [esp+17Ch] [ebp-8h]
  void *Srcj; // [esp+17Ch] [ebp-8h]
  void *Srck; // [esp+17Ch] [ebp-8h]

  Src = (char *)a1 + 3;
  switch ( *((_BYTE *)a1 + 2) )
  {
    case 0:
      Srca = (void *)ReadPacket(Src, (char)"dbw");
      v60 = (volatile int *)sub_47E800();
      if ( v60 )
      {
        sub_4958F0(Srca, v62, v61);
        if ( CSocket::IsSBit(7) )
          CSocket::Write(v60, 67, "b", 136);
        CIOObject::Release(v60);
      }
      break;
    case 1:
      ReadPacket(Src, (char)"bddddb");
      if ( v64 == 6 )
      {
        if ( v63 == dword_4E35B8 )
        {
          if ( dword_4E10B0 )
          {
            if ( v66 == *(_DWORD *)dword_4E1174 && v65 == dword_4E1178 )
            {
              dword_4DA7AC = 1;
              SetEvent(hObject);
              LOG_NORMAL("DB server version (Version:%d, IID:0x%x)", v64, dword_4E10B0);
              if ( (dword_4E1174[0] & 1) != 0 )
                CDBSocket::Write(56, &::Src);
            }
            else
            {
              LOG_ERR(
                "System or Event is diffrent with DBSvr. Sys(M:%d, D:%d), Ev(M:%d, D:%d)",
                *(_DWORD *)dword_4E1174,
                v66,
                dword_4E1178,
                v65);
              CIOSocket::Close((CIOSocket *)&unk_4DA7B8);
            }
          }
          else
          {
            LOG_ERR("can't get Item ID");
            CIOSocket::Close((CIOSocket *)&unk_4DA7B8);
          }
        }
        else
        {
          LOG_ERR("Country Code is different (DBSvr:%d, MainSvr:%d)", v63, dword_4E35B8);
          CIOSocket::Close((CIOSocket *)&unk_4DA7B8);
        }
      }
      else
      {
        LOG_ERR("DB version is different (DBSvr:%d, MainSvr:%d)", v64, 6);
        CIOSocket::Close((CIOSocket *)&unk_4DA7B8);
      }
      break;
    case 2:
      Srcb = (void *)ReadPacket(Src, (char)"db");
      v58 = (volatile int *)sub_47E800();
      if ( v58 )
      {
        sub_4959E0(v59, Srcb);
        CIOObject::Release(v58);
      }
      break;
    case 3:
      ReadPacket(Src, (char)"db");
      v56 = (volatile int *)sub_47E800();
      if ( v56 )
      {
        sub_495A90(v57);
        CIOObject::Release(v56);
      }
      break;
    case 4:
      Srcc = (void *)ReadPacket(Src, (char)"db");
      v54 = (volatile int *)sub_47E800();
      if ( v54 )
      {
        CSocket::OnDelPlayer(v55, Srcc);
        CIOObject::Release(v54);
      }
      break;
    case 8:
      Srcd = (void *)ReadPacket(Src, (char)"db");
      v53 = (volatile int *)sub_450810();
      if ( v53 )
      {
        CPlayer::OnProcessEvent(v52, Srcd);
        CIOObject::Release((CIOObject *)v53, v53 + 88);
      }
      break;
    case 9:
      ReadPacket(Src, (char)"ddd");
      v51 = (volatile int *)sub_450810();
      if ( v51 )
      {
        v47 = 0;
        v48 = (volatile int *)CPlayer::GetGuild(v51);
        if ( v48 )
        {
          v47 = CGuild::CreateTrialSecedeAnswer(v51, v49, v50);
          CIOObject::Release((CIOObject *)v48, v48 + 10);
        }
        if ( v47 )
          CPlayer::Write(v51, 94, "bb", 0, (unsigned __int8)v47);
        CIOObject::Release((CIOObject *)v51, v51 + 88);
      }
      break;
    case 0xA:
      ReadPacket(Src, (char)"ddd");
      v46 = (volatile int *)sub_450810();
      if ( v46 )
      {
        v45 = CGuild::ConfluxSecedeAnswer(v46);
        if ( v45 )
          CPlayer::Write(v46, 94, "bb", 0, (unsigned __int8)v45);
        CIOObject::Release((CIOObject *)v46, v46 + 88);
      }
      break;
    case 0xB:
      ReadPacket(Src, (char)"dbs");
      v42 = (CIOObject *)sub_450810();
      if ( v42 )
      {
        v41 = (volatile int *)CPlayer::GetGuild(v42);
        if ( v41 )
        {
          v40 = CGuild::CreateGuildNameAnswer((int)v42, v44, Source);
          CIOObject::Release((CIOObject *)v41, v41 + 10);
          if ( v40 )
            CPlayer::Write(v42, 94, "bb", 0, (unsigned __int8)v40);
        }
        else
        {
          LOG_ERR("D2S_GUILD_SAMENAMECHECK guild point error (pid:%d)", *((_DWORD *)v42 + 113));
        }
        CIOObject::Release(v42, (volatile int *)v42 + 88);
      }
      break;
    case 0xC:
      ReadPacket(Src, (char)"dd");
      CGuild::DelPlayer();
      break;
    case 0xD:
      ReadPacket(Src, (char)"dbbss");
      v29 = (volatile int *)sub_47E800();
      if ( v29 )
      {
        sub_495F90(v32, v30, v33, v31);
        CIOObject::Release(v29);
      }
      break;
    case 0xE:
      CAuthSocket::Write(13, "m", (char *)a1 + 3, *a1 - 3);
      break;
    case 0xF:
      ReadPacket(Src, (char)"db");
      v27 = (volatile int *)sub_47E800();
      if ( v27 )
      {
        sub_496150(v28);
        CIOObject::Release(v27);
      }
      break;
    case 0x10:
      CPlayer::PKBulletinLoad((int)Src);
      break;
    case 0x11:
      Srcl = (void *)ReadPacket(Src, (char)"b");
      CCastle::Load(v26, Srcl);
      break;
    case 0x12:
      Srcm = (char *)ReadPacket(Src, (char)"b");
      CWar::Load(v25, Srcm);
      break;
    case 0x13:
      Srcf = (void *)ReadPacket(Src, (char)"db");
      v24 = (volatile int *)sub_450810();
      if ( v24 )
      {
        if ( v23 )
          CPlayer::Write(v24, 103, "bm", 1, Srcf, 40);
        else
          CPlayer::Write(v24, 103, "b", 0);
        CIOObject::Release((CIOObject *)v24, v24 + 88);
      }
      break;
    case 0x14:
      Srce = (_BYTE *)ReadPacket(Src, (char)"d");
      v39 = (volatile int *)sub_450810();
      if ( v39 )
      {
        CPlayer::Write(v39, 94, "bm", 28, Srce, (char *)a1 + *a1 - Srce);
        CIOObject::Release((CIOObject *)v39, v39 + 88);
      }
      break;
    case 0x15:
      ReadPacket(Src, (char)"dbdd");
      v36 = (volatile int *)sub_416230();
      if ( v36 )
      {
        CGuild::OnSetStandard(v34, v37, v35, v38);
        CIOObject::Release((CIOObject *)v36, v36 + 10);
      }
      break;
    case 0x16:
      Srcg = (char *)ReadPacket(Src, (char)"db");
      v21 = (volatile int *)sub_450810();
      if ( v21 )
      {
        if ( v22 )
          CPlayer::OnGetMyTelPt((void *)v21, v22, Srcg);
        CIOObject::Release((CIOObject *)v21, v21 + 88);
      }
      break;
    case 0x17:
      Srch = (void *)ReadPacket(Src, (char)"db");
      v20 = (CIOObject *)CPlayer::ScanPlayer();
      if ( v20 )
      {
        CPlayer::OnSetMyTelPt(v20, v19, Srch);
        CIOObject::Release(v20, (volatile int *)v20 + 88);
      }
      break;
    case 0x18:
      Srci = (void *)ReadPacket(Src, (char)"db");
      if ( (dword_4E1174[0] & 0x40) != 0 )
      {
        v18 = (volatile int *)CPlayer::ScanPlayer();
        if ( v18 )
        {
          CPlayer::FRDProcess(v17, Srci, (int)Srci);
          CIOObject::Release((CIOObject *)v18, v18 + 88);
        }
      }
      break;
    case 0x19:
      Srcj = (void *)ReadPacket(Src, (char)"db");
      if ( (*(_WORD *)dword_4E1174 & 0x400) != 0 )
      {
        v16 = (volatile int *)CPlayer::ScanPlayer();
        if ( v16 )
        {
          CPlayer::MAILProcess(v15, Srcj, (int)Srcj);
          CIOObject::Release((CIOObject *)v16, v16 + 88);
        }
        else if ( v15 == 1 )
        {
          ReadPacket(Srcj, (char)"dbb");
          if ( !v13 && v14 != 3 )
            CDBSocket::Write(30, "dbddb");
        }
        else if ( v15 == 11 )
        {
          ReadPacket(Srcj, (char)"dd");
          CDBSocket::Write(30, "dbddbbddwbd");
        }
      }
      break;
    case 0x1A:
      ReadPacket(Src, (char)"dbs");
      v12 = (volatile int *)sub_450810();
      if ( v12 )
      {
        CPlayer::OnChangePlayerName((int)v12, v11, v10);
        CIOObject::Release((CIOObject *)v12, v12 + 88);
      }
      break;
    case 0x1B:
      ReadPacket(Src, (char)"dbs");
      v9 = (volatile int *)sub_450810();
      if ( v9 )
      {
        CPlayer::OnChangeGuildName((int)v9, v8, v7);
        CIOObject::Release((CIOObject *)v9, v9 + 88);
      }
      break;
    case 0x1C:
      ReadPacket(Src, (char)"ddd");
      v6 = (volatile int *)CPlayer::ScanPlayer();
      if ( v6 )
        CIOObject::Release((CIOObject *)v6, v6 + 88);
      break;
    case 0x1D:
      Srck = (void *)ReadPacket(Src, (char)"dbw");
      v3 = (volatile int *)sub_47E800();
      if ( v3 )
      {
        CSocket::Write(v3, 25, "bm", v5, Srck, v4);
        CIOObject::Release(v3);
      }
      break;
    case 0x1E:
      ReadPacket(Src, (char)"db");
      v1 = (volatile int *)sub_47E800();
      if ( v1 )
      {
        CSocket::Write(v1, 26, "b", v2);
        if ( !v2 )
          CSocket::Write(v1, 45, "b", 9);
        CIOObject::Release(v1);
      }
      break;
    default:
      LOG_ERR("invalid packet type at CDBSocket::Process Type(%d)", *((unsigned __int8 *)a1 + 2));
      break;
  }
}
// 40CDFA: variable 'v64' is possibly undefined
// 40CE26: variable 'v63' is possibly undefined
// 40CE88: variable 'v66' is possibly undefined
// 40CE93: variable 'v65' is possibly undefined
// 40CF51: variable 'v62' is possibly undefined
// 40CF4C: variable 'v61' is possibly undefined
// 40CFCA: variable 'v59' is possibly undefined
// 40D012: variable 'v57' is possibly undefined
// 40D061: variable 'v55' is possibly undefined
// 40D0B0: variable 'v52' is possibly undefined
// 40D128: variable 'v49' is possibly undefined
// 40D128: variable 'v50' is possibly undefined
// 40D25F: variable 'v44' is possibly undefined
// 40D26D: variable 'Source' is possibly undefined
// 40D416: variable 'v34' is possibly undefined
// 40D408: variable 'v37' is possibly undefined
// 40D416: variable 'v35' is possibly undefined
// 40D416: variable 'v38' is possibly undefined
// 40D4A4: variable 'v32' is possibly undefined
// 40D49C: variable 'v30' is possibly undefined
// 40D4AB: variable 'v33' is possibly undefined
// 40D4AB: variable 'v31' is possibly undefined
// 40D529: variable 'v28' is possibly undefined
// 40D57C: variable 'v26' is possibly undefined
// 40D5B0: variable 'v25' is possibly undefined
// 40D607: variable 'v23' is possibly undefined
// 40D6A7: variable 'v22' is possibly undefined
// 40D728: variable 'v19' is possibly undefined
// 40D7AF: variable 'v17' is possibly undefined
// 40D838: variable 'v15' is possibly undefined
// 40D8B6: variable 'v13' is possibly undefined
// 40D8B8: variable 'v14' is possibly undefined
// 40D99B: variable 'v11' is possibly undefined
// 40D9A2: variable 'v10' is possibly undefined
// 40DA16: variable 'v8' is possibly undefined
// 40DA1D: variable 'v7' is possibly undefined
// 40DB18: variable 'v5' is possibly undefined
// 40DB0C: variable 'v4' is possibly undefined
// 40DB86: variable 'v2' is possibly undefined
// 40DC60: using guessed type _DWORD __stdcall sub_40DC60(_DWORD);
// 40DC80: using guessed type _DWORD CDBSocket::Write(char, ...);
// 412EF0: using guessed type _DWORD __stdcall sub_412EF0(_DWORD, _DWORD, _DWORD);
// 415480: using guessed type _DWORD __stdcall sub_415480(_DWORD, _DWORD, _DWORD, _DWORD);
// 419B30: using guessed type _DWORD __cdecl sub_419B30(_DWORD, _DWORD);
// 41C490: using guessed type _DWORD __cdecl sub_41C490(_DWORD, char *packet);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AAD0: using guessed type int __thiscall CPlayer::GetGuild(_DWORD);
// 4948C0: using guessed type _DWORD sub_4948C0(_DWORD, char, ...);
// 4958F0: using guessed type _DWORD __stdcall sub_4958F0(_DWORD, _DWORD, _DWORD);
// 495A90: using guessed type _DWORD __stdcall sub_495A90(_DWORD);
// 495E50: using guessed type _DWORD __stdcall sub_495E50(_DWORD, _DWORD);
// 495F90: using guessed type _DWORD __stdcall sub_495F90(_DWORD, _DWORD, _DWORD, _DWORD);
// 496150: using guessed type _DWORD __stdcall sub_496150(_DWORD);
// 4DA7AC: using guessed type int dword_4DA7AC;
// 4E1178: using guessed type int dword_4E1178;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0040DC60) --------------------------------------------------------
int __thiscall CSocket::IsSBit(_DWORD *this, char a2)
{
  return this[27] & (1 << a2);
}

//----- (0040DC80) --------------------------------------------------------
void CDBSocket::Write(char a1, ...)
{
  CIOBuffer *v1; // [esp+8h] [ebp-8h]
  va_list va; // [esp+1Ch] [ebp+Ch] BYREF

  va_start(va, a1);
  v1 = CIOBuffer::Alloc();
  *((_BYTE *)v1 + 2) = a1;
  *(_WORD *)v1 = WritePacket((char *)v1 + 3, (int)va) - (_WORD)v1;
  *((_DWORD *)v1 + 2000) = *(unsigned __int16 *)v1;
  CIOSocket::Write((CIOSocket *)&unk_4DA7B8, v1);
}

//----- (0040DCF0) --------------------------------------------------------
CDBPacket *CMemoryPool_CDBPacket::_Alloc()
{
  CDBPacket *result; // eax
  CDBPacket *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)dword_4DA828);
  v3 = dword_4DA824;
  if ( dword_4DA824 )
  {
    dword_4DA824 = *(_DWORD *)(dword_4DA824 + 16);
    CIOSpinLock::Leave(dword_4DA828);
    result = (CDBPacket *)v3;
  }
  else
  {
    CIOSpinLock::Leave(dword_4DA828);
    v2 = operator_new(0x14u);
    if ( v2 )
      v1 = CDBPacket::CDBPacket((CDBPacket *)v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 4DA828: using guessed type int dword_4DA828[6198];

//----- (0040DD70) --------------------------------------------------------
LONG __cdecl CMemoryPool_CDBPacket::_Free(int a1)
{
  CIOSpinLock::Enter((CIOSpinLock *)dword_4DA828);
  *(_DWORD *)(a1 + 16) = dword_4DA824;
  dword_4DA824 = a1;
  return CIOSpinLock::Leave(dword_4DA828);
}
// 4DA828: using guessed type int dword_4DA828[6198];

//----- (0040DDA0) --------------------------------------------------------
CDBPacket *__thiscall CDBPacket::CDBPacket(CDBPacket *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B4EE8;
  return this;
}
// 4B4EE8: using guessed type int (__stdcall *off_4B4EE8)(int);

//----- (0040DDC0) --------------------------------------------------------
void *__thiscall CDBPacket::_scalar_deleting_destructor_(void *this, char a2)
{
  CIOSocket::CIOTimerInstance::_CIOTimerInstance(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0040DDF0) --------------------------------------------------------
void __thiscall CMemoryPool_CDBPacket::_CPool::_CPool(int *this)
{
  CMemoryPool_CDBPacket::_FreeAll();
}

//----- (0040DE00) --------------------------------------------------------
LONG CMemoryPool_CDBPacket::_FreeAll()
{
  void (__thiscall ***v1)(_DWORD, int); // [esp+Ch] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)dword_4DA828);
  while ( 1 )
  {
    v1 = (void (__thiscall ***)(_DWORD, int))dword_4DA824;
    if ( !dword_4DA824 )
      break;
    dword_4DA824 = *(_DWORD *)(dword_4DA824 + 16);
    if ( v1 )
      (**v1)(v1, 1);
  }
  return CIOSpinLock::Leave(dword_4DA828);
}

//----- (0040DE70) --------------------------------------------------------
_DWORD *__thiscall CFindPath::CFindPath(_DWORD *this)
{
  *this = 0;
  this[1] = 0;
  this[2] = 0;
  this[3] = 0;
  this[4] = &unk_4E0908;
  this[6] = -1;
  this[5] = -1;
  this[8] = -1;
  this[7] = -1;
  this[9] = 0;
  return this;
}

//----- (0040DEF0) --------------------------------------------------------
int __thiscall CFindPath::_CFindPath(void *this)
{
  return CFindPath::FreeNode(this, this);
}
// 40E220: using guessed type int __thiscall sub_40E220(_DWORD, _DWORD);

//----- (0040DF10) --------------------------------------------------------
int __thiscall CFindPath::FindPath(void *this, int *a2, int *a3)
{
  int v4; // ecx
  int v5; // edx
  int v6; // edx
  _DWORD *v7; // eax
  int v8; // ecx
  int *v10; // [esp+0h] [ebp-20h]
  _DWORD *v11; // [esp+4h] [ebp-1Ch]
  int v12; // [esp+8h] [ebp-18h] BYREF
  int v13; // [esp+Ch] [ebp-14h]
  int v14; // [esp+10h] [ebp-10h]
  _DWORD *v15; // [esp+14h] [ebp-Ch]
  _DWORD *v16; // [esp+18h] [ebp-8h]
  int v17; // [esp+1Ch] [ebp-4h]

  if ( *a2 == *a3 && a2[1] == a3[1] || !CSMap::IsValidTile(a3, 0x20000) )
    return 0;
  CFindPath::FreeNode(this, this);
  v4 = a2[1];
  v10[5] = *a2;
  v10[6] = v4;
  v5 = a3[1];
  v10[7] = *a3;
  v10[8] = v5;
  v16 = (_DWORD *)CMemoryPool_CFindPath::NODE::_Alloc();
  *v16 = 0;
  v16[2] = 0;
  v16[3] = CFindPath::CalcH(v10 + 5);
  v16[1] = v16[3];
  v16[4] = 0;
  v6 = v10[6];
  v7 = v16;
  v16[5] = v10[5];
  v7[6] = v6;
  v16[15] = 0;
  v16[16] = -1;
  v10[2] = (int)v16;
  v10[3] = 0;
  v15 = v16;
  v17 = 0;
  while ( 1 )
  {
    ++v17;
    v8 = v16[6];
    v12 = v16[5];
    v13 = v8;
    v14 = sub_40E130(v10 + 7, &v12);
    if ( v14 <= v10[9] || v14 <= 2304 )
    {
      if ( CSMap::IsMoveTile(*v10, (int)&v12, v10[7] - v12, v10[8] - v13, 0x20000) )
        break;
    }
    if ( v16[3] <= v15[3] )
      v15 = v16;
    if ( v17 > 50 )
      goto LABEL_16;
    sub_40E270(v16);
    v16 = (_DWORD *)CFindPath::GetBestNode(v10);
    if ( !v16 )
      goto LABEL_14;
  }
  v15 = v16;
LABEL_16:
  if ( !v15 )
    EBREAK();
  v16 = 0;
  while ( 1 )
  {
    v11 = (_DWORD *)*v15;
    if ( !*v15 )
      break;
    *v15 = v16;
    v16 = v15;
    v15 = v11;
  }
  if ( !v16 )
  {
LABEL_14:
    CFindPath::FreeNode(v10, v10);
    return 0;
  }
  v10[4] = (int)v16;
  return 1;
}
// 40DF65: variable 'v10' is possibly undefined
// 40E130: using guessed type _DWORD __cdecl sub_40E130(_DWORD, _DWORD);
// 40E170: using guessed type _DWORD __stdcall sub_40E170(_DWORD);
// 40E1E0: using guessed type int __thiscall sub_40E1E0(_DWORD);
// 40E220: using guessed type int __thiscall CFindPath::FreeNode(_DWORD, _DWORD);
// 40E270: using guessed type _DWORD __stdcall sub_40E270(_DWORD);
// 40E650: using guessed type int sub_40E650(void);
// 438130: using guessed type _DWORD __stdcall sub_438130(_DWORD, _DWORD);

//----- (0040E130) --------------------------------------------------------
int __cdecl sub_40E130(_DWORD *a1, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = a1[1] - a2[1];
  return v3 * v3 + (*a1 - *a2) * (*a1 - *a2);
}

//----- (0040E170) --------------------------------------------------------
int __thiscall CFindPath::CalcH(_DWORD *this, _DWORD *a2)
{
  unsigned int v3; // [esp+0h] [ebp-10h]
  unsigned int v5; // [esp+8h] [ebp-8h]
  unsigned int v6; // [esp+Ch] [ebp-4h]

  v5 = abs(this[7] - *a2);
  v6 = abs(this[8] - a2[1]);
  if ( v5 < v6 )
    v3 = v6 << 16;
  else
    v3 = v5 << 16;
  return v6 * v6 + v3 + v5 * v5;
}

//----- (0040E1E0) --------------------------------------------------------
int __thiscall CFindPath::GetBestNode(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this[3];
  if ( !v2 )
    return 0;
  this[3] = *(_DWORD *)(this[3] + 64);
  *(_DWORD *)(v2 + 64) = -1;
  return v2;
}

//----- (0040E220) --------------------------------------------------------
_DWORD *__thiscall CFindPath::FreeNode(_DWORD *this)
{
  _DWORD *result; // eax
  int v3; // [esp+4h] [ebp-4h]

  while ( 1 )
  {
    result = this;
    v3 = this[2];
    if ( !v3 )
      break;
    this[2] = *(_DWORD *)(this[2] + 60);
    CMemoryPool_CFindPath::NODE::_Free(v3);
  }
  this[4] = &unk_4E0908;
  return result;
}
// 40E6C0: using guessed type _DWORD __cdecl sub_40E6C0(_DWORD);

//----- (0040E270) --------------------------------------------------------
int __stdcall sub_40E270(int a1)
{
  CFindPath::LinkChild(a1, 32, 0);
  CFindPath::LinkChild(a1, 32, 32);
  CFindPath::LinkChild(a1, 0, 32);
  CFindPath::LinkChild(a1, -32, 32);
  CFindPath::LinkChild(a1, -32, 0);
  CFindPath::LinkChild(a1, -32, -32);
  CFindPath::LinkChild(a1, 0, -32);
  return CFindPath::LinkChild(a1, 32, -32);
}

//----- (0040E300) --------------------------------------------------------
_DWORD *__thiscall CFindPath::LinkChild(int *this, int a2, int Number, int a4)
{
  _DWORD *result; // eax
  int *v6; // [esp+4h] [ebp-18h]
  int v7; // [esp+8h] [ebp-14h] BYREF
  int v8; // [esp+Ch] [ebp-10h]
  unsigned int v9; // [esp+10h] [ebp-Ch]
  int v10; // [esp+14h] [ebp-8h]
  int *v11; // [esp+18h] [ebp-4h]

  v7 = Number + *(_DWORD *)(a2 + 20);
  v8 = a4 + *(_DWORD *)(a2 + 24);
  v10 = CFindPath::CalcH(this, &v7);
  if ( !v10 || (result = (_DWORD *)CSMap::IsMoveTile(*this, a2 + 20, Number, a4, 0x20000)) != 0 )
  {
    v9 = *(_DWORD *)(a2 + 8) + 0x10000;
    v11 = (int *)CFindPath::CheckList(&v7, v10);
    if ( v11 )
    {
      if ( *(int *)(a2 + 16) >= 8 )
        EBREAK();
      *(_DWORD *)(a2 + 4 * (*(_DWORD *)(a2 + 16))++ + 28) = v11;
      result = (_DWORD *)v9;
      if ( v9 < v11[2] )
      {
        *v11 = a2;
        v11[2] = v9;
        result = v11;
        v11[1] = v10 + v9;
        if ( v11[16] == -1 )
          result = (_DWORD *)CFindPath::Propagation(v11);
      }
    }
    else
    {
      v6 = (int *)CMemoryPool_CFindPath::NODE::_Alloc();
      v6[4] = 0;
      *v6 = a2;
      v6[2] = v9;
      v6[3] = v10;
      v6[1] = v10 + v9;
      v6[5] = v7;
      v6[6] = v8;
      CFindPath::Insert(v6);
      if ( *(int *)(a2 + 16) >= 8 )
        EBREAK();
      *(_DWORD *)(a2 + 4 * *(_DWORD *)(a2 + 16) + 28) = v6;
      result = (_DWORD *)a2;
      ++*(_DWORD *)(a2 + 16);
    }
  }
  return result;
}
// 40E480: using guessed type _DWORD __stdcall sub_40E480(_DWORD, _DWORD);
// 40E4E0: using guessed type _DWORD __stdcall sub_40E4E0(_DWORD);
// 40E5A0: using guessed type _DWORD __stdcall sub_40E5A0(_DWORD);
// 40E650: using guessed type int CMemoryPool_CFindPath::NODE::_Alloc(void);

//----- (0040E480) --------------------------------------------------------
_DWORD *__thiscall CFindPath::CheckList(_DWORD *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  for ( i = (_DWORD *)this[2]; i && i[3] <= a3; i = (_DWORD *)i[15] )
  {
    if ( i[5] == *a2 && i[6] == a2[1] )
      return i;
  }
  return 0;
}

//----- (0040E4E0) --------------------------------------------------------
_DWORD *__stdcall CFindPath::Propagation(_DWORD *a1)
{
  _DWORD *result; // eax
  int i; // [esp+4h] [ebp-10h]
  unsigned int v3; // [esp+8h] [ebp-Ch]
  _DWORD *v4; // [esp+Ch] [ebp-8h]
  _DWORD *v5; // [esp+10h] [ebp-4h]

  v4 = 0;
  while ( 1 )
  {
    v3 = a1[2] + 0x10000;
    for ( i = 0; ; ++i )
    {
      result = a1;
      if ( i >= a1[4] )
        break;
      v5 = (_DWORD *)a1[i + 7];
      if ( v3 < v5[2] )
      {
        v5[2] = v3;
        v5[1] = v5[3] + v3;
        *v5 = a1;
        if ( v5[16] == -1 )
        {
          v5[16] = v4;
          v4 = v5;
        }
      }
    }
    if ( !v4 )
      break;
    a1 = v4;
    v4 = (_DWORD *)v4[16];
    a1[16] = -1;
  }
  return result;
}

//----- (0040E5A0) --------------------------------------------------------
_DWORD *__thiscall CFindPath::Insert(int *this, _DWORD *a2)
{
  _DWORD *result; // eax
  int *i; // [esp+4h] [ebp-10h]
  int *j; // [esp+4h] [ebp-10h]
  int v5; // [esp+8h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-Ch]

  for ( i = this + 2; ; i = (int *)(v5 + 60) )
  {
    v5 = *i;
    if ( !*i || *(_DWORD *)(v5 + 12) >= a2[3] )
      break;
  }
  *i = (int)a2;
  a2[15] = v5;
  for ( j = this + 3; ; j = (int *)(v6 + 64) )
  {
    v6 = *j;
    if ( !*j || *(_DWORD *)(v6 + 4) >= a2[1] )
      break;
  }
  result = a2;
  *j = (int)a2;
  a2[16] = v6;
  return result;
}

//----- (0040E650) --------------------------------------------------------
int CMemoryPool_CFindPath::NODE::_Alloc()
{
  int result; // eax
  int v1; // [esp+0h] [ebp-Ch]
  void *v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4E0904);
  v3 = dword_4E0900;
  if ( dword_4E0900 )
  {
    dword_4E0900 = *(_DWORD *)dword_4E0900;
    CIOSpinLock::Leave(&dword_4E0904);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave(&dword_4E0904);
    v2 = operator_new(0x44u);
    if ( v2 )
      v1 = LocaleUpdate__GetLocaleT(v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E6C0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CFindPath::NODE::_Free(_DWORD *a1)
{
  CIOSpinLock::Enter((CIOSpinLock *)&dword_4E0904);
  *a1 = dword_4E0900;
  dword_4E0900 = (int)a1;
  return CIOSpinLock::Leave(&dword_4E0904);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E6F0) --------------------------------------------------------
_DWORD *__thiscall CFindPath::NODE::NODE(_DWORD *this, int a2, int a3)
{
  this[5] = a2;
  this[6] = a3;
  *this = 0;
  this[3] = 0;
  this[2] = 0;
  this[1] = 0;
  this[4] = 0;
  return this;
}

//----- (0040E750) --------------------------------------------------------
_DWORD *__thiscall CMemoryPool_CAuthPacket::_CPool::CPool(_DWORD *this)
{
  std___Container_base___Container_base(this + 1);
  return this;
}

//----- (0040E770) --------------------------------------------------------
LONG __thiscall CMemoryPool_CFindPath::NODE::_CPool::_CPool(void *this)
{
  LONG result; // eax

  CMemoryPool_CFindPath::NODE::_FreeAll(this);
  return result;
}

//----- (0040E780) --------------------------------------------------------
void __cdecl CMemoryPool_CFindPath::NODE::_FreeAll(void *a1)
{
  void *v1; // [esp+4h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4E0904);
  while ( 1 )
  {
    v1 = (void *)dword_4E0900;
    if ( !dword_4E0900 )
      break;
    dword_4E0900 = *(_DWORD *)dword_4E0900;
    operator_delete(v1);
  }
  CIOSpinLock::Leave(&dword_4E0904);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E7D0) --------------------------------------------------------
_DWORD *__thiscall CGoto::CGoto(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B4F00;
  this[8] = 0;
  memset(this + 9, 0, 0x10u);
  return this;
}
// 4B4F00: using guessed type int (__stdcall *off_4B4F00)(int);

//----- (0040E810) --------------------------------------------------------
void *__thiscall CGoto::_scalar_deleting_destructor_(void *this, char a2)
{
  CGoto::_CGoto(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 40E840: using guessed type int __thiscall sub_40E840(_DWORD);

//----- (0040E840) --------------------------------------------------------
int __thiscall CGoto::_CGoto(_DWORD *this)
{
  *this = &off_4B4F00;
  return CBase::_CBase(this);
}
// 4B4F00: using guessed type int (__stdcall *off_4B4F00)(int);

//----- (0040E860) --------------------------------------------------------
int __cdecl CGoto::FindGoto(char *_Keyval, _DWORD *a2)
{
  int v2; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // ecx
  char v6[4]; // [esp+0h] [ebp-8h] BYREF
  char v7[4]; // [esp+4h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::find(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E094C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7,
    (const char *const *)&_Keyval);
  v2 = sub_430C20(v6);
  if ( (unsigned __int8)unknown_libname_16(v2) )
    return 0;
  v4 = (_DWORD *)(sub_420250(v7) + 4);
  v5 = a2;
  *a2 = *v4;
  v5[1] = v4[1];
  v5[2] = v4[2];
  v5[3] = v4[3];
  return 1;
}
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0040E8D0) --------------------------------------------------------
int __thiscall CGoto::Set(_DWORD *this, int a2, char a3)
{
  lisp::var *v3; // eax
  int v4; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  char v11[4]; // [esp+4h] [ebp-14h] BYREF
  char v12[4]; // [esp+8h] [ebp-10h] BYREF
  char v13[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v14[4]; // [esp+10h] [ebp-8h] BYREF
  char v15[4]; // [esp+14h] [ebp-4h] BYREF

  if ( !a2 )
  {
    v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v15);
    v4 = sub_40C8D0(v3);
    this[8] = GetStr(v4);
    if ( !this[8] )
      return 1;
    v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v14);
    this[9] = sub_40C8D0(v6);
    v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v13);
    this[10] = sub_40C8D0(v7);
    v8 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v12);
    this[11] = sub_40C8D0(v8);
    v9 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v11);
    this[12] = sub_40C8D0(v9);
  }
  return 1;
}

//----- (0040E990) --------------------------------------------------------
int __thiscall CGoto::OnLoad(_DWORD *this)
{
  const std::pair<char const * const,CItem *> *v2; // eax
  char v4[8]; // [esp+4h] [ebp-1Ch] BYREF

  if ( this[8] )
  {
    v2 = (const std::pair<char const * const,CItem *> *)sub_40F000(this + 8, this + 9);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::insert(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E094C,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v4,
      v2);
    this[8] = 0;
    memset(this + 9, 0, 0x10u);
  }
  return 1;
}
// 40F000: using guessed type _DWORD __stdcall sub_40F000(_DWORD, _DWORD);

//----- (0040EA00) --------------------------------------------------------
_DWORD *__thiscall CPortal::CPortal(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B4F48;
  memset(this + 8, 0, 0x24u);
  this[17] = 0;
  return this;
}
// 4B4F48: using guessed type int (__stdcall *off_4B4F48)(int);

//----- (0040EA40) --------------------------------------------------------
void *__thiscall CPortal::_scalar_deleting_destructor_(void *this, char a2)
{
  CPortal::_CPortal(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 40EA70: using guessed type int __thiscall sub_40EA70(_DWORD);

//----- (0040EA70) --------------------------------------------------------
int __thiscall CPortal::_CPortal(_DWORD *this)
{
  *this = &off_4B4F48;
  return CBase::_CBase(this);
}
// 4B4F48: using guessed type int (__stdcall *off_4B4F48)(int);

//----- (0040EA90) --------------------------------------------------------
int __thiscall CPortal::Set(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  _DWORD *v14; // [esp-4h] [ebp-38h] BYREF
  int v15; // [esp+0h] [ebp-34h]
  _DWORD *v16; // [esp+4h] [ebp-30h]
  char v17[4]; // [esp+Ch] [ebp-28h] BYREF
  char v18[4]; // [esp+10h] [ebp-24h] BYREF
  char v19[4]; // [esp+14h] [ebp-20h] BYREF
  char v20[4]; // [esp+18h] [ebp-1Ch] BYREF
  char v21[4]; // [esp+1Ch] [ebp-18h] BYREF
  char v22[4]; // [esp+20h] [ebp-14h] BYREF
  char v23[4]; // [esp+24h] [ebp-10h] BYREF
  char v24[4]; // [esp+28h] [ebp-Ch] BYREF
  char v25[4]; // [esp+2Ch] [ebp-8h] BYREF
  char v26[4]; // [esp+30h] [ebp-4h] BYREF

  v16 = this;
  v15 = a2;
  if ( a2 == 103 )
  {
    v4 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v25);
    v16[8] = sub_40C8D0(v4);
    v5 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v24);
    v16[9] = sub_40C8D0(v5);
    v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v23);
    v16[10] = sub_40C8D0(v6);
    v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v22);
    v16[11] = sub_40C8D0(v7);
    v8 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v21);
    v16[12] = sub_40C8D0(v8);
  }
  else if ( v15 == 104 )
  {
    v9 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v20);
    v16[13] = sub_40C8D0(v9);
    v10 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v19);
    v16[14] = sub_40C8D0(v10);
    v11 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v18);
    v16[15] = sub_40C8D0(v11);
    v12 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v17);
    v16[16] = sub_40C8D0(v12);
  }
  else
  {
    if ( v15 != 109 )
    {
      v14 = this;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v14,
        &a3);
      return CBase::Set(v16, a2, (char)v14);
    }
    while ( !(unsigned __int8)sub_402380(&a3) )
    {
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v26);
      v16[17] |= 1 << sub_40C8D0(v3);
    }
  }
  return 1;
}

//----- (0040EC10) --------------------------------------------------------
int __thiscall CPortal::OnLoad(_DWORD *this)
{
  if ( (this[17] & (1 << dword_4E35B8)) != 0 )
  {
    std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::push_back(this + 8);
    memset(this + 8, 0, 0x24u);
    this[17] = 0;
  }
  return 1;
}
// 40EFD0: using guessed type _DWORD __stdcall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::push_back(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0040EC70) --------------------------------------------------------
int __cdecl CPortal::OpenPortal(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int v5; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v1) )
      break;
    v5 = sub_40F040(v6);
    if ( PtInRect((const RECT *)(v5 + 4), *(POINT *)(a1 + 324)) )
    {
      CChar::AddGState((volatile LONG *)a1, 4096);
      CPlayer::Teleport(*(_DWORD *)(v5 + 20), v5 + 24, *(_DWORD *)(v5 + 32), 0);
      return 1;
    }
    sub_47D0A0(v4, 0);
  }
  return 0;
}
// 40EFA0: using guessed type _DWORD __stdcall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(_DWORD);
// 40F040: using guessed type int __thiscall sub_40F040(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 45CC90: using guessed type _DWORD __stdcall CPlayer::Teleport(_DWORD, _DWORD, _DWORD, _DWORD);
// 47D0A0: using guessed type _DWORD __stdcall sub_47D0A0(_DWORD, _DWORD);

//----- (0040ED20) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::insert(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *result, const std::pair<char const * const,CItem *> *_Val)
{
  const char **v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  const char **v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  const char *v10; // [esp-4h] [ebp-3Ch]
  const char *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  int v15; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  int v17; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int C; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0((int *)this);
  C = *((_DWORD *)this + 1);
  v23 = 1;
  while ( !*(_BYTE *)sub_40F060(v21) )
  {
    C = v21;
    v10 = *(const char **)sub_473500(v21);
    v3 = (const char **)unknown_libname_25(_Val);
    v23 = StrCmp::operator()(this, *v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)unknown_libname_25(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(v20, C);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_40F0D0((int *)this, (int)&v17, 1, C, (int)_Val);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        result,
        v5,
        &v18);
      return result;
    }
    sub_40FCF0((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *)v20);
  }
  v11 = *(const char **)unknown_libname_25(_Val);
  v7 = unknown_libname_15(v20);
  v8 = (const char **)sub_473500(v7);
  if ( StrCmp::operator()(this, *v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_40F0D0((int *)this, (int)&v15, v23, C, (int)_Val);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      result,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      result,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20,
      &v14);
  }
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0040EEE0) --------------------------------------------------------
bool __thiscall StrCmp::operator()(StrCmp *this, const char *a, const char *b)
{
  return strcmp(a, b) < 0;
}

//----- (0040EF10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::find(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval)
{
  void *v3; // eax
  int v4; // eax
  const char **v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::lower_bound(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12,
    _Keyval);
  v3 = sub_430C20((int *)this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (const char **)sub_473500(v4), StrCmp::operator()(this, *_Keyval, *v5)) )
  {
    v7 = (char *)sub_430C20((int *)this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *(_DWORD *)result = *(_DWORD *)v7;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0040EFA0) --------------------------------------------------------
void *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(_DWORD *this, void *a2)
{
  int *v2; // eax

  v2 = (int *)unknown_libname_25(this[1]);
  sub_446700(a2, *v2);
  return a2;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0040EFD0) --------------------------------------------------------
CMemory ***__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::push_back(int *this, const void *a2)
{
  _DWORD *v2; // eax
  char v5[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = sub_430C20(this, v5);
  return std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_Insert(
           this,
           *v2,
           a2);
}

//----- (0040F000) --------------------------------------------------------
_DWORD *__thiscall sub_40F000(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx

  *this = *a2;
  v3 = this + 1;
  *v3 = *a3;
  v3[1] = a3[1];
  v3[2] = a3[2];
  v3[3] = a3[3];
  return this;
}

//----- (0040F040) --------------------------------------------------------
int __thiscall sub_40F040(void *this)
{
  return sub_475960(this, this);
}
// 475960: using guessed type int __thiscall sub_475960(_DWORD, _DWORD);

//----- (0040F060) --------------------------------------------------------
int __cdecl sub_40F060(int a1)
{
  return a1 + 33;
}

//----- (0040F070) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result)
{
  int *v2; // eax

  v2 = (int *)sub_418790(this);
  sub_446700(result, *v2);
  return result;
}

//----- (0040F0A0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::lower_bound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, const char *const *_Keyval)
{
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v3; // eax

  v3 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lbound(
         this,
         _Keyval);
  sub_446700(result, (int)v3);
  return result;
}

//----- (0040F0D0) --------------------------------------------------------
int __thiscall sub_40F0D0(int *this, int a2, char a3, int C, int a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  _DWORD *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v38; // eax
  int *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Wherenode; // [esp+48h] [ebp-8h]
  CMemory **v45; // [esp+4Ch] [ebp-4h]
  int Ca; // [esp+60h] [ebp+10h]

  if ( sub_40FE70() - 1 <= (unsigned int)this[2] )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_410180(this[1], C, this[1], (_DWORD *)a5, 0);
  ++this[2];
  if ( C == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v45;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v45;
    v8 = (CMemory ***)CServer::SendAlive(this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)unknown_libname_25(C);
    *v9 = v45;
    if ( C == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(C);
    *v11 = v45;
    if ( C == *(_DWORD *)CServer::SendAlive(this) )
    {
      v12 = (CMemory ***)CServer::SendAlive(this);
      *v12 = v45;
    }
  }
  _Wherenode = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)v45;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)_Wherenode);
    if ( *(_BYTE *)_tolower(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)_Wherenode);
    v15 = (int *)sub_446FF0((int)_Wherenode);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (int *)sub_446FF0((int)_Wherenode);
      v18 = (int *)sub_446FF0(*v17);
      Ca = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)_tolower(Ca) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)_Wherenode);
      v24 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90(*v23);
      if ( _Wherenode == *v24 )
      {
        _Wherenode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0((int)_Wherenode);
        std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lrotate(
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
          _Wherenode);
      }
      v25 = (int *)sub_446FF0((int)_Wherenode);
      *(_BYTE *)_tolower(*v25) = 1;
      v26 = (int *)sub_446FF0((int)_Wherenode);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)_tolower(*v27) = 0;
      v28 = (int *)sub_446FF0((int)_Wherenode);
      v29 = (int *)sub_446FF0(*v28);
      sub_410050(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)_Wherenode);
      v31 = (_DWORD *)sub_446FF0(*v30);
      Ca = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)_tolower(Ca) )
      {
        v32 = (_DWORD *)sub_446FF0((int)_Wherenode);
        v33 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(*v32);
        if ( _Wherenode == *v33 )
        {
          _Wherenode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0((int)_Wherenode);
          sub_410050(this, (int)_Wherenode);
        }
        v34 = (int *)sub_446FF0((int)_Wherenode);
        *(_BYTE *)_tolower(*v34) = 1;
        v35 = (int *)sub_446FF0((int)_Wherenode);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)_tolower(*v36) = 0;
        v37 = (int *)sub_446FF0((int)_Wherenode);
        v38 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0(*v37);
        std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lrotate(
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
          *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)_Wherenode);
        *(_BYTE *)_tolower(*v19) = 1;
        *(_BYTE *)_tolower(Ca) = 1;
        v20 = (int *)sub_446FF0((int)_Wherenode);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)_tolower(*v21) = 0;
        v22 = (int *)sub_446FF0((int)_Wherenode);
        _Wherenode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)_tolower(*v39) = 1;
  sub_446700((void *)a2, (int)v45);
  return a2;
}
// 40F108: variable 'v5' is possibly undefined
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0040F510) --------------------------------------------------------
int __thiscall sub_40F510(void *this)
{
  int result; // eax

  if ( dword_4E2F10 )
    dword_4E2F10(this);
  (*(void (__thiscall **)(void *))(*(_DWORD *)this + 8))(this);
  initp_misc_winxfltr(this);
  return result;
}
// 4E2F10: using guessed type int (__cdecl *dword_4E2F10)(_DWORD);

//----- (0040F550) --------------------------------------------------------
void __thiscall std::length_error::length_error(std::length_error *this, const std::string *_Message)
{
  sub_40F580(_Message);
  *(_DWORD *)this = &std::length_error::`vftable';
}
// 40F580: using guessed type _DWORD __stdcall sub_40F580(std::string *_Right);
// 4D2718: using guessed type void *std::length_error::`vftable';

//----- (0040F580) --------------------------------------------------------
int __thiscall sub_40F580(int this, std::string *_Right)
{
  std::locale::facet::facet((std::locale::facet *)this, (unsigned int)"unknown");
  *(_DWORD *)this = &off_4D270C;
  std::string::string((std::string *)(this + 8), _Right);
  return this;
}
// 4D270C: using guessed type int (__stdcall *off_4D270C)(int);

//----- (0040F5C0) --------------------------------------------------------
void __thiscall std::locale::facet::facet(std::locale::facet *this, unsigned int _Initrefs)
{
  *(_DWORD *)this = &off_4B4FAC;
  *((_DWORD *)this + 1) = _Initrefs;
}
// 4B4FAC: using guessed type int (__stdcall *off_4B4FAC)(int);

//----- (0040F610) --------------------------------------------------------
void *__thiscall sub_40F610(void *this, char a2)
{
  sub_40F640(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 40F640: using guessed type int __thiscall sub_40F640(_DWORD);

//----- (0040F640) --------------------------------------------------------
_DWORD *__thiscall sub_40F640(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = &off_4B4FAC;
  return result;
}
// 4B4FAC: using guessed type int (__stdcall *off_4B4FAC)(int);

//----- (0040F660) --------------------------------------------------------
_DWORD *__thiscall sub_40F660(int this)
{
  return sub_4012D0((void *)(this + 8));
}

//----- (0040F680) --------------------------------------------------------
std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *__thiscall sub_40F680(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this, char a2)
{
  std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>::~time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0040F6B0) --------------------------------------------------------
void __thiscall std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>::~time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this)
{
  *(_DWORD *)this = &off_4D270C;
  sub_40F780((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)((char *)this + 8));
  sub_40F640(this);
}
// 4D270C: using guessed type int (__stdcall *off_4D270C)(int);

//----- (0040F6E0) --------------------------------------------------------
void __thiscall sub_40F6E0(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this)
{
  *(_DWORD *)this = &std::length_error::`vftable';
  std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>::~time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>(this);
}
// 4D2718: using guessed type void *std::length_error::`vftable';

//----- (0040F700) --------------------------------------------------------
std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *__thiscall sub_40F700(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this, char a2)
{
  sub_40F6E0(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0040F730) --------------------------------------------------------
void __thiscall std::string::string(std::string *this, const std::string *_Right)
{
  char v2; // [esp-4h] [ebp-Ch]

  v2 = (char)this;
  std___Init_locks__operator_(_Right);
  sub_44F7C0(v2);
  std::string::_Tidy(this, 0, 0);
  std::string::assign(this, _Right, 0, 0xFFFFFFFF);
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);
// 44F7C0: using guessed type _DWORD __stdcall sub_44F7C0(char);

//----- (0040F780) --------------------------------------------------------
void __thiscall sub_40F780(std::string *this)
{
  std::string::_Tidy(this, 1, 0);
}

//----- (0040F7A0) --------------------------------------------------------
std::string *__thiscall std::string::assign(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count)
{
  _DWORD *v4; // eax
  char *v6; // [esp-8h] [ebp-10h]
  unsigned int Size; // [esp+4h] [ebp-4h]

  if ( unknown_libname_11(_Right) < _Roff )
    std::_String_base::_Xran(this);
  Size = unknown_libname_11(_Right) - _Roff;
  if ( _Count < Size )
    Size = _Count;
  if ( this == _Right )
  {
    std::string::erase(this, Size + _Roff, 0xFFFFFFFF);
    std::string::erase(this, 0, _Roff);
  }
  else if ( std::string::_Grow(this, Size, 0) )
  {
    v6 = (char *)unknown_libname_2(_Right) + _Roff;
    v4 = unknown_libname_2(this);
    std::char_traits<char>::copy(v4, v6, Size);
    std::string::_Eos(this, Size);
  }
  return this;
}
// 40F880: using guessed type int __thiscall unknown_libname_11(_DWORD);

//----- (0040F8A0) --------------------------------------------------------
void __thiscall std::string::_Tidy(std::string *this, bool _Built, unsigned int _Newsize)
{
  void *Src; // [esp+4h] [ebp-4h]

  if ( _Built && *((_DWORD *)this + 6) >= 0x10u )
  {
    Src = (void *)*((_DWORD *)this + 1);
    if ( _Newsize )
      std::char_traits<char>::copy((char *)this + 4, Src, _Newsize);
    sub_4338F0(Src, *((_DWORD *)this + 6) + 1);
  }
  *((_DWORD *)this + 6) = 15;
  std::string::_Eos(this, _Newsize);
}

//----- (0040F920) --------------------------------------------------------
std::string *__thiscall std::string::erase(std::string *this, unsigned int _Off, unsigned int _Count)
{
  _DWORD *v3; // eax
  char *v5; // [esp-8h] [ebp-10h]
  size_t v6; // [esp-4h] [ebp-Ch]

  if ( *((_DWORD *)this + 5) < _Off )
    std::_String_base::_Xran(this);
  if ( *((_DWORD *)this + 5) - _Off < _Count )
    _Count = *((_DWORD *)this + 5) - _Off;
  if ( _Count )
  {
    v6 = *((_DWORD *)this + 5) - _Off - _Count;
    v5 = (char *)unknown_libname_2(this) + _Off + _Count;
    v3 = unknown_libname_2(this);
    sub_40F9B0((char *)v3 + _Off, v5, v6);
    std::string::_Eos(this, *((_DWORD *)this + 5) - _Count);
  }
  return this;
}

//----- (0040F9B0) --------------------------------------------------------
void *__cdecl sub_40F9B0(void *a1, void *Src, size_t Size)
{
  return memcpy_0(a1, Src, Size);
}

//----- (0040F9D0) --------------------------------------------------------
void __thiscall std::string::_Eos(std::string *this, unsigned int _Newsize)
{
  _DWORD *v2; // eax
  char v3; // [esp+7h] [ebp-1h] BYREF

  v3 = 0;
  *((_DWORD *)this + 5) = _Newsize;
  v2 = unknown_libname_2(this);
  std::char_traits<char>::assign((char *)v2 + _Newsize, &v3);
}
// 40FA10: using guessed type _DWORD __cdecl std::char_traits<char>::assign(_DWORD, _DWORD);

//----- (0040FA20) --------------------------------------------------------
BOOL __thiscall std::string::_Grow(std::string *this, unsigned int _Newsize, bool _Trim)
{
  if ( unknown_libname_32(this) < _Newsize )
    std::_String_base::_Xlen(this);
  if ( *((_DWORD *)this + 6) >= _Newsize )
  {
    if ( _Trim && _Newsize < 0x10 )
    {
      if ( _Newsize >= *((_DWORD *)this + 5) )
        std::string::_Tidy(this, 1, *((_DWORD *)this + 5));
      else
        std::string::_Tidy(this, 1, _Newsize);
    }
    else if ( !_Newsize )
    {
      std::string::_Eos(this, 0);
    }
  }
  else
  {
    sub_40FB00(this, _Newsize, *((_DWORD *)this + 5));
  }
  return _Newsize != 0;
}
// 40FAC0: using guessed type int __thiscall unknown_libname_32(_DWORD);

//----- (0040FB00) --------------------------------------------------------
void __thiscall sub_40FB00(std::string *this, int a2, size_t Size)
{
  _DWORD *v3; // eax
  unsigned int v5; // [esp+4h] [ebp-8h]
  CMemory **v6; // [esp+8h] [ebp-4h]

  v5 = a2 | 0xF;
  if ( unknown_libname_32(this) >= (a2 | 0xFu) )
  {
    if ( v5 / 3 < *((_DWORD *)this + 6) >> 1
      && *((_DWORD *)this + 6) <= (unsigned int)(unknown_libname_32(this) - (*((_DWORD *)this + 6) >> 1)) )
    {
      v5 = *((_DWORD *)this + 6) + (*((_DWORD *)this + 6) >> 1);
    }
  }
  else
  {
    v5 = a2;
  }
  v6 = sub_40FC00(v5 + 1);
  if ( Size )
  {
    v3 = unknown_libname_2(this);
    std::char_traits<char>::copy(v6, v3, Size);
  }
  std::string::_Tidy(this, 1, 0);
  *((_DWORD *)this + 1) = v6;
  *((_DWORD *)this + 6) = v5;
  std::string::_Eos(this, Size);
}
// 40FAC0: using guessed type int __thiscall unknown_libname_32(_DWORD);

//----- (0040FC00) --------------------------------------------------------
CMemory **__stdcall sub_40FC00(size_t Size)
{
  return sub_40FC50(Size);
}

//----- (0040FC50) --------------------------------------------------------
CMemory **__cdecl sub_40FC50(size_t Size)
{
  return operator_new(Size);
}

//----- (0040FC70) --------------------------------------------------------
CMemory ***__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_Insert(_DWORD *this, char a2, const void *a3)
{
  int *v3; // eax
  _DWORD *v4; // eax
  CMemory ***result; // eax
  const void *v6; // [esp-4h] [ebp-10h]
  int v8; // [esp+4h] [ebp-8h]
  CMemory **v9; // [esp+8h] [ebp-4h]

  v8 = unknown_libname_15(&a2);
  v6 = a3;
  v3 = (int *)sub_446FF0(v8);
  v9 = sub_410210(v8, *v3, v6);
  sub_410280(this, 1u);
  *(_DWORD *)sub_446FF0(v8) = v9;
  v4 = (_DWORD *)sub_446FF0((int)v9);
  result = (CMemory ***)unknown_libname_25(*v4);
  *result = v9;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0040FCF0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_40FCF0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  sub_410310(this);
  return this;
}

//----- (0040FD10) --------------------------------------------------------
void __thiscall std::string::string(std::string *this, const char *_Ptr)
{
  std::string *v2; // [esp-4h] [ebp-Ch] BYREF
  std::string *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  std::string::_Tidy(v3, 0, 0);
  std::string::assign(v3, _Ptr);
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0040FD50) --------------------------------------------------------
std::string *__thiscall std::string::assign(std::string *this, const char *_Ptr)
{
  unsigned int v2; // eax

  v2 = std::char_traits<char>::length((char *)_Ptr);
  return std::string::assign(this, _Ptr, v2);
}

//----- (0040FDA0) --------------------------------------------------------
std::string *__thiscall std::string::assign(std::string *this, const char *_Ptr, unsigned int _Num)
{
  const char *v3; // eax
  std::string *result; // eax
  _DWORD *v5; // eax

  if ( std::string::_Inside(this, _Ptr) )
  {
    v3 = (const char *)unknown_libname_2(this);
    result = std::string::assign(this, this, _Ptr - v3, _Num);
  }
  else
  {
    if ( std::string::_Grow(this, _Num, 0) )
    {
      v5 = unknown_libname_2(this);
      std::char_traits<char>::copy(v5, (void *)_Ptr, _Num);
      std::string::_Eos(this, _Num);
    }
    result = this;
  }
  return result;
}

//----- (0040FE20) --------------------------------------------------------
bool __thiscall std::string::_Inside(std::string *this, const char *_Ptr)
{
  return _Ptr >= (const char *)unknown_libname_2(this) && (char *)unknown_libname_2(this) + *((_DWORD *)this + 5) > _Ptr;
}

//----- (0040FE70) --------------------------------------------------------
int sub_40FE70()
{
  return std::allocator<CryptoPP::Integer>::max_size();
}

//----- (0040FE90) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const char *const *_Keyval)
{
  const char **v2; // eax
  const char *v4; // [esp-4h] [ebp-10h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]

  v6 = *(_DWORD *)sub_478AB0((int *)this);
  v7 = *((_DWORD *)this + 1);
  while ( !*(_BYTE *)sub_40F060(v6) )
  {
    v4 = *_Keyval;
    v2 = (const char **)sub_473500(v6);
    if ( StrCmp::operator()(this, *v2, v4) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)unknown_libname_25(v6);
    }
  }
  return (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0040FF20) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lrotate(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Wherenode)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int v10; // [esp+8h] [ebp-4h]

  v10 = *(_DWORD *)sub_430F90((int)_Wherenode);
  v2 = (_DWORD *)unknown_libname_25(v10);
  *(_DWORD *)sub_430F90((int)_Wherenode) = *v2;
  v3 = (int *)unknown_libname_25(v10);
  if ( !*(_BYTE *)sub_40F060(*v3) )
  {
    v4 = (int *)unknown_libname_25(v10);
    *(_DWORD *)sub_446FF0(*v4) = _Wherenode;
  }
  v5 = (_DWORD *)sub_446FF0((int)_Wherenode);
  *(_DWORD *)sub_446FF0(v10) = *v5;
  if ( _Wherenode == *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0((int *)this) )
  {
    *(_DWORD *)sub_478AB0((int *)this) = v10;
  }
  else
  {
    v6 = (_DWORD *)sub_446FF0((int)_Wherenode);
    if ( _Wherenode == *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(*v6) )
    {
      v7 = (_DWORD *)sub_446FF0((int)_Wherenode);
      *(_DWORD *)unknown_libname_25(*v7) = v10;
    }
    else
    {
      v8 = (int *)sub_446FF0((int)_Wherenode);
      *(_DWORD *)sub_430F90(*v8) = v10;
    }
  }
  *(_DWORD *)unknown_libname_25(v10) = _Wherenode;
  *(_DWORD *)sub_446FF0((int)_Wherenode) = v10;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00410050) --------------------------------------------------------
int *__thiscall sub_410050(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  _DWORD *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)unknown_libname_25(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)unknown_libname_25(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_40F060(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00410180) --------------------------------------------------------
CMemory **__stdcall sub_410180(int a1, int a2, int a3, _DWORD *a4, char a5)
{
  _DWORD *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_410360(1);
  v6 = operator new(0x24u, v7);
  if ( v6 )
    sub_410480(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00410210) --------------------------------------------------------
CMemory **__stdcall sub_410210(int a1, int a2, const void *a3)
{
  _DWORD *v4; // [esp+8h] [ebp-8h]
  CMemory **v5; // [esp+Ch] [ebp-4h]

  v5 = sub_4102F0(1);
  v4 = operator new(0x2Cu, v5);
  if ( v4 )
    sub_4104E0(v4, a1, a2, a3);
  return v5;
}

//----- (00410280) --------------------------------------------------------
_DWORD *__thiscall sub_410280(_DWORD *this, unsigned int a2)
{
  void *v2; // eax
  _DWORD *result; // eax
  char v5[28]; // [esp+4h] [ebp-40h] BYREF
  char v6[36]; // [esp+20h] [ebp-24h] BYREF

  if ( sub_410380() - this[2] < a2 )
  {
    std::string::string((std::string *)v5, "list<T> too long");
    std::length_error::length_error((std::length_error *)v6, (const std::string *)v5);
    sub_40F510(v2);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v6);
    sub_40F780((std::string *)v5);
  }
  result = this;
  this[2] += a2;
  return result;
}
// 4102B7: variable 'v2' is possibly undefined

//----- (004102F0) --------------------------------------------------------
CMemory **__stdcall sub_4102F0(int a1)
{
  return sub_410560(a1);
}

//----- (00410310) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_410310(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::_Dec(this);
  return this;
}

//----- (00410330) --------------------------------------------------------
int std::allocator<CryptoPP::Integer>::max_size()
{
  return 214748364;
}

//----- (00410360) --------------------------------------------------------
CMemory **__stdcall sub_410360(int a1)
{
  return sub_410580(a1);
}

//----- (00410380) --------------------------------------------------------
int sub_410380()
{
  return sub_478E40();
}

//----- (004103A0) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::_Dec(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  int *v1; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v2; // eax
  int v4; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_40F060(*(_DWORD *)this) )
  {
    *(_DWORD *)this = *(_DWORD *)sub_430F90(*(_DWORD *)this);
  }
  else
  {
    v1 = (int *)unknown_libname_25(*(_DWORD *)this);
    if ( *(_BYTE *)sub_40F060(*v1) )
    {
      while ( 1 )
      {
        v4 = *(_DWORD *)sub_446FF0(*(_DWORD *)this);
        if ( *(_BYTE *)sub_40F060(v4) || *(_DWORD *)this != *(_DWORD *)unknown_libname_25(v4) )
          break;
        *(_DWORD *)this = v4;
      }
      if ( !*(_BYTE *)sub_40F060(v4) )
        *(_DWORD *)this = v4;
    }
    else
    {
      v2 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(*(_DWORD *)this);
      *(_DWORD *)this = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Max(*v2);
    }
  }
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00410480) --------------------------------------------------------
_DWORD *__thiscall sub_410480(_DWORD *this, int a2, int a3, int a4, _DWORD *a5, char a6)
{
  _DWORD *v6; // ecx

  *this = a2;
  this[1] = a3;
  this[2] = a4;
  v6 = this + 3;
  *v6 = *a5;
  v6[1] = a5[1];
  v6[2] = a5[2];
  v6[3] = a5[3];
  v6[4] = a5[4];
  *((_BYTE *)this + 32) = a6;
  *((_BYTE *)this + 33) = 0;
  return this;
}

//----- (004104E0) --------------------------------------------------------
_DWORD *__thiscall sub_4104E0(_DWORD *this, int a2, int a3, const void *a4)
{
  *this = a2;
  this[1] = a3;
  qmemcpy(this + 2, a4, 0x24u);
  return this;
}

//----- (00410520) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *__cdecl std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Max(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Pnode)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90((int)_Pnode);
    if ( *(_BYTE *)sub_40F060(*v1) )
      break;
    _Pnode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)_Pnode);
  }
  return _Pnode;
}

//----- (00410560) --------------------------------------------------------
CMemory **__cdecl sub_410560(int a1)
{
  return operator_new(44 * a1);
}

//----- (00410580) --------------------------------------------------------
CMemory **__cdecl sub_410580(int a1)
{
  return operator_new(36 * a1);
}

//----- (004105A0) --------------------------------------------------------
void __thiscall std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>>::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>>(std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *this)
{
  const std::allocator<std::pair<char const * const,CItem *> > *v1; // eax
  char v3; // [esp+6h] [ebp-2h] BYREF
  char v4; // [esp+7h] [ebp-1h] BYREF

  v3 = 0;
  v1 = (const std::allocator<std::pair<char const * const,CItem *> > *)LocaleUpdate__GetLocaleT(&v4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    (const iless *)&v3,
    v1);
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004105D0) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, const iless *_Parg, const std::allocator<std::pair<char const * const,CItem *> > *_Al)
{
  char v3; // [esp-4h] [ebp-Ch]

  v3 = (char)this;
  std___Init_locks__operator_(_Al);
  std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    _Parg,
    v3);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Init(this);
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00410610) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Init(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  *((_DWORD *)this + 1) = sub_410680();
  *(_BYTE *)sub_40F060(*((_DWORD *)this + 1)) = 1;
  *(_DWORD *)sub_478AB0((int *)this) = *((_DWORD *)this + 1);
  *(_DWORD *)sub_418790(this) = *((_DWORD *)this + 1);
  *(_DWORD *)CServer::SendAlive(this) = *((_DWORD *)this + 1);
  *((_DWORD *)this + 2) = 0;
}

//----- (00410680) --------------------------------------------------------
int sub_410680()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  int C; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  C = (int)sub_410360(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)unknown_libname_25(C);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0(C);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90(C);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)_tolower(C) = 1;
  *(_BYTE *)sub_40F060(C) = 0;
  return C;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004107A0) --------------------------------------------------------
void *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(void *this)
{
  void *v2; // [esp-4h] [ebp-Ch] BYREF
  void *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  LocaleUpdate__GetLocaleT(&v2);
  std::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(
    v3,
    (char)v2);
  *((_DWORD *)v3 + 1) = sub_4107E0();
  *((_DWORD *)v3 + 2) = 0;
  return v3;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004107E0) --------------------------------------------------------
int sub_4107E0()
{
  void *v0; // eax
  void *v1; // eax
  int v3; // [esp+4h] [ebp-8h] BYREF
  int v4; // [esp+8h] [ebp-4h]

  v3 = (int)sub_4102F0(1);
  v4 = 0;
  v0 = (void *)unknown_libname_25(v3);
  sub_42F9B0(v0, (int)&v3);
  ++v4;
  v1 = (void *)sub_446FF0(v3);
  sub_42F9B0(v1, (int)&v3);
  return v3;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00410880) --------------------------------------------------------
void __thiscall sub_410880(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  sub_4108A0(this);
}

//----- (004108A0) --------------------------------------------------------
void __thiscall sub_4108A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tidy(this);
}

//----- (004108C0) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tidy(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int v5; // [esp-4h] [ebp-14h]
  char v7[4]; // [esp+4h] [ebp-Ch] BYREF
  char v8[4]; // [esp+8h] [ebp-8h] BYREF
  char v9[4]; // [esp+Ch] [ebp-4h] BYREF

  v5 = *(_DWORD *)sub_430C20((int *)this, v9);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::erase(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7,
    *v1,
    v5);
  v2 = (void *)unknown_libname_25(*((_DWORD *)this + 1));
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(*((_DWORD *)this + 1));
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(*((_DWORD *)this + 1));
  sub_44CD70(v4);
  sub_4338F0(*((void **)this + 1), 1);
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00410970) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::erase(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::clear(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = (int *)std::vector<std::string>::iterator::operator++(
                    (std::vector<std::string>::iterator *)&a3,
                    (std::vector<std::string>::iterator *)v10,
                    0);
      sub_410A10((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00410A10) --------------------------------------------------------
_DWORD *__thiscall sub_410A10(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v7; // eax
  _DWORD *v8; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v9; // eax
  _DWORD *v10; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  int *v14; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v15; // eax
  _DWORD *v16; // esi
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v17; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v18; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v22; // eax
  _DWORD *v23; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v24; // eax
  _DWORD *v25; // eax
  _DWORD *v26; // eax
  _DWORD *v27; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v32; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v48; // [esp+4h] [ebp-5Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Wherenode; // [esp+50h] [ebp-10h]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v54; // [esp+54h] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Pnode; // [esp+58h] [ebp-8h]
  int C; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_40F060(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  C = unknown_libname_15(&a3);
  sub_411370((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *)&a3);
  v54 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)C;
  v5 = (int *)unknown_libname_25(C);
  if ( *(_BYTE *)sub_40F060(*v5) )
  {
    _Pnode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_40F060(*v6) )
    {
      _Pnode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)unknown_libname_15(&a3);
      _Pnode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)v54);
    }
  }
  if ( v54 == (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)C )
  {
    _Wherenode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0(C);
    if ( !*(_BYTE *)sub_40F060((int)_Pnode) )
    {
      v7 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0((int)_Pnode);
      *v7 = _Wherenode;
    }
    v8 = (_DWORD *)sub_478AB0(this);
    if ( *v8 == C )
    {
      v9 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0(this);
      *v9 = _Pnode;
    }
    else
    {
      v10 = (_DWORD *)unknown_libname_25(_Wherenode);
      if ( *v10 == C )
        v11 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(_Wherenode);
      else
        v11 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)_Wherenode);
      *v11 = _Pnode;
    }
    v12 = (_DWORD *)sub_418790(this);
    if ( *v12 == C )
    {
      if ( *(_BYTE *)sub_40F060((int)_Pnode) )
        v49 = _Wherenode;
      else
        v49 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)sub_411330((int)_Pnode);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (_DWORD *)CServer::SendAlive(this);
    if ( *v13 == C )
    {
      if ( *(_BYTE *)sub_40F060((int)_Pnode) )
        v48 = _Wherenode;
      else
        v48 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Max(_Pnode);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(C);
    v15 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(C);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90(C);
    if ( v54 == *v17 )
    {
      _Wherenode = v54;
    }
    else
    {
      _Wherenode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_40F060((int)_Pnode) )
      {
        v18 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0((int)_Pnode);
        *v18 = _Wherenode;
      }
      v19 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(_Wherenode);
      *v19 = _Pnode;
      v20 = (_DWORD *)sub_430F90(C);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90(C);
      v22 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (_DWORD *)sub_478AB0(this);
    if ( *v23 == C )
    {
      v24 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0(C);
      v26 = (_DWORD *)unknown_libname_25(*v25);
      if ( *v26 == C )
      {
        v27 = (_DWORD *)sub_446FF0(C);
        v28 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0(C);
        v28 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0(C);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)_tolower(C);
    v31 = (char *)_tolower((int)v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)_tolower(C) == 1 )
  {
    while ( 1 )
    {
      v32 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0(this);
      if ( _Pnode == *v32 || *(_BYTE *)_tolower((int)_Pnode) != 1 )
      {
LABEL_65:
        *(_BYTE *)_tolower((int)_Pnode) = 1;
        goto LABEL_66;
      }
      v33 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(_Wherenode);
      if ( _Pnode == *v33 )
        break;
      v54 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(_Wherenode);
      if ( !*(_BYTE *)_tolower((int)v54) )
      {
        *(_BYTE *)_tolower((int)v54) = 1;
        *(_BYTE *)_tolower((int)_Wherenode) = 0;
        sub_410050(this, (int)_Wherenode);
        v54 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(_Wherenode);
      }
      if ( !*(_BYTE *)sub_40F060((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)_tolower(*v40) != 1 || (v41 = (int *)unknown_libname_25(v54), *(_BYTE *)_tolower(*v41) != 1) )
        {
          v42 = (int *)unknown_libname_25(v54);
          if ( *(_BYTE *)_tolower(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)_tolower(*v43) = 1;
            *(_BYTE *)_tolower((int)v54) = 0;
            std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lrotate(
              (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
              v54);
            v54 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(_Wherenode);
          }
          v44 = (_BYTE *)_tolower((int)_Wherenode);
          *(_BYTE *)_tolower((int)v54) = *v44;
          *(_BYTE *)_tolower((int)_Wherenode) = 1;
          v45 = (int *)unknown_libname_25(v54);
          *(_BYTE *)_tolower(*v45) = 1;
          sub_410050(this, (int)_Wherenode);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)_tolower((int)v54) = 0;
        _Pnode = _Wherenode;
        goto LABEL_42;
      }
      _Pnode = _Wherenode;
LABEL_42:
      _Wherenode = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_446FF0((int)_Pnode);
    }
    v54 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)_Wherenode);
    if ( !*(_BYTE *)_tolower((int)v54) )
    {
      *(_BYTE *)_tolower((int)v54) = 1;
      *(_BYTE *)_tolower((int)_Wherenode) = 0;
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lrotate(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
        _Wherenode);
      v54 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)_Wherenode);
    }
    if ( *(_BYTE *)sub_40F060((int)v54) )
    {
      _Pnode = _Wherenode;
      goto LABEL_42;
    }
    v34 = (int *)unknown_libname_25(v54);
    if ( *(_BYTE *)_tolower(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)_tolower(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)_tolower(*v36) == 1 )
      {
        v37 = (int *)unknown_libname_25(v54);
        *(_BYTE *)_tolower(*v37) = 1;
        *(_BYTE *)_tolower((int)v54) = 0;
        sub_410050(this, (int)v54);
        v54 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)_Wherenode);
      }
      v38 = (_BYTE *)_tolower((int)_Wherenode);
      *(_BYTE *)_tolower((int)v54) = *v38;
      *(_BYTE *)_tolower((int)_Wherenode) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)_tolower(*v39) = 1;
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Lrotate(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
        _Wherenode);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70((void *)C);
  sub_4338F0((void *)C, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004111A0) --------------------------------------------------------
_DWORD *__thiscall sub_4111A0(_DWORD *this, std::string *a2)
{
  sub_40F580((int)this, a2);
  *this = &std::out_of_range::`vftable';
  return this;
}
// 4D2724: using guessed type void *std::out_of_range::`vftable';

//----- (004111D0) --------------------------------------------------------
void __thiscall sub_4111D0(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this)
{
  *(_DWORD *)this = &std::out_of_range::`vftable';
  std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>::~time_put<unsigned short,std::ostreambuf_iterator<unsigned short>>(this);
}
// 4D2724: using guessed type void *std::out_of_range::`vftable';

//----- (004111F0) --------------------------------------------------------
std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *__thiscall sub_4111F0(std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *this, char a2)
{
  sub_4111D0(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00411220) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::clear(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this)
{
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v1; // eax

  v1 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0((int *)this);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Erase(
    this,
    *v1);
  *(_DWORD *)sub_478AB0((int *)this) = *((_DWORD *)this + 1);
  *((_DWORD *)this + 2) = 0;
  *(_DWORD *)sub_418790(this) = *((_DWORD *)this + 1);
  *(_DWORD *)CServer::SendAlive(this) = *((_DWORD *)this + 1);
}

//----- (00411280) --------------------------------------------------------
std::vector<std::string>::iterator *__thiscall std::vector<std::string>::iterator::operator++(std::vector<std::string>::iterator *this, std::vector<std::string>::iterator *result, int __formal)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *(_DWORD *)this;
  sub_411370(this);
  *(_DWORD *)result = v4;
  return result;
}

//----- (004112B0) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Erase(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Rootnode)
{
  _BYTE *i; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v3; // eax
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v5; // [esp+4h] [ebp-4h]

  v5 = _Rootnode;
  for ( i = (_BYTE *)sub_40F060((int)_Rootnode); !*i; i = (_BYTE *)sub_40F060((int)v5) )
  {
    v3 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)v5);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Erase(
      this,
      *v3);
    v5 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(v5);
    sub_44CD70(_Rootnode);
    sub_4338F0(_Rootnode, 1);
    _Rootnode = v5;
  }
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00411330) --------------------------------------------------------
int __cdecl sub_411330(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)unknown_libname_25(a1);
    if ( *(_BYTE *)sub_40F060(*v1) )
      break;
    a1 = *(_DWORD *)unknown_libname_25(a1);
  }
  return a1;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00411370) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_411370(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  sub_411390(this);
  return this;
}

//----- (00411390) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *__thiscall sub_411390(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::_Inc(this);
  return this;
}

//----- (004113B0) --------------------------------------------------------
void __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::_Inc(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::const_iterator *this)
{
  int *v1; // eax
  int *v2; // eax
  int v4; // [esp+4h] [ebp-4h]

  if ( !*(_BYTE *)sub_40F060(*(_DWORD *)this) )
  {
    v1 = (int *)sub_430F90(*(_DWORD *)this);
    if ( *(_BYTE *)sub_40F060(*v1) )
    {
      while ( 1 )
      {
        v4 = *(_DWORD *)sub_446FF0(*(_DWORD *)this);
        if ( *(_BYTE *)sub_40F060(v4) || *(_DWORD *)this != *(_DWORD *)sub_430F90(v4) )
          break;
        *(_DWORD *)this = v4;
      }
      *(_DWORD *)this = v4;
    }
    else
    {
      v2 = (int *)sub_430F90(*(_DWORD *)this);
      *(_DWORD *)this = sub_411330(*v2);
    }
  }
}

//----- (00411470) --------------------------------------------------------
void __cdecl std::swap<char>(char *_Left, char *_Right)
{
  char v2; // [esp+3h] [ebp-1h]

  v2 = *_Left;
  *_Left = *_Right;
  *_Right = v2;
}

//----- (004114A0) --------------------------------------------------------
char *__thiscall CGuild::CGuild(char *this)
{
  const char *v1; // eax
  const char *v2; // eax
  const char *v3; // eax
  const char *v4; // eax
  const char *v5; // eax
  const char *v6; // eax

  CBase::CBase((int)this);
  *(_DWORD *)this = &off_4B4FF0;
  std::map<unsigned long,ncf::kernel::NetworkSession *>::map<unsigned long,ncf::kernel::NetworkSession *>((std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *)(this + 380));
  *((_DWORD *)this + 8) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 10) = 0;
  memset(this + 44, 0, 0x11u);
  *((_DWORD *)this + 16) = 0;
  *((_DWORD *)this + 17) = 0;
  *((_DWORD *)this + 18) = 1;
  *((_DWORD *)this + 19) = 0;
  *((_DWORD *)this + 20) = 0;
  v1 = GetStr(912);
  strcpy(this + 84, v1);
  v2 = GetStr(913);
  strcpy(this + 99, v2);
  v3 = GetStr(914);
  strcpy(this + 114, v3);
  v4 = GetStr(915);
  strcpy(this + 129, v4);
  v5 = GetStr(916);
  strcpy(this + 144, v5);
  v6 = GetStr(917);
  strcpy(this + 159, v6);
  memset(this + 174, 0, 0xB5u);
  *((_DWORD *)this + 89) = 0;
  *((_DWORD *)this + 90) = 3;
  *((_DWORD *)this + 91) = 1;
  *((_DWORD *)this + 92) = 1;
  *((_DWORD *)this + 93) = 0;
  *((_DWORD *)this + 94) = 0;
  *((_DWORD *)this + 98) = 0;
  *((_DWORD *)this + 99) = 0;
  memset(this + 400, 0, 8u);
  return this;
}
// 4B4FF0: using guessed type int (__stdcall *off_4B4FF0)(int);

//----- (00411680) --------------------------------------------------------
void *__thiscall CGuild::_scalar_deleting_destructor_(void *this, char a2)
{
  CGuild::_CGuild(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 4116B0: using guessed type int __thiscall sub_4116B0(_DWORD);

//----- (004116B0) --------------------------------------------------------
int __thiscall CGuild::_CGuild(_DWORD *this)
{
  *this = &off_4B4FF0;
  sub_4116E0(this + 95);
  return CBase::_CBase(this);
}
// 4116E0: using guessed type int __thiscall sub_4116E0(_DWORD);
// 4B4FF0: using guessed type int (__stdcall *off_4B4FF0)(int);

//----- (004116E0) --------------------------------------------------------
int __thiscall sub_4116E0(void *this)
{
  return sub_418510(this, this);
}
// 418510: using guessed type int __thiscall sub_418510(_DWORD, _DWORD);

//----- (00411700) --------------------------------------------------------
void CGuild::Stop()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v2);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    v1 = sub_420250(v4);
    CBase::Delete(*(_DWORD *)(v1 + 4));
    sub_446090(v3, 0);
  }
  sub_418480(&unk_4E0968);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
}
// 411780: using guessed type int __thiscall CBase::Delete(_DWORD);
// 418480: using guessed type int __thiscall sub_418480(_DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00411780) --------------------------------------------------------
int __thiscall CBase::Delete(char *this)
{
  int result; // eax
  int v2; // [esp+0h] [ebp-4h]

  result = BitSet(this + 20, 0, this);
  if ( !result )
    result = (*(int (__thiscall **)(int))(*(_DWORD *)v2 + 36))(v2);
  return result;
}
// 41179B: variable 'v2' is possibly undefined
// 496CD0: using guessed type int __fastcall sub_496CD0(_DWORD, _DWORD, _DWORD);

//----- (004117B0) --------------------------------------------------------
void CGuild::SecondProcess()
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CGuild::IsWarringPeriod() )
    CCastle::SecondProcess();
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 417450: using guessed type int CGuild::IsWarringPeriod(void);
// 41BCE0: using guessed type int sub_41BCE0(void);

//----- (004117E0) --------------------------------------------------------
int __cdecl CGuild::MinuteProcess(unsigned int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-28h] BYREF
  char v4[4]; // [esp+4h] [ebp-24h] BYREF
  char v5[4]; // [esp+8h] [ebp-20h] BYREF
  char v6[4]; // [esp+Ch] [ebp-1Ch] BYREF
  __time32_t v7; // [esp+10h] [ebp-18h]
  char *v8; // [esp+14h] [ebp-14h]
  int v9; // [esp+18h] [ebp-10h] BYREF
  int v10; // [esp+1Ch] [ebp-Ch]
  __time32_t Time; // [esp+20h] [ebp-8h] BYREF
  struct tm *v12; // [esp+24h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v9);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v6);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v9,
            v1) )
      break;
    v8 = *(char **)(sub_420250(&v9) + 4);
    if ( *((_DWORD *)v8 + 89) && *((_DWORD *)v8 + 89) < a1 )
    {
      if ( *((_DWORD *)v8 + 8) )
      {
        *((_DWORD *)v8 + 89) = 0;
        sub_446090(v5, 0);
      }
      else
      {
        CBase::Delete(v8);
        v9 = *(_DWORD *)sub_44AF50(v4, v9);
      }
    }
    else
    {
      sub_446090(v3, 0);
    }
  }
  Time = time(0);
  v12 = localtime(&Time);
  v10 = 0;
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    if ( (dword_4E1174[0] & 2) != 0 )
    {
      if ( v12->tm_min >= 5 )
      {
        if ( v12->tm_min >= 15 )
        {
          if ( v12->tm_min >= 16 )
          {
            if ( v12->tm_min < 50 )
              v10 = 4;
          }
          else
          {
            v10 = 2;
          }
        }
        else
        {
          v10 = 1;
        }
      }
      else
      {
        v10 = 0;
      }
    }
    else if ( v12->tm_hour >= 17 )
    {
      if ( v12->tm_hour >= 18 )
      {
        if ( v12->tm_hour < 19 )
          v10 = 4;
      }
      else if ( v12->tm_min >= 30 )
      {
        v10 = 2;
      }
      else
      {
        v10 = 1;
      }
    }
    else
    {
      v10 = 0;
    }
  }
  else
  {
    switch ( v12->tm_wday )
    {
      case 4:
        if ( v12->tm_hour >= 21 )
          v10 = 1;
        break;
      case 5:
        if ( v12->tm_hour >= 21 )
          v10 = 2;
        else
          v10 = 1;
        break;
      case 6:
        if ( v12->tm_hour >= 21 )
        {
          if ( v12->tm_hour < 23 )
            v10 = 4;
        }
        else
        {
          v10 = 2;
        }
        break;
    }
  }
  if ( dword_4E0964 != v10 )
  {
    if ( v10 == 4 )
    {
      v7 = Time;
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        if ( (dword_4E1174[0] & 2) != 0 )
          v7 += 60 * (30 - v12->tm_min);
        else
          v7 += 3600;
      }
      else if ( v12->tm_hour == 21 )
      {
        v7 += 7200;
      }
      else
      {
        v7 += 3600;
      }
      CCastle::WarBegin(v7);
    }
    if ( dword_4E0964 != 4 || !CCastle::IsWarDeclared() )
      dword_4E0964 = v10;
  }
  if ( dword_4E0964 )
    CAlliance::PostponeExpire();
  else
    CAlliance::Expire(Time);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
  return CCastle::TaxSave();
}
// 419370: using guessed type int sub_419370(void);
// 419470: using guessed type _DWORD __cdecl sub_419470(_DWORD);
// 419E10: using guessed type _DWORD __cdecl sub_419E10(_DWORD);
// 41B7C0: using guessed type int sub_41B7C0(void);
// 41C310: using guessed type int sub_41C310(void);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AF50: using guessed type _DWORD __stdcall sub_44AF50(_DWORD, _DWORD);
// 4E0964: using guessed type int dword_4E0964;

//----- (00411AB0) --------------------------------------------------------
void __thiscall CGuild::OnDelete(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  void *v3; // [esp+4h] [ebp-14h]
  char v4[4]; // [esp+8h] [ebp-10h] BYREF
  char v5[4]; // [esp+Ch] [ebp-Ch] BYREF
  volatile int *v6; // [esp+10h] [ebp-8h]
  char v7[4]; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v1) )
      break;
    v6 = *(volatile int **)(*(_DWORD *)(sub_420250(v7) + 4) + 32);
    if ( v6 )
    {
      CPlayer::SetGID(0);
      CPlayer::SetGuild(0);
      CPlayer::SetGuildLevel(0);
      CPlayer::SetGuildName((char *)&Src);
      CPlayer::SetGuildStandard(0);
      CPlayer::SetGuildClass(0, (char *)&Src);
      CIOObject::Release(v6);
      *(_DWORD *)(*(_DWORD *)(sub_420250(v7) + 4) + 32) = 0;
      --*(_DWORD *)(this + 32);
    }
    v3 = *(void **)(sub_420250(v7) + 4);
    operator_delete(v3);
    sub_446090(v5, 0);
  }
  sub_418530(this + 380);
  if ( *(_DWORD *)(this + 396) )
    CAlliance::DeleteSetGuild(this);
  CBase::OnDelete((volatile int *)this);
}
// 418530: using guessed type int __thiscall sub_418530(_DWORD);
// 4190C0: using guessed type _DWORD __stdcall sub_4190C0(_DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 46AB20: using guessed type _DWORD __stdcall sub_46AB20(CIOObject *);
// 46ABC0: using guessed type _DWORD __stdcall sub_46ABC0(_DWORD);
// 46ABF0: using guessed type _DWORD __stdcall sub_46ABF0(_DWORD);
// 46AC60: using guessed type _DWORD __stdcall sub_46AC60(_DWORD);

//----- (00411BE0) --------------------------------------------------------
int __cdecl CGuild::IsLoad(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  DWORD v2; // esi
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  int v6; // [esp+Ch] [ebp-4h]

  v6 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v5, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
         v1) )
  {
    v6 = 1;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 356) )
    {
      v2 = GetTickCount() + 600000;
      *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 356) = v2;
    }
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
  return v6;
}
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00411C80) --------------------------------------------------------
void __cdecl CGuild::Load(char *a1, char *packet, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp+0h] [ebp-6Ch]
  int v9; // [esp+4h] [ebp-68h]
  int v10; // [esp+8h] [ebp-64h]
  char *v11; // [esp+Ch] [ebp-60h]
  char v12[8]; // [esp+14h] [ebp-58h] BYREF
  char v13[8]; // [esp+1Ch] [ebp-50h] BYREF
  char *v14; // [esp+24h] [ebp-48h]
  char v15[8]; // [esp+28h] [ebp-44h] BYREF
  char v16[8]; // [esp+30h] [ebp-3Ch] BYREF
  char *v17; // [esp+38h] [ebp-34h]
  char v18[4]; // [esp+3Ch] [ebp-30h] BYREF
  char v19[8]; // [esp+40h] [ebp-2Ch] BYREF
  int i; // [esp+48h] [ebp-24h]
  char v21[4]; // [esp+4Ch] [ebp-20h] BYREF
  int v22; // [esp+50h] [ebp-1Ch] BYREF
  char *v23; // [esp+54h] [ebp-18h]
  char *str; // [esp+58h] [ebp-14h]
  char *v25; // [esp+5Ch] [ebp-10h] BYREF
  int v26; // [esp+60h] [ebp-Ch] BYREF
  char v27[8]; // [esp+64h] [ebp-8h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v21, &a1);
  v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v18);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v21,
         v3) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
  }
  else
  {
    v17 = (char *)operator_new(0x198u);
    if ( v17 )
      v11 = CGuild::CGuild(v17);
    else
      v11 = 0;
    v23 = v11;
    packet = GetString(packet, v11 + 44);
    packet = (char *)sub_47A240(packet, v23 + 76);
    packet = (char *)sub_47A240(packet, v23 + 68);
    packet = GetString(packet, v23 + 174);
    packet = GetString(packet, v23 + 84);
    packet = GetString(packet, v23 + 99);
    packet = GetString(packet, v23 + 114);
    packet = GetString(packet, v23 + 129);
    packet = GetString(packet, v23 + 144);
    packet = GetString(packet, v23 + 159);
    packet = (char *)sub_47A240(packet, v23 + 360);
    packet = (char *)sub_47A240(packet, v23 + 364);
    packet = (char *)sub_47A240(packet, v23 + 368);
    packet = (char *)sub_47A240(packet, v23 + 372);
    packet = (char *)sub_47A240(packet, v23 + 376);
    packet = (char *)sub_47A240(packet, v23 + 392);
    v4 = sub_418940((std::pair<char const * const,CItem *> *)v15, a1, (CItem *)v23);
    unknown_libname_12(v4);
    sub_445DF0(
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v27,
      v16);
    if ( v27[4] )
    {
      *((_DWORD *)v23 + 16) = 0;
      v26 = 0;
      packet = (char *)sub_418960(packet, &v26);
      for ( i = 0; i < v26; ++i )
      {
        v14 = (char *)operator_new(0x28u);
        str = v14;
        packet = (char *)sub_47A240(packet, &v25);
        packet = GetString(packet, str);
        *((_DWORD *)str + 5) = 0;
        packet = (char *)sub_418980(packet, str + 20);
        *((_DWORD *)str + 6) = 0;
        packet = (char *)sub_418960(packet, str + 24);
        *((_DWORD *)str + 7) = 0;
        packet = (char *)sub_418960(packet, str + 28);
        packet = (char *)sub_47A240(packet, str + 36);
        *((_DWORD *)str + 8) = 0;
        v5 = sub_418940((std::pair<char const * const,CItem *> *)v12, v25, (CItem *)str);
        unknown_libname_12(v5);
        sub_445DF0(
          (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v19,
          v13);
        if ( v19[4] )
        {
          if ( *((int *)str + 6) < 6 )
          {
            if ( 10000 * *((_DWORD *)str + 5) >= 0 )
              v10 = 10000 * *((_DWORD *)str + 5);
            else
              v10 = 0;
            if ( v10 + *((_DWORD *)v23 + 16) <= 2000000000 )
            {
              if ( 10000 * *((_DWORD *)str + 5) >= 0 )
                v8 = 10000 * *((_DWORD *)str + 5);
              else
                v8 = 0;
              v9 = v8 + *((_DWORD *)v23 + 16);
            }
            else
            {
              v9 = 2000000000;
            }
            *((_DWORD *)v23 + 16) = v9;
          }
        }
        else
        {
          LOG_ERR("CGuild::Load() member insert error (gid:%d, pid:%d,count:%d)", a1, v25, v26);
          operator_delete(str);
        }
      }
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        if ( *((int *)v23 + 17) < 3 )
        {
          if ( *((int *)v23 + 17) < 2 )
          {
            if ( *((int *)v23 + 17) < 1 )
              *((_DWORD *)v23 + 18) = 1;
            else
              *((_DWORD *)v23 + 18) = 2;
          }
          else
          {
            *((_DWORD *)v23 + 18) = 3;
          }
        }
        else
        {
          *((_DWORD *)v23 + 18) = 4;
        }
        v7 = CGuild::CalPenaltyTLevel(v23);
        *((_DWORD *)v23 + 18) = v7;
      }
      else
      {
        if ( *((int *)v23 + 17) < 16000000 )
        {
          if ( *((int *)v23 + 17) < 7800000 )
          {
            if ( *((int *)v23 + 17) < 2400000 )
              *((_DWORD *)v23 + 18) = 1;
            else
              *((_DWORD *)v23 + 18) = 2;
          }
          else
          {
            *((_DWORD *)v23 + 18) = 3;
          }
        }
        else
        {
          *((_DWORD *)v23 + 18) = 4;
        }
        v6 = CGuild::CalPenaltyLevel(v23);
        *((_DWORD *)v23 + 18) = v6;
      }
      v22 = 0;
      packet = (char *)sub_418960(packet, &v22);
      if ( v22 )
        CAlliance::Load(packet);
      if ( *((_DWORD *)v23 + 98) )
        CAlliance::LoadSetGuild(*((_DWORD *)v23 + 98), a1, v23);
      if ( a3 )
      {
        CCastle::SetGuild(v23);
        ++*((_DWORD *)v23 + 8);
      }
      CCastle::SetWarGuild(a1, v23);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
    else
    {
      CBase::Delete(v23);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      LOG_ERR("CGuildAdmin::Load() guild insert error ( gid:%d )", a1);
    }
  }
}
// 416B20: using guessed type int __thiscall sub_416B20(_DWORD);
// 416BF0: using guessed type int __thiscall sub_416BF0(_DWORD);
// 418940: using guessed type _DWORD __cdecl sub_418940(std::pair<char const * const,CItem *> *, char *_Val1, CItem *_Val2);
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 418980: using guessed type _DWORD __cdecl sub_418980(_DWORD, _DWORD);
// 418DA0: using guessed type _DWORD __cdecl sub_418DA0(char *packet);
// 418FF0: using guessed type _DWORD __cdecl sub_418FF0(_DWORD, _DWORD, _DWORD);
// 419D80: using guessed type _DWORD __cdecl sub_419D80(_DWORD, _DWORD);
// 41A370: using guessed type _DWORD __stdcall sub_41A370(_DWORD);
// 41CF00: using guessed type _DWORD __stdcall unknown_libname_12(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (00412210) --------------------------------------------------------
void __cdecl CGuild::Login(int a1)
{
  int v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  CIOBuffer *v11; // [esp-8h] [ebp-24h]
  int v12; // [esp-4h] [ebp-20h]
  int v13; // [esp-4h] [ebp-20h]
  int v14; // [esp-4h] [ebp-20h]
  char *v15; // [esp-4h] [ebp-20h]
  int v16; // [esp-4h] [ebp-20h]
  _DWORD *v17; // [esp+0h] [ebp-1Ch]
  char v18[4]; // [esp+4h] [ebp-18h] BYREF
  char v19[4]; // [esp+8h] [ebp-14h] BYREF
  int v20; // [esp+Ch] [ebp-10h] BYREF
  CIOBuffer *v21; // [esp+10h] [ebp-Ch]
  char v22[4]; // [esp+14h] [ebp-8h] BYREF
  char v23[4]; // [esp+18h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  v20 = CPlayer::GetGID(a1);
  sub_44AE20(v22, &v20);
  v1 = sub_430C20(v19);
  if ( (unsigned __int8)unknown_libname_16(v1) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    v12 = *(_DWORD *)(a1 + 452);
    v2 = CPlayer::GetGID(a1);
    LOG_ERR("CGuild::Login() guild key error (gid:%d,pid:%d)", v2, v12);
    CPlayer::SetGID(0);
  }
  else
  {
    sub_420250(v22);
    sub_44AE20(v23, a1 + 452);
    sub_420250(v22);
    v3 = sub_430C20(v18);
    if ( (unsigned __int8)unknown_libname_16(v3) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      v13 = *(_DWORD *)(a1 + 452);
      v4 = CPlayer::GetGID(a1);
      LOG_ERR("CGuild::Login() guild member error (gid:%d,pid:%d)", v4, v13);
      CPlayer::SetGID(0);
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250(v23) + 4) + 32) = a1;
      CIOObject::AddRef(a1);
      v17 = (_DWORD *)(*(_DWORD *)(sub_420250(v22) + 4) + 32);
      ++*v17;
      *(_DWORD *)(*(_DWORD *)(sub_420250(v22) + 4) + 356) = 0;
      v5 = sub_420250(v22);
      CPlayer::SetGuild(*(CIOObject **)(v5 + 4));
      v6 = sub_420250(v22);
      CPlayer::SetGuildLevel(*(_DWORD *)(*(_DWORD *)(v6 + 4) + 72));
      v7 = sub_420250(v22);
      CPlayer::SetGuildName((char *)(*(_DWORD *)(v7 + 4) + 44));
      v8 = sub_420250(v22);
      CPlayer::SetGuildStandard(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 76));
      v14 = *(_DWORD *)(*(_DWORD *)(sub_420250(v23) + 4) + 24);
      sub_420250(v22);
      v15 = (char *)CGuild::GetClass2Title(v14);
      v9 = sub_420250(v23);
      CPlayer::SetGuildClass(*(_DWORD *)(*(_DWORD *)(v9 + 4) + 24), v15);
      v16 = *(_DWORD *)sub_420250(v22);
      sub_420250(v22);
      CGuild::SendMemberInfo(a1, v16);
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v22) + 4) + 396) )
      {
        sub_420250(v22);
        CAlliance::AllianceInfo(a1);
      }
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v23) + 4) + 28) )
      {
        v21 = (CIOBuffer *)sub_44FCE0(94, "bbsb", 0, 2, a1 + 32, *(unsigned __int8 *)(a1 + 60));
        v11 = v21;
        sub_420250(v22);
        CGuild::Broadcast(v11, a1);
        CIOBuffer::Release(v21);
      }
      if ( *(_BYTE *)(*(_DWORD *)(sub_420250(v22) + 4) + 174) )
      {
        v10 = sub_420250(v22);
        CPlayer::Write(a1, 94, "bbs", 0, 5, *(_DWORD *)(v10 + 4) + 174);
      }
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
  }
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 414F40: using guessed type _DWORD __stdcall sub_414F40(_DWORD, _DWORD);
// 415DD0: using guessed type _DWORD __stdcall CGuild::GetClass2Title(_DWORD);
// 416CF0: using guessed type _DWORD __stdcall sub_416CF0(void *Src, _DWORD);
// 419570: using guessed type _DWORD __stdcall sub_419570(_DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB20: using guessed type _DWORD __stdcall CPlayer::SetGuild(CIOObject *);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 46ABC0: using guessed type _DWORD __stdcall CPlayer::SetGID(_DWORD);
// 46ABF0: using guessed type _DWORD __stdcall CPlayer::SetGuildLevel(_DWORD);
// 46AC60: using guessed type _DWORD __stdcall CPlayer::SetGuildStandard(_DWORD);

//----- (004124F0) --------------------------------------------------------
void __cdecl CGuild::LoginCastle(int a1, int a2)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  CCastle::Login(a1, a2);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 41A790: using guessed type _DWORD __cdecl sub_41A790(_DWORD, _DWORD);

//----- (00412520) --------------------------------------------------------
void __thiscall CGuild::Logout(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  int v4; // eax
  CIOBuffer *v5; // [esp-8h] [ebp-2Ch]
  int v6; // [esp-4h] [ebp-28h]
  char v8[4]; // [esp+4h] [ebp-20h] BYREF
  char v9[4]; // [esp+8h] [ebp-1Ch] BYREF
  char v10[4]; // [esp+Ch] [ebp-18h] BYREF
  int v11; // [esp+10h] [ebp-14h] BYREF
  CIOBuffer *v12; // [esp+14h] [ebp-10h]
  CIOBuffer *v13; // [esp+18h] [ebp-Ch]
  int v14; // [esp+1Ch] [ebp-8h] BYREF
  char v15[4]; // [esp+20h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  v11 = CPlayer::GetGID(a2);
  sub_44AE20(&v14, &v11);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v10);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v14,
         v2) )
  {
    v13 = (CIOBuffer *)sub_44FCE0(94, "bbs", 0, 3, a2 + 32);
    v5 = v13;
    sub_420250(&v14);
    CGuild::Broadcast(v5, a2);
    CIOBuffer::Release(v13);
    sub_44AF50(v9, v14);
    CBase::Delete((char *)this);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
  }
  else
  {
    sub_44AE20(v15, a2 + 452);
    v3 = sub_430C20(v8);
    if ( (unsigned __int8)unknown_libname_16(v3) )
    {
      v6 = *(_DWORD *)(a2 + 452);
      v4 = CPlayer::GetGID(a2);
      LOG_ERR("CGuild::Logout() member not find (gid:%d,pid:%d)", v4, v6);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 32) = 0;
      CIOObject::Release((volatile int *)a2);
      CPlayer::SetGuild(0);
      CPlayer::SetGuildLevel(0);
      CPlayer::SetGuildName((char *)&Src);
      CPlayer::SetGuildStandard(0);
      CPlayer::SetGuildClass(0, (char *)&Src);
      if ( --*(_DWORD *)(this + 32) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 28) )
        {
          v12 = (CIOBuffer *)sub_44FCE0(94, "bbs", 0, 3, a2 + 32);
          CGuild::Broadcast(v12, a2);
          CIOBuffer::Release(v12);
        }
      }
      else
      {
        *(_DWORD *)(this + 356) = GetTickCount() + 600000;
      }
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
  }
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44AF50: using guessed type _DWORD __stdcall sub_44AF50(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46AB20: using guessed type _DWORD __stdcall CPlayer::SetGuild(CIOObject *);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 46ABF0: using guessed type _DWORD __stdcall CPlayer::SetGuildLevel(_DWORD);
// 46AC60: using guessed type _DWORD __stdcall CPlayer::SetGuildStandard(_DWORD);

//----- (00412720) --------------------------------------------------------
void __cdecl CGuild::DelPlayer(int a1, int a2)
{
  int v2; // eax
  int v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  DWORD v8; // esi
  int v9; // eax
  int v10; // eax
  CIOBuffer *v11; // [esp-8h] [ebp-3Ch]
  int v12; // [esp-4h] [ebp-38h]
  _DWORD *v13; // [esp+4h] [ebp-30h]
  char v14[4]; // [esp+8h] [ebp-2Ch] BYREF
  void *v15; // [esp+Ch] [ebp-28h]
  char v16[4]; // [esp+10h] [ebp-24h] BYREF
  char v17[4]; // [esp+14h] [ebp-20h] BYREF
  char v18[4]; // [esp+18h] [ebp-1Ch] BYREF
  int v19; // [esp+1Ch] [ebp-18h] BYREF
  CIOBuffer *v20; // [esp+20h] [ebp-14h]
  void *v21; // [esp+24h] [ebp-10h]
  volatile int *v22; // [esp+28h] [ebp-Ch]
  char v23[4]; // [esp+2Ch] [ebp-8h] BYREF
  char v24[4]; // [esp+30h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v24, &a2);
  v2 = sub_430C20(v18);
  if ( (unsigned __int8)unknown_libname_16(v2) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return;
  }
  if ( a2 == a1 )
  {
    v3 = sub_420250(v24);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(*(_DWORD *)(v3 + 4) + 380),
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v23);
    while ( 1 )
    {
      sub_420250(v24);
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v16);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v23,
              v4) )
        break;
      v22 = *(volatile int **)(*(_DWORD *)(sub_420250(v23) + 4) + 32);
      if ( v22 )
      {
        CPlayer::SetGID(0);
        CPlayer::SetGuild(0);
        CPlayer::SetGuildLevel(0);
        CPlayer::SetGuildName((char *)&Src);
        CPlayer::SetGuildStandard(0);
        CPlayer::SetGuildClass(0, (char *)&Src);
        CPlayer::Write(v22, 94, "bb", 0, 43);
        v5 = std___Mpunct_wchar_t___do_frac_digits(v22);
        v21 = (void *)sub_44FCE0(94, "bdssbd", 9, v5, &Src, &Src, 0, 0);
        CGuild::SendPlayerSight(v22, v21, 0);
        CIOObject::Release(v22);
        *(_DWORD *)(*(_DWORD *)(sub_420250(v23) + 4) + 32) = 0;
        v13 = (_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 32);
        --*v13;
      }
      v15 = *(void **)(sub_420250(v23) + 4);
      operator_delete(v15);
      sub_446090(v17, 0);
    }
    v6 = sub_420250(v24);
    sub_418530(*(_DWORD *)(v6 + 4) + 380);
    if ( *(int *)(*(_DWORD *)(sub_420250(v24) + 4) + 32) > 0 )
    {
      v7 = sub_420250(v24);
      LOG_ERR("CGuild::DelPlayer() plaer reference error (ref:%d)", *(_DWORD *)(*(_DWORD *)(v7 + 4) + 32));
    }
    v8 = GetTickCount() + 600000;
    *(_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 356) = v8;
  }
  else
  {
    sub_420250(v24);
    sub_44AE20(&v19, &a1);
    sub_420250(v24);
    v9 = sub_430C20(v14);
    if ( (unsigned __int8)unknown_libname_16(v9) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      LOG_ERR("CGuild::DelPlayer() not find member (gid:%d,pid:%d)", a2, a1);
      return;
    }
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v19) + 4) + 32) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      LOG_ERR("CGuild::DelPlayer error (gid:%d,pid:%d)", a2, a1);
      return;
    }
    v10 = sub_420250(&v19);
    v20 = (CIOBuffer *)sub_44FCE0(94, "bbs", 0, 32, *(_DWORD *)(v10 + 4));
    v11 = v20;
    sub_420250(v24);
    CGuild::Broadcast(v11, 0);
    CIOBuffer::Release(v20);
    v12 = v19;
    sub_420250(v24);
    CGuild::MemberDEL(v12);
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
}
// 4166C0: using guessed type _DWORD __stdcall sub_4166C0(_DWORD);
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 416D70: using guessed type _DWORD __cdecl sub_416D70(_DWORD, void *Src, _DWORD);
// 418530: using guessed type int __thiscall sub_418530(_DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB20: using guessed type _DWORD __stdcall CPlayer::SetGuild(CIOObject *);
// 46ABC0: using guessed type _DWORD __stdcall CPlayer::SetGID(_DWORD);
// 46ABF0: using guessed type _DWORD __stdcall CPlayer::SetGuildLevel(_DWORD);
// 46AC60: using guessed type _DWORD __stdcall CPlayer::SetGuildStandard(_DWORD);

//----- (00412A50) --------------------------------------------------------
int __cdecl CGuild::CreateTrial(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-B4h]
  int v7; // [esp-4h] [ebp-ACh]
  int v8; // [esp+4h] [ebp-A4h]
  int v9; // [esp+8h] [ebp-A0h]
  int v10; // [esp+Ch] [ebp-9Ch]
  int v11; // [esp+Ch] [ebp-9Ch]
  char *v12; // [esp+10h] [ebp-98h]
  char *v13; // [esp+14h] [ebp-94h]
  char v14; // [esp+18h] [ebp-90h] BYREF
  char v15[124]; // [esp+19h] [ebp-8Fh] BYREF
  __int16 v16; // [esp+95h] [ebp-13h]
  char v17; // [esp+97h] [ebp-11h]
  int v18; // [esp+98h] [ebp-10h]
  int v19; // [esp+9Ch] [ebp-Ch]
  int v20; // [esp+A0h] [ebp-8h]
  volatile int *v21; // [esp+A4h] [ebp-4h]

  v18 = dword_4D9830;
  if ( CPlayer::GetGID(a1) )
    return 13;
  if ( *(int *)(a1 + 60) < 30 )
    return 7;
  CChar::Lock(a1);
  if ( !*(_DWORD *)(a1 + 1016) || (v21 = (volatile int *)CParty::FindParty(*(_DWORD *)(a1 + 1016))) == 0 )
  {
    CChar::Unlock(a1);
    return 12;
  }
  CChar::Unlock(a1);
  if ( !CParty::IsHead(a1) )
  {
    CIOObject::Release(v21);
    return 11;
  }
  if ( CParty::GetSize(v21) < 6 )
  {
    CIOObject::Release(v21);
    return 12;
  }
  CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 1020));
  if ( !*(_DWORD *)(a1 + 1096)
    || ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) > *(_DWORD *)(*(_DWORD *)(a1 + 1096) + 52) )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 1020));
    CIOObject::Release(v21);
    return 8;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 1020));
  v10 = CParty::GetPlayerList(v21);
  v8 = 0;
  v19 = 0;
  while ( v10 )
  {
    if ( !v19 )
    {
      v2 = unknown_libname_15(v10);
      if ( CPlayer::GetGID(v2) )
        v19 = 1;
      else
        v8 += *(_DWORD *)(unknown_libname_15(v10) + 468);
    }
    v10 = CBaseList::Pop(v10);
  }
  if ( v19 )
  {
    CIOObject::Release(v21);
    return 13;
  }
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    if ( v8 < 1 )
      goto LABEL_26;
  }
  else if ( v8 < 60 )
  {
LABEL_26:
    CIOObject::Release(v21);
    return 9;
  }
  v12 = (char *)CGuild::Create(*(_DWORD *)(a1 + 452));
  if ( v12 )
  {
    v14 = 0;
    memset(v15, 0, sizeof(v15));
    v16 = 0;
    v17 = 0;
    v13 = &v14;
    v11 = CParty::GetPlayerList(v21);
    v9 = 0;
    v20 = 0;
    CRWLock::WriteLock((CRWLock *)&unk_4E0980);
    while ( v11 )
    {
      if ( !v9 )
      {
        v7 = *(_DWORD *)(a1 + 452) != *(_DWORD *)(unknown_libname_15(v11) + 452) ? 8 : 1;
        v3 = unknown_libname_15(v11);
        if ( CGuild::MemberADD(*(_DWORD *)(a1 + 452), v3, v7) )
        {
          v4 = unknown_libname_15(v11);
          v13 = (char *)sub_44F9B0(v13, *(_DWORD *)(v4 + 452));
          ++v20;
        }
        else
        {
          v9 = *(_DWORD *)(unknown_libname_15(v11) + 452);
        }
      }
      v11 = CBaseList::Pop(v11);
    }
    if ( v9 )
    {
      LOG_ERR("CGuild::CreateTrial() member add error (leader:%d,pid:%d)", *(_DWORD *)(a1 + 452), v9);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&dword_4E0974,
        (const int *)(a1 + 452));
      CBase::Delete(v12);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      CIOObject::Release(v21);
      result = 1;
    }
    else
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      CIOObject::Release(v21);
      v6 = (unsigned __int8)v20;
      v5 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a1);
      CDBSocket::Write(39, "dbm", v5, v6, &v14, v13 - &v14);
      result = 0;
    }
  }
  else
  {
    CIOObject::Release(v21);
    LOG_ERR("CGuild::CreateTrial() temp guild create error (pid:%d)", *(_DWORD *)(a1 + 452));
    result = 1;
  }
  return result;
}
// 412E90: using guessed type int __thiscall CChar::Lock(_DWORD);
// 412EB0: using guessed type int __thiscall CChar::Unlock(_DWORD);
// 412ED0: using guessed type int __thiscall sub_412ED0(_DWORD);
// 4164B0: using guessed type _DWORD __cdecl sub_4164B0(_DWORD);
// 416570: using guessed type _DWORD __stdcall sub_416570(_DWORD, _DWORD, _DWORD);
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 44D4E0: using guessed type _DWORD __cdecl CParty::FindParty(char);
// 44D890: using guessed type _DWORD __stdcall sub_44D890(_DWORD);
// 44F390: using guessed type int __thiscall sub_44F390(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00412E90) --------------------------------------------------------
void __thiscall CChar::Lock(int this)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 396));
}

//----- (00412EB0) --------------------------------------------------------
void __thiscall CChar::Unlock(int this)
{
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 396));
}

//----- (00412ED0) --------------------------------------------------------
unsigned int __thiscall CParty::GetSize(int this)
{
  return std::vector<unsigned long>::size((std::vector<unsigned long> *)(this + 32));
}

//----- (00412EF0) --------------------------------------------------------
int __thiscall CGuild::CreateTrialSecedeAnswer(char *this, int a2, int a3, int a4)
{
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // [esp-4h] [ebp-1Ch]
  int v9; // [esp+4h] [ebp-14h] BYREF
  int _Keyval; // [esp+8h] [ebp-10h] BYREF
  char v11[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v12[4]; // [esp+10h] [ebp-8h] BYREF
  CIOBuffer *v13; // [esp+14h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  if ( a3 )
  {
    sub_44AE20(v12, &a3);
    v4 = sub_430C20(v11);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      _Keyval = CPlayer::GetGID(a2);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&unk_4E0974,
        &_Keyval);
      CBase::Delete(this);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 1;
    }
    else
    {
      v7 = a4;
      v6 = sub_420250(v12);
      CPlayer::Write(a2, 94, "bbsd", 0, 6, *(_DWORD *)(v6 + 4), v7);
      v9 = CPlayer::GetGID(a2);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&unk_4E0974,
        &v9);
      CBase::Delete(this);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 0;
    }
  }
  else
  {
    v13 = (CIOBuffer *)sub_44FCE0(94, "b", 2);
    CGuild::Broadcast(v13, a2);
    CIOBuffer::Release(v13);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 14;
  }
  return result;
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00413020) --------------------------------------------------------
int __thiscall CGuild::CreateConsent(char *this, int a2, int a3)
{
  int v3; // eax
  int result; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-4h] [ebp-30h]
  int v10; // [esp-4h] [ebp-30h]
  int v12; // [esp+4h] [ebp-28h] BYREF
  int v13; // [esp+8h] [ebp-24h] BYREF
  char v14[4]; // [esp+Ch] [ebp-20h] BYREF
  char v15[4]; // [esp+10h] [ebp-1Ch] BYREF
  int v16; // [esp+14h] [ebp-18h] BYREF
  int _Keyval; // [esp+18h] [ebp-14h] BYREF
  char v18[4]; // [esp+1Ch] [ebp-10h] BYREF
  int v19; // [esp+20h] [ebp-Ch] BYREF
  int v20; // [esp+24h] [ebp-8h]
  CIOBuffer *v21; // [esp+28h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(&v19, a2 + 452);
  v3 = sub_430C20(v18);
  if ( (unsigned __int8)unknown_libname_16(v3) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 15;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v19) + 4) + 24) == 1
         || *(_DWORD *)(*(_DWORD *)(sub_420250(&v19) + 4) + 24) == 8 )
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v19) + 4) + 24) != 1 )
      *(_DWORD *)(*(_DWORD *)(sub_420250(&v19) + 4) + 24) = 7;
    v5 = sub_420250(&v19);
    v21 = (CIOBuffer *)sub_44FCE0(94, "bbsb", 0, 17, *(_DWORD *)(v5 + 4), (unsigned __int8)a3);
    CGuild::Broadcast(v21, 0);
    CIOBuffer::Release(v21);
    if ( a3 )
    {
      if ( CGuild::IsAllConsent(this) )
      {
        v16 = CPlayer::GetGID(a2);
        v19 = *(_DWORD *)sub_44AE20(v15, &v16);
        v6 = sub_430C20(v14);
        if ( (unsigned __int8)unknown_libname_16(v6) )
        {
          v13 = CPlayer::GetGID(a2);
          std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&dword_4E0974,
            &v13);
          CBase::Delete(this);
          CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
          v9 = *(_DWORD *)(a2 + 452);
          v7 = CPlayer::GetGID(a2);
          LOG_ERR("CGuild::CreateConsent() leader not find (leader:%d,pid:%d)", v7, v9);
          result = 1;
        }
        else
        {
          v20 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v19) + 4) + 32);
          if ( v20 )
          {
            CPlayer::Write(v20, 94, "b", 4);
            CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
            result = 0;
          }
          else
          {
            v12 = CPlayer::GetGID(a2);
            std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
              (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&dword_4E0974,
              &v12);
            CBase::Delete(this);
            CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
            v10 = *(_DWORD *)(a2 + 452);
            v8 = CPlayer::GetGID(a2);
            LOG_ERR("CGuild::CreateConsent() leader logout error (leader:%d,pid:%d)", v8, v10);
            result = 1;
          }
        }
      }
      else
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 0;
      }
    }
    else
    {
      _Keyval = CPlayer::GetGID(a2);
      std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&dword_4E0974,
        &_Keyval);
      CBase::Delete(this);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 0;
    }
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 16;
  }
  return result;
}
// 4132A0: using guessed type int __thiscall sub_4132A0(_DWORD);
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (004132A0) --------------------------------------------------------
int __thiscall CGuild::IsAllConsent(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+4h] [ebp-Ch] BYREF
  char v4[4]; // [esp+8h] [ebp-8h] BYREF
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 24) == 8 )
      return 0;
    sub_446090(v4, 0);
  }
  return 1;
}
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00413310) --------------------------------------------------------
int __stdcall CGuild::CreateGuildName(int a1, char *Str1)
{
  int v3; // eax

  if ( CPlayer::GetGID(a1) != *(_DWORD *)(a1 + 452) )
    return 22;
  if ( !IsValidName(Str1) )
    return 18;
  if ( CGuild::IsSameName(Str1) )
    return 19;
  v3 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a1);
  CDBSocket::Write(41, "ds", v3, Str1);
  return 0;
}
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00413380) --------------------------------------------------------
int __thiscall CGuild::CreateGuildNameAnswer(int this, int a2, int a3, char *Source)
{
  int result; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  char *v6; // eax
  int v7; // eax
  int v8; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v9; // eax
  int v10; // eax
  int v11; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  int v13; // eax
  int v14; // [esp-4h] [ebp-60h]
  int v15; // [esp+0h] [ebp-5Ch]
  int v16; // [esp+4h] [ebp-58h]
  int v17; // [esp+8h] [ebp-54h]
  char v19[4]; // [esp+10h] [ebp-4Ch] BYREF
  char v20[4]; // [esp+14h] [ebp-48h] BYREF
  char v21[4]; // [esp+18h] [ebp-44h] BYREF
  char v22[4]; // [esp+1Ch] [ebp-40h] BYREF
  char v23[4]; // [esp+20h] [ebp-3Ch] BYREF
  char v24[4]; // [esp+24h] [ebp-38h] BYREF
  int v25; // [esp+28h] [ebp-34h] BYREF
  int _Keyval; // [esp+2Ch] [ebp-30h] BYREF
  char v27[8]; // [esp+30h] [ebp-2Ch] BYREF
  char v28[8]; // [esp+38h] [ebp-24h] BYREF
  char v29[4]; // [esp+40h] [ebp-1Ch] BYREF
  char v30[4]; // [esp+44h] [ebp-18h] BYREF
  int v31; // [esp+48h] [ebp-14h] BYREF
  CIOObject *v32; // [esp+4Ch] [ebp-10h]
  int v33; // [esp+50h] [ebp-Ch]
  char v34[8]; // [esp+54h] [ebp-8h] BYREF

  if ( a3 == 2 )
    return 1;
  if ( a3 )
    return 19;
  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  if ( CGuild::IsAllConsent(this) )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(a2 + 1020));
    if ( *(_DWORD *)(a2 + 1096)
      && ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) <= *(_DWORD *)(*(_DWORD *)(a2 + 1096) + 52) )
    {
      v32 = *(CIOObject **)(a2 + 1096);
      if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v32 + 120))(
              v32,
              a2,
              31,
              -((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000)) )
        CPlayer::_OutofInven(v32);
      CIOCriticalSection::Leave((CIOCriticalSection *)(a2 + 1020));
      strcpy((char *)(this + 44), Source);
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v31);
      while ( 1 )
      {
        v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v29);
        if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v31,
                v5) )
          break;
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v31) + 4) + 24) != 1 )
          *(_DWORD *)(*(_DWORD *)(sub_420250(&v31) + 4) + 24) = 6;
        v33 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v31) + 4) + 32);
        if ( v33 )
          CPlayer::SetGuildName((char *)(this + 44));
        sub_446090(v30, 0);
      }
      v6 = (char *)CPlayer::GetGID(a2);
      v7 = sub_418940((std::pair<char const * const,CItem *> *)v27, v6, (CItem *)this);
      unknown_libname_12(v7);
      sub_445DF0(
        (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v34,
        v28);
      if ( v34[4] )
      {
        v25 = CPlayer::GetGID(a2);
        std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
          (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&unk_4E0974,
          &v25);
        if ( 10000 * *(_DWORD *)(a2 + 468) >= 0 )
          v17 = 10000 * *(_DWORD *)(a2 + 468);
        else
          v17 = 0;
        if ( v17 <= 2000000000 )
        {
          if ( 10000 * *(_DWORD *)(a2 + 468) >= 0 )
            v15 = 10000 * *(_DWORD *)(a2 + 468);
          else
            v15 = 0;
          v16 = v15;
        }
        else
        {
          v16 = 2000000000;
        }
        *(_DWORD *)(this + 64) = v16;
        v31 = *(_DWORD *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
                           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v24);
        while ( 1 )
        {
          v9 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v22);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v31,
                  v9) )
            break;
          v33 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v31) + 4) + 32);
          if ( v33 )
          {
            CPlayer::Write(v33, 94, "bbs", 0, 21, this + 44);
            v10 = CPlayer::GetGID(a2);
            CGuild::SendMemberInfo(v33, v10);
          }
          sub_446090(v23, 0);
        }
        v11 = CPlayer::GetGID(a2);
        CDBSocket::Write(42, "ds", v11, Source);
        v31 = *(_DWORD *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
                           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v21);
        while ( 1 )
        {
          v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v19);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v31,
                  v12) )
            break;
          if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v31) + 4) + 24) != 1 )
          {
            v14 = *(_DWORD *)sub_420250(&v31);
            v13 = CPlayer::GetGID(a2);
            CDBSocket::Write(43, "dd", v13, v14);
          }
          sub_446090(v20, 0);
        }
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 0;
      }
      else
      {
        v8 = CPlayer::GetGID(a2);
        LOG_ERR("CGuild::CreateGuildName() guild insert error (gid:%d)", v8);
        _Keyval = CPlayer::GetGID(a2);
        std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(
          (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&unk_4E0974,
          &_Keyval);
        CBase::Delete((char *)this);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 1;
      }
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(a2 + 1020));
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 8;
    }
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 20;
  }
  return result;
}
// 414F40: using guessed type _DWORD __stdcall CGuild::SendMemberInfo(_DWORD, _DWORD);
// 418940: using guessed type _DWORD __cdecl sub_418940(std::pair<char const * const,CItem *> *, char *_Val1, CItem *_Val2);
// 41CF00: using guessed type _DWORD __stdcall unknown_libname_12(_DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00413790) --------------------------------------------------------
int __thiscall CGuild::IsSkillAble(_DWORD *this, int a2, char a3)
{
  int result; // eax

  switch ( a2 )
  {
    case 1:
      result = 1;
      break;
    case 2:
      result = this[90] & (1 << a3);
      break;
    case 3:
      result = this[91] & (1 << a3);
      break;
    case 4:
      result = this[92] & (1 << a3);
      break;
    case 5:
      result = this[93] & (1 << a3);
      break;
    case 6:
      result = this[94] & (1 << a3);
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (00413850) --------------------------------------------------------
int __thiscall CGuild::Conflux(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-8h] [ebp-18h]
  int v9; // [esp-4h] [ebp-14h]
  char v11[4]; // [esp+4h] [ebp-Ch] BYREF
  CIOObject *v12; // [esp+8h] [ebp-8h]
  char v13[4]; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v13, a2 + 452);
  v3 = sub_430C20(v11);
  if ( (unsigned __int8)unknown_libname_16(v3) )
  {
    v9 = *(_DWORD *)(a2 + 452);
    v4 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::Conflux() member find error (gid:%d,pid:%d)", v4, v9);
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  else
  {
    v6 = sub_420250(v13);
    if ( CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v6 + 4) + 24), 0) )
    {
      if ( CGuild::IsTempMemberFUll(this) )
      {
        CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
        result = 23;
      }
      else if ( CCastle::IsAllCastleWarRelation(this) && (CGuild::IsWarWaitingPeriod() || CGuild::IsWarringPeriod()) )
      {
        CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
        result = 94;
      }
      else
      {
        CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
        v12 = CPlayer::FindPlayer(a3);
        if ( v12 )
        {
          if ( CChar::IsGState(v12, 256) )
          {
            CPlayer::Write(a2, 95, "b", 11);
            CIOObject::Release(v12, (volatile int *)v12 + 88);
            result = 0;
          }
          else if ( CPlayer::GetGID(v12) )
          {
            CIOObject::Release(v12, (volatile int *)v12 + 88);
            result = 25;
          }
          else
          {
            CPlayer::Write(a2, 94, "bbs", 0, 27, a3);
            v8 = *(_DWORD *)(a2 + 452);
            v7 = CPlayer::GetGID(a2);
            CPlayer::Write(v12, 94, "bdds", 14, v7, v8, this + 11);
            CIOObject::Release(v12, (volatile int *)v12 + 88);
            result = 0;
          }
        }
        else
        {
          result = 24;
        }
      }
    }
    else
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 413DB0: using guessed type int __thiscall sub_413DB0(_DWORD);
// 417430: using guessed type int sub_417430(void);
// 417450: using guessed type int CGuild::IsWarringPeriod(void);
// 41A670: using guessed type _DWORD __cdecl CCastle::IsAllCastleWarRelation(_DWORD);
// 420250: using guessed type int __thiscall sub_420250(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00413A50) --------------------------------------------------------
int __cdecl CGuild::ConfluxAnswer(_DWORD *a1, int a2, char a3, int a4)
{
  int result; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-8h] [ebp-1Ch]
  int v11; // [esp-4h] [ebp-18h]
  char v12[4]; // [esp+0h] [ebp-14h] BYREF
  char v13[4]; // [esp+4h] [ebp-10h] BYREF
  char v14[4]; // [esp+8h] [ebp-Ch] BYREF
  int v15; // [esp+Ch] [ebp-8h]
  char v16[4]; // [esp+10h] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CPlayer::GetGID(a1) )
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 29;
  }
  else
  {
    sub_44AE20(v14, &a2);
    v5 = sub_430C20(v13);
    if ( (unsigned __int8)unknown_libname_16(v5) )
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      result = 1;
    }
    else
    {
      sub_420250(v14);
      sub_44AE20(v16, &a3);
      sub_420250(v14);
      v6 = sub_430C20(v12);
      if ( (unsigned __int8)unknown_libname_16(v6) )
      {
        CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
        result = 1;
      }
      else
      {
        v15 = *(_DWORD *)(*(_DWORD *)(sub_420250(v16) + 4) + 32);
        if ( v15 )
        {
          v7 = sub_420250(v14);
          if ( CCastle::IsAllCastleWarRelation(*(_DWORD *)(v7 + 4))
            && (CGuild::IsWarWaitingPeriod() || CGuild::IsWarringPeriod()) )
          {
            CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
            result = 94;
          }
          else if ( a4 )
          {
            v8 = sub_420250(v14);
            if ( CGuild::IsTempMemberFUll(*(_DWORD *)(v8 + 4)) )
            {
              CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
              result = 23;
            }
            else
            {
              CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
              v11 = a2;
              v10 = a1[113];
              v9 = std___Mpunct_wchar_t___do_frac_digits(a1);
              CDBSocket::Write(40, "ddd", v9, v10, v11);
              result = 0;
            }
          }
          else
          {
            CPlayer::Write(v15, 94, "bbs", 0, 28, a1 + 8);
            CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
            result = 0;
          }
        }
        else
        {
          CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
          result = 24;
        }
      }
    }
  }
  return result;
}
// 413DB0: using guessed type int __thiscall CGuild::IsTempMemberFUll(_DWORD);
// 417430: using guessed type int CGuild::IsWarWaitingPeriod(void);
// 417450: using guessed type int CGuild::IsWarringPeriod(void);
// 41A670: using guessed type _DWORD __cdecl CCastle::IsAllCastleWarRelation(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00413C20) --------------------------------------------------------
int __cdecl CGuild::ConfluxSecedeAnswer(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // eax
  int v5; // [esp-Ch] [ebp-18h]
  CIOBuffer *v6; // [esp-8h] [ebp-14h]
  int v7; // [esp-4h] [ebp-10h]
  char v8[4]; // [esp+0h] [ebp-Ch] BYREF
  char v9[4]; // [esp+4h] [ebp-8h] BYREF
  CIOBuffer *v10; // [esp+8h] [ebp-4h]

  if ( a3 )
  {
    CPlayer::Write(a1, 94, "bbsd", 0, 6, a1 + 32, a3);
    result = 0;
  }
  else
  {
    CRWLock::WriteLock((CRWLock *)&unk_4E0980);
    sub_44AE20(v9, &a2);
    v4 = sub_430C20(v8);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 1;
    }
    else
    {
      v5 = a2;
      sub_420250(v9);
      if ( CGuild::MemberADD(v5, a1, 6) )
      {
        CDBSocket::Write(43, "dd", a2, *(_DWORD *)(a1 + 452));
        v7 = a2;
        sub_420250(v9);
        CGuild::SendMemberInfo(a1, v7);
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 396) )
        {
          sub_420250(v9);
          CAlliance::AllianceInfo(a1);
        }
        v10 = (CIOBuffer *)sub_44FCE0(94, "bbsb", 0, 30, a1 + 32, *(unsigned __int8 *)(a1 + 60));
        v6 = v10;
        sub_420250(v9);
        CGuild::Broadcast(v6, 0);
        CIOBuffer::Release(v10);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 0;
      }
      else
      {
        LOG_ERR("CGuild::ConfluxSecedeAnswer() member add error (gid:%d,pid:%d)", a2, *(_DWORD *)(a1 + 452));
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 1;
      }
    }
  }
  return result;
}
// 414F40: using guessed type _DWORD __stdcall CGuild::SendMemberInfo(_DWORD, _DWORD);
// 416570: using guessed type _DWORD __stdcall CGuild::MemberADD(_DWORD, _DWORD, _DWORD);
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 419570: using guessed type _DWORD __stdcall CAlliance::AllianceInfo(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00413DB0) --------------------------------------------------------
BOOL __thiscall CGuild::IsTempMemberFUll(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+4h] [ebp-10h] BYREF
  char v4[4]; // [esp+8h] [ebp-Ch] BYREF
  char v5[4]; // [esp+Ch] [ebp-8h] BYREF
  int v6; // [esp+10h] [ebp-4h]

  v6 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 24) == 6 )
      ++v6;
    sub_446090(v4, 0);
  }
  return v6 >= 10;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00413E30) --------------------------------------------------------
int __thiscall CGuild::Secession(_DWORD *this, int a2)
{
  int v2; // eax
  int v3; // eax
  int result; // eax
  int v5; // eax
  int v6; // [esp-4h] [ebp-1Ch]
  char v8[4]; // [esp+4h] [ebp-14h] BYREF
  CIOBuffer *v9; // [esp+8h] [ebp-10h]
  int v10; // [esp+Ch] [ebp-Ch]
  int v11; // [esp+10h] [ebp-8h] BYREF
  void *v12; // [esp+14h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(&v11, a2 + 452);
  v2 = sub_430C20(v8);
  if ( (unsigned __int8)unknown_libname_16(v2) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    v6 = *(_DWORD *)(a2 + 452);
    v3 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::Secession() member delete error (gid:%d,pid:%d)", v3, v6);
    result = 1;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v11) + 4) + 24) == 1 )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 31;
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)(sub_420250(&v11) + 4) + 32) = 0;
    CIOObject::Release((volatile int *)a2);
    CPlayer::SetGID(0);
    CPlayer::SetGuild(0);
    CPlayer::SetGuildLevel(0);
    CPlayer::SetGuildName((char *)&Src);
    CPlayer::SetGuildStandard(0);
    CPlayer::SetGuildClass(0, (char *)&Src);
    CPlayer::BreakStandard(a2);
    CGuild::MemberDEL(v11);
    v10 = time(0) + 259200;
    CDBSocket::Write(45, "dd", *(_DWORD *)(a2 + 452), v10);
    v5 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
    v12 = (void *)sub_44FCE0(94, "bdssbd", 9, v5, &Src, &Src, 0, 0);
    CGuild::SendPlayerSight(a2, v12, 0);
    if ( --this[8] )
    {
      v9 = (CIOBuffer *)sub_44FCE0(94, "bbs", 0, 32, a2 + 32);
      CGuild::Broadcast(v9, 0);
      CIOBuffer::Release(v9);
    }
    else
    {
      this[89] = GetTickCount() + 600000;
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 33;
  }
  return result;
}
// 4166C0: using guessed type _DWORD __stdcall CGuild::MemberDEL(_DWORD);
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 416D70: using guessed type _DWORD __cdecl CGuild::SendPlayerSight(_DWORD, void *Src, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46AB20: using guessed type _DWORD __stdcall CPlayer::SetGuild(CIOObject *);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 46ABC0: using guessed type _DWORD __stdcall CPlayer::SetGID(_DWORD);
// 46ABF0: using guessed type _DWORD __stdcall CPlayer::SetGuildLevel(_DWORD);
// 46AC60: using guessed type _DWORD __stdcall CPlayer::SetGuildStandard(_DWORD);

//----- (00414030) --------------------------------------------------------
int __thiscall CGuild::Banish(_DWORD *this, int a2, char *Str1)
{
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  _DWORD *v9; // eax
  int v10; // [esp-4h] [ebp-28h]
  int v11; // [esp-4h] [ebp-28h]
  char v13[4]; // [esp+4h] [ebp-20h] BYREF
  char v14[4]; // [esp+8h] [ebp-1Ch] BYREF
  void *v15; // [esp+Ch] [ebp-18h]
  int v16; // [esp+10h] [ebp-14h]
  int v17; // [esp+14h] [ebp-10h] BYREF
  volatile int *v18; // [esp+18h] [ebp-Ch]
  char v19[4]; // [esp+1Ch] [ebp-8h] BYREF
  CIOBuffer *v20; // [esp+20h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v19, a2 + 452);
  v3 = sub_430C20(v14);
  if ( (unsigned __int8)unknown_libname_16(v3) )
  {
    v10 = *(_DWORD *)(a2 + 452);
    v4 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::Banish() member find error (gid:%d,pid:%d)", v4, v10);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  else
  {
    v6 = sub_420250(v19);
    if ( CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v6 + 4) + 24), 1) )
    {
      CGuild::FindMember((int)&v17, Str1);
      v7 = sub_430C20(v13);
      if ( (unsigned __int8)unknown_libname_16(v7) )
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 4;
      }
      else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v17) + 4) + 24) == 1 )
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 34;
      }
      else
      {
        v20 = (CIOBuffer *)sub_44FCE0(94, "bbs", 0, 35, Str1);
        CGuild::Broadcast(v20, 0);
        CIOBuffer::Release(v20);
        v18 = *(volatile int **)(*(_DWORD *)(sub_420250(&v17) + 4) + 32);
        if ( v18 )
        {
          if ( CPlayer::GetGID(v18) )
          {
            CPlayer::SetGID(0);
            CPlayer::SetGuild(0);
            CPlayer::SetGuildLevel(0);
            CPlayer::SetGuildName((char *)&Src);
            CPlayer::SetGuildStandard(0);
            CPlayer::SetGuildClass(0, (char *)&Src);
            CPlayer::BreakStandard((int)v18);
            v8 = std___Mpunct_wchar_t___do_frac_digits(v18);
            v15 = (void *)sub_44FCE0(94, "bdssbd", 9, v8, &Src, &Src, 0, 0);
            CGuild::SendPlayerSight(v18, v15, 0);
            if ( !--this[8] )
              LOG_ERR("CGuild::Banish() player reference error");
          }
          CIOObject::Release(v18);
          *(_DWORD *)(*(_DWORD *)(sub_420250(&v17) + 4) + 32) = 0;
        }
        v16 = time(0) + 259200;
        v11 = v16;
        v9 = (_DWORD *)sub_420250(&v17);
        CDBSocket::Write(45, "dd", *v9, v11);
        CGuild::MemberDEL(v17);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 36;
      }
    }
    else
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 4166C0: using guessed type _DWORD __stdcall CGuild::MemberDEL(_DWORD);
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 416D70: using guessed type _DWORD __cdecl CGuild::SendPlayerSight(_DWORD, void *Src, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46AB20: using guessed type _DWORD __stdcall CPlayer::SetGuild(CIOObject *);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 46ABC0: using guessed type _DWORD __stdcall CPlayer::SetGID(_DWORD);
// 46ABF0: using guessed type _DWORD __stdcall CPlayer::SetGuildLevel(_DWORD);
// 46AC60: using guessed type _DWORD __stdcall CPlayer::SetGuildStandard(_DWORD);

//----- (004142D0) --------------------------------------------------------
int __thiscall CGuild::Appointment(_DWORD *this, int a2, char *Str1, char *a4)
{
  int v4; // eax
  int v5; // eax
  int result; // eax
  int v7; // eax
  int v8; // eax
  int v9; // esi
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  _DWORD *v20; // eax
  int v21; // eax
  int v22; // [esp-10h] [ebp-58h]
  int v23; // [esp-Ch] [ebp-54h]
  int v24; // [esp-8h] [ebp-50h]
  void *v25; // [esp-8h] [ebp-50h]
  int v26; // [esp-8h] [ebp-50h]
  int v27; // [esp-4h] [ebp-4Ch]
  char *v28; // [esp-4h] [ebp-4Ch]
  int v29; // [esp-4h] [ebp-4Ch]
  int v30; // [esp-4h] [ebp-4Ch]
  int v31; // [esp-4h] [ebp-4Ch]
  int v32; // [esp+4h] [ebp-44h]
  int v33; // [esp+8h] [ebp-40h]
  int v34; // [esp+Ch] [ebp-3Ch]
  int v35; // [esp+10h] [ebp-38h]
  int v36; // [esp+14h] [ebp-34h]
  int v37; // [esp+18h] [ebp-30h]
  int v38; // [esp+1Ch] [ebp-2Ch]
  int v39; // [esp+20h] [ebp-28h]
  char v41[4]; // [esp+28h] [ebp-20h] BYREF
  char v42[4]; // [esp+2Ch] [ebp-1Ch] BYREF
  void *v43; // [esp+30h] [ebp-18h]
  int v44; // [esp+34h] [ebp-14h]
  __time32_t v45; // [esp+38h] [ebp-10h]
  int v46; // [esp+3Ch] [ebp-Ch] BYREF
  char v47[4]; // [esp+40h] [ebp-8h] BYREF
  CIOBuffer *v48; // [esp+44h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v47, a2 + 452);
  v4 = sub_430C20(v42);
  if ( (unsigned __int8)unknown_libname_16(v4) )
  {
    v27 = *(_DWORD *)(a2 + 452);
    v5 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::Appointment() member find error (gid:%d,pid:%d)", v5, v27);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 1;
  }
  v7 = sub_420250(v47);
  if ( !CGuild::IsSkillAble(this, *(_DWORD *)(*(_DWORD *)(v7 + 4) + 24), 3) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 22;
  }
  CGuild::FindMember((int)&v46, Str1);
  v8 = sub_430C20(v41);
  if ( (unsigned __int8)unknown_libname_16(v8) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 4;
  }
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 24) == 1 )
    goto LABEL_8;
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 24) == 2
    && (v9 = *(_DWORD *)(sub_420250(&v46) + 4), *(_DWORD *)(v9 + 36) > time(0)) )
  {
    v10 = sub_420250(&v46);
    CPlayer::Write(a2, 94, "bbd", 0, 39, *(_DWORD *)(*(_DWORD *)(v10 + 4) + 36));
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 0;
  }
  else
  {
    v44 = CGuild::GetTitle2Class(a4);
    if ( v44 )
    {
      if ( v44 == 1 )
      {
LABEL_8:
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        return 37;
      }
      v11 = sub_420250(&v46);
      if ( *(_DWORD *)(*(_DWORD *)(v11 + 4) + 24) == v44 )
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 41;
      }
      else if ( v44 < 6 && CGuild::IsMemberFull(this) )
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 40;
      }
      else if ( CGuild::IsAppointmentFull(v44) )
      {
        v45 = CGuild::GetAppointmentLimitTime(v44);
        if ( v45 && v45 > time(0) )
        {
          CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
          CPlayer::Write(a2, 94, "bbd", 0, 39, v45);
          result = 0;
        }
        else
        {
          if ( v44 == 6 )
          {
            if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20) >= 0 )
              v39 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20);
            else
              v39 = 0;
            if ( this[16] - v39 >= 0 )
            {
              if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20) >= 0 )
                v37 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20);
              else
                v37 = 0;
              v38 = this[16] - v37;
            }
            else
            {
              v38 = 0;
            }
            this[16] = v38;
          }
          else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 24) == 6 )
          {
            if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20) >= 0 )
              v36 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20);
            else
              v36 = 0;
            if ( v36 + this[16] <= 2000000000 )
            {
              if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20) >= 0 )
                v34 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 20);
              else
                v34 = 0;
              v35 = v34 + this[16];
            }
            else
            {
              v35 = 2000000000;
            }
            this[16] = v35;
          }
          if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
            v33 = CGuild::CalPenaltyTLevel(this);
          else
            v33 = CGuild::CalPenaltyLevel(this);
          CGuild::SetLevel(v33);
          if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 32) && (CGuild::GetGuildSkill(this[18]) & 1) != 0 )
          {
            v12 = sub_420250(&v46);
            *(_DWORD *)(*(_DWORD *)(v12 + 4) + 24) = v44;
            v28 = (char *)CGuild::GetClass2Title(v44);
            v24 = v44;
            sub_420250(&v46);
            CPlayer::SetGuildClass(v24, v28);
            v13 = sub_420250(&v46);
            v29 = CPlayer::GetGuildStandard(*(_DWORD *)(*(_DWORD *)(v13 + 4) + 32));
            v14 = sub_420250(&v46);
            v23 = CPlayer::GetGuildName(*(_DWORD *)(*(_DWORD *)(v14 + 4) + 32), 1, v29);
            v15 = sub_420250(&v46);
            v22 = CPlayer::GetGuildClassTitle(*(_DWORD *)(*(_DWORD *)(v15 + 4) + 32), v23);
            v16 = sub_420250(&v46);
            v17 = std___Mpunct_wchar_t___do_frac_digits(*(_DWORD **)(*(_DWORD *)(v16 + 4) + 32));
            v43 = (void *)sub_44FCE0(94, "bdssbd", 9, v17, v22);
            v25 = v43;
            v18 = sub_420250(&v46);
            CGuild::SendPlayerSight(*(_DWORD *)(*(_DWORD *)(v18 + 4) + 32), v25, 0);
          }
          else
          {
            v19 = sub_420250(&v46);
            *(_DWORD *)(*(_DWORD *)(v19 + 4) + 24) = v44;
          }
          if ( v44 == 2 )
            v32 = time(0) + 604800;
          else
            v32 = 0;
          *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 36) = v32;
          v30 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v46) + 4) + 36);
          v26 = (unsigned __int8)v44;
          v20 = (_DWORD *)sub_420250(&v46);
          CDBSocket::Write(46, "dbd", *v20, v26, v30);
          v31 = (unsigned __int8)v44;
          v21 = sub_420250(&v46);
          v48 = (CIOBuffer *)sub_44FCE0(94, "bbsb", 0, 42, *(_DWORD *)(v21 + 4), v31);
          CGuild::Broadcast(v48, 0);
          CIOBuffer::Release(v48);
          CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
          result = 0;
        }
      }
      else
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 38;
      }
    }
    else
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 55;
    }
  }
  return result;
}
// 415DD0: using guessed type _DWORD __stdcall CGuild::GetClass2Title(_DWORD);
// 415F20: using guessed type int __thiscall sub_415F20(_DWORD);
// 416000: using guessed type _DWORD __stdcall sub_416000(_DWORD);
// 416100: using guessed type _DWORD __stdcall sub_416100(_DWORD);
// 4167E0: using guessed type _DWORD __stdcall sub_4167E0(_DWORD);
// 416970: using guessed type _DWORD __cdecl sub_416970(_DWORD);
// 416B20: using guessed type int __thiscall CGuild::CalPenaltyLevel(_DWORD);
// 416BF0: using guessed type int __thiscall CGuild::CalPenaltyTLevel(_DWORD);
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 416D70: using guessed type _DWORD __cdecl CGuild::SendPlayerSight(_DWORD, void *Src, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 46ACD0: using guessed type int __thiscall sub_46ACD0(_DWORD, _DWORD, _DWORD);
// 46AD20: using guessed type int __thiscall sub_46AD20(_DWORD);
// 46AD70: using guessed type int __thiscall sub_46AD70(_DWORD, _DWORD);

//----- (00414890) --------------------------------------------------------
int __thiscall CGuild::Dissolution(int this, int a2)
{
  int v2; // eax
  int v3; // eax
  int result; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int v6; // eax
  int v7; // [esp-4h] [ebp-2Ch]
  void *v9; // [esp+4h] [ebp-24h]
  char v10[4]; // [esp+8h] [ebp-20h] BYREF
  char v11[4]; // [esp+Ch] [ebp-1Ch] BYREF
  char v12[4]; // [esp+10h] [ebp-18h] BYREF
  volatile int *v13; // [esp+14h] [ebp-14h]
  char v14[4]; // [esp+18h] [ebp-10h] BYREF
  int v15; // [esp+1Ch] [ebp-Ch]
  char v16[4]; // [esp+20h] [ebp-8h] BYREF
  void *v17; // [esp+24h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v16, a2 + 452);
  v2 = sub_430C20(v12);
  if ( (unsigned __int8)unknown_libname_16(v2) )
  {
    v7 = *(_DWORD *)(a2 + 452);
    v3 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::Dissolution() member find error (gid:%d,pid:%d)", v3, v7);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v16) + 4) + 24) == 1 )
  {
    if ( CCastle::IsAllCastleWarRelation(this) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 107;
    }
    else
    {
      v15 = time(0) + 259200;
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v14);
      while ( 1 )
      {
        v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v10);
        if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                (std::vector<CIOSocket::CIOTimer>::const_iterator *)v14,
                v5) )
          break;
        v13 = *(volatile int **)(*(_DWORD *)(sub_420250(v14) + 4) + 32);
        if ( v13 )
        {
          CPlayer::SetGID(0);
          CPlayer::SetGuild(0);
          CPlayer::SetGuildLevel(0);
          CPlayer::SetGuildName((char *)&Src);
          CPlayer::SetGuildStandard(0);
          CPlayer::SetGuildClass(0, (char *)&Src);
          CPlayer::BreakStandard((int)v13);
          CPlayer::Write(v13, 94, "bb", 0, 43);
          v6 = std___Mpunct_wchar_t___do_frac_digits(v13);
          v17 = (void *)sub_44FCE0(94, "bdssbd", 9, v6, &Src, &Src, 0, 0);
          CGuild::SendPlayerSight(v13, v17, 0);
          CIOObject::Release(v13);
          *(_DWORD *)(*(_DWORD *)(sub_420250(v14) + 4) + 32) = 0;
          --*(_DWORD *)(this + 32);
        }
        v9 = *(void **)(sub_420250(v14) + 4);
        operator_delete(v9);
        sub_446090(v11, 0);
      }
      sub_418530(this + 380);
      if ( *(int *)(this + 32) > 0 )
        LOG_ERR("CGuild::Dissolution() plaer reference error (ref:%d)", *(_DWORD *)(this + 32));
      *(_DWORD *)(this + 356) = GetTickCount() + 600000;
      CDBSocket::Write(47, "dd", *(_DWORD *)(a2 + 452), v15);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 44;
    }
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 22;
  }
  return result;
}
// 416D70: using guessed type _DWORD __cdecl CGuild::SendPlayerSight(_DWORD, void *Src, _DWORD);
// 418530: using guessed type int __thiscall sub_418530(_DWORD);
// 41A670: using guessed type _DWORD __cdecl CCastle::IsAllCastleWarRelation(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB20: using guessed type _DWORD __stdcall CPlayer::SetGuild(CIOObject *);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 46ABC0: using guessed type _DWORD __stdcall CPlayer::SetGID(_DWORD);
// 46ABF0: using guessed type _DWORD __stdcall CPlayer::SetGuildLevel(_DWORD);
// 46AC60: using guessed type _DWORD __stdcall CPlayer::SetGuildStandard(_DWORD);

//----- (00414B30) --------------------------------------------------------
int __thiscall CGuild::TitleChange(int this, int a2, char *Str1, char *Source)
{
  int result; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // [esp-10h] [ebp-34h]
  int v15; // [esp-8h] [ebp-2Ch]
  int v16; // [esp-4h] [ebp-28h]
  char v18[4]; // [esp+4h] [ebp-20h] BYREF
  char v19[4]; // [esp+8h] [ebp-1Ch] BYREF
  char v20[4]; // [esp+Ch] [ebp-18h] BYREF
  char v21[4]; // [esp+10h] [ebp-14h] BYREF
  _DWORD *v22; // [esp+14h] [ebp-10h]
  int v23; // [esp+18h] [ebp-Ch]
  int v24; // [esp+1Ch] [ebp-8h] BYREF
  CIOBuffer *v25; // [esp+20h] [ebp-4h]

  if ( !IsValidName(Source) )
    return 45;
  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(&v24, a2 + 452);
  v5 = sub_430C20(v21);
  if ( (unsigned __int8)unknown_libname_16(v5) )
  {
    v16 = *(_DWORD *)(a2 + 452);
    v6 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::TitelChange() member find error (gid:%d,pid:%d)", v6, v16);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  else
  {
    v7 = sub_420250(&v24);
    if ( CGuild::IsSkillAble((_DWORD *)this, *(_DWORD *)(*(_DWORD *)(v7 + 4) + 24), 4) )
    {
      v23 = CGuild::GetTitle2Class(Str1);
      if ( v23 )
      {
        CGuild::SetClassTitle(v23, Source);
        v25 = (CIOBuffer *)sub_44FCE0(94, "bbbs", 0, 46, (unsigned __int8)v23, Source);
        CGuild::Broadcast(v25, 0);
        CIOBuffer::Release(v25);
        v24 = *(_DWORD *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
                           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20);
        while ( 1 )
        {
          v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v18);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v24,
                  v8) )
            break;
          v22 = *(_DWORD **)(*(_DWORD *)(sub_420250(&v24) + 4) + 32);
          if ( v22 )
          {
            v9 = sub_420250(&v24);
            if ( *(_DWORD *)(*(_DWORD *)(v9 + 4) + 24) == v23 )
            {
              CPlayer::SetGuildClass(v23, Source);
              if ( (CGuild::GetGuildSkill(*(_DWORD *)(this + 72)) & 1) != 0 )
              {
                v10 = CPlayer::GetGuildStandard(v22);
                v11 = CPlayer::GetGuildName(v22, 1, v10);
                v14 = CPlayer::GetGuildClassTitle(v22, v11);
                v12 = std___Mpunct_wchar_t___do_frac_digits(v22);
                v25 = (CIOBuffer *)sub_44FCE0(94, "bdssbd", 9, v12, v14);
                CGuild::SendPlayerSight(v22, v25, 0);
              }
            }
          }
          sub_446090(v19, 0);
        }
        v15 = (unsigned __int8)v23;
        v13 = CPlayer::GetGID(a2);
        CDBSocket::Write(48, "dbs", v13, v15, Source);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 0;
      }
      else
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 55;
      }
    }
    else
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 416970: using guessed type _DWORD __cdecl CGuild::GetGuildSkill(_DWORD);
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 416D70: using guessed type _DWORD __cdecl CGuild::SendPlayerSight(_DWORD, void *Src, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 46ACD0: using guessed type int __thiscall CPlayer::GetGuildName(_DWORD, _DWORD, _DWORD);
// 46AD20: using guessed type int __thiscall CPlayer::GetGuildStandard(_DWORD);
// 46AD70: using guessed type int __thiscall CPlayer::GetGuildClassTitle(_DWORD, _DWORD);

//----- (00414D90) --------------------------------------------------------
int __thiscall CGuild::SetTodayMessage(int this, int a2, char *Source)
{
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-4h] [ebp-14h]
  char v10[4]; // [esp+4h] [ebp-Ch] BYREF
  char v11[4]; // [esp+8h] [ebp-8h] BYREF
  CIOBuffer *v12; // [esp+Ch] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v11, a2 + 452);
  v3 = sub_430C20(v10);
  if ( (unsigned __int8)unknown_libname_16(v3) )
  {
    v8 = *(_DWORD *)(a2 + 452);
    v4 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::TitelChange() member find error (gid:%d,pid:%d)", v4, v8);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  else
  {
    v6 = sub_420250(v11);
    if ( CGuild::IsSkillAble((_DWORD *)this, *(_DWORD *)(*(_DWORD *)(v6 + 4) + 24), 2) )
    {
      if ( IsValidString(Source) )
      {
        strcpy((char *)(this + 174), Source);
        v12 = (CIOBuffer *)sub_44FCE0(94, "bbs", 0, 5, this + 174);
        CGuild::Broadcast(v12, 0);
        CIOBuffer::Release(v12);
        v7 = CPlayer::GetGID(a2);
        CDBSocket::Write(49, "ds", v7, this + 174);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 0;
      }
      else
      {
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        result = 56;
      }
    }
    else
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 22;
    }
  }
  return result;
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00414EF0) --------------------------------------------------------
void __thiscall CGuild::GetTodayMessage(char *this, int a2)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  CPlayer::Write(a2, 94, "bbs", 0, 5, this + 174);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00414F40) --------------------------------------------------------
int __thiscall CGuild::SendMemberInfo(int this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  int v5; // eax
  char *v6; // eax
  unsigned __int8 v7; // al
  int v9; // [esp-4h] [ebp-1024h]
  char v10; // [esp+7h] [ebp-1019h]
  char v12[4]; // [esp+Ch] [ebp-1014h] BYREF
  char v13[4]; // [esp+10h] [ebp-1010h] BYREF
  char v14[4]; // [esp+14h] [ebp-100Ch] BYREF
  char v15; // [esp+18h] [ebp-1008h] BYREF
  char v16[4092]; // [esp+19h] [ebp-1007h] BYREF
  __int16 v17; // [esp+1015h] [ebp-Bh]
  char v18; // [esp+1017h] [ebp-9h]
  int v19; // [esp+1018h] [ebp-8h]
  char *packet; // [esp+101Ch] [ebp-4h]

  v19 = dword_4D9830;
  v15 = 0;
  memset(v16, 0, sizeof(v16));
  v17 = 0;
  v18 = 0;
  packet = &v15;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v14);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v12);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v14,
            v3) )
      break;
    v4 = sub_420250(v14);
    packet = PutString(packet, *(const char **)(v4 + 4));
    v5 = sub_420250(v14);
    packet = (char *)sub_4189A0(packet, *(_BYTE *)(*(_DWORD *)(v5 + 4) + 24));
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v14) + 4) + 28) && *(_DWORD *)(*(_DWORD *)(sub_420250(v14) + 4) + 32) )
    {
      v10 = *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v14) + 4) + 32) + 60);
      v6 = (char *)sub_4189A0(packet, v10);
    }
    else
    {
      v6 = (char *)sub_4189A0(packet, 0);
    }
    packet = v6;
    sub_446090(v13, 0);
  }
  v9 = packet - &v15;
  v7 = unknown_libname_18(this + 380);
  CPlayer::Write(
    a2,
    94,
    "bdsssssssbm",
    6,
    a3,
    this + 44,
    this + 84,
    this + 99,
    this + 114,
    this + 129,
    this + 144,
    this + 159,
    v7,
    &v15,
    v9);
  return CPlayer::Write(
           a2,
           94,
           "bbdddd",
           8,
           *(_DWORD *)(this + 72),
           *(_DWORD *)(this + 64),
           *(_DWORD *)(this + 68),
           *(_DWORD *)(this + 80),
           *(_DWORD *)(this + 76));
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 4D9830: using guessed type int dword_4D9830;

//----- (00415170) --------------------------------------------------------
int __thiscall CGuild::AdminInfo(_DWORD *this, int a2)
{
  int result; // eax

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( *(_DWORD *)(a2 + 452) == CPlayer::GetGID(a2) )
  {
    CPlayer::Write(a2, 94, "bddddd", 7, this[90], this[91], this[92], this[93], this[94]);
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 0;
  }
  else
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 22;
  }
  return result;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00415200) --------------------------------------------------------
int __thiscall CGuild::BasicInfo(_DWORD *this, int a2)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  CPlayer::Write(a2, 94, "bbdddd", 8, this[18], this[16], this[17], this[20], this[19]);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
  return 0;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00415260) --------------------------------------------------------
int __thiscall CGuild::SetSkillAble(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int result; // eax

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  if ( *(_DWORD *)(a2 + 452) == CPlayer::GetGID(a2) )
  {
    this[90] = a3;
    this[91] = a4;
    this[92] = a5;
    this[93] = a6;
    this[94] = a7;
    CDBSocket::Write(51, "dddddd", *(_DWORD *)(a2 + 452), this[90], this[91], this[92], this[93], this[94]);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 47;
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 22;
  }
  return result;
}
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00415340) --------------------------------------------------------
int __thiscall CGuild::CheckStandard(int *this, _DWORD *a2, int a3)
{
  int result; // eax
  int v4; // eax
  int v6; // [esp+4h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  v6 = CPlayer::GetGID(a2);
  if ( a2[113] == v6 )
  {
    if ( this[18] >= 2 )
    {
      if ( !(unsigned __int16)this[19] )
      {
        v4 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CDBSocket::Write(68, "ddd", v4, v6, a3);
      }
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 0;
    }
    else
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 103;
    }
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 22;
  }
  return result;
}
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (004153F0) --------------------------------------------------------
int __thiscall CGuild::SetStandard(int *this, _DWORD *a2, int a3)
{
  int result; // eax
  int v4; // eax
  int v6; // [esp+4h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  v6 = CPlayer::GetGID(a2);
  if ( a2[113] == v6 )
  {
    if ( this[18] >= 2 )
    {
      v4 = std___Mpunct_wchar_t___do_frac_digits(a2);
      CDBSocket::Write(69, "ddd", v4, v6, a3);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 0;
    }
    else
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      result = 103;
    }
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 22;
  }
  return result;
}
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00415480) --------------------------------------------------------
int __thiscall CGuild::OnSetStandard(int this, int a2, int a3, int a4, int a5)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int v7; // [esp+0h] [ebp-20h]
  char v9[4]; // [esp+8h] [ebp-18h] BYREF
  char v10[4]; // [esp+Ch] [ebp-14h] BYREF
  CIOObject *v11; // [esp+10h] [ebp-10h]
  int v12; // [esp+14h] [ebp-Ch]
  char v13[4]; // [esp+18h] [ebp-8h] BYREF
  CIOObject *v14; // [esp+1Ch] [ebp-4h]

  if ( a3 )
  {
    CRWLock::WriteLock((CRWLock *)&unk_4E0980);
    *(_DWORD *)(this + 76) = a5;
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v13);
    while ( 1 )
    {
      v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v9);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v13,
              v5) )
        break;
      v12 = *(_DWORD *)(*(_DWORD *)(sub_420250(v13) + 4) + 32);
      if ( v12 )
      {
        CPlayer::SetGuildStandard(a5);
        CPlayer::Write(v12, 94, "bbd", 0, 48, a5);
      }
      sub_446090(v10, 0);
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
  }
  v14 = (CIOObject *)sub_450810();
  if ( v14 )
  {
    if ( a3 )
    {
      CIOCriticalSection::Enter((CIOObject *)((char *)v14 + 1020));
      v11 = (CIOObject *)*((_DWORD *)v14 + 274);
      if ( v11 )
      {
        v7 = *((int *)v11 + 13) <= 500000 ? *((_DWORD *)v11 + 13) : 500000;
        if ( !(*(int (__thiscall **)(CIOObject *, CIOObject *, int, int))(*(_DWORD *)v11 + 120))(v11, v14, 31, -v7) )
          CPlayer::_OutofInven(v11);
      }
      CIOCriticalSection::Leave((CIOObject *)((char *)v14 + 1020));
    }
    else
    {
      CPlayer::Write(v14, 94, "bb", 0, 102);
    }
    CIOObject::Release(v14, (volatile int *)v14 + 88);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);
// 46AC60: using guessed type _DWORD __stdcall CPlayer::SetGuildStandard(_DWORD);

//----- (00415600) --------------------------------------------------------
int __thiscall CGuild::SetExpADD(int *this, _DWORD *a2, int a3)
{
  int v4; // ecx
  int v5; // ecx
  int v6; // eax
  int v7; // eax
  int v8; // eax
  __int64 v9; // [esp-10h] [ebp-3Ch]
  __int64 v10; // [esp-10h] [ebp-3Ch]
  int v11; // [esp-8h] [ebp-34h]
  int v12; // [esp+0h] [ebp-2Ch]
  __int64 v13; // [esp+8h] [ebp-24h]
  int v15; // [esp+28h] [ebp-4h]

  if ( !*((_QWORD *)a2 + 59) )
    return 51;
  if ( a3 == 10 )
  {
    if ( dword_4D567C[2 * a2[15]] | dword_4D5678[2 * a2[15]] )
    {
      v4 = a2[15];
      LODWORD(v9) = dword_4D5678[2 * v4];
      HIDWORD(v9) = dword_4D567C[2 * v4];
      if ( v9 / 10 >= *((_QWORD *)a2 + 59) )
      {
        LODWORD(v13) = a2[118];
      }
      else
      {
        v5 = a2[15];
        HIDWORD(v10) = dword_4D567C[2 * v5];
        LODWORD(v10) = dword_4D5678[2 * v5];
        v13 = v10 / 10;
      }
      v12 = v13;
    }
    else
    {
      v12 = 0;
    }
    v15 = v12;
  }
  else
  {
    v15 = a2[118];
  }
  if ( v15 <= 0 )
  {
    LOG_ERR(
      "CGuild::SetExpADD() exp cal error (exppercent:%d,nextlevelexp:%d,exp:%d)",
      a3,
      dword_4D5678[2 * a2[15]],
      dword_4D567C[2 * a2[15]]);
    return 1;
  }
  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    if ( this[17] >= 3 )
      goto LABEL_16;
    this[17] += v15;
    if ( this[17] > 3 )
    {
      v15 -= this[17] - 3;
      this[17] = 3;
    }
    v7 = CGuild::CalPenaltyTLevel(this);
    CGuild::SetLevel(v7);
  }
  else
  {
    if ( this[17] >= 16000000 )
    {
LABEL_16:
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      return 53;
    }
    this[17] += v15;
    if ( this[17] > 16000000 )
    {
      v15 -= this[17] - 16000000;
      this[17] = 16000000;
    }
    v6 = CGuild::CalPenaltyLevel(this);
    CGuild::SetLevel(v6);
  }
  v11 = a2[113];
  v8 = CPlayer::GetGID(a2);
  CDBSocket::Write(50, "ddd", v8, v11, v15);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
  (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 88))(a2, 25, 0, v15, v15 >> 31);
  CPlayer::Write(a2, 94, "bbd", 0, 52, v15);
  return 0;
}
// 4167E0: using guessed type _DWORD __stdcall CGuild::SetLevel(_DWORD);
// 416B20: using guessed type int __thiscall CGuild::CalPenaltyLevel(_DWORD);
// 416BF0: using guessed type int __thiscall CGuild::CalPenaltyTLevel(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 4D5678: using guessed type int dword_4D5678[];

//----- (004158B0) --------------------------------------------------------
int __cdecl CGuild::SetExp(char *Str, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  _DWORD *v7; // eax
  int v8; // [esp-4h] [ebp-18h]
  int v9; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+4h] [ebp-10h] BYREF
  char v11[4]; // [esp+8h] [ebp-Ch] BYREF
  int v12; // [esp+Ch] [ebp-8h]
  char v13[4]; // [esp+10h] [ebp-4h] BYREF

  if ( a2 < 0 || a2 > 16000000 )
    return 0;
  if ( strlen(Str) > 0xE )
    return 0;
  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v13);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v10);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v13,
            v3) )
    {
      CDBSocket::Write(59, "sd", Str, a2);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      return 1;
    }
    v4 = sub_420250(v13);
    if ( !strcmp(Str, (const char *)(*(_DWORD *)(v4 + 4) + 44)) )
      break;
    sub_446090(v11, 0);
  }
  v12 = a2 - *(_DWORD *)(*(_DWORD *)(sub_420250(v13) + 4) + 68);
  *(_DWORD *)(*(_DWORD *)(sub_420250(v13) + 4) + 68) = a2;
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    v6 = sub_420250(v13);
    v9 = CGuild::CalPenaltyTLevel(*(_DWORD *)(v6 + 4));
  }
  else
  {
    v5 = sub_420250(v13);
    v9 = CGuild::CalPenaltyLevel(*(_DWORD *)(v5 + 4));
  }
  sub_420250(v13);
  CGuild::SetLevel(v9);
  v8 = v12;
  v7 = (_DWORD *)sub_420250(v13);
  CDBSocket::Write(50, "ddd", *v7, 0, v8);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
  return 1;
}
// 4167E0: using guessed type _DWORD __stdcall CGuild::SetLevel(_DWORD);
// 416B20: using guessed type int __thiscall CGuild::CalPenaltyLevel(_DWORD);
// 416BF0: using guessed type int __thiscall CGuild::CalPenaltyTLevel(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00415A20) --------------------------------------------------------
int __stdcall CGuild::SetConnectTell(int a1, int a2)
{
  int v2; // eax
  int v3; // eax
  int result; // eax
  int v5; // [esp-4h] [ebp-14h]
  char v6[4]; // [esp+4h] [ebp-Ch] BYREF
  char v7[4]; // [esp+8h] [ebp-8h] BYREF
  CIOBuffer *v8; // [esp+Ch] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v7, a1 + 452);
  v2 = sub_430C20(v6);
  if ( (unsigned __int8)unknown_libname_16(v2) )
  {
    v5 = *(_DWORD *)(a1 + 452);
    v3 = CPlayer::GetGID(a1);
    LOG_ERR("CGuild::SetConnectTell() member find error (gid:%d,pid:%d)", v3, v5);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  else if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v7) + 4) + 28) == a2 )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 49;
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)(sub_420250(v7) + 4) + 28) = a2;
    if ( a2 )
      v8 = (CIOBuffer *)sub_44FCE0(94, "bbsb", 0, 2, a1 + 32, *(_DWORD *)(a1 + 60));
    else
      v8 = (CIOBuffer *)sub_44FCE0(94, "bbs", 0, 3, a1 + 32);
    CGuild::Broadcast(v8, a1);
    CIOBuffer::Release(v8);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 50;
  }
  return result;
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00415B60) --------------------------------------------------------
void __stdcall CGuild::SetMemberLelvelUp(int a1, unsigned __int8 a2)
{
  CIOBuffer *v2; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  v2 = (CIOBuffer *)sub_44FCE0(94, "bbbs", 0, 54, a2, a1);
  CGuild::Broadcast(v2, 0);
  CIOBuffer::Release(v2);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (00415BC0) --------------------------------------------------------
int __thiscall CGuild::GetTitle2Class(const char *this, char *Str1)
{
  const char *v2; // eax
  const char *v4; // eax
  const char *v5; // eax
  const char *v6; // eax
  const char *v7; // eax
  const char *v8; // eax

  if ( !strcmp(Str1, "1") )
    return 1;
  v2 = GetStr(912);
  if ( !strcmp(Str1, v2) || !strcmp(Str1, this + 84) )
    return 1;
  if ( !strcmp(Str1, "2") )
    return 2;
  v4 = GetStr(913);
  if ( !strcmp(Str1, v4) || !strcmp(Str1, this + 99) )
    return 2;
  if ( !strcmp(Str1, "3") )
    return 3;
  v5 = GetStr(914);
  if ( !strcmp(Str1, v5) || !strcmp(Str1, this + 114) )
    return 3;
  if ( !strcmp(Str1, "4") )
    return 4;
  v6 = GetStr(915);
  if ( !strcmp(Str1, v6) || !strcmp(Str1, this + 129) )
    return 4;
  if ( !strcmp(Str1, "5") )
    return 5;
  v7 = GetStr(916);
  if ( !strcmp(Str1, v7) || !strcmp(Str1, this + 144) )
    return 5;
  if ( !strcmp(Str1, "6") )
    return 6;
  v8 = GetStr(917);
  if ( !strcmp(Str1, v8) || !strcmp(Str1, this + 159) )
    return 6;
  return 0;
}

//----- (00415DD0) --------------------------------------------------------
char *__thiscall CGuild::GetClass2Title(char *this, int a2)
{
  char *result; // eax

  switch ( a2 )
  {
    case 1:
      result = this + 84;
      break;
    case 2:
      result = this + 99;
      break;
    case 3:
      result = this + 114;
      break;
    case 4:
      result = this + 129;
      break;
    case 5:
      result = this + 144;
      break;
    default:
      result = this + 159;
      break;
  }
  return result;
}

//----- (00415E50) --------------------------------------------------------
char *__thiscall CGuild::SetClassTitle(char *this, int a2, char *Source)
{
  char *result; // eax

  result = (char *)a2;
  switch ( a2 )
  {
    case 1:
      result = strcpy(this + 84, Source);
      break;
    case 2:
      result = strcpy(this + 99, Source);
      break;
    case 3:
      result = strcpy(this + 114, Source);
      break;
    case 4:
      result = strcpy(this + 129, Source);
      break;
    case 5:
      result = strcpy(this + 144, Source);
      break;
    case 6:
      result = strcpy(this + 159, Source);
      break;
    default:
      return result;
  }
  return result;
}

//----- (00415F20) --------------------------------------------------------
BOOL __thiscall CGuild::IsMemberFull(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  BOOL result; // eax
  char v4[4]; // [esp+8h] [ebp-10h] BYREF
  char v5[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v6[4]; // [esp+10h] [ebp-8h] BYREF
  int v7; // [esp+14h] [ebp-4h]

  v7 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v6) + 4) + 24) != 6 )
      ++v7;
    sub_446090(v5, 0);
  }
  switch ( *(_DWORD *)(this + 72) )
  {
    case 1:
      result = v7 >= 12;
      break;
    case 2:
      result = v7 >= 26;
      break;
    case 3:
      result = v7 >= 40;
      break;
    case 4:
      result = v7 >= 54;
      break;
    default:
      result = 1;
      break;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00416000) --------------------------------------------------------
int __thiscall CGuild::IsAppointmentFull(int this, int a2)
{
  int result; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax
  char v7[4]; // [esp+8h] [ebp-10h] BYREF
  char v8[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v9[4]; // [esp+10h] [ebp-8h] BYREF
  unsigned int v10; // [esp+14h] [ebp-4h]

  if ( a2 == 5 || a2 == 6 )
    return 1;
  v10 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
            v3) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 24) == a2 )
      ++v10;
    sub_446090(v8, 0);
  }
  switch ( a2 )
  {
    case 2:
      return (int)v10 <= 0;
    case 3:
      v4 = unknown_libname_18(this + 380);
      result = v10 < v4 / 0x64;
      break;
    case 4:
      v5 = unknown_libname_18(this + 380);
      result = v10 < v5 / 0xA;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);

//----- (00416100) --------------------------------------------------------
int __thiscall CGuild::GetAppointmentLimitTime(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  int v7; // [esp+10h] [ebp-4h]

  v7 = 0;
  if ( a2 != 2 )
    return v7;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v3) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v6) + 4) + 24) == 2 )
      return *(_DWORD *)(*(_DWORD *)(sub_420250(v6) + 4) + 36);
    sub_446090(v5, 0);
  }
  return v7;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00416190) --------------------------------------------------------
int __stdcall CGuild::IsSameName(char *Str1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v1) )
      break;
    v2 = sub_420250(v6);
    if ( !strcmp(Str1, (const char *)(*(_DWORD *)(v2 + 4) + 44)) )
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      return 1;
    }
    sub_446090(v5, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00416230) --------------------------------------------------------
CIOObject *__cdecl sub_416230(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  char v4[4]; // [esp+4h] [ebp-8h] BYREF
  CIOObject *v5; // [esp+8h] [ebp-4h]

  v5 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v4, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
         v1) )
  {
    v5 = *(CIOObject **)(sub_420250(v4) + 4);
    CIOObject::AddRef(v5, (volatile int *)v5 + 10);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
  return v5;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (004162B0) --------------------------------------------------------
int __cdecl CGuild::FindGuild(char *Str1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E0968,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v1) )
      break;
    v2 = sub_420250(v6);
    if ( !strcmp(Str1, (const char *)(*(_DWORD *)(v2 + 4) + 44)) )
      return *(_DWORD *)(sub_420250(v6) + 4);
    sub_446090(v5, 0);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00416330) --------------------------------------------------------
int __thiscall CGuild::FindLeaderPlayer(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+4h] [ebp-Ch] BYREF
  char v4[4]; // [esp+8h] [ebp-8h] BYREF
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 24) == 1 )
      return *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 32);
    sub_446090(v4, 0);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (004163B0) --------------------------------------------------------
const char *__thiscall CGuild::GetLeaderName(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+4h] [ebp-Ch] BYREF
  char v4[4]; // [esp+8h] [ebp-8h] BYREF
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 24) == 1 )
      return *(const char **)(sub_420250(v5) + 4);
    sub_446090(v4, 0);
  }
  return &Src;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00416430) --------------------------------------------------------
int __thiscall CGuild::FindMember(int this, int a2, char *Str1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v7[4]; // [esp+4h] [ebp-Ch] BYREF
  int v8; // [esp+8h] [ebp-8h] BYREF
  int v9; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v9);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 380), v7);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v9,
            v3) )
      break;
    v4 = sub_420250(&v9);
    if ( !strcmp(Str1, *(const char **)(v4 + 4)) )
      break;
    sub_446090(&v9, &v8, 0);
  }
  *(_DWORD *)a2 = v9;
  return a2;
}

//----- (004164B0) --------------------------------------------------------
char *__usercall CGuild::Create@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char *a4)
{
  std::pair<char const * const,CItem *> *v4; // eax
  char *result; // eax
  char *v6; // [esp+4h] [ebp-2Ch]
  char v7[8]; // [esp+10h] [ebp-20h] BYREF
  char v8[8]; // [esp+18h] [ebp-18h] BYREF
  char *v9; // [esp+20h] [ebp-10h]
  char *v10; // [esp+24h] [ebp-Ch]
  char v11[8]; // [esp+28h] [ebp-8h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  v9 = (char *)operator_new(0x198u);
  if ( v9 )
    v6 = CGuild::CGuild(v9);
  else
    v6 = 0;
  v10 = v6;
  v4 = sub_418940((std::pair<char const * const,CItem *> *)v7, a4, (CItem *)v6);
  unknown_libname_12(v4);
  sub_445DF0(
    dword_4E0974,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v11,
    (std::pair<char const * const,CItem *> *)v8);
  if ( v11[4] )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980, a1, a2, a3);
    result = v10;
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980, a1, a2, a3);
    if ( v10 )
      (**(void (__thiscall ***)(char *, int))v10)(v10, 1);
    result = 0;
  }
  return result;
}
// 41CF00: using guessed type _DWORD __stdcall unknown_libname_12(_DWORD);

//----- (00416570) --------------------------------------------------------
int __userpurge CGuild::MemberADD@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7)
{
  std::pair<char const * const,CItem *> *v7; // eax
  int result; // eax
  char *v9; // eax
  char v11[8]; // [esp+8h] [ebp-20h] BYREF
  char v12[8]; // [esp+10h] [ebp-18h] BYREF
  CItem *v13; // [esp+18h] [ebp-10h]
  char *Destination; // [esp+1Ch] [ebp-Ch]
  char v15[8]; // [esp+20h] [ebp-8h] BYREF

  v13 = (CItem *)operator_new(0x28u);
  Destination = (char *)v13;
  v7 = sub_418940((std::pair<char const * const,CItem *> *)v11, *(char **)(a6 + 452), v13);
  unknown_libname_12(v7);
  sub_445DF0(
    (int *)(a1 + 380),
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v15,
    (std::pair<char const * const,CItem *> *)v12);
  if ( v15[4] )
  {
    CPlayer::SetGID((_DWORD *)a6, a5);
    CPlayer::SetGuild((CIOObject **)a6, (CIOObject *)a1);
    CPlayer::SetGuildLevel((_DWORD *)a6, *(_DWORD *)(a1 + 72));
    CPlayer::SetGuildName((char *)a6, (char *)(a1 + 44));
    CPlayer::SetGuildStandard((_DWORD *)a6, *(_DWORD *)(a1 + 76));
    v9 = CGuild::GetClass2Title((char *)a1, a7);
    CPlayer::SetGuildClass(a6, a7, v9);
    strcpy(Destination, (const char *)(a6 + 32));
    *((_DWORD *)Destination + 6) = a7;
    *((_DWORD *)Destination + 7) = 1;
    *((_DWORD *)Destination + 9) = 0;
    *((_DWORD *)Destination + 8) = a6;
    CIOObject::AddRef((volatile int *)a6, a2, a3, a4);
    ++*(_DWORD *)(a1 + 32);
    *(_DWORD *)(a1 + 356) = 0;
    *((_DWORD *)Destination + 5) = *(_DWORD *)(a6 + 468);
    result = 1;
  }
  else
  {
    operator_delete(Destination);
    result = 0;
  }
  return result;
}
// 41CF00: using guessed type _DWORD __stdcall unknown_libname_12(_DWORD);

//----- (004166C0) --------------------------------------------------------
_DWORD *__userpurge CGuild::MemberDEL@<eax>(int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int a4)
{
  int v5; // [esp+0h] [ebp-1Ch]
  int v6; // [esp+4h] [ebp-18h]
  int v7; // [esp+8h] [ebp-14h]
  int v8; // [esp+Ch] [ebp-10h]
  int v10; // [esp+14h] [ebp-8h] BYREF
  void *v11; // [esp+18h] [ebp-4h]

  if ( *(int *)(*(_DWORD *)(sub_420250(&a4) + 4) + 24) < 6 )
  {
    if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20) >= 0 )
      v8 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20);
    else
      v8 = 0;
    if ( a1[16] - v8 >= 0 )
    {
      if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20) >= 0 )
        v6 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20);
      else
        v6 = 0;
      v7 = a1[16] - v6;
    }
    else
    {
      v7 = 0;
    }
    a1[16] = v7;
    if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      v5 = CGuild::CalPenaltyTLevel(a1);
    else
      v5 = CGuild::CalPenaltyLevel(a1);
    CGuild::SetLevel((int)a1, a2, a3, v5);
  }
  v11 = *(void **)(sub_420250(&a4) + 4);
  operator_delete(v11);
  return sub_44AF50(a1 + 95, &v10, a4);
}

//----- (004167E0) --------------------------------------------------------
BOOL __userpurge CGuild::SetLevel@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int a4)
{
  BOOL result; // eax
  int v5; // esi
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  int v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  int *v9; // [esp-10h] [ebp-3Ch]
  int *v10; // [esp-Ch] [ebp-38h]
  int v11; // [esp-4h] [ebp-30h]
  char v13[4]; // [esp+8h] [ebp-24h] BYREF
  int v14; // [esp+Ch] [ebp-20h] BYREF
  char v15[4]; // [esp+10h] [ebp-1Ch] BYREF
  int v16; // [esp+14h] [ebp-18h] BYREF
  _DWORD *v17; // [esp+18h] [ebp-14h]
  int v18; // [esp+1Ch] [ebp-10h] BYREF
  CMemory **v19; // [esp+20h] [ebp-Ch]
  int *v20; // [esp+24h] [ebp-8h]
  int v21; // [esp+28h] [ebp-4h] BYREF

  result = a1;
  if ( *(_DWORD *)(a1 + 72) != a4 )
  {
    v5 = CGuild::GetGuildSkill(*(_DWORD *)(a1 + 72)) & 3;
    if ( v5 == (CGuild::GetGuildSkill(a4) & 3) )
    {
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(a1 + 380),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v18);
      while ( 1 )
      {
        v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(a1 + 380), v13);
        result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                   (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v18,
                   v8);
        if ( !result )
          break;
        v17 = *(_DWORD **)(*(_DWORD *)(sub_420250(&v18) + 4) + 32);
        if ( v17 )
          CPlayer::SetGuildLevel(v17, a4);
        sub_446090(&v18, &v14, 0);
      }
    }
    else
    {
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(a1 + 380),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v21);
      while ( 1 )
      {
        v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(a1 + 380), v15);
        result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                   (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v21,
                   v6);
        if ( !result )
          break;
        v20 = *(int **)(*(_DWORD *)(sub_420250(&v21) + 4) + 32);
        if ( v20 )
        {
          CPlayer::SetGuildLevel(v20, a4);
          if ( *(int *)(*(_DWORD *)(sub_420250(&v21) + 4) + 24) < 6 )
          {
            v11 = CPlayer::GetGuildStandard(v20);
            v10 = CPlayer::GetGuildName(v20);
            v9 = CPlayer::GetGuildClassTitle(v20);
            v7 = std___Mpunct_wchar_t___do_frac_digits(v20);
            v19 = sub_44FCE0(a2, a3, v5, 94, "bdssbd", 9, v7, v9, v10, 1, v11);
            CGuild::SendPlayerSight(a2, a3, v5, (int)v20, v19, 0);
          }
        }
        sub_446090(&v21, &v16, 0);
      }
    }
    *(_DWORD *)(a1 + 72) = a4;
  }
  return result;
}

//----- (00416970) --------------------------------------------------------
int __cdecl CGuild::GetGuildSkill(int a1)
{
  int result; // eax

  switch ( a1 )
  {
    case 1:
      result = 0;
      break;
    case 2:
      result = 1;
      break;
    case 3:
      result = 3;
      break;
    case 4:
      result = 15;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (004169D0) --------------------------------------------------------
void __thiscall CGuild::SetPointADD(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // [esp-4h] [ebp-1Ch]
  int v7; // [esp+0h] [ebp-18h]
  int v8; // [esp+4h] [ebp-14h]
  int v9; // [esp+8h] [ebp-10h]
  char v11[4]; // [esp+10h] [ebp-8h] BYREF
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  sub_44AE20(v12, a2 + 452);
  v4 = sub_430C20(v11);
  if ( (unsigned __int8)unknown_libname_16(v4) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    v6 = *(_DWORD *)(a2 + 452);
    v5 = CPlayer::GetGID(a2);
    LOG_ERR("CGuild::SetPointADD() member find error (gid:%d,pid:%d)", v5, v6);
  }
  else
  {
    if ( a3 + *(_DWORD *)(*(_DWORD *)(sub_420250(v12) + 4) + 20) >= 0 )
      v9 = a3 + *(_DWORD *)(*(_DWORD *)(sub_420250(v12) + 4) + 20);
    else
      v9 = 0;
    *(_DWORD *)(*(_DWORD *)(sub_420250(v12) + 4) + 20) = v9;
    if ( *(int *)(*(_DWORD *)(sub_420250(v12) + 4) + 24) < 6 )
    {
      if ( this[16] + 10000 * a3 >= 0 )
        v8 = this[16] + 10000 * a3;
      else
        v8 = 0;
      this[16] = v8;
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
        v7 = CGuild::CalPenaltyTLevel(this);
      else
        v7 = CGuild::CalPenaltyLevel(this);
      CGuild::SetLevel(v7);
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
  }
}
// 4167E0: using guessed type _DWORD __stdcall CGuild::SetLevel(_DWORD);
// 416B20: using guessed type int __thiscall CGuild::CalPenaltyLevel(_DWORD);
// 416BF0: using guessed type int __thiscall CGuild::CalPenaltyTLevel(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00416B20) --------------------------------------------------------
int __thiscall CGuild::CalPenaltyLevel(int *this)
{
  int result; // eax
  int v2; // [esp+0h] [ebp-14h]
  int v3; // [esp+Ch] [ebp-8h]
  int v4; // [esp+10h] [ebp-4h]

  if ( this[17] < 16000000 )
  {
    if ( this[17] < 7800000 )
    {
      if ( this[17] < 2400000 )
        v4 = 1;
      else
        v4 = 2;
    }
    else
    {
      v4 = 3;
    }
  }
  else
  {
    v4 = 4;
  }
  if ( this[16] < 4000000 )
  {
    if ( this[16] < 2600000 )
    {
      if ( this[16] < 1200000 )
        v3 = 1;
      else
        v3 = 2;
    }
    else
    {
      v3 = 3;
    }
  }
  else
  {
    v3 = 4;
  }
  if ( v4 >= v3 )
    v2 = v3;
  else
    v2 = v4;
  if ( this[18] > v2 )
    result = v3;
  else
    result = v2;
  return result;
}

//----- (00416BF0) --------------------------------------------------------
int __thiscall CGuild::CalPenaltyTLevel(int *this)
{
  int result; // eax
  int v2; // [esp+0h] [ebp-14h]
  int v3; // [esp+Ch] [ebp-8h]
  int v4; // [esp+10h] [ebp-4h]

  if ( this[17] < 3 )
  {
    if ( this[17] < 2 )
    {
      if ( this[17] < 1 )
        v4 = 1;
      else
        v4 = 2;
    }
    else
    {
      v4 = 3;
    }
  }
  else
  {
    v4 = 4;
  }
  if ( this[16] < 30000 )
  {
    if ( this[16] < 20000 )
    {
      if ( this[16] < 10000 )
        v3 = 1;
      else
        v3 = 2;
    }
    else
    {
      v3 = 3;
    }
  }
  else
  {
    v3 = 4;
  }
  if ( v4 >= v3 )
    v2 = v3;
  else
    v2 = v4;
  if ( this[18] > v2 )
    result = v3;
  else
    result = v2;
  return result;
}

//----- (00416CB0) --------------------------------------------------------
void __stdcall CGuild::BroadcastLock(void *a1, int a2)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  CGuild::Broadcast(a1, a2);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);

//----- (00416CF0) --------------------------------------------------------
BOOL __thiscall CGuild::Broadcast(int this, void *Src, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  BOOL result; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+8h] [ebp-Ch] BYREF
  int v8; // [esp+Ch] [ebp-8h]
  int v9; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v9);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 380), v6);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v9,
               v3);
    if ( !result )
      break;
    v8 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v9) + 4) + 32);
    if ( v8 )
    {
      if ( v8 != a3 )
        CPlayer::Send(Src);
    }
    sub_446090(&v9, &v7, 0);
  }
  return result;
}

//----- (00416D70) --------------------------------------------------------
void __usercall CGuild::SendPlayerSight(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, void *Src, int a6)
{
  void *i; // [esp+0h] [ebp-4h]

  for ( i = sub_4934F0(*(char **)(a4 + 320), a1, a2, a3, (_DWORD *)(a4 + 324), 25);
        i;
        i = (void *)CBaseList::Pop((int)i, a1, a2, a3) )
  {
    if ( !a6 || a4 != unknown_libname_15(i) )
    {
      unknown_libname_15(i);
      CPlayer::Send(Src);
    }
  }
  CIOBuffer::Release((CIOBuffer *)Src);
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (00416DE0) --------------------------------------------------------
int __thiscall CGuild::AllianceOffer(_DWORD *this, int a2, char *Str1, int a4)
{
  int result; // eax
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]
  int v8; // [esp+1Ch] [ebp+10h]

  if ( CPlayer::GetGID(a2) != *(_DWORD *)(a2 + 452) )
    return 22;
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( (CGuild::GetGuildSkill(this[18]) & 8) == 0 )
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    return 57;
  }
  if ( this[99] && this[98] == CPlayer::GetGID(a2) )
  {
    if ( CAlliance::GetSize(this[99]) >= 8 )
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      return 64;
    }
    v8 = *(_DWORD *)(this[99] + 76);
  }
  else
  {
    if ( this[98] )
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      return 58;
    }
    if ( a4 <= 0 || a4 > 15 )
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      return 59;
    }
    v8 = a4 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 3600 : 86400) + time(0);
  }
  if ( !sub_4173F0() )
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    return 68;
  }
  v7 = CGuild::FindGuild(Str1);
  if ( !v7 )
    goto LABEL_19;
  if ( *(_DWORD *)(v7 + 392) )
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 61;
  }
  else
  {
    v6 = CGuild::FindLeaderPlayer(v7);
    if ( !v6 )
    {
LABEL_19:
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      return 60;
    }
    CPlayer::Write(v6, 94, "bbdsd", 0, 62, *(_DWORD *)(a2 + 452), this + 11, v8);
    CPlayer::Write(a2, 94, "bbs", 0, 63, v7 + 44);
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 0;
  }
  return result;
}
// 416970: using guessed type _DWORD __cdecl CGuild::GetGuildSkill(_DWORD);
// 4173F0: using guessed type int sub_4173F0(void);
// 4196C0: using guessed type int __thiscall sub_4196C0(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00416FE0) --------------------------------------------------------
int __thiscall CGuild::AllianceOfferAnswer(int this, int a2, int a3, int a4, int a5)
{
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  int v13; // eax
  int v14; // [esp-10h] [ebp-34h]
  int v15; // [esp-10h] [ebp-34h]
  int v16; // [esp-4h] [ebp-28h]
  int v17; // [esp-4h] [ebp-28h]
  char v19[4]; // [esp+4h] [ebp-20h] BYREF
  char v20[4]; // [esp+8h] [ebp-1Ch] BYREF
  char v21[4]; // [esp+Ch] [ebp-18h] BYREF
  int v22; // [esp+10h] [ebp-14h]
  char v23[4]; // [esp+14h] [ebp-10h] BYREF
  CIOBuffer *v24; // [esp+18h] [ebp-Ch]
  char v25[4]; // [esp+1Ch] [ebp-8h] BYREF
  int v26; // [esp+20h] [ebp-4h]

  if ( CPlayer::GetGID(a2) != *(_DWORD *)(a2 + 452) )
    return 22;
  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  if ( *(_DWORD *)(this + 392) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 61;
  }
  sub_44AE20(v25, &a3);
  v6 = sub_430C20(v21);
  if ( (unsigned __int8)unknown_libname_16(v6)
    || (v7 = sub_420250(v25), (v26 = CGuild::FindLeaderPlayer(*(_DWORD *)(v7 + 4))) == 0) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 60;
  }
  v8 = sub_420250(v25);
  if ( (CGuild::GetGuildSkill(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 72)) & 8) == 0 )
    goto LABEL_9;
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v25) + 4) + 396)
    && (v9 = sub_420250(v25), *(_DWORD *)(*(_DWORD *)(v9 + 4) + 392) == a3) )
  {
    v10 = sub_420250(v25);
    if ( CAlliance::GetSize(*(_DWORD *)(*(_DWORD *)(v10 + 4) + 396)) >= 8 )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      return 64;
    }
    a4 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v25) + 4) + 396) + 76);
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v25) + 4) + 392) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      return 58;
    }
    if ( a4 <= time(0) || a4 > ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 54060 : 1296060) + time(0) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      return 59;
    }
  }
  if ( sub_4173F0() )
  {
    if ( a5 )
    {
      v16 = a4;
      v14 = *(_DWORD *)(a2 + 452);
      v11 = sub_420250(v25);
      if ( !CAlliance::Join(a3, (char *)(v26 + 32), *(_DWORD *)(v11 + 4), v14, (char *)(a2 + 32), this, v16) )
      {
LABEL_9:
        CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
        return 1;
      }
      if ( *(_DWORD *)(this + 396) )
      {
        std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 380),
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v23);
        while ( 1 )
        {
          v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v19);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)v23,
                  v12) )
            break;
          v22 = *(_DWORD *)(*(_DWORD *)(sub_420250(v23) + 4) + 32);
          if ( v22 )
            CAlliance::AllianceInfo(v22);
          sub_446090(v20, 0);
        }
        v17 = a4;
        v15 = *(_DWORD *)(a2 + 452);
        v13 = sub_420250(v25);
        v24 = (CIOBuffer *)sub_44FCE0(94, "bbsdssd", 0, 65, *(_DWORD *)(v13 + 4) + 44, v15, this + 44, a2 + 32, v17);
        CAlliance::BroadcastLock(v24);
        CIOBuffer::Release(v24);
      }
    }
    else
    {
      CPlayer::Write(v26, 94, "bbs", 0, 66, this + 44);
      CPlayer::Write(a2, 94, "bbs", 0, 66, this + 44);
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 0;
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 68;
  }
  return result;
}
// 416970: using guessed type _DWORD __cdecl CGuild::GetGuildSkill(_DWORD);
// 4173F0: using guessed type int sub_4173F0(void);
// 419570: using guessed type _DWORD __stdcall CAlliance::AllianceInfo(_DWORD);
// 4196C0: using guessed type int __thiscall sub_4196C0(_DWORD);
// 419750: using guessed type _DWORD __stdcall sub_419750(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00417360) --------------------------------------------------------
int __thiscall CGuild::SetAlliance(int this, int a2, int a3)
{
  int result; // eax

  if ( *(_DWORD *)(this + 396) )
    CIOObject::Release(*(volatile int **)(this + 396));
  if ( a3 )
    CIOObject::AddRef(a3);
  result = a3;
  *(_DWORD *)(this + 396) = a3;
  *(_DWORD *)(this + 392) = a2;
  return result;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);

//----- (004173B0) --------------------------------------------------------
void __thiscall CGuild::AllianceBroadcast(_DWORD *this, int a2)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( this[99] )
    CAlliance::BroadcastLock(a2);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 419750: using guessed type _DWORD __stdcall sub_419750(_DWORD);

//----- (004173F0) --------------------------------------------------------
BOOL sub_4173F0()
{
  return dword_4E0964 == 0;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417410) --------------------------------------------------------
BOOL CGuild::IsDeclareWarPeriod()
{
  return dword_4E0964 == 1;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417430) --------------------------------------------------------
BOOL CGuild::IsWarWaitingPeriod()
{
  return dword_4E0964 == 2;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417450) --------------------------------------------------------
BOOL CGuild::IsWarringPeriod()
{
  return dword_4E0964 == 4;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417470) --------------------------------------------------------
__time32_t CGuild::GetWarEndTime()
{
  __time32_t Time; // [esp+0h] [ebp-8h] BYREF
  struct tm *Tm; // [esp+4h] [ebp-4h]

  Time = time(0);
  Tm = localtime(&Time);
  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
  {
    Tm->tm_hour = 22;
  }
  else
  {
    Time += 86400 * (7 - Tm->tm_wday);
    Tm = localtime(&Time);
    Tm->tm_hour = 7;
  }
  Tm->tm_sec = 0;
  Tm->tm_min = 0;
  return mktime(Tm);
}

//----- (00417500) --------------------------------------------------------
int __thiscall CGuild::WarDeclare(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v5; // [esp+4h] [ebp-10h]
  int v6; // [esp+8h] [ebp-Ch]
  int *v7; // [esp+Ch] [ebp-8h]
  CIOObject *v8; // [esp+10h] [ebp-4h]

  if ( *(_DWORD *)(a2 + 452) != CPlayer::GetGID(a2) )
    return 22;
  CRWLock::WriteLock((CRWLock *)&unk_4E0980);
  if ( (*(_WORD *)dword_4E1174 & 0x100) == 0 && (CGuild::GetGuildSkill(this[18]) & 4) == 0 )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 57;
  }
  if ( !CGuild::IsDeclareWarPeriod() )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 70;
  }
  if ( this[98] && this[98] != *(_DWORD *)(a2 + 452) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 71;
  }
  v7 = (int *)CCastle::GetCastle(a3);
  if ( !v7 )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 1;
  }
  if ( CCastle::IsLord(*(_DWORD *)(a2 + 452)) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 72;
  }
  if ( CCastle::IsAlreadyDeclare(*(_DWORD *)(a2 + 452)) )
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    return 75;
  }
  if ( dword_4E35B8 == 2 )
  {
    if ( CCastle::GetWarSize(v7) >= 24 )
    {
LABEL_19:
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      return 77;
    }
  }
  else if ( CCastle::GetWarSize(v7) >= 100 )
  {
    goto LABEL_19;
  }
  v6 = 1;
  if ( this[98] )
  {
    if ( CCastle::IsAlliance(this[98]) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
      return 73;
    }
    v6 = CAlliance::GetSize(this[99]);
  }
  CIOCriticalSection::Enter((CIOCriticalSection *)(a2 + 1020));
  if ( *(_DWORD *)(a2 + 1096)
    && v6 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) <= *(_DWORD *)(*(_DWORD *)(a2 + 1096) + 52) )
  {
    v8 = *(CIOObject **)(a2 + 1096);
    if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v8 + 120))(
            v8,
            a2,
            31,
            -(v6 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000))) )
      CPlayer::_OutofInven(v8);
    CIOCriticalSection::Leave((CIOCriticalSection *)(a2 + 1020));
    if ( v7[13] == -4 )
    {
      v5 = v7[12];
      if ( v5 )
      {
        if ( *(_DWORD *)(v5 + 392) )
          CCastle::WarAllianceADD(a3, *(_DWORD *)(v5 + 392), v5 + 44, *(_DWORD *)(v5 + 396));
        else
          CCastle::WarADD(a3, v7[8], (char *)(v5 + 44), v5);
      }
      else
      {
        LOG_ERR("CGuild::WarDeclare( CPlayer* , nCID )  PID:%d , UID:%d", *(_DWORD *)(a2 + 452), *(_DWORD *)(a2 + 448));
      }
    }
    if ( this[98] )
      CCastle::WarAllianceADD(a3, this[98], this + 11, this[99]);
    else
      CCastle::WarADD(a3, *(_DWORD *)(a2 + 452), (char *)(a2 + 32), (int)this);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 0;
  }
  else
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(a2 + 1020));
    CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    result = 74;
  }
  return result;
}
// 416970: using guessed type _DWORD __cdecl CGuild::GetGuildSkill(_DWORD);
// 4196C0: using guessed type int __thiscall sub_4196C0(_DWORD);
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41A570: using guessed type _DWORD __stdcall CCastle::IsLord(_DWORD);
// 41A5B0: using guessed type _DWORD __stdcall sub_41A5B0(_DWORD);
// 41A610: using guessed type _DWORD __stdcall sub_41A610(_DWORD);
// 41AB10: using guessed type _DWORD __stdcall sub_41AB10(_DWORD, _DWORD, _DWORD, _DWORD);
// 41AD90: using guessed type int __thiscall CCastle::GetWarSize(_DWORD);
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00417890) --------------------------------------------------------
void __cdecl CGuild::WarDelcareList(int a1, char a2)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CCastle::GetCastle(a2) )
    CCastle::WarDelcareList(a1);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41ADE0: using guessed type _DWORD __stdcall sub_41ADE0(_DWORD);

//----- (004178D0) --------------------------------------------------------
int __thiscall CGuild::TrialUnfurlStandard(_DWORD *this, _DWORD *a2, int a3)
{
  int result; // eax
  int v5; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CGuild::IsWarringPeriod() )
  {
    v5 = CCastle::GetCastle(a3);
    if ( v5 )
    {
      if ( CCastle::IsStandardAlive(v5) )
      {
        if ( CCastle::GetStandardUnfurl(v5) )
        {
          CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
          result = 95;
        }
        else if ( a2[113] == CPlayer::GetGID(a2) )
        {
          if ( !this[98] || this[98] == a2[113] )
          {
            if ( CCastle::IsLord(a2[113]) || CCastle::IsAlreadyDeclare(a2[113]) )
            {
              CChar::Lock((int)a2);
              if ( CChar::IsGState(a2, 1024) )
              {
                CChar::Unlock((int)a2);
                CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
                result = 82;
              }
              else
              {
                CCastle::SetStandardUnfurl(1);
                (*(void (__thiscall **)(_DWORD *, int))(*a2 + 100))(a2, 1024);
                a2[367] = GetTickCount() + 60000;
                a2[317] = a3;
                CChar::Unlock((int)a2);
                CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
                result = 84;
              }
            }
            else
            {
              CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
              result = 93;
            }
          }
          else
          {
            CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
            result = 92;
          }
        }
        else
        {
          CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
          result = 22;
        }
      }
      else
      {
        CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
        result = 83;
      }
    }
    else
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      result = 1;
    }
  }
  else
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 91;
  }
  return result;
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41A570: using guessed type _DWORD __stdcall CCastle::IsLord(_DWORD);
// 41A610: using guessed type _DWORD __stdcall sub_41A610(_DWORD);
// 41B060: using guessed type int __thiscall sub_41B060(_DWORD);
// 41B0A0: using guessed type int __thiscall sub_41B0A0(_DWORD);
// 41B0D0: using guessed type _DWORD __stdcall sub_41B0D0(_DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00417A90) --------------------------------------------------------
void __thiscall CGuild::UnfurlStandard(int this, int a2, int a3)
{
  CIOBuffer *v4; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CGuild::IsWarringPeriod() )
  {
    v5 = CCastle::GetCastle(a3);
    if ( v5 )
    {
      if ( CCastle::IsStandardAlive(v5) && CCastle::CreateStandard(a3, *(_DWORD *)(a2 + 452), (char *)(this + 44), 1) )
      {
        CCastle::SetCurStandardGuild(*(_DWORD *)(a2 + 452), this);
        CCastle::SetStandardUnfurl(0);
        CCastle::SetLordDeclare(1);
        ++*(_DWORD *)(this + 32);
        v4 = (CIOBuffer *)sub_44FCE0(94, "bbds", 0, 85, a3, this + 44);
        CCastle::WarMsg(v4);
        CIOBuffer::Release(v4);
      }
    }
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 41A170: using guessed type _DWORD __stdcall sub_41A170(_DWORD);
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41B060: using guessed type int __thiscall sub_41B060(_DWORD);
// 41B0D0: using guessed type _DWORD __stdcall sub_41B0D0(_DWORD);
// 41B100: using guessed type _DWORD __stdcall sub_41B100(_DWORD, _DWORD);
// 41BC80: using guessed type _DWORD __stdcall sub_41BC80(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (00417BA0) --------------------------------------------------------
void __cdecl CGuild::BrokenStandard(int a1)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CCastle::GetCastle(a1) )
    CCastle::BrokenStandard(a1);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41B270: using guessed type _DWORD __stdcall sub_41B270(_DWORD);

//----- (00417BE0) --------------------------------------------------------
void __cdecl CGuild::BrokenGate(int a1, int a2)
{
  CIOBuffer *v2; // [esp+0h] [ebp-Ch]
  int v3; // [esp+4h] [ebp-8h]

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CCastle::GetCastle(a1) )
  {
    v3 = CCastle::SubGateState(a1, a2);
    if ( v3 >= 0 )
    {
      v2 = (CIOBuffer *)sub_44FCE0(94, "bbdb", 0, 99, a1, (unsigned __int8)v3);
      CCastle::WarMsg(v2);
      CIOBuffer::Release(v2);
    }
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
}
// 41A170: using guessed type _DWORD __stdcall sub_41A170(_DWORD);
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41A4B0: using guessed type _DWORD __stdcall sub_41A4B0(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (00417C60) --------------------------------------------------------
int __cdecl CGuild::CanAttack(CIOObject *a1, CIOObject *a2)
{
  int result; // eax

  if ( a1 && CCastle::IsAllCastleWarRelation(a1) )
  {
    if ( a2 )
    {
      if ( a1 == a2 )
      {
        CIOObject::Release(a1, (volatile int *)a1 + 10);
        CIOObject::Release(a2, (volatile int *)a2 + 10);
        result = 0;
      }
      else
      {
        CRWLock::ReadLock((CRWLock *)&unk_4E0980);
        if ( *((_DWORD *)a1 + 98) && *((_DWORD *)a1 + 98) == *((_DWORD *)a2 + 98) )
        {
          CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
          CIOObject::Release(a1, (volatile int *)a1 + 10);
          CIOObject::Release(a2, (volatile int *)a2 + 10);
          result = 0;
        }
        else
        {
          CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
          CIOObject::Release(a1, (volatile int *)a1 + 10);
          CIOObject::Release(a2, (volatile int *)a2 + 10);
          result = 1;
        }
      }
    }
    else
    {
      CIOObject::Release(a1, (volatile int *)a1 + 10);
      result = 1;
    }
  }
  else
  {
    if ( a2 )
      CIOObject::Release(a2, (volatile int *)a2 + 10);
    result = 0;
  }
  return result;
}
// 417C9F: conditional instruction was optimized away because of '%arg_0.4!=0'
// 41A670: using guessed type _DWORD __cdecl CCastle::IsAllCastleWarRelation(_DWORD);

//----- (00417D70) --------------------------------------------------------
int __thiscall CGuild::CastleInfo(void *this, int a2, char a3)
{
  int result; // eax
  int v4; // eax
  unsigned __int8 v5; // al
  int v7; // [esp+4h] [ebp-4h]

  if ( *(_DWORD *)(a2 + 452) != CPlayer::GetGID(a2) )
    return 22;
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  v7 = CCastle::GetCastle(a3);
  if ( v7 )
  {
    if ( CCastle::IsLord(*(_DWORD *)(a2 + 452)) )
    {
      v4 = CCastle::GetTax(v7, this);
      v5 = CCastle::GetTaxRate(v7, v4);
      CPlayer::Write(a2, 94, "bbd", 23, v5);
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      result = 0;
    }
    else
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      result = 86;
    }
  }
  else
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  return result;
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41A570: using guessed type _DWORD __stdcall CCastle::IsLord(_DWORD);
// 41B610: using guessed type int __thiscall sub_41B610(_DWORD, _DWORD);
// 41B6D0: using guessed type int __thiscall sub_41B6D0(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00417E30) --------------------------------------------------------
int __stdcall CGuild::TaxRateControl(int a1, int a2, int a3)
{
  int result; // eax

  if ( *(_DWORD *)(a1 + 452) != CPlayer::GetGID(a1) )
    return 1;
  if ( a3 > 115 || a3 < 85 )
    return 87;
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CCastle::GetCastle(a2) && CCastle::IsLord(*(_DWORD *)(a1 + 452)) )
  {
    CCastle::SetTaxRate(a2, a3);
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    CPlayer::Write(a1, 94, "bbb", 0, 88, (unsigned __int8)a3);
    result = 0;
  }
  else
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  return result;
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41A570: using guessed type _DWORD __stdcall CCastle::IsLord(_DWORD);
// 41B640: using guessed type _DWORD __stdcall sub_41B640(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00417F10) --------------------------------------------------------
int __thiscall CGuild::TaxLevy(_DWORD *this, int a2, int a3)
{
  int v5; // [esp+4h] [ebp-Ch]
  char *v6; // [esp+Ch] [ebp-4h]

  if ( *(_DWORD *)(a2 + 452) != CPlayer::GetGID(a2) )
    return 1;
  if ( !CCastle::GetCastle(a3) )
    return 1;
  if ( !CCastle::IsLord(*(_DWORD *)(a2 + 452)) )
    return 1;
  v5 = CCastle::ResetTax(a3);
  this[20] += v5;
  v6 = (char *)CItem::CreateItem(31, 0, v5, -1);
  if ( v6 )
  {
    if ( !CPlayer::InsertItem(31, v6) )
    {
      LOG_ERR("CGuild::TaxLevy() Fail to insert money(%d).", v5);
      CBase::Delete(v6);
    }
  }
  CPlayer::Write(a2, 94, "bbd", 0, 101, v5);
  return 0;
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41A570: using guessed type _DWORD __stdcall CCastle::IsLord(_DWORD);
// 41B770: using guessed type _DWORD __stdcall sub_41B770(_DWORD);
// 426110: using guessed type _DWORD __cdecl sub_426110(_DWORD, _DWORD, _DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45DDC0: using guessed type _DWORD __stdcall CPlayer::InsertItem(_DWORD, _DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00418000) --------------------------------------------------------
int __cdecl CGuild::CastleGateNPC(int a1, char a2, int a3)
{
  int result; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp+0h] [ebp-Ch]

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( CCastle::GetCastle(a2) )
  {
    if ( CGuild::IsWarringPeriod() )
    {
      v4 = CPlayer::GetGID(a1);
      v6 = CCastle::IsGateUseWarring(v4);
    }
    else
    {
      v5 = CPlayer::GetGID(a1);
      v6 = CCastle::IsGateUse(v5);
    }
    if ( v6 )
    {
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      result = v6;
    }
    else
    {
      CCastle::GateGoto(a1, a3);
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      result = 0;
    }
  }
  else
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 1;
  }
  return result;
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41B860: using guessed type _DWORD __stdcall sub_41B860(_DWORD);
// 41B970: using guessed type _DWORD __stdcall sub_41B970(_DWORD);
// 41BA30: using guessed type _DWORD __cdecl sub_41BA30(_DWORD, _DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (004180B0) --------------------------------------------------------
int __stdcall CGuild::CastleSetGateLmit(int a1, int a2, int a3)
{
  int result; // eax

  if ( *(_DWORD *)(a1 + 452) != CPlayer::GetGID(a1) )
    return 22;
  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( !CCastle::GetCastle(a2) )
    goto LABEL_4;
  if ( CCastle::IsLord(*(_DWORD *)(a1 + 452)) )
  {
    if ( !CCastle::SetGateLimit(a3, a2) )
    {
LABEL_4:
      CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
      return 1;
    }
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 90;
  }
  else
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
    result = 22;
  }
  return result;
}
// 41A3B0: using guessed type _DWORD __cdecl CCastle::GetCastle(char);
// 41A570: using guessed type _DWORD __stdcall CCastle::IsLord(_DWORD);
// 41BA90: using guessed type _DWORD __stdcall sub_41BA90(_DWORD, _DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00418170) --------------------------------------------------------
int __thiscall CGuild::IsAlliancePeriod(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-Ch]

  CRWLock::ReadLock((CRWLock *)&unk_4E0980);
  if ( this[98] )
    v3 = CCastle::IsAlliance(this[98]);
  else
    v3 = 0;
  CRWLock::ReadUnlock((CRWLock *)&unk_4E0980);
  return v3;
}
// 41A5B0: using guessed type _DWORD __stdcall sub_41A5B0(_DWORD);

//----- (004181D0) --------------------------------------------------------
void __cdecl CGuild::ChangePlayerName(int a1, int a2, char *Source)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  char *v6; // [esp-4h] [ebp-18h]
  char v7[4]; // [esp+0h] [ebp-14h] BYREF
  char v8[4]; // [esp+4h] [ebp-10h] BYREF
  int v9; // [esp+8h] [ebp-Ch]
  char v10[4]; // [esp+Ch] [ebp-8h] BYREF
  char v11[4]; // [esp+10h] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock((CRWLock *)&unk_4E0980);
    sub_44AE20(v11, &a1);
    v3 = sub_430C20(v8);
    if ( (unsigned __int8)unknown_libname_16(v3) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
    else
    {
      v9 = *(_DWORD *)(sub_420250(v11) + 4);
      sub_44AE20(v10, &a2);
      v4 = sub_430C20(v7);
      if ( !(unsigned __int8)unknown_libname_16(v4) )
      {
        v6 = Source;
        v5 = sub_420250(v10);
        strcpy(*(char **)(v5 + 4), v6);
        if ( a1 == a2 )
        {
          CAlliance::ChangeLeaderName(*(_DWORD *)(v9 + 392), a1, Source);
          CCastle::ChangeLeaderName(a1, Source);
        }
      }
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (004182E0) --------------------------------------------------------
void __cdecl CGuild::ChangeGuildName(int a1, int a2, char *Source)
{
  int v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v5[4]; // [esp+0h] [ebp-1Ch] BYREF
  char v6[4]; // [esp+4h] [ebp-18h] BYREF
  char v7[4]; // [esp+8h] [ebp-14h] BYREF
  int v8; // [esp+Ch] [ebp-10h]
  char v9[4]; // [esp+10h] [ebp-Ch] BYREF
  int v10; // [esp+14h] [ebp-8h]
  char v11[4]; // [esp+18h] [ebp-4h] BYREF

  if ( a1 && a1 == a2 )
  {
    CRWLock::WriteLock((CRWLock *)&unk_4E0980);
    sub_44AE20(v11, &a1);
    v3 = sub_430C20(v7);
    if ( (unsigned __int8)unknown_libname_16(v3) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
    else
    {
      v10 = *(_DWORD *)(sub_420250(v11) + 4);
      strcpy((char *)(v10 + 44), Source);
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(v10 + 380),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
      while ( 1 )
      {
        v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
        if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
                v4) )
          break;
        v8 = *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 32);
        if ( v8 )
        {
          CPlayer::Write(v8, 68, "bbs", 100, 8, Source);
          CPlayer::SetGuildName(Source);
        }
        sub_446090(v6, 0);
      }
      CAlliance::ChangeGuildName(*(_DWORD *)(v10 + 392), a1, Source);
      CCastle::ChangeGuildName(a1, Source);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E0980);
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00418420) --------------------------------------------------------
int __thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::erase(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    (int *)this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    (int *)_Keyval);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_4185D0(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00418480) --------------------------------------------------------
_DWORD *__thiscall sub_418480(_DWORD *this)
{
  _DWORD *v1; // eax
  _DWORD *result; // eax

  v1 = (_DWORD *)sub_478AB0(this);
  sub_418670(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418670: using guessed type _DWORD __stdcall sub_418670(_DWORD);
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);
// 47EB40: using guessed type int __thiscall sub_47EB40(_DWORD);

//----- (004184E0) --------------------------------------------------------
void __thiscall std::map<unsigned long,ncf::kernel::NetworkSession *>::map<unsigned long,ncf::kernel::NetworkSession *>(std::map<unsigned long,std::list<_tagGameRoomInfo *> *,std::less<unsigned long>,std::allocator<std::pair<unsigned long const ,std::list<_tagGameRoomInfo *> *> > > *this)
{
  int v1; // eax
  char v2; // [esp+6h] [ebp-2h] BYREF
  char v3; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v3);
  sub_47A720(&v2, v1);
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);
// 47A720: using guessed type _DWORD __stdcall sub_47A720(_DWORD, _DWORD);

//----- (00418510) --------------------------------------------------------
int __thiscall sub_418510(void *this)
{
  return sub_4187B0(this, this);
}
// 4187B0: using guessed type int __thiscall sub_4187B0(_DWORD, _DWORD);

//----- (00418530) --------------------------------------------------------
_DWORD *__thiscall sub_418530(_DWORD *this)
{
  _DWORD *v1; // eax
  _DWORD *result; // eax

  v1 = (_DWORD *)sub_478AB0(this);
  sub_418710(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418710: using guessed type _DWORD __stdcall sub_418710(_DWORD);
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (00418590) --------------------------------------------------------
int __thiscall std::vector<unsigned long>::size(std::vector<unsigned long> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (004185D0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4185D0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_418480(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00418670) --------------------------------------------------------
int __stdcall sub_418670(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_418670(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004186F0) --------------------------------------------------------
BOOL __stdcall sub_4186F0(_DWORD *a1, _DWORD *a2)
{
  return *a1 < *a2;
}

//----- (00418710) --------------------------------------------------------
int __stdcall sub_418710(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_418710(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00418790) --------------------------------------------------------
int __thiscall sub_418790(_DWORD *this)
{
  return unknown_libname_25(this[1]);
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004187B0) --------------------------------------------------------
int __thiscall sub_4187B0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4188A0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00418860) --------------------------------------------------------
int *__thiscall sub_418860(int *this)
{
  sub_44B740(this);
  return this;
}

//----- (00418880) --------------------------------------------------------
int *__thiscall sub_418880(int *this)
{
  sub_44B760(this);
  return this;
}

//----- (004188A0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4188A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_418530(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00418940) --------------------------------------------------------
std::pair<char const * const,CItem *> *__cdecl sub_418940(std::pair<char const * const,CItem *> *a1, char *_Val1, CItem *_Val2)
{
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(a1, (const char *const *)&_Val1, &_Val2);
  return a1;
}

//----- (00418960) --------------------------------------------------------
_BYTE *__cdecl sub_418960(_BYTE *a1, _BYTE *a2)
{
  *a2 = *a1;
  return a1 + 1;
}

//----- (00418980) --------------------------------------------------------
_WORD *__cdecl sub_418980(_WORD *a1, _WORD *a2)
{
  *a2 = *a1;
  return a1 + 1;
}

//----- (004189A0) --------------------------------------------------------
_BYTE *__cdecl sub_4189A0(_BYTE *a1, char a2)
{
  *a1 = a2;
  return a1 + 1;
}

//----- (004189C0) --------------------------------------------------------
BOOL __cdecl std::_Distance2<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, char a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_418860(&a1);
  }
  return result;
}

//----- (00418A00) --------------------------------------------------------
void *__thiscall sub_418A00(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00418A30) --------------------------------------------------------
int __thiscall sub_418A30(int *this)
{
  return sub_418A50(this);
}

//----- (00418A50) --------------------------------------------------------
int __thiscall sub_418A50(int *this)
{
  return sub_418A70(this);
}

//----- (00418A70) --------------------------------------------------------
int __thiscall sub_418A70(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4185D0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00418B20) --------------------------------------------------------
_DWORD *__thiscall CAlliance::CAlliance(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B56A0;
  this[8] = -5;
  this[9] = 0;
  memset(this + 10, 0, 0x11u);
  memset((char *)this + 57, 0, 0x11u);
  this[19] = 0;
  this[20] = 0;
  return this;
}
// 4B56A0: using guessed type int (__stdcall *off_4B56A0)(int);

//----- (00418B90) --------------------------------------------------------
void *__thiscall CAlliance::_scalar_deleting_destructor_(void *this, char a2)
{
  CAlliance::_CAlliance(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 418BC0: using guessed type int __thiscall sub_418BC0(_DWORD);

//----- (00418BC0) --------------------------------------------------------
int __thiscall CAlliance::_CAlliance(_DWORD *this)
{
  *this = &off_4B56A0;
  return CBase::_CBase(this);
}
// 4B56A0: using guessed type int (__stdcall *off_4B56A0)(int);

//----- (00418BE0) --------------------------------------------------------
void CAlliance::Stop()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v2);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    v1 = sub_420250(v4);
    CAlliance::Clear(*(_DWORD *)(v1 + 4));
    sub_446090(v3, 0);
  }
  sub_41C710(&unk_4E09A4);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
}
// 418C60: using guessed type int __thiscall sub_418C60(_DWORD);
// 41C710: using guessed type int __thiscall sub_41C710(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00418C60) --------------------------------------------------------
int __thiscall CAlliance::Clear(int this)
{
  int v3; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  for ( i = *(_DWORD *)(this + 32); i != -5; i = v3 )
  {
    v3 = *(_DWORD *)(i + 32);
    *(_DWORD *)(i + 32) = -5;
    CBase::Delete((char *)i);
  }
  *(_DWORD *)(this + 32) = -5;
  return CBase::Delete((char *)this);
}

//----- (00418CC0) --------------------------------------------------------
void __thiscall CAlliance::OnDelete(int this)
{
  if ( *(_DWORD *)(this + 80) )
    CGuild::SetAlliance(*(_DWORD *)(this + 80), 0, 0);
  CWar::SetGuild(0);
  CBase::OnDelete((volatile int *)this);
}
// 419710: using guessed type _DWORD __stdcall sub_419710(_DWORD);

//----- (00418D00) --------------------------------------------------------
int __cdecl CAlliance::IsLoad(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v1) )
      break;
    for ( i = *(_DWORD *)(sub_420250(v6) + 4); i != -5; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 36) == a1 )
      {
        CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
        return 1;
      }
    }
    sub_446090(v4, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00418DA0) --------------------------------------------------------
void __cdecl CAlliance::Load(char *packet)
{
  int v1; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char *v3; // eax
  int v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // [esp+0h] [ebp-44h]
  char *v8; // [esp+4h] [ebp-40h]
  _DWORD *v9; // [esp+8h] [ebp-3Ch]
  char v10[8]; // [esp+Ch] [ebp-38h] BYREF
  char v11[8]; // [esp+14h] [ebp-30h] BYREF
  _DWORD *v12; // [esp+1Ch] [ebp-28h]
  char v13[4]; // [esp+20h] [ebp-24h] BYREF
  char v14[4]; // [esp+24h] [ebp-20h] BYREF
  char v15[4]; // [esp+28h] [ebp-1Ch] BYREF
  char *v16; // [esp+2Ch] [ebp-18h]
  __time32_t v17; // [esp+30h] [ebp-14h] BYREF
  char *v18; // [esp+34h] [ebp-10h]
  int v19; // [esp+38h] [ebp-Ch] BYREF
  char v20[8]; // [esp+3Ch] [ebp-8h] BYREF
  char *packeta; // [esp+4Ch] [ebp+8h]
  char *packetb; // [esp+4Ch] [ebp+8h]
  char *packetc; // [esp+4Ch] [ebp+8h]

  CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
  v19 = 0;
  packeta = (char *)sub_418960(packet, &v19);
  if ( v19 > 0 )
  {
    v1 = sub_47A240(packeta, &v17);
    packetb = (char *)sub_47A240(v1, v14);
    sub_44AE20(v15, v14);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v13);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v15,
           v2) )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
    }
    else if ( v17 > time(0) )
    {
      v12 = operator_new(0x54u);
      if ( v12 )
        v8 = (char *)CAlliance::CAlliance(v12);
      else
        v8 = 0;
      v18 = v8;
      *((_DWORD *)v8 + 9) = *(_DWORD *)v14;
      v3 = GetString(packetb, v18 + 40);
      packetc = GetString(v3, v18 + 57);
      *((_DWORD *)v18 + 19) = v17;
      v4 = sub_418940((std::pair<char const * const,CItem *> *)v10, *(char **)v14, (CItem *)v18);
      unknown_libname_12(v4);
      sub_445DF0(
        (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v20,
        v11);
      if ( v20[4] )
      {
        --v19;
        while ( v19 > 0 )
        {
          v9 = operator_new(0x54u);
          if ( v9 )
            v7 = (char *)CAlliance::CAlliance(v9);
          else
            v7 = 0;
          v16 = v7;
          v5 = (char *)sub_47A240(packetc, v7 + 36);
          v6 = GetString(v5, v16 + 40);
          packetc = GetString(v6, v16 + 57);
          *((_DWORD *)v16 + 19) = v17;
          CAlliance::Add(v16);
          --v19;
        }
        CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
      }
      else
      {
        CBase::Delete(v18);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
        LOG_ERR("CAlliance::Load() alliance map inset error (aid:%d)", *(_DWORD *)v14);
      }
    }
    else
    {
      CDBSocket::Write(26, "d", *(_DWORD *)v14);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
    }
  }
  else
  {
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
  }
}
// 418940: using guessed type _DWORD __cdecl sub_418940(std::pair<char const * const,CItem *> *, char *_Val1, CItem *_Val2);
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 419690: using guessed type _DWORD __stdcall sub_419690(_DWORD);
// 41CF00: using guessed type _DWORD __stdcall unknown_libname_12(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (00418FF0) --------------------------------------------------------
void __cdecl CAlliance::LoadSetGuild(int a1, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  char v5[4]; // [esp+0h] [ebp-Ch] BYREF
  int i; // [esp+4h] [ebp-8h]
  char v7[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
  sub_44AE20(v7, &a1);
  v3 = sub_430C20(v5);
  if ( !(unsigned __int8)unknown_libname_16(v3) )
  {
    for ( i = *(_DWORD *)(sub_420250(v7) + 4); i != -5; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 36) == a2 )
      {
        CWar::SetGuild(a3);
        v4 = sub_420250(v7);
        CGuild::SetAlliance(a3, a1, *(_DWORD *)(v4 + 4));
        CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
        return;
      }
    }
  }
  CGuild::SetAlliance(a3, 0, 0);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
}
// 419710: using guessed type _DWORD __stdcall CWar::SetGuild(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (004190C0) --------------------------------------------------------
void *__thiscall CAlliance::DeleteSetGuild(void *this, int a2)
{
  void *result; // eax
  _DWORD *i; // [esp+4h] [ebp-4h]

  result = this;
  for ( i = this; i != (_DWORD *)-5; i = (_DWORD *)i[8] )
  {
    result = i;
    if ( i[20] == a2 )
    {
      CGuild::SetAlliance(a2, 0, 0);
      result = (void *)CWar::SetGuild(0);
    }
  }
  return result;
}
// 419710: using guessed type _DWORD __stdcall CWar::SetGuild(_DWORD);

//----- (00419110) --------------------------------------------------------
int __cdecl CAlliance::Join(char *a1, char *Source, int a3, int a4, char *a5, int a6, int a7)
{
  int v7; // eax
  char *v9; // [esp+0h] [ebp-3Ch]
  char *v10; // [esp+4h] [ebp-38h]
  _DWORD *v11; // [esp+8h] [ebp-34h]
  char v12[8]; // [esp+Ch] [ebp-30h] BYREF
  char v13[8]; // [esp+14h] [ebp-28h] BYREF
  _DWORD *v14; // [esp+1Ch] [ebp-20h]
  char *i; // [esp+20h] [ebp-1Ch]
  char v16[8]; // [esp+24h] [ebp-18h] BYREF
  CIOBuffer *v17; // [esp+2Ch] [ebp-10h]
  int v18; // [esp+30h] [ebp-Ch]
  char *v19; // [esp+34h] [ebp-8h]
  char *v20; // [esp+38h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
  v18 = 0;
  if ( *(_DWORD *)(a3 + 392) )
  {
    v20 = *(char **)(a3 + 396);
    for ( i = v20; i != (char *)-5; i = (char *)*((_DWORD *)i + 8) )
      ++v18;
  }
  else
  {
    v14 = operator_new(0x54u);
    if ( v14 )
      v10 = (char *)CAlliance::CAlliance(v14);
    else
      v10 = 0;
    v20 = v10;
    v7 = sub_418940((std::pair<char const * const,CItem *> *)v12, a1, (CItem *)v10);
    unknown_libname_12(v7);
    sub_445DF0(
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v16,
      v13);
    if ( !v16[4] )
    {
      CBase::Delete(v20);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
      LOG_ERR("CAlliance::Join() alliance map inset error (aid:%d)", a1);
      return 0;
    }
    *((_DWORD *)v20 + 9) = a1;
    strcpy(v20 + 40, (const char *)(a3 + 44));
    strcpy(v20 + 57, Source);
    *((_DWORD *)v20 + 19) = a7;
    CWar::SetGuild(a3);
    CGuild::SetAlliance(a3, (int)a1, (int)v20);
    ++v18;
    CDBSocket::Write(23, "dd", a1, a7);
    v17 = (CIOBuffer *)sub_44FCE0(94, "bdbdss", 17, a7, 1, a1, a3 + 44, Source);
    CGuild::Broadcast(v17, 0);
    CIOBuffer::Release(v17);
  }
  v11 = operator_new(0x54u);
  if ( v11 )
    v9 = (char *)CAlliance::CAlliance(v11);
  else
    v9 = 0;
  v19 = v9;
  *((_DWORD *)v9 + 9) = a4;
  strcpy(v19 + 40, (const char *)(a6 + 44));
  strcpy(v19 + 57, a5);
  *((_DWORD *)v19 + 19) = a7;
  CWar::SetGuild(a6);
  CGuild::SetAlliance(a6, (int)a1, (int)v20);
  CAlliance::Add(v19);
  CDBSocket::Write(24, "ddb", a1, a4, (unsigned __int8)v18);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
  return 1;
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 418940: using guessed type _DWORD __cdecl sub_418940(std::pair<char const * const,CItem *> *, char *_Val1, CItem *_Val2);
// 419690: using guessed type _DWORD __stdcall sub_419690(_DWORD);
// 419710: using guessed type _DWORD __stdcall CWar::SetGuild(_DWORD);
// 41CF00: using guessed type _DWORD __stdcall unknown_libname_12(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (00419370) --------------------------------------------------------
void CAlliance::PostponeExpire()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // [esp-8h] [ebp-18h]
  __time32_t v2; // [esp-4h] [ebp-14h]
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  __time32_t v6; // [esp+Ch] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
  v6 = CGuild::GetWarEndTime();
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v0) )
      break;
    v2 = v6;
    v1 = *(_DWORD *)sub_420250(v5);
    sub_420250(v5);
    CAlliance::Postpone(v1, v2);
    sub_446090(v4, 0);
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
}
// 419400: using guessed type _DWORD __stdcall sub_419400(_DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00419400) --------------------------------------------------------
void __thiscall CAlliance::Postpone(_DWORD *this, int a2, unsigned int a3)
{
  CIOBuffer *v3; // [esp+4h] [ebp-4h]

  if ( this[19] < a3 )
  {
    this[19] = a3;
    CDBSocket::Write(60, "dd", a2, a3);
    v3 = (CIOBuffer *)sub_44FCE0(94, "bbd", 0, 69, a3);
    CAlliance::Broadcast(v3);
    CIOBuffer::Release(v3);
  }
}
// 4197B0: using guessed type _DWORD __stdcall sub_4197B0(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (00419470) --------------------------------------------------------
void __cdecl CAlliance::Expire(unsigned int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v2[4]; // [esp+0h] [ebp-1Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-18h] BYREF
  char v4[4]; // [esp+8h] [ebp-14h] BYREF
  CIOBuffer *v5; // [esp+Ch] [ebp-10h]
  char v6[4]; // [esp+10h] [ebp-Ch]
  int v7; // [esp+14h] [ebp-8h]
  int v8; // [esp+18h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09A4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v8);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v8,
            v1) )
      break;
    *(_DWORD *)v6 = *(_DWORD *)sub_420250(&v8);
    v7 = *(_DWORD *)(sub_420250(&v8) + 4);
    if ( *(_DWORD *)(v7 + 76) >= a1 )
    {
      sub_446090(v2, 0);
    }
    else
    {
      CDBSocket::Write(26, "d", *(_DWORD *)v6);
      v5 = (CIOBuffer *)sub_44FCE0(94, "bb", 0, 67);
      CAlliance::Broadcast(v5);
      CIOBuffer::Release(v5);
      CAlliance::Clear(v7);
      v8 = *(_DWORD *)sub_44AF50(v3, v8);
      LOG_NORMAL("CAlliance::Expire() Alliance's expired. (AID:%d)", *(_DWORD *)v6);
    }
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
}
// 4197B0: using guessed type _DWORD __stdcall CAlliance::Broadcast(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AF50: using guessed type _DWORD __stdcall sub_44AF50(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (00419570) --------------------------------------------------------
void __thiscall CAlliance::AllianceInfo(const char *this, int a2)
{
  const char *i; // [esp+8h] [ebp-1014h]
  char v4; // [esp+Ch] [ebp-1010h] BYREF
  char v5[4092]; // [esp+Dh] [ebp-100Fh] BYREF
  __int16 v6; // [esp+1009h] [ebp-13h]
  char v7; // [esp+100Bh] [ebp-11h]
  int v8; // [esp+1010h] [ebp-Ch]
  char *packet; // [esp+1014h] [ebp-8h]
  int v10; // [esp+1018h] [ebp-4h]

  v8 = dword_4D9830;
  CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
  v4 = 0;
  memset(v5, 0, sizeof(v5));
  v6 = 0;
  v7 = 0;
  packet = &v4;
  v10 = 0;
  for ( i = this; i != (const char *)-5; i = (const char *)*((_DWORD *)i + 8) )
  {
    packet = (char *)sub_44F9B0(packet, *((_DWORD *)i + 9));
    packet = PutString(packet, i + 40);
    packet = PutString(packet, i + 57);
    ++v10;
  }
  CPlayer::Write(a2, 94, "bdbm", 17, *((_DWORD *)this + 19), (unsigned __int8)v10, &v4, packet - &v4);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 4D9830: using guessed type int dword_4D9830;

//----- (00419690) --------------------------------------------------------
_DWORD *__thiscall CAlliance::Add(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  *(_DWORD *)(a2 + 32) = this[8];
  result = this;
  this[8] = a2;
  return result;
}

//----- (004196C0) --------------------------------------------------------
int __thiscall CAlliance::GetSize(_DWORD *this)
{
  _DWORD *i; // [esp+4h] [ebp-8h]
  int v4; // [esp+8h] [ebp-4h]

  v4 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
  for ( i = this; i != (_DWORD *)-5; i = (_DWORD *)i[8] )
    ++v4;
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
  return v4;
}

//----- (00419710) --------------------------------------------------------
volatile int *__thiscall CWar::SetGuild(volatile int **this, volatile int *a2)
{
  volatile int *result; // eax

  if ( this[20] )
    CIOObject::Release(this[20]);
  if ( a2 )
    CIOObject::AddRef(a2);
  result = a2;
  this[20] = a2;
  return result;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);

//----- (00419750) --------------------------------------------------------
void __thiscall CAlliance::BroadcastLock(_DWORD *this, void *a2)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
  for ( i = this; i != (_DWORD *)-5; i = (_DWORD *)i[8] )
  {
    if ( i[20] )
      CGuild::Broadcast(a2, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);

//----- (004197B0) --------------------------------------------------------
void *__thiscall CAlliance::Broadcast(void *this, void *a2)
{
  void *result; // eax
  _DWORD *i; // [esp+4h] [ebp-4h]

  result = this;
  for ( i = this; i != (_DWORD *)-5; i = (_DWORD *)i[8] )
  {
    result = i;
    if ( i[20] )
      result = (void *)CGuild::Broadcast(a2, 0);
  }
  return result;
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);

//----- (00419800) --------------------------------------------------------
void __cdecl CAlliance::ChangeLeaderName(int a1, int a2, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  int i; // [esp+4h] [ebp-8h]
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
    sub_44AE20(v6, &a1);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
           v3) )
    {
      for ( i = *(_DWORD *)(sub_420250(v6) + 4); i != -5; i = *(_DWORD *)(i + 32) )
      {
        if ( *(_DWORD *)(i + 36) == a2 )
        {
          strcpy((char *)(i + 57), Source);
          break;
        }
      }
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (004198A0) --------------------------------------------------------
void __cdecl CAlliance::ChangeGuildName(int a1, int a2, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  int i; // [esp+4h] [ebp-8h]
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
    sub_44AE20(v6, &a1);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
           v3) )
    {
      for ( i = *(_DWORD *)(sub_420250(v6) + 4); i != -5; i = *(_DWORD *)(i + 32) )
      {
        if ( *(_DWORD *)(i + 36) == a2 )
        {
          strcpy((char *)(i + 40), Source);
          break;
        }
      }
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00419940) --------------------------------------------------------
char *__thiscall CCastle::CCastle(char *this)
{
  CBase::CBase((int)this);
  *(_DWORD *)this = &off_4B5798;
  std::vector<CIOSocket::CIOTimer>::vector<CIOSocket::CIOTimer>((std::vector<CIOSocket::CIOTimer> *)(this + 88));
  *((_DWORD *)this + 8) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 10) = 100;
  *((_DWORD *)this + 12) = 0;
  *((_DWORD *)this + 13) = -4;
  *((_DWORD *)this + 14) = 0;
  *((_DWORD *)this + 15) = 0;
  *((_DWORD *)this + 16) = 0;
  *((_DWORD *)this + 11) = 0;
  *((_DWORD *)this + 17) = 0;
  *((_DWORD *)this + 20) = 0;
  *((_DWORD *)this + 21) = 0;
  *((_DWORD *)this + 18) = 0;
  *((_DWORD *)this + 19) = 0;
  return this;
}
// 4B5798: using guessed type int (__stdcall *off_4B5798)(int);

//----- (00419A00) --------------------------------------------------------
void *__thiscall CCastle::_scalar_deleting_destructor_(void *this, char a2)
{
  CCastle::_CCastle(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 419A30: using guessed type int __thiscall sub_419A30(_DWORD);

//----- (00419A30) --------------------------------------------------------
int __thiscall CCastle::_CCastle(_DWORD *this)
{
  *this = &off_4B5798;
  sub_44F580(this + 22);
  return CBase::_CBase(this);
}
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 4B5798: using guessed type int (__stdcall *off_4B5798)(int);

//----- (00419A60) --------------------------------------------------------
BOOL CCastle::Start()
{
  hHandle = CreateEventA(0, 1, 0, 0);
  CDBSocket::Write(57, &Src);
  WaitForSingleObject(hHandle, 0xFFFFFFFF);
  return CloseHandle(hHandle);
}

//----- (00419AB0) --------------------------------------------------------
void CCastle::Stop()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v2);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    v1 = sub_420250(v4);
    CBase::Delete(*(char **)(v1 + 4));
    sub_446090(v3, 0);
  }
  sub_41C770(&unk_4E09C8);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 41C770: using guessed type int __thiscall sub_41C770(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00419B30) --------------------------------------------------------
void __cdecl CCastle::Load(int a1, int a2)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  char *v7; // [esp+0h] [ebp-24h]
  char v8[8]; // [esp+4h] [ebp-20h] BYREF
  char v9[8]; // [esp+Ch] [ebp-18h] BYREF
  char *v10; // [esp+14h] [ebp-10h]
  char *v11; // [esp+18h] [ebp-Ch]
  char v12[8]; // [esp+1Ch] [ebp-8h] BYREF
  char *v13; // [esp+30h] [ebp+Ch]

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  if ( !a1 )
  {
    SetEvent(hHandle);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
    return;
  }
  v10 = (char *)operator_new(0x68u);
  if ( v10 )
    v7 = CCastle::CCastle(v10);
  else
    v7 = 0;
  v11 = v7;
  v2 = sub_47A240(a2, v7 + 68);
  v3 = sub_47A240(v2, v7 + 32);
  v4 = sub_47A240(v3, v7 + 36);
  v5 = sub_418960(v4, v7 + 40);
  v13 = (char *)sub_418960(v5, v7 + 44);
  v6 = sub_418940((std::pair<char const * const,CItem *> *)v8, *((char **)v11 + 17), (CItem *)v11);
  unknown_libname_12(v6);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v12,
    v9);
  if ( !v12[4] )
  {
    LOG_ERR("CCastle::Load() castle insert error ( cid:%d )", *((_DWORD *)v11 + 17));
    CBase::Delete(v11);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
    return;
  }
  if ( *((_DWORD *)v11 + 8) )
  {
    if ( a1 == 2 )
    {
      LOG_ERR("CCastle::Load() guild error (cid:%d, gid:%d)", *((_DWORD *)v11 + 17), *((_DWORD *)v11 + 8));
      *((_DWORD *)v11 + 8) = 0;
      CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
      return;
    }
    CGuild::Load(*((char **)v11 + 8), v13, (int)v11);
    if ( *((_DWORD *)v11 + 14) )
      CIOObject::Release(*((volatile int **)v11 + 14));
    if ( *((_DWORD *)v11 + 12) )
      CIOObject::AddRef(*((_DWORD *)v11 + 12));
    *((_DWORD *)v11 + 14) = *((_DWORD *)v11 + 12);
    *((_DWORD *)v11 + 15) = *((_DWORD *)v11 + 8);
    CCastle::CreateStandard(*((_DWORD *)v11 + 17), *((_DWORD *)v11 + 8), (char *)(*((_DWORD *)v11 + 12) + 44), 0);
    CCastle::CreateGate(*((_DWORD *)v11 + 17), *((_DWORD *)v11 + 8), (char *)(*((_DWORD *)v11 + 12) + 44));
  }
  else
  {
    CCastle::CreateStandard(*((_DWORD *)v11 + 17), 0, (char *)&Src, 0);
    CCastle::CreateGate(*((_DWORD *)v11 + 17), 0, (char *)&Src);
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 418940: using guessed type _DWORD __cdecl sub_418940(std::pair<char const * const,CItem *> *, char *_Val1, CItem *_Val2);
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 41CF00: using guessed type _DWORD __stdcall unknown_libname_12(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (00419D80) --------------------------------------------------------
BOOL __cdecl CCastle::SetWarGuild(volatile int *a1, volatile int *a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  char v4[4]; // [esp+0h] [ebp-10h] BYREF
  char v5[4]; // [esp+4h] [ebp-Ch] BYREF
  volatile int **i; // [esp+8h] [ebp-8h]
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
               v2);
    if ( !result )
      break;
    for ( i = *(volatile int ***)(*(_DWORD *)(sub_420250(v7) + 4) + 52); i != (volatile int **)-4; i = (volatile int **)i[8] )
    {
      if ( i[10] == a1 )
        CWar::SetGuild(i, a2);
    }
    sub_446090(v5, 0);
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00419E10) --------------------------------------------------------
int __cdecl CCastle::WarBegin(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  _DWORD *v2; // eax
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  int v6; // [esp-Ch] [ebp-1038h]
  int v7; // [esp-4h] [ebp-1030h]
  int v8; // [esp-4h] [ebp-1030h]
  CIOBuffer *v9; // [esp-4h] [ebp-1030h]
  int v10; // [esp+4h] [ebp-1028h]
  char v11[4]; // [esp+8h] [ebp-1024h] BYREF
  char v12[4]; // [esp+Ch] [ebp-1020h] BYREF
  int v13; // [esp+10h] [ebp-101Ch]
  CIOBuffer *v14; // [esp+14h] [ebp-1018h]
  char v15[4]; // [esp+18h] [ebp-1014h] BYREF
  char v16; // [esp+1Ch] [ebp-1010h] BYREF
  char v17[4092]; // [esp+1Dh] [ebp-100Fh] BYREF
  __int16 v18; // [esp+1019h] [ebp-13h]
  char v19; // [esp+101Bh] [ebp-11h]
  int v20; // [esp+1020h] [ebp-Ch]
  char *v21; // [esp+1024h] [ebp-8h]
  int v22; // [esp+1028h] [ebp-4h] BYREF

  v20 = dword_4D9830;
  v16 = 0;
  memset(v17, 0, sizeof(v17));
  v18 = 0;
  v19 = 0;
  v21 = &v16;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v21 = (char *)CCastle::WarList(&v22, v21);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v15);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v11);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v15,
            v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 52) != -4 )
    {
      v13 = 0;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 48) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 48) + 392) )
          v10 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 48) + 392);
        else
          v10 = *(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 32);
        v13 = v10;
      }
      v7 = v13;
      v2 = (_DWORD *)sub_420250(v15);
      CPlayer::WarPortalAll(*v2, v7);
      v3 = (_DWORD *)sub_420250(v15);
      CNPC::WarRelationShow(*v3, 0);
      *(_DWORD *)(*(_DWORD *)(sub_420250(v15) + 4) + 76) = a1;
      v8 = v21 - &v16;
      v6 = v22;
      v4 = (_DWORD *)sub_420250(v15);
      v14 = (CIOBuffer *)sub_44FCE0(94, "bbddm", 0, 78, *v4, v6, &v16, v8);
      v9 = v14;
      sub_420250(v15);
      CCastle::_WarMsg(v9);
      LOG_NORMAL("CCastle::WarBegin Started");
      CPlayer::CountWarrelationPlayer();
      CIOBuffer::Release(v14);
    }
    sub_446090(v12, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return CCastle::SetWarRemainSecondTime(0);
}
// 41A0D0: using guessed type _DWORD __stdcall sub_41A0D0(_DWORD);
// 41A1A0: using guessed type _DWORD __cdecl sub_41A1A0(_DWORD, _DWORD);
// 41BAF0: using guessed type _DWORD __cdecl sub_41BAF0(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 4492A0: using guessed type _DWORD __cdecl sub_4492A0(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452C90: using guessed type _DWORD __cdecl sub_452C90(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0041A030) --------------------------------------------------------
int __cdecl CCastle::WarPortal(int a1, int a2, int a3, int a4)
{
  int i; // [esp+0h] [ebp-4h]

  for ( i = 0; i < 1; ++i )
  {
    if ( a1 == dword_4D5B60[7 * i]
      && a2 == dword_4D5B64[7 * i]
      && a3 >= dword_4D5B68[7 * i]
      && a3 <= dword_4D5B70[7 * i]
      && a4 <= dword_4D5B6C[7 * i]
      && a4 >= dword_4D5B74[7 * i] )
    {
      return dword_4D5B78[7 * i];
    }
  }
  return -1;
}
// 4D5B60: using guessed type int dword_4D5B60[];
// 4D5B64: using guessed type int dword_4D5B64[];
// 4D5B68: using guessed type int dword_4D5B68[];
// 4D5B6C: using guessed type int dword_4D5B6C[];
// 4D5B70: using guessed type int dword_4D5B70[];
// 4D5B74: using guessed type int dword_4D5B74[];
// 4D5B78: using guessed type int dword_4D5B78[];

//----- (0041A0D0) --------------------------------------------------------
int __thiscall CCastle::_WarMsg(_DWORD *this, void *a2)
{
  int result; // eax
  int i; // [esp+4h] [ebp-4h]

  if ( this[12] )
  {
    CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
    if ( *(_DWORD *)(this[12] + 396) )
      CAlliance::Broadcast(*(void **)(this[12] + 396), a2);
    else
      CGuild::Broadcast(a2, 0);
    CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
  }
  result = this[13];
  for ( i = result; i != -4; i = *(_DWORD *)(i + 32) )
  {
    result = i;
    if ( *(_DWORD *)(i + 80) )
      result = CGuild::Broadcast(a2, 0);
  }
  return result;
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);

//----- (0041A170) --------------------------------------------------------
void __thiscall CCastle::WarMsg(_DWORD *this, void *a2)
{
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  CCastle::_WarMsg(this, a2);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
}

//----- (0041A1A0) --------------------------------------------------------
int __cdecl CCastle::WarList(_DWORD *a1, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v5[4]; // [esp+0h] [ebp-14h] BYREF
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int j; // [esp+8h] [ebp-Ch]
  int i; // [esp+Ch] [ebp-8h]
  char v9[4]; // [esp+10h] [ebp-4h] BYREF

  *a1 = 0;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
            v2) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 48) )
    {
      CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
      if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 48) + 396) )
      {
        for ( i = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 48) + 396); i != -5; i = *(_DWORD *)(i + 32) )
        {
          a2 = sub_44F9B0(a2, *(_DWORD *)(i + 36));
          ++*a1;
        }
      }
      else
      {
        v3 = sub_420250(v9);
        a2 = sub_44F9B0(a2, *(_DWORD *)(*(_DWORD *)(v3 + 4) + 32));
        ++*a1;
      }
      CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
    }
    for ( j = *(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 52); j != -4; j = *(_DWORD *)(j + 32) )
    {
      a2 = sub_44F9B0(a2, *(_DWORD *)(j + 40));
      ++*a1;
    }
    sub_446090(v6, 0);
  }
  return a2;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0041A300) --------------------------------------------------------
void __thiscall CCastle::OnDelete(int this)
{
  CCastle::SetGuild(0);
  if ( *(_DWORD *)(this + 56) )
    CIOObject::Release(*(volatile int **)(this + 56));
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 60) = 0;
  if ( *(_DWORD *)(this + 52) != -4 )
  {
    CWar::Clear(*(_DWORD *)(this + 52));
    *(_DWORD *)(this + 52) = -4;
  }
  CBase::OnDelete((volatile int *)this);
}
// 41A370: using guessed type _DWORD __stdcall sub_41A370(_DWORD);
// 41C6B0: using guessed type int __thiscall sub_41C6B0(_DWORD);

//----- (0041A370) --------------------------------------------------------
volatile int *__thiscall CCastle::SetGuild(volatile int **this, volatile int *a2)
{
  volatile int *result; // eax

  if ( this[12] )
    CIOObject::Release(this[12]);
  if ( a2 )
    CIOObject::AddRef(a2);
  result = a2;
  this[12] = a2;
  return result;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);

//----- (0041A3B0) --------------------------------------------------------
int __cdecl CCastle::GetCastle(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  sub_44AE20(v4, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
         v1) )
  {
    result = *(_DWORD *)(sub_420250(v4) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0041A400) --------------------------------------------------------
int __cdecl CCastle::GetMonsterTile2CID(int a1, int a2, int a3)
{
  int *v4; // [esp+0h] [ebp-Ch]
  _DWORD *v5; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]
  int j; // [esp+8h] [ebp-4h]

  for ( i = 0; i < 1; ++i )
  {
    v5 = (_DWORD *)((char *)&dword_4D5998 + 28 * i);
    if ( v5[2] == a1 && v5[3] == a2 && v5[4] == a3 )
      return *v5;
  }
  for ( j = 0; j < 5; ++j )
  {
    v4 = &dword_4D59B8[7 * j];
    if ( v4[2] == a1 && v4[3] == a2 && v4[4] == a3 )
      return *v4;
  }
  return 0;
}

//----- (0041A4B0) --------------------------------------------------------
int __thiscall CCastle::SubGateState(void *this, int a2, int a3)
{
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  char v7[4]; // [esp+8h] [ebp-Ch] BYREF
  int i; // [esp+Ch] [ebp-8h]
  char v9[4]; // [esp+10h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  sub_430C20(v9);
  for ( i = 0; i < 5; ++i )
  {
    if ( dword_4D59B8[7 * i] == a2 )
    {
      if ( a3 == *(_DWORD *)sub_420010(v9, this) )
      {
        *(_DWORD *)sub_420010(v9, this) = 0;
        CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
        return i;
      }
      sub_420030(v7, 0);
      v4 = sub_445B40(v6);
      if ( (unsigned __int8)unknown_libname_16(v4) )
        break;
    }
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
  return -1;
}
// 41A4FE: variable 'this' is possibly undefined
// 420010: using guessed type int __thiscall sub_420010(_DWORD, _DWORD);
// 420030: using guessed type _DWORD __stdcall sub_420030(_DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 445B40: using guessed type _DWORD __stdcall sub_445B40(_DWORD);

//----- (0041A570) --------------------------------------------------------
BOOL __thiscall CCastle::IsLord(_DWORD *this, int a2)
{
  BOOL v4; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v4 = a2 == this[8];
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v4;
}

//----- (0041A5B0) --------------------------------------------------------
BOOL __thiscall CCastle::IsAlliance(_DWORD *this, int a2)
{
  BOOL v3; // [esp+0h] [ebp-Ch]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v3 = this[12] && *(_DWORD *)(this[12] + 392) == a2;
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v3;
}

//----- (0041A610) --------------------------------------------------------
int __thiscall CCastle::IsAlreadyDeclare(_DWORD *this, int a2)
{
  int i; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v5 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  for ( i = this[13]; i != -4; i = *(_DWORD *)(i + 32) )
  {
    if ( *(_DWORD *)(i + 40) == a2 )
    {
      v5 = 1;
      break;
    }
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v5;
}

//----- (0041A670) --------------------------------------------------------
int __cdecl CCastle::IsAllCastleWarRelation(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int i; // [esp+8h] [ebp-Ch]
  _DWORD *v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v1) )
      break;
    v6 = *(_DWORD **)(sub_420250(v7) + 4);
    if ( v6[8] && (v6[12] == a1 || *(_DWORD *)(v6[12] + 392) && *(_DWORD *)(v6[12] + 392) == *(_DWORD *)(a1 + 392)) )
    {
LABEL_12:
      CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
      return 1;
    }
    for ( i = v6[13]; i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 80) && *(_DWORD *)(i + 80) == a1 )
        goto LABEL_12;
    }
    sub_446090(v4, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041A790) --------------------------------------------------------
void __cdecl CCastle::Login(_DWORD *a1, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  int *v6; // eax
  int v7; // [esp-Ch] [ebp-1044h]
  int v8; // [esp-Ch] [ebp-1044h]
  int v9; // [esp-Ch] [ebp-1044h]
  int v10; // [esp-Ch] [ebp-1044h]
  int v11; // [esp-8h] [ebp-1040h]
  int v12; // [esp-4h] [ebp-103Ch]
  int v13; // [esp-4h] [ebp-103Ch]
  int v14; // [esp-4h] [ebp-103Ch]
  int v15; // [esp-4h] [ebp-103Ch]
  char v16[4]; // [esp+4h] [ebp-1034h] BYREF
  char v17[4]; // [esp+8h] [ebp-1030h] BYREF
  _DWORD *v18; // [esp+Ch] [ebp-102Ch]
  int v19; // [esp+10h] [ebp-1028h]
  int v20; // [esp+14h] [ebp-1024h]
  int j; // [esp+18h] [ebp-1020h]
  int i; // [esp+1Ch] [ebp-101Ch]
  int v23; // [esp+20h] [ebp-1018h]
  char v24[4]; // [esp+24h] [ebp-1014h] BYREF
  char v25; // [esp+28h] [ebp-1010h] BYREF
  char v26[4092]; // [esp+29h] [ebp-100Fh] BYREF
  __int16 v27; // [esp+1025h] [ebp-13h]
  char v28; // [esp+1027h] [ebp-11h]
  int v29; // [esp+102Ch] [ebp-Ch]
  char *v30; // [esp+1030h] [ebp-8h]
  int v31; // [esp+1034h] [ebp-4h] BYREF

  v29 = dword_4D9830;
  v25 = 0;
  memset(v26, 0, sizeof(v26));
  v27 = 0;
  v28 = 0;
  v30 = &v25;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v30 = (char *)CCastle::WarList(&v31, (int)v30);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v24);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v16);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v24,
            v2) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 52) != -4 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 48) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 32) == a2 )
        {
          v12 = v30 - &v25;
          v7 = v31;
          v3 = (_DWORD *)sub_420250(v24);
          CPlayer::Write(a1, 94, "bbddm", 0, 78, *v3, v7, &v25, v12);
          break;
        }
        if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 48) + 396) )
        {
          CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
          for ( i = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 48) + 396); i != -5; i = *(_DWORD *)(i + 32) )
          {
            if ( *(_DWORD *)(i + 36) == a2 )
            {
              v13 = v30 - &v25;
              v8 = v31;
              v4 = (_DWORD *)sub_420250(v24);
              CPlayer::Write(a1, 94, "bbddm", 0, 78, *v4, v8, &v25, v13);
              CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
              CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
              return;
            }
          }
          CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
        }
      }
      for ( j = *(_DWORD *)(*(_DWORD *)(sub_420250(v24) + 4) + 52); j != -4; j = *(_DWORD *)(j + 32) )
      {
        if ( *(_DWORD *)(j + 40) == a2 )
        {
          v14 = v30 - &v25;
          v9 = v31;
          v5 = (_DWORD *)sub_420250(v24);
          CPlayer::Write(a1, 94, "bbddm", 0, 78, *v5, v9, &v25, v14);
          break;
        }
      }
      v15 = a1[84];
      v11 = a1[83];
      v10 = a1[79];
      v6 = (int *)sub_420250(v24);
      v23 = CCastle::WarPortal(*v6, v10, v11, v15);
      if ( v23 >= 0 )
      {
        v18 = (_DWORD *)((char *)&unk_4D77C8 + 28 * v23);
        v19 = RandomBetween(v18[1] - 32, v18[1] + 32);
        v20 = RandomBetween(v18[2] - 32, v18[2] + 32);
        a1[79] = *v18;
        a1[83] = v19;
        a1[84] = v20;
        a1[85] = 0;
      }
    }
    sub_446090(v17, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 4D9830: using guessed type int dword_4D9830;

//----- (0041AB10) --------------------------------------------------------
void __thiscall CCastle::WarAllianceADD(_DWORD *this, int a2, int a3, int a4, char *a5)
{
  unsigned int v5; // eax
  int v6; // [esp+0h] [ebp-18h]
  void *v8; // [esp+8h] [ebp-10h]
  const char *i; // [esp+Ch] [ebp-Ch]
  CIOBuffer *v10; // [esp+14h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  CRWLock::WriteLock((CRWLock *)&unk_4E09B0);
  v5 = CGuild::GetWarEndTime();
  CAlliance::Postpone(a5, a3, v5);
  v10 = (CIOBuffer *)sub_44FCE0(94, "bbds", 0, 76, a2, a4);
  for ( i = a5; i != (const char *)-5; i = (const char *)*((_DWORD *)i + 8) )
  {
    v8 = operator_new(0x54u);
    if ( v8 )
      v6 = CWar::CWar(v8);
    else
      v6 = 0;
    *(_DWORD *)(v6 + 36) = a3;
    *(_DWORD *)(v6 + 40) = *((_DWORD *)i + 9);
    strcpy((char *)(v6 + 44), i + 40);
    strcpy((char *)(v6 + 61), i + 57);
    CWar::SetGuild((volatile int **)v6, *((volatile int **)i + 20));
    if ( this[13] == -4 )
      this[13] = v6;
    else
      CWar::ADD(v6);
    CDBSocket::Write(61, "ddd", a2, a3, *((_DWORD *)i + 9));
    if ( *((_DWORD *)i + 20) )
      CGuild::Broadcast(v10, 0);
  }
  CIOBuffer::Release(v10);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09B0);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 41C380: using guessed type int __thiscall sub_41C380(_DWORD);
// 41C670: using guessed type _DWORD __stdcall sub_41C670(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (0041AC80) --------------------------------------------------------
void __thiscall CCastle::WarADD(_DWORD *this, int a2, int a3, char *Source, int a5)
{
  int v5; // [esp+0h] [ebp-14h]
  void *v7; // [esp+8h] [ebp-Ch]
  CIOBuffer *v8; // [esp+10h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  v7 = operator_new(0x54u);
  if ( v7 )
    v5 = CWar::CWar(v7);
  else
    v5 = 0;
  *(_DWORD *)(v5 + 36) = 0;
  *(_DWORD *)(v5 + 40) = a3;
  strcpy((char *)(v5 + 44), (const char *)(a5 + 44));
  strcpy((char *)(v5 + 61), Source);
  CWar::SetGuild((volatile int **)v5, (volatile int *)a5);
  if ( this[13] == -4 )
    this[13] = v5;
  else
    CWar::ADD(v5);
  CDBSocket::Write(61, "ddd", a2, 0, a3);
  v8 = (CIOBuffer *)sub_44FCE0(94, "bbds", 0, 76, a2, a5 + 44);
  CGuild::Broadcast(v8, 0);
  CIOBuffer::Release(v8);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 416CF0: using guessed type _DWORD __stdcall CGuild::Broadcast(void *Src, _DWORD);
// 41C380: using guessed type int __thiscall sub_41C380(_DWORD);
// 41C670: using guessed type _DWORD __stdcall sub_41C670(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (0041AD90) --------------------------------------------------------
int __thiscall CCastle::GetWarSize(_DWORD *this)
{
  int i; // [esp+4h] [ebp-8h]
  int v4; // [esp+8h] [ebp-4h]

  v4 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  for ( i = this[13]; i != -4; i = *(_DWORD *)(i + 32) )
    ++v4;
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v4;
}

//----- (0041ADE0) --------------------------------------------------------
void __thiscall CCastle::WarDelcareList(_DWORD *this, int a2)
{
  const char *v2; // eax
  int j; // [esp+8h] [ebp-1018h]
  int i; // [esp+Ch] [ebp-1014h]
  char v6; // [esp+10h] [ebp-1010h] BYREF
  char v7[4092]; // [esp+11h] [ebp-100Fh] BYREF
  __int16 v8; // [esp+100Dh] [ebp-13h]
  char v9; // [esp+100Fh] [ebp-11h]
  int v10; // [esp+1010h] [ebp-10h]
  char *packet; // [esp+1014h] [ebp-Ch]
  int v12; // [esp+1018h] [ebp-8h]
  int v13; // [esp+101Ch] [ebp-4h]

  v10 = dword_4D9830;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v6 = 0;
  memset(v7, 0, sizeof(v7));
  v8 = 0;
  v9 = 0;
  packet = &v6;
  v13 = 0;
  v12 = 0;
  if ( this[12] )
  {
    if ( *(_DWORD *)(this[12] + 396) )
    {
      for ( i = *(_DWORD *)(this[12] + 396); i != -5; i = *(_DWORD *)(i + 32) )
      {
        packet = PutString(packet, (const char *)(i + 40));
        packet = PutString(packet, (const char *)(i + 57));
        ++v12;
      }
    }
    else
    {
      packet = PutString(packet, (const char *)(this[12] + 44));
      v2 = CGuild::GetLeaderName(this[12]);
      packet = PutString(packet, v2);
      ++v12;
    }
  }
  if ( this[13] != -4 )
  {
    for ( j = this[13]; j != -4; j = *(_DWORD *)(j + 32) )
    {
      if ( !this[12] || this[8] != *(_DWORD *)(j + 40) && this[8] != *(_DWORD *)(j + 36) )
      {
        if ( *(_DWORD *)(j + 36) && *(_DWORD *)(j + 40) != *(_DWORD *)(j + 36) )
          packet = (char *)sub_4189A0(packet, 0);
        else
          packet = (char *)sub_4189A0(packet, 1);
        packet = (char *)sub_44F9B0(packet, *(_DWORD *)(j + 36));
        packet = PutString(packet, (const char *)(j + 44));
        packet = PutString(packet, (const char *)(j + 61));
        ++v13;
      }
    }
  }
  CPlayer::Write(a2, 94, "bbbm", 20, (unsigned __int8)v12, (unsigned __int8)v13, &v6, packet - &v6);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 4D9830: using guessed type int dword_4D9830;

//----- (0041B060) --------------------------------------------------------
BOOL __thiscall CCastle::IsStandardAlive(_DWORD *this)
{
  BOOL v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v3 = this[15] == 0;
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v3;
}

//----- (0041B0A0) --------------------------------------------------------
int __thiscall CCastle::GetStandardUnfurl(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v3 = this[16];
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v3;
}

//----- (0041B0D0) --------------------------------------------------------
void __thiscall CCastle::SetStandardUnfurl(_DWORD *this, int a2)
{
  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  this[16] = a2;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}

//----- (0041B100) --------------------------------------------------------
void __thiscall CCastle::SetCurStandardGuild(int this, int a2, int a3)
{
  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  if ( *(_DWORD *)(this + 56) )
    CIOObject::Release(*(volatile int **)(this + 56));
  if ( a3 )
    CIOObject::AddRef(a3);
  *(_DWORD *)(this + 56) = a3;
  *(_DWORD *)(this + 60) = a2;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);

//----- (0041B160) --------------------------------------------------------
void __cdecl CCastle::UnfurlStandardCancel(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v2[4]; // [esp+0h] [ebp-10h] BYREF
  char v3[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  if ( a1 )
  {
    CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v2);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
              v1) )
        break;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 52) != -4 )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 32) == a1 )
        {
          *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 64) = 0;
          break;
        }
        for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
        {
          if ( *(_DWORD *)(i + 40) == a1 )
          {
            *(_DWORD *)(*(_DWORD *)(sub_420250(v5) + 4) + 64) = 0;
            CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
            return;
          }
        }
      }
      sub_446090(v3, 0);
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
  }
  else
  {
    LOG_ERR("CCastle::UnfurlStandardCancel() gid error");
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041B270) --------------------------------------------------------
int __thiscall CCastle::BrokenStandard(_DWORD *this, int a2)
{
  CIOBuffer *v4; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  if ( this[14] )
  {
    v4 = (CIOBuffer *)sub_44FCE0(94, "bbdsb", 0, 98, a2, this[14] + 44, this[20] != 0);
    if ( !--*(_DWORD *)(this[14] + 32) )
      *(_DWORD *)(this[14] + 356) = GetTickCount() + 600000;
  }
  else
  {
    v4 = (CIOBuffer *)sub_44FCE0(94, "bbdsb", 0, 98, a2, &Src, 0);
  }
  CCastle::_WarMsg(this, v4);
  CIOBuffer::Release(v4);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  CCastle::SetCurStandardGuild((int)this, 0, 0);
  return CCastle::SetLordDeclare(0);
}
// 41BC80: using guessed type _DWORD __stdcall sub_41BC80(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (0041B360) --------------------------------------------------------
int __cdecl CCastle::CreateStandard(int a1, int a2, char *Source, int a4)
{
  int i; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v6 = 0;
  for ( i = 0; i < 1; ++i )
  {
    if ( dword_4D5998[7 * i] == a1 )
    {
      if ( CMonsterGuildWar::Create(
             dword_4D5998[7 * i + 1],
             dword_4D5998[7 * i + 2],
             (int)&dword_4D5998[7 * i + 3],
             dword_4D5998[7 * i + 6] + (dword_4D5998[7 * i + 5] << 8),
             a2,
             Source,
             a4) )
      {
        v6 = 1;
      }
      return v6;
    }
  }
  return v6;
}

//----- (0041B3F0) --------------------------------------------------------
void __thiscall CCastle::CreateGate(int this, int a2, int a3, char *Source)
{
  int v5; // [esp+4h] [ebp-Ch] BYREF
  int *v6; // [esp+8h] [ebp-8h]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i < 5; ++i )
  {
    v6 = &dword_4D59B8[7 * i];
    if ( *v6 == a2 )
    {
      v5 = CMonsterGuildWar::Create(v6[1], v6[2], (int)(v6 + 3), v6[6] + (v6[5] << 8), a3, Source, 0);
      std::vector<CIOSocket::CIOTimer>::push_back(
        (std::vector<CIOSocket::CIOTimer> *)(this + 88),
        (const CIOSocket::CIOTimer *)&v5);
    }
  }
}

//----- (0041B480) --------------------------------------------------------
int *__stdcall CCastle::CreateNoExistGate(int a1, int a2, char *Source)
{
  int *result; // eax
  int v4; // esi
  int v5; // eax
  int v6; // [esp+0h] [ebp-20h]
  char v7[4]; // [esp+8h] [ebp-18h] BYREF
  char v8[4]; // [esp+Ch] [ebp-14h] BYREF
  int *v9; // [esp+10h] [ebp-10h]
  int i; // [esp+14h] [ebp-Ch]
  char v11[4]; // [esp+18h] [ebp-8h] BYREF
  int v12; // [esp+1Ch] [ebp-4h]

  result = (int *)sub_430C20(v11);
  for ( i = 0; i < 5; ++i )
  {
    v9 = &dword_4D59B8[7 * i];
    result = v9;
    if ( *v9 == a1 )
    {
      v12 = *(_DWORD *)sub_420010(v11, v6);
      if ( v12 )
      {
        (*(void (__thiscall **)(int, int, char *))(*(_DWORD *)v12 + 216))(v12, a2, Source);
      }
      else
      {
        v4 = CMonsterGuildWar::Create(v9[1], v9[2], (int)(v9 + 3), v9[6] + (v9[5] << 8), a2, Source, 0);
        *(_DWORD *)sub_420010(v11, v6) = v4;
      }
      sub_420030(v8, 0);
      v5 = sub_445B40(v7);
      result = (int *)unknown_libname_16(v5);
      if ( (_BYTE)result )
        break;
    }
  }
  return result;
}
// 41B4D5: variable 'v6' is possibly undefined
// 420010: using guessed type int __thiscall sub_420010(_DWORD, _DWORD);
// 420030: using guessed type _DWORD __stdcall sub_420030(_DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 445B40: using guessed type _DWORD __stdcall sub_445B40(_DWORD);

//----- (0041B580) --------------------------------------------------------
int __cdecl CCastle::IsGateAlive(char a1, unsigned int _Pos)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+0h] [ebp-10h] BYREF
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  sub_44AE20(v7, &a1);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
         v2) )
  {
    v5 = *(_DWORD *)(sub_420250(v7) + 4);
    if ( *std::vector<unsigned long>::operator[]((std::vector<unsigned long> *)(v5 + 88), _Pos) )
      v6 = 1;
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v6;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0041B610) --------------------------------------------------------
int __thiscall CCastle::GetTaxRate(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v3 = this[10];
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v3;
}

//----- (0041B640) --------------------------------------------------------
void __thiscall CCastle::SetTaxRate(_DWORD *this, int a2, int a3)
{
  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  this[10] = a3;
  CDBSocket::Write(63, "db", a2, (unsigned __int8)a3);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}

//----- (0041B690) --------------------------------------------------------
BOOL __thiscall CCastle::IsPayment(_DWORD *this)
{
  BOOL v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v3 = this[8] != 0;
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v3;
}

//----- (0041B6D0) --------------------------------------------------------
int __thiscall CCastle::GetTax(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  v3 = this[9];
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v3;
}

//----- (0041B700) --------------------------------------------------------
void __thiscall CCastle::AddTax(_DWORD *this, int a2)
{
  int v2; // [esp+0h] [ebp-8h]

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  if ( this[9] + (a2 < 0 ? 0 : a2) <= 2000000000 )
    v2 = this[9] + (a2 < 0 ? 0 : a2);
  else
    v2 = 2000000000;
  this[9] = v2;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}

//----- (0041B770) --------------------------------------------------------
int __thiscall CCastle::ResetTax(_DWORD *this, int a2)
{
  int v4; // [esp+4h] [ebp-4h]

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  v4 = this[9];
  this[9] = 0;
  CDBSocket::Write(27, "dd", a2, 0);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
  return v4;
}

//----- (0041B7C0) --------------------------------------------------------
char CCastle::TaxSave()
{
  char result; // al
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  _DWORD *v2; // eax
  int v3; // [esp-4h] [ebp-10h]
  char v4[4]; // [esp+0h] [ebp-Ch] BYREF
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  result = ++dword_4E099C;
  if ( dword_4E099C > 5 )
  {
    dword_4E099C = 0;
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
      result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                 (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
                 v1);
      if ( !result )
        break;
      v3 = *(_DWORD *)(*(_DWORD *)(sub_420250(v6) + 4) + 36);
      v2 = (_DWORD *)sub_420250(v6);
      CDBSocket::Write(27, "dd", *v2, v3);
      sub_446090(v5, 0);
    }
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 4E099C: using guessed type int dword_4E099C;

//----- (0041B860) --------------------------------------------------------
int __thiscall CCastle::IsGateUse(_DWORD *this, int a2)
{
  int i; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v5 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  if ( this[11] != 2 )
  {
    if ( this[11] )
    {
      if ( this[11] == 1 )
      {
        if ( a2 && this[12] )
        {
          if ( *(_DWORD *)(this[12] + 396) )
          {
            CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
            for ( i = *(_DWORD *)(this[12] + 396); i != -5 && *(_DWORD *)(i + 36) != a2; i = *(_DWORD *)(i + 32) )
              ;
            if ( i == -5 )
              v5 = 97;
            CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
          }
          else if ( this[8] != a2 )
          {
            v5 = 97;
          }
        }
        else
        {
          v5 = 97;
        }
      }
    }
    else if ( !a2 || this[8] != a2 )
    {
      v5 = 96;
    }
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v5;
}

//----- (0041B970) --------------------------------------------------------
int __thiscall CCastle::IsGateUseWarring(_DWORD *this, int a2)
{
  int i; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v5 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E09D4);
  if ( a2 && this[12] )
  {
    if ( *(_DWORD *)(this[12] + 396) )
    {
      CRWLock::ReadLock((CRWLock *)&unk_4E09B0);
      for ( i = *(_DWORD *)(this[12] + 396); i != -5 && *(_DWORD *)(i + 36) != a2; i = *(_DWORD *)(i + 32) )
        ;
      if ( i == -5 )
        v5 = 97;
      CRWLock::ReadUnlock((CRWLock *)&unk_4E09B0);
    }
    else if ( this[8] != a2 )
    {
      v5 = 97;
    }
  }
  else
  {
    v5 = 97;
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E09D4);
  return v5;
}

//----- (0041BA30) --------------------------------------------------------
int __cdecl CCastle::GateGoto(int a1, int a2)
{
  int result; // eax
  int i; // [esp+4h] [ebp-4h]

  for ( i = 0; i < 10; ++i )
  {
    if ( dword_4D5A48[7 * i + 1] == a2 )
      return CPlayer::Teleport(dword_4D5A48[7 * i + 2], &dword_4D5A48[7 * i + 3], 0, 0);
    result = i + 1;
  }
  return result;
}
// 45CC90: using guessed type _DWORD __stdcall CPlayer::Teleport(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0041BA90) --------------------------------------------------------
int __thiscall CCastle::SetGateLimit(_DWORD *this, int a2, int a3)
{
  if ( a2 < 0 || a2 > 2 )
    return 0;
  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  this[11] = a2;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
  CDBSocket::Write(65, "db", a3, (unsigned __int8)a2);
  return 1;
}

//----- (0041BAF0) --------------------------------------------------------
void __cdecl CCastle::SetWarRemainSecondTime(int a1)
{
  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  dword_4E09A0 = a1;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 4E09A0: using guessed type int dword_4E09A0;

//----- (0041BB20) --------------------------------------------------------
void __cdecl CCastle::ChangeLeaderName(int a1, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v2) )
      break;
    for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250(v6) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 40) == a1 )
      {
        strcpy((char *)(i + 61), Source);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
        return;
      }
    }
    sub_446090(v4, 0);
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041BBD0) --------------------------------------------------------
void __cdecl CCastle::ChangeGuildName(int a1, char *Source)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int i; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v2) )
      break;
    for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250(v6) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 40) == a1 )
      {
        strcpy((char *)(i + 44), Source);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
        return;
      }
    }
    sub_446090(v4, 0);
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041BC80) --------------------------------------------------------
void __thiscall CCastle::SetLordDeclare(_DWORD *this, int a2)
{
  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  this[20] = a2;
  if ( a2 )
    this[21] = time(0) + 300;
  else
    this[21] = 0;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}

//----- (0041BCE0) --------------------------------------------------------
void CCastle::SecondProcess()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  char v1[4]; // [esp+0h] [ebp-24h] BYREF
  char v2[4]; // [esp+4h] [ebp-20h] BYREF
  CIOBuffer *v3; // [esp+8h] [ebp-1Ch]
  CIOBuffer *v4; // [esp+Ch] [ebp-18h]
  _DWORD *v5; // [esp+10h] [ebp-14h]
  int v6; // [esp+14h] [ebp-10h]
  char v7[4]; // [esp+18h] [ebp-Ch] BYREF
  __time32_t v8; // [esp+1Ch] [ebp-8h]
  int v9; // [esp+20h] [ebp-4h]

  v9 = 0;
  v8 = time(0);
  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v1);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v0) )
      break;
    v5 = *(_DWORD **)(sub_420250(v7) + 4);
    if ( v5[13] != -4 && v5[19] )
    {
      v6 = v5[19] - v8;
      if ( v6 <= 600 )
      {
        if ( !(v6 % 60) || v6 <= 60 )
        {
          v4 = (CIOBuffer *)sub_44FCE0(94, "bbbb", 0, 100, (unsigned __int8)(v6 / 60), (unsigned __int8)(v6 % 60));
          CCastle::_WarMsg(v5, v4);
          CIOBuffer::Release(v4);
        }
        if ( v6 <= 0 )
        {
          v9 = CCastle::IsWarEnd(v5);
          if ( v9 )
            CCastle::WarEnd(v5);
        }
      }
      if ( v5[20] )
      {
        v6 = v5[21] - v8;
        if ( v6 <= 300 && (!(v6 % 60) || v6 < 60 && !(v6 % 10) || v6 <= 30) )
        {
          v3 = (CIOBuffer *)sub_44FCE0(
                              94,
                              "bbsbb",
                              0,
                              104,
                              v5[14] + 44,
                              (unsigned __int8)(v6 / 60),
                              (unsigned __int8)(v6 % 60));
          CCastle::_WarMsg(v5, v3);
          CIOBuffer::Release(v3);
        }
        if ( v6 <= 0 )
        {
          CCastle::ChangeLord(v5);
          v5[20] = 0;
          v5[21] = 0;
        }
      }
    }
    sub_446090(v2, 0);
  }
  if ( v9 )
    dword_4E0964 = 0;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
}
// 41BEE0: using guessed type int __thiscall sub_41BEE0(_DWORD);
// 41C180: using guessed type int __thiscall sub_41C180(_DWORD);
// 41C210: using guessed type int __thiscall sub_41C210(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 4E0964: using guessed type int dword_4E0964;

//----- (0041BEE0) --------------------------------------------------------
int __thiscall CCastle::WarEnd(int this)
{
  CIOBuffer *v1; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v5[4]; // [esp+8h] [ebp-2Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-28h] BYREF
  int v7; // [esp+10h] [ebp-24h] BYREF
  int v8; // [esp+14h] [ebp-20h] BYREF
  char v9[4]; // [esp+18h] [ebp-1Ch] BYREF
  char *v10; // [esp+1Ch] [ebp-18h]
  _DWORD v11[3]; // [esp+20h] [ebp-14h] BYREF
  int v12; // [esp+2Ch] [ebp-8h]
  CIOBuffer *v13; // [esp+30h] [ebp-4h]

  CCastle::ChangeLord(this);
  if ( *(_DWORD *)(this + 48) )
    v1 = (CIOBuffer *)sub_44FCE0(94, "bbds", 0, 79, *(_DWORD *)(this + 68), *(_DWORD *)(this + 48) + 44);
  else
    v1 = (CIOBuffer *)sub_44FCE0(94, "bbds", 0, 79, *(_DWORD *)(this + 68), &Src);
  v13 = v1;
  CCastle::_WarMsg((_DWORD *)this, v1);
  CIOBuffer::Release(v13);
  LOG_NORMAL("CCastle::WarEnd  ");
  sub_47D030(v11);
  CMonster::GetMonsterList(v11, 319);
  v10 = 0;
  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(v9);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
            v2) )
      break;
    v10 = *(char **)sub_40F040(v9);
    v8 = 0;
    v7 = 0;
    (*(void (__thiscall **)(char *, char *, _DWORD, int *, int *))(*(_DWORD *)v10 + 236))(v10, v10, 0, &v8, &v7);
    CBase::Delete(v10);
    sub_47D0A0(v6, 0);
  }
  v12 = 0;
  if ( *(_DWORD *)(this + 48) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(this + 48) + 392) )
      v12 = *(_DWORD *)(*(_DWORD *)(this + 48) + 392);
    else
      v12 = *(_DWORD *)(this + 32);
  }
  CPlayer::WarPortalAll(*(_DWORD *)(this + 68), v12);
  if ( *(_DWORD *)(this + 52) != -4 )
  {
    CWar::Clear(*(_DWORD *)(this + 52));
    *(_DWORD *)(this + 52) = -4;
  }
  CNPC::WarRelationShow(*(_DWORD *)(this + 68), 1);
  if ( *(_DWORD *)(this + 48) )
  {
    if ( !*(_DWORD *)(this + 56) )
      CCastle::CreateStandard(*(_DWORD *)(this + 68), *(_DWORD *)(this + 32), (char *)(*(_DWORD *)(this + 48) + 44), 0);
    CCastle::CreateNoExistGate(*(_DWORD *)(this + 68), *(_DWORD *)(this + 32), (char *)(*(_DWORD *)(this + 48) + 44));
  }
  else
  {
    CCastle::CreateStandard(*(_DWORD *)(this + 68), 0, (char *)&Src, 0);
    CCastle::CreateNoExistGate(*(_DWORD *)(this + 68), 0, (char *)&Src);
  }
  if ( *(_DWORD *)(this + 56) )
    CIOObject::Release(*(volatile int **)(this + 56));
  if ( *(_DWORD *)(this + 48) )
    CIOObject::AddRef(*(_DWORD *)(this + 48));
  *(_DWORD *)(this + 56) = *(_DWORD *)(this + 48);
  *(_DWORD *)(this + 60) = *(_DWORD *)(this + 32);
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 80) = 0;
  *(_DWORD *)(this + 84) = 0;
  *(_DWORD *)(this + 76) = 0;
  *(_DWORD *)(this + 72) = 0;
  CDBSocket::Write(62, &Src);
  return sub_472990(v11);
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 40EFA0: using guessed type _DWORD __stdcall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(_DWORD);
// 41C210: using guessed type int __thiscall CCastle::ChangeLord(_DWORD);
// 41C6B0: using guessed type int __thiscall CWar::Clear(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 43A2C0: using guessed type _DWORD __cdecl sub_43A2C0(_DWORD, _DWORD);
// 4492A0: using guessed type _DWORD __cdecl CNPC::WarRelationShow(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452C90: using guessed type _DWORD __cdecl CPlayer::WarPortalAll(_DWORD, _DWORD);
// 472990: using guessed type int __thiscall sub_472990(_DWORD);
// 47D0A0: using guessed type _DWORD __stdcall sub_47D0A0(_DWORD, _DWORD);

//----- (0041C180) --------------------------------------------------------
int __thiscall CCastle::IsWarEnd(_DWORD *this)
{
  CIOBuffer *v3; // [esp+4h] [ebp-4h]

  if ( !this[16] && !this[20] )
    return 1;
  if ( (int)++this[18] >= 4 )
    return 1;
  v3 = (CIOBuffer *)sub_44FCE0(94, "bb", 0, 105);
  CCastle::_WarMsg(this, v3);
  LOG_NORMAL("CCastle::IsWarEnd   ");
  CIOBuffer::Release(v3);
  this[19] += 600;
  return 0;
}
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (0041C210) --------------------------------------------------------
void __thiscall CCastle::ChangeLord(int this)
{
  CIOBuffer *v1; // eax
  CIOBuffer *v3; // [esp+8h] [ebp-8h]
  int v4; // [esp+Ch] [ebp-4h]

  v4 = 0;
  if ( *(_DWORD *)(this + 56) )
  {
    v4 = *(_DWORD *)(this + 56);
  }
  else if ( *(_DWORD *)(this + 48) )
  {
    v4 = *(_DWORD *)(this + 48);
  }
  if ( v4 != *(_DWORD *)(this + 48) )
  {
    *(_DWORD *)(this + 32) = *(_DWORD *)(this + 60);
    CCastle::SetGuild((volatile int **)this, *(volatile int **)(this + 56));
    CDBSocket::Write(64, "dd", *(_DWORD *)(this + 68), *(_DWORD *)(this + 32));
    if ( *(_DWORD *)(this + 48) )
      v1 = (CIOBuffer *)sub_44FCE0(94, "bbds", 0, 106, *(_DWORD *)(this + 68), *(_DWORD *)(this + 48) + 44);
    else
      v1 = (CIOBuffer *)sub_44FCE0(94, "bbds", 0, 106, *(_DWORD *)(this + 68), &Src);
    v3 = v1;
    CCastle::_WarMsg((_DWORD *)this, v1);
    CIOBuffer::Release(v3);
    *(_DWORD *)(this + 36) = 0;
    *(_DWORD *)(this + 40) = 100;
    CDBSocket::Write(63, "db", *(_DWORD *)(this + 68), 100);
  }
}
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (0041C310) --------------------------------------------------------
int CCastle::IsWarDeclared()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E09C8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v2);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(v4) + 4) + 52) != -4 )
      return 1;
    sub_446090(v3, 0);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041C380) --------------------------------------------------------
_DWORD *__thiscall CWar::CWar(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B58F0;
  this[8] = -4;
  this[9] = 0;
  this[10] = 0;
  memset(this + 11, 0, 0x11u);
  memset((char *)this + 61, 0, 0x11u);
  this[20] = 0;
  return this;
}
// 4B58F0: using guessed type int (__stdcall *off_4B58F0)(int);

//----- (0041C3F0) --------------------------------------------------------
void *__thiscall CWar::_scalar_deleting_destructor_(void *this, char a2)
{
  CWar::_CWar(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 41C420: using guessed type int __thiscall sub_41C420(_DWORD);

//----- (0041C420) --------------------------------------------------------
int __thiscall CWar::_CWar(_DWORD *this)
{
  *this = &off_4B58F0;
  return CBase::_CBase(this);
}
// 4B58F0: using guessed type int (__stdcall *off_4B58F0)(int);

//----- (0041C440) --------------------------------------------------------
BOOL CWar::Start()
{
  hHandle = CreateEventA(0, 1, 0, 0);
  CDBSocket::Write(58, &Src);
  WaitForSingleObject(hHandle, 0xFFFFFFFF);
  return CloseHandle(hHandle);
}

//----- (0041C490) --------------------------------------------------------
void __cdecl CWar::Load(int a1, char *packet)
{
  int v2; // eax
  int v3; // eax
  char *v4; // eax
  char *v5; // eax
  int v6; // eax
  int v7; // eax
  char *v8; // [esp-4h] [ebp-24h]
  char *v9; // [esp+0h] [ebp-20h]
  char v10[4]; // [esp+4h] [ebp-1Ch] BYREF
  char v11[4]; // [esp+8h] [ebp-18h] BYREF
  _DWORD *v12; // [esp+Ch] [ebp-14h]
  int v13; // [esp+10h] [ebp-10h]
  int v14; // [esp+14h] [ebp-Ch] BYREF
  char *v15; // [esp+18h] [ebp-8h]
  char v16[4]; // [esp+1Ch] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E09D4);
  if ( a1 )
  {
    std___String_base___String_base(&v14);
    while ( a1 > 0 )
    {
      v12 = operator_new(0x54u);
      if ( v12 )
        v9 = (char *)CWar::CWar(v12);
      else
        v9 = 0;
      v15 = v9;
      v2 = sub_47A240(packet, v16);
      v3 = sub_47A240(v2, v15 + 36);
      v4 = (char *)sub_47A240(v3, v15 + 40);
      v5 = GetString(v4, v15 + 44);
      packet = GetString(v5, v15 + 61);
      v14 = *(_DWORD *)sub_44AE20(v11, v16);
      v6 = sub_430C20(v10);
      if ( (unsigned __int8)unknown_libname_16(v6) )
      {
        LOG_ERR("CWar::Load() not find castle (cid:%d)", *(_DWORD *)v16);
        CBase::Delete(v15);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
        return;
      }
      v13 = *(_DWORD *)(sub_420250(&v14) + 4);
      if ( *((_DWORD *)v15 + 10) == *(_DWORD *)(v13 + 32) )
        CWar::SetGuild((volatile int **)v15, *(volatile int **)(v13 + 48));
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v14) + 4) + 52) == -4 )
      {
        v7 = sub_420250(&v14);
        *(_DWORD *)(*(_DWORD *)(v7 + 4) + 52) = v15;
      }
      else
      {
        v8 = v15;
        sub_420250(&v14);
        CWar::ADD(v8);
      }
      --a1;
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
  }
  else
  {
    SetEvent(hHandle);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E09D4);
  }
}
// 41C670: using guessed type _DWORD __stdcall CWar::ADD(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (0041C650) --------------------------------------------------------
void __thiscall CWar::OnDelete(volatile int **this)
{
  CWar::SetGuild(this, 0);
  CBase::OnDelete((volatile int *)this);
}

//----- (0041C670) --------------------------------------------------------
_DWORD *__thiscall CWar::ADD(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  while ( 1 )
  {
    result = this;
    if ( this[8] == -4 )
      break;
    this = (_DWORD *)this[8];
  }
  this[8] = a2;
  return result;
}

//----- (0041C6B0) --------------------------------------------------------
int __thiscall CWar::Clear(int this)
{
  int v3; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  for ( i = *(_DWORD *)(this + 32); i != -4; i = v3 )
  {
    v3 = *(_DWORD *)(i + 32);
    *(_DWORD *)(i + 32) = -4;
    CBase::Delete((char *)i);
  }
  *(_DWORD *)(this + 32) = -4;
  return CBase::Delete((char *)this);
}

//----- (0041C710) --------------------------------------------------------
_DWORD *__thiscall sub_41C710(_DWORD *this)
{
  _DWORD *v1; // eax
  _DWORD *result; // eax

  v1 = (_DWORD *)sub_478AB0(this);
  sub_41C8D0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 41C8D0: using guessed type _DWORD __stdcall sub_41C8D0(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (0041C770) --------------------------------------------------------
_DWORD *__thiscall sub_41C770(_DWORD *this)
{
  _DWORD *v1; // eax
  _DWORD *result; // eax

  v1 = (_DWORD *)sub_478AB0(this);
  sub_41C950(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 41C950: using guessed type _DWORD __stdcall sub_41C950(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (0041C7D0) --------------------------------------------------------
void __thiscall std::vector<CIOSocket::CIOTimer>::vector<CIOSocket::CIOTimer>(std::vector<CIOSocket::CIOTimer> *this)
{
  std::vector<CIOSocket::CIOTimer> *v1; // [esp-4h] [ebp-Ch] BYREF
  std::vector<unsigned long> *v2; // [esp+0h] [ebp-8h]

  v2 = this;
  v1 = this;
  LocaleUpdate__GetLocaleT(&v1);
  sub_44F7C0((char)v1);
  std::vector<unsigned long>::_Buy(v2, 0);
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);
// 44F7C0: using guessed type _DWORD __stdcall sub_44F7C0(char);

//----- (0041C800) --------------------------------------------------------
unsigned int *__thiscall std::vector<unsigned long>::operator[](std::vector<unsigned long> *this, unsigned int _Pos)
{
  int v2; // eax
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  sub_430C20(v6);
  v2 = sub_44F7E0(v5, _Pos);
  return (unsigned int *)sub_420010(v2, this);
}
// 420010: using guessed type int __thiscall sub_420010(_DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44F7E0: using guessed type _DWORD __stdcall sub_44F7E0(_DWORD, _DWORD _Off);

//----- (0041C840) --------------------------------------------------------
void __thiscall std::vector<CIOSocket::CIOTimer>::push_back(std::vector<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Val)
{
  unsigned int v2; // esi
  void **v3; // eax
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<unsigned long>::size(this);
  if ( v2 >= std::vector<unsigned long>::capacity(this) )
  {
    v3 = (void **)sub_445B40(v6);
    std::vector<CIOSocket::CIOTimer>::insert(v5, *v3, _Val);
  }
  else
  {
    *((_DWORD *)this + 2) = std::vector<unsigned long>::_Ufill(
                              this,
                              *((unsigned int **)this + 2),
                              1u,
                              (const unsigned int *)_Val);
  }
}
// 41C9D0: using guessed type _DWORD __stdcall std::vector<CIOSocket::CIOTimer>::insert(_DWORD, void *Src, _DWORD);
// 445B40: using guessed type _DWORD __stdcall sub_445B40(_DWORD);

//----- (0041C8B0) --------------------------------------------------------
void *__thiscall std___String_base___String_base(void *this)
{
  std___Container_base___Container_base(this);
  return this;
}

//----- (0041C8D0) --------------------------------------------------------
int __stdcall sub_41C8D0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_41C8D0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0041C950) --------------------------------------------------------
int __stdcall sub_41C950(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_41C950(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0041C9D0) --------------------------------------------------------
_DWORD *__thiscall std::vector<CIOSocket::CIOTimer>::insert(int *this, _DWORD *a2, void *Src, int a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<unsigned long>::size((std::vector<unsigned long> *)this) )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this, v11);
    v8 = std::vector<CIOSocket::CIOTimer>::iterator::operator-((std::vector<CIOSocket::CIOTimer>::iterator *)&Src, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_41CB80((int)this, Src, 1, a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, v10);
  sub_44F7E0(v5, a2, v7);
  return a2;
}

//----- (0041CA50) --------------------------------------------------------
unsigned int *__thiscall std::vector<unsigned long>::_Ufill(std::vector<unsigned long> *this, unsigned int *_Ptr, unsigned int _Count, const unsigned int *_Val)
{
  std::_Uninitialized_fill_n<unsigned long *,unsigned int,unsigned long,std::allocator<unsigned long>>(
    _Ptr,
    _Count,
    _Val);
  return &_Ptr[_Count];
}

//----- (0041CA80) --------------------------------------------------------
void __thiscall std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *this, const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *_Val1, const bool *_Val2)
{
  *(_DWORD *)this = *(_DWORD *)_Val1;
  *((_BYTE *)this + 4) = *_Val2;
}

//----- (0041CAB0) --------------------------------------------------------
_DWORD *__thiscall sub_41CAB0(_DWORD *this)
{
  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::const_iterator::operator++(this);
  return this;
}

//----- (0041CAD0) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Lbound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0((int *)this);
  v6 = *((_DWORD *)this + 1);
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, _Keyval) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
  }
  return (std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *)v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0041CB60) --------------------------------------------------------
unsigned int __thiscall sub_41CB60(std::allocator<unsigned long> *this)
{
  return std::allocator<unsigned long>::max_size(this);
}

//----- (0041CB80) --------------------------------------------------------
void __thiscall sub_41CB80(int this, void *Src, int _Count, int a4)
{
  unsigned int v4; // esi
  unsigned int *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-1Ch]
  CIOSocket::CIOTimer *_Last; // [esp+Ch] [ebp-14h]
  CIOSocket::CIOTimer *_Dest; // [esp+10h] [ebp-10h]
  CIOSocket::CIOTimer *v10; // [esp+14h] [ebp-Ch]
  unsigned int v11; // [esp+18h] [ebp-8h]
  int v12; // [esp+18h] [ebp-8h]
  unsigned int _Val; // [esp+1Ch] [ebp-4h] BYREF
  unsigned int _Counta; // [esp+2Ch] [ebp+Ch]

  _Val = *(_DWORD *)a4;
  v11 = std::vector<unsigned long>::capacity((std::vector<unsigned long> *)this);
  if ( _Count )
  {
    v4 = sub_41CB60((std::allocator<unsigned long> *)this);
    if ( v4 - std::vector<unsigned long>::size((std::vector<unsigned long> *)this) >= _Count )
    {
      if ( v11 >= _Count + std::vector<unsigned long>::size((std::vector<unsigned long> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)Src) >> 2 >= (unsigned int)_Count )
        {
          _Last = *(CIOSocket::CIOTimer **)(this + 8);
          *(_DWORD *)(this + 8) = std::vector<CIOSocket::CIOTimer>::_Ucopy<CIOSocket::CIOTimer *>(
                                    (CIOSocket::CIOTimer *)((char *)_Last - 4 * _Count),
                                    _Last,
                                    _Last);
          sub_44FAC0(Src, (int)_Last - 4 * _Count, (int)_Last);
          std::fill<unsigned long *,unsigned long>((unsigned int *)Src, (unsigned int *)Src + _Count, &_Val);
        }
        else
        {
          std::vector<CIOSocket::CIOTimer>::_Ucopy<CIOSocket::CIOTimer *>(
            (CIOSocket::CIOTimer *)Src,
            *(CIOSocket::CIOTimer **)(this + 8),
            (CIOSocket::CIOTimer *)((char *)Src + 4 * _Count));
          std::vector<unsigned long>::_Ufill(
            (std::vector<unsigned long> *)this,
            *(unsigned int **)(this + 8),
            _Count - ((*(_DWORD *)(this + 8) - (int)Src) >> 2),
            &_Val);
          *(_DWORD *)(this + 8) += 4 * _Count;
          std::fill<unsigned long *,unsigned long>(
            (unsigned int *)Src,
            (unsigned int *)(*(_DWORD *)(this + 8) - 4 * _Count),
            &_Val);
        }
      }
      else
      {
        if ( sub_41CB60((std::allocator<unsigned long> *)this) - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < _Count + std::vector<unsigned long>::size((std::vector<unsigned long> *)this) )
          v12 = _Count + std::vector<unsigned long>::size((std::vector<unsigned long> *)this);
        _Dest = (CIOSocket::CIOTimer *)sub_41CE40(v12);
        v5 = std::vector<CIOSocket::CIOTimer>::_Ucopy<CIOSocket::CIOTimer *>(
               *(CIOSocket::CIOTimer **)(this + 4),
               (CIOSocket::CIOTimer *)Src,
               _Dest);
        v10 = (CIOSocket::CIOTimer *)std::vector<unsigned long>::_Ufill(
                                       (std::vector<unsigned long> *)this,
                                       v5,
                                       _Count,
                                       &_Val);
        std::vector<CIOSocket::CIOTimer>::_Ucopy<CIOSocket::CIOTimer *>(
          (CIOSocket::CIOTimer *)Src,
          *(CIOSocket::CIOTimer **)(this + 8),
          v10);
        _Counta = _Count + std::vector<unsigned long>::size((std::vector<unsigned long> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_44F720(*(unsigned int **)(this + 4), *(unsigned int **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 2);
        }
        *(_DWORD *)(this + 12) = (char *)_Dest + 4 * v12;
        *(_DWORD *)(this + 8) = (char *)_Dest + 4 * _Counta;
        *(_DWORD *)(this + 4) = _Dest;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (0041CE40) --------------------------------------------------------
CMemory **__stdcall sub_41CE40(int a1)
{
  return sub_44FB00(a1);
}

//----- (0041CE60) --------------------------------------------------------
std::vector<unsigned long>::iterator *__thiscall std::vector<unsigned long>::iterator::operator+=(std::vector<unsigned long>::iterator *this, int _Off)
{
  *(_DWORD *)this += 4 * _Off;
  return this;
}

//----- (0041CE80) --------------------------------------------------------
int __thiscall std::vector<CIOSocket::CIOTimer>::iterator::operator-(std::vector<CIOSocket::CIOTimer>::iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  v3 = *(_DWORD *)this;
  return sub_41CEE0(&v3, _Right);
}

//----- (0041CEB0) --------------------------------------------------------
_DWORD *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::const_iterator::operator++(_DWORD *this)
{
  *this = *(_DWORD *)unknown_libname_25(*this);
  return this;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0041CEE0) --------------------------------------------------------
int __thiscall sub_41CEE0(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) >> 2;
}

//----- (0041CF30) --------------------------------------------------------
unsigned int *__stdcall std::vector<CIOSocket::CIOTimer>::_Ucopy<CIOSocket::CIOTimer *>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest)
{
  return std::_Uninitialized_copy<unsigned long *,unsigned long *,std::allocator<unsigned long>>(
           (unsigned int *)_First,
           (unsigned int *)_Last,
           (unsigned int *)_Dest);
}

//----- (0041CF60) --------------------------------------------------------
void __cdecl sub_41CF60(unsigned int *_First, unsigned int _Count, unsigned int *_Val)
{
  std::fill_n<unsigned long *,unsigned int,unsigned long>(_First, _Count, _Val);
}

//----- (0041CF80) --------------------------------------------------------
void *__cdecl std::_Copy_backward_opt<unsigned long *,unsigned long *>(void *Src, int a2, int a3)
{
  return memcpy_0((void *)(a3 - 4 * ((a2 - (int)Src) >> 2)), Src, 4 * ((a2 - (int)Src) >> 2));
}

//----- (0041D000) --------------------------------------------------------
void *__thiscall sub_41D000(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0041D030) --------------------------------------------------------
void *__thiscall sub_41D030(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0041D060) --------------------------------------------------------
int __thiscall sub_41D060(int *this)
{
  return sub_41D080(this);
}

//----- (0041D080) --------------------------------------------------------
int __thiscall sub_41D080(int *this)
{
  return sub_41D0A0(this);
}

//----- (0041D0A0) --------------------------------------------------------
int __thiscall sub_41D0A0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_41D150(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0041D150) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D150(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_41C710(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0041D1F0) --------------------------------------------------------
int __thiscall sub_41D1F0(int *this)
{
  return sub_41D210(this);
}

//----- (0041D210) --------------------------------------------------------
int __thiscall sub_41D210(int *this)
{
  return sub_41D230(this);
}

//----- (0041D230) --------------------------------------------------------
int __thiscall sub_41D230(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_41D2E0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0041D2E0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_41D2E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_41C770(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0041D380) --------------------------------------------------------
_DWORD *__thiscall CInitItem::CInitItem(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B5978;
  sub_41FFC0(this + 30);
  memset(this + 8, 0, 0x1Fu);
  this[16] = 0;
  this[17] = 0;
  this[18] = 0;
  this[19] = 0;
  this[20] = 0;
  this[21] = 0;
  this[22] = 0;
  this[23] = 0;
  this[24] = -1;
  this[25] = 0;
  this[26] = 0;
  this[27] = 0;
  this[28] = 0;
  this[29] = 0;
  this[33] = 0;
  this[34] = 0;
  this[35] = 0;
  this[36] = 0;
  this[37] = 0;
  this[38] = 0;
  this[39] = 0;
  this[40] = -1;
  this[41] = 0;
  this[42] = 0;
  this[43] = 0;
  this[44] = 0;
  this[45] = 0;
  return this;
}
// 41FFC0: using guessed type int __thiscall sub_41FFC0(_DWORD);
// 4B5978: using guessed type int (__stdcall *off_4B5978)(int);

//----- (0041D500) --------------------------------------------------------
void *__thiscall CInitItem::_scalar_deleting_destructor_(void *this, char a2)
{
  CInitItem::_CInitItem(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 41D530: using guessed type int __thiscall sub_41D530(_DWORD);

//----- (0041D530) --------------------------------------------------------
int __thiscall CInitItem::_CInitItem(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  void *v4; // [esp+4h] [ebp-10h]
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  *(_DWORD *)this = &off_4B5978;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 120),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v1) )
      break;
    v4 = *(void **)(sub_420250(v7) + 4);
    operator_delete(v4);
    sub_446090(v6, 0);
  }
  sub_41D5C0(this + 120);
  return CBase::_CBase((_DWORD *)this);
}
// 41D5C0: using guessed type int __thiscall sub_41D5C0(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 4B5978: using guessed type int (__stdcall *off_4B5978)(int);

//----- (0041D5C0) --------------------------------------------------------
int __thiscall sub_41D5C0(void *this)
{
  return sub_41FFF0(this, this);
}
// 41FFF0: using guessed type int __thiscall sub_41FFF0(_DWORD, _DWORD);

//----- (0041D5E0) --------------------------------------------------------
int CInitItem::Open()
{
  int result; // eax
  char v1[8]; // [esp+0h] [ebp-10h] BYREF
  char v2[4]; // [esp+8h] [ebp-8h]
  int v3; // [esp+Ch] [ebp-4h]

  v3 = 46;
  *(_DWORD *)v2 = 0;
  while ( *(int *)v2 < v3 )
  {
    sub_420060(
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v1,
      8 * *(_DWORD *)v2 + 5114368);
    if ( !v1[4] )
      LOG_ERR("CInitItem::Open() Duplicate Key. (key:%d)", *(_DWORD *)v2);
    result = ++*(_DWORD *)v2;
  }
  return result;
}
// 420060: using guessed type _DWORD __stdcall sub_420060(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (0041D640) --------------------------------------------------------
int __cdecl CInitItem::FindKey(char a1)
{
  int v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  sub_44C970(v4, &a1);
  v1 = sub_430C20(v3);
  if ( (unsigned __int8)unknown_libname_16(v1) )
    result = -1;
  else
    result = *(_DWORD *)(sub_420250(v4) + 4);
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44C970: using guessed type _DWORD __stdcall sub_44C970(_DWORD, _DWORD);

//----- (0041D690) --------------------------------------------------------
_DWORD *CInitItem::Copy()
{
  _DWORD *v1; // [esp+0h] [ebp-Ch]
  _DWORD *v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0xB8u);
  if ( v2 )
    v1 = CInitItem::CInitItem(v2);
  else
    v1 = 0;
  return v1;
}

//----- (0041D6D0) --------------------------------------------------------
int __thiscall CInitItem::Set(char *this, int a2, int a3)
{
  lisp::var *v3; // eax
  int v4; // eax
  int result; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  char v8; // al
  lisp::var *v9; // eax
  char v10; // al
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  char v20; // al
  lisp::var *v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  lisp::var *v30; // eax
  lisp::var *v31; // eax
  lisp::var *v32; // eax
  lisp::var *v33; // eax
  lisp::var *v34; // eax
  lisp::var *v35; // eax
  lisp::var *v36; // eax
  _DWORD v37[2]; // [esp-4h] [ebp-9Ch] BYREF
  char *v38; // [esp+4h] [ebp-94h]
  char v39[4]; // [esp+Ch] [ebp-8Ch] BYREF
  char v40[4]; // [esp+10h] [ebp-88h] BYREF
  char v41[4]; // [esp+14h] [ebp-84h] BYREF
  char v42[4]; // [esp+18h] [ebp-80h] BYREF
  char v43[4]; // [esp+1Ch] [ebp-7Ch] BYREF
  char v44[4]; // [esp+20h] [ebp-78h] BYREF
  char v45[4]; // [esp+24h] [ebp-74h] BYREF
  char v46[4]; // [esp+28h] [ebp-70h] BYREF
  char v47[4]; // [esp+2Ch] [ebp-6Ch] BYREF
  char v48[4]; // [esp+30h] [ebp-68h] BYREF
  char v49[8]; // [esp+34h] [ebp-64h] BYREF
  char v50[4]; // [esp+3Ch] [ebp-5Ch] BYREF
  char v51[4]; // [esp+40h] [ebp-58h] BYREF
  char v52[4]; // [esp+44h] [ebp-54h] BYREF
  char v53[4]; // [esp+48h] [ebp-50h] BYREF
  char v54[4]; // [esp+4Ch] [ebp-4Ch] BYREF
  char v55[4]; // [esp+50h] [ebp-48h] BYREF
  char v56[4]; // [esp+54h] [ebp-44h] BYREF
  char v57[4]; // [esp+58h] [ebp-40h] BYREF
  char v58[4]; // [esp+5Ch] [ebp-3Ch] BYREF
  char v59[4]; // [esp+60h] [ebp-38h] BYREF
  char v60[4]; // [esp+64h] [ebp-34h] BYREF
  char v61[4]; // [esp+68h] [ebp-30h] BYREF
  char v62[4]; // [esp+6Ch] [ebp-2Ch] BYREF
  char v63[4]; // [esp+70h] [ebp-28h] BYREF
  char v64[4]; // [esp+74h] [ebp-24h] BYREF
  char v65[4]; // [esp+78h] [ebp-20h] BYREF
  char v66[4]; // [esp+7Ch] [ebp-1Ch] BYREF
  char v67[4]; // [esp+80h] [ebp-18h] BYREF
  int v68; // [esp+84h] [ebp-14h]
  int v69; // [esp+88h] [ebp-10h]
  int v70; // [esp+8Ch] [ebp-Ch]
  int v71; // [esp+90h] [ebp-8h]
  char *Str; // [esp+94h] [ebp-4h]

  v38 = this;
  v37[1] = a2 - 1;
  switch ( a2 )
  {
    case 1:
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v67);
      v4 = sub_40C8D0(v3);
      Str = (char *)GetStr(v4);
      if ( Str && strlen(Str) && strlen(Str) <= 0x1E )
      {
        strcpy(v38 + 32, Str);
        goto LABEL_34;
      }
      LOG_ERR("CInitItem::Set() Invalid Name. (Name:%s)", Str);
      return 0;
    case 2:
      v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v66);
      *((_DWORD *)v38 + 16) = sub_40C8D0(v6);
      goto LABEL_34;
    case 7:
      v15 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v59);
      *((_DWORD *)v38 + 20) = sub_40C8D0(v15);
      goto LABEL_34;
    case 8:
      v29 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v46);
      *((_DWORD *)v38 + 38) = sub_40C8D0(v29);
      goto LABEL_34;
    case 34:
      v22 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v53);
      *((_DWORD *)v38 + 26) = sub_40C8D0(v22);
      goto LABEL_34;
    case 38:
      v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v65);
      v8 = sub_402360(v7);
      *((_DWORD *)v38 + 17) = CInitItem::FindKey(v8);
      v9 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v64);
      v10 = sub_402360(v9);
      *((_DWORD *)v38 + 18) = CInitItem::FindKey(v10);
      goto LABEL_34;
    case 39:
      v19 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v55);
      v20 = sub_402360(v19);
      *((_DWORD *)v38 + 24) = CInitItem::FindKey(v20);
      v21 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v54);
      *((_DWORD *)v38 + 25) = sub_40C8D0(v21);
      goto LABEL_34;
    case 40:
      v23 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v52);
      *((_DWORD *)v38 + 27) = sub_40C8D0(v23);
      goto LABEL_34;
    case 41:
      v25 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v50);
      *((_DWORD *)v38 + 29) = sub_40C8D0(v25);
      goto LABEL_34;
    case 42:
      v37[0] = a2 - 1;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        v37,
        &a3);
      if ( CInitItem::SetSpec(v37[0]) )
        goto LABEL_34;
      result = 0;
      break;
    case 44:
    case 45:
    case 57:
    case 90:
    case 91:
      goto LABEL_34;
    case 47:
      v16 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v58);
      *((_DWORD *)v38 + 21) = sub_40C8D0(v16);
      goto LABEL_34;
    case 48:
      v17 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v57);
      *((_DWORD *)v38 + 22) = sub_40C8D0(v17);
      goto LABEL_34;
    case 49:
      v18 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v56);
      *((_DWORD *)v38 + 23) = sub_40C8D0(v18);
      goto LABEL_34;
    case 58:
      v24 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v51);
      *((_DWORD *)v38 + 28) = sub_40C8D0(v24);
      goto LABEL_34;
    case 80:
      v26 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v49);
      *((_DWORD *)v38 + 33) = sub_40C8D0(v26);
      v27 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v48);
      *((_DWORD *)v38 + 34) = sub_40C8D0(v27);
      *((_DWORD *)v38 + 36) = *((_DWORD *)v38 + 34);
      goto LABEL_34;
    case 86:
      v28 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v47);
      *((_DWORD *)v38 + 37) = sub_40C8D0(v28);
      goto LABEL_34;
    case 96:
      v36 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v39);
      *((_DWORD *)v38 + 45) = sub_40C8D0(v36);
      goto LABEL_34;
    case 98:
      v30 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v45);
      *((_DWORD *)v38 + 39) = sub_40C8D0(v30);
      goto LABEL_34;
    case 101:
      v11 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v63);
      v69 = sub_40C8D0(v11);
      v12 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v62);
      v71 = sub_40C8D0(v12);
      v13 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v61);
      v70 = sub_40C8D0(v13);
      v14 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v60);
      v68 = sub_40C8D0(v14);
      *((_DWORD *)v38 + 19) = v68 | (v70 << 8) | (v71 << 16) | (v69 << 24);
      goto LABEL_34;
    case 102:
      v31 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v44);
      *((_DWORD *)v38 + 40) = sub_40C8D0(v31);
      v32 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v43);
      *((_DWORD *)v38 + 41) = sub_40C8D0(v32);
      goto LABEL_34;
    case 105:
      v33 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v42);
      *((_DWORD *)v38 + 42) = sub_40C8D0(v33);
      goto LABEL_34;
    case 106:
      v34 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v41);
      *((_DWORD *)v38 + 43) = sub_40C8D0(v34);
      goto LABEL_34;
    case 109:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v35 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v40);
        *((_DWORD *)v38 + 44) |= 1 << sub_40C8D0(v35);
      }
LABEL_34:
      result = 1;
      break;
    default:
      v37[0] = a2 - 1;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        v37,
        &a3);
      result = CBase::Set(v38, a2, v37[0]);
      break;
  }
  return result;
}
// 41DD00: using guessed type _DWORD __stdcall sub_41DD00(char);

//----- (0041DCC0) --------------------------------------------------------
int __thiscall CInitItem::OnLoad(int this)
{
  if ( *(_DWORD *)(this + 68) == 1 && *(int *)(this + 80) >= 40 )
    *(_DWORD *)(this + 168) = 30;
  return CItem::InsertInitItem((CItem *)this);
}
// 425A50: using guessed type _DWORD __cdecl sub_425A50(CItem *_Val2);

//----- (0041DD00) --------------------------------------------------------
int __stdcall CInitItem::SetSpec(int a1)
{
  lisp::var *v1; // eax
  int result; // eax
  lisp::var *v3; // eax
  int v4; // eax
  lisp::var *v5; // eax
  int v6; // eax
  lisp::var *v7; // eax
  int v8; // eax
  lisp::var *v9; // eax
  int v10; // eax
  lisp::var *v11; // eax
  int v12; // eax
  lisp::var *v13; // eax
  int v14; // eax
  lisp::var *v15; // eax
  int v16; // eax
  lisp::var *v17; // eax
  int v18; // eax
  lisp::var *v19; // eax
  int v20; // eax
  lisp::var *v21; // eax
  int v22; // eax
  lisp::var *v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  int v29; // eax
  lisp::var *v30; // eax
  int v31; // eax
  lisp::var *v32; // eax
  int v33; // eax
  lisp::var *v34; // eax
  int v35; // eax
  lisp::var *v36; // eax
  int v37; // eax
  lisp::var *v38; // eax
  int v39; // eax
  lisp::var *v40; // eax
  int v41; // eax
  lisp::var *v42; // eax
  int v43; // eax
  lisp::var *v44; // eax
  char v45; // al
  lisp::var *v46; // eax
  lisp::var *v47; // eax
  lisp::var *v48; // eax
  char v49; // al
  lisp::var *v50; // eax
  lisp::var *v51; // eax
  char v52; // al
  int v53; // eax
  lisp::var *v54; // eax
  char v55; // al
  lisp::var *v56; // eax
  lisp::var *v57; // eax
  lisp::var *v58; // eax
  lisp::var *v59; // eax
  lisp::var *v60; // eax
  lisp::var *v61; // eax
  lisp::var *v62; // eax
  lisp::var *v63; // eax
  int v64; // eax
  int v65; // eax
  CItem *v66; // [esp+0h] [ebp-1F0h]
  CItem *v67; // [esp+4h] [ebp-1ECh]
  CItem *v68; // [esp+8h] [ebp-1E8h]
  CItem *v69; // [esp+Ch] [ebp-1E4h]
  CItem *v70; // [esp+10h] [ebp-1E0h]
  CItem *v71; // [esp+14h] [ebp-1DCh]
  CItem *v72; // [esp+18h] [ebp-1D8h]
  CItem *v73; // [esp+1Ch] [ebp-1D4h]
  CItem *v74; // [esp+20h] [ebp-1D0h]
  CItem *v75; // [esp+24h] [ebp-1CCh]
  CItem *v76; // [esp+28h] [ebp-1C8h]
  CItem *v77; // [esp+2Ch] [ebp-1C4h]
  CItem *v78; // [esp+30h] [ebp-1C0h]
  CItem *v79; // [esp+34h] [ebp-1BCh]
  CItem *v80; // [esp+38h] [ebp-1B8h]
  CItem *v81; // [esp+3Ch] [ebp-1B4h]
  CItem *v82; // [esp+40h] [ebp-1B0h]
  CItem *v83; // [esp+44h] [ebp-1ACh]
  CItem *v84; // [esp+48h] [ebp-1A8h]
  CItem *v85; // [esp+4Ch] [ebp-1A4h]
  CItem *v86; // [esp+50h] [ebp-1A0h]
  CItem *v87; // [esp+54h] [ebp-19Ch]
  CItem *v88; // [esp+58h] [ebp-198h]
  CItem *v89; // [esp+5Ch] [ebp-194h]
  CItem *v90; // [esp+60h] [ebp-190h]
  CItem *v91; // [esp+64h] [ebp-18Ch]
  CItem *v92; // [esp+68h] [ebp-188h]
  CItem *v93; // [esp+6Ch] [ebp-184h]
  CItem *v94; // [esp+70h] [ebp-180h]
  char v95[8]; // [esp+7Ch] [ebp-174h] BYREF
  char v96[4]; // [esp+84h] [ebp-16Ch] BYREF
  void *v98; // [esp+8Ch] [ebp-164h]
  char v100[4]; // [esp+94h] [ebp-15Ch] BYREF
  char v101[4]; // [esp+98h] [ebp-158h] BYREF
  char v102[4]; // [esp+9Ch] [ebp-154h] BYREF
  char v104[4]; // [esp+A4h] [ebp-14Ch] BYREF
  char v105[4]; // [esp+A8h] [ebp-148h] BYREF
  char v106[4]; // [esp+ACh] [ebp-144h] BYREF
  char v107[4]; // [esp+B0h] [ebp-140h] BYREF
  char v108[4]; // [esp+B4h] [ebp-13Ch] BYREF
  char v110[4]; // [esp+BCh] [ebp-134h] BYREF
  Concurrency::scheduler_worker_creation_error *v112; // [esp+C4h] [ebp-12Ch]
  char v113[4]; // [esp+C8h] [ebp-128h] BYREF
  char v114[4]; // [esp+CCh] [ebp-124h] BYREF
  Concurrency::scheduler_worker_creation_error *v115; // [esp+D0h] [ebp-120h]
  char v116[4]; // [esp+D4h] [ebp-11Ch] BYREF
  char v117[4]; // [esp+D8h] [ebp-118h] BYREF
  char v118[4]; // [esp+DCh] [ebp-114h] BYREF
  char v120[4]; // [esp+E4h] [ebp-10Ch] BYREF
  char v122[4]; // [esp+ECh] [ebp-104h] BYREF
  char v124[4]; // [esp+F4h] [ebp-FCh] BYREF
  char v126[4]; // [esp+FCh] [ebp-F4h] BYREF
  char v128[4]; // [esp+104h] [ebp-ECh] BYREF
  char v130[4]; // [esp+10Ch] [ebp-E4h] BYREF
  char v132[4]; // [esp+114h] [ebp-DCh] BYREF
  char v134[4]; // [esp+11Ch] [ebp-D4h] BYREF
  char v137[4]; // [esp+128h] [ebp-C8h] BYREF
  char v139[4]; // [esp+130h] [ebp-C0h] BYREF
  char v140[4]; // [esp+134h] [ebp-BCh] BYREF
  char v142[4]; // [esp+13Ch] [ebp-B4h] BYREF
  char v143[4]; // [esp+140h] [ebp-B0h] BYREF
  char v144[4]; // [esp+144h] [ebp-ACh] BYREF
  char v146[4]; // [esp+14Ch] [ebp-A4h] BYREF
  char v148[4]; // [esp+154h] [ebp-9Ch] BYREF
  char v150[4]; // [esp+15Ch] [ebp-94h] BYREF
  char v152[4]; // [esp+164h] [ebp-8Ch] BYREF
  char v154[4]; // [esp+16Ch] [ebp-84h] BYREF
  char v156[4]; // [esp+174h] [ebp-7Ch] BYREF
  char v158[4]; // [esp+17Ch] [ebp-74h] BYREF
  char v160[4]; // [esp+184h] [ebp-6Ch] BYREF
  char v161[4]; // [esp+188h] [ebp-68h] BYREF
  char v163[4]; // [esp+190h] [ebp-60h] BYREF
  int v164; // [esp+194h] [ebp-5Ch]
  int v165; // [esp+198h] [ebp-58h]
  int v166; // [esp+19Ch] [ebp-54h]
  int v167; // [esp+1A0h] [ebp-50h]
  int v168; // [esp+1A4h] [ebp-4Ch]
  int v169; // [esp+1A8h] [ebp-48h]
  int v170; // [esp+1ACh] [ebp-44h]
  int v171; // [esp+1B0h] [ebp-40h]
  char *v172; // [esp+1B4h] [ebp-3Ch]
  int v173; // [esp+1B8h] [ebp-38h]
  char *v174; // [esp+1BCh] [ebp-34h]
  int v175; // [esp+1C0h] [ebp-30h]
  char *v176; // [esp+1C4h] [ebp-2Ch]
  char *v177; // [esp+1C8h] [ebp-28h]
  struct CryptoPP::CallStack *v178; // [esp+1CCh] [ebp-24h]
  char *v179; // [esp+1D0h] [ebp-20h]
  struct CryptoPP::CallStack *v180; // [esp+1D4h] [ebp-1Ch]
  char v181[8]; // [esp+1D8h] [ebp-18h] BYREF
  CItem *_Val2; // [esp+1E0h] [ebp-10h] BYREF
  char v183[4]; // [esp+1E4h] [ebp-Ch]
  int v184; // [esp+1E8h] [ebp-8h] BYREF
  char *_Val1; // [esp+1ECh] [ebp-4h] BYREF

  while ( 2 )
  {
    if ( (unsigned __int8)sub_402380(&a1) )
      return 1;
    lisp::var::pop((lisp::var *)&a1, (lisp::var *)&v184);
    v1 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v163);
    *(_DWORD *)v183 = sub_402360(v1);
    _Val1 = (char *)CObjectDB::FindSymbol(v183[0]);
    if ( _Val1 )
    {
      _Val2 = 0;
      switch ( (unsigned int)_Val1 )
      {
        case 9u:
          if ( operator_new(0x14u) )
          {
            v3 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v161);
            v4 = sub_40C8D0(v3);
            v94 = (CItem *)sub_41EAA0(0, v4);
          }
          else
          {
            v94 = 0;
          }
          _Val2 = v94;
          goto LABEL_9;
        case 0xAu:
          if ( operator_new(0x14u) )
          {
            v7 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v158);
            v8 = sub_40C8D0(v7);
            v93 = (CItem *)sub_41EAA0(1, v8);
          }
          else
          {
            v93 = 0;
          }
          _Val2 = v93;
          goto LABEL_9;
        case 0xBu:
          if ( operator_new(0x14u) )
          {
            v9 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v156);
            v10 = sub_40C8D0(v9);
            v92 = (CItem *)sub_41EAA0(2, v10);
          }
          else
          {
            v92 = 0;
          }
          _Val2 = v92;
          goto LABEL_9;
        case 0xCu:
          if ( operator_new(0x14u) )
          {
            v11 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v154);
            v12 = sub_40C8D0(v11);
            v91 = (CItem *)sub_41EAA0(3, v12);
          }
          else
          {
            v91 = 0;
          }
          _Val2 = v91;
          goto LABEL_9;
        case 0xDu:
          if ( operator_new(0x14u) )
          {
            v13 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v152);
            v14 = sub_40C8D0(v13);
            v90 = (CItem *)sub_41EAA0(4, v14);
          }
          else
          {
            v90 = 0;
          }
          _Val2 = v90;
          goto LABEL_9;
        case 0xEu:
          if ( operator_new(0x14u) )
          {
            v15 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v150);
            v16 = sub_40C8D0(v15);
            v89 = (CItem *)sub_41EAA0(5, v16);
          }
          else
          {
            v89 = 0;
          }
          _Val2 = v89;
          goto LABEL_9;
        case 0xFu:
          if ( operator_new(0x14u) )
          {
            v17 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v148);
            v18 = sub_40C8D0(v17);
            v88 = (CItem *)sub_41EAA0(6, v18);
          }
          else
          {
            v88 = 0;
          }
          _Val2 = v88;
          goto LABEL_9;
        case 0x10u:
          if ( operator_new(0x14u) )
          {
            v19 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v146);
            v20 = sub_40C8D0(v19);
            v87 = (CItem *)sub_41EAA0(9, v20);
          }
          else
          {
            v87 = 0;
          }
          _Val2 = v87;
          goto LABEL_9;
        case 0x11u:
          if ( operator_new(0x14u) )
          {
            v21 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v144);
            v22 = sub_40C8D0(v21);
            v86 = (CItem *)sub_41EAA0(10, v22);
          }
          else
          {
            v86 = 0;
          }
          _Val2 = v86;
          goto LABEL_9;
        case 0x12u:
          v23 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v143);
          v179 = (char *)sub_40C8D0(v23);
          v24 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v142);
          v180 = (struct CryptoPP::CallStack *)sub_40C8D0(v24);
          if ( operator_new(0x14u) )
            v85 = (CItem *)CSpecPrty::CSpecPrty(27, v179, v180);
          else
            v85 = 0;
          _Val2 = v85;
          goto LABEL_9;
        case 0x13u:
          v25 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v140);
          v177 = (char *)sub_40C8D0(v25);
          v26 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v139);
          v178 = (struct CryptoPP::CallStack *)sub_40C8D0(v26);
          if ( operator_new(0x14u) )
            v84 = (CItem *)CSpecPrty::CSpecPrty(28, v177, v178);
          else
            v84 = 0;
          _Val2 = v84;
          goto LABEL_9;
        case 0x14u:
          v27 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v137);
          v176 = (char *)sub_40C8D0(v27);
          if ( operator_new(0x14u) )
            v83 = (CItem *)CSpecPrty::CSpecPrty(15, v176, (struct CryptoPP::CallStack *)v176);
          else
            v83 = 0;
          _Val2 = v83;
          goto LABEL_9;
        case 0x15u:
          if ( operator_new(0x14u) )
          {
            v28 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v134);
            v29 = sub_40C8D0(v28);
            v82 = (CItem *)sub_41EAA0(16, v29);
          }
          else
          {
            v82 = 0;
          }
          _Val2 = v82;
          goto LABEL_9;
        case 0x16u:
          if ( operator_new(0x14u) )
          {
            v40 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v122);
            v41 = sub_40C8D0(v40);
            v76 = (CItem *)sub_41EAA0(17, v41);
          }
          else
          {
            v76 = 0;
          }
          _Val2 = v76;
          goto LABEL_9;
        case 0x17u:
          if ( operator_new(0x14u) )
          {
            v42 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v120);
            v43 = sub_40C8D0(v42);
            v75 = (CItem *)sub_41EAA0(32, v43);
          }
          else
          {
            v75 = 0;
          }
          _Val2 = v75;
          goto LABEL_9;
        case 0x19u:
          if ( operator_new(0x14u) )
          {
            v30 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v132);
            v31 = sub_40C8D0(v30);
            v81 = (CItem *)sub_41EAA0(18, v31);
          }
          else
          {
            v81 = 0;
          }
          _Val2 = v81;
          goto LABEL_9;
        case 0x1Au:
          if ( operator_new(0x14u) )
          {
            v32 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v130);
            v33 = sub_40C8D0(v32);
            v80 = (CItem *)sub_41EAA0(19, v33);
          }
          else
          {
            v80 = 0;
          }
          _Val2 = v80;
          goto LABEL_9;
        case 0x1Bu:
          if ( operator_new(0x14u) )
          {
            v34 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v128);
            v35 = sub_40C8D0(v34);
            v79 = (CItem *)sub_41EAA0(20, v35);
          }
          else
          {
            v79 = 0;
          }
          _Val2 = v79;
          goto LABEL_9;
        case 0x1Cu:
          if ( operator_new(0x14u) )
          {
            v36 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v126);
            v37 = sub_40C8D0(v36);
            v78 = (CItem *)sub_41EAA0(21, v37);
          }
          else
          {
            v78 = 0;
          }
          _Val2 = v78;
          goto LABEL_9;
        case 0x1Du:
          if ( operator_new(0x14u) )
          {
            v38 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v124);
            v39 = sub_40C8D0(v38);
            v77 = (CItem *)sub_41EAA0(22, v39);
          }
          else
          {
            v77 = 0;
          }
          _Val2 = v77;
LABEL_9:
          if ( !(unsigned __int8)sub_402380(&v184) )
          {
            v5 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v160);
            v6 = sub_40C8D0(v5);
            *((_DWORD *)_Val2 + 3) = v6;
          }
          goto LABEL_125;
        case 0x2Bu:
          v46 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v117);
          v174 = (char *)sub_40C8D0(v46);
          v47 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v116);
          v175 = sub_40C8D0(v47);
          v115 = (Concurrency::scheduler_worker_creation_error *)operator_new(0xCu);
          if ( v115 )
            v73 = (CItem *)CSpecTeleport::CSpecTeleport(v115, v174, v175);
          else
            v73 = 0;
          _Val2 = v73;
          goto LABEL_125;
        case 0x2Eu:
          v48 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v114);
          v49 = sub_402360(v48);
          v172 = (char *)CInitItem::FindKey(v49);
          v50 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v113);
          v173 = sub_40C8D0(v50);
          v112 = (Concurrency::scheduler_worker_creation_error *)operator_new(0xCu);
          if ( v112 )
            v72 = (CItem *)CSpecRefresh::CSpecRefresh(v112, v172, v173);
          else
            v72 = 0;
          _Val2 = v72;
          goto LABEL_125;
        case 0x52u:
          if ( operator_new(0xCu) )
          {
            v51 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v110);
            v52 = sub_402360(v51);
            v53 = CInitItem::FindKey(v52);
            v71 = (CItem *)CSpecCharming::CSpecCharming(v53);
          }
          else
          {
            v71 = 0;
          }
          _Val2 = v71;
          goto LABEL_125;
        case 0x54u:
          if ( operator_new(0xCu) )
            v70 = (CItem *)CSpecRepair::CSpecRepair(0);
          else
            v70 = 0;
          _Val2 = v70;
          goto LABEL_125;
        case 0x55u:
          if ( operator_new(0xCu) )
          {
            v44 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v118);
            v45 = sub_40C8D0(v44);
            v74 = (CItem *)CSpecGState::CSpecGState(1 << v45);
          }
          else
          {
            v74 = 0;
          }
          _Val2 = v74;
          goto LABEL_125;
        case 0x58u:
          v54 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v108);
          v55 = sub_402360(v54);
          v167 = CInitItem::FindKey(v55);
          v56 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v107);
          v169 = sub_40C8D0(v56);
          v57 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v106);
          v170 = sub_40C8D0(v57);
          v58 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v105);
          v168 = sub_40C8D0(v58);
          v59 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v104);
          v171 = sub_40C8D0(v59);
          if ( operator_new(0x1Cu) )
            v69 = (CItem *)CSpecChangePrefix::CSpecChangePrefix(v167, v169, v170, v168, v171);
          else
            v69 = 0;
          _Val2 = v69;
          goto LABEL_125;
        case 0x59u:
          v60 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v102);
          v164 = sub_40C8D0(v60);
          v61 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v101);
          v165 = sub_40C8D0(v61);
          v62 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v100);
          v166 = sub_40C8D0(v62);
          if ( operator_new(0x14u) )
            v68 = (CItem *)CSpecBuff::CSpecBuff(v164, v165, v166);
          else
            v68 = 0;
          _Val2 = v68;
          goto LABEL_125;
        case 0x63u:
          v98 = operator_new(0xCu);
          if ( v98 )
            v67 = (CItem *)CSpecProtect::CSpecProtect(v98);
          else
            v67 = 0;
          _Val2 = v67;
          goto LABEL_125;
        case 0x64u:
          if ( operator_new(0xCu) )
          {
            v63 = lisp::var::pop((lisp::var *)&v184, (lisp::var *)v96);
            v64 = sub_40C8D0(v63);
            v66 = (CItem *)CSpecRevival::CSpecRevival(v64);
          }
          else
          {
            v66 = 0;
          }
          _Val2 = v66;
LABEL_125:
          std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
            (std::pair<char const * const,CItem *> *)v95,
            (const char *const *)&_Val1,
            &_Val2);
          sub_445DF0(
            (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v181,
            v65);
          if ( v181[4] )
            continue;
          LOG_ERR("CInitItem::Set() Duplicate Specialty. (Symbol:%d)", _Val1);
          result = 0;
          break;
        default:
          LOG_ERR("CInitItem::SetSpec() Invalid Specialty. (symbol:%d)", _Val1);
          return 0;
      }
    }
    else
    {
      LOG_ERR("CInitItem::SetSpec() Invalid symbol(%s)", *(const char **)v183);
      result = 0;
    }
    return result;
  }
}
// 41E999: variable 'v65' is possibly undefined
// 41EAA0: using guessed type _DWORD __stdcall sub_41EAA0(_DWORD, _DWORD);
// 41EB20: using guessed type _DWORD __stdcall sub_41EB20(_DWORD, char *, struct CryptoPP::CallStack *);
// 41EB90: using guessed type _DWORD __stdcall sub_41EB90(_DWORD);
// 41EC20: using guessed type _DWORD __stdcall sub_41EC20(_DWORD);
// 41EC50: using guessed type _DWORD __stdcall sub_41EC50(_DWORD);
// 41EC80: using guessed type _DWORD __stdcall sub_41EC80(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 41ECD0: using guessed type int __thiscall sub_41ECD0(_DWORD);
// 41ED00: using guessed type _DWORD __stdcall sub_41ED00(_DWORD, _DWORD, _DWORD);
// 41ED40: using guessed type _DWORD __stdcall sub_41ED40(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 44C550: using guessed type _DWORD __cdecl CObjectDB::FindSymbol(char);

//----- (0041EAA0) --------------------------------------------------------
_DWORD *__thiscall sub_41EAA0(_DWORD *this, int a2, int a3)
{
  sub_41EAE0(this, a3);
  *this = off_4B5AA8;
  this[3] = 1;
  this[4] = a2;
  return this;
}
// 4B5AA8: using guessed type int (__stdcall *off_4B5AA8[2])(int);

//----- (0041EAE0) --------------------------------------------------------
_DWORD *__thiscall sub_41EAE0(_DWORD *this, int a2)
{
  *this = off_4B5AB8;
  this[1] = a2;
  this[2] = 0;
  return this;
}
// 4B5AB8: using guessed type int (__stdcall *off_4B5AB8[2])(int);

//----- (0041EB20) --------------------------------------------------------
int __thiscall CSpecPrty::CSpecPrty(int this, int a2, char *a3, struct CryptoPP::CallStack *a4)
{
  CSpec::CSpec((CryptoPP::CallStack *)this, a3, a4);
  *(_DWORD *)this = off_4B5AA8;
  *(_DWORD *)(this + 12) = 1;
  *(_DWORD *)(this + 16) = a2;
  return this;
}
// 4B5AA8: using guessed type int (__stdcall *off_4B5AA8[2])(int);

//----- (0041EB60) --------------------------------------------------------
int __thiscall CSpec::CSpec(int this, int a2, int a3)
{
  *(_DWORD *)this = off_4B5AB8;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = a3;
  return this;
}
// 4B5AB8: using guessed type int (__stdcall *off_4B5AB8[2])(int);

//----- (0041EB90) --------------------------------------------------------
_DWORD *__thiscall CSpecGState::CSpecGState(_DWORD *this, int a2)
{
  sub_41EAE0(a2);
  *this = off_4B5AC8;
  return this;
}
// 41EAE0: using guessed type _DWORD __stdcall sub_41EAE0(_DWORD);
// 4B5AC8: using guessed type int (__stdcall *off_4B5AC8[2])(int);

//----- (0041EC20) --------------------------------------------------------
_DWORD *__thiscall CSpecCharming::CSpecCharming(_DWORD *this, int a2)
{
  sub_41EAE0(a2);
  *this = off_4B5AF8;
  return this;
}
// 41EAE0: using guessed type _DWORD __stdcall sub_41EAE0(_DWORD);
// 4B5AF8: using guessed type int (__stdcall *off_4B5AF8[2])(int);

//----- (0041EC50) --------------------------------------------------------
_DWORD *__thiscall CSpecRepair::CSpecRepair(_DWORD *this, int a2)
{
  sub_41EAE0(a2);
  *this = off_4B5B08;
  return this;
}
// 41EAE0: using guessed type _DWORD __stdcall sub_41EAE0(_DWORD);
// 4B5B08: using guessed type int (__stdcall *off_4B5B08[2])(int);

//----- (0041EC80) --------------------------------------------------------
_DWORD *__thiscall CSpecChangePrefix::CSpecChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  sub_41EAE0(a2);
  *this = off_4B5B18;
  this[3] = a3;
  this[5] = a4;
  this[4] = a5;
  this[6] = a6;
  return this;
}
// 41EAE0: using guessed type _DWORD __stdcall sub_41EAE0(_DWORD);
// 4B5B18: using guessed type int (__stdcall *off_4B5B18[2])(int);

//----- (0041ECD0) --------------------------------------------------------
_DWORD *__thiscall CSpecProtect::CSpecProtect(_DWORD *this)
{
  sub_41EAE0(0);
  *this = off_4B5B28;
  return this;
}
// 41EAE0: using guessed type _DWORD __stdcall sub_41EAE0(_DWORD);
// 4B5B28: using guessed type int (__stdcall *off_4B5B28[2])(int);

//----- (0041ED00) --------------------------------------------------------
_DWORD *__thiscall CSpecBuff::CSpecBuff(_DWORD *this, int a2, int a3, int a4)
{
  sub_41EAE0(a2);
  *this = off_4B5B38;
  this[3] = a3;
  this[4] = a4;
  return this;
}
// 41EAE0: using guessed type _DWORD __stdcall sub_41EAE0(_DWORD);
// 4B5B38: using guessed type int (__stdcall *off_4B5B38[3])(int);

//----- (0041ED40) --------------------------------------------------------
_DWORD *__thiscall CSpecRevival::CSpecRevival(_DWORD *this, int a2)
{
  sub_41EAE0(a2);
  *this = off_4B5B48;
  return this;
}
// 41EAE0: using guessed type _DWORD __stdcall sub_41EAE0(_DWORD);
// 4B5B48: using guessed type int (__stdcall *off_4B5B48[3])(int);

//----- (0041ED70) --------------------------------------------------------
BOOL __thiscall CInitItem::ApplySpec(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  int v4; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 120),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
               v2);
    if ( !result )
      break;
    v4 = sub_420250(v7);
    (***(void (__thiscall ****)(_DWORD, int))(v4 + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090(v6, 0);
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041EDE0) --------------------------------------------------------
BOOL __thiscall CInitItem::FreeSpec(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  int v4; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 120),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
               v2);
    if ( !result )
      break;
    v4 = sub_420250(v7);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v4 + 4) + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090(v6, 0);
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041EE50) --------------------------------------------------------
int __thiscall CInitItem::Use(int this, int a2)
{
  int result; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  char v7[4]; // [esp+Ch] [ebp-Ch] BYREF
  DWORD v8; // [esp+10h] [ebp-8h]
  char v9[4]; // [esp+14h] [ebp-4h] BYREF

  if ( *(_DWORD *)(this + 100) > *(_DWORD *)(a2 + 60) )
    return 0;
  if ( !*(_DWORD *)(this + 180) || CGuild::IsWarringPeriod() )
  {
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 120),
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
    v3 = sub_430C20(v7);
    if ( (unsigned __int8)unknown_libname_16(v3) )
    {
      result = 0;
    }
    else if ( *(_DWORD *)(this + 148) )
    {
      v8 = GetTickCount();
      if ( v8 < *(_DWORD *)(a2 + 1456) )
      {
        result = 0;
      }
      else
      {
        *(_DWORD *)(a2 + 1456) = *(_DWORD *)(this + 148) + v8;
        v4 = sub_420250(v9);
        result = (*(int (__thiscall **)(_DWORD, int))(**(_DWORD **)(v4 + 4) + 8))(*(_DWORD *)(v4 + 4), a2);
      }
    }
    else
    {
      v5 = sub_420250(v9);
      result = (*(int (__thiscall **)(_DWORD, int))(**(_DWORD **)(v5 + 4) + 8))(*(_DWORD *)(v5 + 4), a2);
    }
  }
  else
  {
    CPlayer::Write(a2, 68, "bw", 135, *(_DWORD *)(this + 64));
    result = 0;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0041EF60) --------------------------------------------------------
int __thiscall CInitItem::Enchant(int this, int a2, int a3)
{
  int v3; // eax
  int v5; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 120),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  v3 = sub_430C20(v6);
  if ( (unsigned __int8)unknown_libname_16(v3) )
    return 0;
  v5 = sub_420250(v7);
  return (*(int (__thiscall **)(_DWORD, int, int))(**(_DWORD **)(v5 + 4) + 12))(*(_DWORD *)(v5 + 4), a2, a3);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0041EFD0) --------------------------------------------------------
int __cdecl CInitItem::GetSpecValue(int a1, int a2, char a3)
{
  int v3; // eax
  _DWORD *v4; // esi
  _DWORD *v5; // esi
  char v7[4]; // [esp+8h] [ebp-10h] BYREF
  int v8; // [esp+Ch] [ebp-Ch]
  char *v9; // [esp+10h] [ebp-8h]
  char v10[4]; // [esp+14h] [ebp-4h] BYREF

  v9 = &a3;
  v8 = 0;
  sub_44AE20(v10, &a2);
  v3 = sub_430C20(v7);
  if ( !(unsigned __int8)unknown_libname_16(v3) && (a2 == 18 || a2 == 19) )
  {
    v9 += 4;
    v4 = (_DWORD *)*((_DWORD *)v9 - 1);
    *v4 = *(_DWORD *)(*(_DWORD *)(sub_420250(v10) + 4) + 4);
    v9 += 4;
    v5 = (_DWORD *)*((_DWORD *)v9 - 1);
    *v5 = *(_DWORD *)(*(_DWORD *)(sub_420250(v10) + 4) + 8);
    v8 = 1;
  }
  return v8;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0041F0D0) --------------------------------------------------------
_DWORD *__thiscall CPrefix::CPrefix(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B5B58;
  sub_41FFC0(this + 11);
  this[8] = 0;
  this[9] = 0;
  this[10] = 0;
  return this;
}
// 41FFC0: using guessed type int __thiscall sub_41FFC0(_DWORD);
// 4B5B58: using guessed type int (__stdcall *off_4B5B58)(int);

//----- (0041F120) --------------------------------------------------------
void *__thiscall CPrefix::_scalar_deleting_destructor_(void *this, char a2)
{
  CPrefix::_CPrefix(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 41F150: using guessed type int __thiscall sub_41F150(_DWORD);

//----- (0041F150) --------------------------------------------------------
_DWORD *__usercall CPrefix::_CPrefix@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  char v8[4]; // [esp+8h] [ebp-Ch] BYREF
  int v9; // [esp+Ch] [ebp-8h] BYREF
  int v10; // [esp+10h] [ebp-4h] BYREF

  *(_DWORD *)a1 = &off_4B5B58;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(a1 + 44),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v10);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(a1 + 44), v8);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v10,
            v4) )
      break;
    v5 = sub_420250(&v10);
    operator_delete(*(void **)(v5 + 4));
    sub_446090(&v10, &v9, 0);
  }
  sub_41D5C0((void *)(a1 + 44));
  return CBase::_CBase((_DWORD *)a1, a2, a3, a4);
}
// 4B5B58: using guessed type int (__stdcall *off_4B5B58)(int);

//----- (0041F1E0) --------------------------------------------------------
_DWORD *CPrefix::Copy()
{
  _DWORD *v1; // [esp+0h] [ebp-Ch]
  _DWORD *v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0x38u);
  if ( v2 )
    v1 = CPrefix::CPrefix(v2);
  else
    v1 = 0;
  return v1;
}

//----- (0041F220) --------------------------------------------------------
int __thiscall CPrefix::Set(_DWORD *this, char *_Val1, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  int v7; // eax
  lisp::var *v8; // eax
  int v9; // eax
  lisp::var *v10; // eax
  int v11; // eax
  lisp::var *v12; // eax
  int v13; // eax
  lisp::var *v14; // eax
  int v15; // eax
  lisp::var *v16; // eax
  int v17; // eax
  lisp::var *v18; // eax
  int v19; // eax
  lisp::var *v20; // eax
  int v21; // eax
  lisp::var *v22; // eax
  int v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  int v30; // eax
  lisp::var *v31; // eax
  int v32; // eax
  lisp::var *v33; // eax
  int v34; // eax
  lisp::var *v35; // eax
  int v36; // eax
  lisp::var *v37; // eax
  int v38; // eax
  lisp::var *v39; // eax
  int v40; // eax
  int result; // eax
  int v42; // eax
  char *v43; // [esp-4h] [ebp-124h] BYREF
  CItem *v44; // [esp+0h] [ebp-120h]
  CItem *v45; // [esp+4h] [ebp-11Ch]
  CItem *v46; // [esp+8h] [ebp-118h]
  CItem *v47; // [esp+Ch] [ebp-114h]
  CItem *v48; // [esp+10h] [ebp-110h]
  CItem *v49; // [esp+14h] [ebp-10Ch]
  CItem *v50; // [esp+18h] [ebp-108h]
  CItem *v51; // [esp+1Ch] [ebp-104h]
  CItem *v52; // [esp+20h] [ebp-100h]
  CItem *v53; // [esp+24h] [ebp-FCh]
  CItem *v54; // [esp+28h] [ebp-F8h]
  CItem *v55; // [esp+2Ch] [ebp-F4h]
  CItem *v56; // [esp+30h] [ebp-F0h]
  CItem *v57; // [esp+34h] [ebp-ECh]
  CItem *v58; // [esp+38h] [ebp-E8h]
  CItem *v59; // [esp+3Ch] [ebp-E4h]
  CItem *v60; // [esp+40h] [ebp-E0h]
  CItem *v61; // [esp+44h] [ebp-DCh]
  char *v62; // [esp+48h] [ebp-D8h]
  _DWORD *v63; // [esp+4Ch] [ebp-D4h]
  char v64[12]; // [esp+50h] [ebp-D0h] BYREF
  char v65[4]; // [esp+5Ch] [ebp-C4h] BYREF
  char v67[4]; // [esp+64h] [ebp-BCh] BYREF
  char v69[4]; // [esp+6Ch] [ebp-B4h] BYREF
  char v71[4]; // [esp+74h] [ebp-ACh] BYREF
  char v73[4]; // [esp+7Ch] [ebp-A4h] BYREF
  char v75[4]; // [esp+84h] [ebp-9Ch] BYREF
  void *v77; // [esp+8Ch] [ebp-94h]
  char v78[4]; // [esp+90h] [ebp-90h] BYREF
  void *v79; // [esp+94h] [ebp-8Ch]
  char v80[4]; // [esp+98h] [ebp-88h] BYREF
  char v81[4]; // [esp+9Ch] [ebp-84h] BYREF
  void *v82; // [esp+A0h] [ebp-80h]
  char v83[4]; // [esp+A4h] [ebp-7Ch] BYREF
  char v84[4]; // [esp+A8h] [ebp-78h] BYREF
  char v85[4]; // [esp+ACh] [ebp-74h] BYREF
  char v87[4]; // [esp+B4h] [ebp-6Ch] BYREF
  char v89[4]; // [esp+BCh] [ebp-64h] BYREF
  char v91[4]; // [esp+C4h] [ebp-5Ch] BYREF
  char v93[4]; // [esp+CCh] [ebp-54h] BYREF
  char v95[4]; // [esp+D4h] [ebp-4Ch] BYREF
  char v97[4]; // [esp+DCh] [ebp-44h] BYREF
  char v99[4]; // [esp+E4h] [ebp-3Ch] BYREF
  char v101[4]; // [esp+ECh] [ebp-34h] BYREF
  char v103[4]; // [esp+F4h] [ebp-2Ch] BYREF
  char v104[4]; // [esp+F8h] [ebp-28h] BYREF
  char v105[4]; // [esp+FCh] [ebp-24h] BYREF
  char *v106; // [esp+100h] [ebp-20h]
  char *v107; // [esp+104h] [ebp-1Ch]
  struct CryptoPP::CallStack *v108; // [esp+108h] [ebp-18h]
  char *v109; // [esp+10Ch] [ebp-14h]
  struct CryptoPP::CallStack *v110; // [esp+110h] [ebp-10h]
  char v111[8]; // [esp+114h] [ebp-Ch] BYREF
  CItem *_Val2; // [esp+11Ch] [ebp-4h] BYREF

  v63 = this;
  _Val2 = 0;
  v62 = _Val1 - 2;
  switch ( (unsigned int)_Val1 )
  {
    case 2u:
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v105);
      v63[8] = sub_40C8D0(v3);
      goto LABEL_78;
    case 7u:
      v4 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v104);
      v63[9] = sub_40C8D0(v4);
      goto LABEL_78;
    case 9u:
      if ( operator_new(0x14u) )
      {
        v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v101);
        v7 = sub_40C8D0(v6);
        v61 = (CItem *)sub_41EAA0(0, v7);
      }
      else
      {
        v61 = 0;
      }
      _Val2 = v61;
      goto LABEL_78;
    case 0xAu:
      if ( operator_new(0x14u) )
      {
        v8 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v99);
        v9 = sub_40C8D0(v8);
        v60 = (CItem *)sub_41EAA0(1, v9);
      }
      else
      {
        v60 = 0;
      }
      _Val2 = v60;
      goto LABEL_78;
    case 0xBu:
      if ( operator_new(0x14u) )
      {
        v10 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v97);
        v11 = sub_40C8D0(v10);
        v59 = (CItem *)sub_41EAA0(2, v11);
      }
      else
      {
        v59 = 0;
      }
      _Val2 = v59;
      goto LABEL_78;
    case 0xCu:
      if ( operator_new(0x14u) )
      {
        v12 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v95);
        v13 = sub_40C8D0(v12);
        v58 = (CItem *)sub_41EAA0(3, v13);
      }
      else
      {
        v58 = 0;
      }
      _Val2 = v58;
      goto LABEL_78;
    case 0xDu:
      if ( operator_new(0x14u) )
      {
        v14 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v93);
        v15 = sub_40C8D0(v14);
        v57 = (CItem *)sub_41EAA0(4, v15);
      }
      else
      {
        v57 = 0;
      }
      _Val2 = v57;
      goto LABEL_78;
    case 0xEu:
      if ( operator_new(0x14u) )
      {
        v16 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v91);
        v17 = sub_40C8D0(v16);
        v56 = (CItem *)sub_41EAA0(5, v17);
      }
      else
      {
        v56 = 0;
      }
      _Val2 = v56;
      goto LABEL_78;
    case 0xFu:
      if ( operator_new(0x14u) )
      {
        v18 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v89);
        v19 = sub_40C8D0(v18);
        v55 = (CItem *)sub_41EAA0(6, v19);
      }
      else
      {
        v55 = 0;
      }
      _Val2 = v55;
      goto LABEL_78;
    case 0x10u:
      if ( operator_new(0x14u) )
      {
        v20 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v87);
        v21 = sub_40C8D0(v20);
        v54 = (CItem *)sub_41EAA0(9, v21);
      }
      else
      {
        v54 = 0;
      }
      _Val2 = v54;
      goto LABEL_78;
    case 0x11u:
      if ( operator_new(0x14u) )
      {
        v22 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v85);
        v23 = sub_40C8D0(v22);
        v53 = (CItem *)sub_41EAA0(10, v23);
      }
      else
      {
        v53 = 0;
      }
      _Val2 = v53;
      goto LABEL_78;
    case 0x12u:
      v24 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v84);
      v109 = (char *)sub_40C8D0(v24);
      v25 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v83);
      v110 = (struct CryptoPP::CallStack *)sub_40C8D0(v25);
      v82 = operator_new(0x14u);
      if ( v82 )
        v52 = (CItem *)CSpecPrty::CSpecPrty((int)v82, 27, v109, v110);
      else
        v52 = 0;
      _Val2 = v52;
      goto LABEL_78;
    case 0x13u:
      v26 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v81);
      v107 = (char *)sub_40C8D0(v26);
      v27 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v80);
      v108 = (struct CryptoPP::CallStack *)sub_40C8D0(v27);
      v79 = operator_new(0x14u);
      if ( v79 )
        v51 = (CItem *)CSpecPrty::CSpecPrty((int)v79, 28, v107, v108);
      else
        v51 = 0;
      _Val2 = v51;
      goto LABEL_78;
    case 0x14u:
      v28 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v78);
      v106 = (char *)sub_40C8D0(v28);
      v77 = operator_new(0x14u);
      if ( v77 )
        v50 = (CItem *)CSpecPrty::CSpecPrty((int)v77, 15, v106, (struct CryptoPP::CallStack *)v106);
      else
        v50 = 0;
      _Val2 = v50;
      goto LABEL_78;
    case 0x15u:
      if ( operator_new(0x14u) )
      {
        v29 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v75);
        v30 = sub_40C8D0(v29);
        v49 = (CItem *)sub_41EAA0(16, v30);
      }
      else
      {
        v49 = 0;
      }
      _Val2 = v49;
      goto LABEL_78;
    case 0x19u:
      if ( operator_new(0x14u) )
      {
        v31 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v73);
        v32 = sub_40C8D0(v31);
        v48 = (CItem *)sub_41EAA0(18, v32);
      }
      else
      {
        v48 = 0;
      }
      _Val2 = v48;
      goto LABEL_78;
    case 0x1Au:
      if ( operator_new(0x14u) )
      {
        v33 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v71);
        v34 = sub_40C8D0(v33);
        v47 = (CItem *)sub_41EAA0(19, v34);
      }
      else
      {
        v47 = 0;
      }
      _Val2 = v47;
      goto LABEL_78;
    case 0x1Bu:
      if ( operator_new(0x14u) )
      {
        v35 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v69);
        v36 = sub_40C8D0(v35);
        v46 = (CItem *)sub_41EAA0(20, v36);
      }
      else
      {
        v46 = 0;
      }
      _Val2 = v46;
      goto LABEL_78;
    case 0x1Cu:
      if ( operator_new(0x14u) )
      {
        v37 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v67);
        v38 = sub_40C8D0(v37);
        v45 = (CItem *)sub_41EAA0(21, v38);
      }
      else
      {
        v45 = 0;
      }
      _Val2 = v45;
      goto LABEL_78;
    case 0x1Du:
      if ( operator_new(0x14u) )
      {
        v39 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v65);
        v40 = sub_40C8D0(v39);
        v44 = (CItem *)sub_41EAA0(22, v40);
      }
      else
      {
        v44 = 0;
      }
      _Val2 = v44;
      goto LABEL_78;
    case 0x3Au:
      v5 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v103);
      v63[10] = sub_40C8D0(v5);
LABEL_78:
      if ( _Val2 )
      {
        std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
          (std::pair<char const * const,CItem *> *)v64,
          (const char *const *)&_Val1,
          &_Val2);
        sub_445DF0(
          (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v111,
          v42);
        if ( v111[4] )
        {
          result = 1;
        }
        else
        {
          LOG_ERR("CPrefix::Set() Duplicate Specialty. (Symbol:%d)", _Val1);
          result = 0;
        }
      }
      else
      {
        result = 1;
      }
      break;
    default:
      v43 = _Val1 - 2;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v43,
        &a3);
      result = CBase::Set(v63, (int)_Val1, (char)v43);
      break;
  }
  return result;
}
// 41F976: variable 'v42' is possibly undefined
// 41EAA0: using guessed type _DWORD __stdcall sub_41EAA0(_DWORD, _DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (0041FA40) --------------------------------------------------------
int __thiscall CPrefix::OnLoad(CItem *this)
{
  return CItem::InsertPrefix(this);
}
// 425AB0: using guessed type _DWORD __cdecl sub_425AB0(CItem *_Val2);

//----- (0041FA60) --------------------------------------------------------
BOOL __thiscall CPrefix::ApplySpec(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  int v4; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 44),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
               v2);
    if ( !result )
      break;
    v4 = sub_420250(v7);
    (***(void (__thiscall ****)(_DWORD, int))(v4 + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090(v6, 0);
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041FAD0) --------------------------------------------------------
BOOL __thiscall CPrefix::FreeSpec(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  int v4; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 44),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
               v2);
    if ( !result )
      break;
    v4 = sub_420250(v7);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v4 + 4) + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090(v6, 0);
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0041FB40) --------------------------------------------------------
int __thiscall CSpecPrty::ApplySpec(_DWORD *this, int a2)
{
  int result; // eax

  if ( this[3] )
    result = (*(int (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               this[4],
               1,
               this[1],
               this[2]);
  else
    result = (*(int (__cdecl **)(int, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
               a2,
               this[4],
               1,
               this[1],
               this[2]);
  return result;
}

//----- (0041FBB0) --------------------------------------------------------
int __thiscall CSpecPrty::FreeSpec(_DWORD *this, int a2)
{
  int result; // eax

  if ( this[3] )
    result = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               this[4],
               0,
               this[1],
               this[2]);
  else
    result = (*(int (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
               a2,
               this[4],
               0,
               this[1],
               this[2]);
  return result;
}

//----- (0041FC20) --------------------------------------------------------
LONG __thiscall CSpecGState::ApplySpec(int *this, volatile LONG *a2)
{
  return CChar::AddGState(a2, this[1]);
}

//----- (0041FC40) --------------------------------------------------------
LONG __thiscall CSpecGState::FreeSpec(int *this, volatile LONG *a2)
{
  return CChar::SubGState(a2, this[1]);
}

//----- (0041FC60) --------------------------------------------------------
int __thiscall CSpecTeleport::Use(_DWORD *this, _DWORD *a2)
{
  volatile int *v4; // [esp+4h] [ebp-18h]
  int v5[2]; // [esp+Ch] [ebp-10h] BYREF
  _DWORD *v6; // [esp+14h] [ebp-8h]
  int v7; // [esp+18h] [ebp-4h]

  if ( !CChar::IsNormal((int)a2) || CChar::IsGState(a2, 256) )
    return 0;
  if ( !this[1] )
  {
    if ( a2[254] )
    {
      v4 = (volatile int *)CParty::FindParty(a2[254]);
      if ( v4 )
      {
        if ( CParty::ExistOnPK(v4) )
        {
          CPlayer::Write(a2, 68, "b", 114);
          return 0;
        }
        if ( CParty::Teleport(a2, this[2]) )
        {
          CIOObject::Release(v4);
          return 1;
        }
        CIOObject::Release(v4);
      }
    }
  }
  v7 = dword_4D7900[4 * this[2]];
  v6 = (_DWORD *)((char *)&unk_4D7904 + 16 * this[2]);
  v5[0] = RandomBetween(*v6 - 64, *v6 + 64);
  v5[1] = RandomBetween(v6[1] - 64, v6[1] + 64);
  CPlayer::Teleport(v7, v5, 0, 0);
  return 1;
}
// 41FDA0: using guessed type int __thiscall sub_41FDA0(_DWORD);
// 44D4E0: using guessed type _DWORD __cdecl CParty::FindParty(char);
// 44E830: using guessed type _DWORD __stdcall sub_44E830(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45CC90: using guessed type _DWORD __stdcall CPlayer::Teleport(_DWORD, _DWORD, _DWORD, _DWORD);
// 4D7900: using guessed type int dword_4D7900[];

//----- (0041FDA0) --------------------------------------------------------
int __thiscall CParty::ExistOnPK(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  _DWORD *v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  sub_430C20(v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v1) )
      break;
    v6 = *(_DWORD **)sub_420010(v7, this);
    if ( CChar::IsGState(v6, 256) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
      return 1;
    }
    sub_420030(v5, 0);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  return 0;
}
// 41FDF5: variable 'this' is possibly undefined
// 420010: using guessed type int __thiscall sub_420010(_DWORD, _DWORD);
// 420030: using guessed type _DWORD __stdcall sub_420030(_DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 445B40: using guessed type _DWORD __stdcall sub_445B40(_DWORD);

//----- (0041FE40) --------------------------------------------------------
int __thiscall CSpecRefresh::Use(_DWORD *this, int a2)
{
  if ( !CChar::IsNormal(a2) )
    return 0;
  (*(void (__cdecl **)(int, _DWORD, int, _DWORD))(*(_DWORD *)a2 + 88))(a2, this[1], 1, this[2]);
  return 1;
}

//----- (0041FE90) --------------------------------------------------------
int __thiscall CSpecCharming::Enchant(_DWORD *this, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a3 + 176))(a3, a2, this[1]);
}

//----- (0041FEC0) --------------------------------------------------------
int __stdcall CSpecRepair::Enchant(int a1, int a2)
{
  return (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 184))(a2, a1);
}

//----- (0041FEE0) --------------------------------------------------------
int __thiscall CSpecChangePrefix::Enchant(_DWORD *this, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, _DWORD, _DWORD *, _DWORD *))(*(_DWORD *)a3 + 188))(
           a3,
           a2,
           this[1],
           this + 3,
           this + 5);
}

//----- (0041FF20) --------------------------------------------------------
int __stdcall CSpecProtect::Enchant_(int a1, int a2)
{
  return (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 192))(a2, a1);
}

//----- (0041FF40) --------------------------------------------------------
int __thiscall CSpecBuff::Use(int *this, int a2)
{
  int v4; // [esp+4h] [ebp-4h]

  if ( !CChar::IsNormal(a2) )
    return 0;
  v4 = CBuff::CreateBuff(this[1], this[3], this[4], (int)this);
  return (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 180))(a2, v4);
}

//----- (0041FFA0) --------------------------------------------------------
int __thiscall CSpecRevival::Use(_DWORD *this, _DWORD *a2)
{
  return CPlayer::RevivalItem(a2, this[1]);
}
// 464950: using guessed type _DWORD __thiscall sub_464950(_DWORD *, _DWORD);

//----- (0041FFC0) --------------------------------------------------------
void *__thiscall sub_41FFC0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(&v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);
// 47A720: using guessed type _DWORD __stdcall sub_47A720(_DWORD, _DWORD);

//----- (0041FFF0) --------------------------------------------------------
int __thiscall sub_41FFF0(void *this)
{
  return sub_4206B0(this, this);
}
// 4206B0: using guessed type int __thiscall sub_4206B0(_DWORD, _DWORD);

//----- (00420010) --------------------------------------------------------
int __thiscall sub_420010(void *this)
{
  return unknown_libname_15(this);
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (00420030) --------------------------------------------------------
_DWORD *__thiscall sub_420030(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_420760(this);
  *a2 = v4;
  return a2;
}

//----- (00420060) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_420060(int this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::pair<char const * const,CItem *> *a3)
{
  const char **v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  const char **v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  const char *v10; // [esp-4h] [ebp-3Ch]
  const char *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0(this);
  v22 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110(v21) )
  {
    v22 = v21;
    v10 = *(const char **)sub_473500(v21);
    v3 = (const char **)unknown_libname_25(a3);
    v23 = iless::operator()((iless *)this, *v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270(this, (int)v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880(v20);
  }
  v11 = *(const char **)unknown_libname_25(a3);
  v7 = unknown_libname_15(v20);
  v8 = (const char **)sub_473500(v7);
  if ( iless::operator()((iless *)this, *v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270(this, (int)v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 418880: using guessed type int __thiscall sub_418880(_DWORD);
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430F90: using guessed type _DWORD __cdecl sub_430F90(_DWORD);
// 431110: using guessed type _DWORD __cdecl sub_431110(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446700: using guessed type _DWORD __stdcall sub_446700(_DWORD);
// 473500: using guessed type _DWORD __cdecl sub_473500(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (00420220) --------------------------------------------------------
bool __thiscall iless::operator()(iless *this, const char *a, const char *b)
{
  return mbstricmp(a, b) < 0;
}

//----- (00420250) --------------------------------------------------------
int __thiscall CGuild::IsTempMemberFUll(void *this)
{
  return sub_44F8B0(this, this);
}
// 44F8B0: using guessed type int __thiscall sub_44F8B0(_DWORD, _DWORD);

//----- (00420270) --------------------------------------------------------
int __thiscall sub_420270(int this, int a2, char a3, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *a4, std::pair<char const * const,CItem *> *a5)
{
  void *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // esi
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  _DWORD *v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  _DWORD *v29; // eax
  _DWORD *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  _DWORD *v34; // eax
  _DWORD *v35; // eax
  _DWORD *v36; // eax
  _DWORD *v37; // eax
  _DWORD *v38; // eax
  _DWORD *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  int v44; // [esp+48h] [ebp-8h]
  int v45; // [esp+4Ch] [ebp-4h]
  int v46; // [esp+60h] [ebp+10h]

  if ( (unsigned int)(sub_47EA90(this) - 1) <= *(_DWORD *)(this + 8) )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0(v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_4319C0(
          *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)(this + 4),
          a4,
          *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)(this + 4),
          a5,
          0);
  ++*(_DWORD *)(this + 8);
  if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)(this + 4) )
  {
    v6 = (_DWORD *)sub_478AB0(this);
    *v6 = v45;
    v7 = (_DWORD *)sub_418790(this);
    *v7 = v45;
    v8 = (_DWORD *)CServer::SendAlive((_DWORD *)this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (_DWORD *)unknown_libname_25(a4);
    *v9 = v45;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_418790(this) )
    {
      v10 = (_DWORD *)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (_DWORD *)sub_430F90(a4);
    *v11 = v45;
    if ( a4 == *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)CServer::SendAlive((_DWORD *)this) )
    {
      v12 = (_DWORD *)CServer::SendAlive((_DWORD *)this);
      *v12 = v45;
    }
  }
  v44 = v45;
  while ( 1 )
  {
    v13 = (_DWORD *)sub_446FF0(v44);
    if ( *(_BYTE *)unknown_libname_19(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0(v44);
    v15 = (_DWORD *)sub_446FF0(v44);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (_DWORD *)sub_446FF0(v44);
      v18 = (_DWORD *)sub_446FF0(*v17);
      v46 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)unknown_libname_19(v46) )
        goto LABEL_15;
      v23 = (_DWORD *)sub_446FF0(v44);
      v24 = (_DWORD *)sub_430F90(*v23);
      if ( v44 == *v24 )
      {
        v44 = *(_DWORD *)sub_446FF0(v44);
        sub_44CBF0(v44);
      }
      v25 = (_DWORD *)sub_446FF0(v44);
      *(_BYTE *)unknown_libname_19(*v25) = 1;
      v26 = (_DWORD *)sub_446FF0(v44);
      v27 = (_DWORD *)sub_446FF0(*v26);
      *(_BYTE *)unknown_libname_19(*v27) = 0;
      v28 = (_DWORD *)sub_446FF0(v44);
      v29 = (_DWORD *)sub_446FF0(*v28);
      sub_44CAC0(*v29);
    }
    else
    {
      v30 = (_DWORD *)sub_446FF0(v44);
      v31 = (_DWORD *)sub_446FF0(*v30);
      v46 = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)unknown_libname_19(v46) )
      {
        v32 = (_DWORD *)sub_446FF0(v44);
        v33 = (_DWORD *)unknown_libname_25(*v32);
        if ( v44 == *v33 )
        {
          v44 = *(_DWORD *)sub_446FF0(v44);
          sub_44CAC0(v44);
        }
        v34 = (_DWORD *)sub_446FF0(v44);
        *(_BYTE *)unknown_libname_19(*v34) = 1;
        v35 = (_DWORD *)sub_446FF0(v44);
        v36 = (_DWORD *)sub_446FF0(*v35);
        *(_BYTE *)unknown_libname_19(*v36) = 0;
        v37 = (_DWORD *)sub_446FF0(v44);
        v38 = (_DWORD *)sub_446FF0(*v37);
        sub_44CBF0(*v38);
      }
      else
      {
LABEL_15:
        v19 = (_DWORD *)sub_446FF0(v44);
        *(_BYTE *)unknown_libname_19(*v19) = 1;
        *(_BYTE *)unknown_libname_19(v46) = 1;
        v20 = (_DWORD *)sub_446FF0(v44);
        v21 = (_DWORD *)sub_446FF0(*v20);
        *(_BYTE *)unknown_libname_19(*v21) = 0;
        v22 = (_DWORD *)sub_446FF0(v44);
        v44 = *(_DWORD *)sub_446FF0(*v22);
      }
    }
  }
  v39 = (_DWORD *)sub_478AB0(this);
  *(_BYTE *)unknown_libname_19(*v39) = 1;
  sub_446700(v45);
  return a2;
}
// 4202A8: variable 'v5' is possibly undefined
// 40F6E0: using guessed type int __thiscall sub_40F6E0(_DWORD);
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 430F90: using guessed type _DWORD __cdecl sub_430F90(_DWORD);
// 4319C0: using guessed type _DWORD __stdcall sub_4319C0(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Rarg, std::pair<char const * const,CItem *> *_Val, char);
// 446700: using guessed type _DWORD __stdcall sub_446700(_DWORD);
// 446F90: using guessed type _DWORD __cdecl unknown_libname_19(_DWORD);
// 446FF0: using guessed type _DWORD __cdecl sub_446FF0(_DWORD);
// 44CAC0: using guessed type _DWORD __stdcall sub_44CAC0(_DWORD);
// 44CBF0: using guessed type _DWORD __stdcall sub_44CBF0(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);
// 47EA90: using guessed type int __thiscall sub_47EA90(_DWORD);

//----- (004206B0) --------------------------------------------------------
int __thiscall sub_4206B0(int this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_420780(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  result = sub_4338F0(*(_DWORD *)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 430F90: using guessed type _DWORD __cdecl sub_430F90(_DWORD);
// 4338F0: using guessed type _DWORD __stdcall sub_4338F0(_DWORD, _DWORD);
// 446FF0: using guessed type _DWORD __cdecl sub_446FF0(_DWORD);
// 44CD70: using guessed type _DWORD __stdcall sub_44CD70(void *);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00420760) --------------------------------------------------------
_DWORD *__thiscall sub_420760(_DWORD *this)
{
  *this += 4;
  return this;
}

//----- (00420780) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420780(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  _DWORD *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4) && (v5 = sub_430C20(v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_420820(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = (_DWORD *)sub_446090(v10, 0);
      sub_44AF50(v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AF50: using guessed type _DWORD __stdcall sub_44AF50(_DWORD, _DWORD);

//----- (00420820) --------------------------------------------------------
_DWORD *__thiscall sub_420820(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_420880(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (00420880) --------------------------------------------------------
int __stdcall sub_420880(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  void *v4; // [esp+4h] [ebp-4h]

  v4 = a1;
  for ( i = (char *)sub_431110(a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_420880(*v3);
    v4 = *(void **)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = v4;
  }
  return result;
}
// 430F90: using guessed type _DWORD __cdecl sub_430F90(_DWORD);
// 431110: using guessed type _DWORD __cdecl sub_431110(_DWORD);
// 4338F0: using guessed type _DWORD __stdcall sub_4338F0(_DWORD, _DWORD);
// 44CD70: using guessed type _DWORD __stdcall sub_44CD70(void *);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00420900) --------------------------------------------------------
void *__cdecl sub_420900(int a1)
{
  return operator_new(24 * a1);
}

//----- (00420920) --------------------------------------------------------
void *__thiscall sub_420920(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(&v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);
// 47A720: using guessed type _DWORD __stdcall sub_47A720(_DWORD, _DWORD);

//----- (00420950) --------------------------------------------------------
void *__thiscall std::_Tree_ptr<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_ptr<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(void *this, _BYTE *a2, char a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(&a3);
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  std___Init_locks__operator_(&a3);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00420990) --------------------------------------------------------
void __thiscall std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(std::pair<char const * const,CItem *> *this, const char *const *_Val1, CItem *const *_Val2)
{
  *(const char **)this = *_Val1;
  *((CItem **)this + 1) = *_Val2;
}

//----- (004209C0) --------------------------------------------------------
int __thiscall sub_4209C0(void *this)
{
  return sub_4209E0(this);
}

//----- (004209E0) --------------------------------------------------------
int __thiscall sub_4209E0(void *this)
{
  return sub_420A00((int)this);
}

//----- (00420A00) --------------------------------------------------------
int __thiscall sub_420A00(int this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_420AB0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(*(_DWORD *)(this + 4));
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(*(_DWORD *)(this + 4));
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(*(_DWORD *)(this + 4));
  sub_44CD70(v4);
  result = sub_4338F0(*(_DWORD *)(this + 4), 1);
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 430F90: using guessed type _DWORD __cdecl sub_430F90(_DWORD);
// 4338F0: using guessed type _DWORD __stdcall sub_4338F0(_DWORD, _DWORD);
// 446FF0: using guessed type _DWORD __cdecl sub_446FF0(_DWORD);
// 44CD70: using guessed type _DWORD __stdcall sub_44CD70(void *);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00420AB0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_420AB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  int v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  _DWORD *v7; // eax
  char v9[4]; // [esp+4h] [ebp-10h] BYREF
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4) && (v5 = sub_430C20(v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_420B50(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = (_DWORD *)sub_446090(v10, 0);
      sub_44AF50(v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 44AF50: using guessed type _DWORD __stdcall sub_44AF50(_DWORD, _DWORD);

//----- (00420B50) --------------------------------------------------------
_DWORD *__thiscall sub_420B50(_DWORD *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_420BB0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (00420BB0) --------------------------------------------------------
int __stdcall sub_420BB0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  void *v4; // [esp+4h] [ebp-4h]

  v4 = a1;
  for ( i = (char *)sub_431110(a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_420BB0(*v3);
    v4 = *(void **)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = v4;
  }
  return result;
}
// 430F90: using guessed type _DWORD __cdecl sub_430F90(_DWORD);
// 431110: using guessed type _DWORD __cdecl sub_431110(_DWORD);
// 4338F0: using guessed type _DWORD __stdcall sub_4338F0(_DWORD, _DWORD);
// 44CD70: using guessed type _DWORD __stdcall sub_44CD70(void *);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00420C30) --------------------------------------------------------
_DWORD *__thiscall CInitMap::CInitMap(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B5D58;
  this[8] = 0;
  this[9] = 0;
  this[10] = -1;
  this[11] = -1;
  memset(this + 12, 0, 0x81u);
  return this;
}
// 4B5D58: using guessed type int (__stdcall *off_4B5D58)(int);

//----- (00420C90) --------------------------------------------------------
void *__thiscall CInitMap::_scalar_deleting_destructor_(void *this, char a2)
{
  CInitMap::_CInitMap(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 420CC0: using guessed type int __thiscall sub_420CC0(_DWORD);

//----- (00420CC0) --------------------------------------------------------
int __thiscall CInitMap::_CInitMap(_DWORD *this)
{
  *this = &off_4B5D58;
  return CBase::_CBase(this);
}
// 4B5D58: using guessed type int (__stdcall *off_4B5D58)(int);

//----- (00420CE0) --------------------------------------------------------
int __thiscall CInitMap::Set(void *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  const char *v7; // eax
  int result; // eax
  int v9; // [esp-8h] [ebp-24h]
  _DWORD v10[2]; // [esp-4h] [ebp-20h] BYREF
  void *v11; // [esp+4h] [ebp-18h]
  char v12[4]; // [esp+Ch] [ebp-10h] BYREF
  char v13[4]; // [esp+10h] [ebp-Ch] BYREF
  char v14[4]; // [esp+14h] [ebp-8h] BYREF
  char v15[4]; // [esp+18h] [ebp-4h] BYREF

  v11 = this;
  v10[1] = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v15);
      *((_DWORD *)v11 + 8) = sub_40C8D0(v3);
      goto LABEL_6;
    case 30:
      v4 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v14);
      *((_DWORD *)v11 + 9) = sub_40C8D0(v4);
      goto LABEL_6;
    case 31:
      v5 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v13);
      *((_DWORD *)v11 + 10) = sub_40C8D0(v5);
      v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v12);
      *((_DWORD *)v11 + 11) = sub_40C8D0(v6);
      v10[0] = *((_DWORD *)v11 + 11);
      v9 = *((_DWORD *)v11 + 10);
      v7 = (const char *)sub_4012D0(&unk_4E1194);
      sprintf((char *const)v11 + 48, "%s\\n_%03d_%03d.ksm", v7, v9, v10[0]);
      goto LABEL_6;
    case 32:
LABEL_6:
      result = 1;
      break;
    default:
      v10[0] = a2 - 2;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        v10,
        &a3);
      result = CBase::Set(v11, a2, v10[0]);
      break;
  }
  return result;
}

//----- (00420E10) --------------------------------------------------------
int __thiscall CInitMap::OnLoad(void *this)
{
  return CSMap::LoadMap(this);
}
// 490EA0: using guessed type _DWORD __cdecl sub_490EA0(_DWORD);

//----- (00420E30) --------------------------------------------------------
unsigned int __usercall SnapCurrentProcessMiniDump@<eax>(DWORD a1@<eax>, DWORD a2@<edx>, DWORD a3@<ecx>, DWORD a4@<ebx>, DWORD a5@<edi>, DWORD a6@<esi>, _CONTEXT *lpContext)
{
  HANDLE v7; // eax
  DWORD vars0; // [esp+2ECh] [ebp+0h]
  DWORD retaddr; // [esp+2F0h] [ebp+4h]

  memset(lpContext, 0, sizeof(_CONTEXT));
  lpContext->ContextFlags = 65599;
  v7 = GetCurrentThread();
  if ( !GetThreadContext(v7, lpContext) )
    return 0;
  lpContext->Eax = a1;
  lpContext->Ebx = a4;
  lpContext->Ecx = a3;
  lpContext->Edx = a2;
  lpContext->Edi = a5;
  lpContext->Esi = a6;
  lpContext->SegGs = (unsigned __int16)__GS__;
  lpContext->SegFs = (unsigned __int16)__FS__;
  lpContext->SegEs = (unsigned __int16)__ES__;
  lpContext->SegDs = (unsigned __int16)__DS__;
  lpContext->SegCs = (unsigned __int16)__CS__;
  lpContext->SegSs = (unsigned __int16)__SS__;
  lpContext->Ebp = vars0;
  lpContext->Eip = retaddr;
  return 1;
}
// 420FA0: variable 'vars0' is possibly undefined

//----- (00420FF0) --------------------------------------------------------
void __thiscall CIOException::CInit::CInit(CIOException::CInit *this)
{
  CHAR *v1; // eax
  CHAR *lpString1; // [esp+4h] [ebp-4h]

  InitializeCriticalSection(&CriticalSection);
  GetModuleFileNameA(0, FileName, 0x104u);
  v1 = GetFilePart(FileName);
  lstrcpyA(v1, "Exception.txt");
  GetModuleFileNameA(0, byte_4E0B80, 0x104u);
  lpString1 = GetFilePart(byte_4E0B80);
  lstrcpyA(lpString1, "Exception.dmp");
  dword_4E0D8C = time(0);
  lpTopLevelExceptionFilter = SetUnhandledExceptionFilter((LPTOP_LEVEL_EXCEPTION_FILTER)RecordExceptionInfo);
  sub_4A0647((int)sub_4210E0);
}

//----- (004210A0) --------------------------------------------------------
char *__cdecl GetFilePart(char *source)
{
  char *v2; // [esp+0h] [ebp-4h]
  char *v3; // [esp+0h] [ebp-4h]

  v2 = strrchr(source, 92);
  if ( v2 )
    v3 = v2 + 1;
  else
    v3 = source;
  return v3;
}

//----- (004210E0) --------------------------------------------------------
void __usercall __noreturn sub_4210E0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  char savedregs; // [esp+0h] [ebp+0h]

  ELOG("Buffer Overrun\n", savedregs);
  if ( g_nEnable )
  {
    CIOException::Lock();
    GenerateExceptionReport(a1, a2, a3, 0);
    sendMail();
    CIOException::Unlock();
  }
  ExitProcess(1u);
}
// 4210E8: variable 'savedregs' is possibly undefined
// 421120: using guessed type int CIOException::Lock(void);
// 421130: using guessed type int CIOException::Unlock(void);

//----- (00421140) --------------------------------------------------------
BOOL sendMail()
{
  __time32_t Time; // [esp+0h] [ebp-118h] BYREF
  LPSTR v2; // [esp+4h] [ebp-114h]
  CHAR NewFileName[264]; // [esp+8h] [ebp-110h] BYREF
  int v4; // [esp+110h] [ebp-8h]
  struct tm *v5; // [esp+114h] [ebp-4h]

  v4 = dword_4D9830;
  if ( g_szMailServer )
    sendMail_0(g_szMailServer, g_szMailFrom, g_szMailTo, FileName);
  strcpy(NewFileName, FileName);
  v2 = GetFilePart(NewFileName);
  time(&Time);
  v5 = localtime(&Time);
  wsprintfA(
    v2,
    "Exception\\%02d%02d%02d.%02d%02d%02d.dbg.txt",
    v5->tm_year % 100,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    v5->tm_min,
    v5->tm_sec);
  MoveFileExA(FileName, NewFileName, 1u);
  wsprintfA(
    v2,
    "Exception\\%02d%02d%02d.%02d%02d%02d.dbg.dmp",
    v5->tm_year % 100,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    v5->tm_min,
    v5->tm_sec);
  MoveFileExA(byte_4E0B80, NewFileName, 1u);
  DeleteFileA(FileName);
  return DeleteFileA(byte_4E0B80);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004212B0) --------------------------------------------------------
int __cdecl sendMail_0(const char *host, const char *from, const char *to, const char *body)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int namelen; // [esp+0h] [ebp-9D8h] BYREF
  size_t v14; // [esp+4h] [ebp-9D4h]
  struct hostent *v15; // [esp+8h] [ebp-9D0h]
  char *Str; // [esp+Ch] [ebp-9CCh]
  char optval[4]; // [esp+10h] [ebp-9C8h] BYREF
  struct sockaddr name; // [esp+14h] [ebp-9C4h] BYREF
  int v19; // [esp+24h] [ebp-9B4h]
  SOCKET s; // [esp+28h] [ebp-9B0h]
  int v21; // [esp+2Ch] [ebp-9ACh]
  char buf[2048]; // [esp+30h] [ebp-9A8h] BYREF
  struct WSAData WSAData; // [esp+830h] [ebp-1A8h] BYREF
  struct sockaddr v24; // [esp+9C4h] [ebp-14h] BYREF
  int v25; // [esp+9D4h] [ebp-4h]

  v25 = dword_4D9830;
  v21 = 0;
  if ( WSAStartup(0x202u, &WSAData) )
    return 0;
  s = socket(2, 1, 0);
  if ( s == -1 )
  {
    WSACleanup();
    return 0;
  }
  *(_DWORD *)optval = 5000;
  v19 = setsockopt(s, 0xFFFF, 4102, optval, 4);
  if ( v19 != -1 )
  {
    *(_DWORD *)optval = 5000;
    v19 = setsockopt(s, 0xFFFF, 4101, optval, 4);
    if ( v19 != -1 )
    {
      name.sa_family = 2;
      *(_DWORD *)&name.sa_data[2] = 0;
      *(_WORD *)name.sa_data = 0;
      if ( bind(s, &name, 16) != -1 )
      {
        name.sa_family = 2;
        *(_DWORD *)&name.sa_data[2] = inet_addr(host);
        if ( *(_DWORD *)&name.sa_data[2] != -1 )
        {
LABEL_11:
          *(_WORD *)name.sa_data = htons(0x19u);
          if ( connect(s, &name, 16) != -1 )
          {
            recv(s, buf, 2048, 0);
            Str = "HELO www.inixsoft.com\r\n";
            v5 = strlen("HELO www.inixsoft.com\r\n");
            if ( send(s, "HELO www.inixsoft.com\r\n", v5, 0) > 0 )
            {
              recv(s, buf, 2048, 0);
              sprintf(buf, "MAIL From: <%s>\r\n", from);
              v6 = strlen(buf);
              if ( send(s, buf, v6, 0) > 0 )
              {
                recv(s, buf, 2048, 0);
                for ( Str = (char *)to; ; Str += v14 )
                {
                  Str += strspn(Str, " ,");
                  if ( !*Str )
                    break;
                  v14 = strcspn(Str, ",");
                  sprintf(buf, "RCPT To: <%.*s>\r\n", v14, Str);
                  v7 = strlen(buf);
                  if ( send(s, buf, v7, 0) <= 0 )
                    goto LABEL_25;
                  recv(s, buf, 2048, 0);
                }
                Str = "DATA\r\n";
                v8 = strlen("DATA\r\n");
                if ( send(s, "DATA\r\n", v8, 0) > 0 )
                {
                  recv(s, buf, 2048, 0);
                  memset(&v24, 0, sizeof(v24));
                  namelen = 16;
                  getsockname(s, &v24, &namelen);
                  sprintf(buf, "From: <%s>\r\n", from);
                  v9 = strlen(buf);
                  if ( send(s, buf, v9, 0) > 0 )
                  {
                    sprintf(
                      buf,
                      "Subject: Exception (%d.%d.%d.%d)\r\n\r\n\r\n",
                      (unsigned __int8)v24.sa_data[2],
                      (unsigned __int8)v24.sa_data[3],
                      (unsigned __int8)v24.sa_data[4],
                      (unsigned __int8)v24.sa_data[5]);
                    v10 = strlen(buf);
                    if ( send(s, buf, v10, 0) > 0 )
                    {
                      if ( sendFile(s, body) )
                      {
                        Str = "\r\n.\r\n";
                        v11 = strlen("\r\n.\r\n");
                        if ( send(s, Str, v11, 0) > 0 )
                        {
                          recv(s, buf, 2048, 0);
                          Str = "QUIT\r\n";
                          v12 = strlen("QUIT\r\n");
                          if ( send(s, Str, v12, 0) > 0 )
                          {
                            recv(s, buf, 2048, 0);
                            v21 = 1;
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
          goto LABEL_25;
        }
        v15 = gethostbyname(host);
        if ( v15 )
        {
          memcpy(&name.sa_data[2], *(const void **)v15->h_addr_list, v15->h_length);
          goto LABEL_11;
        }
      }
    }
  }
LABEL_25:
  closesocket(s);
  WSACleanup();
  return v21;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00421820) --------------------------------------------------------
int __cdecl sendFile(unsigned int sock, const char *name)
{
  DWORD NumberOfBytesRead; // [esp+0h] [ebp-40Ch] BYREF
  char Buffer[1024]; // [esp+4h] [ebp-408h] BYREF
  int v5; // [esp+404h] [ebp-8h]
  HANDLE hFile; // [esp+408h] [ebp-4h]

  v5 = dword_4D9830;
  hFile = CreateFileA(name, 0x80000000, 1u, 0, 3u, 0, 0);
  if ( hFile == (HANDLE)-1 )
    return 1;
  do
  {
    if ( !ReadFile(hFile, Buffer, 0x400u, &NumberOfBytesRead, 0) || !NumberOfBytesRead )
    {
      CloseHandle(hFile);
      return 1;
    }
  }
  while ( send(sock, Buffer, NumberOfBytesRead, 0) > 0 );
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004218D0) --------------------------------------------------------
void __usercall GenerateExceptionReport(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, _EXCEPTION_POINTERS *data)
{
  DWORD v4; // eax
  DWORD v5; // eax
  DWORD v6; // ecx
  const char *v7; // eax
  HANDLE v8; // eax
  HANDLE v9; // eax
  int v10; // [esp-1Ch] [ebp-B8Ch]
  int v11; // [esp-18h] [ebp-B88h]
  int v12; // [esp-14h] [ebp-B84h]
  int v13; // [esp-10h] [ebp-B80h]
  int v14; // [esp-Ch] [ebp-B7Ch]
  const char *v15; // [esp-Ch] [ebp-B7Ch]
  int v16; // [esp-8h] [ebp-B78h]
  DWORD v17; // [esp-8h] [ebp-B78h]
  DWORD v18; // [esp-4h] [ebp-B74h]
  const char *v19; // [esp+Ch] [ebp-B64h]
  DWORD v20; // [esp+10h] [ebp-B60h]
  int i; // [esp+14h] [ebp-B5Ch]
  CHAR v22[1004]; // [esp+18h] [ebp-B58h] BYREF
  const char *v23; // [esp+404h] [ebp-76Ch]
  CONTEXT Context; // [esp+408h] [ebp-768h] BYREF
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+6D8h] [ebp-498h] BYREF
  const CHAR *v26; // [esp+6F4h] [ebp-47Ch]
  _CONTEXT ContextRecord; // [esp+6F8h] [ebp-478h] BYREF
  struct tm *v28; // [esp+9CCh] [ebp-1A4h]
  struct _SYSTEMTIME SystemTime; // [esp+9D0h] [ebp-1A0h] BYREF
  int v30[21]; // [esp+9E0h] [ebp-190h] BYREF
  DWORD v31; // [esp+A34h] [ebp-13Ch]
  int v32[2]; // [esp+A38h] [ebp-138h] BYREF
  PEXCEPTION_RECORD v33; // [esp+A40h] [ebp-130h]
  HANDLE hFile; // [esp+A44h] [ebp-12Ch]
  CHAR Filename[268]; // [esp+A48h] [ebp-128h] BYREF
  int v36; // [esp+B54h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+B58h] [ebp-18h]

  v36 = dword_4D9830;
  hFile = CreateFileA(FileName, 0x40000000u, 1u, 0, 4u, 0x80000080, 0);
  if ( hFile == (HANDLE)-1 )
  {
    OutputDebugStringA("Error creating exception report");
  }
  else
  {
    SetFilePointer(hFile, 0, 0, 2u);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    if ( g_bRaise )
      v19 = "first excpetion";
    else
      v19 = &Src;
    v16 = SystemTime.wSecond;
    v14 = SystemTime.wMinute;
    v13 = SystemTime.wHour;
    v12 = SystemTime.wDay;
    v11 = SystemTime.wMonth;
    v10 = SystemTime.wYear;
    v4 = GetCurrentThreadId();
    hprintf(
      hFile,
      "[%x %04d/%02d/%02d %02d:%02d:%02d]: ======================= %s\r\n",
      v4,
      v10,
      v11,
      v12,
      v13,
      v14,
      v16,
      v19);
    v26 = "Unknown";
    if ( !data )
    {
      SnapCurrentProcessMiniDump(v5, (DWORD)&Context, v6, a1, a2, a3, &Context);
      memset(v30, 0, 0x50u);
      v30[3] = Context.Eip;
      v32[1] = (int)&Context;
      v32[0] = (int)v30;
      data = (_EXCEPTION_POINTERS *)v32;
    }
    qmemcpy(&ContextRecord, data->ContextRecord, sizeof(ContextRecord));
    if ( VirtualQuery((LPCVOID)ContextRecord.Eip, &Buffer, 0x1Cu)
      && GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u) )
    {
      v26 = GetFilePart(Filename);
    }
    v28 = localtime(&dword_4E0D8C);
    hprintf(
      hFile,
      "start at %02d/%02d/%02d %02d:%02d:%02d\r\n",
      v28->tm_year % 100,
      v28->tm_mon + 1,
      v28->tm_mday,
      v28->tm_hour,
      v28->tm_min,
      v28->tm_sec);
    sub_422180(hFile);
    v33 = data->ExceptionRecord;
    v18 = ContextRecord.Eip;
    v17 = ContextRecord.SegCs;
    v15 = v26;
    v7 = GetExceptionDescription(v33->ExceptionCode);
    hprintf(hFile, "%s in module %s at %04x:%08x.\r\n", v7, v15, v17, v18);
    if ( v33->ExceptionCode == -1073741819 && v33->NumberParameters >= 2 )
    {
      v23 = "Read from";
      if ( v33->ExceptionInformation[0] )
        v23 = "Write to";
      wsprintfA(v22, "%s location %08x caused an access violation.\r\n", v23, v33->ExceptionInformation[1]);
      hprintf(hFile, "%s", v22);
    }
    hprintf(hFile, "\r\n");
    hprintf(hFile, "Registers:\r\n");
    hprintf(
      hFile,
      "EAX=%08x CS=%04x EIP=%08x EFLGS=%08x\r\n",
      ContextRecord.Eax,
      ContextRecord.SegCs,
      ContextRecord.Eip,
      ContextRecord.EFlags);
    hprintf(
      hFile,
      "EBX=%08x SS=%04x ESP=%08x EBP=%08x\r\n",
      ContextRecord.Ebx,
      ContextRecord.SegSs,
      ContextRecord.Esp,
      ContextRecord.Ebp);
    hprintf(
      hFile,
      "ECX=%08x DS=%04x ESI=%08x FS=%04x\r\n",
      ContextRecord.Ecx,
      ContextRecord.SegDs,
      ContextRecord.Esi,
      ContextRecord.SegFs);
    hprintf(
      hFile,
      "EDX=%08x ES=%04x EDI=%08x GS=%04x\r\n",
      ContextRecord.Edx,
      ContextRecord.SegEs,
      ContextRecord.Edi,
      ContextRecord.SegGs);
    hprintf(hFile, "\r\nBytes at CS:EIP:\r\n");
    v31 = ContextRecord.Eip;
    for ( i = 0; i < 16; ++i )
    {
      ms_exc.registration.TryLevel = 0;
      hprintf(hFile, "%02x ", *(unsigned __int8 *)(i + v31));
      ms_exc.registration.TryLevel = -1;
    }
    hprintf(hFile, "\r\n\r\nStack dump:\r\n");
    *(_DWORD *)begin = ContextRecord.Esp & 0xFFFFFFE0;
    dword_4E0B70 = (int)NtCurrentTeb()->NtTib.StackBase & 0xFFFFFFE0;
    PrintStack(hFile, ContextRecord.Esp & 0xFFFFFFE0, (ContextRecord.Esp & 0xFFFFFFE0) + 160);
    hprintf(hFile, "\r\n");
    v8 = GetCurrentProcess();
    if ( SymInitialize(v8, 0, 1) )
    {
      v20 = SymGetOptions();
      if ( (v20 & 0x16) != 20 )
        SymSetOptions(v20 & 0xFFFFFFFD | 0x14);
      ImageHelpStackWalk(hFile, &ContextRecord);
      v9 = GetCurrentProcess();
      SymCleanup(v9);
    }
    else
    {
      IntelStackWalk(hFile, &ContextRecord);
    }
    RecordModuleList(hFile);
    CloseHandle(hFile);
    CreateMiniDump(data);
  }
}
// 421A09: variable 'v5' is possibly undefined
// 421A09: variable 'v6' is possibly undefined
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (00421EC0) --------------------------------------------------------
void hprintf(void *LogFile, char *Format, ...)
{
  int v2; // eax
  CHAR String[2004]; // [esp+0h] [ebp-7E0h] BYREF
  int v4; // [esp+7D4h] [ebp-Ch]
  DWORD NumberOfBytesWritten; // [esp+7D8h] [ebp-8h] BYREF
  va_list arglist; // [esp+7DCh] [ebp-4h]
  va_list va; // [esp+7F0h] [ebp+10h] BYREF

  va_start(va, Format);
  v4 = dword_4D9830;
  va_copy(arglist, va);
  wvsprintfA(String, Format, va);
  arglist = 0;
  v2 = lstrlenA(String);
  WriteFile(LogFile, String, v2, &NumberOfBytesWritten, 0);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00421F30) --------------------------------------------------------
void __cdecl CreateMiniDump(_EXCEPTION_POINTERS *pException)
{
  HANDLE v1; // eax
  HANDLE v2; // eax
  HANDLE v3; // eax
  DWORD v4; // [esp-18h] [ebp-2Ch]
  struct _MINIDUMP_EXCEPTION_INFORMATION *ExceptionParam; // [esp+0h] [ebp-14h]
  HANDLE hFile; // [esp+4h] [ebp-10h]
  int v7[3]; // [esp+8h] [ebp-Ch] BYREF

  hFile = CreateFileA(byte_4E0B80, 0x40000000u, 1u, 0, 2u, 0x80000080, 0);
  if ( hFile != (HANDLE)-1 )
  {
    v1 = GetCurrentThread();
    SetThreadPriority(v1, 2);
    if ( pException )
    {
      v7[0] = GetCurrentThreadId();
      v7[2] = 1;
      v7[1] = (int)pException;
      ExceptionParam = (struct _MINIDUMP_EXCEPTION_INFORMATION *)v7;
    }
    else
    {
      ExceptionParam = 0;
    }
    v4 = GetCurrentProcessId();
    v2 = GetCurrentProcess();
    MiniDumpWriteDump(v2, v4, hFile, MiniDumpNormal, ExceptionParam, 0, 0);
    v3 = GetCurrentThread();
    SetThreadPriority(v3, 0);
    CloseHandle(hFile);
  }
}

//----- (00421FE0) --------------------------------------------------------
void __cdecl RecordModuleList(void *LogFile)
{
  hprintf(LogFile, "Module list:\r\n");
  GetModuleHandleA(0);
  _getdrive();
}

//----- (00422280) --------------------------------------------------------
const char *__cdecl GetExceptionDescription(unsigned int ExceptionCode)
{
  unsigned int i; // [esp+0h] [ebp-C4h]
  int v3; // [esp+4h] [ebp-C0h]
  int v4[47]; // [esp+8h] [ebp-BCh]

  v3 = 1073807365;
  v4[0] = (int)"a Control-C";
  v4[1] = 1073807368;
  v4[2] = (int)"a Control-Break";
  v4[3] = -2147483646;
  v4[4] = (int)"a Datatype Misalignment";
  v4[5] = -2147483645;
  v4[6] = (int)"a Breakpoint";
  v4[7] = -1073741819;
  v4[8] = (int)"an Access Violation";
  v4[9] = -1073741818;
  v4[10] = (int)"an In Page Error";
  v4[11] = -1073741801;
  v4[12] = (int)"a No Memory";
  v4[13] = -1073741795;
  v4[14] = (int)"an Illegal Instruction";
  v4[15] = -1073741787;
  v4[16] = (int)"a Noncontinuable Exception";
  v4[17] = -1073741786;
  v4[18] = (int)"an Invalid Disposition";
  v4[19] = -1073741684;
  v4[20] = (int)"a Array Bounds Exceeded";
  v4[21] = -1073741683;
  v4[22] = (int)"a Float Denormal Operand";
  v4[23] = -1073741682;
  v4[24] = (int)"a Float Divide by Zero";
  v4[25] = -1073741681;
  v4[26] = (int)"a Float Inexact Result";
  v4[27] = -1073741680;
  v4[28] = (int)"a Float Invalid Operation";
  v4[29] = -1073741679;
  v4[30] = (int)"a Float Overflow";
  v4[31] = -1073741678;
  v4[32] = (int)"a Float Stack Check";
  v4[33] = -1073741677;
  v4[34] = (int)"a Float Underflow";
  v4[35] = -1073741676;
  v4[36] = (int)"an Integer Divide by Zero";
  v4[37] = -1073741675;
  v4[38] = (int)"an Integer Overflow";
  v4[39] = -1073741674;
  v4[40] = (int)"a Privileged Instruction";
  v4[41] = -1073741571;
  v4[42] = (int)"a Stack Overflow";
  v4[43] = -1073741502;
  v4[44] = (int)"a DLL Initialization Failed";
  v4[45] = -529697949;
  v4[46] = (int)"a Microsoft C++ Exception";
  for ( i = 0; i < 0x18; ++i )
  {
    if ( ExceptionCode == *(&v3 + 2 * i) )
      return (const char *)v4[2 * i];
  }
  return "Unknown exception type";
}

//----- (00422460) --------------------------------------------------------
void __cdecl PrintStack(void *LogFile, unsigned int begin, unsigned int end)
{
  int v3; // eax
  int v4; // eax
  char v5; // [esp+Ch] [ebp-80h] BYREF
  char v6[88]; // [esp+Dh] [ebp-7Fh] BYREF
  __int16 v7; // [esp+65h] [ebp-27h]
  char v8; // [esp+67h] [ebp-25h]
  int v9; // [esp+6Ch] [ebp-20h]
  LPSTR v10; // [esp+70h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+74h] [ebp-18h]
  unsigned int v12; // [esp+9Ch] [ebp+10h]

  v9 = dword_4D9830;
  if ( *(_DWORD *)::begin < begin )
    *(_DWORD *)::begin = begin & 0xFFFFFFE0;
  if ( end <= dword_4E0B70 )
    v12 = (end + 31) & 0xFFFFFFE0;
  else
    v12 = dword_4E0B70;
  ms_exc.registration.TryLevel = 0;
  v5 = 0;
  memset(v6, 0, sizeof(v6));
  v7 = 0;
  v8 = 0;
  v10 = &v5;
  while ( *(_DWORD *)::begin < v12 )
  {
    if ( (::begin[0] & 0x1F) == 0 )
    {
      v3 = wsprintfA(v10, "%08x:", *(_DWORD *)::begin);
      v10 += v3;
    }
    v4 = wsprintfA(v10, " %08x", **(_DWORD **)::begin);
    v10 += v4;
    *(_DWORD *)::begin += 4;
    if ( (::begin[0] & 0x1F) == 0 )
    {
      hprintf(LogFile, "%s\r\n", &v5);
      v5 = 0;
      v10 = &v5;
    }
  }
}
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (004225E0) --------------------------------------------------------
void __cdecl ImageHelpStackWalk(void *LogFile, _CONTEXT *ptrContext)
{
  HANDLE v2; // eax
  HANDLE v3; // eax
  HANDLE v4; // eax
  HANDLE v5; // [esp-1Ch] [ebp-678h]
  DWORD64 v6; // [esp-10h] [ebp-66Ch]
  DWORD64 v7; // [esp-10h] [ebp-66Ch]
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+0h] [ebp-65Ch] BYREF
  CHAR Filename[268]; // [esp+1Ch] [ebp-640h] BYREF
  DWORD pdwDisplacement; // [esp+128h] [ebp-534h] BYREF
  struct _IMAGEHLP_LINE64 Line64; // [esp+12Ch] [ebp-530h] BYREF
  PSYMBOL_INFO Symbol; // [esp+148h] [ebp-514h]
  CHAR outputString[512]; // [esp+14Ch] [ebp-510h] BYREF
  struct _SYMBOL_INFO v14; // [esp+34Ch] [ebp-310h] BYREF
  int v15; // [esp+5A8h] [ebp-B4h]
  unsigned __int64 Displacement; // [esp+5ACh] [ebp-B0h] BYREF
  struct _tagSTACKFRAME StackFrame; // [esp+5B4h] [ebp-A8h] BYREF

  v15 = dword_4D9830;
  hprintf(LogFile, "Call Stack Information:\r\n");
  memset(&StackFrame, 0, sizeof(StackFrame));
  StackFrame.AddrPC.Offset = ptrContext->Eip;
  StackFrame.AddrPC.Mode = AddrModeFlat;
  StackFrame.AddrStack.Offset = ptrContext->Esp;
  StackFrame.AddrStack.Mode = AddrModeFlat;
  StackFrame.AddrFrame.Offset = ptrContext->Ebp;
  StackFrame.AddrFrame.Mode = AddrModeFlat;
  while ( 1 )
  {
    v5 = GetCurrentThread();
    v2 = GetCurrentProcess();
    if ( !StackWalk(0x14Cu, v2, v5, &StackFrame, ptrContext, 0, SymFunctionTableAccess, SymGetModuleBase, 0)
      || !StackFrame.AddrFrame.Offset )
    {
      break;
    }
    PrintStack(LogFile, StackFrame.AddrFrame.Offset - 32, StackFrame.AddrFrame.Offset + 12);
    hprintf(LogFile, "\r\n%08x  %08x ", StackFrame.AddrFrame.Offset, StackFrame.AddrPC.Offset);
    Symbol = &v14;
    v14.SizeOfStruct = 600;
    v14.MaxNameLen = 512;
    Displacement = 0i64;
    outputString[0] = 0;
    v6 = StackFrame.AddrPC.Offset;
    v3 = GetCurrentProcess();
    if ( SymFromAddr(v3, v6, &Displacement, &v14)
      && (hprintf(LogFile, "%s +%x\r\n", Symbol->Name, (_DWORD)Displacement),
          UnDecorateSymbolName(Symbol->Name, outputString, 0x200u, 0),
          pdwDisplacement = 0,
          Line64.SizeOfStruct = 24,
          v7 = StackFrame.AddrPC.Offset,
          v4 = GetCurrentProcess(),
          SymGetLineFromAddr64(v4, v7, &pdwDisplacement, &Line64)) )
    {
      hprintf(LogFile, "%s %d %s\r\n", Line64.FileName, Line64.LineNumber, outputString);
    }
    else
    {
      Filename[0] = 0;
      if ( VirtualQuery((LPCVOID)StackFrame.AddrPC.Offset, &Buffer, 0x1Cu) )
        GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u);
      hprintf(LogFile, "%s %s\r\n", Filename, outputString);
    }
    hprintf(
      LogFile,
      "Params:   %08x %08x %08x %08x\r\n",
      StackFrame.Params[0],
      StackFrame.Params[1],
      StackFrame.Params[2],
      StackFrame.Params[3]);
  }
  hprintf(LogFile, "\r\n");
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004228C0) --------------------------------------------------------
void __cdecl IntelStackWalk(void *LogFile, _CONTEXT *ptrContext)
{
  int i; // [esp+Ch] [ebp-154h]
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+10h] [ebp-150h] BYREF
  unsigned __int8 *v4; // [esp+2Ch] [ebp-134h]
  CHAR Filename[264]; // [esp+30h] [ebp-130h] BYREF
  int v6; // [esp+138h] [ebp-28h]
  LPCVOID lpAddress; // [esp+13Ch] [ebp-24h]
  LPVOID lp; // [esp+140h] [ebp-20h]
  LPVOID v9; // [esp+144h] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+148h] [ebp-18h]

  v6 = dword_4D9830;
  hprintf(LogFile, "Intel Call Stack Information:\r\n");
  lpAddress = (LPCVOID)ptrContext->Eip;
  lp = (LPVOID)ptrContext->Ebp;
  do
  {
    PrintStack(LogFile, (unsigned int)lp - 32, (unsigned int)lp + 12);
    Filename[0] = 0;
    if ( VirtualQuery(lpAddress, &Buffer, 0x1Cu) )
      GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u);
    hprintf(LogFile, "\r\n%08x  %08x  %s\r\n", lp, lpAddress, Filename);
    hprintf(LogFile, "Bytes at CS:EIP: ");
    v4 = (unsigned __int8 *)lpAddress;
    for ( i = 0; i < 16; ++i )
    {
      ms_exc.registration.TryLevel = 0;
      hprintf(LogFile, "%02x ", v4[i]);
      ms_exc.registration.TryLevel = -1;
    }
    hprintf(LogFile, "\r\n");
    lpAddress = (LPCVOID)*((_DWORD *)lp + 1);
    v9 = lp;
    lp = *(LPVOID *)lp;
  }
  while ( ((unsigned __int8)lp & 3) == 0 && lp > v9 && !IsBadWritePtr(lp, 8u) );
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00422A90) --------------------------------------------------------
LONG __userpurge RecordExceptionInfo@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, _EXCEPTION_POINTERS *data)
{
  LONG result; // eax

  if ( g_nEnable && data->ExceptionRecord->ExceptionCode != -536870911 )
  {
    CIOException::Lock();
    if ( !dword_4E0DB8 )
    {
      dword_4E0DB8 = 1;
      GenerateExceptionReport(a1, a2, a3, data);
      sendMail();
    }
    CIOException::Unlock();
  }
  if ( lpTopLevelExceptionFilter )
    result = lpTopLevelExceptionFilter(data);
  else
    result = 0;
  return result;
}
// 421120: using guessed type int CIOException::Lock(void);
// 421130: using guessed type int CIOException::Unlock(void);
// 4E0DB8: using guessed type int dword_4E0DB8;

//----- (00422B00) --------------------------------------------------------
void __thiscall CIOException::CInit::~CInit(CIOException::CInit *this)
{
  if ( lpTopLevelExceptionFilter )
    SetUnhandledExceptionFilter(lpTopLevelExceptionFilter);
  DeleteCriticalSection(&CriticalSection);
}

//----- (00422B30) --------------------------------------------------------
int __cdecl ELOG(char *Format, char a2)
{
  int result; // eax
  DWORD v3; // eax
  int v4; // [esp-18h] [ebp-448h]
  int v5; // [esp-14h] [ebp-444h]
  int v6; // [esp-10h] [ebp-440h]
  int v7; // [esp-Ch] [ebp-43Ch]
  int v8; // [esp-8h] [ebp-438h]
  int v9; // [esp-4h] [ebp-434h]
  _BYTE *Src; // [esp+0h] [ebp-430h]
  DWORD NumberOfBytesWritten; // [esp+4h] [ebp-42Ch] BYREF
  int i; // [esp+8h] [ebp-428h]
  struct _SYSTEMTIME SystemTime; // [esp+Ch] [ebp-424h] BYREF
  HANDLE hFile; // [esp+1Ch] [ebp-414h]
  char Buffer[1028]; // [esp+20h] [ebp-410h] BYREF
  int v16; // [esp+424h] [ebp-Ch]
  DWORD nNumberOfBytesToWrite; // [esp+428h] [ebp-8h]
  va_list ArgList; // [esp+42Ch] [ebp-4h]

  result = dword_4D9830;
  v16 = dword_4D9830;
  if ( g_nEnable )
  {
    CIOException::Lock();
    ArgList = &a2;
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    hFile = CreateFileA(FileName, 0xC0000000, 1u, 0, 4u, 0x80u, 0);
    if ( hFile == (HANDLE)-1 )
    {
      result = CIOException::Unlock();
    }
    else
    {
      SetFilePointer(hFile, 0, 0, 2u);
      v9 = SystemTime.wSecond;
      v8 = SystemTime.wMinute;
      v7 = SystemTime.wHour;
      v6 = SystemTime.wDay;
      v5 = SystemTime.wMonth;
      v4 = SystemTime.wYear;
      v3 = GetCurrentThreadId();
      nNumberOfBytesToWrite = _snprintf(
                                Buffer,
                                0x400u,
                                "[%x %04d/%02d/%02d %02d:%02d:%02d]: ",
                                v3,
                                v4,
                                v5,
                                v6,
                                v7,
                                v8,
                                v9);
      if ( (nNumberOfBytesToWrite & 0x80000000) == 0 )
      {
        WriteFile(hFile, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        nNumberOfBytesToWrite = _vsnprintf(Buffer, 0x400u, Format, ArgList);
        if ( (nNumberOfBytesToWrite & 0x80000000) == 0 )
        {
          for ( i = 0; i < (int)nNumberOfBytesToWrite; i += 2 )
          {
            Src = memchr(&Buffer[i], 10, nNumberOfBytesToWrite - i);
            if ( !Src )
              break;
            if ( nNumberOfBytesToWrite < 0x400 )
              ++nNumberOfBytesToWrite;
            i = Src - Buffer;
            memcpy_0(Src + 1, Src, nNumberOfBytesToWrite - (Src - Buffer) - 1);
            *Src = 13;
          }
          WriteFile(hFile, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        }
      }
      ArgList = 0;
      CloseHandle(hFile);
      result = CIOException::Unlock();
    }
  }
  return result;
}
// 421120: using guessed type int CIOException::Lock(void);
// 421130: using guessed type int CIOException::Unlock(void);
// 4D9830: using guessed type int dword_4D9830;

//----- (00422D80) --------------------------------------------------------
void __usercall EBREAK(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  if ( g_nEnable && InterlockedExchange(&g_bRaise, 0) )
  {
    if ( g_nEnable )
      EBreak(a1, a2, a3);
  }
}

//----- (00422DC0) --------------------------------------------------------
int __usercall EBreak@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  char savedregs; // [esp+0h] [ebp+0h]

  ELOG("EASSERT\n", savedregs);
  CIOException::Lock();
  GenerateExceptionReport(a1, a2, a3, 0);
  sendMail();
  return CIOException::Unlock();
}
// 422DC8: variable 'savedregs' is possibly undefined
// 421120: using guessed type int CIOException::Lock(void);
// 421130: using guessed type int CIOException::Unlock(void);

//----- (00422DF0) --------------------------------------------------------
int __cdecl CIOException::Filter(_EXCEPTION_POINTERS *pExp)
{
  if ( g_nEnable && pExp->ExceptionRecord->ExceptionCode != 0xE0000001 )
  {
    CIOException::Lock();
    GenerateExceptionReport(pExp);
    CIOException::Unlock();
  }
  return 1;
}
// 421120: using guessed type int CIOException::Lock(void);
// 421130: using guessed type int CIOException::Unlock(void);

//----- (00422E30) --------------------------------------------------------
void __cdecl CIOException::Open(const char *szMailServer, const char *szMailFrom, const char *szMailTo)
{
  HANDLE hObject; // [esp+0h] [ebp-4h]

  if ( szMailServer && *szMailServer )
  {
    g_szMailServer = (char *)szMailServer;
    g_szMailFrom = (char *)szMailFrom;
    g_szMailTo = (char *)szMailTo;
  }
  else
  {
    g_szMailServer = 0;
    g_szMailFrom = 0;
    g_szMailTo = 0;
  }
  hObject = CreateFileA(FileName, 0x80000000, 1u, 0, 3u, 0, 0);
  if ( hObject != (HANDLE)-1 )
  {
    CloseHandle(hObject);
    CIOException::SendMail();
  }
}

//----- (00422EC0) --------------------------------------------------------
BOOL CIOException::Enable()
{
  return InterlockedExchange(&g_nEnable, 1) == 0;
}

//----- (00422EE0) --------------------------------------------------------
LONG CIOException::Disable()
{
  return InterlockedExchange(&g_nEnable, 0);
}

//----- (00422F00) --------------------------------------------------------
LONG CIOException::IsEnable()
{
  return g_nEnable;
}

//----- (00422F10) --------------------------------------------------------
void __stdcall CIOException::SendMail()
{
  CIOException::Lock();
  sendMail();
  CIOException::Unlock();
}
// 421120: using guessed type int CIOException::Lock(void);
// 421130: using guessed type int CIOException::Unlock(void);
// 421140: using guessed type int sendMail(void);

//----- (00422F30) --------------------------------------------------------
LONG CIOException::ToggleRaise()
{
  g_bRaise = g_bRaise == 0;
  return g_bRaise;
}

//----- (00422F50) --------------------------------------------------------
void __cdecl CIOException::DumpStack(int nThread, void **hThread, unsigned int *nThreadId)
{
  HANDLE v3; // eax
  DWORD v4; // eax
  HANDLE v5; // eax
  HANDLE v6; // eax
  HANDLE v7; // eax
  int v8; // [esp-18h] [ebp-38h]
  int v9; // [esp-14h] [ebp-34h]
  int v10; // [esp-10h] [ebp-30h]
  int v11; // [esp-Ch] [ebp-2Ch]
  int v12; // [esp-8h] [ebp-28h]
  int v13; // [esp-4h] [ebp-24h]
  int i; // [esp+0h] [ebp-20h]
  DWORD v15; // [esp+4h] [ebp-1Ch]
  struct tm *v16; // [esp+8h] [ebp-18h]
  struct _SYSTEMTIME SystemTime; // [esp+Ch] [ebp-14h] BYREF
  HANDLE hFile; // [esp+1Ch] [ebp-4h]

  v3 = GetCurrentThread();
  SetThreadPriority(v3, 2);
  CIOException::Lock();
  hFile = CreateFileA(FileName, 0x40000000u, 1u, 0, 4u, 0x80000080, 0);
  if ( hFile == (HANDLE)-1 )
  {
    CIOException::Unlock();
  }
  else
  {
    SetFilePointer(hFile, 0, 0, 2u);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    v13 = SystemTime.wSecond;
    v12 = SystemTime.wMinute;
    v11 = SystemTime.wHour;
    v10 = SystemTime.wDay;
    v9 = SystemTime.wMonth;
    v8 = SystemTime.wYear;
    v4 = GetCurrentThreadId();
    hprintf(
      hFile,
      "[%x %04d/%02d/%02d %02d:%02d:%02d]: Dump Stack =======================\r\n",
      v4,
      v8,
      v9,
      v10,
      v11,
      v12,
      v13);
    v16 = localtime(&dword_4E0D8C);
    hprintf(
      hFile,
      "start at %02d/%02d/%02d %02d:%02d:%02d\r\n",
      v16->tm_year % 100,
      v16->tm_mon + 1,
      v16->tm_mday,
      v16->tm_hour,
      v16->tm_min,
      v16->tm_sec);
    v5 = GetCurrentProcess();
    if ( SymInitialize(v5, 0, 1) )
    {
      v15 = SymGetOptions();
      if ( (v15 & 0x16) != 20 )
        SymSetOptions(v15 & 0xFFFFFFFD | 0x14);
      for ( i = 0; i < nThread; ++i )
      {
        hprintf(hFile, "Call Stack Information %d (%x):\r\n", i, nThreadId[i]);
        ImageHelpStackWalk_0(hFile, hThread[i]);
      }
      RecordModuleList(hFile);
      v6 = GetCurrentProcess();
      SymCleanup(v6);
    }
    CloseHandle(hFile);
    CIOException::Unlock();
    CreateMiniDump(0);
    v7 = GetCurrentThread();
    SetThreadPriority(v7, 0);
  }
}
// 421120: using guessed type int CIOException::Lock(void);
// 421130: using guessed type int CIOException::Unlock(void);

//----- (00423130) --------------------------------------------------------
void __cdecl ImageHelpStackWalk_0(void *LogFile, void *hThread)
{
  HANDLE v2; // eax
  HANDLE v3; // eax
  HANDLE v4; // eax
  DWORD64 v5; // [esp-10h] [ebp-93Ch]
  DWORD64 v6; // [esp-10h] [ebp-93Ch]
  struct _MEMORY_BASIC_INFORMATION Buffer; // [esp+0h] [ebp-92Ch] BYREF
  CHAR Filename[268]; // [esp+1Ch] [ebp-910h] BYREF
  DWORD pdwDisplacement; // [esp+128h] [ebp-804h] BYREF
  struct _IMAGEHLP_LINE64 Line64; // [esp+12Ch] [ebp-800h] BYREF
  PSYMBOL_INFO Symbol; // [esp+148h] [ebp-7E4h]
  CHAR outputString[512]; // [esp+14Ch] [ebp-7E0h] BYREF
  struct _SYMBOL_INFO v13; // [esp+34Ch] [ebp-5E0h] BYREF
  unsigned __int64 Displacement; // [esp+5A4h] [ebp-388h] BYREF
  CONTEXT Context; // [esp+5ACh] [ebp-380h] BYREF
  int v16; // [esp+880h] [ebp-ACh]
  struct _tagSTACKFRAME StackFrame; // [esp+884h] [ebp-A8h] BYREF

  v16 = dword_4D9830;
  SuspendThread(hThread);
  memset(&Context, 0, sizeof(Context));
  Context.ContextFlags = 65543;
  GetThreadContext(hThread, &Context);
  hprintf(LogFile, "\r\nRegisters:\r\n");
  hprintf(LogFile, "EAX=%08x CS=%04x EIP=%08x EFLGS=%08x\r\n", Context.Eax, Context.SegCs, Context.Eip, Context.EFlags);
  hprintf(LogFile, "EBX=%08x SS=%04x ESP=%08x EBP=%08x\r\n", Context.Ebx, Context.SegSs, Context.Esp, Context.Ebp);
  hprintf(LogFile, "ECX=%08x DS=%04x ESI=%08x FS=%04x\r\n", Context.Ecx, Context.SegDs, Context.Esi, Context.SegFs);
  hprintf(LogFile, "EDX=%08x ES=%04x EDI=%08x GS=%04x\r\n", Context.Edx, Context.SegEs, Context.Edi, Context.SegGs);
  hprintf(LogFile, "\r\nStack dump:\r\n");
  *(_DWORD *)begin = Context.Esp & 0xFFFFFFE0;
  dword_4E0B70 = 0x80000000;
  PrintStack(LogFile, Context.Esp & 0xFFFFFFE0, (Context.Esp & 0xFFFFFFE0) + 160);
  hprintf(LogFile, "\r\nCall Stack:\r\n");
  memset(&StackFrame, 0, sizeof(StackFrame));
  StackFrame.AddrPC.Offset = Context.Eip;
  StackFrame.AddrPC.Mode = AddrModeFlat;
  StackFrame.AddrStack.Offset = Context.Esp;
  StackFrame.AddrStack.Mode = AddrModeFlat;
  StackFrame.AddrFrame.Offset = Context.Ebp;
  StackFrame.AddrFrame.Mode = AddrModeFlat;
  while ( 1 )
  {
    v2 = GetCurrentProcess();
    if ( !StackWalk(0x14Cu, v2, hThread, &StackFrame, &Context, 0, SymFunctionTableAccess, SymGetModuleBase, 0)
      || !StackFrame.AddrFrame.Offset )
    {
      break;
    }
    PrintStack(LogFile, StackFrame.AddrFrame.Offset - 16, StackFrame.AddrFrame.Offset + 12);
    hprintf(LogFile, "\r\n%08x  %08x ", StackFrame.AddrFrame.Offset, StackFrame.AddrPC.Offset);
    Symbol = &v13;
    v13.SizeOfStruct = 600;
    v13.MaxNameLen = 512;
    outputString[0] = 0;
    Displacement = 0i64;
    v5 = StackFrame.AddrPC.Offset;
    v3 = GetCurrentProcess();
    if ( SymFromAddr(v3, v5, &Displacement, &v13)
      && (hprintf(LogFile, "%s +%x\r\n", Symbol->Name, (_DWORD)Displacement),
          UnDecorateSymbolName(Symbol->Name, outputString, 0x200u, 0),
          pdwDisplacement = 0,
          Line64.SizeOfStruct = 24,
          v6 = StackFrame.AddrPC.Offset,
          v4 = GetCurrentProcess(),
          SymGetLineFromAddr64(v4, v6, &pdwDisplacement, &Line64)) )
    {
      hprintf(LogFile, "%s %d %s\r\n", Line64.FileName, Line64.LineNumber, outputString);
    }
    else
    {
      Filename[0] = 0;
      if ( VirtualQuery((LPCVOID)StackFrame.AddrPC.Offset, &Buffer, 0x1Cu) )
        GetModuleFileNameA((HMODULE)Buffer.AllocationBase, Filename, 0x104u);
      hprintf(LogFile, "%s %s\r\n", Filename, outputString);
    }
    hprintf(
      LogFile,
      "Params:   %08x %08x %08x %08x\r\n",
      StackFrame.Params[0],
      StackFrame.Params[1],
      StackFrame.Params[2],
      StackFrame.Params[3]);
  }
  hprintf(LogFile, "\r\n");
  ResumeThread(hThread);
}
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (00423550) --------------------------------------------------------
void __thiscall CIOSpinLock::Wait(CIOSpinLock *this)
{
  int v2; // [esp+4h] [ebp-4h]
  int v3; // [esp+4h] [ebp-4h]

  v2 = 4000;
  while ( --v2 >= 0 )
  {
    if ( !InterlockedCompareExchange((volatile LONG *)this, 1, 0) )
      return;
    _mm_pause();
  }
  v3 = 4000;
  while ( --v3 >= 0 )
  {
    SwitchToThread();
    if ( !InterlockedCompareExchange((volatile LONG *)this, 1, 0) )
      return;
  }
  do
    Sleep(0x3E8u);
  while ( InterlockedCompareExchange((volatile LONG *)this, 1, 0) );
}

//----- (004235E0) --------------------------------------------------------
void __thiscall CIOCriticalSection::CIOCriticalSection(CIOCriticalSection *this)
{
  InitializeCriticalSection((LPCRITICAL_SECTION)this);
  *((_DWORD *)this + 7) = 0;
  *((_DWORD *)this + 6) = 0;
}

//----- (00423610) --------------------------------------------------------
void __usercall CIOCriticalSection::~CIOCriticalSection(CIOCriticalSection *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( *((_DWORD *)this + 6) )
    EBREAK(a2, a3, a4);
  DeleteCriticalSection((LPCRITICAL_SECTION)this);
}

//----- (00423640) --------------------------------------------------------
void __usercall CIOCriticalSection::Enter(CIOCriticalSection *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+8h] [ebp-4h]
  int vars0; // [esp+Ch] [ebp+0h]
  void *retaddr; // [esp+10h] [ebp+4h]

  if ( !TryEnterCriticalSection((LPCRITICAL_SECTION)this) )
    EnterCriticalSection((LPCRITICAL_SECTION)this);
  if ( *((_DWORD *)this + 6) )
  {
    ELOG("CIOCriticalSection::Enter EIP(%p %p)\n", *((_DWORD *)this + 6));
    EBREAK(a2, a3, a4);
  }
  v5 = *(_DWORD *)(vars0 + 4);
  *((_DWORD *)this + 6) = retaddr;
  *((_DWORD *)this + 7) = v5;
}
// 4236A5: variable 'vars0' is possibly undefined

//----- (004236D0) --------------------------------------------------------
void __usercall CIOCriticalSection::Leave(CIOCriticalSection *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( !*((_DWORD *)this + 6) )
    EBREAK(a2, a3, a4);
  *((_DWORD *)this + 7) = 0;
  *((_DWORD *)this + 6) = 0;
  LeaveCriticalSection((LPCRITICAL_SECTION)this);
}

//----- (00423710) --------------------------------------------------------
void CIOSocket::CInit::_CInit()
{
  CIOSocket::FreeIOThread();
  CIOBuffer::FreeAll();
}

//----- (00423730) --------------------------------------------------------
int __usercall CIOSocket::CreateIOThread@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int nThread)
{
  HANDLE v4; // eax
  int result; // eax
  int ArgList; // [esp+0h] [ebp-4h]

  v4 = GetCurrentProcess();
  SetProcessPriorityBoost(v4, 1);
  dword_4E0FD8 = 0;
  handle = CreateEventA(0, 0, 0, 0);
  ExistingCompletionPort = CreateIoCompletionPort((HANDLE)0xFFFFFFFF, 0, 0, 0);
  CIOSocket::CIOTimerInstance::OnTimerCallback((CIOSocket::CIOTimerInstance *)&unk_4E1020, 0);
  CIOObject::AddRef((CIOObject *)&unk_4E1020, a1, a2, a3, &pRef);
  if ( CIOObject::RegisterWait((CIOObject *)&unk_4E1020, a1, a2, a3, handle) )
  {
    hThread = (void **)CMemory::_malloc(4 * nThread);
    nThreadId = CMemory::_malloc(4 * nThread);
    ::nThread = (void *)nThread;
    for ( ArgList = 0; ArgList < nThread; ++ArgList )
      hThread[ArgList] = (void *)_beginthreadex(
                                   0,
                                   0,
                                   (_beginthreadex_proc_type)CIOSocket::IOThread,
                                   (void *)ArgList,
                                   0,
                                   (unsigned int *)nThreadId + ArgList);
    result = 1;
  }
  else
  {
    LOG_ERR("RegisterWait error for timer");
    result = 0;
  }
  return result;
}

//----- (00423840) --------------------------------------------------------
unsigned int __thiscall CIOSocket::AddIOThread(void *this)
{
  unsigned int ThrdAddr; // [esp+0h] [ebp-4h] BYREF

  ThrdAddr = (unsigned int)this;
  if ( !ExistingCompletionPort )
    return 0;
  hThread = (void **)CMemory::_realloc(hThread, 4 * (_DWORD)nThread + 4);
  nThreadId = CMemory::_realloc(nThreadId, 4 * (_DWORD)nThread + 4);
  hThread[(_DWORD)nThread] = (void *)_beginthreadex(
                                       0,
                                       0,
                                       (_beginthreadex_proc_type)CIOSocket::IOThread,
                                       nThread,
                                       0,
                                       &ThrdAddr);
  *((_DWORD *)nThreadId + (_DWORD)nThread) = ThrdAddr;
  nThread = (char *)nThread + 1;
  return ThrdAddr;
}

//----- (004238F0) --------------------------------------------------------
int __cdecl CIOSocket::CloseIOThread()
{
  if ( InterlockedExchange(&dword_4E0FD8, 1) )
    return 0;
  SetEvent(handle);
  return 1;
}

//----- (00423920) --------------------------------------------------------
void __cdecl CIOSocket::FreeIOThread()
{
  CMemory::_free(hThread);
  CMemory::_free(nThreadId);
  hThread = 0;
  nThreadId = 0;
}

//----- (00423960) --------------------------------------------------------
_DWORD *__thiscall std__locale__facet___facet(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = &off_4B457C;
  return result;
}
// 4B457C: using guessed type int (__stdcall *off_4B457C)(int);

//----- (00423980) --------------------------------------------------------
void __userpurge CIOObject::AddRef(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, volatile int *pRef)
{
  if ( InterlockedIncrement((volatile LONG *)this + 1) == 1 )
  {
    EBREAK(a2, a3, a4);
    *((_DWORD *)this + 1) = 100;
  }
  InterlockedIncrement(pRef);
}

//----- (004239C0) --------------------------------------------------------
void __userpurge CIOObject::Release(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, volatile int *pRef)
{
  LONG v6; // [esp+8h] [ebp-4h]

  if ( InterlockedDecrement(pRef) < 0 )
    goto LABEL_2;
  v6 = InterlockedDecrement((volatile LONG *)this + 1);
  if ( v6 <= 0 )
  {
    if ( v6 >= 0 )
    {
      if ( *pRef )
      {
LABEL_2:
        ELOG("CIOObject::Release %p %p %x %d\n", (char)this);
        EBREAK(a2, a3, a4);
        *pRef = 100;
        *((_DWORD *)this + 1) = 100;
        return;
      }
      (*(void (__thiscall **)(CIOObject *))(*(_DWORD *)this + 4))(this);
    }
    else
    {
      ELOG("CIOObject::Release %p %p %d\n", (char)this);
      EBREAK(a2, a3, a4);
      *((_DWORD *)this + 1) = 100;
    }
  }
}

//----- (00423AC0) --------------------------------------------------------
int __userpurge CIOObject::RegisterWait@<eax>(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, void *handle)
{
  int result; // eax

  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E0FE8, a2, a3, a4);
  if ( (int)nCount < 64 )
  {
    Handles[nCount] = handle;
    dword_4E0DD0[nCount++] = (int)this;
    SetEvent(::handle);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E0FE8, a2, a3, a4);
    result = 1;
  }
  else
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E0FE8, a2, a3, a4);
    result = 0;
  }
  return result;
}

//----- (00423B40) --------------------------------------------------------
void __userpurge CIOObject::AddTimer(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwTime, int nId)
{
  const CIOSocket::CIOTimer *v6; // eax
  char v8[12]; // [esp+4h] [ebp-Ch] BYREF
  unsigned int dwTimea; // [esp+18h] [ebp+8h]

  CIOObject::AddRef(this, a2, a3, a4, (volatile int *)this + 2);
  dwTimea = dwTime + GetTickCount();
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E0FE8, a2, a3, a4);
  CIOSocket::CIOTimer::CIOTimer((CIOSocket::CIOTimer *)v8, this, dwTimea, nId);
  std::priority_queue<CIOSocket::CIOTimer>::push((std::priority_queue<CIOSocket::CIOTimer> *)&unk_4E100C, v6);
  if ( (int)(dword_4E0FD0 - dwTimea) <= 0 )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E0FE8, a2, a3, a4);
  }
  else
  {
    dword_4E0FD0 = dwTimea;
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E0FE8, a2, a3, a4);
    SetEvent(handle);
  }
}
// 423B88: variable 'v6' is possibly undefined
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423BD0) --------------------------------------------------------
void __thiscall CIOSocket::CIOTimer::CIOTimer(CIOSocket::CIOTimer *this, CIOObject *pObject, unsigned int dwTime, int nId)
{
  *(_DWORD *)this = dwTime;
  *((_DWORD *)this + 1) = pObject;
  *((_DWORD *)this + 2) = nId;
}

//----- (00423C00) --------------------------------------------------------
void __userpurge CIOObject::OnTimerCallback(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int nId)
{
  if ( !PostQueuedCompletionStatus(ExistingCompletionPort, nId, (ULONG_PTR)this, 0) )
  {
    EBREAK(a2, a3, a4);
    CIOObject::Release((volatile int *)this, a2, a3, a4);
  }
}

//----- (00423C40) --------------------------------------------------------
void __userpurge CIOObject::OnIOCallback(CIOObject *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  if ( lpOverlapped )
    EBREAK(a2, a3, a4);
  (*(void (__thiscall **)(CIOObject *, unsigned int))(*(_DWORD *)this + 8))(this, dwTransferred);
  CIOObject::Release(this, a2, a3, a4, (volatile int *)this + 2);
}

//----- (00423C80) --------------------------------------------------------
void __thiscall CIOSocket::CIOTimerInstance::OnTimerCallback(CIOSocket::CIOTimerInstance *this, int nId)
{
  DWORD v2; // eax
  const CIOSocket::CIOTimer *v3; // eax
  char v5[12]; // [esp+4h] [ebp-Ch] BYREF

  v2 = GetTickCount();
  CIOSocket::CIOTimer::CIOTimer((CIOSocket::CIOTimer *)v5, this, v2 + 86400000, nId);
  std::priority_queue<CIOSocket::CIOTimer>::push((std::priority_queue<CIOSocket::CIOTimer> *)&unk_4E100C, v3);
  dword_4E0FD0 = *(_DWORD *)sub_424D50((std::vector<CIOSocket::CIOTimer> *)&unk_4E100C);
}
// 423CAB: variable 'v3' is possibly undefined
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423CD0) --------------------------------------------------------
void __thiscall CIOSocket::CIOTimerInstance::OnIOCallback(CIOSocket::CIOTimerInstance *this, int bSucess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  HANDLE v4; // eax

  if ( dwTransferred )
    CIOObject::PostObject((CIOObject *)&unk_4E1020, dwTransferred - 1);
  else
    SetEvent(handle);
  v4 = GetCurrentThread();
  SuspendThread(v4);
}

//----- (00423D10) --------------------------------------------------------
unsigned int __userpurge CIOSocket::WaitThread@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *__formal)
{
  CIOSocket::CIOTimer *v4; // eax
  CIOSocket::CIOTimer *v5; // eax
  CIOSocket::CIOTimer *v7; // [esp+4h] [ebp-18h]
  int v8; // [esp+8h] [ebp-14h]
  int i; // [esp+Ch] [ebp-10h]
  int dwMilliseconds; // [esp+10h] [ebp-Ch]
  DWORD v11; // [esp+14h] [ebp-8h]
  DWORD v12; // [esp+18h] [ebp-4h]

  while ( 1 )
  {
    v11 = GetTickCount();
    dwMilliseconds = dword_4E0FD0 - v11;
    if ( (int)(dword_4E0FD0 - v11) <= 0 )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E0FE8, a1, a2, a3);
      v7 = sub_424D50((std::vector<CIOSocket::CIOTimer> *)&unk_4E100C);
      v8 = *((_DWORD *)v7 + 1);
      for ( i = *((_DWORD *)v7 + 2); ; i = *((_DWORD *)v7 + 2) )
      {
        std::priority_queue<CIOSocket::CIOTimer>::pop((std::priority_queue<CIOSocket::CIOTimer> *)&unk_4E100C);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v8 + 12))(v8, i);
        v4 = sub_424D50((std::vector<CIOSocket::CIOTimer> *)&unk_4E100C);
        *(_DWORD *)v7 = *(_DWORD *)v4;
        *((_DWORD *)v7 + 1) = *((_DWORD *)v4 + 1);
        *((_DWORD *)v7 + 2) = *((_DWORD *)v4 + 2);
        dwMilliseconds = *(_DWORD *)v7 - v11;
        if ( dwMilliseconds > 0 )
          break;
        v8 = *((_DWORD *)v7 + 1);
      }
      dword_4E0FD0 = *(_DWORD *)v7;
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E0FE8, a1, a2, a3);
    }
    v12 = WaitForMultipleObjects(nCount, Handles, 0, dwMilliseconds);
    if ( dword_4E0FD8 )
      break;
    if ( v12 < nCount )
      (*(void (__thiscall **)(int))(*(_DWORD *)dword_4E0DD0[v12] + 16))(dword_4E0DD0[v12]);
  }
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E0FE8, a1, a2, a3);
  while ( !sub_424D30((std::vector<CIOSocket::CIOTimer> *)&unk_4E100C) )
  {
    v5 = sub_424D50((std::vector<CIOSocket::CIOTimer> *)&unk_4E100C);
    CIOObject::Release(*((CIOObject **)v5 + 1), a1, a2, a3, (volatile int *)(*((_DWORD *)v5 + 1) + 8));
    std::priority_queue<CIOSocket::CIOTimer>::pop((std::priority_queue<CIOSocket::CIOTimer> *)&unk_4E100C);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E0FE8, a1, a2, a3);
  CIOObject::PostObject((CIOObject *)&unk_4E1020, (int)nThread - 1);
  WaitForSingleObject(handle, 0xFFFFFFFF);
  CloseHandle(handle);
  return 0;
}
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423EC0) --------------------------------------------------------
void __stdcall __noreturn CIOSocket::IOThread(void *arglist)
{
  HANDLE v1; // eax
  unsigned int CompletionKey; // [esp+0h] [ebp-10h] BYREF
  BOOL v3; // [esp+4h] [ebp-Ch]
  DWORD NumberOfBytesTransferred; // [esp+8h] [ebp-8h] BYREF
  LPOVERLAPPED Overlapped; // [esp+Ch] [ebp-4h] BYREF

  v1 = GetCurrentThread();
  SetThreadIdealProcessor(v1, 0x20u);
  while ( 1 )
  {
    v3 = GetQueuedCompletionStatus(
           ExistingCompletionPort,
           &NumberOfBytesTransferred,
           &CompletionKey,
           &Overlapped,
           0xFFFFFFFF);
    InterlockedIncrement(&dword_4E0FDC);
    (*(void (__thiscall **)(unsigned int, BOOL, DWORD, LPOVERLAPPED))(*(_DWORD *)CompletionKey + 20))(
      CompletionKey,
      v3,
      NumberOfBytesTransferred,
      Overlapped);
    InterlockedDecrement(&dword_4E0FDC);
  }
}

//----- (00423F30) --------------------------------------------------------
void __cdecl CIOSocket::DumpStack()
{
  CIOException::DumpStack((int)nThread, hThread, (unsigned int *)nThreadId);
  CIOException::SendMail();
}

//----- (00423F90) --------------------------------------------------------
CMemory **__cdecl CIOBuffer::Alloc()
{
  char v0; // al
  CMemory **v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  v0 = InterlockedIncrement(&dword_4D5B84);
  v3 = 8 * (v0 & 0xF) + 5115952;
  CIOSpinLock::Enter((CIOSpinLock *)(8 * (v0 & 0xF) + 5115956));
  v2 = *(CMemory ***)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = v2[2002];
    CIOSpinLock::Leave((volatile LONG *)(v3 + 4));
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)(v3 + 4));
    v2 = operator_new(0x1F4Cu);
  }
  v2[2000] = 0;
  v2[2001] = (CMemory *)1;
  v2[2002] = 0;
  return v2;
}

//----- (00424040) --------------------------------------------------------
void __thiscall CIOBuffer::Free(CIOBuffer *this)
{
  char v1; // al
  int v3; // [esp+4h] [ebp-4h]

  v1 = InterlockedDecrement(&dword_4E0FE4);
  v3 = 8 * (v1 & 0xF) + 5115952;
  CIOSpinLock::Enter((CIOSpinLock *)(8 * (v1 & 0xF) + 5115956));
  *((_DWORD *)this + 2002) = *(_DWORD *)v3;
  *(_DWORD *)v3 = this;
  CIOSpinLock::Leave((volatile LONG *)(v3 + 4));
}

//----- (004240A0) --------------------------------------------------------
void __cdecl CIOBuffer::FreeAll()
{
  _DWORD *v0; // [esp+8h] [ebp-8h]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i < 16; ++i )
  {
    CIOSpinLock::Enter((CIOSpinLock *)(8 * i + 5115956));
    while ( 1 )
    {
      v0 = (_DWORD *)dword_4E1030[2 * i];
      if ( !v0 )
        break;
      dword_4E1030[2 * i] = v0[2002];
      operator_delete(v0);
    }
    CIOSpinLock::Leave((volatile LONG *)(8 * i + 5115956));
  }
}

//----- (00424120) --------------------------------------------------------
int __userpurge CIOSocket::CIOSocket@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  CIOObject::CIOObject((CIOObject *)a1);
  *(_DWORD *)a1 = &off_4B6624;
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(a1 + 20));
  *(_DWORD *)(a1 + 16) = a5;
  if ( *(_DWORD *)(a1 + 16) != -1 )
    CIOObject::AddRef((volatile int *)a1, a2, a3, a4);
  memset((void *)(a1 + 52), 0, 0x14u);
  memset((void *)(a1 + 72), 0, 0x14u);
  *(_DWORD *)(a1 + 92) = CIOBuffer::Alloc();
  *(_DWORD *)(a1 + 104) = 0;
  *(_DWORD *)(a1 + 100) = 0;
  *(_DWORD *)(a1 + 96) = 0;
  return a1;
}
// 4B6624: using guessed type int (__stdcall *off_4B6624)(int);

//----- (004241C0) --------------------------------------------------------
void *__thiscall CIOSocket::_scalar_deleting_destructor_(void *this, char a2)
{
  void *v3; // [esp+0h] [ebp-4h]

  CIOSocket::_CIOSocket(this, this);
  if ( (a2 & 1) != 0 )
    operator_delete(v3);
  return v3;
}
// 4241DB: variable 'v3' is possibly undefined
// 4241F0: using guessed type int __thiscall CIOSocket::_CIOSocket(_DWORD, _DWORD);

//----- (004241F0) --------------------------------------------------------
_DWORD *__usercall CIOSocket::_CIOSocket@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOBuffer *v6; // [esp+4h] [ebp-4h]

  *(_DWORD *)a1 = &off_4B6624;
  CIOBuffer::Release(*(CIOBuffer **)(a1 + 92));
  while ( *(_DWORD *)(a1 + 96) )
  {
    v6 = *(CIOBuffer **)(a1 + 96);
    *(_DWORD *)(a1 + 96) = *((_DWORD *)v6 + 2002);
    CIOBuffer::Free(v6);
  }
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(a1 + 20), a2, a3, a4);
  return std__locale__facet___facet((_DWORD *)a1);
}
// 4B6624: using guessed type int (__stdcall *off_4B6624)(int);

//----- (00424260) --------------------------------------------------------
void __usercall CIOSocket::Close(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  char optval[2]; // [esp+4h] [ebp-8h] BYREF
  __int16 v6; // [esp+6h] [ebp-6h]
  SOCKET s; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter((CIOSocket *)((char *)this + 20), a2, a3, a4);
  s = InterlockedExchange((volatile LONG *)this + 4, -1);
  CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
  if ( s != -1 )
  {
    (*(void (__thiscall **)(CIOSocket *))(*(_DWORD *)this + 28))(this);
    *(_WORD *)optval = 1;
    v6 = 0;
    setsockopt(s, 0xFFFF, 128, optval, 4);
    closesocket(s);
    CIOObject::Release((volatile int *)this, a2, a3, a4);
  }
}

//----- (004242E0) --------------------------------------------------------
void __usercall CIOSocket::GracefulClose(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  LONG s; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOSocket *)((char *)this + 20), a2, a3, a4);
  s = InterlockedExchange((volatile LONG *)this + 4, -1);
  CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
  if ( s != -1 )
  {
    (*(void (__thiscall **)(CIOSocket *))(*(_DWORD *)this + 28))(this);
    closesocket(s);
    CIOObject::Release((volatile int *)this, a2, a3, a4);
  }
}

//----- (00424340) --------------------------------------------------------
void __thiscall CIOSocket::OnIOCallback(CIOSocket *this, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  if ( bSuccess )
  {
    if ( lpOverlapped == (_OVERLAPPED *)((char *)this + 72) )
    {
      CIOSocket::WriteCallback(this, dwTransferred);
      CIOObject::Release((volatile int *)this);
    }
    else if ( lpOverlapped == (_OVERLAPPED *)((char *)this + 52) )
    {
      CIOSocket::ReadCallback(this, dwTransferred);
      CIOObject::Release((volatile int *)this);
    }
    else
    {
      (*(void (__thiscall **)(CIOSocket *, unsigned int))(*(_DWORD *)this + 8))(this, dwTransferred);
      CIOObject::Release(this, (volatile int *)this + 2);
    }
  }
  else
  {
    if ( lpOverlapped == (_OVERLAPPED *)((char *)this + 52) )
      CIOSocket::Close(this);
    CIOObject::Release((volatile int *)this);
  }
}

//----- (004243D0) --------------------------------------------------------
void __thiscall CIOSocket::OnCreate(CIOSocket *this)
{
  CIOSocket::Read(this, 0);
}

//----- (004243F0) --------------------------------------------------------
void __userpurge CIOSocket::ReadCallback(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwTransferred)
{
  if ( dwTransferred )
  {
    *(_DWORD *)(*((_DWORD *)this + 23) + 8000) += dwTransferred;
    (*(void (__thiscall **)(CIOSocket *))(*(_DWORD *)this + 32))(this);
  }
  else
  {
    CIOSocket::Close(this, a2, a3, a4);
  }
}

//----- (00424440) --------------------------------------------------------
void __userpurge CIOSocket::Read(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwLeft)
{
  DWORD v6; // [esp+4h] [ebp-18h]
  CMemory **v7; // [esp+8h] [ebp-14h]
  DWORD NumberOfBytesRecvd; // [esp+Ch] [ebp-10h] BYREF
  struct _WSABUF Buffers; // [esp+10h] [ebp-Ch] BYREF
  DWORD Flags; // [esp+18h] [ebp-4h] BYREF

  *(_DWORD *)(*((_DWORD *)this + 23) + 8000) -= dwLeft;
  if ( *(_DWORD *)(*((_DWORD *)this + 23) + 8004) == 1 )
  {
    memcpy_0(
      *((void **)this + 23),
      (const void *)(*(_DWORD *)(*((_DWORD *)this + 23) + 8000) + *((_DWORD *)this + 23)),
      dwLeft);
  }
  else
  {
    v7 = CIOBuffer::Alloc();
    memcpy(v7, (const void *)(*(_DWORD *)(*((_DWORD *)this + 23) + 8000) + *((_DWORD *)this + 23)), dwLeft);
    CIOBuffer::Release(*((CIOBuffer **)this + 23));
    *((_DWORD *)this + 23) = v7;
  }
  *(_DWORD *)(*((_DWORD *)this + 23) + 8000) = dwLeft;
  CIOObject::AddRef((volatile int *)this, a2, a3, a4);
  Buffers.len = 8000 - *(_DWORD *)(*((_DWORD *)this + 23) + 8000);
  Buffers.buf = (CHAR *)(*(_DWORD *)(*((_DWORD *)this + 23) + 8000) + *((_DWORD *)this + 23));
  Flags = 0;
  CIOCriticalSection::Enter((CIOSocket *)((char *)this + 20), a2, a3, a4);
  if ( !WSARecv(
          *((_DWORD *)this + 4),
          &Buffers,
          1u,
          &NumberOfBytesRecvd,
          &Flags,
          (LPWSAOVERLAPPED)((char *)this + 52),
          0)
    || GetLastError() == 997 )
  {
    CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
  }
  else
  {
    v6 = GetLastError();
    CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
    if ( v6 != 10038 && v6 != 10054 && v6 != 10053 && v6 != 10058 )
      LOG_ERR("CIOSocket::Read %x(%x) err = %d", *((_DWORD *)this + 4), this, v6);
    CIOSocket::Close(this, a2, a3, a4);
    CIOObject::Release((volatile int *)this, a2, a3, a4);
  }
}

//----- (004245E0) --------------------------------------------------------
void __userpurge CIOSocket::WriteCallback(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int dwTransferred)
{
  DWORD v6; // [esp+4h] [ebp-14h]
  struct _WSABUF Buffers; // [esp+8h] [ebp-10h] BYREF
  DWORD NumberOfBytesSent; // [esp+10h] [ebp-8h] BYREF
  CIOBuffer *v9; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOSocket *)((char *)this + 20), a2, a3, a4);
  if ( dwTransferred == *(_DWORD *)(*((_DWORD *)this + 24) + 8000) )
  {
    *((_DWORD *)this + 26) -= *(_DWORD *)(*((_DWORD *)this + 24) + 8000);
    v9 = (CIOBuffer *)*((_DWORD *)this + 24);
    *((_DWORD *)this + 24) = *(_DWORD *)(*((_DWORD *)this + 24) + 8008);
    if ( *((_DWORD *)this + 24) )
    {
      CIOObject::AddRef((volatile int *)this, a2, a3, a4);
      Buffers.len = *(_DWORD *)(*((_DWORD *)this + 24) + 8000);
      Buffers.buf = (CHAR *)*((_DWORD *)this + 24);
      if ( !WSASend(*((_DWORD *)this + 4), &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)((char *)this + 72), 0)
        || GetLastError() == 997 )
      {
        CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
      }
      else
      {
        v6 = GetLastError();
        CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
        if ( v6 != 10038 && v6 != 10054 && v6 != 10053 && v6 != 10058 )
          LOG_ERR("CIOSocket::WriteCallback %x(%x) err=%d", *((_DWORD *)this + 4), this, v6);
        CIOObject::Release((volatile int *)this, a2, a3, a4);
      }
    }
    else
    {
      *((_DWORD *)this + 25) = 0;
      CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
    }
    CIOBuffer::Free(v9);
  }
  else
  {
    LOG_ERR(
      "different write count %x(%x) %d != %d",
      *((_DWORD *)this + 4),
      this,
      dwTransferred,
      *(_DWORD *)(*((_DWORD *)this + 24) + 8000));
    CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
  }
}

//----- (00424760) --------------------------------------------------------
void __userpurge CIOSocket::Write(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOBuffer *pBuffer)
{
  DWORD v6; // [esp+4h] [ebp-10h]
  struct _WSABUF Buffers; // [esp+8h] [ebp-Ch] BYREF
  DWORD NumberOfBytesSent; // [esp+10h] [ebp-4h] BYREF

  if ( *((_DWORD *)pBuffer + 2000) )
  {
    if ( *((_DWORD *)pBuffer + 2000) > 0x1F40u )
      EBREAK(a2, a3, a4);
    CIOCriticalSection::Enter((CIOSocket *)((char *)this + 20), a2, a3, a4);
    *((_DWORD *)this + 26) += *((_DWORD *)pBuffer + 2000);
    if ( *((_DWORD *)this + 25) )
    {
      if ( *((_DWORD *)this + 24) == *((_DWORD *)this + 25)
        || (unsigned int)(*((_DWORD *)pBuffer + 2000) + *(_DWORD *)(*((_DWORD *)this + 25) + 8000)) > 0x1F40 )
      {
        *(_DWORD *)(*((_DWORD *)this + 25) + 8008) = pBuffer;
        *((_DWORD *)this + 25) = pBuffer;
        CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
      }
      else
      {
        memcpy(
          (void *)(*(_DWORD *)(*((_DWORD *)this + 25) + 8000) + *((_DWORD *)this + 25)),
          pBuffer,
          *((_DWORD *)pBuffer + 2000));
        *(_DWORD *)(*((_DWORD *)this + 25) + 8000) += *((_DWORD *)pBuffer + 2000);
        CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
        CIOBuffer::Free(pBuffer);
      }
    }
    else
    {
      *((_DWORD *)this + 25) = pBuffer;
      *((_DWORD *)this + 24) = pBuffer;
      CIOObject::AddRef((volatile int *)this, a2, a3, a4);
      Buffers.len = *((_DWORD *)pBuffer + 2000);
      Buffers.buf = (CHAR *)pBuffer;
      if ( !WSASend(*((_DWORD *)this + 4), &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)((char *)this + 72), 0)
        || GetLastError() == 997 )
      {
        CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
      }
      else
      {
        v6 = GetLastError();
        CIOCriticalSection::Leave((CIOSocket *)((char *)this + 20), a2, a3, a4);
        if ( v6 != 10038 && v6 != 10054 && v6 != 10053 && v6 != 10058 )
          LOG_ERR("CIOSocket::Write %x(%x) err=%d", *((_DWORD *)this + 4), this, v6);
        CIOObject::Release((volatile int *)this, a2, a3, a4);
      }
    }
  }
  else
  {
    CIOBuffer::Free(pBuffer);
  }
}

//----- (00424950) --------------------------------------------------------
void __thiscall CIOServer::CIOServer(CIOServer *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B66D8;
  *((_DWORD *)this + 4) = -1;
  *((_DWORD *)this + 5) = 0;
}
// 4B66D8: using guessed type int (__stdcall *off_4B66D8)(char a2);

//----- (00424990) --------------------------------------------------------
int __thiscall CIOServer::_scalar_deleting_destructor_(void *this, char a2)
{
  std::numpunct<char>::~numpunct<char>((std::numpunct<char> *)this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return (int)this;
}

//----- (004249C0) --------------------------------------------------------
void __thiscall std::numpunct<char>::~numpunct<char>(std::numpunct<char> *this)
{
  *(_DWORD *)this = &off_4B66D8;
  CIOServer::Close(this);
  std__locale__facet___facet(this);
}
// 4B66D8: using guessed type int (__stdcall *off_4B66D8)(char a2);

//----- (004249F0) --------------------------------------------------------
void __thiscall CIOServer::Close(CIOServer *this)
{
  if ( *((_DWORD *)this + 4) != -1 )
  {
    closesocket(*((_DWORD *)this + 4));
    *((_DWORD *)this + 4) = -1;
  }
  if ( *((_DWORD *)this + 5) )
  {
    WSACloseEvent(*((HANDLE *)this + 5));
    *((_DWORD *)this + 5) = 0;
  }
}

//----- (00424A40) --------------------------------------------------------
int __userpurge CIOServer::Start@<eax>(CIOServer *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int nPort)
{
  int v5; // eax
  int v7; // eax
  int v8; // eax
  struct sockaddr name; // [esp+4h] [ebp-14h] BYREF
  int v11; // [esp+14h] [ebp-4h]

  v11 = dword_4D9830;
  *((_DWORD *)this + 4) = socket(2, 1, 0);
  if ( *((_DWORD *)this + 4) == -1 )
  {
    v5 = WSAGetLastError();
    LOG_ERR("socket error %d", v5);
    return 0;
  }
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = htonl(0);
  *(_WORD *)name.sa_data = htons(nPort);
  if ( bind(*((_DWORD *)this + 4), &name, 16) )
  {
    v7 = WSAGetLastError();
    LOG_ERR("bind error %d", v7);
  }
  else if ( listen(*((_DWORD *)this + 4), 5) )
  {
    v8 = WSAGetLastError();
    LOG_ERR("listen error %d", v8);
  }
  else
  {
    *((_DWORD *)this + 5) = WSACreateEvent();
    WSAEventSelect(*((_DWORD *)this + 4), *((HANDLE *)this + 5), 8);
    if ( CIOObject::RegisterWait(this, a2, a3, a4, *((void **)this + 5)) )
      return 1;
    LOG_ERR("RegisterWait error on port %d", nPort);
  }
  CIOServer::Close(this);
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00424B70) --------------------------------------------------------
void __thiscall CIOServer::OnWaitCallback(CIOServer *this)
{
  WSAResetEvent(*((HANDLE *)this + 5));
  PostQueuedCompletionStatus(ExistingCompletionPort, 0, (ULONG_PTR)this, 0);
}

//----- (00424BA0) --------------------------------------------------------
void __thiscall CIOServer::Stop(CIOServer *this)
{
  SOCKET s; // [esp+4h] [ebp-4h]

  s = *((_DWORD *)this + 4);
  *((_DWORD *)this + 4) = -1;
  closesocket(s);
}

//----- (00424BD0) --------------------------------------------------------
void __userpurge CIOServer::OnIOCallback(CIOServer *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int bSuccess, unsigned int dwTransferred, _OVERLAPPED *lpOverlapped)
{
  int v7; // eax
  struct sockaddr addr; // [esp+4h] [ebp-20h] BYREF
  int v10; // [esp+14h] [ebp-10h]
  CIOSocket *v11; // [esp+18h] [ebp-Ch]
  int addrlen; // [esp+1Ch] [ebp-8h] BYREF
  SOCKET s; // [esp+20h] [ebp-4h]

  v10 = dword_4D9830;
  addrlen = 16;
  s = accept(*((_DWORD *)this + 4), &addr, &addrlen);
  if ( s == -1 )
  {
    if ( WSAGetLastError() != 10035 && *((_DWORD *)this + 4) != -1 )
    {
      v7 = WSAGetLastError();
      LOG_ERR("accept error: %d", v7);
    }
  }
  else
  {
    v11 = (CIOSocket *)(*(int (__thiscall **)(CIOServer *, SOCKET, struct sockaddr *))(*(_DWORD *)this + 24))(
                         this,
                         s,
                         &addr);
    if ( v11 )
    {
      CIOSocket::Initialize(v11, a2, a3, a4);
      CIOObject::Release((volatile int *)v11, a2, a3, a4);
    }
    else
    {
      closesocket(s);
    }
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00424C80) --------------------------------------------------------
void __usercall CIOSocket::Initialize(CIOSocket *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  char v4; // al
  char optval[4]; // [esp+4h] [ebp-4h] BYREF

  if ( CreateIoCompletionPort(*((HANDLE *)this + 4), ExistingCompletionPort, (ULONG_PTR)this, 0) )
  {
    *(_DWORD *)optval = 0;
    setsockopt(*((_DWORD *)this + 4), 0xFFFF, 4098, optval, 4);
    *(_DWORD *)optval = 0;
    setsockopt(*((_DWORD *)this + 4), 0xFFFF, 4097, optval, 4);
    (*(void (__thiscall **)(CIOSocket *))(*(_DWORD *)this + 24))(this);
  }
  else
  {
    v4 = GetLastError();
    ELOG("CreateIoCompletionPort: %d %x %x\n", v4);
    CIOSocket::Close(this, a2, a3, a4);
  }
}

//----- (00424D30) --------------------------------------------------------
BOOL __thiscall sub_424D30(std::vector<CIOSocket::CIOTimer> *this)
{
  return sub_445B60(this);
}

//----- (00424D50) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall sub_424D50(std::vector<CIOSocket::CIOTimer> *this)
{
  return std::vector<CIOSocket::CIOTimer>::front(this);
}

//----- (00424D70) --------------------------------------------------------
void __thiscall std::priority_queue<CIOSocket::CIOTimer>::push(std::priority_queue<CIOSocket::CIOTimer> *this, const CIOSocket::CIOTimer *_Pred)
{
  int *v2; // eax
  int v3; // [esp-8h] [ebp-14h]
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  sub_424E30((int)this, _Pred);
  v3 = *(_DWORD *)sub_445B40(this, (int)v6);
  v2 = (int *)sub_430C20((int *)this, v5);
  std::push_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(*v2, v3);
}

//----- (00424DC0) --------------------------------------------------------
void __thiscall std::priority_queue<CIOSocket::CIOTimer>::pop(std::priority_queue<CIOSocket::CIOTimer> *this)
{
  int *v1; // eax
  int v2; // [esp-8h] [ebp-14h]
  char v3; // [esp-4h] [ebp-10h]
  char v5[4]; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = *((_BYTE *)this + 16);
  v2 = *(_DWORD *)sub_445B40(this, (int)v6);
  v1 = (int *)sub_430C20((int *)this, v5);
  std::pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(*v1, v2, v3);
  std::vector<CIOSocket::CIOTimer>::pop_back(this);
}

//----- (00424E10) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall std::vector<CIOSocket::CIOTimer>::front(std::vector<CIOSocket::CIOTimer> *this)
{
  void *v1; // eax
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  v1 = sub_430C20((int *)this, v3);
  return (CIOSocket::CIOTimer *)sub_420010(v1);
}

//----- (00424E30) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall sub_424E30(int this, CIOSocket::CIOTimer *_Val)
{
  unsigned int v2; // esi
  CIOSocket::CIOTimer *result; // eax
  CIOSocket::CIOTimer **v4; // eax
  int v6; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
  if ( v2 >= std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = (CIOSocket::CIOTimer **)sub_445B40((_DWORD *)this, (int)v7);
    result = (CIOSocket::CIOTimer *)sub_424EF0((int *)this, &v6, *v4, (int *)_Val);
  }
  else
  {
    result = std::vector<CIOSocket::CIOTimer>::_Ufill(
               (std::vector<CIOSocket::CIOTimer> *)this,
               *(CIOSocket::CIOTimer **)(this + 8),
               1u,
               _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00424EA0) --------------------------------------------------------
void __thiscall std::vector<CIOSocket::CIOTimer>::pop_back(std::vector<CIOSocket::CIOTimer> *this)
{
  if ( !sub_445B60(this) )
  {
    std::vector<CIOSocket::CIOTimer>::_Destroy(
      this,
      (CIOSocket::CIOTimer *)(*((_DWORD *)this + 2) - 12),
      *((CIOSocket::CIOTimer **)this + 2));
    *((_DWORD *)this + 2) -= 12;
  }
}

//----- (00424EF0) --------------------------------------------------------
_DWORD *__thiscall sub_424EF0(int *this, _DWORD *a2, CIOSocket::CIOTimer *a3, int *a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = sub_430C20(this, v11);
    v8 = sub_431D50((int *)&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_424FA0((int)this, a3, 1u, a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, v10);
  sub_446FA0(v5, a2, v7);
  return a2;
}

//----- (00424F70) --------------------------------------------------------
void __thiscall std::vector<CIOSocket::CIOTimer>::_Destroy(std::vector<CIOSocket::CIOTimer> *this, CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last)
{
  std::_Destroy_range<CIOSocket::CIOTimer>(_First, _Last);
}

//----- (00424FA0) --------------------------------------------------------
void __thiscall sub_424FA0(int this, CIOSocket::CIOTimer *a2, unsigned int _Count, int *a4)
{
  unsigned int v4; // esi
  CIOSocket::CIOTimer *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-24h]
  CIOSocket::CIOTimer *_Dest; // [esp+Ch] [ebp-1Ch]
  CMemory **_First; // [esp+10h] [ebp-18h]
  CIOSocket::CIOTimer *_Ptr; // [esp+14h] [ebp-14h]
  unsigned int v11; // [esp+18h] [ebp-10h]
  int v12; // [esp+18h] [ebp-10h]
  int v13[3]; // [esp+1Ch] [ebp-Ch] BYREF
  unsigned int _Counta; // [esp+34h] [ebp+Ch]

  v13[0] = *a4;
  v13[1] = a4[1];
  v13[2] = a4[2];
  v11 = std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this);
  if ( _Count )
  {
    v4 = sub_446800((std::allocator<CIOSocket::CIOTimer> *)this);
    if ( v4 - std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) >= _Count )
    {
      if ( v11 >= _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) / 12 >= _Count )
        {
          _Dest = *(CIOSocket::CIOTimer **)(this + 8);
          *(_DWORD *)(this + 8) = sub_4474B0((int)_Dest - 12 * _Count, (int)_Dest, _Dest);
          std::copy_backward<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(
            a2,
            (CIOSocket::CIOTimer *)((char *)_Dest - 12 * _Count),
            _Dest);
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)((char *)a2 + 12 * _Count),
            (const CIOSocket::CIOTimer *)v13);
        }
        else
        {
          sub_4474B0((int)a2, *(_DWORD *)(this + 8), (char *)a2 + 12 * _Count);
          std::vector<CIOSocket::CIOTimer>::_Ufill(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 8),
            _Count - (*(_DWORD *)(this + 8) - (int)a2) / 12,
            (const CIOSocket::CIOTimer *)v13);
          *(_DWORD *)(this + 8) += 12 * _Count;
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)(*(_DWORD *)(this + 8) - 12 * _Count),
            (const CIOSocket::CIOTimer *)v13);
        }
      }
      else
      {
        if ( sub_446800((std::allocator<CIOSocket::CIOTimer> *)this) - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
          v12 = _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        _First = sub_446B40(v12);
        v5 = sub_4474B0(*(_DWORD *)(this + 4), (int)a2, _First);
        _Ptr = std::vector<CIOSocket::CIOTimer>::_Ufill(
                 (std::vector<CIOSocket::CIOTimer> *)this,
                 v5,
                 _Count,
                 (const CIOSocket::CIOTimer *)v13);
        sub_4474B0((int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          std::vector<CIOSocket::CIOTimer>::_Destroy(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 4),
            *(CIOSocket::CIOTimer **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) / 12);
        }
        *(_DWORD *)(this + 12) = &_First[3 * v12];
        *(_DWORD *)(this + 8) = &_First[3 * _Counta];
        *(_DWORD *)(this + 4) = _First;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (00425280) --------------------------------------------------------
int __thiscall sub_425280(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) / 12;
}

//----- (004252A0) --------------------------------------------------------
_DWORD *__cdecl std::push_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2)
{
  _DWORD *result; // eax
  int *v3; // eax

  result = (_DWORD *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                       (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
                       (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
  if ( (_BYTE)result )
  {
    sub_4253C0();
    sub_4253C0();
    v3 = sub_4253A0(&a2);
    result = std::_Push_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
               a1,
               *v3);
  }
  return result;
}

//----- (004252F0) --------------------------------------------------------
int __cdecl std::pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,std::less<CIOSocket::CIOTimer>>(int a1, int a2, char a3)
{
  int result; // eax
  int v4; // eax
  int v5; // edx

  result = sub_431D50(&a2, &a1);
  if ( result > 1 )
  {
    v4 = sub_4253C0();
    LOBYTE(v5) = a3;
    result = (int)std::_Pop_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
                    a1,
                    a2,
                    v5,
                    v4);
  }
  return result;
}
// 42531D: variable 'v5' is possibly undefined

//----- (00425330) --------------------------------------------------------
void __cdecl std::_Uninitialized_fill_n<CIOSocket::CIOTimer *,unsigned int,CIOSocket::CIOTimer,std::allocator<CIOSocket::CIOTimer>>(CIOSocket::CIOTimer *_First, unsigned int _Count, const CIOSocket::CIOTimer *_Val)
{
  unknown_libname_14(&_First, &_First);
  sub_431E90(_First, _Count, (int)_Val);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (00425370) --------------------------------------------------------
void __cdecl std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, const CIOSocket::CIOTimer *_Val)
{
  while ( _First != _Last )
  {
    *(_DWORD *)_First = *(_DWORD *)_Val;
    *((_DWORD *)_First + 1) = *((_DWORD *)_Val + 1);
    *((_DWORD *)_First + 2) = *((_DWORD *)_Val + 2);
    _First = (CIOSocket::CIOTimer *)((char *)_First + 12);
  }
}

//----- (004253A0) --------------------------------------------------------
_DWORD *__thiscall sub_4253A0(_DWORD *this)
{
  *this -= 12;
  return this;
}

//----- (004253C0) --------------------------------------------------------
int sub_4253C0()
{
  return 0;
}

//----- (004253D0) --------------------------------------------------------
_DWORD *__cdecl std::_Push_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2)
{
  _DWORD *result; // eax
  int *v3; // eax
  int v4; // [esp+Ch] [ebp-4h]

  result = (_DWORD *)sub_431D50(&a2, &a1);
  v4 = (int)result;
  if ( (int)result > 0 )
  {
    v3 = (int *)sub_420010(&a2);
    result = std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
               a1,
               v4,
               0,
               *v3,
               v3[1],
               v3[2]);
  }
  return result;
}

//----- (00425440) --------------------------------------------------------
_DWORD *std::_Pop_heap_0<std::vector<CIOSocket::CIOTimer>::iterator,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, ...)
{
  std::vector<CIOSocket::CIOTimer>::iterator *v1; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp-18h] [ebp-30h]
  int v6; // [esp-14h] [ebp-2Ch]
  int v7; // [esp-10h] [ebp-28h]
  int v8; // [esp-Ch] [ebp-24h]
  char v9[4]; // [esp+0h] [ebp-18h] BYREF
  char v10[4]; // [esp+4h] [ebp-14h] BYREF
  char v11[4]; // [esp+8h] [ebp-10h] BYREF
  int v12; // [esp+Ch] [ebp-Ch]
  int v13; // [esp+10h] [ebp-8h]
  int v14; // [esp+14h] [ebp-4h]
  va_list va; // [esp+24h] [ebp+Ch] BYREF

  va_start(va, a1);
  v1 = std::vector<CIOSocket::CIOTimer>::iterator::operator+(
         (std::vector<CIOSocket::CIOTimer>::iterator *)va,
         (std::vector<CIOSocket::CIOTimer>::iterator *)v11,
         1);
  v2 = (int *)sub_420010(v1);
  v12 = *v2;
  v13 = v2[1];
  v14 = v2[2];
  sub_4253C0();
  v6 = v12;
  v7 = v13;
  v8 = v14;
  v5 = *(_DWORD *)std::vector<CIOSocket::CIOTimer>::iterator::operator+(
                    (std::vector<CIOSocket::CIOTimer>::iterator *)va,
                    (std::vector<CIOSocket::CIOTimer>::iterator *)v10,
                    1);
  v3 = (int *)std::vector<CIOSocket::CIOTimer>::iterator::operator+(
                (std::vector<CIOSocket::CIOTimer>::iterator *)va,
                (std::vector<CIOSocket::CIOTimer>::iterator *)v9,
                1);
  return std::_Pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
           a1,
           *v3,
           v5,
           v6,
           v7,
           v8);
}

//----- (004254E0) --------------------------------------------------------
_DWORD *__cdecl std::_Copy_backward_opt<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  while ( a1 != a2 )
  {
    a2 -= 3;
    a3 -= 3;
    *a3 = *a2;
    a3[1] = a2[1];
    a3[2] = a2[2];
  }
  return a3;
}

//----- (00425520) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall std::vector<CIOSocket::CIOTimer>::iterator::operator+(std::vector<CIOSocket::CIOTimer>::iterator *this, std::vector<CIOSocket::CIOTimer>::iterator *result, int _Off)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *(_DWORD *)this;
  *(_DWORD *)result = *(_DWORD *)sub_425550((std::vector<CIOSocket::CIOTimer>::iterator *)&v4, _Off);
  return result;
}

//----- (00425550) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall sub_425550(std::vector<CIOSocket::CIOTimer>::iterator *this, int a2)
{
  return std::vector<CIOSocket::CIOTimer>::iterator::operator+=(this, -a2);
}

//----- (00425570) --------------------------------------------------------
_DWORD *__cdecl std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *result; // eax
  int v14; // [esp+4h] [ebp-14h] BYREF
  int v15; // [esp+8h] [ebp-10h] BYREF
  int v16; // [esp+Ch] [ebp-Ch] BYREF
  int v17; // [esp+10h] [ebp-8h] BYREF
  int i; // [esp+14h] [ebp-4h]

  for ( i = (a2 - 1) / 2; a3 < a2; i = (i - 1) / 2 )
  {
    v6 = sub_446FA0(&a1, &v17, i);
    v7 = (_DWORD *)sub_420010(v6);
    if ( !sub_4256A0(v7, &a4) )
      break;
    v8 = sub_446FA0(&a1, &v15, i);
    v9 = (_DWORD *)sub_420010(v8);
    v10 = sub_446FA0(&a1, &v16, a2);
    v11 = (_DWORD *)sub_420010(v10);
    *v11 = *v9;
    v11[1] = v9[1];
    v11[2] = v9[2];
    a2 = i;
  }
  v12 = sub_446FA0(&a1, &v14, a2);
  result = (_DWORD *)sub_420010(v12);
  *result = a4;
  result[1] = a5;
  result[2] = a6;
  return result;
}

//----- (00425640) --------------------------------------------------------
_DWORD *__cdecl std::_Pop_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, char a3, int a4, int a5, int a6)
{
  _DWORD *v6; // esi
  _DWORD *v7; // eax
  int v8; // eax
  int v10; // [esp-10h] [ebp-14h]
  int v11; // [esp-Ch] [ebp-10h]
  int v12; // [esp-8h] [ebp-Ch]

  v6 = (_DWORD *)sub_420010(&a1);
  v7 = (_DWORD *)sub_420010(&a3);
  *v7 = *v6;
  v7[1] = v6[1];
  v7[2] = v6[2];
  v10 = a4;
  v11 = a5;
  v12 = a6;
  v8 = sub_431D50(&a2, &a1);
  return std::_Adjust_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
           a1,
           0,
           v8,
           v10,
           v11,
           v12);
}

//----- (004256A0) --------------------------------------------------------
BOOL __stdcall sub_4256A0(_DWORD *a1, _DWORD *a2)
{
  return sub_4256C0(a1, a2);
}

//----- (004256C0) --------------------------------------------------------
BOOL __thiscall sub_4256C0(_DWORD *this, _DWORD *a2)
{
  return *this - *a2 > 0;
}

//----- (004256E0) --------------------------------------------------------
_DWORD *__cdecl std::_Adjust_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(int a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // esi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // esi
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v18; // [esp-4h] [ebp-28h]
  int v19; // [esp+4h] [ebp-20h] BYREF
  int v20; // [esp+8h] [ebp-1Ch] BYREF
  int v21; // [esp+Ch] [ebp-18h] BYREF
  int v22; // [esp+10h] [ebp-14h] BYREF
  int v23; // [esp+14h] [ebp-10h] BYREF
  int v24; // [esp+18h] [ebp-Ch] BYREF
  int i; // [esp+1Ch] [ebp-8h]
  int v26; // [esp+20h] [ebp-4h]

  v26 = a2;
  for ( i = 2 * a2 + 2; i < a3; i = 2 * i + 2 )
  {
    v6 = sub_446FA0(&a1, &v24, i - 1);
    v18 = (_DWORD *)sub_420010(v6);
    v7 = sub_446FA0(&a1, &v23, i);
    v8 = (_DWORD *)sub_420010(v7);
    if ( sub_4256A0(v8, v18) )
      --i;
    v9 = sub_446FA0(&a1, &v21, i);
    v10 = (_DWORD *)sub_420010(v9);
    v11 = sub_446FA0(&a1, &v22, a2);
    v12 = (_DWORD *)sub_420010(v11);
    *v12 = *v10;
    v12[1] = v10[1];
    v12[2] = v10[2];
    a2 = i;
  }
  if ( i == a3 )
  {
    v13 = sub_446FA0(&a1, &v19, a3 - 1);
    v14 = (_DWORD *)sub_420010(v13);
    v15 = sub_446FA0(&a1, &v20, a2);
    v16 = (_DWORD *)sub_420010(v15);
    *v16 = *v14;
    v16[1] = v14[1];
    v16[2] = v14[2];
    a2 = a3 - 1;
  }
  return std::_Push_heap<std::vector<CIOSocket::CIOTimer>::iterator,int,CIOSocket::CIOTimer,std::less<CIOSocket::CIOTimer>>(
           a1,
           a2,
           v26,
           a4,
           a5,
           a6);
}

//----- (00425830) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer> *__thiscall sub_425830(std::vector<CIOSocket::CIOTimer> *this)
{
  sub_425850(this);
  return this;
}

//----- (00425850) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer> *__thiscall sub_425850(std::vector<CIOSocket::CIOTimer> *this)
{
  std::vector<CIOSocket::CIOTimer> *v2; // [esp-4h] [ebp-Ch] BYREF
  std::vector<CIOSocket::CIOTimer> *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0((char)v2);
  std::vector<CIOSocket::CIOTimer>::_Buy(v3, 0);
  return v3;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);
// 44F7C0: using guessed type _DWORD __stdcall sub_44F7C0(char);

//----- (00425880) --------------------------------------------------------
CIOObject *__thiscall CIOSocket::CIOTimerInstance::CIOTimerInstance(CIOObject *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B677C;
  return this;
}
// 4B677C: using guessed type int (__stdcall *off_4B677C)(int);

//----- (004258D0) --------------------------------------------------------
void __thiscall sub_4258D0(std::vector<CIOSocket::CIOTimer> *this)
{
  sub_445B20(this);
}

//----- (004258F0) --------------------------------------------------------
_DWORD *__thiscall CItem::CItem(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B6798;
  this[6] = 4;
  this[8] = 0;
  this[9] = 0;
  this[10] = 0;
  this[11] = 0;
  this[12] = 0;
  this[13] = 0;
  this[14] = 0;
  this[16] = -1;
  this[15] = -1;
  this[17] = 0;
  this[18] = 0;
  this[19] = 0;
  this[20] = 0;
  this[21] = 0;
  this[22] = 0;
  return this;
}
// 4B6798: using guessed type int (__stdcall *off_4B6798)(int);

//----- (004259B0) --------------------------------------------------------
int __thiscall CItem::Use(_DWORD *this, int a2)
{
  return this[13];
}

//----- (004259D0) --------------------------------------------------------
int __thiscall CItem::Enchant(_DWORD *this, int a2, int a3)
{
  return this[13];
}

//----- (004259F0) --------------------------------------------------------
int __stdcall CItem::ChangePrefix(int a1, int a2, int a3, int a4)
{
  return 0;
}

//----- (00425A00) --------------------------------------------------------
void *__thiscall CItem::_scalar_deleting_destructor_(void *this, char a2)
{
  CItem::_CItem(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 425A30: using guessed type int __thiscall sub_425A30(_DWORD);

//----- (00425A30) --------------------------------------------------------
_DWORD *__usercall CItem::_CItem@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *a1 = &off_4B6798;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B6798: using guessed type int (__stdcall *off_4B6798)(int);

//----- (00425A50) --------------------------------------------------------
int __cdecl CItem::InsertInitItem(const char *const *_Val2)
{
  int v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char v4[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v3,
    _Val2 + 16,
    (CItem *const *)&_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  LOG_ERR("CItem::InsertInitItem() Duplicate InitItem. (Code:%d)", *((_DWORD *)_Val2 + 16));
  return 0;
}
// 425A73: variable 'v1' is possibly undefined
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (00425AB0) --------------------------------------------------------
int __cdecl CItem::InsertPrefix(const char *const *_Val2)
{
  int v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char v4[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v3,
    _Val2 + 8,
    (CItem *const *)&_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  LOG_ERR("CItem::InsertPrefix() Duplicate Prefix. (Index:%d)", *((_DWORD *)_Val2 + 8));
  return 0;
}
// 425AD3: variable 'v1' is possibly undefined
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (00425B10) --------------------------------------------------------
int __cdecl CItem::InsertItemGroup(const char *const *_Val2)
{
  int v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char v4[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v3,
    _Val2 + 8,
    (CItem *const *)&_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  LOG_ERR("CItem::InsertItemGroup() Duplicate ItemGroup. (Index:%d)", *((_DWORD *)_Val2 + 8));
  return 0;
}
// 425B33: variable 'v1' is possibly undefined
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (00425B70) --------------------------------------------------------
void CItem::ReloadItemGroup()
{
  char v0[540]; // [esp+0h] [ebp-220h] BYREF
  int v1; // [esp+21Ch] [ebp-4h]

  v1 = dword_4D9830;
  if ( CObjectDB::CanReload() )
  {
    CObjectDB::CObjectDB(v0);
    CRWLock::WriteLock((CRWLock *)&unk_4E10D8);
    CItem::ClearItemGroup();
    if ( CObjectDB::Open("Config\\ItemGroup.txt") )
    {
      CRWLock::WriteUnlock((CRWLock *)&unk_4E10D8);
      LOG_NORMAL("<ItemGroup> reloading is completed.");
    }
    else
    {
      CItem::ClearItemGroup();
      CRWLock::WriteUnlock((CRWLock *)&unk_4E10D8);
      LOG_ERR("<ItemGroup> reloading is failed.");
    }
    CObjectDB::_CObjectDB(v0);
  }
  else
  {
    LOG_NORMAL("invalid server state to reload <ItemGroup>. Try later.");
  }
}
// 425C20: using guessed type int __thiscall sub_425C20(_DWORD);
// 425C40: using guessed type int __thiscall sub_425C40(_DWORD);
// 4265B0: using guessed type int sub_4265B0(void);
// 44C960: using guessed type int sub_44C960(void);
// 4D9830: using guessed type int dword_4D9830;

//----- (00425C20) --------------------------------------------------------
CConfig *__thiscall CObjectDB::CObjectDB(CConfig *this)
{
  CConfig::CConfig(this);
  return this;
}

//----- (00425C40) --------------------------------------------------------
void __thiscall CObjectDB::_CObjectDB(CConfig *this)
{
  CConfig::_CConfig(this);
}

//----- (00425C60) --------------------------------------------------------
int __cdecl CItem::FindInitItem(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  sub_44AE20(v4, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
         v1) )
  {
    result = *(_DWORD *)(sub_420250(v4) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00425CB0) --------------------------------------------------------
int __cdecl CItem::FindPrefix(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  sub_44AE20(v4, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
         v1) )
  {
    result = *(_DWORD *)(sub_420250(v4) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00425D00) --------------------------------------------------------
int __cdecl CItem::NewItem(_DWORD *a1)
{
  int result; // eax
  int v2; // [esp+0h] [ebp-54h]
  int v3; // [esp+4h] [ebp-50h]
  int v4; // [esp+8h] [ebp-4Ch]
  int v5; // [esp+Ch] [ebp-48h]
  int v6; // [esp+10h] [ebp-44h]
  int v7; // [esp+14h] [ebp-40h]
  int v8; // [esp+18h] [ebp-3Ch]
  int v9; // [esp+1Ch] [ebp-38h]
  int v10; // [esp+20h] [ebp-34h]
  int v11; // [esp+24h] [ebp-30h]
  int v12; // [esp+50h] [ebp-4h]

  if ( (a1[44] & (1 << dword_4E35B8)) == 0 )
    return 0;
  switch ( a1[17] )
  {
    case 0:
      if ( operator_new(0x84u) )
        v8 = CItemWeapon::CItemWeapon(a1);
      else
        v8 = 0;
      v12 = v8;
      goto LABEL_44;
    case 1:
      v7 = a1[18];
      if ( v7 == 20 )
      {
        if ( operator_new(0x7Cu) )
          v6 = CItemMask::CItemMask(a1);
        else
          v6 = 0;
        v12 = v6;
      }
      else if ( v7 == 22 )
      {
        if ( operator_new(0x84u) )
          v5 = CItemStandard::CItemStandard(a1);
        else
          v5 = 0;
        v12 = v5;
      }
      else
      {
        if ( operator_new(0x7Cu) )
          v4 = CItemDefense::CItemDefense(a1);
        else
          v4 = 0;
        v12 = v4;
      }
      goto LABEL_44;
    case 2:
      if ( operator_new(0x5Cu) )
        v11 = CItemOrnament::CItemOrnament(a1);
      else
        v11 = 0;
      v12 = v11;
      goto LABEL_44;
    case 3:
      if ( operator_new(0x5Cu) )
        v10 = CItemGeneral::CItemGeneral(a1);
      else
        v10 = 0;
      v12 = v10;
      goto LABEL_44;
    case 4:
      if ( operator_new(0x5Cu) )
        v9 = CItemQuest::CItemQuest(a1);
      else
        v9 = 0;
      v12 = v9;
      goto LABEL_44;
    case 5:
      if ( operator_new(0x5Cu) )
        v3 = CItemMoney::CItemMoney(a1);
      else
        v3 = 0;
      v12 = v3;
      goto LABEL_44;
    case 6:
      if ( operator_new(0x6Cu) )
        v2 = CItemTransform::CItemTransform(a1);
      else
        v2 = 0;
      v12 = v2;
LABEL_44:
      result = v12;
      break;
    default:
      LOG_ERR("CItem::NewItem() Invalid Item Class(%d).", a1[17]);
      result = 0;
      break;
  }
  return result;
}
// 425F80: using guessed type _DWORD __stdcall sub_425F80(_DWORD);
// 426000: using guessed type _DWORD __stdcall sub_426000(_DWORD);
// 427520: using guessed type _DWORD __stdcall sub_427520(_DWORD);
// 42A310: using guessed type _DWORD __stdcall sub_42A310(_DWORD);
// 42C450: using guessed type _DWORD __stdcall sub_42C450(_DWORD);
// 42CF10: using guessed type _DWORD __stdcall sub_42CF10(_DWORD);
// 42D6B0: using guessed type _DWORD __stdcall sub_42D6B0(_DWORD);
// 42D8D0: using guessed type _DWORD __stdcall sub_42D8D0(_DWORD);
// 42E5E0: using guessed type _DWORD __stdcall sub_42E5E0(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00425F80) --------------------------------------------------------
_DWORD *__thiscall CItemMask::CItemMask(_DWORD *this, int a2)
{
  CItemDefense::CItemDefense(a2);
  *this = &off_4B69E0;
  return this;
}
// 42A310: using guessed type _DWORD __stdcall CItemDefense::CItemDefense(_DWORD);
// 4B69E0: using guessed type int (__stdcall *off_4B69E0)(int);

//----- (00425FB0) --------------------------------------------------------
BOOL __thiscall CItemDefense::IsBroken(_DWORD *this)
{
  return this[24] <= 0;
}

//----- (00425FD0) --------------------------------------------------------
void *__thiscall CItemMask::_scalar_deleting_destructor_(void *this, char a2)
{
  CItemStandard::_CItemStandard(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 426040: using guessed type int __thiscall sub_426040(_DWORD);

//----- (00426000) --------------------------------------------------------
int __thiscall CItemStandard::CItemStandard(_DWORD *this, int a2)
{
  CItemDefense::CItemDefense(a2);
  *this = &off_4B6AC0;
  this[31] = 0;
  this[32] = 0;
  return (int)this;
}
// 42A310: using guessed type _DWORD __stdcall CItemDefense::CItemDefense(_DWORD);
// 4B6AC0: using guessed type int (__stdcall *off_4B6AC0)(int);

//----- (00426040) --------------------------------------------------------
int __thiscall CItemStandard::_CItemStandard(void *this)
{
  return CItemGeneral::_CItemGeneral(this, this);
}
// 4275C0: using guessed type int __thiscall sub_4275C0(_DWORD, _DWORD);

//----- (00426060) --------------------------------------------------------
int __cdecl sub_426060(int a1, _DWORD *a2)
{
  int result; // eax
  _DWORD *v3; // [esp+0h] [ebp-Ch]
  char v4[4]; // [esp+4h] [ebp-8h] BYREF
  int v5; // [esp+8h] [ebp-4h]

  *(_DWORD *)v4 = 0;
  *a2 = sub_418980(*a2, v4);
  v3 = (_DWORD *)CItem::FindInitItem(v4[0]);
  if ( v3 )
  {
    v5 = 0;
    v5 = CItem::NewItem(v3);
    if ( v5 )
      (*(void (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)v5 + 80))(v5, a1, a2);
    else
      *a2 += 24;
    result = v5;
  }
  else
  {
    LOG_ERR("CItem::CreateItem() Invalid index(%d). PID(%d)", *(_DWORD *)v4, a1);
    *a2 += 24;
    result = 0;
  }
  return result;
}
// 418980: using guessed type _DWORD __cdecl sub_418980(_DWORD, _DWORD);

//----- (00426110) --------------------------------------------------------
int __cdecl CItem::CreateItem(char a1, int a2, int a3, int a4)
{
  _DWORD *v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  if ( a3 <= 0 )
    return 0;
  v6 = 0;
  v5 = (_DWORD *)CItem::FindInitItem(a1);
  if ( v5 )
  {
    v6 = CItem::NewItem(v5);
    if ( v6 )
      (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)v6 + 76))(v6, a2, a3, a4);
  }
  return v6;
}

//----- (00426170) --------------------------------------------------------
int __cdecl CItem::CreateCheatItem(char a1, int a2, int a3, int a4)
{
  _DWORD *v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  if ( a3 <= 0 )
    return 0;
  v6 = 0;
  v5 = (_DWORD *)CItem::FindInitItem(a1);
  if ( v5 )
  {
    v6 = CItem::NewItem(v5);
    if ( v6 )
    {
      (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)v6 + 76))(v6, a2, a3, a4);
      if ( (dword_4E1174[0] & 2) == 0 )
        CItem::AddState(8);
    }
  }
  return v6;
}
// 4261F0: using guessed type _DWORD __stdcall CItem::AddState(_DWORD);

//----- (004261F0) --------------------------------------------------------
_DWORD *__thiscall CItem::AddState(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  result = this;
  this[12] |= a2;
  return result;
}

//----- (00426210) --------------------------------------------------------
_DWORD *__cdecl CItem::CreateOwnItem(char a1, int a2, int a3, int a4)
{
  _DWORD *v5; // [esp+0h] [ebp-8h]
  _DWORD *v6; // [esp+4h] [ebp-4h]

  if ( a3 <= 0 )
    return 0;
  v6 = 0;
  v5 = (_DWORD *)CItem::FindInitItem(a1);
  if ( v5 )
  {
    v6 = (_DWORD *)CItem::NewItem(v5);
    if ( v6 )
    {
      (*(void (__thiscall **)(_DWORD *, int, int, int))(*v6 + 76))(v6, a2, a3, a4);
      if ( (dword_4E1174[0] & 2) == 0 )
        CItem::AddState(v6, 128);
    }
  }
  return v6;
}

//----- (00426290) --------------------------------------------------------
int __cdecl CItem::CreateDropItem(char a1, int a2)
{
  int v2; // eax
  char v4[4]; // [esp+0h] [ebp-1Ch] BYREF
  _DWORD *v5; // [esp+4h] [ebp-18h]
  int v6; // [esp+8h] [ebp-14h] BYREF
  int v7; // [esp+Ch] [ebp-10h] BYREF
  int v8; // [esp+10h] [ebp-Ch]
  int v9; // [esp+14h] [ebp-8h] BYREF
  char v10[4]; // [esp+18h] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E10D8);
  sub_44AE20(v10, &a1);
  v2 = sub_430C20(v4);
  if ( (unsigned __int8)unknown_libname_16(v2) )
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E10D8);
    return 0;
  }
  v6 = 0;
  v9 = 0;
  v7 = 0;
  sub_420250(v10);
  CItemGroup::GetItemInfo(&v6, &v9, &v7);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E10D8);
  if ( v7 <= 0 )
    return 0;
  v8 = 0;
  v5 = (_DWORD *)CItem::FindInitItem(v6);
  if ( v5 )
  {
    if ( (a2 & v5[19]) != a2 )
      return 0;
    v8 = CItem::NewItem(v5);
    if ( v8 )
      (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v8 + 76))(v8, v9, v7, 0);
  }
  return v8;
}
// 4305A0: using guessed type _DWORD __stdcall sub_4305A0(_DWORD, _DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00426390) --------------------------------------------------------
int __cdecl CItem::CreateQuestItem(char a1)
{
  int v1; // eax
  int result; // eax
  int v3; // eax
  char v4[4]; // [esp+0h] [ebp-20h] BYREF
  _DWORD *v5; // [esp+4h] [ebp-1Ch]
  int v6; // [esp+8h] [ebp-18h] BYREF
  int v7; // [esp+Ch] [ebp-14h] BYREF
  int v9; // [esp+14h] [ebp-Ch]
  int v10; // [esp+18h] [ebp-8h] BYREF
  char v11[4]; // [esp+1Ch] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E10D8);
  sub_44AE20(v11, &a1);
  v1 = sub_430C20(v4);
  if ( (unsigned __int8)unknown_libname_16(v1) )
  {
    CRWLock::ReadUnlock((CRWLock *)&unk_4E10D8);
    result = 0;
  }
  else
  {
    v6 = 0;
    v10 = 0;
    v7 = 0;
    v3 = sub_420250(v11);
    if ( CItemGroup::GetFirstGroup(*(_DWORD *)(v3 + 4)) )
      CGroup::GetItemInfo(&v6, &v10, &v7);
    CRWLock::ReadUnlock((CRWLock *)&unk_4E10D8);
    if ( v7 > 0 )
    {
      v9 = 0;
      v5 = (_DWORD *)CItem::FindInitItem(v6);
      if ( v5 )
      {
        v9 = CItem::NewItem(v5);
        if ( v9 )
          (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v9 + 76))(v9, v10, v7, 0);
      }
      result = v9;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}
// 430200: using guessed type _DWORD __stdcall sub_430200(_DWORD, _DWORD, _DWORD);
// 430630: using guessed type int __thiscall sub_430630(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00426490) --------------------------------------------------------
int CItem::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v3; // [esp+0h] [ebp-30h]
  int v4; // [esp+4h] [ebp-2Ch]
  int (__thiscall ***v5)(_DWORD, int); // [esp+Ch] [ebp-24h]
  char v6[4]; // [esp+10h] [ebp-20h] BYREF
  char v7[4]; // [esp+14h] [ebp-1Ch] BYREF
  int (__thiscall ***v8)(_DWORD, int); // [esp+18h] [ebp-18h]
  int (__thiscall ***v9)(_DWORD, int); // [esp+1Ch] [ebp-14h]
  char v10[4]; // [esp+20h] [ebp-10h] BYREF
  char v11[4]; // [esp+24h] [ebp-Ch] BYREF
  char v12[4]; // [esp+28h] [ebp-8h] BYREF
  char v13[4]; // [esp+2Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E10B4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v13);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v10);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v13,
            v0) )
      break;
    v8 = *(int (__thiscall ****)(_DWORD, int))(sub_420250(v13) + 4);
    v9 = v8;
    if ( v8 )
      v4 = (**v9)(v9, 1);
    else
      v4 = 0;
    sub_446090(v11, 0);
  }
  sub_42F590(&unk_4E10B4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E10C0,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v6);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v12,
            v1) )
      break;
    v5 = *(int (__thiscall ****)(_DWORD, int))(sub_420250(v12) + 4);
    if ( v5 )
      v3 = (**v5)(v5, 1);
    else
      v3 = 0;
    sub_446090(v7, 0);
  }
  sub_42F5F0(&unk_4E10C0, v3, v4);
  CRWLock::WriteLock((CRWLock *)&unk_4E10D8);
  CItem::ClearItemGroup();
  CRWLock::WriteUnlock((CRWLock *)&unk_4E10D8);
  return CGoods::ClearGoods();
}
// 426585: variable 'v3' is possibly undefined
// 426585: variable 'v4' is possibly undefined
// 4265B0: using guessed type int CItem::ClearItemGroup(void);
// 42F590: using guessed type int __thiscall sub_42F590(_DWORD);
// 42F5F0: using guessed type int __thiscall sub_42F5F0(_DWORD, _DWORD, _DWORD);
// 4308F0: using guessed type int sub_4308F0(void);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (004265B0) --------------------------------------------------------
int CItem::ClearItemGroup()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v2; // [esp+0h] [ebp-18h]
  int (__thiscall ***v3)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v4[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v5[4]; // [esp+10h] [ebp-8h] BYREF
  char v6[4]; // [esp+14h] [ebp-4h] BYREF

  CItemGroup::ClearGroup();
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E10CC,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v0) )
      break;
    v3 = *(int (__thiscall ****)(_DWORD, int))(sub_420250(v6) + 4);
    if ( v3 )
      v2 = (**v3)(v3, 1);
    else
      v2 = 0;
    sub_446090(v5, 0);
  }
  return sub_42F650(&unk_4E10CC, v2);
}
// 426630: variable 'v2' is possibly undefined
// 42F650: using guessed type int __thiscall sub_42F650(_DWORD, _DWORD);
// 430310: using guessed type int sub_430310(void);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00426640) --------------------------------------------------------
void __thiscall CItem::OnTimer(CIOObject *this, int a2)
{
  CIOBuffer *v3; // [esp+8h] [ebp-14h]
  int v4[2]; // [esp+Ch] [ebp-10h] BYREF
  int v5; // [esp+14h] [ebp-8h]
  DWORD v6; // [esp+18h] [ebp-4h]

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      *((_DWORD *)this + 18) = 0;
      *((_DWORD *)this + 19) = 0;
      *((_DWORD *)this + 20) = 0;
    }
  }
  else
  {
    v6 = *((_DWORD *)this + 17);
    v5 = *((_DWORD *)this + 14);
    if ( v6 && !CBase::IsDeleted(this) )
    {
      if ( GetTickCount() < v6 )
      {
        CIOObject::AddTimer(this, 0xEA60u, 0);
      }
      else
      {
        v4[0] = *((int *)this + 15) >> 5;
        v4[1] = *((int *)this + 16) >> 5;
        if ( v5 && sub_4913E0(this, (int)v4) )
        {
          v3 = (CIOBuffer *)sub_44FCE0(59, "d", *((_DWORD *)this + 7));
          sub_493440(v4, v3, 25);
          CIOBuffer::Release(v3);
          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)this + 92))(this, 11);
        }
      }
    }
  }
}
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 493440: using guessed type _DWORD __stdcall sub_493440(_DWORD, _DWORD, _DWORD);

//----- (00426750) --------------------------------------------------------
int __thiscall CItem::PutInfo(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  int result; // eax

  if ( !a3 )
    a3 = this[13];
  *a2 = sub_44F9B0(*a2, this[9]);
  *a2 = sub_42F960(*a2, *(_WORD *)(this[10] + 64));
  if ( this[11] )
    v3 = sub_4189A0(*a2, *(_DWORD *)(this[11] + 32));
  else
    v3 = sub_4189A0(*a2, 0);
  *a2 = v3;
  *a2 = sub_44F9B0(*a2, this[12]);
  result = sub_44F9B0(*a2, a3);
  *a2 = result;
  return result;
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 42F960: using guessed type _DWORD __cdecl sub_42F960(_DWORD, __int16);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (00426810) --------------------------------------------------------
int __thiscall sub_426810(_DWORD *this, int a2, _DWORD *a3)
{
  int result; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  this[8] = a2;
  v5 = 0;
  *a3 = sub_47A240(*a3, this + 9);
  *a3 = sub_418960(*a3, &v5);
  *a3 = sub_47A240(*a3, this + 12);
  *a3 = sub_47A240(*a3, this + 13);
  *a3 += 2;
  *a3 = sub_418960(*a3, this + 21);
  *a3 += 8;
  result = CItem::FindPrefix(v5);
  this[11] = result;
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (004268E0) --------------------------------------------------------
_DWORD *__thiscall CItem::Init(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *result; // eax
  int v5; // [esp+0h] [ebp-Ch]

  if ( !*(_DWORD *)(this[10] + 92) )
    a3 = 1;
  result = this;
  this[13] = a3;
  if ( dword_4E35B8 == 2 )
  {
    result = (_DWORD *)this[10];
    if ( result[39] )
    {
      if ( a4 < 0 )
        v5 = dword_4E1164;
      else
        v5 = a4;
      result = this;
      this[21] = v5;
    }
  }
  return result;
}
// 4E1164: using guessed type int dword_4E1164;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00426950) --------------------------------------------------------
int __thiscall CItem::SendDelete(_DWORD *this, int a2, int a3)
{
  return CPlayer::Write(a2, 59, "d", this[7]);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00426980) --------------------------------------------------------
int __thiscall CItem::SendCreate(_DWORD *this, int a2, int a3)
{
  return CPlayer::Write(a2, 54, "wdddd", *(_DWORD *)(this[10] + 64), this[7], this[15], this[16], this[13]);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (004269D0) --------------------------------------------------------
int __thiscall CItem::Trash(int this, int a2, int a3)
{
  CPlayer::Write(a2, 8, "db", *(_DWORD *)(this + 36), a3);
  CDBSocket::Write(
    3,
    "ddwdbddd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
    *(_DWORD *)(this + 52),
    a3,
    (unsigned __int8)*(_DWORD *)(this + 84) << 8,
    0,
    0);
  CBase::Delete((char *)this);
  return 1;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00426A60) --------------------------------------------------------
int __thiscall CItem::Erase(int this, int a2)
{
  if ( *(_DWORD *)(this + 36) )
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a2,
      (unsigned __int8)*(_DWORD *)(this + 84) << 8,
      0,
      0);
  return CBase::Delete((char *)this);
}

//----- (00426AD0) --------------------------------------------------------
void __thiscall sub_426AD0(_DWORD *this, int a2, int a3)
{
  this[8] = a2;
  this[9] = a3;
  CDBSocket::Write(6, "dwbbdbbdb", this[9], *(_DWORD *)(this[10] + 64), 0, this[12], this[13], 0, this[21], this[8], 2);
}

//----- (00426B40) --------------------------------------------------------
void __thiscall CItem::Insert(_DWORD *this, int a2, int a3, int a4)
{
  int v5; // [esp+4h] [ebp-4h]

  v5 = this[8];
  this[8] = *(_DWORD *)(a2 + 452);
  if ( a3 == 10 )
    this[12] &= 0xFFFFFFFB;
  CItem::SendItemInfo(a2, 7);
  if ( a4 )
    CDBSocket::Write(7, "dddwbd", this[9], v5, this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  else
    CDBSocket::Write(
      6,
      "dwbddbbdb",
      this[9],
      *(_DWORD *)(this[10] + 64),
      0,
      this[12],
      this[13],
      0,
      this[21],
      this[8],
      a3);
}
// 427430: using guessed type _DWORD __stdcall CItem::SendItemInfo(_DWORD, char);

//----- (00426C10) --------------------------------------------------------
int __thiscall CItem::UpdateNum(int this, int a2, int a3, int a4)
{
  if ( a4 + *(_DWORD *)(this + 52) > 0 )
    return *(_DWORD *)(this + 52);
  CPlayer::Write(a2, 9, "ddb", *(_DWORD *)(this + 36), 0, a3);
  if ( a3 == 50 )
    CDBSocket::Write(
      7,
      "dddwbd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(a2 + 452),
      0,
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      50,
      *(_DWORD *)(this + 52));
  else
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      (unsigned __int8)*(_DWORD *)(this + 84) << 8,
      0,
      0);
  *(_DWORD *)(this + 52) = 0;
  CBase::Delete((char *)this);
  return 0;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00426D00) --------------------------------------------------------
void __thiscall CItem::Drop(CIOObject *this, _DWORD *a2, _DWORD *a3, int a4, int a5, int a6, int a7)
{
  int v7; // edx
  int v9[2]; // [esp+4h] [ebp-20h] BYREF
  CIOBuffer *v10; // [esp+Ch] [ebp-18h]
  int v11[2]; // [esp+10h] [ebp-14h] BYREF
  CIOBuffer *v12; // [esp+18h] [ebp-Ch]
  _DWORD *v13; // [esp+1Ch] [ebp-8h]
  CIOBuffer *v14; // [esp+20h] [ebp-4h]

  *((_DWORD *)this + 14) = a2[80];
  v7 = a3[1];
  *((_DWORD *)this + 15) = *a3;
  *((_DWORD *)this + 16) = v7;
  *((_DWORD *)this + 17) = GetTickCount() + 180000;
  CIOObject::AddTimer(this, 0xEA60u, 0);
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) )
  {
    v13 = a2;
    if ( a5 )
    {
      CPlayer::Write(v13, 8, "db", *((_DWORD *)this + 9), 11);
      CDBSocket::Write(
        7,
        "dddwbd",
        *((_DWORD *)this + 9),
        *((_DWORD *)this + 8),
        0,
        *(_DWORD *)(*((_DWORD *)this + 10) + 64),
        11,
        *((_DWORD *)this + 13));
    }
    else
    {
      *((_DWORD *)this + 8) = v13[113];
    }
  }
  else
  {
    *((_DWORD *)this + 18) = a6;
    *((_DWORD *)this + 19) = a7;
    CIOObject::AddTimer(this, 0x1D4C0u, 1);
  }
  if ( (*(int *)(*((_DWORD *)this + 10) + 64) >= 665 && *(int *)(*((_DWORD *)this + 10) + 64) <= 668
     || *(int *)(*((_DWORD *)this + 10) + 64) >= 802 && *(int *)(*((_DWORD *)this + 10) + 64) <= 825
     || *(int *)(*((_DWORD *)this + 10) + 64) >= 856 && *(int *)(*((_DWORD *)this + 10) + 64) <= 867
     || *(_DWORD *)(*((_DWORD *)this + 10) + 64) == 688)
    && abs(*((_DWORD *)this + 15) - 57367) < 1000
    && abs(*((_DWORD *)this + 16) - 9077) < 1001 )
  {
    v11[0] = 1792;
    v11[1] = 284;
    v12 = (CIOBuffer *)sub_44FCE0(68, "bsw", 113, a2 + 8, *(_DWORD *)(*((_DWORD *)this + 10) + 64));
    sub_493440(v11, v12, 32);
    CIOBuffer::Release(v12);
  }
  if ( (*(int *)(*((_DWORD *)this + 10) + 64) >= 673 && *(int *)(*((_DWORD *)this + 10) + 64) <= 687
     || *(int *)(*((_DWORD *)this + 10) + 64) >= 826 && *(int *)(*((_DWORD *)this + 10) + 64) <= 855)
    && abs(*((_DWORD *)this + 15) - 20284) < 1160
    && abs(*((_DWORD *)this + 16) - 67480) < 1212 )
  {
    v9[0] = 634;
    v9[1] = 2109;
    v10 = (CIOBuffer *)sub_44FCE0(68, "bsw", 113, a2 + 8, *(_DWORD *)(*((_DWORD *)this + 10) + 64));
    sub_493440(v9, v10, 38);
    CIOBuffer::Release(v10);
  }
  v14 = (CIOBuffer *)sub_44FCE0(
                       54,
                       "wdddd",
                       *(_DWORD *)(*((_DWORD *)this + 10) + 64),
                       *((_DWORD *)this + 7),
                       *a3,
                       a3[1],
                       *((_DWORD *)this + 13));
  sub_493440(a4, v14, 25);
  CIOBuffer::Release(v14);
}
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 493440: using guessed type _DWORD __stdcall sub_493440(_DWORD, _DWORD, _DWORD);

//----- (00427010) --------------------------------------------------------
_DWORD *__thiscall CItem::Trade(_DWORD *this, int a2, int a3, int a4)
{
  if ( this[13] != a4 )
    EBREAK();
  this[8] = 0;
  this[12] |= 4u;
  CPlayer::Write(a2, 8, "db", this[9], a3);
  CDBSocket::Write(7, "dddwbd", this[9], *(_DWORD *)(a2 + 452), this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  return this;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (004270B0) --------------------------------------------------------
BOOL __thiscall CItem::CanSell(_DWORD *this, int a2)
{
  BOOL result; // eax
  BOOL v3; // [esp+0h] [ebp-Ch]
  BOOL v4; // [esp+4h] [ebp-8h]

  if ( (dword_4E1174[0] & 2) != 0 )
  {
    v4 = *(int *)(this[10] + 112) > 0 && this[13] >= a2;
    result = v4;
  }
  else
  {
    v3 = !CItem::IsState(136) && *(int *)(this[10] + 112) > 0 && this[13] >= a2;
    result = v3;
  }
  return result;
}
// 427130: using guessed type _DWORD __stdcall CItem::IsState(_DWORD);

//----- (00427130) --------------------------------------------------------
int __thiscall CItem::IsState(_DWORD *this, int a2)
{
  return a2 & this[12];
}

//----- (00427150) --------------------------------------------------------
BOOL __thiscall CItem::CanTrade(_DWORD *this, int a2, int a3, int a4)
{
  BOOL result; // eax
  BOOL v5; // [esp+0h] [ebp-Ch]
  BOOL v6; // [esp+4h] [ebp-8h]

  if ( (dword_4E1174[0] & 2) != 0 )
    return this[13] >= a2;
  if ( dword_4E35B8 == 2 && *(_DWORD *)(this[10] + 156) )
  {
    v6 = *(_DWORD *)(a3 + 60) > dword_4D6068[this[21]] && !CItem::IsState(this, 136) && this[13] >= a2;
    result = v6;
  }
  else
  {
    v5 = !CItem::IsState(this, 136) && this[13] >= a2;
    result = v5;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00427210) --------------------------------------------------------
BOOL __thiscall CItem::CanDrop(_DWORD *this, int a2, int a3)
{
  BOOL result; // eax
  BOOL v4; // [esp+0h] [ebp-Ch]
  BOOL v5; // [esp+4h] [ebp-8h]

  if ( (dword_4E1174[0] & 2) != 0 )
    return this[13] >= a2;
  if ( dword_4E35B8 == 2 && *(_DWORD *)(this[10] + 156) )
  {
    v5 = *(_DWORD *)(a3 + 60) > dword_4D6068[this[21]] && !CItem::IsState(this, 136) && this[13] >= a2;
    result = v5;
  }
  else
  {
    v4 = !CItem::IsState(this, 136) && this[13] >= a2;
    result = v4;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004272D0) --------------------------------------------------------
int __thiscall CItem::StorageOut(_DWORD *this, int a2, int a3, int a4, int a5)
{
  this[12] &= 0xFFFFFFEF;
  CItem::SendItemInfo(a2, 89);
  CPlayer::_StorageOut(this[9], 0);
  CDBSocket::Write(12, "ddbd", this[9], this[8], 0, this[13]);
  return 1;
}
// 427430: using guessed type _DWORD __stdcall CItem::SendItemInfo(_DWORD, char);
// 45EAB0: using guessed type _DWORD __stdcall sub_45EAB0(char, _DWORD);

//----- (00427340) --------------------------------------------------------
void __thiscall CItem::ForcedStorageIn(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // eax

  if ( a4 )
    v5 = CItem::NewIID(*(_DWORD *)(this[10] + 64), 0, this[12], this[13], 0, this[21], a3, a5, a4);
  else
    v5 = CItem::NewIID(*(_DWORD *)(this[10] + 64), 0, this[12], this[13], 0, this[21], a3, a5, &Src);
  CDBSocket::Write(35, "bdwbddbbdds", a2, v5);
}
// 4273B0: using guessed type int __cdecl sub_4273B0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (004273B0) --------------------------------------------------------
LONG CItem::NewIID()
{
  LONG v1; // [esp+0h] [ebp-4h]

  v1 = InterlockedIncrement(&dword_4E10B0);
  if ( !v1 )
    v1 = InterlockedIncrement(&dword_4E10B0);
  return v1;
}

//----- (004273E0) --------------------------------------------------------
int __thiscall CItem::GetSellMoney(_DWORD *this, int a2)
{
  return a2 * *(_DWORD *)(this[10] + 112);
}

//----- (00427400) --------------------------------------------------------
int __thiscall CItem::SetEtc(_DWORD *this, int a2)
{
  int result; // eax

  this[20] = 0;
  result = *(_DWORD *)(a2 + 452);
  this[8] = result;
  return result;
}

//----- (00427430) --------------------------------------------------------
void __thiscall CItem::SendItemInfo(void *this, int a2, char a3)
{
  CIOBuffer *v3; // eax
  CIOBuffer *v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h] BYREF
  void *Src; // [esp+Ch] [ebp-4h]

  v3 = CIOBuffer::Alloc();
  Src = v3;
  v5 = v3;
  *((_BYTE *)v3 + 2) = a3;
  v6 = (int)v3 + 3;
  (*(void (__thiscall **)(void *, int *, _DWORD))(*(_DWORD *)this + 72))(this, &v6, 0);
  *(_WORD *)v5 = v6 - (_WORD)v5;
  *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v5;
  CPlayer::Send(Src);
  CIOBuffer::Release((CIOBuffer *)Src);
}

//----- (004274A0) --------------------------------------------------------
void __stdcall CItem::InsertItem(int a1, int a2, int a3, int a4, int a5, int a6)
{
  char *v6; // [esp+4h] [ebp-4h]

  v6 = (char *)CItem::CreateItem(a3, a4, a5, -1);
  if ( v6 )
  {
    CIOObject::AddRef(v6);
    if ( CPlayer::_InsertItem(a2, v6) != 1 )
    {
      LOG_ERR("CItem::InsertItem() (PID:%d, LogType:%d, Index:%d)", *(_DWORD *)(a1 + 452), a2, a3);
      CBase::Delete(v6);
    }
    CIOObject::Release((volatile int *)v6);
  }
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 45DE10: using guessed type _DWORD __stdcall sub_45DE10(_DWORD, _DWORD);

//----- (00427520) --------------------------------------------------------
_DWORD *__thiscall CItemWeapon::CItemWeapon(_DWORD *this, int a2)
{
  CItem::CItem(this);
  *this = &off_4B6C50;
  this[10] = a2;
  this[23] = 0;
  this[24] = 0;
  this[25] = 0;
  this[26] = 0;
  this[27] = 0;
  this[28] = 0;
  this[29] = 0;
  this[30] = 0;
  this[31] = 0;
  this[32] = 0;
  return this;
}
// 4B6C50: using guessed type int (__stdcall *off_4B6C50)(int);

//----- (004275C0) --------------------------------------------------------
int __thiscall CItemGeneral::_CItemGeneral(void *this)
{
  return CItem::_CItem(this);
}
// 425A30: using guessed type int __thiscall CItem::_CItem(_DWORD);

//----- (004275E0) --------------------------------------------------------
int __thiscall CItemWeapon::PutInfo(int this, _DWORD *a2, int a3)
{
  int v3; // eax
  int result; // eax

  if ( !a3 )
    a3 = *(_DWORD *)(this + 52);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(this + 36));
  *a2 = sub_42F960(*a2, *(_WORD *)(*(_DWORD *)(this + 40) + 64));
  if ( *(_DWORD *)(this + 44) )
    v3 = sub_4189A0(*a2, *(_DWORD *)(*(_DWORD *)(this + 44) + 32));
  else
    v3 = sub_4189A0(*a2, 0);
  *a2 = v3;
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(this + 48));
  *a2 = sub_44F9B0(*a2, a3);
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 92));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 96));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 84));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 100));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 104));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 108));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 112));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 116));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 120));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(this + 124));
  result = sub_4189A0(*a2, *(_BYTE *)(this + 128));
  *a2 = result;
  return result;
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 42F960: using guessed type _DWORD __cdecl sub_42F960(_DWORD, __int16);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (004277C0) --------------------------------------------------------
int __thiscall CItemWeapon::Init2(_DWORD *this, int a2, _DWORD *a3)
{
  int result; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  this[8] = a2;
  v5 = 0;
  *a3 = sub_47A240(*a3, this + 9);
  *a3 = sub_418960(*a3, &v5);
  *a3 = sub_47A240(*a3, this + 12);
  *a3 = sub_47A240(*a3, this + 13);
  *a3 = sub_418960(*a3, this + 23);
  *a3 = sub_418960(*a3, this + 24);
  *a3 = sub_418960(*a3, this + 21);
  *a3 = sub_418960(*a3, this + 25);
  *a3 = sub_418960(*a3, this + 26);
  *a3 = sub_418960(*a3, this + 27);
  *a3 = sub_418960(*a3, this + 28);
  *a3 = sub_418960(*a3, this + 29);
  *a3 = sub_418960(*a3, this + 30);
  *a3 = sub_418960(*a3, this + 31);
  *a3 = sub_418960(*a3, this + 32);
  if ( (int)this[25] > 20 )
  {
    this[25] = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXAttack:%d)", a2, this[25]);
  }
  if ( (int)this[26] > 20 )
  {
    this[26] = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXMagic:%d)", a2, this[26]);
  }
  if ( (int)this[28] > 20 )
  {
    this[28] = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXHit:%d)", a2, this[28]);
  }
  if ( (int)this[27] > 10 )
  {
    this[27] = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXDefense:%d)", a2, this[27]);
  }
  if ( (int)this[29] > 1 )
  {
    this[29] = 0;
    LOG_ERR("CItemWeapon::Init() Error (PID:%d m_nXDodge:%d)", a2, this[29]);
  }
  result = CItem::FindPrefix(v5);
  this[11] = result;
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (00427A50) --------------------------------------------------------
int __thiscall CItemWeapon::Init(_DWORD *this, char a2, int a3, int a4)
{
  int result; // eax

  this[11] = CItem::FindPrefix(a2);
  this[13] = 1;
  this[24] = *(_DWORD *)(this[10] + 116);
  result = this[24];
  this[23] = result;
  return result;
}

//----- (00427AA0) --------------------------------------------------------
void __thiscall CItemWeapon::SetWearState(_DWORD *this, int a2)
{
  if ( CItem::IsState(this, 1) )
  {
    if ( (*(int *)(this[10] + 96) < 0 || *(_DWORD *)(this[10] + 96) == *(_DWORD *)(a2 + 460))
      && *(_DWORD *)(this[10] + 100) <= *(_DWORD *)(a2 + 60)
      && !CPlayer::IsWState(0) )
    {
      if ( *(_DWORD *)(this[10] + 72) != 21 )
      {
LABEL_10:
        CPlayer::AddWState(0);
        *(_WORD *)(a2 + 1052) = *(_WORD *)(this[10] + 64);
        *(_DWORD *)(a2 + 312) = *(_DWORD *)(this[10] + 104);
        (*(void (__thiscall **)(_DWORD *, int))(*this + 104))(this, a2);
        return;
      }
      if ( !CPlayer::IsWState(1) )
      {
        CPlayer::AddWState(12);
        goto LABEL_10;
      }
    }
    CItem::SubState(1);
    CDBSocket::Write(5, "d", this[9]);
  }
}
// 427B90: using guessed type _DWORD __stdcall CItem::SubState(_DWORD);
// 427BB0: using guessed type _DWORD __stdcall sub_427BB0(_DWORD);
// 427BE0: using guessed type _DWORD __stdcall CPlayer::IsWState(_DWORD);

//----- (00427B90) --------------------------------------------------------
int __thiscall CItem::SubState(_DWORD *this, int a2)
{
  int result; // eax

  result = this[12] & ~a2;
  this[12] = result;
  return result;
}

//----- (00427BB0) --------------------------------------------------------
int __thiscall CPlayer::AddWState(_DWORD *this, char a2)
{
  int result; // eax

  result = this[141] | (1 << a2);
  this[141] = result;
  return result;
}

//----- (00427BE0) --------------------------------------------------------
int __thiscall CPlayer::IsWState(_DWORD *this, char a2)
{
  return this[141] & (1 << a2);
}

//----- (00427C00) --------------------------------------------------------
int __thiscall CItemWeapon::Trash(int this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-14h]

  if ( CItem::IsState((_DWORD *)this, 1) )
  {
    CPlayer::Write(a2, 67, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, 8, "db", *(_DWORD *)(this + 36), a3);
    if ( *(_DWORD *)(this + 44) )
      v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v4 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      (unsigned __int8)*(_DWORD *)(this + 100) | ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16) | (v4 << 24),
      ((unsigned __int8)*(_DWORD *)(this + 112) << 8) | ((unsigned __int8)*(_DWORD *)(this + 104) << 24),
      ((unsigned __int8)*(_DWORD *)(this + 128) << 8) | ((unsigned __int8)*(_DWORD *)(this + 124) << 16) | ((unsigned __int8)*(_DWORD *)(this + 120) << 24));
    CBase::Delete((char *)this);
    result = 1;
  }
  return result;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00427D60) --------------------------------------------------------
int __thiscall CItemWeapon::Erase(int this, int a2)
{
  int v3; // [esp+0h] [ebp-14h]

  if ( *(_DWORD *)(this + 36) )
  {
    if ( *(_DWORD *)(this + 44) )
      v3 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v3 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a2,
      (unsigned __int8)*(_DWORD *)(this + 100) | ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16) | (v3 << 24),
      ((unsigned __int8)*(_DWORD *)(this + 112) << 8) | ((unsigned __int8)*(_DWORD *)(this + 104) << 24),
      ((unsigned __int8)*(_DWORD *)(this + 128) << 8) | ((unsigned __int8)*(_DWORD *)(this + 124) << 16) | ((unsigned __int8)*(_DWORD *)(this + 120) << 24));
  }
  return CBase::Delete((char *)this);
}

//----- (00427E70) --------------------------------------------------------
int *__thiscall CItemWeapon::ApplySpec(int *this, _DWORD *a2)
{
  int *result; // eax
  int v4; // [esp+4h] [ebp-Ch] BYREF
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h]

  CInitItem::ApplySpec(this[10], (int)a2);
  v4 = 0;
  v6 = 0;
  if ( CInitItem::GetSpecValue(this[10], 18, (char)&v4) )
  {
    a2[152] = v4;
    a2[153] = v6;
  }
  if ( CInitItem::GetSpecValue(this[10], 19, (char)&v4) )
  {
    a2[154] = v4;
    a2[155] = v6;
  }
  if ( this[11] )
    CPrefix::ApplySpec(this[11], (int)a2);
  if ( this[25] )
  {
    v5 = this[25] * (2 * this[25] + 7) / 9;
    a2[150] = v5;
    (*(void (__cdecl **)(_DWORD *, int, int, int, int))(*a2 + 92))(a2, 27, 1, v5, v5);
  }
  if ( this[26] )
  {
    v5 = this[26] * (2 * this[26] + 7) / 9;
    a2[151] = v5;
    (*(void (__cdecl **)(_DWORD *, int, int, int, int))(*a2 + 92))(a2, 28, 1, v5, v5);
  }
  if ( this[28] )
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 9, 1, this[28]);
  result = this;
  if ( this[31] )
  {
    result = (int *)this[31];
    a2[149] = result;
  }
  return result;
}

//----- (00428000) --------------------------------------------------------
int __thiscall CItemWeapon::FreeSpec(int *this, _DWORD *a2)
{
  int result; // eax
  int v4; // [esp+4h] [ebp-4h]
  int v5; // [esp+4h] [ebp-4h]

  CInitItem::FreeSpec(this[10], (int)a2);
  a2[152] = 0;
  a2[153] = 0;
  a2[154] = 0;
  a2[155] = 0;
  if ( this[11] )
    CPrefix::FreeSpec(this[11], (int)a2);
  result = (int)this;
  if ( this[25] )
  {
    v4 = this[25] * (2 * this[25] + 7) / 9;
    a2[150] = 0;
    result = (*(int (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 92))(a2, 27, 0, v4, v4);
  }
  if ( this[26] )
  {
    v5 = this[26] * (2 * this[26] + 7) / 9;
    a2[151] = 0;
    result = (*(int (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 92))(a2, 28, 0, v5, v5);
  }
  if ( this[28] )
    result = (*(int (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 9, 0, this[28]);
  a2[149] = 0;
  return result;
}

//----- (00428140) --------------------------------------------------------
void __thiscall CItemWeapon::PutOn(_DWORD *this, int a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  unsigned int v5; // [esp+0h] [ebp-8h]

  if ( *(int *)(this[10] + 96) >= 0 && *(_DWORD *)(this[10] + 96) != *(_DWORD *)(a2 + 460)
    || *(_DWORD *)(this[10] + 100) > *(_DWORD *)(a2 + 60) )
  {
    CPlayer::Write(a2, 67, "b", 12);
    return;
  }
  if ( !CItem::IsState(this, 1) )
  {
    if ( CPlayer::IsWState((_DWORD *)a2, 0) )
    {
      CPlayer::Write(a2, 67, "b", 10);
      return;
    }
    if ( *(_DWORD *)(this[10] + 72) == 21 )
    {
      if ( CPlayer::IsWState((_DWORD *)a2, 1) )
        return;
      CPlayer::AddWState((_DWORD *)a2, 12);
    }
    CPlayer::AddWState((_DWORD *)a2, 0);
    *(_WORD *)(a2 + 1052) = *(_WORD *)(this[10] + 64);
    *(_DWORD *)(a2 + 312) = *(_DWORD *)(this[10] + 104);
    CItem::AddState(this, 1);
    (*(void (__thiscall **)(_DWORD *, int))(*this + 104))(this, a2);
    if ( (this[12] & 0x7FF00) != 0 )
    {
      if ( (this[12] & 0x100000) != 0 )
        (*(void (__thiscall **)(int, unsigned int))(*(_DWORD *)a2 + 100))(a2, 0x80000000);
      v5 = this[12] & 0x7FF00;
      if ( v5 > 0x2000 )
      {
        if ( v5 > 0x10000 )
        {
          if ( v5 == 0x20000 )
          {
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x20000000);
            (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 27, 1, 50, 50);
            (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 28, 1, 50, 50);
          }
          else if ( v5 == 0x40000 )
          {
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x40000000);
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 5, 1, 50);
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 6, 1, 50);
            (*(void (__cdecl **)(int, _DWORD, int, int))(*(_DWORD *)a2 + 92))(a2, 0, 1, 6);
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 2, 1, 6);
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 4, 1, 6);
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 3, 1, 10);
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 1, 1, 10);
          }
        }
        else
        {
          switch ( v5 )
          {
            case 0x10000u:
              (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x10000000);
              if ( (this[12] & 0x80000) != 0 )
              {
                (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 5, 0, 5);
                (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 96))(a2, 6, 1, 10);
              }
              else if ( (this[12] & 0x100000) != 0 )
              {
                (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 5, 0, 10);
                (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 96))(a2, 6, 1, 20);
              }
              break;
            case 0x4000u:
              (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x4000000);
              break;
            case 0x8000u:
              (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x8000000);
              if ( (this[12] & 0x80000) != 0 )
              {
                (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 96))(a2, 5, 1, 10);
                (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 6, 0, 5);
              }
              else if ( (this[12] & 0x100000) != 0 )
              {
                (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 96))(a2, 5, 1, 20);
                (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 6, 0, 10);
              }
              break;
          }
        }
      }
      else if ( v5 == 0x2000 )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x2000000);
      }
      else if ( v5 > 0x400 )
      {
        if ( v5 == 2048 )
        {
          (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x800000);
        }
        else if ( v5 == 4096 )
        {
          (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x1000000);
        }
      }
      else
      {
        switch ( v5 )
        {
          case 0x400u:
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x400000);
            break;
          case 0x100u:
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x100000);
            if ( (this[12] & 0x80000) != 0 )
            {
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 5, 1, 20);
              (*(void (__cdecl **)(int, _DWORD, int, int))(*(_DWORD *)a2 + 92))(a2, 0, 1, 2);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 2, 1, 2);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 4, 1, 2);
            }
            else if ( (this[12] & 0x100000) != 0 )
            {
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 5, 1, 50);
              (*(void (__cdecl **)(int, _DWORD, int, int))(*(_DWORD *)a2 + 92))(a2, 0, 1, 3);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 2, 1, 3);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 4, 1, 3);
            }
            break;
          case 0x200u:
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x200000);
            if ( (this[12] & 0x80000) != 0 )
            {
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 6, 1, 20);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 3, 1, 2);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 1, 1, 2);
            }
            else if ( (this[12] & 0x100000) != 0 )
            {
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 6, 1, 50);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 3, 1, 5);
              (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 1, 1, 5);
            }
            break;
        }
      }
    }
    v4 = *(unsigned __int16 *)(this[10] + 64);
    v3 = this[9];
    v2 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
    CChar::WriteInSight(a2, 5, "ddw", v2, v3, v4);
    CDBSocket::Write(4, "d", this[9]);
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00428770) --------------------------------------------------------
void __thiscall CItemWeapon::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-Ch]
  int v4; // [esp-4h] [ebp-8h]

  if ( CItem::IsState(this, 1) && CPlayer::IsWState(a2, 0) )
  {
    CPlayer::SubWState(0);
    if ( *(_DWORD *)(this[10] + 72) == 21 )
      CPlayer::SubWState(12);
    *((_WORD *)a2 + 526) = 0;
    a2[78] = 0;
    CItem::SubState(this, 1);
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
    if ( (this[12] & 0x7FF00) != 0 )
    {
      if ( (this[12] & 0x100) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x100000);
        if ( CChar::IsGState(a2, 0x80000000) )
        {
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 5, 0, 50);
          (*(void (__cdecl **)(_DWORD *, _DWORD, _DWORD, int))(*a2 + 92))(a2, 0, 0, 3);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 2, 0, 3);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 4, 0, 3);
        }
        else
        {
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 5, 0, 20);
          (*(void (__cdecl **)(_DWORD *, _DWORD, _DWORD, int))(*a2 + 92))(a2, 0, 0, 2);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 2, 0, 2);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 4, 0, 2);
        }
      }
      else if ( (this[12] & 0x200) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x200000);
        if ( CChar::IsGState(a2, 0x80000000) )
        {
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 6, 0, 50);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 3, 0, 5);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 1, 0, 5);
        }
        else
        {
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 6, 0, 20);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 3, 0, 2);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 1, 0, 2);
        }
      }
      else if ( (this[12] & 0x400) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x400000);
      }
      else if ( (this[12] & 0x800) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x800000);
      }
      else if ( (this[12] & 0x1000) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x1000000);
      }
      else if ( (this[12] & 0x2000) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x2000000);
      }
      else if ( (this[12] & 0x4000) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x4000000);
      }
      else if ( (this[12] & 0x8000) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x8000000);
        if ( CChar::IsGState(a2, 0x80000000) )
        {
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 5, 0, 20);
          (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 6, 1, 10);
        }
        else
        {
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 5, 0, 10);
          (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 6, 1, 5);
        }
      }
      else if ( (this[12] & 0x10000) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x10000000);
        if ( CChar::IsGState(a2, 0x80000000) )
        {
          (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 5, 1, 10);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 6, 0, 20);
        }
        else
        {
          (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 5, 1, 5);
          (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 6, 0, 10);
        }
      }
      else if ( (this[12] & 0x20000) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x20000000);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 92))(a2, 27, 0, 50, 50);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 92))(a2, 28, 0, 50, 50);
      }
      else if ( (this[12] & 0x40000) != 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 0x40000000);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 5, 0, 50);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 6, 0, 50);
        (*(void (__cdecl **)(_DWORD *, _DWORD, _DWORD, int))(*a2 + 92))(a2, 0, 0, 6);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 2, 0, 6);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 4, 0, 6);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 3, 0, 10);
        (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 92))(a2, 1, 0, 10);
      }
      if ( (this[12] & 0x100000) != 0 )
        (*(void (__thiscall **)(_DWORD *, unsigned int))(*a2 + 112))(a2, 0x80000000);
    }
    v4 = *(unsigned __int16 *)(this[10] + 64);
    v3 = this[9];
    v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
    CChar::WriteInSight((int)a2, 6, "ddw", v2, v3, v4);
    CDBSocket::Write(5, "d", this[9]);
  }
}
// 428CD0: using guessed type _DWORD __stdcall sub_428CD0(_DWORD);

//----- (00428CD0) --------------------------------------------------------
int __thiscall CPlayer::SubWState(_DWORD *this, char a2)
{
  int result; // eax

  result = this[141] & ~(1 << a2);
  this[141] = result;
  return result;
}

//----- (00428D00) --------------------------------------------------------
void __thiscall sub_428D00(_DWORD *this, int a2, int a3)
{
  this[8] = a2;
  this[9] = a3;
  CDBSocket::Write(
    6,
    "dwbddbbdb",
    this[9],
    *(_DWORD *)(this[10] + 64),
    0,
    this[12],
    this[13],
    this[23],
    this[21],
    this[8],
    2);
}

//----- (00428D70) --------------------------------------------------------
int __thiscall CItemWeapon::UpdateNum(int this, int a2, int a3, int a4)
{
  int v5; // [esp+0h] [ebp-14h]

  if ( a4 + *(_DWORD *)(this + 52) > 0 )
    return *(_DWORD *)(this + 52);
  CPlayer::Write(a2, 9, "ddb", *(_DWORD *)(this + 36), 0, a3);
  if ( a3 == 50 )
  {
    CDBSocket::Write(
      7,
      "dddwbd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(a2 + 452),
      0,
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      50,
      *(_DWORD *)(this + 52));
  }
  else
  {
    if ( *(_DWORD *)(this + 44) )
      v5 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v5 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      (unsigned __int8)*(_DWORD *)(this + 100) | ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16) | (v5 << 24),
      ((unsigned __int8)*(_DWORD *)(this + 112) << 8) | ((unsigned __int8)*(_DWORD *)(this + 104) << 24),
      ((unsigned __int8)*(_DWORD *)(this + 128) << 8) | ((unsigned __int8)*(_DWORD *)(this + 124) << 16) | ((unsigned __int8)*(_DWORD *)(this + 120) << 24));
  }
  *(_DWORD *)(this + 52) = 0;
  CBase::Delete((char *)this);
  return 0;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00428F00) --------------------------------------------------------
BOOL __thiscall CItemDefense::CanSell(_DWORD *this, int a2)
{
  BOOL result; // eax

  if ( CItem::IsState(this, 1) )
    result = 0;
  else
    result = CItem::CanSell(this, a2);
  return result;
}

//----- (00428F30) --------------------------------------------------------
int __thiscall CItemWeapon::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-24h]
  __int16 v6; // [esp+8h] [ebp-1Ch] BYREF
  int v7; // [esp+Ah] [ebp-1Ah]
  char v8; // [esp+Eh] [ebp-16h]
  int v9; // [esp+Fh] [ebp-15h]
  int v10; // [esp+13h] [ebp-11h]
  char v11; // [esp+17h] [ebp-Dh]
  char v12; // [esp+18h] [ebp-Ch]
  char v13; // [esp+19h] [ebp-Bh]
  char v14; // [esp+1Ah] [ebp-Ah]
  char v15; // [esp+1Bh] [ebp-9h]
  char v16; // [esp+1Ch] [ebp-8h]
  char v17; // [esp+1Dh] [ebp-7h]
  char v18; // [esp+1Eh] [ebp-6h]
  char v19; // [esp+1Fh] [ebp-5h]
  char v20; // [esp+20h] [ebp-4h]
  char v21; // [esp+21h] [ebp-3h]

  if ( CItem::IsState((_DWORD *)this, 1) )
    return 0;
  v6 = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
  v7 = *(_DWORD *)(this + 36);
  if ( *(_DWORD *)(this + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
  else
    LOBYTE(v4) = 0;
  v8 = v4;
  v9 = *(_DWORD *)(this + 48);
  v10 = *(_DWORD *)(this + 52);
  v11 = *(_BYTE *)(this + 92);
  v12 = *(_BYTE *)(this + 96);
  v13 = *(_BYTE *)(this + 84);
  v14 = *(_BYTE *)(this + 100);
  v15 = *(_BYTE *)(this + 104);
  v16 = *(_BYTE *)(this + 108);
  v17 = *(_BYTE *)(this + 112);
  v18 = *(_BYTE *)(this + 116);
  v19 = *(_BYTE *)(this + 120);
  v20 = *(_BYTE *)(this + 124);
  v21 = *(_BYTE *)(this + 128);
  CPlayer::_StorageIn(&v6, *(_DWORD *)(this + 36), 0);
  CDBSocket::Write(
    11,
    "dddbd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(a2 + 448),
    0,
    *(_DWORD *)(this + 52));
  CBase::Delete((char *)this);
  return 1;
}
// 45EA00: using guessed type _DWORD __stdcall sub_45EA00(_DWORD, _DWORD, _DWORD);

//----- (00429060) --------------------------------------------------------
void __thiscall CItemWeapon::ForcedStorageIn(_DWORD *this, int a2, int a3, const char *a4, int a5)
{
  LONG v5; // eax
  int v6; // [esp-24h] [ebp-34h]
  int v7; // [esp-1Ch] [ebp-2Ch]
  int v8; // [esp-18h] [ebp-28h]
  int v9; // [esp-14h] [ebp-24h]
  int v10; // [esp-10h] [ebp-20h]
  const char *v11; // [esp+0h] [ebp-10h]
  int v12; // [esp+4h] [ebp-Ch]

  if ( this[11] )
    v12 = *(_DWORD *)(this[11] + 32);
  else
    v12 = 0;
  if ( a4 )
    v11 = a4;
  else
    v11 = &Src;
  v10 = this[21];
  v9 = this[23];
  v8 = this[13];
  v7 = this[12];
  v6 = *(_DWORD *)(this[10] + 64);
  v5 = CItem::NewIID();
  CDBSocket::Write(35, "bdwbddbbdds", a2, v5, v6, v12, v7, v8, v9, v10, a3, a5, v11);
}

//----- (00429100) --------------------------------------------------------
signed int __thiscall CItemWeapon::Charming(_DWORD *this, int a2, int a3)
{
  signed int result; // eax
  int v4; // esi
  int v5; // esi
  int v6; // esi
  int v7; // [esp+4h] [ebp-40h]
  int v8; // [esp+8h] [ebp-3Ch]
  int v9; // [esp+Ch] [ebp-38h]
  int v10; // [esp+10h] [ebp-34h]
  int v11; // [esp+14h] [ebp-30h]
  int v13; // [esp+38h] [ebp-Ch]
  int v14; // [esp+3Ch] [ebp-8h]
  int v15; // [esp+40h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState(this, 1) )
    return 0;
  v15 = CItem::IsState(this, 64);
  if ( a3 == 9 )
  {
    if ( (int)this[28] < 20 )
    {
      v6 = this[28];
      if ( dword_4D5C48[v6] >= RandomBetween(1, 10000000) )
      {
        CDBSocket::Write(17, "ddbbb", this[9], this[8], 9, ++this[28], v15);
        goto LABEL_22;
      }
    }
    goto LABEL_25;
  }
  if ( a3 == 27 )
  {
    if ( (int)this[25] < 20 )
    {
      v4 = this[25];
      if ( dword_4D5B88[v4] >= RandomBetween(1, 10000000) )
      {
        CDBSocket::Write(17, "ddbbb", this[9], this[8], a3, ++this[25], v15);
        goto LABEL_22;
      }
    }
LABEL_25:
    if ( v15 )
    {
      CDBSocket::Write(21, "dddbb", this[9], this[8], 64, 0, a3);
      CItem::SubState(this, 64);
      CItem::SendItemInfo(this, a2, 92);
      result = 1;
    }
    else
    {
      if ( RandomBetween(1, 100) > 90 )
      {
        this[24] = 0;
      }
      else
      {
        v13 = RandomBetween(1, 100);
        if ( v13 <= 50 )
        {
          if ( v13 <= 20 )
            v14 = 3;
          else
            v14 = 2;
        }
        else
        {
          v14 = 1;
        }
        this[24] -= v14;
      }
      if ( (int)this[24] <= 0 )
      {
        CPlayer::Write(a2, 91, "db", this[9], 0);
        if ( this[11] )
          v11 = *(_DWORD *)(this[11] + 32);
        else
          v11 = 0;
        CDBSocket::Write(
          3,
          "ddwdbddd",
          this[9],
          this[8],
          *(_DWORD *)(this[10] + 64),
          this[13],
          21,
          (unsigned __int8)this[25] | ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v11 << 24),
          ((unsigned __int8)this[28] << 8) | ((unsigned __int8)this[26] << 24),
          ((unsigned __int8)this[32] << 8) | ((unsigned __int8)this[31] << 16) | ((unsigned __int8)this[30] << 24));
        if ( CItem::GetLevel(this) - 40 >= 20 )
          v10 = 20;
        else
          v10 = CItem::GetLevel(this) - 40;
        if ( *(_DWORD *)(this[10] + 72) == 1 )
        {
          if ( (int)this[26] >= 20 )
            v9 = 20;
          else
            v9 = this[26];
          v8 = v9;
        }
        else
        {
          if ( (int)this[25] >= 20 )
            v7 = 20;
          else
            v7 = this[25];
          v8 = v7;
        }
        CItem::InsertItem(a2, 21, 517, 0, dword_4D5F90[v8] + dword_4D5F38[v10], -1);
        CBase::Delete((char *)this);
      }
      else
      {
        CPlayer::Write(a2, 91, "db", this[9], this[24]);
        CDBSocket::Write(18, "ddb", this[9], this[8], this[24]);
      }
      result = 1;
    }
    return result;
  }
  if ( a3 != 28 )
    return 0;
  if ( *(_DWORD *)(this[10] + 72) != 1 )
    return 0;
  if ( (int)this[26] >= 20 )
    goto LABEL_25;
  v5 = this[26];
  if ( dword_4D5B88[v5] < RandomBetween(1, 10000000) )
    goto LABEL_25;
  CDBSocket::Write(17, "ddbbb", this[9], this[8], a3, ++this[26], v15);
LABEL_22:
  if ( v15 )
    CItem::SubState(this, 64);
  CItem::SendItemInfo(this, a2, 92);
  return 1;
}
// 4295B0: using guessed type int __thiscall sub_4295B0(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (004295B0) --------------------------------------------------------
int __thiscall CItem::GetLevel(_DWORD *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( this[11] )
    v2 = *(_DWORD *)(this[11] + 36);
  else
    v2 = 0;
  return v2 + *(_DWORD *)(this[10] + 80);
}

//----- (004295F0) --------------------------------------------------------
int __thiscall CItemWeapon::CharmingCheat(_DWORD *this, int a2, int a3, int a4)
{
  int v6; // [esp+8h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState(this, 1) )
    return 0;
  v6 = CItem::IsState(this, 64);
  switch ( a3 )
  {
    case 9:
      this[28] = a4;
      CDBSocket::Write(17, "ddbbb", this[9], this[8], 9, this[28], v6);
      break;
    case 27:
      this[25] = a4;
      CDBSocket::Write(17, "ddbbb", this[9], this[8], 27, this[25], v6);
      break;
    case 28:
      if ( *(_DWORD *)(this[10] + 72) != 1 )
        return 0;
      this[26] = a4;
      CDBSocket::Write(17, "ddbbb", this[9], this[8], a3, this[26], v6);
      break;
    default:
      return 0;
  }
  CItem::SendItemInfo(this, a2, 92);
  return 1;
}

//----- (00429730) --------------------------------------------------------
int __thiscall CItemDefense::Repair(_DWORD *this, int a2)
{
  if ( this[24] >= this[23] )
    return 0;
  CPlayer::Write(a2, 91, "db", this[9], ++this[24]);
  CDBSocket::Write(18, "ddb", this[9], this[8], this[24]);
  return 1;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (004297B0) --------------------------------------------------------
int __thiscall CItemWeapon::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v6; // [esp+0h] [ebp-4Ch]
  int v7; // [esp+4h] [ebp-48h]
  int v8; // [esp+8h] [ebp-44h]
  int v9; // [esp+Ch] [ebp-40h]
  int v10; // [esp+10h] [ebp-3Ch]
  int v11; // [esp+14h] [ebp-38h]
  int v13; // [esp+34h] [ebp-18h]
  int i; // [esp+38h] [ebp-14h]
  int v15; // [esp+3Ch] [ebp-10h]
  int v16; // [esp+40h] [ebp-Ch]
  int v17; // [esp+48h] [ebp-4h]

  if ( CItem::IsState(this, 1) || a3 > 0 )
    return 0;
  if ( this[11] )
    v11 = *(_DWORD *)(this[11] + 32);
  else
    v11 = 0;
  v15 = v11;
  v16 = RandomBetween(1, 100);
  v17 = CItem::IsState(this, 64);
  for ( i = 0; i < 2; ++i )
  {
    if ( v16 <= *(_DWORD *)(a4 + 4 * i) )
    {
      v15 = *(_DWORD *)(a5 + 4 * i);
      break;
    }
  }
  if ( v11 == v15 )
  {
    if ( v17 )
    {
      CDBSocket::Write(21, "dddbb", this[9], this[8], 64, 0, 255);
      CItem::SubState(this, 64);
      CItem::SendItemInfo(this, a2, 92);
      return 1;
    }
    this[24] -= 5;
    if ( (int)this[24] <= 0 )
    {
      CPlayer::Write(a2, 91, "db", this[9], 0);
      if ( this[11] )
        v10 = *(_DWORD *)(this[11] + 32);
      else
        v10 = 0;
      CDBSocket::Write(
        3,
        "ddwdbddd",
        this[9],
        this[8],
        *(_DWORD *)(this[10] + 64),
        this[13],
        27,
        (unsigned __int8)this[25] | ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v10 << 24),
        ((unsigned __int8)this[28] << 8) | ((unsigned __int8)this[26] << 24),
        ((unsigned __int8)this[32] << 8) | ((unsigned __int8)this[31] << 16) | ((unsigned __int8)this[30] << 24));
      if ( CItem::GetLevel(this) >= 40 )
      {
        if ( CItem::GetLevel(this) - 40 >= 20 )
          v9 = 20;
        else
          v9 = CItem::GetLevel(this) - 40;
        if ( *(_DWORD *)(this[10] + 72) == 1 )
        {
          if ( (int)this[26] >= 20 )
            v8 = 20;
          else
            v8 = this[26];
          v7 = v8;
        }
        else
        {
          if ( (int)this[25] >= 20 )
            v6 = 20;
          else
            v6 = this[25];
          v7 = v6;
        }
        CItem::InsertItem(a2, 27, 517, 0, dword_4D5F90[v7] + dword_4D5F38[v9], -1);
      }
      CBase::Delete((char *)this);
    }
    else
    {
      CPlayer::Write(a2, 91, "db", this[9], this[24]);
      CDBSocket::Write(18, "ddb", this[9], this[8], this[24]);
    }
  }
  else
  {
    v13 = CItem::FindPrefix(v15);
    if ( !v13 )
      return 0;
    this[11] = v13;
    CDBSocket::Write(19, "ddbb", this[9], this[8], v15, v17);
    if ( v17 )
      CItem::SubState(this, 64);
    CItem::SendItemInfo(this, a2, 92);
  }
  return 1;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00429B60) --------------------------------------------------------
int __thiscall CItemWeapon::Protect(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-10h]
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h]

  if ( CItem::GetLevel(this) < 40
    || dword_4E35B8 != 2 && this[30] >= *(_DWORD *)(this[10] + 168)
    || CItem::IsState(this, 65) )
  {
    return 0;
  }
  if ( this[11] )
    v3 = *(_DWORD *)(this[11] + 32);
  else
    v3 = 0;
  v5 = (unsigned __int8)this[25] | ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v3 << 24);
  v6 = ((unsigned __int8)this[28] << 8) | ((unsigned __int8)this[26] << 24);
  CDBSocket::Write(21, "dddbwddb", this[9], this[8], 64, 1, *(_DWORD *)(this[10] + 64), v5, v6, ++this[30]);
  CItem::AddState(this, 64);
  CItem::SendItemInfo(this, a2, 92);
  return 1;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00429C90) --------------------------------------------------------
int __thiscall CItemWeapon::GetSellMoney(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = *(_DWORD *)(this[10] + 112);
  if ( this[11] )
    v3 += *(_DWORD *)(this[11] + 40) * v3 / 100;
  if ( this[25] )
    v3 += 100 * this[25] * this[25] * this[25];
  if ( this[26] )
    v3 += 100 * this[26] * this[26] * this[26];
  if ( this[28] )
    v3 += 200 * this[28] * this[28] * this[28];
  return v3;
}

//----- (00429D50) --------------------------------------------------------
int __thiscall CItemWeapon::UpgradeDestroy(CIOObject *this, int a2)
{
  int result; // eax
  int v3; // [esp+0h] [ebp-20h]
  int v4; // [esp+4h] [ebp-1Ch]
  int v5; // [esp+8h] [ebp-18h]
  int v6; // [esp+Ch] [ebp-14h]

  result = CItem::GetLevel(this);
  if ( result >= 40 )
  {
    result = CItem::IsState(this, 1);
    if ( !result )
    {
      result = (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)this + 88))(this, a2, 45);
      if ( result )
      {
        if ( CItem::GetLevel(this) - 40 >= 20 )
          v6 = 20;
        else
          v6 = CItem::GetLevel(this) - 40;
        if ( *(_DWORD *)(*((_DWORD *)this + 10) + 72) == 1 )
        {
          if ( *((int *)this + 26) >= 20 )
            v5 = 20;
          else
            v5 = *((_DWORD *)this + 26);
          v4 = v5;
        }
        else
        {
          if ( *((int *)this + 25) >= 20 )
            v3 = 20;
          else
            v3 = *((_DWORD *)this + 25);
          v4 = v3;
        }
        CItem::InsertItem(a2, 45, 517, 0, dword_4D5F90[v4] + dword_4D5F38[v6], -1);
        result = CPlayer::_OutofInven(this);
      }
    }
  }
  return result;
}
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);

//----- (00429E60) --------------------------------------------------------
void __thiscall CItemWeapon::UpgradeRateUp(_DWORD *this, int a2)
{
  int v2; // [esp+0h] [ebp-18h]
  int v3; // [esp+4h] [ebp-14h]
  int v4; // [esp+8h] [ebp-10h]
  int v6; // [esp+10h] [ebp-8h]
  CIOObject *v7; // [esp+14h] [ebp-4h]

  if ( CItem::GetLevel(this) >= 40 && !CItem::IsState(this, 1) )
  {
    v4 = (int)this[31] >= 19 ? 19 : this[31];
    v3 = (int)this[31] >= 19 ? 19 : this[31];
    if ( dword_4D5E40[v4] + this[32] * dword_4D5E90[v3] < 100 )
    {
      v2 = (int)this[31] >= 19 ? 19 : this[31];
      v6 = dword_4D5EE8[v2];
      v7 = (CIOObject *)CPlayer::_FindItem(517, v6);
      if ( v7 )
      {
        if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v7 + 120))(v7, a2, 46, -v6) )
          CPlayer::_OutofInven(v7);
        CDBSocket::Write(28, "ddbb", this[9], this[8], 1, ++this[32]);
        CItem::SendItemInfo(this, a2, 92);
      }
    }
  }
}
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);
// 45D1E0: using guessed type _DWORD __stdcall sub_45D1E0(_DWORD, _DWORD);

//----- (00429FB0) --------------------------------------------------------
void __thiscall CItemWeapon::UpgradeLevel(CIOObject *this, int a2)
{
  int v2; // esi
  int v3; // [esp+4h] [ebp-30h]
  int v4; // [esp+Ch] [ebp-28h]
  int v5; // [esp+10h] [ebp-24h]
  int v6; // [esp+14h] [ebp-20h]
  int v8; // [esp+28h] [ebp-Ch]
  int v9; // [esp+2Ch] [ebp-8h]
  CIOObject *v10; // [esp+30h] [ebp-4h]

  if ( CItem::GetLevel(this) >= 40 && !CItem::IsState(this, 1) )
  {
    v6 = *(_DWORD *)(*((_DWORD *)this + 10) + 72) == 1 ? *((_DWORD *)this + 26) : *((_DWORD *)this + 25);
    if ( *((_DWORD *)this + 31) < v6 )
    {
      v9 = 1500 * (*((_DWORD *)this + 31) + 1);
      v10 = (CIOObject *)CPlayer::_FindItem(31, v9);
      if ( v10 )
      {
        if ( *((int *)this + 31) >= 19 )
          v5 = 19;
        else
          v5 = *((_DWORD *)this + 31);
        if ( *((int *)this + 31) >= 19 )
          v4 = 19;
        else
          v4 = *((_DWORD *)this + 31);
        v2 = dword_4D5E40[v5] + *((_DWORD *)this + 32) * dword_4D5E90[v4];
        if ( v2 < RandomBetween(1, 100) )
        {
          v8 = RandomBetween(1, 100);
          if ( v8 > 60 )
          {
            if ( v8 > 90 )
            {
              CPlayer::Write(a2, 68, "bd", 82, *((_DWORD *)this + 9));
              if ( *((_DWORD *)this + 11) )
                v3 = *(_DWORD *)(*((_DWORD *)this + 11) + 32);
              else
                v3 = 0;
              CDBSocket::Write(
                3,
                "ddwdbddd",
                *((_DWORD *)this + 9),
                *((_DWORD *)this + 8),
                *(_DWORD *)(*((_DWORD *)this + 10) + 64),
                *((_DWORD *)this + 13),
                47,
                (unsigned __int8)*((_DWORD *)this + 25) | ((unsigned __int8)*((_DWORD *)this + 21) << 8) | ((unsigned __int8)*((_DWORD *)this + 23) << 16) | (v3 << 24),
                ((unsigned __int8)*((_DWORD *)this + 28) << 8) | ((unsigned __int8)*((_DWORD *)this + 26) << 24),
                ((unsigned __int8)*((_DWORD *)this + 32) << 8) | ((unsigned __int8)*((_DWORD *)this + 31) << 16) | ((unsigned __int8)*((_DWORD *)this + 30) << 24));
              CPlayer::_OutofInven(this);
              CBase::Delete((char *)this);
            }
            else
            {
              *((_DWORD *)this + 32) = 0;
              if ( *((int *)this + 31) <= 0 )
                CDBSocket::Write(28, "ddbb", *((_DWORD *)this + 9), *((_DWORD *)this + 8), 2, 0);
              else
                CDBSocket::Write(28, "ddbb", *((_DWORD *)this + 9), *((_DWORD *)this + 8), 2, --*((_DWORD *)this + 31));
              CItem::SendItemInfo(this, a2, 92);
            }
          }
          else
          {
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v10 + 120))(v10, a2, 47, -v9) )
              CPlayer::_OutofInven(v10);
            CPlayer::Write(a2, 67, "b", 81);
          }
        }
        else
        {
          if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v10 + 120))(v10, a2, 47, -v9) )
            CPlayer::_OutofInven(v10);
          *((_DWORD *)this + 32) = 0;
          CDBSocket::Write(28, "ddbb", *((_DWORD *)this + 9), *((_DWORD *)this + 8), 2, ++*((_DWORD *)this + 31));
          CItem::SendItemInfo(this, a2, 92);
        }
      }
    }
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);
// 45D1E0: using guessed type _DWORD __stdcall sub_45D1E0(_DWORD, _DWORD);

//----- (0042A310) --------------------------------------------------------
_DWORD *__thiscall CItemDefense::CItemDefense(_DWORD *this, int a2)
{
  CItem::CItem(this);
  *this = &off_4B6E58;
  this[10] = a2;
  this[23] = 0;
  this[24] = 0;
  this[25] = 0;
  this[26] = 0;
  this[27] = 0;
  this[28] = 0;
  this[29] = 0;
  this[30] = 0;
  return this;
}
// 4B6E58: using guessed type int (__stdcall *off_4B6E58)(int);

//----- (0042A390) --------------------------------------------------------
void *__thiscall CItemGeneral::_scalar_deleting_destructor_(void *this, char a2)
{
  CItemGeneral::_CItemGeneral(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0042A3C0) --------------------------------------------------------
void **__thiscall CItemDefense::PutInfo(int this, void **a2, int a3)
{
  void *v3; // eax
  void **result; // eax

  if ( !a3 )
    a3 = *(_DWORD *)(this + 52);
  *a2 = (void *)sub_44F9B0(*a2, *(_DWORD *)(this + 36));
  *a2 = (void *)sub_42F960(*a2, *(_WORD *)(*(_DWORD *)(this + 40) + 64));
  if ( *(_DWORD *)(this + 44) )
    v3 = (void *)sub_4189A0(*a2, *(_DWORD *)(*(_DWORD *)(this + 44) + 32));
  else
    v3 = (void *)sub_4189A0(*a2, 0);
  *a2 = v3;
  *a2 = (void *)sub_44F9B0(*a2, *(_DWORD *)(this + 48));
  *a2 = (void *)sub_44F9B0(*a2, a3);
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 92));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 96));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 84));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 100));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 104));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 108));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 112));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 116));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 120));
  memset(*a2, 0, 2u);
  result = a2;
  *a2 = (char *)*a2 + 2;
  return result;
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 42F960: using guessed type _DWORD __cdecl sub_42F960(_DWORD, __int16);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0042A590) --------------------------------------------------------
int __thiscall CItemDefense::Init2(_DWORD *this, int a2, _DWORD *a3)
{
  int result; // eax
  int v5; // [esp+4h] [ebp-4h] BYREF

  this[8] = a2;
  v5 = 0;
  *a3 = sub_47A240(*a3, this + 9);
  *a3 = sub_418960(*a3, &v5);
  *a3 = sub_47A240(*a3, this + 12);
  *a3 = sub_47A240(*a3, this + 13);
  *a3 = sub_418960(*a3, this + 23);
  *a3 = sub_418960(*a3, this + 24);
  *a3 = sub_418960(*a3, this + 21);
  *a3 = sub_418960(*a3, this + 25);
  *a3 = sub_418960(*a3, this + 26);
  *a3 = sub_418960(*a3, this + 27);
  *a3 = sub_418960(*a3, this + 28);
  *a3 = sub_418960(*a3, this + 29);
  *a3 = sub_418960(*a3, this + 30);
  *a3 += 2;
  if ( (int)this[25] > 20 )
  {
    this[25] = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXAttack:%d)", a2, this[25]);
  }
  if ( (int)this[26] > 20 )
  {
    this[26] = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXMagic:%d)", a2, this[26]);
  }
  if ( (int)this[27] > 10 )
  {
    this[27] = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXDefense:%d)", a2, this[27]);
  }
  if ( (int)this[28] > 20 )
  {
    this[28] = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXHit:%d)", a2, this[28]);
  }
  if ( (int)this[29] > 1 )
  {
    this[29] = 0;
    LOG_ERR("CItemDefense::Init() Error (PID:%d m_nXDodge:%d)", a2, this[29]);
  }
  result = CItem::FindPrefix(v5);
  this[11] = result;
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (0042A800) --------------------------------------------------------
void __thiscall CItemDefense::SetWearState(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    if ( *(int *)(this[10] + 96) >= 0 && *(_DWORD *)(this[10] + 96) != a2[115]
      || *(_DWORD *)(this[10] + 100) > a2[15]
      || (v3 = *(_DWORD *)(this[10] + 72) - 2, CPlayer::IsWState(a2, v3))
      || *(_DWORD *)(this[10] + 72) == 3 && CPlayer::IsWState(a2, 12) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(5, "d", this[9]);
    }
    else
    {
      CPlayer::AddWState(a2, v3);
      *((_WORD *)a2 + v3 + 526) = *(_WORD *)(this[10] + 64);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
    }
  }
}

//----- (0042A8F0) --------------------------------------------------------
int __thiscall CItemDefense::Trash(int this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-14h]

  if ( CItem::IsState((_DWORD *)this, 1) )
  {
    CPlayer::Write(a2, 67, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, 8, "db", *(_DWORD *)(this + 36), a3);
    if ( *(_DWORD *)(this + 44) )
      v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v4 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16) | (v4 << 24),
      (unsigned __int8)*(_DWORD *)(this + 116) | ((unsigned __int8)*(_DWORD *)(this + 108) << 16),
      (unsigned __int8)*(_DWORD *)(this + 120) << 24);
    CBase::Delete((char *)this);
    result = 1;
  }
  return result;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042AA10) --------------------------------------------------------
int __thiscall CItemDefense::Erase(int this, int a2)
{
  int v3; // [esp+0h] [ebp-14h]

  if ( *(_DWORD *)(this + 36) )
  {
    if ( *(_DWORD *)(this + 44) )
      v3 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v3 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a2,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16) | (v3 << 24),
      (unsigned __int8)*(_DWORD *)(this + 116) | ((unsigned __int8)*(_DWORD *)(this + 108) << 16),
      (unsigned __int8)*(_DWORD *)(this + 120) << 24);
  }
  return CBase::Delete((char *)this);
}

//----- (0042AAF0) --------------------------------------------------------
int __thiscall CItemDefense::ApplySpec(int *this, int a2)
{
  int result; // eax

  result = CInitItem::ApplySpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::ApplySpec(this[11], a2);
  if ( this[27] )
    result = (*(int (__cdecl **)(int, int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 15, 1, this[27], this[27]);
  if ( this[29] )
    result = (*(int (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, 10, 1, this[29]);
  return result;
}

//----- (0042AB80) --------------------------------------------------------
int __thiscall CItemDefense::FreeSpec(int *this, int a2)
{
  int result; // eax

  result = CInitItem::FreeSpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::FreeSpec(this[11], a2);
  if ( this[27] )
    result = (*(int (__cdecl **)(int, int, _DWORD, int, int))(*(_DWORD *)a2 + 92))(a2, 15, 0, this[27], this[27]);
  if ( this[29] )
    result = (*(int (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 92))(a2, 10, 0, this[29]);
  return result;
}

//----- (0042AC10) --------------------------------------------------------
void __thiscall CItemDefense::PutOn(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( (*(int *)(this[10] + 96) < 0 || *(_DWORD *)(this[10] + 96) == a2[115]) && *(_DWORD *)(this[10] + 100) <= a2[15] )
  {
    if ( !CItem::IsState(this, 1) )
    {
      v6 = *(_DWORD *)(this[10] + 72) - 2;
      if ( CPlayer::IsWState(a2, v6) )
      {
        CPlayer::Write(a2, 67, "b", 10);
      }
      else if ( *(_DWORD *)(this[10] + 72) != 3 || !CPlayer::IsWState(a2, 12) )
      {
        CPlayer::AddWState(a2, v6);
        *((_WORD *)a2 + v6 + 526) = *(_WORD *)(this[10] + 64);
        CItem::AddState(this, 1);
        (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
        v4 = *(unsigned __int16 *)(this[10] + 64);
        v3 = this[9];
        v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CChar::WriteInSight((int)a2, 5, "ddw", v2, v3, v4);
        CDBSocket::Write(4, "d", this[9]);
      }
    }
  }
  else
  {
    CPlayer::Write(a2, 67, "b", 12);
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042AD60) --------------------------------------------------------
void __thiscall CItemDefense::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    v6 = *(_DWORD *)(this[10] + 72) - 2;
    if ( CPlayer::IsWState(a2, v6) )
    {
      CPlayer::SubWState(a2, v6);
      *((_WORD *)a2 + v6 + 526) = 0;
      CItem::SubState(this, 1);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
      v4 = *(unsigned __int16 *)(this[10] + 64);
      v3 = this[9];
      v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
      CChar::WriteInSight((int)a2, 6, "ddw", v2, v3, v4);
      CDBSocket::Write(5, "d", this[9]);
    }
  }
}

//----- (0042AE20) --------------------------------------------------------
void __thiscall sub_42AE20(_DWORD *this, int a2, int a3)
{
  this[8] = a2;
  this[9] = a3;
  CDBSocket::Write(
    6,
    "dwbbdbbdb",
    this[9],
    *(_DWORD *)(this[10] + 64),
    0,
    this[12],
    this[13],
    this[23],
    this[21],
    this[8],
    2);
}

//----- (0042AE90) --------------------------------------------------------
void __thiscall CItemDefense::Insert(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // [esp+0h] [ebp-10h]
  int v6; // [esp+Ch] [ebp-4h]

  v6 = this[8];
  this[8] = *(_DWORD *)(a2 + 452);
  if ( a3 == 10 )
    this[12] &= 0xFFFFFFFB;
  CItem::SendItemInfo(this, a2, 7);
  if ( a4 )
  {
    CDBSocket::Write(7, "dddwbd", this[9], v6, this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  }
  else
  {
    if ( this[11] )
      v4 = *(_DWORD *)(this[11] + 32);
    else
      v4 = 0;
    CDBSocket::Write(
      6,
      "dwbddbbdb",
      this[9],
      *(_DWORD *)(this[10] + 64),
      v4,
      this[12],
      this[13],
      this[23],
      this[21],
      this[8],
      a3);
  }
}

//----- (0042AF90) --------------------------------------------------------
int __thiscall CItemDefense::UpdateNum(int this, int a2, int a3, int a4)
{
  int v5; // [esp+0h] [ebp-14h]

  if ( a4 + *(_DWORD *)(this + 52) > 0 )
    return *(_DWORD *)(this + 52);
  CPlayer::Write(a2, 9, "ddb", *(_DWORD *)(this + 36), 0, a3);
  if ( a3 == 50 )
  {
    CDBSocket::Write(
      7,
      "dddwbd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(a2 + 452),
      0,
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      50,
      *(_DWORD *)(this + 52));
  }
  else
  {
    if ( *(_DWORD *)(this + 44) )
      v5 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v5 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16) | (v5 << 24),
      (unsigned __int8)*(_DWORD *)(this + 116) | ((unsigned __int8)*(_DWORD *)(this + 108) << 16),
      (unsigned __int8)*(_DWORD *)(this + 120) << 24);
  }
  *(_DWORD *)(this + 52) = 0;
  CBase::Delete((char *)this);
  return 0;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042B0F0) --------------------------------------------------------
int __thiscall CItemDefense::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-24h]
  __int16 v6; // [esp+8h] [ebp-1Ch] BYREF
  int v7; // [esp+Ah] [ebp-1Ah]
  char v8; // [esp+Eh] [ebp-16h]
  int v9; // [esp+Fh] [ebp-15h]
  int v10; // [esp+13h] [ebp-11h]
  char v11; // [esp+17h] [ebp-Dh]
  char v12; // [esp+18h] [ebp-Ch]
  char v13; // [esp+19h] [ebp-Bh]
  char v14; // [esp+1Ah] [ebp-Ah]
  char v15; // [esp+1Bh] [ebp-9h]
  char v16; // [esp+1Ch] [ebp-8h]
  char v17; // [esp+1Dh] [ebp-7h]
  char v18; // [esp+1Eh] [ebp-6h]
  char v19; // [esp+1Fh] [ebp-5h]
  char v20; // [esp+20h] [ebp-4h]
  char v21; // [esp+21h] [ebp-3h]

  if ( CItem::IsState((_DWORD *)this, 1) )
    return 0;
  v6 = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
  v7 = *(_DWORD *)(this + 36);
  if ( *(_DWORD *)(this + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
  else
    LOBYTE(v4) = 0;
  v8 = v4;
  v9 = *(_DWORD *)(this + 48);
  v10 = *(_DWORD *)(this + 52);
  v11 = *(_BYTE *)(this + 92);
  v12 = *(_BYTE *)(this + 96);
  v13 = *(_BYTE *)(this + 84);
  v14 = *(_BYTE *)(this + 100);
  v15 = *(_BYTE *)(this + 104);
  v16 = *(_BYTE *)(this + 108);
  v17 = *(_BYTE *)(this + 112);
  v18 = *(_BYTE *)(this + 116);
  v19 = *(_BYTE *)(this + 120);
  v20 = 0;
  v21 = 0;
  CPlayer::_StorageIn(&v6, *(_DWORD *)(this + 36), 0);
  CDBSocket::Write(
    11,
    "dddbd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(a2 + 448),
    0,
    *(_DWORD *)(this + 52));
  CBase::Delete((char *)this);
  return 1;
}
// 45EA00: using guessed type _DWORD __stdcall sub_45EA00(_DWORD, _DWORD, _DWORD);

//----- (0042B210) --------------------------------------------------------
int __thiscall CItemDefense::Charming(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // esi
  int v5; // esi
  int v6; // [esp+4h] [ebp-34h]
  int v7; // [esp+8h] [ebp-30h]
  int v8; // [esp+Ch] [ebp-2Ch]
  int v9; // [esp+10h] [ebp-28h]
  int v11; // [esp+24h] [ebp-14h]
  int v12; // [esp+2Ch] [ebp-Ch]
  int v13; // [esp+30h] [ebp-8h]
  int v14; // [esp+34h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState(this, 1) )
    return 0;
  v14 = CItem::IsState(this, 64);
  if ( a3 == 10 )
  {
    if ( (int)this[29] >= 1 || (v5 = this[29], dword_4D5C48[v5] < RandomBetween(1, 10000000)) )
    {
LABEL_18:
      if ( v14 )
      {
        CDBSocket::Write(21, "dddbb", this[9], this[8], 64, 0, a3);
        CItem::SubState(this, 64);
        CItem::SendItemInfo(this, a2, 92);
        result = 1;
      }
      else
      {
        if ( RandomBetween(1, 100) > 90 )
        {
          this[24] = 0;
        }
        else
        {
          v12 = RandomBetween(1, 100);
          if ( v12 <= 50 )
          {
            if ( v12 <= 20 )
              v13 = 3;
            else
              v13 = 2;
          }
          else
          {
            v13 = 1;
          }
          this[24] -= v13;
        }
        if ( (int)this[24] <= 0 )
        {
          CPlayer::Write(a2, 91, "db", this[9], 0);
          if ( this[11] )
            v9 = *(_DWORD *)(this[11] + 32);
          else
            v9 = 0;
          CDBSocket::Write(
            3,
            "ddwdbddd",
            this[9],
            this[8],
            *(_DWORD *)(this[10] + 64),
            this[13],
            21,
            ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v9 << 24),
            (unsigned __int8)this[29] | ((unsigned __int8)this[27] << 16),
            (unsigned __int8)this[30] << 24);
          v11 = 0;
          if ( *(_DWORD *)(this[10] + 72) == 3 )
          {
            if ( CItem::GetLevel(this) >= 44 )
            {
              if ( CItem::GetLevel(this) - 40 >= 20 )
                v8 = 20;
              else
                v8 = CItem::GetLevel(this) - 40;
              if ( (int)this[27] >= 10 )
                v7 = 10;
              else
                v7 = this[27];
              v11 = dword_4D603C[v7] + dword_4D5FE8[v8];
            }
          }
          else
          {
            if ( (int)this[27] >= 10 )
              v6 = 10;
            else
              v6 = this[27];
            v11 = dword_4D603C[v6] + (*(_DWORD *)(this[10] + 112) + 1000) / 10000;
          }
          if ( v11 > 0 )
            CItem::InsertItem(a2, 21, 517, 0, v11, -1);
          CBase::Delete((char *)this);
        }
        else
        {
          CPlayer::Write(a2, 91, "db", this[9], this[24]);
          CDBSocket::Write(18, "ddb", this[9], this[8], this[24]);
        }
        result = 1;
      }
      return result;
    }
    CDBSocket::Write(17, "ddbbb", this[9], this[8], 10, ++this[29], v14);
  }
  else
  {
    if ( a3 != 15 )
      return 0;
    if ( (int)this[27] >= 10 )
      goto LABEL_18;
    v4 = this[27];
    if ( dword_4D5BE8[v4] < RandomBetween(1, 10000000) )
      goto LABEL_18;
    CDBSocket::Write(17, "ddbbb", this[9], this[8], a3, ++this[27], v14);
  }
  if ( v14 )
    CItem::SubState(this, 64);
  CItem::SendItemInfo(this, a2, 92);
  return 1;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042B630) --------------------------------------------------------
int __thiscall CItemDefense::CharmingCheat(_DWORD *this, int a2, int a3, int a4)
{
  int v6; // [esp+8h] [ebp-4h]

  if ( CItem::GetLevel(this) < 40 || CItem::IsState(this, 1) )
    return 0;
  v6 = CItem::IsState(this, 64);
  if ( a3 == 10 )
  {
    this[29] = a4;
    CDBSocket::Write(17, "ddbbb", this[9], this[8], 10, this[29], v6);
  }
  else
  {
    if ( a3 != 15 )
      return 0;
    this[27] = a4;
    CDBSocket::Write(17, "ddbbb", this[9], this[8], 15, this[27], v6);
  }
  CItem::SendItemInfo(this, a2, 92);
  return 1;
}

//----- (0042B710) --------------------------------------------------------
int __thiscall CItemDefense::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v6; // [esp+0h] [ebp-40h]
  int v7; // [esp+4h] [ebp-3Ch]
  int v8; // [esp+8h] [ebp-38h]
  int v9; // [esp+Ch] [ebp-34h]
  int v10; // [esp+10h] [ebp-30h]
  int v12; // [esp+18h] [ebp-28h]
  int v13; // [esp+28h] [ebp-18h]
  int i; // [esp+2Ch] [ebp-14h]
  int v15; // [esp+30h] [ebp-10h]
  int v16; // [esp+34h] [ebp-Ch]
  int v17; // [esp+3Ch] [ebp-4h]

  if ( CItem::IsState(this, 1) || a3 >= 0 && a3 != 1 )
    return 0;
  if ( this[11] )
    v10 = *(_DWORD *)(this[11] + 32);
  else
    v10 = 0;
  v15 = v10;
  v16 = RandomBetween(1, 100);
  v17 = CItem::IsState(this, 64);
  for ( i = 0; i < 2; ++i )
  {
    if ( v16 <= *(_DWORD *)(a4 + 4 * i) )
    {
      v15 = *(_DWORD *)(a5 + 4 * i);
      break;
    }
  }
  if ( v10 == v15 )
  {
    if ( v17 )
    {
      CDBSocket::Write(21, "dddbb", this[9], this[8], 64, 0, 255);
      CItem::SubState(this, 64);
      CItem::SendItemInfo(this, a2, 92);
      return 1;
    }
    this[24] -= 5;
    if ( (int)this[24] <= 0 )
    {
      CPlayer::Write(a2, 91, "db", this[9], 0);
      if ( this[11] )
        v9 = *(_DWORD *)(this[11] + 32);
      else
        v9 = 0;
      CDBSocket::Write(
        3,
        "ddwdbddd",
        this[9],
        this[8],
        *(_DWORD *)(this[10] + 64),
        this[13],
        27,
        ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v9 << 24),
        (unsigned __int8)this[29] | ((unsigned __int8)this[27] << 16),
        (unsigned __int8)this[30] << 24);
      if ( CItem::GetLevel(this) >= 40 )
      {
        v12 = 0;
        if ( *(_DWORD *)(this[10] + 72) == 3 )
        {
          if ( CItem::GetLevel(this) >= 44 )
          {
            if ( CItem::GetLevel(this) - 40 >= 20 )
              v8 = 20;
            else
              v8 = CItem::GetLevel(this) - 40;
            if ( (int)this[27] >= 10 )
              v7 = 10;
            else
              v7 = this[27];
            v12 = dword_4D603C[v7] + dword_4D5FE8[v8];
          }
        }
        else
        {
          if ( (int)this[27] >= 10 )
            v6 = 10;
          else
            v6 = this[27];
          v12 = dword_4D603C[v6] + (*(_DWORD *)(this[10] + 112) + 1000) / 10000;
        }
        if ( v12 > 0 )
          CItem::InsertItem(a2, 21, 517, 0, v12, -1);
      }
      CBase::Delete((char *)this);
    }
    else
    {
      CPlayer::Write(a2, 91, "db", this[9], this[24]);
      CDBSocket::Write(18, "ddb", this[9], this[8], this[24]);
    }
  }
  else
  {
    v13 = CItem::FindPrefix(v15);
    if ( !v13 )
      return 0;
    this[11] = v13;
    CDBSocket::Write(19, "ddbb", this[9], this[8], v15, v17);
    if ( v17 )
      CItem::SubState(this, 64);
    CItem::SendItemInfo(this, a2, 92);
  }
  return 1;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042BAB0) --------------------------------------------------------
int __thiscall CItemDefense::Protect(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-10h]
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h]

  if ( CItem::GetLevel(this) < 40
    || dword_4E35B8 != 2 && this[30] >= *(_DWORD *)(this[10] + 168)
    || CItem::IsState(this, 65) )
  {
    return 0;
  }
  if ( this[11] )
    v3 = *(_DWORD *)(this[11] + 32);
  else
    v3 = 0;
  v5 = ((unsigned __int8)this[21] << 8) | ((unsigned __int8)this[23] << 16) | (v3 << 24);
  v6 = (unsigned __int8)this[29] | ((unsigned __int8)this[27] << 16);
  CDBSocket::Write(21, "dddbwddb", this[9], this[8], 64, 1, *(_DWORD *)(this[10] + 64), v5, v6, ++this[30]);
  CItem::AddState(this, 64);
  CItem::SendItemInfo(this, a2, 92);
  return 1;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0042BBD0) --------------------------------------------------------
int __thiscall CItemDefense::GetSellMoney(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = *(_DWORD *)(this[10] + 112);
  if ( this[11] )
    v3 += *(_DWORD *)(this[11] + 40) * v3 / 100;
  if ( this[27] )
    v3 += 100 * this[27] * this[27] * this[27];
  if ( this[29] )
    v3 += 200 * this[29] * this[29] * this[29];
  return v3;
}

//----- (0042BC70) --------------------------------------------------------
int __thiscall CItemDefense::UpgradeDestroy(CIOObject *this, int a2)
{
  int result; // eax
  int v3; // [esp+0h] [ebp-18h]
  int v4; // [esp+4h] [ebp-14h]
  int v5; // [esp+8h] [ebp-10h]
  BOOL v6; // [esp+Ch] [ebp-Ch]
  int v8; // [esp+14h] [ebp-4h]

  if ( *(_DWORD *)(*((_DWORD *)this + 10) + 72) == 3 )
  {
    result = CItem::GetLevel(this);
    v6 = result < 44;
  }
  else
  {
    result = CItem::GetLevel(this);
    v6 = result < 40;
  }
  if ( !v6 )
  {
    result = CItem::IsState(this, 1);
    if ( !result )
    {
      result = (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)this + 88))(this, a2, 45);
      if ( result )
      {
        v8 = 0;
        if ( *(_DWORD *)(*((_DWORD *)this + 10) + 72) == 3 )
        {
          if ( CItem::GetLevel(this) >= 44 )
          {
            if ( CItem::GetLevel(this) - 40 >= 20 )
              v5 = 20;
            else
              v5 = CItem::GetLevel(this) - 40;
            if ( *((int *)this + 27) >= 10 )
              v4 = 10;
            else
              v4 = *((_DWORD *)this + 27);
            v8 = dword_4D603C[v4] + dword_4D5FE8[v5];
          }
        }
        else
        {
          if ( *((int *)this + 27) >= 10 )
            v3 = 10;
          else
            v3 = *((_DWORD *)this + 27);
          v8 = dword_4D603C[v3] + (*(_DWORD *)(*((_DWORD *)this + 10) + 112) + 1000) / 10000;
        }
        if ( v8 > 0 )
          CItem::InsertItem(a2, 21, 517, 0, v8, -1);
        result = CPlayer::_OutofInven(this);
      }
    }
  }
  return result;
}
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);

//----- (0042BDD0) --------------------------------------------------------
void __thiscall CItemMask::SetWearState(_DWORD *this, int a2)
{
  if ( CItem::IsState(this, 1) )
  {
    CItem::SubState(this, 1);
    CDBSocket::Write(5, "d", this[9]);
  }
}

//----- (0042BE10) --------------------------------------------------------
int __stdcall CItemMask::PutOn(int a1)
{
  return CPlayer::Write(a1, 67, "b", 109);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042BE40) --------------------------------------------------------
_DWORD *__thiscall CItemMask::Init(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *result; // eax

  this[11] = 0;
  this[13] = 1;
  this[24] = 1;
  result = this;
  this[23] = 1;
  return result;
}

//----- (0042BE80) --------------------------------------------------------
void __thiscall CItemStandard::SetWearState(_DWORD *this, int a2)
{
  if ( *(_DWORD *)(a2 + 480) || *(int *)(this[10] + 160) < 0 )
  {
    if ( CItem::IsState(this, 1) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(5, "d", this[9]);
    }
  }
  else
  {
    CItemStandard::Broken(a2, 0);
  }
}
// 42C340: using guessed type _DWORD __stdcall CItemStandard::Broken(_DWORD, _DWORD);

//----- (0042BEF0) --------------------------------------------------------
int *__thiscall CItemStandard::ApplySpec(int *this, int a2)
{
  int *result; // eax

  result = this;
  if ( !this[31] )
  {
    CInitItem::ApplySpec(this[10], a2);
    result = this;
    this[31] = 1;
  }
  return result;
}

//----- (0042BF30) --------------------------------------------------------
int *__thiscall CItemStandard::FreeSpec(int *this, int a2)
{
  int *result; // eax

  result = this;
  if ( this[31] )
  {
    CInitItem::FreeSpec(this[10], a2);
    result = this;
    this[31] = 0;
  }
  return result;
}

//----- (0042BF70) --------------------------------------------------------
void __thiscall CItemStandard::PutOn(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-24h]
  int v4; // [esp-4h] [ebp-20h]

  if ( *(int *)(this[10] + 160) < 0 )
  {
    if ( CItem::IsState(this, 1) || !CChar::IsNormal((int)a2) || CChar::IsGState(a2, 512) )
      return;
    if ( CPlayer::IsWState(a2, 13) )
    {
LABEL_11:
      CPlayer::Write(a2, 67, "b", 10);
      return;
    }
LABEL_24:
    this[32] = GetTickCount() + 10000;
    CPlayer::AddWState(a2, 13);
    a2[128] = (unsigned __int16)a2[128] | (*(_DWORD *)(this[10] + 64) << 16);
    a2[279] = this;
    a2[280] = *(_DWORD *)(this[10] + 160);
    CItem::AddState(this, 1);
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
    v4 = *(unsigned __int16 *)(this[10] + 64);
    v3 = this[9];
    v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
    CChar::WriteInSight((int)a2, 5, "ddw", v2, v3, v4);
    CDBSocket::Write(4, "d", this[9]);
    return;
  }
  if ( !a2[120] )
  {
    CItemStandard::Broken(a2, 1);
    return;
  }
  if ( !CItem::IsState(this, 1)
    && CChar::IsNormal((int)a2)
    && !CChar::IsGState(a2, 512)
    && (int)a2[122] >= 3
    && (int)a2[129] <= 5 )
  {
    if ( CPlayer::IsWState(a2, 13) )
      goto LABEL_11;
    if ( CChar::IsMState(a2, 0x2000i64) )
      CChar::CancelBuff((int)a2, 12);
    if ( CChar::IsMState(a2, 0x1000000000i64) )
      CChar::CancelBuff((int)a2, 40);
    if ( CChar::IsMState(a2, 1i64) )
      (*(void (__thiscall **)(_DWORD *, int, _DWORD))(*a2 + 124))(a2, 1, 0);
    goto LABEL_24;
  }
}
// 42C340: using guessed type _DWORD __stdcall CItemStandard::Broken(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042C1B0) --------------------------------------------------------
void __thiscall CItemStandard::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-Ch]
  int v4; // [esp-4h] [ebp-8h]

  if ( CItem::IsState(this, 1) && CPlayer::IsWState(a2, 13) )
  {
    if ( this[32] <= GetTickCount() )
    {
      CPlayer::SubWState(a2, 13);
      a2[128] = (unsigned __int16)a2[128];
      a2[279] = 0;
      a2[280] = -1;
      CItem::SubState(this, 1);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
      v4 = *(unsigned __int16 *)(this[10] + 64);
      v3 = this[9];
      v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
      CChar::WriteInSight((int)a2, 6, "ddw", v2, v3, v4);
      CDBSocket::Write(5, "d", this[9]);
    }
    else
    {
      CPlayer::Write(a2, 67, "b", 79);
    }
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042C2B0) --------------------------------------------------------
int __stdcall CItemStandard::CanDrop(int a1, int a2)
{
  CPlayer::Write(a2, 67, "b", 78);
  return 0;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042C2E0) --------------------------------------------------------
BOOL __thiscall CItemStandard::CanTrade(_DWORD *this, int a2, int a3, int a4)
{
  BOOL result; // eax

  if ( !CItem::IsState(this, 1) && a4 && *(_DWORD *)(a3 + 480) == *(_DWORD *)(a4 + 480) && *(int *)(a4 + 516) < 6 )
    result = CItem::CanTrade(this, a2, a3, a4);
  else
    result = 0;
  return result;
}

//----- (0042C340) --------------------------------------------------------
int __thiscall CItemStandard::Broken(CIOObject *this, _DWORD *a2, int a3)
{
  int v3; // eax
  int v5; // [esp-8h] [ebp-Ch]
  int v6; // [esp-4h] [ebp-8h]

  if ( a3 && CItem::IsState(this, 1) )
  {
    if ( CPlayer::IsWState(a2, 13) )
      CPlayer::SubWState(a2, 13);
    a2[128] = (unsigned __int16)a2[128];
    a2[279] = 0;
    a2[280] = -1;
    CItem::SubState(this, 1);
    (*(void (__thiscall **)(CIOObject *, _DWORD *))(*(_DWORD *)this + 108))(this, a2);
    v6 = *(unsigned __int16 *)(*((_DWORD *)this + 10) + 64);
    v5 = *((_DWORD *)this + 9);
    v3 = std___Mpunct_wchar_t___do_frac_digits(a2);
    CChar::WriteInSight((int)a2, 6, "ddw", v3, v5, v6);
    CDBSocket::Write(5, "d", *((_DWORD *)this + 9));
  }
  CPlayer::_OutofInven(this);
  CPlayer::Write(a2, 8, "db", *((_DWORD *)this + 9), 4);
  return (*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)this + 92))(this, 4);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);

//----- (0042C450) --------------------------------------------------------
_DWORD *__thiscall CItemOrnament::CItemOrnament(_DWORD *this, int a2)
{
  CItem::CItem(this);
  *this = &off_4B7038;
  this[10] = a2;
  return this;
}
// 4B7038: using guessed type int (__stdcall *off_4B7038)(int);

//----- (0042C480) --------------------------------------------------------
int __thiscall CItemOrnament::Init(_DWORD *this, char a2, int a3, int a4)
{
  int result; // eax

  result = CItem::FindPrefix(a2);
  this[11] = result;
  this[13] = 1;
  return result;
}

//----- (0042C4B0) --------------------------------------------------------
void __thiscall CItemOrnament::SetWearState(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    if ( *(int *)(this[10] + 96) >= 0 && *(_DWORD *)(this[10] + 96) != a2[115]
      || *(_DWORD *)(this[10] + 100) > a2[15]
      || (v3 = *(_DWORD *)(this[10] + 72) - 2, CPlayer::IsWState(a2, v3)) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(5, "d", this[9]);
    }
    else
    {
      CPlayer::AddWState(a2, v3);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
    }
  }
}

//----- (0042C560) --------------------------------------------------------
int __thiscall CItemOrnament::Trash(int this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-Ch]

  if ( CItem::IsState((_DWORD *)this, 1) )
  {
    CPlayer::Write(a2, 67, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, 8, "db", *(_DWORD *)(this + 36), a3);
    if ( *(_DWORD *)(this + 44) )
      v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v4 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | (v4 << 24),
      0,
      0);
    CBase::Delete((char *)this);
    result = 1;
  }
  return result;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042C640) --------------------------------------------------------
int __thiscall CItemOrnament::Erase(int this, int a2)
{
  int v3; // [esp+0h] [ebp-Ch]

  if ( *(_DWORD *)(this + 36) )
  {
    if ( *(_DWORD *)(this + 44) )
      v3 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v3 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a2,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | (v3 << 24),
      0,
      0);
  }
  return CBase::Delete((char *)this);
}

//----- (0042C6E0) --------------------------------------------------------
BOOL __thiscall CItemOrnament::ApplySpec(int *this, int a2)
{
  BOOL result; // eax

  result = CInitItem::ApplySpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::ApplySpec(this[11], a2);
  return result;
}

//----- (0042C720) --------------------------------------------------------
BOOL __thiscall CItemOrnament::FreeSpec(int *this, int a2)
{
  BOOL result; // eax

  result = CInitItem::FreeSpec(this[10], a2);
  if ( this[11] )
    result = CPrefix::FreeSpec(this[11], a2);
  return result;
}

//----- (0042C760) --------------------------------------------------------
void __thiscall CItemOrnament::PutOn(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( (*(int *)(this[10] + 96) < 0 || *(_DWORD *)(this[10] + 96) == a2[115]) && *(_DWORD *)(this[10] + 100) <= a2[15] )
  {
    if ( !CItem::IsState(this, 1) )
    {
      v6 = *(_DWORD *)(this[10] + 72) - 2;
      if ( CPlayer::IsWState(a2, v6) )
      {
        CPlayer::Write(a2, 67, "b", 10);
      }
      else
      {
        CPlayer::AddWState(a2, v6);
        CItem::AddState(this, 1);
        (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
        v4 = *(unsigned __int16 *)(this[10] + 64);
        v3 = this[9];
        v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CPlayer::Write(a2, 5, "ddw", v2, v3, v4);
        CDBSocket::Write(4, "d", this[9]);
      }
    }
  }
  else
  {
    CPlayer::Write(a2, 67, "b", 12);
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042C870) --------------------------------------------------------
void __thiscall CItemOrnament::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  int v6; // [esp+4h] [ebp-4h]

  if ( CItem::IsState(this, 1) )
  {
    v6 = *(_DWORD *)(this[10] + 72) - 2;
    if ( CPlayer::IsWState(a2, v6) )
    {
      CPlayer::SubWState(a2, v6);
      CItem::SubState(this, 1);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
      v4 = *(unsigned __int16 *)(this[10] + 64);
      v3 = this[9];
      v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
      CChar::WriteInSight((int)a2, 6, "ddw", v2, v3, v4);
      CDBSocket::Write(5, "d", this[9]);
    }
  }
}

//----- (0042C920) --------------------------------------------------------
void __thiscall CItemOrnament::Insert(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // [esp+0h] [ebp-10h]
  int v6; // [esp+Ch] [ebp-4h]

  v6 = this[8];
  this[8] = *(_DWORD *)(a2 + 452);
  if ( a3 == 10 )
    this[12] &= 0xFFFFFFFB;
  CItem::SendItemInfo(this, a2, 7);
  if ( a4 )
  {
    CDBSocket::Write(7, "dddwbd", this[9], v6, this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  }
  else
  {
    if ( this[11] )
      v4 = *(_DWORD *)(this[11] + 32);
    else
      v4 = 0;
    CDBSocket::Write(
      6,
      "dwbddbbdb",
      this[9],
      *(_DWORD *)(this[10] + 64),
      v4,
      this[12],
      this[13],
      0,
      this[21],
      this[8],
      a3);
  }
}

//----- (0042CA20) --------------------------------------------------------
int __thiscall CItemOrnament::UpdateNum(int this, int a2, int a3, int a4)
{
  int v5; // [esp+0h] [ebp-Ch]

  if ( a4 + *(_DWORD *)(this + 52) > 0 )
    return *(_DWORD *)(this + 52);
  CPlayer::Write(a2, 9, "ddb", *(_DWORD *)(this + 36), 0, a3);
  if ( a3 == 50 )
  {
    CDBSocket::Write(
      7,
      "dddwbd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(a2 + 452),
      0,
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      50,
      *(_DWORD *)(this + 52));
  }
  else
  {
    if ( *(_DWORD *)(this + 44) )
      v5 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
    else
      v5 = 0;
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 52),
      a3,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | (v5 << 24),
      0,
      0);
  }
  *(_DWORD *)(this + 52) = 0;
  CBase::Delete((char *)this);
  return 0;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042CB30) --------------------------------------------------------
BOOL __thiscall CItemTransform::CanDrop(_DWORD *this, int a2, int a3)
{
  if ( !CItem::IsState(this, 1) )
    return CItem::CanDrop(this, a2, a3);
  CPlayer::Write(a3, 67, "b", 13);
  return 0;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042CB80) --------------------------------------------------------
int __thiscall CItemOrnament::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-24h]
  __int16 v6; // [esp+8h] [ebp-1Ch] BYREF
  int v7; // [esp+Ah] [ebp-1Ah]
  char v8; // [esp+Eh] [ebp-16h]
  int v9; // [esp+Fh] [ebp-15h]
  int v10; // [esp+13h] [ebp-11h]
  char v11; // [esp+17h] [ebp-Dh]
  char v12; // [esp+18h] [ebp-Ch]
  char v13; // [esp+19h] [ebp-Bh]
  char v14; // [esp+1Ah] [ebp-Ah]
  char v15; // [esp+1Bh] [ebp-9h]
  char v16; // [esp+1Ch] [ebp-8h]
  char v17; // [esp+1Dh] [ebp-7h]
  char v18; // [esp+1Eh] [ebp-6h]
  char v19; // [esp+1Fh] [ebp-5h]
  char v20; // [esp+20h] [ebp-4h]
  char v21; // [esp+21h] [ebp-3h]

  if ( CItem::IsState((_DWORD *)this, 1) )
    return 0;
  v6 = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
  v7 = *(_DWORD *)(this + 36);
  if ( *(_DWORD *)(this + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(this + 44) + 32);
  else
    LOBYTE(v4) = 0;
  v8 = v4;
  v9 = *(_DWORD *)(this + 48);
  v10 = *(_DWORD *)(this + 52);
  v11 = 0;
  v12 = 0;
  v13 = *(_BYTE *)(this + 84);
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  v21 = 0;
  CPlayer::_StorageIn(&v6, *(_DWORD *)(this + 36), 0);
  CDBSocket::Write(
    11,
    "dddbd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(a2 + 448),
    0,
    *(_DWORD *)(this + 52));
  CBase::Delete((char *)this);
  return 1;
}
// 45EA00: using guessed type _DWORD __stdcall sub_45EA00(_DWORD, _DWORD, _DWORD);

//----- (0042CC80) --------------------------------------------------------
void __thiscall CItemOrnament::ForcedStorageIn(_DWORD *this, int a2, int a3, const char *a4, int a5)
{
  LONG v5; // eax
  int v6; // [esp-24h] [ebp-34h]
  int v7; // [esp-1Ch] [ebp-2Ch]
  int v8; // [esp-18h] [ebp-28h]
  int v9; // [esp-10h] [ebp-20h]
  const char *v10; // [esp+0h] [ebp-10h]
  int v11; // [esp+4h] [ebp-Ch]

  if ( this[11] )
    v11 = *(_DWORD *)(this[11] + 32);
  else
    v11 = 0;
  if ( a4 )
    v10 = a4;
  else
    v10 = &Src;
  v9 = this[21];
  v8 = this[13];
  v7 = this[12];
  v6 = *(_DWORD *)(this[10] + 64);
  v5 = CItem::NewIID();
  CDBSocket::Write(35, "bdwbddbbdds", a2, v5, v6, v11, v7, v8, 0, v9, a3, a5, v10);
}

//----- (0042CD20) --------------------------------------------------------
int __thiscall CItemOrnament::ChangePrefix(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v6; // [esp+0h] [ebp-1Ch]
  int v8; // [esp+8h] [ebp-14h]
  int i; // [esp+Ch] [ebp-10h]
  int v10; // [esp+10h] [ebp-Ch]
  int v11; // [esp+14h] [ebp-8h]

  if ( CItem::IsState(this, 1) || a3 >= 0 && a3 != 2 )
    return 0;
  if ( this[11] )
    v6 = *(_DWORD *)(this[11] + 32);
  else
    v6 = 0;
  v10 = v6;
  v11 = RandomBetween(1, 100);
  for ( i = 0; i < 2; ++i )
  {
    if ( v11 <= *(_DWORD *)(a4 + 4 * i) )
    {
      v10 = *(_DWORD *)(a5 + 4 * i);
      break;
    }
  }
  if ( v6 == v10 )
  {
    CPlayer::Write(a2, 67, "b", 54);
  }
  else
  {
    v8 = CItem::FindPrefix(v10);
    if ( !v8 )
      return 0;
    this[11] = v8;
    CDBSocket::Write(19, "ddbb", this[9], this[8], v10, 0);
    CItem::SendItemInfo(this, a2, 92);
  }
  return 1;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042CE40) --------------------------------------------------------
int __thiscall CItemOrnament::GetSellMoney(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = *(_DWORD *)(this[10] + 112);
  if ( this[11] )
    v3 += *(_DWORD *)(this[11] + 40) * v3 / 100;
  return v3;
}

//----- (0042CE90) --------------------------------------------------------
int __thiscall CItemOrnament::UpgradeDestroy(CIOObject *this, int a2)
{
  int result; // eax

  result = (int)this;
  if ( *(_DWORD *)(*((_DWORD *)this + 10) + 64) != 596 )
  {
    result = CItem::IsState(this, 1);
    if ( !result )
    {
      result = (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)this + 88))(this, a2, 45);
      if ( result )
      {
        CItem::InsertItem(a2, 45, 517, 0, 1, -1);
        result = CPlayer::_OutofInven(this);
      }
    }
  }
  return result;
}
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);

//----- (0042CF10) --------------------------------------------------------
_DWORD *__thiscall CItemGeneral::CItemGeneral(_DWORD *this, int a2)
{
  CItem::CItem(this);
  *this = &off_4B7118;
  this[10] = a2;
  return this;
}
// 4B7118: using guessed type int (__stdcall *off_4B7118)(int);

//----- (0042CF40) --------------------------------------------------------
int __thiscall CItem::Sum(_DWORD *this, int a2)
{
  if ( a2 <= 0 || (unsigned int)(a2 + this[13]) <= 0x7FFFFFFF )
    return a2 + this[13];
  LOG_ERR(
    "Excess of Item Num : PID(%d), Index(%d), IID(%d), Num(%d), AddNum(%d)",
    this[8],
    *(_DWORD *)(this[10] + 64),
    this[9],
    this[13],
    a2);
  return 0x7FFFFFFF;
}

//----- (0042CFB0) --------------------------------------------------------
int __thiscall CItemGeneral::Use(int *this, _DWORD *a2)
{
  int v2; // eax
  int v4; // [esp-4h] [ebp-8h]

  if ( CInitItem::Use(this[10], (int)a2) )
  {
    (*(void (__thiscall **)(int *, _DWORD *, int, int))(*this + 120))(
      this,
      a2,
      *(_DWORD *)(this[10] + 156) != 0 ? 43 : 9,
      -1);
    if ( *(_DWORD *)(this[10] + 172) )
    {
      v4 = *(_DWORD *)(this[10] + 172);
      v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
      CChar::WriteInRect((int)a2, 73, 15, "db", v2, v4);
    }
  }
  return this[13];
}

//----- (0042D040) --------------------------------------------------------
int __thiscall CItemGeneral::Trade(_DWORD *this, int a2, int a3, int a4)
{
  int v6; // [esp+4h] [ebp-4h]

  if ( this[13] < a4 )
    EBREAK();
  if ( this[13] <= a4 )
  {
    this[8] = 0;
    this[12] |= 4u;
    CPlayer::Write(a2, 8, "db", this[9], a3);
    CDBSocket::Write(7, "dddwbd", this[9], *(_DWORD *)(a2 + 452), this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
    v6 = (int)this;
  }
  else
  {
    this[13] -= a4;
    CPlayer::Write(a2, 9, "ddb", this[9], this[13], a3);
    CDBSocket::Write(8, "ddwdb", this[9], this[8], *(_DWORD *)(this[10] + 64), -a4, a3);
    v6 = CItem::CreateItem(*(_DWORD *)(this[10] + 64), 0, a4, this[21]);
  }
  return v6;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042D180) --------------------------------------------------------
int __thiscall CItemGeneral::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-2Ch]
  LONG v6; // [esp+Ch] [ebp-20h] BYREF
  unsigned __int16 v7; // [esp+10h] [ebp-1Ch] BYREF
  LONG v8; // [esp+12h] [ebp-1Ah]
  __int128 v9; // [esp+16h] [ebp-16h]
  int v10; // [esp+26h] [ebp-6h]

  if ( *(_DWORD *)(this + 52) >= a3 )
    v4 = a3;
  else
    v4 = *(_DWORD *)(this + 52);
  v7 = 0;
  v8 = 0;
  v9 = 0ui64;
  v10 = 0;
  *(_DWORD *)((char *)&v9 + 1) = *(_DWORD *)(this + 48) & 0x88;
  *(_DWORD *)((char *)&v9 + 11) = *(unsigned __int8 *)(this + 84);
  if ( *(_DWORD *)(*(_DWORD *)(this + 40) + 92) )
  {
    *(_DWORD *)(this + 52) -= v4;
    if ( CPlayer::_FindStorageItem(
           *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
           &v6,
           *(_DWORD *)(this + 48) & 0x88,
           *(_DWORD *)(this + 84)) )
    {
      v8 = v6;
      *(_DWORD *)((char *)&v9 + 5) = v4;
      CDBSocket::Write(11, "dddbd", v6, *(_DWORD *)(this + 32), *(_DWORD *)(a2 + 448), 1, v4);
      if ( *(int *)(this + 52) <= 0 )
        CDBSocket::Write(
          3,
          "ddwdbddd",
          *(_DWORD *)(this + 36),
          *(_DWORD *)(this + 32),
          *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
          v4,
          15,
          (unsigned __int8)*(_DWORD *)(this + 84) << 8,
          0,
          0);
      else
        CDBSocket::Write(
          8,
          "ddwdb",
          *(_DWORD *)(this + 36),
          *(_DWORD *)(this + 32),
          *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
          -v4,
          15);
    }
    else
    {
      v7 = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
      *(_DWORD *)((char *)&v9 + 5) = v4;
      if ( *(int *)(this + 52) <= 0 )
      {
        v8 = *(_DWORD *)(this + 36);
        CDBSocket::Write(11, "dddbd", *(_DWORD *)(this + 36), *(_DWORD *)(this + 32), *(_DWORD *)(a2 + 448), 0, v4);
      }
      else
      {
        v8 = CItem::NewIID();
        CDBSocket::Write(
          6,
          "dwbddbbdb",
          v8,
          v7,
          0,
          *(_DWORD *)(this + 48) & 0x88 | 0x10,
          v4,
          0,
          *(_DWORD *)(this + 84),
          *(_DWORD *)(a2 + 448),
          15);
        CDBSocket::Write(
          8,
          "ddwdb",
          *(_DWORD *)(this + 36),
          *(_DWORD *)(this + 32),
          *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
          -v4,
          15);
      }
    }
    CPlayer::_StorageIn(&v7, *(_DWORD *)(this + 36), *(_DWORD *)(this + 52));
    if ( *(int *)(this + 52) > 0 )
      return 0;
  }
  else
  {
    v8 = *(_DWORD *)(this + 36);
    v7 = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
    *(_DWORD *)((char *)&v9 + 5) = *(_DWORD *)(this + 52);
    CPlayer::_StorageIn(&v7, *(_DWORD *)(this + 36), 0);
    CDBSocket::Write(
      11,
      "dddbd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(a2 + 448),
      0,
      *(_DWORD *)(this + 52));
  }
  CBase::Delete((char *)this);
  return 1;
}
// 45EA00: using guessed type _DWORD __stdcall sub_45EA00(_DWORD, _DWORD, _DWORD);
// 45EAE0: using guessed type _DWORD __stdcall sub_45EAE0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0042D460) --------------------------------------------------------
int __thiscall CItemGeneral::StorageOut(char *this, int a2, int a3, int a4, _DWORD *a5)
{
  int result; // eax
  int v6; // [esp+0h] [ebp-10h]
  int v8; // [esp+8h] [ebp-8h]
  _DWORD *v9; // [esp+Ch] [ebp-4h]

  if ( !*(_DWORD *)(*((_DWORD *)this + 10) + 92) )
    return CItem::StorageOut(this, a2, a3, a4, (int)a5);
  if ( *((_DWORD *)this + 13) >= a3 )
    v6 = a3;
  else
    v6 = *((_DWORD *)this + 13);
  *((_DWORD *)this + 13) -= v6;
  v9 = (_DWORD *)CPlayer::_FindMergeItem(this);
  if ( v9 )
  {
    v9[13] = CItem::Sum(v9, v6);
    CPlayer::Write(a2, 90, "dd", v9[9], v9[13]);
    CDBSocket::Write(8, "ddwdb", v9[9], *((_DWORD *)this + 8), *(_DWORD *)(*((_DWORD *)this + 10) + 64), v6, 15);
    *a5 = *((_DWORD *)this + 13);
    CPlayer::_StorageOut(*((_DWORD *)this + 9), *a5);
    CDBSocket::Write(12, "ddbd", *((_DWORD *)this + 9), *((_DWORD *)this + 8), (*((_DWORD *)this + 13) <= 0) + 1, v6);
    CBase::Delete(this);
    result = 0;
  }
  else if ( *((int *)this + 13) <= 0 )
  {
    *((_DWORD *)this + 13) = v6;
    result = CItem::StorageOut(this, a2, v6, a4, (int)a5);
  }
  else
  {
    v8 = *((_DWORD *)this + 9);
    *((_DWORD *)this + 9) = CItem::NewIID();
    *a5 = *((_DWORD *)this + 13);
    *((_DWORD *)this + 13) = v6;
    CItem::SendItemInfo(this, a2, 89);
    CDBSocket::Write(12, "ddbd", v8, *((_DWORD *)this + 8), 1, v6);
    CDBSocket::Write(
      6,
      "dwbddbbdb",
      *((_DWORD *)this + 9),
      a4,
      0,
      *((_DWORD *)this + 12) & 0x88,
      v6,
      0,
      *((_DWORD *)this + 21),
      *((_DWORD *)this + 8),
      15);
    result = 1;
  }
  return result;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D270: using guessed type _DWORD __stdcall sub_45D270(_DWORD);
// 45EAB0: using guessed type _DWORD __stdcall sub_45EAB0(char, _DWORD);

//----- (0042D670) --------------------------------------------------------
int __thiscall CItemGeneral::Enchant(int *this, int a2, int a3)
{
  if ( CInitItem::Enchant(this[10], a2, a3) )
    (*(void (__thiscall **)(int *, int, int, int))(*this + 120))(this, a2, 21, -1);
  return this[13];
}

//----- (0042D6B0) --------------------------------------------------------
_DWORD *__thiscall CItemQuest::CItemQuest(_DWORD *this, int a2)
{
  CItem::CItem(this);
  *this = &off_4B7248;
  this[10] = a2;
  return this;
}
// 4B7248: using guessed type int (__stdcall *off_4B7248)(int);

//----- (0042D6E0) --------------------------------------------------------
int __thiscall CItemGeneral::UpdateNum(char *this, int a2, int a3, int a4)
{
  int v6; // [esp+8h] [ebp-4h]
  int v7; // [esp+1Ch] [ebp+10h]

  if ( !*(_DWORD *)(*((_DWORD *)this + 10) + 92) )
    return CItem::UpdateNum((int)this, a2, a3, a4);
  v6 = *((_DWORD *)this + 13);
  *((_DWORD *)this + 13) = CItem::Sum(this, a4);
  if ( *((int *)this + 13) <= 0 )
  {
    CPlayer::Write(a2, 9, "ddb", *((_DWORD *)this + 9), 0, a3);
    if ( a3 == 50 )
      CDBSocket::Write(
        7,
        "dddwbd",
        *((_DWORD *)this + 9),
        *(_DWORD *)(a2 + 452),
        0,
        *(_DWORD *)(*((_DWORD *)this + 10) + 64),
        50,
        *((_DWORD *)this + 13));
    else
      CDBSocket::Write(
        3,
        "ddwdbddd",
        *((_DWORD *)this + 9),
        *((_DWORD *)this + 8),
        *(_DWORD *)(*((_DWORD *)this + 10) + 64),
        v6,
        a3,
        (unsigned __int8)*((_DWORD *)this + 21) << 8,
        0,
        0);
    v7 = 0;
    CBase::Delete(this);
  }
  else
  {
    CPlayer::Write(a2, 9, "ddb", *((_DWORD *)this + 9), *((_DWORD *)this + 13), a3);
    CDBSocket::Write(
      8,
      "ddwdb",
      *((_DWORD *)this + 9),
      *((_DWORD *)this + 8),
      *(_DWORD *)(*((_DWORD *)this + 10) + 64),
      a4,
      a3);
    v7 = *((_DWORD *)this + 13);
  }
  return v7;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042D860) --------------------------------------------------------
BOOL __thiscall CItemQuest::CanMerge(_DWORD *this, _DWORD *a2)
{
  int v2; // esi
  BOOL v4; // [esp+4h] [ebp-8h]

  v4 = 0;
  if ( this[10] == a2[10] )
  {
    v2 = CItem::IsState(this, 136);
    if ( v2 == CItem::IsState(a2, 136) && (dword_4E35B8 != 2 || this[21] == a2[21]) )
      v4 = 1;
  }
  return v4;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0042D8D0) --------------------------------------------------------
_DWORD *__thiscall CItemMoney::CItemMoney(_DWORD *this, int a2)
{
  CItem::CItem(this);
  *this = &off_4B7328;
  this[10] = a2;
  return this;
}
// 4B7328: using guessed type int (__stdcall *off_4B7328)(int);

//----- (0042D900) --------------------------------------------------------
BOOL __thiscall CItemMoney::CanMerge(_DWORD *this, int a2)
{
  return *(_DWORD *)(a2 + 40) == this[10];
}

//----- (0042D920) --------------------------------------------------------
int __thiscall CItemMoney::Trash(int this, int a2, int a3)
{
  InterlockedExchangeAdd(&dword_4E2014, -*(_DWORD *)(this + 52));
  *(_DWORD *)(a2 + 1096) = 0;
  CPlayer::Write(a2, 8, "db", *(_DWORD *)(this + 36), a3);
  CDBSocket::Write(
    3,
    "ddwdbddd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
    *(_DWORD *)(this + 52),
    a3,
    0,
    0,
    0);
  CBase::Delete((char *)this);
  return 1;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042D9C0) --------------------------------------------------------
void __thiscall CItemMoney::Insert(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // [esp+4h] [ebp-4h]

  if ( a3 != 10 )
    InterlockedExchangeAdd(&dword_4E2014, this[13]);
  if ( this[20] )
  {
    if ( this[20] == 1 )
    {
      a2[335] += this[13];
    }
    else if ( this[20] == 2 )
    {
      a2[336] += this[13];
    }
  }
  a2[274] = this;
  v5 = this[8];
  this[8] = a2[113];
  if ( a3 == 10 )
    this[12] &= 0xFFFFFFFB;
  CItem::SendItemInfo(this, (int)a2, 7);
  if ( a4 )
    CDBSocket::Write(7, "dddwbd", this[9], v5, this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  else
    CDBSocket::Write(6, "dwbddbbdb", this[9], *(_DWORD *)(this[10] + 64), 0, this[12], this[13], 0, 0, this[8], a3);
}

//----- (0042DB00) --------------------------------------------------------
int __thiscall CItemMoney::UpdateNum(char *this, int a2, int a3, LONG Value)
{
  int result; // eax
  int v6; // [esp+4h] [ebp-4h]

  if ( a3 != 10 && a3 != 26 && a3 != 50 && a3 != 51 && (a3 != 15 || Value < 0) )
    InterlockedExchangeAdd(&dword_4E2014, Value);
  v6 = *((_DWORD *)this + 13);
  if ( v6 >= 0 )
  {
    *((_DWORD *)this + 13) = CItem::Sum(this, Value);
    if ( *((int *)this + 13) <= 0 )
    {
      *(_DWORD *)(a2 + 1096) = 0;
      CPlayer::Write(a2, 9, "ddb", *((_DWORD *)this + 9), *((_DWORD *)this + 13), a3);
      if ( a3 == 50 || a3 == 51 )
        CDBSocket::Write(
          7,
          "dddwbd",
          *((_DWORD *)this + 9),
          *(_DWORD *)(a2 + 452),
          0,
          *(_DWORD *)(*((_DWORD *)this + 10) + 64),
          a3,
          *((_DWORD *)this + 13));
      else
        CDBSocket::Write(
          3,
          "ddwdbddd",
          *((_DWORD *)this + 9),
          *((_DWORD *)this + 8),
          *(_DWORD *)(*((_DWORD *)this + 10) + 64),
          v6,
          a3,
          0,
          0,
          0);
      *((_DWORD *)this + 13) = 0;
      CBase::Delete(this);
    }
    else
    {
      CPlayer::Write(a2, 9, "ddb", *((_DWORD *)this + 9), *((_DWORD *)this + 13), a3);
      CDBSocket::Write(
        8,
        "ddwdb",
        *((_DWORD *)this + 9),
        *((_DWORD *)this + 8),
        *(_DWORD *)(*((_DWORD *)this + 10) + 64),
        Value,
        a3);
    }
    result = *((_DWORD *)this + 13);
  }
  else
  {
    CPlayer::Write(a2, 9, "ddb", *((_DWORD *)this + 9), 1, a3);
    CDBSocket::Write(
      8,
      "ddwdb",
      *((_DWORD *)this + 9),
      *((_DWORD *)this + 8),
      *(_DWORD *)(*((_DWORD *)this + 10) + 64),
      1 - v6,
      a3);
    LOG_ERR(
      "nOldNum<0 :  UID(%d) PID(%d) IID(%d) Num(%d) ",
      *(_DWORD *)(a2 + 448),
      *((_DWORD *)this + 8),
      *((_DWORD *)this + 9),
      v6);
    result = 1;
  }
  return result;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042DD20) --------------------------------------------------------
void __thiscall CItemMoney::Drop(CIOObject *this, _DWORD *a2, _DWORD *a3, int a4, int a5, int a6, int a7)
{
  int v7; // edx
  int v9; // [esp+14h] [ebp-10h]
  volatile int *v10; // [esp+18h] [ebp-Ch]
  CIOBuffer *v11; // [esp+20h] [ebp-4h]

  *((_DWORD *)this + 14) = a2[80];
  v7 = a3[1];
  *((_DWORD *)this + 15) = *a3;
  *((_DWORD *)this + 16) = v7;
  *((_DWORD *)this + 17) = GetTickCount() + 180000;
  CIOObject::AddTimer(this, 0xEA60u, 0);
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) )
  {
    if ( a5 )
    {
      InterlockedExchangeAdd(&dword_4E2014, -*((_DWORD *)this + 13));
      a2[274] = 0;
      CPlayer::Write(a2, 8, "db", *((_DWORD *)this + 9), 11);
      CDBSocket::Write(
        7,
        "dddwbd",
        *((_DWORD *)this + 9),
        *((_DWORD *)this + 8),
        0,
        *(_DWORD *)(*((_DWORD *)this + 10) + 64),
        11,
        *((_DWORD *)this + 13));
    }
    else
    {
      *((_DWORD *)this + 8) = a2[113];
    }
  }
  else
  {
    if ( !a6 )
    {
      v10 = (volatile int *)sub_450810();
      if ( v10 )
      {
        v9 = 0;
        if ( CChar::IsBState(4, 0) )
        {
          v9 = 20;
        }
        else if ( CChar::IsBState(1, 0) )
        {
          v9 = 20;
        }
        if ( v9 )
          *((_DWORD *)this + 13) += v9 * *((_DWORD *)this + 13) / 100;
        CIOObject::Release((CIOObject *)v10, v10 + 88);
      }
    }
    *((_DWORD *)this + 18) = a6;
    *((_DWORD *)this + 19) = a7;
    CIOObject::AddTimer(this, 0x1D4C0u, 1);
  }
  v11 = (CIOBuffer *)sub_44FCE0(
                       54,
                       "wdddd",
                       *(_DWORD *)(*((_DWORD *)this + 10) + 64),
                       *((_DWORD *)this + 7),
                       *a3,
                       a3[1],
                       *((_DWORD *)this + 13));
  sub_493440(a4, v11, 25);
  CIOBuffer::Release(v11);
}
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 493440: using guessed type _DWORD __stdcall sub_493440(_DWORD, _DWORD, _DWORD);

//----- (0042DF30) --------------------------------------------------------
int __thiscall CItemMoney::Trade(_DWORD *this, int a2, int a3, int a4)
{
  int v6; // [esp+4h] [ebp-4h]

  if ( this[13] < a4 )
    EBREAK();
  if ( this[13] <= a4 )
  {
    this[8] = 0;
    this[12] |= 4u;
    *(_DWORD *)(a2 + 1096) = 0;
    CPlayer::Write(a2, 8, "db", this[9], a3);
    CDBSocket::Write(7, "dddwbd", this[9], *(_DWORD *)(a2 + 452), this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
    v6 = (int)this;
  }
  else
  {
    this[13] -= a4;
    CPlayer::Write(a2, 9, "ddb", this[9], this[13], a3);
    CDBSocket::Write(8, "ddwdb", this[9], this[8], *(_DWORD *)(this[10] + 64), -a4, a3);
    v6 = CItem::CreateItem(*(_DWORD *)(this[10] + 64), 0, a4, -1);
  }
  return v6;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042E080) --------------------------------------------------------
int __thiscall CItemMoney::StorageIn(int this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-28h]
  unsigned __int16 v6; // [esp+8h] [ebp-20h] BYREF
  LONG v7; // [esp+Ah] [ebp-1Eh]
  _BYTE v8[12]; // [esp+Eh] [ebp-1Ah]
  int v9; // [esp+1Ah] [ebp-Eh]
  int v10; // [esp+1Eh] [ebp-Ah]
  LONG v11; // [esp+24h] [ebp-4h] BYREF

  if ( *(_DWORD *)(this + 52) >= a3 )
    v4 = a3;
  else
    v4 = *(_DWORD *)(this + 52);
  *(_DWORD *)(this + 52) -= v4;
  v6 = 0;
  v7 = 0;
  *(_DWORD *)v8 = 0;
  *(_DWORD *)&v8[4] = 0;
  *(_DWORD *)&v8[8] = 0;
  v9 = 0;
  v10 = 0;
  *(_DWORD *)&v8[1] = *(_DWORD *)(this + 48) & 0x88;
  if ( CPlayer::_FindStorageItem(*(_DWORD *)(*(_DWORD *)(this + 40) + 64), &v11, *(_DWORD *)(this + 48) & 0x88, 0) )
  {
    v7 = v11;
    *(_DWORD *)&v8[5] = v4;
    CDBSocket::Write(11, "dddbd", v11, *(_DWORD *)(this + 32), *(_DWORD *)(a2 + 448), 1, v4);
    if ( *(int *)(this + 52) <= 0 )
    {
      *(_DWORD *)(a2 + 1096) = 0;
      CDBSocket::Write(
        3,
        "ddwdbddd",
        *(_DWORD *)(this + 36),
        *(_DWORD *)(this + 32),
        *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
        v4,
        15,
        0,
        0,
        0);
    }
    else
    {
      CDBSocket::Write(
        8,
        "ddwdb",
        *(_DWORD *)(this + 36),
        *(_DWORD *)(this + 32),
        *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
        -v4,
        15);
    }
  }
  else
  {
    v6 = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
    *(_DWORD *)&v8[5] = v4;
    if ( *(int *)(this + 52) <= 0 )
    {
      *(_DWORD *)(a2 + 1096) = 0;
      v7 = *(_DWORD *)(this + 36);
      CDBSocket::Write(11, "dddbd", *(_DWORD *)(this + 36), *(_DWORD *)(this + 32), *(_DWORD *)(a2 + 448), 0, v4);
    }
    else
    {
      v7 = CItem::NewIID();
      CDBSocket::Write(
        6,
        "dwbddbbdb",
        v7,
        v6,
        0,
        *(_DWORD *)(this + 48) & 0x88 | 0x10,
        v4,
        0,
        0,
        *(_DWORD *)(a2 + 448),
        15);
      CDBSocket::Write(
        8,
        "ddwdb",
        *(_DWORD *)(this + 36),
        *(_DWORD *)(this + 32),
        *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
        -v4,
        15);
    }
  }
  CPlayer::_StorageIn(&v6, *(_DWORD *)(this + 36), *(_DWORD *)(this + 52));
  if ( *(int *)(this + 52) > 0 )
    return 0;
  CBase::Delete((char *)this);
  return 1;
}
// 45EA00: using guessed type _DWORD __stdcall sub_45EA00(_DWORD, _DWORD, _DWORD);
// 45EAE0: using guessed type _DWORD __stdcall sub_45EAE0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0042E2E0) --------------------------------------------------------
int __thiscall CItemMoney::StorageOut(int this, int a2, int a3, int a4, _DWORD *a5)
{
  int result; // eax
  int v6; // [esp+0h] [ebp-10h]
  int v8; // [esp+8h] [ebp-8h]
  _DWORD *v9; // [esp+Ch] [ebp-4h]

  if ( *(_DWORD *)(this + 52) >= a3 )
    v6 = a3;
  else
    v6 = *(_DWORD *)(this + 52);
  *(_DWORD *)(this + 52) -= v6;
  v9 = (_DWORD *)CPlayer::_FindMergeItem(this);
  if ( v9 )
  {
    if ( (int)v9[13] >= 0 )
    {
      v9[13] = CItem::Sum(v9, v6);
      CPlayer::Write(a2, 90, "dd", v9[9], v9[13]);
      CDBSocket::Write(8, "ddwdb", v9[9], *(_DWORD *)(this + 32), *(_DWORD *)(*(_DWORD *)(this + 40) + 64), v6, 15);
      *a5 = *(_DWORD *)(this + 52);
      CPlayer::_StorageOut(*(_DWORD *)(this + 36), *a5);
      CDBSocket::Write(
        12,
        "ddbd",
        *(_DWORD *)(this + 36),
        *(_DWORD *)(this + 32),
        (*(_DWORD *)(this + 52) <= 0) + 1,
        v6);
      CBase::Delete((char *)this);
      result = 0;
    }
    else
    {
      CPlayer::Write(a2, 9, "ddb", v9[9], 1, 15);
      CDBSocket::Write(8, "ddwdb", v9[9], *(_DWORD *)(this + 32), *(_DWORD *)(v9[10] + 64), 1 - v9[13], 15);
      LOG_ERR(
        "nOldNum<0 :  UID(%d) PID(%d) IID(%d) Num(%d) LogType(%d)",
        *(_DWORD *)(a2 + 448),
        *(_DWORD *)(this + 32),
        v9[9],
        v9[13],
        15);
      result = 1;
    }
  }
  else
  {
    *(_DWORD *)(a2 + 1096) = this;
    if ( *(int *)(this + 52) <= 0 )
    {
      *(_DWORD *)(this + 52) = v6;
      result = CItem::StorageOut((_DWORD *)this, a2, v6, a4, (int)a5);
    }
    else
    {
      v8 = *(_DWORD *)(this + 36);
      *(_DWORD *)(this + 36) = CItem::NewIID();
      *a5 = *(_DWORD *)(this + 52);
      *(_DWORD *)(this + 52) = v6;
      CItem::SendItemInfo((void *)this, a2, 89);
      CDBSocket::Write(12, "ddbd", v8, *(_DWORD *)(this + 32), 1, v6);
      CDBSocket::Write(
        6,
        "dwbddbbdb",
        *(_DWORD *)(this + 36),
        a4,
        0,
        *(_DWORD *)(this + 48) & 0x88,
        v6,
        0,
        0,
        *(_DWORD *)(this + 32),
        15);
      result = 1;
    }
  }
  return result;
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D270: using guessed type _DWORD __stdcall sub_45D270(_DWORD);
// 45EAB0: using guessed type _DWORD __stdcall sub_45EAB0(char, _DWORD);

//----- (0042E570) --------------------------------------------------------
int __thiscall CItemMoney::SetEtc(_DWORD *this, int a2)
{
  if ( this[20] )
  {
    if ( this[20] == 1 )
    {
      *(_DWORD *)(a2 + 1340) += this[13];
    }
    else if ( this[20] == 2 )
    {
      *(_DWORD *)(a2 + 1344) += this[13];
    }
  }
  return CItem::SetEtc(this, a2);
}

//----- (0042E5E0) --------------------------------------------------------
_DWORD *__thiscall CItemTransform::CItemTransform(_DWORD *this, int a2)
{
  CItem::CItem(this);
  *this = &off_4B7470;
  this[10] = a2;
  this[23] = 0;
  this[24] = 0;
  this[25] = 0;
  this[26] = 0;
  return this;
}
// 4B7470: using guessed type int (__stdcall *off_4B7470)(int);

//----- (0042E640) --------------------------------------------------------
void **__thiscall CItemTransform::PutInfo(int this, void **a2, int a3)
{
  void **result; // eax

  *a2 = (void *)sub_44F9B0(*a2, *(_DWORD *)(this + 36));
  *a2 = (void *)sub_42F960(*a2, *(_WORD *)(*(_DWORD *)(this + 40) + 64));
  *a2 = (void *)sub_4189A0(*a2, 0);
  *a2 = (void *)sub_44F9B0(*a2, *(_DWORD *)(this + 48));
  *a2 = (void *)sub_44F9B0(*a2, *(_DWORD *)(this + 96));
  *a2 = (void *)sub_4189A0(*a2, *(_BYTE *)(this + 92));
  memset(*a2, 0, 0xAu);
  result = a2;
  *a2 = (char *)*a2 + 10;
  return result;
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 42F960: using guessed type _DWORD __cdecl sub_42F960(_DWORD, __int16);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0042E710) --------------------------------------------------------
int __thiscall sub_42E710(_DWORD *this, int a2, _DWORD *a3)
{
  int result; // eax

  this[8] = a2;
  this[13] = 1;
  *a3 = sub_47A240((_DWORD *)*a3, this + 9);
  ++*a3;
  *a3 = sub_47A240((_DWORD *)*a3, this + 12);
  *a3 = sub_47A240((_DWORD *)*a3, this + 24);
  *a3 = sub_418960((_BYTE *)*a3, (_BYTE *)this + 92);
  ++*a3;
  *a3 = sub_418960((_BYTE *)*a3, (_BYTE *)this + 84);
  *a3 += 8;
  result = this[12] | 0x20;
  this[12] = result;
  return result;
}

//----- (0042E7F0) --------------------------------------------------------
_DWORD *__thiscall CItemTransform::Init(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *result; // eax

  this[12] |= 0x20u;
  result = this;
  this[13] = 1;
  this[23] = 1;
  return result;
}

//----- (0042E820) --------------------------------------------------------
void __thiscall CItemTransform::SetWearState(_DWORD *this, _DWORD *a2)
{
  if ( CItem::IsState(this, 1) )
  {
    if ( a2[15] < this[23] || CPlayer::IsWState(a2, 10) )
    {
      CItem::SubState(this, 1);
      CDBSocket::Write(5, "d", this[9]);
    }
    else
    {
      CPlayer::AddWState(a2, 10);
      a2[277] = this;
      a2[278] = 16 * *(_DWORD *)(this[10] + 152);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
    }
  }
}

//----- (0042E8C0) --------------------------------------------------------
int __thiscall CItemTransform::Trash(int this, int a2, int a3)
{
  int result; // eax

  if ( CItem::IsState((_DWORD *)this, 1) )
  {
    CPlayer::Write(a2, 67, "b", 11);
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, 8, "db", *(_DWORD *)(this + 36), a3);
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 96),
      a3,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16),
      0,
      0);
    CBase::Delete((char *)this);
    result = 1;
  }
  return result;
}

//----- (0042E980) --------------------------------------------------------
int __thiscall CItemTransform::Erase(int this, int a2)
{
  if ( *(_DWORD *)(this + 36) )
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 96),
      a2,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16),
      0,
      0);
  return CBase::Delete((char *)this);
}

//----- (0042EA00) --------------------------------------------------------
int __thiscall CItemTransform::ApplySpec(_DWORD *this, int a2)
{
  int result; // eax
  int i; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  for ( i = 0; i <= 4; ++i )
  {
    v5 = dword_4D6090[11 * *(_DWORD *)(this[10] + 152) + i];
    if ( v5 )
      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, i, 1, this[23] / v5 + 1);
    result = i + 1;
  }
  return result;
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042EA70) --------------------------------------------------------
int __thiscall CItemTransform::FreeSpec(_DWORD *this, int a2)
{
  int result; // eax
  int i; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  for ( i = 0; i <= 4; ++i )
  {
    v5 = dword_4D6090[11 * *(_DWORD *)(this[10] + 152) + i];
    if ( v5 )
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 92))(a2, i, 0, this[23] / v5 + 1);
    result = i + 1;
  }
  return result;
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042EAE0) --------------------------------------------------------
void __thiscall CItemTransform::PutOn(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-Ch]
  int v4; // [esp-4h] [ebp-8h]

  if ( a2[15] >= this[23] && !CItem::IsState(this, 1) )
  {
    if ( CPlayer::IsWState(a2, 10) )
    {
      CPlayer::Write(a2, 67, "b", 10);
    }
    else
    {
      CPlayer::AddWState(a2, 10);
      a2[277] = this;
      a2[278] = 16 * *(_DWORD *)(this[10] + 152);
      CItem::AddState(this, 1);
      (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 104))(this, a2);
      v4 = *(unsigned __int16 *)(this[10] + 64);
      v3 = this[9];
      v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
      CPlayer::Write(a2, 5, "ddw", v2, v3, v4);
      CDBSocket::Write(4, "d", this[9]);
    }
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0042EBD0) --------------------------------------------------------
void __thiscall CItemTransform::PutOff(_DWORD *this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-Ch]
  int v4; // [esp-4h] [ebp-8h]

  if ( CItem::IsState(this, 1) && CPlayer::IsWState(a2, 10) && !CChar::IsGState(a2, 512) )
  {
    CPlayer::SubWState(a2, 10);
    a2[277] = 0;
    a2[278] = 0;
    this[25] = 0;
    CItem::SubState(this, 1);
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*this + 108))(this, a2);
    v4 = *(unsigned __int16 *)(this[10] + 64);
    v3 = this[9];
    v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
    CPlayer::Write((int)a2, 6, "ddw", v2, v3, v4);
    CDBSocket::Write(5, "d", this[9]);
    CItemTransform::SaveInfo(this, 0);
  }
}

//----- (0042ECB0) --------------------------------------------------------
void __thiscall CItemTransform::Insert(_DWORD *this, int a2, int a3, int a4)
{
  int v5; // [esp+4h] [ebp-4h]

  v5 = this[8];
  this[8] = *(_DWORD *)(a2 + 452);
  if ( a3 == 10 )
    this[12] &= 0xFFFFFFFB;
  CItem::SendItemInfo(this, a2, 7);
  if ( a4 )
    CDBSocket::Write(7, "dddwbd", this[9], v5, this[8], *(_DWORD *)(this[10] + 64), a3, this[13]);
  else
    CDBSocket::Write(
      6,
      "dwbddbbdb",
      this[9],
      *(_DWORD *)(this[10] + 64),
      0,
      this[12],
      this[24],
      this[23],
      this[21],
      this[8],
      a3);
}

//----- (0042ED90) --------------------------------------------------------
int __thiscall CItemTransform::UpdateNum(int this, int a2, int a3, int a4)
{
  if ( a4 + *(_DWORD *)(this + 52) > 0 )
    return *(_DWORD *)(this + 52);
  CPlayer::Write(a2, 9, "ddb", *(_DWORD *)(this + 36), 0, a3);
  if ( a3 == 50 )
    CDBSocket::Write(
      7,
      "dddwbd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(a2 + 452),
      0,
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      50,
      *(_DWORD *)(this + 52));
  else
    CDBSocket::Write(
      3,
      "ddwdbddd",
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 96),
      a3,
      ((unsigned __int8)*(_DWORD *)(this + 84) << 8) | ((unsigned __int8)*(_DWORD *)(this + 92) << 16),
      0,
      0);
  *(_DWORD *)(this + 52) = 0;
  CBase::Delete((char *)this);
  return 0;
}

//----- (0042EE90) --------------------------------------------------------
BOOL __thiscall CItemTransform::CanTrade(_DWORD *this, int a2, int a3, int a4)
{
  BOOL result; // eax

  if ( CItem::IsState(this, 1) )
    result = 0;
  else
    result = CItem::CanTrade(this, a2, a3, a4);
  return result;
}

//----- (0042EED0) --------------------------------------------------------
int __thiscall CItemTransform::StorageIn(int this, int a2, int a3)
{
  __int16 v5; // [esp+4h] [ebp-1Ch] BYREF
  int v6; // [esp+6h] [ebp-1Ah]
  char v7; // [esp+Ah] [ebp-16h]
  int v8; // [esp+Bh] [ebp-15h]
  int v9; // [esp+Fh] [ebp-11h]
  char v10; // [esp+13h] [ebp-Dh]
  char v11; // [esp+14h] [ebp-Ch]
  char v12; // [esp+15h] [ebp-Bh]
  char v13; // [esp+16h] [ebp-Ah]
  char v14; // [esp+17h] [ebp-9h]
  char v15; // [esp+18h] [ebp-8h]
  char v16; // [esp+19h] [ebp-7h]
  char v17; // [esp+1Ah] [ebp-6h]
  char v18; // [esp+1Bh] [ebp-5h]
  char v19; // [esp+1Ch] [ebp-4h]
  char v20; // [esp+1Dh] [ebp-3h]

  if ( CItem::IsState((_DWORD *)this, 1) )
    return 0;
  v5 = *(_WORD *)(*(_DWORD *)(this + 40) + 64);
  v6 = *(_DWORD *)(this + 36);
  v7 = 0;
  v8 = *(_DWORD *)(this + 48);
  v9 = *(_DWORD *)(this + 96);
  v10 = *(_BYTE *)(this + 92);
  v11 = 0;
  v12 = *(_BYTE *)(this + 84);
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  CPlayer::_StorageIn(a2, (int)&v5, *(_DWORD *)(this + 36), 0);
  CDBSocket::Write(
    11,
    "dddbd",
    *(_DWORD *)(this + 36),
    *(_DWORD *)(this + 32),
    *(_DWORD *)(a2 + 448),
    0,
    *(_DWORD *)(this + 52));
  CBase::Delete((char *)this);
  return 1;
}

//----- (0042EFB0) --------------------------------------------------------
void __thiscall CItemTransform::ForcedStorageIn(_DWORD *this, int a2, int a3, const char *a4, int a5)
{
  LONG v5; // eax
  int v6; // [esp-24h] [ebp-2Ch]
  int v7; // [esp-1Ch] [ebp-24h]
  int v8; // [esp-18h] [ebp-20h]
  int v9; // [esp-14h] [ebp-1Ch]
  int v10; // [esp-10h] [ebp-18h]
  const char *v11; // [esp+0h] [ebp-8h]

  if ( a4 )
    v11 = a4;
  else
    v11 = &Src;
  v10 = this[21];
  v9 = this[23];
  v8 = this[24];
  v7 = this[12];
  v6 = *(_DWORD *)(this[10] + 64);
  v5 = CItem::NewIID();
  CDBSocket::Write(35, "bdwbbdbbdds", a2, v5, v6, 0, v7, v8, v9, v10, a3, a5, v11);
}

//----- (0042F030) --------------------------------------------------------
void __thiscall CItemTransform::UpdateExp(_DWORD *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-18h]
  int v5; // [esp+8h] [ebp-14h]
  int i; // [esp+Ch] [ebp-10h]
  int v7; // [esp+10h] [ebp-Ch]
  int v8; // [esp+14h] [ebp-8h]
  int v9; // [esp+18h] [ebp-4h]

  if ( a2[113] != this[8] || !CItem::IsState(this, 1) || (int)this[23] >= 100 )
  {
    this[25] = 0;
    return;
  }
  v9 = 1;
  if ( a3 )
  {
    if ( ++this[25] < 0xB4u )
      return;
    this[25] -= 180;
    v9 = 10;
    this[24] += 10;
  }
  else
  {
    if ( (int)a2[15] > 20 )
      v9 = (a2[15] - 11) / 10 + 1;
    this[24] += v9;
  }
  if ( this[24] >= dword_4D5CA8[this[23]] )
  {
    if ( a2[15] <= this[23] )
    {
      this[24] -= v9;
      return;
    }
    this[24] -= dword_4D5CA8[this[23]];
    v7 = this[23];
    this[23] = v7 + 1;
    for ( i = 0; i <= 4; ++i )
    {
      v8 = dword_4D6090[11 * *(_DWORD *)(this[10] + 152) + i];
      if ( v8 )
      {
        v4 = v7 / v8 + 1;
        v5 = this[23] / v8 + 1;
        if ( v5 > v4 )
          (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, i, 1, v5 - v4);
      }
    }
    CItemTransform::SaveInfo(this, 1);
  }
  CItem::SendItemInfo(this, (int)a2, 92);
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042F200) --------------------------------------------------------
void __thiscall CItemTransform::CheatLevelUp(_DWORD *this, int a2, int a3)
{
  int i; // [esp+Ch] [ebp-Ch]
  int v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  if ( a3 >= 1 && a3 <= 40 )
  {
    v5 = this[23];
    this[23] = a3;
    for ( i = 0; i <= 4; ++i )
    {
      v6 = dword_4D6090[11 * *(_DWORD *)(this[10] + 152) + i];
      if ( v6 )
      {
        if ( v5 / v6 + 1 != this[23] / v6 + 1 )
          (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a2 + 92))(a2, i, 1, this[23] / v6 - v5 / v6);
      }
    }
    CItem::SendItemInfo(this, a2, 92);
  }
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042F2C0) --------------------------------------------------------
void __thiscall CItemTransform::SaveInfo(_DWORD *this, int a2)
{
  CDBSocket::Write(20, "dddbb", this[9], this[8], this[24], this[23], a2);
}

//----- (0042F300) --------------------------------------------------------
void __userpurge CItemTransform::ApplyTransform(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, volatile LONG *a2, int a3)
{
  int v6; // eax
  int v7; // [esp-4h] [ebp-10h]
  int v8; // [esp+4h] [ebp-8h]

  if ( a3 <= (this[23] - 1) / 10 )
  {
    this[26] = a3;
    v8 = *(_DWORD *)(this[10] + 152);
    (*(void (__cdecl **)(volatile LONG *, int, int, int))(*a2 + 96))(a2, 32, 1, dword_4D60A4[11 * v8]);
    if ( a3 >= 2 )
    {
      (*(void (__cdecl **)(volatile LONG *, int, int, int, int))(*a2 + 92))(
        a2,
        15,
        1,
        dword_4D60B0[11 * v8],
        dword_4D60B4[11 * v8]);
      (*(void (__cdecl **)(volatile LONG *, int, int, int))(*a2 + 96))(a2, 29, 1, dword_4D60B8[11 * v8]);
      if ( a3 >= 3 )
      {
        (*(void (__cdecl **)(volatile LONG *, int, int, int, int))(*a2 + 96))(
          a2,
          27,
          1,
          dword_4D60A8[11 * v8],
          dword_4D60A8[11 * v8]);
        (*(void (__cdecl **)(volatile LONG *, int, int, int, int))(*a2 + 96))(
          a2,
          28,
          1,
          dword_4D60AC[11 * v8],
          dword_4D60AC[11 * v8]);
      }
    }
    *((_DWORD *)a2 + 278) |= a3;
    CChar::AddGState(a2, 512);
    v7 = *((_DWORD *)a2 + 278);
    v6 = std___Mpunct_wchar_t___do_frac_digits(a2);
    CChar::WriteInSight(ebx0, edi0, a4, (int)a2, 61, "dbb", v6, 13, v7);
  }
}
// 4D60A4: using guessed type int dword_4D60A4[];
// 4D60A8: using guessed type int dword_4D60A8[];
// 4D60AC: using guessed type int dword_4D60AC[];
// 4D60B0: using guessed type int dword_4D60B0[];
// 4D60B4: using guessed type int dword_4D60B4[];

//----- (0042F460) --------------------------------------------------------
int __thiscall CItemTransform::FreeTransform(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-8h]

  v3 = this[26];
  this[26] = 0;
  v4 = *(_DWORD *)(this[10] + 152);
  (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 32, 0, dword_4D60A4[11 * v4]);
  if ( v3 >= 2 )
  {
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 92))(
      a2,
      15,
      0,
      dword_4D60B0[11 * v4],
      dword_4D60B4[11 * v4]);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 96))(a2, 29, 0, dword_4D60B8[11 * v4]);
    if ( v3 >= 3 )
    {
      (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 96))(
        a2,
        27,
        0,
        dword_4D60A8[11 * v4],
        dword_4D60A8[11 * v4]);
      (*(void (__cdecl **)(_DWORD *, int, _DWORD, int, int))(*a2 + 96))(
        a2,
        28,
        0,
        dword_4D60AC[11 * v4],
        dword_4D60AC[11 * v4]);
    }
  }
  a2[278] &= ~v3;
  return (*(int (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, 512);
}
// 4D60A4: using guessed type int dword_4D60A4[];
// 4D60A8: using guessed type int dword_4D60A8[];
// 4D60AC: using guessed type int dword_4D60AC[];
// 4D60B0: using guessed type int dword_4D60B0[];
// 4D60B4: using guessed type int dword_4D60B4[];

//----- (0042F590) --------------------------------------------------------
_DWORD *__thiscall sub_42F590(_DWORD *this)
{
  _DWORD *v1; // eax
  _DWORD *result; // eax

  v1 = (_DWORD *)sub_478AB0(this);
  sub_42F6B0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 42F6B0: using guessed type _DWORD __stdcall sub_42F6B0(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (0042F5F0) --------------------------------------------------------
_DWORD *__thiscall sub_42F5F0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_42F730(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0042F650) --------------------------------------------------------
_DWORD *__thiscall sub_42F650(_DWORD *this)
{
  _DWORD *v1; // eax
  _DWORD *result; // eax

  v1 = (_DWORD *)sub_478AB0(this);
  sub_42F7B0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}
// 418790: using guessed type int __thiscall sub_418790(_DWORD);
// 42F7B0: using guessed type _DWORD __stdcall sub_42F7B0(_DWORD);
// 478AB0: using guessed type int __thiscall sub_478AB0(_DWORD);

//----- (0042F6B0) --------------------------------------------------------
int __stdcall sub_42F6B0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_42F6B0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042F730) --------------------------------------------------------
int __stdcall sub_42F730(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_42F730(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042F7B0) --------------------------------------------------------
int __stdcall sub_42F7B0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_42F7B0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042F840) --------------------------------------------------------
int __thiscall sub_42F840(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_431110(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)unknown_libname_25(*this);
    if ( *(_BYTE *)sub_431110(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_431110(v5) || *this != *(_DWORD *)unknown_libname_25(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_431110(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)unknown_libname_25(*this);
      result = sub_4470E0(*v3);
      *this = result;
    }
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042F920) --------------------------------------------------------
int __cdecl sub_42F920(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)unknown_libname_25(a1);
    if ( *(_BYTE *)sub_431110(*v1) )
      break;
    a1 = *(_DWORD *)unknown_libname_25(a1);
  }
  return a1;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042F960) --------------------------------------------------------
_WORD *__cdecl sub_42F960(_WORD *a1, __int16 a2)
{
  *a1 = a2;
  return a1 + 1;
}

//----- (0042F980) --------------------------------------------------------
void *__thiscall sub_42F980(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0042F9B0) --------------------------------------------------------
void __stdcall sub_42F9B0(void *_Ptr, int _Val)
{
  std::_Construct<std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node *,std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node *>(
    (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)_Ptr,
    (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *const *)_Val);
}

//----- (0042F9D0) --------------------------------------------------------
void *__thiscall sub_42F9D0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0042FA00) --------------------------------------------------------
void __cdecl initp_misc_winxfltr(void *a1)
{
  ;
}

//----- (0042FA10) --------------------------------------------------------
void *__thiscall sub_42FA10(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0042FA40) --------------------------------------------------------
int __thiscall sub_42FA40(int *this)
{
  return sub_42FA60(this);
}

//----- (0042FA60) --------------------------------------------------------
int __thiscall sub_42FA60(int *this)
{
  return sub_42FA80(this);
}

//----- (0042FA80) --------------------------------------------------------
int __thiscall sub_42FA80(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_42FB30(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042FB30) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FB30(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_42F590(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0042FBD0) --------------------------------------------------------
int __thiscall sub_42FBD0(int *this)
{
  return sub_42FBF0(this);
}

//----- (0042FBF0) --------------------------------------------------------
int __thiscall sub_42FBF0(int *this)
{
  return sub_42FC10(this);
}

//----- (0042FC10) --------------------------------------------------------
int __thiscall sub_42FC10(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_42FCC0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042FCC0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FCC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_42F5F0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0042FD60) --------------------------------------------------------
int __thiscall sub_42FD60(int *this)
{
  return sub_42FD80(this);
}

//----- (0042FD80) --------------------------------------------------------
int __thiscall sub_42FD80(int *this)
{
  return sub_42FDA0(this);
}

//----- (0042FDA0) --------------------------------------------------------
int __thiscall sub_42FDA0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_42FE50(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0042FE50) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_42FE50(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_42F650(this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0042FEF0) --------------------------------------------------------
CGroup *CGroup::Copy()
{
  CGroup *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0x34u);
  if ( v2 )
    v1 = CGroup::CGroup((CGroup *)v2);
  else
    v1 = 0;
  return v1;
}

//----- (0042FF30) --------------------------------------------------------
CGroup *__thiscall CGroup::CGroup(CGroup *this)
{
  CBase::CBase(this);
  *(_DWORD *)this = &off_4B7558;
  sub_47CF60((CGroup *)((char *)this + 36));
  return this;
}
// 4B7558: using guessed type int (__stdcall *off_4B7558)(int);

//----- (0042FF60) --------------------------------------------------------
void *__userpurge CGroup::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CGroup::_CGroup(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0042FF90) --------------------------------------------------------
_DWORD *__usercall CGroup::_CGroup@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  sub_430B90((std::vector<CSyncPacket::CElement> *)(this + 9));
  return CBase::_CBase(this, a2, a3, a4);
}

//----- (0042FFB0) --------------------------------------------------------
int __thiscall CGroup::Set(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  _DWORD *v12; // [esp-4h] [ebp-5Ch] BYREF
  int v13; // [esp+0h] [ebp-58h]
  int v14; // [esp+4h] [ebp-54h]
  _DWORD *v15; // [esp+8h] [ebp-50h]
  char v16[4]; // [esp+10h] [ebp-48h] BYREF
  char v17[4]; // [esp+14h] [ebp-44h] BYREF
  char v18[4]; // [esp+18h] [ebp-40h] BYREF
  char v19[4]; // [esp+1Ch] [ebp-3Ch] BYREF
  char v20[4]; // [esp+20h] [ebp-38h] BYREF
  char v21[4]; // [esp+24h] [ebp-34h] BYREF
  char v22[4]; // [esp+28h] [ebp-30h] BYREF
  char v23[4]; // [esp+2Ch] [ebp-2Ch] BYREF
  int v24[4]; // [esp+30h] [ebp-28h] BYREF
  int v25; // [esp+40h] [ebp-18h] BYREF
  int v26[4]; // [esp+44h] [ebp-14h] BYREF
  char v27[4]; // [esp+54h] [ebp-4h] BYREF

  v15 = this;
  v14 = a2;
  if ( a2 == 2 )
  {
    v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v23);
    v15[8] = sub_40C8D0(v3);
  }
  else if ( v14 == 50 )
  {
    while ( !(unsigned __int8)sub_402380(&a3) )
    {
      lisp::var::pop((lisp::var *)&a3, (lisp::var *)&v25);
      sub_430160(v24);
      v7 = lisp::var::pop((lisp::var *)&v25, (lisp::var *)v19);
      v24[0] = sub_40C8D0(v7);
      v8 = lisp::var::pop((lisp::var *)&v25, (lisp::var *)v18);
      v24[1] = sub_40C8D0(v8);
      v9 = lisp::var::pop((lisp::var *)&v25, (lisp::var *)v17);
      v24[2] = sub_40C8D0(v9);
      if ( !(unsigned __int8)sub_402380(&v25) )
      {
        v10 = lisp::var::pop((lisp::var *)&v25, (lisp::var *)v16);
        v24[3] = sub_40C8D0(v10);
      }
      sub_430BB0((int)(v15 + 9), (CSyncPacket::CElement *)v24);
    }
  }
  else
  {
    if ( v14 != 52 )
    {
      v12 = this;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v12,
        &a3);
      return CBase::Set(v15, a2, (int)v12);
    }
    while ( !(unsigned __int8)sub_402380(&a3) )
    {
      lisp::var::pop((lisp::var *)&a3, (lisp::var *)v27);
      sub_4301A0(v26, 31);
      v4 = lisp::var::pop((lisp::var *)v27, (lisp::var *)v22);
      v26[0] = sub_40C8D0(v4);
      if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
      {
        v5 = lisp::var::pop((lisp::var *)v27, (lisp::var *)v21);
        v13 = 5 * sub_40C8D0(v5);
      }
      else
      {
        v6 = lisp::var::pop((lisp::var *)v27, (lisp::var *)v20);
        v13 = sub_40C8D0(v6);
      }
      v26[3] = v13;
      sub_430BB0((int)(v15 + 9), (CSyncPacket::CElement *)v26);
    }
  }
  return 1;
}

//----- (00430160) --------------------------------------------------------
_DWORD *__thiscall sub_430160(_DWORD *this)
{
  *this = 0;
  this[1] = 0;
  this[2] = 0;
  this[3] = 1;
  return this;
}

//----- (004301A0) --------------------------------------------------------
_DWORD *__thiscall sub_4301A0(_DWORD *this, int a2)
{
  *this = 0;
  this[1] = a2;
  this[2] = 0;
  this[3] = 1;
  return this;
}

//----- (004301E0) --------------------------------------------------------
int __thiscall CGroup::OnLoad(CItem *this)
{
  return CItemGroup::InsertGroup((const char *const *)this);
}

//----- (00430200) --------------------------------------------------------
void __thiscall CGroup::GetItemInfo(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  _DWORD *v5; // eax
  char v7[4]; // [esp+4h] [ebp-10h] BYREF
  char v8[4]; // [esp+8h] [ebp-Ch] BYREF
  char v9[4]; // [esp+Ch] [ebp-8h] BYREF
  int v10; // [esp+10h] [ebp-4h]

  if ( this )
  {
    v10 = RandomBetween(1, 1000);
    sub_430C20((int *)this + 9, v9);
    while ( 1 )
    {
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)this + 9, (int)v7);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
              v4) )
        break;
      v5 = (_DWORD *)sub_430DE0(v9);
      if ( v10 <= *v5 )
      {
        *a2 = *(_DWORD *)(sub_430DE0(v9) + 4);
        *a3 = *(_DWORD *)(sub_430DE0(v9) + 8);
        *a4 = *(_DWORD *)(sub_430DE0(v9) + 12);
        return;
      }
      sub_430E00((int *)v9, v8, 0);
    }
  }
}

//----- (004302B0) --------------------------------------------------------
int __cdecl CItemGroup::InsertGroup(const char *const *_Val2)
{
  std::pair<char const * const,CItem *> *v1; // eax
  char v3[8]; // [esp+0h] [ebp-10h] BYREF
  char v4[8]; // [esp+8h] [ebp-8h] BYREF

  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v3,
    _Val2 + 8,
    (CItem *const *)&_Val2);
  sub_445DF0(
    dword_4E10F0,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  LOG_ERR("CItemGroup::InsertGroup() Duplicate Group. (GroupID:%d)", *((_DWORD *)_Val2 + 8));
  return 0;
}
// 4302D3: variable 'v1' is possibly undefined

//----- (00430310) --------------------------------------------------------
_DWORD *CItemGroup::ClearGroup()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v2)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v3[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v4[4]; // [esp+10h] [ebp-8h] BYREF
  char v5[4]; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E10F0,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10F0, v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v0) )
      break;
    v2 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(v5) + 4);
    if ( v2 )
      (**v2)(v2, 1);
    sub_446090((int *)v5, (int *)v4, 0);
  }
  return sub_430C40(dword_4E10F0);
}

//----- (004303A0) --------------------------------------------------------
CItemGroup *CItemGroup::Copy()
{
  CItemGroup *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0x34u);
  if ( v2 )
    v1 = CItemGroup::CItemGroup((CItemGroup *)v2);
  else
    v1 = 0;
  return v1;
}

//----- (004303E0) --------------------------------------------------------
CItemGroup *__thiscall CItemGroup::CItemGroup(CItemGroup *this)
{
  CBase::CBase(this);
  *(_DWORD *)this = &off_4B75D8;
  sub_4707A0((CItemGroup *)((char *)this + 36));
  return this;
}
// 4B75D8: using guessed type int (__stdcall *off_4B75D8)(int);

//----- (00430410) --------------------------------------------------------
void *__userpurge CItemGroup::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CItemGroup::_CItemGroup(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00430440) --------------------------------------------------------
_DWORD *__usercall CItemGroup::_CItemGroup@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  sub_445BF0((std::vector<IPAddrMask> *)(this + 9));
  return CBase::_CBase(this, a2, a3, a4);
}

//----- (00430460) --------------------------------------------------------
int __thiscall CItemGroup::Set(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  int v6; // eax
  _DWORD *v8; // [esp-4h] [ebp-28h] BYREF
  int v9; // [esp+0h] [ebp-24h]
  _DWORD *v10; // [esp+4h] [ebp-20h]
  char v11[4]; // [esp+Ch] [ebp-18h] BYREF
  char v12[4]; // [esp+10h] [ebp-14h] BYREF
  char v13[4]; // [esp+14h] [ebp-10h] BYREF
  int v14[2]; // [esp+18h] [ebp-Ch] BYREF
  char v15[4]; // [esp+20h] [ebp-4h] BYREF

  v10 = this;
  v9 = a2;
  if ( a2 == 2 )
  {
    v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v13);
    v10[8] = sub_40C8D0(v3);
  }
  else
  {
    if ( v9 != 51 )
    {
      v8 = this;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v8,
        &a3);
      return CBase::Set(v10, a2, (int)v8);
    }
    while ( !(unsigned __int8)sub_402380(&a3) )
    {
      lisp::var::pop((lisp::var *)&a3, (lisp::var *)v15);
      v4 = lisp::var::pop((lisp::var *)v15, (lisp::var *)v12);
      v14[0] = sub_40C8D0(v4);
      v5 = lisp::var::pop((lisp::var *)v15, (lisp::var *)v11);
      v6 = sub_40C8D0(v5);
      v14[1] = CItemGroup::FindGroup(v6);
      sub_430CA0((int)(v10 + 9), (IPAddrMask *)v14);
    }
  }
  return 1;
}

//----- (00430520) --------------------------------------------------------
int __thiscall CItemGroup::OnLoad(const char *const *this)
{
  return CItem::InsertItemGroup(this);
}

//----- (00430540) --------------------------------------------------------
int __stdcall CItemGroup::FindGroup(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+4h] [ebp-Ch] BYREF
  int v4; // [esp+8h] [ebp-8h]
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  v4 = 0;
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E10F0,
    v5,
    &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10F0, v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
         v1) )
  {
    v4 = *(_DWORD *)(sub_420250(v5) + 4);
  }
  return v4;
}

//----- (004305A0) --------------------------------------------------------
void __thiscall CItemGroup::GetItemInfo(void *this, int a2, _DWORD *a3, _DWORD *a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  _DWORD *v5; // eax
  int v6; // eax
  char v8[4]; // [esp+4h] [ebp-10h] BYREF
  char v9[4]; // [esp+8h] [ebp-Ch] BYREF
  char v10[4]; // [esp+Ch] [ebp-8h] BYREF
  int v11; // [esp+10h] [ebp-4h]

  v11 = RandomBetween(1, 1000);
  sub_430C20((int *)this + 9, v10);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)this + 9, (int)v8);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v10,
            v4) )
      break;
    v5 = (_DWORD *)sub_430DE0(v10);
    if ( v11 <= *v5 )
    {
      v6 = sub_430DE0(v10);
      CGroup::GetItemInfo(*(void **)(v6 + 4), (_DWORD *)a2, a3, a4);
      return;
    }
    sub_430E30((int *)v10, v9, 0);
  }
}

//----- (00430630) --------------------------------------------------------
int __thiscall CItemGroup::GetFirstGroup(void *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int result; // eax
  char v4[4]; // [esp+4h] [ebp-8h] BYREF
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  sub_430C20((int *)this + 9, v5);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)this + 9, (int)v4);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
         v1) )
  {
    result = *(_DWORD *)(sub_430DE0(v5) + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00430680) --------------------------------------------------------
void __usercall CGoods::ForcedStorageIn(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2, void *Src)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  int v8; // eax
  int v9; // [esp+0h] [ebp-48h] BYREF
  char v10[4]; // [esp+4h] [ebp-44h] BYREF
  char v11[4]; // [esp+8h] [ebp-40h] BYREF
  int v12; // [esp+Ch] [ebp-3Ch] BYREF
  int v13; // [esp+10h] [ebp-38h]
  char *v14; // [esp+14h] [ebp-34h]
  int v15; // [esp+18h] [ebp-30h]
  int v16; // [esp+1Ch] [ebp-2Ch]
  char v17[4]; // [esp+20h] [ebp-28h] BYREF
  int v18; // [esp+24h] [ebp-24h]
  char v19; // [esp+2Bh] [ebp-1Dh] BYREF
  int v20; // [esp+2Ch] [ebp-1Ch] BYREF
  __int16 v21[3]; // [esp+30h] [ebp-18h] BYREF
  char v22; // [esp+37h] [ebp-11h] BYREF
  int v23; // [esp+38h] [ebp-10h]
  unsigned __int16 v24; // [esp+3Ch] [ebp-Ch] BYREF
  char v25[4]; // [esp+40h] [ebp-8h] BYREF
  int i; // [esp+44h] [ebp-4h]

  for ( i = 0; i < a2; ++i )
  {
    v23 = 0;
    v22 = 0;
    if ( dword_4E35B8 )
      Src = ReadPacket(ebx0, edi0, a3, Src, "dwwbb", &v20, v21, &v24, &v19, &v22);
    else
      Src = ReadPacket(ebx0, edi0, a3, Src, "dwwb", &v20, v21, &v24, &v19);
    v12 = (unsigned __int16)v21[0];
    sub_44AE20(
      (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E10FC,
      v25,
      &v12);
    v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10FC, v11);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v25,
           v6) )
    {
      v18 = *(_DWORD *)(sub_420250(v25) + 4);
      sub_430C20((int *)(v18 + 36), v17);
      while ( 1 )
      {
        v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(v18 + 36), (int)&v9);
        if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                (std::vector<CIOSocket::CIOTimer>::const_iterator *)v17,
                v7) )
          break;
        v13 = *(_DWORD *)sub_420010(v17);
        v15 = *(_DWORD *)(sub_420010(v17) + 4);
        v8 = sub_420010(v17);
        v16 = *(_DWORD *)(v8 + 8) * v24;
        v14 = (char *)CItem::CreateItem(v13, v15, v16, -1);
        if ( v14 )
        {
          if ( v19 || v22 )
            CItem::AddState(v14, 128);
          if ( *(_DWORD *)(*((_DWORD *)v14 + 10) + 92) )
          {
            (*(void (__thiscall **)(char *, int, int, const char *, int))(*(_DWORD *)v14 + 160))(
              v14,
              42,
              a1,
              &::Src,
              v20);
            CBase::Delete(v14);
          }
          else
          {
            while ( 1 )
            {
              (*(void (__thiscall **)(char *, int, int, const char *, int))(*(_DWORD *)v14 + 160))(
                v14,
                42,
                a1,
                &::Src,
                v20);
              CBase::Delete(v14);
              if ( --v16 <= 0 )
                break;
              v14 = (char *)CItem::CreateItem(v13, 0, 1, -1);
              if ( v19 || v22 )
                CItem::AddState(v14, 128);
            }
          }
        }
        else
        {
          LOG_ERR(
            "CGoods::ForcedStorageIn() Can't create goods. (%d<%d> : %d %d %d)",
            (unsigned __int16)v21[0],
            v20,
            v13,
            v15,
            v16);
        }
        sub_446060((int *)v17, v10, 0);
      }
      v23 = 2;
    }
    CAuthSocket::Write(ebx0, edi0, a3, 14, "db", v20, v23);
  }
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004308F0) --------------------------------------------------------
_DWORD *CGoods::ClearGoods()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  void (__thiscall ***v2)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v3[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v4[4]; // [esp+10h] [ebp-8h] BYREF
  char v5[4]; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E10FC,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E10FC, v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v0) )
      break;
    v2 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(v5) + 4);
    if ( v2 )
      (**v2)(v2, 1);
    sub_446090((int *)v5, (int *)v4, 0);
  }
  return sub_430D10(dword_4E10FC);
}

//----- (00430980) --------------------------------------------------------
CGoods *CGoods::Copy()
{
  CGoods *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0x34u);
  if ( v2 )
    v1 = CGoods::CGoods((CGoods *)v2);
  else
    v1 = 0;
  return v1;
}

//----- (004309C0) --------------------------------------------------------
CGoods *__thiscall CGoods::CGoods(CGoods *this)
{
  CBase::CBase(this);
  *(_DWORD *)this = &off_4B7678;
  *((_DWORD *)this + 8) = 0;
  sub_425850((CGoods *)((char *)this + 36));
  return this;
}
// 4B7678: using guessed type int (__stdcall *off_4B7678)(int);

//----- (00430A00) --------------------------------------------------------
void *__userpurge CGoods::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CGoods::_CGoods(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00430A30) --------------------------------------------------------
_DWORD *__usercall CGoods::_CGoods@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  sub_445B20((std::vector<CIOSocket::CIOTimer> *)(this + 9));
  return CBase::_CBase(this, a2, a3, a4);
}

//----- (00430A50) --------------------------------------------------------
int __thiscall CGoods::Set(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  _DWORD *v8; // [esp-4h] [ebp-30h] BYREF
  int v9; // [esp+0h] [ebp-2Ch]
  _DWORD *v10; // [esp+4h] [ebp-28h]
  char v11[4]; // [esp+Ch] [ebp-20h] BYREF
  char v12[4]; // [esp+10h] [ebp-1Ch] BYREF
  char v13[4]; // [esp+14h] [ebp-18h] BYREF
  char v14[4]; // [esp+18h] [ebp-14h] BYREF
  int v15[3]; // [esp+1Ch] [ebp-10h] BYREF
  char v16[4]; // [esp+28h] [ebp-4h] BYREF

  v10 = this;
  v9 = a2;
  if ( a2 == 2 )
  {
    v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v14);
    v10[8] = sub_40C8D0(v3);
  }
  else
  {
    if ( v9 != 50 )
    {
      v8 = this;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v8,
        &a3);
      return CBase::Set(v10, a2, (int)v8);
    }
    while ( !(unsigned __int8)sub_402380(&a3) )
    {
      lisp::var::pop((lisp::var *)&a3, (lisp::var *)v16);
      v4 = lisp::var::pop((lisp::var *)v16, (lisp::var *)v13);
      v15[0] = sub_40C8D0(v4);
      v5 = lisp::var::pop((lisp::var *)v16, (lisp::var *)v12);
      v15[1] = sub_40C8D0(v5);
      v6 = lisp::var::pop((lisp::var *)v16, (lisp::var *)v11);
      v15[2] = sub_40C8D0(v6);
      sub_430D70((int)(v10 + 9), (CIOSocket::CIOTimer *)v15);
    }
  }
  return 1;
}

//----- (00430B30) --------------------------------------------------------
int __thiscall CGoods::OnLoad(int this)
{
  std::pair<char const * const,CItem *> *v1; // eax
  CItem *_Val2; // [esp+4h] [ebp-14h] BYREF
  char v5[8]; // [esp+8h] [ebp-10h] BYREF
  char v6[8]; // [esp+10h] [ebp-8h] BYREF

  _Val2 = (CItem *)this;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v5,
    (const char *const *)(this + 32),
    &_Val2);
  sub_445DF0(
    dword_4E10FC,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v6,
    v1);
  if ( v6[4] )
    return 1;
  LOG_ERR("CGoods::OnLoad() Duplicate Index. (Index:%d)", *(_DWORD *)(this + 32));
  return 0;
}
// 430B5C: variable 'v1' is possibly undefined

//----- (00430B90) --------------------------------------------------------
void __thiscall sub_430B90(std::vector<CSyncPacket::CElement> *this)
{
  std::vector<CSyncPacket::CElement>::_Tidy(this);
}

//----- (00430BB0) --------------------------------------------------------
CSyncPacket::CElement *__thiscall sub_430BB0(int this, CSyncPacket::CElement *_Val)
{
  unsigned int v2; // esi
  CSyncPacket::CElement *result; // eax
  boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type **v4; // eax
  int v6; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this);
  if ( v2 >= std::vector<CSyncPacket::CElement>::capacity((std::vector<CSyncPacket::CElement> *)this) )
  {
    v4 = (boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type **)sub_445B40((_DWORD *)this, (int)v7);
    result = (CSyncPacket::CElement *)sub_430EA0((int *)this, &v6, *v4, (int *)_Val);
  }
  else
  {
    result = std::vector<CSyncPacket::CElement>::_Ufill(
               (std::vector<CSyncPacket::CElement> *)this,
               *(CSyncPacket::CElement **)(this + 8),
               1u,
               _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00430C20) --------------------------------------------------------
void *__thiscall sub_430C20(int *this, void *a2)
{
  sub_446700(a2, this[1]);
  return a2;
}

//----- (00430C40) --------------------------------------------------------
_DWORD *__thiscall sub_430C40(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_430FA0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00430CA0) --------------------------------------------------------
IPAddrMask *__thiscall sub_430CA0(int this, IPAddrMask *_Val)
{
  unsigned int v2; // esi
  IPAddrMask *result; // eax
  IPAddrMask **v4; // eax
  int v6; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
  if ( v2 >= std::vector<IPAddrMask>::capacity((std::vector<IPAddrMask> *)this) )
  {
    v4 = (IPAddrMask **)sub_445B40((_DWORD *)this, (int)v7);
    result = (IPAddrMask *)sub_431020((int *)this, &v6, *v4, (int *)_Val);
  }
  else
  {
    result = std::vector<IPAddrMask>::_Ufill((std::vector<IPAddrMask> *)this, *(IPAddrMask **)(this + 8), 1u, _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00430D10) --------------------------------------------------------
_DWORD *__thiscall sub_430D10(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_431120(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00430D70) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall sub_430D70(int this, CIOSocket::CIOTimer *_Val)
{
  unsigned int v2; // esi
  CIOSocket::CIOTimer *result; // eax
  CIOSocket::CIOTimer **v4; // eax
  int v6; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
  if ( v2 >= std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = (CIOSocket::CIOTimer **)sub_445B40((_DWORD *)this, (int)v7);
    result = (CIOSocket::CIOTimer *)sub_4311E0((int *)this, &v6, *v4, (int *)_Val);
  }
  else
  {
    result = std::vector<CIOSocket::CIOTimer>::_Ufill(
               (std::vector<CIOSocket::CIOTimer> *)this,
               *(CIOSocket::CIOTimer **)(this + 8),
               1u,
               _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00430DE0) --------------------------------------------------------
int __thiscall sub_430DE0(void *this)
{
  return sub_420010(this);
}

//----- (00430E00) --------------------------------------------------------
_DWORD *__thiscall sub_430E00(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_431350(this);
  *a2 = v4;
  return a2;
}

//----- (00430E30) --------------------------------------------------------
_DWORD *__thiscall sub_430E30(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  unknown_libname_27(this, this);
  *a2 = v4;
  return a2;
}
// 48DA00: using guessed type int __thiscall unknown_libname_27(_DWORD, _DWORD);

//----- (00430E60) --------------------------------------------------------
int __thiscall std::vector<CSyncPacket::CElement>::size(std::vector<CSyncPacket::CElement> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) >> 4;
  else
    v2 = 0;
  return v2;
}

//----- (00430EA0) --------------------------------------------------------
_DWORD *__thiscall sub_430EA0(int *this, _DWORD *a2, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *a3, int *a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) )
  {
    v4 = sub_430C20(this, v11);
    v8 = sub_47D7D0((int *)&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_4313E0((int)this, a3, 1u, a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, v10);
  sub_431D20(v5, a2, v7);
  return a2;
}

//----- (00430F20) --------------------------------------------------------
void __thiscall std::vector<CSyncPacket::CElement>::_Tidy(std::vector<CSyncPacket::CElement> *this)
{
  if ( *((_DWORD *)this + 1) )
  {
    sub_4313B0(*((char **)this + 1), *((char **)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 4);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
}

//----- (00430F90) --------------------------------------------------------
int __cdecl sub_430F90(int a1)
{
  return a1 + 8;
}

//----- (00430FA0) --------------------------------------------------------
int __stdcall sub_430FA0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_430FA0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00431020) --------------------------------------------------------
_DWORD *__thiscall sub_431020(int *this, _DWORD *a2, IPAddrMask *a3, int *a4)
{
  _DWORD *v4; // eax
  int v6; // [esp-4h] [ebp-18h]
  int v7; // [esp+0h] [ebp-14h]
  char v9[4]; // [esp+8h] [ebp-Ch] BYREF
  char v10[4]; // [esp+Ch] [ebp-8h] BYREF
  int v11; // [esp+10h] [ebp-4h]

  if ( std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
  {
    v4 = sub_430C20(this, v10);
    v7 = sub_4470B0((int *)&a3, v4);
  }
  else
  {
    v7 = 0;
  }
  v11 = v7;
  sub_4316F0((int)this, a3, 1u, a4);
  v6 = v11;
  sub_430C20(this, v9);
  sub_478710(a2, v6);
  return a2;
}

//----- (004310A0) --------------------------------------------------------
void __thiscall std::vector<IPAddrMask>::_Tidy(std::vector<IPAddrMask> *this)
{
  if ( *((_DWORD *)this + 1) )
  {
    sub_4316C0(*((char **)this + 1), *((char **)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 3);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
}

//----- (00431110) --------------------------------------------------------
int __cdecl sub_431110(int a1)
{
  return a1 + 21;
}

//----- (00431120) --------------------------------------------------------
int __stdcall sub_431120(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_431120(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004311A0) --------------------------------------------------------
int __thiscall std::vector<CIOSocket::CIOTimer>::size(std::vector<CIOSocket::CIOTimer> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) / 12;
  else
    v2 = 0;
  return v2;
}

//----- (004311E0) --------------------------------------------------------
_DWORD *__thiscall sub_4311E0(int *this, _DWORD *a2, CIOSocket::CIOTimer *a3, int *a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = sub_430C20(this, v11);
    v8 = sub_431D50((int *)&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_431A40((int)this, a3, 1u, a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, v10);
  sub_446FA0(v5, a2, v7);
  return a2;
}

//----- (00431260) --------------------------------------------------------
char __thiscall std::vector<CIOSocket::CIOTimer>::_Buy(std::vector<CIOSocket::CIOTimer> *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_446800(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_446B40(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 12 * _Capacity;
  }
  else
  {
    sub_446B00();
  }
  return 1;
}

//----- (004312E0) --------------------------------------------------------
void __thiscall std::vector<CIOSocket::CIOTimer>::_Tidy(std::vector<CIOSocket::CIOTimer> *this)
{
  if ( *((_DWORD *)this + 1) )
  {
    std::vector<CIOSocket::CIOTimer>::_Destroy(
      this,
      *((CIOSocket::CIOTimer **)this + 1),
      *((CIOSocket::CIOTimer **)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) / 12);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
}

//----- (00431350) --------------------------------------------------------
_DWORD *__thiscall sub_431350(_DWORD *this)
{
  *this += 16;
  return this;
}

//----- (00431390) --------------------------------------------------------
_DWORD *__thiscall sub_431390(_DWORD *this)
{
  *this += 12;
  return this;
}

//----- (004313B0) --------------------------------------------------------
char *__stdcall sub_4313B0(char *a1, char *a2)
{
  return sub_47D860(a1, a2);
}

//----- (004313E0) --------------------------------------------------------
void __thiscall sub_4313E0(int this, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_First, unsigned int _Count, int *a4)
{
  unsigned int v4; // esi
  CSyncPacket::CElement *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-28h]
  _DWORD *v8; // [esp+Ch] [ebp-20h]
  CMemory **v9; // [esp+10h] [ebp-1Ch]
  CSyncPacket::CElement *_Ptr; // [esp+14h] [ebp-18h]
  unsigned int v11; // [esp+18h] [ebp-14h]
  int v12; // [esp+18h] [ebp-14h]
  int v13[4]; // [esp+1Ch] [ebp-10h] BYREF
  unsigned int _Counta; // [esp+38h] [ebp+Ch]

  v13[0] = *a4;
  v13[1] = a4[1];
  v13[2] = a4[2];
  v13[3] = a4[3];
  v11 = std::vector<CSyncPacket::CElement>::capacity((std::vector<CSyncPacket::CElement> *)this);
  if ( _Count )
  {
    v4 = sub_47D3D0((std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *)this);
    if ( v4 - std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) >= _Count )
    {
      if ( v11 >= _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)_First) >> 4 >= _Count )
        {
          v8 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E30((int)&v8[-4 * _Count], (int)v8, v8);
          sub_47D8E0(_First, &v8[-4 * _Count], v8);
          std::_Fill<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>(
            _First,
            (boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)((char *)_First + 16 * _Count),
            (const boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)v13);
        }
        else
        {
          sub_431E30((int)_First, *(_DWORD *)(this + 8), (char *)_First + 16 * _Count);
          std::vector<CSyncPacket::CElement>::_Ufill(
            (std::vector<CSyncPacket::CElement> *)this,
            *(CSyncPacket::CElement **)(this + 8),
            _Count - ((*(_DWORD *)(this + 8) - (int)_First) >> 4),
            (const CSyncPacket::CElement *)v13);
          *(_DWORD *)(this + 8) += 16 * _Count;
          std::_Fill<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>(
            _First,
            (boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)(*(_DWORD *)(this + 8) - 16 * _Count),
            (const boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)v13);
        }
      }
      else
      {
        if ( sub_47D3D0((std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *)this)
           - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) )
          v12 = _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this);
        v9 = sub_47D6D0(v12);
        v5 = (CSyncPacket::CElement *)sub_431E30(*(_DWORD *)(this + 4), (int)_First, v9);
        _Ptr = std::vector<CSyncPacket::CElement>::_Ufill(
                 (std::vector<CSyncPacket::CElement> *)this,
                 v5,
                 _Count,
                 (const CSyncPacket::CElement *)v13);
        sub_431E30((int)_First, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4313B0(*(char **)(this + 4), *(char **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 4);
        }
        *(_DWORD *)(this + 12) = &v9[4 * v12];
        *(_DWORD *)(this + 8) = &v9[4 * _Counta];
        *(_DWORD *)(this + 4) = v9;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (004316C0) --------------------------------------------------------
char *__stdcall sub_4316C0(char *a1, char *a2)
{
  return sub_47A3B0(a1, a2);
}

//----- (004316F0) --------------------------------------------------------
void __thiscall sub_4316F0(int this, IPAddrMask *_First, unsigned int _Count, int *a4)
{
  int v4; // edx
  unsigned int v5; // esi
  IPAddrMask *v6; // eax
  unsigned int v7; // [esp+4h] [ebp-20h]
  _DWORD *v9; // [esp+Ch] [ebp-18h]
  CMemory **v10; // [esp+10h] [ebp-14h]
  IPAddrMask *_Ptr; // [esp+14h] [ebp-10h]
  unsigned int v12; // [esp+18h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-Ch]
  int v14[2]; // [esp+1Ch] [ebp-8h] BYREF
  unsigned int _Counta; // [esp+30h] [ebp+Ch]

  v4 = a4[1];
  v14[0] = *a4;
  v14[1] = v4;
  v12 = std::vector<IPAddrMask>::capacity((std::vector<IPAddrMask> *)this);
  if ( _Count )
  {
    v5 = sub_446B60((std::allocator<std::pair<char const * const,CItem *> > *)this);
    if ( v5 - std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) >= _Count )
    {
      if ( v12 >= _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)_First) >> 3 >= _Count )
        {
          v9 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E60((int)&v9[-2 * _Count], (int)v9, v9);
          sub_47A3F0(_First, &v9[-2 * _Count], v9);
          std::fill<IPAddrMask *,IPAddrMask>(
            _First,
            (IPAddrMask *)((char *)_First + 8 * _Count),
            (const IPAddrMask *)v14);
        }
        else
        {
          sub_431E60((int)_First, *(_DWORD *)(this + 8), (char *)_First + 8 * _Count);
          std::vector<IPAddrMask>::_Ufill(
            (std::vector<IPAddrMask> *)this,
            *(IPAddrMask **)(this + 8),
            _Count - ((*(_DWORD *)(this + 8) - (int)_First) >> 3),
            (const IPAddrMask *)v14);
          *(_DWORD *)(this + 8) += 8 * _Count;
          std::fill<IPAddrMask *,IPAddrMask>(
            _First,
            (IPAddrMask *)(*(_DWORD *)(this + 8) - 8 * _Count),
            (const IPAddrMask *)v14);
        }
      }
      else
      {
        if ( sub_446B60((std::allocator<std::pair<char const * const,CItem *> > *)this) - (v12 >> 1) >= v12 )
          v7 = v12 + (v12 >> 1);
        else
          v7 = 0;
        v13 = v7;
        if ( v7 < _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
          v13 = _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
        v10 = sub_446E50(v13);
        v6 = (IPAddrMask *)sub_431E60(*(_DWORD *)(this + 4), (int)_First, v10);
        _Ptr = std::vector<IPAddrMask>::_Ufill((std::vector<IPAddrMask> *)this, v6, _Count, (const IPAddrMask *)v14);
        sub_431E60((int)_First, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4316C0(*(char **)(this + 4), *(char **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 3);
        }
        *(_DWORD *)(this + 12) = &v10[2 * v13];
        *(_DWORD *)(this + 8) = &v10[2 * _Counta];
        *(_DWORD *)(this + 4) = v10;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (004319C0) --------------------------------------------------------
void *__stdcall sub_4319C0(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Rarg, std::pair<char const * const,CItem *> *_Val, char a5)
{
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v6; // [esp+8h] [ebp-8h]
  void *v7; // [esp+Ch] [ebp-4h]

  v7 = sub_44CD20(1);
  v6 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)operator new(0x18u, v7);
  if ( v6 )
    std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node::_Node(
      v6,
      _Larg,
      _Parg,
      _Rarg,
      _Val,
      a5);
  return v7;
}

//----- (00431A40) --------------------------------------------------------
void __thiscall sub_431A40(int this, CIOSocket::CIOTimer *a2, unsigned int _Count, int *a4)
{
  unsigned int v4; // esi
  CIOSocket::CIOTimer *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-24h]
  CIOSocket::CIOTimer *_Dest; // [esp+Ch] [ebp-1Ch]
  CMemory **_First; // [esp+10h] [ebp-18h]
  CIOSocket::CIOTimer *_Ptr; // [esp+14h] [ebp-14h]
  unsigned int v11; // [esp+18h] [ebp-10h]
  int v12; // [esp+18h] [ebp-10h]
  int v13[3]; // [esp+1Ch] [ebp-Ch] BYREF
  unsigned int _Counta; // [esp+34h] [ebp+Ch]

  v13[0] = *a4;
  v13[1] = a4[1];
  v13[2] = a4[2];
  v11 = std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this);
  if ( _Count )
  {
    v4 = sub_446800((std::allocator<CIOSocket::CIOTimer> *)this);
    if ( v4 - std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) >= _Count )
    {
      if ( v11 >= _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) / 12 >= _Count )
        {
          _Dest = *(CIOSocket::CIOTimer **)(this + 8);
          *(_DWORD *)(this + 8) = sub_4474B0((int)_Dest - 12 * _Count, (int)_Dest, _Dest);
          std::copy_backward<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(
            a2,
            (CIOSocket::CIOTimer *)((char *)_Dest - 12 * _Count),
            _Dest);
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)((char *)a2 + 12 * _Count),
            (const CIOSocket::CIOTimer *)v13);
        }
        else
        {
          sub_4474B0((int)a2, *(_DWORD *)(this + 8), (char *)a2 + 12 * _Count);
          std::vector<CIOSocket::CIOTimer>::_Ufill(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 8),
            _Count - (*(_DWORD *)(this + 8) - (int)a2) / 12,
            (const CIOSocket::CIOTimer *)v13);
          *(_DWORD *)(this + 8) += 12 * _Count;
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)(*(_DWORD *)(this + 8) - 12 * _Count),
            (const CIOSocket::CIOTimer *)v13);
        }
      }
      else
      {
        if ( sub_446800((std::allocator<CIOSocket::CIOTimer> *)this) - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
          v12 = _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        _First = sub_446B40(v12);
        v5 = sub_4474B0(*(_DWORD *)(this + 4), (int)a2, _First);
        _Ptr = std::vector<CIOSocket::CIOTimer>::_Ufill(
                 (std::vector<CIOSocket::CIOTimer> *)this,
                 v5,
                 _Count,
                 (const CIOSocket::CIOTimer *)v13);
        sub_4474B0((int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          std::vector<CIOSocket::CIOTimer>::_Destroy(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 4),
            *(CIOSocket::CIOTimer **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) / 12);
        }
        *(_DWORD *)(this + 12) = &_First[3 * v12];
        *(_DWORD *)(this + 8) = &_First[3 * _Counta];
        *(_DWORD *)(this + 4) = _First;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (00431D20) --------------------------------------------------------
_DWORD *__thiscall sub_431D20(int *this, _DWORD *a2, int _Off)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  *a2 = *(_DWORD *)std::vector<CSyncPacket::CElement>::iterator::operator+=(
                     (std::vector<CSyncPacket::CElement>::iterator *)&v4,
                     _Off);
  return a2;
}

//----- (00431D50) --------------------------------------------------------
int __thiscall sub_431D50(int *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  v3 = *this;
  return sub_425280(&v3, a2);
}

//----- (00431D80) --------------------------------------------------------
unsigned int __thiscall std::allocator<boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime>>::timer_base *>::bucket_type>::max_size(std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *this)
{
  return 0xFFFFFFF;
}

//----- (00431DB0) --------------------------------------------------------
int __thiscall sub_431DB0(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) >> 4;
}

//----- (00431DD0) --------------------------------------------------------
int __thiscall sub_431DD0(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) >> 3;
}

//----- (00431DF0) --------------------------------------------------------
void *__cdecl sub_431DF0(void *a1, int a2, int a3)
{
  unknown_libname_14(&a1, &a1);
  return sub_447570(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (00431E30) --------------------------------------------------------
void *__stdcall sub_431E30(int a1, int a2, void *a3)
{
  return sub_47D9D0(a1, a2, a3);
}

//----- (00431E60) --------------------------------------------------------
void *__stdcall sub_431E60(int a1, int a2, void *a3)
{
  return sub_47A690(a1, a2, a3);
}

//----- (00431E90) --------------------------------------------------------
void *__cdecl sub_431E90(void *a1, int a2, int a3)
{
  void *result; // eax

  result = a1;
  while ( a2 )
  {
    sub_4475D0(a1, a3);
    --a2;
    a1 = (char *)a1 + 12;
  }
  return result;
}

//----- (00431EF0) --------------------------------------------------------
_DWORD *__cdecl std::_Copy_backward_opt<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,std::forward_iterator_tag>(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  while ( a1 != a2 )
  {
    a2 -= 4;
    a3 -= 4;
    *a3 = *a2;
    a3[1] = a2[1];
    a3[2] = a2[2];
    a3[3] = a2[3];
  }
  return a3;
}

//----- (00431F30) --------------------------------------------------------
_DWORD *__cdecl std::_Copy_backward_opt<IPAddrMask *,IPAddrMask *>(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  int v3; // edx

  while ( a1 != a2 )
  {
    a2 -= 2;
    a3 -= 2;
    v3 = a2[1];
    *a3 = *a2;
    a3[1] = v3;
  }
  return a3;
}

//----- (00431F70) --------------------------------------------------------
char *__cdecl std::_Destroy_range<CIOSocket::CIOTimer>(char *a1, char *a2)
{
  char *result; // eax

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 12;
    a1 += 12;
  }
  return result;
}

//----- (00431FA0) --------------------------------------------------------
CIOSocket::CIOTimer *__cdecl std::_Uninitialized_copy<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *,std::allocator<CIOSocket::CIOTimer>>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest)
{
  unknown_libname_14(&_First, &_Dest);
  return (CIOSocket::CIOTimer *)sub_4475F0((int)_First, (int)_Last, _Dest);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (00431FE0) --------------------------------------------------------
void __cdecl std::_Construct<CSyncPacket::CElement,CSyncPacket::CElement>(CSyncPacket::CElement *_Ptr, const CSyncPacket::CElement *_Val)
{
  _DWORD *v2; // [esp+4h] [ebp-4h]

  v2 = operator new(0x10u, _Ptr);
  if ( v2 )
  {
    *v2 = *(_DWORD *)_Val;
    v2[1] = *((_DWORD *)_Val + 1);
    v2[2] = *((_DWORD *)_Val + 2);
    v2[3] = *((_DWORD *)_Val + 3);
  }
}

//----- (00432030) --------------------------------------------------------
void *__thiscall sub_432030(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00432060) --------------------------------------------------------
void *__thiscall std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(void *this, _BYTE *a2, char a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(&a3);
  std::_Tree_ptr<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_ptr<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  std___Init_locks__operator_(&a3);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (004320A0) --------------------------------------------------------
void *__thiscall sub_4320A0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004320D0) --------------------------------------------------------
int __thiscall sub_4320D0(int *this)
{
  return sub_4320F0(this);
}

//----- (004320F0) --------------------------------------------------------
int __thiscall sub_4320F0(int *this)
{
  return sub_432110(this);
}

//----- (00432110) --------------------------------------------------------
int __thiscall sub_432110(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4321C0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004321C0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4321C0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_430C40((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00432260) --------------------------------------------------------
int __thiscall sub_432260(int *this)
{
  return sub_432280(this);
}

//----- (00432280) --------------------------------------------------------
int __thiscall sub_432280(int *this)
{
  return sub_4322A0(this);
}

//----- (004322A0) --------------------------------------------------------
int __thiscall sub_4322A0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_432350(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00432350) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_432350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_430D10((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (004323F0) --------------------------------------------------------
_DWORD *__thiscall lisp::var::operator=(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  if ( this != &dword_4E1108 )
  {
    result = this;
    *this = a2;
  }
  return result;
}

//----- (00432410) --------------------------------------------------------
int __thiscall sub_432410(const char **this)
{
  return strtol(this[1], 0, 0);
}

//----- (00432430) --------------------------------------------------------
unsigned int __thiscall sub_432430(const char **this)
{
  return strtoul(this[1], 0, 0);
}

//----- (00432450) --------------------------------------------------------
int __thiscall lisp::_cons::length(lisp::_cons *this)
{
  _DWORD *v2; // eax
  int v3; // ecx
  int v4[3]; // [esp-4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h] BYREF

  v4[1] = (int)this;
  v5 = 0;
  std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
    &v6,
    (_DWORD *)this + 2);
  while ( 1 )
  {
    ++v5;
    if ( !(unsigned __int8)sub_40BCE0(&v6) )
      break;
    v2 = (_DWORD *)sub_40BCC0(&v6);
    v4[0] = v3;
    std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
      v4,
      v2);
    lisp::var::operator=(&v6, v4[0]);
  }
  return v5;
}
// 432494: variable 'v3' is possibly undefined

//----- (004324B0) --------------------------------------------------------
_DWORD *__thiscall sub_4324B0(_DWORD *this)
{
  std__ios_base__ios_base_0(this);
  *this = off_4B76F0;
  return this;
}
// 4B76F0: using guessed type int (*off_4B76F0[10])();

//----- (004324E0) --------------------------------------------------------
void __thiscall CLog::CInit::~CInit(CLog::CInit *this)
{
  unsigned int i; // [esp+4h] [ebp-4h]

  for ( i = 0; i < 3; ++i )
  {
    if ( *(&Stream + i) )
      fclose(*(&Stream + i));
  }
}

//----- (00432530) --------------------------------------------------------
void __cdecl CLog::AddV(int nType, char *format, char *va)
{
  char v3[36]; // [esp+8h] [ebp-93Ch] BYREF
  char Buffer[260]; // [esp+2Ch] [ebp-918h] BYREF
  __time32_t Time; // [esp+130h] [ebp-814h] BYREF
  struct tm *Tm; // [esp+134h] [ebp-810h]
  size_t ElementCount; // [esp+138h] [ebp-80Ch]
  char Source[1024]; // [esp+13Ch] [ebp-808h] BYREF
  char buffer[1028]; // [esp+53Ch] [ebp-408h] BYREF
  int v10; // [esp+940h] [ebp-4h]

  v10 = dword_4D9830;
  vsprintf(Source, format, va);
  CSocket::Lock(&unk_4E1128);
  CScreen::AddString((CScreen *)&unk_4E1128, *(&color + nType), Source);
  if ( nType >= 1 )
  {
    time(&Time);
    Tm = localtime(&Time);
    if ( Time >= (unsigned int)dword_4E1110[nType] )
    {
      if ( *(&Stream + nType) )
        fclose(*(&Stream + nType));
      if ( nType == 1 )
        sprintf(Buffer, "Log\\%02d%02d%02d.log", Tm->tm_year % 100, Tm->tm_mon + 1, Tm->tm_mday);
      else
        sprintf(Buffer, "Log\\%02d%02d%02d.err.log", Tm->tm_year % 100, Tm->tm_mon + 1, Tm->tm_mday);
      qmemcpy(v3, Tm, sizeof(v3));
      Tm->tm_sec = 0;
      Tm->tm_min = 0;
      Tm->tm_hour = 0;
      dword_4E1110[nType] = mktime(Tm) + 86400;
      *(&Stream + nType) = fopen(Buffer, "ab");
      qmemcpy(Tm, v3, sizeof(struct tm));
    }
    ElementCount = sprintf(
                     buffer,
                     "%02d/%02d/%02d %02d:%02d:%02d %s\r\n",
                     Tm->tm_year % 100,
                     Tm->tm_mon + 1,
                     Tm->tm_mday,
                     Tm->tm_hour,
                     Tm->tm_min,
                     Tm->tm_sec,
                     Source);
    if ( *(&Stream + nType) )
      fread_0(buffer, 1u, ElementCount, *(&Stream + nType));
  }
  CSocket::Unlock(&unk_4E1128);
  if ( dword_4E2130 == (CScreen *)&unk_4E1128 )
    InvalidateRect(hWnd, 0, 1);
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00432800) --------------------------------------------------------
void __cdecl CLog::Flush()
{
  unsigned int i; // [esp+0h] [ebp-4h]

  CSocket::Lock(&unk_4E1128);
  for ( i = 0; i < 3; ++i )
  {
    if ( *(&Stream + i) )
      fflush(*(&Stream + i));
  }
  CSocket::Unlock(&unk_4E1128);
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (00432860) --------------------------------------------------------
void LOG_INFO(char *format, ...)
{
  va_list va; // [esp+10h] [ebp+Ch] BYREF

  va_start(va, format);
  CLog::AddV(0, format, va);
}

//----- (00432890) --------------------------------------------------------
void LOG_NORMAL(char *format, ...)
{
  va_list va; // [esp+10h] [ebp+Ch] BYREF

  va_start(va, format);
  CLog::AddV(1, format, va);
}

//----- (004328C0) --------------------------------------------------------
void LOG_ERR(char *format, ...)
{
  va_list va; // [esp+10h] [ebp+Ch] BYREF

  va_start(va, format);
  CLog::AddV(2, format, va);
}

//----- (004328F0) --------------------------------------------------------
int CMainConfig::Open()
{
  int result; // eax
  char *v1; // eax
  char *v2; // eax
  char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // eax
  size_t v9; // eax
  size_t v10; // eax
  size_t v11; // eax
  size_t v12; // eax
  const char *v13; // eax
  const char *v14; // eax
  const char *v15; // eax
  const std::pair<int const ,CSocket *> *v16; // eax
  int v17; // [esp-4h] [ebp-2F4h]
  char v18[28]; // [esp+8h] [ebp-2E8h] BYREF
  char v19[32]; // [esp+24h] [ebp-2CCh] BYREF
  int v20; // [esp+44h] [ebp-2ACh]
  char v21[8]; // [esp+50h] [ebp-2A0h] BYREF
  CHAR String[32]; // [esp+58h] [ebp-298h] BYREF
  char *Str; // [esp+78h] [ebp-278h]
  char v24[4]; // [esp+7Ch] [ebp-274h] BYREF
  struct _SYSTEM_INFO SystemInfo; // [esp+80h] [ebp-270h] BYREF
  char _Ptr[48]; // [esp+A4h] [ebp-24Ch] BYREF
  FILE *Stream; // [esp+D4h] [ebp-21Ch]
  _DWORD v28[133]; // [esp+D8h] [ebp-218h] BYREF
  int v29; // [esp+2ECh] [ebp-4h]

  v28[132] = dword_4D9830;
  CConfig::CConfig((CConfig *)v28);
  if ( CConfig::Open(v28, "MainConfig.txt") )
  {
    GetSystemInfo(&SystemInfo);
    *(_DWORD *)dword_4E1190 = CConfig::GetInt((CConfig *)v28, "NumberOfThreads", 2 * SystemInfo.dwNumberOfProcessors);
    dword_4E118C = CConfig::GetInt((CConfig *)v28, "MaxUser", 1000);
    dword_4E1188 = sub_40C970((CConfig *)v28, "ServerId");
    dword_4E1184 = CConfig::GetInt((CConfig *)v28, "AgeLimit", 18);
    v1 = (char *)CConfig::Get((CConfig *)v28, "Map", ".\\Map");
    sub_433B70(v1);
    v2 = (char *)CConfig::Get((CConfig *)v28, "DBServer", "127.0.0.1");
    sub_433B70(v2);
    v3 = (char *)CConfig::Get((CConfig *)v28, "AuthServer", "127.0.0.1");
    sub_433B70(v3);
    v4 = (char *)CConfig::Get((CConfig *)v28, "MailServer");
    sub_433B70(v4);
    v5 = (char *)CConfig::Get((CConfig *)v28, "MailFrom");
    sub_433B70(v5);
    v6 = (char *)CConfig::Get((CConfig *)v28, "MailTo");
    sub_433B70(v6);
    dword_4E117C = CConfig::GetTimeStamp();
    *(_DWORD *)&nPort = CConfig::GetInt((CConfig *)v28, "Port", 30001);
    *(_DWORD *)&dword_4E116C = CConfig::GetInt((CConfig *)v28, "DBPort", 40001);
    *(_DWORD *)&hostshort = CConfig::GetInt((CConfig *)v28, "AuthPort", 50001);
    v7 = (char *)CConfig::Get((CConfig *)v28, "ODBC", "KAL");
    sub_433B70(v7);
    dword_4E1164 = CConfig::GetInt((CConfig *)v28, "ItemVer", 1);
    dword_4E35B8 = CConfig::GetInt((CConfig *)v28, "Country", 0);
    v8 = (char *)CConfig::Get((CConfig *)v28, "Language", "LanguageM_kr.txt");
    sub_433B70(v8);
    dword_4E1180 = CConfig::GetInt((CConfig *)v28, "MailLimitLv", 0);
    *(_DWORD *)dword_4E1160 = CConfig::GetInt((CConfig *)v28, "Seed", 0);
    Str = (char *)CConfig::Get((CConfig *)v28, "Title");
    if ( *Str )
    {
      sprintf(String, "%s on port %d", Str, *(_DWORD *)&nPort);
      SetWindowTextA(hWnd, String);
    }
    for ( Str = (char *)CConfig::Get((CConfig *)v28, "Event", &Src); ; Str += v10 )
    {
      v9 = strspn(Str, " ,");
      Str += v9;
      if ( !*Str )
        break;
      dword_4E1178 |= 1 << j__atol(Str);
      v10 = strcspn(Str, " ,");
    }
    for ( Str = (char *)CConfig::Get((CConfig *)v28, "System", &Src); ; Str += v12 )
    {
      v11 = strspn(Str, " ,");
      Str += v11;
      if ( !*Str )
        break;
      *(_DWORD *)dword_4E1174 |= 1 << j__atol(Str);
      v12 = strcspn(Str, " ,");
    }
    v29 = 0;
    v13 = (const char *)sub_4012D0(&unk_4E1264);
    Stream = fopen(v13, "rt");
    if ( Stream )
    {
      while ( (Stream->_flag & 0x10) == 0 )
      {
        ++v29;
        if ( fscanf(Stream, "%d %[^\n]", v24, _Ptr) < 2 )
        {
          if ( (Stream->_flag & 0x10) == 0 )
          {
            v17 = v29;
            v15 = (const char *)sub_4012D0(&unk_4E1264);
            LOG_ERR("Can't read '%s'. (line:%d)", v15, v17);
            fclose(Stream);
            v20 = 0;
            CConfig::_CConfig((CConfig *)v28);
            return v20;
          }
          break;
        }
        std::string::string((std::string *)v18, _Ptr);
        v16 = (const std::pair<int const ,CSocket *> *)_lambda_9ab38a79c03e1e04423ad6818173354b_::_lambda_9ab38a79c03e1e04423ad6818173354b_(
                                                         v24,
                                                         (std::string *)v18);
        std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::insert(
          (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)&dword_4E1258,
          (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *)v21,
          v16);
        sub_432EC0(v19);
        sub_40F780((std::string *)v18);
        if ( !v21[4] )
        {
          LOG_ERR("Can't insert into LanguageMap.(index:%d, string:%s)", *(_DWORD *)v24, _Ptr);
          fclose(Stream);
          CConfig::_CConfig((CConfig *)v28);
          return 0;
        }
      }
      fclose(Stream);
      CConfig::_CConfig((CConfig *)v28);
      result = 1;
    }
    else
    {
      v14 = (const char *)sub_4012D0(&unk_4E1264);
      LOG_ERR("Can't open '%s'", v14);
      CConfig::_CConfig((CConfig *)v28);
      result = 0;
    }
  }
  else
  {
    CConfig::_CConfig((CConfig *)v28);
    result = 0;
  }
  return result;
}
// 432EC0: using guessed type int __thiscall sub_432EC0(_DWORD);
// 433200: using guessed type _DWORD __stdcall _lambda_9ab38a79c03e1e04423ad6818173354b_::_lambda_9ab38a79c03e1e04423ad6818173354b_(_DWORD, std::string *_Right);
// 4D9830: using guessed type int dword_4D9830;
// 4E1164: using guessed type int dword_4E1164;
// 4E1178: using guessed type int dword_4E1178;
// 4E117C: using guessed type int dword_4E117C;
// 4E1180: using guessed type int dword_4E1180;
// 4E1184: using guessed type int dword_4E1184;
// 4E1188: using guessed type int dword_4E1188;
// 4E118C: using guessed type int dword_4E118C;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00432EC0) --------------------------------------------------------
void __thiscall sub_432EC0(int this)
{
  sub_40F780((std::string *)(this + 4));
}

//----- (00432EE0) --------------------------------------------------------
_DWORD *CMainConfig::Close()
{
  return sub_433110(dword_4E1258);
}

//----- (00432EF0) --------------------------------------------------------
const char *__cdecl GetStr(int nIndex)
{
  void *v1; // eax
  const char *result; // eax
  int v3; // eax
  char v4[4]; // [esp+0h] [ebp-8h] BYREF
  char v5[4]; // [esp+4h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1258,
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)v5,
    &nIndex);
  v1 = sub_430C20(dword_4E1258, v4);
  if ( (unsigned __int8)unknown_libname_16(v1) )
  {
    LOG_ERR("Can't find words in LanguageMap. (index:%d)", nIndex);
    result = &Src;
  }
  else
  {
    v3 = sub_420250(v5);
    result = (const char *)sub_4012D0((void *)(v3 + 4));
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00432F60) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::insert(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,bool> *result, const std::pair<int const ,CSocket *> *_Val)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0((int *)this);
  v22 = *((_DWORD *)this + 1);
  v23 = 1;
  while ( !*(_BYTE *)sub_433230(v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500(v21);
    v3 = (_DWORD *)unknown_libname_25(_Val);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)unknown_libname_25(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4332F0((int *)this, v17, 1, v22, (int)_Val);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        result,
        v5,
        &v18);
      return result;
    }
    sub_475900(&v20);
  }
  v11 = (_DWORD *)unknown_libname_25(_Val);
  v7 = unknown_libname_15(&v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4332F0((int *)this, v15, v23, v22, (int)_Val);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      result,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      result,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20,
      &v14);
  }
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00433110) --------------------------------------------------------
_DWORD *__thiscall sub_433110(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_433270(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00433170) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *__thiscall std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *result, const int *_Keyval)
{
  void *v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_433240((int *)this, v12, _Keyval);
  v3 = sub_430C20((int *)this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(_Keyval, v5)) )
  {
    v7 = (char *)sub_430C20((int *)this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *(_DWORD *)result = *(_DWORD *)v7;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00433230) --------------------------------------------------------
int __cdecl sub_433230(int a1)
{
  return a1 + 45;
}

//----- (00433240) --------------------------------------------------------
void *__thiscall sub_433240(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_476660(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00433270) --------------------------------------------------------
int __stdcall sub_433270(void *a1)
{
  char *i; // eax
  int result; // eax
  void **v3; // eax
  void *v4; // [esp+4h] [ebp-4h]

  v4 = a1;
  for ( i = (char *)sub_433230((int)a1); ; i = (char *)sub_433230((int)v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (void **)sub_430F90((int)v4);
    sub_433270(*v3);
    v4 = *(void **)unknown_libname_25(v4);
    sub_433910(a1);
    sub_4338F0(a1, 1);
    a1 = v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004332F0) --------------------------------------------------------
void *__thiscall sub_4332F0(int *this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  _DWORD *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  CMemory **v44; // [esp+48h] [ebp-8h]
  CMemory **v45; // [esp+4Ch] [ebp-4h]
  int v46; // [esp+60h] [ebp+10h]

  if ( sub_477640() - 1 <= (unsigned int)this[2] )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_433870(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v45;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v45;
    v8 = (CMemory ***)CServer::SendAlive(this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)unknown_libname_25(a4);
    *v9 = v45;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v45;
    if ( a4 == *(_DWORD *)CServer::SendAlive(this) )
    {
      v12 = (CMemory ***)CServer::SendAlive(this);
      *v12 = v45;
    }
  }
  v44 = v45;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v44);
    if ( *(_BYTE *)sub_433730(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v44);
    v15 = (int *)sub_446FF0((int)v44);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v44);
      v18 = (int *)sub_446FF0(*v17);
      v46 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_433730(v46) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v44);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v44 == *v24 )
      {
        v44 = *(CMemory ***)sub_446FF0((int)v44);
        sub_4766F0(this, (int)v44);
      }
      v25 = (int *)sub_446FF0((int)v44);
      *(_BYTE *)sub_433730(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v44);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_433730(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v44);
      v29 = (int *)sub_446FF0(*v28);
      sub_433740(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v44);
      v31 = (_DWORD *)sub_446FF0(*v30);
      v46 = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)sub_433730(v46) )
      {
        v32 = (_DWORD *)sub_446FF0((int)v44);
        v33 = (CMemory ***)unknown_libname_25(*v32);
        if ( v44 == *v33 )
        {
          v44 = *(CMemory ***)sub_446FF0((int)v44);
          sub_433740(this, (int)v44);
        }
        v34 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_433730(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v44);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_433730(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v44);
        v38 = (int *)sub_446FF0(*v37);
        sub_4766F0(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_433730(*v19) = 1;
        *(_BYTE *)sub_433730(v46) = 1;
        v20 = (int *)sub_446FF0((int)v44);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_433730(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v44);
        v44 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_433730(*v39) = 1;
  sub_446700(a2, (int)v45);
  return a2;
}
// 433328: variable 'v5' is possibly undefined
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00433730) --------------------------------------------------------
int __cdecl sub_433730(int a1)
{
  return a1 + 44;
}

//----- (00433740) --------------------------------------------------------
int *__thiscall sub_433740(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  _DWORD *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)unknown_libname_25(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)unknown_libname_25(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_433230(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00433870) --------------------------------------------------------
CMemory **__stdcall sub_433870(int a1, int a2, int a3, int a4, char a5)
{
  void *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_4793B0(1);
  v6 = operator new(0x30u, v7);
  if ( v6 )
    std::_Tree_nod<std::_Tmap_traits<std::string,void *,std::less<std::string>,std::allocator<std::pair<std::string const,void *>>,0>>::_Node::_Node(
      v6,
      a1,
      a2,
      a3,
      a4,
      a5);
  return v7;
}

//----- (004338F0) --------------------------------------------------------
void __stdcall sub_4338F0(void *a1, int a2)
{
  operator_delete(a1);
}

//----- (00433910) --------------------------------------------------------
void __stdcall sub_433910(void *a1)
{
  __ExceptionPtrDestroy(a1);
}

//----- (00433930) --------------------------------------------------------
int __thiscall sub_433930(int *this)
{
  return sub_447000(*this);
}

//----- (00433950) --------------------------------------------------------
int __thiscall sub_433950(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_433230(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)unknown_libname_25(*this);
    if ( *(_BYTE *)sub_433230(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_433230(v5) || *this != *(_DWORD *)unknown_libname_25(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_433230(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)unknown_libname_25(*this);
      result = sub_433AB0(*v3);
      *this = result;
    }
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00433A30) --------------------------------------------------------
void *__thiscall std::_Tree_nod<std::_Tmap_traits<std::string,void *,std::less<std::string>,std::allocator<std::pair<std::string const,void *>>,0>>::_Node::_Node(void *this, int a2, int a3, int a4, int a5, char a6)
{
  *(_DWORD *)this = a2;
  *((_DWORD *)this + 1) = a3;
  *((_DWORD *)this + 2) = a4;
  std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>(
    (char *)this + 12,
    a5);
  *((_BYTE *)this + 44) = a6;
  *((_BYTE *)this + 45) = 0;
  return this;
}

//----- (00433A80) --------------------------------------------------------
char *__thiscall std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>(char *this, int a2)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  std::string::string((std::string *)(this + 4), (const std::string *)(a2 + 4));
  return this;
}

//----- (00433AB0) --------------------------------------------------------
int __cdecl sub_433AB0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_433230(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00433B00) --------------------------------------------------------
CMemory **__cdecl sub_433B00(int a1)
{
  return operator_new(48 * a1);
}

//----- (00433B20) --------------------------------------------------------
void *__thiscall sub_433B20(void *this, char a2)
{
  sub_433B50(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00433B50) --------------------------------------------------------
void __thiscall sub_433B50(void *this)
{
  sub_432EC0((int)this + 12);
}

//----- (00433B70) --------------------------------------------------------
std::string *__thiscall sub_433B70(std::string *this, char *Str)
{
  return std::string::assign(this, Str);
}

//----- (00433B90) --------------------------------------------------------
void __thiscall std::string::string(std::string *this)
{
  std::string *v1; // [esp-4h] [ebp-Ch] BYREF
  std::string *v2; // [esp+0h] [ebp-8h]

  v2 = this;
  v1 = this;
  LocaleUpdate__GetLocaleT(&v1);
  sub_44F7C0(v2, (char)v1);
  std::string::_Tidy(v2, 0, 0);
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00433BC0) --------------------------------------------------------
void *__thiscall sub_433BC0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_472ED0(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00433BF0) --------------------------------------------------------
int __thiscall sub_433BF0(int *this)
{
  return sub_433C10(this);
}

//----- (00433C10) --------------------------------------------------------
int __thiscall sub_433C10(int *this)
{
  return sub_433C30(this);
}

//----- (00433C30) --------------------------------------------------------
int __thiscall sub_433C30(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_433CE0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00433CE0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_433CE0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_433110((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_434510(&a3, &v10, 0);
      sub_433D80((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00433D80) --------------------------------------------------------
_DWORD *__thiscall sub_433D80(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  void **v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_433230(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  v56 = (void *)unknown_libname_15(&a3);
  sub_475880(&a3);
  v54 = v56;
  v5 = (int *)unknown_libname_25(v56);
  if ( *(_BYTE *)sub_433230(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_433230(*v6) )
    {
      v55 = *(void **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (void *)unknown_libname_15(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_433230((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)unknown_libname_25(v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)unknown_libname_25(v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_479190((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)CServer::SendAlive(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_433AB0((int)v55);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(v56);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_433230((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)unknown_libname_25(v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0((int)v56);
      v26 = (void **)unknown_libname_25(*v25);
      if ( *v26 == v56 )
      {
        v27 = (_DWORD *)sub_446FF0((int)v56);
        v28 = (_DWORD *)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_433730((int)v56);
    v31 = (char *)sub_433730((int)v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)sub_433730((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_433730((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_433730((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)unknown_libname_25(v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)unknown_libname_25(v53);
      if ( !*(_BYTE *)sub_433730((int)v54) )
      {
        *(_BYTE *)sub_433730((int)v54) = 1;
        *(_BYTE *)sub_433730((int)v53) = 0;
        sub_433740(this, (int)v53);
        v54 = *(void **)unknown_libname_25(v53);
      }
      if ( !*(_BYTE *)sub_433230((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_433730(*v40) != 1 || (v41 = (int *)unknown_libname_25(v54), *(_BYTE *)sub_433730(*v41) != 1) )
        {
          v42 = (int *)unknown_libname_25(v54);
          if ( *(_BYTE *)sub_433730(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_433730(*v43) = 1;
            *(_BYTE *)sub_433730((int)v54) = 0;
            sub_4766F0(this, (int)v54);
            v54 = *(void **)unknown_libname_25(v53);
          }
          v44 = (_BYTE *)sub_433730((int)v53);
          *(_BYTE *)sub_433730((int)v54) = *v44;
          *(_BYTE *)sub_433730((int)v53) = 1;
          v45 = (int *)unknown_libname_25(v54);
          *(_BYTE *)sub_433730(*v45) = 1;
          sub_433740(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_433730((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_433730((int)v54) )
    {
      *(_BYTE *)sub_433730((int)v54) = 1;
      *(_BYTE *)sub_433730((int)v53) = 0;
      sub_4766F0(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_433230((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)unknown_libname_25(v54);
    if ( *(_BYTE *)sub_433730(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_433730(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_433730(*v36) == 1 )
      {
        v37 = (int *)unknown_libname_25(v54);
        *(_BYTE *)sub_433730(*v37) = 1;
        *(_BYTE *)sub_433730((int)v54) = 0;
        sub_433740(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_433730((int)v53);
      *(_BYTE *)sub_433730((int)v54) = *v38;
      *(_BYTE *)sub_433730((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_433730(*v39) = 1;
      sub_4766F0(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_433910(v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00434510) --------------------------------------------------------
int *__thiscall sub_434510(int *this, int *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_475880(this);
  *a2 = v4;
  return a2;
}

//----- (00434540) --------------------------------------------------------
int __thiscall sub_434540(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_433230(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_433230(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_433230(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_479190(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00434600) --------------------------------------------------------
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
  unsigned int ThrdAddr; // [esp+0h] [ebp-24h] BYREF
  struct tagMSG Msg; // [esp+4h] [ebp-20h] BYREF
  HACCEL hAccTable; // [esp+20h] [ebp-4h]

  LoadStringA(hInstance, 0x67u, WindowName, 100);
  LoadStringA(hInstance, 0x6Du, ClassName, 100);
  MyRegisterClass(hInstance);
  CScreen::Open((CScreen *)&unk_4E1128, 200, 50);
  CScreen::Open((CScreen *)&unk_4E2EDC, 80, 20);
  dword_4E2130 = (CScreen *)&unk_4E1128;
  if ( !sub_434790(hInstance, nShowCmd) )
    return 0;
  hAccTable = LoadAcceleratorsA(hInstance, (LPCSTR)0x6D);
  dword_4E1280 = (HANDLE)_beginthreadex(0, 0, (_beginthreadex_proc_type)StartAddress, 0, 0, &ThrdAddr);
  while ( GetMessageA(&Msg, 0, 0, 0) )
  {
    if ( !TranslateAcceleratorA(Msg.hwnd, hAccTable, &Msg) )
    {
      TranslateMessage(&Msg);
      DispatchMessageA(&Msg);
    }
  }
  CLog::Flush();
  if ( CIOException::Disable() )
    ExitProcess(0);
  return Msg.wParam;
}

//----- (00434710) --------------------------------------------------------
ATOM __cdecl MyRegisterClass(HINSTANCE__ *hInstance)
{
  WNDCLASSEXA v2; // [esp+0h] [ebp-30h] BYREF

  v2.cbSize = 48;
  v2.style = 3;
  v2.lpfnWndProc = (WNDPROC)sub_4348E0;
  v2.cbClsExtra = 0;
  v2.cbWndExtra = 0;
  v2.hInstance = hInstance;
  v2.hIcon = LoadIconA(hInstance, (LPCSTR)0x6B);
  v2.hCursor = LoadCursorA(0, (LPCSTR)0x7F00);
  v2.hbrBackground = (HBRUSH)6;
  v2.lpszMenuName = (LPCSTR)109;
  v2.lpszClassName = ClassName;
  v2.hIconSm = LoadIconA(hInstance, (LPCSTR)0x6C);
  return RegisterClassExA(&v2);
}

//----- (00434790) --------------------------------------------------------
int __cdecl sub_434790(HINSTANCE hInstance, int nCmdShow)
{
  HMENU v3; // eax
  HMENU v4; // eax
  HWND hWnd; // [esp+0h] [ebp-4h]

  ::hInstance = hInstance;
  hWnd = CreateWindowExA(0x300u, ClassName, WindowName, 0xCF0000u, 0x80000000, 0, 0x80000000, 0, 0, 0, hInstance, 0);
  if ( !hWnd )
    return 0;
  v3 = GetMenu(hWnd);
  EnableMenuItem(v3, 0x8011u, 1u);
  v4 = GetMenu(hWnd);
  EnableMenuItem(v4, 0x8015u, 1u);
  ::hWnd = hWnd;
  ShowWindow(hWnd, nCmdShow);
  UpdateWindow(hWnd);
  return 1;
}

//----- (00434840) --------------------------------------------------------
int sub_434840()
{
  int result; // eax
  char v1; // [esp+0h] [ebp-28h]

  ELOG("Exception Test\n", v1);
  result = 0;
  MEMORY[0] = 0;
  return result;
}
// 43486B: variable 'v1' is possibly undefined

//----- (004348E0) --------------------------------------------------------
LRESULT __userpurge sub_4348E0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, HWND hWndParent, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  int v8; // [esp+Ch] [ebp-24h]
  int v9; // [esp+10h] [ebp-20h]
  int v10; // [esp+14h] [ebp-1Ch]
  unsigned int v11; // [esp+1Ch] [ebp-14h]
  HANDLE hObject; // [esp+20h] [ebp-10h]
  unsigned int ThrdAddr[3]; // [esp+24h] [ebp-Ch] BYREF

  if ( Msg > 0x10 )
  {
    if ( Msg == 273 )
    {
      ThrdAddr[2] = (unsigned __int16)wParam;
      ThrdAddr[1] = HIWORD(wParam);
      if ( (unsigned __int16)wParam > 0x800Eu )
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x8011u:
          case 0x8015u:
            return 0;
          case 0x8012u:
            goto LABEL_26;
          case 0x8013u:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E2EDC;
            CStatus::Update();
            SetTimer(hWndParent, 1u, 0xBB8u, 0);
            return 0;
          case 0x8017u:
            DialogBoxParamA(hInstance, (LPCSTR)0x82, hWndParent, (DLGPROC)sub_434ED0, 0);
            return 0;
          case 0x8019u:
            CItem::ReloadItemGroup();
            return 0;
          case 0x801Bu:
            DialogBoxParamA(hInstance, (LPCSTR)0x83, hWndParent, DialogFunc, 0);
            return 0;
          default:
            return DefWindowProcA(hWndParent, Msg, wParam, lParam);
        }
      }
      if ( (unsigned __int16)wParam == 32782 )
      {
        KillTimer(hWndParent, 1u);
        dword_4E2130 = (CScreen *)&unk_4E1128;
        if ( CIOException::ToggleRaise() )
          LOG_INFO("ASSERT enabled");
        else
          LOG_INFO("ASSERT disabled");
      }
      else if ( (unsigned __int16)wParam > 0x800Au )
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x800Bu:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            LOG_INFO("Stack dump started");
            UpdateWindow(hWndParent);
            CIOSocket::DumpStack();
            LOG_INFO("Stack dump completed");
            break;
          case 0x800Cu:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            CLog::Flush();
            LOG_INFO("Log Flushed");
            break;
          case 0x800Du:
            v11 = CIOSocket::AddIOThread((void *)HIWORD(wParam));
            if ( v11 )
              ++*(_DWORD *)dword_4E1190;
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            LOG_ERR("Add thread count(%d) thread id(%x)", *(_DWORD *)dword_4E1190, v11);
            break;
          default:
            return DefWindowProcA(hWndParent, Msg, wParam, lParam);
        }
      }
      else
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x800Au:
            KillTimer(hWndParent, 1u);
            dword_4E2130 = (CScreen *)&unk_4E1128;
            LOG_INFO("Exception test started");
            UpdateWindow(hWndParent);
            sub_434840();
            LOG_INFO("Exception test completed");
            break;
          case 0x68u:
            DialogBoxParamA(hInstance, (LPCSTR)0x67, hWndParent, About, 0);
            break;
          case 0x69u:
            PostMessageA(hWndParent, 0x10u, 0, 0);
            break;
          case 0x8009u:
            if ( CIOException::Disable() )
            {
              hObject = (HANDLE)_beginthreadex(0, 0, (_beginthreadex_proc_type)sub_435500, (void *)lParam, 0, ThrdAddr);
              CloseHandle(hObject);
LABEL_26:
              KillTimer(hWndParent, 1u);
              dword_4E2130 = (CScreen *)&unk_4E1128;
              InvalidateRect(hWndParent, 0, 1);
            }
            break;
          default:
            return DefWindowProcA(hWndParent, Msg, wParam, lParam);
        }
      }
    }
    else
    {
      if ( Msg != 275 )
        return DefWindowProcA(hWndParent, Msg, wParam, lParam);
      switch ( wParam )
      {
        case 1u:
          CStatus::Update();
          break;
        case 2u:
          dword_4E17B8 -= 10000;
          if ( dword_4E17B8 <= 0 )
          {
            KillTimer(hWndParent, 2u);
            SetTimer(hWndParent, 3u, 0x7D0u, 0);
            CPlayer::WriteAll(a1, a2, a3, 67, "b", 2);
            LOG_INFO("[Shutdown] Server is closed right now!");
            dword_4E17B8 = 0;
          }
          else
          {
            v10 = dword_4E17B8 / 60000;
            v9 = dword_4E17B8 % 60000 / 1000;
            if ( dword_4E17B8 / 60000 <= 0 )
            {
              CPlayer::WriteAll(a1, a2, a3, 68, "bb", 1, v9);
              LOG_INFO("[Shutdown] Server will be closed after %d sec", v9);
            }
            else if ( !v9 )
            {
              CPlayer::WriteAll(a1, a2, a3, 68, "bb", 0, v10);
              LOG_INFO("[Shutdown] Server will be closed after %d min", v10);
            }
          }
          break;
        case 3u:
          KillTimer(hWndParent, 3u);
          PostMessageA(hWndParent, 0x111u, 0x8009u, 0);
          break;
      }
    }
  }
  else
  {
    switch ( Msg )
    {
      case 0x10u:
        if ( CIOException::IsEnable() )
        {
          v8 = MessageBoxA(hWndParent, "Really shutdown the System?", "MainSvr", 3u);
          if ( v8 == 6 )
          {
            PostMessageA(hWndParent, 0x111u, 0x8009u, 1);
            return 0;
          }
          if ( v8 == 2 )
            return 0;
        }
        DestroyWindow(hWndParent);
        return 0;
      case 2u:
        PostQuitMessage(0);
        break;
      case 0xFu:
        CScreen::OnPaint(dword_4E2130);
        break;
      default:
        return DefWindowProcA(hWndParent, Msg, wParam, lParam);
    }
  }
  return 0;
}
// 4E17B8: using guessed type int dword_4E17B8;

//----- (00434E60) --------------------------------------------------------
int __stdcall About(HWND__ *hDlg, unsigned int message, unsigned int wParam, int lParam)
{
  if ( message == 272 )
    return 1;
  if ( message != 273 || (unsigned __int16)wParam != 1 && (unsigned __int16)wParam != 2 )
    return 0;
  EndDialog(hDlg, (unsigned __int16)wParam);
  return 1;
}

//----- (00434ED0) --------------------------------------------------------
INT_PTR __userpurge sub_434ED0@<eax>(DWORD a1@<ebx>, DWORD a2@<esi>, HWND hDlg, UINT a4, WPARAM a5, LPARAM a6)
{
  HWND v7; // eax
  UINT v8; // [esp-4h] [ebp-224h]
  signed int v9; // [esp+Ch] [ebp-214h]
  CHAR String; // [esp+10h] [ebp-210h] BYREF
  char v11[508]; // [esp+11h] [ebp-20Fh] BYREF
  __int16 v12; // [esp+20Dh] [ebp-13h]
  char v13; // [esp+20Fh] [ebp-11h]
  _DWORD v14[2]; // [esp+210h] [ebp-10h] BYREF
  int v15; // [esp+218h] [ebp-8h]
  int v16; // [esp+21Ch] [ebp-4h]

  v14[1] = dword_4D9830;
  if ( a4 == 272 )
    return 1;
  if ( a4 != 273 )
    return 0;
  v16 = (unsigned __int16)a5;
  v15 = HIWORD(a5);
  if ( (unsigned __int16)a5 == 1 )
  {
    String = 0;
    memset(v11, 0, sizeof(v11));
    v12 = 0;
    v13 = 0;
    GetDlgItemTextA(hDlg, 1001, &String, 511);
    if ( IsDlgButtonChecked(hDlg, 1003) )
    {
      v9 = GetDlgItemInt(hDlg, 1002, 0, 0);
      if ( v9 > 60 )
      {
        MessageBoxA(hDlg, "Shutdown Time Setting Error. (Max 60)", "Shutdown Error", 0);
        return 1;
      }
      if ( v9 <= 0 )
      {
        if ( dword_4E17B8 )
        {
          KillTimer(hWnd, 2u);
          dword_4E17B8 = 0;
          LOG_NORMAL("Shutdown's canceled.");
        }
        goto LABEL_22;
      }
      if ( dword_4E17B8 )
      {
        LOG_INFO("[Shutdown] Shutdown's already started. (%d min. remains)", dword_4E17B8 / 60000);
LABEL_22:
        EndDialog(hDlg, 1);
        return 1;
      }
      dword_4E17B8 = 60000 * v9;
      SetTimer(hWnd, 2u, 0x2710u, 0);
      LOG_NORMAL("Shutdown's started. (%d min. remains)", v9);
    }
    if ( String )
    {
      CPlayer::WriteAll(a1, (DWORD)v14, a2, 15, "s", &String);
      if ( dword_4E35B8 == 1 )
        LOG_NORMAL("[GM Command] Notice from Main : %s", &String);
    }
    goto LABEL_22;
  }
  if ( (unsigned __int16)a5 == 2 )
  {
    EndDialog(hDlg, 0);
    return 1;
  }
  if ( (unsigned __int16)a5 == 1003 && !v15 )
  {
    v8 = IsDlgButtonChecked(hDlg, 1003);
    v7 = GetDlgItem(hDlg, 1002);
    EnableWindow(v7, v8);
  }
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;
// 4E17B8: using guessed type int dword_4E17B8;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00435130) --------------------------------------------------------
INT_PTR __stdcall DialogFunc(HWND hDlg, UINT a2, WPARAM a3, LPARAM a4)
{
  INT_PTR result; // eax

  if ( a2 == 272 )
  {
    SetDlgItemInt(hDlg, 1004, uValue, 1);
    result = 1;
  }
  else if ( a2 == 273 && (unsigned __int16)a3 == 1 )
  {
    uValue = GetDlgItemInt(hDlg, 1004, 0, 0);
    EndDialog(hDlg, 1);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004351C0) --------------------------------------------------------
unsigned int __userpurge StartAddress@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *a4)
{
  std::string *v4; // eax
  std::string *v5; // eax
  const CHAR *v6; // eax
  const char *v8; // eax
  const char *v9; // [esp-8h] [ebp-200h]
  std::string *v10; // [esp-4h] [ebp-1FCh]
  const char *v11; // [esp-4h] [ebp-1FCh]
  char v12[28]; // [esp+0h] [ebp-1F8h] BYREF
  char v13[28]; // [esp+1Ch] [ebp-1DCh] BYREF
  int i; // [esp+38h] [ebp-1C0h]
  char v15[4]; // [esp+3Ch] [ebp-1BCh]
  char Src[16]; // [esp+40h] [ebp-1B8h] BYREF
  char v17[4]; // [esp+50h] [ebp-1A8h]
  char v18[4]; // [esp+54h] [ebp-1A4h]
  struct tm *v19; // [esp+58h] [ebp-1A0h]
  __time32_t Time; // [esp+5Ch] [ebp-19Ch] BYREF
  struct WSAData WSAData; // [esp+60h] [ebp-198h] BYREF
  int v22; // [esp+1F4h] [ebp-4h]

  v22 = dword_4D9830;
  CIOException::Disable();
  v10 = sub_497C20((std::string *)v12);
  std::string::string((std::string *)v13, "Global\\");
  v5 = sub_4355E0(v4, v10);
  v6 = (const CHAR *)sub_4012D0(v5);
  CreateMutexA(0, 0, v6);
  sub_40F780((std::string *)v13);
  sub_40F780((std::string *)v12);
  if ( GetLastError() )
  {
    LOG_INFO("Another Server is running");
    return 0;
  }
  LOG_NORMAL("Server started");
  *(_DWORD *)v18 = WSAStartup(0x202u, &WSAData);
  if ( *(_DWORD *)v18 )
  {
    LOG_ERR("WSAStartup error 0x%x", *(_DWORD *)v18);
    return 0;
  }
  if ( !CMainConfig::Open() )
    return 0;
  InitRandom();
  v11 = (const char *)sub_4012D0(&unk_4E123C);
  v9 = (const char *)sub_4012D0(&unk_4E1220);
  v8 = (const char *)sub_4012D0(&unk_4E1204);
  CIOException::Open(v8, v9, v11);
  CIOSocket::CreateIOThread(a1, a2, a3, *(int *)dword_4E1190);
  if ( !CDBSocket::Start() )
    return 0;
  if ( !CAuthSocket::Start(a1, a2, a3) )
    return 0;
  if ( !sub_44BEF0() )
    return 0;
  CCalendar::Start(a1, a2, a3);
  sub_47E5F0(a1, a2, a3);
  CPlayer::Start();
  CMonster::Start(a1, a2, a3);
  CNPC::Start();
  CCastle::Start();
  CWar::Start();
  if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
  {
    *(_DWORD *)v17 = AntiCpSvr_1("Config\\HackShield.crc");
    if ( *(_DWORD *)v17 )
    {
      LOG_ERR("_AntiCpSvr_Initialize() is Failed.  ErrorType(%d)", *(_DWORD *)v17);
      return 0;
    }
    LOG_INFO(" HackShield Initialized");
  }
  if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0 )
  {
    for ( i = 0; i < 16; ++i )
      Src[i] = RandomBetween(0, 63);
    memcpy(dword_4E1358, Src, sizeof(dword_4E1358));
    *(_DWORD *)v15 = Initialize_AES_ChiperText(dword_4E1358);
    if ( *(_DWORD *)v15 )
    {
      LOG_ERR("_HsCrypt_InitCrypt() is Failed.  ErrorType(%d)", *(_DWORD *)v15);
      return 0;
    }
    LOG_INFO(" InitCrypt is done");
  }
  if ( *(_DWORD *)dword_4E1160 )
  {
    uValue = *(_DWORD *)dword_4E1160;
    LOG_NORMAL("Seed is %d", *(_DWORD *)dword_4E1160);
  }
  else
  {
    uValue = 3793;
  }
  Time = dword_4E117C + 32400;
  v19 = gmtime(&Time);
  LOG_NORMAL(
    "Server is ready on port %d (time stamp: %02d/%02d/%02d %02d:%02d:%02d (KR))",
    *(_DWORD *)&nPort,
    v19->tm_year % 100,
    v19->tm_mon + 1,
    v19->tm_mday,
    v19->tm_hour,
    v19->tm_min,
    v19->tm_sec);
  CLog::Flush();
  CIOException::Enable();
  CIOSocket::WaitThread(a1, a2, a3, 0);
  return 0;
}
// 4351F8: variable 'v4' is possibly undefined
// 4B4014: using guessed type int __stdcall AntiCpSvr_1(_DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4E117C: using guessed type int dword_4E117C;

//----- (00435500) --------------------------------------------------------
unsigned int __userpurge sub_435500@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *a4)
{
  void *savedregs; // [esp+0h] [ebp+0h]

  LOG_NORMAL("Shutdown started");
  CAlliance::Stop();
  CCastle::Stop();
  CGuild::Stop();
  CLog::Flush();
  CNPC::Stop();
  CMonster::Stop(a1, a2, a3);
  initp_misc_winxfltr(savedregs);
  sub_47E720(a1, a2, a3);
  while ( sub_47E700() )
    Sleep(30u);
  Sleep(1000u);
  __setargv();
  CObjectDB::Close();
  sub_491040(a1, a2, a3);
  CAuthSocket::Stop(a1, a2, a3);
  CDBSocket::Stop();
  CIOSocket::CloseIOThread();
  WaitForSingleObject(dword_4E1280, 0xFFFFFFFF);
  CMainConfig::Close();
  if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
  {
    AntiCpSvr_2();
    LOG_INFO(" HackShield Finalized");
  }
  LOG_NORMAL("Shutdown completed");
  if ( a4 )
    PostMessageA(hWnd, 0x10u, 0, 0);
  return 0;
}
// 43552E: variable 'savedregs' is possibly undefined
// 4B4010: using guessed type int AntiCpSvr_2(void);

//----- (004355E0) --------------------------------------------------------
std::string *__thiscall sub_4355E0(std::string *this, std::string *_Right)
{
  return std::string::append(this, _Right, 0, 0xFFFFFFFF);
}

//----- (00435600) --------------------------------------------------------
std::string *__thiscall std::string::append(std::string *this, const std::string *_Right, unsigned int _Roff, unsigned int _Count)
{
  _DWORD *v4; // eax
  char *v6; // [esp-8h] [ebp-10h]
  unsigned int _Newsize; // [esp+4h] [ebp-4h]
  unsigned int _Newsizea; // [esp+4h] [ebp-4h]

  if ( unknown_libname_11(_Right) < _Roff )
    std::_String_base::_Xran(this);
  _Newsize = unknown_libname_11(_Right) - _Roff;
  if ( _Newsize < _Count )
    _Count = _Newsize;
  if ( -1 - *((_DWORD *)this + 5) <= _Count )
    std::_String_base::_Xlen(this);
  if ( _Count )
  {
    _Newsizea = _Count + *((_DWORD *)this + 5);
    if ( std::string::_Grow(this, _Newsizea, 0) )
    {
      v6 = (char *)unknown_libname_2(_Right) + _Roff;
      v4 = unknown_libname_2(this);
      std::char_traits<char>::copy((char *)v4 + *((_DWORD *)this + 5), v6, _Count);
      std::string::_Eos(this, _Newsizea);
    }
  }
  return this;
}
// 40F880: using guessed type int __thiscall unknown_libname_11(_DWORD);

//----- (004356C0) --------------------------------------------------------
void *__thiscall CMemory::CInit::CInit(void *this)
{
  int v1; // eax
  int v3; // [esp+0h] [ebp-10h]
  CMemory *v5; // [esp+8h] [ebp-8h]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i < 16; ++i )
  {
    v5 = (CMemory *)CNoMemoryObject::operator_new(0x38u);
    if ( v5 )
    {
      CMemory::CMemory(v5);
      v3 = v1;
    }
    else
    {
      v3 = 0;
    }
    dword_4E17C8[i] = v3;
  }
  return this;
}
// 4356FC: variable 'v1' is possibly undefined

//----- (00435720) --------------------------------------------------------
void __thiscall CMemory::CMemory(CMemory *this)
{
  InitializeCriticalSection((LPCRITICAL_SECTION)((char *)this + 32));
  *((_DWORD *)this + 7) = 0;
  CMemory::_heap_init(this);
}

//----- (00435750) --------------------------------------------------------
int __thiscall CMemory::_heap_init(CMemory *this)
{
  *(_DWORD *)this = HeapCreate(1u, 0x10000u, 0);
  if ( !*(_DWORD *)this )
    return 0;
  if ( CMemory::__sbh_heap_init(this, 0x3F8u) )
    return 1;
  HeapDestroy(*(HANDLE *)this);
  *(_DWORD *)this = 0;
  return 0;
}

//----- (004357B0) --------------------------------------------------------
int __thiscall CMemory::__sbh_heap_init(CMemory *this, unsigned int threshold)
{
  *((_DWORD *)this + 2) = HeapAlloc(*(HANDLE *)this, 0, 0x140u);
  if ( !*((_DWORD *)this + 2) )
    return 0;
  *((_DWORD *)this + 1) = threshold;
  *((_DWORD *)this + 3) = *((_DWORD *)this + 2);
  *((_DWORD *)this + 6) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 4) = 16;
  return 1;
}

//----- (00435820) --------------------------------------------------------
CMemory **__cdecl CMemory::_malloc(unsigned int size)
{
  CMemory *v2; // [esp+0h] [ebp-8h]
  CMemory **v3; // [esp+4h] [ebp-4h]

  v2 = (CMemory *)dword_4E17C8[InterlockedIncrement(&dword_4E17C0) & 0xF];
  v3 = (CMemory **)CMemory::_heap_alloc_base(v2, size + 4);
  if ( v3 )
  {
    *v3++ = v2;
    memset(v3, 252, size);
  }
  return v3;
}

//----- (00435890) --------------------------------------------------------
_DWORD *__thiscall CMemory::_heap_alloc_base(CMemory *this, unsigned int size)
{
  _DWORD *v4; // [esp+4h] [ebp-4h]
  LPVOID v5; // [esp+4h] [ebp-4h]

  if ( size <= *((_DWORD *)this + 1) )
  {
    CMemory::_mlock((int)this);
    v4 = CMemory::__sbh_alloc_block(this, size);
    CMemory::_munlock((int)this);
    if ( v4 )
      return v4;
  }
  CMemory::_mlock((int)this);
  v5 = HeapAlloc(*(HANDLE *)this, 0, (size + 15) & 0xFFFFFFF0);
  CMemory::_munlock((int)this);
  return v5;
}

//----- (00435910) --------------------------------------------------------
_DWORD *__thiscall CMemory::__sbh_alloc_block(CMemory *this, int intSize)
{
  int v5; // eax
  signed int v7; // [esp+8h] [ebp-38h]
  int v8; // [esp+Ch] [ebp-34h]
  int v9; // [esp+Ch] [ebp-34h]
  unsigned int v10; // [esp+10h] [ebp-30h]
  int v11; // [esp+14h] [ebp-2Ch]
  _DWORD *v12; // [esp+18h] [ebp-28h]
  _DWORD *v13; // [esp+1Ch] [ebp-24h]
  _DWORD *v14; // [esp+20h] [ebp-20h]
  CMemory::tagHeader *pHeader; // [esp+24h] [ebp-1Ch]
  unsigned int v16; // [esp+28h] [ebp-18h]
  int i; // [esp+2Ch] [ebp-14h]
  int v18; // [esp+30h] [ebp-10h]
  unsigned int v19; // [esp+34h] [ebp-Ch]
  int *v20; // [esp+38h] [ebp-8h]
  _DWORD *v21; // [esp+38h] [ebp-8h]
  int v22; // [esp+3Ch] [ebp-4h]

  v19 = *((_DWORD *)this + 2) + 20 * *((_DWORD *)this + 5);
  v7 = (intSize + 23) & 0xFFFFFFF0;
  v8 = (v7 >> 4) - 1;
  if ( v8 >= 32 )
  {
    v16 = 0;
    v10 = 0xFFFFFFFF >> ((v7 >> 4) - 33);
  }
  else
  {
    v16 = 0xFFFFFFFF >> v8;
    v10 = -1;
  }
  for ( pHeader = (CMemory::tagHeader *)*((_DWORD *)this + 3);
        (unsigned int)pHeader < v19 && !(*((_DWORD *)pHeader + 1) & v10 | *(_DWORD *)pHeader & v16);
        pHeader = (CMemory::tagHeader *)((char *)pHeader + 20) )
  {
    ;
  }
  if ( pHeader != (CMemory::tagHeader *)v19 )
    goto LABEL_27;
  for ( pHeader = (CMemory::tagHeader *)*((_DWORD *)this + 2);
        (unsigned int)pHeader < *((_DWORD *)this + 3) && !(*((_DWORD *)pHeader + 1) & v10 | *(_DWORD *)pHeader & v16);
        pHeader = (CMemory::tagHeader *)((char *)pHeader + 20) )
  {
    ;
  }
  if ( pHeader != *((CMemory::tagHeader **)this + 3) )
    goto LABEL_27;
  while ( (unsigned int)pHeader < v19 && !*((_DWORD *)pHeader + 2) )
    pHeader = (CMemory::tagHeader *)((char *)pHeader + 20);
  if ( pHeader == (CMemory::tagHeader *)v19 )
  {
    for ( pHeader = (CMemory::tagHeader *)*((_DWORD *)this + 2);
          (unsigned int)pHeader < *((_DWORD *)this + 3) && !*((_DWORD *)pHeader + 2);
          pHeader = (CMemory::tagHeader *)((char *)pHeader + 20) )
    {
      ;
    }
    if ( pHeader == *((CMemory::tagHeader **)this + 3) )
    {
      pHeader = CMemory::__sbh_alloc_new_region(this);
      if ( !pHeader )
        return 0;
    }
  }
  **((_DWORD **)pHeader + 4) = CMemory::__sbh_alloc_new_group(this, pHeader);
  if ( **((_DWORD **)pHeader + 4) == -1 )
    return 0;
LABEL_27:
  *((_DWORD *)this + 3) = pHeader;
  v12 = (_DWORD *)*((_DWORD *)pHeader + 4);
  i = *v12;
  if ( *v12 == -1 || !(v12[i + 49] & v10 | v12[i + 17] & v16) )
  {
    for ( i = 0; !(v12[i + 49] & v10 | v12[i + 17] & v16); ++i )
      ;
  }
  v13 = &v12[129 * i + 81];
  v9 = 0;
  v22 = v12[i + 17] & v16;
  if ( !v22 )
  {
    v9 = 32;
    v22 = v12[i + 49] & v10;
  }
  while ( v22 >= 0 )
  {
    v22 *= 2;
    ++v9;
  }
  v20 = (int *)v13[2 * v9 + 1];
  v11 = *v20 - v7;
  v18 = (v11 >> 4) - 1;
  if ( v18 > 63 )
    v18 = 63;
  if ( v18 != v9 )
  {
    if ( v20[1] == v20[2] )
    {
      if ( v9 >= 32 )
      {
        v12[i + 49] &= ~(0x80000000 >> (v9 - 32));
        if ( !--*((_BYTE *)v12 + v9 + 4) )
          *((_DWORD *)pHeader + 1) &= ~(0x80000000 >> (v9 - 32));
      }
      else
      {
        v12[i + 17] &= ~(0x80000000 >> v9);
        if ( !--*((_BYTE *)v12 + v9 + 4) )
          *(_DWORD *)pHeader &= ~(0x80000000 >> v9);
      }
    }
    *(_DWORD *)(v20[2] + 4) = v20[1];
    *(_DWORD *)(v20[1] + 8) = v20[2];
    if ( v11 )
    {
      v14 = &v13[2 * v18];
      v20[1] = v14[1];
      v20[2] = (int)v14;
      v14[1] = v20;
      *(_DWORD *)(v20[1] + 8) = v20;
      if ( v20[1] == v20[2] )
      {
        if ( v18 >= 32 )
        {
          if ( !(*((_BYTE *)v12 + v18 + 4))++ )
            *((_DWORD *)pHeader + 1) |= 0x80000000 >> (v18 - 32);
          v12[i + 49] |= 0x80000000 >> (v18 - 32);
        }
        else
        {
          if ( !(*((_BYTE *)v12 + v18 + 4))++ )
            *(_DWORD *)pHeader |= 0x80000000 >> v18;
          v12[i + 17] |= 0x80000000 >> v18;
        }
      }
    }
  }
  if ( v11 )
  {
    *v20 = v11;
    *(int *)((char *)v20 + v11 - 4) = v11;
  }
  v21 = (int *)((char *)v20 + v11);
  *v21 = v7 + 1;
  *(_DWORD *)((char *)v21 + v7 - 4) = v7 + 1;
  v5 = (*v13)++;
  if ( !v5 && pHeader == *((CMemory::tagHeader **)this + 6) && i == *((_DWORD *)this + 7) )
    *((_DWORD *)this + 6) = 0;
  *v12 = i;
  return v21 + 1;
}

//----- (00435E40) --------------------------------------------------------
CMemory::tagHeader *__thiscall CMemory::__sbh_alloc_new_region(CMemory *this)
{
  CMemory::tagHeader *result; // eax
  LPVOID v3; // [esp+4h] [ebp-4h]
  int v4; // [esp+4h] [ebp-4h]

  if ( *((_DWORD *)this + 5) == *((_DWORD *)this + 4) )
  {
    v3 = HeapReAlloc(*(HANDLE *)this, 0, *((LPVOID *)this + 2), 20 * (*((_DWORD *)this + 4) + 16));
    if ( !v3 )
      return 0;
    *((_DWORD *)this + 2) = v3;
    *((_DWORD *)this + 4) += 16;
  }
  v4 = *((_DWORD *)this + 2) + 20 * *((_DWORD *)this + 5);
  *(_DWORD *)(v4 + 16) = HeapAlloc(*(HANDLE *)this, 8u, 0x41C4u);
  if ( !*(_DWORD *)(v4 + 16) )
    return 0;
  *(_DWORD *)(v4 + 12) = VirtualAlloc(0, 0x1000000u, 0x2000u, 4u);
  if ( *(_DWORD *)(v4 + 12) )
  {
    *(_DWORD *)v4 = 0;
    *(_DWORD *)(v4 + 4) = 0;
    *(_DWORD *)(v4 + 8) = -1;
    ++*((_DWORD *)this + 5);
    **(_DWORD **)(v4 + 16) = -1;
    result = (CMemory::tagHeader *)v4;
  }
  else
  {
    HeapFree(*(HANDLE *)this, 0, *(LPVOID *)(v4 + 16));
    result = 0;
  }
  return result;
}

//----- (00435F60) --------------------------------------------------------
int __thiscall CMemory::__sbh_alloc_new_group(CMemory *this, CMemory::tagHeader *pHeader)
{
  int v4; // [esp+4h] [ebp-2Ch]
  int v5; // [esp+8h] [ebp-28h]
  int v6; // [esp+10h] [ebp-20h]
  int v7; // [esp+14h] [ebp-1Ch]
  int i; // [esp+1Ch] [ebp-14h]
  _DWORD *j; // [esp+20h] [ebp-10h]
  char *lpAddress; // [esp+24h] [ebp-Ch]

  v6 = *((_DWORD *)pHeader + 4);
  v4 = *((_DWORD *)pHeader + 2);
  v5 = 0;
  while ( v4 >= 0 )
  {
    v4 *= 2;
    ++v5;
  }
  v7 = v6 + 516 * v5 + 324;
  for ( i = 0; i < 63; ++i )
  {
    *(_DWORD *)(v7 + 8 * i + 8) = v7 + 8 * i;
    *(_DWORD *)(v7 + 8 * i + 4) = v7 + 8 * i;
  }
  lpAddress = (char *)(*((_DWORD *)pHeader + 3) + (v5 << 19));
  if ( !VirtualAlloc(lpAddress, 0x80000u, 0x1000u, 4u) )
    return -1;
  for ( j = lpAddress; j <= (_DWORD *)lpAddress + 114688; j += 0x4000 )
  {
    j[2] = -1;
    j[0x3FFF] = -1;
    j[3] = 65520;
    j[4] = j + 16387;
    j[5] = j - 16381;
    j[16382] = 65520;
  }
  *(_DWORD *)(v6 + 516 * v5 + 832) = lpAddress + 12;
  *(_DWORD *)(*(_DWORD *)(v6 + 516 * v5 + 832) + 8) = v6 + 516 * v5 + 828;
  *(_DWORD *)(v6 + 516 * v5 + 836) = lpAddress + 458764;
  *(_DWORD *)(*(_DWORD *)(v6 + 516 * v5 + 836) + 4) = v6 + 516 * v5 + 828;
  *(_DWORD *)(v6 + 4 * v5 + 68) = 0;
  *(_DWORD *)(v6 + 4 * v5 + 196) = 1;
  if ( !(*(_BYTE *)(v6 + 67))++ )
    *((_DWORD *)pHeader + 1) |= 1u;
  *((_DWORD *)pHeader + 2) &= ~(0x80000000 >> v5);
  return v5;
}

//----- (00436150) --------------------------------------------------------
void __cdecl CMemory::_free(void *pBlock)
{
  CMemory *v1; // [esp+0h] [ebp-8h]

  if ( pBlock )
  {
    v1 = (CMemory *)*((_DWORD *)pBlock - 1);
    *((_DWORD *)pBlock - 1) = 0;
    CMemory::_free_base(v1, (char *)pBlock - 4);
  }
}

//----- (00436190) --------------------------------------------------------
void __thiscall CMemory::_free_base(CMemory *this, void *pBlock)
{
  SIZE_T v3; // [esp+4h] [ebp-Ch]
  CMemory::tagHeader *pHeader; // [esp+Ch] [ebp-4h]

  CMemory::_mlock((int)this);
  pHeader = CMemory::__sbh_find_block(this, pBlock);
  if ( pHeader )
  {
    memset(pBlock, 253, *((_DWORD *)pBlock - 1) - 9);
    CMemory::__sbh_free_block(this, pHeader, pBlock);
  }
  else
  {
    v3 = HeapSize(*(HANDLE *)this, 0, pBlock);
    memset(pBlock, 253, v3);
    HeapFree(*(HANDLE *)this, 0, pBlock);
  }
  CMemory::_munlock((int)this);
}

//----- (00436240) --------------------------------------------------------
CMemory::tagHeader *__thiscall CMemory::__sbh_find_block(CMemory *this, void *pvAlloc)
{
  unsigned int i; // [esp+8h] [ebp-8h]

  for ( i = *((_DWORD *)this + 2); i < *((_DWORD *)this + 2) + 20 * *((_DWORD *)this + 5); i += 20 )
  {
    if ( (char *)pvAlloc - *(_DWORD *)(i + 12) < (char *)0x1000000 )
      return (CMemory::tagHeader *)i;
  }
  return 0;
}

//----- (004362A0) --------------------------------------------------------
void __thiscall CMemory::__sbh_free_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc)
{
  int v6; // [esp+8h] [ebp-3Ch]
  unsigned int v7; // [esp+Ch] [ebp-38h]
  int v8; // [esp+10h] [ebp-34h]
  unsigned int v9; // [esp+14h] [ebp-30h]
  int v10; // [esp+18h] [ebp-2Ch]
  _DWORD *v11; // [esp+1Ch] [ebp-28h]
  _DWORD *v12; // [esp+20h] [ebp-24h]
  int v13; // [esp+28h] [ebp-1Ch]
  int *v14; // [esp+2Ch] [ebp-18h]
  unsigned int v15; // [esp+30h] [ebp-14h]
  unsigned int v16; // [esp+34h] [ebp-10h]
  char *v17; // [esp+38h] [ebp-Ch]
  char *v18; // [esp+3Ch] [ebp-8h]

  v10 = *((_DWORD *)pHeader + 4);
  v15 = ((unsigned int)pvAlloc - *((_DWORD *)pHeader + 3)) >> 19;
  v11 = (_DWORD *)(v10 + 516 * v15 + 324);
  v14 = (int *)((char *)pvAlloc - 4);
  v6 = *((_DWORD *)pvAlloc - 1) - 1;
  if ( (v6 & 1) == 0 )
  {
    v18 = (char *)v14 + v6;
    v8 = *(int *)((char *)v14 + v6);
    v13 = *((_DWORD *)pvAlloc - 2);
    if ( (v8 & 1) == 0 )
    {
      v16 = (v8 >> 4) - 1;
      if ( v16 > 0x3F )
        v16 = 63;
      if ( *((_DWORD *)v18 + 1) == *((_DWORD *)v18 + 2) )
      {
        if ( v16 >= 0x20 )
        {
          *(_DWORD *)(v10 + 4 * v15 + 196) &= ~(0x80000000 >> (v16 - 32));
          if ( !--*(_BYTE *)(v16 + v10 + 4) )
            *((_DWORD *)pHeader + 1) &= ~(0x80000000 >> (v16 - 32));
        }
        else
        {
          *(_DWORD *)(v10 + 4 * v15 + 68) &= ~(0x80000000 >> v16);
          if ( !--*(_BYTE *)(v16 + v10 + 4) )
            *(_DWORD *)pHeader &= ~(0x80000000 >> v16);
        }
      }
      *(_DWORD *)(*((_DWORD *)v18 + 2) + 4) = *((_DWORD *)v18 + 1);
      *(_DWORD *)(*((_DWORD *)v18 + 1) + 8) = *((_DWORD *)v18 + 2);
      v6 += v8;
    }
    v7 = (v6 >> 4) - 1;
    if ( v7 > 0x3F )
      v7 = 63;
    if ( (v13 & 1) == 0 )
    {
      v17 = (char *)v14 - v13;
      v9 = (v13 >> 4) - 1;
      if ( v9 > 0x3F )
        v9 = 63;
      v6 += v13;
      v7 = (v6 >> 4) - 1;
      if ( v7 > 0x3F )
        v7 = 63;
      if ( v9 != v7 )
      {
        if ( *((_DWORD *)v17 + 1) == *((_DWORD *)v17 + 2) )
        {
          if ( v9 >= 0x20 )
          {
            *(_DWORD *)(v10 + 4 * v15 + 196) &= ~(0x80000000 >> (v9 - 32));
            if ( !--*(_BYTE *)(v9 + v10 + 4) )
              *((_DWORD *)pHeader + 1) &= ~(0x80000000 >> (v9 - 32));
          }
          else
          {
            *(_DWORD *)(v10 + 4 * v15 + 68) &= ~(0x80000000 >> v9);
            if ( !--*(_BYTE *)(v9 + v10 + 4) )
              *(_DWORD *)pHeader &= ~(0x80000000 >> v9);
          }
        }
        *(_DWORD *)(*((_DWORD *)v17 + 2) + 4) = *((_DWORD *)v17 + 1);
        *(_DWORD *)(*((_DWORD *)v17 + 1) + 8) = *((_DWORD *)v17 + 2);
      }
      v14 = (int *)((char *)v14 - v13);
    }
    if ( (v13 & 1) != 0 || v9 != v7 )
    {
      v12 = &v11[2 * v7];
      v14[1] = v12[1];
      v14[2] = (int)v12;
      v12[1] = v14;
      *(_DWORD *)(v14[1] + 8) = v14;
      if ( v14[1] == v14[2] )
      {
        if ( v7 >= 0x20 )
        {
          if ( !(*(_BYTE *)(v7 + v10 + 4))++ )
            *((_DWORD *)pHeader + 1) |= 0x80000000 >> (v7 - 32);
          *(_DWORD *)(v10 + 4 * v15 + 196) |= 0x80000000 >> (v7 - 32);
        }
        else
        {
          if ( !(*(_BYTE *)(v7 + v10 + 4))++ )
            *(_DWORD *)pHeader |= 0x80000000 >> v7;
          *(_DWORD *)(v10 + 4 * v15 + 68) |= 0x80000000 >> v7;
        }
      }
    }
    *v14 = v6;
    *(int *)((char *)v14 + v6 - 4) = v6;
    if ( !--*v11 )
    {
      if ( *((_DWORD *)this + 6) )
      {
        VirtualFree(
          (LPVOID)(*(_DWORD *)(*((_DWORD *)this + 6) + 12) + (*((_DWORD *)this + 7) << 19)),
          0x80000u,
          0x4000u);
        *(_DWORD *)(*((_DWORD *)this + 6) + 8) |= 0x80000000 >> *((_DWORD *)this + 7);
        *(_DWORD *)(*(_DWORD *)(*((_DWORD *)this + 6) + 16) + 4 * *((_DWORD *)this + 7) + 196) = 0;
        if ( !--*(_BYTE *)(*(_DWORD *)(*((_DWORD *)this + 6) + 16) + 67) )
          *(_DWORD *)(*((_DWORD *)this + 6) + 4) &= 0xFFFFFFFE;
        if ( *(_DWORD *)(*((_DWORD *)this + 6) + 8) == -1 )
        {
          VirtualFree(*(LPVOID *)(*((_DWORD *)this + 6) + 12), 0, 0x8000u);
          HeapFree(*(HANDLE *)this, 0, *(LPVOID *)(*((_DWORD *)this + 6) + 16));
          memcpy_0(
            *((void **)this + 6),
            (const void *)(*((_DWORD *)this + 6) + 20),
            20 * *((_DWORD *)this + 5) + *((_DWORD *)this + 2) - (*((_DWORD *)this + 6) + 20));
          --*((_DWORD *)this + 5);
          if ( (unsigned int)pHeader > *((_DWORD *)this + 6) )
            pHeader = (CMemory::tagHeader *)((char *)pHeader - 20);
          *((_DWORD *)this + 3) = *((_DWORD *)this + 2);
        }
      }
      *((_DWORD *)this + 6) = pHeader;
      *((_DWORD *)this + 7) = v15;
    }
  }
}
// 4365BD: variable 'v9' is possibly undefined

//----- (00436870) --------------------------------------------------------
CMemory **__cdecl CMemory::_realloc(void *pBlock, unsigned int newsize)
{
  CMemory **result; // eax
  CMemory *v3; // [esp+0h] [ebp-8h]
  CMemory **lpMem; // [esp+4h] [ebp-4h]

  if ( !pBlock )
    return CMemory::_malloc(newsize);
  if ( newsize )
  {
    v3 = (CMemory *)*((_DWORD *)pBlock - 1);
    *((_DWORD *)pBlock - 1) = 0;
    lpMem = (CMemory **)CMemory::_realloc_base(v3, (char *)pBlock - 4, newsize + 4);
    if ( lpMem )
      *lpMem++ = v3;
    result = lpMem;
  }
  else
  {
    CMemory::_free(pBlock);
    result = 0;
  }
  return result;
}

//----- (00436900) --------------------------------------------------------
void *__thiscall CMemory::_realloc_base(CMemory *this, void *pBlock, unsigned int newsize)
{
  void *result; // eax
  CMemory::tagHeader *pHeader; // [esp+Ch] [ebp-Ch]
  unsigned int v6; // [esp+10h] [ebp-8h]
  unsigned int v7; // [esp+10h] [ebp-8h]
  void *v8; // [esp+14h] [ebp-4h]

  v8 = 0;
  if ( newsize <= 0xFFFFFFE0 )
  {
    CMemory::_mlock((int)this);
    pHeader = CMemory::__sbh_find_block(this, pBlock);
    if ( pHeader )
    {
      if ( newsize <= *((_DWORD *)this + 1) )
      {
        if ( CMemory::__sbh_resize_block(this, pHeader, pBlock, newsize) )
        {
          v8 = pBlock;
        }
        else
        {
          v8 = CMemory::__sbh_alloc_block(this, newsize);
          if ( v8 )
          {
            v6 = *((_DWORD *)pBlock - 1) - 9;
            if ( v6 >= newsize )
              memcpy(v8, pBlock, newsize);
            else
              memcpy(v8, pBlock, v6);
            pHeader = CMemory::__sbh_find_block(this, pBlock);
            CMemory::__sbh_free_block(this, pHeader, pBlock);
          }
        }
      }
      if ( !v8 )
      {
        if ( !newsize )
          newsize = 1;
        newsize = (newsize + 15) & 0xFFFFFFF0;
        v8 = HeapAlloc(*(HANDLE *)this, 0, newsize);
        if ( v8 )
        {
          v7 = *((_DWORD *)pBlock - 1) - 9;
          if ( v7 >= newsize )
            memcpy(v8, pBlock, newsize);
          else
            memcpy(v8, pBlock, v7);
          CMemory::__sbh_free_block(this, pHeader, pBlock);
        }
      }
    }
    CMemory::_munlock((int)this);
    if ( !pHeader )
    {
      if ( !newsize )
        newsize = 1;
      v8 = HeapReAlloc(*(HANDLE *)this, 0, pBlock, (newsize + 15) & 0xFFFFFFF0);
    }
  }
  if ( v8 )
    result = v8;
  else
    result = 0;
  return result;
}

//----- (00436AB0) --------------------------------------------------------
int __thiscall CMemory::__sbh_resize_block(CMemory *this, CMemory::tagHeader *pHeader, void *pvAlloc, int intNew)
{
  int v9; // [esp+4h] [ebp-30h]
  int v10; // [esp+4h] [ebp-30h]
  unsigned int v11; // [esp+8h] [ebp-2Ch]
  int v12; // [esp+Ch] [ebp-28h]
  int v13; // [esp+Ch] [ebp-28h]
  int v14; // [esp+10h] [ebp-24h]
  int v15; // [esp+14h] [ebp-20h]
  signed int v16; // [esp+18h] [ebp-1Ch]
  unsigned int v17; // [esp+1Ch] [ebp-18h]
  unsigned int v18; // [esp+1Ch] [ebp-18h]
  _DWORD *v19; // [esp+24h] [ebp-10h]
  int *v20; // [esp+24h] [ebp-10h]
  unsigned int v21; // [esp+28h] [ebp-Ch]
  unsigned int v22; // [esp+2Ch] [ebp-8h]
  unsigned int v23; // [esp+2Ch] [ebp-8h]
  unsigned int v24; // [esp+2Ch] [ebp-8h]
  int *v25; // [esp+30h] [ebp-4h]
  int *v26; // [esp+30h] [ebp-4h]

  v16 = (intNew + 23) & 0xFFFFFFF0;
  v14 = *((_DWORD *)pHeader + 4);
  v21 = ((unsigned int)pvAlloc - *((_DWORD *)pHeader + 3)) >> 19;
  v15 = v14 + 516 * v21 + 324;
  v19 = (char *)pvAlloc - 4;
  v9 = *((_DWORD *)pvAlloc - 1) - 1;
  v25 = (int *)((char *)pvAlloc + v9 - 4);
  v12 = *v25;
  if ( v16 <= v9 )
  {
    if ( v16 < v9 )
    {
      *v19 = v16 + 1;
      *(_DWORD *)((char *)v19 + v16 - 4) = v16 + 1;
      v20 = (_DWORD *)((char *)v19 + v16);
      v10 = v9 - v16;
      v11 = (v10 >> 4) - 1;
      if ( v11 > 0x3F )
        v11 = 63;
      if ( (v12 & 1) == 0 )
      {
        v24 = (v12 >> 4) - 1;
        if ( v24 > 0x3F )
          v24 = 63;
        if ( v25[1] == v25[2] )
        {
          if ( v24 >= 0x20 )
          {
            *(_DWORD *)(v14 + 4 * v21 + 196) &= ~(0x80000000 >> (v24 - 32));
            if ( !--*(_BYTE *)(v24 + v14 + 4) )
              *((_DWORD *)pHeader + 1) &= ~(0x80000000 >> (v24 - 32));
          }
          else
          {
            *(_DWORD *)(v14 + 4 * v21 + 68) &= ~(0x80000000 >> v24);
            if ( !--*(_BYTE *)(v24 + v14 + 4) )
              *(_DWORD *)pHeader &= ~(0x80000000 >> v24);
          }
        }
        *(_DWORD *)(v25[2] + 4) = v25[1];
        *(_DWORD *)(v25[1] + 8) = v25[2];
        v10 += v12;
        v11 = (v10 >> 4) - 1;
        if ( v11 > 0x3F )
          v11 = 63;
      }
      v18 = v15 + 8 * v11;
      v20[1] = *(_DWORD *)(v18 + 4);
      v20[2] = v18;
      *(_DWORD *)(v18 + 4) = v20;
      *(_DWORD *)(v20[1] + 8) = v20;
      if ( v20[1] == v20[2] )
      {
        if ( v11 >= 0x20 )
        {
          if ( !(*(_BYTE *)(v11 + v14 + 4))++ )
            *((_DWORD *)pHeader + 1) |= 0x80000000 >> (v11 - 32);
          *(_DWORD *)(v14 + 4 * v21 + 196) |= 0x80000000 >> (v11 - 32);
        }
        else
        {
          if ( !(*(_BYTE *)(v11 + v14 + 4))++ )
            *(_DWORD *)pHeader |= 0x80000000 >> v11;
          *(_DWORD *)(v14 + 4 * v21 + 68) |= 0x80000000 >> v11;
        }
      }
      *v20 = v10;
      *(int *)((char *)v20 + v10 - 4) = v10;
    }
  }
  else
  {
    if ( (v12 & 1) != 0 || v16 > v12 + v9 )
      return 0;
    v22 = (v12 >> 4) - 1;
    if ( v22 > 0x3F )
      v22 = 63;
    if ( *(_DWORD *)((char *)pvAlloc + v9) == *(_DWORD *)((char *)pvAlloc + v9 + 4) )
    {
      if ( v22 >= 0x20 )
      {
        *(_DWORD *)(v14 + 4 * v21 + 196) &= ~(0x80000000 >> (v22 - 32));
        if ( !--*(_BYTE *)(v22 + v14 + 4) )
          *((_DWORD *)pHeader + 1) &= ~(0x80000000 >> (v22 - 32));
      }
      else
      {
        *(_DWORD *)(v14 + 4 * v21 + 68) &= ~(0x80000000 >> v22);
        if ( !--*(_BYTE *)(v22 + v14 + 4) )
          *(_DWORD *)pHeader &= ~(0x80000000 >> v22);
      }
    }
    *(_DWORD *)(*(_DWORD *)((char *)pvAlloc + v9 + 4) + 4) = *(_DWORD *)((char *)pvAlloc + v9);
    *(_DWORD *)(*(_DWORD *)((char *)pvAlloc + v9) + 8) = *(_DWORD *)((char *)pvAlloc + v9 + 4);
    v13 = v12 + v9 - v16;
    if ( v13 > 0 )
    {
      v26 = (_DWORD *)((char *)v19 + v16);
      v23 = (v13 >> 4) - 1;
      if ( v23 > 0x3F )
        v23 = 63;
      v17 = v15 + 8 * v23;
      v26[1] = *(_DWORD *)(v17 + 4);
      v26[2] = v17;
      *(_DWORD *)(v17 + 4) = v26;
      *(_DWORD *)(v26[1] + 8) = v26;
      if ( v26[1] == v26[2] )
      {
        if ( v23 >= 0x20 )
        {
          if ( !(*(_BYTE *)(v23 + v14 + 4))++ )
            *((_DWORD *)pHeader + 1) |= 0x80000000 >> (v23 - 32);
          *(_DWORD *)(v14 + 4 * v21 + 196) |= 0x80000000 >> (v23 - 32);
        }
        else
        {
          if ( !(*(_BYTE *)(v23 + v14 + 4))++ )
            *(_DWORD *)pHeader |= 0x80000000 >> v23;
          *(_DWORD *)(v14 + 4 * v21 + 68) |= 0x80000000 >> v23;
        }
      }
      *v26 = v13;
      *(int *)((char *)v26 + v13 - 4) = v13;
    }
    *v19 = v16 + 1;
    *(_DWORD *)((char *)v19 + v16 - 4) = v16 + 1;
  }
  return 1;
}

//----- (00437080) --------------------------------------------------------
void *__cdecl CNoMemoryObject::operator_new(size_t Size)
{
  return malloc(Size);
}

//----- (004370A0) --------------------------------------------------------
void __thiscall CMemory::_mlock(int this)
{
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 32));
}

//----- (004370C0) --------------------------------------------------------
void __thiscall CMemory::_munlock(int this)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(this + 32));
}

//----- (004370E0) --------------------------------------------------------
int __stdcall sub_4370E0(int a1, int a2, int a3, int (__thiscall *a4)(int))
{
  int result; // eax
  int i; // [esp+8h] [ebp+8h]

  result = a1 + a3 * a2;
  for ( i = result; --a3 >= 0; result = a4(i) )
    i -= a2;
  return result;
}

//----- (00437110) --------------------------------------------------------
CInitMonster *__thiscall CInitMonster::CInitMonster(CInitMonster *this)
{
  CBase::CBase(this);
  *(_DWORD *)this = &off_4B7CE0;
  sub_425850((CInitMonster *)((char *)this + 272));
  sub_4707A0((CInitMonster *)((char *)this + 288));
  memset((char *)this + 32, 0, 0x19u);
  *((_DWORD *)this + 15) = 0;
  *((_DWORD *)this + 16) = 0;
  *((_DWORD *)this + 17) = 0;
  *((_DWORD *)this + 18) = 0;
  memset((char *)this + 76, 0, 0x1Cu);
  memset((char *)this + 96, 0, 0x60u);
  *((_DWORD *)this + 29) = 0;
  *((_DWORD *)this + 30) = 0;
  *((_DWORD *)this + 32) = 0;
  *((_DWORD *)this + 31) = 0;
  *((_DWORD *)this + 33) = 0;
  memset((char *)this + 136, 0, 0x1Cu);
  memset((char *)this + 164, 0, 0x60u);
  *((_DWORD *)this + 66) = 0;
  *((_DWORD *)this + 65) = 0;
  *((_DWORD *)this + 67) = 0;
  *((_DWORD *)this + 78) = 0;
  *((_DWORD *)this + 77) = 0;
  return this;
}
// 4B7CE0: using guessed type int (__stdcall *off_4B7CE0)(int);

//----- (00437260) --------------------------------------------------------
void *__userpurge CInitMonster::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CInitMonster::_CInitMonster(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00437290) --------------------------------------------------------
_DWORD *__usercall CInitMonster::_CInitMonster@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *this = &off_4B7CE0;
  sub_445BF0((std::vector<IPAddrMask> *)(this + 72));
  sub_445B20((std::vector<CIOSocket::CIOTimer> *)(this + 68));
  return CBase::_CBase(this, a2, a3, a4);
}
// 4B7CE0: using guessed type int (__stdcall *off_4B7CE0)(int);

//----- (004372D0) --------------------------------------------------------
CInitMonster *CInitMonster::Copy()
{
  CInitMonster *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0x14Cu);
  if ( v2 )
    v1 = CInitMonster::CInitMonster((CInitMonster *)v2);
  else
    v1 = 0;
  return v1;
}

//----- (00437310) --------------------------------------------------------
int __thiscall CInitMonster::Set(char *this, int a2, int a3)
{
  lisp::var *v3; // eax
  int v4; // eax
  int result; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  lisp::var *v20; // eax
  lisp::var *v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  lisp::var *v30; // eax
  lisp::var *v31; // eax
  lisp::var *v32; // eax
  lisp::var *v33; // eax
  lisp::var *v34; // eax
  lisp::var *v35; // eax
  lisp::var *v36; // eax
  int v37; // eax
  lisp::var *v38; // eax
  lisp::var *v39; // eax
  int v40; // eax
  lisp::var *v41; // eax
  lisp::var *v42; // eax
  lisp::var *v43; // eax
  lisp::var *v44; // eax
  lisp::var *v45; // eax
  lisp::var *v46; // eax
  lisp::var *v47; // eax
  lisp::var *v48; // eax
  lisp::var *v49; // eax
  lisp::var *v50; // eax
  lisp::var *v51; // eax
  int v52[3]; // [esp-4h] [ebp-ECh] BYREF
  char *v53; // [esp+8h] [ebp-E0h]
  char v54[4]; // [esp+10h] [ebp-D8h] BYREF
  char v55[4]; // [esp+14h] [ebp-D4h] BYREF
  char v56[4]; // [esp+18h] [ebp-D0h] BYREF
  char v57[4]; // [esp+1Ch] [ebp-CCh] BYREF
  char v58[4]; // [esp+20h] [ebp-C8h] BYREF
  char v59[4]; // [esp+24h] [ebp-C4h] BYREF
  char v60[4]; // [esp+28h] [ebp-C0h] BYREF
  char v61[4]; // [esp+2Ch] [ebp-BCh] BYREF
  char v62[4]; // [esp+30h] [ebp-B8h] BYREF
  char v63[4]; // [esp+34h] [ebp-B4h] BYREF
  char v64[4]; // [esp+38h] [ebp-B0h] BYREF
  char v65[4]; // [esp+3Ch] [ebp-ACh] BYREF
  char v66[4]; // [esp+40h] [ebp-A8h] BYREF
  char v67[4]; // [esp+44h] [ebp-A4h] BYREF
  char v68[4]; // [esp+48h] [ebp-A0h] BYREF
  char v69[4]; // [esp+4Ch] [ebp-9Ch] BYREF
  char v70[4]; // [esp+50h] [ebp-98h] BYREF
  char v71[4]; // [esp+54h] [ebp-94h] BYREF
  char v72[4]; // [esp+58h] [ebp-90h] BYREF
  char v73[4]; // [esp+5Ch] [ebp-8Ch] BYREF
  char v74[4]; // [esp+60h] [ebp-88h] BYREF
  char v75[4]; // [esp+64h] [ebp-84h] BYREF
  char v76[4]; // [esp+68h] [ebp-80h] BYREF
  char v77[4]; // [esp+6Ch] [ebp-7Ch] BYREF
  char v78[4]; // [esp+70h] [ebp-78h] BYREF
  char v79[4]; // [esp+74h] [ebp-74h] BYREF
  char v80[4]; // [esp+78h] [ebp-70h] BYREF
  char v81[4]; // [esp+7Ch] [ebp-6Ch] BYREF
  char v82[4]; // [esp+80h] [ebp-68h] BYREF
  char v83[4]; // [esp+84h] [ebp-64h] BYREF
  char v84[4]; // [esp+88h] [ebp-60h] BYREF
  char v85[4]; // [esp+8Ch] [ebp-5Ch] BYREF
  char v86[4]; // [esp+90h] [ebp-58h] BYREF
  char v87[4]; // [esp+94h] [ebp-54h] BYREF
  char v88[4]; // [esp+98h] [ebp-50h] BYREF
  char v89[4]; // [esp+9Ch] [ebp-4Ch] BYREF
  char v90[4]; // [esp+A0h] [ebp-48h] BYREF
  char v91[4]; // [esp+A4h] [ebp-44h] BYREF
  char v92[4]; // [esp+A8h] [ebp-40h] BYREF
  char v93[4]; // [esp+ACh] [ebp-3Ch] BYREF
  char v94[4]; // [esp+B0h] [ebp-38h] BYREF
  char v95[4]; // [esp+B4h] [ebp-34h] BYREF
  char v96[4]; // [esp+B8h] [ebp-30h] BYREF
  char v97[4]; // [esp+BCh] [ebp-2Ch] BYREF
  char v98[4]; // [esp+C0h] [ebp-28h] BYREF
  int v99[2]; // [esp+C4h] [ebp-24h] BYREF
  char v100[4]; // [esp+CCh] [ebp-1Ch] BYREF
  int v101[3]; // [esp+D0h] [ebp-18h] BYREF
  char v102[4]; // [esp+DCh] [ebp-Ch] BYREF
  int v103; // [esp+E0h] [ebp-8h]
  char *Str; // [esp+E4h] [ebp-4h]

  v53 = this;
  v52[2] = a2 - 1;
  switch ( a2 )
  {
    case 1:
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v98);
      v4 = sub_40C8D0(v3);
      Str = (char *)GetStr(v4);
      if ( Str && strlen(Str) && strlen(Str) <= 0x18 )
      {
        strcpy(v53 + 32, Str);
        goto LABEL_47;
      }
      LOG_ERR("CMonster::Set() Invalid Name. (Name:%s)", Str);
      return 0;
    case 2:
      v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v97);
      *((_DWORD *)v53 + 15) = sub_40C8D0(v6);
      goto LABEL_47;
    case 7:
      v8 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v95);
      *((_DWORD *)v53 + 17) = sub_40C8D0(v8);
      goto LABEL_47;
    case 8:
      v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v96);
      *((_DWORD *)v53 + 16) = sub_40C8D0(v7);
      goto LABEL_47;
    case 9:
      v16 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v87);
      *((_DWORD *)v53 + 34) = sub_40C8D0(v16);
      goto LABEL_47;
    case 10:
      v17 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v86);
      *((_DWORD *)v53 + 35) = sub_40C8D0(v17);
      goto LABEL_47;
    case 11:
      v18 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v85);
      *((_DWORD *)v53 + 36) = sub_40C8D0(v18);
      goto LABEL_47;
    case 12:
      v19 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v84);
      *((_DWORD *)v53 + 37) = sub_40C8D0(v19);
      goto LABEL_47;
    case 13:
      v20 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v83);
      *((_DWORD *)v53 + 38) = sub_40C8D0(v20);
      goto LABEL_47;
    case 14:
      v21 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v82);
      *((_DWORD *)v53 + 39) = sub_40C8D0(v21);
      goto LABEL_47;
    case 15:
      v22 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v81);
      *((_DWORD *)v53 + 40) = sub_40C8D0(v22);
      goto LABEL_47;
    case 16:
      v23 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v80);
      *((_DWORD *)v53 + 48) = sub_40C8D0(v23);
      goto LABEL_47;
    case 17:
      v24 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v79);
      *((_DWORD *)v53 + 49) = sub_40C8D0(v24);
      goto LABEL_47;
    case 18:
      v25 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v78);
      *((_DWORD *)v53 + 67) = sub_40C8D0(v25);
      v26 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v77);
      *((_DWORD *)v53 + 50) = sub_40C8D0(v26);
      v27 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v76);
      *((_DWORD *)v53 + 51) = sub_40C8D0(v27);
      goto LABEL_47;
    case 19:
      v28 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v75);
      *((_DWORD *)v53 + 52) = sub_40C8D0(v28);
      v29 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v74);
      *((_DWORD *)v53 + 53) = sub_40C8D0(v29);
      goto LABEL_47;
    case 20:
      v30 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v73);
      *((_DWORD *)v53 + 54) = sub_40C8D0(v30);
      v31 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v72);
      *((_DWORD *)v53 + 55) = sub_40C8D0(v31);
      goto LABEL_47;
    case 21:
      v32 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v71);
      *((_DWORD *)v53 + 56) = sub_40C8D0(v32);
      goto LABEL_47;
    case 22:
      v33 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v70);
      *((_DWORD *)v53 + 57) = sub_40C8D0(v33);
      goto LABEL_47;
    case 23:
      v34 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v69);
      *((_DWORD *)v53 + 65) = sub_40C8D0(v34);
      v35 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v68);
      *((_DWORD *)v53 + 66) = sub_40C8D0(v35);
      goto LABEL_47;
    case 24:
      v103 = 0;
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v36 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v67);
        v37 = sub_40C8D0(v36);
        *(_DWORD *)&v53[4 * v103++ + 232] = 10 * v37;
      }
      goto LABEL_47;
    case 33:
      v9 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v94);
      *((_DWORD *)v53 + 18) = sub_40C8D0(v9);
      goto LABEL_47;
    case 34:
      v12 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v91);
      *((_DWORD *)v53 + 30) = sub_40C8D0(v12);
      goto LABEL_47;
    case 35:
      v13 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v90);
      *((_DWORD *)v53 + 31) = sub_40C8D0(v13);
      v14 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v89);
      *((_DWORD *)v53 + 32) = sub_40C8D0(v14);
      goto LABEL_47;
    case 36:
      v15 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v88);
      *((_DWORD *)v53 + 33) = sub_40C8D0(v15);
      goto LABEL_47;
    case 37:
      if ( *((int *)v53 + 29) <= 5 )
      {
        v10 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v93);
        *(_DWORD *)&v53[4 * *((_DWORD *)v53 + 29) + 76] = sub_40C8D0(v10);
        v11 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v92);
        *(_DWORD *)&v53[4 * (*((_DWORD *)v53 + 29))++ + 96] = sub_40C8D0(v11);
      }
      goto LABEL_47;
    case 70:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        lisp::var::pop((lisp::var *)&a3, (lisp::var *)v102);
        v38 = lisp::var::pop((lisp::var *)v102, (lisp::var *)v66);
        v101[0] = sub_40C8D0(v38) << 16;
        v39 = lisp::var::pop((lisp::var *)v102, (lisp::var *)v65);
        v40 = sub_40C8D0(v39);
        v101[0] |= v40;
        v41 = lisp::var::pop((lisp::var *)v102, (lisp::var *)v64);
        v101[1] = sub_40C8D0(v41);
        v42 = lisp::var::pop((lisp::var *)v102, (lisp::var *)v63);
        v101[2] = sub_40C8D0(v42);
        sub_445B80((int)(v53 + 272), (CIOSocket::CIOTimer *)v101);
      }
      goto LABEL_47;
    case 107:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        lisp::var::pop((lisp::var *)&a3, (lisp::var *)v100);
        v43 = lisp::var::pop((lisp::var *)v100, (lisp::var *)v62);
        v99[0] = sub_40C8D0(v43);
        v44 = lisp::var::pop((lisp::var *)v100, (lisp::var *)v61);
        v99[1] = sub_40C8D0(v44);
        sub_445C10((int)(v53 + 288), (IPAddrMask *)v99);
      }
      goto LABEL_47;
    case 109:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v45 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v60);
        *((_DWORD *)v53 + 76) |= 1 << sub_40C8D0(v45);
      }
      goto LABEL_47;
    case 111:
      v46 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v59);
      *((_DWORD *)v53 + 77) = sub_40C8D0(v46);
      v47 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v58);
      *((_DWORD *)v53 + 78) = sub_40C8D0(v47);
      goto LABEL_47;
    case 112:
      v48 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v57);
      *((_DWORD *)v53 + 79) = sub_40C8D0(v48);
      v49 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v56);
      *((_DWORD *)v53 + 80) = sub_40C8D0(v49);
      v50 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v55);
      *((float *)v53 + 81) = (float)sub_40C8D0(v50);
      v51 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v54);
      *((_DWORD *)v53 + 82) = sub_40C8D0(v51);
LABEL_47:
      result = 1;
      break;
    default:
      v52[0] = a2 - 1;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        v52,
        &a3);
      result = CBase::Set(v53, a2, v52[0]);
      break;
  }
  return result;
}

//----- (00437BD0) --------------------------------------------------------
int __thiscall CInitMonster::OnLoad(int this)
{
  std::pair<char const * const,CItem *> *v1; // eax
  CItem *_Val2; // [esp+4h] [ebp-14h] BYREF
  char v5[8]; // [esp+8h] [ebp-10h] BYREF
  char v6[8]; // [esp+10h] [ebp-8h] BYREF

  _Val2 = (CItem *)this;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v5,
    (const char *const *)(this + 60),
    &_Val2);
  sub_445DF0(
    dword_4E1820,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v6,
    v1);
  if ( v6[4] )
    return 1;
  LOG_ERR("CInitMonster::Onload() Duplicate Monster Data. (Index:%d)", *(_DWORD *)(this + 60));
  return 0;
}
// 437BFC: variable 'v1' is possibly undefined

//----- (00437C30) --------------------------------------------------------
void __userpurge CInitMonster::DropItemEx(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, char a3, int a4, int a5, int *a6, int a7)
{
  int v10; // [esp+0h] [ebp-2Ch]
  int v11; // [esp+4h] [ebp-28h]
  int v12[2]; // [esp+14h] [ebp-18h] BYREF
  int v13[2]; // [esp+1Ch] [ebp-10h] BYREF
  _DWORD *v14; // [esp+24h] [ebp-8h]
  int i; // [esp+28h] [ebp-4h]

  for ( i = 0; i < a2; ++i )
  {
    v14 = (_DWORD *)CItem::CreateDropItem(a3, a7);
    if ( v14 )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int))(*v14 + 164))(v14, v10) && *a6 > 0 )
      {
        if ( *a6 < 5 )
          v11 = dword_4D62D8[*a6];
        else
          v11 = 1;
        v14[13] *= v11;
        *a6 = -1;
      }
      CChar::GetDropPt(a1, v12);
      v13[0] = v12[0] >> 5;
      v13[1] = v12[1] >> 5;
      if ( sub_491360((_DWORD *)a1[80], ebx0, edi0, esi0, (int)v14, v13) )
      {
        v14[20] = 1;
        (*(void (__thiscall **)(_DWORD *, _DWORD *, int *, int *, int, int, int))(*v14 + 124))(
          v14,
          a1,
          v12,
          v13,
          1,
          a4,
          a5);
      }
      else if ( v14 )
      {
        v10 = (*(int (__thiscall **)(_DWORD *, int))*v14)(v14, 1);
      }
      else
      {
        v10 = 0;
      }
    }
  }
}
// 437C7C: variable 'v10' is possibly undefined

//----- (00437D70) --------------------------------------------------------
void __userpurge CInitMonster::DropItem(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int a4, int a5, int a6)
{
  int v9; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v10; // eax
  int *v11; // eax
  int v12; // [esp+18h] [ebp-40h]
  char v14[4]; // [esp+20h] [ebp-38h] BYREF
  char v15[4]; // [esp+24h] [ebp-34h] BYREF
  int v16; // [esp+28h] [ebp-30h]
  int v17; // [esp+2Ch] [ebp-2Ch]
  int v18; // [esp+30h] [ebp-28h]
  char v19[4]; // [esp+34h] [ebp-24h] BYREF
  CMemory **v20; // [esp+38h] [ebp-20h]
  int v21; // [esp+3Ch] [ebp-1Ch]
  int i; // [esp+40h] [ebp-18h]
  int v23; // [esp+44h] [ebp-14h]
  CIOObject *v24; // [esp+48h] [ebp-10h]
  int v25; // [esp+4Ch] [ebp-Ch] BYREF
  int v26; // [esp+50h] [ebp-8h]
  volatile int *v27; // [esp+54h] [ebp-4h]

  v24 = 0;
  v27 = 0;
  v25 = 0;
  v26 = 0;
  v23 = 0;
  if ( a3 )
  {
    v27 = (volatile int *)CParty::FindParty(a4);
    if ( v27 )
      v24 = (CIOObject *)CParty::GetRandomPlayer((int)v27);
  }
  else
  {
    v24 = sub_450810(a4);
  }
  if ( v24 )
  {
    for ( i = 0; i < this[29]; ++i )
    {
      v25 = 0;
      if ( (dword_4E1178 & 1) != 0 || (*(_WORD *)dword_4E1174 & 0x100) != 0 )
        v12 = 2 * this[i + 24];
      else
        v12 = this[i + 24];
      v26 = v12;
      if ( this[16] == 4 )
      {
        if ( v27 )
        {
          v9 = CParty::GetLuckySize((int)v27, 0);
          v26 += v9;
        }
        else if ( CChar::IsBState(v24, 0x2000000i64) )
        {
          ++v26;
        }
      }
      else if ( CChar::IsBState(v24, 201326592i64) )
      {
        v21 = RandomBetween(1, 10000);
        if ( v21 <= 481 )
        {
          if ( v21 <= 81 )
          {
            if ( v21 <= 21 )
            {
              if ( v21 <= 1 )
              {
                if ( CChar::IsBState(v24, 0x8000000i64) )
                  v25 = 4;
              }
              else
              {
                v25 = 3;
              }
            }
            else
            {
              v25 = 2;
            }
          }
          else
          {
            v25 = 1;
          }
        }
      }
      v23 = v25;
      CInitMonster::DropItemEx(ebx0, edi0, esi0, a2, v26, this[i + 19], a3, a4, &v25, 0);
      if ( a6 && RandomBetween(1, 100) > 50 )
        CInitMonster::DropItemEx(ebx0, edi0, esi0, a2, v26, this[i + 19], a3, a4, &v25, a6);
      if ( v25 < 0 )
      {
        if ( v27 )
        {
          v20 = sub_44FCE0(ebx0, edi0, esi0, 68, "bb", 90, v23);
          CParty::Broadcast((int)v27, v20, 0);
        }
        else
        {
          CPlayer::Write((int)v24, 68, "bb", 90, v23);
        }
      }
    }
    CIOObject::Release(v24, ebx0, edi0, esi0, (volatile int *)v24 + 88);
  }
  if ( !sub_445B60((std::vector<CIOSocket::CIOTimer> *)(this + 68)) )
  {
    v24 = 0;
    if ( v27 )
    {
      v24 = (CIOObject *)CParty::GetRandomPlayer((int)v27);
    }
    else
    {
      a4 = a5;
      v24 = sub_450810(a5);
    }
    if ( v24 )
    {
      if ( CSMap::IsValidTile(*((_DWORD **)v24 + 80), (int *)v24 + 83, 0x20000) )
      {
        sub_430C20(this + 68, v19);
        while ( 1 )
        {
          v10 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 68, (int)v14);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)v19,
                  v10) )
            break;
          v11 = (int *)sub_420010(v19);
          v16 = *v11;
          v17 = v11[1];
          v18 = v11[2];
          if ( CPlayer::CheckQuestFlag((int)v24, v16) )
          {
            v25 = 0;
            CInitMonster::DropItemEx(ebx0, edi0, esi0, a2, v18, v17, a3, a4, &v25, 0);
          }
          sub_446060((int *)v19, v15, 0);
        }
      }
      CIOObject::Release(v24, ebx0, edi0, esi0, (volatile int *)v24 + 88);
    }
  }
  if ( v27 )
    CIOObject::Release(v27, ebx0, edi0, esi0);
}
// 4E1178: using guessed type int dword_4E1178;

//----- (00438130) --------------------------------------------------------
BOOL __thiscall CSMap::IsValidTile(_DWORD *this, int *a1, int a2)
{
  void *v4; // eax
  int v5; // [esp-4h] [ebp-10h]
  int v6; // [esp+4h] [ebp-8h] BYREF
  int v7; // [esp+8h] [ebp-4h]

  v6 = *a1 >> 5;
  v7 = a1[1] >> 5;
  if ( v6 < 0 || v6 >> 8 >= 64 || v7 < 0 || v7 >> 8 >= 64 )
    return 0;
  v5 = ((*a1 >> 3) & 3) + 4 * ((a1[1] >> 3) & 3);
  v4 = (void *)CSMap::_GetCellMap(this, &v6);
  return CCellMap::IsValidTile(v4, &v6, a2, v5);
}

//----- (004381C0) --------------------------------------------------------
BOOL __thiscall CCellMap::IsValidTile(void *this, _DWORD *a2, int a3, char a4)
{
  int v5[2]; // [esp+4h] [ebp-8h] BYREF

  if ( !this )
    return 0;
  v5[0] = (unsigned __int8)*a2;
  v5[1] = (unsigned __int8)a2[1];
  return (*(_DWORD *)(CCellMap::GetTile(this, v5) + 4) & (a3 | (1 << a4))) == 0;
}

//----- (00438220) --------------------------------------------------------
int __thiscall CCellMap::GetTile(_DWORD *this, _DWORD *a2)
{
  return this[2] + 8 * ((a2[1] << 8) + *a2);
}

//----- (00438250) --------------------------------------------------------
int __thiscall CSMap::_GetCellMap(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = ((int)a2[1] >> 8 << 6) + ((int)*a2 >> 8);
  if ( v3 >= 0 && v3 <= 4095 )
    return this[v3 + 2];
  LOG_ERR("CSellMap::_GetCellMap PT2ARRY(%d) ptT.x(%d) ptT.y(%d) \n", v3, *a2, a2[1]);
  ELOG("CSellMap::_GetCellMap PT2ARRY(%d) ptT.x(%d) ptT.y(%d) \n", v3);
  return 0;
}

//----- (004382D0) --------------------------------------------------------
_DWORD *__thiscall sub_4382D0(_DWORD *this)
{
  CBase::CBase((CBase *)this);
  *this = &off_4B7DC8;
  this[8] = 0;
  this[9] = 0;
  this[10] = 0;
  this[11] = 0;
  this[12] = 0;
  this[13] = 0;
  memset(this + 14, 0, 0x10u);
  this[18] = 0;
  this[19] = GetTickCount();
  this[20] = 1000;
  this[21] = 0;
  return this;
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (00438370) --------------------------------------------------------
void *__thiscall CGenMonster::_scalar_deleting_destructor_(void *this, char a2)
{
  CGenMonster::_CGenMonster(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (004383A0) --------------------------------------------------------
int __thiscall CGenMonster::_CGenMonster(void *this)
{
  DWORD v1; // ebx
  DWORD v2; // edi
  DWORD v3; // esi

  *(_DWORD *)this = &off_4B7DC8;
  return (int)CBase::_CBase(this, v1, v2, v3);
}
// 4383B3: variable 'v1' is possibly undefined
// 4383B3: variable 'v2' is possibly undefined
// 4383B3: variable 'v3' is possibly undefined
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (004383C0) --------------------------------------------------------
CGenMonster *__thiscall CGenMonster::CGenMonster(CGenMonster *this, _DWORD *a2, int a3, int a4, int a5)
{
  CBase::CBase(this);
  *(_DWORD *)this = &off_4B7DC8;
  *((_DWORD *)this + 8) = a3;
  *((_DWORD *)this + 9) = a2[79];
  *((_DWORD *)this + 10) = 0;
  *((_DWORD *)this + 11) = a5;
  *((_DWORD *)this + 12) = 0;
  *((_DWORD *)this + 13) = a4;
  *((_DWORD *)this + 14) = a2[83] - 32 * a4;
  *((_DWORD *)this + 15) = a2[84] - 32 * a4;
  *((_DWORD *)this + 16) = a2[83] + 32 * a4;
  *((_DWORD *)this + 17) = a2[84] + 32 * a4;
  *((_DWORD *)this + 18) = a2[80];
  *((_DWORD *)this + 19) = GetTickCount();
  *((_DWORD *)this + 20) = 1000;
  *((_DWORD *)this + 21) = 0;
  return this;
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (004384B0) --------------------------------------------------------
_DWORD *CGenMonster::Copy()
{
  _DWORD *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0x58u);
  if ( v2 )
    v1 = sub_4382D0(v2);
  else
    v1 = 0;
  return v1;
}

//----- (004384F0) --------------------------------------------------------
int __thiscall CGenMonster::Set(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  int result; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  int v13[2]; // [esp-4h] [ebp-34h] BYREF
  _DWORD *v14; // [esp+4h] [ebp-2Ch]
  char v15[4]; // [esp+Ch] [ebp-24h] BYREF
  char v16[4]; // [esp+10h] [ebp-20h] BYREF
  char v17[4]; // [esp+14h] [ebp-1Ch] BYREF
  char v18[4]; // [esp+18h] [ebp-18h] BYREF
  char v19[4]; // [esp+1Ch] [ebp-14h] BYREF
  char v20[4]; // [esp+20h] [ebp-10h] BYREF
  char v21[4]; // [esp+24h] [ebp-Ch] BYREF
  char v22[4]; // [esp+28h] [ebp-8h] BYREF
  char v23[4]; // [esp+2Ch] [ebp-4h] BYREF

  v14 = this;
  v13[1] = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v23);
      v14[8] = sub_40C8D0(v3);
      goto LABEL_11;
    case 3:
      v4 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v22);
      v14[9] = sub_40C8D0(v4);
      v14[18] = sub_491080(v14[9]);
      if ( v14[18] )
        goto LABEL_11;
      LOG_ERR("CGenMonster::Set() Can't find the Map. (index:%d)", v14[9]);
      result = 0;
      break;
    case 4:
      v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v21);
      v14[10] = sub_40C8D0(v6);
      goto LABEL_11;
    case 5:
      v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v20);
      v14[11] = sub_40C8D0(v7);
      goto LABEL_11;
    case 6:
      v9 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v18);
      v14[14] = 32 * sub_40C8D0(v9);
      v10 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v17);
      v14[15] = 32 * sub_40C8D0(v10);
      v11 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v16);
      v14[16] = 32 * sub_40C8D0(v11);
      v12 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v15);
      v14[17] = 32 * sub_40C8D0(v12);
      goto LABEL_11;
    case 87:
      v8 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v19);
      v14[20] = 1000 * sub_40C8D0(v8);
LABEL_11:
      result = 1;
      break;
    default:
      v13[0] = a2 - 2;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        v13,
        &a3);
      result = CBase::Set(v14, a2, v13[0]);
      break;
  }
  return result;
}

//----- (00438710) --------------------------------------------------------
int __thiscall CGenMonster::OnLoad(int this)
{
  std::pair<char const * const,CItem *> *v1; // eax
  CItem *_Val2; // [esp+4h] [ebp-14h] BYREF
  char v5[8]; // [esp+8h] [ebp-10h] BYREF
  char v6[8]; // [esp+10h] [ebp-8h] BYREF

  _Val2 = (CItem *)this;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v5,
    (const char *const *)(this + 40),
    &_Val2);
  sub_445DF0(
    dword_4E1870,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v6,
    v1);
  if ( v6[4] )
    return 1;
  LOG_ERR("CGenMosnter::Onload() Duplicate GenArea. (area:%d)", *(_DWORD *)(this + 40));
  return 0;
}
// 43873C: variable 'v1' is possibly undefined

//----- (00438770) --------------------------------------------------------
void __userpurge CGenMonster::OnTimer(CIOObject *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  char v7[4]; // [esp+4h] [ebp-18h] BYREF
  char v8[4]; // [esp+8h] [ebp-14h] BYREF
  int v9; // [esp+Ch] [ebp-10h]
  _DWORD *v10; // [esp+10h] [ebp-Ch]
  DWORD v11; // [esp+14h] [ebp-8h]
  char v12[4]; // [esp+18h] [ebp-4h] BYREF

  if ( !dword_4E1814 )
  {
    CRWLock::ReadLock((CRWLock *)&unk_4E187C);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1870,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
    while ( 1 )
    {
      v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, v7);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v12,
              v5) )
        break;
      v10 = *(_DWORD **)(sub_420250(v12) + 4);
      v11 = GetTickCount();
      if ( v10[20] == 1000 || (int)(v10[19] - v11) <= 0 )
      {
        v9 = 0;
        while ( v10[12] < v10[11] )
        {
          if ( CMonster::Create(ebx0, a3, a4, v10, 0) )
          {
            InterlockedIncrement(v10 + 12);
          }
          else if ( ++v9 >= 3 )
          {
            goto LABEL_3;
          }
        }
        v10[19] = v10[20] + v11;
      }
LABEL_3:
      sub_446090((int *)v12, (int *)v8, 0);
    }
    CRWLock::ReadUnlock((CRWLock *)&unk_4E187C, ebx0, a3, a4);
    CIOObject::AddTimer(this, ebx0, a3, a4, 0x3E8u, 0);
  }
}
// 4E1814: using guessed type int dword_4E1814;

//----- (00438880) --------------------------------------------------------
int *__thiscall CGenMonster::GetGenTile(_DWORD *this, int *a2, int a3)
{
  int v3; // eax
  int v6; // [esp+4h] [ebp-8h]

  if ( a3 && this[13] )
  {
    this[14] = *(_DWORD *)(a3 + 332) - 32 * this[13];
    this[15] = *(_DWORD *)(a3 + 336) - 32 * this[13];
    this[16] = *(_DWORD *)(a3 + 332) + 32 * this[13];
    this[17] = *(_DWORD *)(a3 + 336) + 32 * this[13];
  }
  v6 = RandomBetween(this[14], this[16]);
  v3 = RandomBetween(this[15], this[17]);
  *a2 = v6;
  a2[1] = v3;
  return a2;
}

//----- (00438950) --------------------------------------------------------
void __usercall CGenMonster::Stop(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  void (__thiscall ***v5)(_DWORD, int); // [esp+Ch] [ebp-10h]
  char v6[4]; // [esp+10h] [ebp-Ch] BYREF
  char v7[4]; // [esp+14h] [ebp-8h] BYREF
  char v8[4]; // [esp+18h] [ebp-4h] BYREF

  dword_4E1814 = 1;
  CRWLock::WriteLock((CRWLock *)&unk_4E187C);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1870,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, v6);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v8,
            v4) )
      break;
    v5 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(v8) + 4);
    if ( v5 )
      (**v5)(v5, 1);
    sub_446090((int *)v8, (int *)v7, 0);
  }
  sub_446000(dword_4E1870);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E187C, a1, a2, a3);
}
// 4E1814: using guessed type int dword_4E1814;

//----- (00438A00) --------------------------------------------------------
CMonsterObject *__thiscall CMonsterObject::CMonsterObject(CMonsterObject *this)
{
  int i; // [esp+4h] [ebp-4h]

  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4B7E78;
  `vector constructor iterator'(
    (char *)this + 16,
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  for ( i = 0; i < 2; ++i )
    CLink::Initialize((_DWORD *)this + 2 * i + 20);
  return this;
}
// 4B7E78: using guessed type int (__stdcall *off_4B7E78)(int);

//----- (00438A60) --------------------------------------------------------
_DWORD *__thiscall CLink::Initialize(_DWORD *this)
{
  _DWORD *result; // eax

  *this = this;
  result = this;
  this[1] = this;
  return result;
}

//----- (00438A80) --------------------------------------------------------
void *__thiscall CMonsterObject::_scalar_deleting_destructor_(void *this, char a2)
{
  CNPCObject::_CNPCObject(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00438AB0) --------------------------------------------------------
void __userpurge CMonsterObject::OnTimer(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  _DWORD *v6; // [esp+8h] [ebp-18h]
  _DWORD *v7; // [esp+Ch] [ebp-14h]
  _DWORD *v8; // [esp+10h] [ebp-10h]
  _DWORD *v9; // [esp+14h] [ebp-Ch]
  DWORD v10; // [esp+18h] [ebp-8h]
  DWORD v11; // [esp+1Ch] [ebp-4h]

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 16), ebx0, a3, a4);
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48), ebx0, a3, a4);
      CLink::MoveTo((_DWORD *)(this + 88), this + 80);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48), ebx0, a3, a4);
      v7 = *(_DWORD **)(this + 80);
      while ( v7 != (_DWORD *)(this + 80) )
      {
        v6 = v7 - 107;
        v7 = (_DWORD *)*v7;
        (*(void (__thiscall **)(_DWORD *))(*v6 + 208))(v6);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 16), ebx0, a3, a4);
      CIOObject::AddTimer((CIOObject *)this, ebx0, a3, a4, 0x3E8u, 1);
    }
  }
  else
  {
    if ( !*(_DWORD *)(this + 96) )
    {
      CMonsterBigBirdMother::Create(ebx0, a3, a4);
      *(_DWORD *)(this + 96) = 1;
    }
    v11 = GetTickCount();
    do
    {
      v10 = v11 + 30;
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 16), ebx0, a3, a4);
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48), ebx0, a3, a4);
      CLink::MoveTo((_DWORD *)(this + 88), this + 80);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48), ebx0, a3, a4);
      v9 = *(_DWORD **)(this + 80);
      while ( v9 != (_DWORD *)(this + 80) )
      {
        v8 = v9 - 107;
        v9 = (_DWORD *)*v9;
        (*(void (__thiscall **)(_DWORD *))(*v8 + 204))(v8);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 16), ebx0, a3, a4);
      v11 = GetTickCount();
    }
    while ( v10 <= v11 );
    CIOObject::AddTimer((CIOObject *)this, ebx0, a3, a4, v10 - v11, 0);
  }
}

//----- (00438C40) --------------------------------------------------------
_DWORD *__thiscall CLink::MoveTo(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  result = this;
  if ( (_DWORD *)*this != this )
  {
    **(_DWORD **)(a2 + 4) = *this;
    *(_DWORD *)(*this + 4) = *(_DWORD *)(a2 + 4);
    *(_DWORD *)(a2 + 4) = this[1];
    *(_DWORD *)this[1] = a2;
    *this = this;
    result = this;
    this[1] = this;
  }
  return result;
}

//----- (00438CA0) --------------------------------------------------------
void __userpurge CMonsterObject::Insert(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CLink *a2)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48), ebx0, a3, a4);
  CLink::Insert(a2, (CLink *)(this + 88));
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48), ebx0, a3, a4);
}

//----- (00438CE0) --------------------------------------------------------
void __thiscall CLink::Insert(CLink *this, CLink *pLink)
{
  *((_DWORD *)this + 1) = *((_DWORD *)pLink + 1);
  *(_DWORD *)this = pLink;
  **((_DWORD **)pLink + 1) = this;
  *((_DWORD *)pLink + 1) = this;
}

//----- (00438D20) --------------------------------------------------------
int __usercall CMonsterObject::Stop@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int result; // eax
  char *v6; // [esp+4h] [ebp-Ch]
  _DWORD *v7; // [esp+8h] [ebp-8h]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i < 2; ++i )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)&this[8 * i + 4], a2, a3, a4);
    v7 = (_DWORD *)this[2 * i + 20];
    while ( v7 != &this[2 * i + 20] )
    {
      v6 = (char *)(v7 - 107);
      v7 = (_DWORD *)*v7;
      CBase::Delete(v6);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)&this[8 * i + 4], a2, a3, a4);
    result = i + 1;
  }
  return result;
}

//----- (00438DB0) --------------------------------------------------------
int __thiscall sub_438DB0(int this)
{
  CChar::CChar((CChar *)this);
  *(_DWORD *)this = &off_4B7E90;
  sub_480830((_DWORD *)(this + 488));
  *(_DWORD *)(this + 24) = 2;
  *(_DWORD *)(this + 440) = 0;
  *(_DWORD *)(this + 444) = 0;
  memset((void *)(this + 448), 0, 0x10u);
  *(_DWORD *)(this + 464) = 0;
  *(_DWORD *)(this + 468) = GetTickCount();
  *(_DWORD *)(this + 472) = *(_DWORD *)(this + 468);
  *(_DWORD *)(this + 476) = 0;
  *(_DWORD *)(this + 480) = 0;
  *(_DWORD *)(this + 484) = 0;
  *(_DWORD *)(this + 524) = 0;
  *(_DWORD *)(this + 528) = 0;
  return this;
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (00438E90) --------------------------------------------------------
int __thiscall CMonster::GetGID(_DWORD *this)
{
  return this[131];
}

//----- (00438EB0) --------------------------------------------------------
char *CMonster::GetGuildName()
{
  return off_4D62AC;
}
// 4D62AC: using guessed type char *off_4D62AC;

//----- (00438EC0) --------------------------------------------------------
void __stdcall CMonster::Summon(int a1, int a2, int a3, int a4)
{
  ;
}

//----- (00438ED0) --------------------------------------------------------
void *__userpurge CMonster::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CMonster::_CMonster(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00438F00) --------------------------------------------------------
_DWORD *__usercall CMonster::_CMonster@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *this = &off_4B7E90;
  sub_480870((int)(this + 122));
  return CChar::_CChar((int)this, a2, a3, a4);
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (00438F30) --------------------------------------------------------
int __thiscall CChar::GetDefense(_DWORD *this, int a2)
{
  return this[a2 + 36] + this[a2 + 60] * this[a2 + 36] / 100;
}

//----- (00438F70) --------------------------------------------------------
int __thiscall CChar::GetAbsorb(_DWORD *this)
{
  return this[38] + this[62] * this[38] / 100;
}

//----- (00438FA0) --------------------------------------------------------
int __thiscall CChar::GetResist(_DWORD *this, int a2)
{
  return this[a2 + 40];
}

//----- (00438FC0) --------------------------------------------------------
CMonster *__thiscall CMonster::CMonster(CMonster *this, _DWORD *a2)
{
  CChar::CChar(this);
  *(_DWORD *)this = &off_4B7E90;
  sub_480830((_DWORD *)this + 122);
  *((_DWORD *)this + 6) = 2;
  *((_DWORD *)this + 79) = a2[9];
  *((_DWORD *)this + 80) = a2[18];
  *((_DWORD *)this + 111) = a2[10];
  *((_DWORD *)this + 112) = a2[14];
  *((_DWORD *)this + 113) = a2[15];
  *((_DWORD *)this + 114) = a2[16];
  *((_DWORD *)this + 115) = a2[17];
  *((_DWORD *)this + 116) = 0;
  *((_DWORD *)this + 117) = GetTickCount();
  *((_DWORD *)this + 118) = *((_DWORD *)this + 117);
  *((_DWORD *)this + 119) = 0;
  *((_DWORD *)this + 120) = 0;
  *((_DWORD *)this + 121) = 0;
  *((_DWORD *)this + 131) = 0;
  *((_DWORD *)this + 132) = 0;
  return this;
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (004390C0) --------------------------------------------------------
void __usercall CMonster::Start(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  dword_4E1810 = 0;
  CIOObject::AddTimer((CIOObject *)&unk_4E1898, a1, a2, a3, 0x3E8u, 0);
  CIOObject::AddTimer((CIOObject *)dword_4E1930, a1, a2, a3, 0x1Eu, 0);
  CIOObject::AddTimer((CIOObject *)dword_4E1930, a1, a2, a3, 0x3E8u, 1);
  CIOObject::AddTimer((CIOObject *)dword_4E1998, a1, a2, a3, 0x3E8u, 1);
  CIOObject::AddTimer((CIOObject *)dword_4E1A00, a1, a2, a3, 0x3E8u, 1);
}
// 4E1930: using guessed type int dword_4E1930[26];
// 4E1998: using guessed type int dword_4E1998[26];
// 4E1A00: using guessed type int dword_4E1A00[25];

//----- (00439130) --------------------------------------------------------
void __usercall CMonster::Stop(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  void (__thiscall ***v4)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v5[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v6[4]; // [esp+10h] [ebp-8h] BYREF
  char v7[4]; // [esp+14h] [ebp-4h] BYREF

  CGenMonster::Stop(a1, a2, a3);
  CMonsterObject::Stop(dword_4E1930, a1, a2, a3);
  CMonsterObject::Stop(dword_4E1998, a1, a2, a3);
  CMonsterObject::Stop(dword_4E1A00, a1, a2, a3);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E1820,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1820, v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v3) )
      break;
    v4 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(v7) + 4);
    if ( v4 )
      (**v4)(v4, 1);
    sub_446090((int *)v7, (int *)v6, 0);
  }
  sub_445D90(dword_4E1820);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
}
// 4E1930: using guessed type int dword_4E1930[26];
// 4E1998: using guessed type int dword_4E1998[26];
// 4E1A00: using guessed type int dword_4E1A00[25];

//----- (004391F0) --------------------------------------------------------
LONG CMonster::Size()
{
  return dword_4E1810;
}

//----- (00439200) --------------------------------------------------------
CMonsterMaguni *__cdecl CMonster::NewMonster(int a1, int a2)
{
  CMonsterSiegeGunRuins *v3; // [esp+0h] [ebp-ACh]
  CMonsterMaguni *v4; // [esp+4h] [ebp-A8h]
  CMonsterMaguni *v5; // [esp+8h] [ebp-A4h]
  int v6; // [esp+Ch] [ebp-A0h]
  CMonsterFireFlower *v7; // [esp+10h] [ebp-9Ch]
  CMonsterCocoon *v8; // [esp+14h] [ebp-98h]
  CMonsterEgg *v9; // [esp+18h] [ebp-94h]
  CMonsterInactive *v10; // [esp+1Ch] [ebp-90h]
  CMonsterMaguni *v11; // [esp+20h] [ebp-8Ch]
  CMonsterItem *v12; // [esp+24h] [ebp-88h]
  CMonsterMaguni *v13; // [esp+28h] [ebp-84h]
  CMonsterInvaderBoss *v14; // [esp+2Ch] [ebp-80h]
  CMonsterWithSkillOnly *v15; // [esp+30h] [ebp-7Ch]
  CMonsterBlackBug *v16; // [esp+34h] [ebp-78h]
  int v17; // [esp+38h] [ebp-74h]
  CMonsterReal *v18; // [esp+3Ch] [ebp-70h]
  CMonsterMaguniWithSkill *v19; // [esp+44h] [ebp-68h]
  CMonsterMaguniWithSkillOnly *v20; // [esp+48h] [ebp-64h]
  CMonsterMaguni *v21; // [esp+4Ch] [ebp-60h]
  CMonsterMaguni *v22; // [esp+50h] [ebp-5Ch]
  CMemory **v23; // [esp+5Ch] [ebp-50h]
  CMemory **v24; // [esp+60h] [ebp-4Ch]
  CMemory **v25; // [esp+64h] [ebp-48h]
  CMemory **v26; // [esp+68h] [ebp-44h]
  CMemory **v27; // [esp+6Ch] [ebp-40h]
  CMemory **v28; // [esp+70h] [ebp-3Ch]
  CMemory **v29; // [esp+74h] [ebp-38h]
  CMemory **v30; // [esp+78h] [ebp-34h]
  CMemory **v31; // [esp+7Ch] [ebp-30h]
  CMemory **v32; // [esp+80h] [ebp-2Ch]
  CMemory **v33; // [esp+84h] [ebp-28h]
  CMemory **v34; // [esp+88h] [ebp-24h]
  CMemory **v35; // [esp+8Ch] [ebp-20h]
  CMemory **v36; // [esp+90h] [ebp-1Ch]
  CMemory **v37; // [esp+94h] [ebp-18h]
  CMemory **v38; // [esp+98h] [ebp-14h]
  CMemory **v39; // [esp+9Ch] [ebp-10h]
  CMemory **v40; // [esp+A0h] [ebp-Ch]
  CMemory **v41; // [esp+A4h] [ebp-8h]
  CMonsterMaguni *v42; // [esp+A8h] [ebp-4h]

  v42 = 0;
  switch ( *(_DWORD *)(a1 + 64) )
  {
    case 0:
      switch ( *(_DWORD *)(a1 + 72) )
      {
        case 1:
        case 2:
          v41 = operator_new(0x298u);
          if ( v41 )
            v22 = CMonsterMaguni::CMonsterMaguni((CMonsterMaguni *)v41, a2);
          else
            v22 = 0;
          v42 = v22;
          *((_DWORD *)v22 + 119) = *(_DWORD *)(a1 + 72) - 1;
          break;
        case 3:
          v40 = operator_new(0x2B0u);
          if ( v40 )
            v21 = (CMonsterMaguni *)sub_439D20(v40, a2);
          else
            v21 = 0;
          v42 = v21;
          *((_DWORD *)v21 + 119) = *(_DWORD *)(a1 + 72) - 2;
          break;
        case 4:
          v39 = operator_new(0x298u);
          if ( v39 )
            v20 = CMonsterMaguniWithSkillOnly::CMonsterMaguniWithSkillOnly((CMonsterMaguniWithSkillOnly *)v39, a2);
          else
            v20 = 0;
          v42 = v20;
          *((_DWORD *)v20 + 119) = 1;
          break;
        case 5:
          v38 = operator_new(0x2A0u);
          if ( v38 )
            v19 = CMonsterMaguniWithSkill::CMonsterMaguniWithSkill((CMonsterMaguniWithSkill *)v38, a2);
          else
            v19 = 0;
          v42 = v19;
          *((_DWORD *)v19 + 119) = 1;
          break;
        default:
          return v42;
      }
      break;
    case 1:
      switch ( *(_DWORD *)(a1 + 72) )
      {
        case 1:
        case 2:
          v37 = operator_new(0x298u);
          if ( v37 )
            v18 = CMonsterReal::CMonsterReal((CMonsterReal *)v37, (_DWORD *)a2);
          else
            v18 = 0;
          v42 = v18;
          *((_DWORD *)v18 + 119) = *(_DWORD *)(a1 + 72) - 1;
          break;
        case 3:
          v36 = operator_new(0x2B8u);
          if ( v36 )
            v17 = sub_440070((int)v36);
          else
            v17 = 0;
          v42 = (CMonsterMaguni *)v17;
          break;
        case 4:
          v35 = operator_new(0x2A0u);
          if ( v35 )
            v16 = CMonsterBlackBug::CMonsterBlackBug((CMonsterBlackBug *)v35, a2);
          else
            v16 = 0;
          v42 = v16;
          *((_DWORD *)v16 + 119) = 1;
          break;
        case 5:
          v34 = operator_new(0x298u);
          if ( v34 )
            v15 = CMonsterWithSkillOnly::CMonsterWithSkillOnly((CMonsterWithSkillOnly *)v34, a2);
          else
            v15 = 0;
          v42 = v15;
          *((_DWORD *)v15 + 119) = 1;
          break;
        case 6:
          v33 = operator_new(0x2B8u);
          if ( v33 )
            v14 = CMonsterInvaderBoss::CMonsterInvaderBoss((CMonsterInvaderBoss *)v33, a2);
          else
            v14 = 0;
          v42 = v14;
          *((_DWORD *)v14 + 119) = 1;
          break;
        default:
          return v42;
      }
      break;
    case 2:
    case 3:
      v32 = operator_new(0x238u);
      if ( v32 )
        v13 = (CMonsterMaguni *)sub_439AD0(v32);
      else
        v13 = 0;
      v42 = v13;
      break;
    case 4:
      v31 = operator_new(0x218u);
      if ( v31 )
        v12 = CMonsterItem::CMonsterItem((CMonsterItem *)v31, (_DWORD *)a2);
      else
        v12 = 0;
      v42 = v12;
      break;
    case 5:
      v30 = operator_new(0x218u);
      if ( v30 )
        v11 = (CMonsterMaguni *)sub_439BD0(v30, (_DWORD *)a2);
      else
        v11 = 0;
      v42 = v11;
      break;
    case 6:
      v29 = operator_new(0x218u);
      if ( v29 )
        v10 = CMonsterInactive::CMonsterInactive((CMonsterInactive *)v29, a2);
      else
        v10 = 0;
      v42 = v10;
      break;
    case 7:
      v28 = operator_new(0x2A0u);
      if ( v28 )
        v9 = CMonsterEgg::CMonsterEgg((CMonsterEgg *)v28, a2);
      else
        v9 = 0;
      v42 = v9;
      break;
    case 8:
      v27 = operator_new(0x2A0u);
      if ( v27 )
        v8 = CMonsterCocoon::CMonsterCocoon((CMonsterCocoon *)v27, a2);
      else
        v8 = 0;
      v42 = v8;
      *((_DWORD *)v8 + 119) = 1;
      break;
    case 9:
      v26 = operator_new(0x2A8u);
      if ( v26 )
        v7 = CMonsterFireFlower::CMonsterFireFlower((CMonsterFireFlower *)v26, a2);
      else
        v7 = 0;
      v42 = v7;
      *((_DWORD *)v7 + 119) = 0;
      break;
    case 0xA:
      v6 = *(_DWORD *)(a1 + 72);
      switch ( v6 )
      {
        case 1:
          v25 = operator_new(0x2D0u);
          if ( v25 )
            v5 = (CMonsterMaguni *)sub_439DE0(v25);
          else
            v5 = 0;
          v42 = v5;
          *((_DWORD *)v5 + 119) = 0;
          break;
        case 2:
          v24 = operator_new(0x2A8u);
          if ( v24 )
            v4 = (CMonsterMaguni *)sub_439EA0(v24);
          else
            v4 = 0;
          v42 = v4;
          *((_DWORD *)v4 + 119) = 0;
          break;
        case 3:
          v23 = operator_new(0x2A8u);
          if ( v23 )
            v3 = CMonsterSiegeGunRuins::CMonsterSiegeGunRuins((CMonsterSiegeGunRuins *)v23);
          else
            v3 = 0;
          v42 = v3;
          break;
      }
      break;
    default:
      return v42;
  }
  return v42;
}

//----- (00439830) --------------------------------------------------------
CMonsterMaguni *__thiscall CMonsterMaguni::CMonsterMaguni(CMonsterMaguni *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B7F88;
  return this;
}
// 4B7F88: using guessed type int (__stdcall *off_4B7F88)(int);

//----- (00439860) --------------------------------------------------------
int __thiscall CMonsterReal::GetAttackType(_DWORD *this)
{
  return *(_DWORD *)(this[110] + 268);
}

//----- (00439880) --------------------------------------------------------
int __thiscall CMonsterReal::ResetNextMove(_DWORD *this, int a2, int a3)
{
  int result; // eax

  this[139] = a2;
  result = a3;
  this[163] = a3;
  return result;
}

//----- (004398B0) --------------------------------------------------------
_DWORD *__usercall CMonsterReal::_CMonsterReal@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CFindPath::_CFindPath((void *)(this + 612));
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 572), a2, a3, a4);
  sub_4398F0((void *)(this + 560));
  return CMonster::_CMonster((_DWORD *)this, a2, a3, a4);
}

//----- (004398F0) --------------------------------------------------------
int __thiscall sub_4398F0(void *this)
{
  return sub_445CB0(this);
}

//----- (00439910) --------------------------------------------------------
CMonsterMaguniWithSkillOnly *__thiscall CMonsterMaguniWithSkillOnly::CMonsterMaguniWithSkillOnly(CMonsterMaguniWithSkillOnly *this, int a2)
{
  CMonsterMaguni::CMonsterMaguni(this, a2);
  *(_DWORD *)this = &off_4B8090;
  return this;
}
// 4B8090: using guessed type int (__stdcall *off_4B8090)(int);

//----- (00439940) --------------------------------------------------------
void *__userpurge CMonsterMaguniWithSkillOnly::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CMonsterMaguniWithSkillOnly::_CMonsterMaguniWithSkillOnly(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00439970) --------------------------------------------------------
_DWORD *__usercall CMonsterMaguniWithSkillOnly::_CMonsterMaguniWithSkillOnly@<eax>(void *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  return CMonsterFireFlower::_CMonsterFireFlower(this, a2, a3, a4);
}

//----- (00439990) --------------------------------------------------------
CMonsterMaguniWithSkill *__thiscall CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(CMonsterMaguniWithSkill *this, int a2)
{
  CMonsterMaguni::CMonsterMaguni(this, a2);
  *(_DWORD *)this = &off_4B8198;
  *((_DWORD *)this + 166) = 0;
  return this;
}
// 4B8198: using guessed type int (__stdcall *off_4B8198)(int);

//----- (004399D0) --------------------------------------------------------
CMonsterInactive *__thiscall CMonsterInactive::CMonsterInactive(CMonsterInactive *this, int a2)
{
  sub_439A00(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B82A0;
  return this;
}
// 4B82A0: using guessed type int (__stdcall *off_4B82A0)(int);

//----- (00439A00) --------------------------------------------------------
_DWORD *__thiscall sub_439A00(_DWORD *this, _DWORD *a2)
{
  CMonster::CMonster((CMonster *)this, a2);
  *this = &off_4B8398;
  return this;
}
// 4B8398: using guessed type int (__stdcall *off_4B8398)(int);

//----- (00439A30) --------------------------------------------------------
void *__userpurge CMonsterNotReal::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CMonsterNotReal::_CMonsterNotReal(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00439A60) --------------------------------------------------------
_DWORD *__usercall CMonsterNotReal::_CMonsterNotReal@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  return CMonster::_CMonster(this, a2, a3, a4);
}

//----- (00439A80) --------------------------------------------------------
void *__userpurge CMonsterMagic::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CMonsterInactive::_CMonsterInactive(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00439AB0) --------------------------------------------------------
_DWORD *__usercall CMonsterInactive::_CMonsterInactive@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  return CMonsterNotReal::_CMonsterNotReal(this, a2, a3, a4);
}

//----- (00439AD0) --------------------------------------------------------
_DWORD *__thiscall sub_439AD0(_DWORD *this)
{
  CMonsterNotReal::CMonsterNotReal((CMonsterNotReal *)this);
  *this = &off_4B8490;
  return this;
}
// 4B8490: using guessed type int (__stdcall *off_4B8490)(int);

//----- (00439AF0) --------------------------------------------------------
CMonsterNotReal *__thiscall CMonsterNotReal::CMonsterNotReal(CMonsterNotReal *this)
{
  sub_438DB0((int)this);
  *(_DWORD *)this = &off_4B8398;
  return this;
}
// 4B8398: using guessed type int (__stdcall *off_4B8398)(int);

//----- (00439B10) --------------------------------------------------------
int __thiscall CMonsterGuildWar::GetGID(_DWORD *this)
{
  return this[134];
}

//----- (00439B30) --------------------------------------------------------
char *__thiscall CMonsterGuildWar::GetGuildName(char *this)
{
  return this + 540;
}

//----- (00439B50) --------------------------------------------------------
CMonsterItem *__thiscall CMonsterItem::CMonsterItem(CMonsterItem *this, _DWORD *a2)
{
  sub_439A00(this, a2);
  *(_DWORD *)this = &off_4B8588;
  return this;
}
// 4B8588: using guessed type int (__stdcall *off_4B8588)(int);

//----- (00439B80) --------------------------------------------------------
void *__userpurge CMonsterItem::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CMonsterItem::_CMonsterItem(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00439BB0) --------------------------------------------------------
_DWORD *__usercall CMonsterItem::_CMonsterItem@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *this = &off_4B8588;
  return CMonsterNotReal::_CMonsterNotReal(this, a2, a3, a4);
}
// 4B8588: using guessed type int (__stdcall *off_4B8588)(int);

//----- (00439BD0) --------------------------------------------------------
_DWORD *__thiscall sub_439BD0(_DWORD *this, _DWORD *a2)
{
  sub_439A00(this, a2);
  *this = &off_4B8680;
  return this;
}
// 4B8680: using guessed type int (__stdcall *off_4B8680)(int);

//----- (00439C00) --------------------------------------------------------
CMonsterBlackBug *__thiscall CMonsterBlackBug::CMonsterBlackBug(CMonsterBlackBug *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B8778;
  memset((char *)this + 664, 0, 4u);
  *((_DWORD *)this + 166) = 0;
  *((_DWORD *)this + 167) = a2;
  return this;
}
// 4B8778: using guessed type int (__stdcall *off_4B8778)(int);

//----- (00439C60) --------------------------------------------------------
CMonsterEgg *__thiscall CMonsterEgg::CMonsterEgg(CMonsterEgg *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B8880;
  *((_DWORD *)this + 167) = a2;
  *((_DWORD *)this + 117) = GetTickCount() + 140000;
  CMonsterReal::AddGState((int)this, 0x2000);
  return this;
}
// 4B8880: using guessed type int (__stdcall *off_4B8880)(int);

//----- (00439CC0) --------------------------------------------------------
CMonsterCocoon *__thiscall CMonsterCocoon::CMonsterCocoon(CMonsterCocoon *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B8988;
  memset((char *)this + 664, 0, 4u);
  *((_DWORD *)this + 166) = GetTickCount() + 120000;
  *((_DWORD *)this + 167) = a2;
  return this;
}
// 4B8988: using guessed type int (__stdcall *off_4B8988)(int);

//----- (00439D20) --------------------------------------------------------
_DWORD *__thiscall sub_439D20(_DWORD *this, int a2)
{
  CMonsterReal::CMonsterReal((CMonsterReal *)this, (_DWORD *)a2);
  *this = &off_4B8A90;
  memset(this + 167, 0, 0x14u);
  this[139] = GetTickCount();
  this[165] = this[139];
  return this;
}
// 4B8A90: using guessed type int (__stdcall *off_4B8A90)(int);

//----- (00439D80) --------------------------------------------------------
CMonsterFireFlower *__thiscall CMonsterFireFlower::CMonsterFireFlower(CMonsterFireFlower *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B8B98;
  memset((char *)this + 664, 0, 8u);
  *((_DWORD *)this + 166) = GetTickCount() + 12000;
  CMonsterReal::AddGState((int)this, 0x2000);
  return this;
}
// 4B8B98: using guessed type int (__stdcall *off_4B8B98)(int);

//----- (00439DE0) --------------------------------------------------------
_DWORD *__thiscall sub_439DE0(_DWORD *this)
{
  sub_43A7D0((char *)this);
  *this = &off_4B8CA0;
  this[173] = 0;
  memset(this + 172, 0, sizeof(_DWORD));
  this[139] = GetTickCount();
  this[165] = this[139];
  this[174] = 0;
  this[175] = 0;
  this[132] = 0;
  this[177] = 0;
  return this;
}
// 4B8CA0: using guessed type int (__stdcall *off_4B8CA0)(int);

//----- (00439E80) --------------------------------------------------------
char *__thiscall CMonsterSiegeGun::GetGuildName(char *this)
{
  return this + 664;
}

//----- (00439EA0) --------------------------------------------------------
_DWORD *__thiscall sub_439EA0(_DWORD *this)
{
  sub_43A7D0((char *)this);
  *this = &off_4B8DA8;
  return this;
}
// 4B8DA8: using guessed type int (__stdcall *off_4B8DA8)(int);

//----- (00439EC0) --------------------------------------------------------
void *__userpurge CMonsterSiegeGun::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CMonsterFireFlower::_CMonsterFireFlower(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00439EF0) --------------------------------------------------------
CMonsterSiegeGunRuins *__thiscall CMonsterSiegeGunRuins::CMonsterSiegeGunRuins(CMonsterSiegeGunRuins *this)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B8EB0;
  return this;
}
// 4B8EB0: using guessed type int (__stdcall *off_4B8EB0)(int);

//----- (00439F10) --------------------------------------------------------
CMonsterWithSkillOnly *__thiscall CMonsterWithSkillOnly::CMonsterWithSkillOnly(CMonsterWithSkillOnly *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B8FB8;
  return this;
}
// 4B8FB8: using guessed type int (__stdcall *off_4B8FB8)(int);

//----- (00439F40) --------------------------------------------------------
CMonsterInvaderBoss *__thiscall CMonsterInvaderBoss::CMonsterInvaderBoss(CMonsterInvaderBoss *this, int a2)
{
  CMonsterReal::CMonsterReal(this, (_DWORD *)a2);
  *(_DWORD *)this = &off_4B90C0;
  memset((char *)this + 668, 0, 0x14u);
  *((_DWORD *)this + 139) = GetTickCount();
  *((_DWORD *)this + 165) = *((_DWORD *)this + 139);
  *((_DWORD *)this + 172) = 0;
  return this;
}
// 4B90C0: using guessed type int (__stdcall *off_4B90C0)(int);

//----- (00439FB0) --------------------------------------------------------
int __usercall CMonster::Create@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, _DWORD *a1, int a2)
{
  int result; // eax
  void *v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-1Ch] [ebp-48h]
  int v10; // [esp-18h] [ebp-44h]
  int v11; // [esp-14h] [ebp-40h]
  int v12; // [esp-10h] [ebp-3Ch]
  char v13[4]; // [esp+Ch] [ebp-20h] BYREF
  int v14; // [esp+10h] [ebp-1Ch]
  int v15[2]; // [esp+14h] [ebp-18h] BYREF
  int v16[2]; // [esp+1Ch] [ebp-10h] BYREF
  char v17[4]; // [esp+24h] [ebp-8h] BYREF
  CMonsterMaguni *v18; // [esp+28h] [ebp-4h]

  CGenMonster::GetGenTile(a1, v15, a2);
  if ( !CSMap::IsValidTile((_DWORD *)a1[18], v15, 0x20000) )
    return 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, a3);
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1820,
    v17,
    a1 + 8);
  v6 = sub_430C20(dword_4E1820, v13);
  if ( (unsigned __int8)unknown_libname_16(v6) )
    goto LABEL_4;
  v14 = *(_DWORD *)(sub_420250(v17) + 4);
  if ( (*(_DWORD *)(v14 + 304) & (1 << dword_4E35B8)) != 0 )
  {
    v18 = CMonster::NewMonster(v14, (int)a1);
    if ( !v18 )
    {
LABEL_4:
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, a3);
      return 0;
    }
    CChar::SetXY(v18, v15);
    (*(void (__thiscall **)(CMonsterMaguni *, int))(*(_DWORD *)v18 + 192))(v18, v14);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, a3);
    CChar::Lock((int)v18);
    v16[0] = v15[0] >> 5;
    v16[1] = v15[1] >> 5;
    if ( sub_491360(*((_DWORD **)v18 + 80), ebx0, edi0, a3, (int)v18, v16) )
    {
      (*(void (__thiscall **)(CMonsterMaguni *, int))(*(_DWORD *)v18 + 196))(v18, a2);
      v7 = (*(int (__thiscall **)(CMonsterMaguni *))(*(_DWORD *)v18 + 240))(v18);
      v12 = (*(int (__thiscall **)(CMonsterMaguni *, _DWORD, _DWORD, int))(*(_DWORD *)v18 + 224))(
              v18,
              *(_DWORD *)(*((_DWORD *)v18 + 110) + 64),
              *((_DWORD *)v18 + 131),
              v7);
      v11 = *((_DWORD *)v18 + 73);
      v10 = *((_DWORD *)v18 + 72);
      v9 = *((_DWORD *)v18 + 70);
      v8 = CChar::GetMaxHP(v18);
      CChar::WriteInSight(
        ebx0,
        edi0,
        a3,
        (int)v18,
        51,
        "wdddwdddIsbds",
        *(_DWORD *)(*((_DWORD *)v18 + 110) + 60),
        *((_DWORD *)v18 + 7),
        *((_DWORD *)v18 + 83),
        *((_DWORD *)v18 + 84),
        *((_DWORD *)v18 + 87),
        *((_DWORD *)v18 + 68),
        v8,
        v9,
        v10,
        v11,
        v12);
      CChar::Unlock((int)v18);
      result = 1;
    }
    else
    {
      CChar::Unlock((int)v18);
      if ( v18 )
        (**(void (__thiscall ***)(CMonsterMaguni *, int))v18)(v18, 1);
      result = 0;
    }
  }
  else
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, a3);
    result = 1;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0043A200) --------------------------------------------------------
int __thiscall CChar::GetMaxHP(_DWORD *this)
{
  return this[28] + this[21] + this[52] * this[21] / 100;
}

//----- (0043A240) --------------------------------------------------------
CIOObject *__usercall CMonster::FindMonster@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+0h] [ebp-Ch] BYREF
  CIOObject *v7; // [esp+4h] [ebp-8h]
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v7 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E1858);
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E184C,
    v8,
    &a1);
  v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E184C, v6);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v8,
         v4) )
  {
    v7 = *(CIOObject **)(sub_420250(v8) + 4);
    CIOObject::AddRef(v7, ebx0, a2, a3, (volatile int *)v7 + 88);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1858, ebx0, a2, a3);
  return v7;
}

//----- (0043A2C0) --------------------------------------------------------
void __usercall CMonster::GetMonsterList(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int v6; // eax
  char v7[4]; // [esp+0h] [ebp-Ch] BYREF
  char v8[4]; // [esp+4h] [ebp-8h] BYREF
  char v9[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E1858);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E184C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  while ( 1 )
  {
    v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E184C, v7);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
            v5) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v9) + 4) + 440) + 60) == a2 )
    {
      v6 = sub_420250(v9);
      sub_47D000((int *)a1, v6 + 4);
    }
    sub_446090((int *)v9, (int *)v8, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1858, ebx0, edi0, a3);
}

//----- (0043A350) --------------------------------------------------------
volatile int *__usercall CMonster::ScanMonster@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+0h] [ebp-10h] BYREF
  char v7[4]; // [esp+4h] [ebp-Ch] BYREF
  char v8[4]; // [esp+8h] [ebp-8h] BYREF
  volatile int *v9; // [esp+Ch] [ebp-4h]

  v9 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E1858);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E184C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E184C, v6);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v8,
            v4) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v8) + 4) + 440) + 60) == a1 )
    {
      v9 = *(volatile int **)(sub_420250(v8) + 4);
      CIOObject::AddRef(v9, ebx0, a2, a3);
      break;
    }
    sub_446090((int *)v8, (int *)v7, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1858, ebx0, a2, a3);
  return v9;
}

//----- (0043A3F0) --------------------------------------------------------
void __usercall CMonster::OnDelete(Concurrency::details::_CancellationTokenRegistration *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-4h]

  CChar::Lock((int)this);
  (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, _DWORD))(*(_DWORD *)this + 188))(
    this,
    0);
  (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)this + 200))(this);
  sub_4913E0(*((_DWORD **)this + 80), a2, a3, a4, this, (int)this + 324);
  if ( *((_DWORD *)this + 121) )
  {
    v5 = *((_DWORD *)this + 121);
    *((_DWORD *)this + 121) = 0;
    CChar::Unlock((int)this);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 172))(v5, *(_DWORD *)(*((_DWORD *)this + 110) + 60));
  }
  else
  {
    CChar::Unlock((int)this);
  }
  CBase::OnDelete((volatile int *)this, a2, a3, a4);
}

//----- (0043A4A0) --------------------------------------------------------
void __thiscall CMonster::SendDelete(_DWORD *this, int a2, int a3)
{
  CPlayer::Write(a2, 56, "d", this[7]);
}

//----- (0043A4D0) --------------------------------------------------------
void __thiscall CMonster::SendCreate(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // [esp-1Ch] [ebp-20h]
  int v6; // [esp-18h] [ebp-1Ch]
  int v7; // [esp-14h] [ebp-18h]
  int v8; // [esp-10h] [ebp-14h]

  v3 = (*(int (__thiscall **)(_DWORD *))(*this + 240))(this);
  v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD, int))(*this + 224))(
         this,
         *(_DWORD *)(this[110] + 64),
         this[131],
         v3);
  v7 = this[73];
  v6 = this[72];
  v5 = this[70];
  v4 = CChar::GetMaxHP(this);
  CPlayer::Write(
    a2,
    51,
    "wdddwdddIsbds",
    *(_DWORD *)(this[110] + 60),
    this[7],
    this[83],
    this[84],
    this[87],
    this[68],
    v4,
    v5,
    v6,
    v7,
    v8);
}

//----- (0043A590) --------------------------------------------------------
CIOObject **__userpurge CMonster::SetTarget@<eax>(CIOObject **this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2)
{
  CIOObject **result; // eax

  result = this;
  if ( this[116] )
    CIOObject::Release(this[116], ebx0, a3, a4, (volatile int *)this[116] + 89);
  this[116] = a2;
  return result;
}

//----- (0043A5E0) --------------------------------------------------------
int __thiscall CMonster::SetProperty(int this, int a2)
{
  int result; // eax

  *(_DWORD *)(this + 440) = a2;
  strcpy((char *)(this + 32), (const char *)(a2 + 32));
  result = *(_DWORD *)(a2 + 68);
  *(_DWORD *)(this + 60) = result;
  return result;
}

//----- (0043A620) --------------------------------------------------------
int __thiscall CMonster::AI(void *this)
{
  return CMonster::IsRemoved((int)this);
}

//----- (0043A640) --------------------------------------------------------
void __userpurge CMonster::Add(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  std::pair<char const * const,CItem *> *v5; // eax
  char v7[8]; // [esp+4h] [ebp-18h] BYREF
  char *_Val1; // [esp+Ch] [ebp-10h] BYREF
  CItem *_Val2; // [esp+10h] [ebp-Ch] BYREF
  char v10[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef((volatile int *)this, ebx0, a3, a4);
  CMonsterObject::Insert((int)dword_4E1930, ebx0, a3, a4, (CLink *)(this + 428));
  CRWLock::WriteLock((CRWLock *)&unk_4E1858);
  _Val2 = (CItem *)this;
  _Val1 = *(char **)(this + 28);
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v10,
    (const char *const *)&_Val1,
    &_Val2);
  sub_445DF0(
    dword_4E184C,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v7,
    v5);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E1858, ebx0, a3, a4);
}
// 43A697: variable 'v5' is possibly undefined
// 4E1930: using guessed type int dword_4E1930[26];

//----- (0043A6B0) --------------------------------------------------------
void __usercall CMonster::Remove(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E1858);
  v5 = this[7];
  sub_445FA0(dword_4E184C, &v5);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E1858, a2, a3, a4);
}

//----- (0043A6F0) --------------------------------------------------------
void __thiscall CLink::Remove(CLink *this)
{
  *(_DWORD *)(*(_DWORD *)this + 4) = *((_DWORD *)this + 1);
  **((_DWORD **)this + 1) = *(_DWORD *)this;
}

//----- (0043A720) --------------------------------------------------------
volatile int *__usercall CMonster::GetOperatorName@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOObject *v5; // [esp+4h] [ebp-8h]

  if ( !this[132] )
    return 0;
  v5 = sub_450810(this[132]);
  CIOObject::Release(v5, a2, a3, a4, (volatile int *)v5 + 88);
  return (volatile int *)((char *)v5 + 32);
}

//----- (0043A770) --------------------------------------------------------
BOOL __thiscall CMonster::CanAttack(_QWORD *this, _QWORD *a2, int a3)
{
  BOOL result; // eax

  if ( a3 || !CChar::IsMState(this, 0x200010000100i64) )
    result = CChar::IsMState(a2, 0x80000i64) == 0;
  else
    result = 0;
  return result;
}

//----- (0043A7D0) --------------------------------------------------------
char *__thiscall sub_43A7D0(char *this)
{
  sub_438DB0((int)this);
  *(_DWORD *)this = &off_4B91D8;
  sub_445C80(this + 560);
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 572));
  CFindPath::CFindPath((_DWORD *)this + 153);
  *((_DWORD *)this + 137) = 0;
  *((_DWORD *)this + 136) = 0;
  *((_DWORD *)this + 138) = 0;
  *((_DWORD *)this + 120) = 1;
  *((_DWORD *)this + 135) = 0;
  *((_DWORD *)this + 134) = 0;
  *((_DWORD *)this + 139) = GetTickCount();
  *((_DWORD *)this + 165) = *((_DWORD *)this + 139);
  *((_DWORD *)this + 151) = 0;
  *((_DWORD *)this + 152) = 0;
  *((_DWORD *)this + 163) = 0;
  *((_DWORD *)this + 164) = 0;
  return this;
}
// 4B91D8: using guessed type int (__stdcall *off_4B91D8)(int);

//----- (0043A8C0) --------------------------------------------------------
void *__userpurge CMonsterReal::_scalar_deleting_destructor_@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CMonsterReal::_CMonsterReal((int)this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0043A8F0) --------------------------------------------------------
CMonsterReal *__thiscall CMonsterReal::CMonsterReal(CMonsterReal *this, _DWORD *a2)
{
  CMonster::CMonster(this, a2);
  *(_DWORD *)this = &off_4B91D8;
  sub_445C80((char *)this + 560);
  CIOCriticalSection::CIOCriticalSection((CMonsterReal *)((char *)this + 572));
  CFindPath::CFindPath((_DWORD *)this + 153);
  *((_DWORD *)this + 134) = (*((_DWORD *)this + 114) + *((_DWORD *)this + 112)) / 2;
  *((_DWORD *)this + 135) = (*((_DWORD *)this + 113) + *((_DWORD *)this + 115)) / 2;
  *((_DWORD *)this + 138) = 0;
  *((_DWORD *)this + 120) = 1;
  *((_DWORD *)this + 139) = GetTickCount();
  *((_DWORD *)this + 165) = *((_DWORD *)this + 139);
  *((_DWORD *)this + 151) = 0;
  *((_DWORD *)this + 152) = 0;
  *((_DWORD *)this + 163) = 0;
  *((_DWORD *)this + 164) = 0;
  *((_DWORD *)this + 128) = a2[8];
  return this;
}
// 4B91D8: using guessed type int (__stdcall *off_4B91D8)(int);

//----- (0043AA00) --------------------------------------------------------
void __usercall CMonsterReal::OnDelete(Concurrency::details::_CancellationTokenRegistration *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-4h]

  CChar::Lock((int)this);
  (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, _DWORD))(*(_DWORD *)this + 188))(
    this,
    0);
  CMonsterReal::ResetHostility((int)this, a2, a3, a4);
  (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)this + 200))(this);
  sub_4913E0(*((_DWORD **)this + 80), a2, a3, a4, this, (int)this + 324);
  if ( *((_DWORD *)this + 121) )
  {
    v5 = *((_DWORD *)this + 121);
    *((_DWORD *)this + 121) = 0;
    CChar::Unlock((int)this);
    if ( *((_DWORD *)this + 128) != 331 )
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 172))(v5, *(_DWORD *)(*((_DWORD *)this + 110) + 60));
  }
  else
  {
    CChar::Unlock((int)this);
  }
  CBase::OnDelete((volatile int *)this, a2, a3, a4);
}

//----- (0043AAC0) --------------------------------------------------------
void __thiscall CMonsterReal::SendCreate(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // [esp-1Ch] [ebp-24h]
  int v6; // [esp-18h] [ebp-20h]
  int v7; // [esp-14h] [ebp-1Ch]
  int v8; // [esp-10h] [ebp-18h]

  v3 = (*(int (__thiscall **)(_DWORD *))(*this + 240))(this);
  v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD, int))(*this + 224))(
         this,
         *(_DWORD *)(this[110] + 64),
         this[131],
         v3);
  v7 = this[73];
  v6 = this[72];
  v5 = this[70];
  v4 = CChar::GetMaxHP(this);
  CPlayer::Write(
    a2,
    51,
    "wdddwdddIsbds",
    *(_DWORD *)(this[110] + 60),
    this[7],
    this[83],
    this[84],
    this[87],
    this[68],
    v4,
    v5,
    v6,
    v7,
    v8);
  if ( this[65] )
    CPlayer::Write(a2, 72, "dbw", this[7], 32, this[65]);
}

//----- (0043ABB0) --------------------------------------------------------
int __userpurge CMonsterReal::Damage@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, _DWORD *a4, _DWORD *a5, _DWORD *a6, int a7)
{
  int result; // eax
  int v11; // [esp+0h] [ebp-20h]
  int v12; // [esp+4h] [ebp-1Ch]
  int v14; // [esp+Ch] [ebp-14h] BYREF
  int v15; // [esp+10h] [ebp-10h] BYREF
  int v16; // [esp+14h] [ebp-Ch]
  int v17; // [esp+18h] [ebp-8h]
  int v18; // [esp+1Ch] [ebp-4h]

  if ( (*(int (__thiscall **)(int))(*(_DWORD *)this + 252))(this) )
    return 1;
  if ( a7 )
    v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v12 = 1;
  v16 = v12;
  v18 = CChar::GetFinalDamage((_DWORD *)this, (_DWORD *)a2, a3, v12);
  if ( v18 > 0 )
  {
    CMonsterReal::ManageBuff((_QWORD *)this, ebx0, edi0, esi0);
    CChar::Lock(this);
    if ( CMonsterReal::ApplyDamage(this, ebx0, edi0, esi0, a2, a3, v18, a4, (int)a5, a6, a7) )
    {
      v17 = *a6 + *a4;
      if ( a7 )
      {
        v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 24))(a7);
        (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)this + 212))(this, a2, v17, v11);
      }
      else
      {
        (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)this + 212))(this, a2, v17, 0);
      }
      if ( *(int *)(this + 272) > 0 )
      {
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)this + 256))(this, v17, v16);
        CChar::Unlock(this);
      }
      else
      {
        v15 = 0;
        v14 = 0;
        (*(void (__thiscall **)(int, int, _DWORD, int *, int *))(*(_DWORD *)this + 236))(this, a2, *a5, &v15, &v14);
        CChar::Unlock(this);
        CMonsterReal::AllotTransformExp((_DWORD *)this, ebx0, edi0, esi0, v15, v14);
        CBase::Delete((char *)this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (0043AD50) --------------------------------------------------------
int __thiscall CChar::GetFinalDamage(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // [esp+10h] [ebp-10h]
  int Number; // [esp+18h] [ebp-8h]
  int v8; // [esp+1Ch] [ebp-4h]
  int v9; // [esp+1Ch] [ebp-4h]

  Number = a2[15] - this[15];
  if ( a4 )
  {
    if ( (*(int (__thiscall **)(_DWORD *))(*this + 64))(this) || (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
    {
      if ( Number < 0 )
        v5 = -dword_4D8398[abs(Number)];
      else
        v5 = dword_4D8398[Number];
      a3 += v5;
    }
    v8 = a3 - (*(int (__thiscall **)(_DWORD *, _DWORD *))(*this + 136))(this, a2);
    if ( v8 <= 0 )
      return 0;
    v9 = v8 - v8 * (*(int (__thiscall **)(_DWORD *, _DWORD *))(*this + 140))(this, a2) / 100;
  }
  else
  {
    v9 = a3 + Number * abs(Number) / 4;
  }
  if ( CChar::IsBState(a2, 512i64) )
  {
    v9 += v9 / 10;
  }
  else if ( CChar::IsBState(a2, 0x40000000i64) )
  {
    v9 += 7 * v9 / 100;
  }
  return v9;
}

//----- (0043AEB0) --------------------------------------------------------
void __userpurge CMonsterReal::Defense(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2)
{
  CChar::Lock((int)this);
  if ( !this[116] )
  {
    CIOObject::AddRef(a2, ebx0, a3, a4, (volatile int *)a2 + 89);
    (*(void (__thiscall **)(_DWORD *, CIOObject *))(*this + 188))(this, a2);
  }
  CChar::Unlock((int)this);
}

//----- (0043AF00) --------------------------------------------------------
void *__thiscall CMonsterReal::ReviseProperty(_DWORD *this)
{
  void *result; // eax
  _DWORD *v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-4h]

  CChar::ReviseProperty(this);
  v4 = this[19];
  this[21] += 2 * this[17] * this[17] / 10 + 115;
  this[22] += v4 + 2 * v4 * v4 / 10;
  this[68] = CChar::GetMaxHP(this);
  result = (void *)CChar::GetMaxMP(this);
  v3[69] = result;
  return result;
}
// 43AF80: variable 'v3' is possibly undefined

//----- (0043AF90) --------------------------------------------------------
int __stdcall CChar::GetMaxMP(_DWORD *a1)
{
  _DWORD *v1; // ecx

  return v1[29] + v1[22] + v1[53] * v1[22] / 100;
}
// 43AFA1: variable 'v1' is possibly undefined

//----- (0043AFD0) --------------------------------------------------------
int __userpurge CMonsterReal::SetTarget@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2)
{
  int result; // eax

  CMonster::SetTarget((CIOObject **)this, ebx0, a3, a4, a2);
  result = unknown_libname_10((_DWORD *)(this + 488));
  if ( !result )
  {
    if ( a2 )
    {
      *(_DWORD *)(this + 480) = 4;
      *(_DWORD *)(this + 556) = 0;
    }
    else
    {
      result = this;
      *(_DWORD *)(this + 480) = 1;
    }
  }
  return result;
}

//----- (0043B030) --------------------------------------------------------
void __usercall CMonsterReal::UpdateProperty(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, int a3, int a4)
{
  int v7; // [esp+0h] [ebp-14h]
  int v8; // [esp+4h] [ebp-10h]

  if ( a2 == 7 )
  {
    if ( a3 )
    {
      a1[68] += a4;
      if ( CChar::GetMaxHP(a1) >= a1[68] )
        v8 = a1[68];
      else
        v8 = CChar::GetMaxHP(a1);
      a1[68] = v8;
    }
    else
    {
      a1[68] -= a4;
      if ( (int)a1[68] >= 0 )
        v7 = a1[68];
      else
        v7 = 0;
      a1[68] = v7;
    }
    CChar::WriteInSight(ebx0, edi0, esi0, (int)a1, 72, "dbd", a1[7], 7, a1[68]);
  }
}

//----- (0043B130) --------------------------------------------------------
void __usercall CMonsterReal::UpdatePrtyPt(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, int a3, int a4, int a5)
{
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  _DWORD *v12; // [esp+0h] [ebp-50h]
  int v13; // [esp+0h] [ebp-50h]
  int v14; // [esp+4h] [ebp-4Ch]
  int v15; // [esp+8h] [ebp-48h]
  int v16; // [esp+Ch] [ebp-44h]
  int v17; // [esp+1Ch] [ebp-34h]
  int v18; // [esp+24h] [ebp-2Ch]
  int v19; // [esp+2Ch] [ebp-24h]
  int v20; // [esp+2Ch] [ebp-24h]
  int v21; // [esp+2Ch] [ebp-24h]
  int v22; // [esp+30h] [ebp-20h]
  int v23; // [esp+38h] [ebp-18h]
  int v24; // [esp+3Ch] [ebp-14h]
  int v25; // [esp+3Ch] [ebp-14h]
  int v26; // [esp+3Ch] [ebp-14h]
  int v27; // [esp+44h] [ebp-Ch]

  switch ( a2 )
  {
    case 0:
      v27 = CChar::GetStr(a1);
      a1[30] -= 15 * v27 / 54;
      a1[32] -= (11 * v27 - 80) / 30;
      a1[33] -= (8 * v27 - 25) / 15;
      if ( a3 )
        a1[23] += a4;
      else
        a1[23] -= a4;
      v8 = CChar::GetStr(a1);
      a1[30] += 15 * v8 / 54;
      a1[32] += (11 * v8 - 80) / 30;
      a1[33] += (8 * v8 - 25) / 15;
      break;
    case 1:
      v24 = CChar::GetHth(a1);
      if ( a3 )
      {
        a1[21] -= 2 * v24 * v24 / 10 + 115;
        a1[44] -= v24 / 9;
        a1[24] += a4;
        v25 = CChar::GetHth(a1);
        a1[21] += 2 * v25 * v25 / 10 + 115;
        a1[44] += v25 / 9;
        v23 = CChar::GetMaxHP(a1);
        if ( a4 < 0 )
        {
          if ( a1[68] >= v23 )
            v16 = v23;
          else
            v16 = a1[68];
          a1[68] = v16;
        }
      }
      else
      {
        a1[21] -= 2 * v24 * v24 / 10 + 115;
        a1[44] -= v24 / 9;
        a1[24] -= a4;
        v26 = CChar::GetHth(a1);
        a1[21] += 2 * v26 * v26 / 10 + 115;
        a1[44] += v26 / 9;
        v23 = CChar::GetMaxHP(a1);
        if ( a4 > 0 )
        {
          if ( a1[68] >= v23 )
            v15 = v23;
          else
            v15 = a1[68];
          a1[68] = v15;
        }
      }
      CChar::WriteInSight(ebx0, edi0, esi0, (int)a1, 72, "dbd", a1[7], 5, v23);
      break;
    case 2:
      v22 = CChar::GetInt(a1);
      a1[34] -= (7 * v22 - 20) / 12;
      a1[35] -= 7 * v22 / 12;
      a1[40] -= v22 / 9;
      a1[41] -= v22 / 9;
      a1[42] -= v22 / 9;
      if ( a3 )
        a1[25] += a4;
      else
        a1[25] -= a4;
      v9 = CChar::GetInt(a1);
      a1[34] += (7 * v9 - 20) / 12;
      a1[35] += 7 * v9 / 12;
      a1[40] += v9 / 9;
      a1[41] += v9 / 9;
      a1[42] += v9 / 9;
      break;
    case 3:
      v19 = CChar::GetWis(a1);
      if ( a3 )
      {
        a1[22] -= v19 + 2 * v19 * v19 / 10;
        a1[34] -= v19 / 7;
        a1[35] -= 14 * v19 / 45;
        a1[43] -= v19 / 9;
        a1[26] += a4;
        v20 = CChar::GetWis(a1);
        a1[22] += v20 + 2 * v20 * v20 / 10;
        a1[34] += v20 / 7;
        a1[35] += 14 * v20 / 45;
        a1[43] += v20 / 9;
        v18 = CChar::GetMaxMP(v12);
        if ( a4 < 0 )
        {
          if ( a1[69] >= v18 )
            v14 = v18;
          else
            v14 = a1[69];
          a1[69] = v14;
        }
      }
      else
      {
        a1[22] -= v19 + 2 * v19 * v19 / 10;
        a1[34] -= v19 / 7;
        a1[35] -= 14 * v19 / 45;
        a1[43] -= v19 / 9;
        a1[26] -= a4;
        v21 = CChar::GetWis(a1);
        a1[22] += v21 + 2 * v21 * v21 / 10;
        a1[34] += v21 / 7;
        a1[35] += 14 * v21 / 45;
        a1[43] += v21 / 9;
        v18 = CChar::GetMaxMP(v12);
        if ( a4 > 0 )
        {
          if ( a1[69] >= v18 )
            v13 = v18;
          else
            v13 = a1[69];
          a1[69] = v13;
        }
      }
      CChar::WriteInSight(ebx0, edi0, esi0, (int)a1, 72, "dbw", a1[7], 6, v18);
      break;
    case 4:
      v17 = Char::GetDex(a1);
      a1[30] -= v17 / 8;
      a1[31] -= v17 / 3;
      a1[32] -= (v17 - 5) / 11;
      a1[33] -= 18 * v17 / 77;
      if ( a3 )
        a1[27] += a4;
      else
        a1[27] -= a4;
      v10 = Char::GetDex(a1);
      a1[30] += v10 / 8;
      a1[31] += v10 / 3;
      a1[32] += (v10 - 5) / 11;
      a1[33] += 18 * v10 / 77;
      break;
    case 15:
      if ( a3 )
      {
        a1[36] += a4;
        v11 = a5 + a1[37];
      }
      else
      {
        a1[36] -= a4;
        v11 = a1[37] - a5;
      }
      a1[37] = v11;
      break;
    default:
      return;
  }
}
// 43B974: variable 'v12' is possibly undefined

//----- (0043BE20) --------------------------------------------------------
int __thiscall CChar::GetStr(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this[23] + this[16];
  return v2 + this[47] * v2 / 100;
}

//----- (0043BE60) --------------------------------------------------------
int __thiscall CChar::GetHth(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this[24] + this[17];
  return v2 + this[48] * v2 / 100;
}

//----- (0043BEA0) --------------------------------------------------------
int __thiscall CChar::GetInt(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this[25] + this[18];
  return v2 + this[49] * v2 / 100;
}

//----- (0043BEE0) --------------------------------------------------------
int __thiscall CChar::GetWis(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this[26] + this[19];
  return v2 + this[50] * v2 / 100;
}

//----- (0043BF20) --------------------------------------------------------
int __thiscall Char::GetDex(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = this[27] + this[20];
  return v2 + this[51] * v2 / 100;
}

//----- (0043BF60) --------------------------------------------------------
void __usercall CMonsterReal::UpdatePrtyPer(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a1, int a2, int a3, int a4, int a5)
{
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // ecx
  _DWORD *v15; // [esp+0h] [ebp-68h]
  int v16; // [esp+0h] [ebp-68h]
  int v17; // [esp+4h] [ebp-64h]
  int v18; // [esp+8h] [ebp-60h]
  int v19; // [esp+Ch] [ebp-5Ch]
  unsigned int v20; // [esp+18h] [ebp-50h]
  unsigned int v21; // [esp+1Ch] [ebp-4Ch]
  DWORD v22; // [esp+20h] [ebp-48h]
  int v23; // [esp+34h] [ebp-34h]
  int v24; // [esp+3Ch] [ebp-2Ch]
  int v25; // [esp+44h] [ebp-24h]
  int v26; // [esp+44h] [ebp-24h]
  int v27; // [esp+44h] [ebp-24h]
  int v28; // [esp+48h] [ebp-20h]
  int v29; // [esp+50h] [ebp-18h]
  int v30; // [esp+54h] [ebp-14h]
  int v31; // [esp+54h] [ebp-14h]
  int v32; // [esp+54h] [ebp-14h]
  int v33; // [esp+5Ch] [ebp-Ch]

  switch ( a2 )
  {
    case 0:
      v33 = CChar::GetStr(a1);
      a1[30] -= 15 * v33 / 54;
      a1[32] -= (11 * v33 - 80) / 30;
      a1[33] -= (8 * v33 - 25) / 15;
      if ( a3 )
        a1[47] += a4;
      else
        a1[47] -= a4;
      v8 = CChar::GetStr(a1);
      a1[30] += 15 * v8 / 54;
      a1[32] += (11 * v8 - 80) / 30;
      a1[33] += (8 * v8 - 25) / 15;
      break;
    case 1:
      v30 = CChar::GetHth(a1);
      if ( a3 )
      {
        a1[21] -= 2 * v30 * v30 / 10 + 115;
        a1[44] -= v30 / 9;
        a1[48] += a4;
        v31 = CChar::GetHth(a1);
        a1[21] += 2 * v31 * v31 / 10 + 115;
        a1[44] += v31 / 9;
        v29 = CChar::GetMaxHP(a1);
        if ( a4 < 0 )
        {
          if ( a1[68] >= v29 )
            v19 = v29;
          else
            v19 = a1[68];
          a1[68] = v19;
        }
      }
      else
      {
        a1[21] -= 2 * v30 * v30 / 10 + 115;
        a1[44] -= v30 / 9;
        a1[48] -= a4;
        v32 = CChar::GetHth(a1);
        a1[21] += 2 * v32 * v32 / 10 + 115;
        a1[44] += v32 / 9;
        v29 = CChar::GetMaxHP(a1);
        if ( a4 > 0 )
        {
          if ( a1[68] >= v29 )
            v18 = v29;
          else
            v18 = a1[68];
          a1[68] = v18;
        }
      }
      CChar::WriteInSight(ebx0, edi0, esi0, (int)a1, 72, "dbd", a1[7], 5, v29);
      break;
    case 2:
      v28 = CChar::GetInt(a1);
      a1[34] -= (7 * v28 - 20) / 12;
      a1[35] -= 7 * v28 / 12;
      a1[40] -= v28 / 9;
      a1[41] -= v28 / 9;
      a1[42] -= v28 / 9;
      if ( a3 )
        a1[49] += a4;
      else
        a1[49] -= a4;
      v9 = CChar::GetInt(a1);
      a1[34] += (7 * v9 - 20) / 12;
      a1[35] += 7 * v9 / 12;
      a1[40] += v9 / 9;
      a1[41] += v9 / 9;
      a1[42] += v9 / 9;
      break;
    case 3:
      v25 = CChar::GetWis(a1);
      if ( a3 )
      {
        a1[22] -= v25 + 2 * v25 * v25 / 10;
        a1[34] -= v25 / 7;
        a1[35] -= 14 * v25 / 45;
        a1[43] -= v25 / 9;
        a1[50] += a4;
        v26 = CChar::GetWis(a1);
        a1[22] += v26 + 2 * v26 * v26 / 10;
        a1[34] += v26 / 7;
        a1[35] += 14 * v26 / 45;
        a1[43] += v26 / 9;
        v24 = CChar::GetMaxMP(v15);
        if ( a4 < 0 )
        {
          if ( a1[69] >= v24 )
            v17 = v24;
          else
            v17 = a1[69];
          a1[69] = v17;
        }
      }
      else
      {
        a1[22] -= v25 + 2 * v25 * v25 / 10;
        a1[34] -= v25 / 7;
        a1[35] -= 14 * v25 / 45;
        a1[43] -= v25 / 9;
        a1[26] -= a4;
        v27 = CChar::GetWis(a1);
        a1[22] += v27 + 2 * v27 * v27 / 10;
        a1[34] += v27 / 7;
        a1[35] += 14 * v27 / 45;
        a1[43] += v27 / 9;
        v24 = CChar::GetMaxMP(v15);
        if ( a4 > 0 )
        {
          if ( a1[69] >= v24 )
            v16 = v24;
          else
            v16 = a1[69];
          a1[69] = v16;
        }
      }
      CChar::WriteInSight(ebx0, edi0, esi0, (int)a1, 72, "dbw", a1[7], 6, v24);
      break;
    case 4:
      v23 = Char::GetDex(a1);
      a1[30] -= v23 / 8;
      a1[31] -= v23 / 3;
      a1[32] -= (v23 - 5) / 11;
      a1[33] -= 18 * v23 / 77;
      if ( a3 )
        a1[51] += a4;
      else
        a1[51] -= a4;
      v10 = Char::GetDex(a1);
      a1[30] += v10 / 8;
      a1[31] += v10 / 3;
      a1[32] += (v10 - 5) / 11;
      a1[33] += 18 * v10 / 77;
      break;
    case 9:
      if ( a3 )
        v12 = a4 + a1[54];
      else
        v12 = a1[54] - a4;
      a1[54] = v12;
      break;
    case 15:
      if ( a3 )
      {
        a1[60] += a4;
        v11 = a5 + a1[61];
      }
      else
      {
        a1[60] -= a4;
        v11 = a1[61] - a5;
      }
      a1[61] = v11;
      break;
    case 17:
      if ( a3 )
        v14 = a4 + a1[63];
      else
        v14 = a1[63] - a4;
      a1[63] = v14;
      break;
    case 32:
      if ( a3 )
        v13 = a4 + a1[65];
      else
        v13 = a1[65] - a4;
      a1[65] = v13;
      if ( !a1[65] )
      {
        v22 = GetTickCount();
        v21 = (*(int (__thiscall **)(_DWORD *, int))(*a1 + 152))(a1, 1);
        v20 = a1[139] - v22;
        if ( v20 )
        {
          if ( v20 < v21 )
            a1[139] -= v20 * v21 / v21;
        }
      }
      CChar::WriteInSight(ebx0, edi0, esi0, (int)a1, 72, "dbw", a1[7], 32, a1[65]);
      break;
    default:
      return;
  }
}
// 43C7CE: variable 'v15' is possibly undefined

//----- (0043CE00) --------------------------------------------------------
void __userpurge CPlayer::AddMState(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  CChar::AddMState(this, a2, a3);
  CChar::WriteInSight(ebx0, edi0, a4, (int)this, 71, "dI", this[7], this[72], this[73]);
}

//----- (0043CE50) --------------------------------------------------------
void __userpurge CPlayer::SubMState(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  CChar::SubMState(this, a2, a3);
  CChar::WriteInSight(ebx0, edi0, a4, (int)this, 71, "dI", this[7], this[72], this[73]);
}

//----- (0043CEA0) --------------------------------------------------------
BOOL __thiscall CMonsterReal::SetProperty(_DWORD *this, _DWORD *a2)
{
  CMonster::SetProperty((int)this, (int)a2);
  memcpy(this + 16, a2 + 34, 0x1Cu);
  memcpy(this + 23, a2 + 41, 0x60u);
  this[78] = a2[30];
  memcpy(this + 136, a2 + 31, 8u);
  (*(void (__thiscall **)(_DWORD *))(*this + 84))(this);
  CFindPath::Init(this + 153, (int)this, this[80], this[78] * this[78]);
  return sub_480A80(this + 122, (int)this);
}

//----- (0043CF70) --------------------------------------------------------
int __thiscall CFindPath::Init(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax

  *this = a2;
  result = a3;
  this[1] = a3;
  this[9] = a4;
  return result;
}

//----- (0043CFA0) --------------------------------------------------------
void __userpurge CMonsterReal::Add(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  CMonster::Add((int)this, ebx0, a3, a4, a2);
  InterlockedIncrement(&dword_4E1810);
  if ( a2 )
  {
    CIOObject::AddRef((volatile int *)a2, ebx0, a3, a4);
    this[121] = a2;
  }
}

//----- (0043CFE0) --------------------------------------------------------
void __usercall CMonsterReal::Remove(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  CMonster::Remove(this, a2, a3, a4);
  InterlockedDecrement(&dword_4E1810);
  CRWLock::ReadLock((CRWLock *)&unk_4E187C);
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1870,
    v8,
    this + 111);
  v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, v7);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v8,
         v4) )
  {
    v5 = sub_420250(v8);
    InterlockedDecrement((volatile LONG *)(*(_DWORD *)(v5 + 4) + 48));
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E187C, a2, a3, a4);
}

//----- (0043D060) --------------------------------------------------------
void __thiscall CMonsterReal::AI(int *this)
{
  if ( !CMonster::IsRemoved((int)this) && !CChar::IsGState(this, 1) )
  {
    CChar::Lock((int)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    switch ( this[120] )
    {
      case 1:
      case 2:
      case 3:
      case 7:
        (*(void (__thiscall **)(int *))(*this + 248))(this);
        break;
      case 4:
        (*(void (__thiscall **)(int *))(*this + 244))(this);
        break;
      default:
        break;
    }
    CChar::Unlock((int)this);
  }
}

//----- (0043D140) --------------------------------------------------------
void __usercall CMonsterReal::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-8h]
  DWORD v6; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::RefreshBuff(this, a2, a3, a4);
    CChar::Lock(this);
    v6 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 1) && v6 >= *(_DWORD *)(this + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else
    {
      v5 = CChar::GetMaxHP((_DWORD *)this);
      if ( *(_DWORD *)(this + 272) < v5 && v6 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility(this, a2, a3, a4);
      }
      CChar::Unlock(this);
    }
  }
}

//----- (0043D210) --------------------------------------------------------
CIOObject *__userpurge CMonsterReal::AddHostility@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD esi0@<esi>, CIOObject *a2, CItem *_Val2, int a4)
{
  CIOObject *result; // eax
  void *v8; // eax
  std::pair<char const * const,CItem *> *v9; // eax
  _DWORD *v10; // [esp+0h] [ebp-34h]
  int v11; // [esp+4h] [ebp-30h]
  char v13[8]; // [esp+14h] [ebp-20h] BYREF
  char v14[4]; // [esp+1Ch] [ebp-18h] BYREF
  char v15[8]; // [esp+20h] [ebp-14h] BYREF
  char *_Val1; // [esp+28h] [ebp-Ch] BYREF
  CItem *v17; // [esp+2Ch] [ebp-8h]
  char v18[4]; // [esp+30h] [ebp-4h] BYREF

  result = (CIOObject *)(*(int (__thiscall **)(CIOObject *))(*(_DWORD *)a2 + 60))(a2);
  if ( result )
  {
    _Val1 = (char *)a2;
    if ( CChar::IsMState(a2, 0x4000i64) )
      a4 += *((_DWORD *)_Val1 + 67);
    if ( a4 )
    {
      if ( a4 <= -100 )
        v11 = -100;
      else
        v11 = a4;
      _Val2 = (CItem *)((char *)_Val2 + v11 * (int)_Val2 / 100);
    }
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 143), ebx0, a3, esi0);
    this[151] += _Val2;
    sub_446130(this + 140, v18, &_Val1);
    v8 = sub_430C20(this + 140, v14);
    if ( (unsigned __int8)unknown_libname_16(v8) )
    {
      CIOObject::AddRef((volatile int *)_Val1, ebx0, a3, esi0);
      std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
        (std::pair<char const * const,CItem *> *)v13,
        (const char *const *)&_Val1,
        &_Val2);
      sub_48D6D0(
        this + 140,
        (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v15,
        v9);
      if ( !v15[4] )
        CIOObject::Release((volatile int *)_Val1, ebx0, a3, esi0);
      v17 = _Val2;
    }
    else
    {
      v10 = (_DWORD *)(sub_420250(v18) + 4);
      *v10 += _Val2;
      v17 = *(CItem **)(sub_420250(v18) + 4);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 143), ebx0, a3, esi0);
    if ( this[116] )
    {
      result = (CIOObject *)this[116];
      if ( result == a2 )
      {
        result = (CIOObject *)this;
        this[152] = v17;
      }
      else if ( this[152] < (int)v17 )
      {
        CIOObject::AddRef(a2, ebx0, a3, esi0, (volatile int *)a2 + 89);
        result = (CIOObject *)(*(int (__thiscall **)(_DWORD *, CIOObject *))(*this + 188))(this, a2);
        this[152] = v17;
      }
    }
    else
    {
      CIOObject::AddRef(a2, ebx0, a3, esi0, (volatile int *)a2 + 89);
      (*(void (__thiscall **)(_DWORD *, CIOObject *))(*this + 188))(this, a2);
      result = (CIOObject *)this;
      this[152] = v17;
    }
  }
  return result;
}
// 43D310: variable 'v9' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0043D410) --------------------------------------------------------
void __userpurge CMonsterReal::RemoveHostility(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, volatile int *a2)
{
  volatile int *v6; // [esp+4h] [ebp-4h] BYREF

  v6 = a2;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 572), ebx0, a3, a4);
  if ( sub_445CD0(
         (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 560),
         (int *)&v6) )
  {
    if ( v6 == *(volatile int **)(this + 464) )
      *(_DWORD *)(this + 608) = 0;
    CIOObject::Release(v6, ebx0, a3, a4);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 572), ebx0, a3, a4);
}

//----- (0043D480) --------------------------------------------------------
int __thiscall CMonsterReal::GetMSpeed(int *this, int a2)
{
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-4h]

  v4 = *(_DWORD *)(this[110] + 4 * a2 + 260);
  if ( !this[65] )
    return *(_DWORD *)(this[110] + 4 * a2 + 260);
  if ( this[65] <= 0 )
    v3 = v4 * (abs(this[65]) + 100) / 100;
  else
    v3 = 100 * v4 / (this[65] + 100);
  return v3;
}

//----- (0043D510) --------------------------------------------------------
void __usercall CMonsterReal::Attack(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // eax
  int v6; // eax
  int v7; // [esp-Ch] [ebp-64h]
  int v8; // [esp-8h] [ebp-60h]
  int v9; // [esp-4h] [ebp-5Ch]
  int v11; // [esp+30h] [ebp-28h] BYREF
  int v12; // [esp+34h] [ebp-24h] BYREF
  CIOObject *v13; // [esp+38h] [ebp-20h]
  int v14; // [esp+3Ch] [ebp-1Ch] BYREF
  int v15; // [esp+40h] [ebp-18h]
  int v16; // [esp+44h] [ebp-14h]
  __int64 v17; // [esp+48h] [ebp-10h]
  DWORD v18; // [esp+54h] [ebp-4h]

  if ( !CChar::IsMState(this, 268435712i64) )
  {
    v18 = GetTickCount();
    if ( v18 >= this[117] )
    {
      v17 = sub_43D870(this + 83, (_DWORD *)(this[116] + 332));
      if ( this[79] == *(_DWORD *)(this[116] + 316) && v17 <= this[137] * this[137] )
      {
        if ( v17 <= this[78] * this[78] )
        {
          if ( this[116] == this[121] )
          {
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
            this[120] = 1;
          }
          else
          {
            this[117] = v18 + CChar::GetASpeed(this);
            this[139] = this[117];
            CChar::SetDirection(this, *(_DWORD *)(this[116] + 332) - this[83], *(_DWORD *)(this[116] + 336) - this[84]);
            v14 = 0;
            v11 = 0;
            v16 = 0;
            v15 = 0;
            v13 = (CIOObject *)this[116];
            CIOObject::AddRef(v13, a2, a3, a4, (volatile int *)v13 + 88);
            v12 = (*(int (__thiscall **)(_DWORD *, CIOObject *))(*this + 168))(this, v13);
            v15 = (*(int (__thiscall **)(CIOObject *, _DWORD *))(*(_DWORD *)v13 + 148))(v13, this);
            if ( !v15 && (*(int (__thiscall **)(CIOObject *))(*(_DWORD *)v13 + 60))(v13) )
            {
              if ( CChar::IsBState(v13, 0x8000i64) ? CChar::CheckHit((int)this, v13, -5) : CChar::CheckHit(
                                                                                             (int)this,
                                                                                             v13,
                                                                                             0) )
              {
                CChar::Unlock((int)this);
                v5 = CChar::GetAttack(this);
                v16 = (*(int (__thiscall **)(CIOObject *, _DWORD *, int, int *, int *, int *, _DWORD))(*(_DWORD *)v13 + 72))(
                        v13,
                        this,
                        v5,
                        &v14,
                        &v11,
                        &v12,
                        0);
                CChar::Lock((int)this);
              }
            }
            if ( !v16 )
              (*(void (__thiscall **)(CIOObject *, _DWORD *))(*(_DWORD *)v13 + 80))(v13, this);
            v9 = v16 | (2 * v11) | (4 * v15);
            v8 = v12;
            v7 = v14;
            v6 = std___Mpunct_wchar_t___do_frac_digits(v13);
            CChar::WriteInSight(a2, a3, a4, (int)this, 62, "ddwwb", this[7], v6, v7, v8, v9);
            CIOObject::Release(v13, a2, a3, a4, (volatile int *)v13 + 88);
          }
        }
        else if ( !CChar::IsMState(this, 512i64) )
        {
          this[163] = 1;
          this[120] = 2;
        }
      }
      else
      {
        (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
        (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
      }
    }
  }
}

//----- (0043D870) --------------------------------------------------------
__int64 __cdecl sub_43D870(_DWORD *a1, _DWORD *a2)
{
  __int64 v3; // [esp-10h] [ebp-28h]

  v3 = a1[1] - a2[1];
  return v3 * v3 + (*a1 - *a2) * (__int64)(*a1 - *a2);
}

//----- (0043D8E0) --------------------------------------------------------
int __thiscall CChar::GetASpeed(_DWORD *this)
{
  int v2; // [esp+0h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-4h]

  v3 = this[39];
  if ( !v3 )
    return 0x7FFFFFFF;
  if ( !this[63] )
    return this[39];
  if ( (int)this[63] <= 0 )
    v2 = v3 * (abs(this[63]) + 100) / 100;
  else
    v2 = 100 * v3 / (this[63] + 100);
  return v2;
}

//----- (0043D970) --------------------------------------------------------
int __thiscall CChar::GetAttack(void *this)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-Ch]

  v3 = CChar::GetMaxAttack(this);
  v1 = CChar::GetMinAttack(this);
  return RandomBetween(v1, v3);
}

//----- (0043D9A0) --------------------------------------------------------
int __thiscall CChar::GetMinAttack(_DWORD *this)
{
  return this[32] + this[56] * this[32] / 100;
}

//----- (0043D9D0) --------------------------------------------------------
int __thiscall CChar::GetMaxAttack(_DWORD *this)
{
  return this[33] + this[57] * this[33] / 100;
}

//----- (0043DA00) --------------------------------------------------------
BOOL __thiscall CChar::CheckHit(int this, _DWORD *a2, int a3)
{
  int v4; // esi
  int v5; // [esp+4h] [ebp-30h]
  int v6; // [esp+18h] [ebp-1Ch]
  int v8; // [esp+28h] [ebp-Ch]
  int Number; // [esp+2Ch] [ebp-8h]

  if ( CChar::IsMState((_QWORD *)this, 0x2000000i64) )
    return 1;
  Number = *(_DWORD *)(this + 60) - a2[15];
  if ( Number < 0 )
    v6 = -dword_4D8130[abs(Number)];
  else
    v6 = dword_4D8130[Number];
  v4 = CChar::GetHit((_DWORD *)this);
  v8 = a3 + v6 + v4 - CChar::GetDodge(a2);
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
  {
    if ( CChar::IsBState((_QWORD *)this, 0x4000i64) )
    {
      v8 += 10;
    }
    else if ( CChar::IsBState((_QWORD *)this, 0x20000000i64) )
    {
      v8 += 5;
    }
  }
  if ( v8 <= 41 )
  {
    if ( v8 < -41 )
      v8 = -41;
  }
  else
  {
    v8 = 41;
  }
  if ( v8 < 0 )
    v5 = 100 - dword_4D82C8[abs(v8)];
  else
    v5 = dword_4D82C8[v8];
  return v5 >= RandomBetween(1, 100);
}

//----- (0043DB60) --------------------------------------------------------
int __thiscall CChar::GetHit(_DWORD *this)
{
  return this[30] + this[54] * this[30] / 100;
}

//----- (0043DB90) --------------------------------------------------------
int __thiscall CChar::GetDodge(_DWORD *this)
{
  return this[31] + this[55] * this[31] / 100;
}

//----- (0043DBC0) --------------------------------------------------------
signed int __usercall CMonsterReal::Move@<eax>(signed int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  signed int result; // eax
  unsigned int v5; // [esp+8h] [ebp-64h]
  int v6; // [esp+18h] [ebp-54h]
  int v7; // [esp+1Ch] [ebp-50h]
  __int64 v8; // [esp+20h] [ebp-4Ch]
  int v10[2]; // [esp+2Ch] [ebp-40h] BYREF
  __int64 v11; // [esp+34h] [ebp-38h]
  int v12; // [esp+40h] [ebp-2Ch] BYREF
  int v13[2]; // [esp+44h] [ebp-28h] BYREF
  __int64 v14; // [esp+4Ch] [ebp-20h]
  int v15; // [esp+58h] [ebp-14h] BYREF
  int v16; // [esp+5Ch] [ebp-10h]
  int Number[2]; // [esp+60h] [ebp-Ch] BYREF
  unsigned int v18; // [esp+68h] [ebp-4h]

  v8 = CChar::IsMState((_QWORD *)this, 268436224i64);
  result = HIDWORD(v8) | v8;
  if ( !v8 )
  {
    result = GetTickCount();
    v18 = result;
    v7 = *(_DWORD *)(this + 480);
    switch ( v7 )
    {
      case 1:
        result = this;
        if ( v18 >= *(_DWORD *)(this + 556) )
        {
          if ( CMonsterReal::GetRandomPt((void *)this, a2, a3, a4, Number)
            && (++*(_DWORD *)(this + 552),
                *(_DWORD *)(this + 656) = (*(_DWORD *)(this + 552) & 3) == 0,
                sub_4925C0(
                  *(char **)(this + 320),
                  a2,
                  a3,
                  a4,
                  (Concurrency::details::_CancellationTokenRegistration *)this,
                  Number[0],
                  Number[1],
                  *(_DWORD *)(this + 656),
                  0)) )
          {
            if ( *(_DWORD *)(this + 656) )
              v6 = 20000;
            else
              v6 = (*(int (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 152))(this, 0);
            *(_DWORD *)(this + 556) = v6 + v18;
            result = this;
            if ( *(_DWORD *)(this + 656) )
            {
              if ( *(_DWORD *)(this + 476) )
              {
                result = (signed int)CMonsterReal::ScanSight((int *)this, a2, a3, a4);
                v16 = result;
                if ( result )
                {
                  *(_DWORD *)(this + 656) = 0;
                  result = (*(int (__thiscall **)(signed int, int))(*(_DWORD *)this + 188))(this, v16);
                }
              }
            }
          }
          else
          {
            *(_DWORD *)(this + 656) = 0;
            result = this;
            --*(_DWORD *)(this + 552);
          }
        }
        break;
      case 2:
        if ( !dword_4E1A64 )
        {
          result = v18;
          dword_4E1A64 = v18;
        }
        if ( v18 >= *(_DWORD *)(this + 556) )
        {
          v14 = sub_43D870((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 464) + 332));
          if ( *(_DWORD *)(this + 316) == *(_DWORD *)(*(_DWORD *)(this + 464) + 316)
            && v14 <= *(_DWORD *)(this + 548) * *(_DWORD *)(this + 548) )
          {
            result = *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312);
            v5 = result;
            if ( SHIDWORD(v14) > result >> 31 || SHIDWORD(v14) >= result >> 31 && (result = v14, (unsigned int)v14 > v5) )
            {
              v15 = (*(int (__thiscall **)(signed int, int))(*(_DWORD *)this + 152))(this, 1);
              if ( CMonsterReal::GetChasePt(this, a2, a3, a4, v13, (unsigned int *)&v15)
                && sub_4925C0(
                     *(char **)(this + 320),
                     a2,
                     a3,
                     a4,
                     (Concurrency::details::_CancellationTokenRegistration *)this,
                     v13[0],
                     v13[1],
                     0,
                     1) )
              {
                *(_DWORD *)(this + 556) = v15 + v18;
                result = this;
                *(_DWORD *)(this + 468) = *(_DWORD *)(this + 556);
              }
              else
              {
                sub_4925C0(
                  *(char **)(this + 320),
                  a2,
                  a3,
                  a4,
                  (Concurrency::details::_CancellationTokenRegistration *)this,
                  0,
                  0,
                  1,
                  0);
                (*(void (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
                result = (*(int (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
              }
            }
            else
            {
              *(_DWORD *)(this + 480) = 4;
              dword_4E1A64 = 0;
            }
          }
          else
          {
            (*(void (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
            result = (*(int (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
            dword_4E1A64 = 0;
          }
        }
        break;
      case 7:
        if ( *(_DWORD *)(this + 512) == 290 )
        {
          if ( v18 >= *(_DWORD *)(this + 556) )
          {
            v11 = sub_43D870((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 484) + 332));
            if ( v11 > *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312) )
            {
              (*(void (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 188))(this, *(_DWORD *)(this + 484));
              v12 = (*(int (__thiscall **)(signed int, int))(*(_DWORD *)this + 152))(this, 1);
              if ( !CMonsterReal::GetChasePt(this, a2, a3, a4, v10, (unsigned int *)&v12)
                || (result = sub_4925C0(
                               *(char **)(this + 320),
                               a2,
                               a3,
                               a4,
                               (Concurrency::details::_CancellationTokenRegistration *)this,
                               v10[0],
                               v10[1],
                               0,
                               1)) == 0 )
              {
                (*(void (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
                (*(void (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
                result = this;
                *(_DWORD *)(this + 480) = 1;
              }
            }
            else
            {
              (*(void (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
              (*(void (__thiscall **)(signed int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
              result = this;
              *(_DWORD *)(this + 480) = 1;
            }
          }
        }
        else
        {
          result = this;
          *(_DWORD *)(this + 480) = 1;
        }
        break;
    }
  }
  return result;
}
// 4E1A64: using guessed type int dword_4E1A64;

//----- (0043E070) --------------------------------------------------------
int __userpurge CMonsterReal::GetRandomPt@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int *a2)
{
  int v5; // ecx
  int result; // eax
  int v7; // [esp+0h] [ebp-24h]
  int v8; // [esp+4h] [ebp-20h]
  int v9; // [esp+8h] [ebp-1Ch]
  int v11; // [esp+10h] [ebp-14h]
  int v12; // [esp+18h] [ebp-Ch]
  int Number; // [esp+1Ch] [ebp-8h]
  int v14; // [esp+20h] [ebp-4h]

  Number = RandomBetween(0, 64) - 32;
  v14 = RandomBetween(0, 64) - 32;
  if ( !Number && !v14 )
    goto LABEL_17;
  v11 = abs(Number);
  v12 = abs(v14);
  v9 = v11 < v12 ? 32 * v11 / v12 : 32 * v12 / v11;
  if ( v11 >= v12 )
  {
    v5 = dword_4D6E64[2 * v9];
    *a2 = dword_4D6E60[2 * v9];
    a2[1] = v5;
  }
  else
  {
    *a2 = dword_4D6E64[2 * v9];
    a2[1] = dword_4D6E60[2 * v9];
  }
  v8 = Number < 0 ? -*a2 : *a2;
  *a2 = v8;
  v7 = v14 < 0 ? -a2[1] : a2[1];
  a2[1] = v7;
  if ( CSMap::IsMoveTile(*((_DWORD **)this + 80), ebx0, a3, a4, (int)this, (int)this + 332, *a2, a2[1], 0x20000) )
    result = 1;
  else
LABEL_17:
    result = 0;
  return result;
}
// 4D6E60: using guessed type int dword_4D6E60[];

//----- (0043E1C0) --------------------------------------------------------
int __userpurge CSMap::IsMoveTile@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3, int Number, int a5, int a6)
{
  _DWORD *v10; // eax
  int v11; // [esp-4h] [ebp-38h]
  int v12; // [esp+0h] [ebp-34h]
  int v13; // [esp+4h] [ebp-30h]
  int v14; // [esp+8h] [ebp-2Ch]
  int v16; // [esp+10h] [ebp-24h] BYREF
  int v17; // [esp+14h] [ebp-20h]
  int i; // [esp+18h] [ebp-1Ch]
  int v19; // [esp+1Ch] [ebp-18h]
  int v20; // [esp+20h] [ebp-14h]
  int v21; // [esp+24h] [ebp-10h]
  int v22; // [esp+28h] [ebp-Ch]
  BOOL v23; // [esp+2Ch] [ebp-8h]
  int v24; // [esp+30h] [ebp-4h]

  v19 = abs(Number);
  v24 = abs(a5);
  if ( v19 < v24 )
    v14 = v24;
  else
    v14 = v19;
  v22 = v14;
  v23 = 1;
  for ( i = 8; v23 && i <= 32; i += 8 )
  {
    v23 = i < v22;
    if ( i >= v22 )
      v13 = Number;
    else
      v13 = Number * i / v22;
    v20 = v13 + *(_DWORD *)a3;
    if ( v23 )
      v12 = a5 * i / v22;
    else
      v12 = a5;
    v21 = v12 + *(_DWORD *)(a3 + 4);
    v16 = v20 >> 5;
    v17 = v21 >> 5;
    if ( v20 >> 5 < 0 || v16 >> 8 >= 64 || v17 < 0 || v17 >> 8 >= 64 )
      return 0;
    v11 = ((v20 >> 3) & 3) + 4 * ((v21 >> 3) & 3);
    v10 = (_DWORD *)CSMap::_GetCellMap(this, &v16);
    if ( !CellMap::IsMoveTile(
            v10,
            ebx0,
            edi0,
            a4,
            (Concurrency::details::_CancellationTokenRegistration *)a2,
            &v16,
            a6,
            v11) )
      return 0;
  }
  return 1;
}

//----- (0043E320) --------------------------------------------------------
int __userpurge CellMap::IsMoveTile@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, Concurrency::details::_CancellationTokenRegistration *a2, _DWORD *a3, int a4, int a5)
{
  CRWLock *v10; // [esp+4h] [ebp-14h]
  int v11[2]; // [esp+8h] [ebp-10h] BYREF
  int v12; // [esp+10h] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+14h] [ebp-4h]

  if ( !this )
    return 0;
  v11[0] = (unsigned __int8)*a3;
  v11[1] = (unsigned __int8)a3[1];
  v12 = CCellMap::GetTile(this, v11);
  if ( (*(_DWORD *)(v12 + 4) & (a4 | (1 << a5))) != 0 )
    return 0;
  v10 = (CRWLock *)CCellMap::GetLock(this, v11);
  CRWLock::ReadLock(v10);
  for ( i = *(Concurrency::details::_CancellationTokenRegistration **)v12;
        i;
        i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
  {
    if ( *((_DWORD *)i + 4) == -6 )
    {
      *(_DWORD *)v12 = 0;
      ELOG("CSellMap::IsMoveTile %p %p\n", (char)i);
      EBREAK(ebx0, edi0, esi0);
      return 0;
    }
    if ( a2 != i
      && (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, int))(*(_DWORD *)i + 56))(i, a5) )
    {
      CRWLock::ReadUnlock(v10, ebx0, edi0, esi0);
      return 0;
    }
  }
  CRWLock::ReadUnlock(v10, ebx0, edi0, esi0);
  return 1;
}

//----- (0043E440) --------------------------------------------------------
int __thiscall CCellMap::GetLock(_DWORD *this, int *a2)
{
  return this[3] + 24 * (16 * (a2[1] >> 4) + (*a2 >> 4));
}

//----- (0043E470) --------------------------------------------------------
int __userpurge CMonsterReal::GetChasePt@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int *a2, unsigned int *a3)
{
  int v6; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  int v10; // [esp+4h] [ebp-34h]
  int v11; // [esp+8h] [ebp-30h]
  int v12; // [esp+Ch] [ebp-2Ch]
  int Number; // [esp+1Ch] [ebp-1Ch]
  int v15; // [esp+20h] [ebp-18h]
  unsigned int v16; // [esp+24h] [ebp-14h]
  int v17; // [esp+28h] [ebp-10h]
  int v18; // [esp+30h] [ebp-8h]
  int v19; // [esp+34h] [ebp-4h]

  if ( *(_DWORD *)(this + 652) )
  {
    CFindPath::FreeNode((_DWORD *)(this + 612));
    *(_DWORD *)(this + 652) = 0;
  }
  if ( !CFindPath::IsGoal((_DWORD *)(this + 612)) )
  {
    if ( CFindPath::SetNextPath((_DWORD *)(this + 612)) )
    {
      v9 = (_DWORD *)CFindPath::GetPixel((_DWORD *)(this + 612));
      *a2 = *v9 - *(_DWORD *)(this + 332);
      a2[1] = v9[1] - *(_DWORD *)(this + 336);
      if ( *a2 && a2[1] )
        *a3 = 14 * *a3 / 0xA;
      return 1;
    }
    CFindPath::FreeNode((_DWORD *)(this + 612));
  }
  v16 = *a3;
  v17 = *(_DWORD *)(this + 312) + 32;
  Number = *(_DWORD *)(*(_DWORD *)(this + 464) + 332) - *(_DWORD *)(this + 332);
  v15 = abs(Number);
  v18 = *(_DWORD *)(*(_DWORD *)(this + 464) + 336) - *(_DWORD *)(this + 336);
  v19 = abs(v18);
  if ( v15 < v19 )
    v12 = 32 * v15 / v19;
  else
    v12 = 32 * v19 / v15;
  if ( v18 * v18 + Number * Number <= v17 * v17 )
  {
    if ( v15 >= v19 )
    {
      *a2 = v15 - *(_DWORD *)(this + 312) * dword_4D6E60[2 * v12] / 32;
      a2[1] = v19 - *(_DWORD *)(this + 312) * dword_4D6E64[2 * v12] / 32;
      a4 = v12;
      *a3 = *a2 * v16 / dword_4D6E60[2 * v12];
    }
    else
    {
      *a2 = v15 - *(_DWORD *)(this + 312) * dword_4D6E64[2 * v12] / 32;
      a2[1] = v19 - *(_DWORD *)(this + 312) * dword_4D6E60[2 * v12] / 32;
      a4 = v12;
      *a3 = a2[1] * v16 / dword_4D6E60[2 * v12];
    }
  }
  else if ( v15 >= v19 )
  {
    v6 = dword_4D6E64[2 * v12];
    *a2 = dword_4D6E60[2 * v12];
    a2[1] = v6;
  }
  else
  {
    *a2 = dword_4D6E64[2 * v12];
    a2[1] = dword_4D6E60[2 * v12];
  }
  if ( Number < 0 )
    v11 = -*a2;
  else
    v11 = *a2;
  *a2 = v11;
  if ( v18 < 0 )
    v10 = -a2[1];
  else
    v10 = a2[1];
  a2[1] = v10;
  if ( !CSMap::IsMoveTile(*(_DWORD **)(this + 320), ebx0, edi0, a4, this, this + 332, *a2, a2[1], 0x20000) )
  {
    if ( !CFindPath::FindPath((void *)(this + 612), (int *)(this + 332), (int *)(*(_DWORD *)(this + 464) + 332)) )
      return 0;
    v8 = (_DWORD *)CFindPath::GetPixel((_DWORD *)(this + 612));
    *a2 = *v8 - *(_DWORD *)(this + 332);
    a2[1] = v8[1] - *(_DWORD *)(this + 336);
    if ( *a2 )
    {
      if ( a2[1] )
        *a3 = 14 * v16 / 0xA;
    }
  }
  return 1;
}
// 4D6E60: using guessed type int dword_4D6E60[];

//----- (0043E840) --------------------------------------------------------
BOOL __thiscall CFindPath::IsGoal(_DWORD *this)
{
  return this[4] == (_DWORD)&unk_4E0908;
}

//----- (0043E860) --------------------------------------------------------
int __thiscall CFindPath::GetPixel(_DWORD *this)
{
  return this[4] + 20;
}

//----- (0043E880) --------------------------------------------------------
int __thiscall CFindPath::SetNextPath(_DWORD *this)
{
  this[4] = *(_DWORD *)this[4];
  if ( this[4] )
    return 1;
  this[4] = &unk_4E0908;
  return 0;
}

//----- (0043E8C0) --------------------------------------------------------
Concurrency::details::_CancellationTokenRegistration *__usercall CMonsterReal::ScanSight@<eax>(int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  return sub_493650((char *)this[80], a2, a3, a4, this + 81, this[136] >> 5);
}

//----- (0043E8F0) --------------------------------------------------------
void __usercall CMonsterReal::ManageBuff(_QWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( CChar::IsMState(this, 512i64) )
    CChar::CancelBuff((int)this, a2, a3, a4, 8);
  if ( CChar::IsMState(this, 0x10000000i64) )
    CChar::CancelBuff((int)this, a2, a3, a4, 26);
}

//----- (0043E950) --------------------------------------------------------
int __userpurge CMonsterReal::ApplyDamage@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int *a5, int a6, int *a7, int a8)
{
  int result; // eax
  int v12; // [esp+0h] [ebp-1Ch]
  int v13; // [esp+4h] [ebp-18h]
  int v14; // [esp+10h] [ebp-Ch]

  if ( CChar::IsNormal(this) )
  {
    if ( a8 )
      v14 = (*(int (__thiscall **)(int))(*(_DWORD *)a8 + 28))(a8);
    else
      v14 = 0;
    if ( CChar::IsMState((_QWORD *)this, 0x1000000i64) )
      *a5 = a3;
    else
      *a5 = a4 + CChar::GetFatalDamage(a2, a4, (_DWORD *)a6, v14);
    if ( *a5 >= *(_DWORD *)(this + 272) )
      v13 = *(_DWORD *)(this + 272);
    else
      v13 = *a5;
    *a5 = v13;
    *(_DWORD *)(this + 272) -= *a5;
    if ( *a7 )
    {
      if ( *(int *)(this + 272) <= 0 )
      {
        *a7 = 0;
      }
      else
      {
        if ( *a7 >= *(_DWORD *)(this + 272) )
          v12 = *(_DWORD *)(this + 272);
        else
          v12 = *a7;
        *a7 = v12;
        *(_DWORD *)(this + 272) -= *a7;
      }
    }
    CMonsterReal::AfterDamage((_DWORD *)this, ebx0, edi0, esi0, (_DWORD *)a2, a4, *a7 + *a5);
    result = 1;
  }
  else
  {
    *a7 = 0;
    *a5 = 0;
    result = 0;
  }
  return result;
}

//----- (0043EAC0) --------------------------------------------------------
int __thiscall CChar::GetFatalDamage(int this, int a2, _DWORD *a3, int a4)
{
  int v4; // esi

  v4 = a4 + *(_DWORD *)(this + 256);
  if ( v4 < RandomBetween(1, 100) && !CChar::IsMState((_QWORD *)this, 0x8000000i64) )
    return 0;
  *a3 = 1;
  return a2 * (2 * *(_DWORD *)(this + 180) + 50) / 100;
}

//----- (0043EB40) --------------------------------------------------------
int __userpurge CMonsterReal::AfterDamage@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int a4)
{
  __int64 v7; // rax

  CChar::SetReverseDirection(this, a2[87]);
  this[118] = GetTickCount() + 20000;
  this[164] = 0;
  if ( !CChar::IsGState(a2, 512) && sub_44FD40(this[15], a2[15]) >= 3 )
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 88))(a2, 35, 1, a4 / 10);
  v7 = CChar::IsBState(a2, 0x20000i64);
  if ( v7 )
  {
    LODWORD(v7) = RandomBetween(1, 100);
    if ( (int)v7 <= 10 )
    {
      CChar::UpdateBuff((int)a2, ebx0, edi0, esi0, 59);
      LODWORD(v7) = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 88))(a2, 7, 1, a3);
    }
  }
  return v7;
}

//----- (0043EC20) --------------------------------------------------------
void __userpurge CMonsterReal::AllotTransformExp(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  volatile int *v7; // [esp+4h] [ebp-8h]
  volatile int *v8; // [esp+8h] [ebp-4h]

  if ( a2 )
  {
    v8 = (volatile int *)CParty::FindParty(a3);
    if ( v8 )
    {
      CParty::AllotTransformExp((int)v8, this[15], this + 83);
      CIOObject::Release(v8, ebx0, edi0, a4);
    }
  }
  else
  {
    v7 = (volatile int *)sub_450810(a3);
    if ( v7 )
    {
      if ( sub_44FD40(this[15], *((_DWORD *)v7 + 15)) >= 3 )
        (*(void (__thiscall **)(volatile int *, _DWORD))(*v7 + 188))(v7, 0);
      CIOObject::Release((CIOObject *)v7, ebx0, edi0, a4, v7 + 88);
    }
  }
}

//----- (0043ECC0) --------------------------------------------------------
int __userpurge CMonsterReal::AllotExp@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int *a3, int *a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  void *v8; // eax
  std::pair<char const * const,CItem *> *v9; // eax
  unsigned __int64 v10; // rax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  float v13; // [esp+0h] [ebp-B0h]
  int v14; // [esp+2Ch] [ebp-84h]
  int v15; // [esp+30h] [ebp-80h]
  float v16; // [esp+34h] [ebp-7Ch]
  _DWORD *v17; // [esp+38h] [ebp-78h]
  char v19[4]; // [esp+40h] [ebp-70h] BYREF
  char v20[4]; // [esp+44h] [ebp-6Ch] BYREF
  char v21[8]; // [esp+48h] [ebp-68h] BYREF
  char v22[8]; // [esp+50h] [ebp-60h] BYREF
  char v23[4]; // [esp+58h] [ebp-58h] BYREF
  char v24[4]; // [esp+5Ch] [ebp-54h] BYREF
  char v25[4]; // [esp+60h] [ebp-50h] BYREF
  int v26; // [esp+64h] [ebp-4Ch] BYREF
  volatile int *v27; // [esp+68h] [ebp-48h]
  char v28[4]; // [esp+6Ch] [ebp-44h] BYREF
  int v29; // [esp+70h] [ebp-40h]
  int Number; // [esp+74h] [ebp-3Ch]
  CItem *_Val2; // [esp+78h] [ebp-38h] BYREF
  char v32[4]; // [esp+7Ch] [ebp-34h] BYREF
  int v33; // [esp+80h] [ebp-30h]
  _QWORD *v34; // [esp+84h] [ebp-2Ch]
  int v35; // [esp+88h] [ebp-28h]
  char *_Val1; // [esp+8Ch] [ebp-24h] BYREF
  char v37[4]; // [esp+90h] [ebp-20h] BYREF
  int v38[3]; // [esp+94h] [ebp-1Ch] BYREF
  int v39; // [esp+A0h] [ebp-10h]
  int v40; // [esp+A4h] [ebp-Ch]
  int v41; // [esp+A8h] [ebp-8h]
  int v42; // [esp+ACh] [ebp-4h]

  v42 = 0;
  v41 = 0;
  v40 = *(_DWORD *)(*(_DWORD *)(this + 440) + 132);
  v39 = 0;
  sub_4460C0(v38);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 572), ebx0, edi0, esi0);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 560),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v37);
  while ( 1 )
  {
    v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 560), v24);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v37,
            v7) )
      break;
    v35 = 0;
    v34 = *(_QWORD **)sub_420250(v37);
    _Val1 = 0;
    v33 = *((_DWORD *)v34 + 254);
    if ( v33 )
      _Val1 = (char *)CParty::FindParty(v33);
    if ( _Val1 )
    {
      _Val2 = *(CItem **)(sub_420250(v37) + 4);
      sub_446130(v38, v32, &_Val1);
      v8 = sub_430C20(v38, v23);
      if ( (unsigned __int8)unknown_libname_16(v8) )
      {
        CIOObject::AddRef((volatile int *)_Val1, ebx0, edi0, esi0);
        std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
          (std::pair<char const * const,CItem *> *)v22,
          (const char *const *)&_Val1,
          &_Val2);
        sub_48D6D0(
          v38,
          (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v21,
          v9);
      }
      else
      {
        v17 = (_DWORD *)(sub_420250(v32) + 4);
        *v17 += _Val2;
      }
      CIOObject::Release((volatile int *)_Val1, ebx0, edi0, esi0);
    }
    else
    {
      Number = *(_DWORD *)(this + 60) - *((_DWORD *)v34 + 15);
      v16 = (float)v40;
      v35 = (unsigned __int64)((double)*(int *)(sub_420250(v37) + 4) / (double)*(int *)(this + 604) * v16);
      if ( v42 < v35 )
      {
        v42 = v35;
        *a4 = std___Mpunct_wchar_t___do_frac_digits(v34);
      }
      if ( Number < 0 )
      {
        if ( abs(Number) >= 20 )
          v14 = 20;
        else
          v14 = abs(Number);
        v35 = (unsigned __int64)((double)v35
                               - (double)v35
                               * ((double)dword_4D8870[21 * ((*((_DWORD *)v34 + 15) - 1) / 10) + v14]
                                / 100.0));
      }
      else
      {
        if ( Number >= 20 )
          v15 = 20;
        else
          v15 = Number;
        v35 = (unsigned __int64)((double)v35
                               * ((double)dword_4D8528[21 * ((*((_DWORD *)v34 + 15) - 1) / 10) + v15]
                                / 100.0)
                               + (double)v35);
      }
      if ( v35 > 0 )
      {
        v29 = (dword_4E1178 & 1) != 0 ? 0x64 : 0;
        if ( CChar::IsBState(v34, 0x8000000000i64)
          || CChar::IsBState(v34, 0x10000000000i64)
          || CChar::IsBState(v34, 0x20000000000i64) )
        {
          v29 += 10;
        }
        if ( CChar::IsBState(v34, 2i64) )
        {
          v29 += 30;
        }
        else if ( CChar::IsBState(v34, 1i64) )
        {
          v29 += 30;
        }
        v10 = (unsigned __int64)((double)v35 + (double)v35 * ((double)v29 / 100.0));
        (*(void (__cdecl **)(_QWORD *, int, int, _DWORD, _DWORD))(*(_DWORD *)v34 + 88))(v34, 25, 1, v10, HIDWORD(v10));
        if ( v41 < v35 )
        {
          v41 = v35;
          *a3 = std___Mpunct_wchar_t___do_frac_digits(v34);
        }
        v39 += v35;
      }
    }
    CIOObject::Release((volatile int *)v34, ebx0, edi0, esi0);
    sub_446090((int *)v37, (int *)v25, 0);
  }
  if ( !sub_446110(v38) )
  {
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)v38,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v28);
    while ( 1 )
    {
      v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v38, v19);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v28,
              v11) )
        break;
      v27 = *(volatile int **)sub_420250(v28);
      v13 = (float)v40;
      v26 = (unsigned __int64)((double)*(int *)(sub_420250(v28) + 4) / (double)*(int *)(this + 604) * v13);
      CParty::AllotExp((int)v27, &v26, *(_DWORD *)(this + 60), this + 332);
      if ( v41 < v26 )
      {
        v41 = v26;
        *a2 = 1;
        *a3 = *((_DWORD *)v27 + 4);
      }
      v39 += v26;
      CIOObject::Release(v27, ebx0, edi0, esi0);
      sub_446090((int *)v28, (int *)v20, 0);
    }
  }
  sub_445D30((int *)(this + 560));
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 572), ebx0, edi0, esi0);
  if ( 2 * v39 + 1 < v40 )
    *a3 = 0;
  return sub_43F1A0(v38);
}
// 43EDF1: variable 'v9' is possibly undefined
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 4E1178: using guessed type int dword_4E1178;

//----- (0043F1A0) --------------------------------------------------------
int __thiscall sub_43F1A0(void *this)
{
  return sub_4460F0((int *)this);
}

//----- (0043F1C0) --------------------------------------------------------
void __usercall CMonsterReal::ResetHostility(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  char v7[4]; // [esp+8h] [ebp-Ch] BYREF
  volatile int *v8; // [esp+Ch] [ebp-8h]
  char v9[4]; // [esp+10h] [ebp-4h] BYREF

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 572), a2, a3, a4);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 560),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 560), v6);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
            v4) )
      break;
    v8 = *(volatile int **)sub_420250(v9);
    CIOObject::Release(v8, a2, a3, a4);
    sub_446090((int *)v9, (int *)v7, 0);
  }
  sub_445D30((int *)(this + 560));
  *(_DWORD *)(this + 604) = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 572), a2, a3, a4);
}

//----- (0043F260) --------------------------------------------------------
int __userpurge CMonsterMaguni::Damage@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7)
{
  int result; // eax
  int v11; // [esp+0h] [ebp-20h]
  int v12; // [esp+4h] [ebp-1Ch]
  int v14; // [esp+Ch] [ebp-14h] BYREF
  int v15; // [esp+10h] [ebp-10h] BYREF
  int v16; // [esp+14h] [ebp-Ch]
  int v17; // [esp+18h] [ebp-8h]
  int v18; // [esp+1Ch] [ebp-4h]

  if ( a7 )
    v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v12 = 1;
  v16 = v12;
  v18 = CChar::GetFinalDamage(this, a2, a3, v12);
  if ( v18 > 0 )
  {
    CMonsterReal::ManageBuff(this, ebx0, edi0, esi0);
    CChar::Lock((int)this);
    if ( CMonsterReal::ApplyDamage((int)this, ebx0, edi0, esi0, (int)a2, a3, v18, a4, (int)a5, a6, a7) )
    {
      v17 = *a6 + *a4;
      if ( a7 )
      {
        v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 24))(a7);
        (*(void (__thiscall **)(_DWORD *, _DWORD *, int, int))(*this + 212))(this, a2, v17, v11);
      }
      else
      {
        (*(void (__thiscall **)(_DWORD *, _DWORD *, int, _DWORD))(*this + 212))(this, a2, v17, 0);
      }
      if ( (int)this[68] > 0 )
      {
        (*(void (__thiscall **)(_DWORD *, int, int))(*this + 256))(this, v17, v16);
        CChar::Unlock((int)this);
      }
      else
      {
        v15 = 0;
        v14 = 0;
        (*(void (__thiscall **)(_DWORD *, _DWORD *, _DWORD, int *, int *))(*this + 236))(this, a2, *a5, &v15, &v14);
        CChar::Unlock((int)this);
        CMonsterReal::AllotTransformExp(this, ebx0, edi0, esi0, v15, v14);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock((int)this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (0043F3D0) --------------------------------------------------------
DWORD __userpurge CMonsterMaguni::Die@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int *a4, int *a5)
{
  int v8; // eax
  DWORD result; // eax
  int v11; // [esp+4h] [ebp-4h] BYREF

  *(_DWORD *)(this + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 76))(a2, *(_DWORD *)(this + 28), a3);
  v11 = 0;
  CMonsterReal::AllotExp(this, ebx0, edi0, esi0, a4, a5, &v11);
  v8 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 164))(a2);
  CInitMonster::DropItem(*(_DWORD **)(this + 440), ebx0, edi0, esi0, (_DWORD *)this, *a4, *a5, v11, v8);
  CChar::CancelAllBuff(this, ebx0, edi0, esi0);
  CChar::AddGState((volatile LONG *)this, 1);
  CChar::WriteInSight(ebx0, edi0, esi0, this, 61, "db", *(_DWORD *)(this + 28), 8);
  result = GetTickCount() + 10000;
  *(_DWORD *)(this + 468) = result;
  return result;
}

//----- (0043F490) --------------------------------------------------------
CIOObject **__userpurge CMonsterMaguniWithSkillOnly::SetTarget@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2)
{
  CIOObject **result; // eax

  result = CMonster::SetTarget((CIOObject **)this, ebx0, a3, a4, a2);
  if ( a2 )
  {
    *(_DWORD *)(this + 480) = 5;
    *(_DWORD *)(this + 556) = 0;
  }
  else
  {
    result = (CIOObject **)this;
    *(_DWORD *)(this + 480) = 1;
  }
  return result;
}

//----- (0043F4E0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkillOnly::AI(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  __int64 v5; // [esp+20h] [ebp-8h]

  if ( !CMonster::IsRemoved((int)this) && !CChar::IsGState(this, 1) )
  {
    CChar::Lock((int)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
    }
    switch ( this[120] )
    {
      case 1:
      case 2:
      case 3:
      case 7:
        (*(void (__thiscall **)(_DWORD *))(*this + 248))(this);
        goto LABEL_25;
      case 4:
        (*(void (__thiscall **)(_DWORD *))(*this + 244))(this);
        this[120] = 5;
        goto LABEL_25;
      case 5:
        if ( sub_480B70(this + 122, a2, a3, a4, (_DWORD *)this[116]) )
          this[120] = 6;
        goto LABEL_25;
      case 6:
        if ( this[116] )
        {
          v5 = sub_43D870(this + 83, (_DWORD *)(this[116] + 332));
          if ( this[79] != *(_DWORD *)(this[116] + 316) || v5 > this[137] * this[137] )
          {
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
            CChar::Unlock((int)this);
            return;
          }
          if ( v5 <= this[78] * this[78] )
          {
            if ( this[116] == this[121] )
            {
              (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
              (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
              this[120] = 1;
              CChar::Unlock((int)this);
              return;
            }
            CChar::SetDirection(this, *(_DWORD *)(this[116] + 332) - this[83], *(_DWORD *)(this[116] + 336) - this[84]);
            sub_480CF0((int)(this + 122), a2, a3, a4, (CIOObject *)this[116]);
            this[120] = 5;
          }
          else if ( !CChar::IsMState(this, 512i64) )
          {
            this[163] = 1;
            this[120] = 2;
          }
        }
        else
        {
          this[120] = 1;
        }
LABEL_25:
        CChar::Unlock((int)this);
        break;
      default:
        goto LABEL_25;
    }
  }
}

//----- (0043F7F0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkillOnly::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-8h]
  DWORD v6; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::RefreshBuff(this, a2, a3, a4);
    CChar::Lock(this);
    v6 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 1) && v6 >= *(_DWORD *)(this + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else
    {
      v5 = CChar::GetMaxHP((_DWORD *)this);
      if ( *(_DWORD *)(this + 272) < v5 && v6 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility(this, a2, a3, a4);
      }
      if ( !unknown_libname_10((_DWORD *)(this + 488)) )
        sub_480A00(this + 488);
      CChar::Unlock(this);
    }
  }
}

//----- (0043F8E0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkill::AI(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  __int64 v5; // [esp+20h] [ebp-8h]

  if ( !CMonster::IsRemoved((int)this) && !CChar::IsGState(this, 1) )
  {
    CChar::Lock((int)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
    }
    switch ( this[120] )
    {
      case 1:
      case 3:
        goto LABEL_9;
      case 2:
        if ( this[116] )
LABEL_9:
          (*(void (__thiscall **)(_DWORD *))(*this + 248))(this);
        goto LABEL_26;
      case 4:
        (*(void (__thiscall **)(_DWORD *))(*this + 244))(this);
        goto LABEL_26;
      case 5:
        if ( sub_480B70(this + 122, a2, a3, a4, (_DWORD *)this[116]) )
          this[120] = 6;
        goto LABEL_26;
      case 6:
        if ( this[116] )
        {
          v5 = sub_43D870(this + 83, (_DWORD *)(this[116] + 332));
          if ( this[79] != *(_DWORD *)(this[116] + 316) || v5 > this[137] * this[137] )
          {
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
            CChar::Unlock((int)this);
            return;
          }
          if ( v5 <= this[78] * this[78] )
          {
            if ( this[116] == this[121] )
            {
              (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
              (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
              this[120] = 1;
              CChar::Unlock((int)this);
              return;
            }
            CChar::SetDirection(this, *(_DWORD *)(this[116] + 332) - this[83], *(_DWORD *)(this[116] + 336) - this[84]);
            sub_480CF0((int)(this + 122), a2, a3, a4, (CIOObject *)this[116]);
            this[120] = 4;
          }
          else if ( !CChar::IsMState(this, 512i64) )
          {
            this[163] = 1;
            this[120] = 2;
          }
        }
        else
        {
          this[120] = 1;
        }
LABEL_26:
        CChar::Unlock((int)this);
        break;
      default:
        goto LABEL_26;
    }
  }
}

//----- (0043FBF0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkill::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+8h] [ebp-8h]
  DWORD v6; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::RefreshBuff(this, a2, a3, a4);
    CChar::Lock(this);
    v6 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 1) && v6 >= *(_DWORD *)(this + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else
    {
      v5 = CChar::GetMaxHP((_DWORD *)this);
      if ( *(_DWORD *)(this + 272) < v5 && v6 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility(this, a2, a3, a4);
      }
      if ( *(_DWORD *)(this + 664) <= v6 )
      {
        if ( *(_DWORD *)(this + 464) )
        {
          *(_DWORD *)(this + 664) = *(_DWORD *)(*(_DWORD *)(this + 440) + 328) + v6;
          if ( (double)RandomBetween(1, 100) <= *(float *)(*(_DWORD *)(this + 440) + 324) )
          {
            if ( !unknown_libname_10((_DWORD *)(this + 488)) )
              sub_480A00(this + 488);
            *(_DWORD *)(this + 480) = 5;
          }
        }
      }
      CChar::Unlock(this);
    }
  }
}

//----- (0043FD50) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkill::Attack(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // eax
  int v6; // eax
  int v7; // [esp-Ch] [ebp-64h]
  int v8; // [esp-8h] [ebp-60h]
  int v9; // [esp-4h] [ebp-5Ch]
  int v11; // [esp+30h] [ebp-28h] BYREF
  int v12; // [esp+34h] [ebp-24h] BYREF
  CIOObject *v13; // [esp+38h] [ebp-20h]
  int v14; // [esp+3Ch] [ebp-1Ch] BYREF
  int v15; // [esp+40h] [ebp-18h]
  int v16; // [esp+44h] [ebp-14h]
  __int64 v17; // [esp+48h] [ebp-10h]
  DWORD v18; // [esp+54h] [ebp-4h]

  if ( !CChar::IsMState((_QWORD *)this, 268435712i64) )
  {
    v18 = GetTickCount();
    if ( v18 >= *(_DWORD *)(this + 468) )
    {
      if ( *(_DWORD *)(this + 464) )
      {
        v17 = sub_43D870((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 464) + 332));
        if ( *(_DWORD *)(this + 316) == *(_DWORD *)(*(_DWORD *)(this + 464) + 316)
          && v17 <= *(_DWORD *)(this + 548) * *(_DWORD *)(this + 548) )
        {
          if ( v17 <= *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312) )
          {
            *(_DWORD *)(this + 468) = v18 + CChar::GetASpeed((_DWORD *)this);
            *(_DWORD *)(this + 556) = *(_DWORD *)(this + 468);
            CChar::SetDirection(
              (_DWORD *)this,
              *(_DWORD *)(*(_DWORD *)(this + 464) + 332) - *(_DWORD *)(this + 332),
              *(_DWORD *)(*(_DWORD *)(this + 464) + 336) - *(_DWORD *)(this + 336));
            v14 = 0;
            v11 = 0;
            v16 = 0;
            v15 = 0;
            v13 = *(CIOObject **)(this + 464);
            CIOObject::AddRef(v13, a2, a3, a4, (volatile int *)v13 + 88);
            v12 = (*(int (__thiscall **)(int, CIOObject *))(*(_DWORD *)this + 168))(this, v13);
            v15 = (*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v13 + 148))(v13, this);
            if ( !v15 && (*(int (__thiscall **)(CIOObject *))(*(_DWORD *)v13 + 60))(v13) )
            {
              if ( CChar::IsBState(v13, 0x8000i64) ? CChar::CheckHit(this, v13, -5) : CChar::CheckHit(this, v13, 0) )
              {
                CChar::Unlock(this);
                v5 = CChar::GetAttack((void *)this);
                v16 = (*(int (__thiscall **)(CIOObject *, int, int, int *, int *, int *, _DWORD))(*(_DWORD *)v13 + 72))(
                        v13,
                        this,
                        v5,
                        &v14,
                        &v11,
                        &v12,
                        0);
                CChar::Lock(this);
              }
            }
            if ( !v16 )
              (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v13 + 80))(v13, this);
            v9 = v16 | (2 * v11) | (4 * v15);
            v8 = v12;
            v7 = v14;
            v6 = std___Mpunct_wchar_t___do_frac_digits(v13);
            CChar::WriteInSight(a2, a3, a4, this, 62, "ddwwb", *(_DWORD *)(this + 28), v6, v7, v8, v9);
            CIOObject::Release(v13, a2, a3, a4, (volatile int *)v13 + 88);
          }
          else if ( !CChar::IsMState((_QWORD *)this, 512i64) )
          {
            *(_DWORD *)(this + 652) = 1;
            *(_DWORD *)(this + 480) = 2;
          }
        }
        else
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
        }
      }
    }
  }
}

//----- (00440070) --------------------------------------------------------
int __thiscall sub_440070(int this)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B9308;
  memset((void *)(this + 664), 0, 0x1Cu);
  *(_DWORD *)(this + 664) = GetTickCount();
  *(_DWORD *)(this + 692) = 0;
  return this;
}
// 4B9308: using guessed type int (__stdcall *off_4B9308)(int);

//----- (004400D0) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::IsIgnore(_DWORD *this)
{
  return CChar::IsGState(this, 0x12000);
}

//----- (004400F0) --------------------------------------------------------
CMonsterTowerBoss *__thiscall CMonsterTowerBoss::CMonsterTowerBoss(CMonsterTowerBoss *this, int a2, int a3)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B9308;
  *((_DWORD *)this + 79) = a2;
  *((_DWORD *)this + 80) = a3;
  memset((char *)this + 664, 0, 0x1Cu);
  *((_DWORD *)this + 166) = GetTickCount() + 3600000;
  *((_DWORD *)this + 117) = GetTickCount() + 10000;
  *((_DWORD *)this + 139) = *((_DWORD *)this + 117);
  *((_DWORD *)this + 173) = 0;
  CChar::AddGState((volatile LONG *)this, 0x2000);
  return this;
}
// 4B9308: using guessed type int (__stdcall *off_4B9308)(int);

//----- (004401A0) --------------------------------------------------------
int __usercall CMonsterTowerBoss::Create@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  int result; // eax
  void *v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-30h] [ebp-6Ch]
  int v8; // [esp-2Ch] [ebp-68h]
  int v9; // [esp-28h] [ebp-64h]
  int v10; // [esp-24h] [ebp-60h]
  int v11; // [esp-20h] [ebp-5Ch]
  int v12; // [esp-1Ch] [ebp-58h]
  int v13; // [esp-18h] [ebp-54h]
  int v14; // [esp-14h] [ebp-50h]
  int v15; // [esp-10h] [ebp-4Ch]
  CMonsterTowerBoss *v16; // [esp+4h] [ebp-38h]
  CMemory **v17; // [esp+10h] [ebp-2Ch]
  char v18[4]; // [esp+14h] [ebp-28h] BYREF
  int v19; // [esp+18h] [ebp-24h] BYREF
  int v20; // [esp+1Ch] [ebp-20h]
  int v21[2]; // [esp+20h] [ebp-1Ch] BYREF
  int v22; // [esp+28h] [ebp-14h]
  int v23; // [esp+2Ch] [ebp-10h] BYREF
  int v24; // [esp+30h] [ebp-Ch]
  char v25[4]; // [esp+34h] [ebp-8h] BYREF
  CMonsterTowerBoss *v26; // [esp+38h] [ebp-4h]

  v22 = sub_491080(3);
  if ( !v22 )
    return 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
  v19 = 213;
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1820,
    v25,
    &v19);
  v4 = sub_430C20(dword_4E1820, v18);
  if ( (unsigned __int8)unknown_libname_16(v4) )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
    result = 0;
  }
  else
  {
    v20 = *(_DWORD *)(sub_420250(v25) + 4);
    if ( (*(_DWORD *)(v20 + 304) & (1 << dword_4E35B8)) != 0 )
    {
      v23 = 57367;
      v24 = 8931;
      v17 = operator_new(0x2B8u);
      if ( v17 )
        v16 = CMonsterTowerBoss::CMonsterTowerBoss((CMonsterTowerBoss *)v17, 3, v22);
      else
        v16 = 0;
      v26 = v16;
      CChar::SetXY(v16, &v23);
      CChar::SetDirection(v26, 0, -1);
      (*(void (__thiscall **)(CMonsterTowerBoss *, int))(*(_DWORD *)v26 + 192))(v26, v20);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
      CChar::Lock((int)v26);
      v21[0] = v23 >> 5;
      v21[1] = v24 >> 5;
      if ( sub_491360(*((_DWORD **)v26 + 80), a1, a2, a3, (int)v26, v21) )
      {
        (*(void (__thiscall **)(CMonsterTowerBoss *, _DWORD))(*(_DWORD *)v26 + 196))(v26, 0);
        v5 = (*(int (__thiscall **)(CMonsterTowerBoss *))(*(_DWORD *)v26 + 240))(v26);
        v15 = (*(int (__thiscall **)(CMonsterTowerBoss *, int, _DWORD, int))(*(_DWORD *)v26 + 224))(
                v26,
                *(_DWORD *)(*((_DWORD *)v26 + 110) + 64) | 0x80,
                *((_DWORD *)v26 + 131),
                v5);
        v14 = *((_DWORD *)v26 + 73);
        v13 = *((_DWORD *)v26 + 72);
        v12 = *((_DWORD *)v26 + 70);
        v11 = CChar::GetMaxHP(v26);
        v10 = *((_DWORD *)v26 + 68);
        v9 = *((_DWORD *)v26 + 87);
        v8 = *((_DWORD *)v26 + 84);
        v7 = *((_DWORD *)v26 + 83);
        v6 = std___Mpunct_wchar_t___do_frac_digits(v26);
        CChar::WriteInSight(
          a1,
          a2,
          a3,
          (int)v26,
          51,
          "wdddwdddIsbds",
          *(_DWORD *)(*((_DWORD *)v26 + 110) + 60),
          v6,
          v7,
          v8,
          v9,
          v10,
          v11,
          v12,
          v13,
          v14,
          v15);
        CChar::Unlock((int)v26);
        CNPCScenario::MirrorGState(0, 3);
        CNPCScenario::ThroneGState(0, 12);
        CPlayer::WriteInMap(a1, a2, a3, 3, 22, "bb", 0, 99);
        result = 1;
      }
      else
      {
        CChar::Unlock((int)v26);
        if ( v26 )
          (**(void (__thiscall ***)(CMonsterTowerBoss *, int))v26)(v26, 1);
        result = 0;
      }
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
      result = 1;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00440430) --------------------------------------------------------
void __usercall CMonsterTowerBoss::OnDelete(Concurrency::details::_CancellationTokenRegistration *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v4; // [esp+0h] [ebp-18h]
  int i; // [esp+10h] [ebp-8h]
  int *v7; // [esp+14h] [ebp-4h]

  CChar::Lock((int)this);
  (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, _DWORD))(*(_DWORD *)this + 188))(
    this,
    0);
  CMonsterReal::ResetHostility((int)this, a2, a3, a4);
  v7 = (int *)((char *)this + 692);
  for ( i = *((_DWORD *)this + 173); i; i = *v7 )
  {
    *v7 = *(_DWORD *)(i + 84);
    v4 = (**(int (__thiscall ***)(int, int))i)(i, 1);
  }
  (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, int))(*(_DWORD *)this + 200))(
    this,
    v4);
  sub_4913E0(*((_DWORD **)this + 80), a2, a3, a4, this, (int)this + 324);
  CChar::Unlock((int)this);
  CNPCScenario::ResetBossTower(0);
  CBase::OnDelete((volatile int *)this, a2, a3, a4);
}
// 440497: conditional instruction was optimized away because of '%var_8.4!=0'
// 4404BB: variable 'v4' is possibly undefined

//----- (00440500) --------------------------------------------------------
void __userpurge CMonsterTowerBoss::Defense(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a2)
{
  if ( !this[119] )
    this[119] = 1;
  this[165] = GetTickCount();
  CMonsterReal::Defense(this, ebx0, a3, a4, a2);
}

//----- (00440550) --------------------------------------------------------
void __usercall CMonsterMaguniMaster::AI(int *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( !CMonster::IsRemoved((int)this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((int)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    switch ( this[120] )
    {
      case 1:
      case 2:
      case 3:
        (*(void (__thiscall **)(int *))(*this + 248))(this);
        break;
      case 4:
        (*(void (__thiscall **)(int *))(*this + 244))(this);
        break;
      case 5:
        if ( sub_480B70(this + 122, a2, a3, a4, (_DWORD *)this[116]) )
          this[120] = 6;
        break;
      case 6:
        sub_480C50(this + 122, a2, a3, a4, (CIOObject *)this[116]);
        this[120] = this[116] != 0 ? 4 : 1;
        break;
      default:
        break;
    }
    CChar::Unlock((int)this);
  }
}

//----- (004406A0) --------------------------------------------------------
void __usercall CMonsterTowerBoss::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  DWORD v7; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::RefreshBuff(this, a2, a3, a4);
    CChar::Lock(this);
    v7 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 0x10000) && v7 >= *(_DWORD *)(this + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, this, 56, "d", *(_DWORD *)(this + 28));
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else if ( CChar::IsGState((_DWORD *)this, 0x2000) && v7 >= *(_DWORD *)(this + 556) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 0x2000);
      CChar::Unlock(this);
    }
    else
    {
      v5 = CChar::GetMaxHP((_DWORD *)this);
      if ( *(_DWORD *)(this + 272) < v5 && v7 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility(this, a2, a3, a4);
      }
      if ( *(_DWORD *)(this + 476)
        && !unknown_libname_10((_DWORD *)(this + 488))
        && !sub_446110((void *)(this + 560))
        && v7 - *(_DWORD *)(this + 660) <= 0x2710 )
      {
        (*(void (__thiscall **)(int, int, int, int, int))(*(_DWORD *)this + 232))(this, 232, 5, 24, 6);
        CMonsterTowerBoss::OnSummon((_DWORD *)this, a2, a3, a4);
        v6 = -1;
        if ( *(_DWORD *)(this + 664) <= v7 )
          v6 = 8;
        if ( *(_DWORD *)(this + 272) <= 7 * v5 / 10 && *(_DWORD *)(this + 668) <= v7 )
        {
          *(_DWORD *)(this + 668) = v7 + 42000;
          if ( v6 < 0 )
            v6 = 5;
        }
        if ( *(_DWORD *)(this + 272) <= v5 / 2 && *(_DWORD *)(this + 672) <= v7 )
        {
          *(_DWORD *)(this + 672) = v7 + 83000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 90 )
            v6 = 4;
        }
        if ( *(_DWORD *)(this + 272) <= 3 * v5 / 4 && *(_DWORD *)(this + 676) <= v7 )
        {
          *(_DWORD *)(this + 676) = v7 + 14000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 80 )
            v6 = 2;
        }
        if ( *(_DWORD *)(this + 680) <= v7 )
        {
          *(_DWORD *)(this + 680) = v7 + 32000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 85 )
            v6 = 3;
        }
        if ( *(_DWORD *)(this + 684) <= v7 )
        {
          *(_DWORD *)(this + 684) = v7 + 10000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 75 )
            v6 = *(_DWORD *)(this + 272) <= v5 / 2;
        }
        if ( *(_DWORD *)(this + 688) <= v7 )
        {
          *(_DWORD *)(this + 688) = v7 + 5000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 50 )
            v6 = 13;
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970((int *)(this + 488), v6) )
            *(_DWORD *)(this + 480) = 5;
        }
      }
      CChar::Unlock(this);
    }
  }
}

//----- (00440A30) --------------------------------------------------------
void __usercall CMonsterTowerBoss::Attack(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-68h]
  int v9; // [esp-8h] [ebp-64h]
  int v10; // [esp-4h] [ebp-60h]
  int v11; // [esp-4h] [ebp-60h]
  int v13; // [esp+30h] [ebp-2Ch] BYREF
  int v14; // [esp+34h] [ebp-28h] BYREF
  int a1; // [esp+38h] [ebp-24h]
  int v16; // [esp+3Ch] [ebp-20h] BYREF
  int v17; // [esp+40h] [ebp-1Ch]
  int v18; // [esp+44h] [ebp-18h]
  void *i; // [esp+48h] [ebp-14h]
  __int64 v20; // [esp+4Ch] [ebp-10h]
  DWORD v21; // [esp+54h] [ebp-8h]
  CIOObject *v22; // [esp+58h] [ebp-4h]

  if ( !CChar::IsMState((_QWORD *)this, 268435712i64) )
  {
    v21 = GetTickCount();
    if ( v21 >= *(_DWORD *)(this + 468) )
    {
      v20 = sub_43D870((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 464) + 332));
      if ( *(_DWORD *)(this + 316) == *(_DWORD *)(*(_DWORD *)(this + 464) + 316)
        && v20 <= *(_DWORD *)(this + 548) * *(_DWORD *)(this + 548) )
      {
        if ( v20 <= *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312) )
        {
          *(_DWORD *)(this + 468) = v21 + CChar::GetASpeed((_DWORD *)this);
          *(_DWORD *)(this + 556) = *(_DWORD *)(this + 468);
          CChar::SetDirection(
            (_DWORD *)this,
            *(_DWORD *)(*(_DWORD *)(this + 464) + 332) - *(_DWORD *)(this + 332),
            *(_DWORD *)(*(_DWORD *)(this + 464) + 336) - *(_DWORD *)(this + 336));
          v22 = *(CIOObject **)(this + 464);
          CIOObject::AddRef(v22, a2, a3, a4, (volatile int *)v22 + 88);
          for ( i = sub_4934F0(*((char **)v22 + 80), a2, a3, a4, (_DWORD *)v22 + 81, 1);
                i;
                i = (void *)CBaseList::Pop((int)i, a2, a3, a4) )
          {
            a1 = unknown_libname_15(i);
            v16 = 0;
            v13 = 0;
            v18 = 0;
            v17 = 0;
            v14 = (*(int (__thiscall **)(int, int))(*(_DWORD *)this + 168))(this, a1);
            v17 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a1 + 148))(a1, this);
            if ( !v17 )
            {
              if ( CChar::IsBState((_QWORD *)a1, 0x8000i64) ? CChar::CheckHit(this, (_DWORD *)a1, -5) : CChar::CheckHit(this, (_DWORD *)a1, 0) )
              {
                CChar::Unlock(this);
                v5 = CChar::GetAttack((void *)this);
                v18 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, _DWORD))(*(_DWORD *)a1 + 72))(
                        a1,
                        this,
                        v5,
                        &v16,
                        &v13,
                        &v14,
                        0);
                CChar::Lock(this);
              }
            }
            if ( (CIOObject *)a1 == v22 )
            {
              v11 = v18 | (2 * v13) | (4 * v17);
              v9 = v14;
              v8 = v16;
              v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a1);
              CChar::WriteInSight(a2, a3, a4, this, 62, "ddwwb", *(_DWORD *)(this + 28), v7, v8, v9, v11);
            }
            else if ( v18 )
            {
              v10 = v16;
              v6 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a1);
              CPlayer::Write(a1, 73, "dbw", v6, 23, v10);
            }
          }
          CIOObject::Release(v22, a2, a3, a4, (volatile int *)v22 + 88);
        }
        else if ( !CChar::IsMState((_QWORD *)this, 512i64) )
        {
          *(_DWORD *)(this + 652) = 1;
          *(_DWORD *)(this + 480) = 2;
        }
      }
      else
      {
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
      }
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (00440D90) --------------------------------------------------------
void __userpurge CMonsterTowerBoss::UpdateChild(volatile int *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  if ( !CBase::IsDeleted(this) )
  {
    CChar::Lock((int)this);
    for ( i = (_DWORD *)*((_DWORD *)this + 173); i && i[8] != a2; i = (_DWORD *)i[21] )
      ;
    if ( i )
    {
      --i[11];
      --i[12];
    }
    CChar::Unlock((int)this);
  }
  CChar::UpdateChild(this, ebx0, a3, a4, a2);
}

//----- (00440E20) --------------------------------------------------------
CGenMonster *__thiscall CMonsterTowerBoss::Summon(_DWORD *this, int a2, int a3, int a4, int a5)
{
  CGenMonster *result; // eax
  CGenMonster *v6; // [esp+0h] [ebp-14h]
  CMemory **v8; // [esp+8h] [ebp-Ch]
  CGenMonster *i; // [esp+10h] [ebp-4h]

  for ( i = (CGenMonster *)this[173]; i && *((_DWORD *)i + 8) != a2; i = (CGenMonster *)*((_DWORD *)i + 21) )
    ;
  if ( i )
  {
    result = i;
    *((_DWORD *)i + 11) += a5;
    if ( *((_DWORD *)i + 11) > a4 )
    {
      result = i;
      *((_DWORD *)i + 11) = a4;
    }
  }
  else
  {
    v8 = operator_new(0x58u);
    if ( v8 )
      v6 = CGenMonster::CGenMonster((CGenMonster *)v8, this, a2, a3, a5);
    else
      v6 = 0;
    *((_DWORD *)v6 + 21) = this[173];
    result = v6;
    this[173] = v6;
  }
  return result;
}

//----- (00440EE0) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::Reaction(_DWORD *this, int a2, int a3)
{
  int result; // eax

  if ( !this[119] )
    this[119] = 1;
  result = GetTickCount();
  this[165] = result;
  if ( a2 >= 100 )
  {
    result = unknown_libname_10(this + 122);
    if ( !result )
    {
      result = RandomBetween(1, 100);
      if ( result <= 80 )
      {
        result = sub_480970(this + 122, 7 - (a3 != 0));
        if ( result )
          this[120] = 5;
      }
    }
  }
  return result;
}

//----- (00440F70) --------------------------------------------------------
_DWORD *__usercall CMonsterTowerBoss::OnSummon@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  _DWORD *result; // eax
  int j; // [esp+4h] [ebp-8h]
  _DWORD *i; // [esp+8h] [ebp-4h]

  result = this;
  for ( i = (_DWORD *)this[173]; i; i = result )
  {
    for ( j = 0; j < 3 && i[12] < i[11] && CMonster::Create(a2, a3, a4, i, (int)this); ++j )
      InterlockedIncrement(i + 12);
    result = (_DWORD *)i[21];
  }
  return result;
}

//----- (00440FF0) --------------------------------------------------------
int __stdcall CMonsterNotReal::AddBuff(int a1)
{
  if ( a1 )
    std__locale__facet___scalar_deleting_destructor_((_DWORD *)a1, 1);
  return 0;
}

//----- (00441030) --------------------------------------------------------
int __userpurge CMonsterInactive::Damage@<eax>(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, _DWORD *a6, int a7)
{
  int result; // eax
  int v11; // [esp+0h] [ebp-1Ch]
  int v12; // [esp+4h] [ebp-18h]
  int v13; // [esp+8h] [ebp-14h]
  int v15; // [esp+14h] [ebp-8h]

  *a6 = 0;
  if ( a7 )
    v13 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v13 = 1;
  v15 = CChar::GetFinalDamage(this, a2, a3, v13);
  if ( v15 > 0 )
  {
    CChar::Lock((int)this);
    if ( CChar::IsNormal((int)this) )
    {
      if ( a7 )
        v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 28))(a7);
      else
        v12 = 0;
      *a4 = v15 + CChar::GetFatalDamage((int)a2, v15, a5, v12);
      if ( *a4 >= *((_DWORD *)this + 68) )
        v11 = *((_DWORD *)this + 68);
      else
        v11 = *a4;
      *a4 = v11;
      *((_DWORD *)this + 68) -= *a4;
      if ( *((int *)this + 68) > 0 )
      {
        CChar::Unlock((int)this);
      }
      else
      {
        *((_DWORD *)this + 68) = 0;
        CChar::WriteInSight(ebx0, edi0, esi0, (int)this, 61, "db", *((_DWORD *)this + 7), 9);
        CChar::Unlock((int)this);
        CBase::Delete(this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock((int)this);
      *a4 = 0;
      result = 0;
    }
  }
  else
  {
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (004411A0) --------------------------------------------------------
int __thiscall CMonsterInactive::SetProperty(_DWORD *this, int a2)
{
  int result; // eax

  CMonster::SetProperty((int)this, a2);
  memcpy(this + 16, (const void *)(a2 + 136), 0x1Cu);
  result = CChar::GetMaxHP(this);
  this[68] = result;
  return result;
}

//----- (004411F0) --------------------------------------------------------
void __userpurge CMonsterInactive::Add(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  CMonster::Add((int)this, ebx0, a3, a4, a2);
  if ( a2 )
  {
    CIOObject::AddRef((volatile int *)a2, ebx0, a3, a4);
    this[121] = a2;
  }
}

//----- (00441230) --------------------------------------------------------
CMonsterGuildWar *__thiscall CMonsterGuildWar::CMonsterGuildWar(CMonsterGuildWar *this, int a2, int a3, int a4, int a5, char *Source)
{
  CMonsterNotReal::CMonsterNotReal(this);
  *(_DWORD *)this = &off_4B8490;
  *((_DWORD *)this + 79) = a2;
  *((_DWORD *)this + 80) = a3;
  *((_DWORD *)this + 87) = a4;
  *((_DWORD *)this + 134) = a5;
  strcpy((char *)this + 540, Source);
  *((_DWORD *)this + 140) = 0;
  return this;
}
// 4B8490: using guessed type int (__stdcall *off_4B8490)(int);

//----- (004412B0) --------------------------------------------------------
CMonsterGuildWar *__usercall CMonsterGuildWar::Create@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, int a2, int a3, int a4, int a5, char *Source, int a7)
{
  CMonsterGuildWar *result; // eax
  void *v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // [esp-30h] [ebp-60h]
  int v15; // [esp-2Ch] [ebp-5Ch]
  int v16; // [esp-28h] [ebp-58h]
  int v17; // [esp-24h] [ebp-54h]
  int v18; // [esp-20h] [ebp-50h]
  int v19; // [esp-1Ch] [ebp-4Ch]
  int v20; // [esp-18h] [ebp-48h]
  int v21; // [esp-14h] [ebp-44h]
  int v22; // [esp-10h] [ebp-40h]
  CMonsterGuildWar *v23; // [esp+4h] [ebp-2Ch]
  CMemory **v24; // [esp+10h] [ebp-20h]
  char v25[4]; // [esp+14h] [ebp-1Ch] BYREF
  _DWORD *v26; // [esp+18h] [ebp-18h]
  int v27[2]; // [esp+1Ch] [ebp-14h] BYREF
  int v28; // [esp+24h] [ebp-Ch]
  char v29[4]; // [esp+28h] [ebp-8h] BYREF
  CMonsterGuildWar *v30; // [esp+2Ch] [ebp-4h]

  v28 = sub_491080(a2);
  if ( v28 )
  {
    if ( CSMap::IsValidTile((_DWORD *)v28, (int *)a3, 0) )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, esi0);
      sub_44AE20(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1820,
        v29,
        &a1);
      v11 = sub_430C20(dword_4E1820, v25);
      if ( (unsigned __int8)unknown_libname_16(v11)
        || (v26 = *(_DWORD **)(sub_420250(v29) + 4), (v26[76] & (1 << dword_4E35B8)) == 0) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, esi0);
        result = 0;
      }
      else
      {
        v24 = operator_new(0x238u);
        if ( v24 )
          v23 = CMonsterGuildWar::CMonsterGuildWar((CMonsterGuildWar *)v24, a2, v28, a4, a5, Source);
        else
          v23 = 0;
        v30 = v23;
        CChar::SetXY(v23, (_DWORD *)a3);
        (*(void (__thiscall **)(CMonsterGuildWar *, _DWORD *))(*(_DWORD *)v30 + 192))(v30, v26);
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, esi0);
        CChar::Lock((int)v30);
        v27[0] = *(int *)a3 >> 5;
        v27[1] = *(int *)(a3 + 4) >> 5;
        if ( sub_491360(*((_DWORD **)v30 + 80), ebx0, edi0, esi0, (int)v30, v27) )
        {
          (*(void (__thiscall **)(CMonsterGuildWar *, _DWORD))(*(_DWORD *)v30 + 196))(v30, 0);
          v12 = (*(int (__thiscall **)(CMonsterGuildWar *))(*(_DWORD *)v30 + 240))(v30);
          v22 = (*(int (__thiscall **)(CMonsterGuildWar *, _DWORD, _DWORD, int))(*(_DWORD *)v30 + 224))(
                  v30,
                  *(_DWORD *)(*((_DWORD *)v30 + 110) + 64),
                  *((_DWORD *)v30 + 134),
                  v12);
          v21 = *((_DWORD *)v30 + 73);
          v20 = *((_DWORD *)v30 + 72);
          v19 = *((_DWORD *)v30 + 70);
          v18 = CChar::GetMaxHP(v30);
          v17 = *((_DWORD *)v30 + 68);
          v16 = *((_DWORD *)v30 + 87);
          v15 = *((_DWORD *)v30 + 84);
          v14 = *((_DWORD *)v30 + 83);
          v13 = std___Mpunct_wchar_t___do_frac_digits(v30);
          CChar::WriteInSight(
            ebx0,
            edi0,
            esi0,
            (int)v30,
            51,
            "wdddwdddIsbds",
            *(_DWORD *)(*((_DWORD *)v30 + 110) + 60),
            v13,
            v14,
            v15,
            v16,
            v17,
            v18,
            v19,
            v20,
            v21,
            v22);
          if ( a7 && CInitMonster::IsRace(v26, 2) && a5 )
          {
            (*(void (__thiscall **)(CMonsterGuildWar *, int))(*(_DWORD *)v30 + 100))(v30, 0x20000);
            *((_DWORD *)v30 + 140) = GetTickCount() + 300000;
          }
          CChar::Unlock((int)v30);
          result = v30;
        }
        else
        {
          CChar::Unlock((int)v30);
          if ( v30 )
            (**(void (__thiscall ***)(CMonsterGuildWar *, int))v30)(v30, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CMonsterGuildWar::Create() not find Map (map:%d)", a2);
    result = 0;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00441570) --------------------------------------------------------
BOOL __thiscall CInitMonster::IsRace(_DWORD *this, int a2)
{
  return this[16] == a2;
}

//----- (00441590) --------------------------------------------------------
int __userpurge CMonsterGuildWar::Damage@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, _DWORD *a6, int a7)
{
  int result; // eax
  int v11; // eax
  int v12; // eax
  int v13; // [esp+0h] [ebp-14h]
  int v14; // [esp+4h] [ebp-10h]
  int v16; // [esp+10h] [ebp-4h]
  int v17; // [esp+10h] [ebp-4h]

  *a6 = 0;
  if ( a7 )
    v14 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v14 = 1;
  if ( !v14 )
    return 0;
  v16 = CChar::GetFinalDamage((_DWORD *)this, a2, a3, v14);
  if ( v16 <= 0 )
    return 0;
  CChar::Lock(this);
  if ( CChar::IsNormal(this) )
  {
    v17 = v16 + CChar::GetFatalDamage((int)a2, v16, a5, 0);
    if ( v17 >= *(_DWORD *)(this + 272) )
      v13 = *(_DWORD *)(this + 272);
    else
      v13 = v17;
    *a4 = v13;
    *(_DWORD *)(this + 272) -= *a4;
    *(_DWORD *)(this + 472) = GetTickCount() + 20000;
    if ( *(int *)(this + 272) > 0 )
    {
      CChar::Unlock(this);
    }
    else
    {
      *(_DWORD *)(this + 272) = 0;
      (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*a2 + 76))(a2, *(_DWORD *)(this + 28), *a5);
      CChar::WriteInSight(ebx0, edi0, esi0, this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      if ( CInitMonster::IsRace(*(_DWORD **)(this + 440), 2) )
      {
        v11 = CCastle::GetMonsterTile2CID(*(_DWORD *)(this + 316), *(_DWORD *)(this + 332), *(_DWORD *)(this + 336));
        CGuild::BrokenStandard(v11);
      }
      else if ( CInitMonster::IsRace(*(_DWORD **)(this + 440), 3) )
      {
        v12 = CCastle::GetMonsterTile2CID(*(_DWORD *)(this + 316), *(_DWORD *)(this + 332), *(_DWORD *)(this + 336));
        CGuild::BrokenGate(v12, this);
      }
      CBase::Delete((char *)this);
    }
    result = 1;
  }
  else
  {
    CChar::Unlock(this);
    result = 1;
  }
  return result;
}

//----- (00441790) --------------------------------------------------------
int __thiscall CMonsterGuildWar::SetProperty(char *this, int a2)
{
  CMonster::SetProperty((int)this, a2);
  memcpy(this + 64, (const void *)(a2 + 136), 0x1Cu);
  memcpy(this + 92, (const void *)(a2 + 164), 0x60u);
  return (*(int (__thiscall **)(char *))(*(_DWORD *)this + 84))(this);
}

//----- (004417F0) --------------------------------------------------------
void __thiscall CMonsterGuildWar::Tick(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-8h]
  DWORD v3; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    v3 = GetTickCount();
    if ( CChar::IsGState(this, 0x20000) && this[140] < v3 )
      (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 0x20000);
    if ( !CGuild::IsWarringPeriod() )
    {
      CChar::Lock((int)this);
      v2 = CChar::GetMaxHP(this);
      if ( this[68] < v2 && v3 >= this[118] )
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 7, 1, v2);
      CChar::Unlock((int)this);
    }
  }
}

//----- (004418A0) --------------------------------------------------------
void __thiscall CMonsterGuildWar::SetGuild(int this, int a2, char *Source)
{
  CChar::Lock(this);
  *(_DWORD *)(this + 536) = a2;
  strcpy((char *)(this + 540), Source);
  CChar::Unlock(this);
}

//----- (004418E0) --------------------------------------------------------
void __userpurge CPlayer::SubGState(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  CChar::SubGState((volatile LONG *)this, a2);
  CChar::WriteInSight(ebx0, a3, a4, this, 46, "dd", *(_DWORD *)(this + 28), *(_DWORD *)(this + 280));
}

//----- (00441920) --------------------------------------------------------
int __userpurge CMonsterItem::Damage@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v11; // eax
  volatile int *v13; // [esp+10h] [ebp-10h]
  int v14; // [esp+14h] [ebp-Ch]

  if ( CBase::IsDeleted(this) )
    return 0;
  CChar::Lock((int)this);
  if ( a3 )
  {
    if ( a3 == 1 && a2 == this[116] && this[117] > GetTickCount() )
    {
      this[117] = GetTickCount();
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 112))(a2, 0x8000);
      CPlayer::Write(a2, 67, "b", 89);
    }
LABEL_22:
    CChar::Unlock((int)this);
    return 0;
  }
  if ( !this[116] )
  {
    CIOObject::AddRef((CIOObject *)a2, ebx0, edi0, esi0, (volatile int *)(a2 + 356));
    (*(void (__thiscall **)(_DWORD *, int))(*this + 188))(this, a2);
    v14 = 6;
    if ( *(_DWORD *)(a2 + 1016) )
    {
      v13 = (volatile int *)CParty::FindParty(*(_DWORD *)(a2 + 1016));
      if ( v13 )
      {
        if ( CParty::GetLuckySize((int)v13, 1) )
          v14 = 2;
        CIOObject::Release(v13, ebx0, edi0, esi0);
      }
    }
    else if ( CChar::IsBState((_QWORD *)a2, 0x2000000i64) )
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      CChar::WriteInRect(ebx0, edi0, esi0, a2, 73, 15, "db", v11, 21);
      v14 = 2;
    }
    this[117] = 1000 * v14 + GetTickCount();
    (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 100))(a2, 0x8000);
    CPlayer::Write(a2, 68, "bb", 87, v14);
    goto LABEL_22;
  }
  CChar::Unlock((int)this);
  if ( a2 != this[116] )
    CPlayer::Write(a2, 67, "b", 86);
  return 0;
}

//----- (00441B20) --------------------------------------------------------
void __usercall CMonsterItem::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v4; // eax
  int v6; // [esp+4h] [ebp-8h]
  _DWORD *a1; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::Lock(this);
    if ( !*(_DWORD *)(this + 464) )
      goto LABEL_10;
    if ( !CChar::IsNormal(*(_DWORD *)(this + 464)) )
    {
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
      CChar::Unlock(this);
      return;
    }
    if ( *(_DWORD *)(this + 468) <= GetTickCount() )
    {
      a1 = *(_DWORD **)(this + 464);
      (*(void (__thiscall **)(_DWORD *, int))(*a1 + 112))(a1, 0x8000);
      CPlayer::Write((int)a1, 67, "b", 88);
      v6 = a1[254];
      if ( v6 )
      {
        CInitMonster::DropItem(*(_DWORD **)(this + 440), a2, a3, a4, (_DWORD *)this, 1, v6, 0, 0);
      }
      else
      {
        v4 = std___Mpunct_wchar_t___do_frac_digits(a1);
        CInitMonster::DropItem(*(_DWORD **)(this + 440), a2, a3, a4, (_DWORD *)this, 0, v4, 0, 0);
      }
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
      CChar::WriteInSight(a2, a3, a4, this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else
    {
LABEL_10:
      CChar::Unlock(this);
    }
  }
}

//----- (00441C70) --------------------------------------------------------
void __userpurge CMonsterItem::Add(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  std::pair<char const * const,CItem *> *v5; // eax
  char v7[8]; // [esp+4h] [ebp-18h] BYREF
  char *_Val1; // [esp+Ch] [ebp-10h] BYREF
  CItem *_Val2; // [esp+10h] [ebp-Ch] BYREF
  char v10[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef((volatile int *)this, ebx0, a3, a4);
  CMonsterObject::Insert((int)dword_4E1998, ebx0, a3, a4, (CLink *)(this + 428));
  CRWLock::WriteLock((CRWLock *)&unk_4E1858);
  _Val2 = (CItem *)this;
  _Val1 = *(char **)(this + 28);
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v10,
    (const char *const *)&_Val1,
    &_Val2);
  sub_445DF0(
    dword_4E184C,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v7,
    v5);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E1858, ebx0, a3, a4);
}
// 441CC7: variable 'v5' is possibly undefined
// 4E1998: using guessed type int dword_4E1998[26];

//----- (00441CE0) --------------------------------------------------------
void __usercall CMonsterItem::Remove(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  CMonster::Remove(this, a2, a3, a4);
  CRWLock::ReadLock((CRWLock *)&unk_4E187C);
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1870,
    v8,
    this + 111);
  v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1870, v7);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v8,
         v4) )
  {
    v5 = sub_420250(v8);
    InterlockedDecrement((volatile LONG *)(*(_DWORD *)(v5 + 4) + 48));
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E187C, a2, a3, a4);
}

//----- (00441D60) --------------------------------------------------------
CMonsterMagic *__thiscall CMonsterMagic::CMonsterMagic(CMonsterMagic *this, int a2, int a3, int a4, int a5, int a6)
{
  CMonsterNotReal::CMonsterNotReal(this);
  *(_DWORD *)this = &off_4B8680;
  *((_DWORD *)this + 79) = a2;
  *((_DWORD *)this + 80) = a3;
  *((_DWORD *)this + 87) = a4;
  *((_DWORD *)this + 117) = a6 + GetTickCount();
  *((_DWORD *)this + 34) = a5;
  *((_DWORD *)this + 35) = a5;
  *((_DWORD *)this + 133) = 0;
  return this;
}
// 4B8680: using guessed type int (__stdcall *off_4B8680)(int);

//----- (00441DE0) --------------------------------------------------------
CMonsterMagic *__usercall CMonsterMagic::Create@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, int a2, int *a3, int a4, int a5, int a6, int a7)
{
  CMonsterMagic *result; // eax
  void *v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // [esp-30h] [ebp-5Ch]
  int v16; // [esp-2Ch] [ebp-58h]
  int v17; // [esp-28h] [ebp-54h]
  int v18; // [esp-24h] [ebp-50h]
  int v19; // [esp-20h] [ebp-4Ch]
  int v20; // [esp-1Ch] [ebp-48h]
  int v21; // [esp-18h] [ebp-44h]
  int v22; // [esp-14h] [ebp-40h]
  int v23; // [esp-10h] [ebp-3Ch]
  CMonsterMagic *v24; // [esp+4h] [ebp-28h]
  CMemory **v25; // [esp+10h] [ebp-1Ch]
  char v26[4]; // [esp+14h] [ebp-18h] BYREF
  int v27[2]; // [esp+18h] [ebp-14h] BYREF
  _DWORD *v28; // [esp+20h] [ebp-Ch]
  char v29[4]; // [esp+24h] [ebp-8h] BYREF
  CMonsterMagic *v30; // [esp+28h] [ebp-4h]

  v28 = (_DWORD *)sub_491080(a2);
  if ( v28 )
  {
    if ( CSMap::IsValidTile(v28, a3, 0) )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, esi0);
      sub_44AE20(
        (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1820,
        v29,
        &a1);
      v11 = sub_430C20(dword_4E1820, v26);
      if ( (unsigned __int8)unknown_libname_16(v11) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, esi0);
        result = 0;
      }
      else
      {
        v25 = operator_new(0x218u);
        if ( v25 )
          v24 = CMonsterMagic::CMonsterMagic((CMonsterMagic *)v25, a2, (int)v28, a4, a6, a7);
        else
          v24 = 0;
        v30 = v24;
        CChar::SetXY(v24, a3);
        v12 = sub_420250(v29);
        (*(void (__thiscall **)(CMonsterMagic *, _DWORD))(*(_DWORD *)v30 + 192))(v30, *(_DWORD *)(v12 + 4));
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, esi0);
        CChar::Lock((int)v30);
        v27[0] = *a3 >> 5;
        v27[1] = a3[1] >> 5;
        if ( sub_491360(*((_DWORD **)v30 + 80), ebx0, edi0, esi0, (int)v30, v27) )
        {
          (*(void (__thiscall **)(CMonsterMagic *, int))(*(_DWORD *)v30 + 196))(v30, a5);
          v13 = (*(int (__thiscall **)(CMonsterMagic *))(*(_DWORD *)v30 + 240))(v30);
          v23 = (*(int (__thiscall **)(CMonsterMagic *, _DWORD, _DWORD, int))(*(_DWORD *)v30 + 224))(
                  v30,
                  *(_DWORD *)(*((_DWORD *)v30 + 110) + 64),
                  *((_DWORD *)v30 + 131),
                  v13);
          v22 = *((_DWORD *)v30 + 73);
          v21 = *((_DWORD *)v30 + 72);
          v20 = *((_DWORD *)v30 + 70);
          v19 = CChar::GetMaxHP(v30);
          v18 = *((_DWORD *)v30 + 68);
          v17 = *((_DWORD *)v30 + 87);
          v16 = *((_DWORD *)v30 + 84);
          v15 = *((_DWORD *)v30 + 83);
          v14 = std___Mpunct_wchar_t___do_frac_digits(v30);
          CChar::WriteInSight(
            ebx0,
            edi0,
            esi0,
            (int)v30,
            51,
            "wdddwdddIsbds",
            *(_DWORD *)(*((_DWORD *)v30 + 110) + 60),
            v14,
            v15,
            v16,
            v17,
            v18,
            v19,
            v20,
            v21,
            v22,
            v23);
          CChar::Unlock((int)v30);
          result = v30;
        }
        else
        {
          CChar::Unlock((int)v30);
          if ( v30 )
            (**(void (__thiscall ***)(CMonsterMagic *, int))v30)(v30, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CMonsterMagic::Create() not find Map (map:%d)", a2);
    result = 0;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00442030) --------------------------------------------------------
void __usercall CMonsterMagic::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( !CMonster::IsRemoved(this) )
  {
    CChar::Lock(this);
    if ( *(_DWORD *)(this + 468) < GetTickCount() )
    {
LABEL_3:
      CChar::Unlock(this);
      CChar::WriteInSight(a2, a3, a4, this, 61, "db", *(_DWORD *)(this + 28), 9);
      CBase::Delete((char *)this);
      return;
    }
    if ( *(_DWORD *)(this + 484) )
    {
      if ( CBase::IsDeleted(*(_DWORD **)(this + 484)) )
        goto LABEL_3;
      (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)(this + 492) + 72))(*(_DWORD *)(this + 492), this, this);
    }
    CChar::Unlock(this);
  }
}

//----- (00442110) --------------------------------------------------------
int __thiscall CMonsterMagic::SetProperty(int this, int a2)
{
  *(_DWORD *)(this + 440) = a2;
  strcpy((char *)(this + 32), (const char *)(a2 + 32));
  sub_480A80((int *)(this + 488), this);
  return sub_480A00(this + 488);
}

//----- (00442160) --------------------------------------------------------
void __userpurge CMonsterMagic::Add(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  std::pair<char const * const,CItem *> *v5; // eax
  char v7[8]; // [esp+4h] [ebp-18h] BYREF
  char *_Val1; // [esp+Ch] [ebp-10h] BYREF
  CItem *_Val2; // [esp+10h] [ebp-Ch] BYREF
  char v10[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef((volatile int *)this, ebx0, a3, a4);
  CMonsterObject::Insert((int)dword_4E1A00, ebx0, a3, a4, (CLink *)(this + 428));
  CRWLock::WriteLock((CRWLock *)&unk_4E1858);
  _Val2 = (CItem *)this;
  _Val1 = *(char **)(this + 28);
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v10,
    (const char *const *)&_Val1,
    &_Val2);
  sub_445DF0(
    dword_4E184C,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v7,
    v5);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E1858, ebx0, a3, a4);
  if ( a2 )
  {
    CIOObject::AddRef((volatile int *)a2, ebx0, a3, a4);
    *(_DWORD *)(this + 484) = a2;
  }
}
// 4421B7: variable 'v5' is possibly undefined
// 4E1A00: using guessed type int dword_4E1A00[25];

//----- (004421F0) --------------------------------------------------------
void __usercall CMonsterBlackBug::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  DWORD v7; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CChar::RefreshBuff((int)this, a2, a3, a4);
    CChar::Lock((int)this);
    v7 = GetTickCount();
    if ( CChar::IsGState(this, 0x2000) && v7 >= this[139] )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 0x2000);
      CChar::Unlock((int)this);
    }
    else
    {
      v5 = CChar::GetMaxHP(this);
      if ( this[68] < v5 && v7 >= this[118] )
      {
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility((int)this, a2, a3, a4);
      }
      if ( !unknown_libname_10(this + 122) )
      {
        CMonsterEgg::OnSummon(this, a2, a3, a4);
        v6 = -1;
        if ( !this[166] )
          this[166] = v7 + 12000;
        if ( this[166] <= v7 )
        {
          this[166] = v7 + 120000;
          if ( this[120] != 4 )
            v6 = 16;
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970(this + 122, v6) )
            this[120] = 5;
        }
      }
      CChar::Unlock((int)this);
    }
  }
}
// 442315: conditional instruction was optimized away because of '%var_8.4==FFFFFFFF'

//----- (00442360) --------------------------------------------------------
void __userpurge CMonsterReal::Die(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int *a4, int *a5)
{
  int v8; // eax
  int v10; // [esp+4h] [ebp-4h] BYREF

  *(_DWORD *)(this + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 76))(a2, *(_DWORD *)(this + 28), a3);
  v10 = 0;
  CMonsterReal::AllotExp(this, ebx0, edi0, esi0, a4, a5, &v10);
  v8 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 164))(a2);
  CInitMonster::DropItem(*(_DWORD **)(this + 440), ebx0, edi0, esi0, (_DWORD *)this, *a4, *a5, v10, v8);
  CChar::CancelAllBuff(this, ebx0, edi0, esi0);
  CChar::WriteInSight(ebx0, edi0, esi0, this, 61, "db", *(_DWORD *)(this + 28), 9);
}

//----- (00442410) --------------------------------------------------------
int __userpurge CMonsterBlackBug::Damage@<eax>(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7)
{
  int result; // eax
  int v11; // [esp+0h] [ebp-20h]
  int v12; // [esp+4h] [ebp-1Ch]
  int v14; // [esp+Ch] [ebp-14h] BYREF
  int v15; // [esp+10h] [ebp-10h] BYREF
  int v16; // [esp+14h] [ebp-Ch]
  int v17; // [esp+18h] [ebp-8h]
  int v18; // [esp+1Ch] [ebp-4h]

  if ( (*(int (__thiscall **)(char *))(*(_DWORD *)this + 252))(this) )
    return 1;
  if ( a7 )
    v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v12 = 1;
  v16 = v12;
  v18 = CChar::GetFinalDamage(this, a2, a3, v12);
  if ( v18 > 0 )
  {
    CMonsterReal::ManageBuff(this, ebx0, edi0, esi0);
    CChar::Lock((int)this);
    if ( CMonsterReal::ApplyDamage((int)this, ebx0, edi0, esi0, (int)a2, a3, v18, a4, (int)a5, a6, a7) )
    {
      v17 = *a6 + *a4;
      if ( a7 )
      {
        v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 24))(a7);
        (*(void (__thiscall **)(char *, _DWORD *, int, int))(*(_DWORD *)this + 212))(this, a2, v17, v11);
      }
      else
      {
        (*(void (__thiscall **)(char *, _DWORD *, int, _DWORD))(*(_DWORD *)this + 212))(this, a2, v17, 0);
      }
      if ( *((int *)this + 68) > 0 )
      {
        (*(void (__thiscall **)(char *, int, int))(*(_DWORD *)this + 256))(this, v17, v16);
        CChar::Unlock((int)this);
      }
      else
      {
        v15 = 0;
        v14 = 0;
        if ( RandomBetween(1, 100) > 60 )
        {
          (*(void (__thiscall **)(char *, int, _DWORD, int, int))(*(_DWORD *)this + 232))(this, 312, 0, 3, 1);
          CMonsterEgg::OnSummon(this, ebx0, edi0, esi0);
        }
        (*(void (__thiscall **)(char *, _DWORD *, _DWORD, int *, int *))(*(_DWORD *)this + 236))(
          this,
          a2,
          *a5,
          &v15,
          &v14);
        CChar::Unlock((int)this);
        CMonsterReal::AllotTransformExp(this, ebx0, edi0, esi0, v15, v14);
        CBase::Delete(this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock((int)this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (004425E0) --------------------------------------------------------
void __userpurge CMonsterBlackBug::UpdateChild(volatile int *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  if ( !CBase::IsDeleted(this) )
  {
    CChar::Lock((int)this);
    for ( i = (_DWORD *)*((_DWORD *)this + 167); i && i[8] != a2; i = (_DWORD *)i[21] )
      ;
    if ( i )
    {
      --i[11];
      --i[12];
    }
    CChar::Unlock((int)this);
  }
  CChar::UpdateChild(this, ebx0, a3, a4, a2);
}

//----- (00442670) --------------------------------------------------------
CGenMonster *__thiscall CMonsterBlackBug::Summon(_DWORD *this, int a2, int a3, int a4, int a5)
{
  CGenMonster *result; // eax
  CGenMonster *v6; // [esp+0h] [ebp-14h]
  CMemory **v8; // [esp+8h] [ebp-Ch]
  CGenMonster *i; // [esp+10h] [ebp-4h]

  for ( i = (CGenMonster *)this[167]; i && *((_DWORD *)i + 8) != a2; i = (CGenMonster *)*((_DWORD *)i + 21) )
    ;
  if ( i )
  {
    result = i;
    *((_DWORD *)i + 11) += a5;
    if ( *((_DWORD *)i + 11) > a4 )
    {
      result = i;
      *((_DWORD *)i + 11) = a4;
    }
  }
  else
  {
    v8 = operator_new(0x58u);
    if ( v8 )
      v6 = CGenMonster::CGenMonster((CGenMonster *)v8, this, a2, a3, a5);
    else
      v6 = 0;
    *((_DWORD *)v6 + 21) = this[167];
    result = v6;
    this[167] = v6;
  }
  return result;
}

//----- (00442730) --------------------------------------------------------
void __thiscall CMonsterSiegeGunRuins::AI(int *this)
{
  if ( !CMonster::IsRemoved((int)this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((int)this);
    if ( this[116] )
    {
      if ( !CChar::IsNormal(this[116]) )
      {
        (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
        (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
      }
    }
    CChar::Unlock((int)this);
  }
}

//----- (004427C0) --------------------------------------------------------
void __usercall CMonsterEgg::Tick(char *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+8h] [ebp-8h]
  DWORD v6; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CChar::Lock((int)this);
    v6 = GetTickCount();
    if ( *((_DWORD *)this + 117) >= GetTickCount() )
    {
      v5 = CChar::GetMaxHP(this);
      if ( *((_DWORD *)this + 68) < v5 && v6 >= *((_DWORD *)this + 118) )
      {
        (*(void (__cdecl **)(char *, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility((int)this, a2, a3, a4);
      }
      CChar::Unlock((int)this);
    }
    else
    {
      (*(void (__thiscall **)(char *, _DWORD, _DWORD))(*(_DWORD *)this + 76))(this, *((_DWORD *)this + 7), 0);
      (*(void (__thiscall **)(char *, int, int, int, int))(*(_DWORD *)this + 232))(this, 313, 1, 3, 2);
      CMonsterEgg::OnSummon(this, a2, a3, a4);
      CChar::CancelAllBuff((int)this, a2, a3, a4);
      CChar::WriteInSight(a2, a3, a4, (int)this, 61, "db", *((_DWORD *)this + 7), 9);
      CChar::Unlock((int)this);
      CBase::Delete(this);
    }
  }
}

//----- (004428D0) --------------------------------------------------------
_DWORD *__userpurge CMonsterEgg::Summon@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5)
{
  CGenMonster *v9; // [esp+0h] [ebp-14h]
  CMemory **v11; // [esp+8h] [ebp-Ch]
  _DWORD *i; // [esp+10h] [ebp-4h]

  for ( i = (_DWORD *)this[167]; i && i[8] != a2; i = (_DWORD *)i[21] )
    ;
  if ( i )
  {
    i[11] += a5;
    if ( i[11] > a4 )
      i[11] = a4;
  }
  else
  {
    v11 = operator_new(0x58u);
    if ( v11 )
      v9 = CGenMonster::CGenMonster((CGenMonster *)v11, this, a2, a3, a5);
    else
      v9 = 0;
    *((_DWORD *)v9 + 21) = this[167];
    this[167] = v9;
  }
  return CMonsterEgg::OnSummon(this, ebx0, edi0, esi0);
}

//----- (004429A0) --------------------------------------------------------
_DWORD *__usercall CMonsterEgg::OnSummon@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  _DWORD *result; // eax
  int j; // [esp+4h] [ebp-8h]
  _DWORD *i; // [esp+8h] [ebp-4h]

  result = this;
  for ( i = (_DWORD *)this[167]; i; i = result )
  {
    for ( j = 0; j < 3 && i[12] < i[11] && CMonster::Create(a2, a3, a4, i, (int)this); ++j )
      InterlockedIncrement(i + 12);
    result = (_DWORD *)i[21];
  }
  return result;
}

//----- (00442A20) --------------------------------------------------------
void __usercall CMonsterCocoon::Tick(char *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-8h]
  DWORD v6; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CChar::RefreshBuff((int)this, a2, a3, a4);
    CChar::Lock((int)this);
    v6 = GetTickCount();
    if ( v6 < *((_DWORD *)this + 166) )
    {
      v5 = CChar::GetMaxHP(this);
      if ( *((_DWORD *)this + 68) < v5 && v6 >= *((_DWORD *)this + 118) )
      {
        (*(void (__cdecl **)(char *, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility((int)this, a2, a3, a4);
      }
      CChar::Unlock((int)this);
    }
    else
    {
      CChar::WriteInSight(a2, a3, a4, (int)this, 61, "db", *((_DWORD *)this + 7), 9);
      CChar::Unlock((int)this);
      CBase::Delete(this);
    }
  }
}

//----- (00442AF0) --------------------------------------------------------
void __usercall CMonsterMaguniMaster::Create(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2)
{
  void *v5; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // eax
  int v9; // [esp-30h] [ebp-6Ch]
  int v10; // [esp-2Ch] [ebp-68h]
  int v11; // [esp-28h] [ebp-64h]
  int v12; // [esp-24h] [ebp-60h]
  int v13; // [esp-20h] [ebp-5Ch]
  int v14; // [esp-1Ch] [ebp-58h]
  int v15; // [esp-18h] [ebp-54h]
  int v16; // [esp-14h] [ebp-50h]
  int v17; // [esp-10h] [ebp-4Ch]
  CMonsterMaguniMaster *v18; // [esp+4h] [ebp-38h]
  char v19[4]; // [esp+10h] [ebp-2Ch] BYREF
  int v20; // [esp+14h] [ebp-28h] BYREF
  CMemory **v21; // [esp+18h] [ebp-24h]
  int v22; // [esp+1Ch] [ebp-20h]
  int v23[2]; // [esp+20h] [ebp-1Ch] BYREF
  int v24; // [esp+28h] [ebp-14h]
  int v25; // [esp+2Ch] [ebp-10h] BYREF
  int v26; // [esp+30h] [ebp-Ch]
  CMonsterMaguniMaster *v27; // [esp+34h] [ebp-8h]
  char v28[4]; // [esp+38h] [ebp-4h] BYREF

  v24 = sub_491080(4);
  if ( v24 )
  {
    v21 = operator_new(0x2B0u);
    if ( v21 )
      v18 = CMonsterMaguniMaster::CMonsterMaguniMaster((CMonsterMaguniMaster *)v21);
    else
      v18 = 0;
    v27 = v18;
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, a3);
    v20 = 329;
    sub_44AE20(
      (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1820,
      v28,
      &v20);
    v5 = sub_430C20(dword_4E1820, v19);
    if ( (unsigned __int8)unknown_libname_16(v5)
      || (v22 = *(_DWORD *)(sub_420250(v28) + 4), (*(_DWORD *)(v22 + 304) & (1 << dword_4E35B8)) == 0) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, a3);
    }
    else
    {
      v6 = *(_DWORD *)(a1 + 336);
      v25 = *(_DWORD *)(a1 + 332);
      v26 = v6;
      v25 += RandomBetween(0, 16);
      v26 += RandomBetween(0, 16);
      *((_DWORD *)v27 + 79) = 4;
      *((_DWORD *)v27 + 80) = v24;
      CChar::SetXY(v27, &v25);
      CChar::SetDirection(
        v27,
        *(_DWORD *)(a2 + 332) - *(_DWORD *)(a1 + 332),
        *(_DWORD *)(a2 + 336) - *(_DWORD *)(a1 + 336));
      (*(void (__thiscall **)(CMonsterMaguniMaster *, int))(*(_DWORD *)v27 + 192))(v27, v22);
      *((_DWORD *)v27 + 119) = 1;
      memset((char *)v27 + 668, 0, 0x14u);
      *((_DWORD *)v27 + 117) = GetTickCount() + 10000;
      *((_DWORD *)v27 + 139) = *((_DWORD *)v27 + 117);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, edi0, a3);
      CChar::Lock((int)v27);
      v23[0] = v25 >> 5;
      v23[1] = v26 >> 5;
      if ( sub_491360(*((_DWORD **)v27 + 80), ebx0, edi0, a3, (int)v27, v23) )
      {
        (*(void (__thiscall **)(CMonsterMaguniMaster *, _DWORD))(*(_DWORD *)v27 + 196))(v27, 0);
        v7 = (*(int (__thiscall **)(CMonsterMaguniMaster *))(*(_DWORD *)v27 + 240))(v27);
        v17 = (*(int (__thiscall **)(CMonsterMaguniMaster *, int, _DWORD, int))(*(_DWORD *)v27 + 224))(
                v27,
                *(_DWORD *)(*((_DWORD *)v27 + 110) + 64) | 0x80,
                *((_DWORD *)v27 + 131),
                v7);
        v16 = *((_DWORD *)v27 + 73);
        v15 = *((_DWORD *)v27 + 72);
        v14 = *((_DWORD *)v27 + 70);
        v13 = CChar::GetMaxHP(v27);
        v12 = *((_DWORD *)v27 + 68);
        v11 = *((_DWORD *)v27 + 87);
        v10 = *((_DWORD *)v27 + 84);
        v9 = *((_DWORD *)v27 + 83);
        v8 = std___Mpunct_wchar_t___do_frac_digits(v27);
        CChar::WriteInSight(
          ebx0,
          edi0,
          a3,
          (int)v27,
          51,
          "wdddwdddIsbds",
          *(_DWORD *)(*((_DWORD *)v27 + 110) + 60),
          v8,
          v9,
          v10,
          v11,
          v12,
          v13,
          v14,
          v15,
          v16,
          v17);
        CChar::Unlock((int)v27);
      }
      else
      {
        CChar::Unlock((int)v27);
        if ( v27 )
          (**(void (__thiscall ***)(CMonsterMaguniMaster *, int))v27)(v27, 1);
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00442DF0) --------------------------------------------------------
CMonsterMaguniMaster *__thiscall CMonsterMaguniMaster::CMonsterMaguniMaster(CMonsterMaguniMaster *this)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B8A90;
  return this;
}
// 4B8A90: using guessed type int (__stdcall *off_4B8A90)(int);

//----- (00442E10) --------------------------------------------------------
void __usercall CMonsterMaguniMaster::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  DWORD v7; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CChar::RefreshBuff((int)this, a2, a3, a4);
    CChar::Lock((int)this);
    v7 = GetTickCount();
    if ( CChar::IsGState(this, 0x2000) && v7 >= this[139] )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 0x2000);
      CChar::Unlock((int)this);
    }
    else
    {
      v5 = CChar::GetMaxHP(this);
      if ( this[68] < v5 && v7 >= this[118] )
      {
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility((int)this, a2, a3, a4);
      }
      if ( this[119] && !unknown_libname_10(this + 122) && !sub_446110(this + 140) )
      {
        v6 = -1;
        if ( !this[167] )
          this[167] = v7 + 120000;
        if ( this[167] <= v7 )
        {
          this[167] = v7 + 100000;
          if ( RandomBetween(1, 100) <= 90 )
            v6 = 17;
        }
        if ( this[168] <= v7 )
        {
          this[168] = v7 + 18000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 70 )
            v6 = 19;
        }
        if ( this[169] <= v7 )
        {
          this[169] = v7 + 47000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 80 )
            v6 = 20;
        }
        if ( this[170] <= v7 )
        {
          this[170] = v7 + 11000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 80 )
            v6 = 18;
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970(this + 122, v6) )
            this[120] = 5;
        }
      }
      CChar::Unlock((int)this);
    }
  }
}
// 442F4D: conditional instruction was optimized away because of '%var_8.4==FFFFFFFF'

//----- (00443060) --------------------------------------------------------
CMonsterBigBirdMother *__thiscall CMonsterBigBirdMother::CMonsterBigBirdMother(CMonsterBigBirdMother *this)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B9470;
  *((_DWORD *)this + 169) = 0;
  return this;
}
// 4B9470: using guessed type int (__stdcall *off_4B9470)(int);

//----- (00443090) --------------------------------------------------------
void __usercall CMonsterBigBirdMother::Create(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  void *v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp-30h] [ebp-6Ch]
  int v7; // [esp-2Ch] [ebp-68h]
  int v8; // [esp-28h] [ebp-64h]
  int v9; // [esp-24h] [ebp-60h]
  int v10; // [esp-20h] [ebp-5Ch]
  int v11; // [esp-1Ch] [ebp-58h]
  int v12; // [esp-18h] [ebp-54h]
  int v13; // [esp-14h] [ebp-50h]
  int v14; // [esp-10h] [ebp-4Ch]
  CMonsterBigBirdMother *v15; // [esp+4h] [ebp-38h]
  char v16[4]; // [esp+10h] [ebp-2Ch] BYREF
  int v17; // [esp+14h] [ebp-28h] BYREF
  CMemory **v18; // [esp+18h] [ebp-24h]
  int v19; // [esp+1Ch] [ebp-20h]
  int v20[2]; // [esp+20h] [ebp-1Ch] BYREF
  int v21; // [esp+28h] [ebp-14h]
  int v22; // [esp+2Ch] [ebp-10h] BYREF
  int v23; // [esp+30h] [ebp-Ch]
  CMonsterBigBirdMother *v24; // [esp+34h] [ebp-8h]
  char v25[4]; // [esp+38h] [ebp-4h] BYREF

  v21 = sub_491080(4);
  if ( v21 )
  {
    v18 = operator_new(0x2A8u);
    if ( v18 )
      v15 = CMonsterBigBirdMother::CMonsterBigBirdMother((CMonsterBigBirdMother *)v18);
    else
      v15 = 0;
    v24 = v15;
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
    v17 = 317;
    sub_44AE20(
      (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1820,
      v25,
      &v17);
    v3 = sub_430C20(dword_4E1820, v16);
    if ( (unsigned __int8)unknown_libname_16(v3)
      || (v19 = *(_DWORD *)(sub_420250(v25) + 4), (*(_DWORD *)(v19 + 304) & (1 << dword_4E35B8)) == 0) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
    }
    else
    {
      v22 = 20187;
      v23 = 66717;
      *((_DWORD *)v24 + 79) = 4;
      *((_DWORD *)v24 + 80) = v21;
      CChar::SetXY(v24, &v22);
      CChar::SetDirection(v24, -2, 3);
      (*(void (__thiscall **)(CMonsterBigBirdMother *, int))(*(_DWORD *)v24 + 192))(v24, v19);
      *((_DWORD *)v24 + 119) = 1;
      memset((char *)v24 + 664, 0, 0xCu);
      *((_DWORD *)v24 + 117) = GetTickCount() + 10000;
      *((_DWORD *)v24 + 139) = *((_DWORD *)v24 + 117);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
      CChar::Lock((int)v24);
      v20[0] = v22 >> 5;
      v20[1] = v23 >> 5;
      if ( sub_491360(*((_DWORD **)v24 + 80), a1, a2, a3, (int)v24, v20) )
      {
        (*(void (__thiscall **)(CMonsterBigBirdMother *, _DWORD))(*(_DWORD *)v24 + 196))(v24, 0);
        v4 = (*(int (__thiscall **)(CMonsterBigBirdMother *))(*(_DWORD *)v24 + 240))(v24);
        v14 = (*(int (__thiscall **)(CMonsterBigBirdMother *, int, _DWORD, int))(*(_DWORD *)v24 + 224))(
                v24,
                *(_DWORD *)(*((_DWORD *)v24 + 110) + 64) | 0x80,
                *((_DWORD *)v24 + 131),
                v4);
        v13 = *((_DWORD *)v24 + 73);
        v12 = *((_DWORD *)v24 + 72);
        v11 = *((_DWORD *)v24 + 70);
        v10 = CChar::GetMaxHP(v24);
        v9 = *((_DWORD *)v24 + 68);
        v8 = *((_DWORD *)v24 + 87);
        v7 = *((_DWORD *)v24 + 84);
        v6 = *((_DWORD *)v24 + 83);
        v5 = std___Mpunct_wchar_t___do_frac_digits(v24);
        CChar::WriteInSight(
          a1,
          a2,
          a3,
          (int)v24,
          51,
          "wdddwdddIsbds",
          *(_DWORD *)(*((_DWORD *)v24 + 110) + 60),
          v5,
          v6,
          v7,
          v8,
          v9,
          v10,
          v11,
          v12,
          v13,
          v14);
        CChar::Unlock((int)v24);
      }
      else
      {
        CChar::Unlock((int)v24);
        if ( v24 )
          (**(void (__thiscall ***)(CMonsterBigBirdMother *, int))v24)(v24, 1);
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00443340) --------------------------------------------------------
void __usercall CMonsterBigBirdMother::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  DWORD v7; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CChar::RefreshBuff((int)this, a2, a3, a4);
    CChar::Lock((int)this);
    v7 = GetTickCount();
    v5 = CChar::GetMaxHP(this);
    if ( this[68] < v5 && v7 >= this[118] )
    {
      (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 7, 1, v5);
      CMonsterReal::ResetHostility((int)this, a2, a3, a4);
    }
    if ( !unknown_libname_10(this + 122) && !sub_446110(this + 140) )
    {
      (*(void (__thiscall **)(_DWORD *))(*this + 260))(this);
      v6 = -1;
      if ( this[166] <= v7 )
      {
        this[166] = v7 + 30000;
        if ( RandomBetween(1, 100) <= 80 )
          v6 = 21;
      }
      if ( this[167] <= v7 )
      {
        this[167] = v7 + 37000;
        if ( v6 < 0 && RandomBetween(1, 100) <= 90 )
          v6 = 22;
      }
      if ( this[168] <= v7 )
      {
        this[168] = v7 + 72000;
        if ( v6 < 0 && RandomBetween(1, 100) <= 80 )
          v6 = 23;
      }
      if ( v6 >= 0 )
      {
        if ( sub_480970(this + 122, v6) )
          this[120] = 5;
      }
    }
    CChar::Unlock((int)this);
  }
}
// 443426: conditional instruction was optimized away because of '%var_8.4==FFFFFFFF'

//----- (004434F0) --------------------------------------------------------
CGenMonster *__thiscall CMonsterBigBirdMother::Summon(_DWORD *this, int a2, int a3, int a4, int a5)
{
  CGenMonster *result; // eax
  CGenMonster *v6; // [esp+0h] [ebp-14h]
  CMemory **v8; // [esp+8h] [ebp-Ch]
  CGenMonster *i; // [esp+10h] [ebp-4h]

  for ( i = (CGenMonster *)this[169]; i && *((_DWORD *)i + 8) != a2; i = (CGenMonster *)*((_DWORD *)i + 21) )
    ;
  if ( i )
  {
    result = i;
    *((_DWORD *)i + 11) += a5;
    if ( *((_DWORD *)i + 11) > a4 )
    {
      result = i;
      *((_DWORD *)i + 11) = a4;
    }
  }
  else
  {
    v8 = operator_new(0x58u);
    if ( v8 )
      v6 = CGenMonster::CGenMonster((CGenMonster *)v8, this, a2, a3, a5);
    else
      v6 = 0;
    *((_DWORD *)v6 + 21) = this[169];
    result = v6;
    this[169] = v6;
  }
  return result;
}

//----- (004435B0) --------------------------------------------------------
_DWORD *__usercall CMonsterBigBirdMother::OnSummon@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  _DWORD *result; // eax
  int j; // [esp+4h] [ebp-8h]
  _DWORD *i; // [esp+8h] [ebp-4h]

  result = this;
  for ( i = (_DWORD *)this[169]; i; i = result )
  {
    for ( j = 0; j < 3 && i[12] < i[11] && CMonster::Create(a2, a3, a4, i, (int)this); ++j )
      InterlockedIncrement(i + 12);
    result = (_DWORD *)i[21];
  }
  return result;
}

//----- (00443630) --------------------------------------------------------
int __usercall CMonsterBigBirdMother::Move@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int result; // eax
  unsigned int v5; // [esp+8h] [ebp-48h]
  int v6; // [esp+18h] [ebp-38h]
  __int64 v7; // [esp+1Ch] [ebp-34h]
  int Number[2]; // [esp+28h] [ebp-28h] BYREF
  __int64 v10; // [esp+30h] [ebp-20h]
  int v11; // [esp+3Ch] [ebp-14h] BYREF
  __int64 v12; // [esp+40h] [ebp-10h]
  int v13; // [esp+48h] [ebp-8h]
  unsigned int v14; // [esp+4Ch] [ebp-4h]

  v7 = CChar::IsMState((_QWORD *)this, 0x10000300i64);
  result = HIDWORD(v7) | v7;
  if ( !v7 )
  {
    result = GetTickCount();
    v14 = result;
    v6 = *(_DWORD *)(this + 480);
    switch ( v6 )
    {
      case 1:
        result = this;
        if ( v14 >= *(_DWORD *)(this + 556) )
        {
          result = (int)CMonsterReal::ScanSight((int *)this, a2, a3, a4);
          v13 = result;
          if ( result )
          {
            *(_DWORD *)(this + 656) = 0;
            result = (*(int (__thiscall **)(int, int))(*(_DWORD *)this + 188))(this, v13);
          }
        }
        break;
      case 2:
        if ( !dword_4E1A68 )
        {
          result = v14;
          dword_4E1A68 = v14;
        }
        if ( v14 >= *(_DWORD *)(this + 556) )
        {
          v12 = sub_43D870((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 464) + 332));
          if ( *(_DWORD *)(this + 316) == *(_DWORD *)(*(_DWORD *)(this + 464) + 316)
            && v12 <= *(_DWORD *)(this + 548) * *(_DWORD *)(this + 548) )
          {
            result = *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312);
            v5 = result;
            if ( SHIDWORD(v12) > result >> 31 || SHIDWORD(v12) >= result >> 31 && (result = v12, (unsigned int)v12 > v5) )
            {
              *(_DWORD *)(this + 480) = 1;
              *(_DWORD *)(this + 556) = v14;
              result = v14;
              *(_DWORD *)(this + 468) = v14;
            }
            else
            {
              *(_DWORD *)(this + 480) = 4;
              dword_4E1A68 = 0;
            }
          }
          else
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
            result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
            dword_4E1A68 = 0;
          }
        }
        break;
      case 7:
        if ( *(_DWORD *)(this + 512) == 290 )
        {
          result = this;
          if ( v14 >= *(_DWORD *)(this + 556) )
          {
            v10 = sub_43D870((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 484) + 332));
            if ( v10 > *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312) )
            {
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, *(_DWORD *)(this + 484));
              v11 = (*(int (__thiscall **)(int, int))(*(_DWORD *)this + 152))(this, 1);
              if ( !CMonsterReal::GetChasePt(this, a2, a3, a4, Number, (unsigned int *)&v11)
                || (result = sub_4925C0(
                               *(char **)(this + 320),
                               a2,
                               a3,
                               a4,
                               (Concurrency::details::_CancellationTokenRegistration *)this,
                               Number[0],
                               Number[1],
                               0,
                               1)) == 0 )
              {
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
                result = this;
                *(_DWORD *)(this + 480) = 1;
              }
            }
            else
            {
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
              result = this;
              *(_DWORD *)(this + 480) = 1;
            }
          }
        }
        else
        {
          *(_DWORD *)(this + 480) = 1;
        }
        break;
    }
  }
  return result;
}
// 4E1A68: using guessed type int dword_4E1A68;

//----- (00443970) --------------------------------------------------------
int __userpurge CMonsterBigBirdMother::Damage@<eax>(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7)
{
  int result; // eax
  int v11; // [esp+0h] [ebp-18h]
  int v12; // [esp+4h] [ebp-14h]
  int v14; // [esp+10h] [ebp-8h]
  int v15; // [esp+14h] [ebp-4h]

  if ( (*(int (__thiscall **)(char *))(*(_DWORD *)this + 252))(this) )
    return 1;
  if ( a7 )
    v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v12 = 1;
  v15 = CChar::GetFinalDamage(this, a2, a3, v12);
  if ( v15 > 0 )
  {
    CMonsterReal::ManageBuff(this, ebx0, edi0, esi0);
    CChar::Lock((int)this);
    if ( CMonsterReal::ApplyDamage((int)this, ebx0, edi0, esi0, (int)a2, a3, v15, a4, (int)a5, a6, a7) )
    {
      v14 = *a6 + *a4;
      if ( a7 )
      {
        v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 24))(a7);
        (*(void (__thiscall **)(char *, _DWORD *, int, int))(*(_DWORD *)this + 212))(this, a2, v14, v11);
      }
      else
      {
        (*(void (__thiscall **)(char *, _DWORD *, int, _DWORD))(*(_DWORD *)this + 212))(this, a2, v14, 0);
      }
      if ( *((int *)this + 68) > 0 )
      {
        (*(void (__thiscall **)(char *, int, int))(*(_DWORD *)this + 256))(this, v14, v12);
        CChar::Unlock((int)this);
      }
      else
      {
        *((_DWORD *)this + 68) = 0;
        (*(void (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*a2 + 76))(a2, *((_DWORD *)this + 7), *a5);
        CChar::CancelAllBuff((int)this, ebx0, edi0, esi0);
        CChar::WriteInSight(ebx0, edi0, esi0, (int)this, 61, "db", *((_DWORD *)this + 7), 9);
        CChar::Unlock((int)this);
        CBase::Delete(this);
        Sleep(5500u);
        CMonsterBigBirdMaster::Create(ebx0, edi0, esi0, *((_DWORD *)this + 116));
      }
      result = 1;
    }
    else
    {
      CChar::Unlock((int)this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (00443B30) --------------------------------------------------------
unsigned int __usercall CMonsterBigBirdMother::Attack@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  unsigned int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-6Ch]
  int v9; // [esp-8h] [ebp-68h]
  int v10; // [esp-4h] [ebp-64h]
  __int64 v11; // [esp+24h] [ebp-3Ch]
  int v13; // [esp+30h] [ebp-30h] BYREF
  int v14; // [esp+34h] [ebp-2Ch] BYREF
  CIOObject *v15; // [esp+38h] [ebp-28h]
  int v16; // [esp+3Ch] [ebp-24h] BYREF
  int v17; // [esp+40h] [ebp-20h]
  int v18; // [esp+44h] [ebp-1Ch]
  int v19; // [esp+48h] [ebp-18h]
  int v20; // [esp+4Ch] [ebp-14h]
  __int64 v21; // [esp+50h] [ebp-10h]
  unsigned int v22; // [esp+5Ch] [ebp-4h]

  v11 = CChar::IsMState((_QWORD *)this, 0x10000100i64);
  result = HIDWORD(v11) | v11;
  if ( !v11 )
  {
    result = GetTickCount();
    v22 = result;
    if ( result >= *(_DWORD *)(this + 468) )
    {
      v21 = sub_43D870((_DWORD *)(this + 332), (_DWORD *)(*(_DWORD *)(this + 464) + 332));
      if ( *(_DWORD *)(this + 316) == *(_DWORD *)(*(_DWORD *)(this + 464) + 316)
        && v21 <= *(_DWORD *)(this + 548) * *(_DWORD *)(this + 548)
        && v21 <= *(_DWORD *)(this + 312) * *(_DWORD *)(this + 312)
        && *(_DWORD *)(this + 464) != *(_DWORD *)(this + 484) )
      {
        *(_DWORD *)(this + 468) = v22 + CChar::GetASpeed((_DWORD *)this);
        *(_DWORD *)(this + 556) = *(_DWORD *)(this + 468);
        result = (unsigned int)sub_4934F0(
                                 *(char **)(*(_DWORD *)(this + 464) + 320),
                                 a2,
                                 a3,
                                 a4,
                                 (_DWORD *)(*(_DWORD *)(this + 464) + 324),
                                 20);
        v20 = result;
        v19 = 0;
        while ( v20 )
        {
          result = ++v19;
          if ( v19 >= 7 )
            break;
          v15 = (CIOObject *)unknown_libname_15(v20);
          if ( !CChar::IsMState(v15, 0x80000i64) )
          {
            CIOObject::AddRef(v15, a2, a3, a4, (volatile int *)v15 + 88);
            v16 = 0;
            v13 = 0;
            v18 = 0;
            v17 = 0;
            v14 = (*(int (__thiscall **)(int, CIOObject *))(*(_DWORD *)this + 168))(this, v15);
            v17 = (*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v15 + 148))(v15, this);
            if ( !v17 )
            {
              if ( (*(int (__thiscall **)(CIOObject *))(*(_DWORD *)v15 + 60))(v15) )
              {
                if ( CChar::IsBState(v15, 0x8000i64) ? CChar::CheckHit(this, v15, -5) : CChar::CheckHit(this, v15, 0) )
                {
                  CChar::Unlock(this);
                  v6 = CChar::GetAttack((void *)this);
                  v18 = (*(int (__thiscall **)(CIOObject *, int, int, int *, int *, int *, _DWORD))(*(_DWORD *)v15 + 72))(
                          v15,
                          this,
                          v6,
                          &v16,
                          &v13,
                          &v14,
                          0);
                  CChar::Lock(this);
                }
              }
              if ( !v18 )
                (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v15 + 80))(v15, this);
              if ( v18 )
              {
                v10 = v18 | (2 * v13) | (4 * v17);
                v9 = v14;
                v8 = v16;
                v7 = std___Mpunct_wchar_t___do_frac_digits(v15);
                CChar::WriteInSight(a2, a3, a4, this, 62, "ddwwb", *(_DWORD *)(this + 28), v7, v8, v9, v10);
              }
              CIOObject::Release(v15, a2, a3, a4, (volatile int *)v15 + 88);
            }
          }
          result = CBaseList::Pop(v20, a2, a3, a4);
          v20 = result;
        }
      }
      else
      {
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 132))(this, *(_DWORD *)(this + 464));
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)this + 188))(this, 0);
        result = this;
        *(_DWORD *)(this + 480) = 1;
      }
    }
  }
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (00443EE0) --------------------------------------------------------
void __usercall CMonsterFireFlower::Tick(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-8h]
  DWORD v6; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::Lock(this);
    v5 = -1;
    v6 = GetTickCount();
    if ( *(_DWORD *)(this + 664) <= v6 )
    {
      v5 = 34;
      *(_DWORD *)(this + 664) = v6 + 12000;
      *(_DWORD *)(this + 668) = v6 + 7000;
    }
    if ( *(_DWORD *)(this + 668) <= v6 && *(_DWORD *)(this + 668) )
    {
      CChar::WriteInSight(a2, a3, a4, this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else
    {
      if ( v5 >= 0 )
      {
        if ( sub_480970((int *)(this + 488), v5) )
          *(_DWORD *)(this + 480) = 5;
      }
      CChar::Unlock(this);
    }
  }
}

//----- (00443FD0) --------------------------------------------------------
void __usercall CMonsterBigBirdMaster::Create(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1)
{
  void *v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // [esp-30h] [ebp-6Ch]
  int v8; // [esp-2Ch] [ebp-68h]
  int v9; // [esp-28h] [ebp-64h]
  int v10; // [esp-24h] [ebp-60h]
  int v11; // [esp-20h] [ebp-5Ch]
  int v12; // [esp-1Ch] [ebp-58h]
  int v13; // [esp-18h] [ebp-54h]
  int v14; // [esp-14h] [ebp-50h]
  int v15; // [esp-10h] [ebp-4Ch]
  CMonsterBigBirdMaster *v16; // [esp+4h] [ebp-38h]
  char v17[4]; // [esp+10h] [ebp-2Ch] BYREF
  int v18; // [esp+14h] [ebp-28h] BYREF
  CMemory **v19; // [esp+18h] [ebp-24h]
  int v20; // [esp+1Ch] [ebp-20h]
  int v21[2]; // [esp+20h] [ebp-1Ch] BYREF
  int v22; // [esp+28h] [ebp-14h]
  int v23; // [esp+2Ch] [ebp-10h] BYREF
  int v24; // [esp+30h] [ebp-Ch]
  CMonsterBigBirdMaster *v25; // [esp+34h] [ebp-8h]
  char v26[4]; // [esp+38h] [ebp-4h] BYREF

  v22 = sub_491080(4);
  if ( v22 )
  {
    v19 = operator_new(0x2B0u);
    if ( v19 )
      v16 = CMonsterBigBirdMaster::CMonsterBigBirdMaster((CMonsterBigBirdMaster *)v19);
    else
      v16 = 0;
    v25 = v16;
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C, ebx0, a2, a3);
    v18 = 318;
    sub_44AE20(
      (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1820,
      v26,
      &v18);
    v4 = sub_430C20(dword_4E1820, v17);
    if ( (unsigned __int8)unknown_libname_16(v4)
      || (v20 = *(_DWORD *)(sub_420250(v26) + 4), (*(_DWORD *)(v20 + 304) & (1 << dword_4E35B8)) == 0) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, a2, a3);
    }
    else
    {
      v23 = 20187;
      v24 = 66717;
      *((_DWORD *)v25 + 79) = 4;
      *((_DWORD *)v25 + 80) = v22;
      CChar::SetXY(v25, &v23);
      CChar::SetDirection(v25, -2, 3);
      (*(void (__thiscall **)(CMonsterBigBirdMaster *, int))(*(_DWORD *)v25 + 192))(v25, v20);
      *((_DWORD *)v25 + 119) = 1;
      *((_DWORD *)v25 + 116) = a1;
      memset((char *)v25 + 668, 0, 0x10u);
      *((_DWORD *)v25 + 117) = GetTickCount() + 10000;
      *((_DWORD *)v25 + 139) = *((_DWORD *)v25 + 117);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C, ebx0, a2, a3);
      CChar::Lock((int)v25);
      v21[0] = v23 >> 5;
      v21[1] = v24 >> 5;
      if ( sub_491360(*((_DWORD **)v25 + 80), ebx0, a2, a3, (int)v25, v21) )
      {
        (*(void (__thiscall **)(CMonsterBigBirdMaster *, _DWORD))(*(_DWORD *)v25 + 196))(v25, 0);
        v5 = (*(int (__thiscall **)(CMonsterBigBirdMaster *))(*(_DWORD *)v25 + 240))(v25);
        v15 = (*(int (__thiscall **)(CMonsterBigBirdMaster *, int, _DWORD, int))(*(_DWORD *)v25 + 224))(
                v25,
                *(_DWORD *)(*((_DWORD *)v25 + 110) + 64) | 0x80,
                *((_DWORD *)v25 + 131),
                v5);
        v14 = *((_DWORD *)v25 + 73);
        v13 = *((_DWORD *)v25 + 72);
        v12 = *((_DWORD *)v25 + 70);
        v11 = CChar::GetMaxHP(v25);
        v10 = *((_DWORD *)v25 + 68);
        v9 = *((_DWORD *)v25 + 87);
        v8 = *((_DWORD *)v25 + 84);
        v7 = *((_DWORD *)v25 + 83);
        v6 = std___Mpunct_wchar_t___do_frac_digits(v25);
        CChar::WriteInSight(
          ebx0,
          a2,
          a3,
          (int)v25,
          51,
          "wdddwdddIsbds",
          *(_DWORD *)(*((_DWORD *)v25 + 110) + 60),
          v6,
          v7,
          v8,
          v9,
          v10,
          v11,
          v12,
          v13,
          v14,
          v15);
        CChar::Unlock((int)v25);
      }
      else
      {
        CChar::Unlock((int)v25);
        if ( v25 )
          (**(void (__thiscall ***)(CMonsterBigBirdMaster *, int))v25)(v25, 1);
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00444290) --------------------------------------------------------
CMonsterBigBirdMaster *__thiscall CMonsterBigBirdMaster::CMonsterBigBirdMaster(CMonsterBigBirdMaster *this)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B9578;
  return this;
}
// 4B9578: using guessed type int (__stdcall *off_4B9578)(int);

//----- (004442B0) --------------------------------------------------------
_DWORD *__usercall CMonsterFireFlower::_CMonsterFireFlower@<eax>(void *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  return CMonsterReal::_CMonsterReal((int)this, a2, a3, a4);
}

//----- (004442D0) --------------------------------------------------------
void __usercall CMonsterBigBirdMaster::Tick(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  DWORD v7; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CChar::RefreshBuff((int)this, a2, a3, a4);
    CChar::Lock((int)this);
    v7 = GetTickCount();
    if ( CChar::IsGState(this, 0x2000) && v7 >= this[139] )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 0x2000);
      CChar::Unlock((int)this);
    }
    else
    {
      v5 = CChar::GetMaxHP(this);
      if ( this[68] < v5 && v7 >= this[118] )
      {
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 7, 1, v5);
        CMonsterReal::ResetHostility((int)this, a2, a3, a4);
      }
      if ( this[119] && !unknown_libname_10(this + 122) && !sub_446110(this + 140) )
      {
        v6 = -1;
        if ( !this[167] )
          this[167] = v7;
        if ( this[68] <= 7 * v5 / 10 && !this[170]
          || this[68] <= 4 * v5 / 10 && this[170] == 1
          || this[68] <= v5 / 10 && this[170] == 2 )
        {
          if ( this[68] > v5 / 10 )
          {
            if ( this[68] > 4 * v5 / 10 )
              this[170] = 1;
            else
              this[170] = 2;
          }
          else
          {
            this[170] = 3;
          }
          v6 = 28;
        }
        if ( this[167] <= v7 && v6 < 0 )
          v6 = 25;
        if ( this[168] <= v7 )
          this[168] = v7 + 18000;
        if ( this[169] <= v7 )
        {
          this[169] = v7 + 47000;
          if ( v6 < 0 && RandomBetween(1, 100) <= 80 )
            v6 = 27;
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970(this + 122, v6) )
            this[120] = 5;
        }
      }
      CChar::Unlock((int)this);
    }
  }
}

//----- (00444560) --------------------------------------------------------
void __thiscall CMonsterMaguniMaster::Die(int this, int a2, int a3, int *a4, int *a5)
{
  int v5; // eax
  int v7[2]; // [esp+4h] [ebp-18h] BYREF
  int v8[2]; // [esp+Ch] [ebp-10h] BYREF
  _DWORD *v9; // [esp+14h] [ebp-8h]
  int v10; // [esp+18h] [ebp-4h] BYREF

  *(_DWORD *)(this + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 76))(a2, *(_DWORD *)(this + 28), a3);
  v10 = 0;
  CMonsterReal::AllotExp(this, a4, a5, &v10);
  v5 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 164))(a2);
  CInitMonster::DropItem(*(_DWORD **)(this + 440), (_DWORD *)this, *a4, *a5, v10, v5);
  if ( *(_DWORD *)(*(_DWORD *)(this + 440) + 308) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(this + 440) + 312) )
    {
      v9 = (_DWORD *)CItem::CreateItem(
                       *(_DWORD *)(*(_DWORD *)(this + 440) + 308),
                       0,
                       *(_DWORD *)(*(_DWORD *)(this + 440) + 312),
                       -1);
      if ( v9 )
      {
        CChar::GetDropPt((_DWORD *)this, v7);
        v8[0] = v7[0] >> 5;
        v8[1] = v7[1] >> 5;
        if ( sub_491360(v9, v8) )
        {
          v9[20] = 1;
          (*(void (__thiscall **)(_DWORD *, int, int *, int *, int, int, int))(*v9 + 124))(
            v9,
            this,
            v7,
            v8,
            1,
            *a4,
            *a5);
        }
      }
    }
  }
  CChar::CancelAllBuff(this);
  CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), 9);
}
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);

//----- (004446D0) --------------------------------------------------------
int __thiscall CMonsterSiegeGun::CMonsterSiegeGun(int this, int a2, int a3, int a4, char *Source, int a6)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B8CA0;
  *(_DWORD *)(this + 316) = a2;
  *(_DWORD *)(this + 320) = a3;
  *(_DWORD *)(this + 524) = a4;
  *(_DWORD *)(this + 280) = 0;
  *(_DWORD *)(this + 708) = a6;
  strcpy((char *)(this + 664), Source);
  *(_DWORD *)(this + 684) = 0;
  *(_DWORD *)(this + 712) = 1;
  return this;
}
// 4B8CA0: using guessed type int (__stdcall *off_4B8CA0)(int);

//----- (00444760) --------------------------------------------------------
_DWORD *__cdecl CMonsterSiegeGun::Create(int a1, int a2, int a3, int a4, int a5, char *Source, int a7)
{
  _DWORD *result; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-30h] [ebp-60h]
  int v11; // [esp-2Ch] [ebp-5Ch]
  int v12; // [esp-28h] [ebp-58h]
  int v13; // [esp-24h] [ebp-54h]
  int v14; // [esp-20h] [ebp-50h]
  int v15; // [esp-1Ch] [ebp-4Ch]
  int v16; // [esp-18h] [ebp-48h]
  int v17; // [esp-14h] [ebp-44h]
  _DWORD *v18; // [esp-10h] [ebp-40h]
  int v19; // [esp-Ch] [ebp-3Ch]
  int v20; // [esp-8h] [ebp-38h]
  int v21; // [esp-4h] [ebp-34h]
  _DWORD *v22; // [esp+4h] [ebp-2Ch]
  void *v23; // [esp+10h] [ebp-20h]
  char v24[4]; // [esp+14h] [ebp-1Ch] BYREF
  int v25; // [esp+18h] [ebp-18h]
  int v26[2]; // [esp+1Ch] [ebp-14h] BYREF
  int v27; // [esp+24h] [ebp-Ch]
  char v28[4]; // [esp+28h] [ebp-8h] BYREF
  _DWORD *v29; // [esp+2Ch] [ebp-4h]

  v27 = sub_491080(a2);
  if ( v27 )
  {
    if ( CSMap::IsValidTile((int *)a3, 0) )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C);
      sub_44AE20(v28, &a1);
      v8 = sub_430C20(v24);
      if ( (unsigned __int8)unknown_libname_16(v8)
        || (v25 = *(_DWORD *)(sub_420250(v28) + 4), (*(_DWORD *)(v25 + 304) & (1 << dword_4E35B8)) == 0) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C);
        result = 0;
      }
      else
      {
        v23 = operator_new(0x2D0u);
        if ( v23 )
          v22 = (_DWORD *)CMonsterSiegeGun::CMonsterSiegeGun((int)v23, a2, v27, a5, Source, a7);
        else
          v22 = 0;
        v29 = v22;
        CChar::SetXY(v22, (_DWORD *)a3);
        CChar::SetDirection(v29, *(_DWORD *)a4 - *(_DWORD *)a3, *(_DWORD *)(a4 + 4) - *(_DWORD *)(a3 + 4));
        (*(void (__thiscall **)(_DWORD *, int))(*v29 + 192))(v29, v25);
        v29[176] = v29[87];
        v29[128] = a1;
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C);
        CChar::Lock((int)v29);
        v26[0] = *(int *)a3 >> 5;
        v26[1] = *(int *)(a3 + 4) >> 5;
        if ( sub_491360(v29, v26) )
        {
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*v29 + 196))(v29, 0);
          v21 = (*(int (__thiscall **)(_DWORD *))(*v29 + 240))(v29);
          v20 = v29[131];
          v19 = *(_DWORD *)(v29[110] + 64);
          v18 = v29 + 166;
          v17 = v29[73];
          v16 = v29[72];
          v15 = v29[70];
          v14 = CChar::GetMaxHP(v29);
          v13 = v29[68];
          v12 = v29[87];
          v11 = v29[84];
          v10 = v29[83];
          v9 = std___Mpunct_wchar_t___do_frac_digits(v29);
          CChar::WriteInSight(
            (int)v29,
            51,
            "wdddwdddIsbds",
            *(_DWORD *)(v29[110] + 60),
            v9,
            v10,
            v11,
            v12,
            v13,
            v14,
            v15,
            v16,
            v17,
            v18,
            v19,
            v20,
            v21);
          CChar::Unlock((int)v29);
          result = v29;
        }
        else
        {
          CChar::Unlock((int)v29);
          if ( v29 )
            (*(void (__thiscall **)(_DWORD *, int))*v29)(v29, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CMonsterGuildWar::Create() not find Map (map:%d)", a2);
    result = 0;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 491080: using guessed type _DWORD __cdecl sub_491080(_DWORD);
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00444A10) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::AI(int *this)
{
  int v1; // [esp+0h] [ebp-8h]

  if ( !CMonster::IsRemoved(this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((int)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    v1 = this[120];
    if ( v1 == 5 )
    {
      if ( sub_480B70(this[116]) )
        this[120] = 6;
    }
    else if ( v1 == 6 )
    {
      sub_480C50((CIOObject *)this[116]);
      this[120] = this[116] != 0 ? 4 : 1;
    }
    CChar::Unlock((int)this);
  }
}
// 480B70: using guessed type _DWORD __stdcall sub_480B70(_DWORD);
// 480C50: using guessed type _DWORD __stdcall sub_480C50(CIOObject *);

//----- (00444B10) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::Tick(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-8h]
  DWORD v3; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::Lock((int)this);
    v3 = GetTickCount();
    v2 = CChar::GetMaxHP(this);
    if ( this[68] < v2 && v3 >= this[118] )
    {
      (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 7, 1, v2);
      CMonsterReal::ResetHostility((int)this);
    }
    if ( !unknown_libname_10(this + 122) && this[173] == 35 )
    {
      if ( sub_480970(this[173]) )
      {
        this[120] = 5;
        this[173] = -1;
        this[172] = this[39] + v3;
      }
    }
    CChar::Unlock((int)this);
  }
}
// 480970: using guessed type _DWORD __stdcall sub_480970(_DWORD);

//----- (00444C00) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::Die(_DWORD *this, int a2, int a3, int a4, int a5)
{
  volatile int *v6; // [esp+4h] [ebp-8h]
  CIOObject *v7; // [esp+8h] [ebp-4h]

  this[68] = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a2 + 76))(a2, this[7], a3);
  v7 = (CIOObject *)sub_450810();
  if ( v7 )
  {
    (*(void (__thiscall **)(_DWORD *, int, _DWORD))(*this + 104))(this, 256, 0);
    CPlayer::Write(v7, 1, "b", 5);
    CPlayer::SiegeGunUnset(v7, 1);
    CIOObject::Release(v7, (volatile int *)v7 + 88);
  }
  else
  {
    v6 = (volatile int *)CNPC::FindNPC(this[177]);
    if ( v6 )
    {
      CChar::WriteInSight((int)this, 0, "bdd", 4, this[177], this[70]);
      CNPCSiegeGunStone::SetOperator(0);
      CNPCSiegeGunStone::SetSiegeGun(0);
      CIOObject::Release(v6);
    }
  }
  this[132] = 0;
  CChar::CancelAllBuff((int)this);
  CChar::WriteInSight((int)this, 61, "db", this[7], 9);
}
// 448FA0: using guessed type _DWORD __cdecl CNPC::FindNPC(char);
// 44AD30: using guessed type _DWORD __stdcall CNPCSiegeGunStone::SetOperator(_DWORD);
// 44AD80: using guessed type _DWORD __stdcall CNPCSiegeGunStone::SetSiegeGun(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00444D30) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::SetFire(_DWORD *this, _DWORD *a2)
{
  int v2; // eax

  CChar::Lock((int)this);
  this[173] = 35;
  v2 = a2[1];
  this[174] = *a2;
  this[175] = v2;
  CChar::Unlock((int)this);
}

//----- (00444D80) --------------------------------------------------------
int __thiscall CMonsterSiegeGun::Summon(_DWORD *this, char a2, int a3, int a4, int a5)
{
  return CMonsterSiegeGunBall::Create(this[128] + a2 - 63, this[79], this + 174, this);
}
// 445030: using guessed type _DWORD __cdecl sub_445030(char, char, _DWORD, _DWORD);

//----- (00444DD0) --------------------------------------------------------
void __thiscall CMonsterSiegeGun::SetOperator(_DWORD *this, int a2)
{
  CChar::Lock((int)this);
  this[132] = a2;
  if ( a2 )
    (*(void (__thiscall **)(_DWORD *, int))(*this + 100))(this, 0x40000);
  else
    (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 0x40000);
  CChar::Unlock((int)this);
}

//----- (00444E30) --------------------------------------------------------
int __thiscall CMonsterSiegeGun::Damage(char *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7)
{
  int result; // eax
  int v8; // [esp+0h] [ebp-1Ch]
  int v10; // [esp+8h] [ebp-14h] BYREF
  int v11; // [esp+Ch] [ebp-10h] BYREF
  int v12; // [esp+10h] [ebp-Ch]
  int v13; // [esp+14h] [ebp-8h]
  int v14; // [esp+18h] [ebp-4h]

  if ( (*(int (__thiscall **)(char *))(*(_DWORD *)this + 252))(this) )
    return 1;
  if ( a7 )
    v8 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
  else
    v8 = 1;
  v12 = v8;
  v14 = CChar::GetFinalDamage(this, a2, a3, v8);
  if ( v14 > 0 )
  {
    CMonsterReal::ManageBuff(this);
    CChar::Lock((int)this);
    if ( CMonsterReal::ApplyDamage((int)this, (int)a2, a3, v14, a4, (int)a5, a6, a7) )
    {
      v13 = *a6 + *a4;
      if ( *((int *)this + 68) > 0 )
      {
        (*(void (__thiscall **)(char *, int, int))(*(_DWORD *)this + 256))(this, v13, v12);
        CChar::Unlock((int)this);
      }
      else
      {
        v11 = 0;
        v10 = 0;
        (*(void (__thiscall **)(char *, int))(*(_DWORD *)this + 100))(this, 0x80000);
        (*(void (__thiscall **)(char *, _DWORD *, _DWORD, int *, int *))(*(_DWORD *)this + 236))(
          this,
          a2,
          *a5,
          &v11,
          &v10);
        CChar::Unlock((int)this);
        CBase::Delete(this);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock((int)this);
      result = 1;
    }
  }
  else
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  return result;
}

//----- (00444F90) --------------------------------------------------------
int __thiscall CMonsterSiegeGunBall::CMonsterSiegeGunBall(int this, int a2, int a3, int a4, int a5)
{
  sub_43A7D0((char *)this);
  *(_DWORD *)this = &off_4B8DA8;
  *(_DWORD *)(this + 316) = a2;
  *(_DWORD *)(this + 320) = a3;
  *(_DWORD *)(this + 348) = 0;
  *(_DWORD *)(this + 524) = *(_DWORD *)(a4 + 524);
  memset((void *)(this + 664), 0, 8u);
  *(_DWORD *)(this + 664) = *(_DWORD *)(a5 + 228) + GetTickCount();
  *(_DWORD *)(this + 484) = a4;
  CMonsterReal::AddGState(0x2000);
  return this;
}
// 449220: using guessed type _DWORD __stdcall CMonsterReal::AddGState(_DWORD);
// 4B8DA8: using guessed type int (__stdcall *off_4B8DA8)(int);

//----- (00445030) --------------------------------------------------------
_DWORD *__cdecl CMonsterSiegeGunBall::Create(char a1, int a2, int *a3, int a4)
{
  _DWORD *result; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-30h] [ebp-60h]
  int v9; // [esp-2Ch] [ebp-5Ch]
  int v10; // [esp-28h] [ebp-58h]
  int v11; // [esp-24h] [ebp-54h]
  int v12; // [esp-20h] [ebp-50h]
  int v13; // [esp-1Ch] [ebp-4Ch]
  int v14; // [esp-18h] [ebp-48h]
  int v15; // [esp-14h] [ebp-44h]
  int v16; // [esp-10h] [ebp-40h]
  _DWORD *v17; // [esp+4h] [ebp-2Ch]
  void *v18; // [esp+10h] [ebp-20h]
  char v19[4]; // [esp+14h] [ebp-1Ch] BYREF
  int v20; // [esp+18h] [ebp-18h]
  int v21[2]; // [esp+1Ch] [ebp-14h] BYREF
  int v22; // [esp+24h] [ebp-Ch]
  char v23[4]; // [esp+28h] [ebp-8h] BYREF
  _DWORD *v24; // [esp+2Ch] [ebp-4h]

  v22 = sub_491080(a2);
  if ( v22 )
  {
    if ( CSMap::IsValidTile(a3, 0) )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E182C);
      sub_44AE20(v23, &a1);
      v5 = sub_430C20(v19);
      if ( (unsigned __int8)unknown_libname_16(v5)
        || (v20 = *(_DWORD *)(sub_420250(v23) + 4), (*(_DWORD *)(v20 + 304) & (1 << dword_4E35B8)) == 0) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C);
        result = 0;
      }
      else
      {
        v18 = operator_new(0x2A8u);
        if ( v18 )
          v17 = (_DWORD *)CMonsterSiegeGunBall::CMonsterSiegeGunBall((int)v18, a2, v22, a4, v20);
        else
          v17 = 0;
        v24 = v17;
        CChar::SetXY(v17, a3);
        (*(void (__thiscall **)(_DWORD *, int))(*v24 + 192))(v24, v20);
        CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E182C);
        CChar::Lock((int)v24);
        v21[0] = *a3 >> 5;
        v21[1] = a3[1] >> 5;
        if ( sub_491360(v24, v21) )
        {
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*v24 + 196))(v24, 0);
          v6 = (*(int (__thiscall **)(_DWORD *))(*v24 + 240))(v24);
          v16 = (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD, int))(*v24 + 224))(
                  v24,
                  *(_DWORD *)(v24[110] + 64),
                  v24[131],
                  v6);
          v15 = v24[73];
          v14 = v24[72];
          v13 = v24[70];
          v12 = CChar::GetMaxHP(v24);
          v11 = v24[68];
          v10 = v24[87];
          v9 = v24[84];
          v8 = v24[83];
          v7 = std___Mpunct_wchar_t___do_frac_digits(v24);
          CChar::WriteInSight(
            (int)v24,
            51,
            "wdddwdddIsbds",
            *(_DWORD *)(v24[110] + 60),
            v7,
            v8,
            v9,
            v10,
            v11,
            v12,
            v13,
            v14,
            v15,
            v16);
          CChar::Unlock((int)v24);
          result = v24;
        }
        else
        {
          CChar::Unlock((int)v24);
          if ( v24 )
            (*(void (__thiscall **)(_DWORD *, int))*v24)(v24, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CMonsterGuildWar::Create() not find Map (map:%d)", a2);
    result = 0;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 491080: using guessed type _DWORD __cdecl sub_491080(_DWORD);
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004452B0) --------------------------------------------------------
void __thiscall CMonsterSiegeGunBall::Tick(int this)
{
  int v2; // [esp+4h] [ebp-8h]
  DWORD v3; // [esp+8h] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::Lock(this);
    v2 = -1;
    v3 = GetTickCount();
    if ( *(_DWORD *)(this + 664) <= v3 )
    {
      v2 = 36;
      *(_DWORD *)(this + 664) = v3 + 12000;
      *(_DWORD *)(this + 668) = v3 + 7000;
    }
    if ( *(_DWORD *)(this + 668) <= v3 && *(_DWORD *)(this + 668) )
    {
      CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), 9);
      *(_DWORD *)(this + 484) = 0;
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else
    {
      if ( v2 >= 0 )
      {
        if ( sub_480970(v2) )
          *(_DWORD *)(this + 480) = 5;
      }
      CChar::Unlock(this);
    }
  }
}
// 480970: using guessed type _DWORD __stdcall sub_480970(_DWORD);

//----- (004453B0) --------------------------------------------------------
void __thiscall CMonsterSiegeGunBall::AI(int *this)
{
  int v1; // [esp+0h] [ebp-8h]

  if ( !CMonster::IsRemoved(this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((int)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    v1 = this[120];
    if ( v1 == 5 )
    {
      if ( sub_480B70(this[116]) )
        this[120] = 6;
    }
    else if ( v1 == 6 )
    {
      sub_480C50((CIOObject *)this[116]);
      this[120] = 1;
    }
    CChar::Unlock((int)this);
  }
}
// 480B70: using guessed type _DWORD __stdcall sub_480B70(_DWORD);
// 480C50: using guessed type _DWORD __stdcall sub_480C50(CIOObject *);

//----- (004454A0) --------------------------------------------------------
void __thiscall CMonsterSiegeGunRuins::Tick(int this)
{
  if ( !CMonster::IsRemoved(this) )
  {
    CChar::Lock(this);
    if ( *(_DWORD *)(this + 664) > GetTickCount() )
    {
      CChar::Unlock(this);
    }
    else
    {
      CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
  }
}

//----- (00445510) --------------------------------------------------------
void __thiscall CMonsterWithSkillOnly::Tick(int this)
{
  int v2; // [esp+4h] [ebp-Ch]
  DWORD v3; // [esp+8h] [ebp-8h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::RefreshBuff(this);
    CChar::Lock(this);
    v3 = GetTickCount();
    if ( CChar::IsGState((_DWORD *)this, 1) && v3 >= *(_DWORD *)(this + 468) )
    {
      CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), 9);
      CChar::Unlock(this);
      CBase::Delete((char *)this);
    }
    else
    {
      v2 = CChar::GetMaxHP((_DWORD *)this);
      if ( *(_DWORD *)(this + 272) < v2 && v3 >= *(_DWORD *)(this + 472) )
      {
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v2);
        CMonsterReal::ResetHostility(this);
      }
      if ( !unknown_libname_10((_DWORD *)(this + 488)) )
        sub_480A00(this + 488);
      CChar::Unlock(this);
    }
  }
}
// 480A00: using guessed type int __thiscall sub_480A00(_DWORD);

//----- (00445610) --------------------------------------------------------
void __thiscall CMonsterWithSkillOnly::Attack(_DWORD *this)
{
  __int64 v2; // [esp+24h] [ebp-10h]

  if ( !CChar::IsMState(this, 268435712i64) && GetTickCount() >= this[117] )
  {
    v2 = sub_43D870(this + 83, (_DWORD *)(this[116] + 332));
    if ( this[79] == *(_DWORD *)(this[116] + 316) && v2 <= this[137] * this[137] )
    {
      if ( v2 <= this[78] * this[78] )
      {
        if ( this[116] == this[121] )
        {
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
          this[120] = 1;
        }
        else
        {
          CChar::SetDirection(this, *(_DWORD *)(this[116] + 332) - this[83], *(_DWORD *)(this[116] + 336) - this[84]);
        }
      }
      else if ( !CChar::IsMState(this, 512i64) )
      {
        this[163] = 1;
        this[120] = 2;
      }
    }
    else
    {
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 188))(this, 0);
    }
  }
}

//----- (004457F0) --------------------------------------------------------
void __thiscall CMonsterInvaderBoss::AI(int *this)
{
  if ( !CMonster::IsRemoved(this) && !(*(int (__thiscall **)(int *))(*this + 252))(this) )
  {
    CChar::Lock((int)this);
    if ( this[116] && !CChar::IsNormal(this[116]) )
    {
      (*(void (__thiscall **)(int *, int))(*this + 132))(this, this[116]);
      (*(void (__thiscall **)(int *, _DWORD))(*this + 188))(this, 0);
    }
    switch ( this[120] )
    {
      case 1:
        this[172] = 0;
        goto LABEL_9;
      case 2:
      case 3:
LABEL_9:
        (*(void (__thiscall **)(int *))(*this + 248))(this);
        break;
      case 4:
        (*(void (__thiscall **)(int *))(*this + 244))(this);
        break;
      case 5:
        if ( sub_480B70(this[116]) )
          this[120] = 6;
        break;
      case 6:
        sub_480C50((CIOObject *)this[116]);
        this[120] = this[116] != 0 ? 4 : 1;
        break;
      default:
        break;
    }
    CChar::Unlock((int)this);
  }
}
// 480B70: using guessed type _DWORD __stdcall sub_480B70(_DWORD);
// 480C50: using guessed type _DWORD __stdcall sub_480C50(CIOObject *);

//----- (00445950) --------------------------------------------------------
void __thiscall CMonsterInvaderBoss::Tick(_DWORD *this)
{
  int v2; // [esp+4h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-8h]
  DWORD v4; // [esp+Ch] [ebp-4h]

  if ( !CMonster::IsRemoved(this) )
  {
    CChar::RefreshBuff((int)this);
    CChar::Lock((int)this);
    v4 = GetTickCount();
    if ( CChar::IsGState(this, 0x2000) && v4 >= this[139] )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 0x2000);
      CChar::Unlock((int)this);
    }
    else
    {
      v2 = CChar::GetMaxHP(this);
      if ( this[68] < v2 && v4 >= this[118] )
      {
        (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 7, 1, v2);
        CMonsterReal::ResetHostility((int)this);
      }
      if ( this[119] && !unknown_libname_10(this + 122) && !(unsigned __int8)sub_446110(this + 140) )
      {
        v3 = -1;
        if ( !this[167] )
          this[167] = v4 + 10000;
        if ( this[168] <= v4 )
        {
          this[168] = v4 + 15000;
          if ( RandomBetween(1, 100) <= 50 )
            v3 = 38;
        }
        if ( this[167] <= v4 )
        {
          this[167] = v4 + 10000;
          if ( v3 < 0 && RandomBetween(1, 100) <= 80 )
            v3 = 39;
        }
        if ( v3 >= 0 )
        {
          if ( sub_480970(v3) )
            this[120] = 5;
        }
      }
      CChar::Unlock((int)this);
    }
  }
}
// 445A8D: conditional instruction was optimized away because of '%var_8.4==FFFFFFFF'
// 446110: using guessed type int __thiscall sub_446110(_DWORD);
// 480970: using guessed type _DWORD __stdcall sub_480970(_DWORD);

//----- (00445B20) --------------------------------------------------------
void __thiscall sub_445B20(std::vector<CIOSocket::CIOTimer> *this)
{
  std::vector<CIOSocket::CIOTimer>::_Tidy(this);
}

//----- (00445B40) --------------------------------------------------------
int __thiscall sub_445B40(_DWORD *this, int a2)
{
  sub_446700(this[2]);
  return a2;
}
// 446700: using guessed type _DWORD __stdcall sub_446700(_DWORD);

//----- (00445B60) --------------------------------------------------------
BOOL __thiscall sub_445B60(std::vector<CIOSocket::CIOTimer> *this)
{
  return std::vector<CIOSocket::CIOTimer>::size(this) == 0;
}

//----- (00445B80) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall sub_445B80(int this, CIOSocket::CIOTimer *_Val)
{
  unsigned int v2; // esi
  CIOSocket::CIOTimer *result; // eax
  _DWORD *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
  if ( v2 >= std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = (_DWORD *)sub_445B40((_DWORD *)this, (int)v7);
    result = (CIOSocket::CIOTimer *)sub_446200(v6, *v4, _Val);
  }
  else
  {
    result = std::vector<CIOSocket::CIOTimer>::_Ufill(
               (std::vector<CIOSocket::CIOTimer> *)this,
               *(CIOSocket::CIOTimer **)(this + 8),
               1u,
               _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}
// 446200: using guessed type _DWORD __stdcall sub_446200(_DWORD, _DWORD, _DWORD);

//----- (00445BF0) --------------------------------------------------------
void __thiscall sub_445BF0(std::vector<IPAddrMask> *this)
{
  std::vector<IPAddrMask>::_Tidy(this);
}

//----- (00445C10) --------------------------------------------------------
IPAddrMask *__thiscall sub_445C10(int this, IPAddrMask *_Val)
{
  unsigned int v2; // esi
  IPAddrMask *result; // eax
  _DWORD *v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
  if ( v2 >= std::vector<IPAddrMask>::capacity((std::vector<IPAddrMask> *)this) )
  {
    v4 = (_DWORD *)sub_445B40((_DWORD *)this, (int)v7);
    result = (IPAddrMask *)sub_4462B0(v6, *v4, _Val);
  }
  else
  {
    result = std::vector<IPAddrMask>::_Ufill((std::vector<IPAddrMask> *)this, *(IPAddrMask **)(this + 8), 1u, _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}
// 4462B0: using guessed type _DWORD __stdcall sub_4462B0(_DWORD, _DWORD, _DWORD);

//----- (00445C80) --------------------------------------------------------
void *__thiscall sub_445C80(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(&v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);
// 47A720: using guessed type _DWORD __stdcall sub_47A720(_DWORD, _DWORD);

//----- (00445CB0) --------------------------------------------------------
int __thiscall sub_445CB0(void *this)
{
  return sub_4464B0(this, this);
}
// 4464B0: using guessed type int __thiscall sub_4464B0(_DWORD, _DWORD);

//----- (00445CD0) --------------------------------------------------------
int __thiscall sub_445CD0(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, int *_Keyval)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::equal_range(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    _Keyval);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_446350(
    this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00445D30) --------------------------------------------------------
_DWORD *__thiscall sub_445D30(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_446430(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00445D90) --------------------------------------------------------
_DWORD *__thiscall sub_445D90(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_446560(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00445DF0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_445DF0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::pair<char const * const,CItem *> *a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0(this);
  v22 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)this[1];
  v23 = 1;
  while ( !*(_BYTE *)sub_431110((int)v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500((int)v21);
    v3 = (_DWORD *)unknown_libname_25(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(&v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270((int)this, (int)v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880(&v20);
  }
  v11 = (_DWORD *)unknown_libname_25(a3);
  v7 = unknown_libname_15(&v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270((int)this, (int)v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00445FA0) --------------------------------------------------------
int __thiscall sub_445FA0(int *this, int *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_4465E0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00446000) --------------------------------------------------------
_DWORD *__thiscall sub_446000(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_446680(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00446060) --------------------------------------------------------
_DWORD *__thiscall sub_446060(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_431390(this);
  *a2 = v4;
  return a2;
}

//----- (00446090) --------------------------------------------------------
int *__thiscall sub_446090(int *this, int *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_418860(this);
  *a2 = v4;
  return a2;
}

//----- (004460C0) --------------------------------------------------------
void *__thiscall sub_4460C0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004460F0) --------------------------------------------------------
int __thiscall sub_4460F0(int *this)
{
  return sub_446750(this);
}

//----- (00446110) --------------------------------------------------------
BOOL __thiscall sub_446110(void *this)
{
  return unknown_libname_18(this) == 0;
}
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);

//----- (00446130) --------------------------------------------------------
_DWORD *__thiscall sub_446130(int *this, _DWORD *a2, _DWORD *a3)
{
  void *v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_446720(this, v12, a3);
  v3 = sub_430C20(this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (_DWORD *)sub_473500(v4), sub_48D9E0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (004461C0) --------------------------------------------------------
int __thiscall std::vector<CIOSocket::CIOTimer>::capacity(std::vector<CIOSocket::CIOTimer> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) / 12;
  else
    v2 = 0;
  return v2;
}

//----- (00446200) --------------------------------------------------------
_DWORD *__thiscall sub_446200(int *this, _DWORD *a2, CIOSocket::CIOTimer *a3, int *a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
  {
    v4 = sub_430C20(this, v11);
    v8 = sub_431D50((int *)&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_446820((int)this, a3, 1u, a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, v10);
  sub_446FA0(v5, a2, v7);
  return a2;
}

//----- (00446280) --------------------------------------------------------
CIOSocket::CIOTimer *__thiscall std::vector<CIOSocket::CIOTimer>::_Ufill(std::vector<CIOSocket::CIOTimer> *this, CIOSocket::CIOTimer *_Ptr, unsigned int _Count, const CIOSocket::CIOTimer *_Val)
{
  std::_Uninitialized_fill_n<CIOSocket::CIOTimer *,unsigned int,CIOSocket::CIOTimer,std::allocator<CIOSocket::CIOTimer>>(
    _Ptr,
    _Count,
    _Val);
  return (CIOSocket::CIOTimer *)((char *)_Ptr + 12 * _Count);
}

//----- (004462B0) --------------------------------------------------------
_DWORD *__thiscall sub_4462B0(int *this, _DWORD *a2, IPAddrMask *a3, int *a4)
{
  _DWORD *v4; // eax
  int v6; // [esp-4h] [ebp-18h]
  int v7; // [esp+0h] [ebp-14h]
  char v9[4]; // [esp+8h] [ebp-Ch] BYREF
  char v10[4]; // [esp+Ch] [ebp-8h] BYREF
  int v11; // [esp+10h] [ebp-4h]

  if ( std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
  {
    v4 = sub_430C20(this, v10);
    v7 = sub_4470B0((int *)&a3, v4);
  }
  else
  {
    v7 = 0;
  }
  v11 = v7;
  sub_446B80((int)this, a3, 1u, a4);
  v6 = v11;
  sub_430C20(this, v9);
  sub_478710(a2, v6);
  return a2;
}

//----- (00446350) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_446350(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_445D30((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (004463F0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::equal_range(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *result, const int *_Keyval)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_446E70(this, v8, (int *)_Keyval);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_446720((int *)this, v7, _Keyval);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    result,
    v3,
    v5);
  return result;
}

//----- (00446430) --------------------------------------------------------
int __stdcall sub_446430(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_446430(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004464B0) --------------------------------------------------------
int __thiscall sub_4464B0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_446350(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00446560) --------------------------------------------------------
int __stdcall sub_446560(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_446560(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004465E0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4465E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_446F30((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00446680) --------------------------------------------------------
int __stdcall sub_446680(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_446680(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00446700) --------------------------------------------------------
void *__thiscall sub_446700(void *this, int a2)
{
  unknown_libname_20(a2);
  return this;
}
// 446FD0: using guessed type _DWORD __stdcall unknown_libname_20(_DWORD);

//----- (00446720) --------------------------------------------------------
void *__thiscall sub_446720(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_446EA0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00446750) --------------------------------------------------------
int __thiscall sub_446750(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_447010(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00446800) --------------------------------------------------------
unsigned int __thiscall sub_446800(std::allocator<CIOSocket::CIOTimer> *this)
{
  return std::allocator<CIOSocket::CIOTimer>::max_size(this);
}

//----- (00446820) --------------------------------------------------------
void __thiscall sub_446820(int this, CIOSocket::CIOTimer *a2, unsigned int _Count, int *a4)
{
  unsigned int v4; // esi
  CIOSocket::CIOTimer *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-24h]
  CIOSocket::CIOTimer *_Dest; // [esp+Ch] [ebp-1Ch]
  CMemory **_First; // [esp+10h] [ebp-18h]
  CIOSocket::CIOTimer *_Ptr; // [esp+14h] [ebp-14h]
  unsigned int v11; // [esp+18h] [ebp-10h]
  int v12; // [esp+18h] [ebp-10h]
  int v13[3]; // [esp+1Ch] [ebp-Ch] BYREF
  unsigned int _Counta; // [esp+34h] [ebp+Ch]

  v13[0] = *a4;
  v13[1] = a4[1];
  v13[2] = a4[2];
  v11 = std::vector<CIOSocket::CIOTimer>::capacity((std::vector<CIOSocket::CIOTimer> *)this);
  if ( _Count )
  {
    v4 = sub_446800((std::allocator<CIOSocket::CIOTimer> *)this);
    if ( v4 - std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) >= _Count )
    {
      if ( v11 >= _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)a2) / 12 >= _Count )
        {
          _Dest = *(CIOSocket::CIOTimer **)(this + 8);
          *(_DWORD *)(this + 8) = sub_4474B0((int)_Dest - 12 * _Count, (int)_Dest, _Dest);
          std::copy_backward<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(
            a2,
            (CIOSocket::CIOTimer *)((char *)_Dest - 12 * _Count),
            _Dest);
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)((char *)a2 + 12 * _Count),
            (const CIOSocket::CIOTimer *)v13);
        }
        else
        {
          sub_4474B0((int)a2, *(_DWORD *)(this + 8), (char *)a2 + 12 * _Count);
          std::vector<CIOSocket::CIOTimer>::_Ufill(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 8),
            _Count - (*(_DWORD *)(this + 8) - (int)a2) / 12,
            (const CIOSocket::CIOTimer *)v13);
          *(_DWORD *)(this + 8) += 12 * _Count;
          std::fill<CIOSocket::CIOTimer *,CIOSocket::CIOTimer>(
            a2,
            (CIOSocket::CIOTimer *)(*(_DWORD *)(this + 8) - 12 * _Count),
            (const CIOSocket::CIOTimer *)v13);
        }
      }
      else
      {
        if ( sub_446800((std::allocator<CIOSocket::CIOTimer> *)this) - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this) )
          v12 = _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        _First = sub_446B40(v12);
        v5 = sub_4474B0(*(_DWORD *)(this + 4), (int)a2, _First);
        _Ptr = std::vector<CIOSocket::CIOTimer>::_Ufill(
                 (std::vector<CIOSocket::CIOTimer> *)this,
                 v5,
                 _Count,
                 (const CIOSocket::CIOTimer *)v13);
        sub_4474B0((int)a2, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<CIOSocket::CIOTimer>::size((std::vector<CIOSocket::CIOTimer> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          std::vector<CIOSocket::CIOTimer>::_Destroy(
            (std::vector<CIOSocket::CIOTimer> *)this,
            *(CIOSocket::CIOTimer **)(this + 4),
            *(CIOSocket::CIOTimer **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) / 12);
        }
        *(_DWORD *)(this + 12) = &_First[3 * v12];
        *(_DWORD *)(this + 8) = &_First[3 * _Counta];
        *(_DWORD *)(this + 4) = _First;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (00446B00) --------------------------------------------------------
void sub_446B00()
{
  void *v0; // eax
  char v1[28]; // [esp+4h] [ebp-40h] BYREF
  char v2[36]; // [esp+20h] [ebp-24h] BYREF

  std::string::string((std::string *)v1, "vector<T> too long");
  std::length_error::length_error((std::length_error *)v2, (const std::string *)v1);
  sub_40F510(v0);
  sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v2);
  sub_40F780((std::string *)v1);
}
// 446B24: variable 'v0' is possibly undefined

//----- (00446B40) --------------------------------------------------------
CMemory **__stdcall sub_446B40(int a1)
{
  return sub_44CEC0(a1);
}

//----- (00446B60) --------------------------------------------------------
unsigned int __thiscall sub_446B60(std::allocator<std::pair<char const * const,CItem *> > *this)
{
  return std::allocator<std::pair<char const * const,CItem *>>::max_size(this);
}

//----- (00446B80) --------------------------------------------------------
void __thiscall sub_446B80(int this, IPAddrMask *_First, unsigned int _Count, int *a4)
{
  int v4; // edx
  unsigned int v5; // esi
  IPAddrMask *v6; // eax
  unsigned int v7; // [esp+4h] [ebp-20h]
  _DWORD *v9; // [esp+Ch] [ebp-18h]
  CMemory **v10; // [esp+10h] [ebp-14h]
  IPAddrMask *_Ptr; // [esp+14h] [ebp-10h]
  unsigned int v12; // [esp+18h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-Ch]
  int v14[2]; // [esp+1Ch] [ebp-8h] BYREF
  unsigned int _Counta; // [esp+30h] [ebp+Ch]

  v4 = a4[1];
  v14[0] = *a4;
  v14[1] = v4;
  v12 = std::vector<IPAddrMask>::capacity((std::vector<IPAddrMask> *)this);
  if ( _Count )
  {
    v5 = sub_446B60((std::allocator<std::pair<char const * const,CItem *> > *)this);
    if ( v5 - std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) >= _Count )
    {
      if ( v12 >= _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)_First) >> 3 >= _Count )
        {
          v9 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E60((int)&v9[-2 * _Count], (int)v9, v9);
          sub_47A3F0(_First, &v9[-2 * _Count], v9);
          std::fill<IPAddrMask *,IPAddrMask>(
            _First,
            (IPAddrMask *)((char *)_First + 8 * _Count),
            (const IPAddrMask *)v14);
        }
        else
        {
          sub_431E60((int)_First, *(_DWORD *)(this + 8), (char *)_First + 8 * _Count);
          std::vector<IPAddrMask>::_Ufill(
            (std::vector<IPAddrMask> *)this,
            *(IPAddrMask **)(this + 8),
            _Count - ((*(_DWORD *)(this + 8) - (int)_First) >> 3),
            (const IPAddrMask *)v14);
          *(_DWORD *)(this + 8) += 8 * _Count;
          std::fill<IPAddrMask *,IPAddrMask>(
            _First,
            (IPAddrMask *)(*(_DWORD *)(this + 8) - 8 * _Count),
            (const IPAddrMask *)v14);
        }
      }
      else
      {
        if ( sub_446B60((std::allocator<std::pair<char const * const,CItem *> > *)this) - (v12 >> 1) >= v12 )
          v7 = v12 + (v12 >> 1);
        else
          v7 = 0;
        v13 = v7;
        if ( v7 < _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
          v13 = _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
        v10 = sub_446E50(v13);
        v6 = (IPAddrMask *)sub_431E60(*(_DWORD *)(this + 4), (int)_First, v10);
        _Ptr = std::vector<IPAddrMask>::_Ufill((std::vector<IPAddrMask> *)this, v6, _Count, (const IPAddrMask *)v14);
        sub_431E60((int)_First, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4316C0(*(char **)(this + 4), *(char **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 3);
        }
        *(_DWORD *)(this + 12) = &v10[2 * v13];
        *(_DWORD *)(this + 8) = &v10[2 * _Counta];
        *(_DWORD *)(this + 4) = v10;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (00446E50) --------------------------------------------------------
CMemory **__stdcall sub_446E50(int a1)
{
  return sub_47A430(a1);
}

//----- (00446E70) --------------------------------------------------------
void *__thiscall sub_446E70(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, int *_Keyval)
{
  std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *v3; // eax

  v3 = std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Ubound(
         this,
         _Keyval);
  sub_446700(a2, (int)v3);
  return a2;
}

//----- (00446EA0) --------------------------------------------------------
int __thiscall sub_446EA0(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_48D9E0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00446F30) --------------------------------------------------------
_DWORD *__thiscall sub_446F30(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_4472D0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00446FA0) --------------------------------------------------------
_DWORD *__thiscall sub_446FA0(int *this, _DWORD *a2, int _Off)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  *a2 = *(_DWORD *)std::vector<CIOSocket::CIOTimer>::iterator::operator+=(
                     (std::vector<CIOSocket::CIOTimer>::iterator *)&v4,
                     _Off);
  return a2;
}

//----- (00446FF0) --------------------------------------------------------
int __cdecl sub_446FF0(int a1)
{
  return a1 + 4;
}

//----- (00447000) --------------------------------------------------------
int __cdecl sub_447000(int a1)
{
  return a1 + 12;
}

//----- (00447010) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447010(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_447370((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (004470B0) --------------------------------------------------------
int __thiscall sub_4470B0(int *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  v3 = *this;
  return sub_431DD0(&v3, a2);
}

//----- (004470E0) --------------------------------------------------------
int __cdecl sub_4470E0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_431110(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00447120) --------------------------------------------------------
std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *__thiscall std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Ubound(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, const int *_Keyval)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0((int *)this);
  v6 = *((_DWORD *)this + 1);
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_48D9E0(_Keyval, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return (std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *)v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004471B0) --------------------------------------------------------
void *sub_4471B0()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  void *v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_44CD20(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)unknown_libname_25(v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)unknown_libname_19(v7) = 1;
  *(_BYTE *)sub_431110((int)v7) = 0;
  return v7;
}
// 446F90: using guessed type _DWORD __cdecl unknown_libname_19(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004472D0) --------------------------------------------------------
int __stdcall sub_4472D0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_4472D0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00447350) --------------------------------------------------------
std::vector<CIOSocket::CIOTimer>::iterator *__thiscall std::vector<CIOSocket::CIOTimer>::iterator::operator+=(std::vector<CIOSocket::CIOTimer>::iterator *this, int _Off)
{
  *(_DWORD *)this += 12 * _Off;
  return this;
}

//----- (00447370) --------------------------------------------------------
_DWORD *__thiscall sub_447370(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_4473F0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (004473F0) --------------------------------------------------------
int __stdcall sub_4473F0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_4473F0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00447470) --------------------------------------------------------
void __cdecl std::_Destroy_range<CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last)
{
  unknown_libname_14(&_First, &_Last);
  std::_Destroy_range<CIOSocket::CIOTimer>((char *)_First, (char *)_Last);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (004474B0) --------------------------------------------------------
CIOSocket::CIOTimer *__stdcall sub_4474B0(int _First, int _Last, void *_Dest)
{
  return std::_Uninitialized_copy<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *,std::allocator<CIOSocket::CIOTimer>>(
           (CIOSocket::CIOTimer *)_First,
           (CIOSocket::CIOTimer *)_Last,
           (CIOSocket::CIOTimer *)_Dest);
}

//----- (004474E0) --------------------------------------------------------
CIOSocket::CIOTimer *__cdecl std::copy_backward<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(CIOSocket::CIOTimer *_First, CIOSocket::CIOTimer *_Last, CIOSocket::CIOTimer *_Dest)
{
  unknown_libname_14(&_First, &_Dest);
  return (CIOSocket::CIOTimer *)std::_Copy_backward_opt<CIOSocket::CIOTimer *,CIOSocket::CIOTimer *>(
                                  _First,
                                  _Last,
                                  _Dest);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (00447520) --------------------------------------------------------
void __cdecl std::fill<IPAddrMask *,IPAddrMask>(IPAddrMask *_First, IPAddrMask *_Last, const IPAddrMask *_Val)
{
  int v3; // ecx

  while ( _First != _Last )
  {
    v3 = *((_DWORD *)_Val + 1);
    *(_DWORD *)_First = *(_DWORD *)_Val;
    *((_DWORD *)_First + 1) = v3;
    _First = (IPAddrMask *)((char *)_First + 8);
  }
}

//----- (00447570) --------------------------------------------------------
void *__cdecl sub_447570(void *a1, int a2, int a3)
{
  void *result; // eax

  result = a1;
  while ( a2 )
  {
    sub_47A6D0(a1, a3);
    --a2;
    a1 = (char *)a1 + 8;
  }
  return result;
}

//----- (004475D0) --------------------------------------------------------
void __stdcall sub_4475D0(void *_Ptr, int _Val)
{
  std::_Construct<CIOSocket::CIOTimer,CIOSocket::CIOTimer>(
    (CIOSocket::CIOTimer *)_Ptr,
    (const CIOSocket::CIOTimer *)_Val);
}

//----- (004475F0) --------------------------------------------------------
void *__cdecl sub_4475F0(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_4475D0(a3, a1);
    a3 = (char *)a3 + 12;
    a1 += 12;
  }
  return a3;
}

//----- (00447660) --------------------------------------------------------
void *__cdecl sub_447660(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_47A6D0(a3, a1);
    a3 = (char *)a3 + 8;
    a1 += 8;
  }
  return a3;
}

//----- (004476D0) --------------------------------------------------------
void __cdecl std::_Construct<CIOSocket::CIOTimer,CIOSocket::CIOTimer>(CIOSocket::CIOTimer *_Ptr, const CIOSocket::CIOTimer *_Val)
{
  _DWORD *v2; // [esp+4h] [ebp-4h]

  v2 = operator new(0xCu, _Ptr);
  if ( v2 )
  {
    *v2 = *(_DWORD *)_Val;
    v2[1] = *((_DWORD *)_Val + 1);
    v2[2] = *((_DWORD *)_Val + 2);
  }
}

//----- (00447720) --------------------------------------------------------
void __cdecl std::_Construct<IPAddrMask,IPAddrMask>(IPAddrMask *_Ptr, const IPAddrMask *_Val)
{
  int v2; // eax
  _DWORD *v3; // [esp+4h] [ebp-4h]

  v3 = operator new(8u, _Ptr);
  if ( v3 )
  {
    v2 = *((_DWORD *)_Val + 1);
    *v3 = *(_DWORD *)_Val;
    v3[1] = v2;
  }
}

//----- (00447760) --------------------------------------------------------
void *__thiscall sub_447760(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00447790) --------------------------------------------------------
void *__thiscall sub_447790(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004477C0) --------------------------------------------------------
void *__thiscall sub_4477C0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004477F0) --------------------------------------------------------
int __thiscall sub_4477F0(int *this)
{
  return sub_447810(this);
}

//----- (00447810) --------------------------------------------------------
int __thiscall sub_447810(int *this)
{
  return sub_447830(this);
}

//----- (00447830) --------------------------------------------------------
int __thiscall sub_447830(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4478E0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004478E0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4478E0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_445D90((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00447980) --------------------------------------------------------
int __thiscall sub_447980(int *this)
{
  return sub_4479A0(this);
}

//----- (004479A0) --------------------------------------------------------
int __thiscall sub_4479A0(int *this)
{
  return sub_4479C0(this);
}

//----- (004479C0) --------------------------------------------------------
int __thiscall sub_4479C0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4465E0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00447A70) --------------------------------------------------------
int __thiscall sub_447A70(int *this)
{
  return sub_447A90(this);
}

//----- (00447A90) --------------------------------------------------------
int __thiscall sub_447A90(int *this)
{
  return sub_447AB0(this);
}

//----- (00447AB0) --------------------------------------------------------
int __thiscall sub_447AB0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_447B60(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00447B60) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_447B60(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_446000((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00447C00) --------------------------------------------------------
_DWORD *__thiscall CInitNPC::CInitNPC(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B9680;
  this[8] = 0;
  this[9] = 0;
  return this;
}
// 4B9680: using guessed type int (__stdcall *off_4B9680)(int);

//----- (00447C40) --------------------------------------------------------
void *__thiscall CInitNPC::_scalar_deleting_destructor_(void *this, char a2)
{
  CInitNPC::_CInitNPC(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 447C70: using guessed type int __thiscall sub_447C70(_DWORD);

//----- (00447C70) --------------------------------------------------------
int __thiscall CInitNPC::_CInitNPC(_DWORD *this)
{
  *this = &off_4B9680;
  return CBase::_CBase(this);
}
// 4B9680: using guessed type int (__stdcall *off_4B9680)(int);

//----- (00447C90) --------------------------------------------------------
BOOL CInitNPC::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  BOOL result; // eax
  void (__thiscall ***v2)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v3[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v4[4]; // [esp+10h] [ebp-8h] BYREF
  char v5[4]; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E1A9C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
               v0);
    if ( !result )
      break;
    v2 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(v5) + 4);
    if ( v2 )
      (**v2)(v2, 1);
    sub_446090(v4, 0);
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00447D10) --------------------------------------------------------
_DWORD *CInitNPC::Copy()
{
  _DWORD *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0x28u);
  if ( v2 )
    v1 = CInitNPC::CInitNPC(v2);
  else
    v1 = 0;
  return v1;
}

//----- (00447D50) --------------------------------------------------------
int __thiscall CInitNPC::Set(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  _DWORD *v6; // [esp-4h] [ebp-18h] BYREF
  int v7; // [esp+0h] [ebp-14h]
  _DWORD *v8; // [esp+4h] [ebp-10h]
  char v9[4]; // [esp+Ch] [ebp-8h] BYREF
  char v10[4]; // [esp+10h] [ebp-4h] BYREF

  v8 = this;
  v7 = a2;
  if ( a2 == 30 )
  {
    v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v10);
    v8[8] = sub_40C8D0(v3);
  }
  else
  {
    if ( v7 != 53 )
    {
      v6 = this;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v6,
        &a3);
      return CBase::Set(v8, a2, (char)v6);
    }
    v4 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v9);
    v8[9] = sub_40C8D0(v4);
  }
  return 1;
}

//----- (00447DD0) --------------------------------------------------------
int __thiscall CInitNPC::OnLoad(int this)
{
  int v1; // eax
  CItem *_Val2; // [esp+4h] [ebp-14h] BYREF
  char v5[8]; // [esp+8h] [ebp-10h] BYREF
  char v6[8]; // [esp+10h] [ebp-8h] BYREF

  _Val2 = (CItem *)this;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v5,
    (const char *const *)(this + 32),
    &_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v6,
    v1);
  if ( v6[4] )
    return 1;
  LOG_ERR("CInitNPC::OnLoad() Duplicated InitNPC.(Kind:%d)", *(_DWORD *)(this + 32));
  return 0;
}
// 447DFC: variable 'v1' is possibly undefined
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (00447E30) --------------------------------------------------------
_DWORD *__thiscall CGenNPC::CGenNPC(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4B96F8;
  this[8] = 0;
  this[9] = 0;
  this[10] = 0;
  this[11] = 0;
  this[12] = 0;
  this[13] = 0;
  this[14] = 0;
  this[16] = -1;
  this[15] = -1;
  this[17] = 0;
  this[19] = -1;
  this[18] = -1;
  this[20] = 0;
  this[21] = 0;
  this[22] = 0;
  this[23] = 0;
  this[24] = 0;
  for ( this[25] = 0; (int)this[25] > 5; ++this[25] )
  {
    this[this[25] + 26] = 0;
    this[2 * this[25] + 32] = 0;
    this[2 * this[25] + 31] = 0;
  }
  this[25] = 0;
  return this;
}
// 4B96F8: using guessed type int (__stdcall *off_4B96F8)(int);

//----- (00447F60) --------------------------------------------------------
void *__thiscall CGenNPC::_scalar_deleting_destructor_(void *this, char a2)
{
  CGenNPC::_CGenNPC(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 447F90: using guessed type int __thiscall sub_447F90(_DWORD);

//----- (00447F90) --------------------------------------------------------
int __thiscall CGenNPC::_CGenNPC(_DWORD *this)
{
  *this = &off_4B96F8;
  return CBase::_CBase(this);
}
// 4B96F8: using guessed type int (__stdcall *off_4B96F8)(int);

//----- (00447FB0) --------------------------------------------------------
BOOL CGenNPC::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  BOOL result; // eax
  void (__thiscall ***v2)(_DWORD, int); // [esp+8h] [ebp-10h]
  char v3[4]; // [esp+Ch] [ebp-Ch] BYREF
  char v4[4]; // [esp+10h] [ebp-8h] BYREF
  char v5[4]; // [esp+14h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E1AA8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
               v0);
    if ( !result )
      break;
    v2 = *(void (__thiscall ****)(_DWORD, int))(sub_420250(v5) + 4);
    if ( v2 )
      (**v2)(v2, 1);
    sub_446090(v4, 0);
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00448030) --------------------------------------------------------
_DWORD *CGenNPC::Copy()
{
  _DWORD *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+8h] [ebp-4h]

  v2 = operator_new(0xB4u);
  if ( v2 )
    v1 = CGenNPC::CGenNPC(v2);
  else
    v1 = 0;
  return v1;
}

//----- (00448070) --------------------------------------------------------
int __thiscall CGenNPC::Set(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  int result; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  lisp::var *v20; // eax
  lisp::var *v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  lisp::var *v24; // eax
  lisp::var *v25; // eax
  lisp::var *v26; // eax
  lisp::var *v27; // eax
  _DWORD v28[2]; // [esp-4h] [ebp-70h] BYREF
  _DWORD *v29; // [esp+4h] [ebp-68h]
  char v30[4]; // [esp+Ch] [ebp-60h] BYREF
  char v31[4]; // [esp+10h] [ebp-5Ch] BYREF
  char v32[4]; // [esp+14h] [ebp-58h] BYREF
  char v33[4]; // [esp+18h] [ebp-54h] BYREF
  char v34[4]; // [esp+1Ch] [ebp-50h] BYREF
  char v35[4]; // [esp+20h] [ebp-4Ch] BYREF
  char v36[4]; // [esp+24h] [ebp-48h] BYREF
  char v37[4]; // [esp+28h] [ebp-44h] BYREF
  char v38[4]; // [esp+2Ch] [ebp-40h] BYREF
  char v39[4]; // [esp+30h] [ebp-3Ch] BYREF
  char v40[4]; // [esp+34h] [ebp-38h] BYREF
  char v41[4]; // [esp+38h] [ebp-34h] BYREF
  char v42[4]; // [esp+3Ch] [ebp-30h] BYREF
  char v43[4]; // [esp+40h] [ebp-2Ch] BYREF
  char v44[4]; // [esp+44h] [ebp-28h] BYREF
  char v45[4]; // [esp+48h] [ebp-24h] BYREF
  char v46[4]; // [esp+4Ch] [ebp-20h] BYREF
  char v47[4]; // [esp+50h] [ebp-1Ch] BYREF
  char v48[4]; // [esp+54h] [ebp-18h] BYREF
  char v49[4]; // [esp+58h] [ebp-14h] BYREF
  char v50[4]; // [esp+5Ch] [ebp-10h] BYREF
  char v51[4]; // [esp+60h] [ebp-Ch] BYREF
  char v52[4]; // [esp+64h] [ebp-8h] BYREF
  char v53[4]; // [esp+68h] [ebp-4h] BYREF

  v29 = this;
  v28[1] = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v53);
      v29[8] = sub_40C8D0(v3);
      goto LABEL_23;
    case 3:
      v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v49);
      v29[13] = sub_40C8D0(v7);
      v29[14] = sub_491080(v29[13]);
      if ( v29[14] )
        goto LABEL_23;
      LOG_ERR("CGenNPC::Set() Can't find the Map. (index:%d)", v29[13]);
      result = 0;
      break;
    case 30:
      v4 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v52);
      v29[9] = sub_40C8D0(v4);
      goto LABEL_23;
    case 31:
      v9 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v48);
      v29[15] = sub_40C8D0(v9);
      v10 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v47);
      v29[16] = sub_40C8D0(v10);
      v11 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v46);
      v29[17] = sub_40C8D0(v11);
      goto LABEL_23;
    case 43:
      if ( (int)v29[25] <= 5 )
      {
        v21 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v36);
        v29[v29[25] + 26] = sub_40C8D0(v21);
        v22 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v35);
        v29[2 * v29[25] + 31] = sub_40C8D0(v22);
        v23 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v34);
        v29[2 * v29[25]++ + 32] = sub_40C8D0(v23);
      }
      goto LABEL_23;
    case 54:
      v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v50);
      v29[11] = sub_40C8D0(v6);
      goto LABEL_23;
    case 55:
      v5 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v51);
      v29[10] = sub_40C8D0(v5);
      goto LABEL_23;
    case 56:
      v12 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v45);
      v29[18] = sub_40C8D0(v12) - v29[15];
      v13 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v44);
      v29[19] = sub_40C8D0(v13) - v29[16];
      goto LABEL_23;
    case 70:
      v14 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v43);
      v29[12] |= sub_40C8D0(v14) << 16;
      v15 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v42);
      v29[12] |= sub_40C8D0(v15);
      goto LABEL_23;
    case 95:
      v16 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v41);
      v29[20] = sub_40C8D0(v16);
      goto LABEL_23;
    case 96:
      v17 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v40);
      v29[21] = sub_40C8D0(v17);
      goto LABEL_23;
    case 108:
      v18 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v39);
      v29[22] = sub_40C8D0(v18);
      v19 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v38);
      v29[23] = sub_40C8D0(v19);
      goto LABEL_23;
    case 109:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v20 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v37);
        v29[24] |= 1 << sub_40C8D0(v20);
      }
      goto LABEL_23;
    case 113:
      v24 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v33);
      v29[41] = sub_40C8D0(v24);
      v25 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v32);
      v29[42] = sub_40C8D0(v25);
      goto LABEL_23;
    case 114:
      v26 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v31);
      v29[43] = sub_40C8D0(v26);
      v27 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v30);
      v29[44] = sub_40C8D0(v27);
LABEL_23:
      result = 1;
      break;
    default:
      v28[0] = a2 - 2;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        v28,
        &a3);
      result = CBase::Set(v29, a2, v28[0]);
      break;
  }
  return result;
}
// 491080: using guessed type _DWORD __cdecl sub_491080(_DWORD);

//----- (004484D0) --------------------------------------------------------
int __thiscall CGenNPC::OnLoad(int this)
{
  int v1; // eax
  CItem *_Val2; // [esp+4h] [ebp-14h] BYREF
  char v5[8]; // [esp+8h] [ebp-10h] BYREF
  char v6[8]; // [esp+10h] [ebp-8h] BYREF

  _Val2 = (CItem *)this;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v5,
    (const char *const *)(this + 32),
    &_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v6,
    v1);
  if ( v6[4] )
    return 1;
  LOG_ERR("CGenNPC::OnLoad() Duplicated GenNPC.(Index:%d)", *(_DWORD *)(this + 32));
  return 0;
}
// 4484FC: variable 'v1' is possibly undefined
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (00448530) --------------------------------------------------------
int __thiscall CNPCObject::CNPCObject(int this)
{
  int i; // [esp+4h] [ebp-4h]

  CIOObject::CIOObject((CIOObject *)this);
  *(_DWORD *)this = &off_4B97A0;
  `vector constructor iterator'(
    (void *)(this + 16),
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  for ( i = 0; i < 2; ++i )
    CLink::Initialize((_DWORD *)(this + 8 * i + 80));
  return this;
}
// 4B97A0: using guessed type int (__stdcall *off_4B97A0)(int);

//----- (00448590) --------------------------------------------------------
void __thiscall CNPCObject::_CNPCObject(void *this)
{
  sub_4370E0((char *)this + 16, 32, 2, CIOCriticalSection::~CIOCriticalSection);
  std__locale__facet___facet(this);
}
// 423960: using guessed type int __thiscall std__locale__facet___facet(_DWORD);
// 4370E0: using guessed type _DWORD __stdcall sub_4370E0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004485C0) --------------------------------------------------------
void __thiscall CNPCObject::OnTimer(int this, int a2)
{
  _DWORD *v3; // [esp+8h] [ebp-18h]
  _DWORD *v4; // [esp+Ch] [ebp-14h]
  _DWORD *v5; // [esp+10h] [ebp-10h]
  _DWORD *v6; // [esp+14h] [ebp-Ch]
  DWORD v7; // [esp+18h] [ebp-8h]
  DWORD v8; // [esp+1Ch] [ebp-4h]

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 16));
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
      CLink::MoveTo((_DWORD *)(this + 88), this + 80);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
      v4 = *(_DWORD **)(this + 80);
      while ( v4 != (_DWORD *)(this + 80) )
      {
        v3 = v4 - 107;
        v4 = (_DWORD *)*v4;
        (*(void (__thiscall **)(_DWORD *))(*v3 + 204))(v3);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 16));
      CIOObject::AddTimer((CIOObject *)this, 0x3E8u, 1);
    }
  }
  else
  {
    v8 = GetTickCount();
    do
    {
      v7 = v8 + 30;
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 16));
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
      CLink::MoveTo((_DWORD *)(this + 88), this + 80);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
      v6 = *(_DWORD **)(this + 80);
      while ( v6 != (_DWORD *)(this + 80) )
      {
        v5 = v6 - 107;
        v6 = (_DWORD *)*v6;
        (*(void (__thiscall **)(_DWORD *))(*v5 + 200))(v5);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 16));
      v8 = GetTickCount();
    }
    while ( v7 <= v8 );
    CIOObject::AddTimer((CIOObject *)this, v7 - v8, 0);
  }
}

//----- (00448740) --------------------------------------------------------
void __thiscall CNPCObject::Insert(int this, CLink *a2)
{
  InterlockedIncrement(&dword_4E1A98);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  CLink::Insert(a2, (CLink *)(this + 88));
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
}

//----- (00448780) --------------------------------------------------------
int __thiscall CNPC::CNPC(int this, _DWORD *a2)
{
  CChar::CChar((char *)this);
  *(_DWORD *)this = &off_4B97B8;
  *(_DWORD *)(this + 24) = 3;
  *(_DWORD *)(this + 316) = a2[13];
  *(_DWORD *)(this + 320) = a2[14];
  *(_DWORD *)(this + 440) = 0;
  *(_DWORD *)(this + 448) = a2[8];
  *(_DWORD *)(this + 452) = a2[10];
  *(_DWORD *)(this + 456) = 0;
  *(_DWORD *)(this + 464) = a2[20];
  *(_DWORD *)(this + 468) = a2[21];
  return this;
}
// 4B97B8: using guessed type int (__stdcall *off_4B97B8)(int);

//----- (00448820) --------------------------------------------------------
BOOL __thiscall sub_448820(int *this, int a2)
{
  return (int)sub_448870(this + 83, a2) <= 64 && this[114] > 0;
}
// 448870: using guessed type _DWORD __cdecl sub_448870(_DWORD, _DWORD);

//----- (00448870) --------------------------------------------------------
int __cdecl sub_448870(_DWORD *a1, _DWORD *a2)
{
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+4h] [ebp-8h]
  int v5; // [esp+8h] [ebp-4h]

  v4 = abs(*a1 - *a2);
  v5 = abs(a1[1] - a2[1]);
  if ( v4 <= v5 )
    v3 = v5;
  else
    v3 = v4;
  return v3;
}

//----- (004488D0) --------------------------------------------------------
void __stdcall CGunnery::ExcutePassive(int a1, int a2, int a3)
{
  ;
}

//----- (004488E0) --------------------------------------------------------
void *__thiscall CNPC::_scalar_deleting_destructor_(void *this, char a2)
{
  CNPC::_CNPC(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 448910: using guessed type int __thiscall sub_448910(_DWORD);

//----- (00448910) --------------------------------------------------------
int __thiscall CNPC::_CNPC(_DWORD *this)
{
  *this = &off_4B97B8;
  return CChar::_CChar((int)this);
}
// 4B97B8: using guessed type int (__stdcall *off_4B97B8)(int);

//----- (00448930) --------------------------------------------------------
void __cdecl CNPC::Create(_DWORD *a1)
{
  int v1; // eax
  _DWORD *v2; // [esp+0h] [ebp-5Ch]
  _DWORD *v3; // [esp+4h] [ebp-58h]
  _DWORD *v4; // [esp+8h] [ebp-54h]
  _DWORD *v5; // [esp+Ch] [ebp-50h]
  _DWORD *v6; // [esp+10h] [ebp-4Ch]
  _DWORD *v7; // [esp+14h] [ebp-48h]
  _DWORD *v8; // [esp+18h] [ebp-44h]
  _DWORD *v9; // [esp+1Ch] [ebp-40h]
  _DWORD *v10; // [esp+20h] [ebp-3Ch]
  char v11[4]; // [esp+4Ch] [ebp-10h] BYREF
  int v12; // [esp+50h] [ebp-Ch]
  _DWORD *v13; // [esp+54h] [ebp-8h]
  char v14[4]; // [esp+58h] [ebp-4h] BYREF

  sub_44AE20(v14, a1 + 9);
  v1 = sub_430C20(v11);
  if ( (unsigned __int8)unknown_libname_16(v1) )
  {
    LOG_ERR("CNPC::Create() Invalid InitNPC.(Index:%d)", a1[9]);
  }
  else
  {
    v12 = *(_DWORD *)(sub_420250(v14) + 4);
    if ( (a1[24] & (1 << dword_4E35B8)) != 0 )
    {
      v13 = 0;
      switch ( *(_DWORD *)(v12 + 32) )
      {
        case 0:
          if ( operator_new(0x1D8u) )
            v10 = (_DWORD *)CNPCMerchant::CNPCMerchant(a1);
          else
            v10 = 0;
          v13 = v10;
          goto LABEL_42;
        case 1:
          if ( operator_new(0x1D8u) )
            v9 = (_DWORD *)CNPCMerchant::CNPCMerchant(a1);
          else
            v9 = 0;
          v13 = v9;
          goto LABEL_42;
        case 2:
          if ( operator_new(0x1D8u) )
            v8 = (_DWORD *)CNPCMerchant::CNPCMerchant(a1);
          else
            v8 = 0;
          v13 = v8;
          goto LABEL_42;
        case 3:
          if ( operator_new(0x1D8u) )
            v7 = (_DWORD *)CNPCQuest::CNPCQuest(a1);
          else
            v7 = 0;
          v13 = v7;
          goto LABEL_42;
        case 4:
          if ( operator_new(0x1E8u) )
            v6 = (_DWORD *)CNPCScenario::CNPCScenario(a1);
          else
            v6 = 0;
          v13 = v6;
          goto LABEL_42;
        case 5:
          if ( operator_new(0x1E8u) )
            v5 = (_DWORD *)CNPCTeleport::CNPCTeleport(a1);
          else
            v5 = 0;
          v13 = v5;
          goto LABEL_42;
        case 6:
          if ( operator_new(0x1E8u) )
            v4 = (_DWORD *)CNPCDoor::CNPCDoor(a1);
          else
            v4 = 0;
          v13 = v4;
          goto LABEL_42;
        case 7:
          if ( operator_new(0x208u) )
            v3 = (_DWORD *)CNPCSiegeGunStone::CNPCSiegeGunStone(a1);
          else
            v3 = 0;
          v13 = v3;
          goto LABEL_42;
        case 8:
          if ( operator_new(0x1D8u) )
            v2 = (_DWORD *)CNPCMerchant::CNPCMerchant(a1);
          else
            v2 = 0;
          v13 = v2;
LABEL_42:
          CChar::Lock((int)v13);
          v13[111] = a1;
          CChar::SetXY(v13, a1 + 15);
          CNPC::SetProperty(v12, a1);
          (*(void (__thiscall **)(_DWORD *))(*v13 + 208))(v13);
          if ( v13[117] != 2 )
            sub_491360(v13, v13 + 81);
          CNPC::Add(v13);
          CChar::Unlock((int)v13);
          break;
        default:
          LOG_ERR("CNPC::Create() Invalid NPC kind. (Kind:%d)", *(_DWORD *)(v12 + 32));
          break;
      }
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 448C80: using guessed type _DWORD __stdcall sub_448C80(_DWORD);
// 448D00: using guessed type _DWORD __stdcall sub_448D00(_DWORD);
// 448D60: using guessed type _DWORD __stdcall sub_448D60(_DWORD);
// 448DC0: using guessed type _DWORD __stdcall sub_448DC0(_DWORD);
// 448E10: using guessed type _DWORD __stdcall sub_448E10(_DWORD);
// 448E60: using guessed type _DWORD __stdcall sub_448E60(_DWORD);
// 449390: using guessed type int __thiscall sub_449390(_DWORD);
// 449490: using guessed type _DWORD __stdcall sub_449490(_DWORD, _DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00448C80) --------------------------------------------------------
_DWORD *__thiscall CNPCTeleport::CNPCTeleport(_DWORD *this, _DWORD *a2)
{
  CNPC::CNPC((int)this, a2);
  *this = &off_4B98F0;
  this[119] = a2 + 26;
  this[120] = a2 + 31;
  this[118] = a2[25];
  return this;
}
// 4B98F0: using guessed type int (__stdcall *off_4B98F0)(int);

//----- (00448CE0) --------------------------------------------------------
int __thiscall NPCScenario::_CNPCScenario(_DWORD *this)
{
  return CNPC::_CNPC(this);
}

//----- (00448D00) --------------------------------------------------------
_DWORD *__thiscall CNPCMerchant::CNPCMerchant(_DWORD *this, _DWORD *a2)
{
  CNPC::CNPC((int)this, a2);
  *this = &off_4B99D0;
  return this;
}
// 4B99D0: using guessed type int (__stdcall *off_4B99D0)(int);

//----- (00448D30) --------------------------------------------------------
_DWORD *__thiscall CNPCInformant::_scalar_deleting_destructor_(_DWORD *this, char a2)
{
  NPCScenario::_CNPCScenario(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00448D60) --------------------------------------------------------
_DWORD *__thiscall CNPCQuest::CNPCQuest(_DWORD *this, _DWORD *a2)
{
  CNPC::CNPC((int)this, a2);
  *this = &off_4B9AB0;
  return this;
}
// 4B9AB0: using guessed type int (__stdcall *off_4B9AB0)(int);

//----- (00448D90) --------------------------------------------------------
BOOL __thiscall CNPCQuest::CanReply(_DWORD *this, _DWORD *a2)
{
  return sub_448870(this + 83, a2) <= 64;
}

//----- (00448DC0) --------------------------------------------------------
_DWORD *__thiscall CNPCScenario::CNPCScenario(_DWORD *this, _DWORD *a2)
{
  CNPC::CNPC((int)this, a2);
  *this = &off_4B9B90;
  this[120] = 0;
  this[118] = a2[22];
  this[119] = a2[23];
  return this;
}
// 4B9B90: using guessed type int (__stdcall *off_4B9B90)(int);

//----- (00448E10) --------------------------------------------------------
_DWORD *__thiscall CNPCDoor::CNPCDoor(_DWORD *this, _DWORD *a2)
{
  CNPC::CNPC((int)this, a2);
  *this = &off_4B9C70;
  this[120] = 0;
  this[119] = a2[22];
  this[118] = a2[23];
  return this;
}
// 4B9C70: using guessed type int (__stdcall *off_4B9C70)(int);

//----- (00448E60) --------------------------------------------------------
_DWORD *__thiscall CNPCSiegeGunStone::CNPCSiegeGunStone(_DWORD *this, _DWORD *a2)
{
  int v2; // ecx
  int v3; // edx

  CNPC::CNPC((int)this, a2);
  *this = &off_4B9D50;
  this[124] = 0;
  this[125] = 0;
  this[126] = 0;
  v2 = a2[42];
  this[120] = a2[41];
  this[121] = v2;
  v3 = a2[44];
  this[122] = a2[43];
  this[123] = v3;
  this[127] = 0;
  return this;
}
// 4B9D50: using guessed type int (__stdcall *off_4B9D50)(int);

//----- (00448F00) --------------------------------------------------------
LONG CNPC::Size()
{
  return dword_4E1A98;
}

//----- (00448F10) --------------------------------------------------------
void CNPC::Start()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E1AA8,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v2);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    v1 = sub_420250(v4);
    CNPC::Create(*(_DWORD **)(v1 + 4));
    sub_446090(v3, 0);
  }
  CIOObject::AddTimer((CIOObject *)&dword_4E1AD8, 0x3E8u, 1);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00448F80) --------------------------------------------------------
int CNPC::Stop()
{
  CNPCScenario::ResetBossTower(1);
  return CMonsterObject::Stop(dword_4E1AD8);
}
// 4497D0: using guessed type _DWORD __cdecl CNPCScenario::ResetBossTower(_DWORD);

//----- (00448FA0) --------------------------------------------------------
int __cdecl CNPC::FindNPC(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  int v4; // [esp+4h] [ebp-8h]
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  v4 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E1AC0);
  sub_44AE20(v5, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
         v1) )
  {
    v4 = *(_DWORD *)(sub_420250(v5) + 4);
    CIOObject::AddRef(v4);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1AC0);
  return v4;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00449010) --------------------------------------------------------
int __cdecl CNPC::CanReply(char a1, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+0h] [ebp-10h] BYREF
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+8h] [ebp-8h]
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E1AC0);
  sub_44AE20(v7, &a1);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
         v2) )
  {
    v5 = *(_DWORD *)(sub_420250(v7) + 4);
    if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v5 + 188))(v5, a2) )
      v6 = 1;
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1AC0);
  return v6;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (004490A0) --------------------------------------------------------
void __usercall sub_4490A0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  char v6[4]; // [esp+0h] [ebp-Ch] BYREF
  int v7; // [esp+4h] [ebp-8h]
  int v8; // [esp+8h] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E1AC0);
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E1AB4,
    &v8,
    &a4);
  v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E1AB4, v6);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v8,
         v5) )
  {
    v7 = *(_DWORD *)(sub_420250(&v8) + 4);
    if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v7 + 188))(v7, a5 + 332) )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v7 + 192))(v7, a5);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1AC0, a1, a2, a3);
}

//----- (00449130) --------------------------------------------------------
void __thiscall CNPC::OnDelete(Concurrency::details::_CancellationTokenRegistration *this)
{
  CChar::Lock((int)this);
  CNPC::Remove(this);
  sub_4913E0(this, (int)this + 324);
  CChar::Unlock((int)this);
  CBase::OnDelete((volatile int *)this);
}
// 449400: using guessed type int __thiscall sub_449400(_DWORD);

//----- (00449180) --------------------------------------------------------
void __thiscall CNPC::SendDelete(_DWORD *this, int a2, int a3)
{
  CPlayer::Write(a2, 57, "d", this[7]);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (004491B0) --------------------------------------------------------
void __thiscall CNPC::SendCreate(_DWORD *this, int a2, int a3)
{
  CPlayer::Write(
    a2,
    52,
    "dwbdddwdd",
    this[7],
    this[112],
    this[113],
    this[83],
    this[84],
    this[85],
    this[87],
    this[70],
    0);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00449220) --------------------------------------------------------
void __thiscall CMonsterReal::AddGState(int this, int a2)
{
  CChar::AddGState((volatile LONG *)this, a2);
  CChar::WriteInSight(this, 46, "dd", *(_DWORD *)(this + 28), *(_DWORD *)(this + 280));
}

//----- (00449260) --------------------------------------------------------
void __thiscall CNPC::Reply(_DWORD *this, int a2)
{
  if ( (int)this[114] > 0 )
    CPlayer::Write(a2, 74, "d", this[114]);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (004492A0) --------------------------------------------------------
void __cdecl CNPC::WarRelationShow(int a1, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  _DWORD *v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h]

  v6 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E1AC0);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E1AB4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v5);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
            v2) )
      break;
    v7 = *(_DWORD *)(sub_420250(v5) + 4);
    if ( *(_DWORD *)(v7 + 464) == a1 )
      v6 = CBaseList::Push(v6, v7);
    sub_446090(v4, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1AC0);
  while ( v6 )
  {
    v7 = unknown_libname_15(v6);
    if ( *(_DWORD *)(v7 + 468) == 1 )
    {
      CNPC::Show(a2);
    }
    else if ( *(_DWORD *)(v7 + 468) == 2 )
    {
      CNPC::Show(a2 == 0);
    }
    v6 = (_DWORD *)CBaseList::Pop((int)v6);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 4494F0: using guessed type _DWORD __stdcall sub_4494F0(_DWORD);

//----- (00449390) --------------------------------------------------------
void __thiscall CNPC::Add(int this)
{
  int v1; // eax
  char v3[8]; // [esp+4h] [ebp-18h] BYREF
  char *_Val1; // [esp+Ch] [ebp-10h] BYREF
  CItem *_Val2; // [esp+10h] [ebp-Ch] BYREF
  char v6[8]; // [esp+14h] [ebp-8h] BYREF

  CIOObject::AddRef(this);
  CNPCObject::Insert((int)dword_4E1AD8, (CLink *)(this + 428));
  CRWLock::WriteLock((CRWLock *)&unk_4E1AC0);
  _Val2 = (CItem *)this;
  _Val1 = *(char **)(this + 28);
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v6,
    (const char *const *)&_Val1,
    &_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v3,
    v1);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E1AC0);
}
// 4493E7: variable 'v1' is possibly undefined
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (00449400) --------------------------------------------------------
LONG __thiscall CNPC::Remove(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E1AC0);
  v3 = this[7];
  sub_44ADC0(&v3);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E1AC0);
  return InterlockedDecrement(&dword_4E1A98);
}
// 44ADC0: using guessed type _DWORD __stdcall sub_44ADC0(_DWORD);

//----- (00449450) --------------------------------------------------------
int __thiscall CMonster::IsRemoved(int this)
{
  if ( !CBase::IsDeleted((_DWORD *)this) )
    return 0;
  CLink::Remove((CLink *)(this + 428));
  CIOObject::Release((volatile int *)this);
  return 1;
}

//----- (00449490) --------------------------------------------------------
void __thiscall CNPC::SetProperty(_DWORD *this, int a2, _DWORD *a3)
{
  this[110] = a2;
  this[114] = a3[11];
  this[115] = a3[12];
  this[85] = a3[17];
  CChar::SetDirection(this, a3[18], a3[19]);
}

//----- (004494F0) --------------------------------------------------------
void __thiscall CNPC::Show(Concurrency::details::_CancellationTokenRegistration *this, int a2)
{
  CChar::Lock((int)this);
  if ( a2 )
  {
    sub_491360(this, (char *)this + 324);
    CChar::WriteInSight(
      (int)this,
      52,
      "dwbdddwdd",
      *((_DWORD *)this + 7),
      *((_DWORD *)this + 112),
      *((_DWORD *)this + 113),
      *((_DWORD *)this + 83),
      *((_DWORD *)this + 84),
      *((_DWORD *)this + 85),
      *((_DWORD *)this + 87),
      *((_DWORD *)this + 70),
      0);
  }
  else
  {
    sub_4913E0(this, (int)this + 324);
    CChar::WriteInSight((int)this, 57, "d", *((_DWORD *)this + 7));
  }
  CChar::Unlock((int)this);
}
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);

//----- (004495D0) --------------------------------------------------------
void __cdecl CNPC::GetNPCList(int a1, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v5[4]; // [esp+0h] [ebp-Ch] BYREF
  char v6[4]; // [esp+4h] [ebp-8h] BYREF
  char v7[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::ReadLock((CRWLock *)&unk_4E1AC0);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E1AB4,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v3) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v7) + 4) + 440) + 32) == a2
      && *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250(v7) + 4) + 444) + 52) == a3 )
    {
      v4 = sub_420250(v7);
      sub_47D000(v4 + 4);
    }
    sub_446090(v6, 0);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E1AC0);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (00449680) --------------------------------------------------------
void __thiscall CNPCQuest::Reply(int *this, int a2)
{
  sub_47CB40(this[115], a2);
}

//----- (004496B0) --------------------------------------------------------
void __cdecl CNPCScenario::MirrorGState(int a1, int a2)
{
  int j; // [esp+0h] [ebp-8h]
  int i; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B38);
  if ( a1 )
  {
    for ( i = 0; i < 8; ++i )
    {
      if ( dword_4E1A70[i] )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A70[i] + 100))(dword_4E1A70[i], a2);
    }
  }
  else
  {
    for ( j = 0; j < 8; ++j )
    {
      if ( dword_4E1A70[j] )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A70[j] + 112))(dword_4E1A70[j], a2);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
}

//----- (00449770) --------------------------------------------------------
void __cdecl CNPCScenario::ThroneGState(int a1, int a2)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B38);
  if ( a1 )
  {
    if ( dword_4E1A90 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A90 + 100))(dword_4E1A90, a2);
  }
  else if ( dword_4E1A90 )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_4E1A90 + 112))(dword_4E1A90, a2);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
}
// 4E1A90: using guessed type int dword_4E1A90;

//----- (004497D0) --------------------------------------------------------
void __cdecl CNPCScenario::ResetBossTower(int a1)
{
  int i; // [esp+0h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B38);
  if ( a1 )
  {
    for ( i = 0; i < 9; ++i )
      dword_4E1A70[i] = 0;
  }
  dword_4E1A94 = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
}
// 4E1A94: using guessed type int dword_4E1A94;

//----- (00449830) --------------------------------------------------------
void __thiscall CNPCScenario::Tick(int *this)
{
  DWORD v2; // [esp+4h] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B38);
    v2 = GetTickCount();
    if ( dword_4E1A94 != 255 && CChar::IsGState(this, 1) && v2 >= this[120] )
    {
      (*(void (__thiscall **)(int *, int))(*this + 112))(this, 1);
      dword_4E1A94 &= ~(1 << this[118]);
      this[120] = 0;
      CPlayer::WriteInMap(this[79], 68, "bw", 94, this[119]);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
  }
}
// 4E1A94: using guessed type int dword_4E1A94;

//----- (004498F0) --------------------------------------------------------
void __thiscall CNPCScenario::InitScenario(_DWORD *this)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B38);
  if ( (int)this[118] >= 0 && (int)this[118] < 9 )
    dword_4E1A70[this[118]] = (int)this;
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
}

//----- (00449940) --------------------------------------------------------
void __thiscall CNPCScenario::Process(int *this, int a2, void *Src, int end)
{
  char v5; // [esp+7h] [ebp-1h] BYREF

  ScanPacket((char *)Src, (char *)end, "b", &v5);
  if ( v5 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B38);
    if ( this[118] == 8 || !dword_4E1A70[this[118]] )
      goto LABEL_11;
    if ( (dword_4E1A94 & (1 << this[118])) != 0 )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
      CPlayer::Write(a2, 67, "b", 91);
      return;
    }
    if ( !CPlayer::RemoveItem(9, this[119], 1) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
      CPlayer::Write(a2, 68, "bw", 92, this[119]);
      return;
    }
    (*(void (__thiscall **)(int *, int))(*this + 100))(this, 1);
    this[120] = GetTickCount() + 600000;
    CPlayer::WriteInMap(this[79], 68, "bw", 93, this[119]);
    dword_4E1A94 |= 1 << this[118];
    if ( dword_4E1A94 == 255 )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
      sub_493E80(this[79], 1);
    }
    else
    {
LABEL_11:
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B38);
    }
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45DA90: using guessed type _DWORD __stdcall CPlayer::RemoveItem(_DWORD, _DWORD, _DWORD);
// 493E80: using guessed type _DWORD __stdcall sub_493E80(_DWORD, _DWORD);
// 4E1A94: using guessed type int dword_4E1A94;

//----- (00449AE0) --------------------------------------------------------
int __thiscall CNPCTeleport::Process(_DWORD *this, int a2, void *Src, int end)
{
  int result; // eax
  int v6[2]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+Ch] [ebp-8h]
  unsigned __int8 v8; // [esp+13h] [ebp-1h] BYREF

  v7 = 0;
  ScanPacket((char *)Src, (char *)end, "b", &v8);
  result = v8;
  if ( v8 )
  {
    v7 = RandomBetween(0, this[118] - 1);
    result = (int)this;
    if ( *(int *)(this[120] + 8 * v7) >= 0 )
    {
      result = (int)this;
      if ( *(int *)(this[120] + 8 * v7 + 4) >= 0 )
      {
        v6[0] = RandomBetween(*(_DWORD *)(this[120] + 8 * v7) - 32, *(_DWORD *)(this[120] + 8 * v7) + 32);
        v6[1] = RandomBetween(*(_DWORD *)(this[120] + 8 * v7 + 4) - 32, *(_DWORD *)(this[120] + 8 * v7 + 4) + 32);
        result = CPlayer::Teleport(*(_DWORD *)(this[119] + 4 * v7), v6, 0, 0);
      }
    }
  }
  return result;
}
// 45CC90: using guessed type _DWORD __stdcall CPlayer::Teleport(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00449BF0) --------------------------------------------------------
void __thiscall CNPCDoor::Tick(_DWORD *this)
{
  DWORD v2; // [esp+4h] [ebp-4h]

  if ( !CMonster::IsRemoved((int)this) )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B58);
    v2 = GetTickCount();
    if ( CChar::IsGState(this, 16) )
    {
      if ( v2 >= this[120] )
      {
        (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 16);
        this[120] = 0;
        CPlayer::WriteInMap(this[79], 68, "bw", 117, this[7]);
      }
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B58);
  }
}

//----- (00449C80) --------------------------------------------------------
void __thiscall CNPCDoor::Process(_DWORD *this, int a2, void *Src, int end)
{
  char v5; // [esp+7h] [ebp-1h] BYREF

  ScanPacket((char *)Src, (char *)end, "b", &v5);
  if ( v5 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B58);
    if ( CChar::IsGState(this, 16) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B58);
    }
    else if ( CPlayer::RemoveItem(9, this[118], 1) )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*this + 100))(this, 16);
      this[120] = 1000 * this[119] + GetTickCount();
      CPlayer::WriteInMap(this[79], 68, "bw", 116, this[7]);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B58);
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B58);
      CPlayer::Write(a2, 68, "bw", 115, this[118]);
    }
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45DA90: using guessed type _DWORD __stdcall CPlayer::RemoveItem(_DWORD, _DWORD, _DWORD);

//----- (00449D80) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::Reply(_DWORD *this, int a2)
{
  if ( (int)this[114] > 0 )
    CPlayer::Write(a2, 0, "bdd", 0, this[70], this[114]);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00449DD0) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::Tick(_DWORD *this)
{
  int v1; // eax
  int v2; // [esp+0h] [ebp-40h]
  CIOObject *v4; // [esp+8h] [ebp-38h]
  char *v5; // [esp+Ch] [ebp-34h]
  int v6; // [esp+10h] [ebp-30h] BYREF
  int v7; // [esp+14h] [ebp-2Ch] BYREF
  char *v8; // [esp+18h] [ebp-28h]
  int k; // [esp+1Ch] [ebp-24h]
  char *v10; // [esp+20h] [ebp-20h]
  int j; // [esp+24h] [ebp-1Ch]
  int i; // [esp+28h] [ebp-18h]
  _DWORD *v13; // [esp+2Ch] [ebp-14h]
  int v14; // [esp+30h] [ebp-10h]
  CIOObject *v15; // [esp+34h] [ebp-Ch]
  CIOObject *v16; // [esp+38h] [ebp-8h]
  DWORD v17; // [esp+3Ch] [ebp-4h]

  if ( CMonster::IsRemoved((int)this) || !this[125] )
    return;
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B78);
  v16 = (CIOObject *)sub_450810();
  if ( v16 )
  {
    v17 = GetTickCount();
    if ( !CPlayer::IsEState(2048) )
    {
      v4 = CMonster::FindMonster(this[126]);
      if ( v4 )
      {
        CIOObject::Release(v4, (volatile int *)v4 + 88);
      }
      else
      {
        this[125] = 0;
        this[126] = 0;
        this[127] = 0;
        (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 32);
      }
      goto LABEL_63;
    }
    if ( CChar::IsGState(this, 32) )
    {
      if ( CChar::IsGState(this, 64) && v17 >= this[124] )
      {
        v5 = (char *)CMonster::FindMonster(this[126]);
        if ( !v5 )
        {
          CIOObject::Release(v16, (volatile int *)v16 + 88);
          CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
          return;
        }
        CPlayer::SubEState(2048);
        CMonster::ResetNextMove(this[116], 0);
        (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 64);
        this[124] = 0;
        (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 32);
        v7 = 0;
        v6 = 0;
        (*(void (__thiscall **)(char *, CIOObject *, _DWORD, int *, int *))(*(_DWORD *)v5 + 236))(v5, v16, 0, &v7, &v6);
        CChar::WriteInSight((int)v16, 0, "bdd", 4, this[7], this[70]);
        CBase::Delete(v5);
        this[127] = 0;
        this[126] = 0;
      }
      goto LABEL_63;
    }
    if ( !CChar::IsGState(this, 64) || v17 < this[124] )
    {
LABEL_63:
      CIOObject::Release(v16, (volatile int *)v16 + 88);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    if ( (dword_4E1174[0] & 2) == 0 && !CGuild::IsWarringPeriod() )
    {
      CPlayer::SubEState(2048);
      (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 64);
      this[124] = 0;
      this[125] = 0;
      CPlayer::Write(v16, 67, "b", 118);
      CIOObject::Release(v16, (volatile int *)v16 + 88);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    v14 = 0;
    v2 = this[128];
    switch ( v2 )
    {
      case 0:
        for ( i = 0; i < 8; ++i )
        {
          if ( !CPlayer::FindItem(dword_4D62F0[i], 1) )
            goto LABEL_45;
          CPlayer::RemoveItem(9, dword_4D62F0[i], 1);
        }
        goto LABEL_52;
      case 1:
        for ( j = 0; j < 3 && dword_4D6310[j]; ++j )
        {
          if ( CPlayer::FindItem(dword_4D6310[j], 1) )
          {
            v14 = dword_4D6310[j];
            break;
          }
        }
        if ( v14 )
        {
          if ( v14 == 882 )
          {
            CPlayer::RemoveItem(9, 882, 1);
          }
          else
          {
            CPlayer::RemoveItem(9, v14, 1);
            v10 = (char *)CItem::CreateItem(v14 + 1, 0, 1, 0);
            if ( v10 )
            {
              CIOObject::AddRef(v10);
              if ( CPlayer::InsertItem(2, v10) == 0 )
                CBase::Delete(v10);
              CIOObject::Release((volatile int *)v10);
            }
          }
          goto LABEL_52;
        }
        break;
      case 2:
        for ( k = 0; k < 4 && dword_4D6330[k]; ++k )
        {
          if ( CPlayer::FindItem(dword_4D6330[k], 1) )
          {
            v14 = dword_4D6330[k];
            break;
          }
        }
        if ( v14 )
        {
          if ( v14 == 886 )
          {
            CPlayer::RemoveItem(9, 886, 1);
          }
          else
          {
            CPlayer::RemoveItem(9, v14, 1);
            v8 = (char *)CItem::CreateItem(v14 + 1, 0, 1, 0);
            if ( v8 )
            {
              CIOObject::AddRef(v8);
              if ( CPlayer::InsertItem(2, v8) == 0 )
                CBase::Delete(v8);
              CIOObject::Release((volatile int *)v8);
            }
          }
          goto LABEL_52;
        }
        break;
      default:
LABEL_52:
        CPlayer::SubEState(2048);
        CMonster::ResetNextMove(this[116], 1);
        (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 64);
        this[124] = 0;
        (*(void (__thiscall **)(_DWORD *, int))(*this + 100))(this, 32);
        v1 = std___Mpunct_wchar_t___do_frac_digits(this);
        v13 = CMonsterSiegeGun::Create(
                this[128] + 319,
                this[79],
                (int)(this + 120),
                (int)(this + 122),
                *((_DWORD *)v16 + 120),
                (char *)v16 + 492,
                v1);
        CChar::WriteInSight((int)v16, 0, "bddd", 2, this[7], this[70], *((_DWORD *)v16 + 128));
        this[127] = *((_DWORD *)v16 + 128);
        this[126] = std___Mpunct_wchar_t___do_frac_digits(v13);
        this[125] = 0;
        goto LABEL_63;
    }
LABEL_45:
    CPlayer::Write(v16, 67, "b", 123);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
    CIOObject::Release(v16, (volatile int *)v16 + 88);
    return;
  }
  this[125] = 0;
  this[124] = 0;
  (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 64);
  v15 = CMonster::FindMonster(this[126]);
  if ( v15 )
  {
    CMonsterSiegeGun::SetOperator(v15, 0);
    CIOObject::Release(v15, (volatile int *)v15 + 88);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 44A4E0: using guessed type _DWORD __stdcall CPlayer::SubEState(_DWORD);
// 44A510: using guessed type _DWORD __stdcall CPlayer::IsEState(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D190: using guessed type _DWORD __stdcall CPlayer::FindItem(_DWORD, _DWORD);
// 45DA90: using guessed type _DWORD __stdcall CPlayer::RemoveItem(_DWORD, _DWORD, _DWORD);
// 45DDC0: using guessed type _DWORD __stdcall CPlayer::InsertItem(_DWORD, _DWORD);

//----- (0044A4E0) --------------------------------------------------------
int __thiscall CPlayer::SubEState(_DWORD *this, int a2)
{
  int result; // eax

  result = this[142] & ~a2;
  this[142] = result;
  return result;
}

//----- (0044A510) --------------------------------------------------------
int __thiscall CPlayer::IsEState(_DWORD *this, int a2)
{
  return a2 & this[142];
}

//----- (0044A530) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SiegeGunSet(int this, _DWORD *a2, int a3, int a4)
{
  int j; // [esp+10h] [ebp-14h]
  int i; // [esp+14h] [ebp-10h]
  int k; // [esp+18h] [ebp-Ch]
  int v8; // [esp+1Ch] [ebp-8h]
  int v9; // [esp+20h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B78);
  if ( a3 )
  {
    if ( CChar::IsGState((_DWORD *)this, 64) )
    {
      CPlayer::Write(a2, 67, "b", 120);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    if ( CChar::IsGState((_DWORD *)this, 32) )
    {
      CPlayer::Write(a2, 67, "b", 129);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    if ( (dword_4E1174[0] & 2) == 0 && (!a2[121] || !CCastle::IsAllCastleWarRelation(a2[121])) )
    {
      CPlayer::Write(a2, 67, "b", 134);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    if ( !CChar::IsBState(0, 64) && !CPlayerSkill::IsSkill(80) && !CPlayerSkill::IsSkill(81) )
    {
      CPlayer::Write(a2, 67, "b", 130);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    v9 = 0;
    if ( a4 )
    {
      if ( a4 == 1 )
      {
        for ( i = 0; i < 3 && dword_4D6310[i]; ++i )
        {
          if ( CPlayer::FindItem(dword_4D6310[i], 1) )
          {
            v9 = dword_4D6310[i];
            break;
          }
        }
        if ( !v9 )
          goto LABEL_39;
      }
      else if ( a4 == 2 )
      {
        for ( j = 0; j < 4 && dword_4D6330[j]; ++j )
        {
          if ( CPlayer::FindItem(dword_4D6330[j], 1) )
          {
            v9 = dword_4D6330[j];
            break;
          }
        }
        if ( !v9 )
        {
LABEL_39:
          CPlayer::Write(a2, 67, "b", 123);
          CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
          return;
        }
      }
    }
    else
    {
      for ( k = 0; k < 8; ++k )
      {
        if ( !CPlayer::FindItem(dword_4D62F0[k], 1) )
          goto LABEL_39;
      }
    }
    if ( CRainforceDefense::CRainforceDefense((std::_Ref_count_base *)a2[121], *(const struct type_info **)(this + 464)) )
    {
      CPlayer::Write(a2, 68, "bs", 131, a2 + 123);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    *(_DWORD *)(this + 512) = a4;
    *(_DWORD *)(this + 500) = std___Mpunct_wchar_t___do_frac_digits(a2);
    v8 = 30;
    if ( a4 == 2 )
      v8 = 20;
    *(_DWORD *)(this + 496) = 1000 * v8 + GetTickCount();
    CPlayer::AddEState(a2, 2048);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 100))(this, 64);
    CPlayer::Write(a2, 0, "bb", 1, v8);
  }
  else
  {
    CPlayer::SubEState(a2, 2048);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 64);
    *(_DWORD *)(this + 496) = 0;
    *(_DWORD *)(this + 500) = 0;
    CPlayer::Write(a2, 67, "b", 118);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
}
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 44A940: using guessed type _DWORD __stdcall CPlayerSkill::IsSkill(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45D190: using guessed type _DWORD __stdcall CPlayer::FindItem(_DWORD, _DWORD);

//----- (0044A940) --------------------------------------------------------
int __thiscall CPlayerSkill::IsSkill(_DWORD *this, int a2)
{
  return this[a2 + 2];
}

//----- (0044A960) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SiegeGunUnSet(_DWORD *this, _DWORD *a2, int a3)
{
  int v4; // [esp+Ch] [ebp-Ch]
  CIOObject *v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1B78);
  if ( !a3 )
  {
    CPlayer::SubEState(a2, 2048);
    (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 64);
    this[124] = 0;
    this[125] = 0;
    CPlayer::Write(a2, 67, "b", 128);
LABEL_19:
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
    return;
  }
  if ( CChar::IsGState(this, 64) )
  {
    CPlayer::Write(a2, 67, "b", 121);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
    return;
  }
  if ( this[125] )
  {
    CPlayer::Write(a2, 67, "b", 127);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
    return;
  }
  if ( !CChar::IsBState(0, 64) && !CPlayerSkill::IsSkill(a2 + 156, 80) && !CPlayerSkill::IsSkill(a2 + 156, 81) )
  {
    CPlayer::Write(a2, 67, "b", 130);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
    return;
  }
  v5 = CMonster::FindMonster(this[126]);
  if ( v5 )
  {
    v4 = *((_DWORD *)v5 + 128) - 319;
    if ( *((_DWORD *)v5 + 131) != a2[120] )
    {
      CPlayer::Write(a2, 67, "b", 133);
      CIOObject::Release(v5, (volatile int *)v5 + 88);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1B78);
      return;
    }
    CIOObject::Release(v5, (volatile int *)v5 + 88);
    this[125] = std___Mpunct_wchar_t___do_frac_digits(a2);
    v6 = 30;
    if ( v4 == 2 )
      v6 = 20;
    if ( (dword_4E1174[0] & 2) != 0 )
      v6 = 5;
    this[124] = 1000 * v6 + GetTickCount();
    CPlayer::AddEState(a2, 2048);
    (*(void (__thiscall **)(_DWORD *, int))(*this + 100))(this, 64);
    CPlayer::Write(a2, 0, "bb", 3, v6);
    goto LABEL_19;
  }
}
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0044ABC0) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::Show(Concurrency::details::_CancellationTokenRegistration *this, int a2)
{
  CChar::Lock((int)this);
  if ( a2 )
  {
    sub_491360(this, (char *)this + 324);
    CChar::WriteInSight(
      (int)this,
      52,
      "dwbdddwdd",
      *((_DWORD *)this + 7),
      *((_DWORD *)this + 112),
      *((_DWORD *)this + 113),
      *((_DWORD *)this + 83),
      *((_DWORD *)this + 84),
      *((_DWORD *)this + 85),
      *((_DWORD *)this + 87),
      *((_DWORD *)this + 70),
      *((_DWORD *)this + 127));
  }
  else
  {
    sub_4913E0(this, (int)this + 324);
    CChar::WriteInSight((int)this, 57, "d", *((_DWORD *)this + 7));
  }
  CChar::Unlock((int)this);
}
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);

//----- (0044ACB0) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SendCreate(_DWORD *this, int a2, int a3)
{
  CPlayer::Write(
    a2,
    52,
    "dwbdddwdd",
    this[7],
    this[112],
    this[113],
    this[83],
    this[84],
    this[85],
    this[87],
    this[70],
    this[127]);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0044AD30) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SetOperator(_DWORD *this, int a2)
{
  CChar::Lock((int)this);
  this[125] = a2;
  if ( !a2 )
  {
    (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 64);
    this[124] = 0;
  }
  CChar::Unlock((int)this);
}

//----- (0044AD80) --------------------------------------------------------
void __thiscall CNPCSiegeGunStone::SetSiegeGun(_DWORD *this, int a2)
{
  CChar::Lock((int)this);
  this[126] = a2;
  if ( !a2 )
    (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 32);
  CChar::Unlock((int)this);
}

//----- (0044ADC0) --------------------------------------------------------
int __thiscall sub_44ADC0(int *this, int *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_44AEB0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (0044AE20) --------------------------------------------------------
_DWORD *__thiscall sub_44AE20(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, _DWORD *a2, int *a3)
{
  void *v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_472A50(this, v12, a3);
  v3 = sub_430C20((int *)this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20((int *)this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0044AEB0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44AEB0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_44B6E0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0044AF50) --------------------------------------------------------
_DWORD *__thiscall sub_44AF50(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  void **v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  _DWORD *v34; // eax
  _DWORD *v35; // eax
  _DWORD *v36; // eax
  _DWORD *v37; // eax
  _BYTE *v38; // esi
  _DWORD *v39; // eax
  _DWORD *v40; // eax
  _DWORD *v41; // eax
  _DWORD *v42; // eax
  _DWORD *v43; // eax
  _BYTE *v44; // esi
  _DWORD *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_431110(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  v56 = (void *)unknown_libname_15(&a3);
  sub_418860(&a3);
  v54 = v56;
  v5 = (int *)unknown_libname_25(v56);
  if ( *(_BYTE *)sub_431110(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_431110(*v6) )
    {
      v55 = *(void **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (void *)unknown_libname_15(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_431110((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)unknown_libname_25(v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)unknown_libname_25(v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_431110((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_42F920((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)CServer::SendAlive(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_431110((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_4470E0((int)v55);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(v56);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_431110((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)unknown_libname_25(v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0((int)v56);
      v26 = (void **)unknown_libname_25(*v25);
      if ( *v26 == v56 )
      {
        v27 = (_DWORD *)sub_446FF0((int)v56);
        v28 = (_DWORD *)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)unknown_libname_19(v56);
    v31 = (char *)unknown_libname_19(v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)unknown_libname_19(v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)unknown_libname_19(v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)unknown_libname_19(v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)unknown_libname_25(v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)unknown_libname_25(v53);
      if ( !*(_BYTE *)unknown_libname_19(v54) )
      {
        *(_BYTE *)unknown_libname_19(v54) = 1;
        *(_BYTE *)unknown_libname_19(v53) = 0;
        sub_44CAC0(this, (int)v53);
        v54 = *(void **)unknown_libname_25(v53);
      }
      if ( !*(_BYTE *)sub_431110((int)v54) )
      {
        v40 = (_DWORD *)sub_430F90((int)v54);
        if ( *(_BYTE *)unknown_libname_19(*v40) != 1
          || (v41 = (_DWORD *)unknown_libname_25(v54), *(_BYTE *)unknown_libname_19(*v41) != 1) )
        {
          v42 = (_DWORD *)unknown_libname_25(v54);
          if ( *(_BYTE *)unknown_libname_19(*v42) == 1 )
          {
            v43 = (_DWORD *)sub_430F90((int)v54);
            *(_BYTE *)unknown_libname_19(*v43) = 1;
            *(_BYTE *)unknown_libname_19(v54) = 0;
            sub_44CBF0(this, (int)v54);
            v54 = *(void **)unknown_libname_25(v53);
          }
          v44 = (_BYTE *)unknown_libname_19(v53);
          *(_BYTE *)unknown_libname_19(v54) = *v44;
          *(_BYTE *)unknown_libname_19(v53) = 1;
          v45 = (_DWORD *)unknown_libname_25(v54);
          *(_BYTE *)unknown_libname_19(*v45) = 1;
          sub_44CAC0(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)unknown_libname_19(v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)unknown_libname_19(v54) )
    {
      *(_BYTE *)unknown_libname_19(v54) = 1;
      *(_BYTE *)unknown_libname_19(v53) = 0;
      sub_44CBF0(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_431110((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (_DWORD *)unknown_libname_25(v54);
    if ( *(_BYTE *)unknown_libname_19(*v34) != 1
      || (v35 = (_DWORD *)sub_430F90((int)v54), *(_BYTE *)unknown_libname_19(*v35) != 1) )
    {
      v36 = (_DWORD *)sub_430F90((int)v54);
      if ( *(_BYTE *)unknown_libname_19(*v36) == 1 )
      {
        v37 = (_DWORD *)unknown_libname_25(v54);
        *(_BYTE *)unknown_libname_19(*v37) = 1;
        *(_BYTE *)unknown_libname_19(v54) = 0;
        sub_44CAC0(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)unknown_libname_19(v53);
      *(_BYTE *)unknown_libname_19(v54) = *v38;
      *(_BYTE *)unknown_libname_19(v53) = 1;
      v39 = (_DWORD *)sub_430F90((int)v54);
      *(_BYTE *)unknown_libname_19(*v39) = 1;
      sub_44CBF0(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70(v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 446F90: using guessed type _DWORD __cdecl unknown_libname_19(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044B6E0) --------------------------------------------------------
_DWORD *__thiscall sub_44B6E0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44B780(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0044B740) --------------------------------------------------------
int *__thiscall sub_44B740(int *this)
{
  sub_48DB20(this);
  return this;
}

//----- (0044B760) --------------------------------------------------------
int *__thiscall sub_44B760(int *this)
{
  sub_42F840(this);
  return this;
}

//----- (0044B780) --------------------------------------------------------
int __stdcall sub_44B780(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_44B780(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044B800) --------------------------------------------------------
unsigned int __thiscall sub_44B800(int this)
{
  return std::allocator<unsigned long>::max_size((std::allocator<unsigned long> *)(this + 2));
}

//----- (0044B820) --------------------------------------------------------
_DWORD *__thiscall sub_44B820(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  *this = a2;
  this[1] = a3;
  this[2] = *a4;
  return this;
}

//----- (0044B850) --------------------------------------------------------
unsigned int __thiscall std::allocator<unsigned long>::max_size(std::allocator<unsigned long> *this)
{
  return 0x3FFFFFFF;
}

//----- (0044B880) --------------------------------------------------------
void *__thiscall sub_44B880(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044B8B0) --------------------------------------------------------
void *__thiscall sub_44B8B0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044B8E0) --------------------------------------------------------
void *__thiscall sub_44B8E0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044B920) --------------------------------------------------------
int __thiscall sub_44B920(int *this)
{
  return sub_44B940(this);
}

//----- (0044B940) --------------------------------------------------------
int __thiscall sub_44B940(int *this)
{
  return sub_44B960(this);
}

//----- (0044B960) --------------------------------------------------------
int __thiscall sub_44B960(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44BA10(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044BA10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BA10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_44BAB0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0044BAB0) --------------------------------------------------------
_DWORD *__thiscall sub_44BAB0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44BB10(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0044BB10) --------------------------------------------------------
int __stdcall sub_44BB10(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_44BB10(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044BB90) --------------------------------------------------------
int __thiscall sub_44BB90(int *this)
{
  return sub_44BBB0(this);
}

//----- (0044BBB0) --------------------------------------------------------
int __thiscall sub_44BBB0(int *this)
{
  return sub_44BBD0(this);
}

//----- (0044BBD0) --------------------------------------------------------
int __thiscall sub_44BBD0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44BC80(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044BC80) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44BC80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_44BD20((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0044BD20) --------------------------------------------------------
_DWORD *__thiscall sub_44BD20(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44BD80(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0044BD80) --------------------------------------------------------
int __stdcall sub_44BD80(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_44BD80(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044BE00) --------------------------------------------------------
int __thiscall sub_44BE00(int *this)
{
  return sub_44BE20(this);
}

//----- (0044BE20) --------------------------------------------------------
int __thiscall sub_44BE20(int *this)
{
  return sub_44BE40(this);
}

//----- (0044BE40) --------------------------------------------------------
int __thiscall sub_44BE40(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44AEB0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044BEF0) --------------------------------------------------------
int sub_44BEF0()
{
  int result; // eax
  char v1[8]; // [esp+30h] [ebp-238h] BYREF
  char v2[8]; // [esp+38h] [ebp-230h] BYREF
  int v3; // [esp+40h] [ebp-228h]
  char v4[4]; // [esp+44h] [ebp-224h]
  char v5[540]; // [esp+48h] [ebp-220h] BYREF
  int v6; // [esp+264h] [ebp-4h]

  v6 = dword_4D9830;
  v3 = 114;
  *(_DWORD *)v4 = 0;
  while ( *(int *)v4 < v3 )
  {
    sub_420060(
      (int)&unk_4E1B9C,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v2,
      (std::pair<char const * const,CItem *> *)(8 * *(_DWORD *)v4 + 5118888));
    if ( !v2[4] )
      LOG_ERR("CObjectDB::Open() Duplicate Key at Symbol Map %d", *(_DWORD *)v4);
    ++*(_DWORD *)v4;
  }
  v3 = 14;
  *(_DWORD *)v4 = 0;
  while ( *(int *)v4 < v3 )
  {
    sub_420060(
      (int)&unk_4E1F38,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v1,
      (std::pair<char const * const,CItem *> *)(8 * *(_DWORD *)v4 + 5119816));
    if ( !v1[4] )
      LOG_ERR("CObjectDB::Open() Duplicate Key at Class Map %d", *(_DWORD *)v4);
    ++*(_DWORD *)v4;
  }
  CInitItem::Open();
  sub_47F560();
  sub_480900();
  CObjectDB::CObjectDB((CConfig *)v5);
  LOG_INFO("Reading [Map] . . .");
  if ( !CObjectDB::Open("Config\\InitMap.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [InitMonster] . . .");
  if ( !CObjectDB::Open("Config\\InitMonster.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [GenMonster] . . .");
  if ( !CObjectDB::Open("Config\\GenMonster.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [InitItem] . . .");
  if ( !CObjectDB::Open("Config\\InitItem.txt") )
    goto LABEL_27;
  LOG_INFO("Reading [Prefix] . . .");
  if ( CObjectDB::Open("Config\\Prefix.txt")
    && (LOG_INFO("Reading [ItemGroup] . . ."), CObjectDB::Open("Config\\ItemGroup.txt"))
    && (LOG_INFO("Reading [Goods] . . ."), CObjectDB::Open("Config\\Goods.txt"))
    && (LOG_INFO("Reading [InitNPC] . . ."), CObjectDB::Open("Config\\InitNPC.txt"))
    && (LOG_INFO("Reading [InitSkill] . . ."), CObjectDB::Open("Config\\InitSkill.txt"))
    && (LOG_INFO("Reading [Quest] . . ."), CObjectDB::Open("Config\\Quest.txt"))
    && (LOG_INFO("Reading [Etc] . . ."), CObjectDB::Open("Config\\Etc.txt")) )
  {
    InterlockedExchange(&dword_4E1B98, 1);
    CObjectDB::_CObjectDB((CConfig *)v5);
    result = 1;
  }
  else
  {
LABEL_27:
    CObjectDB::_CObjectDB((CConfig *)v5);
    result = 0;
  }
  return result;
}
// 47F560: using guessed type int sub_47F560(void);
// 480900: using guessed type int sub_480900(void);
// 4D9830: using guessed type int dword_4D9830;

//----- (0044C300) --------------------------------------------------------
int __thiscall CObjectDB::Open(int this, char *FileName)
{
  int result; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp+4h] [ebp-44h]
  char v8[4]; // [esp+14h] [ebp-34h] BYREF
  int v9; // [esp+18h] [ebp-30h] BYREF
  int v10; // [esp+1Ch] [ebp-2Ch]
  char v11[4]; // [esp+20h] [ebp-28h] BYREF
  char v12[28]; // [esp+24h] [ebp-24h] BYREF
  int v13; // [esp+40h] [ebp-8h]
  int v14; // [esp+44h] [ebp-4h]

  v13 = dword_4D9830;
  *(_DWORD *)(this + 512) = fopen(FileName, "rb");
  if ( *(_DWORD *)(this + 512) )
  {
    std::string::string((std::string *)v12);
    *(_DWORD *)(this + 516) = 1;
    *(_DWORD *)(this + 528) = FileName;
    while ( 2 )
    {
      v14 = CConfig::GetToken((char *)this);
      v6 = v14;
      switch ( v14 )
      {
        case 0:
          fclose(*(FILE **)(this + 512));
          *(_DWORD *)(this + 512) = 0;
          sub_40F780((std::string *)v12);
          return 1;
        case 3:
          continue;
        case 7:
          if ( CConfig::GetToken((char *)this) != 1 )
            goto LABEL_13;
          v9 = this;
          sub_44C970(v11, &v9);
          v3 = sub_430C20(v8);
          if ( (unsigned __int8)unknown_libname_16(v3) )
            goto LABEL_13;
          v4 = sub_420250(v11);
          v10 = (*(int (__thiscall **)(_DWORD, _DWORD, int))(**(_DWORD **)(v4 + 4) + 24))(
                  *(_DWORD *)(v4 + 4),
                  *(_DWORD *)(v4 + 4),
                  v6);
          if ( CObjectDB::Load(v10) )
            continue;
          v5 = sub_420250(v11);
          if ( v10 != *(_DWORD *)(v5 + 4) )
            (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 4))(v10);
          fclose(*(FILE **)(this + 512));
          *(_DWORD *)(this + 512) = 0;
          LOG_ERR("Invalid format %s(%d) at CObjectDB::Open(Load())", FileName, *(_DWORD *)(this + 516));
          sub_40F780((std::string *)v12);
          result = 0;
          break;
        case 8:
          LOG_ERR("Unmatched close parenthesis at CObjectDB::Open, %s(%d)", FileName, *(_DWORD *)(this + 516));
          continue;
        default:
LABEL_13:
          LOG_ERR("Invalid format %s(%d) at CObjectDB::Open", FileName, *(_DWORD *)(this + 516));
          do
            v14 = CConfig::GetToken((char *)this);
          while ( v14 != 3 && v14 );
          continue;
      }
      break;
    }
  }
  else
  {
    LOG_ERR("'%s' File open failed at CObjectDB::Open", FileName);
    result = 0;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44C5A0: using guessed type _DWORD __stdcall sub_44C5A0(_DWORD);
// 44C970: using guessed type _DWORD __stdcall sub_44C970(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0044C550) --------------------------------------------------------
int __cdecl CObjectDB::FindSymbol(char a1)
{
  int v1; // eax
  int result; // eax
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  sub_44C970(v4, &a1);
  v1 = sub_430C20(v3);
  if ( (unsigned __int8)unknown_libname_16(v1) )
    result = 0;
  else
    result = *(_DWORD *)(sub_420250(v4) + 4);
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44C970: using guessed type _DWORD __stdcall sub_44C970(_DWORD, _DWORD);

//----- (0044C5A0) --------------------------------------------------------
int __thiscall CObjectDB::Load(void *this, int a2)
{
  int v2; // ecx
  void *v3; // esp
  int v4; // ecx
  int v5; // ecx
  void *v6; // esp
  void *v7; // esp
  int v8; // eax
  void *v9; // esp
  int v10; // ecx
  int v11; // ecx
  int v13; // [esp-1Ch] [ebp-7Ch] BYREF
  int v14; // [esp-18h] [ebp-78h] BYREF
  int v15; // [esp-14h] [ebp-74h] BYREF
  int v16; // [esp-10h] [ebp-70h] BYREF
  int v17; // [esp-Ch] [ebp-6Ch] BYREF
  int v18; // [esp-8h] [ebp-68h] BYREF
  int v19; // [esp-4h] [ebp-64h] BYREF
  int v20[2]; // [esp+0h] [ebp-60h] BYREF
  int v21; // [esp+8h] [ebp-58h]
  void *v22; // [esp+Ch] [ebp-54h]
  int *v23; // [esp+10h] [ebp-50h]
  _DWORD *v24; // [esp+14h] [ebp-4Ch]
  void *v25; // [esp+18h] [ebp-48h]
  void *Src; // [esp+1Ch] [ebp-44h]
  _DWORD *v27; // [esp+2Ch] [ebp-34h]
  lisp::_string *v28; // [esp+34h] [ebp-2Ch]
  _DWORD *v29; // [esp+40h] [ebp-20h]
  int v30; // [esp+48h] [ebp-18h] BYREF
  size_t v31; // [esp+4Ch] [ebp-14h]
  char *str; // [esp+50h] [ebp-10h]
  int v33; // [esp+54h] [ebp-Ch] BYREF
  int v34; // [esp+58h] [ebp-8h]
  int v35; // [esp+5Ch] [ebp-4h]

  Src = this;
  std__ios_base__ios_base(&v33);
  v35 = 0;
  do
  {
    while ( 1 )
    {
      while ( 1 )
      {
        while ( 1 )
        {
          v34 = CConfig::GetToken((char *)Src);
          if ( v34 != 8 )
            break;
          if ( !v35 )
          {
            v19 = v2;
            std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
              &v19,
              &v33);
            if ( (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)a2 + 28))(a2, 0)
              && (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 32))(a2) )
            {
              return 1;
            }
            LOG_ERR(
              "Invalid format %s line(%d) at CObjectDB::Load",
              *((const char **)Src + 132),
              *((_DWORD *)Src + 129));
            return 0;
          }
          --v35;
        }
        if ( v34 != 7 )
          break;
        v3 = alloca(12);
        v25 = &v17;
        v29 = operator new(0xCu, &v17);
        if ( v29 )
        {
          v16 = v4;
          std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
            &v16,
            &dword_4E1108);
          v15 = v5;
          std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
            &v15,
            &dword_4E1108);
          v24 = lisp::_cons::_cons(v29, v15, v16);
        }
        else
        {
          v24 = 0;
        }
        v16 = v4;
        unknown_libname_20(v24);
        sub_44C860(&v33, v35);
        lisp::var::operator=(v16);
        ++v35;
      }
      if ( v34 != 1 && v34 != 2 )
        break;
      v31 = strlen((const char *)Src);
      v6 = alloca(v31 + 1);
      v23 = v20;
      str = (char *)v20;
      memcpy(v20, Src, v31 + 1);
      v7 = alloca(8);
      v22 = &v18;
      v28 = (lisp::_string *)operator new(8u, &v18);
      if ( v28 )
      {
        lisp::_string::_string(v28, str);
        v21 = v8;
      }
      else
      {
        v21 = 0;
      }
      unknown_libname_20(v21);
      v9 = alloca(12);
      v20[1] = (int)&v15;
      v27 = operator new(0xCu, &v15);
      if ( v27 )
      {
        v14 = v10;
        std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
          &v14,
          &dword_4E1108);
        v13 = v11;
        std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
          &v13,
          &v30);
        v20[0] = (int)lisp::_cons::_cons(v27, v13, v14);
      }
      else
      {
        v20[0] = 0;
      }
      v14 = v10;
      unknown_libname_20(v20[0]);
      sub_44C860(&v33, v35);
      lisp::var::operator=(v14);
    }
  }
  while ( v34 == 3 );
  LOG_ERR(
    "Invalid format %s line(%d) token(%d) at CObjectDB::Load",
    *((const char **)Src + 132),
    *((_DWORD *)Src + 129),
    v34);
  while ( v35 >= 0 )
  {
    switch ( v34 )
    {
      case 0:
        LOG_ERR("Unmatched open parenthesis at CObjectDB::Load");
        return 0;
      case 7:
        ++v35;
        break;
      case 8:
        --v35;
        break;
    }
    v34 = CConfig::GetToken((char *)Src);
  }
  return 0;
}
// 44C610: variable 'v4' is possibly undefined
// 44C61D: variable 'v5' is possibly undefined
// 44C6E9: variable 'v8' is possibly undefined
// 44C725: variable 'v10' is possibly undefined
// 44C732: variable 'v11' is possibly undefined
// 44C781: variable 'v2' is possibly undefined
// 4323F0: using guessed type _DWORD __stdcall lisp::var::operator=(_DWORD);
// 446FD0: using guessed type _DWORD __stdcall unknown_libname_20(_DWORD);
// 44C860: using guessed type _DWORD __stdcall sub_44C860(_DWORD, _DWORD);

//----- (0044C860) --------------------------------------------------------
int __stdcall sub_44C860(_DWORD *a1, int a2)
{
  char i; // al
  _DWORD *v4; // [esp+0h] [ebp-8h]
  int v5; // [esp+4h] [ebp-4h]

  v5 = (int)a1;
  v4 = a1;
  for ( i = sub_40BCE0(a1); ; i = sub_40BCE0(v5) )
  {
    while ( i )
    {
      v4 = (_DWORD *)v5;
      v5 = sub_40BCC0(v5);
      i = sub_40BCE0(v5);
    }
    if ( !a2 )
      break;
    --a2;
    v5 = sub_40BCA0(v4);
    v4 = (_DWORD *)v5;
  }
  return v5;
}
// 40BCC0: using guessed type int __thiscall sub_40BCC0(_DWORD);
// 40BCE0: using guessed type int __thiscall sub_40BCE0(_DWORD);

//----- (0044C8D0) --------------------------------------------------------
void CObjectDB::Close()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int v1; // eax
  char v2[4]; // [esp+0h] [ebp-Ch] BYREF
  char v3[4]; // [esp+4h] [ebp-8h] BYREF
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  InterlockedExchange(&dword_4E1B98, 0);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E1F38,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v2);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v4,
            v0) )
      break;
    v1 = sub_420250(v4);
    CBase::Delete(*(char **)(v1 + 4));
    sub_446090(v3, 0);
  }
  CItem::Close();
  CInitNPC::Close();
  CGenNPC::Close();
  sub_47F5D0();
  sub_480910();
  sub_47CA50();
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 47F5D0: using guessed type int sub_47F5D0(void);
// 480910: using guessed type int sub_480910(void);

//----- (0044C960) --------------------------------------------------------
LONG CObjectDB::CanReload()
{
  return dword_4E1B98;
}

//----- (0044C970) --------------------------------------------------------
_DWORD *__thiscall sub_44C970(iless *this, _DWORD *a2, const char **a3)
{
  int v3; // eax
  int v4; // eax
  const char **v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_44CA00(v12, a3);
  v3 = sub_430C20(v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (const char **)sub_473500(v4), iless::operator()(this, *a3, *v5)) )
  {
    v7 = (char *)sub_430C20(v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44CA00: using guessed type _DWORD __stdcall sub_44CA00(_DWORD, _DWORD);
// 473500: using guessed type _DWORD __cdecl sub_473500(_DWORD);

//----- (0044CA00) --------------------------------------------------------
void *__thiscall sub_44CA00(int *this, void *a2, const char **a3)
{
  int v3; // eax

  v3 = sub_44CA30(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (0044CA30) --------------------------------------------------------
int __thiscall sub_44CA30(int *this, const char **a2)
{
  const char **v2; // eax
  const char *v4; // [esp-4h] [ebp-10h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]

  v6 = *(_DWORD *)sub_478AB0(this);
  v7 = this[1];
  while ( !*(_BYTE *)sub_431110(v6) )
  {
    v4 = *a2;
    v2 = (const char **)sub_473500(v6);
    if ( iless::operator()((iless *)this, *v2, v4) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)unknown_libname_25(v6);
    }
  }
  return v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044CAC0) --------------------------------------------------------
int *__thiscall sub_44CAC0(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  _DWORD *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)unknown_libname_25(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)unknown_libname_25(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_431110(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044CBF0) --------------------------------------------------------
int *__thiscall sub_44CBF0(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)unknown_libname_25(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)unknown_libname_25(v11);
  if ( !*(_BYTE *)sub_431110(*v3) )
  {
    v4 = (int *)unknown_libname_25(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (_DWORD *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_25(*v6) )
    {
      v7 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)unknown_libname_25(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044CD20) --------------------------------------------------------
void *__stdcall sub_44CD20(int a1)
{
  return sub_420900(a1);
}

//----- (0044CD40) --------------------------------------------------------
void *__thiscall sub_44CD40(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044CD70) --------------------------------------------------------
void __stdcall sub_44CD70(void *a1)
{
  initp_misc_winxfltr(a1);
}

//----- (0044CD90) --------------------------------------------------------
void *__thiscall sub_44CD90(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044CDC0) --------------------------------------------------------
void __cdecl std::_Construct<std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node *,std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node *>(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **_Ptr, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *const *_Val)
{
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **v2; // [esp+4h] [ebp-4h]

  v2 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)operator new(4u, _Ptr);
  if ( v2 )
    *v2 = *_Val;
}

//----- (0044CE00) --------------------------------------------------------
_DWORD *__thiscall CQuest::CQuest(_DWORD *this)
{
  CBase::CBase((int)this);
  *this = &off_4BA5A0;
  this[8] = 0;
  this[9] = 0;
  this[10] = 0;
  sub_47D030(this + 11);
  return this;
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0044CE50) --------------------------------------------------------
_DWORD *__thiscall CQuest::_scalar_deleting_destructor_(_DWORD *this, char a2)
{
  sub_47C980(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0044CE80) --------------------------------------------------------
void *__thiscall std::_List_ptr<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_ptr<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(void *this, char a2)
{
  char v3; // [esp-4h] [ebp-Ch]

  v3 = (char)this;
  std___Init_locks__operator_(&a2);
  sub_44F7C0(this, v3);
  std___Init_locks__operator_(&a2);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0044CEC0) --------------------------------------------------------
CMemory **__cdecl sub_44CEC0(int a1)
{
  return operator_new(12 * a1);
}

//----- (0044CEE0) --------------------------------------------------------
int __thiscall sub_44CEE0(int *this)
{
  return sub_44CF00(this);
}

//----- (0044CF00) --------------------------------------------------------
int __thiscall sub_44CF00(int *this)
{
  return sub_44CF20(this);
}

//----- (0044CF20) --------------------------------------------------------
int __thiscall sub_44CF20(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44CFD0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044CFD0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44CFD0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_44D070((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0044D070) --------------------------------------------------------
_DWORD *__thiscall sub_44D070(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44D0D0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0044D0D0) --------------------------------------------------------
int __stdcall sub_44D0D0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_44D0D0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044D150) --------------------------------------------------------
int __thiscall sub_44D150(int *this)
{
  return sub_44D170(this);
}

//----- (0044D170) --------------------------------------------------------
int __thiscall sub_44D170(int *this)
{
  return sub_44D190(this);
}

//----- (0044D190) --------------------------------------------------------
int __thiscall sub_44D190(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44D240(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044D240) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44D240(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_44D2E0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0044D2E0) --------------------------------------------------------
_DWORD *__thiscall sub_44D2E0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44D340(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0044D340) --------------------------------------------------------
int __stdcall sub_44D340(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_44D340(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044D3C0) --------------------------------------------------------
int __thiscall CParty::CParty(int this, CIOObject *a2)
{
  CIOObject::CIOObject((CIOObject *)this);
  *(_DWORD *)this = &off_4BA5E8;
  std::vector<CIOSocket::CIOTimer>::vector<CIOSocket::CIOTimer>((std::vector<CIOSocket::CIOTimer> *)(this + 32));
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 48));
  *(_DWORD *)(this + 16) = InterlockedIncrement(&dword_4E1FB8);
  *(_DWORD *)(this + 20) = a2;
  *(_DWORD *)(this + 24) = *((_DWORD *)a2 + 15);
  *(_DWORD *)(this + 28) = 0;
  CIOObject::AddRef(a2, (volatile int *)a2 + 111);
  *((_DWORD *)a2 + 254) = *(_DWORD *)(this + 16);
  std::vector<CIOSocket::CIOTimer>::push_back(
    (std::vector<CIOSocket::CIOTimer> *)(this + 32),
    (const CIOSocket::CIOTimer *)&a2);
  *(_DWORD *)(this + 80) = 0;
  CIOObject::AddTimer((CIOObject *)this, 0x3E8u, 0);
  return this;
}
// 4BA5E8: using guessed type int (__stdcall *off_4BA5E8)(int);

//----- (0044D470) --------------------------------------------------------
void *__thiscall CParty::_scalar_deleting_destructor_(void *this, char a2)
{
  Party::_CParty(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 44D4A0: using guessed type int __thiscall sub_44D4A0(_DWORD);

//----- (0044D4A0) --------------------------------------------------------
int __thiscall Party::_CParty(char *this)
{
  *(_DWORD *)this = &off_4BA5E8;
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 48));
  sub_44F580(this + 32);
  return std__locale__facet___facet(this);
}
// 423960: using guessed type int __thiscall std__locale__facet___facet(_DWORD);
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 4BA5E8: using guessed type int (__stdcall *off_4BA5E8)(int);

//----- (0044D4E0) --------------------------------------------------------
int __cdecl CParty::FindParty(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  int v4; // [esp+4h] [ebp-8h]
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  v4 = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1FD0);
  sub_44AE20(v5, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
         v1) )
  {
    v4 = *(_DWORD *)(sub_420250(v5) + 4);
    CIOObject::AddRef(v4);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1FD0);
  return v4;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0044D550) --------------------------------------------------------
int __cdecl CParty::Accept(CIOObject *a1, CIOObject *a2)
{
  int v3; // [esp+0h] [ebp-Ch]
  CMemory **v4; // [esp+4h] [ebp-8h]
  volatile int *v5; // [esp+8h] [ebp-4h]

  sub_460490(a1, a2);
  if ( *((_DWORD *)a2 + 254) )
  {
    CPlayer::Write(a1, 68, "bs", 31, (char *)a2 + 32);
  }
  else
  {
    v5 = (volatile int *)CParty::FindParty(*((_DWORD *)a1 + 254));
    if ( !v5 )
    {
      v4 = operator_new(0x54u);
      if ( v4 )
        v3 = CParty::CParty((int)v4, a1);
      else
        v3 = 0;
      v5 = (volatile int *)v3;
      CIOObject::AddRef(v3);
      CParty::Add(v3);
    }
    CParty::Join(a1, a2);
    CIOObject::Release(v5);
  }
  return sub_44D620(a1, a2);
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 44D620: using guessed type _DWORD __cdecl sub_44D620(_DWORD, _DWORD);
// 44D7F0: using guessed type int __thiscall sub_44D7F0(_DWORD);
// 44D9D0: using guessed type _DWORD __stdcall sub_44D9D0(_DWORD, CIOObject *);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 460490: using guessed type _DWORD __cdecl sub_460490(_DWORD, _DWORD);

//----- (0044D620) --------------------------------------------------------
void __cdecl sub_44D620(int a1, int a2)
{
  CChar::Unlock(a1);
  CChar::Unlock(a2);
}

//----- (0044D640) --------------------------------------------------------
void __thiscall CParty::OnFree(CIOObject *this)
{
  if ( *((_DWORD *)this + 7) )
  {
    CIOObject::OnFree(this);
  }
  else
  {
    ELOG("CParty::OnFree %p %d %d %d %d\n", (char)this);
    EBREAK();
    *((_DWORD *)this + 1) = 100;
  }
}

//----- (0044D6A0) --------------------------------------------------------
void __thiscall CParty::OnTimer(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  unsigned int v4; // eax
  char v6[4]; // [esp+4h] [ebp-1Ch] BYREF
  int v7; // [esp+8h] [ebp-18h] BYREF
  _DWORD *v8; // [esp+Ch] [ebp-14h]
  int v9; // [esp+10h] [ebp-10h] BYREF
  CIOBuffer *v10; // [esp+14h] [ebp-Ch]
  int v11; // [esp+18h] [ebp-8h]
  CIOBuffer *v12; // [esp+1Ch] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( *(_DWORD *)(this + 28) )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  }
  else
  {
    v12 = CIOBuffer::Alloc();
    v10 = v12;
    *((_BYTE *)v12 + 2) = 83;
    v11 = (int)v10 + 4;
    sub_430C20(&v9);
    while ( 1 )
    {
      v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v6);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v9,
              v2) )
        break;
      v8 = *(_DWORD **)sub_420010(&v9);
      v3 = std___Mpunct_wchar_t___do_frac_digits(v8);
      v11 = sub_44F9B0(v11, v3);
      v11 = sub_44F9B0(v11, v8[83]);
      v11 = sub_44F9B0(v11, v8[84]);
      sub_420030(&v9, &v7, 0);
    }
    v4 = std::vector<unsigned long>::size((std::vector<unsigned long> *)(this + 32));
    WritePacket((char *)v10 + 3, "b", v4);
    *(_WORD *)v10 = v11 - (_WORD)v10;
    *((_DWORD *)v12 + 2000) = *(unsigned __int16 *)v10;
    CParty::_Broadcast(v12, 0);
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
    CIOObject::AddTimer((CIOObject *)this, 0x3E8u, 0);
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44E740: using guessed type _DWORD __stdcall sub_44E740(void *Src, _DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0044D7F0) --------------------------------------------------------
void __thiscall CParty::Add(int this)
{
  int v1; // eax
  char v3[8]; // [esp+4h] [ebp-14h] BYREF
  CItem *_Val2; // [esp+Ch] [ebp-Ch] BYREF
  char v5[8]; // [esp+10h] [ebp-8h] BYREF

  CIOObject::AddRef(this);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1FD0);
  _Val2 = (CItem *)this;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v5,
    (const char *const *)(this + 16),
    &_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v3,
    v1);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1FD0);
}
// 44D82E: variable 'v1' is possibly undefined
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (0044D850) --------------------------------------------------------
void __thiscall CParty::Remove(volatile int *this)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E1FD0);
  sub_44F600(this + 4);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E1FD0);
  CIOObject::Release(this);
}
// 44F600: using guessed type _DWORD __stdcall sub_44F600(_DWORD);

//----- (0044D890) --------------------------------------------------------
int __thiscall CParty::IsHead(int this, int a2)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = 1;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( *(_DWORD *)(this + 28) || *(_DWORD *)(this + 20) != a2 )
    v4 = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  return v4;
}

//----- (0044D8E0) --------------------------------------------------------
int __thiscall CParty::IsMember(_DWORD *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v5[4]; // [esp+4h] [ebp-Ch] BYREF
  int v6; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  sub_430C20(&v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v7,
            v2) )
      break;
    if ( a2 == *(_DWORD *)sub_420010(&v7) )
      return 1;
    sub_420030(&v7, &v6, 0);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);

//----- (0044D950) --------------------------------------------------------
int __thiscall CParty::FindTopLevel(_DWORD *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v4[4]; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch]
  int v7; // [esp+10h] [ebp-8h] BYREF
  int v8; // [esp+14h] [ebp-4h]

  v8 = 0;
  sub_430C20(&v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v7,
            v1) )
      break;
    v6 = *(_DWORD *)sub_420010(&v7);
    if ( *(_DWORD *)(v6 + 60) > v8 )
      v8 = *(_DWORD *)(v6 + 60);
    sub_420030(&v7, &v5, 0);
  }
  return v8;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);

//----- (0044D9D0) --------------------------------------------------------
void __thiscall CParty::Join(int this, int a2, CIOObject *a3)
{
  int v3; // eax
  char *v4; // [esp-14h] [ebp-20h]
  int v5; // [esp-10h] [ebp-1Ch]
  int v6; // [esp-Ch] [ebp-18h]
  int v7; // [esp-8h] [ebp-14h]
  int v8; // [esp-4h] [ebp-10h]
  void *v10; // [esp+4h] [ebp-8h]
  int v11; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( !*(_DWORD *)(this + 28) && a2 == *(_DWORD *)(this + 20) )
  {
    v11 = std::vector<unsigned long>::size((std::vector<unsigned long> *)(this + 32));
    if ( v11 >= 6 )
    {
      CPlayer::Write(a3, 67, "b", 30);
    }
    else
    {
      if ( v11 == 1 )
        CParty::SendPartyInfo(this, *(_DWORD *)(this + 20));
      CIOObject::AddRef(a3, (volatile int *)a3 + 111);
      *((_DWORD *)a3 + 254) = *(_DWORD *)(this + 16);
      CPlayer::Write(a3, 67, "b", 29);
      v8 = CChar::GetMaxHP(a3);
      v7 = *((_DWORD *)a3 + 68);
      v6 = *((_DWORD *)a3 + 15);
      v5 = *((_DWORD *)a3 + 115);
      v4 = (char *)a3 + 32;
      v3 = std___Mpunct_wchar_t___do_frac_digits(a3);
      v10 = (void *)sub_44FCE0(68, "bdsbbww", 29, v3, v4, v5, v6, v7, v8);
      CParty::_Broadcast(v10, 0);
      std::vector<CIOSocket::CIOTimer>::push_back(
        (std::vector<CIOSocket::CIOTimer> *)(this + 32),
        (const CIOSocket::CIOTimer *)&a3);
      CParty::SendPartyInfo(this, (int)a3);
      if ( *((_DWORD *)a3 + 15) > *(_DWORD *)(this + 24) )
        *(_DWORD *)(this + 24) = *((_DWORD *)a3 + 15);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
}
// 44E740: using guessed type _DWORD __stdcall sub_44E740(void *Src, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0044DB20) --------------------------------------------------------
void __thiscall CParty::Leave(int this, CIOObject *a2)
{
  int v2; // eax
  int v3; // eax
  void *v4; // eax
  int v5; // eax
  int v6; // [esp-4h] [ebp-34h]
  int v7; // [esp+0h] [ebp-30h]
  char v9[4]; // [esp+8h] [ebp-28h] BYREF
  int v10; // [esp+Ch] [ebp-24h] BYREF
  char v11[4]; // [esp+10h] [ebp-20h] BYREF
  int v12; // [esp+14h] [ebp-1Ch] BYREF
  CIOObject *v13; // [esp+18h] [ebp-18h]
  void *v14; // [esp+1Ch] [ebp-14h] BYREF
  int v15; // [esp+20h] [ebp-10h]
  int v16; // [esp+24h] [ebp-Ch]
  int v17; // [esp+28h] [ebp-8h]
  void *v18; // [esp+2Ch] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( *(_DWORD *)(this + 28) )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  }
  else
  {
    sub_430C20(&v14);
    while ( 1 )
    {
      v2 = sub_445B40((_DWORD *)(this + 32), (int)v11);
      if ( (unsigned __int8)unknown_libname_16(v2) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
        LOG_ERR("CParty::Leave() Not this party member. (bit:%x)", *((_DWORD *)a2 + 5));
        return;
      }
      if ( a2 == *(CIOObject **)sub_420010(&v14) )
        break;
      sub_420030((int *)&v14, &v12, 0);
    }
    sub_44F5A0((int)&v10, v14);
    *((_DWORD *)a2 + 254) = 0;
    CPlayer::Write(a2, 67, "b", 32);
    v3 = std___Mpunct_wchar_t___do_frac_digits(a2);
    v18 = (void *)sub_44FCE0(68, "bd", 32, v3);
    CParty::_Broadcast(v18, 0);
    if ( *((_DWORD *)a2 + 15) >= *(_DWORD *)(this + 24) )
      *(_DWORD *)(this + 24) = CParty::FindTopLevel((_DWORD *)this);
    v16 = *((_DWORD *)a2 + 146);
    if ( v16 )
      v7 = CParty::_GetPlayerList(this);
    else
      v7 = 0;
    v17 = v7;
    v15 = std::vector<unsigned long>::size((std::vector<unsigned long> *)(this + 32));
    if ( a2 == *(CIOObject **)(this + 20) )
    {
      v4 = (void *)sub_430C20(v9);
      *(_DWORD *)(this + 20) = *(_DWORD *)sub_420010(v4);
      if ( v15 > 1 )
        CPlayer::Write(*(_DWORD *)(this + 20), 67, "b", 35);
    }
    if ( v15 == 1 )
    {
      v13 = *(CIOObject **)(this + 20);
      *(_DWORD *)(this + 20) = 0;
      CParty::Delete(this);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
      CParty::Remove((volatile int *)this);
      *((_DWORD *)v13 + 254) = 0;
      CPlayer::Write(v13, 67, "b", 36);
      *((_DWORD *)v13 + 146) = 0;
      CChar::CancelBuffPrty(24);
      CIOObject::Release(v13, (volatile int *)v13 + 111);
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
    }
    while ( v17 )
    {
      v6 = v16;
      v5 = unknown_libname_15(v17);
      CChar::CancelBuff(v5, v6);
      v17 = CBaseList::Pop(v17);
    }
    *((_DWORD *)a2 + 146) = 0;
    CChar::CancelBuffPrty(24);
    CIOObject::Release(a2, (volatile int *)a2 + 111);
  }
}
// 40B870: using guessed type _DWORD __stdcall CChar::CancelBuffPrty(_DWORD);
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44E740: using guessed type _DWORD __stdcall CParty::_Broadcast(void *Src, _DWORD);
// 44F3D0: using guessed type int __thiscall sub_44F3D0(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0044DDA0) --------------------------------------------------------
void __thiscall CParty::Delete(int this)
{
  *(_DWORD *)(this + 28) = 1;
  CIOObject::Release((volatile int *)this);
}

//----- (0044DDC0) --------------------------------------------------------
void __thiscall CParty::Exile(int this, int a2, CIOObject *a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // [esp-4h] [ebp-2Ch]
  int v7; // [esp+0h] [ebp-28h]
  int v9; // [esp+8h] [ebp-20h] BYREF
  char v10[4]; // [esp+Ch] [ebp-1Ch] BYREF
  int v11; // [esp+10h] [ebp-18h] BYREF
  CIOObject *v12; // [esp+14h] [ebp-14h]
  void *v13; // [esp+18h] [ebp-10h] BYREF
  int v14; // [esp+1Ch] [ebp-Ch]
  int v15; // [esp+20h] [ebp-8h]
  void *v16; // [esp+24h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( *(_DWORD *)(this + 28) || a2 != *(_DWORD *)(this + 20) )
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  }
  else
  {
    sub_430C20(&v13);
    while ( 1 )
    {
      v3 = sub_445B40(v10);
      if ( (unsigned __int8)unknown_libname_16(v3) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
        LOG_ERR("CParty::Leave() Not this party member. (bit:%x)", *((_DWORD *)a3 + 5));
        return;
      }
      if ( a3 == *(CIOObject **)sub_420010(&v13) )
        break;
      sub_420030((int *)&v13, &v11, 0);
    }
    sub_44F5A0((int)&v9, v13);
    *((_DWORD *)a3 + 254) = 0;
    CPlayer::Write(a3, 67, "b", 33);
    v4 = std___Mpunct_wchar_t___do_frac_digits(a3);
    v16 = (void *)sub_44FCE0(68, "bd", 33, v4);
    CParty::_Broadcast(v16, 0);
    if ( *((_DWORD *)a3 + 15) >= *(_DWORD *)(this + 24) )
      *(_DWORD *)(this + 24) = CParty::FindTopLevel(this);
    v14 = *((_DWORD *)a3 + 146);
    if ( v14 )
      v7 = CParty::_GetPlayerList(this);
    else
      v7 = 0;
    v15 = v7;
    if ( std::vector<unsigned long>::size((std::vector<unsigned long> *)(this + 32)) == 1 )
    {
      v12 = *(CIOObject **)(this + 20);
      *(_DWORD *)(this + 20) = 0;
      CParty::Delete(this);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
      CParty::Remove(this);
      *((_DWORD *)v12 + 254) = 0;
      CPlayer::Write(v12, 67, "b", 36);
      *((_DWORD *)v12 + 146) = 0;
      CChar::CancelBuffPrty(24);
      CIOObject::Release(v12, (volatile int *)v12 + 111);
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
    }
    while ( v15 )
    {
      v6 = v14;
      v5 = unknown_libname_15(v15);
      CChar::CancelBuff(v5, v6);
      v15 = CBaseList::Pop(v15);
    }
    *((_DWORD *)a3 + 146) = 0;
    CChar::CancelBuffPrty(24);
    CIOObject::Release(a3, (volatile int *)a3 + 111);
  }
}
// 40B870: using guessed type _DWORD __stdcall CChar::CancelBuffPrty(_DWORD);
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 445B40: using guessed type _DWORD __stdcall sub_445B40(_DWORD);
// 44D850: using guessed type int __thiscall sub_44D850(_DWORD);
// 44D950: using guessed type int __thiscall sub_44D950(_DWORD);
// 44E740: using guessed type _DWORD __stdcall sub_44E740(void *Src, _DWORD);
// 44F3D0: using guessed type int __thiscall sub_44F3D0(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (0044E020) --------------------------------------------------------
void __thiscall CParty::AllotExp(int this, int *a2, int a3, int a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int v6; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  int v8; // [esp+2Ch] [ebp-78h]
  int v9; // [esp+30h] [ebp-74h]
  char v11[4]; // [esp+38h] [ebp-6Ch] BYREF
  char v12[4]; // [esp+3Ch] [ebp-68h] BYREF
  char v13[8]; // [esp+40h] [ebp-64h] BYREF
  char v14[8]; // [esp+48h] [ebp-5Ch] BYREF
  char v15[4]; // [esp+50h] [ebp-54h] BYREF
  int v16; // [esp+54h] [ebp-50h] BYREF
  char v17[4]; // [esp+58h] [ebp-4Ch] BYREF
  int v18; // [esp+5Ch] [ebp-48h] BYREF
  int v19; // [esp+60h] [ebp-44h]
  char v20[4]; // [esp+64h] [ebp-40h] BYREF
  int v21; // [esp+68h] [ebp-3Ch] BYREF
  int v22; // [esp+6Ch] [ebp-38h] BYREF
  int v23; // [esp+70h] [ebp-34h]
  int Number; // [esp+74h] [ebp-30h]
  int v25; // [esp+78h] [ebp-2Ch]
  CIOObject *v26; // [esp+7Ch] [ebp-28h] BYREF
  int v27; // [esp+80h] [ebp-24h]
  char v28[16]; // [esp+84h] [ebp-20h] BYREF
  CItem *_Val2; // [esp+94h] [ebp-10h] BYREF
  char v30[12]; // [esp+98h] [ebp-Ch] BYREF

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  Number = a3 - *(_DWORD *)(this + 24);
  if ( Number < 0 )
  {
    if ( abs(Number) >= 20 )
      v8 = 20;
    else
      v8 = abs(Number);
    *a2 = (unsigned __int64)((double)*a2
                           - (double)*a2 * ((double)dword_4D8870[21 * ((*(_DWORD *)(this + 24) - 1) / 10) + v8] / 100.0));
  }
  else
  {
    if ( Number >= 20 )
      v9 = 20;
    else
      v9 = Number;
    *a2 = (unsigned __int64)((double)*a2 * ((double)dword_4D8528[21 * ((*(_DWORD *)(this + 24) - 1) / 10) + v9] / 100.0)
                           + (double)*a2);
  }
  if ( *a2 > 0 )
  {
    std::vector<CIOSocket::CIOTimer>::vector<CIOSocket::CIOTimer>((std::vector<CIOSocket::CIOTimer> *)v28);
    v27 = 0;
    v23 = 0;
    sub_430C20(&v22);
    while ( 1 )
    {
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(v17);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v22,
              v4) )
        break;
      v26 = *(CIOObject **)sub_420010(&v22);
      if ( CChar::IsNormal((int)v26) && (int)sub_448870((char *)v26 + 332, a4) <= 640 )
      {
        if ( *(_DWORD *)(this + 24) - *((_DWORD *)v26 + 15) <= 20 )
          ++v23;
        v27 += *((_DWORD *)v26 + 15);
        std::vector<CIOSocket::CIOTimer>::push_back(
          (std::vector<CIOSocket::CIOTimer> *)v28,
          (const CIOSocket::CIOTimer *)&v26);
      }
      sub_420030(&v22, &v18, 0);
    }
    if ( v23 > 1 )
      *a2 = (unsigned __int64)((double)*a2 * ((double)(v23 - 1) / 10.0) + (double)*a2);
    sub_445C80(v30);
    v25 = *(_DWORD *)(this + 24);
    sub_430C20(&v21);
    while ( 1 )
    {
      v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(v15);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v21,
              v5) )
        break;
      v26 = *(CIOObject **)sub_420010(&v21);
      _Val2 = (CItem *)(unsigned __int64)((double)*a2 * ((double)*((int *)v26 + 15) / (double)v27));
      Number = v25 - *((_DWORD *)v26 + 15);
      if ( Number <= 28 )
      {
        if ( Number > 0 )
          _Val2 = (CItem *)(unsigned __int64)((double)(int)_Val2
                                            - (double)(int)_Val2 * ((double)dword_4D8BB8[Number] / 100.0));
      }
      else
      {
        _Val2 = 0;
      }
      if ( _Val2 )
      {
        CIOObject::AddRef(v26, (volatile int *)v26 + 88);
        std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
          (std::pair<char const * const,CItem *> *)v14,
          (const char *const *)&v26,
          &_Val2);
        sub_48D6D0(
          (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v13,
          v6);
      }
      sub_420030(&v21, &v16, 0);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
    *a2 = 0;
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)v30,
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20);
    while ( 1 )
    {
      v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v11);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v20,
              v7) )
        break;
      v26 = *(CIOObject **)sub_420250(v20);
      _Val2 = *(CItem **)(sub_420250(v20) + 4);
      *a2 += (int)_Val2;
      v19 = (dword_4E1178 & 1) != 0 ? 0x64 : 0;
      if ( CChar::IsBState(0, 128) || CChar::IsBState(0, 256) || CChar::IsBState(0, 512) )
        v19 += 10;
      if ( CChar::IsBState(2, 0) )
      {
        v19 += 30;
      }
      else if ( CChar::IsBState(1, 0) )
      {
        v19 += 30;
      }
      (*(void (__cdecl **)(CIOObject *, int, int, char *, int))(*(_DWORD *)v26 + 88))(
        v26,
        25,
        1,
        (char *)_Val2 + v19 * (int)_Val2 / 100,
        ((int)_Val2 + v19 * (int)_Val2 / 100) >> 31);
      CIOObject::Release(v26, (volatile int *)v26 + 88);
      sub_446090(v12, 0);
    }
    sub_4398F0(v30);
    sub_44F580(v28);
  }
  else
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  }
}
// 44E2E1: variable 'v6' is possibly undefined
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 445B40: using guessed type _DWORD __stdcall sub_445B40(_DWORD);
// 445C80: using guessed type int __thiscall sub_445C80(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 448870: using guessed type _DWORD __cdecl sub_448870(_DWORD, _DWORD);
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 48D6D0: using guessed type _DWORD __stdcall sub_48D6D0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 4E1178: using guessed type int dword_4E1178;

//----- (0044E4B0) --------------------------------------------------------
void __thiscall sub_44E4B0(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  __int16 v4; // ax
  unsigned int v5; // eax
  char v7[4]; // [esp+4h] [ebp-1Ch] BYREF
  int v8; // [esp+8h] [ebp-18h] BYREF
  _DWORD *v9; // [esp+Ch] [ebp-14h]
  int v10; // [esp+10h] [ebp-10h] BYREF
  char *v11; // [esp+14h] [ebp-Ch]
  char *packet; // [esp+18h] [ebp-8h]
  void *Src; // [esp+1Ch] [ebp-4h]

  Src = CIOBuffer::Alloc();
  v11 = (char *)Src;
  *((_BYTE *)Src + 2) = 84;
  packet = v11 + 4;
  sub_430C20(&v10);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(v7);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v10,
            v2) )
      break;
    v9 = *(_DWORD **)sub_420010(&v10);
    v3 = std___Mpunct_wchar_t___do_frac_digits(v9);
    packet = (char *)sub_44F9B0(packet, v3);
    packet = PutString(packet, (const char *)v9 + 32);
    packet = (char *)sub_4189A0(packet, *((_BYTE *)v9 + 460));
    packet = (char *)sub_4189A0(packet, *((_BYTE *)v9 + 60));
    packet = (char *)sub_42F960(packet, *((_WORD *)v9 + 136));
    v4 = CChar::GetMaxHP(v9);
    packet = (char *)sub_42F960(packet, v4);
    sub_420030(&v10, &v8, 0);
  }
  v5 = std::vector<unsigned long>::size((std::vector<unsigned long> *)(this + 32));
  WritePacket(v11 + 3, "b", v5);
  *(_WORD *)v11 = (_WORD)packet - (_WORD)v11;
  *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v11;
  CPlayer::Send(Src);
  CIOBuffer::Release((CIOBuffer *)Src);
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 42F960: using guessed type _DWORD __cdecl sub_42F960(_DWORD, __int16);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 445B40: using guessed type _DWORD __stdcall sub_445B40(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0044E610) --------------------------------------------------------
void __thiscall CParty::UpdateMemberHP(int this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-10h]
  int v4; // [esp-4h] [ebp-Ch]
  void *v6; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  v4 = CChar::GetMaxHP(a2);
  v3 = a2[68];
  v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
  v6 = (void *)sub_44FCE0(85, "dbdd", v2, 7, v3, v4);
  CParty::_Broadcast(v6, 0);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
}
// 44E740: using guessed type _DWORD __stdcall sub_44E740(void *Src, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (0044E680) --------------------------------------------------------
void __thiscall CParty::UpdateMemberLevel(int this, _DWORD *a2)
{
  int v2; // eax
  int v3; // [esp-4h] [ebp-Ch]
  void *v5; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( CParty::IsMember((_DWORD *)this, (int)a2) )
  {
    *(_DWORD *)(this + 24) = CParty::FindTopLevel((_DWORD *)this);
    v3 = a2[15];
    v2 = std___Mpunct_wchar_t___do_frac_digits(a2);
    v5 = (void *)sub_44FCE0(85, "dbd", v2, 26, v3);
    CParty::_Broadcast(v5, 0);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
}
// 44E740: using guessed type _DWORD __stdcall CParty::_Broadcast(void *Src, _DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);

//----- (0044E700) --------------------------------------------------------
void __thiscall CParty::Broadcast(int this, void *a2, int a3)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  CParty::_Broadcast(a2, a3);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
}
// 44E740: using guessed type _DWORD __stdcall CParty::_Broadcast(void *Src, _DWORD);

//----- (0044E740) --------------------------------------------------------
void __thiscall CParty::_Broadcast(_DWORD *this, void *Src, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h]
  int v8; // [esp+10h] [ebp-4h] BYREF

  sub_430C20(&v8);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v8,
            v3) )
      break;
    v7 = *(_DWORD *)sub_420010(&v8);
    if ( v7 != a3 )
      CPlayer::Send(Src);
    sub_420030(&v8, &v6, 0);
  }
  CIOBuffer::Release((CIOBuffer *)Src);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);

//----- (0044E7C0) --------------------------------------------------------
volatile int *__thiscall CParty::GetRandomPlayer(int this)
{
  unsigned int v1; // eax
  volatile int *v4; // [esp+4h] [ebp-8h]
  int _Pos; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  v1 = std::vector<unsigned long>::size((std::vector<unsigned long> *)(this + 32));
  _Pos = RandomBetween(0, v1 - 1);
  v4 = (volatile int *)*std::vector<unsigned long>::operator[]((std::vector<unsigned long> *)(this + 32), _Pos);
  CIOObject::AddRef((CIOObject *)v4, v4 + 88);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  return v4;
}

//----- (0044E830) --------------------------------------------------------
int __thiscall CParty::Teleport(int this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+4h] [ebp-20h] BYREF
  int v7; // [esp+8h] [ebp-1Ch] BYREF
  int v8[2]; // [esp+Ch] [ebp-18h] BYREF
  int v9; // [esp+14h] [ebp-10h]
  int v10; // [esp+18h] [ebp-Ch] BYREF
  _DWORD *v11; // [esp+1Ch] [ebp-8h]
  int v12; // [esp+20h] [ebp-4h]

  if ( !CParty::IsHead(this, a2) )
    return 0;
  v12 = dword_4D7900[4 * a3];
  v11 = (_DWORD *)((char *)&unk_4D7904 + 16 * a3);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  sub_430C20(&v10);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v6);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v10,
            v4) )
      break;
    v9 = *(_DWORD *)sub_420010(&v10);
    if ( CChar::IsNormal(v9) )
    {
      v8[0] = RandomBetween(*v11 - 64, *v11 + 64);
      v8[1] = RandomBetween(v11[1] - 64, v11[1] + 64);
      CPlayer::Teleport(v12, v8, 0, 0);
    }
    sub_420030(&v10, &v7, 0);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  return 1;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 45CC90: using guessed type _DWORD __stdcall CPlayer::Teleport(_DWORD, _DWORD, _DWORD, _DWORD);
// 4D7900: using guessed type int dword_4D7900[];

//----- (0044E940) --------------------------------------------------------
_DWORD *__thiscall CParty::StoreItem(int this, _DWORD *a2)
{
  _DWORD *result; // eax

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  *(_DWORD *)(this + 80) = CBaseList::Push(*(void **)(this + 80), (int)a2);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  a2[18] = 0;
  a2[19] = 0;
  a2[17] = 0;
  result = a2;
  a2[14] = 0;
  return result;
}

//----- (0044E9A0) --------------------------------------------------------
int __thiscall CParty::DistributeItem(int this, _DWORD *a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  char *v7; // eax
  char v10[4]; // [esp+4h] [ebp-8Ch] BYREF
  int v11; // [esp+8h] [ebp-88h] BYREF
  char v12[4]; // [esp+Ch] [ebp-84h] BYREF
  int v13; // [esp+10h] [ebp-80h] BYREF
  char v14[4]; // [esp+14h] [ebp-7Ch] BYREF
  int v15; // [esp+18h] [ebp-78h] BYREF
  char v16[4]; // [esp+1Ch] [ebp-74h] BYREF
  int v17; // [esp+20h] [ebp-70h] BYREF
  char v18[4]; // [esp+24h] [ebp-6Ch] BYREF
  int v19; // [esp+28h] [ebp-68h] BYREF
  int v20; // [esp+2Ch] [ebp-64h] BYREF
  void *v21; // [esp+30h] [ebp-60h]
  CIOObject *v22; // [esp+34h] [ebp-5Ch]
  int v23; // [esp+38h] [ebp-58h] BYREF
  int v24[2]; // [esp+3Ch] [ebp-54h] BYREF
  CIOBuffer *v25; // [esp+44h] [ebp-4Ch]
  CIOObject *v26; // [esp+48h] [ebp-48h]
  int v27; // [esp+4Ch] [ebp-44h] BYREF
  int v28[2]; // [esp+50h] [ebp-40h] BYREF
  void *Src; // [esp+58h] [ebp-38h]
  unsigned int _Pos; // [esp+5Ch] [ebp-34h]
  char *v31; // [esp+60h] [ebp-30h]
  int v32; // [esp+64h] [ebp-2Ch] BYREF
  int v33; // [esp+68h] [ebp-28h]
  char *v34; // [esp+6Ch] [ebp-24h]
  int v35; // [esp+70h] [ebp-20h] BYREF
  int v36; // [esp+74h] [ebp-1Ch]
  CIOObject *v37; // [esp+78h] [ebp-18h] BYREF
  _DWORD v38[4]; // [esp+7Ch] [ebp-14h] BYREF
  int v39; // [esp+8Ch] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  std::vector<CIOSocket::CIOTimer>::vector<CIOSocket::CIOTimer>((std::vector<CIOSocket::CIOTimer> *)v38);
  sub_430C20(&v35);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v18);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v35,
            v2) )
      break;
    v37 = *(CIOObject **)sub_420010(&v35);
    if ( CChar::IsNormal((int)v37) )
    {
      if ( sub_448870((_DWORD *)v37 + 83, a2) <= 640 )
      {
        CIOObject::AddRef(v37, (volatile int *)v37 + 88);
        std::vector<CIOSocket::CIOTimer>::push_back(
          (std::vector<CIOSocket::CIOTimer> *)v38,
          (const CIOSocket::CIOTimer *)&v37);
      }
    }
    sub_420030(&v35, &v19, 0);
  }
  v36 = *(_DWORD *)(this + 80);
  *(_DWORD *)(this + 80) = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  v39 = std::vector<unsigned long>::size((std::vector<unsigned long> *)v38);
  if ( v39 > 0 )
  {
    while ( 1 )
    {
      if ( !v36 )
      {
        sub_430C20(&v20);
        while ( 1 )
        {
          v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(v38, (int)v10);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v20,
                  v6) )
            break;
          v37 = *(CIOObject **)sub_420010(&v20);
          CIOObject::Release(v37, (volatile int *)v37 + 88);
          sub_420030(&v20, &v11, 0);
        }
        return sub_44F580(v38);
      }
      v34 = (char *)unknown_libname_15(v36);
      if ( (*(int (__thiscall **)(char *))(*(_DWORD *)v34 + 164))(v34) )
        break;
      _Pos = RandomBetween(0, v39 - 1);
      v37 = (CIOObject *)*std::vector<unsigned long>::operator[]((std::vector<unsigned long> *)v38, _Pos);
      if ( CPlayer::InsertItem(25, v34) != 1 )
        goto LABEL_51;
      if ( (*(int *)(*((_DWORD *)v34 + 10) + 64) >= 665 && *(int *)(*((_DWORD *)v34 + 10) + 64) <= 668
         || *(int *)(*((_DWORD *)v34 + 10) + 64) >= 802 && *(int *)(*((_DWORD *)v34 + 10) + 64) <= 825
         || *(int *)(*((_DWORD *)v34 + 10) + 64) >= 856 && *(int *)(*((_DWORD *)v34 + 10) + 64) <= 867
         || *(_DWORD *)(*((_DWORD *)v34 + 10) + 64) == 688)
        && abs(*((_DWORD *)v37 + 83) - 57367) < 1000
        && abs(*((_DWORD *)v37 + 84) - 9077) < 1001 )
      {
        v28[0] = 1793;
        v28[1] = 284;
        Src = (void *)sub_44FCE0(68, "bsw", 42, (char *)v37 + 32, *(_DWORD *)(*((_DWORD *)v34 + 10) + 64));
        sub_493440(v28, Src, 32);
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
        sub_430C20(&v27);
        while ( 1 )
        {
          v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v14);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v27,
                  v4) )
            break;
          v26 = *(CIOObject **)sub_420010(&v27);
          if ( v26 != v37 && (abs(*((_DWORD *)v26 + 83) - 57376) > 1024 || abs(*((_DWORD *)v26 + 84) - 9088) > 1024) )
            CPlayer::Send(Src);
          sub_420030(&v27, &v15, 0);
        }
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
        CIOBuffer::Release((CIOBuffer *)Src);
      }
      else if ( (*(int *)(*((_DWORD *)v34 + 10) + 64) < 673 || *(int *)(*((_DWORD *)v34 + 10) + 64) > 687)
             && (*(int *)(*((_DWORD *)v34 + 10) + 64) < 826 || *(int *)(*((_DWORD *)v34 + 10) + 64) > 855)
             || abs(*((_DWORD *)v37 + 83) - 20284) >= 1160
             || abs(*((_DWORD *)v37 + 84) - 67480) >= 1212 )
      {
        v21 = (void *)sub_44FCE0(68, "bsw", 42, (char *)v37 + 32, *(_DWORD *)(*((_DWORD *)v34 + 10) + 64));
        CParty::Broadcast(this, v21, (int)v37);
      }
      else
      {
        v24[0] = 634;
        v24[1] = 2109;
        v25 = (CIOBuffer *)sub_44FCE0(68, "bsw", 42, (char *)v37 + 32, *(_DWORD *)(*((_DWORD *)v34 + 10) + 64));
        sub_493440(v24, v25, 38);
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
        sub_430C20(&v23);
        while ( 1 )
        {
          v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v12);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v23,
                  v5) )
            break;
          v22 = *(CIOObject **)sub_420010(&v23);
          if ( v22 != v37 && (abs(*((_DWORD *)v22 + 83) - 20284) < 1160 || abs(*((_DWORD *)v22 + 84) - 67480) < 1212) )
            CPlayer::Send(v25);
          sub_420030(&v23, &v13, 0);
        }
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
        CIOBuffer::Release(v25);
      }
LABEL_9:
      v36 = CBaseList::Pop(v36);
    }
    v33 = (*((_DWORD *)v34 + 13) + v39 - 1) / v39;
    sub_430C20(&v32);
    while ( 1 )
    {
      v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(v38, (int)v16);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v32,
              v3) )
        break;
      v37 = *(CIOObject **)sub_420010(&v32);
      v31 = (char *)CItem::CreateItem(31, 0, v33, -1);
      *((_DWORD *)v31 + 20) = 1;
      if ( CPlayer::InsertItem(25, v31) != 1 )
        CBase::Delete(v31);
      sub_420030(&v32, &v17, 0);
    }
LABEL_51:
    CBase::Delete(v34);
    goto LABEL_9;
  }
  while ( v36 )
  {
    v7 = (char *)unknown_libname_15(v36);
    CBase::Delete(v7);
    v36 = CBaseList::Pop(v36);
  }
  return sub_44F580(v38);
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 45DDC0: using guessed type _DWORD __stdcall CPlayer::InsertItem(_DWORD, _DWORD);
// 493440: using guessed type _DWORD __stdcall sub_493440(_DWORD, _DWORD, _DWORD);

//----- (0044F000) --------------------------------------------------------
void __thiscall CParty::AllotTransformExp(int this, int a2, _DWORD *a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v6[4]; // [esp+8h] [ebp-14h] BYREF
  int v7; // [esp+Ch] [ebp-10h] BYREF
  int v8; // [esp+10h] [ebp-Ch] BYREF
  int v9; // [esp+14h] [ebp-8h]
  _DWORD *v10; // [esp+18h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( (int)sub_44FD40(a2, *(_DWORD *)(this + 24)) >= 3 )
  {
    v10 = 0;
    sub_430C20(&v8);
    while ( 1 )
    {
      v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v6);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v8,
              v3) )
        break;
      v9 = *(_DWORD *)sub_420010(&v8);
      if ( CChar::IsNormal(v9) )
      {
        if ( sub_448870((_DWORD *)(v9 + 332), a3) <= 640 )
          v10 = CBaseList::Push(v10, v9);
      }
      sub_420030(&v8, &v7, 0);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
    while ( v10 )
    {
      v4 = unknown_libname_15(v10);
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v4 + 188))(v4, 0);
      v10 = (_DWORD *)CBaseList::Pop((int)v10);
    }
  }
  else
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44FD40: using guessed type _DWORD __cdecl sub_44FD40(_DWORD, _DWORD);

//----- (0044F110) --------------------------------------------------------
void __thiscall CParty::Healing(int this, _DWORD *a2, int a3, int a4, int a5, int a6)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-2Ch]
  int v9; // [esp+0h] [ebp-20h]
  int v10; // [esp+4h] [ebp-1Ch]
  char v12[4]; // [esp+Ch] [ebp-14h] BYREF
  int v13; // [esp+10h] [ebp-10h] BYREF
  int v14; // [esp+14h] [ebp-Ch] BYREF
  _DWORD *v15; // [esp+18h] [ebp-8h]
  _DWORD *v16; // [esp+1Ch] [ebp-4h]

  v16 = 0;
  v15 = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  sub_430C20(&v14);
  while ( 1 )
  {
    v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v12);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v14,
            v6) )
      break;
    v15 = *(_DWORD **)sub_420010(&v14);
    if ( CChar::IsNormal((int)v15) )
    {
      if ( sub_448870(a2 + 83, v15 + 83) <= 128 )
        v16 = CBaseList::Push(v16, (int)v15);
    }
    sub_420030(&v14, &v13, 0);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  while ( v16 )
  {
    v15 = (_DWORD *)unknown_libname_15(v16);
    if ( a3 )
    {
      v10 = a4 * CChar::GetMaxHP(v15) / 100;
      (*(void (__cdecl **)(_DWORD *, int, int, int))(*v15 + 88))(v15, 7, 1, v10);
    }
    else
    {
      (*(void (__cdecl **)(_DWORD *, int, int, int))(*v15 + 88))(v15, 7, 1, a4);
    }
    if ( a3 )
      v9 = a4 * CChar::GetMaxHP(v15) / 100;
    else
      v9 = a4;
    v8 = std___Mpunct_wchar_t___do_frac_digits(v15);
    v7 = std___Mpunct_wchar_t___do_frac_digits(a2);
    CChar::WriteInSight((int)a2, 10, "bbddww", a6, a5, v7, v8, v9, 0);
    v16 = (_DWORD *)CBaseList::Pop((int)v16);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);

//----- (0044F290) --------------------------------------------------------
_DWORD *__thiscall CParty::Chant(void *this, _DWORD *a2, int *a3)
{
  int v3; // eax
  _DWORD *result; // eax
  _DWORD *v6; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  for ( i = CParty::GetPlayerList(this); i; i = CBaseList::Pop(i) )
  {
    v6 = (_DWORD *)unknown_libname_15(i);
    CChar::CancelBuff((int)v6, a3[1]);
    if ( v6 != a2 && v6[146] == a3[1] )
      v6[146] = 0;
    if ( a2[146] )
      CChar::CancelBuff((int)v6, a2[146]);
    if ( CChar::IsNormal((int)v6) )
    {
      if ( sub_448870(a2 + 83, v6 + 83) <= 64 )
      {
        v3 = (*(int (__thiscall **)(int *, void *))(*a3 + 20))(a3, this);
        (*(void (__thiscall **)(_DWORD *, int))(*v6 + 180))(v6, v3);
      }
    }
  }
  result = a2;
  a2[146] = a3[1];
  return result;
}
// 44F35A: variable 'this' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 44F390: using guessed type int __thiscall CParty::GetPlayerList(_DWORD);

//----- (0044F390) --------------------------------------------------------
int __thiscall CParty::GetPlayerList(int this)
{
  int v3; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  v3 = CParty::_GetPlayerList(this);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  return v3;
}
// 44F3D0: using guessed type int __thiscall sub_44F3D0(_DWORD);

//----- (0044F3D0) --------------------------------------------------------
_DWORD *__thiscall CParty::_GetPlayerList(_DWORD *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int *v2; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h] BYREF
  _DWORD *v8; // [esp+10h] [ebp-4h]

  v8 = 0;
  sub_430C20(&v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 8, (int)v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v7,
            v1) )
      break;
    v2 = (int *)sub_420010(&v7);
    v8 = CBaseList::Push(v8, *v2);
    sub_420030(&v7, &v6, 0);
  }
  return v8;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);

//----- (0044F440) --------------------------------------------------------
int __thiscall CParty::GetLuckySize(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v7[4]; // [esp+14h] [ebp-20h] BYREF
  int v8; // [esp+18h] [ebp-1Ch] BYREF
  char v9[4]; // [esp+1Ch] [ebp-18h] BYREF
  int v10; // [esp+20h] [ebp-14h] BYREF
  int v11; // [esp+24h] [ebp-10h] BYREF
  int v12; // [esp+28h] [ebp-Ch] BYREF
  _DWORD *v13; // [esp+2Ch] [ebp-8h]
  int v14; // [esp+30h] [ebp-4h]

  v14 = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 48));
  if ( a2 )
  {
    sub_430C20(&v12);
    while ( 1 )
    {
      v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v9);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v12,
              v2) )
        break;
      v13 = *(_DWORD **)sub_420010(&v12);
      if ( CChar::IsBState(0x2000000, 0) )
      {
        v3 = std___Mpunct_wchar_t___do_frac_digits(v13);
        CChar::WriteInRect((int)v13, 73, 15, "db", v3, 21);
        ++v14;
      }
      sub_420030(&v12, &v10, 0);
    }
  }
  else
  {
    sub_430C20(&v11);
    while ( 1 )
    {
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(this + 32), (int)v7);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v11,
              v4) )
        break;
      sub_420010(&v11);
      if ( CChar::IsBState(0x2000000, 0) )
        ++v14;
      sub_420030(&v11, &v8, 0);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 48));
  return v14;
}
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);

//----- (0044F580) --------------------------------------------------------
void __thiscall sub_44F580(std::vector<unsigned long> *this)
{
  std::vector<unsigned long>::_Tidy(this);
}

//----- (0044F5A0) --------------------------------------------------------
int __thiscall sub_44F5A0(unsigned int **this, int a2, void *a3)
{
  std::copy_backward<unsigned long *,unsigned long *>((unsigned int *)a3 + 1, this[2], (unsigned int *)a3);
  sub_44F720(this[2] - 1, this[2]);
  --this[2];
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (0044F600) --------------------------------------------------------
int __thiscall sub_44F600(int *this, int *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_44F810(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (0044F660) --------------------------------------------------------
int __thiscall std::vector<unsigned long>::capacity(std::vector<unsigned long> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (0044F6A0) --------------------------------------------------------
char __thiscall std::vector<unsigned long>::_Buy(std::vector<unsigned long> *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_41CB60(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_41CE40(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 4 * _Capacity;
  }
  else
  {
    sub_446B00();
  }
  return 1;
}

//----- (0044F720) --------------------------------------------------------
void __stdcall sub_44F720(unsigned int *_First, unsigned int *_Last)
{
  std::_Destroy_range<unsigned long>(_First, _Last);
}

//----- (0044F750) --------------------------------------------------------
void __thiscall std::vector<unsigned long>::_Tidy(std::vector<unsigned long> *this)
{
  if ( *((_DWORD *)this + 1) )
  {
    sub_44F720(*((unsigned int **)this + 1), *((unsigned int **)this + 2));
    sub_4338F0(*((void **)this + 1), (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 2);
  }
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
}

//----- (0044F7C0) --------------------------------------------------------
void *__thiscall sub_44F7C0(void *this, char a2)
{
  std___Init_locks__operator_(&a2);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0044F7E0) --------------------------------------------------------
_DWORD *__thiscall sub_44F7E0(int *this, _DWORD *a2, int _Off)
{
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  *a2 = *(_DWORD *)std::vector<unsigned long>::iterator::operator+=((std::vector<unsigned long>::iterator *)&v4, _Off);
  return a2;
}

//----- (0044F810) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_44F810(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_44F8D0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0044F8B0) --------------------------------------------------------
int __thiscall sub_44F8B0(int *this)
{
  return sub_433930(this);
}

//----- (0044F8D0) --------------------------------------------------------
_DWORD *__thiscall sub_44F8D0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_44F930(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0044F930) --------------------------------------------------------
int __stdcall sub_44F930(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_44F930(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044F9B0) --------------------------------------------------------
_DWORD *__cdecl sub_44F9B0(_DWORD *a1, int a2)
{
  *a1 = a2;
  return a1 + 1;
}

//----- (0044F9D0) --------------------------------------------------------
unsigned int *__cdecl std::copy_backward<unsigned long *,unsigned long *>(unsigned int *_First, unsigned int *_Last, unsigned int *_Dest)
{
  unknown_libname_14(_First, _Dest);
  return (unsigned int *)unknown_libname_13(_First, (int)_Last, _Dest);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0044FA10) --------------------------------------------------------
void __cdecl std::_Destroy_range<unsigned long>(unsigned int *_First, unsigned int *_Last)
{
  unknown_libname_14(_First, _Last);
  initp_misc_winxfltr(_First);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0044FA50) --------------------------------------------------------
void __cdecl std::_Uninitialized_fill_n<unsigned long *,unsigned int,unsigned long,std::allocator<unsigned long>>(unsigned int *_First, unsigned int _Count, const unsigned int *_Val)
{
  unknown_libname_14(_First, _First);
  sub_41CF60(_First, _Count, (unsigned int *)_Val);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0044FA90) --------------------------------------------------------
void __cdecl std::fill<unsigned long *,unsigned long>(unsigned int *_First, unsigned int *_Last, const unsigned int *_Val)
{
  while ( _First != _Last )
    *_First++ = *_Val;
}

//----- (0044FAC0) --------------------------------------------------------
void *__cdecl sub_44FAC0(void *Src, int a2, int a3)
{
  unknown_libname_14(Src, a3);
  return std::_Copy_backward_opt<unsigned long *,unsigned long *>(Src, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0044FB00) --------------------------------------------------------
CMemory **__cdecl sub_44FB00(int a1)
{
  return operator_new(4 * a1);
}

//----- (0044FB20) --------------------------------------------------------
unsigned int *__cdecl std::_Uninitialized_copy<unsigned long *,unsigned long *,std::allocator<unsigned long>>(unsigned int *_First, unsigned int *_Last, unsigned int *_Dest)
{
  unknown_libname_14(_First, _Dest);
  return (unsigned int *)unknown_libname_13(_First, (int)_Last, _Dest);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0044FB60) --------------------------------------------------------
void __cdecl std::fill_n<unsigned long *,unsigned int,unsigned long>(unsigned int *_First, unsigned int _Count, const unsigned int *_Val)
{
  memset32(_First, *_Val, _Count);
}

//----- (0044FB90) --------------------------------------------------------
void *__thiscall sub_44FB90(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044FBC0) --------------------------------------------------------
void *__thiscall std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(void *this, _BYTE *a2, char a3)
{
  void *v4; // [esp+0h] [ebp-4h]

  v4 = this;
  LOBYTE(this) = *a2;
  std___Init_locks__operator_(this);
  std___Init_locks__operator_(&a3);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0044FBF0) --------------------------------------------------------
int __thiscall sub_44FBF0(int *this)
{
  return sub_44FC10(this);
}

//----- (0044FC10) --------------------------------------------------------
int __thiscall sub_44FC10(int *this)
{
  return sub_44FC30(this);
}

//----- (0044FC30) --------------------------------------------------------
int __thiscall sub_44FC30(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_44F810(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0044FCE0) --------------------------------------------------------
CMemory **__usercall sub_44FCE0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char a4, ...)
{
  CMemory **v5; // [esp+0h] [ebp-10h]
  va_list va; // [esp+1Ch] [ebp+Ch] BYREF

  va_start(va, a4);
  v5 = CIOBuffer::Alloc();
  *((_BYTE *)v5 + 2) = a4;
  *(_WORD *)v5 = (unsigned __int16)WritePacket(a1, a2, a3, (char *)v5 + 3, (int)va) - (_WORD)v5;
  v5[2000] = (CMemory *)*(unsigned __int16 *)v5;
  return v5;
}

//----- (0044FD40) --------------------------------------------------------
int __cdecl sub_44FD40(int a1, int a2)
{
  int result; // eax
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+4h] [ebp-8h]
  int Number; // [esp+8h] [ebp-4h]

  Number = a1 - a2;
  if ( a1 - a2 < 0 )
  {
    if ( abs(Number) >= 20 )
      v3 = 20;
    else
      v3 = abs(Number);
    result = dword_4E2F18[21 * ((a2 - 1) / 10) + v3];
  }
  else
  {
    if ( Number >= 20 )
      v4 = 20;
    else
      v4 = a1 - a2;
    result = dword_4E3260[21 * ((a2 - 1) / 10) + v4];
  }
  return result;
}

//----- (0044FDD0) --------------------------------------------------------
void __thiscall CPlayerObject::OnTimer(CIOObject *this, int a2)
{
  int *v3; // [esp+8h] [ebp-18h]
  int *v4; // [esp+Ch] [ebp-14h]
  int *v5; // [esp+10h] [ebp-10h]
  int *v6; // [esp+14h] [ebp-Ch]
  DWORD v7; // [esp+18h] [ebp-8h]
  DWORD v8; // [esp+1Ch] [ebp-4h]

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078);
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098);
      CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098);
      v4 = (int *)dword_4E2004;
      while ( v4 != &dword_4E2004 )
      {
        v3 = v4 - 107;
        v4 = (int *)*v4;
        CPlayer::Tick(v3);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078);
      CIOObject::AddTimer(this, 0x3E8u, 1);
    }
  }
  else
  {
    v8 = GetTickCount();
    do
    {
      v7 = v8 + 30;
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078);
      CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098);
      CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098);
      v6 = (int *)dword_4E2004;
      while ( v6 != &dword_4E2004 )
      {
        v5 = v6 - 107;
        v6 = (int *)*v6;
        CPlayer::AI(v5);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078);
      v8 = GetTickCount();
    }
    while ( v7 <= v8 );
    CIOObject::AddTimer(this, v7 - v8, 0);
  }
}
// 4514F0: using guessed type int __thiscall sub_4514F0(_DWORD);
// 452620: using guessed type int __thiscall sub_452620(_DWORD);
// 4E2004: using guessed type int dword_4E2004;

//----- (0044FF20) --------------------------------------------------------
int __thiscall CPlayer::CPlayer(int this, int a2, int a3, int a4)
{
  CChar::CChar((char *)this);
  *(_DWORD *)this = &off_4BA660;
  sub_47F450(this + 624);
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 1020));
  sub_4706F0((void *)(this + 1068));
  sub_4707A0((std::vector<IPAddrMask> *)(this + 1080));
  sub_470840((void *)(this + 1128));
  sub_470AA0((void *)(this + 1140));
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 1224));
  sub_471580(this + 1256);
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 1308));
  sub_4718D0(this + 1352);
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 1364));
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 1396));
  sub_471980(this + 1428);
  sub_471CD0(this + 1500);
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)(this + 1644));
  *(_DWORD *)(this + 440) = 0;
  *(_DWORD *)(this + 444) = 0;
  *(_DWORD *)(this + 24) = 1;
  CIOObject::AddRef(a2);
  *(_DWORD *)(this + 1676) = a2;
  *(_DWORD *)(this + 448) = a3;
  *(_DWORD *)(this + 452) = a4;
  *(_DWORD *)(this + 456) = 0;
  *(_DWORD *)(this + 460) = 0;
  *(_DWORD *)(this + 464) = 0;
  *(_DWORD *)(this + 468) = 0;
  *(_DWORD *)(this + 472) = 0;
  *(_DWORD *)(this + 476) = 0;
  *(_DWORD *)(this + 480) = 0;
  *(_DWORD *)(this + 484) = 0;
  *(_DWORD *)(this + 488) = 0;
  memset((void *)(this + 492), 0, 0x11u);
  *(_DWORD *)(this + 512) = 0;
  *(_DWORD *)(this + 516) = 0;
  memset((void *)(this + 520), 0, 0xFu);
  *(_DWORD *)(this + 536) = 0;
  *(_DWORD *)(this + 540) = 0;
  *(_DWORD *)(this + 544) = 0;
  *(_DWORD *)(this + 548) = 0;
  *(_DWORD *)(this + 552) = 0;
  *(_DWORD *)(this + 556) = 0;
  *(_DWORD *)(this + 560) = 0;
  *(_DWORD *)(this + 564) = 0;
  *(_DWORD *)(this + 568) = 0;
  *(_DWORD *)(this + 572) = 0;
  *(_DWORD *)(this + 576) = 0;
  *(_DWORD *)(this + 580) = 0;
  *(_DWORD *)(this + 584) = 0;
  *(_DWORD *)(this + 588) = 0;
  *(_DWORD *)(this + 592) = 0;
  *(_DWORD *)(this + 596) = 0;
  *(_DWORD *)(this + 600) = 0;
  *(_DWORD *)(this + 604) = 0;
  *(_DWORD *)(this + 608) = 0;
  *(_DWORD *)(this + 612) = 0;
  *(_DWORD *)(this + 616) = 0;
  *(_DWORD *)(this + 620) = 0;
  *(_DWORD *)(this + 1016) = 0;
  memset((void *)(this + 1052), 0, 0xEu);
  *(_DWORD *)(this + 1096) = 0;
  *(_DWORD *)(this + 1100) = 0;
  *(_DWORD *)(this + 1104) = 0;
  *(_DWORD *)(this + 1108) = 0;
  *(_DWORD *)(this + 1112) = 0;
  *(_DWORD *)(this + 1116) = 0;
  *(_DWORD *)(this + 1120) = -1;
  *(_DWORD *)(this + 1124) = 0;
  memset((void *)(this + 1152), 0, 0x41u);
  *(_DWORD *)(this + 1220) = 0;
  *(_DWORD *)(this + 1440) = 0;
  *(_DWORD *)(this + 1476) = GetTickCount();
  *(_DWORD *)(this + 1472) = *(_DWORD *)(this + 1476);
  *(_DWORD *)(this + 1448) = *(_DWORD *)(this + 1472);
  *(_DWORD *)(this + 1444) = *(_DWORD *)(this + 1448);
  *(_DWORD *)(this + 1456) = *(_DWORD *)(this + 1444);
  *(_DWORD *)(this + 1460) = *(_DWORD *)(this + 1456);
  *(_DWORD *)(this + 1480) = *(_DWORD *)(this + 1460);
  *(_DWORD *)(this + 1464) = 0;
  *(_DWORD *)(this + 1468) = 0;
  *(_DWORD *)(this + 1484) = GetTickCount() + 1800000;
  *(_DWORD *)(this + 1488) = 0;
  *(_DWORD *)(this + 1496) = -1;
  *(_DWORD *)(this + 1492) = -1;
  *(_DWORD *)(this + 1512) = 0;
  *(_DWORD *)(this + 1516) = 0;
  *(_DWORD *)(this + 1520) = 0;
  *(_DWORD *)(this + 1268) = 0;
  *(_DWORD *)(this + 1300) = 0;
  *(_DWORD *)(this + 1304) = 0;
  *(_DWORD *)(this + 1340) = 0;
  *(_DWORD *)(this + 1344) = 0;
  *(_DWORD *)(this + 1348) = 0;
  *(_DWORD *)(this + 1636) = 0;
  *(_DWORD *)(this + 1640) = 0;
  CPlayer::InitGambleInfo(this);
  return this;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 4504B0: using guessed type int __thiscall sub_4504B0(_DWORD);
// 471580: using guessed type int __thiscall sub_471580(_DWORD);
// 4718D0: using guessed type int __thiscall sub_4718D0(_DWORD);
// 471980: using guessed type int __thiscall sub_471980(_DWORD);
// 471CD0: using guessed type int __thiscall sub_471CD0(_DWORD);
// 47F450: using guessed type int __thiscall sub_47F450(_DWORD);
// 4BA660: using guessed type int (__stdcall *off_4BA660)(int);

//----- (00450460) --------------------------------------------------------
void __stdcall Player::SendPacket(void *Src)
{
  CPlayer::Send(Src);
}

//----- (00450480) --------------------------------------------------------
void __thiscall CPlayer::SendMove(void *this, void *a2, void *Src)
{
  if ( this != a2 )
    CPlayer::Send(Src);
}

//----- (004504B0) --------------------------------------------------------
_DWORD *__thiscall CPlayer::InitGambleInfo(_DWORD *this)
{
  _DWORD *result; // eax

  memset(this + 381, -1, 0x60u);
  this[405] = 0;
  memset(this + 406, -1, 8u);
  result = this;
  this[408] = 0;
  return result;
}

//----- (00450500) --------------------------------------------------------
void *__thiscall CPlayer::_scalar_deleting_destructor_(void *this, char a2)
{
  CPlayer::_CPlayer(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}
// 450530: using guessed type int __thiscall sub_450530(_DWORD);

//----- (00450530) --------------------------------------------------------
int __thiscall CPlayer::_CPlayer(char *this)
{
  *(_DWORD *)this = &off_4BA660;
  CPlayer::EventRemoveAll(this);
  CPlayer::MLMDeleteAll(this);
  if ( *((_DWORD *)this + 419) )
    CIOObject::Release(*((volatile int **)this + 419));
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 1644));
  sub_450710(this + 1500);
  sub_4506F0(this + 1428);
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 1396));
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 1364));
  sub_4506D0(this + 1352);
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 1308));
  sub_4506B0(this + 1256);
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 1224));
  sub_450690(this + 1140);
  sub_450670(this + 1128);
  sub_445BF0((std::vector<IPAddrMask> *)(this + 1080));
  sub_450650(this + 1068);
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(this + 1020));
  sub_47F4D0(this + 624);
  return CChar::_CChar((int)this);
}
// 450650: using guessed type int __thiscall sub_450650(_DWORD);
// 450670: using guessed type int __thiscall sub_450670(_DWORD);
// 450690: using guessed type int __thiscall sub_450690(_DWORD);
// 4506B0: using guessed type int __thiscall sub_4506B0(_DWORD);
// 4506D0: using guessed type int __thiscall sub_4506D0(_DWORD);
// 4506F0: using guessed type int __thiscall sub_4506F0(_DWORD);
// 450710: using guessed type int __thiscall sub_450710(_DWORD);
// 4655E0: using guessed type int __thiscall sub_4655E0(_DWORD);
// 466DA0: using guessed type int __thiscall sub_466DA0(_DWORD);
// 47F4D0: using guessed type int __thiscall sub_47F4D0(_DWORD);
// 4BA660: using guessed type int (__stdcall *off_4BA660)(int);

//----- (00450650) --------------------------------------------------------
int __thiscall sub_450650(int *this)
{
  return sub_470720(this);
}

//----- (00450670) --------------------------------------------------------
int __thiscall sub_450670(int *this)
{
  return sub_470870(this);
}

//----- (00450690) --------------------------------------------------------
int __thiscall sub_450690(void *this)
{
  return sub_470AD0(this);
}

//----- (004506B0) --------------------------------------------------------
int __thiscall sub_4506B0(int *this)
{
  return sub_4715B0(this);
}

//----- (004506D0) --------------------------------------------------------
int __thiscall sub_4506D0(int *this)
{
  return sub_471900(this);
}

//----- (004506F0) --------------------------------------------------------
int __thiscall sub_4506F0(int *this)
{
  return sub_4719B0(this);
}

//----- (00450710) --------------------------------------------------------
int __thiscall sub_450710(int *this)
{
  return sub_471D00(this);
}

//----- (00450730) --------------------------------------------------------
void CPlayer::Start()
{
  int i; // [esp+0h] [ebp-4h]

  for ( i = 0; i < 2; ++i )
    CLink::Initialize((_DWORD *)(8 * i + 0x4E2004));
  dword_4E2000 = 0;
  dword_4E1FF0 = 60;
  CIOObject::AddTimer((CIOObject *)&unk_4E20F4, 1000u, 1);
}
// 4E1FF0: using guessed type int dword_4E1FF0;

//----- (00450790) --------------------------------------------------------
CIOObject *__cdecl CPlayer::ScanPlayer(char a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-Ch] BYREF
  CIOObject *v4; // [esp+4h] [ebp-8h]
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  v4 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E202C);
  sub_44AE20(v5, &a1);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v5,
         v1) )
  {
    v4 = *(CIOObject **)(sub_420250(v5) + 4);
    CIOObject::AddRef(v4, (volatile int *)v4 + 88);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E202C);
  return v4;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00450810) --------------------------------------------------------
CIOObject *__cdecl sub_450810(int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  char v3[4]; // [esp+0h] [ebp-10h] BYREF
  int v4; // [esp+4h] [ebp-Ch] BYREF
  CIOObject *v5; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  v5 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E202C);
  v4 = a1;
  sub_44AE20(v6, &v4);
  v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v3);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
         v1) )
  {
    v5 = *(CIOObject **)(sub_420250(v6) + 4);
    CIOObject::AddRef(v5, (volatile int *)v5 + 88);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E202C);
  return v5;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00450890) --------------------------------------------------------
CIOObject *__usercall CPlayer::FindPlayer@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+0h] [ebp-Ch] BYREF
  CIOObject *v7; // [esp+4h] [ebp-8h]
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v7 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E2050);
  sub_470660((StrCmp *)dword_4E2044, v8, (const char **)&a1);
  v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E2044, v6);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v8,
         v4) )
  {
    v7 = *(CIOObject **)(sub_420250(v8) + 4);
    CIOObject::AddRef(v7, ebx0, a2, a3, (volatile int *)v7 + 88);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E2050, ebx0, a2, a3);
  return v7;
}

//----- (00450910) --------------------------------------------------------
void __usercall CPlayer::WriteAll(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char a4, ...)
{
  int *i; // [esp+4h] [ebp-14h]
  CMemory **Src; // [esp+14h] [ebp-4h]
  va_list va; // [esp+24h] [ebp+Ch] BYREF

  va_start(va, a4);
  Src = CIOBuffer::Alloc();
  *((_BYTE *)Src + 2) = a4;
  *(_WORD *)Src = (unsigned __int16)WritePacket(a1, a2, a3, (char *)Src + 3, (int)va) - (_WORD)Src;
  Src[2000] = (CMemory *)*(unsigned __int16 *)Src;
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078, a1, a2, a3);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098, a1, a2, a3);
  CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098, a1, a2, a3);
  for ( i = (int *)dword_4E2004; i != &dword_4E2004; i = (int *)*i )
    CPlayer::Send(Src);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078, a1, a2, a3);
  CIOBuffer::Release((CIOBuffer *)Src);
}
// 4E2004: using guessed type int dword_4E2004;
// 4E200C: using guessed type int dword_4E200C[2];

//----- (004509F0) --------------------------------------------------------
void __usercall CPlayer::WriteInMap(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, char a2, ...)
{
  int *i; // [esp+4h] [ebp-14h]
  CMemory **Src; // [esp+14h] [ebp-4h]
  va_list va; // [esp+28h] [ebp+10h] BYREF

  va_start(va, a2);
  Src = CIOBuffer::Alloc();
  *((_BYTE *)Src + 2) = a2;
  *(_WORD *)Src = (unsigned __int16)WritePacket(ebx0, edi0, a3, (char *)Src + 3, (int)va) - (_WORD)Src;
  Src[2000] = (CMemory *)*(unsigned __int16 *)Src;
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078, ebx0, edi0, a3);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098, ebx0, edi0, a3);
  CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098, ebx0, edi0, a3);
  for ( i = (int *)dword_4E2004; i != &dword_4E2004; i = (int *)*i )
  {
    if ( *(i - 28) == a1 )
      CPlayer::Send(Src);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078, ebx0, edi0, a3);
  CIOBuffer::Release((CIOBuffer *)Src);
}
// 4E2004: using guessed type int dword_4E2004;
// 4E200C: using guessed type int dword_4E200C[2];

//----- (00450AD0) --------------------------------------------------------
void __usercall CPlayer::LogPlayerStatistic(DWORD a1@<ebx>, DWORD a2@<esi>)
{
  int j; // [esp+4h] [ebp-118h]
  int v3; // [esp+8h] [ebp-114h]
  int *v4; // [esp+Ch] [ebp-110h]
  int *i; // [esp+10h] [ebp-10Ch]
  int v6; // [esp+14h] [ebp-108h] BYREF
  _BYTE v7[260]; // [esp+18h] [ebp-104h] BYREF
  int savedregs; // [esp+11Ch] [ebp+0h] BYREF

  v6 = 0;
  memset(v7, 0, sizeof(v7));
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078, a1, (DWORD)&savedregs, a2);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098, a1, (DWORD)&savedregs, a2);
  CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098, a1, (DWORD)&savedregs, a2);
  for ( i = (int *)dword_4E2004; i != &dword_4E2004; i = (int *)*i )
  {
    v4 = i - 107;
    if ( *(i - 92) <= 100 )
    {
      v3 = (v4[15] - 1) / 10;
      ++*(&v6 + 6 * v3 + v4[115]);
      ++*(_DWORD *)&v7[24 * v3 + 8];
      if ( CChar::IsGState(v4, 32) )
        ++*(_DWORD *)&v7[24 * v3 + 12];
      if ( CChar::IsGState(v4, 16) )
        ++*(_DWORD *)&v7[24 * v3 + 16];
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078, a1, (DWORD)&savedregs, a2);
  for ( j = 0; j < 10; ++j )
  {
    LOG_NORMAL(
      "##%02d ~ %02d : %d %d %d : %d",
      10 * j + 1,
      10 * j + 10,
      *(&v6 + 6 * j),
      *(_DWORD *)&v7[24 * j],
      *(_DWORD *)&v7[24 * j + 4],
      *(_DWORD *)&v7[24 * j + 8]);
    LOG_NORMAL(
      "@@%02d ~ %02d : %d %d",
      10 * j + 1,
      10 * j + 10,
      *(_DWORD *)&v7[24 * j + 12],
      *(_DWORD *)&v7[24 * j + 16]);
    *(_DWORD *)&v7[236] += *(&v6 + 6 * j);
    *(_DWORD *)&v7[240] += *(_DWORD *)&v7[24 * j];
    *(_DWORD *)&v7[244] += *(_DWORD *)&v7[24 * j + 4];
    *(_DWORD *)&v7[248] += *(_DWORD *)&v7[24 * j + 8];
    *(_DWORD *)&v7[252] += *(_DWORD *)&v7[24 * j + 12];
    *(_DWORD *)&v7[256] += *(_DWORD *)&v7[24 * j + 16];
  }
  LOG_NORMAL(
    "##Total Sum : %d %d %d : %d",
    *(_DWORD *)&v7[236],
    *(_DWORD *)&v7[240],
    *(_DWORD *)&v7[244],
    *(_DWORD *)&v7[248]);
  LOG_NORMAL("@@Total Sum : %d %d", *(_DWORD *)&v7[252], *(_DWORD *)&v7[256]);
  LOG_NORMAL("$$Currency Increment : %d", dword_4E2014);
  CDBSocket::Write(
    74,
    "ddddddd",
    *(_DWORD *)&v7[236],
    *(_DWORD *)&v7[240],
    *(_DWORD *)&v7[244],
    *(_DWORD *)&v7[248],
    *(_DWORD *)&v7[252],
    *(_DWORD *)&v7[256],
    dword_4E2014);
}
// 4E2004: using guessed type int dword_4E2004;
// 4E200C: using guessed type int dword_4E200C[2];

//----- (00450E40) --------------------------------------------------------
void __usercall CPlayer::OnFree(void (__thiscall ***this)(void *, int)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CBase::OnFree(this, a2, a3, a4);
}

//----- (00450E60) --------------------------------------------------------
void __thiscall CPlayer::OnDelete(int this)
{
  int v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  void *v6; // eax
  int v7; // [esp+0h] [ebp-4Ch]
  int v8; // [esp+0h] [ebp-4Ch]
  int v9; // [esp+4h] [ebp-48h]
  int v10; // [esp+4h] [ebp-48h]
  char v12[4]; // [esp+Ch] [ebp-40h] BYREF
  char v13[4]; // [esp+10h] [ebp-3Ch] BYREF
  char v14[4]; // [esp+14h] [ebp-38h] BYREF
  int v15[7]; // [esp+18h] [ebp-34h] BYREF
  int v16; // [esp+34h] [ebp-18h]
  volatile int *v17; // [esp+38h] [ebp-14h]
  int v18; // [esp+3Ch] [ebp-10h]
  CIOObject *v19; // [esp+40h] [ebp-Ch]
  CIOObject *v20; // [esp+44h] [ebp-8h]
  char *v21; // [esp+48h] [ebp-4h]

  CChar::Lock(this);
  if ( !CPlayer::IsPBit((_DWORD *)this, 3) )
    goto LABEL_39;
  v21 = *(char **)(this + 1100);
  if ( v21 )
  {
    CIOObject::AddRef(v21);
    CChar::Unlock(this);
    CBase::Delete(v21);
    CIOObject::Release((volatile int *)v21);
    CChar::Lock(this);
  }
  v19 = *(CIOObject **)(this + 484);
  if ( v19 )
  {
    CIOObject::AddRef(v19, (volatile int *)v19 + 10);
    CChar::Unlock(this);
    CGuild::Logout((int)v19, this);
    CIOObject::Release(v19, (volatile int *)v19 + 10);
    CChar::Lock(this);
  }
  v18 = *(_DWORD *)(this + 1016);
  if ( v18 )
  {
    *(_DWORD *)(this + 1016) = 0;
    v17 = (volatile int *)CParty::FindParty(v18);
    if ( v17 )
    {
      CParty::Leave((int)v17, (CIOObject *)this);
      CIOObject::Release(v17);
    }
  }
  if ( CChar::IsGState((_DWORD *)this, 128) )
  {
    v16 = *(_DWORD *)(this + 1516);
    if ( !v16 )
      EBREAK();
    CPlayer::EndPvP(v16, 3, 2, 6);
    goto LABEL_33;
  }
  if ( !CPlayer::IsEState((_DWORD *)this, 16) && CChar::IsGState((_DWORD *)this, 2) )
  {
    if ( !CPlayer::IsEState((_DWORD *)this, 256) )
    {
      v1 = CBuff::CreateBuff(65, 600, v7, v9);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 180))(this, v1);
      if ( CPlayer::IsEState((_DWORD *)this, 32) )
      {
        v2 = CBuff::CreateBuff(66, 600, v8, v10);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 180))(this, v2);
      }
      else if ( CPlayer::IsEState((_DWORD *)this, 64) )
      {
        v3 = CBuff::CreateBuff(67, 600, v8, v10);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 180))(this, v3);
      }
      if ( CPlayer::IsEState((_DWORD *)this, 128) )
      {
        v4 = CBuff::CreateBuff(68, 600, v8, v10);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 180))(this, v4);
      }
      goto LABEL_33;
    }
    *(_DWORD *)(this + 272) = CChar::GetMaxHP((_DWORD *)this);
    qmemcpy(v15, (char *)&unk_4D77C8 + 28 * *(_DWORD *)(this + 572), sizeof(v15));
    if ( v15[5] )
    {
      CChar::Unlock(this);
      if ( CGuild::IsWarringPeriod() )
      {
        if ( !CCastle::IsGateAlive(v15[4], v15[5]) && CPlayer::IsDefenseSide((_DWORD *)this, v15[4]) )
        {
          *(_DWORD *)(this + 572) = v15[6];
          qmemcpy(v15, (char *)&unk_4D77C8 + 28 * *(_DWORD *)(this + 572), sizeof(v15));
        }
        goto LABEL_25;
      }
    }
    else
    {
      if ( !v15[4] )
      {
LABEL_26:
        *(_DWORD *)(this + 316) = v15[0];
        *(_DWORD *)(this + 332) = v15[1];
        *(_DWORD *)(this + 336) = v15[2];
        *(_DWORD *)(this + 340) = v15[3];
        CPlayer::SubEState((_DWORD *)this, 256);
        goto LABEL_33;
      }
      CChar::Unlock(this);
      if ( CPlayer::IsDefenseSide((_DWORD *)this, v15[4]) )
      {
LABEL_25:
        CChar::Lock(this);
        goto LABEL_26;
      }
    }
    *(_DWORD *)(this + 572) = 0;
    qmemcpy(v15, (char *)&unk_4D77C8 + 28 * *(_DWORD *)(this + 572), sizeof(v15));
    goto LABEL_25;
  }
LABEL_33:
  CPlayer::SaveAllProperty(0);
  CPlayer::EventSaveDB(this);
  CChar::SaveAllBuff(this);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v14);
  while ( 1 )
  {
    v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v13);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v14,
            v5) )
      break;
    v6 = (void *)sub_446090(v12, 0);
    v20 = *(CIOObject **)(sub_420250(v6) + 4);
    CPlayer::_OutofInven(v20);
    CBase::Delete((char *)v20);
  }
  *(_DWORD *)(this + 1096) = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  if ( !sub_4913E0((Concurrency::details::_CancellationTokenRegistration *)this, this + 324) )
  {
    CIOObject::AddRef(this);
    LOG_ERR(
      "CPlayer::OnDelete() Removal of point from Map is failed. (%d %d) (PID: %d, UID: %d)",
      *(_DWORD *)(this + 324),
      *(_DWORD *)(this + 328),
      *(_DWORD *)(this + 452),
      *(_DWORD *)(this + 448));
  }
  CChar::WriteInSight(this, 55, "d", *(_DWORD *)(this + 28));
LABEL_39:
  if ( CPlayer::IsPBit((_DWORD *)this, 2) )
    CPlayer::Remove(this);
  BitSet((volatile signed __int32 *)(this + 20), 4u);
  CChar::Unlock(this);
  CBase::OnDelete((volatile int *)this);
}
// 451129: variable 'v7' is possibly undefined
// 451129: variable 'v9' is possibly undefined
// 451155: variable 'v8' is possibly undefined
// 451155: variable 'v10' is possibly undefined
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 452590: using guessed type int __thiscall CPlayer::Remove(_DWORD);
// 4586A0: using guessed type _DWORD __stdcall CPlayer::SaveAllProperty(_DWORD);
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);
// 460940: using guessed type _DWORD __stdcall CPlayer::EndPvP(_DWORD, _DWORD, _DWORD, _DWORD);
// 4658E0: using guessed type int __thiscall CPlayer::EventSaveDB(_DWORD);

//----- (00451330) --------------------------------------------------------
int __thiscall CPlayer::IsPBit(_DWORD *this, char a2)
{
  return this[5] & (1 << a2);
}

//----- (00451350) --------------------------------------------------------
void __thiscall CPlayer::SendDelete(_DWORD *this, int a2, void *Src)
{
  CPlayer::Send(Src);
  CPlayer::Write(a2, 55, "d", this[7]);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00451390) --------------------------------------------------------
void __thiscall CPlayer::SendCreate(_DWORD *this, _DWORD *a2, void *Src)
{
  int v3; // eax
  int v4; // [esp-14h] [ebp-1Ch]
  int v5; // [esp-Ch] [ebp-14h]
  int v6; // [esp-4h] [ebp-Ch]

  if ( this != a2 )
  {
    CPlayer::Send(Src);
    if ( a2[65] )
    {
      v6 = a2[65];
      v5 = std___Mpunct_wchar_t___do_frac_digits(a2);
      CPlayer::Write(this, 72, "dbw", v5, 32, v6);
    }
    v3 = CPlayer::GetGuildName(this, this[120], this[278]);
    v4 = CPlayer::GetGuildClassTitle(this, v3);
    CPlayer::Write(
      a2,
      50,
      "dsbdddwdmbbIssdbd",
      this[7],
      this + 8,
      this[115],
      this[83],
      this[84],
      this[85],
      this[87],
      this[70],
      this + 263,
      14,
      this[139],
      this[140],
      this[72],
      this[73],
      v4);
    if ( this[65] )
      CPlayer::Write(a2, 72, "dbw", this[7], 32, this[65]);
  }
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 46ACD0: using guessed type int __thiscall CPlayer::GetGuildName(_DWORD, _DWORD, _DWORD);
// 46AD70: using guessed type int __thiscall CPlayer::GetGuildClassTitle(_DWORD, _DWORD);

//----- (004514F0) --------------------------------------------------------
void __thiscall CPlayer::AI(int this)
{
  if ( CBase::IsDeleted((_DWORD *)this) )
  {
    CLink::Remove((CLink *)(this + 428));
    CIOObject::Release((CIOObject *)this, (volatile int *)(this + 8));
  }
}

//----- (00451530) --------------------------------------------------------
int __thiscall CPlayer::Damage(volatile LONG *this, _DWORD *a2, int a3, int *a4, _DWORD *a5, int *a6, int a7)
{
  int result; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp+18h] [ebp-84h]
  int v11; // [esp+1Ch] [ebp-80h]
  int v12; // [esp+30h] [ebp-6Ch]
  int v13; // [esp+34h] [ebp-68h]
  int v14; // [esp+38h] [ebp-64h]
  int v15; // [esp+68h] [ebp-34h]
  int v16; // [esp+6Ch] [ebp-30h]
  _DWORD *v18; // [esp+7Ch] [ebp-20h]
  _DWORD *v19; // [esp+80h] [ebp-1Ch]
  char *v20; // [esp+84h] [ebp-18h]
  int v21; // [esp+88h] [ebp-14h]
  int v22; // [esp+94h] [ebp-8h]

  if ( CChar::IsMState(this, 0x4000000i64) )
  {
    *a6 = 0;
    *a4 = 0;
    result = 0;
  }
  else
  {
    if ( a7 )
      v16 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 52))(a7);
    else
      v16 = 1;
    if ( a7 )
      v15 = (*(int (__thiscall **)(int))(*(_DWORD *)a7 + 28))(a7);
    else
      v15 = 0;
    v22 = CChar::GetFinalDamage(this, a2, a3, v16);
    if ( v22 > 0 )
    {
      if ( CChar::IsMState(this, 512i64) )
        CChar::CancelBuff((int)this, 8);
      if ( CChar::IsMState(this, 0x10000000i64) )
        CChar::CancelBuff((int)this, 26);
      if ( CChar::IsMState(this, 0x8000i64) && (*(int (__thiscall **)(_DWORD *))(*a2 + 156))(a2) == 1 )
      {
        CChar::CancelBuff((int)this, 14);
        *a6 = 0;
        *a4 = 0;
        result = 0;
      }
      else if ( CChar::IsBState(0x10000, 0) && RandomBetween(1, 100) <= 10 )
      {
        CChar::UpdateBuff((int)this, 58);
        *a6 = 0;
        *a4 = 0;
        result = 0;
      }
      else
      {
        CChar::Lock((int)this);
        if ( CChar::IsNormal((int)this) )
        {
          *((_DWORD *)this + 366) = GetTickCount();
          if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) && CChar::IsGState(a2, 256) && (int)a2[134] < 3 )
            a2[134] = 3;
          if ( CChar::IsMState(this, 0x1000000i64) )
          {
            *a4 = a3;
          }
          else
          {
            if ( a7 && v16 )
              v8 = CChar::GetFatalDamage((int)a2, v22 >> 1, a5, v15);
            else
              v8 = CChar::GetFatalDamage((int)a2, v22, a5, v15);
            *a4 = v22 + v8;
            if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) && !a2[115] )
            {
              *a4 += 30 * *a4 / 100;
              v21 = a2[15] - *((_DWORD *)this + 15);
              if ( v21 < 0 )
              {
                if ( *((_DWORD *)this + 15) - a2[15] <= 10 )
                  v12 = *((_DWORD *)this + 15) - a2[15];
                else
                  v12 = 10;
                v13 = -dword_4D91A4[v12];
              }
              else
              {
                if ( v21 <= 10 )
                  v14 = a2[15] - *((_DWORD *)this + 15);
                else
                  v14 = 10;
                v13 = dword_4D91A4[v14];
              }
              *a4 += v13 * *a4 / 100;
            }
          }
          if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
          {
            if ( CChar::IsBState(1024, 0) )
            {
              *a4 -= *a4 / 10;
            }
            else if ( CChar::IsBState(0x80000000, 0) )
            {
              *a4 -= 7 * *a4 / 100;
            }
          }
          if ( *a4 >= *((_DWORD *)this + 68) )
            v11 = *((_DWORD *)this + 68);
          else
            v11 = *a4;
          *a4 = v11;
          *((_DWORD *)this + 68) -= *a4;
          if ( *a6 )
          {
            if ( *((int *)this + 68) <= 0 )
            {
              *a6 = 0;
            }
            else
            {
              if ( *a6 >= *((_DWORD *)this + 68) )
                v10 = *((_DWORD *)this + 68);
              else
                v10 = *a6;
              *a6 = v10;
              *((_DWORD *)this + 68) -= *a6;
            }
          }
          if ( *((int *)this + 68) > 0 )
          {
            CChar::Unlock((int)this);
            CPlayer::Rest(0);
          }
          else
          {
            *((_DWORD *)this + 68) = 0;
            if ( CChar::IsGState(this, 0x8000) )
              CPlayer::Write(this, 67, "b", 89);
            CChar::SubGState(this, 32772);
            CChar::SubMState(this, 1, 0);
            CChar::AddGState(this, 2);
            if ( CPlayer::IsEState(this, 2048) )
            {
              CPlayer::SubEState(this, 2048);
              v19 = (_DWORD *)CNPC::FindNPC(*((_DWORD *)this + 410));
              if ( v19 )
                CNPCSiegeGunStone::SetOperator(v19, 0);
              CPlayer::Write(this, 67, "b", 118);
            }
            if ( CChar::IsGState(this, 128) )
            {
              v18 = (_DWORD *)*((_DWORD *)this + 379);
              if ( !v18 )
                EBREAK();
              if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) && a2 == v18 )
              {
                CPlayer::AddEState(this, 16);
              }
              else if ( !CChar::IsBState(256, 0) )
              {
                ++*((_DWORD *)this + 138);
              }
              CPlayer::EndPvP(v18, 3, 2, 6);
            }
            else if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) && !CChar::IsBState(256, 0) )
            {
              ++*((_DWORD *)this + 138);
            }
            if ( CChar::IsGState(this, 1024) )
            {
              (*(void (__thiscall **)(volatile LONG *, int))(*this + 112))(this, 1024);
              CChar::Unlock((int)this);
              v9 = CPlayer::GetGID(this);
              CCastle::UnfurlStandardCancel(v9);
              CChar::Lock((int)this);
            }
            v20 = (char *)*((_DWORD *)this + 275);
            if ( v20 )
            {
              CIOObject::AddRef(v20);
              CChar::Unlock((int)this);
              CBase::Delete(v20);
              CIOObject::Release((volatile int *)v20);
            }
            else
            {
              CChar::Unlock((int)this);
            }
            if ( CChar::IsBState(128, 0) )
              CPlayer::AddEState(this, 128);
            (*(void (__thiscall **)(_DWORD *, volatile LONG *))(*a2 + 160))(a2, this);
            CChar::CancelBuffPrty(-161);
            if ( CChar::IsGState(this, 16) )
              CPlayer::SwitchStall(0);
            if ( CChar::IsGState(this, 512) )
              CPlayer::FreeTransform((int)this);
            CPlayer::BreakStandard((int)this);
            CChar::WriteInSight((int)this, 61, "db", *((_DWORD *)this + 7), 9);
            *((_DWORD *)this + 363) = GetTickCount() + 600000;
            *((_DWORD *)this + 362) = GetTickCount() + 600000;
            (*(void (__thiscall **)(_DWORD *, volatile LONG *))(*a2 + 132))(a2, this);
          }
          CPlayer::UpdatePartyMember(7);
          result = 1;
        }
        else
        {
          CChar::Unlock((int)this);
          *a6 = 0;
          *a4 = 0;
          result = 1;
        }
      }
    }
    else
    {
      *a6 = 0;
      *a4 = 0;
      result = 0;
    }
  }
  return result;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 40B870: using guessed type _DWORD __stdcall CChar::CancelBuffPrty(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 45F540: using guessed type _DWORD __stdcall sub_45F540(_DWORD);
// 45FEB0: using guessed type _DWORD __stdcall CPlayer::UpdatePartyMember(_DWORD);
// 460940: using guessed type _DWORD __stdcall CPlayer::EndPvP(_DWORD, _DWORD, _DWORD, _DWORD);
// 4642B0: using guessed type _DWORD __stdcall CPlayer::Rest(_DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);

//----- (00451CF0) --------------------------------------------------------
void __thiscall CPlayer::InfoDie(void *this, int a2, int a3)
{
  CPlayer::Write(this, 64, "db", a2, a3);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00451D20) --------------------------------------------------------
int __thiscall CPlayer::ReviseProperty(_DWORD *this)
{
  int result; // eax
  int v3; // [esp+8h] [ebp-4h]

  CChar::ReviseProperty(this);
  v3 = this[19];
  this[21] += 2 * this[17] * this[17] / dword_4D6A10[this[115]] + 115;
  result = this[22] + v3 + 2 * v3 * v3 / dword_4D6A1C[this[115]];
  this[22] = result;
  return result;
}

//----- (00451DA0) --------------------------------------------------------
void __thiscall CPlayer::AddMStateEx(int this, int a2)
{
  CChar::AddMStateEx((volatile LONG *)this, a2);
  CPlayer::Write(this, 21, "d", *(_DWORD *)(this + 296));
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00451DE0) --------------------------------------------------------
void __thiscall CPlayer::AddBState(int this, int a2, int a3, int a4)
{
  volatile LONG *Target; // [esp+4h] [ebp-4h]

  Target = (volatile LONG *)(this + 304);
  InterlockedExchange((volatile LONG *)(this + 304), a2 | *(_DWORD *)(this + 304));
  InterlockedExchange(Target + 1, a3 | *(_DWORD *)(this + 308));
  CPlayer::Write(this, 68, "bId", 74, a2, a3, a4);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00451E70) --------------------------------------------------------
void __thiscall CPlayer::SubMStateEx(int this, int a2)
{
  CChar::SubMStateEx((volatile LONG *)this, a2);
  CPlayer::Write(this, 21, "d", *(_DWORD *)(this + 296));
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00451EB0) --------------------------------------------------------
void __thiscall CPlayer::SubBState(int this, int a2, int a3)
{
  volatile LONG *Target; // [esp+4h] [ebp-4h]

  Target = (volatile LONG *)(this + 304);
  InterlockedExchange((volatile LONG *)(this + 304), *(_DWORD *)(this + 304) & ~a2);
  InterlockedExchange(Target + 1, *(_DWORD *)(this + 308) & ~a3);
  CPlayer::Write(this, 68, "bI", 75, a2, a3);
}
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);

//----- (00451F40) --------------------------------------------------------
int __thiscall CPlayer::GetFinalDefense(_DWORD *this, int a2)
{
  int v2; // eax
  int result; // eax
  int v5; // [esp+Ch] [ebp-4h]

  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
  {
    v2 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 156))(a2);
    result = CChar::GetDefense(this, v2);
  }
  else
  {
    v5 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 156))(a2);
    result = CChar::GetDefense(this, v5) + this[15] / dword_4D9180[3 * v5 + this[115]];
  }
  return result;
}

//----- (00451FC0) --------------------------------------------------------
int __thiscall CPlayer::GetFinalAbsorb(_DWORD *this, int a2)
{
  int result; // eax

  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
    result = CChar::GetAbsorb(this);
  else
    result = CChar::GetAbsorb(this) + 15;
  return result;
}

//----- (00452000) --------------------------------------------------------
int __thiscall CPlayer::GetFinalResist(_DWORD *this, int a2, int a3)
{
  int result; // eax

  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
    result = CChar::GetResist(this, a3) / 10;
  else
    result = CChar::GetResist(this, a3) / 10 + this[15] / dword_4D9198[this[115]] + 25;
  return result;
}

//----- (00452070) --------------------------------------------------------
int __thiscall CPlayer::GetMSpeed(int this, int a2)
{
  int v3; // [esp+0h] [ebp-18h]
  int v4; // [esp+4h] [ebp-14h]

  if ( CChar::IsMState((_QWORD *)this, 1i64) )
    v4 = 533;
  else
    v4 = 800;
  if ( !*(_DWORD *)(this + 260) )
    return v4;
  if ( *(int *)(this + 260) <= 0 )
    v3 = v4 * (abs(*(_DWORD *)(this + 260)) + 100) / 100;
  else
    v3 = 100 * v4 / (*(_DWORD *)(this + 260) + 100);
  return v3;
}

//----- (00452110) --------------------------------------------------------
BOOL __thiscall CPlayer::GetAttackType(_DWORD *this)
{
  return this[115] == 2;
}

//----- (00452130) --------------------------------------------------------
BOOL __thiscall CPlayer::CheckBlock(_DWORD *this, _DWORD *a2)
{
  int v3; // esi
  int v4; // esi
  int v5; // esi
  int v6; // [esp+4h] [ebp-14h]
  BOOL v8; // [esp+Ch] [ebp-Ch]
  int v9; // [esp+10h] [ebp-8h]
  int v10; // [esp+14h] [ebp-4h]

  v9 = this[66];
  if ( !v9 || this[115] == 1 )
    return 0;
  v10 = sub_44FD40(a2[15], this[15]);
  if ( this[115] )
  {
    if ( this[115] == 2 )
    {
      if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
      {
        v5 = dword_4D9248[v10] + v9;
        return v5 >= RandomBetween(1, 100);
      }
      if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) )
        return v9 >= RandomBetween(1, 100);
    }
    return 0;
  }
  if ( !CPlayer::IsWState(this, 1) )
  {
    if ( (this[116] & 4) == 0 )
      return 0;
    if ( !CPlayer::IsWState(this, 12) || !CPlayerSkill::IsSkill(this + 156, 20) )
      return 0;
  }
  if ( !(*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
  {
    if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) )
    {
      v4 = v9 + this[15] / 3;
      return v4 > RandomBetween(1, 100);
    }
    return 0;
  }
  v8 = CPlayer::IsWState(this, 12) != 0;
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 156))(a2) == 1 )
  {
    if ( v8 )
      v6 = (v9 + 3) / 3;
    else
      v6 = v9 + 3;
    v9 = v6;
  }
  v3 = dword_4D9210[7 * v8 + v10] + v9;
  return v3 >= RandomBetween(1, 100);
}
// 44FD40: using guessed type _DWORD __cdecl sub_44FD40(_DWORD, _DWORD);

//----- (00452310) --------------------------------------------------------
void __thiscall CPlayer::UpdateTransformExp(int this, int a2)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  if ( *(_DWORD *)(this + 1108) )
    CItemTransform::UpdateExp(*(_DWORD **)(this + 1108), (_DWORD *)this, a2);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
}

//----- (00452360) --------------------------------------------------------
int __thiscall CPlayer::Add(int this)
{
  int v1; // eax
  int result; // eax
  char *v3; // eax
  int v4; // eax
  int v5; // eax
  char *v6; // [esp-Ch] [ebp-60h]
  int v7; // [esp-8h] [ebp-5Ch]
  int v8; // [esp-4h] [ebp-58h]
  char v10[8]; // [esp+4h] [ebp-50h] BYREF
  char *v11; // [esp+Ch] [ebp-48h] BYREF
  CItem *v12; // [esp+10h] [ebp-44h] BYREF
  char v13[8]; // [esp+14h] [ebp-40h] BYREF
  char v14[8]; // [esp+1Ch] [ebp-38h] BYREF
  char *_Val1; // [esp+24h] [ebp-30h] BYREF
  CItem *v16; // [esp+28h] [ebp-2Ch] BYREF
  char v17[8]; // [esp+2Ch] [ebp-28h] BYREF
  CItem *_Val2; // [esp+34h] [ebp-20h] BYREF
  char v19[8]; // [esp+38h] [ebp-1Ch] BYREF
  struct in_addr v20; // [esp+40h] [ebp-14h]
  CIOObject *v21; // [esp+44h] [ebp-10h]
  struct in_addr in; // [esp+48h] [ebp-Ch]
  char v23[8]; // [esp+4Ch] [ebp-8h] BYREF

  CIOObject::AddRef(this);
  CRWLock::WriteLock((CRWLock *)&unk_4E202C);
  _Val2 = (CItem *)this;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v19,
    (const char *const *)(this + 452),
    &_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v23,
    v1);
  if ( v23[4] )
  {
    v16 = (CItem *)this;
    _Val1 = *(char **)(this + 28);
    std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
      (std::pair<char const * const,CItem *> *)v17,
      (const char *const *)&_Val1,
      &v16);
    sub_445DF0(
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v14,
      v4);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E202C);
    CRWLock::WriteLock((CRWLock *)&unk_4E2050);
    v12 = (CItem *)this;
    v11 = (char *)(this + 32);
    std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
      (std::pair<char const * const,CItem *> *)v13,
      (const char *const *)&v11,
      &v12);
    sub_470440(
      (int)&dword_4E2044,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v10,
      v5);
    CRWLock::WriteUnlock((CRWLock *)&unk_4E2050);
    CIOObject::AddRef((CIOObject *)this, (volatile int *)(this + 8));
    InterlockedIncrement(&dword_4E2000);
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098);
    CLink::Insert((CLink *)(this + 428), (CLink *)dword_4E200C);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098);
    result = 1;
  }
  else
  {
    CIOObject::Release((volatile int *)this);
    v21 = *(CIOObject **)(sub_420250(v23) + 4);
    if ( (CIOObject *)this == v21 )
    {
      EBREAK();
      CIOObject::AddRef(this);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E202C);
    }
    else
    {
      v20 = *(struct in_addr *)(*(_DWORD *)(this + 1676) + 140);
      in = *(struct in_addr *)(*((_DWORD *)v21 + 419) + 140);
      v8 = *(_DWORD *)(*((_DWORD *)v21 + 419) + 136);
      v7 = *(_DWORD *)(*(_DWORD *)(this + 1676) + 136);
      v6 = inet_ntoa(in);
      v3 = inet_ntoa(v20);
      LOG_NORMAL("Same player on game : name(%s) addr(%s, %s) port(%d, %d)", (const char *)(this + 32), v3, v6, v7, v8);
      CPlayer::Write(this, 67, "b", 5);
      CIOObject::AddRef(v21, (volatile int *)v21 + 88);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E202C);
      CPlayer::Write(v21, 45, "b", 2);
      sub_495B20(2);
      CIOObject::Release(v21, (volatile int *)v21 + 88);
    }
    result = 0;
  }
  return result;
}
// 4523A1: variable 'v1' is possibly undefined
// 4524F4: variable 'v4' is possibly undefined
// 452536: variable 'v5' is possibly undefined
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 495B20: using guessed type _DWORD __stdcall sub_495B20(_DWORD);

//----- (00452590) --------------------------------------------------------
LONG __thiscall CPlayer::Remove(int this)
{
  int v3; // [esp+4h] [ebp-8h] BYREF
  int v4; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E202C);
  v4 = *(_DWORD *)(this + 28);
  sub_4703E0((int)&v4);
  sub_4703E0(this + 452);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E202C);
  CRWLock::WriteLock((CRWLock *)&unk_4E2050);
  v3 = this + 32;
  sub_470600((int)&v3);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E2050);
  CIOObject::Release((volatile int *)this);
  return InterlockedDecrement(&dword_4E2000);
}

//----- (00452620) --------------------------------------------------------
void __thiscall CPlayer::Tick(int this)
{
  int v1; // eax
  int v2; // eax
  int v3; // eax
  __int64 v4; // [esp+0h] [ebp-44h]
  __int64 v5; // [esp+8h] [ebp-3Ch]
  __int64 v6; // [esp+10h] [ebp-34h]
  int v7; // [esp+18h] [ebp-2Ch]
  int v8; // [esp+1Ch] [ebp-28h]
  char *v10; // [esp+24h] [ebp-20h]
  volatile int *v11; // [esp+28h] [ebp-1Ch]
  int v12; // [esp+2Ch] [ebp-18h]
  int v13; // [esp+30h] [ebp-14h]
  char *v14; // [esp+38h] [ebp-Ch]
  int v15; // [esp+3Ch] [ebp-8h]
  DWORD v16; // [esp+40h] [ebp-4h]

  if ( CBase::IsDeleted((_DWORD *)this) )
  {
    CLink::Remove((CLink *)(this + 428));
    CIOObject::Release((CIOObject *)this, (volatile int *)(this + 8));
  }
  else
  {
    CChar::RefreshBuff(this);
    CPlayer::RefreshStandardBuff(this);
    v16 = GetTickCount();
    CChar::Lock(this);
    if ( ++*(_DWORD *)(this + 1440) >= 0x258u )
      CPlayer::SaveAllProperty(0);
    if ( CChar::IsGState((_DWORD *)this, 0x2000) && v16 >= *(_DWORD *)(this + 1448) )
    {
      CChar::SubGState((volatile LONG *)this, 0x2000);
      *(_DWORD *)(this + 1448) = v16;
    }
    if ( CChar::IsGState((_DWORD *)this, 2) )
    {
      if ( v16 >= *(_DWORD *)(this + 1452) )
        CPlayer::Revival(this);
    }
    else
    {
      if ( v16 >= *(_DWORD *)(this + 1472) )
      {
        if ( *(_DWORD *)(this + 272) < CChar::GetMaxHP((_DWORD *)this) )
        {
          if ( CChar::GetMaxHP((_DWORD *)this) / 100 >= 40 )
          {
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, 40);
          }
          else
          {
            v8 = CChar::GetMaxHP((_DWORD *)this) / 100;
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v8);
          }
        }
        *(_DWORD *)(this + 1472) = v16 + 6000;
      }
      if ( v16 >= *(_DWORD *)(this + 1476) )
      {
        if ( *(_DWORD *)(this + 276) < CChar::GetMaxMP((_DWORD *)v4) )
        {
          if ( CChar::GetMaxMP((_DWORD *)HIDWORD(v4)) / 100 >= 20 )
          {
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 8, 1, 20);
          }
          else
          {
            v7 = CChar::GetMaxMP((_DWORD *)v5) / 100;
            (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 8, 1, v7);
          }
        }
        *(_DWORD *)(this + 1476) = v16 + 12000;
      }
    }
    if ( CChar::IsGState((_DWORD *)this, 4) && v16 >= *(_DWORD *)(this + 1444) )
    {
      if ( *(_DWORD *)(this + 272) < CChar::GetMaxHP((_DWORD *)this) )
      {
        v1 = CPlayer::GetAutoRefreshHP(this);
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v1);
      }
      if ( *(_DWORD *)(this + 276) < CChar::GetMaxMP((_DWORD *)v4) )
      {
        v2 = CPlayer::GetAutoRefreshMP(this);
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 8, 1, v2);
      }
      *(_DWORD *)(this + 1444) = v16 + 4000;
    }
    v6 = CChar::IsMState((_QWORD *)this, 1i64);
    if ( v6 )
    {
      if ( *(int *)(this + 276) < 6 )
        (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)this + 124))(this, 1, 0);
      else
        (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)this + 88))(this, 8, 0, 6);
    }
    if ( CChar::IsGState((_DWORD *)this, 32) && v16 >= *(_DWORD *)(this + 1468) )
    {
      v15 = RandomBetween(1, 1000);
      if ( v15 > 5 )
      {
        if ( v15 > 15 )
        {
          if ( v15 > 40 )
          {
            if ( v15 > 360 )
              v3 = CItem::CreateItem(237, 0, 1, -1);
            else
              v3 = CItem::CreateItem(239, 0, 1, -1);
          }
          else
          {
            v3 = CItem::CreateItem(240, 0, 1, -1);
          }
        }
        else
        {
          v3 = CItem::CreateItem(188, 0, 1, -1);
        }
      }
      else
      {
        v3 = CItem::CreateItem(241, 0, 1, -1);
      }
      v14 = (char *)v3;
      if ( v3 && CPlayer::InsertItem(2, v3) != 1 )
        CBase::Delete(v14);
      v13 = 600000;
      v5 = CChar::IsBState(8, 0);
      if ( v5 )
      {
        v13 = 300000;
      }
      else
      {
        v4 = CChar::IsBState(1, 0);
        if ( v4 )
          v13 = 300000;
      }
      *(_DWORD *)(this + 1468) = v13 + v16;
      CPlayer::Write(this, 67, "b", 44);
    }
    if ( CChar::IsGState((_DWORD *)this, 64) && v16 >= *(_DWORD *)(this + 1468) )
    {
      if ( !CPlayer::Cooking(--*(_DWORD *)(this + 1268)) )
        CPlayer::Write(this, 68, "bb", 51, *(_DWORD *)(this + 1268));
      (*(void (__thiscall **)(int, int, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 112))(
        this,
        64,
        HIDWORD(v4),
        v5,
        HIDWORD(v5),
        v6,
        HIDWORD(v6));
    }
    if ( CChar::IsGState((_DWORD *)this, 128) )
      CPlayer::OnPvP(this);
    if ( CChar::IsGState((_DWORD *)this, 512) && v16 >= *(_DWORD *)(this + 1480) )
    {
      if ( *(int *)(this + 580) <= 0 )
      {
        CPlayer::FreeTransform(this);
      }
      else
      {
        v12 = *(_DWORD *)(this + 1112) & 0xF;
        if ( v12 )
          (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)this + 88))(this, 35, 0, dword_4D66AC[v12]);
        *(_DWORD *)(this + 1480) = v16 + (*(_DWORD *)(this + 580) <= 0 ? 60000 : 5000);
      }
    }
    if ( CChar::IsGState((_DWORD *)this, 1024) && v16 >= *(_DWORD *)(this + 1468) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 1024);
      CChar::Unlock(this);
      v11 = (volatile int *)CPlayer::GetGuild(this);
      if ( v11 )
      {
        CGuild::UnfurlStandard((int)v11, this, *(_DWORD *)(this + 1268));
        CIOObject::Release((CIOObject *)v11, v11 + 10);
      }
      CChar::Lock(this);
    }
    if ( (dword_4E1178 & 2) != 0 && v16 >= *(_DWORD *)(this + 1484) )
    {
      *(_DWORD *)(this + 1484) = v16 + 1800000;
      v10 = (char *)CItem::CreateItem(137, 0, 1, -1);
      if ( v10 )
      {
        if ( CPlayer::InsertItem(16, v10) != 1 )
          CBase::Delete(v10);
      }
    }
    CChar::Unlock(this);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 188))(this, 1);
    CPlayer::MLMPayMoney(0);
  }
}
// 452792: variable 'v4' is possibly undefined
// 4527BA: variable 'v5' is possibly undefined
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 452C10: using guessed type int __thiscall sub_452C10(_DWORD);
// 452C50: using guessed type int __thiscall sub_452C50(_DWORD);
// 452E60: using guessed type _DWORD CPlayer::Write(_DWORD, char, ...);
// 4586A0: using guessed type _DWORD __stdcall CPlayer::SaveAllProperty(_DWORD);
// 45DDC0: using guessed type _DWORD __stdcall CPlayer::InsertItem(_DWORD, _DWORD);
// 460770: using guessed type int __thiscall sub_460770(_DWORD);
// 464550: using guessed type int __thiscall sub_464550(_DWORD);
// 467080: using guessed type _DWORD __stdcall sub_467080(_DWORD);
// 46A020: using guessed type _DWORD __stdcall sub_46A020(_DWORD);
// 46AAD0: using guessed type int __thiscall CPlayer::GetGuild(_DWORD);
// 4E1178: using guessed type int dword_4E1178;

//----- (00452C10) --------------------------------------------------------
int __thiscall CPlayer::GetAutoRefreshHP(_DWORD *this)
{
  int v1; // esi

  v1 = 7 * this[144];
  return v1 + RandomBetween(0, 2 * this[144]) + 25;
}

//----- (00452C50) --------------------------------------------------------
int __thiscall CPlayer::GetAutoRefreshMP(_DWORD *this)
{
  int v1; // esi

  v1 = 6 * this[144];
  return v1 + RandomBetween(0, 2 * this[144]) + 20;
}

//----- (00452C90) --------------------------------------------------------
void __cdecl CPlayer::WarPortalAll(int a1, int a2)
{
  _DWORD *v2; // [esp+0h] [ebp-18h]
  int v3[2]; // [esp+4h] [ebp-14h] BYREF
  volatile LONG *v4; // [esp+Ch] [ebp-Ch]
  int *i; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098);
  CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098);
  for ( i = (int *)dword_4E2004; i != &dword_4E2004; i = (int *)*i )
  {
    v4 = i - 107;
    if ( !i[14]
      || *((_DWORD *)v4 + 120) != a2
      && (!*(_DWORD *)(*((_DWORD *)v4 + 121) + 392) || *(_DWORD *)(*((_DWORD *)v4 + 121) + 392) != a2) )
    {
      v6 = CCastle::WarPortal(a1, *((_DWORD *)v4 + 79), *((_DWORD *)v4 + 83), *((_DWORD *)v4 + 84));
      if ( v6 >= 0 )
      {
        v2 = (_DWORD *)((char *)&unk_4D77C8 + 28 * v6);
        v3[0] = RandomBetween(v2[1] - 32, v2[1] + 32);
        v3[1] = RandomBetween(v2[2] - 32, v2[2] + 32);
        if ( CChar::IsGState(v4, 2) )
          CChar::AddGState(v4, 8);
        CPlayer::Teleport(*v2, v3, v2[3], 0);
      }
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078);
}
// 45CC90: using guessed type _DWORD __stdcall CPlayer::Teleport(_DWORD, _DWORD, _DWORD, _DWORD);
// 4E2004: using guessed type int dword_4E2004;

//----- (00452E00) --------------------------------------------------------
void __stdcall CPlayer::Send(void *Src)
{
  CIOBuffer *v1; // [esp+4h] [ebp-4h]

  v1 = CIOBuffer::Alloc();
  memcpy(v1, Src, *((_DWORD *)Src + 2000));
  *((_DWORD *)v1 + 2000) = *((_DWORD *)Src + 2000);
  CSocket::_CSocket(v1);
}

//----- (00452E60) --------------------------------------------------------
void CPlayer::Write(int a1, char a2, ...)
{
  CIOBuffer *v2; // [esp+0h] [ebp-10h]
  va_list va; // [esp+20h] [ebp+10h] BYREF

  va_start(va, a2);
  v2 = CIOBuffer::Alloc();
  *((_BYTE *)v2 + 2) = a2;
  *(_WORD *)v2 = (unsigned __int16)WritePacket((char *)v2 + 3, (int)va) - (_WORD)v2;
  *((_DWORD *)v2 + 2000) = *(unsigned __int16 *)v2;
  CSocket::_CSocket(v2);
}

//----- (00452ED0) --------------------------------------------------------
void __thiscall CPlayer::Process(int this, int a2, void *Src, int end)
{
  char *v4; // eax
  int v5; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // eax
  int v9; // [esp-8h] [ebp-2DCh]
  int v11; // [esp+24h] [ebp-2B0h] BYREF
  int v12; // [esp+28h] [ebp-2ACh] BYREF
  int v13; // [esp+2Ch] [ebp-2A8h] BYREF
  int v14; // [esp+30h] [ebp-2A4h] BYREF
  int v15; // [esp+34h] [ebp-2A0h] BYREF
  int v16; // [esp+38h] [ebp-29Ch] BYREF
  int v17; // [esp+3Ch] [ebp-298h] BYREF
  int v18; // [esp+40h] [ebp-294h] BYREF
  int v19; // [esp+44h] [ebp-290h] BYREF
  int v20; // [esp+48h] [ebp-28Ch] BYREF
  int v21; // [esp+4Ch] [ebp-288h] BYREF
  int v22; // [esp+50h] [ebp-284h] BYREF
  int v23; // [esp+54h] [ebp-280h] BYREF
  int v24; // [esp+58h] [ebp-27Ch] BYREF
  char v25; // [esp+5Fh] [ebp-275h] BYREF
  char v26[4]; // [esp+60h] [ebp-274h] BYREF
  int v27; // [esp+64h] [ebp-270h] BYREF
  int v28; // [esp+68h] [ebp-26Ch] BYREF
  int v29; // [esp+6Ch] [ebp-268h] BYREF
  int v30; // [esp+70h] [ebp-264h] BYREF
  int v31; // [esp+74h] [ebp-260h] BYREF
  int v32; // [esp+78h] [ebp-25Ch]
  unsigned __int8 v33; // [esp+7Fh] [ebp-255h] BYREF
  int v34; // [esp+80h] [ebp-254h]
  unsigned __int8 v35; // [esp+87h] [ebp-24Dh] BYREF
  int v36; // [esp+88h] [ebp-24Ch] BYREF
  unsigned __int8 v37; // [esp+8Eh] [ebp-246h] BYREF
  unsigned __int8 v38; // [esp+8Fh] [ebp-245h] BYREF
  char *v39; // [esp+90h] [ebp-244h] BYREF
  char *Str; // [esp+94h] [ebp-240h] BYREF
  char v41[4]; // [esp+98h] [ebp-23Ch] BYREF
  int v42; // [esp+9Ch] [ebp-238h] BYREF
  CIOObject *v43; // [esp+A0h] [ebp-234h]
  char v44[4]; // [esp+A4h] [ebp-230h] BYREF
  int v45; // [esp+A8h] [ebp-22Ch] BYREF
  CIOObject *v46; // [esp+ACh] [ebp-228h]
  unsigned __int8 v47; // [esp+B0h] [ebp-224h] BYREF
  unsigned __int8 v48; // [esp+B1h] [ebp-223h] BYREF
  unsigned __int8 v49; // [esp+B2h] [ebp-222h] BYREF
  unsigned __int8 v50; // [esp+B3h] [ebp-221h] BYREF
  char v51; // [esp+B4h] [ebp-220h] BYREF
  unsigned __int8 v52; // [esp+B5h] [ebp-21Fh] BYREF
  unsigned __int8 v53; // [esp+B6h] [ebp-21Eh] BYREF
  unsigned __int8 v54; // [esp+B7h] [ebp-21Dh] BYREF
  CIOObject *v55; // [esp+B8h] [ebp-21Ch]
  int v56; // [esp+BCh] [ebp-218h] BYREF
  CIOObject *v57; // [esp+C0h] [ebp-214h]
  int v58; // [esp+C4h] [ebp-210h] BYREF
  volatile int *v59; // [esp+C8h] [ebp-20Ch]
  int v60; // [esp+CCh] [ebp-208h] BYREF
  CIOObject *v61; // [esp+D0h] [ebp-204h]
  unsigned __int8 v62; // [esp+D7h] [ebp-1FDh] BYREF
  int v63; // [esp+D8h] [ebp-1FCh] BYREF
  volatile int *v64; // [esp+DCh] [ebp-1F8h]
  volatile int *v65; // [esp+E0h] [ebp-1F4h]
  int v66; // [esp+E4h] [ebp-1F0h] BYREF
  CIOObject *v67; // [esp+E8h] [ebp-1ECh]
  volatile int *v68; // [esp+ECh] [ebp-1E8h]
  int v69; // [esp+F0h] [ebp-1E4h] BYREF
  CIOObject *v70; // [esp+F4h] [ebp-1E0h]
  unsigned __int8 v71; // [esp+FBh] [ebp-1D9h] BYREF
  volatile int *v72; // [esp+FCh] [ebp-1D8h]
  int v73; // [esp+100h] [ebp-1D4h] BYREF
  CIOObject *v74; // [esp+104h] [ebp-1D0h]
  volatile int *v75; // [esp+108h] [ebp-1CCh]
  int v76; // [esp+10Ch] [ebp-1C8h] BYREF
  CIOObject *v77; // [esp+110h] [ebp-1C4h]
  int v78; // [esp+114h] [ebp-1C0h] BYREF
  volatile int *v79; // [esp+118h] [ebp-1BCh]
  volatile int *v80; // [esp+11Ch] [ebp-1B8h]
  CIOObject *v81; // [esp+120h] [ebp-1B4h]
  int v82; // [esp+124h] [ebp-1B0h] BYREF
  int v83; // [esp+128h] [ebp-1ACh] BYREF
  CIOObject *v84; // [esp+12Ch] [ebp-1A8h]
  int v85; // [esp+130h] [ebp-1A4h] BYREF
  unsigned __int8 v86; // [esp+137h] [ebp-19Dh] BYREF
  CIOObject *v87; // [esp+138h] [ebp-19Ch]
  int v88; // [esp+13Ch] [ebp-198h] BYREF
  int v89; // [esp+140h] [ebp-194h] BYREF
  unsigned __int8 v90; // [esp+147h] [ebp-18Dh] BYREF
  int v91; // [esp+148h] [ebp-18Ch] BYREF
  CIOObject *v92; // [esp+14Ch] [ebp-188h]
  int v93; // [esp+150h] [ebp-184h] BYREF
  int v94; // [esp+154h] [ebp-180h] BYREF
  int v95; // [esp+158h] [ebp-17Ch] BYREF
  int v96; // [esp+15Ch] [ebp-178h] BYREF
  CIOObject *v97; // [esp+160h] [ebp-174h]
  unsigned __int8 v98; // [esp+167h] [ebp-16Dh] BYREF
  char *Source; // [esp+168h] [ebp-16Ch] BYREF
  CIOObject *v100; // [esp+16Ch] [ebp-168h]
  CIOObject *v101; // [esp+170h] [ebp-164h]
  CIOObject *v102; // [esp+174h] [ebp-160h]
  CIOObject *v103; // [esp+178h] [ebp-15Ch]
  CIOObject *v104; // [esp+17Ch] [ebp-158h]
  char *Str1; // [esp+180h] [ebp-154h] BYREF
  CIOObject *v106; // [esp+184h] [ebp-150h]
  unsigned __int8 v107; // [esp+18Bh] [ebp-149h] BYREF
  int v108; // [esp+18Ch] [ebp-148h]
  char v109; // [esp+193h] [ebp-141h] BYREF
  int v110; // [esp+194h] [ebp-140h] BYREF
  unsigned __int8 v111; // [esp+19Bh] [ebp-139h] BYREF
  int v112; // [esp+19Ch] [ebp-138h] BYREF
  unsigned __int8 v113; // [esp+1A3h] [ebp-131h] BYREF
  int v114; // [esp+1A4h] [ebp-130h]
  int v115; // [esp+1A8h] [ebp-12Ch]
  char v116; // [esp+1AEh] [ebp-126h] BYREF
  unsigned __int8 v117; // [esp+1AFh] [ebp-125h] BYREF
  char v118[7]; // [esp+1B0h] [ebp-124h] BYREF
  unsigned __int8 v119; // [esp+1B7h] [ebp-11Dh] BYREF
  int v120; // [esp+1B8h] [ebp-11Ch] BYREF
  int v121; // [esp+1BCh] [ebp-118h] BYREF
  unsigned __int8 v122; // [esp+1C3h] [ebp-111h] BYREF
  int v123; // [esp+1C4h] [ebp-110h] BYREF
  int v124; // [esp+1C8h] [ebp-10Ch] BYREF
  unsigned __int8 v125; // [esp+1CEh] [ebp-106h] BYREF
  unsigned __int8 v126; // [esp+1CFh] [ebp-105h] BYREF
  int v127; // [esp+1D0h] [ebp-104h]
  unsigned __int8 v128; // [esp+1D6h] [ebp-FEh] BYREF
  unsigned __int8 v129; // [esp+1D7h] [ebp-FDh] BYREF
  int v130; // [esp+1D8h] [ebp-FCh] BYREF
  unsigned __int8 v131; // [esp+1DFh] [ebp-F5h] BYREF
  int v132; // [esp+1E0h] [ebp-F4h] BYREF
  CIOObject *v133; // [esp+1E4h] [ebp-F0h]
  unsigned __int8 v134; // [esp+1EBh] [ebp-E9h] BYREF
  CIOObject *v135; // [esp+1ECh] [ebp-E8h]
  int v136; // [esp+1F0h] [ebp-E4h] BYREF
  unsigned __int8 v137; // [esp+1F5h] [ebp-DFh] BYREF
  unsigned __int8 v138; // [esp+1F6h] [ebp-DEh] BYREF
  unsigned __int8 v139; // [esp+1F7h] [ebp-DDh] BYREF
  int v140; // [esp+1F8h] [ebp-DCh] BYREF
  unsigned __int8 v141; // [esp+1FFh] [ebp-D5h] BYREF
  int v142; // [esp+200h] [ebp-D4h] BYREF
  unsigned __int8 v143; // [esp+207h] [ebp-CDh] BYREF
  int v144; // [esp+208h] [ebp-CCh] BYREF
  unsigned __int8 v145; // [esp+20Fh] [ebp-C5h] BYREF
  int v146; // [esp+210h] [ebp-C4h] BYREF
  unsigned __int8 v147; // [esp+217h] [ebp-BDh] BYREF
  int v148; // [esp+218h] [ebp-BCh] BYREF
  int v149; // [esp+21Ch] [ebp-B8h] BYREF
  int v150; // [esp+220h] [ebp-B4h] BYREF
  int v151; // [esp+224h] [ebp-B0h] BYREF
  int v152; // [esp+228h] [ebp-ACh] BYREF
  int v153; // [esp+22Ch] [ebp-A8h] BYREF
  int v154; // [esp+230h] [ebp-A4h] BYREF
  int v155; // [esp+234h] [ebp-A0h] BYREF
  char v156[4]; // [esp+238h] [ebp-9Ch] BYREF
  char v157[4]; // [esp+23Ch] [ebp-98h] BYREF
  int v158; // [esp+240h] [ebp-94h] BYREF
  int v159; // [esp+244h] [ebp-90h] BYREF
  unsigned __int8 v160; // [esp+24Bh] [ebp-89h] BYREF
  int v161; // [esp+24Ch] [ebp-88h] BYREF
  unsigned __int8 v162; // [esp+253h] [ebp-81h] BYREF
  int v163; // [esp+254h] [ebp-80h] BYREF
  unsigned __int8 v164; // [esp+25Bh] [ebp-79h] BYREF
  int v165; // [esp+25Ch] [ebp-78h]
  _DWORD *v166; // [esp+260h] [ebp-74h]
  int v167; // [esp+264h] [ebp-70h] BYREF
  volatile int *v168; // [esp+268h] [ebp-6Ch]
  int v169; // [esp+26Ch] [ebp-68h] BYREF
  unsigned __int8 v170; // [esp+273h] [ebp-61h] BYREF
  int v171; // [esp+274h] [ebp-60h] BYREF
  unsigned __int16 v172; // [esp+278h] [ebp-5Ch] BYREF
  unsigned __int16 v173[3]; // [esp+27Ch] [ebp-58h] BYREF
  unsigned __int8 v174; // [esp+283h] [ebp-51h] BYREF
  unsigned __int16 v175; // [esp+284h] [ebp-50h] BYREF
  unsigned __int16 v176; // [esp+288h] [ebp-4Ch] BYREF
  unsigned __int16 v177; // [esp+28Ch] [ebp-48h] BYREF
  unsigned __int16 v178; // [esp+290h] [ebp-44h] BYREF
  unsigned __int16 v179; // [esp+294h] [ebp-40h] BYREF
  int v180; // [esp+298h] [ebp-3Ch] BYREF
  int v181; // [esp+29Ch] [ebp-38h] BYREF
  unsigned __int8 v182; // [esp+2A3h] [ebp-31h] BYREF
  char *v183; // [esp+2A4h] [ebp-30h] BYREF
  unsigned __int8 v184; // [esp+2AAh] [ebp-2Ah] BYREF
  unsigned __int8 v185; // [esp+2ABh] [ebp-29h] BYREF
  void *v186; // [esp+2ACh] [ebp-28h]
  unsigned __int8 v187; // [esp+2B3h] [ebp-21h] BYREF
  unsigned __int8 v188; // [esp+2B4h] [ebp-20h] BYREF
  unsigned __int8 v189; // [esp+2B5h] [ebp-1Fh] BYREF
  unsigned __int8 v190; // [esp+2B6h] [ebp-1Eh] BYREF
  unsigned __int8 v191; // [esp+2B7h] [ebp-1Dh] BYREF
  int v192; // [esp+2B8h] [ebp-1Ch] BYREF
  unsigned __int8 v193; // [esp+2BFh] [ebp-15h] BYREF
  int v194; // [esp+2C0h] [ebp-14h] BYREF
  unsigned __int8 v195; // [esp+2C7h] [ebp-Dh] BYREF
  char v196; // [esp+2C8h] [ebp-Ch] BYREF
  char v197; // [esp+2C9h] [ebp-Bh] BYREF
  char v198; // [esp+2CAh] [ebp-Ah] BYREF
  char v199; // [esp+2CBh] [ebp-9h] BYREF
  char v200; // [esp+2CCh] [ebp-8h] BYREF
  char v201; // [esp+2CDh] [ebp-7h] BYREF
  char v202; // [esp+2CEh] [ebp-6h] BYREF
  char v203; // [esp+2CFh] [ebp-5h] BYREF
  int v204; // [esp+2D0h] [ebp-4h] BYREF
  char *Srca; // [esp+2E0h] [ebp+Ch]
  char *Srck; // [esp+2E0h] [ebp+Ch]
  char *Srcb; // [esp+2E0h] [ebp+Ch]
  char *Srcl; // [esp+2E0h] [ebp+Ch]
  char *Srcm; // [esp+2E0h] [ebp+Ch]
  char *Srcn; // [esp+2E0h] [ebp+Ch]
  char *Srco; // [esp+2E0h] [ebp+Ch]
  char *Srcp; // [esp+2E0h] [ebp+Ch]
  char *Srcq; // [esp+2E0h] [ebp+Ch]
  char *Srcr; // [esp+2E0h] [ebp+Ch]
  char *Srcc; // [esp+2E0h] [ebp+Ch]
  char *Srcd; // [esp+2E0h] [ebp+Ch]
  char *Srce; // [esp+2E0h] [ebp+Ch]
  char *Srcs; // [esp+2E0h] [ebp+Ch]
  char *Srct; // [esp+2E0h] [ebp+Ch]
  char *Srcf; // [esp+2E0h] [ebp+Ch]
  char *Srcg; // [esp+2E0h] [ebp+Ch]
  char *Srch; // [esp+2E0h] [ebp+Ch]
  char *Srci; // [esp+2E0h] [ebp+Ch]
  char *Srcj; // [esp+2E0h] [ebp+Ch]

  switch ( a2 )
  {
    case 11:
      if ( (*(_DWORD *)(this + 20) & 0xB) == 2 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v203, &v204);
        if ( v203 == 1 )
        {
          if ( !*(_DWORD *)(this + 340) )
            *(_DWORD *)(this + 340) = v204;
          CPlayer::GameStart(this);
        }
        else
        {
          CPlayer::Write(this, 45, "b", 0);
          sub_495B20(0);
        }
      }
      else
      {
        v9 = *(_DWORD *)(*(_DWORD *)(this + 1676) + 136);
        v8 = inet_ntoa(*(struct in_addr *)(*(_DWORD *)(this + 1676) + 140));
        LOG_NORMAL(
          "Invalid state at CPlayer::Process() Type(%d) UID(%d) Bit(%x) Addr(%s) Port(%d) Player(%p)",
          a2,
          *(_DWORD *)(this + 448),
          *(_DWORD *)(this + 20),
          v8,
          v9,
          (const void *)this);
      }
      return;
    case 12:
    case 13:
    case 14:
    case 53:
      return;
    case 15:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v195, &v194);
        if ( CChar::IsGState((_DWORD *)this, 0x2000) )
        {
          CChar::SubGState((volatile LONG *)this, 0x2000);
          *(_DWORD *)(this + 1448) = GetTickCount();
        }
        CPlayer::Attack(v195, v194);
      }
      return;
    case 16:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srca = ScanPacket((char *)Src, (char *)end, "b", &v191);
        if ( CChar::IsGState((_DWORD *)this, 0x2000) )
        {
          CChar::SubGState((volatile LONG *)this, 0x2000);
          *(_DWORD *)(this + 1448) = GetTickCount();
        }
        sub_47FBB0(v191, Srca, end);
      }
      return;
    case 17:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "s", &v183, 129);
        CPlayer::ProcessMsg(v183);
      }
      return;
    case 18:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v182, &v181);
        CPlayer::OnTeleport(v182, v181);
      }
      return;
    case 19:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v202);
        if ( v202 )
        {
          if ( GetTickCount() - *(_DWORD *)(this + 1464) < 0x2710 || CChar::IsMState((_QWORD *)this, 32i64) )
            CPlayer::Write(this, 29, "b", 0);
          else
            CPlayer::Write(this, 29, "b", 1);
        }
        else
        {
          CPlayer::GameRestart(this);
        }
      }
      return;
    case 20:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bbb", &v199, &v201, &v200);
        CChar::Lock(this);
        if ( CPlayer::CanMove((_DWORD *)this) )
          CSMap::ReadLock((Concurrency::details::_CancellationTokenRegistration *)this, v199, v201, v200, 0, 0);
        CChar::Unlock(this);
      }
      return;
    case 21:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bbb", &v196, &v198, &v197);
        CChar::Lock(this);
        if ( CPlayer::CanMove((_DWORD *)this) )
          CSMap::ReadLock((Concurrency::details::_CancellationTokenRegistration *)this, v196, v198, v197, 1, 0);
        CChar::Unlock(this);
      }
      return;
    case 22:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v171);
        sub_4490A0(v171, this);
      }
      return;
    case 23:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v167);
        v168 = (volatile int *)CNPC::FindNPC(v167);
        if ( v168 )
        {
          v165 = 100;
          v166 = (_DWORD *)CCastle::GetCastle(*((_DWORD *)v168 + 116));
          if ( v166 )
            v165 = CCastle::GetTaxRate(v166);
          CIOObject::Release(v168);
          CPlayer::Write(this, 76, "b", (unsigned __int8)v165);
        }
      }
      return;
    case 24:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcm = ScanPacket((char *)Src, (char *)end, "dbb", &v163, &v164, &v162);
        CPlayer::BuyItemEx(v163, v164, v162, Srcm, end);
      }
      return;
    case 25:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcn = ScanPacket((char *)Src, (char *)end, "db", &v161, &v160);
        CPlayer::SellItem(v161, v160, Srcn, end);
      }
      return;
    case 26:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "dd", &v159, &v158);
        CPlayer::DropItem(v159, v158);
      }
      return;
    case 27:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        if ( GetTickCount() - *(_DWORD *)(this + 1464) < 0x2710 || CChar::IsMState((_QWORD *)this, 32i64) )
          CPlayer::Write(this, 93, "b", 0);
        else
          CPlayer::Write(this, 93, "b", 1);
      }
      return;
    case 28:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srco = ScanPacket((char *)Src, (char *)end, "b", &v143);
        CPlayer::ShowOffItem(v143, Srco, end);
      }
      return;
    case 29:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v129);
        CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), v129);
      }
      return;
    case 30:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v128);
        if ( v128 <= 4u )
        {
          v127 = CPlayer::GetNeedPoint(v128);
          if ( v127 <= 0 || *(_DWORD *)(this + 544) < v127 )
          {
            CPlayer::Write(this, 68, "bb", 26, v127);
          }
          else
          {
            (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)this + 88))(this, 23, 0, v127);
            (*(void (__cdecl **)(int, _DWORD, int, int))(*(_DWORD *)this + 88))(this, v128, 1, 1);
            CDBSocket::Write(
              16,
              "dbwbb",
              *(_DWORD *)(this + 452),
              23,
              *(_DWORD *)(this + 544),
              v128,
              *(_DWORD *)(this + 4 * v128 + 64));
          }
        }
      }
      return;
    case 31:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v126);
        CPlayer::Rest(v126);
      }
      return;
    case 32:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "ddd", &v155, v156, v157);
        sub_4938A0(this, v155, v156);
      }
      return;
    case 33:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v151);
        CPlayer::UseItem(v151);
      }
      return;
    case 34:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v146);
        CPlayer::AskTrade(v146);
      }
      return;
    case 35:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v145, &v144);
        CPlayer::OnAskTrade(v145, v144);
      }
      return;
    case 36:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
        CPlayer::CancelTrade(this);
      return;
    case 37:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        CChar::Lock(this);
        CPlayer::Revival(this);
        *(_DWORD *)(this + 1448) = GetTickCount();
        CChar::Unlock(this);
      }
      return;
    case 38:
      v29 = 0;
      v31 = 0;
      v30 = 0;
      Srch = ScanPacket((char *)Src, (char *)end, "db", &v29, &v31);
      if ( v31 == 1 )
        ScanPacket(Srch, (char *)end, "b", &v30);
      if ( (*(_WORD *)dword_4E1174 & 0x1000) != 0 )
        CPlayer::SiegeGunProcess((_DWORD *)this, 0, v29, v31, v30);
      return;
    case 39:
      v27 = 0;
      v28 = 0;
      ScanPacket((char *)Src, (char *)end, "db", &v27, &v28);
      if ( (*(_WORD *)dword_4E1174 & 0x1000) != 0 )
        CPlayer::SiegeGunProcess((_DWORD *)this, 1, v27, v28, 0);
      return;
    case 40:
      *(_DWORD *)v26 = 0;
      Srci = ScanPacket((char *)Src, (char *)end, "b", v26);
      if ( (*(_WORD *)dword_4E1174 & 0x1000) != 0 )
        CPlayer::SiegeGunControl((_DWORD *)this, *(int *)v26, Srci, end);
      return;
    case 41:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v189);
        if ( *(int *)(this + 548) > 0 )
          sub_47F7A0(v189);
      }
      return;
    case 42:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v188);
        if ( *(int *)(this + 548) > 0 )
          sub_47F970(v188);
      }
      return;
    case 43:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v193, &v192);
        if ( CChar::IsGState((_DWORD *)this, 0x2000) )
        {
          CChar::SubGState((volatile LONG *)this, 0x2000);
          *(_DWORD *)(this + 1448) = GetTickCount();
        }
        if ( v193 < 0x5Du && sub_480390(v193, v192) )
          CChar::WriteInSight(this, 61, "dbbd", *(_DWORD *)(this + 28), 5, v193, v192);
      }
      return;
    case 44:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v123);
        CPlayer::AskParty(v123);
      }
      return;
    case 45:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v122, &v121);
        CPlayer::OnAskParty(v122, v121);
      }
      return;
    case 46:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srce = ScanPacket((char *)Src, (char *)end, "b", &v109);
        v108 = 0;
        switch ( v109 )
        {
          case 1:
            v108 = CGuild::CreateTrial(this);
            break;
          case 3:
            ScanPacket(Srce, (char *)end, "b", &v107);
            v106 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v106 )
            {
              v108 = CGuild::CreateConsent((char *)v106, this, v107);
              CIOObject::Release(v106, (volatile int *)v106 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 5:
            ScanPacket(Srce, (char *)end, "s", &Str1, 15);
            v104 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v104 )
            {
              v108 = CGuild::CreateGuildName(this, Str1);
              CIOObject::Release(v104, (volatile int *)v104 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 7:
            v103 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v103 )
            {
              v108 = CGuild::AdminInfo(v103, this);
              CIOObject::Release(v103, (volatile int *)v103 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 8:
            v102 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v102 )
            {
              v108 = CGuild::BasicInfo(v102, this);
              CIOObject::Release(v102, (volatile int *)v102 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 10:
            v101 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v101 )
            {
              v108 = CGuild::Secession(v101, this);
              CIOObject::Release(v101, (volatile int *)v101 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 11:
            ScanPacket(Srce, (char *)end, "s", &Source, 181);
            v100 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v100 )
            {
              v108 = CGuild::SetTodayMessage((int)v100, this, Source);
              CIOObject::Release(v100, (volatile int *)v100 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 12:
            ScanPacket(Srce, (char *)end, "b", &v98);
            v97 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v97 )
            {
              v108 = CGuild::SetExpADD((int *)v97, (_DWORD *)this, v98);
              CIOObject::Release(v97, (volatile int *)v97 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 13:
            ScanPacket(Srce, (char *)end, "ddddd", &v94, &v95, &v96, &v91, &v93);
            v92 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v92 )
            {
              v108 = CGuild::SetSkillAble(v92, this, v94, v95, v96, v91, v93);
              CIOObject::Release(v92, (volatile int *)v92 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 15:
            ScanPacket(Srce, (char *)end, "ddb", &v88, &v89, &v90);
            v108 = CGuild::ConfluxAnswer((_DWORD *)this, v88, v89, v90);
            break;
          case 16:
            v87 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v87 )
            {
              v108 = CGuild::Dissolution((int)v87, this);
              CIOObject::Release(v87, (volatile int *)v87 + 10);
            }
            else
            {
              v108 = 1;
            }
            break;
          case 18:
            ScanPacket(Srce, (char *)end, "ddb", &v83, &v85, &v86);
            v84 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v84 )
            {
              v108 = CGuild::AllianceOfferAnswer((int)v84, this, v83, v85, v86);
              CIOObject::Release(v84, (volatile int *)v84 + 10);
            }
            break;
          case 19:
            ScanPacket(Srce, (char *)end, "d", &v82);
            if ( dword_4E35B8 && dword_4E35B8 != 2 )
            {
              v108 = 70;
            }
            else
            {
              v81 = (CIOObject *)CPlayer::GetGuild(this);
              if ( v81 )
              {
                v80 = (volatile int *)CNPC::FindNPC(v82);
                if ( v80 )
                {
                  v108 = CGuild::WarDeclare(v81, this, *((_DWORD *)v80 + 116));
                  CIOObject::Release(v80);
                }
                CIOObject::Release(v81, (volatile int *)v81 + 10);
              }
              else
              {
                v108 = 22;
              }
            }
            break;
          case 20:
            ScanPacket(Srce, (char *)end, "d", &v78);
            v79 = (volatile int *)CNPC::FindNPC(v78);
            if ( v79 )
            {
              CGuild::WarDelcareList(this, *((_DWORD *)v79 + 116));
              CIOObject::Release(v79);
            }
            break;
          case 21:
            ScanPacket(Srce, (char *)end, "d", &v76);
            v77 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v77 )
            {
              v75 = (volatile int *)CNPC::FindNPC(v76);
              if ( v75 )
              {
                if ( *((_DWORD *)v75 + 113) == 16 && sub_448870((_DWORD *)(this + 332), (_DWORD *)v75 + 83) <= 64 )
                  v108 = CGuild::TrialUnfurlStandard(v77, (_DWORD *)this, *((_DWORD *)v75 + 116));
                CIOObject::Release(v75);
              }
              CIOObject::Release(v77, (volatile int *)v77 + 10);
            }
            break;
          case 22:
            if ( CChar::IsGState((_DWORD *)this, 1024) )
            {
              (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 1024);
              v5 = CPlayer::GetGID(this);
              CCastle::UnfurlStandardCancel(v5);
            }
            break;
          case 23:
            ScanPacket(Srce, (char *)end, "d", &v73);
            v74 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v74 )
            {
              v72 = (volatile int *)CNPC::FindNPC(v73);
              if ( v72 )
              {
                v108 = CGuild::CastleInfo(v74, this, *((_DWORD *)v72 + 116));
                CIOObject::Release(v72);
              }
              CIOObject::Release(v74, (volatile int *)v74 + 10);
            }
            break;
          case 24:
            ScanPacket(Srce, (char *)end, "db", &v69, &v71);
            v70 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v70 )
            {
              v68 = (volatile int *)CNPC::FindNPC(v69);
              if ( v68 )
              {
                v108 = CGuild::TaxRateControl(this, *((_DWORD *)v68 + 116), v71);
                CIOObject::Release(v68);
              }
              CIOObject::Release(v70, (volatile int *)v70 + 10);
            }
            break;
          case 25:
            ScanPacket(Srce, (char *)end, "d", &v63);
            v64 = (volatile int *)CNPC::FindNPC(v63);
            if ( v64 )
            {
              v108 = CGuild::CastleGateNPC(this, *((_DWORD *)v64 + 116), *((_DWORD *)v64 + 112));
              CIOObject::Release(v64);
            }
            break;
          case 26:
            ScanPacket(Srce, (char *)end, "db", &v60, &v62);
            v61 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v61 )
            {
              v59 = (volatile int *)CNPC::FindNPC(v60);
              if ( v59 )
              {
                v108 = CGuild::CastleSetGateLmit(this, *((_DWORD *)v59 + 116), v62);
                CIOObject::Release(v59);
              }
              CIOObject::Release(v61, (volatile int *)v61 + 10);
            }
            break;
          case 27:
            ScanPacket(Srce, (char *)end, "d", &v66);
            v67 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v67 )
            {
              v65 = (volatile int *)CNPC::FindNPC(v66);
              if ( v65 )
              {
                v108 = CGuild::TaxLevy(v67, this, *((_DWORD *)v65 + 116));
                CIOObject::Release(v65);
              }
              CIOObject::Release(v67, (volatile int *)v67 + 10);
            }
            break;
          case 28:
            ScanPacket(Srce, (char *)end, "d", &v58);
            v57 = (CIOObject *)CPlayer::GetGuild(this);
            if ( v57 )
            {
              v108 = CGuild::CheckStandard((int *)v57, (_DWORD *)this, v58);
              CIOObject::Release(v57, (volatile int *)v57 + 10);
            }
            break;
          case 29:
            ScanPacket(Srce, (char *)end, "d", &v56);
            CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
            if ( *(_DWORD *)(this + 1096) && *(int *)(*(_DWORD *)(this + 1096) + 52) >= 500000 )
            {
              CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
              v55 = (CIOObject *)CPlayer::GetGuild(this);
              if ( v55 )
              {
                v108 = CGuild::SetStandard((int *)v55, (_DWORD *)this, v56);
                CIOObject::Release(v55, (volatile int *)v55 + 10);
              }
            }
            else
            {
              CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
            }
            break;
          default:
            break;
        }
        if ( v108 )
          CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v108);
      }
      return;
    case 47:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
        CPlayer::LeaveParty(this);
      return;
    case 48:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v120);
        CPlayer::ExileParty(v120);
      }
      return;
    case 49:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcp = ScanPacket((char *)Src, (char *)end, "db", &v142, &v141);
        CPlayer::PutInStorage(v142, v141, Srcp, end);
      }
      return;
    case 50:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcq = ScanPacket((char *)Src, (char *)end, "db", &v140, &v139);
        CPlayer::PutOutStorage(v140, v139, Srcq, end);
      }
      return;
    case 51:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v180);
        if ( CChar::IsGState((_DWORD *)this, 256) && v180 && v180 == 393281539 )
          CPlayer::Write(this, 95, "b", 9);
        else
          sub_47CB40(v180, this);
      }
      return;
    case 52:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
        CPlayer::StorageInfo(this);
      return;
    case 54:
      if ( (dword_4E1178 & 0x100) != 0 )
      {
        CAuthSocket::Write(16, "dd", *(_DWORD *)(this + 448), *(_DWORD *)(this + 452));
        CDBSocket::Write(77, "dd", *(_DWORD *)(this + 452), 0);
      }
      return;
    case 56:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v119, v118);
        CPlayer::SaveRevivalPt(v119, 0);
      }
      return;
    case 57:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "dd", &v149, &v150);
        CPlayer::EnchantItem(v149, v150);
      }
      return;
    case 58:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcr = ScanPacket((char *)Src, (char *)end, "b", &v138);
        CPlayer::SetStallInfo(v138, Srcr, end);
      }
      return;
    case 59:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v38);
        if ( *(int *)(this + 60) >= 50
          && *(_DWORD *)(this + 464) >= 7u
          && CPlayer::FindItem(657, 1)
          && (*(_DWORD *)(this + 460) || v38 <= 1u)
          && (*(_DWORD *)(this + 460) != 1 || v38 >= 4u)
          && (*(_DWORD *)(this + 460) != 2 || v38 == 2 || v38 == 3) )
        {
          CChar::Lock(this);
          if ( CPlayer::RemoveItem(9, 657, 1) )
          {
            v38 &= 1u;
            if ( v38 )
              *(_DWORD *)(this + 464) = 11;
            else
              *(_DWORD *)(this + 464) = 7;
            sub_4803E0(this + 624);
            CPlayer::Write(this, 68, "bb", 38, *(_DWORD *)(this + 464));
            CDBSocket::Write(15, "db", *(_DWORD *)(this + 452), 1 << (v38 + 3));
            CPlayer::Write(this, 68, "bb", 106, 0);
            CChar::WriteInSight(this, 73, "db", *(_DWORD *)(this + 28), 28);
          }
          else
          {
            CPlayer::Write(this, 68, "bb", 106, 1);
          }
          CChar::Unlock(this);
        }
        else
        {
          CPlayer::Write(this, 68, "bb", 106, 1);
        }
      }
      return;
    case 60:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        if ( CPlayer::FindItem(661, 1) )
        {
          CChar::Lock(this);
          if ( CPlayer::RemoveItem(9, 661, 1) )
          {
            sub_480540(this + 624);
            CPlayer::Write(this, 68, "bb", 110, 0);
            CChar::WriteInSight(this, 73, "db", *(_DWORD *)(this + 28), 29);
          }
          else
          {
            CPlayer::Write(this, 68, "bb", 110, 1);
          }
          CChar::Unlock(this);
        }
        else
        {
          CPlayer::Write(this, 68, "bb", 110, 1);
        }
      }
      return;
    case 61:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        v7 = ScanPacket((char *)Src, (char *)end, "d", &v36);
        ScanPacket(v7, (char *)end, "b", &v37);
        CChar::WriteInSight(this, 24, "db", v36, v37);
      }
      return;
    case 62:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
        CPlayer::TradeAgreed(this);
      return;
    case 63:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v154);
        CPlayer::TrashItem(v154);
      }
      return;
    case 64:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcf = ScanPacket((char *)Src, (char *)end, "b", &v48);
        if ( (dword_4E1174[0] & 0x40) != 0 )
        {
          if ( !v48 || v48 == 1 || v48 == 4 )
            CPlayer::FRDProcess(v48, Srcf, end);
          else
            LOG_ERR(
              "C2S_FRD wrong Type    PID(%d) Char(%s) UID(%d) Type(%d)",
              *(_DWORD *)(this + 452),
              (const char *)(this + 32),
              *(_DWORD *)(this + 448),
              v48);
        }
      }
      return;
    case 65:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v153);
        CPlayer::PutOnItem(v153);
      }
      return;
    case 66:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v152);
        CPlayer::PutOffItem(v152);
      }
      return;
    case 67:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v134);
        CPlayer::SwitchStall(v134);
      }
      return;
    case 68:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        v4 = ScanPacket((char *)Src, (char *)end, "b", &v117);
        CPlayer::ProcessEvent(v117, v4, end);
      }
      return;
    case 69:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 96);
      return;
    case 70:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v137, &v136);
        if ( *(_DWORD *)(this + 28) == v136 )
        {
          CPlayer::GetStallInfo(v137, this);
        }
        else
        {
          v135 = sub_450810(v136);
          if ( v135 )
          {
            CPlayer::GetStallInfo(v137, this);
            CIOObject::Release(v135, (volatile int *)v135 + 88);
          }
        }
      }
      return;
    case 71:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcc = ScanPacket((char *)Src, (char *)end, "ddb", &v130, &v132, &v131);
        v133 = sub_450810(v130);
        if ( v133 )
        {
          if ( v131 )
            CPlayer::BuyItemAtStall(this, v132, v131, Srcc, end);
          CIOObject::Release(v133, (volatile int *)v133 + 88);
        }
      }
      return;
    case 72:
      if ( (*(_DWORD *)(this + 20) & 9) != 8 || (dword_4E1178 & 4) == 0 )
        return;
      Srcd = ScanPacket((char *)Src, (char *)end, "b", &v116);
      if ( v116 == 3 )
      {
        if ( *(int *)(this + 60) >= 5 )
        {
          if ( CPlayer::EventIsMoraTime(this) )
            CPlayer::Write(this, 14, "b", 5);
          else
            CPlayer::Write(this, 14, "b", 6);
        }
        else
        {
          CPlayer::Write(this, 14, "b", 8);
        }
        return;
      }
      if ( v116 == 4 && CPlayer::EventIsMoraTime(this) )
      {
        ScanPacket(Srcd, (char *)end, "b", &v113);
        v114 = RandomBetween(0, 2);
        v115 = 0;
        if ( v113 )
        {
          if ( v113 == 1 )
          {
            if ( v114 )
            {
              if ( v114 == 2 )
                v115 = CPlayer::EventSetMora(3);
              goto LABEL_200;
            }
          }
          else
          {
            if ( v113 != 2 )
            {
              v115 = CPlayer::EventSetMora(2);
              goto LABEL_200;
            }
            if ( v114 != 1 )
            {
              if ( !v114 )
                v115 = CPlayer::EventSetMora(3);
              goto LABEL_200;
            }
          }
        }
        else if ( v114 != 2 )
        {
          if ( v114 == 1 )
            v115 = CPlayer::EventSetMora(3);
          goto LABEL_200;
        }
        v115 = CPlayer::EventSetMora(1);
LABEL_200:
        CPlayer::Write(this, 14, "bbbb", 7, v113, v114, v115);
      }
      return;
    case 73:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        v175 = 0;
        v176 = 0;
        v178 = 0;
        v172 = 0;
        v173[0] = 0;
        v177 = 0;
        v179 = 0;
        Srcb = ScanPacket((char *)Src, (char *)end, "b", &v174);
        if ( v174 )
        {
          if ( v174 == 1 )
          {
            ScanPacket(Srcb, (char *)end, "www", &v175, &v176, &v178);
          }
          else
          {
            LOG_ERR("Wrong Packet at C2S_COOKING PID :%d , UID :%d", *(_DWORD *)(this + 452), *(_DWORD *)(this + 448));
            CPlayer::Write(this, 45, "b", 1);
            sub_495B20(1);
          }
        }
        else
        {
          ScanPacket(Srcb, (char *)end, "wwwwwww", &v175, &v176, &v178, &v172, v173, &v177, &v179);
        }
        *(_DWORD *)(this + 1272) = v175;
        *(_DWORD *)(this + 1276) = v176;
        *(_DWORD *)(this + 1280) = v178;
        *(_DWORD *)(this + 1284) = v172;
        *(_DWORD *)(this + 1288) = v173[0];
        *(_DWORD *)(this + 1292) = v177;
        *(_DWORD *)(this + 1296) = v179;
        if ( CChar::IsGState((_DWORD *)this, 64) || !CPlayer::IsCooking(v174) )
        {
          CPlayer::Write(this, 68, "bb", 51, v174);
        }
        else
        {
          *(_DWORD *)(this + 1268) = v174 + 1;
          *(_DWORD *)(this + 1468) = GetTickCount() + 10000;
          (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 100))(this, 64);
          CPlayer::Write(this, 67, "b", 49);
        }
      }
      return;
    case 74:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v125, &v124);
        CPlayer::RevivalSkill(v125, v124);
      }
      return;
    case 75:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v187);
        if ( v187 == 4 )
        {
          v186 = *(void **)(this + 4 * v187 + 632);
          if ( v186
            && CPlayer::RemoveItem(9, 362, 1)
            && (*(int (__thiscall **)(void *, int))(*(_DWORD *)v186 + 48))(v186, this) )
          {
            operator_delete(v186);
          }
        }
        else
        {
          sub_480240(v187);
        }
      }
      return;
    case 76:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v35);
        if ( v35 == 2 )
        {
          CPlayer::AddEState((_DWORD *)this, 512);
        }
        else if ( CPlayer::IsEState((_DWORD *)this, 512) )
        {
          CPlayer::SubEState((_DWORD *)this, 512);
          if ( CPlayer::GetInvenSize(this) < 60 )
          {
            v34 = CPlayer::_FindItem((v35 != 0) + 663, 1);
            if ( v34 )
              CPlayer::ExchangeBoddariToItem(v35, v34);
          }
          else
          {
            CPlayer::Write(this, 67, "b", 40);
            CPlayer::Write(this, 67, "b", 17);
          }
        }
      }
      return;
    case 77:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v33);
        if ( v33 == 2 )
        {
          CPlayer::AddEState((_DWORD *)this, 1024);
        }
        else if ( CPlayer::IsEState((_DWORD *)this, 1024) )
        {
          CPlayer::SubEState((_DWORD *)this, 1024);
          if ( CPlayer::GetInvenSize(this) < 60 )
          {
            v32 = CPlayer::_FindItem((v33 != 0) + 689, 1);
            if ( v32 )
              CPlayer::ExchangeDanjiToItem(v33, v32);
          }
          else
          {
            CPlayer::Write(this, 67, "b", 40);
            CPlayer::Write(this, 67, "b", 17);
          }
        }
      }
      return;
    case 78:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
        CPlayer::InitStat(this);
      return;
    case 79:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 && (dword_4E1174[0] & 1) != 0 )
        CPlayer::PKBulletinInfoSend((void *)this);
      return;
    case 80:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v112);
        CPlayer::AskPvP(v112);
      }
      return;
    case 81:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v111, &v110);
        CPlayer::OnAskPvP(v111, v110);
      }
      return;
    case 82:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bb", &v53, &v54);
        CPlayer::Transform(this, v53, v54);
      }
      return;
    case 83:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bb", &v185, &v184);
        CPlayer::Bless((char *)this, v185, v184);
      }
      return;
    case 84:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srck = ScanPacket((char *)Src, (char *)end, "b", &v190);
        sub_47FC90(v190, Srck, end);
      }
      return;
    case 85:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        v6 = ScanPacket((char *)Src, (char *)end, "b", &v52);
        CPlayer::MLMProcess(v52, v6, end);
      }
      return;
    case 88:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "b", &v51);
        if ( v51 )
        {
          if ( !CChar::IsGState((_DWORD *)this, 2048) )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 100))(this, 2048);
        }
        else if ( CChar::IsGState((_DWORD *)this, 2048) )
        {
          (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 2048);
        }
      }
      return;
    case 89:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcs = ScanPacket((char *)Src, (char *)end, "b", &v50);
        CPlayer::Shortcut((_DWORD *)this, v50, Srcs, end);
      }
      return;
    case 90:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srct = ScanPacket((char *)Src, (char *)end, "b", &v49);
        CPlayer::SetMyTelPt((_DWORD *)this, v49, Srct, end);
      }
      return;
    case 91:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "bd", &v147, &v148);
        CPlayer::UpgradeItem(v147, v148);
      }
      return;
    case 92:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcg = ScanPacket((char *)Src, (char *)end, "b", &v47);
        if ( (*(_WORD *)dword_4E1174 & 0x400) != 0 )
        {
          if ( !v47 || v47 == 2 || v47 == 6 || v47 == 8 || v47 == 9 || v47 == 10 )
            CPlayer::MAILProcess(v47, Srcg, end);
          else
            LOG_ERR(
              "C2S_MAIL wrong Type    PID(%d) Char(%s) UID(%d) Type(%d)",
              *(_DWORD *)(this + 452),
              (const char *)(this + 32),
              *(_DWORD *)(this + 448),
              v47);
        }
      }
      return;
    case 93:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v42);
        v43 = CMonster::FindMonster(v42);
        if ( v43 )
        {
          (*(void (__thiscall **)(CIOObject *, int, int, char *, char *, char *, _DWORD))(*(_DWORD *)v43 + 72))(
            v43,
            this,
            1,
            v41,
            v41,
            v41,
            0);
          CIOObject::Release(v43, (volatile int *)v43 + 88);
        }
      }
      return;
    case 94:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "d", &v45);
        v46 = CMonster::FindMonster(v45);
        if ( v46 )
        {
          (*(void (__thiscall **)(CIOObject *, int, _DWORD, char *, char *, char *, _DWORD))(*(_DWORD *)v46 + 72))(
            v46,
            this,
            0,
            v44,
            v44,
            v44,
            0);
          CIOObject::Release(v46, (volatile int *)v46 + 88);
        }
      }
      return;
    case 95:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "s", &v39, 15);
        CPlayer::ChangeGuildName((char *)this, v39);
      }
      return;
    case 96:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        ScanPacket((char *)Src, (char *)end, "s", &Str, 15);
        CPlayer::ChangePlayerName((char *)this, Str);
      }
      return;
    case 97:
      Srcl = ScanPacket((char *)Src, (char *)end, "db", &v169, &v170);
      CPlayer::NPCProcess((void *)this, v169, v170, (int)Srcl, end);
      return;
    case 98:
      if ( (*(_DWORD *)(this + 20) & 9) == 8 )
      {
        Srcj = ScanPacket((char *)Src, (char *)end, "b", &v25);
        if ( v25 )
        {
          if ( v25 == 1 )
          {
            ScanPacket(Srcj, (char *)end, "ddddd", &v17, &v20, &v18, &v16, &v19);
            sub_46F350(this, v17, v20, v18, v16, v19);
          }
          else if ( v25 == 2 )
          {
            ScanPacket(Srcj, (char *)end, "ddddd", &v12, &v15, &v13, &v11, &v14);
            CPlayer::EnforceItem(this, 1, v12, v15, v13, v11, v14);
          }
        }
        else
        {
          ScanPacket(Srcj, (char *)end, "dddd", &v22, &v24, &v23, &v21);
          CPlayer::EnforceItem(this, 0, v22, v24, v23, v21, 0);
        }
      }
      return;
    default:
      LOG_ERR(
        "Invalid packet type at CPlayer::Process() Type(%d) UID(%d) bit(%x)",
        a2,
        *(_DWORD *)(this + 448),
        *(_DWORD *)(this + 20));
      return;
  }
}
// 4490A0: using guessed type _DWORD __cdecl sub_4490A0(char, _DWORD);
// 456720: using guessed type int __thiscall sub_456720(_DWORD);
// 456750: using guessed type _DWORD __stdcall sub_456750(_DWORD, _DWORD);
// 456BC0: using guessed type _DWORD __stdcall sub_456BC0(_DWORD);
// 458270: using guessed type int __thiscall sub_458270(_DWORD);
// 4585B0: using guessed type int __thiscall sub_4585B0(_DWORD);
// 45C740: using guessed type _DWORD __stdcall sub_45C740(_DWORD, _DWORD);
// 45CE50: using guessed type _DWORD __stdcall sub_45CE50(_DWORD, _DWORD);
// 45D190: using guessed type _DWORD __stdcall CPlayer::FindItem(_DWORD, _DWORD);
// 45D1E0: using guessed type _DWORD __stdcall sub_45D1E0(_DWORD, _DWORD);
// 45D7E0: using guessed type _DWORD __stdcall sub_45D7E0(char, _DWORD);
// 45D9C0: using guessed type _DWORD __stdcall sub_45D9C0(char);
// 45DA90: using guessed type _DWORD __stdcall CPlayer::RemoveItem(_DWORD, _DWORD, _DWORD);
// 45DB40: using guessed type _DWORD __stdcall sub_45DB40(char);
// 45DC50: using guessed type _DWORD __stdcall sub_45DC50(char);
// 45DD00: using guessed type _DWORD __stdcall sub_45DD00(char);
// 45DF90: using guessed type _DWORD __stdcall sub_45DF90(_DWORD, _DWORD);
// 45E0A0: using guessed type _DWORD __stdcall sub_45E0A0(_DWORD, char);
// 45E170: using guessed type _DWORD __stdcall sub_45E170(_DWORD);
// 45E2F0: using guessed type _DWORD __stdcall sub_45E2F0(_DWORD, _DWORD);
// 45E3B0: using guessed type int __thiscall sub_45E3B0(_DWORD);
// 45E720: using guessed type int __thiscall sub_45E720(_DWORD);
// 45EB90: using guessed type int __thiscall sub_45EB90(_DWORD);
// 45F3A0: using guessed type _DWORD __stdcall sub_45F3A0(_DWORD, _DWORD);
// 45F540: using guessed type _DWORD __stdcall sub_45F540(_DWORD);
// 45FA90: using guessed type _DWORD __stdcall sub_45FA90(_DWORD);
// 45FC60: using guessed type _DWORD __stdcall sub_45FC60(_DWORD, _DWORD);
// 45FD70: using guessed type int __thiscall sub_45FD70(_DWORD);
// 45FDC0: using guessed type _DWORD __stdcall sub_45FDC0(_DWORD);
// 460300: using guessed type _DWORD __stdcall sub_460300(_DWORD);
// 4604C0: using guessed type _DWORD __stdcall sub_4604C0(_DWORD, _DWORD);
// 460A50: using guessed type _DWORD __stdcall sub_460A50(char *Str1);
// 4642B0: using guessed type _DWORD __stdcall CPlayer::Rest(_DWORD);
// 464550: using guessed type int __thiscall sub_464550(_DWORD);
// 464750: using guessed type _DWORD __stdcall sub_464750(_DWORD, _DWORD);
// 464A50: using guessed type _DWORD __stdcall sub_464A50(_DWORD, _DWORD);
// 465250: using guessed type int __thiscall sub_465250(_DWORD);
// 465630: using guessed type int __thiscall sub_465630(_DWORD);
// 4656E0: using guessed type _DWORD __stdcall sub_4656E0(_DWORD);
// 469D40: using guessed type _DWORD __stdcall sub_469D40(_DWORD);
// 46AAD0: using guessed type int __thiscall CPlayer::GetGuild(_DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 47F7A0: using guessed type _DWORD __stdcall sub_47F7A0(_DWORD);
// 47F970: using guessed type _DWORD __stdcall sub_47F970(_DWORD);
// 47FBB0: using guessed type _DWORD __stdcall sub_47FBB0(_DWORD, _DWORD, _DWORD);
// 47FC90: using guessed type _DWORD __stdcall sub_47FC90(_DWORD, _DWORD, _DWORD);
// 480240: using guessed type _DWORD __stdcall sub_480240(_DWORD);
// 480390: using guessed type _DWORD __stdcall sub_480390(_DWORD, _DWORD);
// 4803E0: using guessed type int __thiscall sub_4803E0(_DWORD);
// 480540: using guessed type int __thiscall sub_480540(_DWORD);
// 4938A0: using guessed type _DWORD __stdcall sub_4938A0(_DWORD a1, _DWORD, _DWORD);
// 495B20: using guessed type _DWORD __stdcall sub_495B20(_DWORD);
// 4E1178: using guessed type int dword_4E1178;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00456720) --------------------------------------------------------
int __thiscall CPlayer::GetInvenSize(_DWORD *this)
{
  return unknown_libname_18(this + 267) - this[276];
}
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);

//----- (00456750) --------------------------------------------------------
void __stdcall CPlayer::ExchangeBoddariToItem(int a1, int a2)
{
  int v2; // [esp+4h] [ebp-4h]

  v2 = RandomBetween(1, 100000);
  if ( v2 > 94450 )
  {
    if ( a1 )
      CPlayer::ExchahgeItem(a2, 1, 2, 31, 10000);
    else
      CPlayer::ExchahgeItem(a2, 1, 2, 31, 20000);
    return;
  }
  if ( v2 > 74450 )
  {
    if ( a1 )
      CPlayer::ExchahgeItem(a2, 1, 2, 48, 10);
    else
      CPlayer::ExchahgeItem(a2, 1, 2, 48, 20);
    return;
  }
  if ( v2 <= 39450 )
  {
    if ( v2 > 24450 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem(a2, 1, 2, 206, 1);
        return;
      }
      goto LABEL_15;
    }
    if ( v2 > 19450 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem(a2, 1, 2, 207, 1);
        return;
      }
      goto LABEL_19;
    }
    if ( v2 > 4450 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem(a2, 1, 2, 517, 1);
        return;
      }
LABEL_15:
      CPlayer::ExchahgeItem(a2, 1, 2, 447, 1);
      return;
    }
    if ( v2 > 450 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem(a2, 1, 2, 638, 1);
        return;
      }
LABEL_19:
      CPlayer::ExchahgeItem(a2, 1, 2, 241, 1);
      return;
    }
    if ( v2 > 400 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem(a2, 1, 2, 220, 1);
        return;
      }
LABEL_31:
      CPlayer::ExchahgeItem(a2, 1, 2, 221, 1);
      return;
    }
    if ( v2 > 300 )
    {
      CPlayer::ExchahgeItem(a2, 1, 2, 327, 1);
      return;
    }
    if ( v2 > 200 )
    {
      CPlayer::ExchahgeItem(a2, 1, 2, 331, 1);
      return;
    }
    if ( v2 > 120 )
    {
      CPlayer::ExchahgeItem(a2, 1, 2, 329, 1);
      return;
    }
    if ( v2 <= 50 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem(a2, 1, 2, 523, 1);
        return;
      }
    }
    else if ( a1 )
    {
      goto LABEL_31;
    }
    CPlayer::ExchahgeItem(a2, 1, 2, 332, 1);
    return;
  }
  if ( a1 )
    CPlayer::ExchahgeItem(a2, 1, 2, 31, 1000);
  else
    CPlayer::ExchahgeItem(a2, 1, 2, 31, 2000);
}
// 456AD0: using guessed type _DWORD __stdcall CPlayer::ExchahgeItem(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00456AD0) --------------------------------------------------------
void __thiscall CPlayer::ExchahgeItem(int this, CIOObject *a2, int a3, int a4, int a5, int a6)
{
  char *v7; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)a2 + 120))(a2, this, 9, -a3) )
    CPlayer::_OutofInven(a2);
  for ( i = 0; i < 5; ++i )
  {
    v7 = (char *)CItem::CreateItem(a5, 0, a6, -1);
    if ( v7 )
    {
      if ( CPlayer::_InsertItem(a4, v7) != 1 )
      {
        CBase::Delete(v7);
        LOG_ERR(
          "INSERT_FAIL at CPlayer::ExchahgeItem() While Creating Item PID(%d) NewItemIndex(%d) NewItemNum(%d) ",
          *(_DWORD *)(this + 452),
          a5,
          a6);
      }
      break;
    }
    LOG_ERR(
      "Create Item Fail at CPlayer::ExchahgeItem() PID(%d) NewItemIndex(%d) NewItemNum(%d) ",
      *(_DWORD *)(this + 452),
      a5,
      a6);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
}
// 45D140: using guessed type _DWORD __stdcall CPlayer::_OutofInven(CIOObject *);
// 45DE10: using guessed type _DWORD __stdcall sub_45DE10(_DWORD, _DWORD);

//----- (00456BC0) --------------------------------------------------------
int __thiscall CPlayer::GetNeedPoint(_DWORD *this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  v3 = this[a2 + 16];
  if ( v3 >= 250 )
    return 0;
  if ( !this[115] && !a2 || this[115] == 1 && a2 == 2 || this[115] == 2 && a2 == 4 )
    return dword_4D7D48[v3];
  return dword_4D7960[v3];
}

//----- (00456C40) --------------------------------------------------------
int __thiscall CPlayer::OnLoadPlayer(int this, int a2)
{
  int result; // eax
  char *v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // ecx
  int v24; // eax
  int v25; // [esp+0h] [ebp-B0h]
  int v26; // [esp+4h] [ebp-ACh]
  unsigned int v27; // [esp+8h] [ebp-A8h]
  CMemory **v29; // [esp+10h] [ebp-A0h]
  CMemory **v30; // [esp+14h] [ebp-9Ch]
  char v31[8]; // [esp+24h] [ebp-8Ch] BYREF
  int v32; // [esp+4Ch] [ebp-64h] BYREF
  int v33; // [esp+50h] [ebp-60h] BYREF
  int ii; // [esp+54h] [ebp-5Ch]
  int v35; // [esp+58h] [ebp-58h]
  int n; // [esp+5Ch] [ebp-54h]
  int v37; // [esp+60h] [ebp-50h]
  int m; // [esp+64h] [ebp-4Ch]
  char v39[8]; // [esp+68h] [ebp-48h] BYREF
  int v40; // [esp+70h] [ebp-40h] BYREF
  int v41; // [esp+74h] [ebp-3Ch] BYREF
  int v42; // [esp+78h] [ebp-38h] BYREF
  int l; // [esp+7Ch] [ebp-34h]
  char *v44; // [esp+80h] [ebp-30h]
  int k; // [esp+84h] [ebp-2Ch]
  char *v46; // [esp+88h] [ebp-28h]
  int j; // [esp+8Ch] [ebp-24h]
  int i; // [esp+90h] [ebp-20h]
  unsigned __int8 v49; // [esp+96h] [ebp-1Ah] BYREF
  unsigned __int8 v50; // [esp+97h] [ebp-19h] BYREF
  int v51; // [esp+98h] [ebp-18h] BYREF
  int v52; // [esp+9Ch] [ebp-14h] BYREF
  char *packet; // [esp+A0h] [ebp-10h] BYREF
  int v54; // [esp+A4h] [ebp-Ch]
  int v55; // [esp+A8h] [ebp-8h] BYREF
  char *v56; // [esp+ACh] [ebp-4h] BYREF

  CChar::Lock(this);
  if ( CPlayer::IsPBit((_DWORD *)this, 4) )
  {
    CChar::Unlock(this);
    result = 0;
  }
  else
  {
    packet = (char *)sub_418960(a2, this + 456);
    if ( *(_DWORD *)(this + 456) == 1 )
    {
      CPlayer::Write(this, 67, "b", 6);
      CChar::Unlock(this);
      result = 0;
    }
    else
    {
      v3 = GetString(packet, (char *)(this + 32));
      v4 = sub_418960(v3, this + 460);
      v5 = sub_418960(v4, this + 464);
      v6 = sub_418960(v5, this + 60);
      v7 = sub_418980(v6, this + 468);
      v8 = sub_47A220(v7, this + 472);
      v9 = sub_47A240(v8, this + 480);
      v10 = sub_418960(v9, this + 536);
      v11 = sub_418960(v10, this + 64);
      v12 = sub_418960(v11, this + 68);
      v13 = sub_418960(v12, this + 72);
      v14 = sub_418960(v13, this + 76);
      v15 = sub_418960(v14, this + 80);
      v16 = sub_418980(v15, this + 272);
      v17 = sub_418980(v16, this + 276);
      v18 = sub_418980(v17, this + 544);
      v19 = sub_418980(v18, this + 548);
      v20 = sub_418960(v19, this + 552);
      packet = (char *)sub_418960(v20, this + 316);
      packet = (char *)sub_47A240(packet, &v51);
      if ( v51 >= 0 )
      {
        packet = (char *)sub_47A240(packet, &v52);
        packet = (char *)sub_47A240(packet, this + 340);
        packet = (char *)sub_418960(packet, this + 556);
        packet = (char *)sub_418960(packet, this + 560);
        packet = (char *)sub_418960(packet, this + 572);
        packet = (char *)sub_47A240(packet, this + 580);
        CChar::SetXY((_DWORD *)this, &v51);
        (*(void (__thiscall **)(int))(*(_DWORD *)this + 84))(this);
        sub_47F680(this);
        v55 = 0;
        v54 = (int)packet;
        packet = (char *)sub_418960(packet, &v55);
        if ( v55 )
        {
          for ( i = 0; i < v55; ++i )
          {
            packet = (char *)sub_418960(packet, &v50);
            packet = (char *)sub_418960(packet, &v49);
            CPlayerSkill::SetSkill(v50, v49);
          }
          sub_47FC00(this + 624);
          CPlayer::Write(this, 16, "m", v54, &packet[-v54]);
        }
        packet = (char *)sub_418960(packet, &v55);
        if ( v55 )
        {
          CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
          for ( j = 0; j < v55; ++j )
          {
            v46 = (char *)sub_426060(*(_DWORD *)(this + 452), &packet);
            if ( v46 )
            {
              if ( CItem::IsState(v46, 1) && (*((_DWORD *)v46 + 12) & 0x7FF00) != 0 )
              {
                if ( (*((_DWORD *)v46 + 12) & 0x100000) != 0 )
                  CChar::AddGState((volatile LONG *)this, 0x80000000);
                v27 = *((_DWORD *)v46 + 12) & 0x7FF00;
                if ( v27 > 0x2000 )
                {
                  if ( v27 > 0x10000 )
                  {
                    if ( v27 == 0x20000 )
                    {
                      CChar::AddGState((volatile LONG *)this, 0x20000000);
                      (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(this, 27, 1, 50, 50);
                      (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(this, 28, 1, 50, 50);
                    }
                    else if ( v27 == 0x40000 )
                    {
                      CChar::AddGState((volatile LONG *)this, 0x40000000);
                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 5, 1, 50);
                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 6, 1, 50);
                      (*(void (__cdecl **)(int, _DWORD, int, int))(*(_DWORD *)this + 92))(this, 0, 1, 6);
                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 2, 1, 6);
                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 4, 1, 6);
                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 3, 1, 10);
                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 1, 1, 10);
                    }
                  }
                  else
                  {
                    switch ( v27 )
                    {
                      case 0x10000u:
                        CChar::AddGState((volatile LONG *)this, 0x10000000);
                        if ( (*((_DWORD *)v46 + 12) & 0x80000) != 0 )
                        {
                          (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 5, 0, 5);
                          (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 96))(this, 6, 1, 10);
                        }
                        else if ( (*((_DWORD *)v46 + 12) & 0x100000) != 0 )
                        {
                          (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 5, 0, 10);
                          (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 96))(this, 6, 1, 20);
                        }
                        break;
                      case 0x4000u:
                        CChar::AddGState((volatile LONG *)this, 0x4000000);
                        break;
                      case 0x8000u:
                        CChar::AddGState((volatile LONG *)this, 0x8000000);
                        if ( (*((_DWORD *)v46 + 12) & 0x80000) != 0 )
                        {
                          (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 96))(this, 5, 1, 10);
                          (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 6, 0, 5);
                        }
                        else if ( (*((_DWORD *)v46 + 12) & 0x100000) != 0 )
                        {
                          (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 96))(this, 5, 1, 20);
                          (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)this + 96))(this, 6, 0, 10);
                        }
                        break;
                    }
                  }
                }
                else if ( v27 == 0x2000 )
                {
                  CChar::AddGState((volatile LONG *)this, 0x2000000);
                }
                else if ( v27 > 0x400 )
                {
                  if ( v27 == 2048 )
                  {
                    CChar::AddGState((volatile LONG *)this, 0x800000);
                  }
                  else if ( v27 == 4096 )
                  {
                    CChar::AddGState((volatile LONG *)this, 0x1000000);
                  }
                }
                else
                {
                  switch ( v27 )
                  {
                    case 0x400u:
                      CChar::AddGState((volatile LONG *)this, 0x400000);
                      break;
                    case 0x100u:
                      CChar::AddGState((volatile LONG *)this, 0x100000);
                      if ( (*((_DWORD *)v46 + 12) & 0x80000) != 0 )
                      {
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 5, 1, 20);
                        (*(void (__cdecl **)(int, _DWORD, int, int))(*(_DWORD *)this + 92))(this, 0, 1, 2);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 2, 1, 2);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 4, 1, 2);
                      }
                      else if ( (*((_DWORD *)v46 + 12) & 0x100000) != 0 )
                      {
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 5, 1, 50);
                        (*(void (__cdecl **)(int, _DWORD, int, int))(*(_DWORD *)this + 92))(this, 0, 1, 3);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 2, 1, 3);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 4, 1, 3);
                      }
                      break;
                    case 0x200u:
                      CChar::AddGState((volatile LONG *)this, 0x200000);
                      if ( (*((_DWORD *)v46 + 12) & 0x80000) != 0 )
                      {
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 6, 1, 20);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 3, 1, 2);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 1, 1, 2);
                      }
                      else if ( (*((_DWORD *)v46 + 12) & 0x100000) != 0 )
                      {
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 6, 1, 50);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 3, 1, 5);
                        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 1, 1, 5);
                      }
                      break;
                  }
                }
              }
              if ( (*(int (__thiscall **)(char *, char *))(*(_DWORD *)v46 + 148))(v46, v46) || *((int *)v46 + 13) <= 1 )
              {
                if ( CPlayer::_IntoInven((CIOObject *)v46) )
                {
                  if ( (*(int (__thiscall **)(char *))(*(_DWORD *)v46 + 164))(v46) )
                  {
                    *(_DWORD *)(this + 1096) = v46;
                    if ( *(int *)(*(_DWORD *)(this + 1096) + 52) < 0 )
                    {
                      LOG_ERR(
                        "m_pMoney->m_nNum <0 :  UID(%d) PID(%d) IID(%d) Num(%d) ",
                        *(_DWORD *)(this + 448),
                        *(_DWORD *)(this + 452),
                        *((_DWORD *)v46 + 9),
                        *(_DWORD *)(*(_DWORD *)(this + 1096) + 52));
                      CDBSocket::Write(
                        8,
                        "ddwdb",
                        *((_DWORD *)v46 + 9),
                        *(_DWORD *)(this + 452),
                        31,
                        1 - *(_DWORD *)(*(_DWORD *)(this + 1096) + 52),
                        54);
                      *(_DWORD *)(*(_DWORD *)(this + 1096) + 52) = 1;
                    }
                  }
                  else if ( (*(int (__thiscall **)(char *))(*(_DWORD *)v46 + 196))(v46) )
                  {
                    ++*(_DWORD *)(this + 1104);
                  }
                }
                else
                {
                  LOG_ERR("CPlayer::OnLoadPlayer() Item insert error. (IID:%d)", *((_DWORD *)v46 + 9));
                  CBase::Delete(v46);
                }
              }
              else
              {
                LOG_ERR(
                  "CPlayer::OnLoadPlayer()       . Name(%s) PID(%d) UID"
                  "(%d) Index(%d) Num(%d) ",
                  this + 32,
                  *(_DWORD *)(this + 452),
                  *(_DWORD *)(this + 448),
                  *(_DWORD *)(*((_DWORD *)v46 + 10) + 64),
                  *((_DWORD *)v46 + 13));
                CBase::Delete(v46);
              }
            }
          }
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
        }
        packet = (char *)sub_418960(packet, &v55);
        if ( v55 )
        {
          CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
          for ( k = 0; k < v55; ++k )
          {
            v44 = packet;
            v21 = sub_472830(packet + 2, packet);
            sub_470890(
              this + 1128,
              (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v31,
              v21);
            packet += 26;
          }
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
        }
        v54 = (int)packet;
        packet = (char *)sub_418960(packet, &v55);
        if ( v55 )
        {
          for ( l = 0; l < v55; ++l )
          {
            v40 = 0;
            v41 = 0;
            v42 = 0;
            packet = (char *)sub_418980(packet, &v40);
            packet = (char *)sub_418960(packet, &v41);
            packet = (char *)sub_418960(packet, &v42);
            v22 = sub_472860(&v40, &v41);
            sub_4715D0(
              (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v39,
              v22);
            if ( !v39[4] )
              LOG_ERR("CPlayer::OnLoadPlayer() Duplicate Quest. (PID:%d, Quest:%d)", *(_DWORD *)(this + 452), v40);
          }
          CPlayer::Write(this, 87, "m", v54, &packet[-v54]);
        }
        if ( (dword_4E1178 & 4) != 0 )
        {
          packet = (char *)sub_418960(packet, &v55);
          if ( v55 )
          {
            for ( m = 0; m < v55; ++m )
            {
              v30 = operator_new(0x10u);
              if ( v30 )
                v26 = sub_457E30(v30);
              else
                v26 = 0;
              v37 = v26;
              packet = (char *)sub_418960(packet, v26 + 4);
              packet = (char *)sub_47A240(packet, v37 + 8);
              CPlayer::EventInsert(v37);
            }
          }
        }
        packet = (char *)sub_418960(packet, &v55);
        if ( v55 )
        {
          for ( n = 0; n < v55; ++n )
          {
            v29 = operator_new(0x30u);
            if ( v29 )
              v25 = sub_457E60(v29);
            else
              v25 = 0;
            v35 = v25;
            packet = (char *)sub_418960(packet, v25);
            packet = GetString(packet, (char *)(v35 + 8));
            packet = (char *)sub_47A240(packet, v35 + 4);
            packet = (char *)sub_47A240(packet, v35 + 40);
            packet = (char *)sub_418960(packet, v35 + 28);
            packet = (char *)sub_418960(packet, v35 + 32);
            CPlayer::MLMLoad(v35);
          }
        }
        packet = (char *)sub_418960(packet, &v55);
        if ( v55 )
        {
          for ( ii = 0; ii < v55; ++ii )
          {
            v33 = 0;
            v32 = 0;
            packet = (char *)sub_418960(packet, &v33);
            packet = (char *)sub_47A240(packet, &v32);
            CChar::SetBuff(this, v33, v32);
          }
        }
        if ( CPlayer::IsPCBang((_DWORD *)this) )
        {
          v23 = *(_DWORD *)(this + 308);
          *(_DWORD *)(this + 304) |= 1u;
          *(_DWORD *)(this + 308) = v23;
        }
        packet = (char *)sub_47A240(packet, &v56);
        if ( v56 )
        {
          CChar::Unlock(this);
          CGuild::Load(v56, packet, 0);
          CChar::Lock(this);
          if ( CPlayer::IsPBit((_DWORD *)this, 4) )
            goto LABEL_122;
        }
        if ( *(_DWORD *)(this + 480) )
        {
          CChar::Unlock(this);
          CGuild::Login(this);
          CChar::Lock(this);
          if ( CPlayer::IsPBit((_DWORD *)this, 4) )
            goto LABEL_122;
        }
        if ( CGuild::IsWarringPeriod()
          && (CChar::Unlock(this),
              v24 = CPlayer::GetGID(this),
              CGuild::LoginCastle(this, v24),
              CChar::Lock(this),
              CPlayer::IsPBit((_DWORD *)this, 4))
          || (BitSet((volatile signed __int32 *)(this + 20), 1u), !CPlayer::_Create(this)) )
        {
LABEL_122:
          CChar::Unlock(this);
          result = 0;
        }
        else
        {
          CChar::Unlock(this);
          result = 1;
        }
      }
      else
      {
        CChar::Unlock(this);
        ELOG("CPlayer::OnLoadPlayer PID(%d) X(%d) Y(%d) \n", *(_DWORD *)(this + 452));
        EBREAK();
        result = 0;
      }
    }
  }
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 418980: using guessed type _DWORD __cdecl sub_418980(_DWORD, _DWORD);
// 457E30: using guessed type int __thiscall sub_457E30(_DWORD);
// 457E60: using guessed type int __thiscall sub_457E60(_DWORD);
// 457ED0: using guessed type int __thiscall sub_457ED0(_DWORD);
// 45D0D0: using guessed type _DWORD __stdcall sub_45D0D0(CIOObject *_Val2);
// 4655B0: using guessed type _DWORD __stdcall sub_4655B0(_DWORD);
// 466BA0: using guessed type _DWORD __stdcall sub_466BA0(_DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 4715D0: using guessed type _DWORD __stdcall sub_4715D0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 472830: using guessed type _DWORD __stdcall sub_472830(_DWORD, _DWORD);
// 472860: using guessed type _DWORD __stdcall sub_472860(_DWORD, _DWORD);
// 47A220: using guessed type _DWORD __cdecl sub_47A220(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 47F680: using guessed type _DWORD __stdcall sub_47F680(_DWORD);
// 47F6B0: using guessed type _DWORD __stdcall sub_47F6B0(_DWORD, _DWORD);
// 47FC00: using guessed type int __thiscall sub_47FC00(_DWORD);
// 4E1178: using guessed type int dword_4E1178;

//----- (00457E30) --------------------------------------------------------
_DWORD *__thiscall sub_457E30(_DWORD *this)
{
  this[1] = 0;
  *this = 0;
  this[3] = 0;
  return this;
}

//----- (00457E60) --------------------------------------------------------
_DWORD *__thiscall sub_457E60(_DWORD *this)
{
  this[10] = 0;
  this[9] = 0;
  this[8] = 0;
  this[7] = 0;
  this[1] = 0;
  *this = 0;
  memset(this + 2, 0, 0x11u);
  this[11] = 0;
  return this;
}

//----- (00457ED0) --------------------------------------------------------
int __thiscall CPlayer::_Create(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  void *v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  _DWORD *v6; // eax
  int v7; // eax
  unsigned __int16 v8; // ax
  int v9; // eax
  int v11; // [esp-64h] [ebp-84h]
  int v12; // [esp-60h] [ebp-80h]
  int v13; // [esp-5Ch] [ebp-7Ch]
  int v14; // [esp-58h] [ebp-78h]
  int v15; // [esp-54h] [ebp-74h]
  int v16; // [esp-50h] [ebp-70h]
  int v17; // [esp-4Ch] [ebp-6Ch]
  int v18; // [esp-48h] [ebp-68h]
  int v19; // [esp-44h] [ebp-64h]
  int v20; // [esp-40h] [ebp-60h]
  int v21; // [esp-3Ch] [ebp-5Ch]
  int v22; // [esp-38h] [ebp-58h]
  int v23; // [esp-34h] [ebp-54h]
  int v24; // [esp-30h] [ebp-50h]
  int v25; // [esp-2Ch] [ebp-4Ch]
  int v26; // [esp-28h] [ebp-48h]
  int v27; // [esp-14h] [ebp-34h]
  int v28; // [esp-10h] [ebp-30h]
  int v29; // [esp-Ch] [ebp-2Ch]
  int v30; // [esp-8h] [ebp-28h]
  int v31; // [esp-4h] [ebp-24h]
  int v32; // [esp-4h] [ebp-24h]
  _DWORD *v34; // [esp+0h] [ebp-20h]
  char v35[4]; // [esp+4h] [ebp-1Ch] BYREF
  char v36[4]; // [esp+8h] [ebp-18h] BYREF
  volatile int *v37; // [esp+Ch] [ebp-14h]
  char v38[4]; // [esp+10h] [ebp-10h] BYREF
  char *v39; // [esp+14h] [ebp-Ch]
  unsigned __int16 *v40; // [esp+18h] [ebp-8h] BYREF
  void *Src; // [esp+1Ch] [ebp-4h]

  *(_DWORD *)(this + 320) = sub_491080(*(_DWORD *)(this + 316));
  if ( !*(_DWORD *)(this + 320) )
  {
    LOG_ERR("CPlayer::_Create() Invalid Map or Tile. (map:%d)", *(_DWORD *)(this + 316));
LABEL_10:
    BitReset((volatile signed __int32 *)(this + 20), 1u);
    return 0;
  }
  if ( !CPlayer::Add(this) )
    goto LABEL_10;
  Src = CIOBuffer::Alloc();
  v39 = (char *)Src;
  *((_BYTE *)Src + 2) = 4;
  v40 = (unsigned __int16 *)(v39 + 4);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v38);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v36);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v38,
            v1) )
      break;
    v2 = (void *)sub_446090(v35, 0);
    v37 = *(volatile int **)(sub_420250(v2) + 4);
    CIOObject::AddRef(v37);
    (*(void (__thiscall **)(volatile int *, int))(*v37 + 84))(v37, this);
    if ( !CBase::IsDeleted(v37) )
      (*(void (__thiscall **)(volatile int *, unsigned __int16 **, _DWORD))(*v37 + 72))(v37, &v40, 0);
    CIOObject::Release(v37);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  v3 = unknown_libname_18(this + 1068);
  WritePacket(v39 + 3, "b", v3);
  *(_WORD *)v39 = (_WORD)v40 - (_WORD)v39;
  *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v39;
  CSocket::_CSocket(Src);
  v31 = *(_DWORD *)(this + 580);
  v30 = CChar::GetResist((_DWORD *)this, 4);
  v29 = CChar::GetResist((_DWORD *)this, 3);
  v28 = CChar::GetResist((_DWORD *)this, 2);
  v27 = CChar::GetResist((_DWORD *)this, 1);
  v4 = CChar::GetResist((_DWORD *)this, 0);
  v5 = CChar::GetMaxMagic(this, *(_DWORD *)(this + 544), *(_DWORD *)(this + 548), v4, v27, v28, v29, v30, v31);
  v26 = CChar::GetMinMagic(this, v5);
  v25 = CChar::GetMaxAttack((_DWORD *)this);
  v24 = CChar::GetMinAttack((_DWORD *)this);
  v23 = *(_DWORD *)(this + 476);
  v22 = *(_DWORD *)(this + 472);
  v21 = CChar::GetAbsorb((_DWORD *)this);
  v20 = CChar::GetDefense((_DWORD *)this, 0);
  v19 = CChar::GetDodge((_DWORD *)this);
  v6 = (_DWORD *)CChar::GetHit((_DWORD *)this);
  v18 = CChar::GetMaxMP(v6);
  v17 = *(_DWORD *)(this + 276);
  v16 = CChar::GetMaxHP((_DWORD *)this);
  v15 = *(_DWORD *)(this + 272);
  v14 = Char::GetDex((_DWORD *)this);
  v13 = CChar::GetWis((_DWORD *)this);
  v12 = CChar::GetInt((_DWORD *)this);
  v11 = CChar::GetHth((_DWORD *)this);
  v7 = CChar::GetStr((_DWORD *)this);
  CPlayer::Write(
    this,
    66,
    "bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd",
    *(_DWORD *)(this + 464),
    &::Src,
    *(_DWORD *)(this + 536),
    *(_DWORD *)(this + 468),
    v7,
    v11,
    v12,
    v13,
    v14,
    v15,
    v16,
    v17,
    v18,
    v19,
    v20,
    v21,
    v22,
    v23,
    v24,
    v25,
    v26);
  BitSet((volatile signed __int32 *)(this + 20), 2u);
  v34 = *(_DWORD **)(this + 336);
  v32 = v34[83];
  v8 = CCalendar::GetTime();
  CPlayer::Write((int)v34, 27, "wdd", v8, v32);
  v9 = sub_493EB0((char *)&unk_4E2758 + 60 * MEMORY[0x13C]);
  CPlayer::Write(0, 22, "bb", v9);
  return 1;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);
// 458210: using guessed type int __thiscall sub_458210(_DWORD, _DWORD);
// 458240: using guessed type int __thiscall sub_458240(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 491080: using guessed type _DWORD __cdecl sub_491080(_DWORD);
// 493EB0: using guessed type int __thiscall sub_493EB0(_DWORD);

//----- (00458210) --------------------------------------------------------
int __thiscall CChar::GetMinMagic(_DWORD *this)
{
  return this[34] + this[58] * this[34] / 100;
}

//----- (00458240) --------------------------------------------------------
int __thiscall CChar::GetMaxMagic(_DWORD *this)
{
  return this[35] + this[59] * this[35] / 100;
}

//----- (00458270) --------------------------------------------------------
void __thiscall CPlayer::GameStart(int this)
{
  int v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  __time32_t v6; // eax
  int v7; // eax
  CIOBuffer *v9; // [esp+4h] [ebp-4h]

  CChar::Lock(this);
  sub_491360(this, this + 324);
  v1 = CPlayer::GetGuildName(this, *(_DWORD *)(this + 480), *(_DWORD *)(this + 1112));
  v2 = CPlayer::GetGuildClassTitle(this, v1);
  CPlayer::Write(
    this,
    50,
    "dsbdddwdmbbIssdbd",
    *(_DWORD *)(this + 28),
    this + 32,
    *(_DWORD *)(this + 460) + 128,
    *(_DWORD *)(this + 332),
    *(_DWORD *)(this + 336),
    *(_DWORD *)(this + 340),
    *(_DWORD *)(this + 348),
    *(_DWORD *)(this + 280),
    this + 1052,
    14,
    *(_DWORD *)(this + 556),
    *(_DWORD *)(this + 560),
    *(_DWORD *)(this + 288),
    *(_DWORD *)(this + 292),
    v2);
  v3 = CPlayer::GetGuildName(this, *(_DWORD *)(this + 480), *(_DWORD *)(this + 1112));
  v4 = CPlayer::GetGuildClassTitle(this, v3);
  v9 = (CIOBuffer *)sub_44FCE0(
                      50,
                      "dsbdddwdmbbIssdbd",
                      *(_DWORD *)(this + 28),
                      this + 32,
                      *(_DWORD *)(this + 460),
                      *(_DWORD *)(this + 332),
                      *(_DWORD *)(this + 336),
                      *(_DWORD *)(this + 340),
                      *(_DWORD *)(this + 348),
                      *(_DWORD *)(this + 280),
                      this + 1052,
                      14,
                      *(_DWORD *)(this + 556),
                      *(_DWORD *)(this + 560),
                      *(_DWORD *)(this + 288),
                      *(_DWORD *)(this + 292),
                      v4);
  sub_493390(this, this + 324, v9);
  CIOBuffer::Release(v9);
  BitSet((volatile signed __int32 *)(this + 20), 3u);
  v5 = CPlayer::IsPCBang((_DWORD *)this);
  CPlayer::Write(this, 28, "b", v5 != 0);
  CChar::Unlock(this);
  if ( !CChar::IsGState((_DWORD *)this, 2) )
  {
    CChar::AddGState((volatile LONG *)this, 0x2000);
    *(_DWORD *)(this + 1448) = GetTickCount() + 10000;
  }
  if ( (dword_4E1178 & 0x40) != 0 && dword_4E1FF4 > time(0) )
  {
    v6 = time(0);
    v7 = CBuff::CreateBuff(dword_4E1FF8, dword_4E1FF4 - v6, 0, this);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 180))(this, v7);
  }
  CDBSocket::Write(70, "dd", *(_DWORD *)(this + 28), *(_DWORD *)(this + 452));
  if ( (dword_4E1174[0] & 0x40) != 0 )
    CDBSocket::Write(29, "db", *(_DWORD *)(this + 452), 3);
  if ( (*(_WORD *)dword_4E1174 & 0x400) != 0 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1396));
    sub_471BE0(this + 1428);
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1396));
    CDBSocket::Write(30, "dbd", *(_DWORD *)(this + 452), 2, *(_DWORD *)(this + 452));
  }
}
// 4584F2: variable 'this' is possibly undefined
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46ACD0: using guessed type int __thiscall CPlayer::GetGuildName(_DWORD, _DWORD, _DWORD);
// 46AD70: using guessed type int __thiscall CPlayer::GetGuildClassTitle(_DWORD, _DWORD);
// 471BE0: using guessed type int __thiscall sub_471BE0(_DWORD);
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);
// 493390: using guessed type _DWORD __stdcall sub_493390(_DWORD, _DWORD, _DWORD);
// 4E1178: using guessed type int dword_4E1178;
// 4E1FF4: using guessed type int dword_4E1FF4;
// 4E1FF8: using guessed type int dword_4E1FF8;

//----- (004585B0) --------------------------------------------------------
void __thiscall CPlayer::GameRestart(int this)
{
  int v1; // eax

  CBase::Delete((char *)this);
  CSocket::Lock(*(_DWORD *)(this + 1676));
  if ( *(_DWORD *)(*(_DWORD *)(this + 1676) + 120) != this )
    EBREAK();
  *(_DWORD *)(*(_DWORD *)(this + 1676) + 120) = 0;
  CSocket::Unlock(*(_DWORD *)(this + 1676));
  BitReset((volatile signed __int32 *)(*(_DWORD *)(this + 1676) + 108), 4u);
  BitReset((volatile signed __int32 *)(*(_DWORD *)(this + 1676) + 108), 3u);
  v1 = CSocket::Id(*(_DWORD *)(this + 1676), *(_DWORD *)(*(_DWORD *)(this + 1676) + 152));
  CDBSocket::Write(33, "dd", v1);
  CIOObject::Release((CIOObject *)this, (volatile int *)(this + 440));
}
// 4327C0: using guessed type int __thiscall Concurrency::details::_CancellationTokenCallback<_lambda_bd6029e2426d7ec37458070853043c08_>::_Exec(_DWORD);
// 4327E0: using guessed type int __thiscall Concurrency::details::_CancellationTokenCallback<_lambda_bd6029e2426d7ec37458070853043c08_>::_Exec(_DWORD);
// 458680: using guessed type int __thiscall sub_458680(_DWORD, _DWORD);

//----- (00458680) --------------------------------------------------------
int __thiscall CSocket::Id(_DWORD *this)
{
  return this[70];
}

//----- (004586A0) --------------------------------------------------------
void __thiscall CPlayer::SaveAllProperty(int this, int a2)
{
  int v3; // [esp+4h] [ebp-4h]

  *(_DWORD *)(this + 1440) = 0;
  CDBSocket::Write(
    2,
    "dbbwIbbbbbbwwwwbbddddb",
    *(_DWORD *)(this + 452),
    *(_DWORD *)(this + 60),
    *(_DWORD *)(this + 464),
    *(_DWORD *)(this + 468),
    *(_DWORD *)(this + 472),
    *(_DWORD *)(this + 476),
    *(_DWORD *)(this + 536),
    *(_DWORD *)(this + 64),
    *(_DWORD *)(this + 68),
    *(_DWORD *)(this + 72),
    *(_DWORD *)(this + 76),
    *(_DWORD *)(this + 80),
    *(_DWORD *)(this + 272),
    *(_DWORD *)(this + 276),
    *(_DWORD *)(this + 544),
    *(_DWORD *)(this + 548),
    *(_DWORD *)(this + 552),
    *(_DWORD *)(this + 316),
    *(_DWORD *)(this + 332),
    *(_DWORD *)(this + 336),
    *(_DWORD *)(this + 340),
    *(_DWORD *)(this + 580),
    a2);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  if ( !a2 && *(_DWORD *)(this + 1108) )
    CItemTransform::SaveInfo(*(_DWORD **)(this + 1108), 0);
  v3 = *(_DWORD *)(this + 1344);
  *(_DWORD *)(this + 1344) = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  if ( v3 )
    CPlayer::MLMAccumFee(v3);
}
// 467400: using guessed type _DWORD __stdcall sub_467400(_DWORD);

//----- (00458800) --------------------------------------------------------
void __cdecl CPlayer::UpdateProperty(_DWORD *a1, int a2, int a3, __int64 a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  _DWORD *v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // ecx
  int v16; // ecx
  int v17; // eax
  int v18; // ecx
  int v19; // edx
  int v20; // [esp-10h] [ebp-A8h]
  int v21; // [esp-Ch] [ebp-A4h]
  int v22; // [esp-Ch] [ebp-A4h]
  int v23; // [esp-8h] [ebp-A0h]
  int v24; // [esp-8h] [ebp-A0h]
  int v25; // [esp-8h] [ebp-A0h]
  int v26; // [esp-4h] [ebp-9Ch]
  int v27; // [esp-4h] [ebp-9Ch]
  int v28; // [esp-4h] [ebp-9Ch]
  int v29; // [esp-4h] [ebp-9Ch]
  _DWORD *v30; // [esp+0h] [ebp-98h]
  int v31; // [esp+0h] [ebp-98h]
  int v32; // [esp+0h] [ebp-98h]
  _DWORD *v33; // [esp+4h] [ebp-94h]
  int v34; // [esp+4h] [ebp-94h]
  int v35; // [esp+14h] [ebp-84h]
  int v36; // [esp+18h] [ebp-80h]
  int v37; // [esp+1Ch] [ebp-7Ch]
  int v38; // [esp+20h] [ebp-78h]
  CIOObject *v39; // [esp+30h] [ebp-68h]
  volatile int *v40; // [esp+38h] [ebp-60h]
  __int64 v41; // [esp+40h] [ebp-58h]
  int v42; // [esp+5Ch] [ebp-3Ch]
  int v43; // [esp+64h] [ebp-34h]
  int v44; // [esp+68h] [ebp-30h]
  int v45; // [esp+70h] [ebp-28h]
  int v46; // [esp+7Ch] [ebp-1Ch]
  int v47; // [esp+80h] [ebp-18h]
  int v48; // [esp+84h] [ebp-14h]
  int v49; // [esp+8Ch] [ebp-Ch]

  switch ( a2 )
  {
    case 0:
      if ( a3 )
      {
        v4 = CChar::GetStr(a1);
        a1[30] -= 15 * v4 / 54;
        a1[32] -= (11 * v4 - 80) / 30;
        a1[33] -= (8 * v4 - 25) / 15;
        a1[16] += a4;
        v49 = CChar::GetStr(a1);
        a1[30] += 15 * v49 / 54;
        a1[32] += (11 * v49 - 80) / 30;
        a1[33] += (8 * v49 - 25) / 15;
        v26 = CChar::GetMaxAttack(a1);
        v23 = CChar::GetMinAttack(a1);
        v5 = CChar::GetHit(a1);
        CPlayer::Write((int)a1, 69, "bbwww", 0, v49, v5, v23, v26);
      }
      break;
    case 1:
      if ( a3 )
      {
        v46 = dword_4D6A10[a1[115]];
        v6 = CChar::GetHth(a1);
        a1[21] -= 2 * v6 * v6 / v46;
        a1[44] -= v6 / 9;
        v48 = a1[17];
        a1[17] = a4 + v48;
        v47 = CChar::GetHth(a1);
        a1[21] += 2 * v47 * v47 / v46;
        a1[44] += v47 / 9;
        sub_47FC50(a1 + 156, 30, 2 * v48 * v48 / v46, 2 * a1[17] * a1[17] / v46);
        v27 = CChar::GetResist(a1, 4);
        v7 = CChar::GetMaxHP(a1);
        CPlayer::Write((int)a1, 69, "bbwww", 1, v47, a1[68], v7, v27);
        CPlayer::UpdatePartyMember(7);
      }
      break;
    case 2:
      if ( a3 )
      {
        v8 = CChar::GetInt(a1);
        a1[34] -= (7 * v8 - 20) / 12;
        a1[35] -= 7 * v8 / 12;
        a1[40] -= v8 / 9;
        a1[41] -= v8 / 9;
        a1[42] -= v8 / 9;
        a1[18] += a4;
        v45 = CChar::GetInt(a1);
        a1[34] += (7 * v45 - 20) / 12;
        a1[35] += 7 * v45 / 12;
        a1[40] += v45 / 9;
        a1[41] += v45 / 9;
        a1[42] += v45 / 9;
        v28 = CChar::GetResist(a1, 2);
        v24 = CChar::GetResist(a1, 1);
        v21 = CChar::GetResist(a1, 0);
        v20 = CChar::GetMaxMagic(a1);
        v9 = CChar::GetMinMagic(a1);
        CPlayer::Write((int)a1, 69, "bbwwwww", 2, v45, v9, v20, v21, v24, v28);
      }
      break;
    case 3:
      if ( a3 )
      {
        v43 = dword_4D6A1C[a1[115]];
        v10 = CChar::GetWis(a1);
        a1[22] -= v10 + 2 * v10 * v10 / v43;
        a1[34] -= v10 / 7;
        a1[35] -= 14 * v10 / 45;
        a1[43] -= v10 / 9;
        a1[19] += a4;
        v44 = CChar::GetWis(a1);
        a1[22] += v44 + 2 * v44 * v44 / v43;
        a1[34] += v44 / 7;
        a1[35] += 14 * v44 / 45;
        a1[43] += v44 / 9;
        v11 = (_DWORD *)CChar::GetResist(a1, 3);
        v12 = CChar::GetMaxMP(v11);
        CPlayer::Write((int)a1, 69, "bbwww", 3, v44, a1[69], v12);
      }
      break;
    case 4:
      if ( a3 )
      {
        v13 = Char::GetDex(a1);
        a1[30] -= v13 / 8;
        a1[31] -= v13 / 3;
        a1[32] -= (v13 - 5) / 11;
        a1[33] -= 18 * v13 / 77;
        a1[20] += a4;
        v42 = Char::GetDex(a1);
        a1[30] += v42 / 8;
        a1[31] += v42 / 3;
        a1[32] += (v42 - 5) / 11;
        a1[33] += 18 * v42 / 77;
        v29 = CChar::GetMaxAttack(a1);
        v25 = CChar::GetMinAttack(a1);
        v22 = CChar::GetDodge(a1);
        v14 = CChar::GetHit(a1);
        CPlayer::Write((int)a1, 69, "bbwwww", 4, v42, v14, v22, v25, v29);
      }
      break;
    case 7:
      if ( a3 )
      {
        a1[68] += a4;
        if ( CChar::GetMaxHP(a1) >= a1[68] )
          v38 = a1[68];
        else
          v38 = CChar::GetMaxHP(a1);
        a1[68] = v38;
      }
      else
      {
        a1[68] -= a4;
        if ( (int)a1[68] >= 0 )
          v37 = a1[68];
        else
          v37 = 0;
        a1[68] = v37;
      }
      CPlayer::Write((int)a1, 69, "bw", 7, a1[68]);
      CPlayer::UpdatePartyMember(7);
      break;
    case 8:
      if ( a3 )
      {
        a1[69] += a4;
        if ( CChar::GetMaxMP(v30) >= a1[69] )
          v36 = a1[69];
        else
          v36 = CChar::GetMaxMP(v33);
        a1[69] = v36;
      }
      else
      {
        a1[69] -= a4;
        if ( (int)a1[69] >= 0 )
          v35 = a1[69];
        else
          v35 = 0;
        a1[69] = v35;
      }
      CPlayer::Write((int)a1, 69, "bw", 8, a1[69]);
      break;
    case 23:
      if ( a3 )
        v15 = a4 + a1[136];
      else
        v15 = a1[136] - a4;
      a1[136] = v15;
      CPlayer::Write((int)a1, 69, "bw", 23, a1[136]);
      break;
    case 24:
      if ( a3 )
        v16 = a4 + a1[137];
      else
        v16 = a1[137] - a4;
      a1[137] = v16;
      CPlayer::Write((int)a1, 69, "bw", 24, a1[137]);
      break;
    case 25:
      v41 = a4;
      if ( a3 )
      {
        if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
          v41 = 2 * a4;
        *((_QWORD *)a1 + 59) += v41;
        while ( *((_QWORD *)a1 + 59) >= __SPAIR64__(dword_4D66F4[2 * a1[15]], dword_4D66F0[2 * a1[15]]) )
        {
          *((_QWORD *)a1 + 59) -= __PAIR64__(dword_4D66F4[2 * a1[15]], dword_4D66F0[2 * a1[15]]);
          CPlayer::LevelUp(a1);
        }
        CPlayer::Write((int)a1, 69, &off_4BAC50, 25, a1[118], a1[119], v41);
      }
      else
      {
        if ( *((_QWORD *)a1 + 59) >= a4 )
        {
          *((_QWORD *)a1 + 59) -= a4;
        }
        else
        {
          v41 = *((_QWORD *)a1 + 59);
          *((_QWORD *)a1 + 59) = 0i64;
        }
        CPlayer::Write((int)a1, 69, &off_4BAC50, 25, a1[118], a1[119], -v41);
      }
      break;
    case 26:
      if ( a3 )
      {
        a1[21] -= 52 * a1[15] / 3;
        a1[22] -= 8 * a1[15] + 140;
        a1[32] -= 7 * a1[15] / 10;
        a1[33] -= a1[15];
        a1[15] += a4;
        a1[21] += 52 * a1[15] / 3;
        a1[22] += 8 * a1[15] + 140;
        a1[32] += 7 * a1[15] / 10;
        a1[33] += a1[15];
        a1[68] = CChar::GetMaxHP(a1);
        a1[69] = CChar::GetMaxMP(v30);
        CPlayer::Write((int)a1, 69, "bb", 26, a1[15]);
        CPlayer::Write((int)a1, 69, "bww", 5, a1[68], a1[68]);
        CPlayer::Write((int)a1, 69, "bww", 6, a1[69], a1[69]);
        v31 = CChar::GetMaxAttack(a1);
        v17 = CChar::GetMinAttack(a1);
        CPlayer::Write((int)a1, 69, "bww", 27, v17, v31);
        CChar::WriteInSight((int)a1, 73, "db", a1[7], 3);
        CPlayer::UpdatePartyMember(7);
        CPlayer::UpdatePartyMember(26);
        v40 = (volatile int *)CPlayer::GetGuild(a1);
        if ( v40 )
        {
          CGuild::SetMemberLelvelUp((int)(a1 + 8), a1[15]);
          CIOObject::Release((CIOObject *)v40, v40 + 10);
        }
      }
      break;
    case 30:
      if ( a3 )
        v18 = a4 + a1[117];
      else
        v18 = a1[117] - a4;
      a1[117] = v18;
      CPlayer::Write((int)a1, 69, "bw", 30, a1[117]);
      v39 = (CIOObject *)CPlayer::GetGuild(a1);
      if ( v39 )
      {
        CGuild::SetPointADD(v39, (int)a1, a4, a3);
        CIOObject::Release(v39, (volatile int *)v39 + 10);
      }
      break;
    case 35:
      if ( a3 )
      {
        a1[145] += a4;
        if ( a1[145] >= dword_4D66AC[0] )
          v34 = dword_4D66AC[0];
        else
          v34 = a1[145];
        a1[145] = v34;
      }
      else
      {
        a1[145] -= a4;
        if ( (int)a1[145] <= 0 )
          v32 = 0;
        else
          v32 = a1[145];
        a1[145] = v32;
      }
      CPlayer::Write((int)a1, 69, "bd", 35, a1[145]);
      break;
    case 38:
      if ( a3 )
        v19 = a4 + a1[78];
      else
        v19 = a1[78] - a4;
      a1[78] = v19;
      break;
    default:
      return;
  }
}
// 459082: variable 'v30' is possibly undefined
// 459095: variable 'v33' is possibly undefined
// 45CC00: using guessed type int __thiscall sub_45CC00(_DWORD);
// 45FEB0: using guessed type _DWORD __stdcall CPlayer::UpdatePartyMember(_DWORD);
// 46AAD0: using guessed type int __thiscall CPlayer::GetGuild(_DWORD);
// 47FC50: using guessed type _DWORD sub_47FC50(_DWORD, _DWORD, ...);
// 4BAC50: using guessed type void *off_4BAC50;
// 4D66F0: using guessed type int dword_4D66F0[];

//----- (00459840) --------------------------------------------------------
void __cdecl CPlayer::UpdatePrtyPt(_DWORD *a1, int a2, int a3, int a4, int a5)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // edx
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // ecx
  int v19; // eax
  int v20; // edx
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // ecx
  int v25; // eax
  int v26; // edx
  int v27; // eax
  int v28; // eax
  int v29; // eax
  int v30; // ecx
  int v31; // eax
  int v32; // edx
  int v33; // eax
  int v34; // eax
  int v35; // eax
  int v36; // ecx
  int v37; // eax
  int v38; // edx
  int v39; // eax
  int v40; // eax
  int v41; // eax
  int v42; // ecx
  int v43; // eax
  int v44; // edx
  int v45; // edx
  int v46; // [esp-10h] [ebp-D0h]
  int v47; // [esp-10h] [ebp-D0h]
  int v48; // [esp-Ch] [ebp-CCh]
  int v49; // [esp-Ch] [ebp-CCh]
  int v50; // [esp-Ch] [ebp-CCh]
  int v51; // [esp-8h] [ebp-C8h]
  int v52; // [esp-8h] [ebp-C8h]
  int v53; // [esp-8h] [ebp-C8h]
  int v54; // [esp-8h] [ebp-C8h]
  int v55; // [esp-4h] [ebp-C4h]
  int v56; // [esp-4h] [ebp-C4h]
  int v57; // [esp-4h] [ebp-C4h]
  int v58; // [esp-4h] [ebp-C4h]
  int v59; // [esp-4h] [ebp-C4h]
  int v60; // [esp-4h] [ebp-C4h]
  _DWORD *v61; // [esp+0h] [ebp-C0h]
  int v62; // [esp+0h] [ebp-C0h]
  int v63; // [esp+4h] [ebp-BCh]
  int v64; // [esp+8h] [ebp-B8h]
  int v65; // [esp+Ch] [ebp-B4h]
  int v66; // [esp+10h] [ebp-B0h]
  int v67; // [esp+14h] [ebp-ACh]
  int v68; // [esp+74h] [ebp-4Ch]
  int v69; // [esp+74h] [ebp-4Ch]
  int v70; // [esp+7Ch] [ebp-44h]
  int v71; // [esp+7Ch] [ebp-44h]
  int v72; // [esp+84h] [ebp-3Ch]
  int v73; // [esp+84h] [ebp-3Ch]
  int v74; // [esp+8Ch] [ebp-34h]
  int v75; // [esp+90h] [ebp-30h]
  int v76; // [esp+98h] [ebp-28h]
  int v77; // [esp+98h] [ebp-28h]
  int v78; // [esp+9Ch] [ebp-24h]
  int v79; // [esp+9Ch] [ebp-24h]
  int v80; // [esp+A4h] [ebp-1Ch]
  int v81; // [esp+A8h] [ebp-18h]
  int v82; // [esp+ACh] [ebp-14h]
  int v83; // [esp+ACh] [ebp-14h]
  int v84; // [esp+B4h] [ebp-Ch]
  int v85; // [esp+B4h] [ebp-Ch]

  switch ( a2 )
  {
    case 0:
      v84 = CChar::GetStr(a1);
      a1[30] -= 15 * v84 / 54;
      a1[32] -= (11 * v84 - 80) / 30;
      a1[33] -= (8 * v84 - 25) / 15;
      if ( a3 )
        a1[23] += a4;
      else
        a1[23] -= a4;
      v85 = CChar::GetStr(a1);
      a1[30] += 15 * v85 / 54;
      a1[32] += (11 * v85 - 80) / 30;
      a1[33] += (8 * v85 - 25) / 15;
      v55 = CChar::GetMaxAttack(a1);
      v51 = CChar::GetMinAttack(a1);
      v5 = CChar::GetHit(a1);
      CPlayer::Write((int)a1, 69, "bbwww", 0, v85, v5, v51, v55);
      break;
    case 1:
      v82 = CChar::GetHth(a1);
      v81 = dword_4D6A10[a1[115]];
      if ( a3 )
      {
        a1[21] -= 2 * v82 * v82 / v81;
        a1[44] -= v82 / 9;
        a1[24] += a4;
        v83 = CChar::GetHth(a1);
        a1[21] += 2 * v83 * v83 / v81;
        a1[44] += v83 / 9;
        v80 = CChar::GetMaxHP(a1);
        if ( a4 < 0 )
        {
          if ( a1[68] >= v80 )
            v67 = v80;
          else
            v67 = a1[68];
          a1[68] = v67;
        }
      }
      else
      {
        a1[21] -= 2 * v82 * v82 / v81;
        a1[44] -= v82 / 9;
        a1[24] -= a4;
        v83 = CChar::GetHth(a1);
        a1[21] += 2 * v83 * v83 / v81;
        a1[44] += v83 / 9;
        v80 = CChar::GetMaxHP(a1);
        if ( a4 > 0 )
        {
          if ( a1[68] >= v80 )
            v66 = v80;
          else
            v66 = a1[68];
          a1[68] = v66;
        }
      }
      v6 = CChar::GetResist(a1, 4);
      CPlayer::Write((int)a1, 69, "bbwww", 1, v83, a1[68], v80, v6);
      CPlayer::UpdatePartyMember(7);
      break;
    case 2:
      v78 = CChar::GetInt(a1);
      a1[34] -= (7 * v78 - 20) / 12;
      a1[35] -= 7 * v78 / 12;
      a1[40] -= v78 / 9;
      a1[41] -= v78 / 9;
      a1[42] -= v78 / 9;
      if ( a3 )
        a1[25] += a4;
      else
        a1[25] -= a4;
      v79 = CChar::GetInt(a1);
      a1[34] += (7 * v79 - 20) / 12;
      a1[35] += 7 * v79 / 12;
      a1[40] += v79 / 9;
      a1[41] += v79 / 9;
      a1[42] += v79 / 9;
      v56 = CChar::GetResist(a1, 2);
      v52 = CChar::GetResist(a1, 1);
      v48 = CChar::GetResist(a1, 0);
      v46 = CChar::GetMaxMagic(a1);
      v7 = CChar::GetMinMagic(a1);
      CPlayer::Write((int)a1, 69, "bbwwwww", 2, v79, v7, v46, v48, v52, v56);
      break;
    case 3:
      v76 = CChar::GetWis(a1);
      v74 = dword_4D6A1C[a1[115]];
      if ( a3 )
      {
        a1[22] -= v76 + 2 * v76 * v76 / v74;
        a1[34] -= v76 / 7;
        a1[35] -= 14 * v76 / 45;
        a1[43] -= v76 / 9;
        a1[26] += a4;
        v77 = CChar::GetWis(a1);
        a1[22] += v77 + 2 * v77 * v77 / v74;
        a1[34] += v77 / 7;
        a1[35] += 14 * v77 / 45;
        a1[43] += v77 / 9;
        v75 = CChar::GetMaxMP(v61);
        if ( a4 < 0 )
        {
          if ( a1[69] >= v75 )
            v65 = v75;
          else
            v65 = a1[69];
          a1[69] = v65;
        }
      }
      else
      {
        a1[22] -= v76 + 2 * v76 * v76 / v74;
        a1[34] -= v76 / 7;
        a1[35] -= 14 * v76 / 45;
        a1[43] -= v76 / 9;
        a1[26] -= a4;
        v77 = CChar::GetWis(a1);
        a1[22] += v77 + 2 * v77 * v77 / v74;
        a1[34] += v77 / 7;
        a1[35] += 14 * v77 / 45;
        a1[43] += v77 / 9;
        v75 = CChar::GetMaxMP(v61);
        if ( a4 > 0 )
        {
          if ( a1[69] >= v75 )
            v64 = v75;
          else
            v64 = a1[69];
          a1[69] = v64;
        }
      }
      v8 = CChar::GetResist(a1, 3);
      CPlayer::Write((int)a1, 69, "bbwww", 3, v77, a1[69], v75, v8);
      break;
    case 4:
      v72 = Char::GetDex(a1);
      a1[30] -= v72 / 8;
      a1[31] -= v72 / 3;
      a1[32] -= (v72 - 5) / 11;
      a1[33] -= 18 * v72 / 77;
      if ( a3 )
        a1[27] += a4;
      else
        a1[27] -= a4;
      v73 = Char::GetDex(a1);
      a1[30] += v73 / 8;
      a1[31] += v73 / 3;
      a1[32] += (v73 - 5) / 11;
      a1[33] += 18 * v73 / 77;
      v57 = CChar::GetMaxAttack(a1);
      v53 = CChar::GetMinAttack(a1);
      v49 = CChar::GetDodge(a1);
      v9 = CChar::GetHit(a1);
      CPlayer::Write((int)a1, 69, "bbwwww", 4, v73, v9, v49, v53, v57);
      break;
    case 5:
      if ( a3 )
      {
        a1[28] += a4;
        v70 = CChar::GetMaxHP(a1);
        CPlayer::Write((int)a1, 69, "bww", 5, a1[68], v70);
      }
      else
      {
        a1[28] -= a4;
        v71 = CChar::GetMaxHP(a1);
        if ( a1[68] >= v71 )
          v63 = v71;
        else
          v63 = a1[68];
        a1[68] = v63;
        CPlayer::Write((int)a1, 69, "bww", 5, a1[68], v71);
      }
      CPlayer::UpdatePartyMember(7);
      break;
    case 6:
      if ( a3 )
      {
        a1[29] += a4;
        v68 = CChar::GetMaxMP(v61);
        CPlayer::Write((int)a1, 69, "bww", 6, a1[69], v68);
      }
      else
      {
        a1[29] -= a4;
        v69 = CChar::GetMaxMP(v61);
        if ( a1[69] >= v69 )
          v62 = v69;
        else
          v62 = a1[69];
        a1[69] = v62;
        CPlayer::Write((int)a1, 69, "bww", 6, a1[69], v69);
      }
      break;
    case 9:
      if ( a3 )
        v10 = a4 + a1[30];
      else
        v10 = a1[30] - a4;
      a1[30] = v10;
      v11 = CChar::GetHit(a1);
      CPlayer::Write((int)a1, 69, "bw", 9, v11);
      break;
    case 10:
      if ( a3 )
        v12 = a4 + a1[31];
      else
        v12 = a1[31] - a4;
      a1[31] = v12;
      v13 = CChar::GetDodge(a1);
      CPlayer::Write((int)a1, 69, "bw", 10, v13);
      break;
    case 11:
      if ( a3 )
        v14 = a4 + a1[32];
      else
        v14 = a1[32] - a4;
      a1[32] = v14;
      v15 = CChar::GetMinAttack(a1);
      CPlayer::Write((int)a1, 69, "bw", 11, v15);
      break;
    case 12:
      if ( a3 )
        v16 = a4 + a1[33];
      else
        v16 = a1[33] - a4;
      a1[33] = v16;
      v17 = CChar::GetMaxAttack(a1);
      CPlayer::Write((int)a1, 69, "bw", 12, v17);
      break;
    case 13:
      if ( a3 )
        v20 = a4 + a1[34];
      else
        v20 = a1[34] - a4;
      a1[34] = v20;
      v21 = CChar::GetMinMagic(a1);
      CPlayer::Write((int)a1, 69, "bw", 13, v21);
      break;
    case 14:
      if ( a3 )
        v22 = a4 + a1[35];
      else
        v22 = a1[35] - a4;
      a1[35] = v22;
      v23 = CChar::GetMinMagic(a1);
      CPlayer::Write((int)a1, 69, "bw", 13, v23);
      break;
    case 15:
      if ( a3 )
      {
        a1[36] += a4;
        v26 = a5 + a1[37];
      }
      else
      {
        a1[36] -= a4;
        v26 = a1[37] - a5;
      }
      a1[37] = v26;
      v27 = CChar::GetDefense(a1, 0);
      CPlayer::Write((int)a1, 69, "bw", 15, v27);
      break;
    case 16:
      if ( a3 )
        v28 = a4 + a1[38];
      else
        v28 = a1[38] - a4;
      a1[38] = v28;
      v29 = CChar::GetAbsorb(a1);
      CPlayer::Write((int)a1, 69, "bw", 16, v29);
      break;
    case 17:
      if ( a3 )
        v30 = a4 + a1[39];
      else
        v30 = a1[39] - a4;
      a1[39] = v30;
      v31 = CChar::GetASpeed(a1);
      CPlayer::Write((int)a1, 69, "bw", 17, v31);
      break;
    case 18:
      if ( a3 )
        v32 = a4 + a1[40];
      else
        v32 = a1[40] - a4;
      a1[40] = v32;
      v33 = CChar::GetResist(a1, 0);
      CPlayer::Write((int)a1, 69, "bw", 18, v33);
      break;
    case 19:
      if ( a3 )
        v34 = a4 + a1[41];
      else
        v34 = a1[41] - a4;
      a1[41] = v34;
      v35 = CChar::GetResist(a1, 1);
      CPlayer::Write((int)a1, 69, "bw", 19, v35);
      break;
    case 20:
      if ( a3 )
        v36 = a4 + a1[42];
      else
        v36 = a1[42] - a4;
      a1[42] = v36;
      v37 = CChar::GetResist(a1, 2);
      CPlayer::Write((int)a1, 69, "bw", 20, v37);
      break;
    case 21:
      if ( a3 )
        v38 = a4 + a1[43];
      else
        v38 = a1[43] - a4;
      a1[43] = v38;
      v39 = CChar::GetResist(a1, 3);
      CPlayer::Write((int)a1, 69, "bw", 21, v39);
      break;
    case 22:
      if ( a3 )
        v40 = a4 + a1[44];
      else
        v40 = a1[44] - a4;
      a1[44] = v40;
      v41 = CChar::GetResist(a1, 4);
      CPlayer::Write((int)a1, 69, "bw", 22, v41);
      break;
    case 27:
      if ( a3 )
      {
        a1[32] += a4;
        v18 = a5 + a1[33];
      }
      else
      {
        a1[32] -= a4;
        v18 = a1[33] - a5;
      }
      a1[33] = v18;
      v58 = CChar::GetMaxAttack(a1);
      v19 = CChar::GetMinAttack(a1);
      CPlayer::Write((int)a1, 69, "bww", 27, v19, v58);
      break;
    case 28:
      if ( a3 )
      {
        a1[34] += a4;
        v24 = a5 + a1[35];
      }
      else
      {
        a1[34] -= a4;
        v24 = a1[35] - a5;
      }
      a1[35] = v24;
      v59 = CChar::GetMaxMagic(a1);
      v25 = CChar::GetMinMagic(a1);
      CPlayer::Write((int)a1, 69, "bww", 28, v25, v59);
      break;
    case 29:
      if ( a3 )
      {
        a1[40] += a4;
        a1[41] += a4;
        a1[42] += a4;
        a1[43] += a4;
        v42 = a4 + a1[44];
      }
      else
      {
        a1[40] -= a4;
        a1[41] -= a4;
        a1[42] -= a4;
        a1[43] -= a4;
        v42 = a1[44] - a4;
      }
      a1[44] = v42;
      v60 = CChar::GetResist(a1, 4);
      v54 = CChar::GetResist(a1, 3);
      v50 = CChar::GetResist(a1, 2);
      v47 = CChar::GetResist(a1, 1);
      v43 = CChar::GetResist(a1, 0);
      CPlayer::Write((int)a1, 69, "bwwwww", 29, v43, v47, v50, v54, v60);
      break;
    case 31:
      if ( a3 )
        v44 = a4 + a1[45];
      else
        v44 = a1[45] - a4;
      a1[45] = v44;
      break;
    case 36:
      if ( a3 )
        v45 = a4 + a1[46];
      else
        v45 = a1[46] - a4;
      a1[46] = v45;
      CPlayer::Write((int)a1, 69, "bw", 36, a1[46]);
      break;
    default:
      return;
  }
}
// 45A137: variable 'v61' is possibly undefined
// 45FEB0: using guessed type _DWORD __stdcall CPlayer::UpdatePartyMember(_DWORD);

//----- (0045B100) --------------------------------------------------------
void __cdecl CPlayer::UpdatePrtyPer(_DWORD *a1, int a2, int a3, int a4, int a5)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // edx
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // ecx
  int v19; // eax
  int v20; // edx
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // ecx
  int v25; // eax
  int v26; // edx
  int v27; // eax
  int v28; // eax
  int v29; // eax
  int v30; // ecx
  int v31; // ecx
  int v32; // ecx
  int v33; // eax
  int v34; // eax
  int v35; // [esp-10h] [ebp-C0h]
  int v36; // [esp-Ch] [ebp-BCh]
  int v37; // [esp-Ch] [ebp-BCh]
  int v38; // [esp-8h] [ebp-B8h]
  int v39; // [esp-8h] [ebp-B8h]
  int v40; // [esp-8h] [ebp-B8h]
  int v41; // [esp-4h] [ebp-B4h]
  int v42; // [esp-4h] [ebp-B4h]
  int v43; // [esp-4h] [ebp-B4h]
  int v44; // [esp-4h] [ebp-B4h]
  int v45; // [esp-4h] [ebp-B4h]
  _DWORD *v46; // [esp+0h] [ebp-B0h]
  int v47; // [esp+0h] [ebp-B0h]
  int v48; // [esp+4h] [ebp-ACh]
  int v49; // [esp+8h] [ebp-A8h]
  int v50; // [esp+Ch] [ebp-A4h]
  int v51; // [esp+10h] [ebp-A0h]
  int v52; // [esp+14h] [ebp-9Ch]
  int v53; // [esp+64h] [ebp-4Ch]
  int v54; // [esp+64h] [ebp-4Ch]
  int v55; // [esp+6Ch] [ebp-44h]
  int v56; // [esp+6Ch] [ebp-44h]
  int v57; // [esp+74h] [ebp-3Ch]
  int v58; // [esp+74h] [ebp-3Ch]
  int v59; // [esp+7Ch] [ebp-34h]
  int v60; // [esp+80h] [ebp-30h]
  int v61; // [esp+88h] [ebp-28h]
  int v62; // [esp+88h] [ebp-28h]
  int v63; // [esp+8Ch] [ebp-24h]
  int v64; // [esp+8Ch] [ebp-24h]
  int v65; // [esp+94h] [ebp-1Ch]
  int v66; // [esp+98h] [ebp-18h]
  int v67; // [esp+9Ch] [ebp-14h]
  int v68; // [esp+9Ch] [ebp-14h]
  int v69; // [esp+A4h] [ebp-Ch]
  int v70; // [esp+A4h] [ebp-Ch]

  switch ( a2 )
  {
    case 0:
      v69 = CChar::GetStr(a1);
      a1[30] -= 15 * v69 / 54;
      a1[32] -= (11 * v69 - 80) / 30;
      a1[33] -= (8 * v69 - 25) / 15;
      if ( a3 )
        a1[47] += a4;
      else
        a1[47] -= a4;
      v70 = CChar::GetStr(a1);
      a1[30] += 15 * v70 / 54;
      a1[32] += (11 * v70 - 80) / 30;
      a1[33] += (8 * v70 - 25) / 15;
      v41 = CChar::GetMaxAttack(a1);
      v38 = CChar::GetMinAttack(a1);
      v5 = CChar::GetHit(a1);
      CPlayer::Write((int)a1, 69, "bbwww", 0, v70, v5, v38, v41);
      break;
    case 1:
      v67 = CChar::GetHth(a1);
      v66 = dword_4D6A10[a1[115]];
      if ( a3 )
      {
        a1[21] -= 2 * v67 * v67 / v66;
        a1[44] -= v67 / 9;
        a1[48] += a4;
        v68 = CChar::GetHth(a1);
        a1[21] += 2 * v68 * v68 / v66;
        a1[44] += v68 / 9;
        v65 = CChar::GetMaxHP(a1);
        if ( a4 < 0 )
        {
          if ( a1[68] >= v65 )
            v52 = v65;
          else
            v52 = a1[68];
          a1[68] = v52;
        }
      }
      else
      {
        a1[21] -= 2 * v67 * v67 / v66;
        a1[44] -= v67 / 9;
        a1[48] -= a4;
        v68 = CChar::GetHth(a1);
        a1[21] += 2 * v68 * v68 / v66;
        a1[44] += v68 / 9;
        v65 = CChar::GetMaxHP(a1);
        if ( a4 > 0 )
        {
          if ( a1[68] >= v65 )
            v51 = v65;
          else
            v51 = a1[68];
          a1[68] = v51;
        }
      }
      v6 = CChar::GetResist(a1, 4);
      CPlayer::Write((int)a1, 69, "bbwww", 1, v68, a1[68], v65, v6);
      CPlayer::UpdatePartyMember(7);
      break;
    case 2:
      v63 = CChar::GetInt(a1);
      a1[34] -= (7 * v63 - 20) / 12;
      a1[35] -= 7 * v63 / 12;
      a1[40] -= v63 / 9;
      a1[41] -= v63 / 9;
      a1[42] -= v63 / 9;
      if ( a3 )
        a1[49] += a4;
      else
        a1[49] -= a4;
      v64 = CChar::GetInt(a1);
      a1[34] += (7 * v64 - 20) / 12;
      a1[35] += 7 * v64 / 12;
      a1[40] += v64 / 9;
      a1[41] += v64 / 9;
      a1[42] += v64 / 9;
      v42 = CChar::GetResist(a1, 2);
      v39 = CChar::GetResist(a1, 1);
      v36 = CChar::GetResist(a1, 0);
      v35 = CChar::GetMaxMagic(a1);
      v7 = CChar::GetMinMagic(a1);
      CPlayer::Write((int)a1, 69, "bbwwwww", 2, v64, v7, v35, v36, v39, v42);
      break;
    case 3:
      v61 = CChar::GetWis(a1);
      v59 = dword_4D6A1C[a1[115]];
      if ( a3 )
      {
        a1[22] -= v61 + 2 * v61 * v61 / v59;
        a1[34] -= v61 / 7;
        a1[35] -= 14 * v61 / 45;
        a1[43] -= v61 / 9;
        a1[50] += a4;
        v62 = CChar::GetWis(a1);
        a1[22] += v62 + 2 * v62 * v62 / v59;
        a1[34] += v62 / 7;
        a1[35] += 14 * v62 / 45;
        a1[43] += v62 / 9;
        v60 = CChar::GetMaxMP(v46);
        if ( a4 < 0 )
        {
          if ( a1[69] >= v60 )
            v50 = v60;
          else
            v50 = a1[69];
          a1[69] = v50;
        }
      }
      else
      {
        a1[22] -= v61 + 2 * v61 * v61 / v59;
        a1[34] -= v61 / 7;
        a1[35] -= 14 * v61 / 45;
        a1[43] -= v61 / 9;
        a1[50] -= a4;
        v62 = CChar::GetWis(a1);
        a1[22] += v62 + 2 * v62 * v62 / v59;
        a1[34] += v62 / 7;
        a1[35] += 14 * v62 / 45;
        a1[43] += v62 / 9;
        v60 = CChar::GetMaxMP(v46);
        if ( a4 > 0 )
        {
          if ( a1[69] >= v60 )
            v49 = v60;
          else
            v49 = a1[69];
          a1[69] = v49;
        }
      }
      v8 = CChar::GetResist(a1, 3);
      CPlayer::Write((int)a1, 69, "bbwww", 3, v62, a1[69], v60, v8);
      break;
    case 4:
      v57 = Char::GetDex(a1);
      a1[30] -= v57 / 8;
      a1[31] -= v57 / 3;
      a1[32] -= (v57 - 5) / 11;
      a1[33] -= 18 * v57 / 77;
      if ( a3 )
        a1[51] += a4;
      else
        a1[51] -= a4;
      v58 = Char::GetDex(a1);
      a1[30] += v58 / 8;
      a1[31] += v58 / 3;
      a1[32] += (v58 - 5) / 11;
      a1[33] += 18 * v58 / 77;
      v43 = CChar::GetMaxAttack(a1);
      v40 = CChar::GetMinAttack(a1);
      v37 = CChar::GetDodge(a1);
      v9 = CChar::GetHit(a1);
      CPlayer::Write((int)a1, 69, "bbwwww", 4, v58, v9, v37, v40, v43);
      break;
    case 5:
      if ( a3 )
      {
        a1[52] += a4;
        v55 = CChar::GetMaxHP(a1);
        CPlayer::Write((int)a1, 69, "bww", 5, a1[68], v55);
      }
      else
      {
        a1[52] -= a4;
        v56 = CChar::GetMaxHP(a1);
        if ( a1[68] >= v56 )
          v48 = v56;
        else
          v48 = a1[68];
        a1[68] = v48;
        CPlayer::Write((int)a1, 69, "bww", 5, a1[68], v56);
      }
      CPlayer::UpdatePartyMember(7);
      break;
    case 6:
      if ( a3 )
      {
        a1[53] += a4;
        v53 = CChar::GetMaxMP(v46);
        CPlayer::Write((int)a1, 69, "bww", 6, a1[69], v53);
      }
      else
      {
        a1[53] -= a4;
        v54 = CChar::GetMaxMP(v46);
        if ( a1[69] >= v54 )
          v47 = v54;
        else
          v47 = a1[69];
        a1[69] = v47;
        CPlayer::Write((int)a1, 69, "bww", 6, a1[69], v54);
      }
      CPlayer::UpdatePartyMember(8);
      break;
    case 9:
      if ( a3 )
        v10 = a4 + a1[54];
      else
        v10 = a1[54] - a4;
      a1[54] = v10;
      v11 = CChar::GetHit(a1);
      CPlayer::Write((int)a1, 69, "bw", 9, v11);
      break;
    case 10:
      if ( a3 )
        v12 = a4 + a1[55];
      else
        v12 = a1[55] - a4;
      a1[55] = v12;
      v13 = CChar::GetDodge(a1);
      CPlayer::Write((int)a1, 69, "bw", 10, v13);
      break;
    case 11:
      if ( a3 )
        v14 = a4 + a1[56];
      else
        v14 = a1[56] - a4;
      a1[56] = v14;
      v15 = CChar::GetMinAttack(a1);
      CPlayer::Write((int)a1, 69, "bw", 11, v15);
      break;
    case 12:
      if ( a3 )
        v16 = a4 + a1[57];
      else
        v16 = a1[57] - a4;
      a1[57] = v16;
      v17 = CChar::GetMaxAttack(a1);
      CPlayer::Write((int)a1, 69, "bw", 12, v17);
      break;
    case 13:
      if ( a3 )
        v20 = a4 + a1[58];
      else
        v20 = a1[58] - a4;
      a1[58] = v20;
      v21 = CChar::GetMinMagic(a1);
      CPlayer::Write((int)a1, 69, "bw", 13, v21);
      break;
    case 14:
      if ( a3 )
        v22 = a4 + a1[59];
      else
        v22 = a1[59] - a4;
      a1[59] = v22;
      v23 = CChar::GetMaxMagic(a1);
      CPlayer::Write((int)a1, 69, "bw", 14, v23);
      break;
    case 15:
      if ( a3 )
      {
        a1[60] += a4;
        v26 = a5 + a1[61];
      }
      else
      {
        a1[60] -= a4;
        v26 = a1[61] - a5;
      }
      a1[61] = v26;
      v27 = CChar::GetDefense(a1, 0);
      CPlayer::Write((int)a1, 69, "bw", 15, v27);
      break;
    case 16:
      if ( a3 )
        v28 = a4 + a1[62];
      else
        v28 = a1[62] - a4;
      a1[62] = v28;
      v29 = CChar::GetAbsorb(a1);
      CPlayer::Write((int)a1, 69, "bw", 16, v29);
      break;
    case 17:
      if ( a3 )
        v30 = a4 + a1[63];
      else
        v30 = a1[63] - a4;
      a1[63] = v30;
      CPlayer::Write((int)a1, 69, "bw", 17, a1[63]);
      break;
    case 27:
      if ( a3 )
      {
        a1[56] += a4;
        v18 = a5 + a1[57];
      }
      else
      {
        a1[56] -= a4;
        v18 = a1[57] - a5;
      }
      a1[57] = v18;
      v44 = CChar::GetMaxAttack(a1);
      v19 = CChar::GetMinAttack(a1);
      CPlayer::Write((int)a1, 69, "bww", 27, v19, v44);
      break;
    case 28:
      if ( a3 )
      {
        a1[58] += a4;
        v24 = a5 + a1[59];
      }
      else
      {
        a1[58] -= a4;
        v24 = a1[59] - a5;
      }
      a1[59] = v24;
      v45 = CChar::GetMaxMagic(a1);
      v25 = CChar::GetMinMagic(a1);
      CPlayer::Write((int)a1, 69, "bww", 28, v25, v45);
      break;
    case 31:
      if ( a3 )
        v31 = a4 + a1[64];
      else
        v31 = a1[64] - a4;
      a1[64] = v31;
      break;
    case 32:
      if ( a3 )
        v32 = a4 + a1[65];
      else
        v32 = a1[65] - a4;
      a1[65] = v32;
      CChar::WriteInSight((int)a1, 72, "dbw", a1[7], 32, a1[65]);
      break;
    case 33:
      if ( a3 )
        v33 = a4 + a1[66];
      else
        v33 = a1[66] - a4;
      a1[66] = v33;
      break;
    case 37:
      if ( a3 )
        v34 = a4 + a1[67];
      else
        v34 = a1[67] - a4;
      a1[67] = v34;
      break;
    default:
      return;
  }
}
// 45BA28: variable 'v46' is possibly undefined
// 45FEB0: using guessed type _DWORD __stdcall CPlayer::UpdatePartyMember(_DWORD);

//----- (0045C740) --------------------------------------------------------
void __thiscall CPlayer::Attack(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  int v4; // esi
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // [esp-Ch] [ebp-44h]
  int v14; // [esp-8h] [ebp-40h]
  int v15; // [esp-4h] [ebp-3Ch]
  int v16; // [esp+0h] [ebp-38h]
  unsigned int v17; // [esp+4h] [ebp-34h]
  unsigned int v18; // [esp+8h] [ebp-30h]
  int v20; // [esp+14h] [ebp-24h] BYREF
  int v21; // [esp+18h] [ebp-20h] BYREF
  int v22; // [esp+1Ch] [ebp-1Ch] BYREF
  int v23; // [esp+20h] [ebp-18h]
  int v24; // [esp+24h] [ebp-14h]
  unsigned int v25; // [esp+28h] [ebp-10h]
  DWORD v26; // [esp+2Ch] [ebp-Ch]
  CIOObject *v27; // [esp+30h] [ebp-8h]
  unsigned int v28; // [esp+34h] [ebp-4h]

  if ( CChar::IsNormal((int)this) && !CChar::IsGState(this, 4) && CPlayer::IsWState(this, 0) )
  {
    v27 = 0;
    if ( a2 )
    {
      if ( a2 == 1 )
        v27 = CMonster::FindMonster(a3);
    }
    else
    {
      v27 = sub_450810(a3);
    }
    if ( v27 )
    {
      if ( (*(int (__thiscall **)(_DWORD *, CIOObject *, _DWORD))(*this + 176))(this, v27, 0) )
      {
        v25 = CChar::GetASpeed(this);
        v28 = v25;
        v26 = GetTickCount();
        if ( v26 < this[362] )
          v28 -= this[362] - v26;
        if ( this[79] == *((_DWORD *)v27 + 79) && CChar::IsNormal((int)v27) )
        {
          this[362] = v25 + v26;
          CChar::SetDirection(this, *((_DWORD *)v27 + 83) - this[83], *((_DWORD *)v27 + 84) - this[84]);
          v22 = 0;
          v21 = 0;
          v20 = 0;
          v24 = 0;
          v23 = 0;
          v23 = (*(int (__thiscall **)(CIOObject *, _DWORD *))(*(_DWORD *)v27 + 148))(v27, this);
          if ( !v23 )
          {
            if ( CChar::CheckHit((int)this, v27, 0) )
            {
              if ( this[115] == 1 )
                v18 = 0;
              else
                v18 = v28 * (*(int (__thiscall **)(_DWORD *, CIOObject *))(*this + 168))(this, v27) / v25;
              v21 = v18;
              v3 = CChar::GetAttack(this);
              v24 = (*(int (__thiscall **)(CIOObject *, _DWORD *, unsigned int, int *, int *, int *, _DWORD))(*(_DWORD *)v27 + 72))(
                      v27,
                      this,
                      v28 * v3 / v25,
                      &v22,
                      &v20,
                      &v21,
                      0);
              if ( v24 )
              {
                if ( (this[70] & 0x7FF00000) != 0 )
                {
                  v4 = (int)this[70] < 0 ? 10 : 5;
                  if ( v4 > RandomBetween(0, 99) )
                  {
                    v17 = this[70] & 0x7FF00000;
                    if ( v17 > 0x1000000 )
                    {
                      if ( v17 == 0x2000000 )
                      {
                        v10 = CBuff::CreateBuff(116, 1, 5, v22 / 10);
                        (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v27 + 180))(v27, v10);
                        CChar::WriteInSight((int)this, 73, "db", a3, 34);
                      }
                      else if ( v17 == 0x4000000 )
                      {
                        v11 = CBuff::CreateBuff(7, 2, v16, 0x4000000);
                        (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v27 + 180))(v27, v11);
                        CChar::WriteInSight((int)this, 73, "db", a3, 35);
                      }
                    }
                    else
                    {
                      switch ( v17 )
                      {
                        case 0x1000000u:
                          v8 = CBuff::CreateBuff(116, 1, 5, 7 * v22 / 100);
                          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v27 + 180))(v27, v8);
                          v9 = CBuff::CreateBuff(117, 5, -10, -10);
                          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v27 + 180))(v27, v9);
                          CChar::WriteInSight((int)this, 73, "db", a3, 33);
                          break;
                        case 0x400000u:
                          v5 = CBuff::CreateBuff(116, 1, 5, v22 / 10);
                          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v27 + 180))(v27, v5);
                          CChar::WriteInSight((int)this, 73, "db", a3, 31);
                          break;
                        case 0x800000u:
                          v6 = CBuff::CreateBuff(116, 1, 5, 7 * v22 / 100);
                          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v27 + 180))(v27, v6);
                          v7 = CBuff::CreateBuff(118, 5, -50, v16);
                          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v27 + 180))(v27, v7);
                          CChar::WriteInSight((int)this, 73, "db", a3, 32);
                          break;
                      }
                    }
                  }
                }
              }
              else
              {
                (*(void (__thiscall **)(CIOObject *, _DWORD *))(*(_DWORD *)v27 + 80))(v27, this);
              }
            }
            else
            {
              (*(void (__thiscall **)(CIOObject *, _DWORD *))(*(_DWORD *)v27 + 80))(v27, this);
            }
          }
          v15 = v24 | (2 * v20) | (4 * v23);
          v14 = v21;
          v13 = v22;
          v12 = std___Mpunct_wchar_t___do_frac_digits(v27);
          CChar::WriteInSight((int)this, 62, "ddwwb", this[7], v12, v13, v14, v15);
        }
        CIOObject::Release(v27, (volatile int *)v27 + 88);
      }
      else
      {
        CIOObject::Release(v27, (volatile int *)v27 + 88);
      }
    }
  }
}
// 45CA82: variable 'v16' is possibly undefined

//----- (0045CC00) --------------------------------------------------------
void __thiscall CPlayer::LevelUp(_DWORD *this)
{
  (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 26, 1, 1);
  (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 23, 1, 5);
  (*(void (__cdecl **)(_DWORD *, int, int, int))(*this + 88))(this, 24, 1, 1);
  this[138] = 0;
  CPlayer::SaveAllProperty((int)this, 1);
  sub_47FF00(0);
  CPlayer::MLMPayMoney(2);
  CPlayer::MLMLevelUp(this);
}
// 467080: using guessed type _DWORD __stdcall sub_467080(_DWORD);
// 4674D0: using guessed type int __thiscall sub_4674D0(_DWORD);
// 47FF00: using guessed type _DWORD __stdcall sub_47FF00(_DWORD);

//----- (0045CC90) --------------------------------------------------------
void __thiscall CPlayer::Teleport(_DWORD *this, int a2, _DWORD *a3, int a4, int a5)
{
  int v5; // ecx
  int v6; // eax

  if ( a2 == -1 )
  {
    LOG_ERR("Map# Is -1. (PID:%d  UID :%d)", this[113], this[112]);
  }
  else if ( sub_491080(a2) )
  {
    if ( CSMap::IsOnTile(a3, 0) )
    {
      CChar::SubMState(this, 1, 0);
      this[372] = a2;
      v5 = a3[1];
      this[373] = *a3;
      this[374] = v5;
      CPlayer::Write((int)this, 70, "bdddb", a2, *a3, a3[1], a4, a5);
      v6 = sub_493EB0((char *)&unk_4E2758 + 60 * a2);
      CPlayer::Write((int)this, 22, "bb", v6, 0);
    }
  }
}
// 45CD80: using guessed type _DWORD __stdcall CSMap::IsOnTile(_DWORD, _DWORD);
// 491080: using guessed type _DWORD __cdecl sub_491080(_DWORD);
// 493EB0: using guessed type int __thiscall sub_493EB0(_DWORD);

//----- (0045CD80) --------------------------------------------------------
int __thiscall CSMap::IsOnTile(_DWORD *this, int *a2, int a3)
{
  int v4; // [esp+4h] [ebp-8h] BYREF
  int v5; // [esp+8h] [ebp-4h]

  v4 = *a2 >> 5;
  v5 = a2[1] >> 5;
  if ( v4 < 0 || v4 >> 8 >= 64 || v5 < 0 || v5 >> 8 >= 64 )
    return 0;
  CSMap::_GetCellMap(this, &v4);
  return CCellMap::IsOnTile(&v4, a3);
}
// 45CDF0: using guessed type _DWORD __stdcall sub_45CDF0(_DWORD, _DWORD);

//----- (0045CDF0) --------------------------------------------------------
int __thiscall CCellMap::IsOnTile(_DWORD *this, _DWORD *a2, int a3)
{
  int v4[2]; // [esp+4h] [ebp-8h] BYREF

  if ( !this )
    return 0;
  if ( !a3 )
    return 1;
  v4[0] = (unsigned __int8)*a2;
  v4[1] = (unsigned __int8)a2[1];
  return a3 & *(_DWORD *)(CCellMap::GetTile(this, v4) + 4);
}

//----- (0045CE50) --------------------------------------------------------
void __thiscall CPlayer::OnTeleport(int this, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v6; // [esp+4h] [ebp-8h]
  CIOBuffer *v7; // [esp+8h] [ebp-4h]

  if ( a2 )
  {
    CChar::Lock(this);
    v6 = sub_491080(*(_DWORD *)(this + 1488));
    if ( v6 )
    {
      if ( sub_4913E0((Concurrency::details::_CancellationTokenRegistration *)this, this + 324) )
      {
        CChar::WriteInSight(this, 55, "d", *(_DWORD *)(this + 28));
        if ( CChar::IsGState((_DWORD *)this, 8) )
        {
          CChar::SubGState((volatile LONG *)this, 10);
          CPlayer::Write(this, 46, "dd", *(_DWORD *)(this + 28), *(_DWORD *)(this + 280));
          CPlayer::SubEState((_DWORD *)this, 8);
        }
        if ( CChar::IsGState((_DWORD *)this, 4096) )
          CChar::SubGState((volatile LONG *)this, 4096);
        *(_DWORD *)(this + 316) = *(_DWORD *)(this + 1488);
        *(_DWORD *)(this + 320) = v6;
        CChar::SetXY((_DWORD *)this, (_DWORD *)(this + 1492));
        *(_DWORD *)(this + 340) = a3;
        sub_491360(this, this + 324);
        v3 = CPlayer::GetGuildName(this, *(_DWORD *)(this + 480), *(_DWORD *)(this + 1112));
        v4 = CPlayer::GetGuildClassTitle(this, v3);
        v7 = (CIOBuffer *)sub_44FCE0(
                            50,
                            "dsbdddwdmbbIssdbd",
                            *(_DWORD *)(this + 28),
                            this + 32,
                            *(_DWORD *)(this + 460),
                            *(_DWORD *)(this + 332),
                            *(_DWORD *)(this + 336),
                            *(_DWORD *)(this + 340),
                            *(_DWORD *)(this + 348),
                            *(_DWORD *)(this + 280),
                            this + 1052,
                            14,
                            *(_DWORD *)(this + 556),
                            *(_DWORD *)(this + 560),
                            *(_DWORD *)(this + 288),
                            *(_DWORD *)(this + 292),
                            v4);
        sub_493390(this, this + 324, v7);
        CIOBuffer::Release(v7);
        CChar::Unlock(this);
      }
      else
      {
        CChar::Unlock(this);
        LOG_ERR(
          "CPlayer::OnTeleport() Can't remove player pointer. (%d, %d, %d) (PID:%d, UID: %d) ",
          *(_DWORD *)(this + 316),
          *(_DWORD *)(this + 324),
          *(_DWORD *)(this + 328),
          *(_DWORD *)(this + 452),
          *(_DWORD *)(this + 448));
      }
    }
    else
    {
      CChar::Unlock(this);
    }
  }
}
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 46ACD0: using guessed type int __thiscall CPlayer::GetGuildName(_DWORD, _DWORD, _DWORD);
// 46AD70: using guessed type int __thiscall CPlayer::GetGuildClassTitle(_DWORD, _DWORD);
// 491080: using guessed type _DWORD __cdecl sub_491080(_DWORD);
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);
// 493390: using guessed type _DWORD __stdcall sub_493390(_DWORD, _DWORD, _DWORD);

//----- (0045D0D0) --------------------------------------------------------
int __stdcall CPlayer::_IntoInven(CIOObject *_Val2)
{
  int v1; // eax
  char v3[8]; // [esp+4h] [ebp-10h] BYREF
  char v4[8]; // [esp+Ch] [ebp-8h] BYREF

  CIOObject::AddRef(_Val2, (volatile int *)_Val2 + 22);
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v3,
    (const char *const *)_Val2 + 9,
    &_Val2);
  sub_445DF0(
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v4,
    v1);
  if ( v4[4] )
    return 1;
  CIOObject::Release(_Val2, (volatile int *)_Val2 + 22);
  return 0;
}
// 45D109: variable 'v1' is possibly undefined
// 445DF0: using guessed type _DWORD __stdcall sub_445DF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);

//----- (0045D140) --------------------------------------------------------
void __stdcall CPlayer::_OutofInven(CIOObject *a1)
{
  if ( sub_470740((char *)a1 + 36) )
    CIOObject::Release(a1, (volatile int *)a1 + 22);
  else
    ELOG("CPlayer()::_OutofInven() Not in ItemMap. (IID:%d)", *((_DWORD *)a1 + 9));
}
// 470740: using guessed type _DWORD __stdcall sub_470740(_DWORD);

//----- (0045D190) --------------------------------------------------------
int __thiscall CPlayer::FindItem(int this, int a2, int a3)
{
  int v5; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  v5 = CPlayer::_FindItem(a2, a3);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  return v5;
}
// 45D1E0: using guessed type _DWORD __stdcall sub_45D1E0(_DWORD, _DWORD);

//----- (0045D1E0) --------------------------------------------------------
int __thiscall CPlayer::_FindItem(int this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  char v6[4]; // [esp+8h] [ebp-Ch] BYREF
  char v7[4]; // [esp+Ch] [ebp-8h] BYREF
  int v8; // [esp+10h] [ebp-4h]

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v3) )
      break;
    v8 = *(_DWORD *)(sub_420250(v7) + 4);
    if ( a2 == *(_DWORD *)(*(_DWORD *)(v8 + 40) + 64) && *(_DWORD *)(v8 + 52) >= a3 )
      return v8;
    sub_446090(v6, 0);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0045D270) --------------------------------------------------------
int __thiscall CPlayer::_FindMergeItem(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  int v7; // [esp+10h] [ebp-4h]

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v6,
            v2) )
      break;
    v7 = *(_DWORD *)(sub_420250(v6) + 4);
    if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v7 + 148))(v7, a2) )
      return v7;
    sub_446090(v5, 0);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);

//----- (0045D2F0) --------------------------------------------------------
void __thiscall CPlayer::BuyItemEx(int this, int a2, int a3, int a4, void *Src, int end)
{
  int a1a; // [esp+0h] [ebp-40h]
  CIOObject *v8; // [esp+4h] [ebp-3Ch]
  int v9; // [esp+8h] [ebp-38h]
  int v10; // [esp+Ch] [ebp-34h]
  int v11; // [esp+10h] [ebp-30h]
  int i; // [esp+14h] [ebp-2Ch]
  int v13; // [esp+18h] [ebp-28h]
  int v14; // [esp+1Ch] [ebp-24h]
  unsigned __int16 v15; // [esp+20h] [ebp-20h] BYREF
  BOOL v16; // [esp+24h] [ebp-1Ch]
  int v17; // [esp+28h] [ebp-18h]
  int v18; // [esp+2Ch] [ebp-14h]
  _DWORD *v19; // [esp+30h] [ebp-10h]
  int v20; // [esp+34h] [ebp-Ch]
  volatile int *v21; // [esp+38h] [ebp-8h]
  unsigned __int16 v22; // [esp+3Ch] [ebp-4h] BYREF

  CChar::Lock(this);
  v20 = *(_DWORD *)(this + 1100);
  CChar::Unlock(this);
  if ( !v20 )
  {
    v21 = (volatile int *)CNPC::FindNPC(a2);
    if ( v21 )
    {
      if ( !(*(int (__thiscall **)(volatile int *, int))(*v21 + 188))(v21, this + 332) )
      {
        CIOObject::Release(v21);
        return;
      }
      v16 = 0;
      v13 = 100;
      v19 = (_DWORD *)CCastle::GetCastle(*((_DWORD *)v21 + 116));
      CIOObject::Release(v21);
      if ( v19 )
      {
        v13 = CCastle::GetTaxRate(v19);
        if ( a3 != v13 )
        {
          CPlayer::Write(this, 68, "bb", 69, (unsigned __int8)v13);
          return;
        }
        v16 = CCastle::IsPayment(v19);
      }
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
      for ( i = 0; *(_DWORD *)(this + 1096) && i < a4; ++i )
      {
        Src = ScanPacket((char *)Src, (char *)end, "ww", &v15, &v22);
        v14 = v15;
        v18 = v22;
        if ( v22 )
        {
          v11 = CItem::CreateItem(v15, 0, v18, -1);
          if ( v11 )
          {
            v10 = v18 * (v13 * *(_DWORD *)(*(_DWORD *)(v11 + 40) + 108) / 100);
            if ( v10 <= 0 )
            {
              CBase::Delete((char *)v11);
              if ( !v10 )
              {
                CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
                LOG_ERR(&aOaOAAiauAcn3dH, *(_DWORD *)(this + 452), *(_DWORD *)(this + 448), v14);
                LOG_NORMAL(
                  "[Kickout] At BuyItemEx() '%s' (PID:%d) %p %x %x %x",
                  (const char *)(this + 32),
                  *(_DWORD *)(this + 452),
                  *(const void **)(*(_DWORD *)(this + 1676) + 120),
                  *(_DWORD *)(this + 20),
                  *(_DWORD *)(*(_DWORD *)(this + 1676) + 108),
                  this);
                CPlayer::Write(a1a, 45, "b", 1);
                sub_495B20(1);
                return;
              }
            }
            else
            {
              if ( *(_DWORD *)(this + 1096) && *(_DWORD *)(*(_DWORD *)(this + 1096) + 52) < v10 )
              {
                CBase::Delete((char *)v11);
                break;
              }
              CIOObject::AddRef(v11);
              v9 = CPlayer::_InsertItem(7, v11);
              if ( v9 == 1 )
              {
                v8 = *(CIOObject **)(this + 1096);
                if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v8 + 120))(v8, this, 7, -v10) )
                  CPlayer::_OutofInven(v8);
                if ( v16 )
                {
                  v17 = 3 * (v10 - v18 * (85 * *(_DWORD *)(*(_DWORD *)(v11 + 40) + 108) / 100)) / 10;
                  CCastle::AddTax(v19, v17);
                }
              }
              else
              {
                CBase::Delete((char *)v11);
              }
              CIOObject::Release((volatile int *)v11);
              if ( v9 == 2 )
                break;
            }
          }
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
  }
}
// 45D5F7: variable 'a1a' is possibly undefined
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 45DE10: using guessed type _DWORD __stdcall sub_45DE10(_DWORD, _DWORD);
// 495B20: using guessed type _DWORD __stdcall sub_495B20(_DWORD);

//----- (0045D630) --------------------------------------------------------
void __thiscall CPlayer::SellItem(int this, int a2, int a3, void *Src, int end)
{
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-28h] BYREF
  char *v8; // [esp+8h] [ebp-24h]
  char v9[4]; // [esp+Ch] [ebp-20h]
  CIOObject *v10; // [esp+10h] [ebp-1Ch]
  char v11[4]; // [esp+14h] [ebp-18h] BYREF
  int i; // [esp+18h] [ebp-14h]
  int v13; // [esp+1Ch] [ebp-10h]
  int v14; // [esp+20h] [ebp-Ch]
  unsigned __int16 v15; // [esp+24h] [ebp-8h] BYREF
  char v16[4]; // [esp+28h] [ebp-4h] BYREF

  CChar::Lock(this);
  v14 = *(_DWORD *)(this + 1100);
  CChar::Unlock(this);
  if ( !v14 && CNPC::CanReply(a2, this + 332) )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    for ( i = 0; i < a3; ++i )
    {
      Src = ScanPacket((char *)Src, (char *)end, "dw", v16, &v15);
      v13 = v15;
      if ( v15 )
      {
        sub_44AE20(v11, v16);
        v5 = sub_430C20(v7);
        if ( !(unsigned __int8)unknown_libname_16(v5) )
        {
          v10 = *(CIOObject **)(sub_420250(v11) + 4);
          if ( (*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v10 + 136))(v10, v13) )
          {
            *(_DWORD *)v9 = (*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v10 + 200))(v10, v13);
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v10 + 120))(v10, this, 8, -v13) )
              CPlayer::_OutofInven(v10);
            v8 = (char *)CItem::CreateItem(31, 0, *(int *)v9, -1);
            if ( v8 )
            {
              if ( !CPlayer::_InsertItem(8, v8) )
              {
                LOG_ERR("CPlayer::SellItem() Fail to insert money(%d).", *(_DWORD *)v9);
                CBase::Delete(v8);
              }
            }
          }
        }
      }
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 45DE10: using guessed type _DWORD __stdcall sub_45DE10(_DWORD, _DWORD);

//----- (0045D7E0) --------------------------------------------------------
void __thiscall CPlayer::DropItem(int this, char a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+10h] [ebp-24h] BYREF
  int v6; // [esp+14h] [ebp-20h]
  int v7[2]; // [esp+18h] [ebp-1Ch] BYREF
  int v8[2]; // [esp+20h] [ebp-14h] BYREF
  CIOObject *v9; // [esp+28h] [ebp-Ch]
  int v10; // [esp+2Ch] [ebp-8h]
  char v11[4]; // [esp+30h] [ebp-4h] BYREF

  CChar::Lock(this);
  v10 = *(_DWORD *)(this + 1100);
  CChar::Unlock(this);
  if ( !v10 && a3 > 0 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    sub_44AE20(v11, &a2);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v11,
           v3) )
    {
      v9 = *(CIOObject **)(sub_420250(v11) + 4);
      if ( (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)v9 + 144))(v9, a3, this) )
      {
        CChar::GetDropPt((_DWORD *)this, v7);
        v8[0] = v7[0] >> 5;
        v8[1] = v7[1] >> 5;
        if ( *((_DWORD *)v9 + 13) <= a3 )
        {
          if ( sub_491360(v9, v8) )
          {
            (*(void (__thiscall **)(CIOObject *, int, int *, int *, int, _DWORD, _DWORD))(*(_DWORD *)v9 + 124))(
              v9,
              this,
              v7,
              v8,
              1,
              0,
              0);
            CPlayer::_OutofInven(v9);
          }
        }
        else
        {
          v6 = CItem::CreateItem(*(_DWORD *)(*((_DWORD *)v9 + 10) + 64), 0, a3, *((_DWORD *)v9 + 21));
          if ( v6 )
          {
            if ( sub_491360(v6, v8) )
            {
              (*(void (__thiscall **)(int, int, int *, int *, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v6 + 124))(
                v6,
                this,
                v7,
                v8,
                0,
                0,
                0);
              (*(void (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v9 + 120))(v9, this, 11, -a3);
            }
            else if ( v6 )
            {
              (**(void (__thiscall ***)(int, int))v6)(v6, 1);
            }
          }
        }
      }
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 491360: using guessed type _DWORD __stdcall sub_491360(_DWORD, _DWORD);

//----- (0045D9C0) --------------------------------------------------------
void __thiscall CPlayer::TrashItem(int this, char a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  CIOObject *v5; // [esp+8h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  CChar::Lock(this);
  v6 = *(_DWORD *)(this + 1100);
  CChar::Unlock(this);
  if ( !v6 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    sub_44AE20(v7, &a2);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
           v2) )
    {
      v5 = *(CIOObject **)(sub_420250(v7) + 4);
      if ( !*(_DWORD *)(*((_DWORD *)v5 + 10) + 156) )
      {
        if ( (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)v5 + 88))(v5, this, 4) )
          CPlayer::_OutofInven(v5);
      }
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045DA90) --------------------------------------------------------
int __thiscall CPlayer::RemoveItem(int this, int a2, int a3, int a4)
{
  int result; // eax
  CIOObject *v6; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  v6 = (CIOObject *)CPlayer::_FindItem(this, a3, a4);
  if ( v6 )
  {
    if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v6 + 120))(v6, this, a2, -a4) )
    {
      if ( (*(int (__thiscall **)(CIOObject *))(*(_DWORD *)v6 + 196))(v6) )
        --*(_DWORD *)(this + 1104);
      CPlayer::_OutofInven(v6);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    result = 1;
  }
  else
  {
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    result = 0;
  }
  return result;
}

//----- (0045DB40) --------------------------------------------------------
void __thiscall CPlayer::PutOnItem(int this, char a2)
{
  std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // [esp-4h] [ebp-20h]
  char v7[4]; // [esp+8h] [ebp-14h] BYREF
  char v8[4]; // [esp+Ch] [ebp-10h] BYREF
  char v9[4]; // [esp+10h] [ebp-Ch] BYREF
  int v10; // [esp+14h] [ebp-8h]
  char v11[4]; // [esp+18h] [ebp-4h] BYREF

  CChar::Lock(this);
  v10 = *(_DWORD *)(this + 1100);
  CChar::Unlock(this);
  if ( !v10 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v8);
    v2 = (std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_4714F0(v9, &a2);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           v2,
           v5) )
    {
      CPlayer::Write(this, 67, "b", 52);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
    else
    {
      sub_44AE20(v11, &a2);
      v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
      if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
             (std::vector<CIOSocket::CIOTimer>::const_iterator *)v11,
             v3) )
      {
        v4 = sub_420250(v11);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v4 + 4) + 96))(*(_DWORD *)(v4 + 4), this);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 4714F0: using guessed type _DWORD __stdcall sub_4714F0(_DWORD, _DWORD);

//----- (0045DC50) --------------------------------------------------------
void __thiscall CPlayer::PutOffItem(int this, char a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  CChar::Lock(this);
  v6 = *(_DWORD *)(this + 1100);
  CChar::Unlock(this);
  if ( !v6 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    sub_44AE20(v7, &a2);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
           v2) )
    {
      v3 = sub_420250(v7);
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v3 + 4) + 100))(*(_DWORD *)(v3 + 4), this);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045DD00) --------------------------------------------------------
void __thiscall CPlayer::UseItem(int this, char a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  CIOObject *v5; // [esp+8h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  CChar::Lock(this);
  v6 = *(_DWORD *)(this + 1100);
  CChar::Unlock(this);
  if ( !v6 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    sub_44AE20(v7, &a2);
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v4);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
           v2) )
    {
      v5 = *(CIOObject **)(sub_420250(v7) + 4);
      if ( !(*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v5 + 128))(v5, this) )
        CPlayer::_OutofInven(v5);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045DDC0) --------------------------------------------------------
int __thiscall CPlayer::InsertItem(int this, int a2, int a3)
{
  int v5; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  v5 = CPlayer::_InsertItem(a2, a3);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  return v5;
}
// 45DE10: using guessed type _DWORD __stdcall sub_45DE10(_DWORD, _DWORD);

//----- (0045DE10) --------------------------------------------------------
int __thiscall CPlayer::_InsertItem(_DWORD *this, int a2, CIOObject *a3)
{
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  if ( *(_DWORD *)(*((_DWORD *)a3 + 10) + 92) && (v6 = CPlayer::_FindMergeItem((int)this, (int)a3)) != 0 )
  {
    (*(void (__thiscall **)(int, _DWORD *, int, _DWORD))(*(_DWORD *)v6 + 120))(v6, this, a2, *((_DWORD *)a3 + 13));
    (*(void (__thiscall **)(CIOObject *, _DWORD *))(*(_DWORD *)a3 + 204))(a3, this);
    (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)a3 + 92))(a3, a2);
  }
  else
  {
    if ( CPlayer::GetInvenSize(this) >= 60
      && a2 != 10
      && a2 != 8
      && a2 != 25
      && a2 != 16
      && a2 != 24
      && a2 != 2
      && a2 != 45
      && a2 != 21
      && a2 != 27 )
    {
      CPlayer::Write((int)this, 67, "b", 40);
      return 2;
    }
    v5 = *((_DWORD *)a3 + 9);
    if ( !v5 )
      *((_DWORD *)a3 + 9) = CItem::NewIID();
    if ( !*(_DWORD *)(*((_DWORD *)a3 + 10) + 92) && *((int *)a3 + 13) > 1 )
    {
      LOG_ERR(
        "_InsertItem()     Name(%s) PID(%d) UID(%d) Index(%d) Num(%d) LogType(%d)",
        (const char *)this + 32,
        this[113],
        this[112],
        *(_DWORD *)(*((_DWORD *)a3 + 10) + 64),
        *((_DWORD *)a3 + 13),
        a2);
      return 0;
    }
    if ( !CPlayer::_IntoInven(a3) )
      return 0;
    (*(void (__thiscall **)(CIOObject *, _DWORD *, int, int))(*(_DWORD *)a3 + 112))(a3, this, a2, v5);
    *((_DWORD *)a3 + 20) = 0;
  }
  return 1;
}

//----- (0045DF90) --------------------------------------------------------
void __thiscall CPlayer::EnchantItem(int this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+4h] [ebp-18h] BYREF
  char v7[4]; // [esp+8h] [ebp-14h] BYREF
  CIOObject *v8; // [esp+Ch] [ebp-10h]
  CIOObject *v9; // [esp+10h] [ebp-Ch]
  char v10[4]; // [esp+14h] [ebp-8h] BYREF
  char v11[4]; // [esp+18h] [ebp-4h] BYREF

  if ( a2 != a3 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    sub_44AE20(v11, &a2);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v11,
           v3) )
    {
      v9 = *(CIOObject **)(sub_420250(v11) + 4);
      sub_44AE20(v10, &a3);
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v6);
      if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
             (std::vector<CIOSocket::CIOTimer>::const_iterator *)v10,
             v4) )
      {
        v8 = *(CIOObject **)(sub_420250(v10) + 4);
        if ( !(*(int (__thiscall **)(CIOObject *, int, CIOObject *))(*(_DWORD *)v9 + 172))(v9, this, v8) )
          CPlayer::_OutofInven(v9);
        if ( (*(int (__thiscall **)(CIOObject *))(*(_DWORD *)v8 + 168))(v8) )
          CPlayer::_OutofInven(v8);
      }
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045E0A0) --------------------------------------------------------
void __thiscall CPlayer::UpgradeItem(int this, int a2, char a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  sub_44AE20(v7, &a3);
  v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
         v3) )
  {
    v6 = *(_DWORD *)(sub_420250(v7) + 4);
    if ( a2 )
    {
      if ( a2 == 1 )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v6 + 212))(v6, this);
      }
      else if ( a2 == 2 )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v6 + 216))(v6, this);
      }
    }
    else
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v6 + 208))(v6, this);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045E170) --------------------------------------------------------
void __thiscall CPlayer::AskTrade(_DWORD *this, int a2)
{
  CIOObject *v3; // [esp+4h] [ebp-4h]

  if ( this[7] != a2 )
  {
    if ( CChar::IsGState(this, 256) )
    {
      CPlayer::Write((int)this, 95, "b", 7);
    }
    else
    {
      v3 = sub_450810(a2);
      if ( v3 )
      {
        if ( CChar::IsGState(v3, 256) )
        {
          CPlayer::Write((int)this, 95, "b", 8);
        }
        else if ( !CBase::IsDeleted(this)
               && !CChar::IsGState(this, 176)
               && !CBase::IsDeleted(v3)
               && !CChar::IsGState(v3, 176)
               && sub_448870(this + 83, (_DWORD *)v3 + 83) <= 64 )
        {
          CChar::Lock((int)v3);
          if ( *((_DWORD *)v3 + 275) || CPlayer::IsEState(v3, 1) )
          {
            CPlayer::Write((int)this, 67, "b", 19);
          }
          else
          {
            CPlayer::AddEState(v3, 1);
            CPlayer::Write((int)v3, 75, "d", this[7]);
          }
          CChar::Unlock((int)v3);
        }
        CIOObject::Release(v3, (volatile int *)v3 + 88);
      }
    }
  }
}

//----- (0045E2F0) --------------------------------------------------------
int __thiscall CPlayer::OnAskTrade(_DWORD *this, int a2, int a3)
{
  int result; // eax
  CIOObject *v5; // [esp+4h] [ebp-4h]

  result = (int)this;
  if ( this[7] != a3 )
  {
    if ( !CChar::IsGState(this, 176) )
    {
      v5 = sub_450810(a3);
      if ( v5 )
      {
        if ( CChar::IsGState(v5, 176) )
        {
          CPlayer::Write((int)this, 67, "b", 60);
        }
        else if ( a2 )
        {
          sub_496700(v5, this);
        }
        else
        {
          CPlayer::Write((int)v5, 77, "bd", 0, this[7]);
        }
        CIOObject::Release(v5, (volatile int *)v5 + 88);
      }
    }
    result = CPlayer::SubEState(this, 1);
  }
  return result;
}

//----- (0045E3B0) --------------------------------------------------------
void __thiscall CPlayer::CancelTrade(_DWORD *this)
{
  volatile int *v2; // [esp+4h] [ebp-4h]

  CChar::Lock((int)this);
  v2 = (volatile int *)this[275];
  if ( v2 )
  {
    CIOObject::AddRef(v2);
    CChar::Unlock((int)this);
    sub_4968F0((int)v2, (int)this);
    CIOObject::Release(v2);
  }
  else
  {
    CChar::Unlock((int)this);
  }
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);

//----- (0045E410) --------------------------------------------------------
int __thiscall CPlayer::_EndTrade(int this, int a2)
{
  CPlayer::Write(this, 78, "b", a2);
  sub_445BF0((std::vector<IPAddrMask> *)(this + 1080));
  *(_DWORD *)(this + 1100) = 0;
  return CPlayer::SubEState((_DWORD *)this, 6);
}

//----- (0045E460) --------------------------------------------------------
void __thiscall CPlayer::ShowOffItem(int this, int a2, void *Src, int end)
{
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-28h] BYREF
  int v7; // [esp+8h] [ebp-24h]
  char v8[4]; // [esp+Ch] [ebp-20h] BYREF
  int i; // [esp+10h] [ebp-1Ch]
  CIOBuffer *v10; // [esp+14h] [ebp-18h]
  int v11; // [esp+18h] [ebp-14h] BYREF
  _DWORD *v12; // [esp+1Ch] [ebp-10h]
  int v13; // [esp+20h] [ebp-Ch] BYREF
  int v14; // [esp+24h] [ebp-8h] BYREF
  CIOBuffer *v15; // [esp+28h] [ebp-4h]

  if ( a2 > 0 )
  {
    CChar::Lock(this);
    if ( *(_DWORD *)(this + 1100) && !CTrade::IsEnd(*(_DWORD *)(this + 1100)) && !CPlayer::IsEState((_DWORD *)this, 6) )
    {
      v12 = (_DWORD *)CTrade::GetOther(this);
      if ( a2 + CPlayer::GetInvenSize(v12) > 60 )
      {
        CPlayer::Write(this, 67, "b", 20);
        CChar::Unlock(this);
        return;
      }
      v15 = CIOBuffer::Alloc();
      v10 = v15;
      *((_BYTE *)v15 + 2) = 79;
      v11 = (int)v10 + 4;
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
      for ( i = 0; ; ++i )
      {
        if ( i >= a2 )
        {
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
          WritePacket((char *)v10 + 3, "b", a2);
          *(_WORD *)v10 = v11 - (_WORD)v10;
          *((_DWORD *)v15 + 2000) = *(unsigned __int16 *)v10;
          CSocket::_CSocket(v15);
          CChar::Unlock(this);
          return;
        }
        Src = ScanPacket((char *)Src, (char *)end, "dd", &v13, &v14);
        if ( !v13 )
          break;
        if ( v14 <= 0 )
          break;
        sub_44AE20(v8, &v13);
        v4 = sub_430C20(v6);
        if ( (unsigned __int8)unknown_libname_16(v4) )
          break;
        v7 = *(_DWORD *)(sub_420250(v8) + 4);
        if ( !(*(int (__thiscall **)(int, int, int, _DWORD *))(*(_DWORD *)v7 + 140))(v7, v14, this, v12) )
          break;
        (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)v7 + 72))(v7, &v11, v14);
        sub_4707D0(this + 1080, (IPAddrMask *)&v13);
      }
      sub_445BF0((std::vector<IPAddrMask> *)(this + 1080));
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      CPlayer::Write(this, 67, "b", 21);
      CIOBuffer::Release(v15);
    }
    CChar::Unlock(this);
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 45E6C0: using guessed type int __thiscall sub_45E6C0(_DWORD);
// 45E6E0: using guessed type _DWORD __stdcall sub_45E6E0(_DWORD);

//----- (0045E6C0) --------------------------------------------------------
int __thiscall CTrade::IsEnd(_DWORD *this)
{
  return this[5] & 0x10;
}

//----- (0045E6E0) --------------------------------------------------------
int __thiscall CTrade::GetOther(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-8h]

  if ( a2 == this[8] )
    v3 = this[9];
  else
    v3 = this[8];
  return v3;
}

//----- (0045E720) --------------------------------------------------------
void __thiscall CPlayer::TradeAgreed(_DWORD *this)
{
  volatile int *v2; // [esp+4h] [ebp-4h]

  CChar::Lock((int)this);
  v2 = (volatile int *)this[275];
  if ( v2 )
  {
    CIOObject::AddRef(v2);
    CChar::Unlock((int)this);
    sub_496990((int)v2, this);
    CIOObject::Release(v2);
  }
  else
  {
    CChar::Unlock((int)this);
  }
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);

//----- (0045E780) --------------------------------------------------------
int __thiscall CPlayer::_CheckTrade(_DWORD *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int *v3; // eax
  int v4; // edx
  int v5; // eax
  int v6; // eax
  char v8[4]; // [esp+4h] [ebp-1Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-18h] BYREF
  char v10[4]; // [esp+Ch] [ebp-14h] BYREF
  int v11; // [esp+10h] [ebp-10h] BYREF
  int v12; // [esp+14h] [ebp-Ch]
  char v13[4]; // [esp+18h] [ebp-8h] BYREF
  char v14[4]; // [esp+1Ch] [ebp-4h] BYREF

  if ( !this[275] || CBase::IsDeleted((_DWORD *)this[275]) )
    return 0;
  sub_430C20(v14);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 270, (int)v9);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v14,
            v2) )
      break;
    v3 = (int *)sub_420010(v14);
    v4 = v3[1];
    v11 = *v3;
    v12 = v4;
    sub_44AE20(v13, &v11);
    if ( v12 < 0 )
    {
      LOG_ERR(
        "  ( CPlayer::_CheckTrade())\tPID:\t%d\tIID:\t%d\tNum:\t%d,\t",
        this[113],
        v11,
        v12);
      return 0;
    }
    v5 = sub_430C20(v8);
    if ( (unsigned __int8)unknown_libname_16(v5) )
      return 0;
    v6 = sub_420250(v13);
    if ( *(_DWORD *)(*(_DWORD *)(v6 + 4) + 52) < v12 )
      return 0;
    sub_430E30(v10, 0);
  }
  return 1;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 430E30: using guessed type _DWORD __stdcall sub_430E30(_DWORD, _DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045E890) --------------------------------------------------------
BOOL __thiscall CPlayer::_TradeItem(_DWORD *this, _DWORD *a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  int *v4; // eax
  int v5; // edx
  int v6; // eax
  int v7; // [esp+0h] [ebp-30h]
  char v9[4]; // [esp+8h] [ebp-28h] BYREF
  char v10[4]; // [esp+Ch] [ebp-24h] BYREF
  char v11[4]; // [esp+10h] [ebp-20h] BYREF
  int v12; // [esp+14h] [ebp-1Ch]
  int v13; // [esp+18h] [ebp-18h] BYREF
  int v14; // [esp+1Ch] [ebp-14h]
  CIOObject *v15; // [esp+20h] [ebp-10h]
  CIOObject *v16; // [esp+24h] [ebp-Ch]
  char v17[4]; // [esp+28h] [ebp-8h] BYREF
  char v18[4]; // [esp+2Ch] [ebp-4h] BYREF

  sub_430C20(v18);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(this + 270, (int)v10);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v18,
               v2);
    if ( !result )
      break;
    v4 = (int *)sub_420010(v18);
    v5 = v4[1];
    v13 = *v4;
    v14 = v5;
    v15 = 0;
    sub_44AE20(v17, &v13);
    v6 = sub_430C20(v9);
    if ( !(unsigned __int8)unknown_libname_16(v6) )
    {
      v16 = *(CIOObject **)(sub_420250(v17) + 4);
      v15 = (CIOObject *)(*(int (__thiscall **)(CIOObject *, _DWORD *, int, int))(*(_DWORD *)v16 + 132))(
                           v16,
                           this,
                           10,
                           v14);
      if ( v15 == v16 )
        CPlayer::_OutofInven(v16);
      if ( v15 )
      {
        CIOObject::AddRef(v15);
        if ( CPlayer::_InsertItem(a2, 10, v15) != 1 )
        {
          if ( *((_DWORD *)v15 + 11) )
            v7 = *(_DWORD *)(*((_DWORD *)v15 + 11) + 32);
          else
            v7 = 0;
          v12 = v7;
          LOG_ERR(
            "Fail to insert trade item.(iid:%d, index:%d, prefix:%d, num:%d)",
            *((_DWORD *)v15 + 9),
            *(_DWORD *)(*((_DWORD *)v15 + 10) + 64),
            v7,
            *((_DWORD *)v15 + 13));
          CBase::Delete((char *)v15);
        }
        CIOObject::Release((volatile int *)v15);
      }
    }
    sub_430E30(v11, 0);
  }
  return result;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 430E30: using guessed type _DWORD __stdcall sub_430E30(_DWORD, _DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045EA00) --------------------------------------------------------
void __thiscall CPlayer::_StorageIn(int this, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  _DWORD *v6; // [esp+0h] [ebp-38h]
  char v8[8]; // [esp+8h] [ebp-30h] BYREF
  char v9[4]; // [esp+30h] [ebp-8h] BYREF
  char v10[4]; // [esp+34h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1128),
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)v10,
    (const int *)(a2 + 2));
  v4 = sub_430C20(v9);
  if ( (unsigned __int8)unknown_libname_16(v4) )
  {
    v5 = sub_472830(a2 + 2, a2);
    sub_470890(
      this + 1128,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v8,
      v5);
  }
  else
  {
    v6 = (_DWORD *)(sub_420250(v10) + 15);
    *v6 += *(_DWORD *)(a2 + 11);
  }
  CPlayer::Write(this, 9, "ddb", a3, a4, 15);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 472830: using guessed type _DWORD __stdcall sub_472830(_DWORD, _DWORD);

//----- (0045EAB0) --------------------------------------------------------
int __stdcall CPlayer::_StorageOut(char a1, int a2)
{
  int result; // eax

  if ( !a2 )
    result = sub_470A40((int)&a1);
  return result;
}

//----- (0045EAE0) --------------------------------------------------------
int __thiscall CPlayer::_FindStorageItem(int this, int a2, _DWORD *a3, int a4, int a5)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  char v7[4]; // [esp+Ch] [ebp-28h] BYREF
  char v8[4]; // [esp+10h] [ebp-24h] BYREF
  __int16 v9[13]; // [esp+14h] [ebp-20h] BYREF
  char v10[4]; // [esp+30h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1128),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v10);
  while ( 1 )
  {
    v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v10,
            v5) )
      break;
    qmemcpy(v9, (const void *)(sub_420250(v10) + 4), sizeof(v9));
    if ( a2 == (unsigned __int16)v9[0] && a4 == (HIBYTE(v9[3]) & 0x88) && (dword_4E35B8 != 2 || a5 == HIBYTE(v9[8])) )
    {
      *a3 = *(_DWORD *)&v9[1];
      return 1;
    }
    sub_434510(v8, 0);
  }
  return 0;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 434510: using guessed type _DWORD __stdcall sub_434510(_DWORD, _DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0045EB90) --------------------------------------------------------
void __thiscall CPlayer::StorageInfo(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  _WORD *v2; // eax
  char *v3; // edi
  char v5[4]; // [esp+Ch] [ebp-1Ch] BYREF
  char v6[4]; // [esp+10h] [ebp-18h] BYREF
  char v7[4]; // [esp+14h] [ebp-14h] BYREF
  char *v8; // [esp+18h] [ebp-10h]
  int v9; // [esp+1Ch] [ebp-Ch]
  char *v10; // [esp+20h] [ebp-8h]
  void *Src; // [esp+24h] [ebp-4h]

  Src = CIOBuffer::Alloc();
  v8 = (char *)Src;
  *((_BYTE *)Src + 2) = 88;
  v10 = v8 + 4;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  v9 = unknown_libname_18(this + 1128);
  if ( v9 > 0 )
  {
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1128),
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v5);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
              v1) )
        break;
      v2 = (_WORD *)(sub_420250(v7) + 4);
      v3 = v10;
      qmemcpy(v10, v2, 0x18u);
      *((_WORD *)v3 + 12) = v2[12];
      v10 += 26;
      sub_434510(v6, 0);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  WritePacket(v8 + 3, "b", v9);
  *(_WORD *)v8 = (_WORD)v10 - (_WORD)v8;
  *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v8;
  CSocket::_CSocket(Src);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 434510: using guessed type _DWORD __stdcall sub_434510(_DWORD, _DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);

//----- (0045ECA0) --------------------------------------------------------
void __thiscall CPlayer::PutInStorage(int this, int a2, int a3, void *Src, int end)
{
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-24h] BYREF
  CIOObject *v8; // [esp+8h] [ebp-20h]
  char v9[4]; // [esp+Ch] [ebp-1Ch] BYREF
  int i; // [esp+10h] [ebp-18h]
  int v11; // [esp+14h] [ebp-14h]
  int v12; // [esp+18h] [ebp-10h] BYREF
  CIOObject *v13; // [esp+1Ch] [ebp-Ch]
  char *v14; // [esp+20h] [ebp-8h]
  int v15; // [esp+24h] [ebp-4h] BYREF
  char *Srca; // [esp+38h] [ebp+10h]

  if ( a3 > 0 && CNPC::CanReply(a2, this + 332) )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    if ( (unsigned int)(a3 + unknown_libname_18(this + 1128)) <= 0x64 )
    {
      v13 = *(CIOObject **)(this + 1096);
      if ( v13 )
      {
        v14 = (char *)Src;
        Srca = ScanPacket((char *)Src, (char *)end, "dd", &v15, &v12);
        v11 = 0;
        if ( v15 )
        {
          if ( v12 > 0 && *((_DWORD *)v13 + 9) == v15 )
          {
            v11 += v12;
            Srca = v14;
          }
          else
          {
            --a3;
          }
        }
        v11 += 60 * a3;
        if ( *((_DWORD *)v13 + 13) >= v11 )
        {
          v11 = 0;
          for ( i = 0; i < a3; ++i )
          {
            Srca = ScanPacket(Srca, (char *)end, "dd", &v15, &v12);
            if ( v12 > 0 )
            {
              sub_44AE20(v9, &v15);
              v5 = sub_430C20(v7);
              if ( !(unsigned __int8)unknown_libname_16(v5) )
              {
                v8 = *(CIOObject **)(sub_420250(v9) + 4);
                if ( (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)v8 + 152))(v8, this, v12) )
                  CPlayer::_OutofInven(v8);
                v11 += 60;
              }
            }
          }
          if ( !CBase::IsDeleted(v13)
            && !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v13 + 120))(v13, this, 15, -v11) )
          {
            CPlayer::_OutofInven(v13);
          }
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      CPlayer::Write(this, 67, "b", 39);
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0045EEC0) --------------------------------------------------------
void __thiscall CPlayer::PutOutStorage(int this, int a2, int a3, void *Src, int end)
{
  int v5; // eax
  char v7[4]; // [esp+4h] [ebp-20h] BYREF
  unsigned __int16 *v8; // [esp+8h] [ebp-1Ch]
  CIOObject *v9; // [esp+Ch] [ebp-18h]
  unsigned __int16 *v10; // [esp+10h] [ebp-14h] BYREF
  char v11[4]; // [esp+14h] [ebp-10h] BYREF
  int i; // [esp+18h] [ebp-Ch]
  int v13; // [esp+1Ch] [ebp-8h] BYREF
  int _Keyval; // [esp+20h] [ebp-4h] BYREF

  if ( a3 > 0 && CNPC::CanReply(a2, this + 332) )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    if ( a3 + CPlayer::GetInvenSize((_DWORD *)this) <= 60 )
    {
      for ( i = 0; i < a3; ++i )
      {
        Src = ScanPacket((char *)Src, (char *)end, "dd", &_Keyval, &v13);
        if ( v13 > 0 )
        {
          std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1128),
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)v11,
            &_Keyval);
          v5 = sub_430C20(v7);
          if ( !(unsigned __int8)unknown_libname_16(v5) )
          {
            v8 = (unsigned __int16 *)(sub_420250(v11) + 4);
            v10 = v8;
            v9 = (CIOObject *)sub_426060(*(_DWORD *)(this + 452), &v10);
            if ( v9 )
            {
              if ( (*(int (__thiscall **)(CIOObject *, int, int, _DWORD, int))(*(_DWORD *)v9 + 156))(
                     v9,
                     this,
                     v13,
                     *v8,
                     (int)v8 + 11) )
              {
                CPlayer::_IntoInven(v9);
              }
            }
          }
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      CPlayer::Write(this, 67, "b", 40);
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0045F040) --------------------------------------------------------
void __thiscall CPlayer::SetStallInfo(int this, int a2, void *Src, int end)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  int v5; // eax
  char v7[8]; // [esp+8h] [ebp-70h] BYREF
  char v8[4]; // [esp+34h] [ebp-44h] BYREF
  char *Source; // [esp+38h] [ebp-40h] BYREF
  char v10[4]; // [esp+3Ch] [ebp-3Ch] BYREF
  char *v11; // [esp+40h] [ebp-38h] BYREF
  int v12; // [esp+44h] [ebp-34h]
  char v13[32]; // [esp+48h] [ebp-30h] BYREF
  char v14[4]; // [esp+68h] [ebp-10h] BYREF
  int v15; // [esp+6Ch] [ebp-Ch] BYREF
  int v16; // [esp+70h] [ebp-8h] BYREF
  char v17[4]; // [esp+74h] [ebp-4h] BYREF

  if ( CChar::IsGState((_DWORD *)this, 256) )
  {
    CPlayer::Write(this, 95, "b", 10);
    return;
  }
  if ( CSMap::IsOnTile(*(_DWORD **)(this + 320), (int *)(this + 332), 0x100000) )
  {
    CPlayer::Write(this, 67, "b", 84);
    return;
  }
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      ScanPacket((char *)Src, (char *)end, "d", v10);
      if ( CChar::IsGState((_DWORD *)this, 16) )
        InterlockedIncrement((volatile LONG *)(this + 1220));
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
      sub_471430(v10);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
    else if ( a2 == 2 )
    {
      ScanPacket((char *)Src, (char *)end, "s", &Source, 65);
      strcpy((char *)(this + 1152), Source);
      if ( CChar::IsGState((_DWORD *)this, 16) )
        CChar::WriteInSight(this, 13, "bds", 1, *(_DWORD *)(this + 28), this + 1152);
    }
  }
  else
  {
    ScanPacket((char *)Src, (char *)end, "ddd", v17, &v15, &v16);
    if ( v15 > 0 && v16 > 0 )
    {
      if ( CChar::IsGState((_DWORD *)this, 16) )
        InterlockedIncrement((volatile LONG *)(this + 1220));
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
      if ( (unsigned int)unknown_libname_18(this + 1140) < 0x10 )
      {
        sub_44AE20(v14, v17);
        v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v8);
        if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v14,
               v4) )
        {
          v12 = *(_DWORD *)(sub_420250(v14) + 4);
          if ( !(*(int (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v12 + 140))(v12, v15, this, 0) )
          {
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
            CPlayer::GetStallInfo(0, this);
            return;
          }
          sub_45F300(v16);
          v11 = v13;
          (*(void (__thiscall **)(int, char **, int))(*(_DWORD *)v12 + 72))(v12, &v11, v15);
          v5 = sub_4728C0(v17, v13);
          sub_470AF0(
            (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v7,
            v5);
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 45F300: using guessed type _DWORD __stdcall sub_45F300(_DWORD);
// 45F3A0: using guessed type _DWORD __stdcall sub_45F3A0(_DWORD, _DWORD);
// 470AF0: using guessed type _DWORD __stdcall sub_470AF0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 471430: using guessed type _DWORD __stdcall sub_471430(_DWORD);
// 4728C0: using guessed type _DWORD __stdcall sub_4728C0(_DWORD, _DWORD);

//----- (0045F300) --------------------------------------------------------
char *__thiscall sub_45F300(char *this, int a2)
{
  this[25] = 0;
  this[24] = 0;
  this[23] = 0;
  this[22] = 0;
  this[21] = 0;
  this[20] = 0;
  this[19] = 0;
  this[18] = 0;
  this[17] = 0;
  this[16] = 0;
  this[15] = 0;
  *(_DWORD *)(this + 11) = 0;
  *(_DWORD *)(this + 7) = 0;
  this[6] = 0;
  *((_WORD *)this + 2) = 0;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 26) = a2;
  return this;
}

//----- (0045F3A0) --------------------------------------------------------
void __thiscall CPlayer::GetStallInfo(int this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  _WORD *v4; // eax
  char *v5; // edi
  char v7[4]; // [esp+10h] [ebp-1Ch] BYREF
  char v8[4]; // [esp+14h] [ebp-18h] BYREF
  char v9[4]; // [esp+18h] [ebp-14h] BYREF
  char *v10; // [esp+1Ch] [ebp-10h]
  int v11; // [esp+20h] [ebp-Ch]
  char *v12; // [esp+24h] [ebp-8h]
  void *Src; // [esp+28h] [ebp-4h]

  if ( CChar::IsGState((_DWORD *)this, 256) )
  {
    CPlayer::Write(this, 95, "b", 10);
  }
  else if ( a2 )
  {
    if ( a2 == 1 )
      CPlayer::Write(a3, 13, "bds", 1, *(_DWORD *)(this + 28), this + 1152);
  }
  else
  {
    Src = CIOBuffer::Alloc();
    v10 = (char *)Src;
    *((_BYTE *)Src + 2) = 13;
    v12 = v10 + 13;
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    v11 = unknown_libname_18(this + 1140);
    if ( v11 > 0 )
    {
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1140),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
      while ( 1 )
      {
        v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
        if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
                v3) )
          break;
        v4 = (_WORD *)(sub_420250(v9) + 4);
        v5 = v12;
        qmemcpy(v12, v4, 0x1Cu);
        *((_WORD *)v5 + 14) = v4[14];
        v12 += 30;
        sub_472890(v8, 0);
      }
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    WritePacket(v10 + 3, "bddb", 0, *(_DWORD *)(this + 28), *(_DWORD *)(this + 1220), v11);
    *(_WORD *)v10 = (_WORD)v12 - (_WORD)v10;
    *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v10;
    CPlayer::Send(Src);
    CIOBuffer::Release((CIOBuffer *)Src);
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);
// 472890: using guessed type _DWORD __stdcall sub_472890(_DWORD, _DWORD);

//----- (0045F540) --------------------------------------------------------
void __thiscall CPlayer::SwitchStall(int this, int a2)
{
  const char *v2; // [esp+0h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-4h]

  if ( a2 )
  {
    CChar::Lock(this);
    v4 = *(_DWORD *)(this + 1100);
    CChar::Unlock(this);
    if ( CChar::IsGStateExcept(2146443264) || *(_DWORD *)(this + 1016) || v4 || CPlayer::IsEState((_DWORD *)this, 7) )
      return;
    CChar::AddGState((volatile LONG *)this, 20);
  }
  else
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    sub_471490(this + 1140);
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    if ( !CChar::IsGState((_DWORD *)this, 16) )
      return;
    CChar::SubGState((volatile LONG *)this, 20);
  }
  if ( a2 )
    v2 = (const char *)(this + 1152);
  else
    v2 = &Src;
  CChar::WriteInSight(this, 61, "dbbs", *(_DWORD *)(this + 28), 11, a2, v2);
}
// 45F640: using guessed type _DWORD __stdcall sub_45F640(_DWORD);
// 471490: using guessed type int __thiscall sub_471490(_DWORD);

//----- (0045F640) --------------------------------------------------------
int __thiscall CChar::IsGStateExcept(_DWORD *this, int a2)
{
  return this[70] & ~a2;
}

//----- (0045F660) --------------------------------------------------------
void __thiscall CPlayer::BuyItemAtStall(_DWORD *this, int a1, int a3, int a4, void *Src, int end)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // esi
  char v11[4]; // [esp+8h] [ebp-3Ch] BYREF
  char v12[4]; // [esp+Ch] [ebp-38h] BYREF
  char v13[4]; // [esp+10h] [ebp-34h] BYREF
  char v14[4]; // [esp+14h] [ebp-30h] BYREF
  int v15; // [esp+18h] [ebp-2Ch]
  int v16; // [esp+1Ch] [ebp-28h]
  char *v17; // [esp+20h] [ebp-24h]
  CIOObject *v18; // [esp+24h] [ebp-20h]
  int v19; // [esp+28h] [ebp-1Ch] BYREF
  CIOObject *v20; // [esp+2Ch] [ebp-18h]
  char v21[4]; // [esp+30h] [ebp-14h] BYREF
  int v22; // [esp+34h] [ebp-10h] BYREF
  int v23; // [esp+38h] [ebp-Ch] BYREF
  char *v24; // [esp+3Ch] [ebp-8h]
  int i; // [esp+40h] [ebp-4h]

  if ( CChar::IsGState(this, 16) )
  {
    if ( this[305] == a3 )
    {
      if ( a4 + CPlayer::GetInvenSize((_DWORD *)a1) <= 60 )
      {
        sub_45FA10(this, a1);
        for ( i = 0; i < a4; ++i )
        {
          Src = ScanPacket((char *)Src, (char *)end, "dd", &v23, &v19);
          if ( v19 > 0 )
          {
            sub_4714F0(&v22, &v23);
            v6 = sub_430C20(v14);
            if ( (unsigned __int8)unknown_libname_16(v6) )
            {
              CPlayer::Write(a1, 68, "bd", 45, v23);
            }
            else
            {
              v16 = sub_420250(&v22) + 4;
              v7 = sub_45F9A0(v16);
              if ( v19 <= v7 )
              {
                sub_44AE20(v21, &v23);
                v8 = sub_430C20(v13);
                if ( (unsigned __int8)unknown_libname_16(v8)
                  || (v9 = sub_45F9A0(v16), v9 > *(_DWORD *)(*(_DWORD *)(sub_420250(v21) + 4) + 52)) )
                {
                  CPlayer::Write(a1, 67, "b", 47);
                  sub_470CA0(v12, v22);
                }
                else
                {
                  v15 = *(_DWORD *)(v16 + 26) * v19;
                  if ( v15 <= 0 )
                    break;
                  v18 = *(CIOObject **)(a1 + 1096);
                  if ( !v18 || v15 > *((_DWORD *)v18 + 13) )
                    break;
                  v20 = *(CIOObject **)(sub_420250(v21) + 4);
                  v17 = (char *)(*(int (__thiscall **)(CIOObject *, _DWORD *, int, int))(*(_DWORD *)v20 + 132))(
                                  v20,
                                  this,
                                  26,
                                  v19);
                  if ( v17 == (char *)v20 )
                    CPlayer::_OutofInven(v20);
                  if ( CPlayer::_InsertItem((_DWORD *)a1, 26, (CIOObject *)v17) != 1 )
                    CBase::Delete(v17);
                  v24 = (char *)(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v18 + 132))(
                                  v18,
                                  a1,
                                  26,
                                  v15);
                  if ( v24 == (char *)v18 )
                    CPlayer::_OutofInven(v18);
                  if ( CPlayer::_InsertItem(this, 26, (CIOObject *)v24) != 1 )
                    CBase::Delete(v24);
                  if ( !sub_45F9D0(v19) )
                    sub_470CA0(v11, v22);
                }
              }
              else
              {
                CPlayer::Write(a1, 68, "bd", 46, v23);
              }
            }
          }
        }
        sub_45FA60(this, a1);
        CPlayer::GetStallInfo((int)this, 0, a1);
        CPlayer::GetStallInfo((int)this, 0, (int)this);
      }
      else
      {
        CPlayer::Write(a1, 67, "b", 40);
      }
    }
    else
    {
      CPlayer::GetStallInfo((int)this, 0, a1);
      CPlayer::Write(a1, 67, "b", 48);
    }
  }
  else
  {
    CPlayer::Write(a1, 67, "b", 50);
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 45F9A0: using guessed type int __thiscall sub_45F9A0(_DWORD);
// 45F9D0: using guessed type _DWORD __stdcall sub_45F9D0(_DWORD);
// 45FA10: using guessed type _DWORD __cdecl sub_45FA10(_DWORD, _DWORD);
// 45FA60: using guessed type _DWORD __cdecl sub_45FA60(_DWORD, _DWORD);
// 470CA0: using guessed type _DWORD __stdcall sub_470CA0(_DWORD, _DWORD);
// 4714F0: using guessed type _DWORD __stdcall sub_4714F0(_DWORD, _DWORD);

//----- (0045F9A0) --------------------------------------------------------
int __thiscall sub_45F9A0(int this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( (*(_DWORD *)(this + 7) & 0x20) != 0 )
    v2 = 1;
  else
    v2 = *(_DWORD *)(this + 11);
  return v2;
}

//----- (0045F9D0) --------------------------------------------------------
int __thiscall sub_45F9D0(int this, int a2)
{
  if ( (*(_DWORD *)(this + 7) & 0x20) != 0 )
    return 0;
  *(_DWORD *)(this + 11) -= a2;
  return *(_DWORD *)(this + 11);
}

//----- (0045FA10) --------------------------------------------------------
void __cdecl sub_45FA10(unsigned int a1, unsigned int a2)
{
  if ( a1 >= a2 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(a2 + 1020));
    CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 1020));
  }
  else
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 1020));
    CIOCriticalSection::Enter((CIOCriticalSection *)(a2 + 1020));
  }
}

//----- (0045FA60) --------------------------------------------------------
void __cdecl sub_45FA60(int a1, int a2)
{
  CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 1020));
  CIOCriticalSection::Leave((CIOCriticalSection *)(a2 + 1020));
}

//----- (0045FA90) --------------------------------------------------------
void __thiscall CPlayer::AskParty(_DWORD *this, int a2)
{
  volatile int *v3; // [esp+4h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-8h]
  CIOObject *v5; // [esp+Ch] [ebp-4h]

  if ( this[7] != a2 && !CChar::IsGState(this, 144) )
  {
    CChar::Lock((int)this);
    v4 = this[254];
    if ( v4 )
    {
      v3 = (volatile int *)CParty::FindParty(v4);
      if ( v3 )
      {
        if ( !CParty::IsHead((int)v3, (int)this) )
        {
          CChar::Unlock((int)this);
          CPlayer::Write((int)this, 67, "b", 27);
          CIOObject::Release(v3);
          return;
        }
        CIOObject::Release(v3);
      }
    }
    CChar::Unlock((int)this);
    if ( CChar::IsGState(this, 256) )
    {
      CPlayer::Write((int)this, 95, "b", 12);
    }
    else
    {
      v5 = sub_450810(a2);
      if ( v5 )
      {
        if ( CChar::IsGState(v5, 256) )
        {
          CPlayer::Write((int)this, 95, "b", 13);
          CIOObject::Release(v5, (volatile int *)v5 + 88);
        }
        else
        {
          if ( !CChar::IsGState(v5, 144) )
          {
            if ( *((_DWORD *)v5 + 254) )
            {
              CPlayer::Write((int)this, 68, "bs", 31, (char *)v5 + 32);
            }
            else
            {
              CPlayer::Write((int)v5, 82, "d", this[7]);
              CPlayer::Write((int)this, 68, "bs", 28, (char *)v5 + 32);
            }
          }
          CIOObject::Release(v5, (volatile int *)v5 + 88);
        }
      }
      else
      {
        CPlayer::Write((int)this, 67, "b", 37);
      }
    }
  }
}

//----- (0045FC60) --------------------------------------------------------
void __thiscall CPlayer::OnAskParty(CIOObject *this, int a2, int a3)
{
  CIOObject *v4; // [esp+4h] [ebp-4h]

  if ( *((_DWORD *)this + 7) != a3 && !CChar::IsGState(this, 144) )
  {
    v4 = sub_450810(a3);
    if ( v4 )
    {
      if ( CChar::IsGState(v4, 128) )
      {
        CPlayer::Write((int)this, 67, "b", 61);
      }
      else if ( sub_448870((_DWORD *)v4 + 83, (_DWORD *)this + 83) > 320 )
      {
        CPlayer::Write((int)this, 67, "b", 37);
      }
      else if ( a2 )
      {
        CParty::Accept(v4, this);
      }
      else
      {
        CPlayer::Write((int)v4, 68, "bs", 34, (char *)this + 32);
      }
      CIOObject::Release(v4, (volatile int *)v4 + 88);
    }
    else
    {
      CPlayer::Write((int)this, 67, "b", 37);
    }
  }
}

//----- (0045FD70) --------------------------------------------------------
void __thiscall CPlayer::LeaveParty(CIOObject *this)
{
  volatile int *v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  v3 = *((_DWORD *)this + 254);
  if ( v3 )
  {
    v2 = (volatile int *)CParty::FindParty(v3);
    if ( v2 )
    {
      CParty::Leave((int)v2, this);
      CIOObject::Release(v2);
    }
  }
}

//----- (0045FDC0) --------------------------------------------------------
void __thiscall CPlayer::ExileParty(_DWORD *this, int a2)
{
  CIOObject *v3; // [esp+4h] [ebp-Ch]
  volatile int *v4; // [esp+8h] [ebp-8h]
  int v5; // [esp+Ch] [ebp-4h]

  if ( this[7] != a2 )
  {
    v5 = this[254];
    if ( v5 )
    {
      v4 = (volatile int *)CParty::FindParty(v5);
      if ( v4 )
      {
        v3 = sub_450810(a2);
        if ( v3 )
        {
          CParty::Exile((int)v4, (int)this, v3);
          CIOObject::Release(v3, (volatile int *)v3 + 88);
        }
        CIOObject::Release(v4);
      }
    }
  }
}

//----- (0045FE50) --------------------------------------------------------
unsigned int __thiscall CPlayer::GetPartySize(_DWORD *this)
{
  volatile int *v2; // [esp+4h] [ebp-Ch]
  int v3; // [esp+8h] [ebp-8h]
  unsigned int v4; // [esp+Ch] [ebp-4h]

  v4 = 0;
  v3 = this[254];
  if ( v3 )
  {
    v2 = (volatile int *)CParty::FindParty(v3);
    if ( v2 )
    {
      v4 = CParty::GetSize((int)v2);
      CIOObject::Release(v2);
    }
  }
  return v4;
}

//----- (0045FEB0) --------------------------------------------------------
void __thiscall CPlayer::UpdatePartyMember(_DWORD *this, int a2)
{
  volatile int *v3; // [esp+8h] [ebp-8h]
  int v4; // [esp+Ch] [ebp-4h]

  v4 = this[254];
  if ( v4 )
  {
    v3 = (volatile int *)CParty::FindParty(v4);
    if ( v3 )
    {
      if ( a2 == 7 )
      {
        CParty::UpdateMemberHP((int)v3, this);
      }
      else if ( a2 == 26 )
      {
        CParty::UpdateMemberLevel((int)v3, this);
      }
      CIOObject::Release(v3);
    }
  }
}

//----- (0045FF20) --------------------------------------------------------
void __thiscall CPlayer::SaveQuestFlag(int this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  char v8[4]; // [esp+10h] [ebp-20h] BYREF
  char v9[8]; // [esp+14h] [ebp-1Ch] BYREF
  int v10[2]; // [esp+1Ch] [ebp-14h] BYREF
  int v11; // [esp+24h] [ebp-Ch] BYREF
  int v12; // [esp+28h] [ebp-8h]
  char v13[4]; // [esp+2Ch] [ebp-4h] BYREF

  v11 = a2 >> 16;
  v12 = (unsigned __int16)a2;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
  sub_471840(v13, &v11);
  v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v8);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v13,
         v3) )
  {
    v4 = sub_420250(v13);
    if ( v12 <= *(_DWORD *)(v4 + 4) )
    {
      LOG_ERR(
        "CPlayer::SaveQuestFlag() Already saved quest flag. (pid:%d, quest:%d, flag:%d)",
        *(_DWORD *)(this + 452),
        v11,
        v12);
    }
    else
    {
      v5 = sub_420250(v13);
      *(_DWORD *)(v5 + 4) = v12;
      *(_DWORD *)(sub_420250(v13) + 8) = a3;
      CPlayer::Write(this, 86, "wbb", v11, v12, a3);
      CDBSocket::Write(14, "dwbb", *(_DWORD *)(this + 452), v11, v12, a3);
    }
  }
  else
  {
    v10[0] = v12;
    v10[1] = a3;
    v6 = sub_472860(&v11, v10);
    sub_4715D0(
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v9,
      v6);
    if ( !v9[4] )
      LOG_ERR(
        "CPlayer::SaveQuestFlag() Failed to save quest flag. (pid:%d, quest:%d, flag:%d)",
        *(_DWORD *)(this + 452),
        v11,
        v12);
    CPlayer::Write(this, 86, "wbb", v11, v12, a3);
    CDBSocket::Write(13, "dwbb", *(_DWORD *)(this + 452), v11, v12, a3);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 4715D0: using guessed type _DWORD __stdcall sub_4715D0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 471840: using guessed type _DWORD __stdcall sub_471840(_DWORD, _DWORD);
// 472860: using guessed type _DWORD __stdcall sub_472860(_DWORD, _DWORD);

//----- (004600D0) --------------------------------------------------------
BOOL __thiscall CPlayer::CheckQuestFlag(int this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  int v4; // edx
  char v7[4]; // [esp+4h] [ebp-18h] BYREF
  int v8; // [esp+8h] [ebp-14h] BYREF
  int v9; // [esp+Ch] [ebp-10h]
  int v10; // [esp+10h] [ebp-Ch]
  int v11; // [esp+14h] [ebp-8h]
  char v12[4]; // [esp+18h] [ebp-4h] BYREF

  v8 = a2 >> 16;
  v11 = (unsigned __int16)a2;
  v9 = 0;
  v10 = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
  sub_471840(v12, &v8);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v12,
         v2) )
  {
    v3 = sub_420250(v12);
    v4 = *(_DWORD *)(v3 + 8);
    v9 = *(_DWORD *)(v3 + 4);
    v10 = v4;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
  return v9 == v11;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 471840: using guessed type _DWORD __stdcall sub_471840(_DWORD, _DWORD);

//----- (00460180) --------------------------------------------------------
int __thiscall CPlayer::CheckQuestClear(int this, char a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  int v3; // eax
  int v4; // edx
  char v7[4]; // [esp+4h] [ebp-10h] BYREF
  int v8; // [esp+8h] [ebp-Ch]
  int v9; // [esp+Ch] [ebp-8h]
  char v10[4]; // [esp+10h] [ebp-4h] BYREF

  v8 = 0;
  v9 = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
  sub_471840(v10, &a2);
  v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v10,
         v2) )
  {
    v3 = sub_420250(v10);
    v4 = *(_DWORD *)(v3 + 8);
    v8 = *(_DWORD *)(v3 + 4);
    v9 = v4;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
  return v9;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 471840: using guessed type _DWORD __stdcall sub_471840(_DWORD, _DWORD);

//----- (00460210) --------------------------------------------------------
void __thiscall CPlayer::QuestGuide(int this, int a2)
{
  int v2; // eax
  char v4[4]; // [esp+4h] [ebp-18h] BYREF
  char v5[4]; // [esp+8h] [ebp-14h] BYREF
  int i; // [esp+Ch] [ebp-10h]
  int v7; // [esp+10h] [ebp-Ch]
  int v8; // [esp+14h] [ebp-8h] BYREF
  int v9; // [esp+18h] [ebp-4h]

  v9 = 200046;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
  for ( i = 0; i < dword_4E1FF0; ++i )
  {
    v7 = dword_4D63D4[3 * i];
    if ( *(_DWORD *)(this + 60) < v7 )
    {
      v9 = 200035;
      break;
    }
    v8 = dword_4D63D0[3 * i];
    sub_471840(v5, &v8);
    v2 = sub_430C20(v4);
    if ( (unsigned __int8)unknown_libname_16(v2) )
    {
      v9 = dword_4D63D8[3 * i];
      break;
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
  CPlayer::Write(this, 74, "d", v9);
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 471840: using guessed type _DWORD __stdcall sub_471840(_DWORD, _DWORD);
// 4D63D0: using guessed type int dword_4D63D0[];
// 4D63D4: using guessed type int dword_4D63D4[];
// 4E1FF0: using guessed type int dword_4E1FF0;

//----- (00460300) --------------------------------------------------------
void __thiscall CPlayer::AskPvP(_DWORD *this, int a2)
{
  CIOObject *v3; // [esp+4h] [ebp-4h]

  if ( this[7] != a2 )
  {
    v3 = sub_450810(a2);
    if ( v3 )
    {
      sub_460490(this, v3);
      if ( !CChar::IsNormal((int)this)
        || CPlayer::IsEState(this, 1)
        || this[275]
        || CChar::IsGState(this, 144)
        || this[379] )
      {
        CPlayer::Write((int)this, 68, "bb", 62, 0);
      }
      else if ( !CChar::IsNormal((int)v3)
             || CPlayer::IsEState(v3, 1)
             || *((_DWORD *)v3 + 275)
             || CChar::IsGState(v3, 144)
             || this[379] )
      {
        CPlayer::Write((int)this, 68, "bb", 62, 1);
      }
      else if ( sub_448870(this + 83, (_DWORD *)v3 + 83) <= 160 )
      {
        CPlayer::Write((int)v3, 96, "d", this[7]);
      }
      else
      {
        CPlayer::Write((int)this, 67, "b", 63);
      }
      sub_44D620((int)this, (int)v3);
      CIOObject::Release(v3, (volatile int *)v3 + 88);
    }
    else
    {
      CPlayer::Write((int)this, 67, "b", 63);
    }
  }
}
// 460490: using guessed type _DWORD __cdecl sub_460490(_DWORD, _DWORD);

//----- (00460490) --------------------------------------------------------
void __cdecl sub_460490(unsigned int a1, unsigned int a2)
{
  if ( a1 >= a2 )
  {
    CChar::Lock(a2);
    CChar::Lock(a1);
  }
  else
  {
    CChar::Lock(a1);
    CChar::Lock(a2);
  }
}

//----- (004604C0) --------------------------------------------------------
void __thiscall CPlayer::OnAskPvP(int this, int a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // [esp-4h] [ebp-10h]
  int i; // [esp+4h] [ebp-8h]
  CIOObject *v8; // [esp+8h] [ebp-4h]

  if ( *(_DWORD *)(this + 28) != a3 )
  {
    v8 = sub_450810(a3);
    if ( v8 )
    {
      sub_460490(this, v8);
      if ( !CChar::IsNormal(this)
        || CPlayer::IsEState((_DWORD *)this, 1)
        || *(_DWORD *)(this + 1100)
        || CChar::IsGState((_DWORD *)this, 144)
        || *(_DWORD *)(this + 1516) )
      {
        CPlayer::Write(this, 68, "bb", 62, 0);
      }
      else if ( !CChar::IsNormal((int)v8)
             || CPlayer::IsEState(v8, 1)
             || *((_DWORD *)v8 + 275)
             || CChar::IsGState(v8, 144)
             || *(_DWORD *)(this + 1516) )
      {
        CPlayer::Write(this, 68, "bb", 62, 1);
      }
      else if ( sub_448870((_DWORD *)(this + 332), (_DWORD *)v8 + 83) <= 160 )
      {
        if ( a2 )
        {
          CIOObject::AddRef(this);
          CChar::AddGState((volatile LONG *)this, 128);
          CPlayer::Write(this, 46, "dd", *(_DWORD *)(this + 28), *(_DWORD *)(this + 280));
          *(_DWORD *)(this + 1516) = v8;
          CIOObject::AddRef(v8);
          CChar::AddGState((volatile LONG *)v8, 128);
          v5 = *((_DWORD *)v8 + 70);
          v3 = std___Mpunct_wchar_t___do_frac_digits(v8);
          CPlayer::Write((int)v8, 46, "dd", v3, v5);
          *((_DWORD *)v8 + 379) = this;
          *((_DWORD *)v8 + 378) = InterlockedIncrement(&dword_4E1FFC);
          *(_DWORD *)(this + 1512) = *((_DWORD *)v8 + 378);
          for ( i = sub_4934F0(this + 324, 5); i; i = CBaseList::Pop(i) )
          {
            v4 = unknown_libname_15(i);
            CPlayer::Write(v4, 68, "bbss", 65, 5, (char *)v8 + 32, this + 32);
          }
        }
        else
        {
          CPlayer::Write((int)v8, 68, "bs", 64, this + 32);
        }
      }
      else
      {
        CPlayer::Write(this, 67, "b", 63);
      }
      sub_44D620(this, (int)v8);
      CIOObject::Release(v8, (volatile int *)v8 + 88);
    }
    else
    {
      CPlayer::Write(this, 67, "b", 63);
    }
  }
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 460490: using guessed type _DWORD __cdecl sub_460490(_DWORD, _DWORD);
// 4934F0: using guessed type _DWORD __stdcall sub_4934F0(_DWORD, _DWORD);

//----- (00460770) --------------------------------------------------------
void __thiscall CPlayer::OnPvP(int this)
{
  int v1; // eax
  volatile int *v3; // [esp+4h] [ebp-4h]

  v3 = *(volatile int **)(this + 1516);
  if ( !v3 )
    EBREAK();
  if ( CChar::IsNormal((int)v3) && *(_DWORD *)(this + 1512) == *((_DWORD *)v3 + 378) )
  {
    if ( *(_DWORD *)(this + 1520) < 4u )
    {
      if ( *(_DWORD *)(this + 28) >= std___Mpunct_wchar_t___do_frac_digits(v3) )
      {
        if ( ++*(_DWORD *)(this + 1520) >= 4u )
        {
          v1 = std___Mpunct_wchar_t___do_frac_digits(v3);
          CPlayer::Write(this, 68, "bbd", 65, 1, v1);
          CPlayer::Write((int)v3, 68, "bbd", 65, 1, *(_DWORD *)(this + 28));
        }
        else
        {
          CPlayer::Write(this, 68, "bbsb", 65, 0, v3 + 8, 4 - *(_DWORD *)(this + 1520));
          CPlayer::Write((int)v3, 68, "bbsb", 65, 0, this + 32, 4 - *(_DWORD *)(this + 1520));
        }
      }
    }
    else if ( ++*(_DWORD *)(this + 1520) >= 0x258u )
    {
      CPlayer::EndPvP(v3, 4, 4, 7);
    }
  }
  else
  {
    *(_DWORD *)(this + 1512) = 0;
    *(_DWORD *)(this + 1516) = 0;
    *(_DWORD *)(this + 1520) = 0;
    CChar::SubGState((volatile LONG *)this, 128);
    CPlayer::Write(this, 46, "dd", *(_DWORD *)(this + 28), *(_DWORD *)(this + 280));
    CIOObject::Release(v3);
  }
}
// 460940: using guessed type _DWORD __stdcall CPlayer::EndPvP(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00460940) --------------------------------------------------------
void __thiscall CPlayer::EndPvP(int this, volatile int *a2, int a3, int a4, int a5)
{
  int v5; // eax
  int i; // [esp+4h] [ebp-4h]

  CPlayer::Write(this, 68, "bbs", 65, a3, a2 + 8);
  CPlayer::Write((int)a2, 68, "bbs", 65, a4, this + 32);
  for ( i = sub_4934F0(this + 324, 5); i; i = CBaseList::Pop(i) )
  {
    v5 = unknown_libname_15(i);
    CPlayer::Write(v5, 68, "bbss", 65, a5, this + 32, a2 + 8);
  }
  *(_DWORD *)(this + 1512) = 0;
  *(_DWORD *)(this + 1516) = 0;
  *(_DWORD *)(this + 1520) = 0;
  CChar::SubGState((volatile LONG *)this, 128);
  CPlayer::Write(this, 46, "dd", *(_DWORD *)(this + 28), *(_DWORD *)(this + 280));
  CIOObject::Release(a2);
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 4934F0: using guessed type _DWORD __stdcall sub_4934F0(_DWORD, _DWORD);

//----- (00460A50) --------------------------------------------------------
void __thiscall CPlayer::ProcessMsg(int this, char *Str1)
{
  CIOBuffer *v2; // [esp-4h] [ebp-70h]
  CIOBuffer *v3; // [esp-4h] [ebp-70h]
  CIOBuffer *v4; // [esp-4h] [ebp-70h]
  int j; // [esp+8h] [ebp-64h]
  CIOBuffer *v7; // [esp+Ch] [ebp-60h]
  int v8; // [esp+10h] [ebp-5Ch] BYREF
  CIOBuffer *v9; // [esp+14h] [ebp-58h]
  int v10; // [esp+18h] [ebp-54h] BYREF
  CIOBuffer *v11; // [esp+1Ch] [ebp-50h]
  CIOBuffer *v12; // [esp+20h] [ebp-4Ch]
  CIOObject *v13; // [esp+24h] [ebp-48h]
  CIOBuffer *v14; // [esp+28h] [ebp-44h]
  CIOObject *v15; // [esp+2Ch] [ebp-40h]
  void *v16; // [esp+30h] [ebp-3Ch]
  volatile int *v17; // [esp+34h] [ebp-38h]
  int v18; // [esp+38h] [ebp-34h]
  void *Src; // [esp+3Ch] [ebp-30h]
  char name; // [esp+40h] [ebp-2Ch] BYREF
  int v21; // [esp+41h] [ebp-2Bh]
  int v22; // [esp+45h] [ebp-27h]
  int v23; // [esp+49h] [ebp-23h]
  int v24; // [esp+4Dh] [ebp-1Fh]
  int v25; // [esp+54h] [ebp-18h]
  CIOObject *v26; // [esp+58h] [ebp-14h]
  size_t Size; // [esp+5Ch] [ebp-10h]
  int i; // [esp+60h] [ebp-Ch]
  CIOBuffer *v29; // [esp+64h] [ebp-8h]
  DWORD v30; // [esp+68h] [ebp-4h]

  v25 = dword_4D9830;
  v30 = GetTickCount();
  if ( *(_DWORD *)(this + 1460) <= v30 )
  {
    *(_DWORD *)(this + 1460) = v30 + 1000;
    switch ( *Str1 )
    {
      case '#':
        v18 = *(_DWORD *)(this + 1016);
        if ( v18 )
        {
          v17 = (volatile int *)CParty::FindParty(v18);
          if ( v17 )
          {
            v16 = (void *)sub_44FCE0(60, "ss", this + 32, Str1);
            CParty::Broadcast((int)v17, v16, 0);
            CIOObject::Release(v17);
          }
        }
        break;
      case '$':
        v15 = (CIOObject *)CPlayer::GetGuild(this);
        if ( v15 )
        {
          v14 = (CIOBuffer *)sub_44FCE0(60, "ss", this + 32, Str1);
          CGuild::BroadcastLock(v14, 0);
          CIOBuffer::Release(v14);
          CIOObject::Release(v15, (volatile int *)v15 + 10);
        }
        break;
      case '&':
        CPlayer::Write(this, 60, "ss", this + 32, Str1);
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
        v10 = 0;
        CPlayer::_MLMGet(&v10, 3);
        v11 = (CIOBuffer *)sub_44FCE0(60, "ss", this + 32, Str1);
        while ( v10 )
        {
          v2 = v11;
          unknown_libname_15(v10);
          CPlayer::Send(v2);
          v10 = CBaseList::Pop(v10);
        }
        CIOBuffer::Release(v11);
        CPlayer::_MLMGet(&v10, 2);
        *Str1 = '*';
        v11 = (CIOBuffer *)sub_44FCE0(60, "ss", this + 32, Str1);
        while ( v10 )
        {
          v3 = v11;
          unknown_libname_15(v10);
          CPlayer::Send(v3);
          v10 = CBaseList::Pop(v10);
        }
        CIOBuffer::Release(v11);
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
        break;
      case '*':
        CPlayer::Write(this, 60, "ss", this + 32, Str1);
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
        v8 = 0;
        CPlayer::_MLMGet(&v8, 4);
        *Str1 = 38;
        v9 = (CIOBuffer *)sub_44FCE0(60, "ss", this + 32, Str1);
        while ( v8 )
        {
          v4 = v9;
          unknown_libname_15(v8);
          CPlayer::Send(v4);
          v8 = CBaseList::Pop(v8);
        }
        CIOBuffer::Release(v9);
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
        break;
      case '/':
        if ( Str1[1] == 'y' && Str1[2] == ' ' )
        {
          if ( CPlayer::RemoveItem(this, 9, 513, 1) || CPlayer::RemoveItem(this, 9, 514, 1) )
          {
            v29 = (CIOBuffer *)sub_44FCE0(60, "ss", this + 32, Str1);
            for ( i = sub_4934F0(this + 324, 50); i; i = CBaseList::Pop(i) )
            {
              unknown_libname_15(i);
              CPlayer::Send(v29);
            }
            CIOBuffer::Release(v29);
          }
        }
        else if ( Str1[1] == 's' && Str1[2] == ' ' )
        {
          if ( CPlayer::RemoveItem(this, 9, 515, 1) || CPlayer::RemoveItem(this, 9, 516, 1) )
            CPlayer::WriteAll(60, "ss", this + 32, Str1);
        }
        else
        {
          CPlayer::ChatCommand(Str1);
        }
        break;
      case '@':
        Src = Str1 + 1;
        name = 0;
        v21 = 0;
        v22 = 0;
        v23 = 0;
        v24 = 0;
        Size = strcspn(Str1 + 1, " ");
        if ( (int)Size <= 16 )
        {
          memcpy(&name, Src, Size);
          if ( IsValidAdminName(&name) )
          {
            v26 = CPlayer::FindPlayer((char)&name);
            if ( v26 )
            {
              if ( v26 != (CIOObject *)this )
              {
                CPlayer::Write(this, 60, "ss", this + 32, Str1);
                CPlayer::Write((int)v26, 60, "ss", this + 32, Str1);
              }
              CIOObject::Release(v26, (volatile int *)v26 + 88);
            }
            else
            {
              CPlayer::Write(this, 67, "b", 25);
            }
          }
        }
        break;
      case '~':
        v13 = (CIOObject *)CPlayer::GetGuild(this);
        if ( v13 )
        {
          v12 = (CIOBuffer *)sub_44FCE0(60, "ss", this + 32, Str1);
          CGuild::AllianceBroadcast(v13, (int)v12);
          CIOBuffer::Release(v12);
          CIOObject::Release(v13, (volatile int *)v13 + 10);
        }
        break;
      default:
        v7 = (CIOBuffer *)sub_44FCE0(60, "ss", this + 32, Str1);
        for ( j = sub_4934F0(this + 324, 25); j; j = CBaseList::Pop(j) )
        {
          unknown_libname_15(j);
          CPlayer::Send(v7);
        }
        CIOBuffer::Release(v7);
        break;
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 44FCE0: using guessed type _DWORD sub_44FCE0(char, ...);
// 450910: using guessed type _DWORD CPlayer::WriteAll(char, ...);
// 466F80: using guessed type _DWORD __stdcall sub_466F80(_DWORD, _DWORD);
// 46AAD0: using guessed type int __thiscall CPlayer::GetGuild(_DWORD);
// 4934F0: using guessed type _DWORD __stdcall sub_4934F0(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00461080) --------------------------------------------------------
void __thiscall CPlayer::ChatCommand(int this, char *Str1)
{
  const char *v2; // eax
  const char *v3; // eax
  const char *v4; // eax
  const char *v5; // eax
  const char *v6; // eax
  const char *v7; // eax
  const char *v8; // eax
  const char *v9; // eax
  const char *v10; // eax
  const char *v11; // eax
  const char *v12; // eax
  int v13; // eax
  const char *v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v21; // eax
  __int64 v22; // rax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v23; // eax
  int v24; // eax
  int v25; // eax
  int v26; // eax
  int v27; // eax
  int v28; // eax
  int v29; // eax
  int v30; // eax
  int v31; // eax
  int v32; // eax
  int v33; // [esp-64h] [ebp-544h]
  int v34; // [esp-60h] [ebp-540h]
  int v35; // [esp-5Ch] [ebp-53Ch]
  int v36; // [esp-58h] [ebp-538h]
  int v37; // [esp-50h] [ebp-530h]
  int v38; // [esp-48h] [ebp-528h]
  int v39; // [esp-44h] [ebp-524h]
  int v40; // [esp-40h] [ebp-520h]
  int v41; // [esp-3Ch] [ebp-51Ch]
  int v42; // [esp-38h] [ebp-518h]
  int v43; // [esp-34h] [ebp-514h]
  int v44; // [esp-30h] [ebp-510h]
  int v45; // [esp-2Ch] [ebp-50Ch]
  int v46; // [esp-28h] [ebp-508h]
  int v47; // [esp-24h] [ebp-504h]
  int v48; // [esp-20h] [ebp-500h]
  int v49; // [esp-1Ch] [ebp-4FCh]
  int v50; // [esp-18h] [ebp-4F8h]
  int v51; // [esp-14h] [ebp-4F4h]
  int v52; // [esp-10h] [ebp-4F0h]
  int v53; // [esp-Ch] [ebp-4ECh]
  int v54; // [esp-8h] [ebp-4E8h]
  int v55; // [esp-4h] [ebp-4E4h]
  _DWORD *v56; // [esp+0h] [ebp-4E0h]
  int v57; // [esp+0h] [ebp-4E0h]
  int v58; // [esp+0h] [ebp-4E0h]
  _DWORD *v59; // [esp+4h] [ebp-4DCh]
  int v60; // [esp+4h] [ebp-4DCh]
  char v61; // [esp+Ch] [ebp-4D4h]
  char v63[8]; // [esp+14h] [ebp-4CCh] BYREF
  char v64[4]; // [esp+28h] [ebp-4B8h] BYREF
  char v65[8]; // [esp+2Ch] [ebp-4B4h] BYREF
  char v66[4]; // [esp+40h] [ebp-4A0h] BYREF
  char v67[4]; // [esp+44h] [ebp-49Ch] BYREF
  char v68[4]; // [esp+48h] [ebp-498h] BYREF
  char v69[4]; // [esp+4Ch] [ebp-494h] BYREF
  int v70; // [esp+50h] [ebp-490h]
  int v71; // [esp+54h] [ebp-48Ch]
  int v72; // [esp+58h] [ebp-488h]
  int v73; // [esp+5Ch] [ebp-484h]
  int v74; // [esp+60h] [ebp-480h]
  int v75; // [esp+64h] [ebp-47Ch]
  int v76; // [esp+68h] [ebp-478h]
  int v77; // [esp+6Ch] [ebp-474h]
  int v78; // [esp+70h] [ebp-470h] BYREF
  char v79[4]; // [esp+74h] [ebp-46Ch] BYREF
  int j; // [esp+78h] [ebp-468h] BYREF
  int v81; // [esp+7Ch] [ebp-464h]
  int v82[2]; // [esp+80h] [ebp-460h] BYREF
  char v83[4]; // [esp+88h] [ebp-458h] BYREF
  char v84[4]; // [esp+8Ch] [ebp-454h] BYREF
  int v85; // [esp+90h] [ebp-450h] BYREF
  int v86; // [esp+94h] [ebp-44Ch] BYREF
  int v87; // [esp+98h] [ebp-448h]
  int v88; // [esp+9Ch] [ebp-444h]
  int v89; // [esp+A0h] [ebp-440h]
  int v90; // [esp+A4h] [ebp-43Ch]
  int v91; // [esp+A8h] [ebp-438h]
  _DWORD *v92; // [esp+ACh] [ebp-434h]
  char v93[4]; // [esp+B0h] [ebp-430h] BYREF
  int v94; // [esp+B4h] [ebp-42Ch]
  int v95; // [esp+B8h] [ebp-428h]
  int v96; // [esp+BCh] [ebp-424h]
  __int64 v97; // [esp+C0h] [ebp-420h]
  int v98; // [esp+C8h] [ebp-418h]
  int v99; // [esp+CCh] [ebp-414h]
  int v100; // [esp+D0h] [ebp-410h] BYREF
  int v101; // [esp+D4h] [ebp-40Ch] BYREF
  _DWORD *v102; // [esp+D8h] [ebp-408h]
  char v103[4]; // [esp+DCh] [ebp-404h] BYREF
  int v104; // [esp+E0h] [ebp-400h] BYREF
  int v105; // [esp+E4h] [ebp-3FCh] BYREF
  int v106; // [esp+E8h] [ebp-3F8h] BYREF
  int v107; // [esp+ECh] [ebp-3F4h]
  char *v108; // [esp+F0h] [ebp-3F0h]
  char *name; // [esp+F4h] [ebp-3ECh]
  int v110; // [esp+F8h] [ebp-3E8h]
  int v111; // [esp+FCh] [ebp-3E4h]
  int v112; // [esp+100h] [ebp-3E0h]
  int v113; // [esp+104h] [ebp-3DCh]
  int v114; // [esp+108h] [ebp-3D8h]
  char *v115; // [esp+10Ch] [ebp-3D4h]
  int v116; // [esp+110h] [ebp-3D0h]
  int v117; // [esp+114h] [ebp-3CCh]
  int v118; // [esp+118h] [ebp-3C8h]
  int v119; // [esp+11Ch] [ebp-3C4h]
  int v120; // [esp+120h] [ebp-3C0h]
  char *v121; // [esp+124h] [ebp-3BCh]
  int v122; // [esp+128h] [ebp-3B8h]
  int v123; // [esp+12Ch] [ebp-3B4h]
  int v124; // [esp+130h] [ebp-3B0h]
  int v125; // [esp+134h] [ebp-3ACh]
  int v126[2]; // [esp+138h] [ebp-3A8h] BYREF
  CIOObject *v127; // [esp+140h] [ebp-3A0h]
  int i; // [esp+144h] [ebp-39Ch]
  char v129[132]; // [esp+148h] [ebp-398h] BYREF
  int v130; // [esp+1CCh] [ebp-314h] BYREF
  char v131[128]; // [esp+1D0h] [ebp-310h] BYREF
  int v132; // [esp+250h] [ebp-290h] BYREF
  int v133; // [esp+254h] [ebp-28Ch] BYREF
  int v134; // [esp+258h] [ebp-288h] BYREF
  int v135; // [esp+25Ch] [ebp-284h] BYREF
  _DWORD v136[3]; // [esp+260h] [ebp-280h] BYREF
  size_t v137; // [esp+26Ch] [ebp-274h]
  CIOObject *v138; // [esp+270h] [ebp-270h]
  int v139; // [esp+274h] [ebp-26Ch]
  char v140[132]; // [esp+278h] [ebp-268h] BYREF
  int v141; // [esp+2FCh] [ebp-1E4h]
  int v142; // [esp+300h] [ebp-1E0h]
  int v143; // [esp+304h] [ebp-1DCh]
  char v144[128]; // [esp+308h] [ebp-1D8h] BYREF
  int v145; // [esp+388h] [ebp-158h]
  int v146; // [esp+38Ch] [ebp-154h]
  int v147; // [esp+390h] [ebp-150h]
  int v148; // [esp+394h] [ebp-14Ch]
  int v149; // [esp+398h] [ebp-148h]
  char *v150; // [esp+39Ch] [ebp-144h]
  int v151; // [esp+3A0h] [ebp-140h]
  int v152; // [esp+3A4h] [ebp-13Ch]
  int v153[2]; // [esp+3A8h] [ebp-138h] BYREF
  int v154; // [esp+3B0h] [ebp-130h]
  volatile int *v155; // [esp+3B4h] [ebp-12Ch]
  char Buffer[132]; // [esp+3B8h] [ebp-128h] BYREF
  int v157; // [esp+43Ch] [ebp-A4h]
  CIOObject *v158; // [esp+440h] [ebp-A0h]
  int v159; // [esp+444h] [ebp-9Ch] BYREF
  int v160; // [esp+448h] [ebp-98h] BYREF
  int v161; // [esp+44Ch] [ebp-94h] BYREF
  CIOObject *v162; // [esp+450h] [ebp-90h]
  int *v163; // [esp+454h] [ebp-8Ch]
  int v164; // [esp+458h] [ebp-88h]
  int v165; // [esp+45Ch] [ebp-84h] BYREF
  _DWORD v166[3]; // [esp+460h] [ebp-80h] BYREF
  int v167; // [esp+46Ch] [ebp-74h]
  CIOObject *v168; // [esp+470h] [ebp-70h]
  volatile int *v170; // [esp+478h] [ebp-68h]
  volatile int *v171; // [esp+47Ch] [ebp-64h]
  int v172; // [esp+480h] [ebp-60h]
  CIOObject *v173; // [esp+484h] [ebp-5Ch]
  int v174; // [esp+488h] [ebp-58h]
  char *v175; // [esp+48Ch] [ebp-54h]
  CIOObject *v176; // [esp+490h] [ebp-50h]
  int v177; // [esp+494h] [ebp-4Ch]
  CIOObject *v178; // [esp+498h] [ebp-48h]
  int v179; // [esp+49Ch] [ebp-44h]
  CIOObject *v180; // [esp+4A0h] [ebp-40h]
  int v181; // [esp+4A4h] [ebp-3Ch]
  char *Str; // [esp+4A8h] [ebp-38h]
  CIOObject *v183; // [esp+4ACh] [ebp-34h]
  char *v184; // [esp+4B0h] [ebp-30h]
  int v185; // [esp+4B4h] [ebp-2Ch]
  CIOObject *v186; // [esp+4B8h] [ebp-28h]
  int v187; // [esp+4BCh] [ebp-24h]
  CIOObject *v188; // [esp+4C0h] [ebp-20h]
  char *v189; // [esp+4C4h] [ebp-1Ch]
  char *v190; // [esp+4C8h] [ebp-18h]
  int v191; // [esp+4CCh] [ebp-14h]
  CIOObject *v192; // [esp+4D0h] [ebp-10h]
  int v193; // [esp+4D4h] [ebp-Ch]
  CIOObject *v194; // [esp+4D8h] [ebp-8h]
  size_t v195; // [esp+4DCh] [ebp-4h]
  char *Str1a; // [esp+4E8h] [ebp+8h]
  char *Str1b; // [esp+4E8h] [ebp+8h]
  char *Str1c; // [esp+4E8h] [ebp+8h]
  char *Str1d; // [esp+4E8h] [ebp+8h]
  char *Str1e; // [esp+4E8h] [ebp+8h]
  char *Str1f; // [esp+4E8h] [ebp+8h]

  v157 = dword_4D9830;
  if ( dword_4E35B8 == 1 && *(int *)(this + 456) >= 3 )
    LOG_NORMAL(
      "[GM Command] %s(PID:%d, Admin:%d) : %s",
      (const char *)(this + 32),
      *(_DWORD *)(this + 452),
      *(_DWORD *)(this + 456),
      Str1);
  v195 = strcspn(Str1, " ");
  if ( Str1[v195] )
    Str1[v195++] = 0;
  v2 = GetStr(903);
  if ( !strcmp(Str1, v2) )
  {
    v194 = (CIOObject *)CPlayer::GetGuild(this);
    if ( v194 )
    {
      v193 = CGuild::Conflux(v194, this, (int)&Str1[v195]);
      CIOObject::Release(v194, (volatile int *)v194 + 10);
      if ( v193 )
        CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v193);
    }
  }
  else
  {
    v3 = GetStr(904);
    if ( !strcmp(Str1, v3) )
    {
      v192 = (CIOObject *)CPlayer::GetGuild(this);
      if ( v192 )
      {
        v191 = CGuild::Banish(v192, this, &Str1[v195]);
        CIOObject::Release(v192, (volatile int *)v192 + 10);
        if ( v191 )
          CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v191);
      }
    }
    else
    {
      v4 = GetStr(905);
      if ( !strcmp(Str1, v4) )
      {
        v190 = &Str1[v195];
        v195 = strcspn(&Str1[v195], " ");
        if ( v190[v195] )
          v190[v195++] = 0;
        v189 = &v190[v195];
        v188 = (CIOObject *)CPlayer::GetGuild(this);
        if ( v188 )
        {
          v187 = CGuild::Appointment(v188, this, v190, v189);
          CIOObject::Release(v188, (volatile int *)v188 + 10);
          if ( v187 )
            CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v187);
        }
      }
      else
      {
        v5 = GetStr(906);
        if ( !strcmp(Str1, v5) )
        {
          v186 = (CIOObject *)CPlayer::GetGuild(this);
          if ( v186 )
          {
            v185 = CGuild::Dissolution((int)v186, this);
            CIOObject::Release(v186, (volatile int *)v186 + 10);
            if ( v185 )
              CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v185);
          }
        }
        else
        {
          v6 = GetStr(907);
          if ( !strcmp(Str1, v6) )
          {
            v184 = &Str1[v195];
            v195 = strcspn(&Str1[v195], " ");
            if ( v184[v195] )
              v184[v195++] = 0;
            Str = &v184[v195];
            if ( strlen(&v184[v195]) <= 0xE && IsValidName(Str) )
            {
              v183 = (CIOObject *)CPlayer::GetGuild(this);
              if ( v183 )
              {
                v181 = CGuild::TitleChange((int)v183, this, v184, Str);
                CIOObject::Release(v183, (volatile int *)v183 + 10);
                if ( v181 )
                  CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v181);
              }
            }
            else
            {
              CPlayer::Write(this, 94, "bb", 0, 45);
            }
          }
          else
          {
            v7 = GetStr(908);
            if ( !strcmp(Str1, v7) )
            {
              v180 = (CIOObject *)CPlayer::GetGuild(this);
              if ( v180 )
              {
                v179 = CGuild::SetConnectTell(this, 1);
                CIOObject::Release(v180, (volatile int *)v180 + 10);
                if ( v179 )
                  CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v179);
              }
            }
            else
            {
              v8 = GetStr(909);
              if ( !strcmp(Str1, v8) )
              {
                v178 = (CIOObject *)CPlayer::GetGuild(this);
                if ( v178 )
                {
                  v177 = CGuild::SetConnectTell(this, 0);
                  CIOObject::Release(v178, (volatile int *)v178 + 10);
                  if ( v177 )
                    CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v177);
                }
              }
              else
              {
                v9 = GetStr(910);
                if ( !strcmp(Str1, v9) )
                {
                  v176 = (CIOObject *)CPlayer::GetGuild(this);
                  if ( v176 )
                  {
                    CGuild::GetTodayMessage((char *)v176, this);
                    CIOObject::Release(v176, (volatile int *)v176 + 10);
                  }
                }
                else
                {
                  v10 = GetStr(918);
                  if ( !strcmp(Str1, v10) )
                  {
                    v175 = &Str1[v195];
                    v195 = strcspn(&Str1[v195], " ");
                    if ( v175[v195] )
                      v175[v195++] = 0;
                    v174 = j__atol(&v175[v195]);
                    v173 = (CIOObject *)CPlayer::GetGuild(this);
                    if ( v173 )
                    {
                      v172 = CGuild::AllianceOffer(v173, this, v175, v174);
                      CIOObject::Release(v173, (volatile int *)v173 + 10);
                      if ( v172 )
                        CPlayer::Write(this, 94, "bb", 0, (unsigned __int8)v172);
                    }
                  }
                  else
                  {
                    v11 = GetStr(911);
                    if ( !strcmp(Str1, v11) )
                    {
                      CChar::Lock(this);
                      if ( CChar::IsGState((_DWORD *)this, 128) )
                      {
                        v171 = *(volatile int **)(this + 1516);
                        if ( !v171 )
                          EBREAK();
                        CPlayer::EndPvP(this, v171, 3, 2, 6);
                      }
                      CChar::Unlock(this);
                    }
                    else
                    {
                      v12 = GetStr(900);
                      if ( !strcmp(Str1, v12) )
                      {
                        if ( CChar::IsGState((_DWORD *)this, 256) )
                        {
                          CPlayer::Write(this, 95, "b", 15);
                        }
                        else
                        {
                          CChar::Lock(this);
                          *(_DWORD *)(this + 272) = 0;
                          if ( CChar::IsGState((_DWORD *)this, 0x8000) )
                            CPlayer::Write(this, 67, "b", 89);
                          CChar::SubGState((volatile LONG *)this, 32772);
                          CChar::SubMState((_DWORD *)this, 1, 0);
                          CChar::AddGState((volatile LONG *)this, 2);
                          if ( CChar::IsGState((_DWORD *)this, 128) )
                          {
                            v170 = *(volatile int **)(this + 1516);
                            if ( !v170 )
                              EBREAK();
                            CPlayer::EndPvP(this, v170, 3, 2, 6);
                            CPlayer::AddEState((_DWORD *)this, 16);
                          }
                          CChar::Unlock(this);
                          if ( CChar::IsGState((_DWORD *)this, 1024) )
                          {
                            (*(void (__thiscall **)(int, int))(*(_DWORD *)this + 112))(this, 1024);
                            v13 = CPlayer::GetGID(this);
                            CCastle::UnfurlStandardCancel(v13);
                          }
                          CChar::CancelBuffPrty(-161);
                          if ( CChar::IsGState((_DWORD *)this, 16) )
                            CPlayer::SwitchStall(this, 0);
                          if ( CChar::IsGState((_DWORD *)this, 512) )
                            CPlayer::FreeTransform(this);
                          CPlayer::BreakStandard(this);
                          CChar::WriteInSight(this, 61, "db", *(_DWORD *)(this + 28), 9);
                          *(_DWORD *)(this + 1448) = GetTickCount() + 20000;
                          *(_DWORD *)(this + 1452) = GetTickCount() + 20000;
                          CPlayer::UpdatePartyMember((_DWORD *)this, 7);
                        }
                      }
                      else
                      {
                        v14 = GetStr(902);
                        if ( !strcmp(Str1, v14) )
                        {
                          CPlayer::Write(this, 68, "bb", 41, *(_DWORD *)(this + 572));
                        }
                        else if ( *(int *)(this + 456) >= 3 )
                        {
                          if ( !strcmp(Str1, "/hide") )
                          {
                            if ( j__atol(&Str1[v195]) )
                              (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)this + 104))(this, 0x80000, 0);
                            else
                              (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)this + 124))(this, 0x80000, 0);
                          }
                          else if ( !strcmp(Str1, "/kick") )
                          {
                            v168 = CPlayer::FindPlayer(v195 + (_BYTE)Str1);
                            if ( v168 )
                            {
                              CPlayer::Write((int)v168, 45, "b", 1);
                              v167 = *((_DWORD *)v168 + 5);
                              sub_495B20(1);
                              LOG_NORMAL(
                                "[Kickout] At  '%s' (PID:%d) %p %p %x %x %x",
                                (const char *)v168 + 32,
                                *((_DWORD *)v168 + 113),
                                v168,
                                *(const void **)(*((_DWORD *)v168 + 419) + 120),
                                v167,
                                *((_DWORD *)v168 + 5),
                                *(_DWORD *)(*((_DWORD *)v168 + 419) + 108));
                              CIOObject::Release(v168, (volatile int *)v168 + 88);
                            }
                          }
                          else if ( !strcmp(Str1, "/dlehd") )
                          {
                            if ( !CChar::IsGStateExcept((_DWORD *)this, -1040384) )
                            {
                              Str1a = &Str1[v195];
                              v61 = *Str1a;
                              if ( *Str1a == 35 )
                              {
                                v164 = j__atol(Str1a + 1);
                                if ( v164 >= 0 && v164 < dword_4E35AC )
                                {
                                  v163 = (int *)((char *)&unk_4D77C8 + 28 * v164);
                                  CPlayer::Teleport((_DWORD *)this, *v163, v163 + 1, v163[3], 1);
                                }
                              }
                              else if ( v61 == 36 )
                              {
                                v162 = CPlayer::FindPlayer((_BYTE)Str1a + 1);
                                if ( v162 )
                                {
                                  CPlayer::Teleport(
                                    (_DWORD *)this,
                                    *((_DWORD *)v162 + 79),
                                    (_DWORD *)v162 + 83,
                                    *((_DWORD *)v162 + 85),
                                    1);
                                  CIOObject::Release(v162, (volatile int *)v162 + 88);
                                }
                              }
                              else if ( v61 == 64 )
                              {
                                if ( CGoto::FindGoto(Str1a + 1, &v165) )
                                  CPlayer::Teleport((_DWORD *)this, v165, v166, v166[2], 1);
                              }
                              else if ( sscanf(Str1a, "%d %d %d", &v161, &v159, &v160) == 3 )
                              {
                                v159 += 32;
                                v160 += 32;
                                CPlayer::Teleport((_DWORD *)this, v161, &v159, 0, 1);
                              }
                            }
                          }
                          else if ( !strcmp(Str1, "/info") )
                          {
                            v158 = CPlayer::FindPlayer(v195 + (_BYTE)Str1);
                            if ( v158 )
                            {
                              sprintf(
                                Buffer,
                                "[%s] (uid:%d, pid:%d, class:%d, level:%d)",
                                (const char *)v158 + 32,
                                *((_DWORD *)v158 + 112),
                                *((_DWORD *)v158 + 113),
                                *((_DWORD *)v158 + 115),
                                *((_DWORD *)v158 + 15));
                              CIOObject::Release(v158, (volatile int *)v158 + 88);
                            }
                            else
                            {
                              sprintf(Buffer, "[%s] isn't in player list", &Str1[v195]);
                            }
                            CPlayer::Write(this, 15, "s", Buffer);
                          }
                          else if ( !strcmp(Str1, "/move") )
                          {
                            v154 = j__atol(&Str1[v195]);
                            v155 = (volatile int *)CMonster::ScanMonster(v154);
                            if ( v155 )
                            {
                              v153[0] = *((_DWORD *)v155 + 83) + 32;
                              v153[1] = *((_DWORD *)v155 + 84) + 32;
                              CPlayer::Teleport((_DWORD *)this, *((_DWORD *)v155 + 79), v153, 0, 1);
                              CIOObject::Release(v155);
                            }
                          }
                          else if ( !strcmp(Str1, "/useral") )
                          {
                            v152 = j__atol(&Str1[v195]);
                            if ( v152 )
                            {
                              v17 = CSocket::Id(*(_DWORD **)(this + 1676));
                              CAuthSocket::Write(5, "db", v17, v152);
                            }
                            else
                            {
                              v15 = sub_47E710();
                              v16 = sub_47E700(v15);
                              CPlayer::Write(this, 68, "bbww", 15, dword_4E1188, v16);
                            }
                          }
                          else if ( !strcmp(Str1, "/active") )
                          {
                            v18 = CSocket::Id(*(_DWORD **)(this + 1676));
                            CAuthSocket::Write(6, "d", v18);
                          }
                          else if ( !strcmp(Str1, "/money") )
                          {
                            CPlayer::Write(this, 68, "bd", 18, dword_4E2014);
                          }
                          else if ( *(int *)(this + 456) >= 4 )
                          {
                            if ( !strcmp(Str1, "/guildexp") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && dword_4E35B8 == 1 )
                              {
                                v150 = &Str1[v195];
                                v195 = strcspn(&Str1[v195], " ");
                                if ( v150[v195] )
                                  v150[v195++] = 0;
                                v151 = j__atol(&v150[v195]);
                                if ( CGuild::SetExp(v150, v151) )
                                  CPlayer::Write(this, 60, "ss", "guildexp", "OK");
                                else
                                  CPlayer::Write(this, 60, "ss", "guildexp", "ERROR");
                              }
                            }
                            else if ( !strcmp(Str1, "/syson") )
                            {
                              v149 = j__atol(&Str1[v195]);
                              CPlayer::SetSystemCode(v149, 1);
                            }
                            else if ( !strcmp(Str1, "/sysoff") )
                            {
                              v148 = j__atol(&Str1[v195]);
                              CPlayer::SetSystemCode(v148, 0);
                            }
                            else if ( !strcmp(Str1, "/eventon") )
                            {
                              v147 = j__atol(&Str1[v195]);
                              CPlayer::SetEventCode(v147, 1);
                            }
                            else if ( !strcmp(Str1, "/eventoff") )
                            {
                              v146 = j__atol(&Str1[v195]);
                              CPlayer::SetEventCode(v146, 0);
                            }
                            else if ( !strcmp(Str1, "/infosys") )
                            {
                              if ( dword_4E35B8 != 1 )
                              {
                                v145 = *(_DWORD *)dword_4E1174;
                                v195 = sprintf(v144, "system : ");
                                v143 = 0;
                                while ( v145 > 0 )
                                {
                                  if ( (v145 & 1) != 0 )
                                  {
                                    v19 = sprintf(&v144[v195], "%d ", v143);
                                    v195 += v19;
                                  }
                                  v145 >>= 1;
                                  ++v143;
                                }
                                CPlayer::Write(this, 15, "s", v144);
                                v145 = dword_4E1178;
                                v195 = sprintf(v144, "event : ");
                                v142 = 0;
                                while ( v145 > 0 )
                                {
                                  if ( (v145 & 1) != 0 )
                                  {
                                    v20 = sprintf(&v144[v195], "%d ", v142);
                                    v195 += v20;
                                  }
                                  v145 >>= 1;
                                  ++v142;
                                }
                                CPlayer::Write(this, 15, "s", v144);
                              }
                            }
                            else if ( !strcmp(Str1, "/maxuser") )
                            {
                              v141 = j__atol(&Str1[v195]);
                              if ( v141 > 1000 && v141 <= 20000 )
                              {
                                dword_4E118C = v141;
                                sprintf(v140, "Max User : %d", v141);
                                CPlayer::Write(this, 15, "s", v140);
                                if ( dword_4E35B8 != 1 )
                                  LOG_ERR(
                                    "Reset maximum user number. (pid:%d, number:%d)",
                                    *(_DWORD *)(this + 452),
                                    v141);
                              }
                            }
                            else if ( !strcmp(Str1, "/shutdown") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && dword_4E35B8 != 1 )
                              {
                                v139 = j__atol(&Str1[v195]);
                                dword_4E17B8 = 60000 * v139;
                                if ( 60000 * v139 <= 0 )
                                {
                                  KillTimer(hWnd, 2u);
                                  CPlayer::Write(this, 67, "b", 3);
                                  LOG_NORMAL("Shutdown Canceled. (PID:%d)", *(_DWORD *)(this + 452));
                                }
                                else
                                {
                                  SetTimer(hWnd, 2u, 0x2710u, 0);
                                  CPlayer::Write(this, 68, "bb", 0, v139);
                                  LOG_NORMAL("Shutdown Started. (PID:%d, Min:%d)", *(_DWORD *)(this + 452), v139);
                                }
                              }
                            }
                            else if ( !strcmp(Str1, "/shutdownoff") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && dword_4E35B8 != 1 )
                                CAuthSocket::Write(7, &Src);
                            }
                            else if ( !strcmp(Str1, "/location") )
                            {
                              if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && dword_4E35B8 != 1 )
                              {
                                Str1b = &Str1[v195];
                                v137 = strcspn(Str1b, " ");
                                if ( Str1b[v137] )
                                  Str1b[v137++] = 0;
                                v138 = CPlayer::FindPlayer((char)Str1b);
                                if ( v138 )
                                {
                                  if ( CGoto::FindGoto(&Str1b[v137], &v135) )
                                    CPlayer::Teleport(v138, v135, v136, v136[2], 1);
                                  CIOObject::Release(v138, (volatile int *)v138 + 88);
                                }
                              }
                            }
                            else if ( !strcmp(Str1, "/dpadpfdpatpt") )
                            {
                              if ( sscanf(&Str1[v195], "%d %d %d %d", &v132, &v133, &v130, &v134) == 4
                                && v132 >= 0
                                && v132 <= 3
                                && v133 >= 0
                                && v130 <= 100
                                && v134 >= 0
                                && v134 <= 50 )
                              {
                                dword_4D66BC[3 * v132] = v133;
                                dword_4D66C0[3 * v132] = v130;
                                dword_4D66C4[3 * v132] = v134;
                                if ( v132 >= 3 )
                                  sprintf(
                                    v131,
                                    "Changed~! (%02d ~ ) (gm:%d, m:%d, max:%d)",
                                    10 * v132 + 1,
                                    v133,
                                    v130,
                                    v134);
                                else
                                  sprintf(
                                    v131,
                                    "Changed~! (%02d ~ %02d) (gm:%d, m:%d, max:%d)",
                                    10 * v132 + 1,
                                    10 * (v132 + 1),
                                    v133,
                                    v130,
                                    v134);
                                CPlayer::Write(this, 15, "s", v131);
                              }
                            }
                            else if ( !strcmp(Str1, "/dpadpfdpatmxpdlxjtm") )
                            {
                              for ( i = 0; i < 4; ++i )
                              {
                                if ( i >= 3 )
                                  sprintf(
                                    v129,
                                    "(%02d ~ ) (gm:%d, m:%d, max:%d)",
                                    10 * i + 1,
                                    dword_4D66BC[3 * i],
                                    dword_4D66C0[3 * i],
                                    dword_4D66C4[3 * i]);
                                else
                                  sprintf(
                                    v129,
                                    "(%02d ~ %02d) (gm:%d, m:%d, max:%d)",
                                    10 * i + 1,
                                    10 * (i + 1),
                                    dword_4D66BC[3 * i],
                                    dword_4D66C0[3 * i],
                                    dword_4D66C4[3 * i]);
                                CPlayer::Write(this, 15, "s", v129);
                              }
                            }
                            else if ( !strcmp(Str1, "/notice") )
                            {
                              CPlayer::WriteAll(15, "s", &Str1[v195]);
                            }
                            else if ( !strcmp(Str1, "/portuser") || !strcmp(Str1, "/test") )
                            {
                              v127 = CPlayer::FindPlayer(v195 + (_BYTE)Str1);
                              if ( v127 )
                              {
                                v126[0] = *(_DWORD *)(this + 332) + 32;
                                v126[1] = *(_DWORD *)(this + 336) + 32;
                                CPlayer::Teleport(v127, *(_DWORD *)(this + 316), v126, 0, 1);
                                CIOObject::Release(v127, (volatile int *)v127 + 88);
                              }
                            }
                            else if ( strcmp(Str1, "/block") )
                            {
                              strcmp(Str1, "/unblock");
                              if ( *(int *)(this + 456) >= 5 )
                              {
                                if ( !strcmp(Str1, "/get") )
                                {
                                  Str1c = &Str1[v195];
                                  v122 = 0;
                                  v123 = 0;
                                  v124 = 1;
                                  v125 = -1;
                                  v120 = 0;
                                  while ( *Str1c )
                                  {
                                    v195 = strcspn(Str1c, " ");
                                    if ( Str1c[v195] )
                                      Str1c[v195++] = 0;
                                    *(&v122 + v120) = j__atol(Str1c);
                                    Str1c += v195;
                                    ++v120;
                                  }
                                  if ( (dword_4E1174[0] & 2) != 0 || v122 != 31 )
                                  {
                                    v121 = (char *)CItem::CreateCheatItem(v122, v123, v124, v125);
                                    if ( v121 )
                                    {
                                      CIOObject::AddRef(v121);
                                      if ( CPlayer::InsertItem(this, 3, (int)v121) == 1 )
                                        LOG_NORMAL(
                                          "Create Cheat Item. (%s, %s, %d)",
                                          (const char *)(this + 32),
                                          (const char *)(*((_DWORD *)v121 + 10) + 32),
                                          *((_DWORD *)v121 + 13));
                                      else
                                        CBase::Delete(v121);
                                      CIOObject::Release((volatile int *)v121);
                                    }
                                  }
                                }
                                else if ( !strcmp(Str1, "/rnlthrdkdlxpa") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && dword_4E35B8 != 1 )
                                  {
                                    Str1d = &Str1[v195];
                                    v116 = 0;
                                    v117 = 0;
                                    v118 = 1;
                                    v119 = -1;
                                    v114 = 0;
                                    while ( *Str1d )
                                    {
                                      v195 = strcspn(Str1d, " ");
                                      if ( Str1d[v195] )
                                        Str1d[v195++] = 0;
                                      *(&v116 + v114) = j__atol(Str1d);
                                      Str1d += v195;
                                      ++v114;
                                    }
                                    if ( (dword_4E1174[0] & 2) != 0 || v116 != 31 )
                                    {
                                      v115 = (char *)CItem::CreateOwnItem(v116, v117, v118, v119);
                                      if ( v115 )
                                      {
                                        CIOObject::AddRef(v115);
                                        if ( CPlayer::InsertItem(this, 3, (int)v115) == 1 )
                                          LOG_NORMAL(
                                            "Create Cheat Item. (%s, %s, %d)",
                                            (const char *)(this + 32),
                                            (const char *)(*((_DWORD *)v115 + 10) + 32),
                                            *((_DWORD *)v115 + 13));
                                        else
                                          CBase::Delete(v115);
                                        CIOObject::Release((volatile int *)v115);
                                      }
                                    }
                                  }
                                }
                                else if ( !strcmp(Str1, "/dkdlxpadmfckdrhfh") )
                                {
                                  Str1e = &Str1[v195];
                                  v195 = strcspn(Str1e, " ");
                                  if ( Str1e[v195] )
                                    Str1e[v195++] = 0;
                                  name = Str1e;
                                  if ( strlen(Str1e) <= 0x10 && IsValidAdminName(name) )
                                  {
                                    Str1f = &Str1e[v195];
                                    v110 = 0;
                                    v111 = 0;
                                    v112 = 1;
                                    v113 = -1;
                                    v107 = 0;
                                    while ( *Str1f )
                                    {
                                      v195 = strcspn(Str1f, " ");
                                      if ( Str1f[v195] )
                                        Str1f[v195++] = 0;
                                      *(&v110 + v107) = j__atol(Str1f);
                                      Str1f += v195;
                                      ++v107;
                                    }
                                    if ( (dword_4E1174[0] & 2) != 0 || v110 != 31 )
                                    {
                                      v108 = (char *)CItem::CreateItem(v110, v111, v112, -1);
                                      if ( v108 )
                                      {
                                        (*(void (__thiscall **)(char *, int, _DWORD, char *, _DWORD))(*(_DWORD *)v108 + 160))(
                                          v108,
                                          40,
                                          0,
                                          name,
                                          0);
                                        CBase::Delete(v108);
                                      }
                                    }
                                  }
                                }
                                else if ( !strcmp(Str1, "/dkdlxpathrtjdqnxdlrl") )
                                {
                                  if ( sscanf(&Str1[v195], "%d %d %d", &v104, &v106, &v105) == 3
                                    && v105 >= 0
                                    && v105 <= 19 )
                                  {
                                    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
                                    v102 = 0;
                                    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v103);
                                    while ( 1 )
                                    {
                                      v21 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v69);
                                      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                                              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v103,
                                              v21) )
                                        break;
                                      v102 = *(_DWORD **)(sub_420250(v103) + 4);
                                      if ( (dword_4E1174[0] & 2) != 0 )
                                        v60 = 1;
                                      else
                                        v60 = CItem::IsState(v102, 8);
                                      if ( v60 && CItem::IsState(v102, 1) && *(_DWORD *)(v102[10] + 72) == v104 )
                                      {
                                        (*(void (__thiscall **)(_DWORD *, int))(*v102 + 100))(v102, this);
                                        if ( (*(int (__thiscall **)(_DWORD *, int, int, int))(*v102 + 180))(
                                               v102,
                                               this,
                                               v106,
                                               v105) )
                                        {
                                          LOG_NORMAL(
                                            "Charming Cheat Item. (%s, %s, %d, %d, %d)",
                                            (const char *)(this + 32),
                                            (const char *)(v102[10] + 32),
                                            v102[9],
                                            v106,
                                            v105);
                                        }
                                        (*(void (__thiscall **)(_DWORD *, int))(*v102 + 96))(v102, this);
                                        break;
                                      }
                                      sub_418860(v103);
                                    }
                                    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
                                  }
                                }
                                else if ( !strcmp(Str1, "/skill") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0
                                    && dword_4E35B8 != 1
                                    && sscanf(&Str1[v195], "%d %d", &v101, &v100) == 2
                                    && (v101 > 0 && v101 < 63 || v101 == 80 || v101 == 81)
                                    && v100 > 0
                                    && v100 <= 20 )
                                  {
                                    sub_47FA60(v101, v100);
                                  }
                                }
                                else if ( !strcmp(Str1, "/skillredit") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 && dword_4E35B8 != 1 )
                                  {
                                    v99 = j__atol(&Str1[v195]);
                                    switch ( v99 )
                                    {
                                      case 255:
                                        sub_4802D0(this + 624);
                                        break;
                                      case 254:
                                        sub_4803E0(this + 624);
                                        break;
                                      case 253:
                                        sub_480540(this + 624);
                                        break;
                                      default:
                                        sub_480240(v99);
                                        break;
                                    }
                                  }
                                }
                                else if ( !strcmp(Str1, "/pktime") )
                                {
                                  v98 = j__atol(&Str1[v195]);
                                  if ( CChar::IsGState((_DWORD *)this, 256) )
                                  {
                                    if ( v98 >= 180 )
                                      v57 = 180;
                                    else
                                      v57 = v98;
                                    *(_DWORD *)(this + 536) = v57;
                                  }
                                }
                                else if ( !strcmp(Str1, "/getexp") )
                                {
                                  v22 = j__atol(&Str1[v195]);
                                  v97 = v22;
                                  if ( (int)v22 >> 31 >= 0
                                    && ((int)v22 >> 31 >= 0 && (int)v22 < 0 || (_DWORD)v97)
                                    && v97 < qword_4D6948
                                    && *(int *)(this + 60) < 99 )
                                  {
                                    (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(*(_DWORD *)this + 88))(
                                      this,
                                      25,
                                      1,
                                      v97,
                                      HIDWORD(v97));
                                  }
                                }
                                else if ( !strcmp(Str1, "/snow") )
                                {
                                  if ( (dword_4E1178 & 0x40) != 0 )
                                  {
                                    v96 = j__atol(&Str1[v195]);
                                    if ( v96 >= 0 && v96 <= 4 )
                                      CPlayer::EventBuff(v96);
                                  }
                                }
                                else if ( !strcmp(Str1, "/levelup") )
                                {
                                  if ( *(int *)(this + 60) < 100 )
                                  {
                                    CPlayer::Write(
                                      this,
                                      69,
                                      &off_4BAC50,
                                      25,
                                      0,
                                      0,
                                      __PAIR64__(
                                        dword_4D66F4[2 * *(_DWORD *)(this + 60)],
                                        dword_4D66F0[2 * *(_DWORD *)(this + 60)])
                                    - *(_QWORD *)(this + 472));
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 26, 1, 1);
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 23, 1, 5);
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 24, 1, 1);
                                    *(_DWORD *)(this + 472) = 0;
                                    *(_DWORD *)(this + 476) = 0;
                                    *(_DWORD *)(this + 552) = 0;
                                    sub_47FF00(0);
                                    CPlayer::MLMPayMoney(2);
                                    CPlayer::MLMLevelUp(this);
                                  }
                                }
                                else if ( !strcmp(Str1, "/resetlevel") )
                                {
                                  v95 = j__atol(&Str1[v195]);
                                  if ( v95 >= 1 && v95 <= 100 )
                                  {
                                    CChar::CancelBuffPrty(-225);
                                    v94 = v95 - 1;
                                    *(_DWORD *)(this + 60) = v95;
                                    *(_DWORD *)(this + 472) = 0;
                                    *(_DWORD *)(this + 476) = 0;
                                    memset((void *)(this + 64), 0, 0x1Cu);
                                    memset((void *)(this + 92), 0, 0x60u);
                                    memset((void *)(this + 188), 0, 0x54u);
                                    memcpy(
                                      (void *)(this + 64),
                                      (char *)&unk_4D6A28 + 28 * *(_DWORD *)(this + 460),
                                      0x14u);
                                    *(_DWORD *)(this + 548) = 0;
                                    *(_DWORD *)(this + 544) = 0;
                                    *(_DWORD *)(this + 552) = 0;
                                    *(_DWORD *)(this + 620) = 0;
                                    *(_DWORD *)(this + 616) = 0;
                                    *(_DWORD *)(this + 612) = 0;
                                    *(_DWORD *)(this + 608) = 0;
                                    *(_DWORD *)(this + 604) = 0;
                                    *(_DWORD *)(this + 600) = 0;
                                    *(_DWORD *)(this + 596) = 0;
                                    CChar::ResetAllBuff(this);
                                    sub_47FF00(0);
                                    (*(void (__thiscall **)(int))(*(_DWORD *)this + 84))(this);
                                    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
                                    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
                                      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v93);
                                    while ( 1 )
                                    {
                                      v23 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v67);
                                      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                                              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v93,
                                              v23) )
                                        break;
                                      v92 = *(_DWORD **)(sub_420250(v93) + 4);
                                      if ( CItem::IsState(v92, 1) )
                                        (*(void (__thiscall **)(_DWORD *, int))(*v92 + 104))(v92, this);
                                      sub_446090(v68, 0);
                                    }
                                    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
                                    sub_47FC00(this + 624);
                                    CPlayer::Write(this, 69, "bb", 26, *(_DWORD *)(this + 60));
                                    CChar::WriteInSight(this, 73, "db", *(_DWORD *)(this + 28), 3);
                                    CPlayer::UpdatePartyMember((_DWORD *)this, 26);
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(
                                      this,
                                      23,
                                      1,
                                      5 * *(_DWORD *)(this + 60));
                                    if ( v94 > 0 )
                                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 24, 1, v94);
                                    *(_DWORD *)(this + 276) = CChar::GetMaxMP(v56);
                                    *(_DWORD *)(this + 272) = CChar::GetMaxHP((_DWORD *)this);
                                    v58 = *(_DWORD *)(this + 580);
                                    v55 = CChar::GetResist((_DWORD *)this, 4);
                                    v54 = CChar::GetResist((_DWORD *)this, 3);
                                    v53 = CChar::GetResist((_DWORD *)this, 2);
                                    v52 = CChar::GetResist((_DWORD *)this, 1);
                                    v51 = CChar::GetResist((_DWORD *)this, 0);
                                    v50 = *(_DWORD *)(this + 548);
                                    v49 = *(_DWORD *)(this + 544);
                                    v48 = CChar::GetMaxMagic((_DWORD *)this);
                                    v47 = CChar::GetMinMagic((_DWORD *)this);
                                    v46 = CChar::GetMaxAttack((_DWORD *)this);
                                    v45 = CChar::GetMinAttack((_DWORD *)this);
                                    v44 = *(_DWORD *)(this + 476);
                                    v43 = *(_DWORD *)(this + 472);
                                    v42 = CChar::GetAbsorb((_DWORD *)this);
                                    v41 = CChar::GetDefense((_DWORD *)this, 0);
                                    v40 = CChar::GetDodge((_DWORD *)this);
                                    v39 = CChar::GetHit((_DWORD *)this);
                                    v38 = *(_DWORD *)(this + 276);
                                    v37 = *(_DWORD *)(this + 272);
                                    v36 = Char::GetDex((_DWORD *)this);
                                    v35 = CChar::GetWis((_DWORD *)this);
                                    v34 = CChar::GetInt((_DWORD *)this);
                                    v33 = CChar::GetHth((_DWORD *)this);
                                    v24 = CChar::GetStr((_DWORD *)this);
                                    CPlayer::Write(
                                      this,
                                      66,
                                      "bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd",
                                      *(_DWORD *)(this + 464),
                                      &Src,
                                      *(_DWORD *)(this + 536),
                                      *(_DWORD *)(this + 468),
                                      v24,
                                      v33,
                                      v34,
                                      v35,
                                      v36,
                                      v37,
                                      v37,
                                      v38,
                                      v38,
                                      v39,
                                      v40,
                                      v41,
                                      v42,
                                      v43,
                                      v44,
                                      v45,
                                      v46,
                                      v47,
                                      v48,
                                      v49,
                                      v50,
                                      v51,
                                      v52,
                                      v53,
                                      v54,
                                      v55,
                                      v58);
                                  }
                                }
                                else if ( !strcmp(Str1, "/addhp") )
                                {
                                  v90 = j__atol(&Str1[v195]);
                                  v91 = v90 + CChar::GetMaxHP((_DWORD *)this);
                                  if ( v91 >= 0 && v91 <= 0x7FFF )
                                  {
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 5, 1, v90);
                                    v25 = CChar::GetMaxHP((_DWORD *)this);
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v25);
                                  }
                                }
                                else if ( !strcmp(Str1, "/addmp") )
                                {
                                  v88 = j__atol(&Str1[v195]);
                                  v89 = v88 + CChar::GetMaxMP(v56);
                                  if ( v89 >= 0 && v89 <= 0x7FFF )
                                  {
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(this, 6, 1, v88);
                                    v26 = CChar::GetMaxMP(v59);
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 8, 1, v26);
                                  }
                                }
                                else if ( !strcmp(Str1, "/addcp") )
                                {
                                  v87 = j__atol(&Str1[v195]);
                                  if ( v87 + *(_DWORD *)(this + 468) <= 0x7FFF )
                                    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 30, 1, v87);
                                }
                                else if ( !strcmp(Str1, "/addquest") )
                                {
                                  if ( sscanf(&Str1[v195], "%d %d %d", v84, &v85, &v86) == 3 )
                                  {
                                    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
                                    sub_471840(v83, v84);
                                    v27 = sub_430C20(v66);
                                    if ( (unsigned __int8)unknown_libname_16(v27) )
                                    {
                                      v28 = sub_472860(v84, &v85);
                                      sub_4715D0(
                                        (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v65,
                                        v28);
                                    }
                                    else
                                    {
                                      v29 = sub_420250(v83);
                                      *(_DWORD *)(v29 + 4) = v85;
                                      *(_DWORD *)(v29 + 8) = v86;
                                    }
                                    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
                                  }
                                }
                                else if ( !strcmp(Str1, "/finishquest") )
                                {
                                  v81 = j__atol(&Str1[v195]);
                                  v82[0] = 0;
                                  v82[1] = 1;
                                  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
                                  for ( j = 1; j <= v81; ++j )
                                  {
                                    sub_471840(v79, &j);
                                    v30 = sub_430C20(v64);
                                    if ( (unsigned __int8)unknown_libname_16(v30) )
                                    {
                                      v31 = sub_472860(&j, v82);
                                      sub_4715D0(
                                        (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v63,
                                        v31);
                                    }
                                    else
                                    {
                                      *(_DWORD *)(sub_420250(v79) + 8) = 1;
                                    }
                                  }
                                  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
                                }
                                else if ( !strcmp(Str1, "/resetquest") )
                                {
                                  v78 = j__atol(&Str1[v195]);
                                  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
                                  sub_471780(&v78);
                                  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
                                }
                                else if ( !strcmp(Str1, "/rageadd") )
                                {
                                  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1224));
                                  sub_4717E0(this + 1256);
                                  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1224));
                                }
                                else if ( !strcmp(Str1, "/rage") )
                                {
                                  v77 = j__atol(&Str1[v195]);
                                  (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 35, 1, v77);
                                }
                                else if ( !strcmp(Str1, "/egggrade") )
                                {
                                  v76 = j__atol(&Str1[v195]);
                                  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
                                  if ( *(_DWORD *)(this + 1108) )
                                    CItemTransform::CheatLevelUp(*(_DWORD **)(this + 1108), this, v76);
                                  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
                                }
                                else if ( !strcmp(Str1, "/addatk") )
                                {
                                  v75 = j__atol(&Str1[v195]);
                                  (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(
                                    this,
                                    27,
                                    1,
                                    v75,
                                    v75);
                                  (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(
                                    this,
                                    28,
                                    1,
                                    v75,
                                    v75);
                                }
                                else if ( !strcmp(Str1, "/adddef") )
                                {
                                  v74 = j__atol(&Str1[v195]);
                                  (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(
                                    this,
                                    15,
                                    1,
                                    v74,
                                    v74);
                                }
                                else if ( !strcmp(Str1, "/gposition") )
                                {
                                  v73 = j__atol(&Str1[v195]);
                                  if ( v73 >= 0 && v73 <= 5 && (*(_DWORD *)(this + 464) & (1 << v73)) == 0 )
                                  {
                                    *(_DWORD *)(this + 464) |= 1 << v73;
                                    CPlayer::Write(this, 68, "bb", 38, *(_DWORD *)(this + 464));
                                    CDBSocket::Write(15, "db", *(_DWORD *)(this + 452), 1 << v73);
                                    CPlayerSkill::ChangeOccupationAutoLearnSkill(this + 624);
                                  }
                                }
                                else if ( !strcmp(Str1, "/lord") )
                                {
                                  CMonsterTowerBoss::Create();
                                }
                                else if ( !strcmp(Str1, "/nest") )
                                {
                                  if ( dword_4E35B8 != 1 )
                                    CMonsterBigBirdMother::Create();
                                }
                                else if ( !strcmp(Str1, "/queen") )
                                {
                                  if ( dword_4E35B8 != 1 )
                                    CMonsterBigBirdMaster::Create(0);
                                }
                                else if ( !strcmp(Str1, "/event") )
                                {
                                  v72 = j__atol(&Str1[v195]);
                                  if ( (dword_4E1178 & 0x100) != 0 )
                                    CDBSocket::Write(77, "dd", *(_DWORD *)(this + 452), v72);
                                }
                                else if ( !strcmp(Str1, "/luxury") )
                                {
                                  if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
                                  {
                                    (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(
                                      this,
                                      27,
                                      1,
                                      30000,
                                      30000);
                                    (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(
                                      this,
                                      28,
                                      1,
                                      30000,
                                      30000);
                                    (*(void (__cdecl **)(int, int, int, int, int))(*(_DWORD *)this + 92))(
                                      this,
                                      15,
                                      1,
                                      30000,
                                      30000);
                                    v70 = 30000;
                                    v71 = CChar::GetMaxHP((_DWORD *)this) + 30000;
                                    if ( v71 >= 0 && v71 <= 0x7FFF )
                                    {
                                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 92))(
                                        this,
                                        5,
                                        1,
                                        30000);
                                      v32 = CChar::GetMaxHP((_DWORD *)this);
                                      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)this + 88))(this, 7, 1, v32);
                                    }
                                  }
                                }
                                else if ( !strcmp(Str1, "/return") )
                                {
                                  CPlayer::ReturnToPoint((_DWORD *)this, 8);
                                }
                                else if ( !strcmp(Str1, "/castleinfo") )
                                {
                                  CPlayer::CountWarrelationPlayer();
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
// 462617: conditional instruction was optimized away because of '%var_28C.4>=0'
// 462620: conditional instruction was optimized away because of '%var_314.4<65'
// 463795: variable 'v56' is possibly undefined
// 463A70: variable 'v59' is possibly undefined
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);
// 40B870: using guessed type _DWORD __stdcall CChar::CancelBuffPrty(_DWORD);
// 418860: using guessed type int __thiscall sub_418860(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 450910: using guessed type _DWORD CPlayer::WriteAll(char, ...);
// 467080: using guessed type _DWORD __stdcall CPlayer::MLMPayMoney(_DWORD);
// 4674D0: using guessed type int __thiscall CPlayer::MLMLevelUp(_DWORD);
// 46AAD0: using guessed type int __thiscall CPlayer::GetGuild(_DWORD);
// 46AB90: using guessed type int __thiscall CPlayer::GetGID(_DWORD);
// 4715D0: using guessed type _DWORD __stdcall sub_4715D0(std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *, _DWORD);
// 471780: using guessed type _DWORD __stdcall sub_471780(_DWORD);
// 4717E0: using guessed type int __thiscall sub_4717E0(_DWORD);
// 471840: using guessed type _DWORD __stdcall sub_471840(_DWORD, _DWORD);
// 472860: using guessed type _DWORD __stdcall sub_472860(_DWORD, _DWORD);
// 47E700: using guessed type int __cdecl sub_47E700(_DWORD);
// 47E710: using guessed type int sub_47E710(void);
// 47FA60: using guessed type _DWORD __stdcall sub_47FA60(_DWORD, _DWORD);
// 47FC00: using guessed type int __thiscall sub_47FC00(_DWORD);
// 47FF00: using guessed type _DWORD __stdcall sub_47FF00(_DWORD);
// 4800E0: using guessed type int __thiscall sub_4800E0(_DWORD);
// 480240: using guessed type _DWORD __stdcall sub_480240(_DWORD);
// 4802D0: using guessed type int __thiscall sub_4802D0(_DWORD);
// 4803E0: using guessed type int __thiscall sub_4803E0(_DWORD);
// 480540: using guessed type int __thiscall sub_480540(_DWORD);
// 495B20: using guessed type _DWORD __stdcall sub_495B20(_DWORD);
// 4BAC50: using guessed type void *off_4BAC50;
// 4D66BC: using guessed type int dword_4D66BC[];
// 4D66C0: using guessed type int dword_4D66C0[];
// 4D66F0: using guessed type int dword_4D66F0[];
// 4D6948: using guessed type __int64 qword_4D6948;
// 4D9830: using guessed type int dword_4D9830;
// 4E1178: using guessed type int dword_4E1178;
// 4E1188: using guessed type int dword_4E1188;
// 4E118C: using guessed type int dword_4E118C;
// 4E17B8: using guessed type int dword_4E17B8;
// 4E35AC: using guessed type int dword_4E35AC;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004642B0) --------------------------------------------------------
void __thiscall CPlayer::Rest(volatile LONG *this, int a2)
{
  if ( a2 )
  {
    if ( CChar::IsGState(this, 4) )
      return;
    CChar::AddGState(this, 4);
    (*(void (__thiscall **)(volatile LONG *, int, _DWORD))(*this + 124))(this, 1, 0);
    *((_DWORD *)this + 361) = GetTickCount() + 5000;
    goto LABEL_11;
  }
  if ( CChar::IsGState(this, 4) && !CChar::IsGState(this, 16) )
  {
    CChar::SubGState(this, 4);
    if ( CChar::IsMState(this, 0x100000i64) )
      CChar::CancelBuff((int)this, 18);
    if ( CChar::IsMState(this, 0x200000i64) )
      CChar::CancelBuff((int)this, 19);
LABEL_11:
    CChar::WriteInSight((int)this, 61, "dbb", *((_DWORD *)this + 7), 3, a2);
  }
}

//----- (004643A0) --------------------------------------------------------
int __thiscall CPlayer::CutdownExp(int this, int a2)
{
  int result; // eax
  int v3; // ecx
  __int64 v4; // [esp-10h] [ebp-24h]
  int v5; // [esp+4h] [ebp-10h]
  __int64 v7; // [esp+Ch] [ebp-8h]

  result = this;
  if ( *(int *)(this + 60) > 5 )
  {
    if ( CPlayer::IsEState((_DWORD *)this, 256) )
    {
      result = CPlayer::SubEState((_DWORD *)this, 256);
    }
    else
    {
      if ( *(int *)(this + 552) >= 20 )
        v5 = 20;
      else
        v5 = *(_DWORD *)(this + 552);
      v3 = *(_DWORD *)(this + 60);
      HIDWORD(v4) = dword_4D66F4[2 * v3];
      LODWORD(v4) = dword_4D66F0[2 * v3];
      v7 = v4 * (v5 / 5 + 2) / 100;
      result = CSMap::IsOnTile(*(_DWORD **)(this + 320), (int *)(this + 332), 0x100000);
      if ( !result )
      {
        if ( CPlayer::IsEState((_DWORD *)this, 128) )
        {
          v7 >>= 1;
          CPlayer::SubEState((_DWORD *)this, 128);
        }
        if ( CPlayer::IsEState((_DWORD *)this, 32) )
        {
          v7 >>= 1;
          result = CPlayer::SubEState((_DWORD *)this, 32);
        }
        else
        {
          result = CPlayer::IsEState((_DWORD *)this, 64);
          if ( result )
          {
            v7 /= 10i64;
            result = CPlayer::SubEState((_DWORD *)this, 64);
          }
        }
        if ( a2 < 100 )
        {
          if ( a2 > 0 )
            v7 -= v7 * a2 / 100;
          result = (*(int (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 88))(
                     this,
                     25,
                     0,
                     v7,
                     HIDWORD(v7));
        }
      }
    }
  }
  return result;
}
// 4D66F0: using guessed type int dword_4D66F0[];

//----- (00464550) --------------------------------------------------------
void __usercall CPlayer::Revival(volatile LONG *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v4; // eax
  int v5; // eax
  char *v6; // esi
  DWORD v7; // esi
  _DWORD *v8; // [esp+0h] [ebp-30h]
  int v10[7]; // [esp+Ch] [ebp-24h] BYREF
  int v11[2]; // [esp+28h] [ebp-8h] BYREF

  if ( CPlayer::IsEState(this, 16) )
  {
    (*(void (__thiscall **)(volatile LONG *, int))(*this + 112))(this, 2);
    CPlayer::SubEState(this, 16);
    return;
  }
  if ( !CChar::IsGState(this, 8) )
  {
    v4 = CChar::GetMaxHP(this);
    (*(void (__cdecl **)(volatile LONG *, int, int, int))(*this + 88))(this, 7, 1, v4);
    v5 = CChar::GetMaxMP(v8);
    (*(void (__cdecl **)(volatile LONG *, int, int, int))(*this + 88))(this, 8, 1, v5);
    CChar::AddGState(this, 8);
    CPlayer::CutdownExp((int)this, 0);
    CChar::CancelBuffPrty((int)this, a2, a3, a4, 256);
    v6 = (char *)&unk_4D77C8 + 28 * *((_DWORD *)this + 143);
    qmemcpy(v10, v6, sizeof(v10));
    v7 = (DWORD)(v6 + 28);
    if ( v10[5] )
    {
      if ( CGuild::IsWarringPeriod() )
      {
        if ( CCastle::IsGateAlive(v10[4], v10[5]) )
        {
LABEL_16:
          v11[0] = RandomBetween(v10[1] - 32, v10[1] + 32);
          v11[1] = RandomBetween(v10[2] - 32, v10[2] + 32);
          CPlayer::Teleport(this, v10[0], v11, v10[3], 0);
          return;
        }
        CChar::Unlock((int)this);
        if ( !CPlayer::IsDefenseSide(this, a2, (DWORD)v11, v7, v10[4]) )
        {
LABEL_8:
          CChar::Lock((int)this);
          goto LABEL_16;
        }
        CChar::Lock((int)this);
        *((_DWORD *)this + 143) = v10[6];
      }
      else
      {
        *((_DWORD *)this + 143) = 0;
      }
    }
    else
    {
      if ( !v10[4] )
        goto LABEL_16;
      CChar::Unlock((int)this);
      if ( CPlayer::IsDefenseSide(this, a2, (DWORD)v11, v7, v10[4]) )
        goto LABEL_8;
      CChar::Lock((int)this);
      *((_DWORD *)this + 143) = 0;
    }
    CDBSocket::Write(36, "db", *((_DWORD *)this + 113), *((_DWORD *)this + 143));
    qmemcpy(v10, (char *)&unk_4D77C8 + 28 * *((_DWORD *)this + 143), sizeof(v10));
    goto LABEL_16;
  }
}
// 4645B7: variable 'v8' is possibly undefined

//----- (00464750) --------------------------------------------------------
void __thiscall CPlayer::RevivalSkill(_DWORD *this, int a2, int a3)
{
  int v3; // eax
  int a1a; // [esp+0h] [ebp-8h]
  CIOObject *v6; // [esp+4h] [ebp-4h]

  if ( CPlayer::IsEState(this, 8) )
  {
    CPlayer::SubEState(this, 8);
    if ( CPlayer::IsEState(this, 16) )
    {
      (*(void (__thiscall **)(_DWORD *, int))(*this + 112))(this, 2);
      CPlayer::SubEState(this, 16);
      return;
    }
    if ( !CChar::IsNormal((int)this) && !CChar::IsGState(this, 8) && a2 )
    {
      v6 = 0;
      if ( !a3 )
        goto LABEL_13;
      v6 = sub_450810(a3);
      if ( !v6 )
      {
        CPlayer::Write((int)this, 67, "b", 71);
        return;
      }
      if ( sub_448870(this + 81, (_DWORD *)v6 + 81) > 10 )
      {
        CPlayer::Write((int)this, 67, "b", 71);
        CIOObject::Release(v6, (volatile int *)v6 + 88);
      }
      else
      {
LABEL_13:
        CPlayer::CutdownExp((int)this, 50);
        CChar::CancelBuffPrty(256);
        this[69] = 0;
        (*(void (__cdecl **)(_DWORD *, int, int, _DWORD))(*this + 88))(this, 7, 1, this[147]);
        (*(void (__cdecl **)(_DWORD *, int, int, _DWORD))(*this + 88))(this, 8, 1, this[148]);
        v3 = CBuff::CreateBuff(4, 60, -50, (int)this);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)a1a + 180))(a1a, v3);
        if ( a3 )
        {
          CChar::AddGState((volatile LONG *)a1a, 8);
          CPlayer::Teleport((_DWORD *)a1a, *((_DWORD *)v6 + 79), (_DWORD *)v6 + 83, *((_DWORD *)v6 + 85), 0);
          CIOObject::Release(v6, (volatile int *)v6 + 88);
        }
        else
        {
          (*(void (__thiscall **)(int, int))(*(_DWORD *)a1a + 112))(a1a, 2);
        }
        CChar::AddGState((volatile LONG *)a1a, 0x2000);
        *(_DWORD *)(a1a + 1448) = GetTickCount() + 10000;
      }
    }
  }
}
// 4648C1: variable 'a1a' is possibly undefined
// 40B870: using guessed type _DWORD __stdcall CChar::CancelBuffPrty(_DWORD);

//----- (00464950) --------------------------------------------------------
int __userpurge CPlayer::RevivalItem@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  int v6; // eax
  int v7; // eax

  if ( CChar::IsNormal((int)a1) || CPlayer::IsEState(a1, 16) || CChar::IsGState(a1, 8) )
    return 0;
  if ( CPlayer::IsEState(a1, 8) )
    CPlayer::SubEState(a1, 8);
  CPlayer::CutdownExp((int)a1, a5);
  CChar::CancelBuffPrty((int)a1, a2, a3, a4, 256);
  a1[69] = 0;
  v6 = CChar::GetMaxHP(a1);
  (*(void (__cdecl **)(_DWORD *, int, int, int))(*a1 + 88))(a1, 7, 1, 30 * v6 / 100);
  v7 = CChar::GetMaxMP(a1);
  (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)(30 * v7 / 100) + 88))(30 * v7 / 100, 8, 1, 30 * v7 / 100);
  (*(void (__thiscall **)(int))(MEMORY[2] + 112))(2);
  CChar::AddGState((volatile LONG *)2, 0x2000);
  MEMORY[0x5AA] = GetTickCount() + 10000;
  return 1;
}

//----- (00464A50) --------------------------------------------------------
void __thiscall CPlayer::SaveRevivalPt(_DWORD *this, int a2, int a3)
{
  char *v4; // [esp+4h] [ebp-4h]

  if ( a2 >= 0 && a2 <= dword_4E35AC )
  {
    v4 = (char *)&unk_4D77C8 + 28 * a2;
    if ( *((_DWORD *)v4 + 5) )
    {
      if ( CGuild::IsWarringPeriod()
        && (CCastle::IsGateAlive(*((_DWORD *)v4 + 4), *((_DWORD *)v4 + 5))
         || !CPlayer::IsDefenseSide(this, *((_DWORD *)v4 + 4))) )
      {
LABEL_15:
        this[143] = a2;
        CPlayer::Write((int)this, 67, "b", 41);
        CDBSocket::Write(36, "db", this[113], a2);
        return;
      }
    }
    else if ( !*((_DWORD *)v4 + 4) || CPlayer::IsDefenseSide(this, *((_DWORD *)v4 + 4)) )
    {
      goto LABEL_15;
    }
    CPlayer::Write((int)this, 67, "b", 76);
  }
}
// 4E35AC: using guessed type int dword_4E35AC;

//----- (00464B40) --------------------------------------------------------
void __thiscall CPlayer::ProcessEvent(CIOObject *this, int a2, void *Src, int end)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp+0h] [ebp-50h]
  int nMax; // [esp+4h] [ebp-4Ch]
  char *v11; // [esp+24h] [ebp-2Ch]
  char *v12; // [esp+28h] [ebp-28h]
  int v13; // [esp+2Ch] [ebp-24h]
  unsigned __int8 v14; // [esp+32h] [ebp-1Eh] BYREF
  unsigned __int8 v15; // [esp+33h] [ebp-1Dh] BYREF
  int v16; // [esp+34h] [ebp-1Ch]
  unsigned __int8 v17; // [esp+3Ah] [ebp-16h] BYREF
  unsigned __int8 v18; // [esp+3Bh] [ebp-15h] BYREF
  char *v19; // [esp+3Ch] [ebp-14h]
  int v20; // [esp+40h] [ebp-10h]
  int v21; // [esp+44h] [ebp-Ch]
  char *name; // [esp+48h] [ebp-8h] BYREF
  CIOObject *v23; // [esp+4Ch] [ebp-4h]

  switch ( a2 )
  {
    case 1:
      if ( (dword_4E1178 & 2) != 0 )
      {
        if ( *((int *)this + 15) >= 10 )
        {
          ScanPacket((char *)Src, (char *)end, "bb", &v17, &v18);
          if ( v17 <= 3u && v18 <= 0xAu )
          {
            if ( CPlayer::RemoveItem((int)this, 9, 649, v18) )
            {
              v20 = RandomBetween(1, 6);
              v21 = RandomBetween(1, 6);
              v16 = v21 + v20;
              switch ( v17 )
              {
                case 0u:
                  if ( v16 <= 6 )
                    goto LABEL_34;
                  goto LABEL_33;
                case 1u:
                  if ( v16 <= 6 )
                    goto LABEL_33;
                  goto LABEL_34;
                case 2u:
                  if ( v16 != 7 )
                    goto LABEL_33;
                  goto LABEL_34;
                case 3u:
                  if ( v16 != 2 && v16 != 12 )
                    goto LABEL_33;
LABEL_34:
                  v19 = (char *)CItem::CreateItem(31, 0, dword_4D6A88[v17] * v18, -1);
                  if ( CPlayer::InsertItem((int)this, 24, (int)v19) != 1 )
                    CBase::Delete(v19);
                  CPlayer::Write((int)this, 68, "bbbbb", 43, 26, 1, v20, v21);
                  break;
                default:
LABEL_33:
                  CPlayer::Write((int)this, 68, "bbbbb", 43, 26, 0, v20, v21);
                  break;
              }
            }
            else
            {
              CPlayer::Write((int)this, 68, "bb", 43, 25);
              LOG_ERR("ProcessEvent() RemoveItem Error (%d)", 649);
            }
          }
        }
        else
        {
          CPlayer::Write((int)this, 68, "bb", 43, 24);
        }
      }
      break;
    case 3:
      if ( (dword_4E1178 & 8) != 0 && *((int *)this + 15) >= 5 )
      {
        if ( *((int *)this + 112) >= 439941 )
        {
          ScanPacket((char *)Src, (char *)end, "s", &name, 17);
          if ( IsValidAdminName(name) )
          {
            v23 = CPlayer::FindPlayer((char)name);
            if ( v23 )
            {
              if ( this == v23 )
                CPlayer::Write((int)this, 68, "bbb", 43, 8, 0);
              else
                CAuthSocket::Write(
                  11,
                  "bddd",
                  a2,
                  *((_DWORD *)this + 7),
                  *((_DWORD *)this + 112),
                  *((_DWORD *)v23 + 112));
              CIOObject::Release(v23, (volatile int *)v23 + 88);
            }
            else
            {
              CDBSocket::Write(38, "dbs", *((_DWORD *)this + 7), a2, name);
            }
          }
          else
          {
            CPlayer::Write((int)this, 68, "bbb", 43, 6, 0);
          }
        }
        else
        {
          CPlayer::Write((int)this, 68, "bbb", 43, 7, 0);
        }
      }
      break;
    case 4:
      if ( dword_4E35B8 != 1 && (dword_4E1178 & 0x10) != 0 )
      {
        if ( CChar::IsBState(0x10000000, 0) )
        {
          CPlayer::Write((int)this, 67, "b", 102);
        }
        else
        {
          ScanPacket((char *)Src, (char *)end, "bb", &v15, &v14);
          *((_DWORD *)this + 139) = v15;
          *((_DWORD *)this + 140) = v14;
          v4 = CBuff::CreateBuff(102, 1814400, 0, v8);
          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)this + 180))(this, v4);
          CChar::WriteInSight(
            (int)this,
            23,
            "dbb",
            *((_DWORD *)this + 7),
            *((_DWORD *)this + 139),
            *((_DWORD *)this + 140));
          CDBSocket::Write(75, "dbb", *((_DWORD *)this + 113), *((_DWORD *)this + 139), *((_DWORD *)this + 140));
        }
      }
      break;
    case 7:
      if ( dword_4E35B8 == 1 && (dword_4E1178 & 0x80) != 0 )
      {
        if ( CPlayer::FindItem((int)this, 653, 1) )
        {
          if ( CChar::IsBState(256, 0) )
          {
            nMax = 2;
            v5 = RandomBetween(1, 2);
          }
          else
          {
            nMax = 3;
            v5 = RandomBetween(1, 3);
          }
          v13 = v5;
          if ( v5 == 3 || CPlayer::GetInvenSize(this) < 60 )
          {
            switch ( v13 )
            {
              case 1:
                v6 = RandomBetween(0, 2);
                v12 = (char *)CItem::CreateItem(dword_4D6A7C[v6], 0, 1, -1);
                if ( v12 && CPlayer::InsertItem((int)this, 24, (int)v12) != 1 )
                  CBase::Delete(v12);
                break;
              case 2:
                v11 = (char *)CItem::CreateItem(31, 0, 500, -1);
                if ( v11 && CPlayer::InsertItem((int)this, 24, (int)v11) != 1 )
                  CBase::Delete(v11);
                break;
              case 3:
                v7 = CBuff::CreateBuff(17, 3600, 3, nMax);
                (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)this + 180))(this, v7);
                break;
            }
            if ( !CPlayer::RemoveItem((int)this, 24, 653, 1) )
              LOG_ERR("CPlayer::ProcessEvent() Failed to remove item(%d) on Event(%d)", 653, 7);
          }
          else
          {
            CPlayer::Write((int)this, 67, "b", 17);
          }
        }
        else
        {
          CPlayer::Write((int)this, 68, "bwd", 104, 653, 1);
        }
      }
      break;
    default:
      return;
  }
}
// 464EC5: variable 'v8' is possibly undefined
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 4E1178: using guessed type int dword_4E1178;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00465120) --------------------------------------------------------
void __thiscall CPlayer::OnProcessEvent(_DWORD *this, int a2, void *Src)
{
  unsigned __int8 v4; // [esp+Bh] [ebp-9h] BYREF
  int v5; // [esp+Ch] [ebp-8h] BYREF
  char v6; // [esp+12h] [ebp-2h] BYREF
  unsigned __int8 v7; // [esp+13h] [ebp-1h] BYREF
  void *Srca; // [esp+20h] [ebp+Ch]
  void *Srcb; // [esp+20h] [ebp+Ch]

  if ( a2 == 3 )
  {
    Srca = ReadPacket(Src, "bb", &v6, &v7);
    if ( v6 )
    {
      CPlayer::Write((int)this, 68, "bbb", 43, v7, 0);
    }
    else
    {
      ReadPacket(Srca, "d", &v5);
      if ( v7 == 9 )
      {
        if ( this[112] == v5 )
          CPlayer::Write((int)this, 68, "bbb", 43, 8, 0);
        else
          CAuthSocket::Write(11, "bddd", 3, this[7], this[112], v5);
      }
      else
      {
        CPlayer::Write((int)this, 68, "bbb", 43, v7, 0);
      }
    }
  }
  else if ( a2 == 5 )
  {
    Srcb = ReadPacket(Src, "b", &v4);
    CPlayer::MLMProcess(v4, Srcb, (int)Srcb);
  }
}

//----- (00465250) --------------------------------------------------------
void __thiscall CPlayer::InitStat(char *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  int v3; // [esp-50h] [ebp-64h]
  int v4; // [esp-4Ch] [ebp-60h]
  int v5; // [esp-48h] [ebp-5Ch]
  int v6; // [esp-44h] [ebp-58h]
  int v7; // [esp-3Ch] [ebp-50h]
  int v8; // [esp-34h] [ebp-48h]
  int v9; // [esp-30h] [ebp-44h]
  int v10; // [esp-2Ch] [ebp-40h]
  int v11; // [esp-28h] [ebp-3Ch]
  int v12; // [esp-24h] [ebp-38h]
  int v13; // [esp-20h] [ebp-34h]
  int v14; // [esp-1Ch] [ebp-30h]
  int v15; // [esp-18h] [ebp-2Ch]
  int v16; // [esp-14h] [ebp-28h]
  int v17; // [esp-10h] [ebp-24h]
  int v18; // [esp-Ch] [ebp-20h]
  int v19; // [esp-8h] [ebp-1Ch]
  int v20; // [esp-4h] [ebp-18h]
  _DWORD *v22; // [esp+0h] [ebp-14h]
  _DWORD *v23; // [esp+0h] [ebp-14h]
  int v24; // [esp+4h] [ebp-10h] BYREF
  int v25; // [esp+8h] [ebp-Ch] BYREF
  _DWORD *v26; // [esp+Ch] [ebp-8h]
  int v27; // [esp+10h] [ebp-4h] BYREF
  _DWORD *savedregs; // [esp+14h] [ebp+0h]

  if ( CPlayer::RemoveItem((int)this, 16, 361, 1) || CPlayer::RemoveItem((int)this, 16, 501, 1) )
  {
    CChar::CancelBuffPrty(-225);
    memset(this + 64, 0, 0x1Cu);
    memset(this + 92, 0, 0x60u);
    memset(this + 188, 0, 0x54u);
    memcpy(this + 64, (char *)&unk_4D6A28 + 28 * *((_DWORD *)this + 115), 0x14u);
    *((_DWORD *)this + 136) = 0;
    *((_DWORD *)this + 155) = 0;
    *((_DWORD *)this + 154) = 0;
    *((_DWORD *)this + 153) = 0;
    *((_DWORD *)this + 152) = 0;
    *((_DWORD *)this + 151) = 0;
    *((_DWORD *)this + 150) = 0;
    *((_DWORD *)this + 149) = 0;
    CChar::ResetAllBuff((int)this);
    (*(void (__thiscall **)(char *))(*(_DWORD *)this + 84))(this);
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
      (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v27);
    while ( 1 )
    {
      v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(&v24);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v27,
              v1) )
        break;
      v26 = *(_DWORD **)(sub_420250(&v27) + 4);
      if ( CItem::IsState(v26, 1) )
        (*(void (__thiscall **)(_DWORD *, char *))(*v26 + 104))(v26, this);
      sub_446090(&v25, 0);
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    sub_47FC00(this + 624);
    (*(void (__stdcall **)(char *, int, int, int, char *))(*(_DWORD *)this + 88))(
      this,
      23,
      1,
      5 * *((_DWORD *)this + 15),
      this);
    v22[69] = CChar::GetMaxMP(savedregs);
    v22[68] = CChar::GetMaxHP(v22);
    savedregs = (_DWORD *)v22[145];
    v27 = CChar::GetResist(v22, 4);
    v26 = (_DWORD *)CChar::GetResist(v22, 3);
    v25 = CChar::GetResist(v22, 2);
    v24 = CChar::GetResist(v22, 1);
    v23 = (_DWORD *)CChar::GetResist(0, 0);
    v20 = v23[137];
    v19 = v23[136];
    v18 = CChar::GetMaxMagic(v23);
    v17 = CChar::GetMinMagic(v23);
    v16 = CChar::GetMaxAttack(v23);
    v15 = CChar::GetMinAttack(v23);
    v14 = v23[119];
    v13 = v23[118];
    v12 = CChar::GetAbsorb(v23);
    v11 = CChar::GetDefense(v23, 0);
    v10 = CChar::GetDodge(v23);
    v9 = CChar::GetHit(v23);
    v8 = v23[69];
    v7 = v23[68];
    v6 = Char::GetDex(v23);
    v5 = CChar::GetWis(v23);
    v4 = CChar::GetInt(v23);
    v3 = CChar::GetHth(v23);
    v2 = CChar::GetStr(v23);
    CPlayer::Write(
      (int)v23,
      66,
      "bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd",
      v23[116],
      &Src,
      v23[134],
      v23[117],
      v2,
      v3,
      v4,
      v5,
      v6,
      v7,
      v7,
      v8,
      v8,
      v9,
      v10,
      v11,
      v12,
      v13,
      v14,
      v15,
      v16,
      v17,
      v18,
      v19,
      v20);
    CPlayer::Write((int)v23, 67, "b", 59);
    CPlayer::SaveAllProperty((int)v23, 0);
  }
}
// 465433: variable 'v22' is possibly undefined
// 40B870: using guessed type _DWORD __stdcall CChar::CancelBuffPrty(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446090: using guessed type _DWORD __stdcall sub_446090(_DWORD, _DWORD);
// 47FC00: using guessed type int __thiscall sub_47FC00(_DWORD);

//----- (004655B0) --------------------------------------------------------
_DWORD *__thiscall CPlayer::EventInsert(_DWORD *this, int a2)
{
  _DWORD *result; // eax

  *(_DWORD *)(a2 + 12) = this[325];
  result = this;
  this[325] = a2;
  return result;
}

//----- (004655E0) --------------------------------------------------------
_DWORD *__thiscall CPlayer::EventRemoveAll(_DWORD *this)
{
  _DWORD *result; // eax
  _DWORD *v3; // [esp+8h] [ebp-4h]

  while ( 1 )
  {
    result = this;
    if ( !this[325] )
      break;
    v3 = (_DWORD *)this[325];
    this[325] = v3[3];
    operator_delete(v3);
  }
  return result;
}

//----- (00465630) --------------------------------------------------------
BOOL __thiscall CPlayer::EventIsMoraTime(_DWORD *this)
{
  int v2; // [esp+0h] [ebp-10h]
  CMemory **v4; // [esp+8h] [ebp-8h]
  _DWORD *i; // [esp+Ch] [ebp-4h]

  for ( i = (_DWORD *)this[325]; i; i = (_DWORD *)i[3] )
  {
    if ( !i[1] )
      return GetTickCount() - i[2] >= 0x36EE80;
  }
  v4 = operator_new(0x10u);
  if ( v4 )
    v2 = sub_457E30(v4);
  else
    v2 = 0;
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = GetTickCount() - 3600000;
  CPlayer::EventInsert(this, v2);
  return 1;
}
// 457E30: using guessed type int __thiscall sub_457E30(_DWORD);

//----- (004656E0) --------------------------------------------------------
unsigned int __thiscall CPlayer::EventSetMora(_DWORD *this, int a2)
{
  char *v4; // [esp+8h] [ebp-20h]
  char *v5; // [esp+Ch] [ebp-1Ch]
  int v6; // [esp+10h] [ebp-18h]
  int v7; // [esp+14h] [ebp-14h]
  int v8; // [esp+18h] [ebp-10h]
  int v9; // [esp+1Ch] [ebp-Ch]
  unsigned int *i; // [esp+20h] [ebp-8h]
  unsigned int v11; // [esp+24h] [ebp-4h]

  for ( i = (unsigned int *)this[325]; ; i = (unsigned int *)i[3] )
  {
    if ( !i )
      return 0;
    if ( !i[1] )
      break;
  }
  v6 = 0;
  v7 = 0;
  v9 = 0;
  v8 = 0;
  *i = a2 | *i & 0xFFFF0000;
  if ( a2 == 1 )
  {
    *i += 0x10000;
    if ( (*i & 0xFFFF0000) >> 16 >= 5 )
    {
      v6 = 5000;
      v9 = 274;
      v7 = 1;
      v8 = 1;
    }
  }
  else if ( a2 == 3 )
  {
    switch ( (*i & 0xFFFF0000) >> 16 )
    {
      case 1u:
        v6 = 200;
        break;
      case 2u:
        v6 = 500;
        break;
      case 3u:
        v6 = 1000;
        break;
      case 4u:
        v6 = 2000;
        v9 = 273;
        v8 = 1;
        break;
      default:
        break;
    }
    v7 = 1;
  }
  v11 = (*i & 0xFFFF0000) >> 16;
  if ( v7 )
  {
    i[2] = GetTickCount();
    *i = 0;
    if ( v6 )
    {
      v5 = (char *)CItem::CreateItem(31, 0, v6, -1);
      if ( v5 )
      {
        if ( !CPlayer::InsertItem((int)this, 24, (int)v5) )
        {
          LOG_ERR("CPlayer::EventSetMora() Fail to insert money(%d).", v6);
          CBase::Delete(v5);
        }
      }
    }
    if ( v9 )
    {
      v4 = (char *)CItem::CreateItem(v9, 0, v8, -1);
      if ( v4 )
      {
        if ( CPlayer::InsertItem((int)this, 2, (int)v4) != 1 )
          CBase::Delete(v4);
      }
    }
  }
  return v11;
}

//----- (004658E0) --------------------------------------------------------
void __thiscall CPlayer::EventSaveDB(_DWORD *this)
{
  int v1; // eax
  int v3; // [esp+8h] [ebp-1010h]
  char *v4; // [esp+Ch] [ebp-100Ch]
  char v5; // [esp+10h] [ebp-1008h] BYREF
  char v6[4092]; // [esp+11h] [ebp-1007h] BYREF
  __int16 v7; // [esp+100Dh] [ebp-Bh]
  char v8; // [esp+100Fh] [ebp-9h]
  int v9; // [esp+1010h] [ebp-8h]
  int v10; // [esp+1014h] [ebp-4h]

  v9 = dword_4D9830;
  v5 = 0;
  memset(v6, 0, sizeof(v6));
  v7 = 0;
  v8 = 0;
  v4 = &v5;
  v10 = 0;
  v3 = this[325];
  while ( v3 )
  {
    v1 = sub_4189A0(v4, *(_BYTE *)(v3 + 4));
    v4 = (char *)sub_44F9B0(v1, *(_DWORD *)(v3 + 8));
    v3 = *(_DWORD *)(v3 + 12);
    ++v10;
  }
  if ( v10 )
    CDBSocket::Write(37, "dbm", this[113], v10, &v5, v4 - &v5);
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004659F0) --------------------------------------------------------
void __thiscall CPlayer::MLMProcess(int this, int a2, void *Src, int end)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  char *v7; // eax
  int v8; // [esp-Ch] [ebp-D8h]
  int v9; // [esp-4h] [ebp-D0h]
  int v10; // [esp-4h] [ebp-D0h]
  int v11; // [esp-4h] [ebp-D0h]
  int v12; // [esp+0h] [ebp-CCh]
  int v13; // [esp+4h] [ebp-C8h]
  int v14; // [esp+8h] [ebp-C4h]
  int v15; // [esp+Ch] [ebp-C0h]
  int v16; // [esp+10h] [ebp-BCh]
  int v17; // [esp+14h] [ebp-B8h]
  unsigned __int8 v19; // [esp+37h] [ebp-95h] BYREF
  int v20; // [esp+38h] [ebp-94h] BYREF
  int v21; // [esp+3Ch] [ebp-90h]
  unsigned __int8 v22; // [esp+43h] [ebp-89h] BYREF
  int v23; // [esp+44h] [ebp-88h]
  int v24; // [esp+48h] [ebp-84h]
  char *str; // [esp+4Ch] [ebp-80h] BYREF
  CIOObject *v26; // [esp+50h] [ebp-7Ch]
  int v27; // [esp+54h] [ebp-78h] BYREF
  char v28; // [esp+5Ah] [ebp-72h] BYREF
  char v29; // [esp+5Bh] [ebp-71h] BYREF
  char *v30; // [esp+5Ch] [ebp-70h]
  char *packet; // [esp+60h] [ebp-6Ch]
  int v32; // [esp+64h] [ebp-68h]
  int v33; // [esp+68h] [ebp-64h]
  void *v34; // [esp+6Ch] [ebp-60h]
  CIOObject *v35; // [esp+70h] [ebp-5Ch]
  int v36; // [esp+74h] [ebp-58h]
  int v37; // [esp+78h] [ebp-54h] BYREF
  int v38; // [esp+7Ch] [ebp-50h]
  CIOObject *v39; // [esp+80h] [ebp-4Ch]
  int v40; // [esp+84h] [ebp-48h] BYREF
  int v41; // [esp+88h] [ebp-44h] BYREF
  _DWORD *k; // [esp+8Ch] [ebp-40h]
  char *v43; // [esp+90h] [ebp-3Ch]
  int j; // [esp+94h] [ebp-38h]
  int v45; // [esp+98h] [ebp-34h]
  CIOObject *v46; // [esp+9Ch] [ebp-30h]
  int v47; // [esp+A0h] [ebp-2Ch]
  _DWORD *i; // [esp+A4h] [ebp-28h]
  _DWORD *v49; // [esp+A8h] [ebp-24h]
  int v50; // [esp+ACh] [ebp-20h] BYREF
  char v51; // [esp+B3h] [ebp-19h] BYREF
  CIOObject *v52; // [esp+B4h] [ebp-18h]
  int v53; // [esp+B8h] [ebp-14h] BYREF
  char v54; // [esp+BFh] [ebp-Dh] BYREF
  CIOObject *v55; // [esp+C0h] [ebp-Ch]
  CIOObject *v56; // [esp+C4h] [ebp-8h]
  int v57; // [esp+C8h] [ebp-4h] BYREF

  switch ( a2 )
  {
    case 0:
      if ( *(int *)(this + 60) <= 15 )
      {
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
        if ( CPlayer::_MLMFind(2, 0) )
        {
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
          CPlayer::Write(this, 68, "bbb", 43, 13, 0);
        }
        else
        {
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
          ScanPacket((char *)Src, (char *)end, "s", &v57, 17);
          v56 = CPlayer::FindPlayer(v57);
          if ( v56 )
          {
            if ( *((int *)v56 + 15) < 16 )
            {
              CPlayer::Write(this, 68, "bbb", 43, 11, 0);
            }
            else if ( CPlayer::MLMPupilNum(v56) < 20 )
            {
              v4 = std___Mpunct_wchar_t___do_frac_digits(v56);
              CAuthSocket::Write(11, "bddbd", 5, *(_DWORD *)(this + 28), *(_DWORD *)(this + 448), 1, v4);
            }
            else
            {
              CPlayer::Write(this, 68, "bbb", 43, 12, 0);
            }
            CIOObject::Release(v56, (volatile int *)v56 + 88);
          }
          else
          {
            CPlayer::Write(this, 67, "b", 25);
          }
        }
      }
      else
      {
        CPlayer::Write(this, 68, "bbb", 43, 10, 0);
      }
      break;
    case 1:
      ScanPacket((char *)Src, (char *)end, "db", &v53, &v54);
      v55 = sub_450810(v53);
      if ( v55 )
      {
        if ( v54 )
        {
          v9 = *(_DWORD *)(this + 28);
          v8 = *((_DWORD *)v55 + 112);
          v5 = std___Mpunct_wchar_t___do_frac_digits(v55);
          CAuthSocket::Write(11, "bddbd", 5, v5, v8, 0, v9);
        }
        else
        {
          CPlayer::Write((int)v55, 68, "bbb", 43, 14, 0);
        }
        CIOObject::Release(v55, (volatile int *)v55 + 88);
      }
      break;
    case 2:
      ReadPacket(Src, "bd", &v51, &v50);
      v52 = sub_450810(v50);
      if ( v52 )
      {
        if ( v51 )
        {
          sub_466B20(this, v52);
          if ( CPlayer::_MLMFind(2, 0) )
          {
            sub_466B70(this, v52);
            CAuthSocket::Write(11, "bddbd", 5, 0, *(_DWORD *)(this + 448), 3, 0);
            return;
          }
          i = (_DWORD *)CPlayer::_MLMFind(2, 0);
          if ( i )
          {
            if ( operator_new(0x30u) )
              v17 = sub_466AB0(1, i[1], i + 2, i[7], i[8], 0, i[10]);
            else
              v17 = 0;
            v47 = v17;
            CPlayer::_MLMInsert(v17);
            CDBSocket::Write(66, "dbddbsbb", *(_DWORD *)(this + 452), 0, i[1], i[10], 1, i + 2, i[7], i[8]);
          }
          if ( operator_new(0x30u) )
            v16 = sub_466AB0(
                    2,
                    *((_DWORD *)v52 + 113),
                    (char *)v52 + 32,
                    *((_DWORD *)v52 + 115),
                    *((_DWORD *)v52 + 15),
                    1,
                    *((_DWORD *)v52 + 112));
          else
            v16 = 0;
          v47 = v16;
          CPlayer::_MLMInsert(v16);
          CDBSocket::Write(
            66,
            "dbddbsbb",
            *(_DWORD *)(this + 452),
            0,
            *((_DWORD *)v52 + 113),
            *((_DWORD *)v52 + 112),
            2,
            (char *)v52 + 32,
            *((_DWORD *)v52 + 115),
            *((_DWORD *)v52 + 15));
          v49 = 0;
          for ( i = (_DWORD *)CPlayer::_MLMFind(4, 0); i && *i == 4; i = (_DWORD *)i[11] )
          {
            if ( operator_new(0x30u) )
              v15 = sub_466AB0(3, i[1], i + 2, i[7], i[8], i[9], i[10]);
            else
              v15 = 0;
            v47 = v15;
            CPlayer::_MLMInsert(v15);
            CDBSocket::Write(66, "dbddbsbb", *(_DWORD *)(this + 452), 0, i[1], i[10], 3, i + 2, i[7], i[8]);
            CDBSocket::Write(
              66,
              "dbddbsbb",
              i[1],
              0,
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 448),
              3,
              this + 32,
              *(_DWORD *)(this + 460),
              *(_DWORD *)(this + 60));
            if ( i[9] )
            {
              v46 = CPlayer::ScanPlayer(i[1]);
              if ( v46 )
              {
                v49 = CBaseList::Push(v49, (int)v46);
                CIOObject::Release(v46, (volatile int *)v46 + 88);
              }
            }
          }
          if ( operator_new(0x30u) )
            v14 = sub_466AB0(
                    4,
                    *(_DWORD *)(this + 452),
                    (void *)(this + 32),
                    *(_DWORD *)(this + 460),
                    *(_DWORD *)(this + 60),
                    1,
                    *(_DWORD *)(this + 448));
          else
            v14 = 0;
          v47 = v14;
          CPlayer::_MLMInsert(v14);
          CDBSocket::Write(
            66,
            "dbddbsbb",
            *((_DWORD *)v52 + 113),
            0,
            *(_DWORD *)(this + 452),
            *(_DWORD *)(this + 448),
            4,
            this + 32,
            *(_DWORD *)(this + 460),
            *(_DWORD *)(this + 60));
          sub_466B70(this, v52);
          while ( v49 )
          {
            v45 = unknown_libname_15(v49);
            if ( operator_new(0x30u) )
              v13 = sub_466AB0(
                      3,
                      *(_DWORD *)(this + 452),
                      (void *)(this + 32),
                      *(_DWORD *)(this + 460),
                      *(_DWORD *)(this + 60),
                      1,
                      *(_DWORD *)(this + 448));
            else
              v13 = 0;
            v47 = v13;
            CIOCriticalSection::Enter((CIOCriticalSection *)(v45 + 1308));
            CPlayer::_MLMInsert(v13);
            CIOCriticalSection::Leave((CIOCriticalSection *)(v45 + 1308));
            v49 = (_DWORD *)CBaseList::Pop((int)v49);
          }
          if ( v51 == 1 )
          {
            for ( j = 0; j < 5; ++j )
            {
              v43 = (char *)CItem::CreateItem(dword_4D91D0[5 * *(_DWORD *)(this + 460) + j], 0, 1, -1);
              if ( v43 && CPlayer::InsertItem(this, 41, (int)v43) != 1 )
                CBase::Delete(v43);
            }
          }
          v6 = CPlayer::MLMPupilNum(v52);
          CPlayer::Write((int)v52, 68, "bbbs", 43, 17, v6);
          CPlayer::Write(this, 68, "bbbs", 43, 18, 0, (char *)v52 + 32);
        }
        else
        {
          CPlayer::Write((int)v52, 68, "bbb", 43, 15, 0);
          CPlayer::Write(this, 68, "bbb", 43, 13, 0);
        }
        CIOObject::Release(v52, (volatile int *)v52 + 88);
      }
      else if ( v51 )
      {
        CAuthSocket::Write(11, "bddbd", 5, 0, *(_DWORD *)(this + 448), 3, 0);
      }
      break;
    case 3:
      ScanPacket((char *)Src, (char *)end, "d", &v41);
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
      for ( k = *(_DWORD **)(this + 1304); k && (*k != 2 && *k != 4 || k[1] != v41); k = (_DWORD *)k[11] )
        ;
      if ( k )
      {
        if ( *k == 2 )
        {
          if ( *(int *)(this + 60) >= 16 )
          {
            CPlayer::Write(this, 68, "bbbs", 43, 21, 0, k + 2);
            v40 = 0;
            CPlayer::_MLMGet(&v40, 3);
            CPlayer::_MLMDelete(1, 0);
            CPlayer::_MLMDelete(2, 0);
            CPlayer::_MLMDelete(3, 0);
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
            while ( v40 )
            {
              v10 = *(_DWORD *)(this + 452);
              unknown_libname_15(v40);
              CPlayer::MLMDelete(3, v10);
              v40 = CBaseList::Pop(v40);
            }
            CDBSocket::Write(66, "db", *(_DWORD *)(this + 452), 2);
            v39 = CPlayer::ScanPlayer(v41);
            if ( v39 )
            {
              CPlayer::MLMDelete(4, *(_DWORD *)(this + 452));
              CPlayer::Write((int)v39, 68, "bbbs", 43, 21, 0, this + 32);
              CIOObject::Release(v39, (volatile int *)v39 + 88);
            }
            CDBSocket::Write(66, "dbd", v41, 1, *(_DWORD *)(this + 452));
            CAuthSocket::Write(11, "bddbd", 5, 0, *(_DWORD *)(this + 448), 4, 0);
          }
          else
          {
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
            CPlayer::Write(this, 68, "bbb", 43, 16, 0);
          }
        }
        else
        {
          v38 = 0;
          v36 = CPlayer::_MLMFind(4, v41);
          if ( v36 )
          {
            CPlayer::Write(this, 68, "bbbs", 43, 21, 0, v36 + 8);
            v38 = *(_DWORD *)(v36 + 40);
          }
          CPlayer::_MLMDelete(4, v41);
          v37 = 0;
          CPlayer::_MLMGet(&v37, 4);
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
          CDBSocket::Write(66, "dbd", *(_DWORD *)(this + 452), 1, v41);
          while ( v37 )
          {
            v11 = v41;
            unknown_libname_15(v37);
            CPlayer::MLMDelete(3, v11);
            v37 = CBaseList::Pop(v37);
          }
          v35 = CPlayer::ScanPlayer(v41);
          if ( v35 )
          {
            CPlayer::MLMDelete(1, 0);
            CPlayer::MLMDelete(2, 0);
            CPlayer::MLMDelete(3, 0);
            CPlayer::Write((int)v35, 68, "bbbs", 43, 21, 0, this + 32);
            CIOObject::Release(v35, (volatile int *)v35 + 88);
          }
          CDBSocket::Write(66, "db", v41, 2);
          CAuthSocket::Write(11, "bddbd", 5, 0, v38, 4, 0);
        }
      }
      else
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
      }
      break;
    case 4:
      v34 = CIOBuffer::Alloc();
      v30 = (char *)v34;
      *((_BYTE *)v34 + 2) = 100;
      packet = v30 + 5;
      v33 = 0;
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
      v32 = *(_DWORD *)(this + 1304);
      while ( v32 )
      {
        packet = (char *)sub_4189A0(packet, *(_BYTE *)v32);
        v7 = (char *)sub_44F9B0(packet, *(_DWORD *)(v32 + 4));
        packet = PutString(v7, (const char *)(v32 + 8));
        packet = (char *)sub_4189A0(packet, *(_BYTE *)(v32 + 36));
        packet = (char *)sub_4189A0(packet, *(_BYTE *)(v32 + 28));
        packet = (char *)sub_4189A0(packet, *(_BYTE *)(v32 + 32));
        v32 = *(_DWORD *)(v32 + 44);
        ++v33;
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
      WritePacket(v30 + 3, "bb", 1, v33);
      *(_WORD *)v30 = (_WORD)packet - (_WORD)v30;
      *((_DWORD *)v34 + 2000) = *(unsigned __int16 *)v30;
      CSocket::_CSocket(v34);
      break;
    case 5:
      ReadPacket(Src, "bbd", &v28, &v29, &v27);
      if ( v28 == 1 )
      {
        v26 = sub_450810(v27);
        if ( v26 )
        {
          CPlayer::Write((int)v26, 100, "bds", (v29 & 4) != 0 ? 2 : 0, *(_DWORD *)(this + 28), this + 32);
          CIOObject::Release(v26, (volatile int *)v26 + 88);
        }
        else
        {
          CPlayer::Write(this, 67, "b", 25);
        }
      }
      else if ( (v29 & 4) == 0 )
      {
        CPlayer::MLMPayMoney(1);
      }
      break;
    case 6:
      ScanPacket((char *)Src, (char *)end, "s", &str, 181);
      if ( CPlayer::MLMPupilNum(this) > 0 )
      {
        v24 = 22;
        if ( IsValidString(str) )
        {
          CDBSocket::Write(66, "dbs", *(_DWORD *)(this + 452), 4, str);
          v24 = 23;
        }
        CPlayer::Write(this, 68, "bbb", 43, v24, 0);
      }
      break;
    case 7:
      ScanPacket((char *)Src, (char *)end, "b", &v22);
      v23 = *(_DWORD *)(this + 452);
      if ( v22 )
      {
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
        v21 = CPlayer::_MLMFind(2, 0);
        if ( v21 )
          v12 = *(_DWORD *)(v21 + 4);
        else
          v12 = 0;
        v23 = v12;
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
      }
      if ( v23 )
        CDBSocket::Write(66, "dbbd", v23, 5, v22, *(_DWORD *)(this + 28));
      break;
    case 8:
      ReadPacket(Src, "bs", &v19, &v20);
      CPlayer::Write(this, 100, "bbs", 3, v19, v20);
      break;
    default:
      return;
  }
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 466B20: using guessed type _DWORD __cdecl sub_466B20(_DWORD, _DWORD);
// 466B70: using guessed type _DWORD __cdecl sub_466B70(_DWORD, _DWORD);
// 466C70: using guessed type _DWORD __stdcall sub_466C70(_DWORD);
// 466CD0: using guessed type _DWORD __stdcall sub_466CD0(_DWORD, _DWORD);
// 466D10: using guessed type _DWORD __stdcall sub_466D10(_DWORD, _DWORD);
// 466F20: using guessed type _DWORD __stdcall sub_466F20(_DWORD, _DWORD);
// 466F80: using guessed type _DWORD __stdcall CPlayer::_MLMGet(_DWORD, _DWORD);
// 467010: using guessed type int __thiscall sub_467010(_DWORD);
// 467080: using guessed type _DWORD __stdcall CPlayer::MLMPayMoney(_DWORD);

//----- (00466AB0) --------------------------------------------------------
int *__thiscall sub_466AB0(int *this, int a2, int a3, void *Src, int a5, int a6, int a7, int a8)
{
  *this = a2;
  this[1] = a3;
  memcpy(this + 2, Src, 0x11u);
  this[7] = a5;
  this[8] = a6;
  this[9] = a7;
  this[10] = a8;
  this[11] = 0;
  return this;
}

//----- (00466B20) --------------------------------------------------------
void __usercall sub_466B20(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, unsigned int a4, unsigned int a5)
{
  if ( a4 >= a5 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(a5 + 1308), a1, a2, a3);
    CIOCriticalSection::Enter((CIOCriticalSection *)(a4 + 1308), a1, a2, a3);
  }
  else
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(a4 + 1308), a1, a2, a3);
    CIOCriticalSection::Enter((CIOCriticalSection *)(a5 + 1308), a1, a2, a3);
  }
}

//----- (00466B70) --------------------------------------------------------
void __usercall sub_466B70(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5)
{
  CIOCriticalSection::Leave((CIOCriticalSection *)(a4 + 1308), a1, a2, a3);
  CIOCriticalSection::Leave((CIOCriticalSection *)(a5 + 1308), a1, a2, a3);
}

//----- (00466BA0) --------------------------------------------------------
void __thiscall CPlayer::MLMLoad(int this, _DWORD *a2)
{
  CIOObject *v3; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
  CPlayer::_MLMInsert(a2);
  if ( *a2 == 2 || *a2 == 3 || *a2 == 4 )
  {
    v3 = CPlayer::ScanPlayer(a2[1]);
    if ( v3 )
    {
      a2[9] = 1;
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
      CPlayer::MLMUpdate(*(_DWORD *)(this + 452), 0, 1);
      CIOObject::Release(v3, (volatile int *)v3 + 88);
      return;
    }
  }
  else if ( !*a2 && (int)a2[1] > 20000000 )
  {
    *(_DWORD *)(this + 1348) = 1;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
}
// 466C70: using guessed type _DWORD __stdcall sub_466C70(_DWORD);
// 466E70: using guessed type _DWORD __stdcall sub_466E70(_DWORD, _DWORD, _DWORD);

//----- (00466C70) --------------------------------------------------------
_DWORD *__thiscall CPlayer::_MLMInsert(_DWORD **this, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD **i; // [esp+8h] [ebp-8h]
  _DWORD *v4; // [esp+Ch] [ebp-4h]

  for ( i = this + 326; ; i = (_DWORD **)(v4 + 11) )
  {
    v4 = *i;
    if ( !*i || *v4 >= *a2 )
      break;
  }
  result = a2;
  *i = a2;
  a2[11] = v4;
  return result;
}

//----- (00466CD0) --------------------------------------------------------
void __thiscall CPlayer::MLMDelete(int this, int a2, int a3)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
  CPlayer::_MLMDelete(a2, a3);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
}
// 466D10: using guessed type _DWORD __stdcall sub_466D10(_DWORD, _DWORD);

//----- (00466D10) --------------------------------------------------------
void __thiscall CPlayer::_MLMDelete(_DWORD **this, int a2, int a3)
{
  _DWORD **v3; // [esp+8h] [ebp-8h]
  _DWORD *v4; // [esp+Ch] [ebp-4h]

  if ( a2 )
  {
    v3 = this + 326;
    while ( 1 )
    {
      v4 = *v3;
      if ( !*v3 )
        break;
      if ( *v4 == a2 && (!a3 || v4[1] == a3) )
      {
        *v3 = (_DWORD *)v4[11];
        operator_delete(v4);
        if ( a2 != 3 || a3 )
          return;
      }
      else
      {
        v3 = (_DWORD **)(v4 + 11);
      }
    }
  }
}

//----- (00466DA0) --------------------------------------------------------
void __thiscall CPlayer::MLMDeleteAll(int this)
{
  CIOObject *v2; // [esp+8h] [ebp-Ch]
  _DWORD *v3; // [esp+Ch] [ebp-8h]
  void *v4; // [esp+10h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
  v3 = *(_DWORD **)(this + 1304);
  *(_DWORD *)(this + 1304) = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
  while ( v3 )
  {
    if ( *v3 == 2 || *v3 == 3 || *v3 == 4 )
    {
      v2 = CPlayer::ScanPlayer(v3[1]);
      if ( v2 )
      {
        CPlayer::MLMUpdate(*(_DWORD *)(this + 452), 0, 0);
        CIOObject::Release(v2, (volatile int *)v2 + 88);
      }
    }
    v4 = v3;
    v3 = (_DWORD *)v3[11];
    operator_delete(v4);
  }
}
// 466E70: using guessed type _DWORD __stdcall sub_466E70(_DWORD, _DWORD, _DWORD);

//----- (00466E70) --------------------------------------------------------
void __thiscall CPlayer::MLMUpdate(int this, int a2, int a3, int a4)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
  for ( i = *(_DWORD **)(this + 1304); i && (!*i || i[1] != a2); i = (_DWORD *)i[11] )
    ;
  if ( i )
  {
    if ( a3 )
    {
      if ( a3 == 1 )
        i[8] = a4;
    }
    else
    {
      i[9] = a4;
      if ( a4 )
        CPlayer::Write(this, 68, "bbs", 73, *i, i + 2);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
}

//----- (00466F20) --------------------------------------------------------
_DWORD *__thiscall CPlayer::_MLMFind(_DWORD *this, int a2, int a3)
{
  _DWORD *i; // [esp+4h] [ebp-4h]

  for ( i = (_DWORD *)this[326]; i && *i <= a2; i = (_DWORD *)i[11] )
  {
    if ( *i == a2 && (!a3 || i[1] == a3) )
      return i;
  }
  return 0;
}

//----- (00466F80) --------------------------------------------------------
void __thiscall CPlayer::_MLMGet(_DWORD *this, void **a2, int a3)
{
  CIOObject *v3; // [esp+4h] [ebp-8h]
  _DWORD *i; // [esp+8h] [ebp-4h]

  for ( i = CPlayer::_MLMFind(this, a3, 0); i && *i == a3; i = (_DWORD *)i[11] )
  {
    if ( i[9] )
    {
      v3 = CPlayer::ScanPlayer(i[1]);
      if ( v3 )
      {
        *a2 = CBaseList::Push(*a2, (int)v3);
        CIOObject::Release(v3, (volatile int *)v3 + 88);
      }
    }
  }
}

//----- (00467010) --------------------------------------------------------
int __thiscall CPlayer::MLMPupilNum(int this)
{
  _DWORD *i; // [esp+4h] [ebp-8h]
  int v4; // [esp+8h] [ebp-4h]

  v4 = 0;
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
  for ( i = *(_DWORD **)(this + 1304); i; i = (_DWORD *)i[11] )
  {
    if ( *i == 4 )
      ++v4;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
  return v4;
}

//----- (00467080) --------------------------------------------------------
void __thiscall CPlayer::MLMPayMoney(int this, int a2)
{
  int v2; // eax
  int v3; // [esp+4h] [ebp-40h]
  char *v5; // [esp+Ch] [ebp-38h]
  CIOObject *v6; // [esp+10h] [ebp-34h]
  int v7; // [esp+14h] [ebp-30h]
  int v8; // [esp+18h] [ebp-2Ch]
  _DWORD *v9; // [esp+1Ch] [ebp-28h]
  int v10; // [esp+20h] [ebp-24h]
  char *v11; // [esp+24h] [ebp-20h]
  CIOObject *v12; // [esp+2Ch] [ebp-18h]
  int j; // [esp+30h] [ebp-14h]
  _DWORD *i; // [esp+34h] [ebp-10h]
  int v15; // [esp+38h] [ebp-Ch]
  int v16[2]; // [esp+3Ch] [ebp-8h]

  if ( a2 )
  {
    if ( a2 == 1 )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
      v9 = CPlayer::_MLMFind((_DWORD *)this, 2, 0);
      if ( v9 )
      {
        v7 = v9[1];
        v8 = v9[10];
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
        v5 = (char *)CItem::CreateItem(31, 0, *(_DWORD *)(this + 60) != 16 ? 50000 : 20000, -1);
        if ( v5 )
        {
          (*(void (__thiscall **)(char *, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 160))(
            v5,
            40,
            *(_DWORD *)(this + 448),
            0,
            0);
          (*(void (__thiscall **)(char *, int, int, _DWORD, _DWORD))(*(_DWORD *)v5 + 160))(v5, 40, v8, 0, 0);
          CBase::Delete(v5);
        }
        CPlayer::Write(this, 68, "bbb", 43, 19, *(_DWORD *)(this + 60));
        v6 = CPlayer::ScanPlayer(v7);
        if ( v6 )
        {
          CPlayer::Write((int)v6, 68, "bbbs", 43, 20, *(_DWORD *)(this + 60), this + 32);
          CIOObject::Release(v6, (volatile int *)v6 + 88);
        }
      }
      else
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
      }
    }
    else if ( *(_DWORD *)(this + 60) == 16 || *(_DWORD *)(this + 60) == 30 )
    {
      CAuthSocket::Write(11, "bddbd", 5, *(_DWORD *)(this + 28), *(_DWORD *)(this + 448), 2, 0);
    }
  }
  else
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    if ( *(int *)(this + 1340) < 100 )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    }
    else
    {
      v15 = *(_DWORD *)(this + 1340);
      *(_DWORD *)(this + 1340) = 0;
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      v16[0] = 0;
      v16[1] = 0;
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
      if ( *(_DWORD *)(this + 1304) )
      {
        for ( i = *(_DWORD **)(this + 1304); i && (*i == 1 || *i == 2); i = (_DWORD *)i[11] )
          *(&v15 + *i) = i[1];
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
      for ( j = 0; j < 2; ++j )
      {
        if ( v16[j] )
        {
          v12 = CPlayer::ScanPlayer(v16[j]);
          if ( v12 )
          {
            if ( !*((_DWORD *)v12 + 337) )
            {
              if ( (*(_DWORD *)(this + 60) - 1) / 10 <= 3 )
                v3 = (*(_DWORD *)(this + 60) - 1) / 10;
              else
                v3 = 3;
              v10 = dword_4D66BC[3 * v3 + j] * v15 / 100;
              if ( v10 >= dword_4D66C4[3 * v3] )
                v2 = CItem::CreateItem(31, 0, dword_4D66C4[3 * v3], -1);
              else
                v2 = CItem::CreateItem(31, 0, v10, -1);
              v11 = (char *)v2;
              *(_DWORD *)(v2 + 80) = 2;
              if ( CPlayer::InsertItem((int)v12, 41, v2) != 1 )
                CBase::Delete(v11);
            }
            CIOObject::Release(v12, (volatile int *)v12 + 88);
          }
        }
      }
    }
  }
}
// 4D66BC: using guessed type int dword_4D66BC[];

//----- (00467400) --------------------------------------------------------
void __thiscall CPlayer::MLMAccumFee(int this, int a2)
{
  _DWORD *v2; // [esp+0h] [ebp-10h]
  _DWORD *v4; // [esp+Ch] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
  v4 = CPlayer::_MLMFind((_DWORD *)this, 0, 0);
  if ( v4 )
  {
    v4[1] += a2;
    if ( (int)v4[1] > 20000000 )
      *(_DWORD *)(this + 1348) = 1;
  }
  else if ( operator_new(0x30u) )
  {
    v2 = (_DWORD *)sub_466AB0(0, a2, (void *)&Src, 0, 0, 0, 0);
    CPlayer::_MLMInsert((_DWORD **)this, v2);
  }
  else
  {
    CPlayer::_MLMInsert((_DWORD **)this, 0);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
  CDBSocket::Write(66, "dbd", *(_DWORD *)(this + 452), 3, a2);
}

//----- (004674D0) --------------------------------------------------------
void __thiscall CPlayer::MLMLevelUp(int this)
{
  int v1; // eax
  int v2; // [esp-Ch] [ebp-1Ch]
  int v3; // [esp-4h] [ebp-14h]
  CIOObject *v5; // [esp+4h] [ebp-Ch]
  _DWORD *v6; // [esp+8h] [ebp-8h]
  _DWORD *i; // [esp+Ch] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1308));
  v6 = 0;
  for ( i = *(_DWORD **)(this + 1304); i; i = (_DWORD *)i[11] )
  {
    if ( *i == 2 || *i == 3 || *i == 4 )
    {
      v5 = CPlayer::ScanPlayer(i[1]);
      if ( v5 )
      {
        v6 = CBaseList::Push(v6, (int)v5);
        CIOObject::Release(v5, (volatile int *)v5 + 88);
      }
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1308));
  while ( v6 )
  {
    v3 = *(_DWORD *)(this + 60);
    v2 = *(_DWORD *)(this + 452);
    v1 = unknown_libname_15(v6);
    CPlayer::MLMUpdate(v1, v2, 1, v3);
    v6 = (_DWORD *)CBaseList::Pop((int)v6);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (004675B0) --------------------------------------------------------
void __thiscall CPlayer::FRDProcess(int this, int a2, void *packet, int end)
{
  int v4; // eax
  int v5; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v6; // eax
  int v7; // eax
  int v8; // eax
  char *v9; // eax
  int v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  char v16[4]; // [esp+Ch] [ebp-560h] BYREF
  char v17[8]; // [esp+30h] [ebp-53Ch] BYREF
  char v18[4]; // [esp+58h] [ebp-514h] BYREF
  char v19[4]; // [esp+5Ch] [ebp-510h] BYREF
  char v20[8]; // [esp+60h] [ebp-50Ch] BYREF
  char v21[4]; // [esp+88h] [ebp-4E4h] BYREF
  CIOObject *v22; // [esp+8Ch] [ebp-4E0h]
  char *v23; // [esp+90h] [ebp-4DCh]
  char *v24; // [esp+94h] [ebp-4D8h]
  int v25; // [esp+98h] [ebp-4D4h]
  void *v26; // [esp+9Ch] [ebp-4D0h]
  char v27[4]; // [esp+A0h] [ebp-4CCh] BYREF
  char v28[8]; // [esp+A4h] [ebp-4C8h] BYREF
  char v29[4]; // [esp+ACh] [ebp-4C0h] BYREF
  char v30[24]; // [esp+B0h] [ebp-4BCh] BYREF
  int j; // [esp+C8h] [ebp-4A4h]
  char str[20]; // [esp+CCh] [ebp-4A0h] BYREF
  CIOBuffer *v33; // [esp+E0h] [ebp-48Ch]
  unsigned __int8 v34; // [esp+E7h] [ebp-485h] BYREF
  char *v35; // [esp+E8h] [ebp-484h]
  CIOBuffer *v36; // [esp+ECh] [ebp-480h]
  CIOObject *v37; // [esp+F0h] [ebp-47Ch]
  int v38; // [esp+F4h] [ebp-478h] BYREF
  char v39[20]; // [esp+F8h] [ebp-474h] BYREF
  int v40; // [esp+10Ch] [ebp-460h]
  void *Src; // [esp+110h] [ebp-45Ch] BYREF
  int v42; // [esp+114h] [ebp-458h] BYREF
  char v43[4]; // [esp+118h] [ebp-454h] BYREF
  char v44[4]; // [esp+11Ch] [ebp-450h] BYREF
  int i; // [esp+120h] [ebp-44Ch]
  CIOBuffer *v46; // [esp+124h] [ebp-448h]
  unsigned __int8 v47; // [esp+12Bh] [ebp-441h]
  int _Keyval; // [esp+12Ch] [ebp-440h] BYREF
  unsigned __int8 v49; // [esp+133h] [ebp-439h] BYREF
  char v50; // [esp+134h] [ebp-438h] BYREF
  char v51[1020]; // [esp+135h] [ebp-437h] BYREF
  __int16 v52; // [esp+531h] [ebp-3Bh]
  char v53; // [esp+533h] [ebp-39h]
  int v54; // [esp+534h] [ebp-38h]
  CIOBuffer *v55; // [esp+538h] [ebp-34h]
  char *v56; // [esp+53Ch] [ebp-30h]
  int v57; // [esp+540h] [ebp-2Ch] BYREF
  char v58[20]; // [esp+544h] [ebp-28h] BYREF
  int v59; // [esp+558h] [ebp-14h]
  int v60; // [esp+55Ch] [ebp-10h]
  char v61[4]; // [esp+560h] [ebp-Ch] BYREF
  CIOObject *v62; // [esp+564h] [ebp-8h]
  char *Str2; // [esp+568h] [ebp-4h] BYREF
  char *packeta; // [esp+578h] [ebp+Ch]
  char *packetb; // [esp+578h] [ebp+Ch]

  v60 = dword_4D9830;
  switch ( a2 )
  {
    case 0:
      ScanPacket((char *)packet, (char *)end, "s", &Str2, 17);
      if ( IsValidAdminName(Str2) && strcmp((const char *)(this + 32), Str2) )
      {
        v62 = CPlayer::FindPlayer((char)Str2);
        if ( v62 )
        {
          CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1364));
          if ( (unsigned int)unknown_libname_18(this + 1352) < 0x1E )
          {
            std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
              (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1352),
              (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)v61,
              (const int *)v62 + 113);
            v4 = sub_430C20(v21);
            if ( (unsigned __int8)unknown_libname_16(v4) )
            {
              sub_468240(*((_DWORD *)v62 + 113), (char *)v62 + 32, 1);
              v5 = sub_4728F0(&v57, &v57);
              sub_470890(
                this + 1352,
                (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v20,
                v5);
              CDBSocket::Write(29, "dbds", *(_DWORD *)(this + 452), 0, v57, v58);
              CPlayer::Write(this, 18, "bdsb", 0, v57, v58, v59);
            }
            else
            {
              CPlayer::Write(this, 68, "bbs", 83, 1, Str2);
            }
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
            CIOObject::Release(v62, (volatile int *)v62 + 88);
          }
          else
          {
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
            CPlayer::Write(this, 68, "bbs", 83, 0, Str2);
            CIOObject::Release(v62, (volatile int *)v62 + 88);
          }
        }
        else
        {
          CDBSocket::Write(29, "dbs", *(_DWORD *)(this + 452), 2, Str2);
        }
      }
      break;
    case 1:
      packeta = ScanPacket((char *)packet, (char *)end, "b", &v49);
      if ( v49 && v49 <= 0x1Eu )
      {
        v55 = CIOBuffer::Alloc();
        v46 = v55;
        *((_BYTE *)v55 + 2) = 18;
        v54 = (int)v46 + 5;
        v50 = 0;
        memset(v51, 0, sizeof(v51));
        v52 = 0;
        v53 = 0;
        v56 = &v50;
        v47 = 0;
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1364));
        for ( i = 0; i < v49; ++i )
        {
          packeta = ScanPacket(packeta, (char *)end, "d", &_Keyval);
          std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1352),
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)v44,
            &_Keyval);
          v6 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v19);
          if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                 (std::vector<CIOSocket::CIOTimer>::const_iterator *)v44,
                 v6) )
          {
            ++v47;
            v54 = sub_44F9B0(v54, _Keyval);
            v56 = (char *)sub_44F9B0(v56, _Keyval);
            sub_471920(&_Keyval);
          }
        }
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
        if ( v47 )
        {
          CDBSocket::Write(29, "dbbm", *(_DWORD *)(this + 452), 1, v47, &v50, v56 - &v50);
          WritePacket((char *)v46 + 3, "bb", 1, v47);
          *(_WORD *)v46 = v54 - (_WORD)v46;
          *((_DWORD *)v55 + 2000) = *(unsigned __int16 *)v46;
          CSocket::_CSocket(v55);
        }
        else
        {
          CIOBuffer::Release(v55);
        }
      }
      break;
    case 2:
      ReadPacket(packet, "ds", &v42, &Src);
      if ( v42 )
      {
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1364));
        if ( (unsigned int)unknown_libname_18(this + 1352) < 0x1E )
        {
          std::_Tree<std::_Tmap_traits<int,CUser *,std::less<int>,std::allocator<std::pair<int const,CUser *>>,0>>::find(
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1352),
            (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)v43,
            &v42);
          v7 = sub_430C20(v18);
          if ( (unsigned __int8)unknown_libname_16(v7) )
          {
            sub_468240(v42, Src, 0);
            v8 = sub_4728F0(&v38, &v38);
            sub_470890(
              this + 1352,
              (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v17,
              v8);
            CDBSocket::Write(29, "dbds", *(_DWORD *)(this + 452), 0, v38, v39);
            v37 = CPlayer::FindPlayer((char)Src);
            if ( v37 )
            {
              CIOObject::Release(v37, (volatile int *)v37 + 88);
              v40 = 1;
            }
            CPlayer::Write(this, 18, "bdsb", 0, v38, v39, v40);
          }
          else
          {
            CPlayer::Write(this, 68, "bbs", 83, 1, Src);
          }
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
        }
        else
        {
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
          CPlayer::Write(this, 68, "bbs", 83, 0, Src);
        }
      }
      else
      {
        CPlayer::Write(this, 68, "bbs", 83, 2, Src);
      }
      break;
    case 3:
      packetb = (char *)ReadPacket(packet, "b", &v34);
      if ( v34 )
      {
        if ( v34 > 0x1Eu )
        {
          packetb = GetString(packetb, str);
          LOG_ERR(
            "byCount > MAX_FRD at FRD_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) Name(%s)",
            *(_DWORD *)(this + 452),
            (const char *)(this + 32),
            *(_DWORD *)(this + 448),
            v34,
            str);
        }
        v36 = CIOBuffer::Alloc();
        v33 = v36;
        *((_BYTE *)v36 + 2) = 18;
        v35 = (char *)v33 + 5;
        CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1364));
        for ( j = 0; j < v34; ++j )
        {
          sub_468200(v29);
          v9 = (char *)sub_47A240(packetb, v29);
          packetb = GetString(v9, v30);
          v30[16] = 0;
          v35 = (char *)sub_44F9B0(v35, *(_DWORD *)v29);
          v35 = PutString(v35, v30);
          if ( (unsigned int)unknown_libname_18(this + 1352) >= 0x1E )
          {
            CIOBuffer::Free(v36);
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
            LOG_ERR(
              "m_mapFrd.size() < MAX_FRD at FRD_M_LOAD  (%d, %s)  PID(%d) UID(%d)  ",
              *(_DWORD *)v29,
              v30,
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 448));
            CPlayer::Write(this, 45, "b", 1);
            sub_495B20(1);
            return;
          }
          v10 = sub_4728F0(v29, v29);
          sub_470890(
            this + 1352,
            (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v28,
            v10);
          if ( !v28[4] )
          {
            CIOBuffer::Free(v36);
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
            LOG_ERR(
              "!r.second at FRD_M_LOAD  (%d, %s)  PID(%d) UID(%d)  ",
              *(_DWORD *)v29,
              v30,
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 448));
            CPlayer::Write(this, 45, "b", 1);
            sub_495B20(1);
            return;
          }
        }
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
        WritePacket((char *)v33 + 3, "bb", 2, v34);
        *(_WORD *)v33 = (_WORD)v35 - (_WORD)v33;
        *((_DWORD *)v36 + 2000) = *(unsigned __int16 *)v33;
        CSocket::_CSocket(v36);
      }
      else
      {
        LOG_ERR(
          "byCount <= 0 at FRD_M_LOAD  PID(%d) UID(%d) Count(%d) ",
          *(_DWORD *)(this + 452),
          *(_DWORD *)(this + 448),
          0);
      }
      break;
    case 4:
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1364));
      if ( unknown_libname_18(this + 1352) )
      {
        v26 = CIOBuffer::Alloc();
        v23 = (char *)v26;
        *((_BYTE *)v26 + 2) = 18;
        v24 = v23 + 5;
        v25 = 0;
        std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1352),
          (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v27);
        while ( 1 )
        {
          v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v16);
          if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                  (std::vector<CIOSocket::CIOTimer>::const_iterator *)v27,
                  v11) )
            break;
          v12 = sub_420250(v27);
          v22 = CPlayer::ScanPlayer(*(_DWORD *)(v12 + 4));
          *(_DWORD *)(sub_420250(v27) + 28) = 0;
          if ( v22 )
          {
            *(_DWORD *)(sub_420250(v27) + 28) = 1;
            CIOObject::Release(v22, (volatile int *)v22 + 88);
          }
          v13 = sub_420250(v27);
          v24 = (char *)sub_44F9B0(v24, *(_DWORD *)(v13 + 4));
          v14 = sub_420250(v27);
          v24 = (char *)sub_4189A0(v24, *(_BYTE *)(v14 + 28));
          sub_475880(v27);
          ++v25;
        }
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
        WritePacket(v23 + 3, "bb", 3, v25);
        *(_WORD *)v23 = (_WORD)v24 - (_WORD)v23;
        *((_DWORD *)v26 + 2000) = *(unsigned __int16 *)v23;
        CSocket::_CSocket(v26);
      }
      else
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1364));
      }
      break;
    default:
      return;
  }
}
// 4189A0: using guessed type _DWORD __cdecl sub_4189A0(_DWORD, char);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 468200: using guessed type int __thiscall sub_468200(_DWORD);
// 471920: using guessed type _DWORD __stdcall sub_471920(_DWORD);
// 4728F0: using guessed type _DWORD __stdcall sub_4728F0(_DWORD, _DWORD);
// 475880: using guessed type int __thiscall sub_475880(_DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 495B20: using guessed type _DWORD __stdcall sub_495B20(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00468200) --------------------------------------------------------
_DWORD *__thiscall sub_468200(_DWORD *this)
{
  *this = 0;
  memset(this + 1, 0, 0x11u);
  this[6] = 0;
  return this;
}

//----- (00468240) --------------------------------------------------------
int *__thiscall sub_468240(int *this, int a2, void *Src, int a4)
{
  *this = a2;
  memcpy(this + 1, Src, 0x11u);
  this[6] = a4;
  return this;
}

//----- (00468280) --------------------------------------------------------
int __thiscall CPlayer::MailSend(int this, int a2, int a3, char *Str2, int a5, int a6, int a7, int a8, int a9, int a10, int a11)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // [esp+0h] [ebp-28h]
  char v17[4]; // [esp+10h] [ebp-18h] BYREF
  char v18[4]; // [esp+14h] [ebp-14h] BYREF
  _DWORD *v19; // [esp+18h] [ebp-10h]
  char v20[4]; // [esp+1Ch] [ebp-Ch] BYREF
  char v21[4]; // [esp+20h] [ebp-8h] BYREF
  int v22; // [esp+24h] [ebp-4h]

  if ( !IsValidAdminName(Str2) || !strcmp((const char *)(this + 32), Str2) )
    return 0;
  if ( a6 )
  {
    if ( a3 == 1 && a8 == 31 )
      a6 += a10;
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    if ( !*(_DWORD *)(this + 1096) || *(_DWORD *)(*(_DWORD *)(this + 1096) + 52) < a6 )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      CPlayer::Write(this, 68, "bbd", 85, 6, 0);
      return 0;
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
  v22 = 0;
  if ( a3 == 1 )
  {
    if ( a10 <= 0 )
      return 0;
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    if ( *(_DWORD *)(this + 1124) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      CPlayer::Write(this, 68, "bbd", 85, 3, 0);
      return 0;
    }
    sub_4714F0(v20, &a7);
    v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v18);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v20,
           v12) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      CPlayer::Write(this, 68, "bbd", 85, 9, 0);
      return 0;
    }
    sub_44AE20(v21, &a7);
    v13 = sub_430C20(v17);
    if ( (unsigned __int8)unknown_libname_16(v13)
      || ((v19 = *(_DWORD **)(sub_420250(v21) + 4), a8 != 31) ? (v14 = (*(int (__thiscall **)(_DWORD *, int, int, _DWORD))(*v19 + 140))(
                                                                         v19,
                                                                         a10,
                                                                         this,
                                                                         0)) : (v14 = (*(int (__thiscall **)(_DWORD *, int, int, _DWORD))(*v19 + 140))(
                                                                                        v19,
                                                                                        a6,
                                                                                        this,
                                                                                        0)),
          !v14) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      return 0;
    }
    *(_DWORD *)(this + 1124) = 1;
    if ( v19[13] <= a10 )
      v15 = 0;
    else
      v15 = *(_DWORD *)(v19[10] + 64);
    a8 = v15;
    v22 = v19[21];
    if ( v19[11] )
      a9 = *(_DWORD *)(v19[11] + 32);
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  }
  CDBSocket::Write(
    30,
    "dbdbbssdbwbdds",
    *(_DWORD *)(this + 452),
    0,
    *(_DWORD *)(this + 452),
    a2,
    a3,
    this + 32,
    Str2,
    a7,
    v22,
    a8,
    a9,
    a10,
    a11,
    a5);
  return 1;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 4714F0: using guessed type _DWORD __stdcall sub_4714F0(_DWORD, _DWORD);

//----- (00468570) --------------------------------------------------------
void __thiscall CPlayer::MailSendResult(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  int v13; // eax
  char v15[4]; // [esp+4h] [ebp-14h] BYREF
  CIOObject *v16; // [esp+8h] [ebp-10h]
  CIOObject *v17; // [esp+Ch] [ebp-Ch]
  char v18[4]; // [esp+10h] [ebp-8h] BYREF
  CIOObject *v19; // [esp+14h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  if ( a3 == 1 )
    *(_DWORD *)(this + 1124) = 0;
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
  if ( !a4 )
  {
    if ( !a3 )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
      v19 = *(CIOObject **)(this + 1096);
      if ( v19 && (*(int (__thiscall **)(CIOObject *, int, int, _DWORD))(*(_DWORD *)v19 + 140))(v19, 5, this, 0) )
      {
        if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v19 + 120))(v19, this, 49, -5) )
          CPlayer::_OutofInven(v19);
      }
      else
      {
        a4 = 3;
        LOG_NORMAL("CPlayer::MailSendResult()  not enough money (PID:%d), (SRType:%d)", *(_DWORD *)(this + 452), 3);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      goto LABEL_28;
    }
    if ( a3 != 1 )
    {
LABEL_28:
      CDBSocket::Write(30, "dbddbbddwdd", a2, 1, *(_DWORD *)(this + 452), a2, a4, a3, a5, a7, a9, a11, a12);
      goto LABEL_29;
    }
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    sub_44AE20(v18, &a7);
    v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v15);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v18,
           v12) )
    {
      v19 = *(CIOObject **)(this + 1096);
      v17 = *(CIOObject **)(sub_420250(v18) + 4);
      if ( !v19
        || (v13 = (*(int (__thiscall **)(CIOObject *, int, _DWORD))(*(_DWORD *)v17 + 164))(v17, this, 0),
            !(*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v19 + 140))(v19, v13 != 0 ? a11 + 100 : 100)) )
      {
        a4 = 3;
        LOG_NORMAL("CPlayer::MailSendResult()  not enough money (PID:%d), (SRType:%d)", *(_DWORD *)(this + 452), 3);
LABEL_27:
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
        goto LABEL_28;
      }
      if ( (*(int (__thiscall **)(CIOObject *))(*(_DWORD *)v17 + 164))(v17)
        || (*(int (__thiscall **)(CIOObject *, int, int, _DWORD))(*(_DWORD *)v17 + 140))(v17, a11, this, 0) )
      {
        if ( (*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v17 + 120))(v17, this, 50, -a11) )
          a9 = *(_DWORD *)(*((_DWORD *)v17 + 10) + 64);
        else
          CPlayer::_OutofInven(v17);
        if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v19 + 120))(v19, this, 49, -100) )
          CPlayer::_OutofInven(v19);
        goto LABEL_27;
      }
    }
    LOG_NORMAL("CPlayer::MailSendResult()  not exist item(PID:%d), (index:%d) ", *(_DWORD *)(this + 452), a9);
    a4 = 4;
    goto LABEL_27;
  }
LABEL_29:
  CPlayer::Write(this, 19, "bbs", 0, a4, a6);
  if ( !a4 )
  {
    v16 = CPlayer::ScanPlayer(a5);
    if ( v16 )
    {
      CPlayer::Write((int)v16, 68, "bbs", 85, 0, this + 32);
      CIOObject::Release(v16, (volatile int *)v16 + 88);
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (00468890) --------------------------------------------------------
void __userpurge CPlayer::MAILProcess(int ecx0@<ecx>, DWORD a2@<ebx>, int *a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  _DWORD *v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  _DWORD *v9; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  const void *v13; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v14; // eax
  const void *v15; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v16; // eax
  const void *v17; // eax
  DWORD v18; // esi
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v19; // eax
  const void *v20; // eax
  DWORD v21; // esi
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v22; // eax
  int v23; // [esp+0h] [ebp-560h]
  char v25[4]; // [esp+10h] [ebp-550h] BYREF
  char v26[4]; // [esp+14h] [ebp-54Ch] BYREF
  char v27[4]; // [esp+18h] [ebp-548h] BYREF
  char v28[4]; // [esp+1Ch] [ebp-544h] BYREF
  char v29[4]; // [esp+20h] [ebp-540h] BYREF
  char v30[4]; // [esp+24h] [ebp-53Ch] BYREF
  char v31[4]; // [esp+28h] [ebp-538h] BYREF
  char v32[4]; // [esp+2Ch] [ebp-534h] BYREF
  char v33[8]; // [esp+30h] [ebp-530h] BYREF
  int v34[25]; // [esp+38h] [ebp-528h] BYREF
  int v35; // [esp+9Ch] [ebp-4C4h] BYREF
  int v36; // [esp+A0h] [ebp-4C0h]
  CIOObject *v37; // [esp+A4h] [ebp-4BCh]
  int v38[24]; // [esp+A8h] [ebp-4B8h] BYREF
  int v39; // [esp+108h] [ebp-458h] BYREF
  int v40; // [esp+10Ch] [ebp-454h] BYREF
  CIOObject *v41; // [esp+110h] [ebp-450h]
  int v42; // [esp+114h] [ebp-44Ch]
  int v43; // [esp+118h] [ebp-448h] BYREF
  int v44; // [esp+11Ch] [ebp-444h] BYREF
  int v45[24]; // [esp+120h] [ebp-440h] BYREF
  int v46; // [esp+180h] [ebp-3E0h] BYREF
  int v47; // [esp+184h] [ebp-3DCh] BYREF
  int v48[24]; // [esp+188h] [ebp-3D8h] BYREF
  int v49; // [esp+1E8h] [ebp-378h] BYREF
  int v50; // [esp+1ECh] [ebp-374h] BYREF
  int v51[24]; // [esp+1F0h] [ebp-370h] BYREF
  int v52; // [esp+250h] [ebp-310h] BYREF
  int v53; // [esp+254h] [ebp-30Ch] BYREF
  int v54; // [esp+258h] [ebp-308h] BYREF
  unsigned __int16 v55; // [esp+25Ch] [ebp-304h] BYREF
  int v56; // [esp+260h] [ebp-300h] BYREF
  unsigned __int8 v57; // [esp+267h] [ebp-2F9h] BYREF
  char v58; // [esp+268h] [ebp-2F8h] BYREF
  char v59[512]; // [esp+269h] [ebp-2F7h] BYREF
  _BYTE v60[7]; // [esp+469h] [ebp-F7h] BYREF
  int v61; // [esp+470h] [ebp-F0h] BYREF
  int v62; // [esp+474h] [ebp-ECh] BYREF
  int v63; // [esp+478h] [ebp-E8h] BYREF
  char v64; // [esp+47Fh] [ebp-E1h] BYREF
  int v65[2]; // [esp+480h] [ebp-E0h] BYREF
  int v66; // [esp+488h] [ebp-D8h] BYREF
  int v67; // [esp+48Ch] [ebp-D4h] BYREF
  int v68; // [esp+490h] [ebp-D0h] BYREF
  char v69[4]; // [esp+494h] [ebp-CCh] BYREF
  char v70[4]; // [esp+498h] [ebp-C8h] BYREF
  char v71[4]; // [esp+49Ch] [ebp-C4h] BYREF
  int v72; // [esp+4A0h] [ebp-C0h] BYREF
  char str[20]; // [esp+4A4h] [ebp-BCh] BYREF
  int v74; // [esp+4B8h] [ebp-A8h] BYREF
  char v75[20]; // [esp+4BCh] [ebp-A4h] BYREF
  int v76; // [esp+4D0h] [ebp-90h] BYREF
  int v77; // [esp+4D4h] [ebp-8Ch] BYREF
  int v78; // [esp+4D8h] [ebp-88h] BYREF
  char v79[4]; // [esp+4DCh] [ebp-84h] BYREF
  __int16 v80; // [esp+4E0h] [ebp-80h] BYREF
  char v81[4]; // [esp+4E4h] [ebp-7Ch] BYREF
  int v82; // [esp+4E8h] [ebp-78h] BYREF
  int v83[3]; // [esp+4ECh] [ebp-74h] BYREF
  int v84; // [esp+4F8h] [ebp-68h]
  CIOBuffer *v85; // [esp+4FCh] [ebp-64h]
  unsigned __int8 v86; // [esp+503h] [ebp-5Dh] BYREF
  char *packet; // [esp+504h] [ebp-5Ch]
  CIOBuffer *v88; // [esp+508h] [ebp-58h]
  unsigned __int16 v89; // [esp+50Ch] [ebp-54h] BYREF
  int v90; // [esp+510h] [ebp-50h] BYREF
  unsigned __int8 v91; // [esp+516h] [ebp-4Ah] BYREF
  unsigned __int8 v92; // [esp+517h] [ebp-49h] BYREF
  int v93; // [esp+518h] [ebp-48h] BYREF
  int v94; // [esp+51Ch] [ebp-44h] BYREF
  int v95; // [esp+520h] [ebp-40h] BYREF
  int v96; // [esp+524h] [ebp-3Ch] BYREF
  unsigned __int8 v97; // [esp+52Ah] [ebp-36h] BYREF
  unsigned __int8 v98; // [esp+52Bh] [ebp-35h] BYREF
  int v99; // [esp+52Ch] [ebp-34h] BYREF
  int i; // [esp+530h] [ebp-30h]
  int v101; // [esp+534h] [ebp-2Ch]
  unsigned __int8 v102; // [esp+53Bh] [ebp-25h] BYREF
  unsigned __int16 v103; // [esp+53Ch] [ebp-24h] BYREF
  int v104; // [esp+540h] [ebp-20h] BYREF
  unsigned __int8 v105; // [esp+547h] [ebp-19h] BYREF
  int v106; // [esp+548h] [ebp-18h]
  int v107; // [esp+54Ch] [ebp-14h] BYREF
  char *Str2; // [esp+550h] [ebp-10h] BYREF
  unsigned __int8 v109; // [esp+557h] [ebp-9h] BYREF
  int v110; // [esp+558h] [ebp-8h] BYREF
  int v111; // [esp+55Ch] [ebp-4h] BYREF

  v83[2] = dword_4D9830;
  switch ( a5 )
  {
    case 0:
      v106 = 0;
      Src = ScanPacket(a2, (DWORD)a3, a4, (char *)Src, (char *)end, "bs", &v109, &v110, 513);
      if ( v109 )
      {
        if ( v109 == 1 )
        {
          Src = ScanPacket(
                  a2,
                  (DWORD)a3,
                  a4,
                  (char *)Src,
                  (char *)end,
                  "sdwbdd",
                  &Str2,
                  17,
                  &v111,
                  &v103,
                  &v105,
                  &v104,
                  &v107);
          if ( v104 >= 0 && v107 >= 0 )
          {
            CPlayer::MailSend(ecx0, v106, v109, Str2, v110, 100, v111, v103, v105, v104, v107);
          }
          else
          {
            LOG_ERR(
              "  (MAIL_T_PARCEL)\tUID:\t%d\tName:%s\tPID:\t%d\tIndex:\t%d\tNum:\t%d,\tPay:\t%d",
              *(_DWORD *)(ecx0 + 448),
              (const char *)(ecx0 + 32),
              *(_DWORD *)(ecx0 + 452),
              v103,
              v104,
              v107);
            CPlayer::Write(ecx0, 45, "b", 1);
            sub_495B20(*(_DWORD *)(ecx0 + 1676), a2, (DWORD)a3, a4, 1);
          }
        }
      }
      else
      {
        Src = ScanPacket(a2, (DWORD)a3, a4, (char *)Src, (char *)end, "b", &v102);
        v101 = 5 * v102;
        for ( i = 0; i < v102; ++i )
        {
          Src = ScanPacket(a2, (DWORD)a3, a4, (char *)Src, (char *)end, "s", &Str2, 17);
          if ( !CPlayer::MailSend(ecx0, v106, v109, Str2, v110, v101, 0, 0, 0, 0, 0) )
            break;
        }
      }
      return;
    case 1:
      Src = ReadPacket(
              a2,
              (DWORD)a3,
              a4,
              Src,
              "dbbdsdbwbdd",
              &v93,
              &v98,
              &v91,
              &v95,
              &v94,
              &v99,
              &v97,
              &v89,
              &v92,
              &v90,
              &v96);
      CPlayer::MailSendResult(ecx0, v93, v98, v91, v95, v94, v99, v97, v89, v92, v90, v96);
      return;
    case 2:
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      sub_471BE0((int *)(ecx0 + 1428));
      CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      CDBSocket::Write(30, "dbd", *(_DWORD *)(ecx0 + 452), 2, *(_DWORD *)(ecx0 + 452));
      return;
    case 3:
      Src = ReadPacket(a2, (DWORD)a3, a4, Src, "b", &v86);
      if ( !v86 )
        return;
      if ( v86 > 0x32u )
        LOG_ERR(
          "byCount > MAIL_MAX_LOAD at FRD_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) ",
          *(_DWORD *)(ecx0 + 452),
          (const char *)(ecx0 + 32),
          *(_DWORD *)(ecx0 + 448),
          v86);
      v88 = (CIOBuffer *)CIOBuffer::Alloc();
      v85 = v88;
      *((_BYTE *)v88 + 2) = 19;
      packet = (char *)v85 + 5;
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      v84 = 0;
      while ( 2 )
      {
        if ( v84 >= v86 )
        {
          CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
          WritePacket(a2, (DWORD)a3, a4, (char *)v85 + 3, "bb", 1, v86);
          *(_WORD *)v85 = (_WORD)packet - (_WORD)v85;
          *((_DWORD *)v88 + 2000) = *(unsigned __int16 *)v85;
          CSocket::_CSocket(*(_DWORD *)(ecx0 + 1676), a2, (DWORD)a3, a4, v88);
        }
        else
        {
          sub_469C80(&v68);
          Src = sub_47A240(Src, &v68);
          Src = sub_418960(Src, v69);
          Src = sub_418960(Src, v70);
          Src = sub_418960(Src, v71);
          Src = sub_47A240(Src, &v72);
          Src = GetString((char *)Src, str);
          Src = sub_47A240(Src, &v74);
          Src = GetString((char *)Src, v75);
          Src = sub_47A240(Src, &v76);
          Src = sub_47A240(Src, &v77);
          Src = sub_47A240(Src, &v78);
          Src = sub_418960(Src, v79);
          Src = sub_418980(Src, &v80);
          Src = sub_418960(Src, v81);
          Src = sub_47A240(Src, &v82);
          Src = sub_47A240(Src, v83);
          if ( v78 <= dword_4E10B0 + 100 || !v78 )
          {
            packet = (char *)sub_44F9B0(packet, v68);
            packet = sub_4189A0(packet, v69[0]);
            packet = sub_4189A0(packet, v70[0]);
            packet = sub_4189A0(packet, v71[0]);
            packet = (char *)sub_44F9B0(packet, v72);
            packet = PutString(packet, str);
            packet = (char *)sub_44F9B0(packet, v74);
            packet = PutString(packet, v75);
            packet = (char *)sub_44F9B0(packet, v76);
            packet = (char *)sub_44F9B0(packet, v77);
            packet = (char *)sub_44F9B0(packet, v78);
            packet = (char *)sub_42F960(packet, v80);
            packet = sub_4189A0(packet, v81[0]);
            packet = (char *)sub_44F9B0(packet, v82);
            packet = (char *)sub_44F9B0(packet, v83[0]);
            v7 = sub_472920(v34, &v68, &v68);
            sub_4719D0(
              (int *)(ecx0 + 1428),
              (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v33,
              v7);
            ++v84;
            continue;
          }
          CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
          CIOBuffer::Free(v88);
          LOG_ERR(
            "CPlayer::MAILProcess()  :MAIL_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) MID (%d) ",
            *(_DWORD *)(ecx0 + 452),
            (const char *)(ecx0 + 32),
            *(_DWORD *)(ecx0 + 448),
            v86,
            v68);
          LOG_NORMAL(
            "[Kickout] At MAIL_M_LOAD '%s' (PID:%d) %p %x %x %x",
            (const char *)(ecx0 + 32),
            *(_DWORD *)(ecx0 + 452),
            *(const void **)(*(_DWORD *)(ecx0 + 1676) + 120),
            *(_DWORD *)(ecx0 + 20),
            *(_DWORD *)(*(_DWORD *)(ecx0 + 1676) + 108),
            v23);
          CPlayer::Write(ecx0, 45, "b", 1);
          sub_495B20(*(_DWORD *)(ecx0 + 1676), a2, (DWORD)a3, a4, 1);
        }
        break;
      }
      return;
    case 5:
      Src = ReadPacket(a2, (DWORD)a3, a4, Src, "db", v65, &v64);
      if ( v64 == 1 )
      {
        CPlayer::Write(ecx0, 68, "bbd", 85, 4, v65[0]);
      }
      else
      {
        CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
        sub_471C40((int *)(ecx0 + 1428), &v63, v65);
        v10 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v31);
        if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v63,
               v10) )
        {
          sub_471B80((int *)(ecx0 + 1428), v65);
        }
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
        CPlayer::Write(ecx0, 68, "bbd", 85, 5, v65[0]);
      }
      return;
    case 6:
      Src = ScanPacket(a2, (DWORD)a3, a4, (char *)Src, (char *)end, "d", &v66);
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      sub_471C40((int *)(ecx0 + 1428), &v67, &v66);
      v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v32);
      if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
             (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v67,
             v8) )
      {
        v9 = (_DWORD *)sub_420250(&v67);
        v65[1] = (int)(v9 + 1);
        CDBSocket::Write(30, "dbddbd", v9[1], 4, *(_DWORD *)(ecx0 + 452), v9[1], v9[3], v9[19]);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      return;
    case 7:
      v58 = 0;
      memset(v59, 0, sizeof(v59));
      Src = ReadPacket(a2, (DWORD)v60, a4, Src, "dbdw", &v56, &v57, &v61, &v55);
      Src = ReadPacket(a2, (DWORD)v60, a4, Src, "m", &v58, v55);
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)v60, a4);
      sub_471C40((int *)(ecx0 + 1428), &v62, &v56);
      v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v30);
      if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
             (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v62,
             v11) )
      {
        if ( v61 )
          CPlayer::Write(ecx0, 19, "bdbdwmm", 2, v56, v57, v61, v55, &v58, v55, Src, 22);
        else
          CPlayer::Write(ecx0, 19, "bdbdwm", 2, v56, v57, 0, v55, &v58, v55);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)v60, a4);
      return;
    case 8:
      Src = ScanPacket(a2, (DWORD)a3, a4, (char *)Src, (char *)end, "d", &v53);
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      sub_471C40((int *)(ecx0 + 1428), &v54, &v53);
      v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v29);
      if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
             (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v54,
             v12) )
      {
        v13 = (const void *)(sub_420250(&v54) + 4);
        qmemcpy(v51, v13, sizeof(v51));
        a4 = (DWORD)v13 + 96;
        a3 = &v52;
        if ( v51[2] == 1 )
        {
          CDBSocket::Write(30, "dbdd", v51[0], 3, *(_DWORD *)(ecx0 + 452), v51[0]);
          sub_471B80((int *)(ecx0 + 1428), v51);
          CPlayer::Write(ecx0, 68, "bbd", 85, 1, v51[0]);
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      return;
    case 9:
      Src = ScanPacket(a2, (DWORD)a3, a4, (char *)Src, (char *)end, "d", &v49);
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      sub_471C40((int *)(ecx0 + 1428), &v50, &v49);
      v14 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v28);
      if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
             (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v50,
             v14) )
      {
        v15 = (const void *)(sub_420250(&v50) + 4);
        qmemcpy(v48, v15, sizeof(v48));
        a4 = (DWORD)v15 + 96;
        a3 = &v49;
        if ( !v48[2] || v48[2] == 4 )
        {
          sub_471B80((int *)(ecx0 + 1428), v48);
          CDBSocket::Write(30, "dbdd", v48[0], 6, *(_DWORD *)(ecx0 + 452), v48[0]);
          CPlayer::Write(ecx0, 68, "bbd", 85, 2, v48[0]);
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      goto LABEL_48;
    case 10:
LABEL_48:
      Src = ScanPacket(a2, (DWORD)a3, a4, (char *)Src, (char *)end, "d", &v46);
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      sub_469C80(v45);
      sub_471C40((int *)(ecx0 + 1428), &v47, &v46);
      v16 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v27);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v47,
              v16) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
        return;
      }
      v17 = (const void *)(sub_420250(&v47) + 4);
      qmemcpy(v45, v17, sizeof(v45));
      v18 = (DWORD)v17 + 96;
      CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)&v46, (DWORD)v17 + 96);
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1020), a2, (DWORD)&v46, v18);
      if ( v45[2] != 1 && v45[2] != 2 && v45[2] != 3 )
        goto LABEL_62;
      if ( v45[2] == 1 && v45[23] && (!*(_DWORD *)(ecx0 + 1096) || *(_DWORD *)(*(_DWORD *)(ecx0 + 1096) + 52) < v45[23]) )
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1020), a2, (DWORD)&v46, v18);
        CPlayer::Write(ecx0, 68, "bbd", 85, 6, v45[0]);
      }
      else if ( CPlayer::GetInvenSize((_DWORD *)ecx0) < 60 )
      {
        CDBSocket::Write(30, "dbddd", v45[0], 7, *(_DWORD *)(ecx0 + 452), v45[0], v45[18]);
LABEL_62:
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1020), a2, (DWORD)&v46, v18);
      }
      else
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1020), a2, (DWORD)&v46, v18);
        CPlayer::Write(ecx0, 68, "bbd", 85, 8, v45[0]);
      }
      return;
    case 11:
      Src = ReadPacket(a2, (DWORD)a3, a4, Src, "dd", &v40, &v43);
      CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      sub_469C80(v38);
      sub_471C40((int *)(ecx0 + 1428), &v44, &v40);
      v19 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v26);
      if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
             (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v44,
             v19) )
      {
        v20 = (const void *)(sub_420250(&v44) + 4);
        qmemcpy(v38, v20, sizeof(v38));
        v21 = (DWORD)v20 + 96;
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)&v39, (DWORD)v20 + 96);
        v39 = 1;
        v42 = 0;
        CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1020), a2, (DWORD)&v39, v21);
        v41 = *(CIOObject **)(ecx0 + 1096);
        if ( (!v41 || *((_DWORD *)v41 + 13) < v38[23]) && v38[23] )
        {
          CPlayer::Write(ecx0, 68, "bbd", 85, 6, v38[0]);
        }
        else
        {
          v37 = 0;
          if ( v43 )
            v37 = (CIOObject *)sub_426060(*(_DWORD *)(ecx0 + 452), &Src);
          else
            v37 = (CIOObject *)CItem::CreateItem(v38[20], v38[21], v38[22], v38[19]);
          if ( v37 )
          {
            v36 = CPlayer::_InsertItem((_DWORD *)ecx0, 51, v37);
            if ( v36 == 1 )
            {
              if ( v38[23]
                && !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v41 + 120))(v41, ecx0, 51, -v38[23]) )
              {
                v42 = *((_DWORD *)v41 + 9);
                CPlayer::_OutofInven(v41);
              }
              v39 = 0;
            }
            else
            {
              CBase::Delete((char *)v37);
              if ( v36 == 2 )
                CPlayer::Write(ecx0, 68, "bbd", 85, 8, v38[0]);
            }
          }
        }
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1020), a2, (DWORD)&v39, v21);
        if ( !v39 )
        {
          CPlayer::Write(ecx0, 19, "bdbb", 3, v38[0], 0, v38[3]);
          if ( v38[23] > 0 )
            CPlayer::MailSend(ecx0, 0, 3, (char *)&v38[5], (int)&::Src, 0, v42, v42 != 0 ? 0 : 0x1F, 0, v38[23], 0);
          CIOCriticalSection::Enter((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)&v39, v21);
          sub_471C40((int *)(ecx0 + 1428), &v35, v38);
          v22 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(ecx0 + 1428), v25);
          if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                 (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v35,
                 v22) )
          {
            *(_DWORD *)(sub_420250(&v35) + 12) = 0;
            *(_DWORD *)(sub_420250(&v35) + 76) = 0;
            *(_DWORD *)(sub_420250(&v35) + 84) = 0;
            *(_DWORD *)(sub_420250(&v35) + 88) = 0;
            *(_DWORD *)(sub_420250(&v35) + 92) = 0;
            *(_DWORD *)(sub_420250(&v35) + 96) = 0;
          }
          CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)&v39, v21);
        }
        CDBSocket::Write(
          30,
          "dbddbbddwbd",
          v40,
          8,
          *(_DWORD *)(ecx0 + 452),
          v38[0],
          v39,
          v38[2],
          v38[4],
          v38[18],
          v38[20],
          v38[21],
          v38[22]);
      }
      else
      {
        CDBSocket::Write(30, "dbddb", v40, 8, *(_DWORD *)(ecx0 + 452), v40, 1);
        CIOCriticalSection::Leave((CIOCriticalSection *)(ecx0 + 1396), a2, (DWORD)a3, a4);
      }
      return;
    default:
      return;
  }
}
// 468E38: variable 'v23' is possibly undefined
// 4D9830: using guessed type int dword_4D9830;

//----- (00469C80) --------------------------------------------------------
_DWORD *__thiscall sub_469C80(_DWORD *this)
{
  *this = 0;
  this[1] = 0;
  this[2] = 0;
  this[3] = 0;
  this[4] = 0;
  memset(this + 5, 0, 0x11u);
  this[10] = 0;
  memset(this + 11, 0, 0x11u);
  this[16] = 0;
  this[17] = 0;
  this[18] = 0;
  this[19] = 0;
  this[20] = 0;
  this[21] = 0;
  this[22] = 0;
  this[23] = 0;
  return this;
}

//----- (00469D40) --------------------------------------------------------
int __thiscall CPlayer::IsCooking(int this, int a2)
{
  int v4; // [esp+4h] [ebp-24h]
  int v5; // [esp+8h] [ebp-20h]
  int v6; // [esp+10h] [ebp-18h]
  int v7; // [esp+10h] [ebp-18h]
  int v8; // [esp+10h] [ebp-18h]
  int v9; // [esp+10h] [ebp-18h]
  int v10; // [esp+14h] [ebp-14h]
  int v11; // [esp+18h] [ebp-10h]
  int v12; // [esp+1Ch] [ebp-Ch]
  int v13; // [esp+20h] [ebp-8h]
  int v14; // [esp+24h] [ebp-4h]
  int v15; // [esp+24h] [ebp-4h]
  int v16; // [esp+24h] [ebp-4h]

  if ( !a2 )
  {
    v12 = *(_DWORD *)(this + 1280) + *(_DWORD *)(this + 1276) + *(_DWORD *)(this + 1272);
    v11 = *(_DWORD *)(this + 1288) + *(_DWORD *)(this + 1284);
    v13 = *(_DWORD *)(this + 1296) + *(_DWORD *)(this + 1292);
    if ( !(v13 + v11 + v12) )
      return 0;
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    v14 = CPlayer::_FindItem(this, 239, v12);
    if ( !v12 || v14 )
    {
      v15 = CPlayer::_FindItem(this, 240, v11);
      if ( !v11 || v15 )
      {
        v16 = CPlayer::_FindItem(this, 241, v13);
        if ( (!v13 || v16)
          && *(_DWORD *)(this + 1096)
          && *(_DWORD *)(*(_DWORD *)(this + 1096) + 52) >= 1000 * v13
                                                         + 200 * *(_DWORD *)(this + 1288)
                                                         + 100 * *(_DWORD *)(this + 1284)
                                                         + 10 * v12 )
        {
          goto LABEL_12;
        }
      }
    }
LABEL_27:
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    return 0;
  }
  if ( a2 == 1 )
  {
    v4 = 4 * *(_DWORD *)(this + 1280) + 4 * *(_DWORD *)(this + 1272);
    v5 = *(_DWORD *)(this + 1280) + *(_DWORD *)(this + 1272);
    v10 = *(_DWORD *)(this + 1276);
    if ( !(*(_DWORD *)(this + 1280) + v10 + *(_DWORD *)(this + 1272)) )
      return 0;
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    v6 = CPlayer::_FindItem(this, 443, v4);
    if ( !v4 || v6 )
    {
      v7 = CPlayer::_FindItem(this, 444, v5);
      if ( !v5 || v7 )
      {
        v8 = CPlayer::_FindItem(this, 445, v5);
        if ( !v5 || v8 )
        {
          v9 = CPlayer::_FindItem(this, 446, v10);
          if ( (!v10 || v9)
            && *(_DWORD *)(this + 1096)
            && *(_DWORD *)(*(_DWORD *)(this + 1096) + 52) >= 500 * *(_DWORD *)(this + 1280)
                                                           + 500 * *(_DWORD *)(this + 1276) )
          {
LABEL_12:
            CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
            return 1;
          }
        }
      }
    }
    goto LABEL_27;
  }
  return 0;
}

//----- (0046A020) --------------------------------------------------------
int __thiscall CPlayer::Cooking(int this, int a2)
{
  CIOObject *v4; // [esp+4h] [ebp-2Ch]
  int v5; // [esp+8h] [ebp-28h]
  int v6; // [esp+Ch] [ebp-24h]
  int v7; // [esp+14h] [ebp-1Ch]
  int v8; // [esp+14h] [ebp-1Ch]
  int v9; // [esp+14h] [ebp-1Ch]
  int v10; // [esp+14h] [ebp-1Ch]
  CIOObject *v11; // [esp+14h] [ebp-1Ch]
  CIOObject *v12; // [esp+14h] [ebp-1Ch]
  CIOObject *v13; // [esp+14h] [ebp-1Ch]
  CIOObject *v14; // [esp+14h] [ebp-1Ch]
  char *v15; // [esp+14h] [ebp-1Ch]
  char *v16; // [esp+14h] [ebp-1Ch]
  int v17; // [esp+18h] [ebp-18h]
  CIOObject *v18; // [esp+1Ch] [ebp-14h]
  int v19; // [esp+20h] [ebp-10h]
  int v20; // [esp+24h] [ebp-Ch]
  int v21; // [esp+28h] [ebp-8h]
  int v22; // [esp+2Ch] [ebp-4h]
  int v23; // [esp+2Ch] [ebp-4h]
  int v24; // [esp+2Ch] [ebp-4h]
  CIOObject *v25; // [esp+2Ch] [ebp-4h]
  CIOObject *v26; // [esp+2Ch] [ebp-4h]
  CIOObject *v27; // [esp+2Ch] [ebp-4h]
  char *v28; // [esp+2Ch] [ebp-4h]
  char *v29; // [esp+2Ch] [ebp-4h]
  char *v30; // [esp+2Ch] [ebp-4h]
  char *v31; // [esp+2Ch] [ebp-4h]
  char *v32; // [esp+2Ch] [ebp-4h]
  char *v33; // [esp+2Ch] [ebp-4h]
  char *v34; // [esp+2Ch] [ebp-4h]

  if ( !a2 )
  {
    v20 = *(_DWORD *)(this + 1280) + *(_DWORD *)(this + 1276) + *(_DWORD *)(this + 1272);
    v19 = *(_DWORD *)(this + 1288) + *(_DWORD *)(this + 1284);
    v21 = *(_DWORD *)(this + 1296) + *(_DWORD *)(this + 1292);
    if ( !(v21 + v19 + v20) )
      return 0;
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    v22 = CPlayer::_FindItem(this, 239, v20);
    if ( !v20 || v22 )
    {
      v23 = CPlayer::_FindItem(this, 240, v19);
      if ( !v19 || v23 )
      {
        v24 = CPlayer::_FindItem(this, 241, v21);
        if ( (!v21 || v24)
          && *(_DWORD *)(this + 1096)
          && *(_DWORD *)(*(_DWORD *)(this + 1096) + 52) >= 1000 * v21
                                                         + 200 * *(_DWORD *)(this + 1288)
                                                         + 100 * *(_DWORD *)(this + 1284)
                                                         + 10 * v20 )
        {
          if ( v20 )
          {
            v25 = (CIOObject *)CPlayer::_FindItem(this, 239, v20);
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v25 + 120))(v25, this, 16, -v20) )
              CPlayer::_OutofInven(v25);
          }
          if ( v19 )
          {
            v26 = (CIOObject *)CPlayer::_FindItem(this, 240, v19);
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v26 + 120))(v26, this, 16, -v19) )
              CPlayer::_OutofInven(v26);
          }
          if ( v21 )
          {
            v27 = (CIOObject *)CPlayer::_FindItem(this, 241, v21);
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v27 + 120))(v27, this, 16, -v21) )
              CPlayer::_OutofInven(v27);
          }
          v18 = *(CIOObject **)(this + 1096);
          if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v18 + 120))(
                  v18,
                  this,
                  16,
                  -(1000 * v21 + 200 * *(_DWORD *)(this + 1288) + 100 * *(_DWORD *)(this + 1284) + 10 * v20)) )
            CPlayer::_OutofInven(v18);
          v28 = (char *)CItem::CreateItem(10, 0, 5 * *(_DWORD *)(this + 1272), -1);
          if ( v28 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v28) != 1 )
          {
            CBase::Delete(v28);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 11(%d), 2(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 1272),
              *(_DWORD *)(this + 1276),
              *(_DWORD *)(this + 1280),
              *(_DWORD *)(this + 1284),
              *(_DWORD *)(this + 1288),
              *(_DWORD *)(this + 1292),
              *(_DWORD *)(this + 1296));
          }
          v29 = (char *)CItem::CreateItem(11, 0, 2 * *(_DWORD *)(this + 1276), -1);
          if ( v29 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v29) != 1 )
          {
            CBase::Delete(v29);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 22(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 1272),
              *(_DWORD *)(this + 1276),
              *(_DWORD *)(this + 1280),
              *(_DWORD *)(this + 1284),
              *(_DWORD *)(this + 1288),
              *(_DWORD *)(this + 1292),
              *(_DWORD *)(this + 1296));
          }
          v30 = (char *)CItem::CreateItem(12, 0, *(_DWORD *)(this + 1280), -1);
          if ( v30 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v30) != 1 )
          {
            CBase::Delete(v30);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 33(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 1272),
              *(_DWORD *)(this + 1276),
              *(_DWORD *)(this + 1280),
              *(_DWORD *)(this + 1284),
              *(_DWORD *)(this + 1288),
              *(_DWORD *)(this + 1292),
              *(_DWORD *)(this + 1296));
          }
          v31 = (char *)CItem::CreateItem(13, 0, *(_DWORD *)(this + 1284), -1);
          if ( v31 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v31) != 1 )
          {
            CBase::Delete(v31);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 44(%d), 5(%d), 6(%d), 7(%d)",
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 1272),
              *(_DWORD *)(this + 1276),
              *(_DWORD *)(this + 1280),
              *(_DWORD *)(this + 1284),
              *(_DWORD *)(this + 1288),
              *(_DWORD *)(this + 1292),
              *(_DWORD *)(this + 1296));
          }
          v32 = (char *)CItem::CreateItem(14, 0, *(_DWORD *)(this + 1288), -1);
          if ( v32 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v32) != 1 )
          {
            CBase::Delete(v32);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 55(%d), 6(%d), 7(%d)",
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 1272),
              *(_DWORD *)(this + 1276),
              *(_DWORD *)(this + 1280),
              *(_DWORD *)(this + 1284),
              *(_DWORD *)(this + 1288),
              *(_DWORD *)(this + 1292),
              *(_DWORD *)(this + 1296));
          }
          v33 = (char *)CItem::CreateItem(15, 0, *(_DWORD *)(this + 1292), -1);
          if ( v33 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v33) != 1 )
          {
            CBase::Delete(v33);
            LOG_ERR(
              "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 5(%d), 66(%d), 77(%d)",
              *(_DWORD *)(this + 452),
              *(_DWORD *)(this + 1272),
              *(_DWORD *)(this + 1276),
              *(_DWORD *)(this + 1280),
              *(_DWORD *)(this + 1284),
              *(_DWORD *)(this + 1288),
              *(_DWORD *)(this + 1292),
              *(_DWORD *)(this + 1296));
          }
          v34 = (char *)CItem::CreateItem(16, 0, *(_DWORD *)(this + 1296), -1);
          if ( v34 )
          {
            if ( CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v34) != 1 )
            {
              CBase::Delete(v34);
              LOG_ERR(
                "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
                *(_DWORD *)(this + 452),
                *(_DWORD *)(this + 1272),
                *(_DWORD *)(this + 1276),
                *(_DWORD *)(this + 1280),
                *(_DWORD *)(this + 1284),
                *(_DWORD *)(this + 1288),
                *(_DWORD *)(this + 1292),
                *(_DWORD *)(this + 1296));
            }
          }
LABEL_44:
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
          return 1;
        }
      }
    }
LABEL_83:
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    return 0;
  }
  if ( a2 == 1 )
  {
    v5 = 4 * *(_DWORD *)(this + 1280) + 4 * *(_DWORD *)(this + 1272);
    v6 = *(_DWORD *)(this + 1280) + *(_DWORD *)(this + 1272);
    v17 = *(_DWORD *)(this + 1276);
    if ( !(*(_DWORD *)(this + 1280) + v17 + *(_DWORD *)(this + 1272)) )
      return 0;
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
    v7 = CPlayer::_FindItem(this, 443, v5);
    if ( !v5 || v7 )
    {
      v8 = CPlayer::_FindItem(this, 444, v6);
      if ( !v6 || v8 )
      {
        v9 = CPlayer::_FindItem(this, 445, v6);
        if ( !v6 || v9 )
        {
          v10 = CPlayer::_FindItem(this, 446, v17);
          if ( (!v17 || v10)
            && *(_DWORD *)(this + 1096)
            && *(_DWORD *)(*(_DWORD *)(this + 1096) + 52) >= 500 * *(_DWORD *)(this + 1280)
                                                           + 500 * *(_DWORD *)(this + 1276) )
          {
            if ( v5 )
            {
              v11 = (CIOObject *)CPlayer::_FindItem(this, 443, v5);
              if ( !v11
                || !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v11 + 120))(v11, this, 16, -v5) )
              {
                CPlayer::_OutofInven(v11);
              }
            }
            if ( v6 )
            {
              v12 = (CIOObject *)CPlayer::_FindItem(this, 444, v6);
              if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v12 + 120))(v12, this, 16, -v6) )
                CPlayer::_OutofInven(v12);
            }
            if ( v6 )
            {
              v13 = (CIOObject *)CPlayer::_FindItem(this, 445, v6);
              if ( !v13
                || !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v13 + 120))(v13, this, 16, -v6) )
              {
                CPlayer::_OutofInven(v13);
              }
            }
            if ( v17 )
            {
              v14 = (CIOObject *)CPlayer::_FindItem(this, 446, v17);
              if ( !v14
                || !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v14 + 120))(v14, this, 16, -v17) )
              {
                CPlayer::_OutofInven(v14);
              }
            }
            v4 = *(CIOObject **)(this + 1096);
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v4 + 120))(
                    v4,
                    this,
                    16,
                    -(500 * *(_DWORD *)(this + 1280) + 500 * *(_DWORD *)(this + 1276))) )
              CPlayer::_OutofInven(v4);
            v15 = (char *)CItem::CreateItem(190, 0, *(_DWORD *)(this + 1272), -1);
            if ( v15 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v15) != 1 )
            {
              CBase::Delete(v15);
              LOG_ERR(
                "Cooking() item insert error (PID (%d), 11(%d), 2(%d)",
                *(_DWORD *)(this + 452),
                *(_DWORD *)(this + 1272),
                *(_DWORD *)(this + 1280) + *(_DWORD *)(this + 1276));
            }
            v16 = (char *)CItem::CreateItem(191, 0, *(_DWORD *)(this + 1280) + *(_DWORD *)(this + 1276), -1);
            if ( v16 && CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v16) != 1 )
            {
              CBase::Delete(v16);
              LOG_ERR(
                "Cooking() item insert error (PID (%d), 1(%d), 22(%d)",
                *(_DWORD *)(this + 452),
                *(_DWORD *)(this + 1272),
                *(_DWORD *)(this + 1280) + *(_DWORD *)(this + 1276));
            }
            goto LABEL_44;
          }
        }
      }
    }
    goto LABEL_83;
  }
  return 0;
}

//----- (0046AAD0) --------------------------------------------------------
volatile int *__thiscall CPlayer::GetGuild(_DWORD *this)
{
  volatile int *v3; // [esp+4h] [ebp-4h]

  CChar::Lock((int)this);
  v3 = (volatile int *)this[121];
  if ( v3 )
    CIOObject::AddRef((CIOObject *)v3, v3 + 10);
  CChar::Unlock((int)this);
  return v3;
}

//----- (0046AB20) --------------------------------------------------------
void __thiscall CPlayer::SetGuild(CIOObject **this, CIOObject *a2)
{
  CChar::Lock((int)this);
  if ( this[121] )
    CIOObject::Release(this[121], (volatile int *)this[121] + 9);
  if ( a2 )
    CIOObject::AddRef(a2, (volatile int *)a2 + 9);
  this[121] = a2;
  CChar::Unlock((int)this);
}

//----- (0046AB90) --------------------------------------------------------
int __thiscall CPlayer::GetGID(_DWORD *this)
{
  int v3; // [esp+4h] [ebp-4h]

  CChar::Lock((int)this);
  v3 = this[120];
  CChar::Unlock((int)this);
  return v3;
}

//----- (0046ABC0) --------------------------------------------------------
void __thiscall CPlayer::SetGID(_DWORD *this, int a2)
{
  CChar::Lock((int)this);
  this[120] = a2;
  CChar::Unlock((int)this);
}

//----- (0046ABF0) --------------------------------------------------------
void __thiscall CPlayer::SetGuildLevel(_DWORD *this, int a2)
{
  CChar::Lock((int)this);
  this[122] = a2;
  CChar::Unlock((int)this);
}

//----- (0046AC20) --------------------------------------------------------
void __thiscall CPlayer::SetGuildName(char *this, char *Source)
{
  CChar::Lock((int)this);
  strcpy(this + 492, Source);
  CChar::Unlock((int)this);
}

//----- (0046AC60) --------------------------------------------------------
void __thiscall CPlayer::SetGuildStandard(_DWORD *this, int a2)
{
  CChar::Lock((int)this);
  this[128] = a2;
  CChar::Unlock((int)this);
}

//----- (0046AC90) --------------------------------------------------------
void __thiscall CPlayer::SetGuildClass(int this, int a2, char *Source)
{
  CChar::Lock(this);
  *(_DWORD *)(this + 516) = a2;
  strcpy((char *)(this + 520), Source);
  CChar::Unlock(this);
}

//----- (0046ACD0) --------------------------------------------------------
int *__thiscall CPlayer::GetGuildName(int *this)
{
  int *v2; // [esp+0h] [ebp-8h]

  if ( this[129] < 6 && (CGuild::GetGuildSkill(this[122]) & 1) != 0 )
    v2 = this + 123;
  else
    v2 = 0;
  return v2;
}

//----- (0046AD20) --------------------------------------------------------
int __thiscall CPlayer::GetGuildStandard(int *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( this[129] < 6 && (CGuild::GetGuildSkill(this[122]) & 2) != 0 )
    v2 = this[128];
  else
    v2 = 0;
  return v2;
}

//----- (0046AD70) --------------------------------------------------------
int *__thiscall CPlayer::GetGuildClassTitle(int *this)
{
  int *v2; // [esp+0h] [ebp-8h]

  if ( this[129] < 6 && (CGuild::GetGuildSkill(this[122]) & 1) != 0 )
    v2 = this + 130;
  else
    v2 = 0;
  return v2;
}

//----- (0046ADC0) --------------------------------------------------------
int __userpurge CPlayer::IsDefenseSide@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  int result; // eax
  int v6; // eax
  CIOObject *v8; // [esp+4h] [ebp-8h]
  _DWORD *v9; // [esp+8h] [ebp-4h]

  v8 = sub_416230(this[120]);
  if ( !v8 )
    return 0;
  v9 = (_DWORD *)CCastle::GetCastle(a2);
  if ( v9 && ((v6 = CPlayer::GetGID(this), CCastle::IsLord(v9, v6)) || CGuild::IsAlliancePeriod(v8, (int)v9)) )
  {
    CIOObject::Release(v8, ebx0, a3, a4, (volatile int *)v8 + 10);
    result = 1;
  }
  else
  {
    CIOObject::Release(v8, ebx0, a3, a4, (volatile int *)v8 + 10);
    result = 0;
  }
  return result;
}

//----- (0046AE50) --------------------------------------------------------
int __thiscall CPlayer::CanAttack(int this, int a2, int a3)
{
  int result; // eax
  int v4; // esi
  char v5; // al
  CIOObject *v6; // eax
  int v7; // eax
  int v8; // eax
  CIOObject *v9; // eax
  CIOObject *v10; // [esp-4h] [ebp-28h]
  CIOObject *v11; // [esp-4h] [ebp-28h]

  if ( !a3 && CChar::IsMState((_QWORD *)this, 0x200010000100i64) )
    return 0;
  if ( CChar::IsMState((_QWORD *)a2, 0x80000i64) )
    return 0;
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
  {
    if ( CSMap::IsOnTile(*(_DWORD **)(a2 + 320), (int *)(a2 + 332), 0x100000) )
    {
      if ( CGuild::IsWarringPeriod()
        && CPlayer::GetGID((_DWORD *)this)
        && (v4 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 220))(a2), v4 != CPlayer::GetGID((_DWORD *)this)) )
      {
        v5 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 220))(a2);
        v10 = sub_416230(v5);
        v6 = (CIOObject *)CPlayer::GetGuild((_DWORD *)this);
        result = CGuild::CanAttack(v6, v10);
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    if ( !(*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
      goto LABEL_30;
    if ( this == a2 )
      return 0;
    if ( CChar::IsGState((_DWORD *)this, 128)
      && CChar::IsGState((_DWORD *)a2, 128)
      && *(_DWORD *)(this + 1512) == *(_DWORD *)(a2 + 1512) )
    {
      return 1;
    }
    if ( CChar::IsGState((_DWORD *)this, 256) || CChar::IsGState((_DWORD *)a2, 256) )
    {
      v7 = CChar::IsGState((_DWORD *)this, 256);
      if ( !CSMap::IsOnTile(*(_DWORD **)(this + 320), (int *)(this + 332), v7 != 0 ? 0x20000 : 393216) )
      {
        v8 = CChar::IsGState((_DWORD *)a2, 256);
        if ( !CSMap::IsOnTile(*(_DWORD **)(a2 + 320), (int *)(a2 + 332), v8 != 0 ? 0x20000 : 393216) )
          return 1;
      }
    }
    if ( CGuild::IsWarringPeriod()
      && CSMap::IsOnTile(*(_DWORD **)(a2 + 320), (int *)(a2 + 332), 0x100000)
      && (v11 = (CIOObject *)CPlayer::GetGuild((_DWORD *)a2),
          v9 = (CIOObject *)CPlayer::GetGuild((_DWORD *)this),
          CGuild::CanAttack(v9, v11)) )
    {
      result = 1;
    }
    else
    {
LABEL_30:
      result = 0;
    }
  }
  return result;
}

//----- (0046B0C0) --------------------------------------------------------
void __thiscall CPlayer::PKKill(int this, int a2)
{
  int v2; // eax
  _DWORD *v3; // eax
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-48h] BYREF
  char v7[4]; // [esp+8h] [ebp-44h] BYREF
  int v8; // [esp+Ch] [ebp-40h]
  CIOObject *v9; // [esp+10h] [ebp-3Ch]
  char Destination[17]; // [esp+14h] [ebp-38h] BYREF
  char v11[17]; // [esp+25h] [ebp-27h] BYREF
  char v12[18]; // [esp+36h] [ebp-16h] BYREF
  int v13; // [esp+48h] [ebp-4h]

  v13 = dword_4D9830;
  if ( (dword_4E1174[0] & 1) != 0 && !CPlayer::IsEState((_DWORD *)a2, 16) )
  {
    if ( CChar::IsGState((_DWORD *)a2, 256) )
    {
      CPlayer::AddEState((_DWORD *)a2, 32);
      CPlayer::DropItemONPKDie(a2);
      CPlayer::Write(a2, 95, "b", 2);
      if ( !CChar::IsGState((_DWORD *)this, 256) )
      {
        v2 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
        CPlayer::Write(this, 95, "bd", 5, v2);
        sub_46B2C0((int)Destination);
        strncpy(Destination, (const char *)(this + 492), 0x11u);
        strncpy(v11, (const char *)(this + 32), 0x11u);
        strncpy(v12, (const char *)(a2 + 32), 0x11u);
        CRWLock::WriteLock((CRWLock *)&unk_4E20DC);
        v3 = (_DWORD *)std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(v7);
        sub_472800(v6, *v3, Destination);
        if ( (unsigned int)unknown_libname_18(&dword_4E20D0) > 0x14 )
          sub_4727D0(&dword_4E20D0);
        CRWLock::WriteUnlock((CRWLock *)&unk_4E20DC);
        CDBSocket::Write(55, "sss", this + 492, this + 32, a2 + 32);
      }
    }
    else
    {
      v8 = 0;
      v9 = (CIOObject *)CPlayer::GetGuild((_DWORD *)a2);
      if ( v9 )
      {
        v8 = CCastle::IsAllCastleWarRelation((int)v9);
        CIOObject::Release(v9, (volatile int *)v9 + 10);
      }
      if ( v8 )
      {
        CPlayer::AddEState((_DWORD *)a2, 256);
      }
      else if ( CChar::IsGState((_DWORD *)this, 256) )
      {
        CPlayer::AddEState((_DWORD *)a2, 64);
        v4 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)this);
        CPlayer::Write(a2, 95, "bd", 3, v4);
      }
    }
  }
}
// 40EFA0: using guessed type _DWORD __stdcall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(_DWORD);
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);
// 4727D0: using guessed type int __thiscall sub_4727D0(_DWORD);
// 472800: using guessed type _DWORD __stdcall sub_472800(_DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0046B2C0) --------------------------------------------------------
int __thiscall sub_46B2C0(int this)
{
  memset((void *)this, 0, 0x11u);
  memset((void *)(this + 17), 0, 0x11u);
  memset((void *)(this + 34), 0, 0x11u);
  return this;
}

//----- (0046B310) --------------------------------------------------------
int CPlayer::GetDropItemMask()
{
  if ( CChar::IsBState(16, 0) )
    return 3328;
  if ( CChar::IsBState(32, 0) )
    return 3584;
  if ( CChar::IsBState(64, 0) )
    return 3072;
  return 0;
}
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);

//----- (0046B390) --------------------------------------------------------
int __userpurge CPlayer::AddBuff@<eax>(_QWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a2)
{
  if ( !a2 )
    return 0;
  if ( !CChar::IsMState(this, 0x80000i64) && (!CChar::IsMStateEx(this, 0x20000) || !CBuff::IsPrty(a2, 4)) )
    return CChar::AddBuff((int)this, ebx0, a3, a4, a2);
  std__locale__facet___scalar_deleting_destructor_(a2, 1);
  return 0;
}
// 46B3EF: conditional instruction was optimized away because of '%arg_0.4!=0'

//----- (0046B420) --------------------------------------------------------
void __usercall CPlayer::PKBulletinInfoSend(void *this@<ecx>, DWORD a2@<ebx>, char *a3@<edi>, DWORD a4@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  const void *v5; // eax
  int v6; // eax
  char v7; // [esp-34h] [ebp-54h] BYREF
  int v8; // [esp-30h] [ebp-50h]
  int v9; // [esp-2Ch] [ebp-4Ch]
  int v10; // [esp-28h] [ebp-48h]
  int v11; // [esp-24h] [ebp-44h]
  int v12; // [esp-20h] [ebp-40h]
  int v13; // [esp-1Ch] [ebp-3Ch]
  int v14; // [esp-18h] [ebp-38h]
  int v15; // [esp-14h] [ebp-34h]
  int v16; // [esp-10h] [ebp-30h]
  int v17; // [esp-Ch] [ebp-2Ch]
  int v18; // [esp-8h] [ebp-28h]
  int v19; // [esp-4h] [ebp-24h] BYREF
  _DWORD *v20; // [esp+8h] [ebp-18h]
  char v21[4]; // [esp+Ch] [ebp-14h] BYREF
  char v22[4]; // [esp+10h] [ebp-10h] BYREF
  char *v23; // [esp+14h] [ebp-Ch]
  unsigned __int16 *v24; // [esp+18h] [ebp-8h]
  void *Src; // [esp+1Ch] [ebp-4h]

  v20 = this;
  CRWLock::ReadLock((CRWLock *)&unk_4E20DC);
  if ( !sub_472780(dword_4E20D0) )
  {
    Src = CIOBuffer::Alloc();
    v23 = (char *)Src;
    *((_BYTE *)Src + 2) = 12;
    v24 = (unsigned __int16 *)(v23 + 4);
    std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(dword_4E20D0, v22);
    while ( 1 )
    {
      v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E20D0, v21);
      if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)v22,
              v4) )
        break;
      v5 = (const void *)sub_40F040(v22);
      qmemcpy(&v7, v5, 0x33u);
      a4 = (DWORD)v5 + 51;
      a3 = (char *)&v19 + 3;
      v24 = (unsigned __int16 *)sub_47A260((int)v24, v7, v8, v9, v10, v11, v12, v13, v14, v15, v16, v17, v18, v19);
      sub_41CAB0(v22);
    }
    v6 = unknown_libname_18(dword_4E20D0);
    WritePacket(a2, (DWORD)a3, a4, v23 + 3, "b", v6);
    *(_WORD *)v23 = (_WORD)v24 - (_WORD)v23;
    *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v23;
    CSocket::_CSocket(v20[419], a2, (DWORD)a3, a4, Src);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E20DC, a2, (DWORD)a3, a4);
}
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);

//----- (0046B530) --------------------------------------------------------
void __usercall CPlayer::PKBulletinLoad(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1)
{
  char *v4; // eax
  char *v5; // eax
  int i; // [esp+0h] [ebp-44h]
  char *packet; // [esp+4h] [ebp-40h]
  char str[17]; // [esp+8h] [ebp-3Ch] BYREF
  char v9[17]; // [esp+19h] [ebp-2Bh] BYREF
  char v10[18]; // [esp+2Ah] [ebp-1Ah] BYREF
  int v11; // [esp+3Ch] [ebp-8h]
  int v12; // [esp+40h] [ebp-4h] BYREF

  v11 = dword_4D9830;
  v12 = 0;
  packet = sub_418960((_BYTE *)a1, &v12);
  if ( v12 > 0 )
  {
    sub_46B2C0((int)str);
    CRWLock::WriteLock((CRWLock *)&unk_4E20DC);
    for ( i = 0; i < v12; ++i )
    {
      v4 = GetString(packet, str);
      v5 = GetString(v4, v9);
      packet = GetString(v5, v10);
      sub_4727A0(dword_4E20D0, str);
    }
    CRWLock::WriteUnlock((CRWLock *)&unk_4E20DC, ebx0, a2, a3);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0046B5F0) --------------------------------------------------------
void __usercall CPlayer::ScanONPKPlayer(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  int v3; // [esp+0h] [ebp-14h]
  int *a1; // [esp+4h] [ebp-10h]
  void *i; // [esp+8h] [ebp-Ch]
  int *v6; // [esp+Ch] [ebp-8h]
  int *v7; // [esp+10h] [ebp-4h]

  if ( (dword_4E1174[0] & 1) != 0 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078, ebx0, a2, a3);
    CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098, ebx0, a2, a3);
    CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098, ebx0, a2, a3);
    v7 = (int *)dword_4E2004;
    while ( v7 != &dword_4E2004 )
    {
      v6 = v7 - 107;
      v7 = (int *)*v7;
      if ( CChar::IsGState(v6, 256) )
      {
        if ( v6[134] > 0 )
        {
          if ( CSMap::IsOnTile((_DWORD *)v6[80], v6 + 83, 393216) )
          {
            --v6[134];
          }
          else
          {
            if ( v6[134] <= 3 )
              v3 = v6[134];
            else
              v3 = 3;
            v6[134] -= v3;
          }
        }
        for ( i = sub_4934F0((char *)v6[80], ebx0, a2, a3, v6 + 81, 10); i; i = (void *)CBaseList::Pop(
                                                                                          (int)i,
                                                                                          ebx0,
                                                                                          a2,
                                                                                          a3) )
        {
          a1 = (int *)unknown_libname_15(i);
          if ( !CChar::IsGState(a1, 48) && v6 != a1 )
            CPlayer::Write((int)a1, 95, "b", 14);
        }
      }
    }
    CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078, ebx0, a2, a3);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 4E2004: using guessed type int dword_4E2004;
// 4E200C: using guessed type int dword_4E200C[2];

//----- (0046B770) --------------------------------------------------------
void __usercall CPlayer::EventBuff(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1)
{
  CBuffMoveSpeed *v4; // eax
  int v5; // [esp+0h] [ebp-1Ch]
  int v6; // [esp+0h] [ebp-1Ch]
  int *v7; // [esp+4h] [ebp-18h]
  int v8; // [esp+8h] [ebp-14h]
  __time32_t v9; // [esp+Ch] [ebp-10h]
  int v10[3]; // [esp+10h] [ebp-Ch]

  v10[0] = 112;
  v10[1] = 113;
  v10[2] = 114;
  v9 = time(0);
  if ( a1 != 4 )
  {
    if ( a1 )
      v8 = a1 - 1;
    else
      v8 = RandomBetween(0, 2);
    dword_4E1FF8 = v10[v8];
    dword_4E1FF4 = v9 + ((dword_4E1174[0] & 2) != 0 ? 300 : 1800);
  }
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078, ebx0, a2, a3);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098, ebx0, a2, a3);
  CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098, ebx0, a2, a3);
  v7 = (int *)dword_4E2004;
  while ( v7 != &dword_4E2004 )
  {
    v5 = (int)(v7 - 107);
    v7 = (int *)*v7;
    CChar::CancelBuffPrty(v5, ebx0, a2, a3, 128);
    if ( a1 != 4 )
    {
      v4 = CBuff::CreateBuff(dword_4E1FF8, dword_4E1FF4 - v9, 0, v5);
      (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)v6 + 180))(v6, v4);
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078, ebx0, a2, a3);
}
// 46B874: variable 'v6' is possibly undefined
// 4E1FF4: using guessed type int dword_4E1FF4;
// 4E1FF8: using guessed type int dword_4E1FF8;
// 4E2004: using guessed type int dword_4E2004;
// 4E200C: using guessed type int dword_4E200C[2];

//----- (0046B890) --------------------------------------------------------
void __usercall CPlayer::DropItemONPKDie(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-24h] BYREF
  int v7[2]; // [esp+8h] [ebp-20h] BYREF
  int v8[2]; // [esp+10h] [ebp-18h] BYREF
  int v9; // [esp+18h] [ebp-10h]
  int v10; // [esp+1Ch] [ebp-Ch]
  CIOObject *v11; // [esp+20h] [ebp-8h]
  char v12[4]; // [esp+24h] [ebp-4h] BYREF

  if ( RandomBetween(1, 100) <= 10 )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020), a2, a3, a4);
    if ( sub_446110((void *)(this + 1068)) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), a2, a3, a4);
    }
    else
    {
      v4 = unknown_libname_18(this + 1068);
      v10 = RandomBetween(0, v4 - 1);
      std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 1068),
        (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
      v9 = 0;
      while ( v9 < v10 )
      {
        ++v9;
        sub_446090((int *)v12, (int *)v6, 0);
      }
      v11 = *(CIOObject **)(sub_420250(v12) + 4);
      if ( *(_DWORD *)(*((_DWORD *)v11 + 10) + 72) != 20 || !CItem::IsState(v11, 1) )
      {
        if ( CItem::IsState(v11, 1) )
          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v11 + 100))(v11, this);
        if ( (*(int (__thiscall **)(CIOObject *, _DWORD, int))(*(_DWORD *)v11 + 144))(v11, *((_DWORD *)v11 + 13), this) )
        {
          CChar::GetDropPt((_DWORD *)this, v7);
          v8[0] = v7[0] >> 5;
          v8[1] = v7[1] >> 5;
          if ( sub_491360(*(_DWORD **)(this + 320), a2, a3, a4, (int)v11, v8) )
          {
            (*(void (__thiscall **)(CIOObject *, int, int *, int *, int, _DWORD, _DWORD))(*(_DWORD *)v11 + 124))(
              v11,
              this,
              v7,
              v8,
              1,
              0,
              0);
            CPlayer::_OutofInven(v11);
          }
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), a2, a3, a4);
    }
  }
}
// 446330: using guessed type int __thiscall unknown_libname_18(_DWORD);

//----- (0046BA30) --------------------------------------------------------
void __userpurge CPlayer::Transform(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  if ( a2 == 2 )
  {
    CPlayer::FreeTransform(this, ebx0, edi0, a4);
  }
  else if ( a3 >= 1 && a3 <= 3 && !CChar::IsGState((_DWORD *)this, 48) )
  {
    if ( CSMap::IsOnTile(*(_DWORD **)(this + 320), (int *)(this + 332), 0x20000) )
    {
      CPlayer::Write(this, 67, "b", 67);
    }
    else if ( *(_DWORD *)(this + 580) >= dword_4D669C[a3] )
    {
      CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020), ebx0, edi0, a4);
      if ( !CChar::IsGState((_DWORD *)this, 512) )
      {
        if ( a2 == 1 )
        {
          if ( !*(_DWORD *)(this + 1116) )
          {
            if ( *(_DWORD *)(this + 1108) )
              CItemTransform::ApplyTransform(*(_DWORD **)(this + 1108), ebx0, edi0, a4, (volatile LONG *)this, a3);
          }
        }
        else if ( !a2 )
        {
          if ( *(_DWORD *)(this + 1116) )
            CPlayer::Write(this, 67, "b", 77);
          else
            CChar::WriteInSight(ebx0, edi0, a4, this, 61, "dbb", *(_DWORD *)(this + 28), 12, a3);
        }
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, a4);
    }
    else
    {
      CPlayer::Write(this, 67, "b", 66);
    }
  }
}

//----- (0046BB90) --------------------------------------------------------
void __usercall CPlayer::FreeTransform(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020), a2, a3, a4);
  if ( CChar::IsGState((_DWORD *)this, 512) && *(_DWORD *)(this + 1108) )
    CItemTransform::FreeTransform(*(_DWORD **)(this + 1108), (_DWORD *)this);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), a2, a3, a4);
}

//----- (0046BBF0) --------------------------------------------------------
void __usercall CPlayer::BreakStandard(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020), a2, a3, a4);
  if ( *(_DWORD *)(this + 1116) )
    CItemStandard::Broken(*(CIOObject **)(this + 1116), (_DWORD *)this, 1);
  CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), a2, a3, a4);
}

//----- (0046BC40) --------------------------------------------------------
void __usercall CPlayer::RefreshStandardBuff(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CBuffMoveSpeed *v4; // eax
  int *v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int v8; // [esp+Ch] [ebp-Ch]
  void *i; // [esp+10h] [ebp-8h]
  int v10; // [esp+14h] [ebp-4h]

  if ( CPlayer::IsWearBuffStandard((int *)this)
    && CGuild::IsWarringPeriod()
    && CSMap::IsOnTile(*(_DWORD **)(this + 320), (int *)(this + 332), 0x100000) )
  {
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020), a2, a3, a4);
    v10 = *(_DWORD *)(this + 1116);
    if ( v10 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(v10 + 40) + 160);
      v8 = *(_DWORD *)(*(_DWORD *)(v10 + 40) + 164);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), a2, a3, a4);
      for ( i = sub_4934F0(*(char **)(this + 320), a2, a3, a4, (_DWORD *)(this + 324), 10);
            i;
            i = (void *)CBaseList::Pop((int)i, a2, a3, a4) )
      {
        v6 = (int *)unknown_libname_15(i);
        if ( v6 != (int *)this
          && CChar::IsNormal((int)v6)
          && *(_DWORD *)(this + 480) == v6[120]
          && !CPlayer::IsWearBuffStandard(v6) )
        {
          v4 = CBuff::CreateBuff(v7, 2, v8, this);
          (*(void (__thiscall **)(int *, CBuffMoveSpeed *))(*v6 + 180))(v6, v4);
        }
      }
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), a2, a3, a4);
    }
  }
}
// 46BD14: variable 'this' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (0046BD80) --------------------------------------------------------
BOOL __thiscall CPlayer::IsWearBuffStandard(int *this)
{
  return this[280] >= 0 && CPlayer::IsWState(this, 13);
}

//----- (0046BDC0) --------------------------------------------------------
void __userpurge CPlayer::Bless(char *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  CBuffMoveSpeed *v6; // eax
  __int64 v7; // [esp+0h] [ebp-1Ch]
  int v9; // [esp+14h] [ebp-8h]
  CIOObject *v10; // [esp+18h] [ebp-4h]

  if ( *((int *)this + 15) >= 6
    && a2 >= 0
    && a2 <= 1
    && a3 >= 1
    && a3 <= 5
    && (a3 & 0x80000001) != 0
    && (a2 || !CChar::IsBState(this, 128i64))
    && (a2 != 1 || (v7 = CChar::IsBState(this, 256i64)) == 0) )
  {
    v9 = a3 * ((a2 != 0 ? 6 : 11) * *((_DWORD *)this + 15) * *((_DWORD *)this + 15) / 2);
    if ( a3 == 3 )
    {
      v9 = 9 * v9 / 10;
    }
    else if ( a3 == 5 )
    {
      v9 = 8 * v9 / 10;
    }
    CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020), ebx0, edi0, a4);
    if ( *((_DWORD *)this + 274) && *(_DWORD *)(*((_DWORD *)this + 274) + 52) >= v9 )
    {
      v10 = (CIOObject *)*((_DWORD *)this + 274);
      if ( !(*(int (__thiscall **)(CIOObject *, char *, int, int))(*(_DWORD *)v10 + 120))(v10, this, 39, -v9) )
        CPlayer::_OutofInven(v10);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, a4);
      v6 = CBuff::CreateBuff((a2 != 0) + 16, 3600 * a3, v7, SHIDWORD(v7));
      (*(void (__thiscall **)(char *, CBuffMoveSpeed *))(*(_DWORD *)this + 180))(this, v6);
    }
    else
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, a4);
    }
  }
}
// 46BDF3: conditional instruction was optimized away because of '%arg_4.4 in (1..5)'
// 46BF3A: variable 'v7' is possibly undefined

//----- (0046BF60) --------------------------------------------------------
void __userpurge CPlayer::SetSystemCode(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2)
{
  if ( a1 >= 0 && a1 < 15 )
  {
    if ( a2 )
      *(_DWORD *)dword_4E1174 |= 1 << a1;
    else
      *(_DWORD *)dword_4E1174 &= ~(1 << a1);
    CPlayer::WriteAll(ebx0, edi0, a3, 68, "bdd", 70, *(_DWORD *)dword_4E1174, dword_4E1178);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046BFD0) --------------------------------------------------------
void __userpurge CPlayer::SetEventCode(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, int a2)
{
  if ( a1 >= 0 && a1 < 9 )
  {
    if ( a2 )
      dword_4E1178 |= 1 << a1;
    else
      dword_4E1178 &= ~(1 << a1);
    CPlayer::WriteAll(ebx0, edi0, a3, 68, "bdd", 70, *(_DWORD *)dword_4E1174, dword_4E1178);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046C040) --------------------------------------------------------
int __thiscall CPlayer::IsPCBang(_DWORD *this)
{
  int result; // eax

  if ( dword_4E35B8 )
    result = 0;
  else
    result = *(_DWORD *)(this[419] + 156) & 0x200;
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0046C070) --------------------------------------------------------
void __userpurge CPlayer::Shortcut(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, void *Src, int end)
{
  char v8[40]; // [esp+4h] [ebp-2Ch] BYREF
  int v9; // [esp+2Ch] [ebp-4h]

  v9 = dword_4D9830;
  if ( a2 )
  {
    if ( ScanPacket(ebx0, a3, a4, (char *)Src, (char *)end, "m", v8, 40) != Src )
      CDBSocket::Write(67, "bdm", a2, this[113], v8, 40);
  }
  else
  {
    CDBSocket::Write(67, "bdd", 0, this[113], this[7]);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0046C100) --------------------------------------------------------
void __userpurge CPlayer::OnGetMyTelPt(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, char *packet)
{
  char *v6; // eax
  _BYTE *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  std::string *v10; // eax
  char v12[8]; // [esp+4h] [ebp-8Ch] BYREF
  char v13[28]; // [esp+Ch] [ebp-84h] BYREF
  char v14[44]; // [esp+28h] [ebp-68h] BYREF
  int i; // [esp+54h] [ebp-3Ch]
  char *v16; // [esp+58h] [ebp-38h]
  char str[24]; // [esp+5Ch] [ebp-34h] BYREF
  int v18; // [esp+74h] [ebp-1Ch]
  char *v19; // [esp+78h] [ebp-18h]
  void *Src; // [esp+7Ch] [ebp-14h]
  char v21[4]; // [esp+80h] [ebp-10h] BYREF
  char v22[4]; // [esp+84h] [ebp-Ch] BYREF
  char v23[4]; // [esp+88h] [ebp-8h] BYREF
  char v24[4]; // [esp+8Ch] [ebp-4h] BYREF

  v18 = dword_4D9830;
  Src = CIOBuffer::Alloc();
  v16 = (char *)Src;
  *((_BYTE *)Src + 2) = 31;
  v19 = v16 + 4;
  CChar::Lock((int)this);
  sub_46C290(v21);
  for ( i = 0; i < a2; ++i )
  {
    v6 = GetString(packet, str);
    v7 = sub_418960(v6, v21);
    v8 = sub_47A240(v7, v22);
    v9 = sub_47A240(v8, v23);
    packet = (char *)sub_47A240(v9, v24);
    v19 = PutString(v19, str);
    std::string::string((std::string *)v13, str);
    v10 = (std::string *)sub_472950((int)v14, (std::string *)v13, v21);
    sub_471D20(
      (int *)this + 375,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v12,
      v10);
    sub_46C2D0((std::string *)v14);
    sub_40F780((std::string *)v13);
  }
  CChar::Unlock((int)this);
  WritePacket(ebx0, a3, a4, v16 + 3, "b", a2);
  *(_WORD *)v16 = (_WORD)v19 - (_WORD)v16;
  *((_DWORD *)Src + 2000) = *(unsigned __int16 *)v16;
  CSocket::_CSocket(*((_DWORD *)this + 419), ebx0, a3, a4, Src);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0046C290) --------------------------------------------------------
_DWORD *__thiscall sub_46C290(_DWORD *this)
{
  this[3] = 0;
  this[2] = 0;
  this[1] = 0;
  *this = 0;
  return this;
}

//----- (0046C2D0) --------------------------------------------------------
void __thiscall sub_46C2D0(std::string *this)
{
  sub_40F780(this);
}

//----- (0046C2F0) --------------------------------------------------------
void __userpurge CPlayer::SetMyTelPt(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, void *Src, int end)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  std::string *v8; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v9; // eax
  void *v10; // eax
  int v11; // eax
  std::string *v12; // eax
  void *v13; // eax
  int *v14; // eax
  char v16[4]; // [esp+8h] [ebp-170h] BYREF
  char v17[28]; // [esp+Ch] [ebp-16Ch] BYREF
  char v18[4]; // [esp+28h] [ebp-150h] BYREF
  char v19[8]; // [esp+2Ch] [ebp-14Ch] BYREF
  char v20[28]; // [esp+34h] [ebp-144h] BYREF
  char v21[44]; // [esp+50h] [ebp-128h] BYREF
  char v22[4]; // [esp+7Ch] [ebp-FCh] BYREF
  char v23[4]; // [esp+80h] [ebp-F8h] BYREF
  char v24[28]; // [esp+84h] [ebp-F4h] BYREF
  char v25[4]; // [esp+A0h] [ebp-D8h] BYREF
  char v26[28]; // [esp+A4h] [ebp-D4h] BYREF
  char v27[31]; // [esp+C0h] [ebp-B8h] BYREF
  bool v28; // [esp+DFh] [ebp-99h]
  char v29[8]; // [esp+E0h] [ebp-98h] BYREF
  char v30[28]; // [esp+E8h] [ebp-90h] BYREF
  char v31[44]; // [esp+104h] [ebp-74h] BYREF
  char v32[4]; // [esp+130h] [ebp-48h] BYREF
  char v33[28]; // [esp+134h] [ebp-44h] BYREF
  char v34[4]; // [esp+150h] [ebp-28h] BYREF
  int *v35; // [esp+154h] [ebp-24h]
  char *_Ptr; // [esp+158h] [ebp-20h] BYREF
  int v37; // [esp+15Ch] [ebp-1Ch] BYREF
  char v38[4]; // [esp+160h] [ebp-18h] BYREF
  char v39[16]; // [esp+164h] [ebp-14h] BYREF
  char *name; // [esp+174h] [ebp-4h] BYREF
  char *Srca; // [esp+184h] [ebp+Ch]

  Srca = ScanPacket(ebx0, a3, a4, (char *)Src, (char *)end, "s", &name, 21);
  if ( IsValidName(name) )
  {
    CChar::Lock((int)this);
    switch ( a2 )
    {
      case 0:
        if ( CSMap::IsValidTile((_DWORD *)this[80], this + 83, 1179648)
          && ((int)this[83] <= 17000 || (int)this[83] >= 23000 || (int)this[84] <= 64000 || (int)this[84] >= 70000) )
        {
          std::string::string((std::string *)v33, name);
          sub_4726F0(this + 375, v38, v33);
          sub_40F780((std::string *)v33);
          v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this + 375, v32);
          if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                 (std::vector<CIOSocket::CIOTimer>::const_iterator *)v38,
                 v7) )
          {
            CPlayer::Write((int)this, 68, "bb", 80, 2);
          }
          else if ( CPlayer::RemoveItem((int)this, 9, 509, 1) || CPlayer::RemoveItem((int)this, 9, 510, 1) )
          {
            sub_46C920(v39, this[79], this + 83, this[85]);
            std::string::string((std::string *)v30, name);
            v8 = (std::string *)sub_472950((int)v31, (std::string *)v30, v39);
            sub_471D20(
              this + 375,
              (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v29,
              v8);
            sub_46C2D0((std::string *)v31);
            sub_40F780((std::string *)v30);
            CDBSocket::Write(71, "dbsbddd", this[113], a2, name, this[79], this[83], this[84], this[85]);
          }
        }
        else
        {
          CPlayer::Write((int)this, 68, "bb", 80, 1);
        }
        break;
      case 1:
        std::string::string((std::string *)v27, name);
        v28 = sub_472690(this + 375, v27) == 0;
        sub_40F780((std::string *)v27);
        if ( !v28 )
          CDBSocket::Write(71, "dbs", this[113], a2, name);
        break;
      case 2:
        ScanPacket(ebx0, a3, a4, Srca, (char *)end, "s", &_Ptr, 21);
        if ( IsValidName(_Ptr) )
        {
          std::string::string((std::string *)v26, _Ptr);
          sub_4726F0(this + 375, &v37, v26);
          sub_40F780((std::string *)v26);
          v9 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this + 375, v25);
          if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
                 (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v37,
                 v9) )
          {
            CPlayer::Write((int)this, 68, "bb", 80, 2);
          }
          else
          {
            std::string::string((std::string *)v24, name);
            v37 = *sub_4726F0(this + 375, v23, v24);
            sub_40F780((std::string *)v24);
            v10 = sub_430C20(this + 375, v22);
            if ( !(unsigned __int8)unknown_libname_16(v10) )
            {
              std::string::string((std::string *)v20, _Ptr);
              v11 = sub_420250(&v37);
              v12 = (std::string *)sub_472950((int)v21, (std::string *)v20, (_DWORD *)(v11 + 28));
              sub_471D20(
                this + 375,
                (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v19,
                v12);
              sub_46C2D0((std::string *)v21);
              sub_40F780((std::string *)v20);
              sub_471F00(this + 375, v18, v37);
              CDBSocket::Write(71, "dbss", this[113], a2, name, _Ptr);
            }
          }
        }
        else
        {
          CPlayer::Write((int)this, 68, "bb", 80, 0);
        }
        break;
      case 3:
        if ( !CChar::IsGState(this, 256)
          && ((int)this[83] <= 17000 || (int)this[83] >= 23000 || (int)this[84] <= 64000 || (int)this[84] >= 70000) )
        {
          std::string::string((std::string *)v17, name);
          sub_4726F0(this + 375, v34, v17);
          sub_40F780((std::string *)v17);
          v13 = sub_430C20(this + 375, v16);
          if ( !(unsigned __int8)unknown_libname_16(v13)
            && (CPlayer::RemoveItem((int)this, 9, 511, 1) || CPlayer::RemoveItem((int)this, 9, 512, 1)) )
          {
            v14 = (int *)sub_420250(v34);
            v35 = v14 + 7;
            CPlayer::Teleport(this, v14[7], v14 + 8, v14[10], 0);
          }
        }
        break;
      default:
        break;
    }
    CChar::Unlock((int)this);
  }
  else
  {
    CPlayer::Write((int)this, 68, "bb", 80, 0);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0046C920) --------------------------------------------------------
_DWORD *__thiscall sub_46C920(_DWORD *this, int a2, _DWORD *a3, int a4)
{
  int v4; // ecx

  *this = a2;
  v4 = a3[1];
  this[1] = *a3;
  this[2] = v4;
  this[3] = a4;
  return this;
}

//----- (0046C960) --------------------------------------------------------
void __userpurge CPlayer::OnSetMyTelPt(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, void *Src)
{
  const char *v7; // [esp+4h] [ebp-8h] BYREF
  char v8; // [esp+Bh] [ebp-1h] BYREF

  if ( !a2 )
  {
    ReadPacket(ebx0, a3, a4, Src, "bs", &v8, &v7);
    if ( v8 )
    {
      CPlayer::Write((int)this, 32, "bs", 0, v7);
    }
    else
    {
      CPlayer::Write((int)this, 68, "bb", 80, 3);
      LOG_ERR("CPlayer::OnSetMyTelPt() save myteleport point error.(PID:%d, Lod:%s)", this[113], v7);
    }
  }
}

//----- (0046C9F0) --------------------------------------------------------
int __thiscall CPlayer::GetPalsyDamage(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+0h] [ebp-4Ch]
  int v4; // [esp+4h] [ebp-48h]
  int v5; // [esp+20h] [ebp-2Ch]
  int v6; // [esp+24h] [ebp-28h]
  int v7; // [esp+28h] [ebp-24h]
  int v8; // [esp+2Ch] [ebp-20h]
  int v10; // [esp+38h] [ebp-14h]
  int Number; // [esp+3Ch] [ebp-10h]
  int v12; // [esp+40h] [ebp-Ch]
  int v13; // [esp+44h] [ebp-8h]

  if ( !this[149] )
    return 0;
  Number = this[15] - a2[15];
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 60))(a2) )
  {
    if ( Number < 0 )
    {
      if ( abs(Number) >= 7 )
        v7 = 7;
      else
        v7 = abs(Number);
      v10 = dword_4D92DC[v7] * dword_4D9268[this[149]] / 100;
    }
    else
    {
      if ( Number >= 7 )
        v8 = 7;
      else
        v8 = Number;
      v10 = dword_4D92BC[v8] * dword_4D9268[this[149]] / 100;
    }
  }
  else
  {
    if ( Number < 0 )
    {
      if ( abs(Number) >= 30 )
        v5 = 30;
      else
        v5 = abs(Number);
      v10 = dword_4D9320[v5] * dword_4D9268[this[149]] / 100;
    }
    else
    {
      if ( Number >= 7 )
        v6 = 7;
      else
        v6 = Number;
      v10 = dword_4D92FC[v6] * dword_4D9268[this[149]] / 100;
    }
    if ( CChar::IsBState(a2, 2048i64) )
    {
      v10 += 3;
    }
    else if ( CChar::IsBState(a2, 4096i64) )
    {
      v10 += 5;
    }
    else if ( CChar::IsBState(a2, 0x100000000i64) )
    {
      v10 += 3;
    }
  }
  if ( v10 < RandomBetween(1, 100) )
    return 0;
  if ( (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2) )
    v4 = CChar::GetResist(a2, 4) / 10;
  else
    v4 = CChar::GetResist(a2, 4);
  v13 = v4 < 0 ? 0 : v4;
  if ( v13 >= 100 )
    v3 = 0;
  else
    v3 = 100 - v13;
  if ( this[115] == 1 )
    v12 = v3
        * (3 * this[151] + RandomBetween(this[154] + this[149] * this[154] / 20, this[155] + this[149] * this[155] / 10))
        / 100;
  else
    v12 = v3
        * (3 * this[150] + RandomBetween(this[152] + this[149] * this[152] / 20, this[153] + this[149] * this[153] / 10))
        / 100;
  return v12;
}

//----- (0046CD70) --------------------------------------------------------
int __thiscall CPlayer::CanMove(_DWORD *this)
{
  int result; // eax

  if ( CChar::IsGState(this, 38) )
  {
    CPlayer::Write((int)this, 33, "ddddw", this[7], this[83], this[84], this[85], this[87]);
    result = 0;
  }
  else if ( CChar::IsGState(this, 4096) )
  {
    result = 0;
  }
  else
  {
    if ( CChar::IsGState(this, 0x2000) )
    {
      CChar::SubGState(this, 0x2000);
      this[362] = GetTickCount();
    }
    result = 1;
  }
  return result;
}

//----- (0046CE20) --------------------------------------------------------
void __userpurge CPlayer::NPCProcess(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, char a2, int a3, int a4, int a5)
{
  volatile int *v9; // [esp+8h] [ebp-4h]

  v9 = (volatile int *)CNPC::FindNPC(a2);
  if ( v9 )
  {
    if ( (*(int (__thiscall **)(volatile int *, char *))(*v9 + 188))(v9, (char *)this + 332) )
    {
      if ( !a3 )
        (*(void (__thiscall **)(volatile int *, void *, int, int))(*v9 + 212))(v9, this, a4, a5);
    }
    CIOObject::Release(v9, ebx0, edi0, esi0);
  }
}

//----- (0046CEA0) --------------------------------------------------------
void __thiscall CPlayer::ChangePlayerName(char *this, char *Str)
{
  CBuffMoveSpeed *v2; // eax

  if ( CChar::IsBState(this, 0x800000i64) )
  {
    CPlayer::Write((int)this, 68, "bb", 100, 9);
  }
  else if ( IsValidName(Str) && strlen(Str) <= 0xE && strcmp(this + 32, Str) )
  {
    if ( CPlayer::FindItem((int)this, 639, 1) )
    {
      v2 = CBuff::CreateBuff(97, 1814400, 0, 0);
      (*(void (__thiscall **)(char *, CBuffMoveSpeed *))(*(_DWORD *)this + 180))(this, v2);
      CDBSocket::Write(72, "ddss", *((_DWORD *)this + 7), *((_DWORD *)this + 113), this + 32, Str);
    }
    else
    {
      CPlayer::Write((int)this, 68, "bb", 100, 10);
    }
  }
  else
  {
    CPlayer::Write((int)this, 68, "bbs", 100, 1, Str);
  }
}

//----- (0046CFC0) --------------------------------------------------------
void __userpurge CPlayer::OnChangePlayerName(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, char *Source)
{
  int v6; // eax
  char v8[8]; // [esp+4h] [ebp-24h] BYREF
  char *_Val1; // [esp+Ch] [ebp-1Ch] BYREF
  CItem *_Val2; // [esp+10h] [ebp-18h] BYREF
  char v11[8]; // [esp+14h] [ebp-14h] BYREF
  int v12; // [esp+1Ch] [ebp-Ch] BYREF
  int v13; // [esp+20h] [ebp-8h]
  int v14; // [esp+24h] [ebp-4h]

  if ( a2 )
  {
    CChar::Lock(this);
    if ( !CBase::IsDeleted((_DWORD *)this) )
    {
      CRWLock::WriteLock((CRWLock *)&unk_4E2050);
      v12 = this + 32;
      sub_470600(dword_4E2044, (int)&v12);
      strcpy((char *)(this + 32), Source);
      _Val2 = (CItem *)this;
      _Val1 = (char *)(this + 32);
      std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
        (std::pair<char const * const,CItem *> *)v11,
        (const char *const *)&_Val1,
        &_Val2);
      sub_470440(
        (int)dword_4E2044,
        (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v8,
        v6);
      CRWLock::WriteUnlock((CRWLock *)&unk_4E2050, ebx0, a3, a4);
    }
    v13 = *(_DWORD *)(this + 480);
    v14 = *(_DWORD *)(this + 452);
    CChar::Unlock(this);
    if ( !CPlayer::RemoveItem(this, 9, 639, 1) )
      LOG_ERR("OnChangePlayerName() RemoveItem Error (%d)", 639);
    CGuild::ChangePlayerName(v13, v14, Source);
    CPlayer::Write(this, 68, "bbs", 100, 3, Source);
  }
  else
  {
    CChar::CancelBuff(this, ebx0, a3, a4, 97);
    CPlayer::Write(this, 68, "bbs", 100, 2, Source);
  }
}
// 46D06A: variable 'v6' is possibly undefined

//----- (0046D100) --------------------------------------------------------
void __thiscall CPlayer::ChangeGuildName(char *this, char *Str)
{
  CBuffMoveSpeed *v2; // eax
  int v4; // [esp+Ch] [ebp-4h]

  if ( CChar::IsBState(this, 0x1000000i64) )
  {
    CPlayer::Write((int)this, 68, "bb", 100, 9);
  }
  else
  {
    v4 = CPlayer::GetGID(this);
    if ( v4 && *((_DWORD *)this + 113) == v4 )
    {
      if ( IsValidName(Str) && strlen(Str) <= 0xE && strcmp(this + 492, Str) )
      {
        if ( CPlayer::FindItem((int)this, 640, 1) )
        {
          v2 = CBuff::CreateBuff(98, 1814400, 0, 0);
          (*(void (__thiscall **)(char *, CBuffMoveSpeed *))(*(_DWORD *)this + 180))(this, v2);
          CDBSocket::Write(73, "ddss", *((_DWORD *)this + 7), *((_DWORD *)this + 113), this + 492, Str);
        }
        else
        {
          CPlayer::Write((int)this, 68, "bb", 100, 11);
        }
      }
      else
      {
        CPlayer::Write((int)this, 68, "bbs", 100, 5, Str);
      }
    }
    else
    {
      CPlayer::Write((int)this, 68, "bb", 100, 4);
    }
  }
}

//----- (0046D260) --------------------------------------------------------
void __userpurge CPlayer::OnChangeGuildName(int this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2, char *Source)
{
  int v7; // [esp+4h] [ebp-8h]
  int v8; // [esp+8h] [ebp-4h]

  if ( a2 )
  {
    CChar::Lock(this);
    strcpy((char *)(this + 492), Source);
    v7 = *(_DWORD *)(this + 480);
    v8 = *(_DWORD *)(this + 452);
    CChar::Unlock(this);
    if ( !CPlayer::RemoveItem(this, 9, 640, 1) )
      LOG_ERR("OnChangeGuildName() RemoveItem Error (%d)", 640);
    CGuild::ChangeGuildName(v7, v8, Source);
    CPlayer::Write(this, 68, "bbs", 100, 7, Source);
  }
  else
  {
    CChar::CancelBuff(this, ebx0, a3, a4, 98);
    CPlayer::Write(this, 68, "bbs", 100, 6, Source);
  }
}

//----- (0046D340) --------------------------------------------------------
void __userpurge CPlayer::EventProcessNPC(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4)
{
  int v8; // [esp+4h] [ebp-8h]
  int v9; // [esp+8h] [ebp-4h]

  v9 = 0;
  if ( (dword_4E1178 & 0x100) != 0 )
  {
    if ( CPlayer::IsState(a2, 1) && a3 > 0 )
    {
      if ( a3 < 650 )
      {
        if ( a3 < 600 )
        {
          if ( a3 < 150 )
          {
            if ( CPlayer::InsertOwnItem(this, 759, 1) != 1 )
              return;
            v8 = 759;
          }
          else
          {
            if ( CPlayer::InsertOwnItem(this, 473, 1) != 1 )
              return;
            v8 = 473;
          }
        }
        else
        {
          if ( CPlayer::InsertOwnItem(this, 362, 1) != 1 )
            return;
          v8 = 362;
        }
      }
      else
      {
        if ( CPlayer::InsertOwnItem(this, 469, 1) != 1 )
          return;
        v8 = 469;
      }
      v9 = 1;
      CPlayer::SubState(&a2, 1);
      CAuthSocket::Write(ebx0, edi0, esi0, 17, "dddd", this[112], a2, a3, v8);
    }
    else
    {
      a3 = 0;
    }
    if ( !v9 )
      CPlayer::Write((int)this, 68, "b", 112);
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046D490) --------------------------------------------------------
int __stdcall CPlayer::SubState(int *a1, int a2)
{
  int result; // eax

  result = *a1 & ~a2;
  *a1 = result;
  return result;
}

//----- (0046D4B0) --------------------------------------------------------
int __stdcall CPlayer::IsState(int a1, int a2)
{
  return a2 & a1;
}

//----- (0046D4D0) --------------------------------------------------------
int __thiscall CPlayer::InsertOwnItem(void *this, int a1, int a2)
{
  int result; // eax
  char *v5; // [esp+4h] [ebp-14h]

  if ( a1 == 31 )
    return 0;
  v5 = (char *)CItem::CreateOwnItem(a1, 0, a2, -1);
  if ( !v5 )
    return 0;
  CIOObject::AddRef(v5);
  if ( CPlayer::InsertItem((int)this, 3, (int)v5) == 0 )
  {
    CBase::Delete(v5);
    result = 2;
  }
  else
  {
    CIOObject::Release((volatile int *)v5);
    result = 1;
  }
  return result;
}
// 4010D0: using guessed type int __thiscall CIOObject::AddRef(_DWORD);

//----- (0046D570) --------------------------------------------------------
void __thiscall CPlayer::ExchangeDanjiToItem(void *this, int a1, int a2)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = RandomBetween(1, 1000);
  if ( v4 <= 200 )
  {
    if ( a1 )
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 48, 100);
    else
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 48, 150);
    return;
  }
  if ( v4 > 550 )
  {
    if ( v4 <= 700 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 206, 1);
        return;
      }
      goto LABEL_11;
    }
    if ( v4 <= 750 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 207, 1);
        return;
      }
      goto LABEL_15;
    }
    if ( v4 <= 900 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 517, 10);
        return;
      }
LABEL_11:
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 447, 10);
      return;
    }
    if ( v4 <= 940 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 638, 1);
        return;
      }
LABEL_15:
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 241, 10);
      return;
    }
    if ( v4 <= 955 )
    {
      if ( a1 )
      {
        CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 220, 1);
        return;
      }
LABEL_27:
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 327, 1);
      return;
    }
    if ( v4 <= 970 )
    {
      if ( a1 )
        goto LABEL_27;
LABEL_31:
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 331, 1);
      return;
    }
    if ( v4 <= 980 )
    {
      if ( a1 )
        goto LABEL_31;
LABEL_35:
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 329, 1);
      return;
    }
    if ( v4 <= 990 )
    {
      if ( a1 )
        goto LABEL_35;
LABEL_39:
      CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 332, 1);
      return;
    }
    if ( v4 > 995 )
    {
      if ( !a1 )
      {
        CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 221, 1);
        return;
      }
    }
    else if ( a1 )
    {
      goto LABEL_39;
    }
    CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 523, 1);
    return;
  }
  if ( a1 )
    CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 31, 10000);
  else
    CPlayer::ExchahgeItem((int)this, (CIOObject *)a2, 1, 2, 31, 20000);
}

//----- (0046D8B0) --------------------------------------------------------
void __thiscall CPlayer::SiegeGunProcess(_DWORD *this, int a2, int a3, int a4, int a5)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-2Ch]
  int v10; // [esp-8h] [ebp-28h]
  CIOObject *v12; // [esp+14h] [ebp-Ch]
  CIOObject *v13; // [esp+18h] [ebp-8h]
  volatile int *v14; // [esp+1Ch] [ebp-4h]

  v14 = (volatile int *)CNPC::FindNPC(a3);
  if ( v14 )
  {
    CChar::Lock((int)this);
    if ( (*(int (__thiscall **)(volatile int *, _DWORD *))(*v14 + 188))(v14, this + 83) )
    {
      if ( a2 )
      {
        switch ( a4 )
        {
          case 0:
            v13 = CMonster::FindMonster(*((_DWORD *)v14 + 126));
            if ( v13 )
            {
              if ( CChar::IsBState(0, 64)
                || CPlayerSkill::IsSkill(this + 156, 80)
                || CPlayerSkill::IsSkill(this + 156, 81) )
              {
                if ( *((_DWORD *)v13 + 132) )
                {
                  v12 = sub_450810(*((_DWORD *)v13 + 132));
                  CPlayer::Write((int)this, 68, "bs", 125, (char *)v12 + 32);
                  CIOObject::Release(v13, (volatile int *)v13 + 88);
                  CIOObject::Release(v12, (volatile int *)v12 + 88);
                }
                else if ( *((_DWORD *)v13 + 131) == this[120] )
                {
                  if ( CChar::IsGState(v14, 64) )
                  {
                    CPlayer::Write((int)this, 67, "b", 120);
                  }
                  else
                  {
                    (*(void (__thiscall **)(_DWORD *, int, int))(*this + 104))(this, 0x80000, 0x10000);
                    v10 = *((_DWORD *)v13 + 87);
                    v9 = *((_DWORD *)v13 + 176);
                    v5 = std___Mpunct_wchar_t___do_frac_digits(v13);
                    CPlayer::Write((int)this, 1, "bdwws", 0, v5, v9, v10, this + 8);
                    v6 = std___Mpunct_wchar_t___do_frac_digits(v13);
                    CChar::WriteInSight((int)this, 1, "bds", 6, v6, this + 8);
                    v7 = std___Mpunct_wchar_t___do_frac_digits(this);
                    CNPCSiegeGunStone::SetOperator(v14, v7);
                    this[409] = std___Mpunct_wchar_t___do_frac_digits(v13);
                    v8 = std___Mpunct_wchar_t___do_frac_digits(this);
                    CMonsterSiegeGun::SetOperator(v13, v8);
                    this[410] = a3;
                    CIOObject::Release(v13, (volatile int *)v13 + 88);
                  }
                }
                else
                {
                  CPlayer::Write((int)this, 67, "b", 124);
                  CIOObject::Release(v13, (volatile int *)v13 + 88);
                }
              }
              else
              {
                CPlayer::Write((int)this, 67, "b", 130);
                CIOObject::Release(v13, (volatile int *)v13 + 88);
              }
            }
            goto LABEL_30;
          case 1:
            this[410] = a3;
            (*(void (__thiscall **)(volatile int *, _DWORD *, int))(*v14 + 220))(v14, this, 1);
            goto LABEL_30;
          case 2:
            this[410] = 0;
            (*(void (__thiscall **)(volatile int *, _DWORD *, _DWORD))(*v14 + 220))(v14, this, 0);
            goto LABEL_30;
        }
      }
      else
      {
        switch ( a4 )
        {
          case 0:
            sub_4490A0(a3, this);
            goto LABEL_30;
          case 1:
            this[410] = a3;
            (*(void (__thiscall **)(volatile int *, _DWORD *, int, int))(*v14 + 216))(v14, this, 1, a5);
            goto LABEL_30;
          case 2:
            this[410] = 0;
            (*(void (__thiscall **)(volatile int *, _DWORD *, _DWORD, _DWORD))(*v14 + 216))(v14, this, 0, 0);
            goto LABEL_30;
        }
      }
      LOG_ERR("SiegeGunProcess Unknown Sequence : ", a4);
    }
LABEL_30:
    CIOObject::Release(v14);
    CChar::Unlock((int)this);
  }
}
// 409720: using guessed type __int64 __stdcall CChar::IsBState(_DWORD, _DWORD);
// 4490A0: using guessed type _DWORD __cdecl sub_4490A0(char, _DWORD);

//----- (0046DC50) --------------------------------------------------------
void __thiscall CPlayer::SiegeGunControl(_DWORD *this, int a2, void *Src, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // [esp-Ch] [ebp-2Ch]
  int v7; // [esp-8h] [ebp-28h]
  int v8; // [esp-4h] [ebp-24h]
  volatile int *v10; // [esp+8h] [ebp-18h]
  int v11; // [esp+Ch] [ebp-14h] BYREF
  int v12[2]; // [esp+10h] [ebp-10h] BYREF
  CIOObject *v13; // [esp+18h] [ebp-8h]
  unsigned __int8 v14; // [esp+1Fh] [ebp-1h] BYREF

  v13 = CMonster::FindMonster(this[409]);
  if ( v13 )
  {
    v14 = 0;
    v11 = 0;
    CChar::Lock((int)this);
    switch ( a2 )
    {
      case 0:
      case 1:
        ReadPacket(Src, "d", &v11);
        v10 = (volatile int *)CNPC::FindNPC(this[410]);
        if ( v10 )
        {
          CNPCSiegeGunStone::SetOperator(v10, 0);
          CIOObject::Release(v10);
        }
        CMonsterSiegeGun::SetOperator(v13, 0);
        this[409] = 0;
        (*(void (__thiscall **)(_DWORD *, int, int))(*this + 124))(this, 0x80000, 0x10000);
        v4 = std___Mpunct_wchar_t___do_frac_digits(v13);
        CPlayer::Write((int)this, 1, "bd", 1, v4);
        this[410] = 0;
        break;
      case 2:
        ReadPacket(Src, "ddb", &dword_4E2104, &dword_4E2108, &v14);
        CChar::SetDirection(v13, dword_4E2104 - this[83], dword_4E2108 - this[84]);
        v8 = v14;
        v7 = dword_4E2108;
        v6 = dword_4E2104;
        v5 = std___Mpunct_wchar_t___do_frac_digits(v13);
        CChar::WriteInSight((int)this, 1, "bdddb", 2, v5, v6, v7, v8);
        break;
      case 3:
        break;
      case 4:
        ReadPacket(Src, "dd", &dword_4E2104, &dword_4E2108);
        v12[0] = dword_4E2104;
        v12[1] = dword_4E2108;
        CMonsterSiegeGun::SetFire(v12);
        break;
      default:
        LOG_ERR("SiegeGunControl Unknown Sequence : ", a2);
        break;
    }
    CChar::Unlock((int)this);
    CIOObject::Release(v13, (volatile int *)v13 + 88);
  }
}
// 444D30: using guessed type _DWORD __stdcall CMonsterSiegeGun::SetFire(_DWORD);
// 4E2104: using guessed type int dword_4E2104;
// 4E2108: using guessed type int dword_4E2108;

//----- (0046DE50) --------------------------------------------------------
void __thiscall CPlayer::SiegeGunUnset(_DWORD *this, int a2)
{
  volatile int *v3; // [esp+8h] [ebp-4h]

  CChar::Lock((int)this);
  if ( a2 == 1 )
  {
    (*(void (__thiscall **)(_DWORD *, int, int))(*this + 124))(this, 0x80000, 0x10000);
    CChar::WriteInSight((int)this, 0, "bdd", 4, this[410], this[70]);
    this[409] = 0;
    v3 = (volatile int *)CNPC::FindNPC(this[410]);
    if ( v3 )
    {
      CMonster::ResetNextMove(*((_DWORD *)v3 + 116), 0);
      CNPCSiegeGunStone::SetOperator(v3, 0);
      CNPCSiegeGunStone::SetSiegeGun(v3, 0);
      this[410] = 0;
    }
    CIOObject::Release(v3);
  }
  CChar::Unlock((int)this);
}

//----- (0046DF30) --------------------------------------------------------
int __thiscall CPlayer::ReturnToPoint(_DWORD *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  __int64 v3; // rax
  __int64 v5; // [esp+0h] [ebp-54h]
  char v7[4]; // [esp+14h] [ebp-40h] BYREF
  char v8[4]; // [esp+18h] [ebp-3Ch] BYREF
  char v9[4]; // [esp+1Ch] [ebp-38h] BYREF
  _DWORD v10[3]; // [esp+20h] [ebp-34h] BYREF
  int v11[2]; // [esp+2Ch] [ebp-28h] BYREF
  __int64 v12; // [esp+34h] [ebp-20h]
  int v13; // [esp+40h] [ebp-14h]
  __int64 v14; // [esp+44h] [ebp-10h]
  int v15; // [esp+50h] [ebp-4h]

  sub_47D030(v10);
  CNPC::GetNPCList((int)v10, a2, this[79]);
  v15 = 0;
  v13 = 0;
  v14 = 0x7FFFFFFFFFFFFFFFi64;
  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(v9);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v7);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
            v2) )
      break;
    v15 = *(_DWORD *)sub_40F040(v9);
    v12 = v14;
    v3 = sub_43D870(this + 83, (_DWORD *)(v15 + 332));
    if ( v14 >= v3 )
      v5 = sub_43D870(this + 83, (_DWORD *)(v15 + 332));
    else
      v5 = v14;
    v14 = v5;
    if ( v12 != v5 )
      v13 = v15;
    sub_47D0A0(v8, 0);
  }
  v11[0] = RandomBetween(*(_DWORD *)(*(_DWORD *)(v13 + 444) + 60), *(_DWORD *)(*(_DWORD *)(v13 + 444) + 60) + 32);
  v11[1] = RandomBetween(*(_DWORD *)(*(_DWORD *)(v13 + 444) + 64), *(_DWORD *)(*(_DWORD *)(v13 + 444) + 64) + 32);
  CPlayer::Teleport(this, *(_DWORD *)(*(_DWORD *)(v13 + 444) + 52), v11, 0, 0);
  return sub_472990(v10);
}
// 40EFA0: using guessed type _DWORD __stdcall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(_DWORD);
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 472990: using guessed type int __thiscall sub_472990(_DWORD);
// 47D0A0: using guessed type _DWORD __stdcall sub_47D0A0(_DWORD, _DWORD);

//----- (0046E0D0) --------------------------------------------------------
int CPlayer::CountWarrelationPlayer()
{
  int *i; // [esp+4h] [ebp-10h]
  _DWORD *v2; // [esp+8h] [ebp-Ch]
  int v3; // [esp+Ch] [ebp-8h]
  int v4; // [esp+10h] [ebp-4h]

  v4 = 0;
  v3 = 0;
  v2 = (_DWORD *)CCastle::GetCastle(1);
  if ( v2 )
    v3 = CCastle::GetWarSize(v2);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2078);
  CIOCriticalSection::Enter((CIOCriticalSection *)&unk_4E2098);
  CLink::MoveTo(dword_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2098);
  for ( i = (int *)dword_4E2004; i != &dword_4E2004; i = (int *)*i )
  {
    if ( i[14] )
    {
      if ( CCastle::IsAllCastleWarRelation(i[14]) )
        ++v4;
    }
  }
  LOG_NORMAL(" Guild(%d) Player(%d)", v3, v4);
  CIOCriticalSection::Leave((CIOCriticalSection *)&unk_4E2078);
  return v4;
}
// 4E2004: using guessed type int dword_4E2004;
// 4E200C: using guessed type int dword_4E200C[2];

//----- (0046E1B0) --------------------------------------------------------
void __thiscall CPlayer::EnforceItem(int this, int a2, int a3, int a4, int a5, int a6, char a7)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v8; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v9; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  int v12; // [esp+0h] [ebp-78h]
  int v13; // [esp+4h] [ebp-74h]
  int v14; // [esp+10h] [ebp-68h]
  char v16[4]; // [esp+20h] [ebp-58h] BYREF
  char v17[4]; // [esp+24h] [ebp-54h] BYREF
  char v18[4]; // [esp+28h] [ebp-50h] BYREF
  char v19[4]; // [esp+2Ch] [ebp-4Ch] BYREF
  char v20[4]; // [esp+30h] [ebp-48h] BYREF
  char v21[4]; // [esp+34h] [ebp-44h] BYREF
  char v22[4]; // [esp+38h] [ebp-40h] BYREF
  char v23[4]; // [esp+3Ch] [ebp-3Ch] BYREF
  char v24[4]; // [esp+40h] [ebp-38h] BYREF
  char v25[4]; // [esp+44h] [ebp-34h] BYREF
  int v26; // [esp+48h] [ebp-30h]
  int v27; // [esp+4Ch] [ebp-2Ch]
  int v28; // [esp+50h] [ebp-28h]
  CIOObject *v29; // [esp+54h] [ebp-24h]
  int v30; // [esp+58h] [ebp-20h]
  int v31; // [esp+5Ch] [ebp-1Ch]
  char *v32; // [esp+60h] [ebp-18h]
  CIOObject *v33; // [esp+64h] [ebp-14h]
  CIOObject *v34; // [esp+68h] [ebp-10h]
  CIOObject *v35; // [esp+6Ch] [ebp-Ch]
  CIOObject *v36; // [esp+70h] [ebp-8h]
  int v37; // [esp+74h] [ebp-4h] BYREF

  std___String_base___String_base(&v37);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020));
  if ( !*(_DWORD *)(this + 1096) || *(int *)(*(_DWORD *)(this + 1096) + 52) < 30000 )
  {
    LOG_ERR("EnforceItem() PID(%d) Not Enough Money ", *(_DWORD *)(this + 452));
LABEL_139:
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
    CPlayer::Write(this, 68, "bb", 138, 0);
    return;
  }
  v37 = *(_DWORD *)sub_44AE20(v25, &a3);
  v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v24);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v37,
          v7) )
  {
    LOG_ERR("EnforceItem() PID(%d) ItemIndex(%d) ", *(_DWORD *)(this + 452), a3);
    goto LABEL_139;
  }
  v32 = *(char **)(sub_420250(&v37) + 4);
  v37 = *(_DWORD *)sub_44AE20(v23, &a4);
  v8 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v22);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v37,
          v8) )
  {
LABEL_31:
    LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a4);
    goto LABEL_139;
  }
  v33 = *(CIOObject **)(sub_420250(&v37) + 4);
  if ( *(_DWORD *)(*((_DWORD *)v33 + 10) + 64) == 906 )
  {
    switch ( *(_DWORD *)(*((_DWORD *)v32 + 10) + 80) )
    {
      case '(':
        if ( *((int *)v33 + 13) < 1 )
          goto LABEL_31;
        break;
      case '-':
        if ( *((int *)v33 + 13) >= 2 )
          break;
        goto LABEL_31;
      case '0':
        if ( *((int *)v33 + 13) >= 4 )
          break;
        goto LABEL_31;
      case '2':
        if ( *((int *)v33 + 13) < 6 )
          goto LABEL_31;
        break;
      case '5':
        if ( *((int *)v33 + 13) >= 6 )
          break;
        goto LABEL_31;
      case '8':
        if ( *((int *)v33 + 13) < 20 )
          goto LABEL_31;
        break;
      case ';':
        if ( *((int *)v33 + 13) >= 20 )
          break;
        goto LABEL_31;
      case '>':
        if ( *((int *)v33 + 13) < 75 )
          goto LABEL_31;
        break;
      case 'A':
        if ( *((int *)v33 + 13) < 450 )
          goto LABEL_31;
        break;
      default:
        break;
    }
  }
  v37 = *(_DWORD *)sub_44AE20(v21, &a5);
  v9 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v20);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v37,
          v9) )
  {
    LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a5);
    goto LABEL_139;
  }
  v35 = *(CIOObject **)(sub_420250(&v37) + 4);
  v37 = *(_DWORD *)sub_44AE20(v19, &a6);
  v10 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v18);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v37,
          v10) )
  {
    LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a6);
    goto LABEL_139;
  }
  v34 = *(CIOObject **)(sub_420250(&v37) + 4);
  if ( a2 )
  {
    v37 = *(_DWORD *)sub_44AE20(v17, &a7);
    v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v16);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v37,
            v11) )
    {
      LOG_ERR("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a6);
      goto LABEL_139;
    }
    v36 = *(CIOObject **)(sub_420250(&v37) + 4);
  }
  if ( !sub_46EF90((int)v32, (int)v33, (int)v35)
    || a2
    && sub_46EF70(v34) != 904
    && sub_46EF70(v34) != 905
    && sub_46EF70(v36) != 904
    && sub_46EF70(v36) != 905
    && !CItem::IsState(v32, 0x100000) )
  {
    goto LABEL_139;
  }
  switch ( *(_DWORD *)(*((_DWORD *)v32 + 10) + 80) )
  {
    case '(':
    case '-':
      if ( RandomBetween(0, 99) > 10 )
        goto LABEL_128;
      goto LABEL_61;
    case '0':
    case '2':
      if ( RandomBetween(0, 99) <= 7 )
        goto LABEL_61;
      goto LABEL_128;
    case '5':
      if ( RandomBetween(0, 99) <= 5 )
        goto LABEL_61;
      goto LABEL_128;
    case '8':
      if ( RandomBetween(0, 99) <= 4 )
        goto LABEL_61;
      goto LABEL_128;
    case ';':
    case '>':
    case 'A':
      if ( RandomBetween(0, 99) <= 3 )
        goto LABEL_61;
LABEL_128:
      if ( !(*(int (__thiscall **)(_DWORD, int, int, int))(**(_DWORD **)(this + 1096) + 120))(
              *(_DWORD *)(this + 1096),
              this,
              9,
              -30000) )
        CPlayer::_OutofInven(*(CIOObject **)(this + 1096));
      sub_46F320((void *)this, v34);
      if ( a2 )
        sub_46F320((void *)this, v36);
      CPlayer::Write(this, 68, "bb", 138, 1);
      *((_DWORD *)v32 + 24) -= RandomBetween(5, 10);
      if ( *((int *)v32 + 24) > 0 )
      {
        CPlayer::Write(this, 91, "db", *((_DWORD *)v32 + 9), *((_DWORD *)v32 + 24));
        CDBSocket::Write(18, "ddb", *((_DWORD *)v32 + 9), *(_DWORD *)(this + 452), *((_DWORD *)v32 + 24));
      }
      else
      {
        CPlayer::Write(this, 91, "db", *((_DWORD *)v32 + 9), 0);
        if ( *((_DWORD *)v32 + 11) )
          v12 = *(_DWORD *)(*((_DWORD *)v32 + 11) + 32);
        else
          v12 = 0;
        v26 = (unsigned __int8)*((_DWORD *)v32 + 25) | ((unsigned __int8)*((_DWORD *)v32 + 21) << 8) | ((unsigned __int8)*((_DWORD *)v32 + 23) << 16) | (v12 << 24);
        v27 = ((unsigned __int8)*((_DWORD *)v32 + 28) << 8) | ((unsigned __int8)*((_DWORD *)v32 + 26) << 24);
        v28 = ((unsigned __int8)*((_DWORD *)v32 + 32) << 8) | ((unsigned __int8)*((_DWORD *)v32 + 31) << 16) | ((unsigned __int8)*((_DWORD *)v32 + 30) << 24);
        CDBSocket::Write(
          3,
          "ddwdbddd",
          *((_DWORD *)v32 + 9),
          *(_DWORD *)(this + 452),
          *(_DWORD *)(*((_DWORD *)v32 + 10) + 64),
          *((_DWORD *)v32 + 13),
          9,
          v26,
          v27,
          v28);
        CBase::Delete(v32);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      return;
    default:
LABEL_61:
      CDBSocket::Write(21, "dddbb", *((_DWORD *)v32 + 9), *(_DWORD *)(this + 452), 524032, 0, 39);
      CItem::SubState(v32, 524032);
      if ( a2 )
      {
        if ( sub_46EF70(v34) == 904 || sub_46EF70(v34) == 905 )
          v29 = v34;
        else
          v29 = v36;
        v14 = sub_46EF70(v29);
        if ( v14 == 904 )
        {
          if ( !CItem::IsState(v32, 0x100000) )
          {
            LOG_ERR("Enforce item  without ITEM_MIX_LEVEL2 PID(%d) ", *(_DWORD *)(this + 452));
            goto LABEL_139;
          }
          CItem::AddState(v32, 0x20000);
        }
        else if ( v14 == 905 )
        {
          if ( !CItem::IsState(v32, 0x100000) )
          {
            LOG_ERR("Enforce item  without ITEM_MIX_LEVEL2 PID(%d) ", *(_DWORD *)(this + 452));
            goto LABEL_139;
          }
          CItem::AddState(v32, 0x40000);
        }
      }
      else
      {
        switch ( *(_DWORD *)(*((_DWORD *)v34 + 10) + 64) )
        {
          case 0x37F:
            CItem::AddState(v32, 256);
            break;
          case 0x380:
            CItem::AddState(v32, 512);
            break;
          case 0x381:
            CItem::AddState(v32, 1024);
            break;
          case 0x382:
            CItem::AddState(v32, 2048);
            break;
          case 0x383:
            CItem::AddState(v32, 4096);
            break;
          case 0x384:
            CItem::AddState(v32, 0x2000);
            break;
          case 0x385:
            CItem::AddState(v32, 0x4000);
            break;
          case 0x386:
            CItem::AddState(v32, 0x8000);
            break;
          case 0x387:
            CItem::AddState(v32, 0x10000);
            break;
          default:
            break;
        }
      }
      if ( CItem::IsState(v32, 0x80000) || CItem::IsState(v32, 0x100000) )
      {
        if ( CItem::IsState(v32, 0x80000) )
        {
          CDBSocket::Write(21, "dddbb", *((_DWORD *)v32 + 9), *(_DWORD *)(this + 452), 0x80000, 0, 39);
          CItem::SubState(v32, 0x80000);
          CItem::AddState(v32, 0x100000);
        }
      }
      else
      {
        CItem::AddState(v32, 0x80000);
      }
      if ( *(_DWORD *)(*((_DWORD *)v33 + 10) + 64) == 906 )
      {
        switch ( *(_DWORD *)(*((_DWORD *)v32 + 10) + 80) )
        {
          case '(':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -1) )
              CPlayer::_OutofInven(v33);
            break;
          case '-':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -2) )
              CPlayer::_OutofInven(v33);
            break;
          case '0':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -4) )
              CPlayer::_OutofInven(v33);
            break;
          case '2':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -6) )
              CPlayer::_OutofInven(v33);
            break;
          case '5':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -6) )
              CPlayer::_OutofInven(v33);
            break;
          case '8':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -20) )
              CPlayer::_OutofInven(v33);
            break;
          case ';':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -20) )
              CPlayer::_OutofInven(v33);
            break;
          case '>':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -75) )
              CPlayer::_OutofInven(v33);
            break;
          case 'A':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v33 + 120))(v33, this, 9, -450) )
              CPlayer::_OutofInven(v33);
            break;
          default:
            break;
        }
      }
      else
      {
        sub_46F320((void *)this, v33);
      }
      sub_46F320((void *)this, v35);
      if ( !(*(int (__thiscall **)(_DWORD, int, int, int))(**(_DWORD **)(this + 1096) + 120))(
              *(_DWORD *)(this + 1096),
              this,
              9,
              -30000) )
        CPlayer::_OutofInven(*(CIOObject **)(this + 1096));
      sub_46F320((void *)this, v34);
      if ( a2 )
        sub_46F320((void *)this, v36);
      if ( *((_DWORD *)v32 + 11) )
        v13 = *(_DWORD *)(*((_DWORD *)v32 + 11) + 32);
      else
        v13 = 0;
      v30 = (unsigned __int8)*((_DWORD *)v32 + 25) | ((unsigned __int8)*((_DWORD *)v32 + 21) << 8) | ((unsigned __int8)*((_DWORD *)v32 + 23) << 16) | (v13 << 24);
      v31 = ((unsigned __int8)*((_DWORD *)v32 + 28) << 8) | ((unsigned __int8)*((_DWORD *)v32 + 26) << 24);
      CDBSocket::Write(
        21,
        "dddbwddb",
        *((_DWORD *)v32 + 9),
        *(_DWORD *)(this + 452),
        *((_DWORD *)v32 + 12),
        1,
        *(_DWORD *)(*((_DWORD *)v32 + 10) + 64),
        v30,
        v31,
        *((_DWORD *)v32 + 30));
      CItem::SendItemInfo(v32, this, 92);
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020));
      break;
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);

//----- (0046EF70) --------------------------------------------------------
int __thiscall sub_46EF70(_DWORD *this)
{
  return *(_DWORD *)(this[10] + 64);
}

//----- (0046EF90) --------------------------------------------------------
int __stdcall sub_46EF90(int a1, int a2, int a3)
{
  int result; // eax

  switch ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 80) )
  {
    case '(':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 40
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 1)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 42
        || !sub_46F2C0(a3) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case '-':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 45
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 5)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 42
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case '0':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 48
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 10)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 46
        || !sub_46F2C0(a3) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case '2':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 50
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 15)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 46
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case '5':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 50
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 20)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || !sub_46F2C0(a3) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case '8':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 53
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 25)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || !sub_46F2C0(a3) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case ';':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 53
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 30)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || !sub_46F2C0(a3) )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case '>':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 56
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 35)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    case 'A':
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 59
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(int *)(a2 + 52) < 40)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
      {
        goto LABEL_64;
      }
      result = 1;
      break;
    default:
LABEL_64:
      result = 0;
      break;
  }
  return result;
}

//----- (0046F2C0) --------------------------------------------------------
BOOL __stdcall sub_46F2C0(int a1)
{
  return *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 4
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 5
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 6
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 7
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 8;
}

//----- (0046F320) --------------------------------------------------------
void __thiscall sub_46F320(void *this, CIOObject *a2)
{
  if ( !(*(int (__thiscall **)(CIOObject *, void *, int, int))(*(_DWORD *)a2 + 120))(a2, this, 9, -1) )
    CPlayer::_OutofInven(a2);
}

//----- (0046F350) --------------------------------------------------------
void __userpurge sub_46F350(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5, int a6)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v9; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v10; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v11; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v12; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v14; // eax
  int v16; // [esp+0h] [ebp-78h]
  int v17; // [esp+4h] [ebp-74h]
  char v19[4]; // [esp+1Ch] [ebp-5Ch] BYREF
  char v20[4]; // [esp+20h] [ebp-58h] BYREF
  char v21[4]; // [esp+24h] [ebp-54h] BYREF
  char v22[4]; // [esp+28h] [ebp-50h] BYREF
  char v23[4]; // [esp+2Ch] [ebp-4Ch] BYREF
  char v24[4]; // [esp+30h] [ebp-48h] BYREF
  char v25[4]; // [esp+34h] [ebp-44h] BYREF
  char v26[4]; // [esp+38h] [ebp-40h] BYREF
  char v27[4]; // [esp+3Ch] [ebp-3Ch] BYREF
  char v28[4]; // [esp+40h] [ebp-38h] BYREF
  int v29; // [esp+44h] [ebp-34h]
  int v30; // [esp+48h] [ebp-30h]
  int v31; // [esp+4Ch] [ebp-2Ch]
  int v32; // [esp+50h] [ebp-28h]
  int v33; // [esp+54h] [ebp-24h]
  char *v34; // [esp+58h] [ebp-20h]
  int v35; // [esp+5Ch] [ebp-1Ch]
  char *v36; // [esp+60h] [ebp-18h]
  CIOObject *v37; // [esp+64h] [ebp-14h]
  CIOObject *v38; // [esp+68h] [ebp-10h]
  CIOObject *v39; // [esp+6Ch] [ebp-Ch]
  CIOObject *v40; // [esp+70h] [ebp-8h]
  int v41; // [esp+74h] [ebp-4h] BYREF

  std___String_base___String_base(&v41);
  CIOCriticalSection::Enter((CIOCriticalSection *)(this + 1020), ebx0, edi0, esi0);
  if ( !*(_DWORD *)(this + 1096) || *(int *)(*(_DWORD *)(this + 1096) + 52) < 70000 )
  {
    LOG_ERR("MixItem() PID(%d) Not Enough Money ", *(_DWORD *)(this + 452));
LABEL_170:
    CPlayer::Write(this, 68, "bb", 138, 0);
    CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, esi0);
    return;
  }
  if ( a5 == a6 )
    goto LABEL_170;
  v41 = *sub_44AE20(
           (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1068),
           v28,
           &a2);
  v9 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 1068), v27);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v41,
          v9) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIndex(%d) ", *(_DWORD *)(this + 452), a2);
    goto LABEL_170;
  }
  v36 = *(char **)(sub_420250(&v41) + 4);
  if ( *(int *)(*((_DWORD *)v36 + 10) + 64) >= 769 && *(int *)(*((_DWORD *)v36 + 10) + 64) <= 801 )
    goto LABEL_170;
  v41 = *sub_44AE20(
           (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1068),
           v26,
           &a3);
  v10 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 1068), v25);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v41,
          v10) )
  {
LABEL_34:
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a3);
    goto LABEL_170;
  }
  v37 = *(CIOObject **)(sub_420250(&v41) + 4);
  if ( *(_DWORD *)(*((_DWORD *)v37 + 10) + 64) == 906 )
  {
    switch ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 80) )
    {
      case '(':
        if ( *((int *)v37 + 13) < 1 )
          goto LABEL_34;
        break;
      case '-':
        if ( *((int *)v37 + 13) >= 2 )
          break;
        goto LABEL_34;
      case '0':
        if ( *((int *)v37 + 13) >= 4 )
          break;
        goto LABEL_34;
      case '2':
        if ( *((int *)v37 + 13) < 6 )
          goto LABEL_34;
        break;
      case '5':
        if ( *((int *)v37 + 13) >= 6 )
          break;
        goto LABEL_34;
      case '8':
        if ( *((int *)v37 + 13) < 20 )
          goto LABEL_34;
        break;
      case ';':
        if ( *((int *)v37 + 13) >= 20 )
          break;
        goto LABEL_34;
      case '>':
        if ( *((int *)v37 + 13) < 75 )
          goto LABEL_34;
        break;
      case 'A':
        if ( *((int *)v37 + 13) < 450 )
          goto LABEL_34;
        break;
      default:
        break;
    }
  }
  v41 = *sub_44AE20(
           (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1068),
           v24,
           &a4);
  v11 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 1068), v23);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v41,
          v11) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a4);
    goto LABEL_170;
  }
  v39 = *(CIOObject **)(sub_420250(&v41) + 4);
  v41 = *sub_44AE20(
           (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1068),
           v22,
           &a5);
  v12 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 1068), v21);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v41,
          v12) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a5);
    goto LABEL_170;
  }
  v38 = *(CIOObject **)(sub_420250(&v41) + 4);
  v41 = *sub_44AE20(
           (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(this + 1068),
           v20,
           &a6);
  v14 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 1068), v19);
  if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
          (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v41,
          v14) )
  {
    LOG_ERR("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(this + 452), a6);
    goto LABEL_170;
  }
  v40 = *(CIOObject **)(sub_420250(&v41) + 4);
  if ( !sub_46EF90((int)v36, (int)v37, (int)v39) )
    goto LABEL_170;
  switch ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 80) )
  {
    case '(':
    case '-':
      if ( RandomBetween(0, 99) > 10 )
        goto LABEL_161;
      goto LABEL_57;
    case '0':
    case '2':
      if ( RandomBetween(0, 99) <= 7 )
        goto LABEL_57;
      goto LABEL_161;
    case '5':
      if ( RandomBetween(0, 99) <= 5 )
        goto LABEL_57;
      goto LABEL_161;
    case '8':
      if ( RandomBetween(0, 99) <= 4 )
        goto LABEL_57;
      goto LABEL_161;
    case ';':
    case '>':
    case 'A':
      if ( RandomBetween(0, 99) <= 3 )
        goto LABEL_57;
LABEL_161:
      if ( !(*(int (__thiscall **)(_DWORD, int, int, int))(**(_DWORD **)(this + 1096) + 120))(
              *(_DWORD *)(this + 1096),
              this,
              9,
              -70000) )
        CPlayer::_OutofInven(*(CIOObject **)(this + 1096));
      sub_46F320((void *)this, v38);
      sub_46F320((void *)this, v40);
      *((_DWORD *)v36 + 24) -= RandomBetween(5, 10);
      if ( *((int *)v36 + 24) > 0 )
      {
        CPlayer::Write(this, 91, "db", *((_DWORD *)v36 + 9), *((_DWORD *)v36 + 24));
        CDBSocket::Write(18, "ddb", *((_DWORD *)v36 + 9), *(_DWORD *)(this + 452), *((_DWORD *)v36 + 24));
      }
      else
      {
        CPlayer::Write(this, 91, "db", *((_DWORD *)v36 + 9), 0);
        if ( *((_DWORD *)v36 + 11) )
          v16 = *(_DWORD *)(*((_DWORD *)v36 + 11) + 32);
        else
          v16 = 0;
        v29 = (unsigned __int8)*((_DWORD *)v36 + 25) | ((unsigned __int8)*((_DWORD *)v36 + 21) << 8) | ((unsigned __int8)*((_DWORD *)v36 + 23) << 16) | (v16 << 24);
        v30 = ((unsigned __int8)*((_DWORD *)v36 + 28) << 8) | ((unsigned __int8)*((_DWORD *)v36 + 26) << 24);
        v31 = ((unsigned __int8)*((_DWORD *)v36 + 32) << 8) | ((unsigned __int8)*((_DWORD *)v36 + 31) << 16) | ((unsigned __int8)*((_DWORD *)v36 + 30) << 24);
        CDBSocket::Write(
          3,
          "ddwdbddd",
          *((_DWORD *)v36 + 9),
          *(_DWORD *)(this + 452),
          *(_DWORD *)(*((_DWORD *)v36 + 10) + 64),
          *((_DWORD *)v36 + 13),
          9,
          v29,
          v30,
          v31);
        CBase::Delete(v36);
      }
      CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, esi0);
      CPlayer::Write(this, 68, "bb", 138, 1);
      break;
    default:
LABEL_57:
      if ( *(_DWORD *)(*((_DWORD *)v37 + 10) + 64) == 906 )
      {
        switch ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 80) )
        {
          case '(':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -1) )
              CPlayer::_OutofInven(v37);
            break;
          case '-':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -2) )
              CPlayer::_OutofInven(v37);
            break;
          case '0':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -4) )
              CPlayer::_OutofInven(v37);
            break;
          case '2':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -6) )
              CPlayer::_OutofInven(v37);
            break;
          case '5':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -6) )
              CPlayer::_OutofInven(v37);
            break;
          case '8':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -20) )
              CPlayer::_OutofInven(v37);
            break;
          case ';':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -20) )
              CPlayer::_OutofInven(v37);
            break;
          case '>':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -75) )
              CPlayer::_OutofInven(v37);
            break;
          case 'A':
            if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v37 + 120))(v37, this, 9, -450) )
              CPlayer::_OutofInven(v37);
            break;
          default:
            break;
        }
      }
      else
      {
        sub_46F320((void *)this, v37);
      }
      sub_46F320((void *)this, v39);
      sub_46F320((void *)this, v38);
      sub_46F320((void *)this, v40);
      if ( !(*(int (__thiscall **)(_DWORD, int, int, int))(**(_DWORD **)(this + 1096) + 120))(
              *(_DWORD *)(this + 1096),
              this,
              9,
              -70000) )
        CPlayer::_OutofInven(*(CIOObject **)(this + 1096));
      v34 = 0;
      v35 = 0;
      switch ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 80) )
      {
        case '(':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 771;
            else
              v35 = 770;
          }
          else
          {
            v35 = 769;
          }
          break;
        case '-':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 774;
            else
              v35 = 773;
          }
          else
          {
            v35 = 772;
          }
          break;
        case '0':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 777;
            else
              v35 = 776;
          }
          else
          {
            v35 = 775;
          }
          break;
        case '2':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 781;
            else
              v35 = 780;
          }
          else
          {
            v35 = (*(_DWORD *)(*((_DWORD *)v36 + 10) + 72) != 0) + 778;
          }
          break;
        case '5':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 785;
            else
              v35 = 784;
          }
          else
          {
            v35 = (*(_DWORD *)(*((_DWORD *)v36 + 10) + 72) != 0) + 782;
          }
          break;
        case '8':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 789;
            else
              v35 = 788;
          }
          else
          {
            v35 = (*(_DWORD *)(*((_DWORD *)v36 + 10) + 72) != 0) + 786;
          }
          break;
        case ';':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 793;
            else
              v35 = 792;
          }
          else
          {
            v35 = (*(_DWORD *)(*((_DWORD *)v36 + 10) + 72) != 0) + 790;
          }
          break;
        case '>':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 774;
            else
              v35 = 773;
          }
          else
          {
            v35 = (*(_DWORD *)(*((_DWORD *)v36 + 10) + 72) != 0) + 794;
          }
          break;
        case 'A':
          if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) )
          {
            if ( *(_DWORD *)(*((_DWORD *)v36 + 10) + 96) == 1 )
              v35 = 801;
            else
              v35 = 800;
          }
          else
          {
            v35 = (*(_DWORD *)(*((_DWORD *)v36 + 10) + 72) != 0) + 798;
          }
          break;
        default:
          break;
      }
      v34 = (char *)CItem::CreateItem(v35, 0, 1, -1);
      if ( v34 )
      {
        if ( *((_DWORD *)v34 + 11) != *((_DWORD *)v36 + 11) )
        {
          *((_DWORD *)v34 + 11) = *((_DWORD *)v36 + 11);
          CDBSocket::Write(19, "ddbb", *((_DWORD *)v34 + 9), *(_DWORD *)(this + 452), *((_DWORD *)v34 + 11), 0);
        }
        if ( *((_DWORD *)v34 + 31) != *((_DWORD *)v36 + 31) )
        {
          *((_DWORD *)v34 + 31) = *((_DWORD *)v36 + 31);
          CDBSocket::Write(28, "ddbb", *((_DWORD *)v34 + 9), *(_DWORD *)(this + 452), 2, *((_DWORD *)v34 + 31));
        }
        if ( *((_DWORD *)v34 + 32) != *((_DWORD *)v36 + 32) )
        {
          *((_DWORD *)v34 + 32) = *((_DWORD *)v36 + 32);
          CDBSocket::Write(28, "ddbb", *((_DWORD *)v34 + 9), *(_DWORD *)(this + 452), 1, *((_DWORD *)v34 + 32));
        }
        if ( *((_DWORD *)v34 + 25) != *((_DWORD *)v36 + 25) )
        {
          *((_DWORD *)v34 + 25) = *((_DWORD *)v36 + 25);
          CDBSocket::Write(17, "ddbbb", *((_DWORD *)v34 + 9), *(_DWORD *)(this + 452), 27, *((_DWORD *)v34 + 25), 0);
        }
        if ( *((_DWORD *)v34 + 27) != *((_DWORD *)v36 + 27) )
        {
          *((_DWORD *)v34 + 27) = *((_DWORD *)v36 + 27);
          CDBSocket::Write(17, "ddbbb", *((_DWORD *)v34 + 9), *(_DWORD *)(this + 452), 15, *((_DWORD *)v34 + 27), 0);
        }
        if ( *((_DWORD *)v34 + 28) != *((_DWORD *)v36 + 28) )
        {
          *((_DWORD *)v34 + 28) = *((_DWORD *)v36 + 28);
          CDBSocket::Write(17, "ddbbb", *((_DWORD *)v34 + 9), *(_DWORD *)(this + 452), 9, *((_DWORD *)v34 + 28), 0);
        }
        if ( *((_DWORD *)v34 + 26) != *((_DWORD *)v36 + 26) )
        {
          *((_DWORD *)v34 + 26) = *((_DWORD *)v36 + 26);
          CDBSocket::Write(17, "ddbbb", *((_DWORD *)v34 + 9), *(_DWORD *)(this + 452), 28, *((_DWORD *)v34 + 26), 0);
        }
        if ( *((_DWORD *)v34 + 12) != *((_DWORD *)v36 + 12) )
          *((_DWORD *)v34 + 12) = *((_DWORD *)v36 + 12);
        if ( CPlayer::_InsertItem((_DWORD *)this, 2, (CIOObject *)v34) == 1 )
        {
          if ( *((_DWORD *)v34 + 12) != *((_DWORD *)v36 + 12) )
          {
            if ( *((_DWORD *)v34 + 11) )
              v17 = *(_DWORD *)(*((_DWORD *)v34 + 11) + 32);
            else
              v17 = 0;
            v32 = (unsigned __int8)*((_DWORD *)v34 + 25) | ((unsigned __int8)*((_DWORD *)v34 + 21) << 8) | ((unsigned __int8)*((_DWORD *)v34 + 23) << 16) | (v17 << 24);
            v33 = ((unsigned __int8)*((_DWORD *)v34 + 28) << 8) | ((unsigned __int8)*((_DWORD *)v34 + 26) << 24);
            CDBSocket::Write(
              21,
              "dddbwddb",
              *((_DWORD *)v34 + 9),
              *(_DWORD *)(this + 452),
              *((_DWORD *)v34 + 12),
              1,
              *(_DWORD *)(*((_DWORD *)v34 + 10) + 64),
              v32,
              v33,
              *((_DWORD *)v34 + 30));
          }
          sub_46F320((void *)this, (CIOObject *)v36);
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, esi0);
        }
        else
        {
          LOG_ERR(
            "MixItem() item insert error [PID (%d)] [Index (%d)]",
            *(_DWORD *)(this + 452),
            *(_DWORD *)(*((_DWORD *)v34 + 10) + 64));
          CBase::Delete(v34);
          CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, esi0);
        }
      }
      else
      {
        CIOCriticalSection::Leave((CIOCriticalSection *)(this + 1020), ebx0, edi0, esi0);
        LOG_ERR("MixItem() insert item Null error [PID (%d)] ", *(_DWORD *)(this + 452));
      }
      break;
  }
}

//----- (004703E0) --------------------------------------------------------
int __thiscall sub_4703E0(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    (int *)a1);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_4729B0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00470440) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_470440(int this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, int a3)
{
  const char **v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  const char **v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  const char *v10; // [esp-4h] [ebp-3Ch]
  const char *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0((int *)this);
  v22 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110((int)v21) )
  {
    v22 = v21;
    v10 = *(const char **)sub_473500((int)v21);
    v3 = (const char **)unknown_libname_25(a3);
    v23 = StrCmp::operator()((StrCmp *)this, *v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270(this, (int)v17, 1, v22, (std::pair<char const * const,CItem *> *)a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880((int *)v20);
  }
  v11 = *(const char **)unknown_libname_25(a3);
  v7 = unknown_libname_15(v20);
  v8 = (const char **)sub_473500(v7);
  if ( StrCmp::operator()((StrCmp *)this, *v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270(this, (int)v15, v23, v22, (std::pair<char const * const,CItem *> *)a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00470600) --------------------------------------------------------
int __thiscall sub_470600(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472B50(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    (const char **)a1);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_472A80(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00470660) --------------------------------------------------------
_DWORD *__thiscall sub_470660(StrCmp *this, _DWORD *a2, const char **a3)
{
  void *v3; // eax
  int v4; // eax
  const char **v5; // eax
  _DWORD *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  _DWORD *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_472B20((int *)this, v12, a3);
  v3 = sub_430C20((int *)this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (const char **)sub_473500(v4), StrCmp::operator()(this, *a3, *v5)) )
  {
    v7 = sub_430C20((int *)this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (004706F0) --------------------------------------------------------
void *__thiscall sub_4706F0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00470720) --------------------------------------------------------
int __thiscall sub_470720(int *this)
{
  return sub_472C70(this);
}

//----- (00470740) --------------------------------------------------------
int __thiscall sub_470740(int *this, int *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_472B90(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (004707A0) --------------------------------------------------------
std::vector<IPAddrMask> *__thiscall sub_4707A0(std::vector<IPAddrMask> *this)
{
  std::vector<IPAddrMask> *v2; // [esp-4h] [ebp-Ch] BYREF
  std::vector<IPAddrMask> *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  std::vector<IPAddrMask>::_Buy(v3, 0);
  return v3;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004707D0) --------------------------------------------------------
IPAddrMask *__thiscall sub_4707D0(int this, IPAddrMask *_Val)
{
  unsigned int v2; // esi
  IPAddrMask *result; // eax
  IPAddrMask **v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
  if ( v2 >= std::vector<IPAddrMask>::capacity((std::vector<IPAddrMask> *)this) )
  {
    v4 = (IPAddrMask **)sub_445B40((_DWORD *)this, (int)v7);
    result = (IPAddrMask *)sub_472DA0((int *)this, v6, *v4, (int *)_Val);
  }
  else
  {
    result = std::vector<IPAddrMask>::_Ufill((std::vector<IPAddrMask> *)this, *(IPAddrMask **)(this + 8), 1u, _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (00470840) --------------------------------------------------------
void *__thiscall sub_470840(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_472ED0(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00470870) --------------------------------------------------------
int __thiscall sub_470870(int *this)
{
  return sub_473430(this);
}

//----- (00470890) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_470890(int this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, int a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  char v20[4]; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0((int *)this);
  v22 = *(_DWORD *)(this + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_433230(v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500(v21);
    v3 = (_DWORD *)unknown_libname_25(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)unknown_libname_25(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_472FF0((int *)this, v17, 1, v22, (const void *)a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_475900((int *)v20);
  }
  v11 = (_DWORD *)unknown_libname_25(a3);
  v7 = unknown_libname_15(v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_472FF0((int *)this, v15, v23, v22, (const void *)a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00470A40) --------------------------------------------------------
int __thiscall sub_470A40(int *this, int a1)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472FB0(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    (_DWORD *)a1);
  v7 = 0;
  sub_47A310(v5, v6, &v7);
  sub_472F10(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00470AA0) --------------------------------------------------------
void *__thiscall sub_470AA0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_473520(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00470AD0) --------------------------------------------------------
int __thiscall sub_470AD0(void *this)
{
  return sub_473E10((int *)this);
}

//----- (00470AF0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_470AF0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, const void *a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = this[1];
  v23 = 1;
  while ( !*(_BYTE *)sub_4734F0(v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500(v21);
    v3 = (_DWORD *)unknown_libname_25(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)unknown_libname_25(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4736F0(this, v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_4758E0(&v20);
  }
  v11 = (_DWORD *)unknown_libname_25(a3);
  v7 = unknown_libname_15(&v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4736F0(this, v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00470CA0) --------------------------------------------------------
_DWORD *__thiscall sub_470CA0(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  void **v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_4734F0(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  v56 = (void *)unknown_libname_15(&a3);
  sub_4758C0(&a3);
  v54 = v56;
  v5 = (int *)unknown_libname_25(v56);
  if ( *(_BYTE *)sub_4734F0(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_4734F0(*v6) )
    {
      v55 = *(void **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (void *)unknown_libname_15(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_4734F0((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)unknown_libname_25(v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)unknown_libname_25(v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_4734F0((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_473CA0((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)CServer::SendAlive(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_4734F0((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_473C60((int)v55);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(v56);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_4734F0((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)unknown_libname_25(v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0((int)v56);
      v26 = (void **)unknown_libname_25(*v25);
      if ( *v26 == v56 )
      {
        v27 = (_DWORD *)sub_446FF0((int)v56);
        v28 = (_DWORD *)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_4734E0((int)v56);
    v31 = (char *)sub_4734E0((int)v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)sub_4734E0((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_4734E0((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_4734E0((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)unknown_libname_25(v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)unknown_libname_25(v53);
      if ( !*(_BYTE *)sub_4734E0((int)v54) )
      {
        *(_BYTE *)sub_4734E0((int)v54) = 1;
        *(_BYTE *)sub_4734E0((int)v53) = 0;
        sub_473CE0(this, (int)v53);
        v54 = *(void **)unknown_libname_25(v53);
      }
      if ( !*(_BYTE *)sub_4734F0((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_4734E0(*v40) != 1 || (v41 = (int *)unknown_libname_25(v54), *(_BYTE *)sub_4734E0(*v41) != 1) )
        {
          v42 = (int *)unknown_libname_25(v54);
          if ( *(_BYTE *)sub_4734E0(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_4734E0(*v43) = 1;
            *(_BYTE *)sub_4734E0((int)v54) = 0;
            sub_473B30(this, (int)v54);
            v54 = *(void **)unknown_libname_25(v53);
          }
          v44 = (_BYTE *)sub_4734E0((int)v53);
          *(_BYTE *)sub_4734E0((int)v54) = *v44;
          *(_BYTE *)sub_4734E0((int)v53) = 1;
          v45 = (int *)unknown_libname_25(v54);
          *(_BYTE *)sub_4734E0(*v45) = 1;
          sub_473CE0(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_4734E0((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_4734E0((int)v54) )
    {
      *(_BYTE *)sub_4734E0((int)v54) = 1;
      *(_BYTE *)sub_4734E0((int)v53) = 0;
      sub_473B30(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_4734F0((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)unknown_libname_25(v54);
    if ( *(_BYTE *)sub_4734E0(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_4734E0(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_4734E0(*v36) == 1 )
      {
        v37 = (int *)unknown_libname_25(v54);
        *(_BYTE *)sub_4734E0(*v37) = 1;
        *(_BYTE *)sub_4734E0((int)v54) = 0;
        sub_473CE0(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_4734E0((int)v53);
      *(_BYTE *)sub_4734E0((int)v54) = *v38;
      *(_BYTE *)sub_4734E0((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_4734E0(*v39) = 1;
      sub_473B30(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70(v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00471430) --------------------------------------------------------
int __thiscall sub_471430(int *this, _DWORD *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_473630(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  sub_47A2B0(v5, v6, &v7);
  sub_473560(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00471490) --------------------------------------------------------
_DWORD *__thiscall sub_471490(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_473670(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (004714F0) --------------------------------------------------------
_DWORD *__thiscall sub_4714F0(int *this, _DWORD *a2, _DWORD *a3)
{
  void *v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_473600(this, v12, a3);
  v3 = sub_430C20(this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00471580) --------------------------------------------------------
void *__thiscall sub_471580(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_473ED0(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004715B0) --------------------------------------------------------
int __thiscall sub_4715B0(int *this)
{
  return sub_4744E0(this);
}

//----- (004715D0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_4715D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, _DWORD *a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = this[1];
  v23 = 1;
  while ( !*(_BYTE *)sub_473EC0(v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500(v21);
    v3 = (_DWORD *)unknown_libname_25(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)unknown_libname_25(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4740A0(this, v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_4758A0(&v20);
  }
  v11 = (_DWORD *)unknown_libname_25(a3);
  v7 = unknown_libname_15(&v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4740A0(this, v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00471780) --------------------------------------------------------
int __thiscall sub_471780(int *this, _DWORD *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_473FE0(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  sub_47A2E0(v5, v6, &v7);
  sub_473F10(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (004717E0) --------------------------------------------------------
_DWORD *__thiscall sub_4717E0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_474020(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00471840) --------------------------------------------------------
_DWORD *__thiscall sub_471840(int *this, _DWORD *a2, _DWORD *a3)
{
  void *v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_473FB0(this, v12, a3);
  v3 = sub_430C20(this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (004718D0) --------------------------------------------------------
void *__thiscall sub_4718D0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_472ED0(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00471900) --------------------------------------------------------
int __thiscall sub_471900(int *this)
{
  return sub_474640(this);
}

//----- (00471920) --------------------------------------------------------
int __thiscall sub_471920(int *this, _DWORD *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472FB0(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  sub_47A310(v5, v6, &v7);
  sub_4745A0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00471980) --------------------------------------------------------
void *__thiscall sub_471980(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_474700(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (004719B0) --------------------------------------------------------
int __thiscall sub_4719B0(int *this)
{
  return sub_474D10(this);
}

//----- (004719D0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_4719D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, const void *a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = this[1];
  v23 = 1;
  while ( !*(_BYTE *)sub_4746F0(v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500(v21);
    v3 = (_DWORD *)unknown_libname_25(a3);
    v23 = sub_4186F0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)unknown_libname_25(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4748D0(this, v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_475920(&v20);
  }
  v11 = (_DWORD *)unknown_libname_25(a3);
  v7 = unknown_libname_15(&v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_4186F0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_4748D0(this, v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00471B80) --------------------------------------------------------
int __thiscall sub_471B80(int *this, _DWORD *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_474810(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  sub_47A340(v5, v6, &v7);
  sub_474740(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (00471BE0) --------------------------------------------------------
_DWORD *__thiscall sub_471BE0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_474850(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00471C40) --------------------------------------------------------
_DWORD *__thiscall sub_471C40(int *this, _DWORD *a2, _DWORD *a3)
{
  void *v3; // eax
  int v4; // eax
  _DWORD *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_4747E0(this, v12, a3);
  v3 = sub_430C20(this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (_DWORD *)sub_473500(v4), sub_4186F0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00471CD0) --------------------------------------------------------
void *__thiscall sub_471CD0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_474DE0(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00471D00) --------------------------------------------------------
int __thiscall sub_471D00(int *this)
{
  return sub_475650(this);
}

//----- (00471D20) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_471D20(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::string *a3)
{
  void *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  void *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  void *v10; // [esp-4h] [ebp-3Ch]
  void *v11; // [esp-4h] [ebp-3Ch]
  int v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-Ch]
  int v22; // [esp+30h] [ebp-8h]
  bool v23; // [esp+37h] [ebp-1h]

  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = this[1];
  v23 = 1;
  while ( !*(_BYTE *)sub_474DD0(v21) )
  {
    v22 = v21;
    v10 = (void *)sub_473500(v21);
    v3 = (void *)unknown_libname_25(a3);
    v23 = sub_471ED0(v3, v10);
    if ( v23 )
      v12 = *(_DWORD *)unknown_libname_25(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_474F30(this, v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_4759A0(&v20);
  }
  v11 = (void *)unknown_libname_25(a3);
  v7 = unknown_libname_15(&v20);
  v8 = (void *)sub_473500(v7);
  if ( sub_471ED0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_474F30(this, v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00471ED0) --------------------------------------------------------
bool __stdcall sub_471ED0(void *a1, void *a2)
{
  const char *v2; // eax
  const char *v4; // [esp-4h] [ebp-8h]

  v4 = (const char *)sub_4012D0(a2);
  v2 = (const char *)sub_4012D0(a1);
  return mbstricmp(v2, v4) < 0;
}

//----- (00471F00) --------------------------------------------------------
_DWORD *__thiscall sub_471F00(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  void **v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_474DD0(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  v56 = (void *)unknown_libname_15(&a3);
  sub_475980(&a3);
  v54 = v56;
  v5 = (int *)unknown_libname_25(v56);
  if ( *(_BYTE *)sub_474DD0(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_474DD0(*v6) )
    {
      v55 = *(void **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (void *)unknown_libname_15(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_474DD0((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)unknown_libname_25(v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)unknown_libname_25(v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_474DD0((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_4754E0((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)CServer::SendAlive(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_474DD0((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_4754A0((int)v55);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(v56);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_474DD0((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)unknown_libname_25(v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0((int)v56);
      v26 = (void **)unknown_libname_25(*v25);
      if ( *v26 == v56 )
      {
        v27 = (_DWORD *)sub_446FF0((int)v56);
        v28 = (_DWORD *)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_474DC0((int)v56);
    v31 = (char *)sub_474DC0((int)v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)sub_474DC0((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_474DC0((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_474DC0((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)unknown_libname_25(v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)unknown_libname_25(v53);
      if ( !*(_BYTE *)sub_474DC0((int)v54) )
      {
        *(_BYTE *)sub_474DC0((int)v54) = 1;
        *(_BYTE *)sub_474DC0((int)v53) = 0;
        sub_475520(this, (int)v53);
        v54 = *(void **)unknown_libname_25(v53);
      }
      if ( !*(_BYTE *)sub_474DD0((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_474DC0(*v40) != 1 || (v41 = (int *)unknown_libname_25(v54), *(_BYTE *)sub_474DC0(*v41) != 1) )
        {
          v42 = (int *)unknown_libname_25(v54);
          if ( *(_BYTE *)sub_474DC0(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_474DC0(*v43) = 1;
            *(_BYTE *)sub_474DC0((int)v54) = 0;
            sub_475370(this, (int)v54);
            v54 = *(void **)unknown_libname_25(v53);
          }
          v44 = (_BYTE *)sub_474DC0((int)v53);
          *(_BYTE *)sub_474DC0((int)v54) = *v44;
          *(_BYTE *)sub_474DC0((int)v53) = 1;
          v45 = (int *)unknown_libname_25(v54);
          *(_BYTE *)sub_474DC0(*v45) = 1;
          sub_475520(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_474DC0((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_474DC0((int)v54) )
    {
      *(_BYTE *)sub_474DC0((int)v54) = 1;
      *(_BYTE *)sub_474DC0((int)v53) = 0;
      sub_475370(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_474DD0((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)unknown_libname_25(v54);
    if ( *(_BYTE *)sub_474DC0(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_474DC0(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_474DC0(*v36) == 1 )
      {
        v37 = (int *)unknown_libname_25(v54);
        *(_BYTE *)sub_474DC0(*v37) = 1;
        *(_BYTE *)sub_474DC0((int)v54) = 0;
        sub_475520(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_474DC0((int)v53);
      *(_BYTE *)sub_474DC0((int)v54) = *v38;
      *(_BYTE *)sub_474DC0((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_474DC0(*v39) = 1;
      sub_475370(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_475700(v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00472690) --------------------------------------------------------
int __thiscall sub_472690(int *this, void *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_474EF0(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  sub_47A370(v5, v6, &v7);
  sub_474E20(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (004726F0) --------------------------------------------------------
_DWORD *__thiscall sub_4726F0(int *this, _DWORD *a2, void *a3)
{
  void *v3; // eax
  int v4; // eax
  void *v5; // eax
  char *v7; // [esp+0h] [ebp-18h]
  char v9[4]; // [esp+8h] [ebp-10h] BYREF
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  char *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  sub_474EC0(this, v12, a3);
  v3 = sub_430C20(this, v10);
  if ( (unsigned __int8)unknown_libname_16(v3)
    || (v4 = unknown_libname_15(v12), v5 = (void *)sub_473500(v4), sub_471ED0(a3, v5)) )
  {
    v7 = (char *)sub_430C20(this, v9);
  }
  else
  {
    v7 = v12;
  }
  v11 = v7;
  *a2 = *(_DWORD *)v7;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00472780) --------------------------------------------------------
bool __thiscall sub_472780(_DWORD *this)
{
  return this[2] == 0;
}

//----- (004727A0) --------------------------------------------------------
CMemory ***__thiscall sub_4727A0(int *this, const void *a2)
{
  _DWORD *v2; // eax
  char v5[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = sub_430C20(this, v5);
  return sub_475720(this, *v2, a2);
}

//----- (004727D0) --------------------------------------------------------
_DWORD *__thiscall sub_4727D0(int *this)
{
  int *v1; // eax
  int *v2; // eax
  int v5; // [esp+4h] [ebp-8h] BYREF
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v1 = (int *)sub_430C20(this, v6);
  v2 = sub_475940(v1);
  return std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::erase(
           (int)this,
           &v5,
           *v2);
}

//----- (00472800) --------------------------------------------------------
int *__thiscall sub_472800(_DWORD *this, int *a2, char a3, const void *a4)
{
  sub_475720(this, a3, a4);
  *a2 = *sub_475940((int *)&a3);
  return a2;
}

//----- (00472830) --------------------------------------------------------
_DWORD *__thiscall sub_472830(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x1Au);
  return this;
}

//----- (00472860) --------------------------------------------------------
_DWORD *__thiscall sub_472860(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  int v3; // edx

  *this = *a2;
  v3 = a3[1];
  this[1] = *a3;
  this[2] = v3;
  return this;
}

//----- (00472890) --------------------------------------------------------
int *__thiscall sub_472890(int *this, int *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_4758C0(this);
  *a2 = v4;
  return a2;
}

//----- (004728C0) --------------------------------------------------------
_DWORD *__thiscall sub_4728C0(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x1Eu);
  return this;
}

//----- (004728F0) --------------------------------------------------------
_DWORD *__thiscall sub_4728F0(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x1Cu);
  return this;
}

//----- (00472920) --------------------------------------------------------
_DWORD *__thiscall sub_472920(_DWORD *this, _DWORD *a2, const void *a3)
{
  *this = *a2;
  qmemcpy(this + 1, a3, 0x60u);
  return this;
}

//----- (00472950) --------------------------------------------------------
int __thiscall sub_472950(int this, std::string *_Right, _DWORD *a3)
{
  std::string::string((std::string *)this, _Right);
  *(_DWORD *)(this + 28) = *a3;
  *(_DWORD *)(this + 32) = a3[1];
  *(_DWORD *)(this + 36) = a3[2];
  *(_DWORD *)(this + 40) = a3[3];
  return this;
}

//----- (00472990) --------------------------------------------------------
int *__thiscall sub_472990(int *this)
{
  return std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_Tidy(this);
}

//----- (004729B0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4729B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_4759C0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00472A50) --------------------------------------------------------
void *__thiscall sub_472A50(std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *this, void *a2, int *_Keyval)
{
  std::_Tree_nod<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::_Node *v3; // eax

  v3 = std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::_Lbound(
         this,
         _Keyval);
  sub_446700(a2, (int)v3);
  return a2;
}

//----- (00472A80) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472A80(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_475A20((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00472B20) --------------------------------------------------------
void *__thiscall sub_472B20(int *this, void *a2, const char **a3)
{
  int v3; // eax

  v3 = sub_475AB0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00472B50) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_472B50(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, const char **a3)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_475A80(this, v8, a3);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_472B20(this, v7, a3);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00472B90) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472B90(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_475B40((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00472C30) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_472C30(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, int *a3)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_47EB10(this, v8, a3);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_472A50((std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)this, v7, a3);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00472C70) --------------------------------------------------------
int __thiscall sub_472C70(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_472B90(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00472D20) --------------------------------------------------------
int __thiscall std::vector<IPAddrMask>::capacity(std::vector<IPAddrMask> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (00472D60) --------------------------------------------------------
int __thiscall std::vector<IPAddrMask>::size(std::vector<IPAddrMask> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 2) - *((_DWORD *)this + 1)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (00472DA0) --------------------------------------------------------
_DWORD *__thiscall sub_472DA0(int *this, _DWORD *a2, IPAddrMask *a3, int *a4)
{
  _DWORD *v4; // eax
  int v6; // [esp-4h] [ebp-18h]
  int v7; // [esp+0h] [ebp-14h]
  char v9[4]; // [esp+8h] [ebp-Ch] BYREF
  char v10[4]; // [esp+Ch] [ebp-8h] BYREF
  int v11; // [esp+10h] [ebp-4h]

  if ( std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
  {
    v4 = sub_430C20(this, v10);
    v7 = sub_4470B0((int *)&a3, v4);
  }
  else
  {
    v7 = 0;
  }
  v11 = v7;
  sub_475BA0((int)this, a3, 1u, a4);
  v6 = v11;
  sub_430C20(this, v9);
  sub_478710(a2, v6);
  return a2;
}

//----- (00472E20) --------------------------------------------------------
char __thiscall std::vector<IPAddrMask>::_Buy(std::vector<IPAddrMask> *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_446B60(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_446E50(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 8 * _Capacity;
  }
  else
  {
    sub_446B00();
  }
  return 1;
}

//----- (00472EA0) --------------------------------------------------------
IPAddrMask *__thiscall std::vector<IPAddrMask>::_Ufill(std::vector<IPAddrMask> *this, IPAddrMask *_Ptr, unsigned int _Count, const IPAddrMask *_Val)
{
  sub_431DF0(_Ptr, _Count, (int)_Val);
  return (IPAddrMask *)((char *)_Ptr + 8 * _Count);
}

//----- (00472ED0) --------------------------------------------------------
void *__thiscall sub_472ED0(void *this, _BYTE *a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(a3);
  std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  sub_4776F0((int *)this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00472F10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_472F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_476600((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_434510(&a3, &v10, 0);
      sub_475E70((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00472FB0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_472FB0(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_4776C0(this, v8, a3);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_433240(this, v7, a3);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00472FF0) --------------------------------------------------------
void *__thiscall sub_472FF0(int *this, void *a2, char a3, int a4, const void *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  _DWORD *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  CMemory **v44; // [esp+48h] [ebp-8h]
  CMemory **v45; // [esp+4Ch] [ebp-4h]
  int v46; // [esp+60h] [ebp+10h]

  if ( sub_477640() - 1 <= (unsigned int)this[2] )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_476820(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v45;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v45;
    v8 = (CMemory ***)CServer::SendAlive(this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)unknown_libname_25(a4);
    *v9 = v45;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v45;
    if ( a4 == *(_DWORD *)CServer::SendAlive(this) )
    {
      v12 = (CMemory ***)CServer::SendAlive(this);
      *v12 = v45;
    }
  }
  v44 = v45;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v44);
    if ( *(_BYTE *)sub_433730(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v44);
    v15 = (int *)sub_446FF0((int)v44);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v44);
      v18 = (int *)sub_446FF0(*v17);
      v46 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_433730(v46) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v44);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v44 == *v24 )
      {
        v44 = *(CMemory ***)sub_446FF0((int)v44);
        sub_4766F0(this, (int)v44);
      }
      v25 = (int *)sub_446FF0((int)v44);
      *(_BYTE *)sub_433730(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v44);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_433730(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v44);
      v29 = (int *)sub_446FF0(*v28);
      sub_433740(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v44);
      v31 = (_DWORD *)sub_446FF0(*v30);
      v46 = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)sub_433730(v46) )
      {
        v32 = (_DWORD *)sub_446FF0((int)v44);
        v33 = (CMemory ***)unknown_libname_25(*v32);
        if ( v44 == *v33 )
        {
          v44 = *(CMemory ***)sub_446FF0((int)v44);
          sub_433740(this, (int)v44);
        }
        v34 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_433730(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v44);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_433730(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v44);
        v38 = (int *)sub_446FF0(*v37);
        sub_4766F0(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_433730(*v19) = 1;
        *(_BYTE *)sub_433730(v46) = 1;
        v20 = (int *)sub_446FF0((int)v44);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_433730(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v44);
        v44 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_433730(*v39) = 1;
  sub_446700(a2, (int)v45);
  return a2;
}
// 473028: variable 'v5' is possibly undefined
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00473430) --------------------------------------------------------
int __thiscall sub_473430(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_472F10(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004734E0) --------------------------------------------------------
int __cdecl sub_4734E0(int a1)
{
  return a1 + 48;
}

//----- (004734F0) --------------------------------------------------------
int __cdecl sub_4734F0(int a1)
{
  return a1 + 49;
}

//----- (00473500) --------------------------------------------------------
int __cdecl sub_473500(int a1)
{
  int v1; // eax

  v1 = sub_447000(a1);
  return unknown_libname_25(v1);
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00473520) --------------------------------------------------------
void *__thiscall sub_473520(void *this, _BYTE *a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(a3);
  std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  sub_4768F0((int *)this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00473560) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473560(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_471490((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_472890(&a3, &v10, 0);
      sub_470CA0((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00473600) --------------------------------------------------------
void *__thiscall sub_473600(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_476960(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00473630) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_473630(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_4768C0(this, v8, a3);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_473600(this, v7, a3);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00473670) --------------------------------------------------------
int __stdcall sub_473670(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_4734F0((int)a1); ; i = (char *)sub_4734F0(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_473670(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004736F0) --------------------------------------------------------
void *__thiscall sub_4736F0(int *this, void *a2, char a3, int a4, const void *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  _DWORD *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  CMemory **v44; // [esp+48h] [ebp-8h]
  CMemory **v45; // [esp+4Ch] [ebp-4h]
  int v46; // [esp+60h] [ebp+10h]

  if ( sub_4768A0() - 1 <= (unsigned int)this[2] )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_4769F0(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v45;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v45;
    v8 = (CMemory ***)CServer::SendAlive(this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)unknown_libname_25(a4);
    *v9 = v45;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v45;
    if ( a4 == *(_DWORD *)CServer::SendAlive(this) )
    {
      v12 = (CMemory ***)CServer::SendAlive(this);
      *v12 = v45;
    }
  }
  v44 = v45;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v44);
    if ( *(_BYTE *)sub_4734E0(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v44);
    v15 = (int *)sub_446FF0((int)v44);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v44);
      v18 = (int *)sub_446FF0(*v17);
      v46 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_4734E0(v46) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v44);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v44 == *v24 )
      {
        v44 = *(CMemory ***)sub_446FF0((int)v44);
        sub_473B30(this, (int)v44);
      }
      v25 = (int *)sub_446FF0((int)v44);
      *(_BYTE *)sub_4734E0(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v44);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_4734E0(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v44);
      v29 = (int *)sub_446FF0(*v28);
      sub_473CE0(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v44);
      v31 = (_DWORD *)sub_446FF0(*v30);
      v46 = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)sub_4734E0(v46) )
      {
        v32 = (_DWORD *)sub_446FF0((int)v44);
        v33 = (CMemory ***)unknown_libname_25(*v32);
        if ( v44 == *v33 )
        {
          v44 = *(CMemory ***)sub_446FF0((int)v44);
          sub_473CE0(this, (int)v44);
        }
        v34 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_4734E0(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v44);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_4734E0(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v44);
        v38 = (int *)sub_446FF0(*v37);
        sub_473B30(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_4734E0(*v19) = 1;
        *(_BYTE *)sub_4734E0(v46) = 1;
        v20 = (int *)sub_446FF0((int)v44);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_4734E0(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v44);
        v44 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_4734E0(*v39) = 1;
  sub_446700(a2, (int)v45);
  return a2;
}
// 473728: variable 'v5' is possibly undefined
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00473B30) --------------------------------------------------------
int *__thiscall sub_473B30(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)unknown_libname_25(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)unknown_libname_25(v11);
  if ( !*(_BYTE *)sub_4734F0(*v3) )
  {
    v4 = (int *)unknown_libname_25(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (_DWORD *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_25(*v6) )
    {
      v7 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)unknown_libname_25(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00473C60) --------------------------------------------------------
int __cdecl sub_473C60(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_4734F0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00473CA0) --------------------------------------------------------
int __cdecl sub_473CA0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)unknown_libname_25(a1);
    if ( *(_BYTE *)sub_4734F0(*v1) )
      break;
    a1 = *(_DWORD *)unknown_libname_25(a1);
  }
  return a1;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00473CE0) --------------------------------------------------------
int *__thiscall sub_473CE0(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  _DWORD *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)unknown_libname_25(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)unknown_libname_25(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_4734F0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00473E10) --------------------------------------------------------
int __thiscall sub_473E10(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_473560(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00473EC0) --------------------------------------------------------
int __cdecl sub_473EC0(int a1)
{
  return a1 + 25;
}

//----- (00473ED0) --------------------------------------------------------
void *__thiscall sub_473ED0(void *this, _BYTE *a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(a3);
  std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  sub_477260((int *)this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00473F10) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_473F10(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_4717E0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_478680(&a3, &v10, 0);
      sub_476AA0((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00473FB0) --------------------------------------------------------
void *__thiscall sub_473FB0(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_4772D0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00473FE0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_473FE0(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_477230(this, v8, a3);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_473FB0(this, v7, a3);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00474020) --------------------------------------------------------
int __stdcall sub_474020(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_473EC0((int)a1); ; i = (char *)sub_473EC0(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_474020(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004740A0) --------------------------------------------------------
void *__thiscall sub_4740A0(int *this, void *a2, char a3, int a4, _DWORD *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  _DWORD *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  CMemory **v44; // [esp+48h] [ebp-8h]
  CMemory **v45; // [esp+4Ch] [ebp-4h]
  int v46; // [esp+60h] [ebp+10h]

  if ( sub_476A80((int)this) - 1 <= this[2] )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_4775C0(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v45;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v45;
    v8 = (CMemory ***)CServer::SendAlive(this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)unknown_libname_25(a4);
    *v9 = v45;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v45;
    if ( a4 == *(_DWORD *)CServer::SendAlive(this) )
    {
      v12 = (CMemory ***)CServer::SendAlive(this);
      *v12 = v45;
    }
  }
  v44 = v45;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v44);
    if ( *(_BYTE *)sub_476A70(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v44);
    v15 = (int *)sub_446FF0((int)v44);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v44);
      v18 = (int *)sub_446FF0(*v17);
      v46 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_476A70(v46) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v44);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v44 == *v24 )
      {
        v44 = *(CMemory ***)sub_446FF0((int)v44);
        sub_477360(this, (int)v44);
      }
      v25 = (int *)sub_446FF0((int)v44);
      *(_BYTE *)sub_476A70(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v44);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_476A70(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v44);
      v29 = (int *)sub_446FF0(*v28);
      sub_477490(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v44);
      v31 = (_DWORD *)sub_446FF0(*v30);
      v46 = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)sub_476A70(v46) )
      {
        v32 = (_DWORD *)sub_446FF0((int)v44);
        v33 = (CMemory ***)unknown_libname_25(*v32);
        if ( v44 == *v33 )
        {
          v44 = *(CMemory ***)sub_446FF0((int)v44);
          sub_477490(this, (int)v44);
        }
        v34 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_476A70(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v44);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_476A70(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v44);
        v38 = (int *)sub_446FF0(*v37);
        sub_477360(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_476A70(*v19) = 1;
        *(_BYTE *)sub_476A70(v46) = 1;
        v20 = (int *)sub_446FF0((int)v44);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_476A70(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v44);
        v44 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_476A70(*v39) = 1;
  sub_446700(a2, (int)v45);
  return a2;
}
// 4740D8: variable 'v5' is possibly undefined
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004744E0) --------------------------------------------------------
int __thiscall sub_4744E0(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_473F10(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004745A0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4745A0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_477660((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_434510(&a3, &v10, 0);
      sub_475E70((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00474640) --------------------------------------------------------
int __thiscall sub_474640(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4745A0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004746F0) --------------------------------------------------------
int __cdecl sub_4746F0(int a1)
{
  return a1 + 113;
}

//----- (00474700) --------------------------------------------------------
void *__thiscall sub_474700(void *this, _BYTE *a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(a3);
  std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  sub_477F50((int *)this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00474740) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474740(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_471BE0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_478760(&a3, &v10, 0);
      sub_477790((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (004747E0) --------------------------------------------------------
void *__thiscall sub_4747E0(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_477FC0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00474810) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_474810(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, _DWORD *a3)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_477F20(this, v8, a3);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_4747E0(this, v7, a3);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00474850) --------------------------------------------------------
int __stdcall sub_474850(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_4746F0((int)a1); ; i = (char *)sub_4746F0(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_474850(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004748D0) --------------------------------------------------------
void *__thiscall sub_4748D0(int *this, void *a2, char a3, int a4, const void *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  _DWORD *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  CMemory **v44; // [esp+48h] [ebp-8h]
  CMemory **v45; // [esp+4Ch] [ebp-4h]
  int v46; // [esp+60h] [ebp+10h]

  if ( sub_477770() - 1 <= (unsigned int)this[2] )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_4782B0(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v45;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v45;
    v8 = (CMemory ***)CServer::SendAlive(this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)unknown_libname_25(a4);
    *v9 = v45;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v45;
    if ( a4 == *(_DWORD *)CServer::SendAlive(this) )
    {
      v12 = (CMemory ***)CServer::SendAlive(this);
      *v12 = v45;
    }
  }
  v44 = v45;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v44);
    if ( *(_BYTE *)sub_477760(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v44);
    v15 = (int *)sub_446FF0((int)v44);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v44);
      v18 = (int *)sub_446FF0(*v17);
      v46 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_477760(v46) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v44);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v44 == *v24 )
      {
        v44 = *(CMemory ***)sub_446FF0((int)v44);
        sub_478050(this, (int)v44);
      }
      v25 = (int *)sub_446FF0((int)v44);
      *(_BYTE *)sub_477760(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v44);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_477760(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v44);
      v29 = (int *)sub_446FF0(*v28);
      sub_478180(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v44);
      v31 = (_DWORD *)sub_446FF0(*v30);
      v46 = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)sub_477760(v46) )
      {
        v32 = (_DWORD *)sub_446FF0((int)v44);
        v33 = (CMemory ***)unknown_libname_25(*v32);
        if ( v44 == *v33 )
        {
          v44 = *(CMemory ***)sub_446FF0((int)v44);
          sub_478180(this, (int)v44);
        }
        v34 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_477760(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v44);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_477760(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v44);
        v38 = (int *)sub_446FF0(*v37);
        sub_478050(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_477760(*v19) = 1;
        *(_BYTE *)sub_477760(v46) = 1;
        v20 = (int *)sub_446FF0((int)v44);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_477760(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v44);
        v44 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_477760(*v39) = 1;
  sub_446700(a2, (int)v45);
  return a2;
}
// 474908: variable 'v5' is possibly undefined
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00474D10) --------------------------------------------------------
int __thiscall sub_474D10(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_474740(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00474DC0) --------------------------------------------------------
int __cdecl sub_474DC0(int a1)
{
  return a1 + 56;
}

//----- (00474DD0) --------------------------------------------------------
int __cdecl sub_474DD0(int a1)
{
  return a1 + 57;
}

//----- (00474DE0) --------------------------------------------------------
void *__thiscall sub_474DE0(void *this, _BYTE *a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(a3);
  std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  sub_4783E0((int *)this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00474E20) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_474E20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_478350((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_4787E0(&a3, &v10, 0);
      sub_471F00((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00474EC0) --------------------------------------------------------
void *__thiscall sub_474EC0(int *this, void *a2, void *a3)
{
  int v3; // eax

  v3 = sub_478450(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00474EF0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *__thiscall sub_474EF0(int *this, std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *a2, void *a3)
{
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v3; // eax
  const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *v5; // [esp-4h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-8h] BYREF
  char v8[4]; // [esp+8h] [ebp-4h] BYREF

  v5 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_4783B0(this, v8, a3);
  v3 = (const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *)sub_474EC0(this, v7, a3);
  std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(
    a2,
    v3,
    v5);
  return a2;
}

//----- (00474F30) --------------------------------------------------------
void *__thiscall sub_474F30(int *this, void *a2, char a3, int a4, std::string *a5)
{
  void *v5; // eax
  CMemory ***v6; // eax
  CMemory ***v7; // eax
  CMemory ***v8; // eax
  CMemory ***v9; // eax
  CMemory ***v10; // eax
  CMemory ***v11; // eax
  CMemory ***v12; // eax
  int *v13; // eax
  _DWORD *v14; // esi
  int *v15; // eax
  _DWORD *v16; // eax
  int *v17; // eax
  int *v18; // eax
  int *v19; // eax
  int *v20; // eax
  int *v21; // eax
  int *v22; // eax
  int *v23; // eax
  CMemory ***v24; // eax
  int *v25; // eax
  int *v26; // eax
  int *v27; // eax
  int *v28; // eax
  int *v29; // eax
  int *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  CMemory ***v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  int *v38; // eax
  int *v39; // eax
  char v42[28]; // [esp+8h] [ebp-48h] BYREF
  char v43[36]; // [esp+24h] [ebp-2Ch] BYREF
  CMemory **v44; // [esp+48h] [ebp-8h]
  CMemory **v45; // [esp+4Ch] [ebp-4h]
  int v46; // [esp+60h] [ebp+10h]

  if ( sub_478330() - 1 <= (unsigned int)this[2] )
  {
    std::string::string((std::string *)v42, "map/set<T> too long");
    std::length_error::length_error((std::length_error *)v43, (const std::string *)v42);
    sub_40F510(v5);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v43);
    sub_40F780((std::string *)v42);
  }
  v45 = sub_4784E0(this[1], a4, this[1], a5, 0);
  ++this[2];
  if ( a4 == this[1] )
  {
    v6 = (CMemory ***)sub_478AB0(this);
    *v6 = v45;
    v7 = (CMemory ***)sub_418790(this);
    *v7 = v45;
    v8 = (CMemory ***)CServer::SendAlive(this);
    *v8 = v45;
  }
  else if ( a3 )
  {
    v9 = (CMemory ***)unknown_libname_25(a4);
    *v9 = v45;
    if ( a4 == *(_DWORD *)sub_418790(this) )
    {
      v10 = (CMemory ***)sub_418790(this);
      *v10 = v45;
    }
  }
  else
  {
    v11 = (CMemory ***)sub_430F90(a4);
    *v11 = v45;
    if ( a4 == *(_DWORD *)CServer::SendAlive(this) )
    {
      v12 = (CMemory ***)CServer::SendAlive(this);
      *v12 = v45;
    }
  }
  v44 = v45;
  while ( 1 )
  {
    v13 = (int *)sub_446FF0((int)v44);
    if ( *(_BYTE *)sub_474DC0(*v13) )
      break;
    v14 = (_DWORD *)sub_446FF0((int)v44);
    v15 = (int *)sub_446FF0((int)v44);
    v16 = (_DWORD *)sub_446FF0(*v15);
    if ( *v14 == *(_DWORD *)unknown_libname_25(*v16) )
    {
      v17 = (int *)sub_446FF0((int)v44);
      v18 = (int *)sub_446FF0(*v17);
      v46 = *(_DWORD *)sub_430F90(*v18);
      if ( !*(_BYTE *)sub_474DC0(v46) )
        goto LABEL_15;
      v23 = (int *)sub_446FF0((int)v44);
      v24 = (CMemory ***)sub_430F90(*v23);
      if ( v44 == *v24 )
      {
        v44 = *(CMemory ***)sub_446FF0((int)v44);
        sub_475370(this, (int)v44);
      }
      v25 = (int *)sub_446FF0((int)v44);
      *(_BYTE *)sub_474DC0(*v25) = 1;
      v26 = (int *)sub_446FF0((int)v44);
      v27 = (int *)sub_446FF0(*v26);
      *(_BYTE *)sub_474DC0(*v27) = 0;
      v28 = (int *)sub_446FF0((int)v44);
      v29 = (int *)sub_446FF0(*v28);
      sub_475520(this, *v29);
    }
    else
    {
      v30 = (int *)sub_446FF0((int)v44);
      v31 = (_DWORD *)sub_446FF0(*v30);
      v46 = *(_DWORD *)unknown_libname_25(*v31);
      if ( *(_BYTE *)sub_474DC0(v46) )
      {
        v32 = (_DWORD *)sub_446FF0((int)v44);
        v33 = (CMemory ***)unknown_libname_25(*v32);
        if ( v44 == *v33 )
        {
          v44 = *(CMemory ***)sub_446FF0((int)v44);
          sub_475520(this, (int)v44);
        }
        v34 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_474DC0(*v34) = 1;
        v35 = (int *)sub_446FF0((int)v44);
        v36 = (int *)sub_446FF0(*v35);
        *(_BYTE *)sub_474DC0(*v36) = 0;
        v37 = (int *)sub_446FF0((int)v44);
        v38 = (int *)sub_446FF0(*v37);
        sub_475370(this, *v38);
      }
      else
      {
LABEL_15:
        v19 = (int *)sub_446FF0((int)v44);
        *(_BYTE *)sub_474DC0(*v19) = 1;
        *(_BYTE *)sub_474DC0(v46) = 1;
        v20 = (int *)sub_446FF0((int)v44);
        v21 = (int *)sub_446FF0(*v20);
        *(_BYTE *)sub_474DC0(*v21) = 0;
        v22 = (int *)sub_446FF0((int)v44);
        v44 = *(CMemory ***)sub_446FF0(*v22);
      }
    }
  }
  v39 = (int *)sub_478AB0(this);
  *(_BYTE *)sub_474DC0(*v39) = 1;
  sub_446700(a2, (int)v45);
  return a2;
}
// 474F68: variable 'v5' is possibly undefined
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00475370) --------------------------------------------------------
int *__thiscall sub_475370(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)unknown_libname_25(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)unknown_libname_25(v11);
  if ( !*(_BYTE *)sub_474DD0(*v3) )
  {
    v4 = (int *)unknown_libname_25(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (_DWORD *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_25(*v6) )
    {
      v7 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)unknown_libname_25(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004754A0) --------------------------------------------------------
int __cdecl sub_4754A0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_474DD0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (004754E0) --------------------------------------------------------
int __cdecl sub_4754E0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)unknown_libname_25(a1);
    if ( *(_BYTE *)sub_474DD0(*v1) )
      break;
    a1 = *(_DWORD *)unknown_libname_25(a1);
  }
  return a1;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00475520) --------------------------------------------------------
int *__thiscall sub_475520(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  _DWORD *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)unknown_libname_25(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)unknown_libname_25(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_474DD0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00475650) --------------------------------------------------------
int __thiscall sub_475650(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_474E20(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00475700) --------------------------------------------------------
void __stdcall sub_475700(void *a1)
{
  __ExceptionPtrDestroy(a1);
}

//----- (00475720) --------------------------------------------------------
CMemory ***__thiscall sub_475720(_DWORD *this, char a2, const void *a3)
{
  int *v3; // eax
  _DWORD *v4; // eax
  CMemory ***result; // eax
  const void *v6; // [esp-4h] [ebp-10h]
  int v8; // [esp+4h] [ebp-8h]
  CMemory **v9; // [esp+8h] [ebp-4h]

  v8 = unknown_libname_15(&a2);
  v6 = a3;
  v3 = (int *)sub_446FF0(v8);
  v9 = sub_478560(v8, *v3, v6);
  sub_4785D0(this, 1u);
  *(_DWORD *)sub_446FF0(v8) = v9;
  v4 = (_DWORD *)sub_446FF0((int)v9);
  result = (CMemory ***)unknown_libname_25(*v4);
  *result = v9;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004757A0) --------------------------------------------------------
_DWORD *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::erase(int this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax
  _DWORD *v4; // esi
  _DWORD *v5; // eax
  _DWORD *v6; // esi
  int *v7; // eax
  int v10; // [esp+8h] [ebp-8h] BYREF
  void *v11; // [esp+Ch] [ebp-4h]

  v3 = sub_47D0A0(&a3, &v10, 0);
  v11 = (void *)unknown_libname_15(v3);
  if ( v11 != *(void **)(this + 4) )
  {
    v4 = (_DWORD *)unknown_libname_25(v11);
    v5 = (_DWORD *)sub_446FF0((int)v11);
    *(_DWORD *)unknown_libname_25(*v5) = *v4;
    v6 = (_DWORD *)sub_446FF0((int)v11);
    v7 = (int *)unknown_libname_25(v11);
    *(_DWORD *)sub_446FF0(*v7) = *v6;
    sub_44CD70(v11);
    sub_4338F0(v11, 1);
    --*(_DWORD *)(this + 8);
  }
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00475880) --------------------------------------------------------
int *__thiscall sub_475880(int *this)
{
  sub_478660(this);
  return this;
}

//----- (004758A0) --------------------------------------------------------
int *__thiscall sub_4758A0(int *this)
{
  sub_4786B0(this);
  return this;
}

//----- (004758C0) --------------------------------------------------------
int *__thiscall sub_4758C0(int *this)
{
  sub_4786D0(this);
  return this;
}

//----- (004758E0) --------------------------------------------------------
int *__thiscall sub_4758E0(int *this)
{
  sub_4786F0(this);
  return this;
}

//----- (00475900) --------------------------------------------------------
int *__thiscall sub_475900(int *this)
{
  sub_478740(this);
  return this;
}

//----- (00475920) --------------------------------------------------------
int *__thiscall sub_475920(int *this)
{
  sub_478790(this);
  return this;
}

//----- (00475940) --------------------------------------------------------
int *__thiscall sub_475940(int *this)
{
  sub_4787B0(this);
  return this;
}

//----- (00475960) --------------------------------------------------------
int __thiscall sub_475960(int *this)
{
  return sub_430F90(*this);
}

//----- (00475980) --------------------------------------------------------
int *__thiscall sub_475980(int *this)
{
  sub_478810(this);
  return this;
}

//----- (004759A0) --------------------------------------------------------
int *__thiscall sub_4759A0(int *this)
{
  sub_478830(this);
  return this;
}

//----- (004759C0) --------------------------------------------------------
_DWORD *__thiscall sub_4759C0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478920(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00475A20) --------------------------------------------------------
_DWORD *__thiscall sub_475A20(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478A30(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00475A80) --------------------------------------------------------
void *__thiscall sub_475A80(int *this, void *a2, const char **a3)
{
  int v3; // eax

  v3 = sub_478AD0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00475AB0) --------------------------------------------------------
int __thiscall sub_475AB0(int *this, const char **a2)
{
  const char **v2; // eax
  const char *v4; // [esp-4h] [ebp-10h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+8h] [ebp-4h]

  v6 = *(_DWORD *)sub_478AB0(this);
  v7 = this[1];
  while ( !*(_BYTE *)sub_431110(v6) )
  {
    v4 = *a2;
    v2 = (const char **)sub_473500(v6);
    if ( StrCmp::operator()((StrCmp *)this, *v2, v4) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)unknown_libname_25(v6);
    }
  }
  return v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00475B40) --------------------------------------------------------
_DWORD *__thiscall sub_475B40(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478B60(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00475BA0) --------------------------------------------------------
void __thiscall sub_475BA0(int this, IPAddrMask *_First, unsigned int _Count, int *a4)
{
  int v4; // edx
  unsigned int v5; // esi
  IPAddrMask *v6; // eax
  unsigned int v7; // [esp+4h] [ebp-20h]
  _DWORD *v9; // [esp+Ch] [ebp-18h]
  CMemory **v10; // [esp+10h] [ebp-14h]
  IPAddrMask *_Ptr; // [esp+14h] [ebp-10h]
  unsigned int v12; // [esp+18h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-Ch]
  int v14[2]; // [esp+1Ch] [ebp-8h] BYREF
  unsigned int _Counta; // [esp+30h] [ebp+Ch]

  v4 = a4[1];
  v14[0] = *a4;
  v14[1] = v4;
  v12 = std::vector<IPAddrMask>::capacity((std::vector<IPAddrMask> *)this);
  if ( _Count )
  {
    v5 = sub_446B60((std::allocator<std::pair<char const * const,CItem *> > *)this);
    if ( v5 - std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) >= _Count )
    {
      if ( v12 >= _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)_First) >> 3 >= _Count )
        {
          v9 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E60((int)&v9[-2 * _Count], (int)v9, v9);
          sub_47A3F0(_First, &v9[-2 * _Count], v9);
          std::fill<IPAddrMask *,IPAddrMask>(
            _First,
            (IPAddrMask *)((char *)_First + 8 * _Count),
            (const IPAddrMask *)v14);
        }
        else
        {
          sub_431E60((int)_First, *(_DWORD *)(this + 8), (char *)_First + 8 * _Count);
          std::vector<IPAddrMask>::_Ufill(
            (std::vector<IPAddrMask> *)this,
            *(IPAddrMask **)(this + 8),
            _Count - ((*(_DWORD *)(this + 8) - (int)_First) >> 3),
            (const IPAddrMask *)v14);
          *(_DWORD *)(this + 8) += 8 * _Count;
          std::fill<IPAddrMask *,IPAddrMask>(
            _First,
            (IPAddrMask *)(*(_DWORD *)(this + 8) - 8 * _Count),
            (const IPAddrMask *)v14);
        }
      }
      else
      {
        if ( sub_446B60((std::allocator<std::pair<char const * const,CItem *> > *)this) - (v12 >> 1) >= v12 )
          v7 = v12 + (v12 >> 1);
        else
          v7 = 0;
        v13 = v7;
        if ( v7 < _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this) )
          v13 = _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
        v10 = sub_446E50(v13);
        v6 = (IPAddrMask *)sub_431E60(*(_DWORD *)(this + 4), (int)_First, v10);
        _Ptr = std::vector<IPAddrMask>::_Ufill((std::vector<IPAddrMask> *)this, v6, _Count, (const IPAddrMask *)v14);
        sub_431E60((int)_First, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<IPAddrMask>::size((std::vector<IPAddrMask> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4316C0(*(char **)(this + 4), *(char **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 3);
        }
        *(_DWORD *)(this + 12) = &v10[2 * v13];
        *(_DWORD *)(this + 8) = &v10[2 * _Counta];
        *(_DWORD *)(this + 4) = v10;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (00475E70) --------------------------------------------------------
_DWORD *__thiscall sub_475E70(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  void **v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_433230(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  v56 = (void *)unknown_libname_15(&a3);
  sub_475880(&a3);
  v54 = v56;
  v5 = (int *)unknown_libname_25(v56);
  if ( *(_BYTE *)sub_433230(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_433230(*v6) )
    {
      v55 = *(void **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (void *)unknown_libname_15(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_433230((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)unknown_libname_25(v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)unknown_libname_25(v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_479190((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)CServer::SendAlive(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_433230((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_433AB0((int)v55);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(v56);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_433230((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)unknown_libname_25(v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0((int)v56);
      v26 = (void **)unknown_libname_25(*v25);
      if ( *v26 == v56 )
      {
        v27 = (_DWORD *)sub_446FF0((int)v56);
        v28 = (_DWORD *)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_433730((int)v56);
    v31 = (char *)sub_433730((int)v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)sub_433730((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_433730((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_433730((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)unknown_libname_25(v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)unknown_libname_25(v53);
      if ( !*(_BYTE *)sub_433730((int)v54) )
      {
        *(_BYTE *)sub_433730((int)v54) = 1;
        *(_BYTE *)sub_433730((int)v53) = 0;
        sub_433740(this, (int)v53);
        v54 = *(void **)unknown_libname_25(v53);
      }
      if ( !*(_BYTE *)sub_433230((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_433730(*v40) != 1 || (v41 = (int *)unknown_libname_25(v54), *(_BYTE *)sub_433730(*v41) != 1) )
        {
          v42 = (int *)unknown_libname_25(v54);
          if ( *(_BYTE *)sub_433730(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_433730(*v43) = 1;
            *(_BYTE *)sub_433730((int)v54) = 0;
            sub_4766F0(this, (int)v54);
            v54 = *(void **)unknown_libname_25(v53);
          }
          v44 = (_BYTE *)sub_433730((int)v53);
          *(_BYTE *)sub_433730((int)v54) = *v44;
          *(_BYTE *)sub_433730((int)v53) = 1;
          v45 = (int *)unknown_libname_25(v54);
          *(_BYTE *)sub_433730(*v45) = 1;
          sub_433740(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_433730((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_433730((int)v54) )
    {
      *(_BYTE *)sub_433730((int)v54) = 1;
      *(_BYTE *)sub_433730((int)v53) = 0;
      sub_4766F0(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_433230((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)unknown_libname_25(v54);
    if ( *(_BYTE *)sub_433730(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_433730(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_433730(*v36) == 1 )
      {
        v37 = (int *)unknown_libname_25(v54);
        *(_BYTE *)sub_433730(*v37) = 1;
        *(_BYTE *)sub_433730((int)v54) = 0;
        sub_433740(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_433730((int)v53);
      *(_BYTE *)sub_433730((int)v54) = *v38;
      *(_BYTE *)sub_433730((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_433730(*v39) = 1;
      sub_4766F0(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70(v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00476600) --------------------------------------------------------
_DWORD *__thiscall sub_476600(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_478C10(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (00476660) --------------------------------------------------------
int __thiscall sub_476660(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_433230(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004766F0) --------------------------------------------------------
int *__thiscall sub_4766F0(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)unknown_libname_25(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)unknown_libname_25(v11);
  if ( !*(_BYTE *)sub_433230(*v3) )
  {
    v4 = (int *)unknown_libname_25(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (_DWORD *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_25(*v6) )
    {
      v7 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)unknown_libname_25(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00476820) --------------------------------------------------------
CMemory **__stdcall sub_476820(int a1, int a2, int a3, const void *a4, char a5)
{
  _DWORD *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_4793B0(1);
  v6 = operator new(0x30u, v7);
  if ( v6 )
    sub_479E10(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (004768A0) --------------------------------------------------------
int sub_4768A0()
{
  return sub_478E40();
}

//----- (004768C0) --------------------------------------------------------
void *__thiscall sub_4768C0(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_478C90(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (004768F0) --------------------------------------------------------
int *__thiscall sub_4768F0(int *this)
{
  int *result; // eax

  this[1] = (int)sub_478D20();
  *(_BYTE *)sub_4734F0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)CServer::SendAlive(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00476960) --------------------------------------------------------
int __thiscall sub_476960(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4734F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004769F0) --------------------------------------------------------
CMemory **__stdcall sub_4769F0(int a1, int a2, int a3, const void *a4, char a5)
{
  _DWORD *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_478E70(1);
  v6 = operator new(0x34u, v7);
  if ( v6 )
    sub_479E60(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00476A70) --------------------------------------------------------
int __cdecl sub_476A70(int a1)
{
  return a1 + 24;
}

//----- (00476A80) --------------------------------------------------------
unsigned int __thiscall sub_476A80(int this)
{
  return std::allocator<CIOSocket::CIOTimer>::max_size((std::allocator<CIOSocket::CIOTimer> *)(this + 3));
}

//----- (00476AA0) --------------------------------------------------------
_DWORD *__thiscall sub_476AA0(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  void **v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_473EC0(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  v56 = (void *)unknown_libname_15(&a3);
  sub_4798D0(&a3);
  v54 = v56;
  v5 = (int *)unknown_libname_25(v56);
  if ( *(_BYTE *)sub_473EC0(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_473EC0(*v6) )
    {
      v55 = *(void **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (void *)unknown_libname_15(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_473EC0((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)unknown_libname_25(v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)unknown_libname_25(v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_473EC0((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_478ED0((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)CServer::SendAlive(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_473EC0((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_478E90((int)v55);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(v56);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_473EC0((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)unknown_libname_25(v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0((int)v56);
      v26 = (void **)unknown_libname_25(*v25);
      if ( *v26 == v56 )
      {
        v27 = (_DWORD *)sub_446FF0((int)v56);
        v28 = (_DWORD *)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_476A70((int)v56);
    v31 = (char *)sub_476A70((int)v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)sub_476A70((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_476A70((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_476A70((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)unknown_libname_25(v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)unknown_libname_25(v53);
      if ( !*(_BYTE *)sub_476A70((int)v54) )
      {
        *(_BYTE *)sub_476A70((int)v54) = 1;
        *(_BYTE *)sub_476A70((int)v53) = 0;
        sub_477490(this, (int)v53);
        v54 = *(void **)unknown_libname_25(v53);
      }
      if ( !*(_BYTE *)sub_473EC0((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_476A70(*v40) != 1 || (v41 = (int *)unknown_libname_25(v54), *(_BYTE *)sub_476A70(*v41) != 1) )
        {
          v42 = (int *)unknown_libname_25(v54);
          if ( *(_BYTE *)sub_476A70(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_476A70(*v43) = 1;
            *(_BYTE *)sub_476A70((int)v54) = 0;
            sub_477360(this, (int)v54);
            v54 = *(void **)unknown_libname_25(v53);
          }
          v44 = (_BYTE *)sub_476A70((int)v53);
          *(_BYTE *)sub_476A70((int)v54) = *v44;
          *(_BYTE *)sub_476A70((int)v53) = 1;
          v45 = (int *)unknown_libname_25(v54);
          *(_BYTE *)sub_476A70(*v45) = 1;
          sub_477490(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_476A70((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_476A70((int)v54) )
    {
      *(_BYTE *)sub_476A70((int)v54) = 1;
      *(_BYTE *)sub_476A70((int)v53) = 0;
      sub_477360(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_473EC0((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)unknown_libname_25(v54);
    if ( *(_BYTE *)sub_476A70(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_476A70(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_476A70(*v36) == 1 )
      {
        v37 = (int *)unknown_libname_25(v54);
        *(_BYTE *)sub_476A70(*v37) = 1;
        *(_BYTE *)sub_476A70((int)v54) = 0;
        sub_477490(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_476A70((int)v53);
      *(_BYTE *)sub_476A70((int)v54) = *v38;
      *(_BYTE *)sub_476A70((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_476A70(*v39) = 1;
      sub_477360(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70(v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00477230) --------------------------------------------------------
void *__thiscall sub_477230(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_478F10(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00477260) --------------------------------------------------------
int *__thiscall sub_477260(int *this)
{
  int *result; // eax

  this[1] = (int)sub_478FA0();
  *(_BYTE *)sub_473EC0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)CServer::SendAlive(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (004772D0) --------------------------------------------------------
int __thiscall sub_4772D0(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_473EC0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00477360) --------------------------------------------------------
int *__thiscall sub_477360(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)unknown_libname_25(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)unknown_libname_25(v11);
  if ( !*(_BYTE *)sub_473EC0(*v3) )
  {
    v4 = (int *)unknown_libname_25(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (_DWORD *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_25(*v6) )
    {
      v7 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)unknown_libname_25(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00477490) --------------------------------------------------------
int *__thiscall sub_477490(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  _DWORD *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)unknown_libname_25(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)unknown_libname_25(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_473EC0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004775C0) --------------------------------------------------------
CMemory **__stdcall sub_4775C0(int a1, int a2, int a3, _DWORD *a4, char a5)
{
  _DWORD *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_4790F0(1);
  v6 = operator new(0x1Cu, v7);
  if ( v6 )
    sub_479EB0(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00477640) --------------------------------------------------------
int sub_477640()
{
  return std::allocator<std::pair<std::string const,void *>>::max_size();
}

//----- (00477660) --------------------------------------------------------
_DWORD *__thiscall sub_477660(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_479110(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (004776C0) --------------------------------------------------------
void *__thiscall sub_4776C0(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_4791D0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (004776F0) --------------------------------------------------------
int *__thiscall sub_4776F0(int *this)
{
  int *result; // eax

  this[1] = (int)sub_479260();
  *(_BYTE *)sub_433230(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)CServer::SendAlive(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00477760) --------------------------------------------------------
int __cdecl sub_477760(int a1)
{
  return a1 + 112;
}

//----- (00477770) --------------------------------------------------------
int sub_477770()
{
  return sub_479600();
}

//----- (00477790) --------------------------------------------------------
_DWORD *__thiscall sub_477790(int *this, _DWORD *a2, int a3)
{
  int v3; // eax
  _DWORD *v4; // eax
  int *v5; // eax
  int *v6; // eax
  _DWORD *v7; // eax
  void **v8; // eax
  _DWORD *v9; // eax
  void **v10; // eax
  _DWORD *v11; // eax
  void **v12; // eax
  void **v13; // eax
  int *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // esi
  void **v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  void **v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  void **v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  int *v29; // eax
  _DWORD *v30; // esi
  char *v31; // eax
  void **v32; // eax
  void **v33; // eax
  int *v34; // eax
  int *v35; // eax
  int *v36; // eax
  int *v37; // eax
  _BYTE *v38; // esi
  int *v39; // eax
  int *v40; // eax
  int *v41; // eax
  int *v42; // eax
  int *v43; // eax
  _BYTE *v44; // esi
  int *v45; // eax
  char *v47; // [esp-4h] [ebp-64h]
  int v48; // [esp+4h] [ebp-5Ch]
  int v49; // [esp+8h] [ebp-58h]
  char v51[28]; // [esp+10h] [ebp-50h] BYREF
  _DWORD v52[9]; // [esp+2Ch] [ebp-34h] BYREF
  void *v53; // [esp+50h] [ebp-10h]
  void *v54; // [esp+54h] [ebp-Ch]
  void *v55; // [esp+58h] [ebp-8h]
  void *v56; // [esp+5Ch] [ebp-4h]

  v3 = unknown_libname_15(&a3);
  if ( *(_BYTE *)sub_4746F0(v3) )
  {
    std::string::string((std::string *)v51, "invalid map/set<T> iterator");
    v4 = sub_4111A0(v52, (std::string *)v51);
    sub_40F510(v4);
    sub_4111D0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v52);
    sub_40F780((std::string *)v51);
  }
  v56 = (void *)unknown_libname_15(&a3);
  sub_479B70(&a3);
  v54 = v56;
  v5 = (int *)unknown_libname_25(v56);
  if ( *(_BYTE *)sub_4746F0(*v5) )
  {
    v55 = *(void **)sub_430F90((int)v54);
  }
  else
  {
    v6 = (int *)sub_430F90((int)v54);
    if ( *(_BYTE *)sub_4746F0(*v6) )
    {
      v55 = *(void **)unknown_libname_25(v54);
    }
    else
    {
      v54 = (void *)unknown_libname_15(&a3);
      v55 = *(void **)sub_430F90((int)v54);
    }
  }
  if ( v54 == v56 )
  {
    v53 = *(void **)sub_446FF0((int)v56);
    if ( !*(_BYTE *)sub_4746F0((int)v55) )
    {
      v7 = (_DWORD *)sub_446FF0((int)v55);
      *v7 = v53;
    }
    v8 = (void **)sub_478AB0(this);
    if ( *v8 == v56 )
    {
      v9 = (_DWORD *)sub_478AB0(this);
      *v9 = v55;
    }
    else
    {
      v10 = (void **)unknown_libname_25(v53);
      if ( *v10 == v56 )
        v11 = (_DWORD *)unknown_libname_25(v53);
      else
        v11 = (_DWORD *)sub_430F90((int)v53);
      *v11 = v55;
    }
    v12 = (void **)sub_418790(this);
    if ( *v12 == v56 )
    {
      if ( *(_BYTE *)sub_4746F0((int)v55) )
        v49 = (int)v53;
      else
        v49 = sub_479410((int)v55);
      *(_DWORD *)sub_418790(this) = v49;
    }
    v13 = (void **)CServer::SendAlive(this);
    if ( *v13 == v56 )
    {
      if ( *(_BYTE *)sub_4746F0((int)v55) )
        v48 = (int)v53;
      else
        v48 = sub_4793D0((int)v55);
      *(_DWORD *)CServer::SendAlive(this) = v48;
    }
  }
  else
  {
    v14 = (int *)unknown_libname_25(v56);
    v15 = (_DWORD *)sub_446FF0(*v14);
    *v15 = v54;
    v16 = (_DWORD *)unknown_libname_25(v56);
    *(_DWORD *)unknown_libname_25(v54) = *v16;
    v17 = (void **)sub_430F90((int)v56);
    if ( v54 == *v17 )
    {
      v53 = v54;
    }
    else
    {
      v53 = *(void **)sub_446FF0((int)v54);
      if ( !*(_BYTE *)sub_4746F0((int)v55) )
      {
        v18 = (_DWORD *)sub_446FF0((int)v55);
        *v18 = v53;
      }
      v19 = (_DWORD *)unknown_libname_25(v53);
      *v19 = v55;
      v20 = (_DWORD *)sub_430F90((int)v56);
      *(_DWORD *)sub_430F90((int)v54) = *v20;
      v21 = (int *)sub_430F90((int)v56);
      v22 = (_DWORD *)sub_446FF0(*v21);
      *v22 = v54;
    }
    v23 = (void **)sub_478AB0(this);
    if ( *v23 == v56 )
    {
      v24 = (_DWORD *)sub_478AB0(this);
      *v24 = v54;
    }
    else
    {
      v25 = (_DWORD *)sub_446FF0((int)v56);
      v26 = (void **)unknown_libname_25(*v25);
      if ( *v26 == v56 )
      {
        v27 = (_DWORD *)sub_446FF0((int)v56);
        v28 = (_DWORD *)unknown_libname_25(*v27);
      }
      else
      {
        v29 = (int *)sub_446FF0((int)v56);
        v28 = (_DWORD *)sub_430F90(*v29);
      }
      *v28 = v54;
    }
    v30 = (_DWORD *)sub_446FF0((int)v56);
    *(_DWORD *)sub_446FF0((int)v54) = *v30;
    v47 = (char *)sub_477760((int)v56);
    v31 = (char *)sub_477760((int)v54);
    std::swap<char>(v31, v47);
  }
  if ( *(_BYTE *)sub_477760((int)v56) == 1 )
  {
    while ( 1 )
    {
      v32 = (void **)sub_478AB0(this);
      if ( v55 == *v32 || *(_BYTE *)sub_477760((int)v55) != 1 )
      {
LABEL_65:
        *(_BYTE *)sub_477760((int)v55) = 1;
        goto LABEL_66;
      }
      v33 = (void **)unknown_libname_25(v53);
      if ( v55 == *v33 )
        break;
      v54 = *(void **)unknown_libname_25(v53);
      if ( !*(_BYTE *)sub_477760((int)v54) )
      {
        *(_BYTE *)sub_477760((int)v54) = 1;
        *(_BYTE *)sub_477760((int)v53) = 0;
        sub_478180(this, (int)v53);
        v54 = *(void **)unknown_libname_25(v53);
      }
      if ( !*(_BYTE *)sub_4746F0((int)v54) )
      {
        v40 = (int *)sub_430F90((int)v54);
        if ( *(_BYTE *)sub_477760(*v40) != 1 || (v41 = (int *)unknown_libname_25(v54), *(_BYTE *)sub_477760(*v41) != 1) )
        {
          v42 = (int *)unknown_libname_25(v54);
          if ( *(_BYTE *)sub_477760(*v42) == 1 )
          {
            v43 = (int *)sub_430F90((int)v54);
            *(_BYTE *)sub_477760(*v43) = 1;
            *(_BYTE *)sub_477760((int)v54) = 0;
            sub_478050(this, (int)v54);
            v54 = *(void **)unknown_libname_25(v53);
          }
          v44 = (_BYTE *)sub_477760((int)v53);
          *(_BYTE *)sub_477760((int)v54) = *v44;
          *(_BYTE *)sub_477760((int)v53) = 1;
          v45 = (int *)unknown_libname_25(v54);
          *(_BYTE *)sub_477760(*v45) = 1;
          sub_478180(this, (int)v53);
          goto LABEL_65;
        }
LABEL_52:
        *(_BYTE *)sub_477760((int)v54) = 0;
        v55 = v53;
        goto LABEL_42;
      }
      v55 = v53;
LABEL_42:
      v53 = *(void **)sub_446FF0((int)v55);
    }
    v54 = *(void **)sub_430F90((int)v53);
    if ( !*(_BYTE *)sub_477760((int)v54) )
    {
      *(_BYTE *)sub_477760((int)v54) = 1;
      *(_BYTE *)sub_477760((int)v53) = 0;
      sub_478050(this, (int)v53);
      v54 = *(void **)sub_430F90((int)v53);
    }
    if ( *(_BYTE *)sub_4746F0((int)v54) )
    {
      v55 = v53;
      goto LABEL_42;
    }
    v34 = (int *)unknown_libname_25(v54);
    if ( *(_BYTE *)sub_477760(*v34) != 1 || (v35 = (int *)sub_430F90((int)v54), *(_BYTE *)sub_477760(*v35) != 1) )
    {
      v36 = (int *)sub_430F90((int)v54);
      if ( *(_BYTE *)sub_477760(*v36) == 1 )
      {
        v37 = (int *)unknown_libname_25(v54);
        *(_BYTE *)sub_477760(*v37) = 1;
        *(_BYTE *)sub_477760((int)v54) = 0;
        sub_478180(this, (int)v54);
        v54 = *(void **)sub_430F90((int)v53);
      }
      v38 = (_BYTE *)sub_477760((int)v53);
      *(_BYTE *)sub_477760((int)v54) = *v38;
      *(_BYTE *)sub_477760((int)v53) = 1;
      v39 = (int *)sub_430F90((int)v54);
      *(_BYTE *)sub_477760(*v39) = 1;
      sub_478050(this, (int)v53);
      goto LABEL_65;
    }
    goto LABEL_52;
  }
LABEL_66:
  sub_44CD70(v56);
  sub_4338F0(v56, 1);
  if ( this[2] )
    --this[2];
  *a2 = a3;
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00477F20) --------------------------------------------------------
void *__thiscall sub_477F20(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_479450(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (00477F50) --------------------------------------------------------
int *__thiscall sub_477F50(int *this)
{
  int *result; // eax

  this[1] = (int)sub_4794E0();
  *(_BYTE *)sub_4746F0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)CServer::SendAlive(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00477FC0) --------------------------------------------------------
int __thiscall sub_477FC0(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4746F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478050) --------------------------------------------------------
int *__thiscall sub_478050(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = (_DWORD *)unknown_libname_25(v11);
  *(_DWORD *)sub_430F90(a2) = *v2;
  v3 = (int *)unknown_libname_25(v11);
  if ( !*(_BYTE *)sub_4746F0(*v3) )
  {
    v4 = (int *)unknown_libname_25(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (_DWORD *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)unknown_libname_25(*v6) )
    {
      v7 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v7) = v11;
    }
    else
    {
      v8 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v8) = v11;
    }
  }
  *(_DWORD *)unknown_libname_25(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478180) --------------------------------------------------------
int *__thiscall sub_478180(int *this, int a2)
{
  _DWORD *v2; // esi
  int *v3; // eax
  int *v4; // eax
  _DWORD *v5; // esi
  int *v6; // eax
  int *v7; // eax
  _DWORD *v8; // eax
  int *result; // eax
  int v11; // [esp+8h] [ebp-4h]

  v11 = *(_DWORD *)unknown_libname_25(a2);
  v2 = (_DWORD *)sub_430F90(v11);
  *(_DWORD *)unknown_libname_25(a2) = *v2;
  v3 = (int *)sub_430F90(v11);
  if ( !*(_BYTE *)sub_4746F0(*v3) )
  {
    v4 = (int *)sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*v4) = a2;
  }
  v5 = (_DWORD *)sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *v5;
  if ( a2 == *(_DWORD *)sub_478AB0(this) )
  {
    *(_DWORD *)sub_478AB0(this) = v11;
  }
  else
  {
    v6 = (int *)sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*v6) )
    {
      v7 = (int *)sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*v7) = v11;
    }
    else
    {
      v8 = (_DWORD *)sub_446FF0(a2);
      *(_DWORD *)unknown_libname_25(*v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = (int *)sub_446FF0(a2);
  *result = v11;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004782B0) --------------------------------------------------------
CMemory **__stdcall sub_4782B0(int a1, int a2, int a3, const void *a4, char a5)
{
  _DWORD *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_479630(1);
  v6 = operator new(0x74u, v7);
  if ( v6 )
    sub_479F10(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00478330) --------------------------------------------------------
int sub_478330()
{
  return std::allocator<CryptoPP::ECPPoint>::max_size();
}

//----- (00478350) --------------------------------------------------------
_DWORD *__thiscall sub_478350(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_479650(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (004783B0) --------------------------------------------------------
void *__thiscall sub_4783B0(int *this, void *a2, void *a3)
{
  int v3; // eax

  v3 = sub_4796D0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (004783E0) --------------------------------------------------------
int *__thiscall sub_4783E0(int *this)
{
  int *result; // eax

  this[1] = (int)sub_479760();
  *(_BYTE *)sub_474DD0(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)CServer::SendAlive(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (00478450) --------------------------------------------------------
int __thiscall sub_478450(int *this, void *a2)
{
  void *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_474DD0(v5) )
  {
    v2 = (void *)sub_473500(v5);
    if ( sub_471ED0(v2, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004784E0) --------------------------------------------------------
CMemory **__stdcall sub_4784E0(int a1, int a2, int a3, std::string *a4, char a5)
{
  _DWORD *v6; // [esp+8h] [ebp-8h]
  CMemory **v7; // [esp+Ch] [ebp-4h]

  v7 = sub_478640(1);
  v6 = operator new(0x3Cu, v7);
  if ( v6 )
    sub_479F60(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00478560) --------------------------------------------------------
CMemory **__stdcall sub_478560(int a1, int a2, const void *a3)
{
  _DWORD *v4; // [esp+8h] [ebp-8h]
  CMemory **v5; // [esp+Ch] [ebp-4h]

  v5 = sub_478640(1);
  v4 = operator new(0x3Cu, v5);
  if ( v4 )
    sub_479FB0(v4, a1, a2, a3);
  return v5;
}

//----- (004785D0) --------------------------------------------------------
_DWORD *__thiscall sub_4785D0(_DWORD *this, unsigned int a2)
{
  void *v2; // eax
  _DWORD *result; // eax
  char v5[28]; // [esp+4h] [ebp-40h] BYREF
  char v6[36]; // [esp+20h] [ebp-24h] BYREF

  if ( sub_4798B0() - this[2] < a2 )
  {
    std::string::string((std::string *)v5, "list<T> too long");
    std::length_error::length_error((std::length_error *)v6, (const std::string *)v5);
    sub_40F510(v2);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v6);
    sub_40F780((std::string *)v5);
  }
  result = this;
  this[2] += a2;
  return result;
}
// 478607: variable 'v2' is possibly undefined

//----- (00478640) --------------------------------------------------------
CMemory **__stdcall sub_478640(int a1)
{
  return sub_47A4B0(a1);
}

//----- (00478660) --------------------------------------------------------
int *__thiscall sub_478660(int *this)
{
  sub_434540(this);
  return this;
}

//----- (00478680) --------------------------------------------------------
int *__thiscall sub_478680(int *this, int *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_4798D0(this);
  *a2 = v4;
  return a2;
}

//----- (004786B0) --------------------------------------------------------
int *__thiscall sub_4786B0(int *this)
{
  sub_4798F0(this);
  return this;
}

//----- (004786D0) --------------------------------------------------------
int *__thiscall sub_4786D0(int *this)
{
  sub_479AB0(this);
  return this;
}

//----- (004786F0) --------------------------------------------------------
int *__thiscall sub_4786F0(int *this)
{
  sub_4799D0(this);
  return this;
}

//----- (00478710) --------------------------------------------------------
_DWORD *__stdcall sub_478710(_DWORD *a1, int a2)
{
  *a1 = *(_DWORD *)unknown_libname_21(a2);
  return a1;
}
// 4473D0: using guessed type _DWORD __stdcall unknown_libname_21(_DWORD);

//----- (00478740) --------------------------------------------------------
int *__thiscall sub_478740(int *this)
{
  sub_433950(this);
  return this;
}

//----- (00478760) --------------------------------------------------------
int *__thiscall sub_478760(int *this, int *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_479B70(this);
  *a2 = v4;
  return a2;
}

//----- (00478790) --------------------------------------------------------
int *__thiscall sub_478790(int *this)
{
  sub_479B90(this);
  return this;
}

//----- (004787B0) --------------------------------------------------------
int *__thiscall sub_4787B0(int *this)
{
  *this = *(_DWORD *)sub_446FF0(*this);
  return this;
}

//----- (004787E0) --------------------------------------------------------
int *__thiscall sub_4787E0(int *this, int *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_475980(this);
  *a2 = v4;
  return a2;
}

//----- (00478810) --------------------------------------------------------
int *__thiscall sub_478810(int *this)
{
  sub_479D50(this);
  return this;
}

//----- (00478830) --------------------------------------------------------
int *__thiscall sub_478830(int *this)
{
  sub_479C70(this);
  return this;
}

//----- (00478850) --------------------------------------------------------
void *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::clear(int *this)
{
  void *result; // eax
  void *v3; // [esp+4h] [ebp-8h]
  void *v4; // [esp+8h] [ebp-4h]

  v4 = *(void **)unknown_libname_25(this[1]);
  *(_DWORD *)unknown_libname_25(this[1]) = this[1];
  *(_DWORD *)sub_446FF0(this[1]) = this[1];
  this[2] = 0;
  while ( 1 )
  {
    result = v4;
    if ( v4 == (void *)this[1] )
      break;
    v3 = *(void **)unknown_libname_25(v4);
    sub_44CD70(v4);
    sub_4338F0(v4, 1);
    v4 = v3;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004788F0) --------------------------------------------------------
void __thiscall std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator>(std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *this, const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *_Val1, const std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator *_Val2)
{
  *(_DWORD *)this = *(_DWORD *)_Val1;
  *((_DWORD *)this + 1) = *(_DWORD *)_Val2;
}

//----- (00478920) --------------------------------------------------------
int __stdcall sub_478920(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_478920(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004789A0) --------------------------------------------------------
int __thiscall sub_4789A0(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478A30) --------------------------------------------------------
int __stdcall sub_478A30(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_478A30(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478AB0) --------------------------------------------------------
int __thiscall sub_478AB0(int *this)
{
  return sub_446FF0(this[1]);
}

//----- (00478AD0) --------------------------------------------------------
int __thiscall sub_478AD0(int *this, const char **a2)
{
  const char **v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v2 = (const char **)sub_473500(v5);
    if ( StrCmp::operator()((StrCmp *)this, *a2, *v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478B60) --------------------------------------------------------
int __stdcall sub_478B60(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_478B60(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478BE0) --------------------------------------------------------
unsigned int __thiscall std::allocator<std::pair<char const * const,CItem *>>::max_size(std::allocator<std::pair<char const * const,CItem *> > *this)
{
  return 0x1FFFFFFF;
}

//----- (00478C10) --------------------------------------------------------
int __stdcall sub_478C10(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_433230((int)a1); ; i = (char *)sub_433230(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_478C10(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478C90) --------------------------------------------------------
int __thiscall sub_478C90(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4734F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478D20) --------------------------------------------------------
CMemory **sub_478D20()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_478E70(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)unknown_libname_25(v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_4734E0((int)v7) = 1;
  *(_BYTE *)sub_4734F0((int)v7) = 0;
  return v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478E40) --------------------------------------------------------
int sub_478E40()
{
  return 119304647;
}

//----- (00478E70) --------------------------------------------------------
CMemory **__stdcall sub_478E70(int a1)
{
  return sub_47A450(a1);
}

//----- (00478E90) --------------------------------------------------------
int __cdecl sub_478E90(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_473EC0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00478ED0) --------------------------------------------------------
int __cdecl sub_478ED0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)unknown_libname_25(a1);
    if ( *(_BYTE *)sub_473EC0(*v1) )
      break;
    a1 = *(_DWORD *)unknown_libname_25(a1);
  }
  return a1;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478F10) --------------------------------------------------------
int __thiscall sub_478F10(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_473EC0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00478FA0) --------------------------------------------------------
CMemory **sub_478FA0()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_4790F0(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)unknown_libname_25(v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_476A70((int)v7) = 1;
  *(_BYTE *)sub_473EC0((int)v7) = 0;
  return v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004790C0) --------------------------------------------------------
unsigned int __thiscall std::allocator<CIOSocket::CIOTimer>::max_size(std::allocator<CIOSocket::CIOTimer> *this)
{
  return 357913941;
}

//----- (004790F0) --------------------------------------------------------
CMemory **__stdcall sub_4790F0(int a1)
{
  return sub_47A470(a1);
}

//----- (00479110) --------------------------------------------------------
int __stdcall sub_479110(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_433230((int)a1); ; i = (char *)sub_433230(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_479110(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479190) --------------------------------------------------------
int __cdecl sub_479190(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)unknown_libname_25(a1);
    if ( *(_BYTE *)sub_433230(*v1) )
      break;
    a1 = *(_DWORD *)unknown_libname_25(a1);
  }
  return a1;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004791D0) --------------------------------------------------------
int __thiscall sub_4791D0(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_433230(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479260) --------------------------------------------------------
CMemory **sub_479260()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_4793B0(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)unknown_libname_25(v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_433730((int)v7) = 1;
  *(_BYTE *)sub_433230((int)v7) = 0;
  return v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479380) --------------------------------------------------------
int std::allocator<std::pair<std::string const,void *>>::max_size()
{
  return 0x7FFFFFF;
}

//----- (004793B0) --------------------------------------------------------
CMemory **__stdcall sub_4793B0(int a1)
{
  return sub_433B00(a1);
}

//----- (004793D0) --------------------------------------------------------
int __cdecl sub_4793D0(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)sub_430F90(a1);
    if ( *(_BYTE *)sub_4746F0(*v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00479410) --------------------------------------------------------
int __cdecl sub_479410(int a1)
{
  int *v1; // eax

  while ( 1 )
  {
    v1 = (int *)unknown_libname_25(a1);
    if ( *(_BYTE *)sub_4746F0(*v1) )
      break;
    a1 = *(_DWORD *)unknown_libname_25(a1);
  }
  return a1;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479450) --------------------------------------------------------
int __thiscall sub_479450(int *this, _DWORD *a2)
{
  _DWORD *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_4746F0(v5) )
  {
    v2 = (_DWORD *)sub_473500(v5);
    if ( sub_4186F0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004794E0) --------------------------------------------------------
CMemory **sub_4794E0()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_479630(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)unknown_libname_25(v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_477760((int)v7) = 1;
  *(_BYTE *)sub_4746F0((int)v7) = 0;
  return v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479600) --------------------------------------------------------
int sub_479600()
{
  return 42949672;
}

//----- (00479630) --------------------------------------------------------
CMemory **__stdcall sub_479630(int a1)
{
  return sub_47A490(a1);
}

//----- (00479650) --------------------------------------------------------
int __stdcall sub_479650(void *a1)
{
  char *i; // eax
  int result; // eax
  void **v3; // eax
  void *v4; // [esp+4h] [ebp-4h]

  v4 = a1;
  for ( i = (char *)sub_474DD0((int)a1); ; i = (char *)sub_474DD0((int)v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (void **)sub_430F90((int)v4);
    sub_479650(*v3);
    v4 = *(void **)unknown_libname_25(v4);
    sub_475700(a1);
    sub_4338F0(a1, 1);
    a1 = v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004796D0) --------------------------------------------------------
int __thiscall sub_4796D0(int *this, void *a2)
{
  void *v2; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = this[1];
  while ( !*(_BYTE *)sub_474DD0(v5) )
  {
    v2 = (void *)sub_473500(v5);
    if ( sub_471ED0(a2, v2) )
    {
      v6 = v5;
      v5 = *(_DWORD *)unknown_libname_25(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479760) --------------------------------------------------------
CMemory **sub_479760()
{
  void *v0; // eax
  void *v1; // eax
  void *v2; // eax
  int v4; // [esp+4h] [ebp-14h] BYREF
  int v5; // [esp+8h] [ebp-10h] BYREF
  int v6; // [esp+Ch] [ebp-Ch] BYREF
  CMemory **v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = sub_478640(1);
  v8 = 0;
  v6 = 0;
  v0 = (void *)unknown_libname_25(v7);
  sub_42F9B0(v0, (int)&v6);
  ++v8;
  v5 = 0;
  v1 = (void *)sub_446FF0((int)v7);
  sub_42F9B0(v1, (int)&v5);
  ++v8;
  v4 = 0;
  v2 = (void *)sub_430F90((int)v7);
  sub_42F9B0(v2, (int)&v4);
  *(_BYTE *)sub_474DC0((int)v7) = 1;
  *(_BYTE *)sub_474DD0((int)v7) = 0;
  return v7;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479880) --------------------------------------------------------
int std::allocator<CryptoPP::ECPPoint>::max_size()
{
  return 97612893;
}

//----- (004798B0) --------------------------------------------------------
int sub_4798B0()
{
  return sub_47A030();
}

//----- (004798D0) --------------------------------------------------------
int *__thiscall sub_4798D0(int *this)
{
  sub_47A060(this);
  return this;
}

//----- (004798F0) --------------------------------------------------------
int __thiscall sub_4798F0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_473EC0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)unknown_libname_25(*this);
    if ( *(_BYTE *)sub_473EC0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_473EC0(v5) || *this != *(_DWORD *)unknown_libname_25(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_473EC0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)unknown_libname_25(*this);
      result = sub_478E90(*v3);
      *this = result;
    }
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004799D0) --------------------------------------------------------
int __thiscall sub_4799D0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_4734F0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)unknown_libname_25(*this);
    if ( *(_BYTE *)sub_4734F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_4734F0(v5) || *this != *(_DWORD *)unknown_libname_25(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_4734F0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)unknown_libname_25(*this);
      result = sub_473C60(*v3);
      *this = result;
    }
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479AB0) --------------------------------------------------------
int __thiscall sub_479AB0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_4734F0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_4734F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_4734F0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_473CA0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00479B70) --------------------------------------------------------
int *__thiscall sub_479B70(int *this)
{
  sub_47A080(this);
  return this;
}

//----- (00479B90) --------------------------------------------------------
int __thiscall sub_479B90(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_4746F0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)unknown_libname_25(*this);
    if ( *(_BYTE *)sub_4746F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_4746F0(v5) || *this != *(_DWORD *)unknown_libname_25(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_4746F0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)unknown_libname_25(*this);
      result = sub_4793D0(*v3);
      *this = result;
    }
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479C70) --------------------------------------------------------
int __thiscall sub_479C70(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)sub_474DD0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*this);
    *this = result;
  }
  else
  {
    v2 = (int *)unknown_libname_25(*this);
    if ( *(_BYTE *)sub_474DD0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        if ( *(_BYTE *)sub_474DD0(v5) || *this != *(_DWORD *)unknown_libname_25(v5) )
          break;
        *this = v5;
      }
      result = *(char *)sub_474DD0(v5);
      if ( !result )
        *this = v5;
    }
    else
    {
      v3 = (int *)unknown_libname_25(*this);
      result = sub_4754A0(*v3);
      *this = result;
    }
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00479D50) --------------------------------------------------------
int __thiscall sub_479D50(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_474DD0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_474DD0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_474DD0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_4754E0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (00479E10) --------------------------------------------------------
_DWORD *__thiscall sub_479E10(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6)
{
  *this = a2;
  this[1] = a3;
  this[2] = a4;
  qmemcpy(this + 3, a5, 0x20u);
  *((_BYTE *)this + 44) = a6;
  *((_BYTE *)this + 45) = 0;
  return this;
}

//----- (00479E60) --------------------------------------------------------
_DWORD *__thiscall sub_479E60(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6)
{
  *this = a2;
  this[1] = a3;
  this[2] = a4;
  qmemcpy(this + 3, a5, 0x24u);
  *((_BYTE *)this + 48) = a6;
  *((_BYTE *)this + 49) = 0;
  return this;
}

//----- (00479EB0) --------------------------------------------------------
_DWORD *__thiscall sub_479EB0(_DWORD *this, int a2, int a3, int a4, _DWORD *a5, char a6)
{
  _DWORD *v6; // ecx

  *this = a2;
  this[1] = a3;
  this[2] = a4;
  v6 = this + 3;
  *v6 = *a5;
  v6[1] = a5[1];
  v6[2] = a5[2];
  *((_BYTE *)this + 24) = a6;
  *((_BYTE *)this + 25) = 0;
  return this;
}

//----- (00479F10) --------------------------------------------------------
_DWORD *__thiscall sub_479F10(_DWORD *this, int a2, int a3, int a4, const void *a5, char a6)
{
  *this = a2;
  this[1] = a3;
  this[2] = a4;
  qmemcpy(this + 3, a5, 0x64u);
  *((_BYTE *)this + 112) = a6;
  *((_BYTE *)this + 113) = 0;
  return this;
}

//----- (00479F60) --------------------------------------------------------
_DWORD *__thiscall sub_479F60(_DWORD *this, int a2, int a3, int a4, std::string *a5, char a6)
{
  *this = a2;
  this[1] = a3;
  this[2] = a4;
  sub_479FF0((int)(this + 3), a5);
  *((_BYTE *)this + 56) = a6;
  *((_BYTE *)this + 57) = 0;
  return this;
}

//----- (00479FB0) --------------------------------------------------------
_DWORD *__thiscall sub_479FB0(_DWORD *this, int a2, int a3, const void *a4)
{
  *this = a2;
  this[1] = a3;
  qmemcpy(this + 2, a4, 0x33u);
  return this;
}

//----- (00479FF0) --------------------------------------------------------
int __thiscall sub_479FF0(int this, std::string *_Right)
{
  std::string::string((std::string *)this, _Right);
  *(_DWORD *)(this + 28) = *((_DWORD *)_Right + 7);
  *(_DWORD *)(this + 32) = *((_DWORD *)_Right + 8);
  *(_DWORD *)(this + 36) = *((_DWORD *)_Right + 9);
  *(_DWORD *)(this + 40) = *((_DWORD *)_Right + 10);
  return this;
}

//----- (0047A030) --------------------------------------------------------
int sub_47A030()
{
  return 84215045;
}

//----- (0047A060) --------------------------------------------------------
int *__thiscall sub_47A060(int *this)
{
  sub_47A0A0(this);
  return this;
}

//----- (0047A080) --------------------------------------------------------
int *__thiscall sub_47A080(int *this)
{
  sub_47A160(this);
  return this;
}

//----- (0047A0A0) --------------------------------------------------------
int __thiscall sub_47A0A0(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_473EC0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_473EC0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_473EC0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_478ED0(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (0047A160) --------------------------------------------------------
int __thiscall sub_47A160(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_4746F0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_4746F0(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_4746F0(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_479410(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (0047A220) --------------------------------------------------------
_DWORD *__cdecl sub_47A220(_DWORD *a1, _DWORD *a2)
{
  *a2 = *a1;
  a2[1] = a1[1];
  return a1 + 2;
}

//----- (0047A240) --------------------------------------------------------
_DWORD *__cdecl sub_47A240(_DWORD *a1, _DWORD *a2)
{
  *a2 = *a1;
  return a1 + 1;
}

//----- (0047A260) --------------------------------------------------------
int __cdecl sub_47A260(int a1, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14)
{
  qmemcpy((void *)a1, &a2, 0x30u);
  *(_WORD *)(a1 + 48) = a14;
  *(_BYTE *)(a1 + 50) = BYTE2(a14);
  return a1 + 51;
}

//----- (0047A280) --------------------------------------------------------
BOOL __cdecl std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(int a1, char a2, _DWORD *a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_23(&v5);
  return std::_Distance2<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
           a1,
           a2,
           a3);
}
// 47A283: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_23(_DWORD);

//----- (0047A2B0) --------------------------------------------------------
BOOL __cdecl sub_47A2B0(int a1, char a2, _DWORD *a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_23(&v5);
  return sub_47A520(a1, a2, a3);
}
// 47A2B3: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_23(_DWORD);

//----- (0047A2E0) --------------------------------------------------------
BOOL __cdecl sub_47A2E0(int a1, char a2, _DWORD *a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_23(&v5);
  return sub_47A560(a1, a2, a3);
}
// 47A2E3: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_23(_DWORD);

//----- (0047A310) --------------------------------------------------------
BOOL __cdecl sub_47A310(int a1, char a2, _DWORD *a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_23(&v5);
  return sub_47A5A0(a1, a2, a3);
}
// 47A313: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_23(_DWORD);

//----- (0047A340) --------------------------------------------------------
BOOL __cdecl sub_47A340(int a1, char a2, _DWORD *a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_23(&v5);
  return sub_47A5E0(a1, a2, a3);
}
// 47A343: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_23(_DWORD);

//----- (0047A370) --------------------------------------------------------
BOOL __cdecl sub_47A370(int a1, char a2, _DWORD *a3)
{
  int v3; // ecx
  char v5; // [esp+1h] [ebp-1h] BYREF

  v5 = HIBYTE(v3);
  unknown_libname_23(&v5);
  return sub_47A620(a1, a2, a3);
}
// 47A373: variable 'v3' is possibly undefined
// 447560: using guessed type _DWORD __cdecl unknown_libname_23(_DWORD);

//----- (0047A3B0) --------------------------------------------------------
char *__cdecl sub_47A3B0(char *a1, char *a2)
{
  unknown_libname_14(&a1, &a2);
  return std::_Destroy_range<std::allocator<boost::shared_ptr<boost::asio::detail::win_mutex>>>(a1, a2);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0047A3F0) --------------------------------------------------------
_DWORD *__cdecl sub_47A3F0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  unknown_libname_14(&a1, &a3);
  return std::_Copy_backward_opt<IPAddrMask *,IPAddrMask *>(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0047A430) --------------------------------------------------------
CMemory **__cdecl sub_47A430(int a1)
{
  return operator_new(8 * a1);
}

//----- (0047A450) --------------------------------------------------------
CMemory **__cdecl sub_47A450(int a1)
{
  return operator_new(52 * a1);
}

//----- (0047A470) --------------------------------------------------------
CMemory **__cdecl sub_47A470(int a1)
{
  return operator_new(28 * a1);
}

//----- (0047A490) --------------------------------------------------------
CMemory **__cdecl sub_47A490(int a1)
{
  return operator_new(116 * a1);
}

//----- (0047A4B0) --------------------------------------------------------
CMemory **__cdecl sub_47A4B0(int a1)
{
  return operator_new(60 * a1);
}

//----- (0047A4D0) --------------------------------------------------------
void *__thiscall sub_47A4D0(void *this, char a2)
{
  sub_47A500((int)this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047A500) --------------------------------------------------------
void __thiscall sub_47A500(int this)
{
  sub_46C2D0((std::string *)(this + 12));
}

//----- (0047A520) --------------------------------------------------------
BOOL __cdecl sub_47A520(int a1, char a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_4758C0(&a1);
  }
  return result;
}

//----- (0047A560) --------------------------------------------------------
BOOL __cdecl sub_47A560(int a1, char a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_4798D0(&a1);
  }
  return result;
}

//----- (0047A5A0) --------------------------------------------------------
BOOL __cdecl sub_47A5A0(int a1, char a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_475880(&a1);
  }
  return result;
}

//----- (0047A5E0) --------------------------------------------------------
BOOL __cdecl sub_47A5E0(int a1, char a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_479B70(&a1);
  }
  return result;
}

//----- (0047A620) --------------------------------------------------------
BOOL __cdecl sub_47A620(int a1, char a2, _DWORD *a3)
{
  BOOL result; // eax

  while ( 1 )
  {
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a1,
               (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a2);
    if ( !result )
      break;
    ++*a3;
    sub_475980(&a1);
  }
  return result;
}

//----- (0047A660) --------------------------------------------------------
char *__cdecl std::_Destroy_range<std::allocator<boost::shared_ptr<boost::asio::detail::win_mutex>>>(char *a1, char *a2)
{
  char *result; // eax

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (0047A690) --------------------------------------------------------
void *__cdecl sub_47A690(int a1, int a2, void *a3)
{
  unknown_libname_14(&a1, &a3);
  return sub_447660(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0047A6D0) --------------------------------------------------------
void __stdcall sub_47A6D0(void *_Ptr, int _Val)
{
  std::_Construct<IPAddrMask,IPAddrMask>((IPAddrMask *)_Ptr, (const IPAddrMask *)_Val);
}

//----- (0047A6F0) --------------------------------------------------------
void *__thiscall sub_47A6F0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047A720) --------------------------------------------------------
void *__thiscall sub_47A720(void *this, _BYTE *a2, int a3)
{
  char v4; // [esp-4h] [ebp-Ch]

  v4 = (char)this;
  std___Init_locks__operator_(a3);
  std::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Tree_val<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>(
    this,
    a2,
    v4);
  sub_47EC10((int *)this);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0047A760) --------------------------------------------------------
void *__thiscall sub_47A760(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047A790) --------------------------------------------------------
void *__thiscall sub_47A790(void *this)
{
  void *v2; // [esp-4h] [ebp-Ch] BYREF
  void *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  LocaleUpdate__GetLocaleT(&v2);
  std::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(
    v3,
    (char)v2);
  *((_DWORD *)v3 + 1) = sub_47A7D0();
  *((_DWORD *)v3 + 2) = 0;
  return v3;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047A7D0) --------------------------------------------------------
int sub_47A7D0()
{
  void *v0; // eax
  void *v1; // eax
  int v3; // [esp+4h] [ebp-8h] BYREF
  int v4; // [esp+8h] [ebp-4h]

  v3 = (int)sub_478640(1);
  v4 = 0;
  v0 = (void *)unknown_libname_25(v3);
  sub_42F9B0(v0, (int)&v3);
  ++v4;
  v1 = (void *)sub_446FF0(v3);
  sub_42F9B0(v1, (int)&v3);
  return v3;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047A870) --------------------------------------------------------
void *__thiscall std::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(void *this, char a2)
{
  char v3; // [esp-4h] [ebp-Ch]

  v3 = (char)this;
  std___Init_locks__operator_(&a2);
  std::_List_ptr<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_ptr<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(
    this,
    v3);
  std___Init_locks__operator_(&a2);
  return this;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0047A8B0) --------------------------------------------------------
CIOObject *__thiscall sub_47A8B0(CIOObject *this)
{
  CIOObject::CIOObject(this);
  *(_DWORD *)this = &off_4BBF54;
  return this;
}
// 4BBF54: using guessed type int (__stdcall *off_4BBF54)(int);

//----- (0047A8D0) --------------------------------------------------------
int __thiscall sub_47A8D0(int *this)
{
  return sub_47A8F0(this);
}

//----- (0047A8F0) --------------------------------------------------------
int __thiscall sub_47A8F0(int *this)
{
  return sub_47A910(this);
}

//----- (0047A910) --------------------------------------------------------
int __thiscall sub_47A910(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4729B0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047A9C0) --------------------------------------------------------
int __thiscall sub_47A9C0(int *this)
{
  return sub_47A9E0(this);
}

//----- (0047A9E0) --------------------------------------------------------
int __thiscall sub_47A9E0(int *this)
{
  return sub_47AA00(this);
}

//----- (0047AA00) --------------------------------------------------------
int __thiscall sub_47AA00(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_472A80(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047AAB0) --------------------------------------------------------
BOOL __thiscall sub_47AAB0(_DWORD *this, int a2)
{
  return this[1] == *(_DWORD *)(a2 + 460);
}

//----- (0047AAE0) --------------------------------------------------------
BOOL __thiscall sub_47AAE0(_DWORD *this, int a2)
{
  return *(_DWORD *)(a2 + 60) >= this[1];
}

//----- (0047AB00) --------------------------------------------------------
BOOL __thiscall sub_47AB00(int *this, int a2)
{
  return *(_DWORD *)(a2 + 460) == this[1] >> 16 && ((unsigned __int16)this[1] & *(_DWORD *)(a2 + 464)) != 0;
}

//----- (0047AB60) --------------------------------------------------------
BOOL __thiscall sub_47AB60(_DWORD *this, int a2)
{
  return *(_DWORD *)(a2 + 468) >= this[1];
}

//----- (0047AB90) --------------------------------------------------------
int __userpurge sub_47AB90@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  int *v6; // eax
  char v9[4]; // [esp+4h] [ebp-1Ch] BYREF
  int v10; // [esp+8h] [ebp-18h] BYREF
  int v11; // [esp+Ch] [ebp-14h]
  int v12; // [esp+10h] [ebp-10h]
  int v13; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  int v15; // [esp+1Ch] [ebp-4h] BYREF

  CIOCriticalSection::Enter((CIOCriticalSection *)(a5 + 1020), a2, a3, a4);
  sub_430C20((int *)(a1 + 8), &v15);
  while ( 1 )
  {
    v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)(a1 + 8), (int)v9);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v15,
            v5) )
      break;
    v6 = (int *)sub_420010(&v15);
    v11 = *v6;
    v12 = v6[1];
    v13 = v6[2];
    v14 = v6[3];
    if ( !CPlayer::_FindItem(a5, v11, v13) )
    {
      CIOCriticalSection::Leave((CIOCriticalSection *)(a5 + 1020), a2, a3, a4);
      return 0;
    }
    sub_430E00(&v15, &v10, 0);
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(a5 + 1020), a2, a3, a4);
  return 1;
}

//----- (0047AC50) --------------------------------------------------------
BOOL __thiscall sub_47AC50(_DWORD *this, int a2)
{
  return (int)CPlayer::GetPartySize((_DWORD *)a2) >= this[1];
}

//----- (0047AC80) --------------------------------------------------------
BOOL __thiscall sub_47AC80(_DWORD *this, int a2)
{
  return CPlayer::CheckQuestFlag(a2, this[1]);
}

//----- (0047ACA0) --------------------------------------------------------
int __thiscall sub_47ACA0(_DWORD *this, int a2)
{
  return CPlayer::CheckQuestClear(a2, this[1]);
}

//----- (0047ACC0) --------------------------------------------------------
BOOL __thiscall sub_47ACC0(_DWORD *this, int a2)
{
  return CPlayer::CheckQuestClear(a2, this[1]) == 0;
}

//----- (0047ACF0) --------------------------------------------------------
int __thiscall sub_47ACF0(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+0h] [ebp-8h]

  if ( (unsigned __int16)this[1] )
    v3 = CChar::IsGState(a2, 1 << BYTE2(this[1]));
  else
    v3 = CChar::IsGState(a2, 1 << BYTE2(this[1])) == 0;
  return v3;
}

//----- (0047AD50) --------------------------------------------------------
void __thiscall sub_47AD50(_DWORD *this, int a2)
{
  CPlayer::Write(a2, 74, "d", this[1]);
}

//----- (0047AD80) --------------------------------------------------------
void __thiscall sub_47AD80(_DWORD **this, int a1)
{
  CQuest::Proceed(this[1], a1);
}

//----- (0047ADA0) --------------------------------------------------------
void __thiscall sub_47ADA0(_DWORD *this, int a2)
{
  *(_DWORD *)(a2 + 464) |= this[1];
  CPlayer::Write(a2, 68, "bb", 38, *(_DWORD *)(a2 + 464));
  CDBSocket::Write(15, "db", *(_DWORD *)(a2 + 452), this[1]);
  CPlayerSkill::ChangeOccupationAutoLearnSkill((void *)(a2 + 624));
}

//----- (0047AE20) --------------------------------------------------------
int __thiscall sub_47AE20(_DWORD *this, int a2)
{
  return (*(int (__cdecl **)(int, int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 25, 1, this[1], (int)this[1] >> 31);
}

//----- (0047AE50) --------------------------------------------------------
BOOL __userpurge sub_47AE50@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v5; // eax
  BOOL result; // eax
  int *v7; // eax
  char v9[4]; // [esp+4h] [ebp-20h] BYREF
  char v10[4]; // [esp+8h] [ebp-1Ch] BYREF
  char *v11; // [esp+Ch] [ebp-18h]
  int v12; // [esp+10h] [ebp-14h]
  int v13; // [esp+14h] [ebp-10h]
  int v14; // [esp+18h] [ebp-Ch]
  char v16[4]; // [esp+20h] [ebp-4h] BYREF

  sub_430C20((int *)this + 2, v16);
  while ( 1 )
  {
    v5 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40((_DWORD *)this + 2, (int)v9);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)v16,
               v5);
    if ( !result )
      break;
    v7 = (int *)sub_420010(v16);
    v12 = *v7;
    v13 = v7[1];
    v14 = v7[2];
    if ( v7[3] )
    {
      v11 = (char *)CItem::CreateItem(v12, v13, v14, -1);
      if ( v11 )
      {
        CIOObject::AddRef((volatile int *)v11, ebx0, a3, a4);
        if ( CPlayer::InsertItem(a2, 16, (int)v11) == 1 )
        {
          if ( (*(int (__thiscall **)(char *))(*(_DWORD *)v11 + 196))(v11) )
            ++*(_DWORD *)(a2 + 1104);
        }
        else
        {
          CBase::Delete(v11);
        }
        CIOObject::Release((volatile int *)v11, ebx0, a3, a4);
      }
    }
    else if ( !CPlayer::RemoveItem(a2, 16, v12, v14) )
    {
      LOG_ERR(
        "CActionItem::Action() Can't remove Quest Item. (pid:%d, index:%d, num:%d)",
        *(_DWORD *)(a2 + 452),
        v12,
        v14);
    }
    sub_430E00((int *)v16, v10, 0);
  }
  return result;
}

//----- (0047AF80) --------------------------------------------------------
void __userpurge sub_47AF80(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  volatile int *v6; // [esp+4h] [ebp-4h]

  v6 = (volatile int *)CItem::CreateQuestItem(this[1]);
  if ( v6 )
  {
    CIOObject::AddRef(v6, ebx0, a3, a4);
    if ( CPlayer::InsertItem(a2, 16, (int)v6) == 1 )
    {
      if ( (*(int (__thiscall **)(volatile int *, _DWORD *))(*v6 + 196))(v6, this) )
        ++*(_DWORD *)(a2 + 1104);
    }
    else
    {
      CBase::Delete((char *)v6);
    }
    CIOObject::Release(v6, ebx0, a3, a4);
  }
}

//----- (0047B000) --------------------------------------------------------
void __thiscall sub_47B000(_DWORD *this, _DWORD *a2)
{
  (*(void (__cdecl **)(_DWORD *, int, int, _DWORD))(*a2 + 88))(a2, 30, 1, this[1]);
  CDBSocket::Write(16, "dbw", a2[113], 30, a2[117]);
}

//----- (0047B050) --------------------------------------------------------
void __thiscall sub_47B050(_DWORD *this, _DWORD *a2)
{
  (*(void (__cdecl **)(_DWORD *, int, int, _DWORD))(*a2 + 88))(a2, 24, 1, this[1]);
  CDBSocket::Write(16, "dbw", a2[113], 24, a2[137]);
}

//----- (0047B0A0) --------------------------------------------------------
void __thiscall sub_47B0A0(_DWORD *this, int a2)
{
  CPlayer::SaveQuestFlag(a2, this[1], 0);
}

//----- (0047B0C0) --------------------------------------------------------
void __thiscall sub_47B0C0(_DWORD *this, int a2)
{
  CPlayer::SaveQuestFlag(a2, this[1], 1);
}

//----- (0047B0E0) --------------------------------------------------------
int __thiscall sub_47B0E0(_DWORD *this, _DWORD *a2)
{
  int v3; // [esp+14h] [ebp-8h]
  int v4; // [esp+18h] [ebp-4h]

  v4 = 1 << BYTE2(this[1]);
  if ( !(unsigned __int16)this[1] )
    return (*(int (__thiscall **)(_DWORD *, int))(*a2 + 112))(a2, v4);
  if ( v4 == 32 )
  {
    v3 = 600000;
    if ( CChar::IsBState(a2, 8i64) )
    {
      v3 = 300000;
    }
    else if ( CChar::IsBState(a2, 1i64) )
    {
      v3 = 300000;
    }
    a2[367] = v3 + GetTickCount();
    CPlayer::Write((int)a2, 67, "b", 44);
  }
  return (*(int (__thiscall **)(_DWORD *, int))(*a2 + 100))(a2, v4);
}

//----- (0047B1B0) --------------------------------------------------------
void __thiscall sub_47B1B0(_DWORD *this, int a2)
{
  CPlayer::QuestGuide(a2, this[1]);
}

//----- (0047B1D0) --------------------------------------------------------
void __stdcall sub_47B1D0(int a1)
{
  sub_4802D0((_DWORD *)(a1 + 624));
}

//----- (0047B1F0) --------------------------------------------------------
void __thiscall sub_47B1F0(_DWORD *this, int a2)
{
  int v2[2]; // [esp+4h] [ebp-8h] BYREF

  v2[0] = this[3] + 32;
  v2[1] = this[4] + 32;
  CPlayer::Teleport((_DWORD *)a2, this[2], v2, 0, 0);
}

//----- (0047B230) --------------------------------------------------------
int *__thiscall sub_47B230(int *this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  void (__thiscall ***v5)(_DWORD, int); // [esp+10h] [ebp-24h]
  char v6[4]; // [esp+14h] [ebp-20h] BYREF
  int v7; // [esp+18h] [ebp-1Ch] BYREF
  void (__thiscall ***v8)(_DWORD, int); // [esp+1Ch] [ebp-18h]
  void (__thiscall ***v9)(_DWORD, int); // [esp+20h] [ebp-14h]
  char v10[4]; // [esp+24h] [ebp-10h] BYREF
  int v11; // [esp+28h] [ebp-Ch] BYREF
  int v12; // [esp+2Ch] [ebp-8h] BYREF
  int v13; // [esp+30h] [ebp-4h] BYREF

  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(this, &v13);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this, v10);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v13,
            v1) )
      break;
    v8 = *(void (__thiscall ****)(_DWORD, int))sub_40F040(&v13);
    v9 = v8;
    if ( v8 )
      (**v9)(v9, 1);
    sub_47D0A0(&v13, &v11, 0);
  }
  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(this + 3, &v12);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this + 3, v6);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v12,
            v2) )
      break;
    v5 = *(void (__thiscall ****)(_DWORD, int))sub_40F040(&v12);
    if ( v5 )
      (**v5)(v5, 1);
    sub_47D0A0(&v12, &v7, 0);
  }
  sub_472990(this + 3);
  return sub_472990(this);
}

//----- (0047B330) --------------------------------------------------------
int __thiscall CCase::SetCondition(int *this, int a1)
{
  lisp::var *v2; // eax
  lisp::var *v4; // eax
  int v5; // eax
  lisp::var *v6; // eax
  int v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  int v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  int v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  int v19; // eax
  lisp::var *v20; // eax
  int v21; // eax
  lisp::var *v22; // eax
  lisp::var *v23; // eax
  _DWORD *v24; // [esp+0h] [ebp-D4h]
  _DWORD *v25; // [esp+4h] [ebp-D0h]
  _DWORD *v26; // [esp+8h] [ebp-CCh]
  _DWORD *v27; // [esp+Ch] [ebp-C8h]
  _DWORD *v28; // [esp+10h] [ebp-C4h]
  _DWORD *v29; // [esp+14h] [ebp-C0h]
  _DWORD *v30; // [esp+18h] [ebp-BCh]
  _DWORD *v31; // [esp+1Ch] [ebp-B8h]
  _DWORD *v32; // [esp+20h] [ebp-B4h]
  _DWORD *v33; // [esp+24h] [ebp-B0h]
  CMemory **v35; // [esp+30h] [ebp-A4h]
  char v36[4]; // [esp+34h] [ebp-A0h] BYREF
  char v37[4]; // [esp+38h] [ebp-9Ch] BYREF
  char v38[4]; // [esp+3Ch] [ebp-98h] BYREF
  CMemory **v39; // [esp+40h] [ebp-94h]
  char v40[4]; // [esp+44h] [ebp-90h] BYREF
  CMemory **v41; // [esp+48h] [ebp-8Ch]
  CMemory **v42; // [esp+4Ch] [ebp-88h]
  char v43[4]; // [esp+50h] [ebp-84h] BYREF
  char v44[4]; // [esp+54h] [ebp-80h] BYREF
  char v45[4]; // [esp+58h] [ebp-7Ch] BYREF
  CMemory **v46; // [esp+5Ch] [ebp-78h]
  char v47[4]; // [esp+60h] [ebp-74h] BYREF
  char v48[4]; // [esp+64h] [ebp-70h] BYREF
  CMemory **v49; // [esp+68h] [ebp-6Ch]
  char v50[4]; // [esp+6Ch] [ebp-68h] BYREF
  CMemory **v51; // [esp+70h] [ebp-64h]
  CMemory **v52; // [esp+74h] [ebp-60h]
  char v53[4]; // [esp+78h] [ebp-5Ch] BYREF
  char v54[4]; // [esp+7Ch] [ebp-58h] BYREF
  char v55[4]; // [esp+80h] [ebp-54h] BYREF
  CMemory **v56; // [esp+84h] [ebp-50h]
  char v57[4]; // [esp+88h] [ebp-4Ch] BYREF
  CMemory **v58; // [esp+8Ch] [ebp-48h]
  char v59[4]; // [esp+90h] [ebp-44h] BYREF
  int v60; // [esp+94h] [ebp-40h]
  int v61; // [esp+98h] [ebp-3Ch]
  int v62; // [esp+9Ch] [ebp-38h]
  int v63; // [esp+A0h] [ebp-34h]
  int v64[4]; // [esp+A4h] [ebp-30h] BYREF
  char v65[4]; // [esp+B4h] [ebp-20h] BYREF
  _DWORD *v66; // [esp+B8h] [ebp-1Ch]
  int v67; // [esp+BCh] [ebp-18h]
  int v68; // [esp+C0h] [ebp-14h]
  int v69; // [esp+C4h] [ebp-10h] BYREF
  char v70[4]; // [esp+C8h] [ebp-Ch]
  _DWORD *v71; // [esp+CCh] [ebp-8h] BYREF
  char v72[4]; // [esp+D0h] [ebp-4h]

  while ( 2 )
  {
    if ( (unsigned __int8)sub_402380(&a1) )
      return 1;
    lisp::var::pop((lisp::var *)&a1, (lisp::var *)&v69);
    v2 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v59);
    *(_DWORD *)v70 = sub_402360(v2);
    *(_DWORD *)v72 = CObjectDB::FindSymbol(v70[0]);
    if ( *(_DWORD *)v72 )
    {
      v71 = 0;
      switch ( *(_DWORD *)v72 )
      {
        case 7:
          v56 = operator_new(8u);
          if ( v56 )
          {
            v6 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v55);
            v7 = sub_40C8D0(v6);
            v32 = sub_47B9B0(v56, v7);
          }
          else
          {
            v32 = 0;
          }
          v71 = v32;
          goto LABEL_49;
        case 0x26:
          v58 = operator_new(8u);
          if ( v58 )
          {
            v4 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v57);
            v5 = sub_40C8D0(v4);
            v33 = sub_47B8E0(v58, v5);
          }
          else
          {
            v33 = 0;
          }
          v71 = v33;
          goto LABEL_49;
        case 0x2A:
          v8 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v54);
          v67 = sub_40C8D0(v8);
          v9 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v53);
          v68 = sub_40C8D0(v9);
          v52 = operator_new(8u);
          if ( v52 )
            v31 = sub_47B9E0(v52, (1 << v68) | (v67 << 16));
          else
            v31 = 0;
          v71 = v31;
          goto LABEL_49;
        case 0x32:
          v49 = operator_new(0x18u);
          if ( v49 )
            v29 = sub_47BA40(v49, 0);
          else
            v29 = 0;
          v71 = v29;
          v66 = v29;
          while ( !(unsigned __int8)sub_402380(&v69) )
          {
            lisp::var::pop((lisp::var *)&v69, (lisp::var *)v65);
            sub_47B8A0(v64);
            v12 = lisp::var::pop((lisp::var *)v65, (lisp::var *)v48);
            v64[0] = sub_40C8D0(v12);
            v13 = lisp::var::pop((lisp::var *)v65, (lisp::var *)v47);
            v64[2] = sub_40C8D0(v13);
            sub_47CF90((int)(v66 + 2), (CSyncPacket::CElement *)v64);
          }
          goto LABEL_49;
        case 0x45:
          v46 = operator_new(8u);
          if ( v46 )
          {
            v14 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v45);
            v15 = sub_40C8D0(v14);
            v28 = sub_47BAC0(v46, v15);
          }
          else
          {
            v28 = 0;
          }
          v71 = v28;
          goto LABEL_49;
        case 0x46:
          v16 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v44);
          v62 = sub_40C8D0(v16);
          v17 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v43);
          v63 = sub_40C8D0(v17);
          v42 = operator_new(8u);
          if ( v42 )
            v27 = sub_47BAF0(v42, v63 | (v62 << 16));
          else
            v27 = 0;
          v71 = v27;
          goto LABEL_49;
        case 0x47:
          v51 = operator_new(8u);
          if ( v51 )
          {
            v10 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v50);
            v11 = sub_40C8D0(v10);
            v30 = sub_47BA10(v51, v11);
          }
          else
          {
            v30 = 0;
          }
          v71 = v30;
          goto LABEL_49;
        case 0x4A:
          v41 = operator_new(8u);
          if ( v41 )
          {
            v18 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v40);
            v19 = sub_40C8D0(v18);
            v26 = sub_47BB20(v41, v19);
          }
          else
          {
            v26 = 0;
          }
          v71 = v26;
          goto LABEL_49;
        case 0x4B:
          v39 = operator_new(8u);
          if ( v39 )
          {
            v20 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v38);
            v21 = sub_40C8D0(v20);
            v25 = sub_47BB50(v39, v21);
          }
          else
          {
            v25 = 0;
          }
          v71 = v25;
          goto LABEL_49;
        case 0x55:
          v22 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v37);
          v60 = sub_40C8D0(v22);
          v23 = lisp::var::pop((lisp::var *)&v69, (lisp::var *)v36);
          v61 = sub_40C8D0(v23);
          v35 = operator_new(8u);
          if ( v35 )
            v24 = sub_47BB80(v35, v61 | (v60 << 16));
          else
            v24 = 0;
          v71 = v24;
LABEL_49:
          sub_47D000(this, (int)&v71);
          continue;
        default:
          LOG_ERR("CCase::SetCondition() Invalid Condition. (symbol:%d)", *(_DWORD *)v72);
          return 0;
      }
    }
    break;
  }
  LOG_ERR("CCase::SetCondition() Invalid symbol(%s)", *(const char **)v70);
  return 0;
}

//----- (0047B8A0) --------------------------------------------------------
_DWORD *__thiscall sub_47B8A0(_DWORD *this)
{
  this[2] = 0;
  this[1] = 0;
  *this = 0;
  this[3] = 1;
  return this;
}

//----- (0047B8E0) --------------------------------------------------------
_DWORD *__thiscall sub_47B8E0(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC020;
  return this;
}
// 4BC020: using guessed type int (__stdcall *off_4BC020[3])(int);

//----- (0047B910) --------------------------------------------------------
_DWORD *__thiscall std__locale__facet__facet(_DWORD *this, int a2)
{
  *this = &off_4BC028;
  this[1] = a2;
  return this;
}
// 4BC028: using guessed type int (__stdcall *off_4BC028)(int);

//----- (0047B940) --------------------------------------------------------
void *__thiscall sub_47B940(void *this, char a2)
{
  std__locale__facet___facet_0(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047B970) --------------------------------------------------------
void __thiscall std__locale__facet___facet_0(_DWORD *this)
{
  *this = &off_4BC028;
}
// 4BC028: using guessed type int (__stdcall *off_4BC028)(int);

//----- (0047B990) --------------------------------------------------------
int __thiscall sub_47B990(_DWORD *this)
{
  int result; // eax

  std__locale__facet___facet_0(this);
  return result;
}

//----- (0047B9B0) --------------------------------------------------------
_DWORD *__thiscall sub_47B9B0(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC030;
  return this;
}
// 4BC030: using guessed type int (__stdcall *off_4BC030[18])(int);

//----- (0047B9E0) --------------------------------------------------------
_DWORD *__thiscall sub_47B9E0(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC038;
  return this;
}
// 4BC038: using guessed type int (__stdcall *off_4BC038[16])(int);

//----- (0047BA10) --------------------------------------------------------
_DWORD *__thiscall sub_47BA10(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC040;
  return this;
}
// 4BC040: using guessed type int (__stdcall *off_4BC040[14])(int);

//----- (0047BA40) --------------------------------------------------------
_DWORD *__thiscall sub_47BA40(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC048;
  sub_47CF60((std::vector<CSyncPacket::CElement> *)(this + 2));
  return this;
}
// 4BC048: using guessed type int (__stdcall *off_4BC048[12])(int);

//----- (0047BA70) --------------------------------------------------------
void *__thiscall sub_47BA70(void *this, char a2)
{
  sub_47BAA0(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047BAA0) --------------------------------------------------------
void __thiscall sub_47BAA0(_DWORD *this)
{
  sub_430B90((std::vector<CSyncPacket::CElement> *)(this + 2));
  std__locale__facet___facet_0(this);
}

//----- (0047BAC0) --------------------------------------------------------
_DWORD *__thiscall sub_47BAC0(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC050;
  return this;
}
// 4BC050: using guessed type int (__stdcall *off_4BC050[10])(int);

//----- (0047BAF0) --------------------------------------------------------
_DWORD *__thiscall sub_47BAF0(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC058;
  return this;
}
// 4BC058: using guessed type int (__stdcall *off_4BC058[8])(int);

//----- (0047BB20) --------------------------------------------------------
_DWORD *__thiscall sub_47BB20(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC060;
  return this;
}
// 4BC060: using guessed type int (__stdcall *off_4BC060[6])(int);

//----- (0047BB50) --------------------------------------------------------
_DWORD *__thiscall sub_47BB50(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC068;
  return this;
}
// 4BC068: using guessed type int (__stdcall *off_4BC068[4])(int);

//----- (0047BB80) --------------------------------------------------------
_DWORD *__thiscall sub_47BB80(_DWORD *this, int a2)
{
  std__locale__facet__facet(this, a2);
  *this = off_4BC070;
  return this;
}
// 4BC070: using guessed type int (__stdcall *off_4BC070[2])(int);

//----- (0047BBB0) --------------------------------------------------------
_DWORD *__thiscall sub_47BBB0(_DWORD *this, char a2)
{
  sub_47B990(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047BBE0) --------------------------------------------------------
int __userpurge CQuest::SetAction@<eax>(int ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int a1)
{
  lisp::var *v4; // eax
  lisp::var *v6; // eax
  int v7; // eax
  lisp::var *v8; // eax
  int v9; // esi
  lisp::var *v10; // eax
  std::pair<char const * const,CItem *> *v11; // eax
  lisp::var *v12; // eax
  lisp::var *v13; // eax
  int v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  lisp::var *v20; // eax
  lisp::var *v21; // eax
  int v22; // eax
  lisp::var *v23; // eax
  int v24; // eax
  lisp::var *v25; // eax
  int v26; // eax
  lisp::var *v27; // eax
  lisp::var *v28; // eax
  lisp::var *v29; // eax
  lisp::var *v30; // eax
  lisp::var *v31; // eax
  lisp::var *v32; // eax
  lisp::var *v33; // eax
  int v34; // eax
  lisp::var *v35; // eax
  int v36; // eax
  lisp::var *v37; // eax
  int v38; // eax
  lisp::var *v39; // eax
  int v40; // eax
  _DWORD *v41; // [esp+4h] [ebp-14Ch]
  _DWORD *v42; // [esp+8h] [ebp-148h]
  _DWORD *v43; // [esp+Ch] [ebp-144h]
  _DWORD *v44; // [esp+10h] [ebp-140h]
  _DWORD *v45; // [esp+14h] [ebp-13Ch]
  _DWORD *v46; // [esp+18h] [ebp-138h]
  _DWORD *v47; // [esp+1Ch] [ebp-134h]
  _DWORD *v48; // [esp+20h] [ebp-130h]
  _DWORD *v49; // [esp+24h] [ebp-12Ch]
  int v50; // [esp+2Ch] [ebp-124h]
  _DWORD *v51; // [esp+30h] [ebp-120h]
  _DWORD *v52; // [esp+34h] [ebp-11Ch]
  _DWORD *v53; // [esp+38h] [ebp-118h]
  CItem *v54; // [esp+3Ch] [ebp-114h]
  _DWORD *v55; // [esp+40h] [ebp-110h]
  char v57[4]; // [esp+4Ch] [ebp-104h] BYREF
  char v58[4]; // [esp+50h] [ebp-100h] BYREF
  char v59[4]; // [esp+54h] [ebp-FCh] BYREF
  CMemory **v60; // [esp+58h] [ebp-F8h]
  CMemory **v61; // [esp+5Ch] [ebp-F4h]
  char v62[4]; // [esp+60h] [ebp-F0h] BYREF
  CMemory **v63; // [esp+64h] [ebp-ECh]
  CMemory **v64; // [esp+68h] [ebp-E8h]
  char v65[4]; // [esp+6Ch] [ebp-E4h] BYREF
  char v66[4]; // [esp+70h] [ebp-E0h] BYREF
  CMemory **v67; // [esp+74h] [ebp-DCh]
  char v68[4]; // [esp+78h] [ebp-D8h] BYREF
  char v69[4]; // [esp+7Ch] [ebp-D4h] BYREF
  CMemory **v70; // [esp+80h] [ebp-D0h]
  char v71[4]; // [esp+84h] [ebp-CCh] BYREF
  char v72[4]; // [esp+88h] [ebp-C8h] BYREF
  char v73[4]; // [esp+8Ch] [ebp-C4h] BYREF
  CMemory **v74; // [esp+90h] [ebp-C0h]
  char v75[4]; // [esp+94h] [ebp-BCh] BYREF
  CMemory **v76; // [esp+98h] [ebp-B8h]
  char v77[4]; // [esp+9Ch] [ebp-B4h] BYREF
  CMemory **v78; // [esp+A0h] [ebp-B0h]
  char v79[4]; // [esp+A4h] [ebp-ACh] BYREF
  char v80[4]; // [esp+A8h] [ebp-A8h] BYREF
  char v81[4]; // [esp+ACh] [ebp-A4h] BYREF
  char v82[4]; // [esp+B0h] [ebp-A0h] BYREF
  char v83[4]; // [esp+B4h] [ebp-9Ch] BYREF
  char v84[4]; // [esp+B8h] [ebp-98h] BYREF
  CMemory **v85; // [esp+BCh] [ebp-94h]
  char v86[4]; // [esp+C0h] [ebp-90h] BYREF
  CMemory **v87; // [esp+C4h] [ebp-8Ch]
  CMemory **v88; // [esp+C8h] [ebp-88h]
  char v89[4]; // [esp+CCh] [ebp-84h] BYREF
  CMemory **v90; // [esp+D0h] [ebp-80h]
  char v91[8]; // [esp+D4h] [ebp-7Ch] BYREF
  char *_Val1; // [esp+DCh] [ebp-74h] BYREF
  char v93[8]; // [esp+E0h] [ebp-70h] BYREF
  CMemory **v94; // [esp+E8h] [ebp-68h]
  char v95[4]; // [esp+ECh] [ebp-64h] BYREF
  char v96[4]; // [esp+F0h] [ebp-60h] BYREF
  char v97[4]; // [esp+F4h] [ebp-5Ch] BYREF
  CMemory **v98; // [esp+F8h] [ebp-58h]
  char v99[4]; // [esp+FCh] [ebp-54h] BYREF
  _DWORD *v100; // [esp+100h] [ebp-50h]
  int v101; // [esp+104h] [ebp-4Ch]
  int v102; // [esp+108h] [ebp-48h]
  int v103; // [esp+10Ch] [ebp-44h]
  int v104; // [esp+110h] [ebp-40h]
  int v105; // [esp+114h] [ebp-3Ch]
  int v106; // [esp+118h] [ebp-38h]
  int v107[2]; // [esp+11Ch] [ebp-34h] BYREF
  int v108; // [esp+124h] [ebp-2Ch]
  int v109; // [esp+128h] [ebp-28h]
  char v110[4]; // [esp+12Ch] [ebp-24h] BYREF
  int v111; // [esp+130h] [ebp-20h]
  int v112; // [esp+134h] [ebp-1Ch]
  CItem *_Val2; // [esp+138h] [ebp-18h] BYREF
  int nId; // [esp+13Ch] [ebp-14h]
  int v115; // [esp+140h] [ebp-10h] BYREF
  char v116[4]; // [esp+144h] [ebp-Ch]
  _DWORD *v117; // [esp+148h] [ebp-8h] BYREF
  char v118[4]; // [esp+14Ch] [ebp-4h]

  while ( 2 )
  {
    if ( (unsigned __int8)sub_402380(&a1) )
      return 1;
    lisp::var::pop((lisp::var *)&a1, (lisp::var *)&v115);
    v4 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v99);
    *(_DWORD *)v116 = sub_402360(v4);
    *(_DWORD *)v118 = CObjectDB::FindSymbol(v116[0]);
    if ( *(_DWORD *)v118 )
    {
      v117 = 0;
      switch ( *(_DWORD *)v118 )
      {
        case '$':
          v87 = operator_new(8u);
          if ( v87 )
          {
            v13 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v86);
            v14 = sub_40C8D0(v13);
            v51 = sub_47C5A0(v87, v14);
          }
          else
          {
            v51 = 0;
          }
          v117 = v51;
          goto LABEL_75;
        case '*':
          v12 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v89);
          v112 = sub_40C8D0(v12);
          v88 = operator_new(8u);
          if ( v88 )
            v52 = sub_47C570(v88, 1 << v112);
          else
            v52 = 0;
          v117 = v52;
          goto LABEL_75;
        case '+':
          v60 = operator_new(0x14u);
          if ( v60 )
            v41 = sub_47C800(v60, 0);
          else
            v41 = 0;
          v117 = v41;
          v100 = v41;
          v35 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v59);
          v36 = sub_40C8D0(v35);
          v100[2] = v36;
          v37 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v58);
          v38 = sub_40C8D0(v37);
          v100[3] = v38;
          v39 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v57);
          v40 = sub_40C8D0(v39);
          v100[4] = v40;
          goto LABEL_75;
        case '2':
          v85 = operator_new(0x18u);
          if ( v85 )
            v50 = sub_47C600((int)v85, 0);
          else
            v50 = 0;
          v117 = (_DWORD *)v50;
          v111 = v50;
          while ( !(unsigned __int8)sub_402380(&v115) )
          {
            lisp::var::pop((lisp::var *)&v115, (lisp::var *)v110);
            v15 = lisp::var::pop((lisp::var *)v110, (lisp::var *)v84);
            *(_DWORD *)v116 = sub_402360(v15);
            *(_DWORD *)v118 = CObjectDB::FindSymbol(v116[0]);
            sub_47B8A0(v107);
            if ( *(_DWORD *)v118 == 77 )
            {
              v16 = lisp::var::pop((lisp::var *)v110, (lisp::var *)v83);
              v107[0] = sub_40C8D0(v16);
              v17 = lisp::var::pop((lisp::var *)v110, (lisp::var *)v82);
              v107[1] = sub_40C8D0(v17);
              v18 = lisp::var::pop((lisp::var *)v110, (lisp::var *)v81);
              v108 = sub_40C8D0(v18);
            }
            else if ( *(_DWORD *)v118 == 78 )
            {
              v19 = lisp::var::pop((lisp::var *)v110, (lisp::var *)v80);
              v107[0] = sub_40C8D0(v19);
              v20 = lisp::var::pop((lisp::var *)v110, (lisp::var *)v79);
              v108 = sub_40C8D0(v20);
              v109 = 0;
            }
            else
            {
              LOG_ERR("CCase::SetAction() Invalid symbol for ActionItem. (symbol:%d)", *(_DWORD *)v118);
            }
            sub_47CF90(v111 + 8, (CSyncPacket::CElement *)v107);
          }
          goto LABEL_75;
        case '6':
          v98 = operator_new(8u);
          if ( v98 )
          {
            v6 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v97);
            v7 = sub_40C8D0(v6);
            v55 = sub_47C470(v98, v7);
          }
          else
          {
            v55 = 0;
          }
          v117 = v55;
          goto LABEL_75;
        case 'G':
          v76 = operator_new(8u);
          if ( v76 )
          {
            v23 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v75);
            v24 = sub_40C8D0(v23);
            v48 = sub_47C6B0(v76, v24);
          }
          else
          {
            v48 = 0;
          }
          v117 = v48;
          goto LABEL_75;
        case 'H':
          v74 = operator_new(8u);
          if ( v74 )
          {
            v25 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v73);
            v26 = sub_40C8D0(v25);
            v47 = sub_47C6E0(v74, v26);
          }
          else
          {
            v47 = 0;
          }
          v117 = v47;
          goto LABEL_75;
        case 'I':
          v27 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v72);
          v105 = sub_40C8D0(v27);
          v28 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v71);
          v106 = sub_40C8D0(v28);
          v70 = operator_new(8u);
          if ( v70 )
            v46 = sub_47C710(v70, v106 | (v105 << 16));
          else
            v46 = 0;
          v117 = v46;
          goto LABEL_75;
        case 'J':
          v29 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v69);
          v103 = sub_40C8D0(v29);
          v30 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v68);
          v104 = sub_40C8D0(v30);
          v67 = operator_new(8u);
          if ( v67 )
            v45 = sub_47C740(v67, v104 | (v103 << 16));
          else
            v45 = 0;
          v117 = v45;
          goto LABEL_75;
        case 'L':
          v8 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v96);
          v9 = sub_40C8D0(v8) << 16;
          v10 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v95);
          nId = sub_40C8D0(v10) | v9;
          _Val2 = CServer::FindSocket(a2, a3, nId, nId);
          if ( !_Val2 )
          {
            v94 = operator_new(0x38u);
            if ( v94 )
              v54 = (CItem *)sub_47C830(v94, nId);
            else
              v54 = 0;
            _Val2 = v54;
            _Val1 = (char *)nId;
            std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
              (std::pair<char const * const,CItem *> *)v93,
              (const char *const *)&_Val1,
              &_Val2);
            sub_445DF0(
              dword_4E210C,
              (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v91,
              v11);
          }
          v90 = operator_new(8u);
          if ( v90 )
            v53 = sub_47C510(v90, (int)_Val2);
          else
            v53 = 0;
          v117 = v53;
          goto LABEL_75;
        case 'U':
          v31 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v66);
          v102 = sub_40C8D0(v31);
          v32 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v65);
          v101 = sub_40C8D0(v32);
          v64 = operator_new(8u);
          if ( v64 )
            v44 = sub_47C770(v64, v101 | (v102 << 16));
          else
            v44 = 0;
          v117 = v44;
          goto LABEL_75;
        case '\\':
          v78 = operator_new(8u);
          if ( v78 )
          {
            v21 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v77);
            v22 = sub_40C8D0(v21);
            v49 = sub_47C680(v78, v22);
          }
          else
          {
            v49 = 0;
          }
          v117 = v49;
          goto LABEL_75;
        case ']':
          v63 = operator_new(8u);
          if ( v63 )
          {
            v33 = lisp::var::pop((lisp::var *)&v115, (lisp::var *)v62);
            v34 = sub_40C8D0(v33);
            v43 = sub_47C7A0(v63, v34);
          }
          else
          {
            v43 = 0;
          }
          v117 = v43;
          goto LABEL_75;
        case '^':
          v61 = operator_new(8u);
          if ( v61 )
            v42 = sub_47C7D0(v61, 0);
          else
            v42 = 0;
          v117 = v42;
LABEL_75:
          sub_47D000((int *)(ecx0 + 12), (int)&v117);
          continue;
        default:
          LOG_ERR("CQuest::SetAction() Invalid Reward. (symbol:%d)", *(_DWORD *)v118);
          return 0;
      }
    }
    break;
  }
  LOG_ERR("CCase::SetAction() Invalid symbol(%s)", *(const char **)v116);
  return 0;
}
// 47BD81: variable 'v11' is possibly undefined

//----- (0047C470) --------------------------------------------------------
_DWORD *__thiscall sub_47C470(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC110;
  return this;
}
// 4BC110: using guessed type int (__stdcall *off_4BC110[3])(int);

//----- (0047C4A0) --------------------------------------------------------
void *__thiscall sub_47C4A0(void *this, char a2)
{
  std__locale__facet___facet_1(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047C4D0) --------------------------------------------------------
_DWORD *__thiscall std__locale__facet___facet_1(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = &off_4BC118;
  return result;
}
// 4BC118: using guessed type int (__stdcall *off_4BC118)(int);

//----- (0047C4F0) --------------------------------------------------------
_DWORD *__thiscall sub_47C4F0(_DWORD *this)
{
  return std__locale__facet___facet_1(this);
}

//----- (0047C510) --------------------------------------------------------
_DWORD *__thiscall sub_47C510(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC120;
  return this;
}
// 4BC120: using guessed type int (__stdcall *off_4BC120[26])(int);

//----- (0047C540) --------------------------------------------------------
_DWORD *__thiscall std__locale__facet__facet_0(_DWORD *this, int a2)
{
  *this = &off_4BC118;
  this[1] = a2;
  return this;
}
// 4BC118: using guessed type int (__stdcall *off_4BC118)(int);

//----- (0047C570) --------------------------------------------------------
_DWORD *__thiscall sub_47C570(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC128;
  return this;
}
// 4BC128: using guessed type int (__stdcall *off_4BC128[24])(int);

//----- (0047C5A0) --------------------------------------------------------
_DWORD *__thiscall sub_47C5A0(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC130;
  return this;
}
// 4BC130: using guessed type int (__stdcall *off_4BC130[22])(int);

//----- (0047C5D0) --------------------------------------------------------
_DWORD *__thiscall sub_47C5D0(_DWORD *this, char a2)
{
  sub_47C4F0(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047C600) --------------------------------------------------------
int __thiscall sub_47C600(int this, int a2)
{
  std__locale__facet__facet_0((_DWORD *)this, a2);
  *(_DWORD *)this = off_4BC138;
  sub_47CF60((std::vector<CSyncPacket::CElement> *)(this + 8));
  return this;
}
// 4BC138: using guessed type int (__stdcall *off_4BC138[20])(int);

//----- (0047C630) --------------------------------------------------------
void *__thiscall sub_47C630(void *this, char a2)
{
  sub_47C660((int)this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047C660) --------------------------------------------------------
_DWORD *__thiscall sub_47C660(int this)
{
  sub_430B90((std::vector<CSyncPacket::CElement> *)(this + 8));
  return std__locale__facet___facet_1((_DWORD *)this);
}

//----- (0047C680) --------------------------------------------------------
_DWORD *__thiscall sub_47C680(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC140;
  return this;
}
// 4BC140: using guessed type int (__stdcall *off_4BC140[18])(int);

//----- (0047C6B0) --------------------------------------------------------
_DWORD *__thiscall sub_47C6B0(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC148;
  return this;
}
// 4BC148: using guessed type int (__stdcall *off_4BC148[16])(int);

//----- (0047C6E0) --------------------------------------------------------
_DWORD *__thiscall sub_47C6E0(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC150;
  return this;
}
// 4BC150: using guessed type int (__stdcall *off_4BC150[14])(int);

//----- (0047C710) --------------------------------------------------------
_DWORD *__thiscall sub_47C710(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC158;
  return this;
}
// 4BC158: using guessed type int (__stdcall *off_4BC158[12])(int);

//----- (0047C740) --------------------------------------------------------
_DWORD *__thiscall sub_47C740(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC160;
  return this;
}
// 4BC160: using guessed type int (__stdcall *off_4BC160[10])(int);

//----- (0047C770) --------------------------------------------------------
_DWORD *__thiscall sub_47C770(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC168;
  return this;
}
// 4BC168: using guessed type int (__stdcall *off_4BC168[8])(int);

//----- (0047C7A0) --------------------------------------------------------
_DWORD *__thiscall sub_47C7A0(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC170;
  return this;
}
// 4BC170: using guessed type int (__stdcall *off_4BC170[6])(int);

//----- (0047C7D0) --------------------------------------------------------
_DWORD *__thiscall sub_47C7D0(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC178;
  return this;
}
// 4BC178: using guessed type int (__stdcall *off_4BC178[4])(int);

//----- (0047C800) --------------------------------------------------------
_DWORD *__thiscall sub_47C800(_DWORD *this, int a2)
{
  std__locale__facet__facet_0(this, a2);
  *this = off_4BC180;
  return this;
}
// 4BC180: using guessed type int (__stdcall *off_4BC180[2])(int);

//----- (0047C830) --------------------------------------------------------
_DWORD *__thiscall sub_47C830(_DWORD *this, int a2)
{
  CBase::CBase((CBase *)this);
  *this = &off_4BA5A0;
  this[8] = a2;
  this[9] = 0;
  this[10] = 0;
  sub_47D030(this + 11);
  return this;
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0047C880) --------------------------------------------------------
int __thiscall sub_47C880(int *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h]
  int v8; // [esp+10h] [ebp-4h] BYREF

  if ( sub_472780(this) )
    return 1;
  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(this, &v8);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this, v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v8,
            v3) )
      break;
    v7 = *(_DWORD *)sub_40F040(&v8);
    if ( !(*(int (__thiscall **)(int, int))(*(_DWORD *)v7 + 4))(v7, a2) )
      return 0;
    sub_47D0A0(&v8, &v6, 0);
  }
  return 1;
}

//----- (0047C910) --------------------------------------------------------
BOOL __thiscall sub_47C910(int *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  _DWORD *v4; // eax
  char v6[4]; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h] BYREF
  int v8; // [esp+10h] [ebp-4h] BYREF

  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(this + 3, &v8);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this + 3, v6);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v8,
               v2);
    if ( !result )
      break;
    v4 = (_DWORD *)sub_40F040(&v8);
    (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*v4 + 4))(*v4, a2);
    sub_47D0A0(&v8, &v7, 0);
  }
  return result;
}

//----- (0047C980) --------------------------------------------------------
_DWORD *__usercall sub_47C980@<eax>(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  void *v7; // [esp+Ch] [ebp-10h]
  char v8[4]; // [esp+10h] [ebp-Ch] BYREF
  char v9[4]; // [esp+14h] [ebp-8h] BYREF
  char v10[4]; // [esp+18h] [ebp-4h] BYREF

  *this = &off_4BA5A0;
  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(this + 11, v10);
  while ( 1 )
  {
    v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this + 11, v8);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v10,
            v4) )
      break;
    v7 = *(void **)sub_40F040(v10);
    if ( v7 )
      ActionItem::_CActionItem(v7, 1);
    sub_47D0A0((int *)v10, v9, 0);
  }
  sub_472990(this + 11);
  return CBase::_CBase(this, a2, a3, a4);
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0047CA20) --------------------------------------------------------
void *__thiscall ActionItem::_CActionItem(void *this, char a2)
{
  sub_47B230((int *)this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047CA50) --------------------------------------------------------
void __usercall sub_47CA50(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v5[4]; // [esp+0h] [ebp-Ch] BYREF
  char v6[4]; // [esp+4h] [ebp-8h] BYREF
  char v7[4]; // [esp+8h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E2118);
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E210C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v7);
  while ( 1 )
  {
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E210C, v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v3) )
      break;
    v4 = sub_420250(v7);
    CBase::Delete(*(char **)(v4 + 4));
    sub_446090((int *)v7, (int *)v6, 0);
  }
  CRWLock::WriteUnlock((CRWLock *)&unk_4E2118, a1, a2, a3);
}

//----- (0047CAC0) --------------------------------------------------------
CSocket *__usercall CServer::FindSocket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int nId)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+0h] [ebp-10h] BYREF
  int v7; // [esp+4h] [ebp-Ch] BYREF
  volatile int *v8; // [esp+8h] [ebp-8h]
  char v9[4]; // [esp+Ch] [ebp-4h] BYREF

  v8 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E2118);
  v7 = nId;
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E210C,
    v9,
    &v7);
  v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E210C, v6);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
         v4) )
  {
    v8 = *(volatile int **)(sub_420250(v9) + 4);
    CIOObject::AddRef(v8, a1, a2, a3);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E2118, a1, a2, a3);
  return (CSocket *)v8;
}

//----- (0047CB40) --------------------------------------------------------
void __usercall sub_47CB40(DWORD a1@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int nId, int a2)
{
  CSocket *v5; // [esp+0h] [ebp-4h]

  v5 = CServer::FindSocket(a1, edi0, a3, nId);
  if ( v5 )
  {
    if ( !*((_DWORD *)v5 + 10) )
      CQuest::Proceed(v5, a2);
    CIOObject::Release((volatile int *)v5, a1, edi0, a3);
  }
}

//----- (0047CB80) --------------------------------------------------------
int __thiscall sub_47CB80(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  int v4; // ecx
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  int v8; // eax
  int v9; // [esp-4h] [ebp-48h] BYREF
  _DWORD *v10; // [esp+0h] [ebp-44h]
  int v11; // [esp+4h] [ebp-40h]
  int v12; // [esp+8h] [ebp-3Ch]
  int v13; // [esp+Ch] [ebp-38h]
  _DWORD *v14; // [esp+10h] [ebp-34h]
  _DWORD *v15; // [esp+18h] [ebp-2Ch]
  char v16[4]; // [esp+1Ch] [ebp-28h] BYREF
  int v17; // [esp+20h] [ebp-24h] BYREF
  char v18[4]; // [esp+24h] [ebp-20h] BYREF
  char v19[12]; // [esp+28h] [ebp-1Ch] BYREF
  void *v20; // [esp+34h] [ebp-10h]
  char v21[4]; // [esp+38h] [ebp-Ch] BYREF
  char v22[4]; // [esp+3Ch] [ebp-8h] BYREF
  int v23; // [esp+40h] [ebp-4h]

  v14 = this;
  if ( !this[9] )
  {
    v11 = a2;
    if ( a2 == 2 )
    {
      v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v19);
      v14[8] |= sub_40C8D0(v6) << 16;
      v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v18);
      v14[8] |= sub_40C8D0(v7);
      v17 = v14[8];
      sub_44AE20(v22, &v17);
      v8 = sub_430C20(v16);
      if ( (unsigned __int8)unknown_libname_16(v8) )
      {
        v15 = operator_new(0x38u);
        if ( v15 )
          v10 = sub_47C830(v15, v14[8]);
        else
          v10 = 0;
        v14[9] = v10;
      }
      else
      {
        v14[9] = *(_DWORD *)(sub_420250(v22) + 4);
      }
      return 1;
    }
LABEL_11:
    v9 = a2;
    std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
      &v9,
      &a3);
    return CBase::Set(v14, a2, v9);
  }
  v13 = a2;
  if ( a2 == 64 )
  {
    v20 = operator_new(0x18u);
    if ( v20 )
      v12 = CQuest::_CQuest(v20);
    else
      v12 = 0;
    v23 = v12;
    v9 = v4;
    std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
      &v9,
      &a3);
    return CQuest::SetCase(v23, v9) != 0;
  }
  if ( v13 != 79 )
    goto LABEL_11;
  v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v21);
  *(_DWORD *)(v14[9] + 40) = sub_40C8D0(v3);
  return 1;
}
// 47CBF5: variable 'v4' is possibly undefined
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 44AE20: using guessed type _DWORD __stdcall sub_44AE20(_DWORD, _DWORD);
// 47CD40: using guessed type int __thiscall CQuest::_CQuest(_DWORD);
// 47CD70: using guessed type _DWORD __stdcall CQuest::SetCase(_DWORD, char);

//----- (0047CD40) --------------------------------------------------------
_DWORD *__thiscall CQuest::_CQuest(_DWORD *this)
{
  sub_47D030(this);
  sub_47D030(this + 3);
  return this;
}

//----- (0047CD70) --------------------------------------------------------
int __userpurge CQuest::SetCase@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, int *a4, int a5)
{
  lisp::var *v5; // eax
  int v6; // ecx
  int v8; // [esp-4h] [ebp-24h] BYREF
  int v9; // [esp+0h] [ebp-20h]
  int v10; // [esp+4h] [ebp-1Ch]
  char v11[4]; // [esp+10h] [ebp-10h] BYREF
  char v12[4]; // [esp+14h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-8h] BYREF
  char v14[4]; // [esp+1Ch] [ebp-4h]

  v10 = a1;
  while ( !(unsigned __int8)sub_402380(&a5) )
  {
    lisp::var::pop((lisp::var *)&a5, (lisp::var *)&v13);
    v5 = lisp::var::pop((lisp::var *)&v13, (lisp::var *)v11);
    *(_DWORD *)v12 = sub_402360(v5);
    *(_DWORD *)v14 = CObjectDB::FindSymbol(v12[0]);
    if ( !*(_DWORD *)v14 )
    {
      LOG_ERR("CQuest::SetCase() Invalid symbol(%s)", *(const char **)v12);
      return 0;
    }
    v9 = *(_DWORD *)v14;
    if ( *(_DWORD *)v14 == 65 )
    {
      v8 = v6;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v8,
        &v13);
      if ( !CCase::SetCondition(a4, v8) )
        return 0;
    }
    else
    {
      if ( v9 != 66 )
      {
        LOG_ERR("CQuest::SetCondition() Invalid Case. (symbol:%d)", *(_DWORD *)v14);
        return 0;
      }
      v8 = v6;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        &v8,
        &v13);
      if ( !CQuest::SetAction((int)a4, a2, a3, v8) )
        return 0;
    }
  }
  sub_47D000((int *)(v10 + 44), (int)&a4);
  return 1;
}
// 47CDED: variable 'v6' is possibly undefined

//----- (0047CE60) --------------------------------------------------------
int __thiscall sub_47CE60(int this)
{
  std::pair<char const * const,CItem *> *v1; // eax
  char *_Val1; // [esp+4h] [ebp-14h] BYREF
  char v5[8]; // [esp+8h] [ebp-10h] BYREF
  char v6[8]; // [esp+10h] [ebp-8h] BYREF

  _Val1 = *(char **)(this + 32);
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v5,
    (const char *const *)&_Val1,
    (CItem *const *)(this + 36));
  sub_445DF0(
    dword_4E210C,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v6,
    v1);
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 0;
  return 1;
}
// 47CE8F: variable 'v1' is possibly undefined

//----- (0047CEC0) --------------------------------------------------------
void __thiscall CQuest::Proceed(_DWORD *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  char v5[4]; // [esp+8h] [ebp-Ch] BYREF
  int *v6; // [esp+Ch] [ebp-8h]
  char v7[4]; // [esp+10h] [ebp-4h] BYREF

  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::begin(this + 11, v7);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(this + 11, v4);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)v7,
            v2) )
      break;
    v6 = *(int **)sub_40F040(v7);
    if ( sub_47C880(v6, a2) )
    {
      sub_47C910(v6, a2);
      return;
    }
    sub_47D0A0((int *)v7, v5, 0);
  }
  LOG_ERR("CQuest::Proceed() No Meet Condition. (Quest:%x, PID:%d)", this[8], *(_DWORD *)(a2 + 452));
}

//----- (0047CF60) --------------------------------------------------------
std::vector<CSyncPacket::CElement> *__thiscall sub_47CF60(std::vector<CSyncPacket::CElement> *this)
{
  std::vector<CSyncPacket::CElement> *v2; // [esp-4h] [ebp-Ch] BYREF
  std::vector<CSyncPacket::CElement> *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  std::vector<CSyncPacket::CElement>::_Buy(v3, 0);
  return v3;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047CF90) --------------------------------------------------------
CSyncPacket::CElement *__thiscall sub_47CF90(int this, CSyncPacket::CElement *_Val)
{
  unsigned int v2; // esi
  CSyncPacket::CElement *result; // eax
  boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type **v4; // eax
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this);
  if ( v2 >= std::vector<CSyncPacket::CElement>::capacity((std::vector<CSyncPacket::CElement> *)this) )
  {
    v4 = (boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type **)sub_445B40((_DWORD *)this, (int)v7);
    result = (CSyncPacket::CElement *)sub_47D110((int *)this, v6, *v4, (int *)_Val);
  }
  else
  {
    result = std::vector<CSyncPacket::CElement>::_Ufill(
               (std::vector<CSyncPacket::CElement> *)this,
               *(CSyncPacket::CElement **)(this + 8),
               1u,
               _Val);
    *(_DWORD *)(this + 8) = result;
  }
  return result;
}

//----- (0047D000) --------------------------------------------------------
CMemory ***__thiscall sub_47D000(int *this, int a1)
{
  _DWORD *v2; // eax
  char v5[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = sub_430C20(this, v5);
  return sub_47D240(this, *v2, (_DWORD *)a1);
}

//----- (0047D030) --------------------------------------------------------
_DWORD *__thiscall sub_47D030(_DWORD *this)
{
  _DWORD *v2; // [esp-4h] [ebp-Ch] BYREF
  _DWORD *v3; // [esp+0h] [ebp-8h]

  v3 = this;
  v2 = this;
  LocaleUpdate__GetLocaleT(&v2);
  std::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_List_val<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(
    v3,
    (char)v2);
  v3[1] = sub_47D2C0();
  v3[2] = 0;
  return v3;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047D070) --------------------------------------------------------
BOOL __thiscall std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(std::vector<CIOSocket::CIOTimer>::const_iterator *this, const std::vector<CIOSocket::CIOTimer>::const_iterator *_Right)
{
  return (unsigned __int8)unknown_libname_16(_Right) == 0;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0047D0A0) --------------------------------------------------------
_DWORD *__thiscall sub_47D0A0(int *this, _DWORD *a2, int a3)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = *this;
  sub_41CAB0(this);
  *a2 = v4;
  return a2;
}

//----- (0047D0D0) --------------------------------------------------------
int __thiscall std::vector<CSyncPacket::CElement>::capacity(std::vector<CSyncPacket::CElement> *this)
{
  int v2; // [esp+0h] [ebp-8h]

  if ( *((_DWORD *)this + 1) )
    v2 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 1)) >> 4;
  else
    v2 = 0;
  return v2;
}

//----- (0047D110) --------------------------------------------------------
_DWORD *__thiscall sub_47D110(int *this, _DWORD *a2, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *a3, int *a4)
{
  _DWORD *v4; // eax
  int *v5; // eax
  int v7; // [esp-4h] [ebp-18h]
  int v8; // [esp+0h] [ebp-14h]
  char v10[4]; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h]

  if ( std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) )
  {
    v4 = sub_430C20(this, v11);
    v8 = sub_47D7D0((int *)&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_47D3F0((int)this, a3, 1u, a4);
  v7 = v12;
  v5 = (int *)sub_430C20(this, v10);
  sub_431D20(v5, a2, v7);
  return a2;
}

//----- (0047D190) --------------------------------------------------------
char __thiscall std::vector<CSyncPacket::CElement>::_Buy(std::vector<CSyncPacket::CElement> *this, unsigned int _Capacity)
{
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  if ( !_Capacity )
    return 0;
  if ( sub_47D3D0(this) >= _Capacity )
  {
    *((_DWORD *)this + 1) = sub_47D6D0(_Capacity);
    *((_DWORD *)this + 2) = *((_DWORD *)this + 1);
    *((_DWORD *)this + 3) = *((_DWORD *)this + 1) + 16 * _Capacity;
  }
  else
  {
    sub_446B00();
  }
  return 1;
}

//----- (0047D210) --------------------------------------------------------
CSyncPacket::CElement *__thiscall std::vector<CSyncPacket::CElement>::_Ufill(std::vector<CSyncPacket::CElement> *this, CSyncPacket::CElement *_Ptr, unsigned int _Count, const CSyncPacket::CElement *_Val)
{
  sub_47D820(_Ptr, _Count, (int)_Val);
  return (CSyncPacket::CElement *)((char *)_Ptr + 16 * _Count);
}

//----- (0047D240) --------------------------------------------------------
CMemory ***__thiscall sub_47D240(_DWORD *this, char a2, _DWORD *a3)
{
  int *v3; // eax
  _DWORD *v4; // eax
  CMemory ***result; // eax
  _DWORD *v6; // [esp-4h] [ebp-10h]
  int v8; // [esp+4h] [ebp-8h]
  CMemory **v9; // [esp+8h] [ebp-4h]

  v8 = unknown_libname_15(&a2);
  v6 = a3;
  v3 = (int *)sub_446FF0(v8);
  v9 = sub_47D6F0(v8, *v3, v6);
  sub_47D760(this, 1u);
  *(_DWORD *)sub_446FF0(v8) = v9;
  v4 = (_DWORD *)sub_446FF0((int)v9);
  result = (CMemory ***)unknown_libname_25(*v4);
  *result = v9;
  return result;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047D2C0) --------------------------------------------------------
int sub_47D2C0()
{
  void *v0; // eax
  void *v1; // eax
  int v3; // [esp+4h] [ebp-8h] BYREF
  int v4; // [esp+8h] [ebp-4h]

  v3 = (int)sub_446B40(1);
  v4 = 0;
  v0 = (void *)unknown_libname_25(v3);
  sub_42F9B0(v0, (int)&v3);
  ++v4;
  v1 = (void *)sub_446FF0(v3);
  sub_42F9B0(v1, (int)&v3);
  return v3;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047D360) --------------------------------------------------------
int *__thiscall std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::_Tidy(int *this)
{
  void *v1; // eax
  void *v2; // eax
  int *result; // eax

  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::clear(this);
  v1 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v1);
  v2 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v2);
  sub_4338F0((void *)this[1], 1);
  result = this;
  this[1] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047D3D0) --------------------------------------------------------
unsigned int __thiscall sub_47D3D0(std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *this)
{
  return std::allocator<boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime>>::timer_base *>::bucket_type>::max_size(this);
}

//----- (0047D3F0) --------------------------------------------------------
void __thiscall sub_47D3F0(int this, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_First, unsigned int _Count, int *a4)
{
  unsigned int v4; // esi
  CSyncPacket::CElement *v5; // eax
  unsigned int v6; // [esp+4h] [ebp-28h]
  _DWORD *v8; // [esp+Ch] [ebp-20h]
  CMemory **v9; // [esp+10h] [ebp-1Ch]
  CSyncPacket::CElement *_Ptr; // [esp+14h] [ebp-18h]
  unsigned int v11; // [esp+18h] [ebp-14h]
  int v12; // [esp+18h] [ebp-14h]
  int v13[4]; // [esp+1Ch] [ebp-10h] BYREF
  unsigned int _Counta; // [esp+38h] [ebp+Ch]

  v13[0] = *a4;
  v13[1] = a4[1];
  v13[2] = a4[2];
  v13[3] = a4[3];
  v11 = std::vector<CSyncPacket::CElement>::capacity((std::vector<CSyncPacket::CElement> *)this);
  if ( _Count )
  {
    v4 = sub_47D3D0((std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *)this);
    if ( v4 - std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) >= _Count )
    {
      if ( v11 >= _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) )
      {
        if ( (*(_DWORD *)(this + 8) - (int)_First) >> 4 >= _Count )
        {
          v8 = *(_DWORD **)(this + 8);
          *(_DWORD *)(this + 8) = sub_431E30((int)&v8[-4 * _Count], (int)v8, v8);
          sub_47D8E0(_First, &v8[-4 * _Count], v8);
          std::_Fill<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>(
            _First,
            (boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)((char *)_First + 16 * _Count),
            (const boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)v13);
        }
        else
        {
          sub_431E30((int)_First, *(_DWORD *)(this + 8), (char *)_First + 16 * _Count);
          std::vector<CSyncPacket::CElement>::_Ufill(
            (std::vector<CSyncPacket::CElement> *)this,
            *(CSyncPacket::CElement **)(this + 8),
            _Count - ((*(_DWORD *)(this + 8) - (int)_First) >> 4),
            (const CSyncPacket::CElement *)v13);
          *(_DWORD *)(this + 8) += 16 * _Count;
          std::_Fill<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>(
            _First,
            (boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)(*(_DWORD *)(this + 8) - 16 * _Count),
            (const boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)v13);
        }
      }
      else
      {
        if ( sub_47D3D0((std::allocator<std::pair<unsigned __int64 const ,std::list<_tag_ChannelUserInfo *> *> > *)this)
           - (v11 >> 1) >= v11 )
          v6 = v11 + (v11 >> 1);
        else
          v6 = 0;
        v12 = v6;
        if ( v6 < _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this) )
          v12 = _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this);
        v9 = sub_47D6D0(v12);
        v5 = (CSyncPacket::CElement *)sub_431E30(*(_DWORD *)(this + 4), (int)_First, v9);
        _Ptr = std::vector<CSyncPacket::CElement>::_Ufill(
                 (std::vector<CSyncPacket::CElement> *)this,
                 v5,
                 _Count,
                 (const CSyncPacket::CElement *)v13);
        sub_431E30((int)_First, *(_DWORD *)(this + 8), _Ptr);
        _Counta = _Count + std::vector<CSyncPacket::CElement>::size((std::vector<CSyncPacket::CElement> *)this);
        if ( *(_DWORD *)(this + 4) )
        {
          sub_4313B0(*(char **)(this + 4), *(char **)(this + 8));
          sub_4338F0(*(void **)(this + 4), (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 4);
        }
        *(_DWORD *)(this + 12) = &v9[4 * v12];
        *(_DWORD *)(this + 8) = &v9[4 * _Counta];
        *(_DWORD *)(this + 4) = v9;
      }
    }
    else
    {
      sub_446B00();
    }
  }
}

//----- (0047D6D0) --------------------------------------------------------
CMemory **__stdcall sub_47D6D0(int a1)
{
  return sub_47D920(a1);
}

//----- (0047D6F0) --------------------------------------------------------
CMemory **__stdcall sub_47D6F0(int a1, int a2, _DWORD *a3)
{
  _DWORD *v4; // [esp+8h] [ebp-8h]
  CMemory **v5; // [esp+Ch] [ebp-4h]

  v5 = sub_446B40(1);
  v4 = operator new(0xCu, v5);
  if ( v4 )
    sub_44B820(v4, a1, a2, a3);
  return v5;
}

//----- (0047D760) --------------------------------------------------------
_DWORD *__thiscall sub_47D760(_DWORD *this, unsigned int a2)
{
  void *v2; // eax
  _DWORD *result; // eax
  char v5[28]; // [esp+4h] [ebp-40h] BYREF
  char v6[36]; // [esp+20h] [ebp-24h] BYREF

  if ( sub_44B800((int)this) - this[2] < a2 )
  {
    std::string::string((std::string *)v5, "list<T> too long");
    std::length_error::length_error((std::length_error *)v6, (const std::string *)v5);
    sub_40F510(v2);
    sub_40F6E0((std::time_put<unsigned short,std::ostreambuf_iterator<unsigned short> > *)v6);
    sub_40F780((std::string *)v5);
  }
  result = this;
  this[2] += a2;
  return result;
}
// 47D797: variable 'v2' is possibly undefined

//----- (0047D7D0) --------------------------------------------------------
int __thiscall sub_47D7D0(int *this, _DWORD *a2)
{
  int v3; // [esp+4h] [ebp-4h] BYREF

  v3 = *this;
  return sub_431DB0(&v3, a2);
}

//----- (0047D800) --------------------------------------------------------
std::vector<CSyncPacket::CElement>::iterator *__thiscall std::vector<CSyncPacket::CElement>::iterator::operator+=(std::vector<CSyncPacket::CElement>::iterator *this, int _Off)
{
  *(_DWORD *)this += 16 * _Off;
  return this;
}

//----- (0047D820) --------------------------------------------------------
void *__cdecl sub_47D820(void *a1, int a2, int a3)
{
  unknown_libname_14(&a1, &a1);
  return sub_47D940(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0047D860) --------------------------------------------------------
char *__cdecl sub_47D860(char *a1, char *a2)
{
  unknown_libname_14(&a1, &a2);
  return std::_Destroy_range<std::allocator<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>>(
           a1,
           a2);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0047D8A0) --------------------------------------------------------
void __cdecl std::_Fill<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>(boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_First, boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_Last, const boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *_Val)
{
  while ( _First != _Last )
  {
    *(_DWORD *)_First = *(_DWORD *)_Val;
    *((_DWORD *)_First + 1) = *((_DWORD *)_Val + 1);
    *((_DWORD *)_First + 2) = *((_DWORD *)_Val + 2);
    *((_DWORD *)_First + 3) = *((_DWORD *)_Val + 3);
    _First = (boost::asio::detail::hash_map<void *,boost::asio::detail::timer_queue<boost::asio::time_traits<boost::posix_time::ptime> >::timer_base *>::bucket_type *)((char *)_First + 16);
  }
}

//----- (0047D8E0) --------------------------------------------------------
_DWORD *__cdecl sub_47D8E0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  unknown_libname_14(&a1, &a3);
  return std::_Copy_backward_opt<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type *,std::forward_iterator_tag>(
           a1,
           a2,
           a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0047D920) --------------------------------------------------------
CMemory **__cdecl sub_47D920(int a1)
{
  return operator_new(16 * a1);
}

//----- (0047D940) --------------------------------------------------------
void *__cdecl sub_47D940(void *a1, int a2, int a3)
{
  void *result; // eax

  result = a1;
  while ( a2 )
  {
    sub_47DA10(a1, a3);
    --a2;
    a1 = (char *)a1 + 16;
  }
  return result;
}

//----- (0047D9A0) --------------------------------------------------------
char *__cdecl std::_Destroy_range<std::allocator<boost::asio::detail::hash_map<unsigned int,boost::asio::detail::reactor_op_queue<unsigned int>::op_base *>::bucket_type>>(char *a1, char *a2)
{
  char *result; // eax

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 16;
    a1 += 16;
  }
  return result;
}

//----- (0047D9D0) --------------------------------------------------------
void *__cdecl sub_47D9D0(int a1, int a2, void *a3)
{
  unknown_libname_14(&a1, &a3);
  return sub_47DA30(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_14(_DWORD, _DWORD);

//----- (0047DA10) --------------------------------------------------------
void __stdcall sub_47DA10(void *_Ptr, int _Val)
{
  std::_Construct<CSyncPacket::CElement,CSyncPacket::CElement>(
    (CSyncPacket::CElement *)_Ptr,
    (const CSyncPacket::CElement *)_Val);
}

//----- (0047DA30) --------------------------------------------------------
void *__cdecl sub_47DA30(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_47DA10(a3, a1);
    a3 = (char *)a3 + 16;
    a1 += 16;
  }
  return a3;
}

//----- (0047DAA0) --------------------------------------------------------
void *__thiscall sub_47DAA0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047DAD0) --------------------------------------------------------
int __thiscall sub_47DAD0(int *this)
{
  return sub_47DAF0(this);
}

//----- (0047DAF0) --------------------------------------------------------
int __thiscall sub_47DAF0(int *this)
{
  return sub_47DB10(this);
}

//----- (0047DB10) --------------------------------------------------------
int __thiscall sub_47DB10(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_47DBC0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047DBC0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47DBC0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_47DC60((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0047DC60) --------------------------------------------------------
_DWORD *__thiscall sub_47DC60(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_47DCC0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0047DCC0) --------------------------------------------------------
int __stdcall sub_47DCC0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_47DCC0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047DD40) --------------------------------------------------------
void __thiscall CRWLock::CRWLock(CRWLock *this)
{
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = CreateEventA(0, 0, 0, 0);
  *((_DWORD *)this + 3) = CreateEventA(0, 0, 0, 0);
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 4) = 0;
}

//----- (0047DDA0) --------------------------------------------------------
void __usercall CRWLock::~CRWLock(CRWLock *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  if ( *(_DWORD *)this )
    EBREAK(a2, a3, a4);
  CloseHandle(*((HANDLE *)this + 2));
  CloseHandle(*((HANDLE *)this + 3));
}

//----- (0047DDE0) --------------------------------------------------------
LONG __thiscall sub_47DDE0(volatile LONG *this)
{
  LONG result; // eax
  int v3; // [esp+4h] [ebp-4h]
  int v4; // [esp+4h] [ebp-4h]

  v3 = 4000;
  while ( --v3 >= 0 )
  {
    result = InterlockedCompareExchange(this + 1, 1, 0);
    if ( !result )
      return result;
    _mm_pause();
  }
  v4 = 4000;
  while ( --v4 >= 0 )
  {
    SwitchToThread();
    result = InterlockedCompareExchange(this + 1, 1, 0);
    if ( !result )
      return result;
  }
  do
  {
    Sleep(0x3E8u);
    result = InterlockedCompareExchange(this + 1, 1, 0);
  }
  while ( result );
  return result;
}

//----- (0047DE70) --------------------------------------------------------
void __thiscall CRWLock::ReadLock(CRWLock *this)
{
  int v2; // [esp+8h] [ebp-8h]
  int v3; // [esp+Ch] [ebp-4h]
  int vars0; // [esp+10h] [ebp+0h]
  void *retaddr; // [esp+14h] [ebp+4h]

  LOWORD(v3) = InterlockedIncrement((volatile LONG *)this);
  if ( (v3 & 0xFF00) != 0 )
  {
    sub_47E030((volatile LONG *)this);
    v3 = *(_DWORD *)this;
    do
    {
      if ( v3 < 0 )
      {
        if ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)this, 0xFFFF) == 1 )
        {
          sub_47E060((volatile LONG *)this);
          SetEvent(*((HANDLE *)this + 3));
        }
        else
        {
          sub_47E060((volatile LONG *)this);
        }
        WaitForSingleObject(*((HANDLE *)this + 2), 0xFFFFFFFF);
        sub_47E030((volatile LONG *)this);
        v3 = InterlockedExchangeAdd((volatile LONG *)this, -65535) - 0xFFFF;
      }
      else
      {
        if ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)this, 0x7FFFFFFF) == 1 )
        {
          sub_47E060((volatile LONG *)this);
          SetEvent(*((HANDLE *)this + 3));
        }
        else
        {
          sub_47E060((volatile LONG *)this);
        }
        WaitForSingleObject(*((HANDLE *)this + 3), 0xFFFFFFFF);
        sub_47E030((volatile LONG *)this);
        v3 = InterlockedExchangeAdd((volatile LONG *)this, -2147483647) - 0x7FFFFFFF;
      }
    }
    while ( (v3 & 0xFF00) != 0 );
    sub_47E060((volatile LONG *)this);
    if ( (v3 & 0xFF0000) != 0 )
      SetEvent(*((HANDLE *)this + 2));
  }
  if ( (char)v3 == 1 )
  {
    v2 = *(_DWORD *)(vars0 + 4);
    *((_DWORD *)this + 4) = retaddr;
    *((_DWORD *)this + 5) = v2;
  }
}
// 47E00A: variable 'vars0' is possibly undefined

//----- (0047E030) --------------------------------------------------------
LONG __thiscall sub_47E030(volatile LONG *this)
{
  LONG result; // eax

  result = InterlockedCompareExchange(this + 1, 1, 0);
  if ( result )
    result = sub_47DDE0(this);
  return result;
}

//----- (0047E060) --------------------------------------------------------
LONG __thiscall sub_47E060(volatile LONG *this)
{
  return InterlockedExchange(this + 1, 0);
}

//----- (0047E080) --------------------------------------------------------
void __usercall CRWLock::ReadUnlock(CRWLock *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  LONG v5; // [esp+4h] [ebp-4h]

  v5 = InterlockedDecrement((volatile LONG *)this);
  if ( (v5 & 0x8080) != 0 )
    EBREAK(a2, a3, a4);
  if ( !(_WORD)v5 && (v5 & 0xFF000000) != 0 )
    SetEvent(*((HANDLE *)this + 3));
}

//----- (0047E0D0) --------------------------------------------------------
void __thiscall CRWLock::WriteLock(CRWLock *this)
{
  int v2; // [esp+8h] [ebp-8h]
  int vars0; // [esp+10h] [ebp+0h]
  void *retaddr; // [esp+14h] [ebp+4h]

  if ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)this, 256) )
  {
    sub_47E030((volatile LONG *)this);
    do
    {
      if ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)this, 16776960) == 256 )
      {
        sub_47E060((volatile LONG *)this);
        SetEvent(*((HANDLE *)this + 3));
      }
      else
      {
        sub_47E060((volatile LONG *)this);
      }
      WaitForSingleObject(*((HANDLE *)this + 3), 0xFFFFFFFF);
      sub_47E030((volatile LONG *)this);
    }
    while ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)this, -16776960) );
    sub_47E060((volatile LONG *)this);
  }
  v2 = *(_DWORD *)(vars0 + 4);
  *((_DWORD *)this + 4) = retaddr;
  *((_DWORD *)this + 5) = v2;
}
// 47E19D: variable 'vars0' is possibly undefined

//----- (0047E1C0) --------------------------------------------------------
void __usercall CRWLock::WriteUnlock(CRWLock *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  LONG v4; // eax
  int v6; // [esp+4h] [ebp-4h]

  v4 = InterlockedExchangeAdd((volatile LONG *)this, -256);
  v6 = v4 - 256;
  if ( (((_WORD)v4 - 256) & 0x8080) != 0 )
    EBREAK(a2, a3, a4);
  if ( !(_WORD)v6 && (v6 & 0xFF000000) != 0 )
    SetEvent(*((HANDLE *)this + 3));
}

//----- (0047E220) --------------------------------------------------------
void __thiscall CScreen::CScreen(CScreen *this)
{
  CIOCriticalSection::CIOCriticalSection((CScreen *)((char *)this + 20));
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 4) = 0;
  *((_DWORD *)this + 3) = 0;
  *(_DWORD *)this = 0;
}

//----- (0047E270) --------------------------------------------------------
void __usercall CScreen::~CScreen(CScreen *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  j_operator_delete(*(void **)this);
  CIOCriticalSection::~CIOCriticalSection((CScreen *)((char *)this + 20), a2, a3, a4);
}
// 4A16B4: using guessed type _DWORD __cdecl j_operator_delete(void *pBlock);

//----- (0047E2A0) --------------------------------------------------------
void __thiscall CScreen::Open(CScreen *this, int nWidth, int nHeight)
{
  *((_DWORD *)this + 1) = nWidth;
  *((_DWORD *)this + 2) = nHeight;
  *((_DWORD *)this + 4) = (nWidth + 8) & 0xFFFFFFFC;
  *((_DWORD *)this + 3) = 0;
  *(_DWORD *)this = j_operator_new(nHeight * *((_DWORD *)this + 4));
  memset(*(void **)this, 0, nHeight * *((_DWORD *)this + 4));
}

//----- (0047E320) --------------------------------------------------------
void CScreen::Add(CScreen *this, unsigned int color, const char *format, ...)
{
  int v3; // [esp+4h] [ebp-8h]
  char *Buffer; // [esp+8h] [ebp-4h]
  va_list va; // [esp+20h] [ebp+14h] BYREF

  va_start(va, format);
  if ( *((_DWORD *)this + 3) == *((_DWORD *)this + 2) )
  {
    v3 = *((_DWORD *)this + 3) - 1;
    memcpy_0(*(void **)this, (const void *)(*((_DWORD *)this + 4) + *(_DWORD *)this), *((_DWORD *)this + 4) * v3);
  }
  else
  {
    v3 = *((_DWORD *)this + 3);
    *((_DWORD *)this + 3) = v3 + 1;
  }
  Buffer = (char *)(*(_DWORD *)this + *((_DWORD *)this + 4) * v3);
  *(_DWORD *)Buffer = color;
  _vsnprintf(Buffer + 4, *((_DWORD *)this + 1), format, va);
}

//----- (0047E3D0) --------------------------------------------------------
void __thiscall CScreen::AddString(CScreen *this, unsigned int color, const char *string)
{
  int v4; // [esp+4h] [ebp-8h]
  char *Destination; // [esp+8h] [ebp-4h]

  if ( *((_DWORD *)this + 3) == *((_DWORD *)this + 2) )
  {
    v4 = *((_DWORD *)this + 3) - 1;
    memcpy_0(*(void **)this, (const void *)(*((_DWORD *)this + 4) + *(_DWORD *)this), *((_DWORD *)this + 4) * v4);
  }
  else
  {
    v4 = *((_DWORD *)this + 3);
    *((_DWORD *)this + 3) = v4 + 1;
  }
  Destination = (char *)(*(_DWORD *)this + *((_DWORD *)this + 4) * v4);
  *(_DWORD *)Destination = color;
  strncpy(Destination + 4, string, *((_DWORD *)this + 1));
}

//----- (0047E4A0) --------------------------------------------------------
void __thiscall CScreen::OnPaint(CScreen *this)
{
  int v1; // eax
  HDC hdc; // [esp+4h] [ebp-9Ch]
  struct tagPAINTSTRUCT Paint; // [esp+8h] [ebp-98h] BYREF
  int v5; // [esp+48h] [ebp-58h]
  struct tagRECT Rect; // [esp+4Ch] [ebp-54h] BYREF
  int y; // [esp+5Ch] [ebp-44h]
  struct tagTEXTMETRICA tm; // [esp+60h] [ebp-40h] BYREF
  int v9; // [esp+98h] [ebp-8h]
  int v10; // [esp+9Ch] [ebp-4h]

  v5 = dword_4D9830;
  hdc = BeginPaint(hWnd, &Paint);
  CSocket::Lock(this);
  GetTextMetricsA(hdc, &tm);
  GetClientRect(hWnd, &Rect);
  y = 0;
  v10 = Rect.bottom / tm.tmHeight;
  if ( *((_DWORD *)this + 3) <= Rect.bottom / tm.tmHeight )
  {
    v9 = *(_DWORD *)this;
    v10 = *((_DWORD *)this + 3);
  }
  else
  {
    v9 = *(_DWORD *)this + *((_DWORD *)this + 4) * (*((_DWORD *)this + 3) - v10);
  }
  while ( --v10 >= 0 )
  {
    SetTextColor(hdc, *(_DWORD *)v9);
    v1 = strlen((const char *)(v9 + 4));
    TextOutA(hdc, 0, y, (LPCSTR)(v9 + 4), v1);
    v9 += *((_DWORD *)this + 4);
    y += tm.tmHeight;
  }
  CSocket::Unlock(this);
  EndPaint(hWnd, &Paint);
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0047E5F0) --------------------------------------------------------
int __usercall sub_47E5F0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  time(&Time);
  CLink::Initialize(&pLink);
  return CIOServer::Start((CIOServer *)&unk_4E2158, a1, a2, a3, *(int *)&nPort);
}

//----- (0047E620) --------------------------------------------------------
void __usercall sub_47E620(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, CItem *_Val2)
{
  std::pair<char const * const,CItem *> *v4; // eax
  int v5; // [esp+0h] [ebp-18h]
  char v6[8]; // [esp+4h] [ebp-14h] BYREF
  char *_Val1; // [esp+Ch] [ebp-Ch] BYREF
  char v8[8]; // [esp+10h] [ebp-8h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E2170);
  CLink::Insert((CItem *)((char *)_Val2 + 112), (CLink *)&pLink);
  _Val1 = (char *)CSocket::Id(_Val2);
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)v8,
    (const char *const *)&_Val1,
    &_Val2);
  sub_445DF0(
    dword_4E214C,
    (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v6,
    v4);
  if ( dword_4E2138 <= ++dword_4E213C )
    v5 = dword_4E213C;
  else
    v5 = dword_4E2138;
  dword_4E2138 = v5;
  CRWLock::WriteUnlock((CRWLock *)&unk_4E2170, a1, a2, a3);
}
// 47E665: variable 'v4' is possibly undefined
// 4E2138: using guessed type int dword_4E2138;
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E6B0) --------------------------------------------------------
void __usercall sub_47E6B0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4)
{
  int v4; // [esp+0h] [ebp-4h] BYREF

  CRWLock::WriteLock((CRWLock *)&unk_4E2170);
  CLink::Remove((CLink *)(a4 + 112));
  --dword_4E213C;
  v4 = CSocket::Id((_DWORD *)a4);
  sub_47E990(dword_4E214C, &v4);
  CRWLock::WriteUnlock((CRWLock *)&unk_4E2170, a1, a2, a3);
}
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E700) --------------------------------------------------------
int __cdecl sub_47E700()
{
  return dword_4E213C;
}
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E710) --------------------------------------------------------
int sub_47E710()
{
  return dword_4E2138;
}
// 4E2138: using guessed type int dword_4E2138;

//----- (0047E720) --------------------------------------------------------
void __usercall sub_47E720(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  volatile LONG *i; // [esp+4h] [ebp-4h]

  CIOServer::Stop((CIOServer *)&unk_4E2158);
  CRWLock::ReadLock((CRWLock *)&unk_4E2170);
  for ( i = (volatile LONG *)pLink; i != (volatile LONG *)&pLink; i = (volatile LONG *)*i )
    sub_494760(i - 28);
  CRWLock::ReadUnlock((CRWLock *)&unk_4E2170, a1, a2, a3);
}

//----- (0047E780) --------------------------------------------------------
void __usercall sub_47E780(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  SOCKET *v3; // [esp+0h] [ebp-8h]
  volatile LONG *i; // [esp+4h] [ebp-4h]

  CRWLock::ReadLock((CRWLock *)&unk_4E2170);
  for ( i = (volatile LONG *)pLink; i != (volatile LONG *)&pLink; i = (volatile LONG *)*i )
  {
    v3 = (SOCKET *)(i - 28);
    CSocket::Write(a1, a2, a3, (int)(i - 28), 30, &Src);
    if ( InterlockedIncrement(i + 15) >= 5 )
    {
      sub_495B20((int)v3, a1, a2, a3, 0);
      sub_4947C0(v3);
    }
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E2170, a1, a2, a3);
}

//----- (0047E800) --------------------------------------------------------
volatile int *__usercall sub_47E800@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v4; // eax
  char v6[4]; // [esp+0h] [ebp-10h] BYREF
  int v7; // [esp+4h] [ebp-Ch] BYREF
  volatile int *v8; // [esp+8h] [ebp-8h]
  int v9; // [esp+Ch] [ebp-4h] BYREF

  v8 = 0;
  CRWLock::ReadLock((CRWLock *)&unk_4E2170);
  v7 = a4;
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)dword_4E214C,
    &v9,
    &v7);
  v4 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E214C, v6);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v9,
         v4) )
  {
    v8 = *(volatile int **)(sub_420250(&v9) + 4);
    CIOObject::AddRef(v8, a1, a2, a3);
  }
  CRWLock::ReadUnlock((CRWLock *)&unk_4E2170, a1, a2, a3);
  return v8;
}

//----- (0047E880) --------------------------------------------------------
void __usercall sub_47E880(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  int v3; // eax
  int v4; // [esp-14h] [ebp-20h]
  int v5; // [esp-10h] [ebp-1Ch]
  int v6; // [esp-Ch] [ebp-18h]
  int v7; // [esp-8h] [ebp-14h]
  int v8; // [esp-4h] [ebp-10h]
  _DWORD *v9; // [esp+0h] [ebp-Ch]
  int v10; // [esp+4h] [ebp-8h]
  _DWORD *i; // [esp+8h] [ebp-4h]

  if ( dword_4E2168 != -1 )
  {
    CRWLock::ReadLock((CRWLock *)&unk_4E2170);
    for ( i = (_DWORD *)pLink; i != (_DWORD *)&pLink; i = (_DWORD *)*i )
    {
      v9 = i - 28;
      v10 = i[10];
      if ( v10 )
      {
        v8 = v9[40];
        v7 = v9[42];
        v6 = v9[39];
        v5 = v9[34];
        v4 = v9[35];
        v3 = CSocket::Id(v9);
        CAuthSocket::Write(a1, a2, a3, 3, "dddwbdd", v3, v10, v4, v5, v6, v7, v8);
      }
    }
    CRWLock::ReadUnlock((CRWLock *)&unk_4E2170, a1, a2, a3);
  }
}
// 4E2168: using guessed type int dword_4E2168;

//----- (0047E940) --------------------------------------------------------
_DWORD *__userpurge sub_47E940@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5)
{
  _DWORD *v6; // [esp+0h] [ebp-10h]
  CMemory **v7; // [esp+8h] [ebp-8h]

  v7 = operator_new(0x11Cu);
  if ( v7 )
    v6 = sub_4942C0(v7, a1, a2, a3, a4, a5);
  else
    v6 = 0;
  return v6;
}

//----- (0047E990) --------------------------------------------------------
int __thiscall sub_47E990(int *this, int *a2)
{
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  sub_472C30(
    this,
    (std::pair<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator,std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> >::iterator> *)&v5,
    a2);
  v7 = 0;
  std::_Distance<std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const,CSocket *>>,0>>::iterator,unsigned int>(
    v5,
    v6,
    &v7);
  sub_47E9F0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v4,
    v5,
    v6);
  return v7;
}

//----- (0047E9F0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_47E9F0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_47EAB0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0047EA90) --------------------------------------------------------
unsigned int __thiscall sub_47EA90(int this)
{
  return std::allocator<std::pair<char const * const,CItem *>>::max_size((std::allocator<std::pair<char const * const,CItem *> > *)(this + 3));
}

//----- (0047EAB0) --------------------------------------------------------
_DWORD *__thiscall sub_47EAB0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_47EB60(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0047EB10) --------------------------------------------------------
void *__thiscall sub_47EB10(int *this, void *a2, _DWORD *a3)
{
  int v3; // eax

  v3 = sub_4789A0(this, a3);
  sub_446700(a2, v3);
  return a2;
}

//----- (0047EB40) --------------------------------------------------------
int __thiscall CServer::SendAlive(_DWORD *this)
{
  return sub_430F90(this[1]);
}
// 430F90: using guessed type _DWORD __cdecl sub_430F90(_DWORD);

//----- (0047EB60) --------------------------------------------------------
int __stdcall sub_47EB60(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_47EB60(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047EBE0) --------------------------------------------------------
void *__thiscall sub_47EBE0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047EC10) --------------------------------------------------------
int *__thiscall sub_47EC10(int *this)
{
  int *result; // eax

  this[1] = (int)sub_4471B0();
  *(_BYTE *)sub_431110(this[1]) = 1;
  *(_DWORD *)sub_478AB0(this) = this[1];
  *(_DWORD *)sub_418790(this) = this[1];
  *(_DWORD *)CServer::SendAlive(this) = this[1];
  result = this;
  this[2] = 0;
  return result;
}

//----- (0047EC80) --------------------------------------------------------
CIOServer *__thiscall sub_47EC80(CIOServer *this)
{
  CIOServer::CIOServer(this);
  *(_DWORD *)this = &off_4BC224;
  return this;
}
// 4BC224: using guessed type int (__stdcall *off_4BC224)(int);

//----- (0047ECA0) --------------------------------------------------------
std::numpunct<char> *__thiscall sub_47ECA0(std::numpunct<char> *this, char a2)
{
  sub_47ECD0(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (0047ECD0) --------------------------------------------------------
void __thiscall sub_47ECD0(std::numpunct<char> *this)
{
  std::numpunct<char>::~numpunct<char>(this);
}

//----- (0047ECF0) --------------------------------------------------------
int __thiscall sub_47ECF0(int *this)
{
  return sub_47ED10(this);
}

//----- (0047ED10) --------------------------------------------------------
int __thiscall sub_47ED10(int *this)
{
  return sub_47ED30(this);
}

//----- (0047ED30) --------------------------------------------------------
int __thiscall sub_47ED30(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_47E9F0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0047EDE0) --------------------------------------------------------
int __thiscall sub_47EDE0(int this)
{
  CBase::CBase((CBase *)this);
  *(_DWORD *)this = &off_4BC240;
  *(_DWORD *)(this + 92) = 0;
  *(_DWORD *)(this + 88) = 0;
  *(_DWORD *)(this + 84) = 0;
  *(_DWORD *)(this + 80) = 0;
  *(_DWORD *)(this + 76) = 0;
  *(_DWORD *)(this + 72) = 0;
  *(_DWORD *)(this + 68) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 52) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 32) = 0;
  return this;
}
// 4BC240: using guessed type int (__stdcall *off_4BC240)(int);

//----- (0047EEA0) --------------------------------------------------------
_DWORD *__userpurge sub_47EEA0@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5)
{
  sub_47EED0(a1, a2, a3, a4);
  if ( (a5 & 1) != 0 )
    operator_delete(a1);
  return a1;
}

//----- (0047EED0) --------------------------------------------------------
_DWORD *__usercall sub_47EED0@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  return CBase::_CBase(a1, a2, a3, a4);
}

//----- (0047EEF0) --------------------------------------------------------
int __thiscall sub_47EEF0(_DWORD *this, int a2, int a3)
{
  lisp::var *v3; // eax
  lisp::var *v4; // eax
  lisp::var *v5; // eax
  lisp::var *v6; // eax
  lisp::var *v7; // eax
  lisp::var *v8; // eax
  lisp::var *v9; // eax
  lisp::var *v10; // eax
  lisp::var *v11; // eax
  int v12; // esi
  lisp::var *v13; // eax
  lisp::var *v14; // eax
  lisp::var *v15; // eax
  lisp::var *v16; // eax
  lisp::var *v17; // eax
  lisp::var *v18; // eax
  lisp::var *v19; // eax
  lisp::var *v20; // eax
  int result; // eax
  int v22[3]; // [esp-4h] [ebp-58h] BYREF
  _DWORD *v23; // [esp+8h] [ebp-4Ch]
  char v24[4]; // [esp+10h] [ebp-44h] BYREF
  char v25[4]; // [esp+14h] [ebp-40h] BYREF
  char v26[4]; // [esp+18h] [ebp-3Ch] BYREF
  char v27[4]; // [esp+1Ch] [ebp-38h] BYREF
  char v28[4]; // [esp+20h] [ebp-34h] BYREF
  char v29[4]; // [esp+24h] [ebp-30h] BYREF
  char v30[4]; // [esp+28h] [ebp-2Ch] BYREF
  char v31[4]; // [esp+2Ch] [ebp-28h] BYREF
  char v32[4]; // [esp+30h] [ebp-24h] BYREF
  char v33[4]; // [esp+34h] [ebp-20h] BYREF
  char v34[4]; // [esp+38h] [ebp-1Ch] BYREF
  char v35[4]; // [esp+3Ch] [ebp-18h] BYREF
  char v36[4]; // [esp+40h] [ebp-14h] BYREF
  char v37[4]; // [esp+44h] [ebp-10h] BYREF
  char v38[4]; // [esp+48h] [ebp-Ch] BYREF
  char v39[4]; // [esp+4Ch] [ebp-8h] BYREF
  char v40[4]; // [esp+50h] [ebp-4h] BYREF

  v23 = this;
  v22[2] = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v4 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v39);
      v23[9] = sub_40C8D0(v4);
      goto LABEL_17;
    case 15:
      v5 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v38);
      v23[17] = sub_40C8D0(v5);
      goto LABEL_17;
    case 38:
      v3 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v40);
      v23[8] = sub_40C8D0(v3);
      goto LABEL_17;
    case 39:
      v14 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v30);
      v23[10] = sub_40C8D0(v14);
      v15 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v29);
      v23[11] = 1 << sub_40C8D0(v15);
      v16 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v28);
      v23[12] = sub_40C8D0(v16);
      v17 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v27);
      v23[13] = sub_40C8D0(v17);
      goto LABEL_17;
    case 60:
      v7 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v36);
      v23[19] = sub_40C8D0(v7);
      v8 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v35);
      v23[20] = v23[19] + sub_40C8D0(v8);
      v9 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v34);
      v23[21] = sub_40C8D0(v9);
      goto LABEL_17;
    case 61:
      v6 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v37);
      v23[18] = sub_40C8D0(v6);
      goto LABEL_17;
    case 62:
      v10 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v33);
      v23[22] = sub_40C8D0(v10);
      goto LABEL_17;
    case 63:
      v11 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v32);
      v23[23] = sub_40C8D0(v11);
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v12 = v23[23] << 8;
        v13 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v31);
        v23[23] = (unsigned __int8)sub_40C8D0(v13) | v12;
      }
      goto LABEL_17;
    case 81:
      v18 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v26);
      v23[14] = sub_40C8D0(v18);
      goto LABEL_17;
    case 94:
      v19 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v25);
      v23[15] = sub_40C8D0(v19);
      goto LABEL_17;
    case 97:
      v20 = lisp::var::pop((lisp::var *)&a3, (lisp::var *)v24);
      v23[16] = sub_40C8D0(v20);
LABEL_17:
      result = 1;
      break;
    default:
      v22[0] = a2 - 2;
      std::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>::_Callable_base<bool (__cdecl *)(enum Concurrency::agent_status const &),0>(
        v22,
        &a3);
      result = CBase::Set(v23, a2, v22[0]);
      break;
  }
  return result;
}

//----- (0047F1E0) --------------------------------------------------------
int __thiscall CInitSkill::OnLoad(_DWORD *this)
{
  int v1; // eax
  int result; // eax
  char v4[4]; // [esp+8h] [ebp-10h] BYREF
  int v5; // [esp+Ch] [ebp-Ch] BYREF
  char v6[4]; // [esp+10h] [ebp-8h] BYREF
  _DWORD *v7; // [esp+14h] [ebp-4h]

  switch ( this[8] )
  {
    case 0xFFFFFFFE:
      if ( this[9] < dword_4E2188 )
      {
        v7 = (_DWORD *)dword_4E2690[this[9]];
        goto LABEL_10;
      }
      LOG_ERR("CInitSkill::OnLoad() Invalid Monster Skill Index (%d)", this[9]);
      result = 0;
      break;
    case 0xFFFFFFFF:
      v7 = (_DWORD *)dword_4E2568[this[9]];
      goto LABEL_10;
    case 0:
    case 1:
    case 2:
      v5 = this[9] + (this[8] << 16);
      sub_446130(v6, &v5);
      v1 = sub_430C20(v4);
      if ( (unsigned __int8)unknown_libname_16(v1) )
      {
        result = 0;
      }
      else
      {
        v7 = *(_DWORD **)(sub_420250(v6) + 4);
LABEL_10:
        v7[1] = this[9];
        v7[3] = this[10];
        v7[4] = this[11];
        v7[5] = this[12];
        v7[6] = this[13];
        v7[7] = this[14];
        v7[8] = this[15];
        v7[17] = this[16];
        v7[9] = this[17];
        v7[13] = this[18];
        v7[10] = this[19];
        v7[11] = this[20];
        v7[12] = this[21];
        v7[14] = this[22];
        v7[15] = this[23];
        this[23] = 0;
        this[22] = 0;
        this[21] = 0;
        this[20] = 0;
        this[19] = 0;
        this[18] = 0;
        this[17] = 0;
        this[16] = 0;
        this[15] = 0;
        this[14] = 0;
        this[13] = 0;
        this[12] = 0;
        this[11] = 0;
        this[10] = 0;
        this[9] = 0;
        this[8] = 0;
        result = 1;
      }
      break;
    default:
      LOG_ERR("CInitSkill::OnLoad() Invalid Skill Class (%d)", this[8]);
      result = 0;
      break;
  }
  return result;
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 446130: using guessed type _DWORD __stdcall sub_446130(_DWORD, _DWORD);
// 4E2188: using guessed type int dword_4E2188;
// 4E2568: using guessed type int dword_4E2568[];
// 4E2690: using guessed type int dword_4E2690[];

//----- (0047F450) --------------------------------------------------------
_DWORD *__thiscall sub_47F450(_DWORD *this)
{
  *this = 0;
  this[1] = 0;
  memset(this + 2, 0, 0x150u);
  this[86] = 0;
  this[87] = 0;
  this[88] = 0;
  memset(this + 89, 0, 0x24u);
  return this;
}

//----- (0047F4D0) --------------------------------------------------------
LONG __thiscall sub_47F4D0(_DWORD *this)
{
  LONG result; // eax
  int v3; // [esp+4h] [ebp-10h]
  int j; // [esp+8h] [ebp-Ch]
  int v5; // [esp+Ch] [ebp-8h]
  int i; // [esp+10h] [ebp-4h]

  for ( i = 0; i < 84; ++i )
  {
    v5 = this[i + 2];
    if ( v5 )
      sub_48D900(v5);
    result = i + 1;
  }
  for ( j = 0; j < 9; ++j )
  {
    result = j;
    v3 = this[j + 89];
    if ( v3 )
      result = sub_48D900(v3);
  }
  return result;
}

//----- (0047F560) --------------------------------------------------------
int sub_47F560()
{
  int result; // eax
  char v1[8]; // [esp+0h] [ebp-10h] BYREF
  int i; // [esp+8h] [ebp-8h]
  int v3; // [esp+Ch] [ebp-4h]

  v3 = 152;
  for ( i = 0; i < v3; ++i )
  {
    sub_48D6D0(
      dword_4E218C,
      (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v1,
      (std::pair<char const * const,CItem *> *)(8 * i + 5120424));
    if ( !v1[4] )
      LOG_ERR("Duplicate key at Skill Map. (%x)", dword_4E21A8[2 * i]);
    result = i + 1;
  }
  return result;
}
// 4E21A8: using guessed type int dword_4E21A8[];

//----- (0047F5D0) --------------------------------------------------------
int sub_47F5D0()
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v0; // eax
  int result; // eax
  int v2; // eax
  char v3[4]; // [esp+8h] [ebp-14h] BYREF
  int v4; // [esp+Ch] [ebp-10h] BYREF
  void *v5; // [esp+10h] [ebp-Ch]
  int i; // [esp+14h] [ebp-8h]
  int v7; // [esp+18h] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)dword_4E218C,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v0 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(dword_4E218C, v3);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v7,
               v0);
    if ( !(_BYTE)result )
      break;
    v2 = sub_420250(&v7);
    operator_delete(*(void **)(v2 + 4));
    sub_446090(&v7, &v4, 0);
  }
  for ( i = 0; i < 9; ++i )
  {
    v5 = (void *)dword_4E2668[i];
    if ( v5 )
      operator_delete(v5);
    result = i + 1;
  }
  return result;
}
// 4E2668: using guessed type int dword_4E2668[];

//----- (0047F680) --------------------------------------------------------
int __thiscall sub_47F680(_DWORD *this, int a2)
{
  int result; // eax

  *this = a2;
  result = a2;
  this[1] = *(_DWORD *)(a2 + 460);
  return result;
}

//----- (0047F6B0) --------------------------------------------------------
void __thiscall CPlayerSkill::SetSkill(_DWORD *this, int a2, int a3)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v3; // eax
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+8h] [ebp-Ch] BYREF
  int v8; // [esp+Ch] [ebp-8h]
  char v9[4]; // [esp+10h] [ebp-4h] BYREF

  if ( a2 < 84 )
  {
    v7 = a2 + (this[1] << 16);
    sub_446130(v9, &v7);
    v3 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20(v6);
    if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
           (std::vector<CIOSocket::CIOTimer>::const_iterator *)v9,
           v3) )
    {
      v4 = sub_420250(v9);
      v8 = sub_47F760(*(_DWORD *)(v4 + 4));
      sub_47F780(a2, a3);
      this[a2 + 2] = v8;
    }
    else
    {
      LOG_ERR("CPlayerSkill::SetSkill() Can't find Skill(Class:%d, Skill:%d)", this[1], a2);
    }
  }
}
// 430C20: using guessed type _DWORD __stdcall sub_430C20(_DWORD);
// 446130: using guessed type _DWORD __stdcall sub_446130(_DWORD, _DWORD);
// 47F760: using guessed type int __thiscall sub_47F760(_DWORD);
// 47F780: using guessed type _DWORD __stdcall sub_47F780(_DWORD, _DWORD);

//----- (0047F760) --------------------------------------------------------
void *__thiscall sub_47F760(const void *this)
{
  _DWORD *v1; // eax

  v1 = sub_48D880();
  return memcpy(v1, this, 0x4Cu);
}

//----- (0047F780) --------------------------------------------------------
int __thiscall sub_47F780(_DWORD *this, int a2, int a3)
{
  int result; // eax

  this[1] = a2;
  result = a3;
  this[2] = a3;
  return result;
}

//----- (0047F7A0) --------------------------------------------------------
void __thiscall sub_47F7A0(int *this, int a2)
{
  void *v2; // eax
  char v4[4]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+8h] [ebp-Ch] BYREF
  _DWORD *v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h] BYREF

  if ( a2 < 84 && !CPlayerSkill::IsSkill(this, a2) )
  {
    v5 = a2 + (this[1] << 16);
    sub_446130(dword_4E218C, &v7, &v5);
    v2 = sub_430C20(dword_4E218C, v4);
    if ( !(unsigned __int8)unknown_libname_16(v2) )
    {
      v6 = *(_DWORD **)(sub_420250(&v7) + 4);
      if ( (*(int (__thiscall **)(_DWORD *, _DWORD, _DWORD))(*v6 + 60))(
             v6,
             *(_DWORD *)(*this + 60),
             *(_DWORD *)(*this + 464)) )
      {
        if ( sub_47F910(this, v6[5], v6[6]) )
        {
          v6 = sub_47F760(v6);
          sub_47F780(v6, a2, 1);
          (*(void (__thiscall **)(_DWORD *, int, _DWORD, _DWORD))(*v6 + 8))(v6, *this, 0, 0);
          this[a2 + 2] = (int)v6;
          if ( sub_47FD70(this, a2) )
            (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)*this + 88))(*this, 24, 0, 1);
          CPlayer::Write(*this, 81, "bb", a2, 1);
          CDBSocket::Write(9, "dbw", *(_DWORD *)(*this + 452), a2, *(_DWORD *)(*this + 548));
        }
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0047F910) --------------------------------------------------------
int __thiscall sub_47F910(_DWORD *this, int a2, int a3)
{
  int v5; // [esp+8h] [ebp-4h]

  if ( !a2 )
    return 1;
  v5 = this[a2 + 2];
  if ( !a3 )
    return this[a2 + 2];
  return v5 && *(_DWORD *)(v5 + 8) >= a3;
}

//----- (0047F970) --------------------------------------------------------
void __thiscall sub_47F970(int *this, int a2)
{
  int v3; // [esp+4h] [ebp-8h]
  _DWORD *v4; // [esp+8h] [ebp-4h]

  if ( a2 < 84 )
  {
    v4 = (_DWORD *)this[a2 + 2];
    if ( v4 )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int))(*v4 + 44))(v4, *this) )
      {
        v3 = v4[2] + 1;
        (*(void (__thiscall **)(_DWORD *, int, int, int))(*v4 + 8))(v4, *this, v3, 1);
        v4[2] = v3;
        if ( sub_47FD70(this, a2) )
          (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)*this + 88))(*this, 24, 0, 1);
        CPlayer::Write(*this, 81, "bb", a2, v3);
        CDBSocket::Write(10, "dbbw", *(_DWORD *)(*this + 452), a2, v3, *(_DWORD *)(*this + 548));
      }
    }
  }
}

//----- (0047FA60) --------------------------------------------------------
void __thiscall sub_47FA60(int *this, int a2, int a3)
{
  void *v3; // eax
  int v4; // eax
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+8h] [ebp-Ch] BYREF
  int v8; // [esp+Ch] [ebp-8h] BYREF
  _DWORD *v9; // [esp+10h] [ebp-4h]

  v9 = (_DWORD *)this[a2 + 2];
  if ( v9 )
  {
    (*(void (__thiscall **)(_DWORD *, int, int, int))(*v9 + 8))(v9, *this, a3, 1);
    v9[2] = a3;
  }
  else
  {
    v7 = a2 + (this[1] << 16);
    sub_446130(dword_4E218C, &v8, &v7);
    v3 = sub_430C20(dword_4E218C, v6);
    if ( (unsigned __int8)unknown_libname_16(v3) )
      return;
    v4 = sub_420250(&v8);
    this[a2 + 2] = (int)sub_47F760(*(const void **)(v4 + 4));
    v9 = (_DWORD *)this[a2 + 2];
    sub_47F780(v9, a2, a3);
    (*(void (__thiscall **)(_DWORD *, int, _DWORD, _DWORD))(*v9 + 8))(v9, *this, 0, 0);
  }
  CPlayer::Write(*this, 81, "bb", a2, a3);
  CDBSocket::Write(9, "dbw", *(_DWORD *)(*this + 452), a2, *(_DWORD *)(*this + 548));
  CDBSocket::Write(10, "dbbw", *(_DWORD *)(*this + 452), a2, a3, *(_DWORD *)(*this + 548));
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0047FBB0) --------------------------------------------------------
int __thiscall sub_47FBB0(_DWORD *this, int a2, int a3, int a4)
{
  int result; // eax
  int v5; // [esp+4h] [ebp-4h]

  if ( a2 < 84 )
  {
    result = a2;
    v5 = this[a2 + 2];
    if ( v5 )
      result = (*(int (__thiscall **)(int, _DWORD, int, int))(*(_DWORD *)v5 + 4))(v5, *this, a3, a4);
  }
  return result;
}

//----- (0047FC00) --------------------------------------------------------
int __thiscall sub_47FC00(_DWORD *this)
{
  int result; // eax
  int v3; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  for ( i = 0; i < 84; ++i )
  {
    v3 = this[i + 2];
    if ( v3 )
      (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v3 + 8))(v3, *this, 0, 0);
    result = i + 1;
  }
  return result;
}

//----- (0047FC50) --------------------------------------------------------
int sub_47FC50(_DWORD *a1, int a2, ...)
{
  int result; // eax
  int v3; // [esp+4h] [ebp-4h]
  va_list va; // [esp+18h] [ebp+10h] BYREF

  va_start(va, a2);
  result = a2;
  v3 = a1[a2 + 2];
  if ( v3 )
    result = (*(int (__thiscall **)(int, _DWORD, char *))(*(_DWORD *)v3 + 12))(v3, *a1, va);
  return result;
}

//----- (0047FC90) --------------------------------------------------------
void __thiscall sub_47FC90(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v5; // [esp+4h] [ebp-4h]
  int v6; // [esp+10h] [ebp+8h]

  if ( a2 >= 64 && a2 < 93 && *(_DWORD *)(*this + 1108) && CChar::IsGState((_DWORD *)*this, 512) )
  {
    v6 = a2 - 64;
    v5 = (_DWORD *)this[v6 + 89];
    if ( !v5 )
    {
      this[v6 + 89] = sub_47F760((const void *)dword_4E2668[v6]);
      v5 = (_DWORD *)this[v6 + 89];
    }
    if ( v5[14] == *(int *)(*this + 1112) >> 4 && (*(_DWORD *)(*this + 1112) & 0xF) >= v5[3] )
      (*(void (__thiscall **)(_DWORD *, _DWORD, int, int))(*v5 + 4))(v5, *this, a3, a4);
  }
}
// 4E2668: using guessed type int dword_4E2668[];

//----- (0047FD70) --------------------------------------------------------
int __thiscall sub_47FD70(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+4h] [ebp-8h]

  if ( a2 == 11 )
    return 0;
  if ( *(_DWORD *)(*this + 464) > 3u )
  {
    if ( a2 == 30 )
      return 0;
    v3 = *(_DWORD *)(*this + 460);
    if ( v3 )
    {
      if ( v3 == 1 && (*(_DWORD *)(*this + 464) & 8) != 0 && a2 == 61 )
        return 0;
    }
    else if ( (*(_DWORD *)(*this + 464) & 8) != 0 && (a2 == 18 || a2 == 14 || a2 == 35) )
    {
      return 0;
    }
  }
  else
  {
    v4 = *(_DWORD *)(*this + 460);
    if ( v4 )
    {
      if ( v4 == 1 )
      {
        if ( a2 == 5 )
          return 0;
        if ( a2 >= 17 && a2 <= 21 )
          return 0;
      }
      else if ( v4 == 2 )
      {
        if ( a2 == 7 )
          return 0;
        if ( a2 == 15 )
          return 0;
      }
    }
    else
    {
      if ( a2 == 14 && this[16] && *(_DWORD *)(this[16] + 8) == 1 )
        return 0;
      if ( a2 == 4 && this[6] && *(_DWORD *)(this[6] + 8) == 1 )
        return 0;
      if ( a2 == 6 && this[8] && *(_DWORD *)(this[8] + 8) == 1 )
        return 0;
      if ( a2 == 15 )
        return 0;
    }
  }
  return 1;
}

//----- (0047FF00) --------------------------------------------------------
void __thiscall sub_47FF00(int *this, int a2)
{
  int v2; // [esp+0h] [ebp-Ch]
  int v3; // [esp+4h] [ebp-8h]

  if ( !a2 )
    a2 = *(_DWORD *)(*this + 60);
  if ( *(_DWORD *)(*this + 464) > 3u )
  {
    if ( a2 == 55 || a2 == 60 || a2 == 65 || a2 == 70 )
      sub_47F970(this, 30);
    v2 = *(_DWORD *)(*this + 460);
    if ( v2 )
    {
      if ( v2 == 1 && (*(_DWORD *)(*this + 464) & 8) != 0 && a2 == 59 )
        sub_47F7A0(this, 61);
    }
    else if ( (*(_DWORD *)(*this + 464) & 8) != 0 )
    {
      if ( a2 == 56 || a2 == 62 || a2 == 70 )
        sub_47F970(this, 18);
      if ( a2 == 53 || a2 == 62 )
        sub_47F970(this, 14);
      if ( a2 == 59 )
        sub_47F7A0(this, 35);
      if ( a2 == 69 )
        sub_47F970(this, 35);
    }
  }
  else
  {
    v3 = *(_DWORD *)(*this + 460);
    if ( v3 )
    {
      if ( v3 == 1 )
      {
        if ( a2 == 25 )
          sub_47F7A0(this, 5);
        if ( a2 == 35 )
          sub_47F7A0(this, 18);
        if ( a2 == 40 )
          sub_47F7A0(this, 19);
        if ( a2 == 45 )
          sub_47F7A0(this, 20);
        if ( a2 == 50 )
          sub_47F7A0(this, 21);
      }
      else if ( v3 == 2 )
      {
        if ( a2 == 25 )
          sub_47F7A0(this, 15);
        if ( a2 == 35 || a2 == 40 || a2 == 45 || a2 == 50 )
          sub_47F970(this, 7);
      }
    }
    else
    {
      if ( a2 == 15 )
        sub_47F7A0(this, 14);
      if ( a2 == 18 )
        sub_47F7A0(this, 4);
      if ( a2 == 25 )
        sub_47F7A0(this, 15);
    }
  }
}

//----- (004800E0) --------------------------------------------------------
void __thiscall CPlayerSkill::ChangeOccupationAutoLearnSkill(void *this)
{
  int v1; // [esp+4h] [ebp-10h]
  int j; // [esp+Ch] [ebp-8h]
  int i; // [esp+10h] [ebp-4h]

  if ( *(_DWORD *)(*(_DWORD *)this + 464) == 3 )
  {
    if ( *(int *)(*(_DWORD *)this + 60) < 30 )
    {
LABEL_3:
      LOG_ERR("CPlayerSkill::ChangeOccupationAutoLearnSkill()  not enough Level(%d)", *(_DWORD *)(*(_DWORD *)this + 60));
      return;
    }
    sub_47F970(11);
    v1 = *(_DWORD *)(*(_DWORD *)this + 460);
    if ( v1 )
    {
      if ( v1 == 1 )
      {
        sub_47F7A0(17);
      }
      else if ( v1 == 2 )
      {
        sub_47F7A0(7);
      }
    }
    else
    {
      sub_47F7A0(6);
    }
    for ( i = 31; i <= 50; ++i )
      sub_47FF00(i);
  }
  else if ( *(_DWORD *)(*(_DWORD *)this + 464) > 3u )
  {
    if ( *(int *)(*(_DWORD *)this + 60) < 50 )
      goto LABEL_3;
    sub_47F7A0(30);
    if ( !*(_DWORD *)(*(_DWORD *)this + 460) && (*(_DWORD *)(*(_DWORD *)this + 464) & 8) != 0 )
      sub_47F7A0(18);
    for ( j = 51; j <= *(_DWORD *)(*(_DWORD *)this + 60); ++j )
      sub_47FF00(j);
  }
}
// 47F7A0: using guessed type _DWORD __stdcall sub_47F7A0(_DWORD);
// 47F970: using guessed type _DWORD __stdcall sub_47F970(_DWORD);
// 47FF00: using guessed type _DWORD __stdcall sub_47FF00(_DWORD);

//----- (00480240) --------------------------------------------------------
void __thiscall sub_480240(int *this, int a2)
{
  _DWORD *v3; // [esp+8h] [ebp-4h]

  if ( a2 < 84 )
  {
    v3 = (_DWORD *)this[a2 + 2];
    if ( v3 )
    {
      if ( v3[8] && (CPlayer::RemoveItem(*this, 9, 362, 1) || CPlayer::RemoveItem(*this, 9, 502, 1)) )
      {
        if ( (*(int (__thiscall **)(_DWORD *, int))(*v3 + 48))(v3, *this) )
          operator_delete(v3);
      }
    }
  }
}

//----- (004802D0) --------------------------------------------------------
void __thiscall sub_4802D0(_DWORD *this)
{
  _DWORD *v2; // [esp+8h] [ebp-8h]
  int i; // [esp+Ch] [ebp-4h]

  for ( i = 0; i < 84; ++i )
  {
    v2 = (_DWORD *)this[i + 2];
    if ( v2 && v2[8] )
    {
      if ( (*(int (__thiscall **)(_DWORD *, _DWORD))(*v2 + 48))(v2, *this) )
        operator_delete(v2);
    }
  }
}

//----- (00480340) --------------------------------------------------------
void __thiscall sub_480340(_DWORD *this, int a2)
{
  void *v2; // [esp+8h] [ebp-4h]

  v2 = (void *)this[a2 + 2];
  if ( v2 )
  {
    if ( (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v2 + 48))(v2, *this) )
      operator_delete(v2);
  }
}

//----- (00480390) --------------------------------------------------------
int __thiscall sub_480390(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+4h] [ebp-4h]

  if ( a2 >= 64 )
    return 1;
  v4 = this[a2 + 2];
  if ( v4 )
    result = (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v4 + 64))(v4, *this, a3);
  else
    result = 0;
  return result;
}

//----- (004803E0) --------------------------------------------------------
void __thiscall sub_4803E0(_DWORD **this)
{
  _DWORD *v2; // [esp+14h] [ebp-14h]
  _DWORD *v3; // [esp+18h] [ebp-10h]
  _DWORD *v4; // [esp+1Ch] [ebp-Ch]
  _DWORD *v5; // [esp+20h] [ebp-8h]
  int i; // [esp+24h] [ebp-4h]

  for ( i = 0; i < 84; ++i )
  {
    v5 = this[i + 2];
    if ( v5 && v5[8] )
    {
      if ( (*(int (__thiscall **)(_DWORD *, _DWORD))(*v5 + 48))(v5, *this) )
        operator_delete(v5);
    }
  }
  if ( (*this)[115] )
  {
    if ( (*this)[115] == 1 && ((*this)[116] & 4) != 0 )
    {
      v2 = this[63];
      if ( v2 )
      {
        if ( sub_481150(v2, *this) )
          operator_delete(v2);
      }
    }
  }
  else if ( ((*this)[116] & 4) != 0 )
  {
    v3 = this[20];
    if ( v3 && sub_481150(v3, *this) )
      operator_delete(v3);
    v4 = this[37];
    if ( v4 && sub_481150(v4, *this) )
      operator_delete(v4);
  }
  CPlayerSkill::ChangeOccupationAutoLearnSkill(this);
}

//----- (00480540) --------------------------------------------------------
void __thiscall sub_480540(int *this)
{
  void *v1; // eax
  char v3[4]; // [esp+8h] [ebp-44h] BYREF
  int v4[7]; // [esp+Ch] [ebp-40h] BYREF
  _DWORD *v5; // [esp+28h] [ebp-24h]
  _DWORD *v6; // [esp+2Ch] [ebp-20h]
  int v7; // [esp+30h] [ebp-1Ch] BYREF
  void *v8; // [esp+34h] [ebp-18h]
  _DWORD *v9; // [esp+38h] [ebp-14h]
  _DWORD *v10; // [esp+3Ch] [ebp-10h]
  void *v11; // [esp+40h] [ebp-Ch]
  void *v12; // [esp+44h] [ebp-8h]
  int i; // [esp+48h] [ebp-4h]

  for ( i = 0; i < 84; ++i )
  {
    v12 = (void *)this[i + 2];
    if ( v12 && *((_DWORD *)v12 + 8) )
    {
      if ( (*(int (__thiscall **)(void *, int))(*(_DWORD *)v12 + 48))(v12, *this) )
      {
        v4[6] = (int)v12;
        operator_delete(v12);
      }
    }
  }
  if ( *(_DWORD *)(*this + 460) )
  {
    if ( *(_DWORD *)(*this + 460) == 1 )
    {
      v6 = (_DWORD *)this[6];
      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)*this + 88))(*this, 24, 1, v6[2] - 1);
      if ( v6 && sub_481150(v6, (_DWORD *)*this) )
      {
        v4[1] = (int)v6;
        operator_delete(v6);
      }
      v4[0] = (this[1] << 16) + 4;
      sub_446130(dword_4E218C, &v7, v4);
      v1 = sub_430C20(dword_4E218C, v3);
      if ( !(unsigned __int8)unknown_libname_16(v1) )
      {
        v6 = *(_DWORD **)(sub_420250(&v7) + 4);
        v6 = sub_47F760(v6);
        sub_47F780(v6, 4, 1);
        (*(void (__thiscall **)(_DWORD *, int, _DWORD, _DWORD))(*v6 + 8))(v6, *this, 0, 0);
        this[6] = (int)v6;
        CPlayer::Write(*this, 81, "bb", 4, 1);
        CDBSocket::Write(9, "dbw", *(_DWORD *)(*this + 452), 4, *(_DWORD *)(*this + 548));
      }
      if ( (*(_DWORD *)(*this + 464) & 4) != 0 )
      {
        v5 = (_DWORD *)this[63];
        if ( v5 )
        {
          if ( sub_481150(v5, (_DWORD *)*this) )
            operator_delete(v5);
        }
      }
    }
  }
  else if ( (*(_DWORD *)(*this + 464) & 4) != 0 )
  {
    v9 = (_DWORD *)this[20];
    if ( v9 && sub_481150(v9, (_DWORD *)*this) )
    {
      v4[5] = (int)v9;
      operator_delete(v9);
    }
    v10 = (_DWORD *)this[37];
    if ( v10 && sub_481150(v10, (_DWORD *)*this) )
    {
      v4[4] = (int)v10;
      operator_delete(v10);
    }
    v11 = (void *)this[6];
    if ( v10 && sub_481150(v10, (_DWORD *)*this) )
    {
      v4[3] = (int)v11;
      operator_delete(v11);
    }
    v8 = (void *)this[8];
    if ( v10 && sub_481150(v10, (_DWORD *)*this) )
    {
      v4[2] = (int)v8;
      operator_delete(v8);
    }
  }
  CPlayerSkill::ChangeOccupationAutoLearnSkill(this);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00480830) --------------------------------------------------------
_DWORD *__thiscall sub_480830(_DWORD *this)
{
  sub_48D680(this + 2);
  *this = 0;
  this[1] = 0;
  this[5] = 0;
  return this;
}

//----- (00480870) --------------------------------------------------------
int __thiscall sub_480870(int this)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v1; // eax
  int v2; // eax
  char v5[4]; // [esp+4h] [ebp-Ch] BYREF
  int v6; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 8),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v7);
  while ( 1 )
  {
    v1 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(this + 8), v5);
    if ( !std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
            (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v7,
            v1) )
      break;
    v2 = sub_420250(&v7);
    sub_48D900(*(_DWORD *)(v2 + 4));
    sub_446090(&v7, &v6, 0);
  }
  return sub_4808E0((int *)(this + 8));
}

//----- (004808E0) --------------------------------------------------------
int __thiscall sub_4808E0(int *this)
{
  return sub_48D6B0(this);
}

//----- (00480900) --------------------------------------------------------
void sub_480900()
{
  dword_4E2188 = 41;
}
// 4E2188: using guessed type int dword_4E2188;

//----- (00480910) --------------------------------------------------------
int sub_480910()
{
  int result; // eax
  int i; // [esp+4h] [ebp-8h]
  int v2; // [esp+8h] [ebp-4h]

  result = dword_4E2188;
  v2 = dword_4E2188;
  dword_4E2188 = 0;
  for ( i = 0; i < v2; ++i )
    operator_delete((void *)dword_4E2690[i]);
  return result;
}
// 4E2188: using guessed type int dword_4E2188;
// 4E2690: using guessed type int dword_4E2690[];

//----- (00480970) --------------------------------------------------------
int __thiscall sub_480970(int *this, int a2)
{
  void *v3; // eax
  char v5[4]; // [esp+4h] [ebp-10h] BYREF
  int v6; // [esp+8h] [ebp-Ch] BYREF
  int v7; // [esp+Ch] [ebp-8h]
  int v8; // [esp+10h] [ebp-4h] BYREF

  if ( this[1] )
    return 0;
  v6 = a2;
  sub_446130(this + 2, &v8, &v6);
  v3 = sub_430C20(this + 2, v5);
  if ( (unsigned __int8)unknown_libname_16(v3) )
    return 0;
  v7 = *(_DWORD *)(sub_420250(&v8) + 4);
  if ( GetTickCount() < *(_DWORD *)(v7 + 64) )
    return 0;
  this[1] = v7;
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00480A00) --------------------------------------------------------
int __thiscall sub_480A00(int this)
{
  void *v2; // eax
  char v4[4]; // [esp+4h] [ebp-Ch] BYREF
  int v5; // [esp+8h] [ebp-8h]
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  if ( *(_DWORD *)(this + 4) )
    return 0;
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)(this + 8),
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v6);
  v2 = sub_430C20((int *)(this + 8), v4);
  if ( (unsigned __int8)unknown_libname_16(v2) )
    return 0;
  v5 = *(_DWORD *)(sub_420250(v6) + 4);
  if ( GetTickCount() < *(_DWORD *)(v5 + 64) )
    return 0;
  *(_DWORD *)(this + 4) = v5;
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00480A80) --------------------------------------------------------
BOOL __thiscall sub_480A80(int *this, int a2)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v2; // eax
  BOOL result; // eax
  int *v4; // eax
  int v5; // edx
  std::pair<char const * const,CItem *> *v6; // eax
  char *_Val1; // [esp+4h] [ebp-30h] BYREF
  char v9[8]; // [esp+8h] [ebp-2Ch] BYREF
  char v10[4]; // [esp+10h] [ebp-24h] BYREF
  int v11; // [esp+14h] [ebp-20h] BYREF
  char v12[8]; // [esp+18h] [ebp-1Ch] BYREF
  CItem *_Val2; // [esp+20h] [ebp-14h] BYREF
  int v14; // [esp+24h] [ebp-10h]
  int v15; // [esp+28h] [ebp-Ch]
  int v16; // [esp+2Ch] [ebp-8h] BYREF
  int *v17; // [esp+30h] [ebp-4h]

  v17 = (int *)(*(_DWORD *)(a2 + 440) + 288);
  sub_430C20(v17, &v16);
  while ( 1 )
  {
    v2 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_445B40(v17, (int)v10);
    result = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
               (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v16,
               v2);
    if ( !result )
      break;
    v4 = (int *)sub_420010(&v16);
    v5 = v4[1];
    v14 = *v4;
    v15 = v5;
    if ( v14 < dword_4E2188 )
    {
      _Val2 = (CItem *)sub_47F760((const void *)dword_4E2690[v14]);
      sub_47F780(_Val2, v14, v15);
      _Val1 = (char *)v14;
      std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
        (std::pair<char const * const,CItem *> *)v9,
        (const char *const *)&_Val1,
        &_Val2);
      sub_48D6D0(
        this + 2,
        (std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *)v12,
        v6);
      if ( !v12[4] )
        sub_48D900((int)_Val2);
    }
    sub_430E30(&v16, &v11, 0);
  }
  *this = a2;
  return result;
}
// 480B3A: variable 'v6' is possibly undefined
// 4E2188: using guessed type int dword_4E2188;
// 4E2690: using guessed type int dword_4E2690[];

//----- (00480B70) --------------------------------------------------------
int __userpurge sub_480B70@<eax>(int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5)
{
  int v6; // [esp+0h] [ebp-14h]
  int v8; // [esp+Ch] [ebp-8h]
  DWORD v9; // [esp+10h] [ebp-4h]

  v9 = GetTickCount();
  if ( v9 < *(_DWORD *)(*a1 + 468) || !a1[1] )
    return 0;
  if ( a1[5] )
  {
    if ( v9 >= a1[5] )
      return 1;
    (*(void (__thiscall **)(int, int))(*(_DWORD *)a1[1] + 68))(a1[1], *a1);
  }
  else
  {
    v8 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)*a1);
    if ( a5 )
      v6 = std___Mpunct_wchar_t___do_frac_digits(a5);
    else
      v6 = v8;
    CChar::WriteInSight(a2, a3, a4, *a1, 61, "dbbd", v8, 5, *(_DWORD *)(a1[1] + 4), v6);
    a1[5] = *(_DWORD *)(a1[1] + 40) + v9;
  }
  return 0;
}

//----- (00480C50) --------------------------------------------------------
_DWORD *__userpurge sub_480C50@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a5)
{
  if ( a5 )
  {
    CIOObject::AddRef(a5, a2, a3, a4, (volatile int *)a5 + 88);
    (*(void (__thiscall **)(_DWORD, _DWORD, CIOObject *))(*(_DWORD *)a1[1] + 72))(a1[1], *a1, a5);
    CIOObject::Release(a5, a2, a3, a4, (volatile int *)a5 + 88);
  }
  else
  {
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1[1] + 72))(a1[1], *a1, 0);
  }
  return sub_480CD0(a1);
}

//----- (00480CD0) --------------------------------------------------------
_DWORD *__thiscall sub_480CD0(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[1] = 0;
  this[5] = 0;
  return result;
}

//----- (00480CF0) --------------------------------------------------------
void __userpurge sub_480CF0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, CIOObject *a5)
{
  if ( a5 )
  {
    CIOObject::AddRef(a5, a2, a3, a4, (volatile int *)a5 + 88);
    (*(void (__thiscall **)(_DWORD, _DWORD, CIOObject *))(**(_DWORD **)(a1 + 4) + 72))(
      *(_DWORD *)(a1 + 4),
      *(_DWORD *)a1,
      a5);
    CIOObject::Release(a5, a2, a3, a4, (volatile int *)a5 + 88);
  }
}

//----- (00480D40) --------------------------------------------------------
_DWORD *__thiscall sub_480D40(_DWORD *this)
{
  *this = &off_4BDD60;
  this[1] = -1;
  this[2] = 0;
  this[3] = 0;
  this[4] = 0;
  this[5] = 0;
  this[6] = 0;
  this[7] = 0;
  this[8] = 0;
  this[9] = 0;
  this[13] = 0;
  this[10] = 0;
  this[11] = 0;
  this[12] = 0;
  this[14] = 0;
  this[15] = 0;
  this[16] = 0;
  this[17] = 0;
  this[18] = 0;
  return this;
}
// 4BDD60: using guessed type int (__stdcall *off_4BDD60)(int, int);

//----- (00480E10) --------------------------------------------------------
int __thiscall sub_480E10(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-8h]

  if ( this[11] )
    v3 = this[11];
  else
    v3 = 1;
  return v3;
}

//----- (00480E40) --------------------------------------------------------
BOOL __thiscall sub_480E40(_DWORD *this, int a2, int a3)
{
  return a2 >= this[3] && (this[4] & a3) != 0;
}

//----- (00480E80) --------------------------------------------------------
BOOL __thiscall sub_480E80(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal(a3)
      && a2[79] == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *, int, _DWORD))(*a2 + 176))(a2, a3, 0);
}

//----- (00480F20) --------------------------------------------------------
int __thiscall sub_480F20(_DWORD *this, int a2)
{
  int v3; // [esp+0h] [ebp-14h]
  DWORD v5; // [esp+8h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-8h]
  DWORD v7; // [esp+10h] [ebp-4h]

  v6 = (*(int (__thiscall **)(_DWORD *, int))(*this + 36))(this, a2);
  v7 = GetTickCount();
  v5 = this[16];
  this[16] = v6 + v7;
  if ( v7 >= v5 )
    v3 = v6;
  else
    v3 = v7 + v6 - v5;
  return v3;
}

//----- (00480F80) --------------------------------------------------------
BOOL __stdcall sub_480F80(int a1, int a2)
{
  int Number; // [esp+4h] [ebp-4h]
  int Numbera; // [esp+4h] [ebp-4h]

  Number = *(_DWORD *)(a1 + 60) - *(_DWORD *)(a2 + 60);
  if ( Number <= 0 )
  {
    if ( Number < -9 )
      Number = -9;
    Numbera = abs(Number);
  }
  else
  {
    if ( Number > 3 )
      Number = 3;
    Numbera = Number + 10;
  }
  return dword_4D8CAC[Numbera] >= RandomBetween(1, 100);
}

//----- (00481000) --------------------------------------------------------
BOOL __thiscall sub_481000(_DWORD *this, int a2)
{
  BOOL result; // eax

  if ( this[2] < this[7] )
    result = *(_DWORD *)(a2 + 60) > this[3] + this[2] - 1;
  else
    result = 0;
  return result;
}

//----- (00481040) --------------------------------------------------------
int __thiscall sub_481040(void *this, int a2)
{
  int v2; // eax

  v2 = (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0);
  return (*(int (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 8, 0, v2);
}

//----- (00481070) --------------------------------------------------------
int __thiscall sub_481070(_DWORD *this, _DWORD *a1)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = dword_4D8D00[96 * a1[115] + this[1]];
  (*(void (__thiscall **)(_DWORD *, _DWORD *, int, int))(*this + 8))(this, a1, v4, 1);
  (*(void (__cdecl **)(_DWORD *, int, int, int))(*a1 + 88))(a1, 24, 1, this[2] - v4);
  this[2] = v4;
  CPlayer::Write((int)a1, 11, "bb", this[1], 0);
  CDBSocket::Write(22, "dbbw", a1[113], this[1], this[2], a1[137]);
  if ( v4 )
    return 0;
  a1[this[1] + 158] = 0;
  return 1;
}
// 4D8D00: using guessed type int dword_4D8D00[];

//----- (00481150) --------------------------------------------------------
int __thiscall sub_481150(_DWORD *this, _DWORD *a1)
{
  int v4; // [esp+4h] [ebp-4h]

  v4 = dword_4D8D00[96 * a1[115] + this[1]];
  (*(void (__thiscall **)(_DWORD *, _DWORD *, int, int))(*this + 8))(this, a1, v4, 1);
  this[2] = v4;
  CPlayer::Write((int)a1, 11, "bb", this[1], 1);
  CDBSocket::Write(22, "dbbw", a1[113], this[1], this[2], a1[137]);
  if ( v4 )
    return 0;
  a1[this[1] + 158] = 0;
  return 1;
}
// 4D8D00: using guessed type int dword_4D8D00[];

//----- (00481210) --------------------------------------------------------
int __userpurge sub_481210@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  __int64 v7; // rax
  char v10; // [esp+27h] [ebp-1h] BYREF

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "b", &v10);
  if ( v10 )
  {
    v7 = CChar::IsMState((_QWORD *)a5, 1i64);
    if ( !v7 )
    {
      LODWORD(v7) = a1;
      if ( *(_DWORD *)(a5 + 276) >= *(_DWORD *)(a1 + 36) )
      {
        LODWORD(v7) = CPlayer::IsWearBuffStandard((int *)a5);
        if ( !(_DWORD)v7 )
        {
          if ( CChar::IsMState((_QWORD *)a5, 8i64) )
            CChar::CancelBuff(a5, a2, a3, a4, 2);
          if ( CChar::IsMState((_QWORD *)a5, 0x2000i64) )
            CChar::CancelBuff(a5, a2, a3, a4, 12);
          (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a5 + 104))(a5, 1, 0);
          CPlayer::Rest((volatile LONG *)a5, 0);
          LODWORD(v7) = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(
                          a5,
                          8,
                          0,
                          *(_DWORD *)(a1 + 36));
        }
      }
    }
  }
  else
  {
    v7 = CChar::IsMState((_QWORD *)a5, 1i64);
    if ( v7 )
      LODWORD(v7) = (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a5 + 124))(a5, 1, 0);
  }
  return v7;
}

//----- (00481330) --------------------------------------------------------
BOOL __stdcall sub_481330(_DWORD *a1, _DWORD *a2)
{
  return CChar::IsNormal((int)a1)
      && a1[79] == a2[79]
      && CPlayer::IsWState(a1, 0)
      && (*(int (__thiscall **)(_DWORD *))(*a2 + 64))(a2)
      && CChar::IsGState(a2, 1);
}

//----- (004813A0) --------------------------------------------------------
void __userpurge sub_4813A0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-10h] [ebp-20h]
  int v12; // [esp-8h] [ebp-18h]
  int v14; // [esp+4h] [ebp-Ch] BYREF
  char v15; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v16; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v15, &v14);
  v16 = CMonster::FindMonster(a2, a3, a4, v14);
  if ( v16 )
  {
    if ( (**(int (__thiscall ***)(int))a1)(a1) )
    {
      v7 = CChar::GetMaxHP((_DWORD *)a5);
      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a5 + 88))(a5, 7, 1, v7 / 10);
      v8 = CChar::GetMaxMP((_DWORD *)a5);
      (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a5 + 88))(a5, 8, 1, v8 / 10);
      CChar::SetDirection(
        (_DWORD *)a5,
        *((_DWORD *)v16 + 83) - *(_DWORD *)(a5 + 332),
        *((_DWORD *)v16 + 84) - *(_DWORD *)(a5 + 336));
      v12 = *(_DWORD *)(a1 + 8);
      v11 = std___Mpunct_wchar_t___do_frac_digits(v16);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", *(_DWORD *)(a1 + 4), v9, v11, 0, v12);
      v10 = std___Mpunct_wchar_t___do_frac_digits(v16);
      CChar::WriteInSight(a2, a3, a4, (int)v16, 61, "db", v10, 10);
      CBase::Delete((char *)v16);
    }
    CIOObject::Release(v16, a2, a3, a4, (volatile int *)v16 + 88);
  }
}

//----- (004814F0) --------------------------------------------------------
int __thiscall sub_4814F0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int result; // eax

  if ( a4 )
  {
    a2[30] -= this[2] / 2;
    a2[33] -= this[2] / 2 + 1;
    a2[32] -= this[2] / 2 + 1;
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 9, 1, a3 / 2);
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 12, 1, a3 / 2 + 1);
    result = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 11, 1, a3 / 2 + 1);
  }
  else
  {
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 9, 1, this[2] / 2);
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 12, 1, this[2] / 2 + 1);
    result = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 11, 1, this[2] / 2 + 1);
  }
  return result;
}

//----- (00481630) --------------------------------------------------------
int __thiscall sub_481630(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int result; // eax

  if ( a4 )
  {
    a2[33] -= this[2];
    a2[32] -= this[2] / 2;
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 12, 1, a3);
    result = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 11, 1, a3 / 2);
  }
  else
  {
    (*(void (__cdecl **)(_DWORD *, int, int, _DWORD))(*a2 + 92))(a2, 12, 1, this[2]);
    result = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 11, 1, this[2] / 2);
  }
  return result;
}

//----- (004816F0) --------------------------------------------------------
int __thiscall sub_4816F0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  if ( !a4 )
    return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 9, 1, 2 * this[2]);
  a2[30] -= 2 * this[2];
  return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 9, 1, 2 * a3);
}

//----- (00481750) --------------------------------------------------------
void __userpurge sub_481750(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  DWORD v8; // esi
  int v9; // eax
  int v10; // eax
  int v11; // [esp-18h] [ebp-48h]
  int v12; // [esp-10h] [ebp-40h]
  int v13; // [esp-Ch] [ebp-3Ch]
  int v14; // [esp-8h] [ebp-38h]
  int v15; // [esp-4h] [ebp-34h]
  int v17; // [esp+Ch] [ebp-24h] BYREF
  int v18; // [esp+10h] [ebp-20h] BYREF
  int v19; // [esp+14h] [ebp-1Ch] BYREF
  int v20; // [esp+18h] [ebp-18h]
  int v21; // [esp+1Ch] [ebp-14h]
  int v22; // [esp+20h] [ebp-10h]
  int v23; // [esp+24h] [ebp-Ch] BYREF
  char v24; // [esp+2Bh] [ebp-5h] BYREF
  CIOObject *v25; // [esp+2Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v24, &v23);
  v25 = 0;
  if ( v24 )
  {
    if ( v24 == 1 )
      v25 = CMonster::FindMonster(a2, a3, a4, v23);
  }
  else
  {
    v25 = sub_450810(v23);
  }
  if ( v25 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v25) )
    {
      v22 = sub_480F20(a1, a5);
      v8 = GetTickCount();
      a4 = CChar::GetASpeed((_DWORD *)a5) + v8;
      *(_DWORD *)(a5 + 1448) = a4;
      CChar::SetDirection(
        (_DWORD *)a5,
        *((_DWORD *)v25 + 83) - *(_DWORD *)(a5 + 332),
        *((_DWORD *)v25 + 84) - *(_DWORD *)(a5 + 336));
      v19 = 0;
      v18 = 0;
      v17 = 0;
      v21 = 0;
      v20 = 0;
      v20 = (*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v25 + 148))(v25, a5);
      if ( !v20 )
      {
        v21 = (*(int (__thiscall **)(_DWORD *, int, CIOObject *, int, int *, int *, int *))(*a1 + 80))(
                a1,
                a5,
                v25,
                v22,
                &v19,
                &v17,
                &v18);
        if ( !v21 )
          (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v25 + 80))(v25, a5);
      }
      (*(void (__thiscall **)(_DWORD *, int))(*a1 + 56))(a1, a5);
      v15 = v21 | (2 * v17) | (4 * v20);
      v14 = v18;
      v13 = v19;
      v12 = a1[2];
      v11 = std___Mpunct_wchar_t___do_frac_digits(v25);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v9, v11, 1, v12, v13, v14, v15);
    }
    else if ( a1[10] )
    {
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v10, 0);
    }
    CIOObject::Release(v25, a2, a3, a4, (volatile int *)v25 + 88);
  }
  else if ( a1[10] )
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (00481970) --------------------------------------------------------
int __stdcall sub_481970(int *a1)
{
  int result; // eax

  result = (int)a1;
  if ( a1[46] < 5 )
    result = (*(int (__cdecl **)(int *, int, int, int))(*a1 + 92))(a1, 36, 1, 1);
  return result;
}

//----- (004819A0) --------------------------------------------------------
BOOL __thiscall sub_4819A0(void *this, _DWORD *a2, int a3)
{
  return sub_480E80(this, a2, a3) && CPlayer::IsWState(a2, 12);
}

//----- (004819F0) --------------------------------------------------------
void __thiscall CUpBow::ExcutePassive(_DWORD *this, int a2, void *Src, int end)
{
  int v4; // eax
  DWORD v5; // esi
  int v6; // eax
  unsigned int v7; // esi
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-Ch] [ebp-64h]
  int v12; // [esp-Ch] [ebp-64h]
  int v13; // [esp-8h] [ebp-60h]
  int v14; // [esp-4h] [ebp-5Ch]
  int v15; // [esp-4h] [ebp-5Ch]
  int v16; // [esp+4h] [ebp-54h]
  unsigned int v18; // [esp+10h] [ebp-48h]
  int v19; // [esp+14h] [ebp-44h] BYREF
  int v20; // [esp+18h] [ebp-40h]
  int v21; // [esp+1Ch] [ebp-3Ch]
  int v22; // [esp+20h] [ebp-38h]
  int v23; // [esp+24h] [ebp-34h]
  int v24; // [esp+28h] [ebp-30h] BYREF
  _DWORD *v25; // [esp+2Ch] [ebp-2Ch]
  int v26; // [esp+30h] [ebp-28h]
  int v27; // [esp+34h] [ebp-24h]
  int v28; // [esp+38h] [ebp-20h] BYREF
  int v29; // [esp+3Ch] [ebp-1Ch]
  int v30; // [esp+40h] [ebp-18h]
  int v31; // [esp+44h] [ebp-14h]
  int v32; // [esp+48h] [ebp-10h]
  int v33; // [esp+4Ch] [ebp-Ch] BYREF
  char v34; // [esp+53h] [ebp-5h] BYREF
  CIOObject *v35; // [esp+54h] [ebp-4h]

  ScanPacket((char *)Src, (char *)end, "bd", &v34, &v33);
  v35 = 0;
  if ( v34 )
  {
    if ( v34 == 1 )
      v35 = CMonster::FindMonster(v33);
  }
  else
  {
    v35 = sub_450810(v33);
  }
  if ( v35 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*this)(this, a2, v35) )
    {
      v32 = sub_480F20(a2);
      v5 = GetTickCount();
      *(_DWORD *)(a2 + 1448) = CChar::GetASpeed((_DWORD *)a2) + v5;
      CChar::SetDirection(
        (_DWORD *)a2,
        *((_DWORD *)v35 + 83) - *(_DWORD *)(a2 + 332),
        *((_DWORD *)v35 + 84) - *(_DWORD *)(a2 + 336));
      v30 = 0;
      v29 = 0;
      v23 = *((_DWORD *)v35 + 83) - *(_DWORD *)(a2 + 332);
      v31 = *((_DWORD *)v35 + 84) - *(_DWORD *)(a2 + 336);
      if ( v23 )
      {
        if ( v31 )
        {
          v29 = *(_DWORD *)(a2 + 336) + v23 * *(_DWORD *)(a2 + 332) / v31;
          v30 = v29 - v23 * *((_DWORD *)v35 + 83) / v31 - *((_DWORD *)v35 + 84);
        }
        else
        {
          v30 = *((_DWORD *)v35 + 83) - *(_DWORD *)(a2 + 332);
        }
      }
      else
      {
        v30 = *((_DWORD *)v35 + 84) - *(_DWORD *)(a2 + 336);
      }
      v25 = 0;
      v26 = sub_4935A0((char *)v35 + 324, 1);
      v28 = 0;
      v24 = 0;
      v27 = 0;
      while ( v26 )
      {
        v25 = (_DWORD *)unknown_libname_15(v26);
        if ( (*(int (__thiscall **)(int, _DWORD *, _DWORD))(*(_DWORD *)a2 + 176))(a2, v25, 0)
          && sub_448870((_DWORD *)(a2 + 332), v25 + 83) <= *(_DWORD *)(a2 + 312) )
        {
          if ( v23 && v31 )
          {
            v22 = v29 - v23 * v25[83] / v31 - v25[84];
          }
          else
          {
            v16 = v23 ? v25[83] - *(_DWORD *)(a2 + 332) : v25[84] - *(_DWORD *)(a2 + 336);
            v22 = v16;
          }
          if ( (v22 ^ v30) >= 0 )
          {
            if ( CChar::IsNormal((int)v25) )
            {
              if ( *(_DWORD *)(a2 + 316) == v25[79] )
              {
                v19 = 0;
                v21 = 0;
                v20 = 0;
                v20 = (*(int (__thiscall **)(CIOObject *, int))(*(_DWORD *)v35 + 148))(v35, a2);
                if ( !v20 )
                {
                  v6 = CChar::GetAttack((void *)a2);
                  v7 = v32 * (v6 + this[2] * 10 * v6 / 100);
                  v18 = v7 / (*(int (__thiscall **)(_DWORD *, int))(*this + 36))(this, a2);
                  v21 = (*(int (__thiscall **)(_DWORD *, int, unsigned int, int *, int *, int *, _DWORD *))(*v25 + 72))(
                          v25,
                          a2,
                          v18,
                          &v28,
                          &v19,
                          &v24,
                          this);
                  if ( !v21 )
                    (*(void (__thiscall **)(_DWORD *, int))(*v25 + 80))(v25, a2);
                  if ( v28 > 0 )
                  {
                    v27 = 1;
                    v14 = v24;
                    v13 = v28;
                    v11 = std___Mpunct_wchar_t___do_frac_digits(v25);
                    v8 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
                    CChar::WriteInSight(a2, 10, "bbddww", 13, this[1], v8, v11, v13, v14);
                  }
                }
              }
            }
          }
        }
        v26 = CBaseList::Pop(v26);
      }
      if ( v27 )
        (*(void (__thiscall **)(_DWORD *, int))(*this + 88))(this, a2);
      (*(void (__thiscall **)(_DWORD *, int))(*this + 56))(this, a2);
      v15 = this[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v35);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      CChar::WriteInSight(a2, 63, "bddbb", this[1], v9, v12, 0, v15);
    }
    else if ( this[10] )
    {
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      CChar::WriteInSight(a2, 61, "db", v10, 0);
    }
    CIOObject::Release(v35, (volatile int *)v35 + 88);
  }
  else if ( this[10] )
  {
    v4 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
    CChar::WriteInSight(a2, 61, "db", v4, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 480F20: using guessed type _DWORD __stdcall sub_480F20(_DWORD);
// 4935A0: using guessed type _DWORD __stdcall sub_4935A0(_DWORD, _DWORD);

//----- (00481E80) --------------------------------------------------------
BOOL __thiscall sub_481E80(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 58;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 66;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 69;
  }
  return 0;
}

//----- (00481F10) --------------------------------------------------------
int __thiscall sub_481F10(_DWORD *this, _DWORD *a2)
{
  return this[11] + CChar::GetASpeed(a2);
}

//----- (00481F30) --------------------------------------------------------
int __thiscall sub_481F30(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 7);
  return sub_481070(this, a2);
}

//----- (00481F60) --------------------------------------------------------
int __thiscall sub_481F60(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // eax
  int v5; // [esp+0h] [ebp-Ch]

  v3 = Char::GetDex(a2);
  if ( 7 * this[2] * v3 / 4 / 2 + 50 >= 70 * this[2] + 200 )
    v5 = 70 * this[2] + 200;
  else
    v5 = 7 * this[2] * v3 / 4 / 2 + 50;
  return v5 + a3;
}

//----- (00481FD0) --------------------------------------------------------
int __thiscall sub_481FD0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 9);
  return sub_481070(this, a2);
}

//----- (00482000) --------------------------------------------------------
int __thiscall sub_482000(void *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7)
{
  int v7; // eax
  int v8; // eax
  unsigned int v9; // esi
  unsigned int v10; // eax
  int v13; // [esp+8h] [ebp-4h]

  v7 = CChar::GetAttack(a2);
  v13 = (*(int (__thiscall **)(void *, void *, int))(*(_DWORD *)this + 16))(this, a2, v7);
  v8 = (*(int (__thiscall **)(void *))(*(_DWORD *)this + 84))(this);
  if ( !CChar::CheckHit((int)a2, a3, v8) )
    return 0;
  v9 = a4 * (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)a2 + 168))(a2, a3);
  *a7 = v9 / (*(int (__thiscall **)(void *, void *))(*(_DWORD *)this + 36))(this, a2);
  v10 = (*(int (__thiscall **)(void *, void *, int, int, unsigned int *, void *))(*(_DWORD *)this + 36))(
          this,
          a2,
          a5,
          a6,
          a7,
          this);
  return (*(int (__thiscall **)(_DWORD *, void *, unsigned int))(*a3 + 72))(a3, a2, a4 * v13 / v10);
}

//----- (004820C0) --------------------------------------------------------
int __thiscall sub_4820C0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 14);
  return sub_481070(this, a2);
}

//----- (004820F0) --------------------------------------------------------
int __thiscall sub_4820F0(_DWORD *this, _DWORD *a2)
{
  return this[11] + CChar::GetASpeed(a2) - 100 * ((this[2] + 1) / 2);
}

//----- (00482130) --------------------------------------------------------
int __thiscall sub_482130(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 13);
  return sub_481070(this, a2);
}

//----- (00482160) --------------------------------------------------------
int __thiscall sub_482160(int *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7)
{
  int v7; // eax
  int v8; // eax
  CBuffMoveSpeed *v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int v13; // [esp+0h] [ebp-Ch]
  int v15; // [esp+8h] [ebp-4h]

  v7 = CChar::GetAttack(a2);
  v15 = (*(int (__thiscall **)(int *, void *, int))(*this + 16))(this, a2, v7);
  v8 = (*(int (__thiscall **)(int *))(*this + 84))(this);
  if ( !CChar::CheckHit((int)a2, a3, v8) )
    return 0;
  if ( (*(int (__thiscall **)(int *, void *, _DWORD *))(*this + 40))(this, a2, a3) )
  {
    v9 = CBuff::CreateBuff(7, this[2], v13, (int)this);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v9);
  }
  v10 = a4 * (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)a2 + 168))(a2, a3);
  *a7 = v10 / (*(int (__thiscall **)(int *, void *))(*this + 36))(this, a2);
  v11 = (*(int (__thiscall **)(int *, void *, int, int, unsigned int *, int *))(*this + 36))(this, a2, a5, a6, a7, this);
  return (*(int (__thiscall **)(_DWORD *, void *, unsigned int))(*a3 + 72))(a3, a2, a4 * v15 / v11);
}
// 4821C5: variable 'v13' is possibly undefined
// 4821FB: variable 'this' is possibly undefined

//----- (00482260) --------------------------------------------------------
int __thiscall sub_482260(void *this, void *a2, _DWORD *a3, int a4, _DWORD *a5, int a6, unsigned int *a7)
{
  int v7; // eax
  int v8; // eax
  unsigned int v9; // esi
  unsigned int v10; // eax
  int v13; // [esp+8h] [ebp-8h]
  int v14; // [esp+Ch] [ebp-4h]

  v7 = CChar::GetAttack(a2);
  v14 = (*(int (__thiscall **)(void *, void *, int))(*(_DWORD *)this + 16))(this, a2, v7);
  v8 = (*(int (__thiscall **)(void *))(*(_DWORD *)this + 84))(this);
  if ( !CChar::CheckHit((int)a2, a3, v8) )
    return 0;
  v9 = a4 * (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)a2 + 168))(a2, a3);
  *a7 = v9 / (*(int (__thiscall **)(void *, void *))(*(_DWORD *)this + 36))(this, a2);
  v10 = (*(int (__thiscall **)(void *, void *, _DWORD *, int, unsigned int *, void *))(*(_DWORD *)this + 36))(
          this,
          a2,
          a5,
          a6,
          a7,
          this);
  v13 = (*(int (__thiscall **)(_DWORD *, void *, unsigned int))(*a3 + 72))(a3, a2, a4 * v14 / v10);
  if ( *a5 )
    (*(void (__thiscall **)(void *, void *))(*(_DWORD *)this + 88))(this, a2);
  return v13;
}

//----- (00482340) --------------------------------------------------------
int __thiscall sub_482340(_DWORD *this, int a2, int a3)
{
  return a3 + a3 * (10 * this[2] + 100) / 80;
}

//----- (00482370) --------------------------------------------------------
BOOL __thiscall sub_482370(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 57;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 63;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 68;
  }
  return 0;
}

//----- (004823E0) --------------------------------------------------------
BOOL __thiscall sub_4823E0(void *this, _DWORD *a2, int a3)
{
  return sub_480E80(this, a2, a3) && (int)a2[46] > 0;
}

//----- (00482430) --------------------------------------------------------
int __thiscall sub_482430(_DWORD *this, int a2, int a3)
{
  return this[2] * (5 * *(_DWORD *)(a2 + 184) + 25)
       + a3
       + 5 * *(_DWORD *)(a2 + 184)
       + 45
       + a3 * (20 * *(_DWORD *)(a2 + 184) + 2 * this[2] + 8) / 50;
}

//----- (00482490) --------------------------------------------------------
int __thiscall sub_482490(void *this, _DWORD *a2)
{
  int v2; // eax

  v2 = (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0);
  (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a2 + 88))(a2, 8, 0, v2);
  return (*(int (__cdecl **)(_DWORD *, int, _DWORD, _DWORD))(*a2 + 92))(a2, 36, 0, a2[46]);
}

//----- (004824E0) --------------------------------------------------------
BOOL __thiscall sub_4824E0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 63;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 67;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 70;
  }
  return 0;
}

//----- (00482570) --------------------------------------------------------
BOOL __thiscall sub_482570(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal(a3)
      && a2[79] == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 1)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *, int, _DWORD))(*a2 + 176))(a2, a3, 0);
}

//----- (00482610) --------------------------------------------------------
int __thiscall sub_482610(_DWORD *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7)
{
  int v7; // eax
  int v8; // eax
  CBuffMoveSpeed *v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int v13; // [esp+0h] [ebp-Ch]
  int v15; // [esp+8h] [ebp-4h]

  v7 = CChar::GetAttack(a2);
  v15 = (*(int (__thiscall **)(_DWORD *, void *, int))(*this + 16))(this, a2, v7);
  v8 = (*(int (__thiscall **)(_DWORD *))(*this + 84))(this);
  if ( !CChar::CheckHit((int)a2, a3, v8) )
    return 0;
  if ( (*(int (__thiscall **)(_DWORD *, void *, _DWORD *))(*this + 40))(this, a2, a3) )
  {
    v9 = CBuff::CreateBuff(7, 3 * this[2], v13, (int)this);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v9);
  }
  v10 = a4 * (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)a2 + 168))(a2, a3);
  *a7 = v10 / (*(int (__thiscall **)(_DWORD *, void *))(*this + 36))(this, a2);
  v11 = (*(int (__thiscall **)(_DWORD *, void *, int, int, unsigned int *, _DWORD *))(*this + 36))(
          this,
          a2,
          a5,
          a6,
          a7,
          this);
  return (*(int (__thiscall **)(_DWORD *, void *, unsigned int))(*a3 + 72))(a3, a2, a4 * v15 / v11);
}
// 482678: variable 'v13' is possibly undefined
// 4826AE: variable 'this' is possibly undefined

//----- (00482710) --------------------------------------------------------
int __thiscall sub_482710(_DWORD *this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-8h]

  if ( a3 * (10 * this[2] + 60) / 100 >= 200 )
    v4 = 200;
  else
    v4 = a3 * (10 * this[2] + 60) / 100;
  return v4 + a3;
}

//----- (00482770) --------------------------------------------------------
BOOL __thiscall sub_482770(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 59;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 64;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 68;
  }
  return 0;
}

//----- (004827E0) --------------------------------------------------------
BOOL __thiscall sub_4827E0(void *this, _DWORD *a2, int a3)
{
  return sub_480E80(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 64))(a3);
}

//----- (00482830) --------------------------------------------------------
void __userpurge sub_482830(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-24h]
  int v11; // [esp-4h] [ebp-1Ch]
  CIOObject *v13; // [esp+8h] [ebp-10h]
  int v14; // [esp+Ch] [ebp-Ch] BYREF
  char v15; // [esp+13h] [ebp-5h] BYREF
  CIOObject *v16; // [esp+14h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v15, &v14);
  v16 = 0;
  if ( v15 )
  {
    if ( v15 == 1 )
      v16 = CMonster::FindMonster(a2, a3, a4, v14);
  }
  else
  {
    v16 = sub_450810(v14);
  }
  if ( v16 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v16) )
    {
      CChar::Lock((int)v16);
      v13 = v16;
      v7 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 24))(a1, 0);
      (*(void (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)v13 + 212))(v13, a5, v7);
      CChar::Unlock((int)v16);
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      v11 = a1[2];
      v10 = std___Mpunct_wchar_t___do_frac_digits(v16);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v9, v10, 0, v11);
    }
    CIOObject::Release(v16, a2, a3, a4, (volatile int *)v16 + 88);
  }
}

//----- (00482960) --------------------------------------------------------
int __thiscall sub_482960(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 8);
  return sub_481070(this, a2);
}

//----- (00482990) --------------------------------------------------------
int __thiscall sub_482990(_DWORD *this, _DWORD *a2)
{
  return sub_481070(this, a2);
}

//----- (004829B0) --------------------------------------------------------
int __thiscall sub_4829B0(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = *(_DWORD *)(a2 + 644);
  if ( v4 )
    result = 12 * this[2] + a3 + (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v4 + 16))(v4, a2, 0);
  else
    result = 0;
  return result;
}

//----- (00482A00) --------------------------------------------------------
int __thiscall sub_482A00(_DWORD *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7)
{
  int v7; // eax
  int v8; // eax
  unsigned int v9; // esi
  unsigned int v10; // eax
  CBuffMoveSpeed *v11; // eax
  int v13; // [esp+0h] [ebp-10h]
  int v15; // [esp+8h] [ebp-8h]
  int v16; // [esp+Ch] [ebp-4h]

  v7 = CChar::GetAttack(a2);
  v16 = (*(int (__thiscall **)(_DWORD *, void *, int))(*this + 16))(this, a2, v7);
  v8 = (*(int (__thiscall **)(_DWORD *))(*this + 84))(this);
  if ( !CChar::CheckHit((int)a2, a3, v8) )
    return 0;
  v9 = a4 * (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)a2 + 168))(a2, a3);
  *a7 = v9 / (*(int (__thiscall **)(_DWORD *, void *))(*this + 36))(this, a2);
  v10 = (*(int (__thiscall **)(_DWORD *, void *, int, int, unsigned int *, _DWORD *))(*this + 36))(
          this,
          a2,
          a5,
          a6,
          a7,
          this);
  v15 = (*(int (__thiscall **)(_DWORD *, void *, unsigned int))(*a3 + 72))(a3, a2, a4 * v16 / v10);
  if ( (*(int (__thiscall **)(_DWORD *, void *, _DWORD *))(*this + 40))(this, a2, a3) )
  {
    if ( CChar::IsNormal((int)a3) )
    {
      v11 = CBuff::CreateBuff(7, this[2] / 2 + 1, v13, (int)this);
      (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v11);
    }
  }
  return v15;
}
// 482AEE: variable 'v13' is possibly undefined

//----- (00482B20) --------------------------------------------------------
int __thiscall sub_482B20(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = *(_DWORD *)(a2 + 656);
  if ( v4 )
    result = 19 * this[2] + a3 + (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v4 + 16))(v4, a2, 0);
  else
    result = 0;
  return result;
}

//----- (00482B70) --------------------------------------------------------
int __thiscall sub_482B70(_DWORD *this, int a2, int a3)
{
  int v4; // [esp+0h] [ebp-10h]
  DWORD v6; // [esp+8h] [ebp-8h]
  int v7; // [esp+Ch] [ebp-4h]

  v6 = GetTickCount() - this[10];
  if ( v6 < 0x3E8 )
    return 0;
  if ( v6 >= 0x6A4 )
  {
    if ( v6 >= 0x8FC )
    {
      if ( v6 >= 0xA28 )
      {
        if ( v6 >= 0xB54 )
          this[14] = 5;
        else
          this[14] = 4;
      }
      else
      {
        this[14] = 3;
      }
    }
    else
    {
      this[14] = 2;
    }
  }
  else
  {
    this[14] = 1;
  }
  switch ( this[14] )
  {
    case 1:
      v7 = a3 * (50 * this[14] + 25 * this[2] + 50) / 90;
      break;
    case 2:
      v7 = a3 * (50 * this[14] + 32 * this[2] + 50) / 90;
      break;
    case 3:
      v7 = a3 * (50 * this[14] + 40 * this[2] + 50) / 90;
      break;
    case 4:
      v7 = a3 * (50 * this[14] + 47 * this[2] + 50) / 90;
      break;
    case 5:
      v7 = a3 * (50 * this[14] + 55 * this[2] + 50) / 90;
      break;
    default:
      return 0;
  }
  if ( v7 >= 2000 )
    v4 = 2000;
  else
    v4 = v7;
  return v4 + a3;
}

//----- (00482D30) --------------------------------------------------------
int __thiscall sub_482D30(_DWORD *this)
{
  return (this[2] + 1) / 2 + 2 * this[14] - 1;
}

//----- (00482D60) --------------------------------------------------------
BOOL __thiscall sub_482D60(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 60;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 66;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 69;
  }
  return 0;
}

//----- (00482DF0) --------------------------------------------------------
int __thiscall sub_482DF0(_DWORD *this, int a2, int a3)
{
  return (this[2] + 2) * (50 * a3 / 100);
}

//----- (00482E20) --------------------------------------------------------
int __thiscall sub_482E20(void *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7)
{
  int v7; // eax
  unsigned int v8; // esi
  unsigned int v9; // eax
  CBuffMoveSpeed *v10; // eax
  int v12; // [esp+0h] [ebp-14h]
  int v14; // [esp+8h] [ebp-Ch]
  int v15; // [esp+Ch] [ebp-8h]
  int v16; // [esp+10h] [ebp-4h]

  v15 = CChar::GetAttack(a2);
  v16 = (*(int (__thiscall **)(void *, void *, int))(*(_DWORD *)this + 16))(this, a2, v15);
  v7 = (*(int (__thiscall **)(void *))(*(_DWORD *)this + 84))(this);
  if ( !CChar::CheckHit((int)a2, a3, v7) )
    return 0;
  v8 = a4 * (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)a2 + 168))(a2, a3);
  *a7 = v8 / (*(int (__thiscall **)(void *, void *))(*(_DWORD *)this + 36))(this, a2);
  v9 = (*(int (__thiscall **)(void *, void *, int, int, unsigned int *, void *))(*(_DWORD *)this + 36))(
         this,
         a2,
         a5,
         a6,
         a7,
         this);
  v14 = (*(int (__thiscall **)(_DWORD *, void *, unsigned int))(*a3 + 72))(a3, a2, a4 * v16 / v9);
  if ( (*(int (__thiscall **)(void *, void *, _DWORD *))(*(_DWORD *)this + 40))(this, a2, a3) )
  {
    v10 = CBuff::CreateBuff(39, 5, 50 * v15 / 100 / 5, v12);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v10);
  }
  return v14;
}
// 482F12: variable 'v12' is possibly undefined

//----- (00482F40) --------------------------------------------------------
BOOL __thiscall sub_482F40(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 67;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 70;
  return 0;
}

//----- (00482FA0) --------------------------------------------------------
void __userpurge sub_482FA0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  DWORD v8; // esi
  unsigned int v9; // esi
  int v10; // eax
  unsigned int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // [esp-18h] [ebp-4Ch]
  int v15; // [esp-10h] [ebp-44h]
  int v16; // [esp-Ch] [ebp-40h]
  unsigned int v17; // [esp-8h] [ebp-3Ch]
  int v18; // [esp-4h] [ebp-38h]
  int v20; // [esp+Ch] [ebp-28h] BYREF
  unsigned int v21; // [esp+10h] [ebp-24h] BYREF
  int v22; // [esp+14h] [ebp-20h] BYREF
  int v23; // [esp+18h] [ebp-1Ch]
  int v24; // [esp+1Ch] [ebp-18h]
  int v25; // [esp+20h] [ebp-14h]
  int v26; // [esp+24h] [ebp-10h]
  int v27; // [esp+28h] [ebp-Ch] BYREF
  char v28; // [esp+2Fh] [ebp-5h] BYREF
  CIOObject *v29; // [esp+30h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v28, &v27);
  v29 = 0;
  if ( v28 )
  {
    if ( v28 == 1 )
      v29 = CMonster::FindMonster(a2, a3, a4, v27);
  }
  else
  {
    v29 = sub_450810(v27);
  }
  if ( v29 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v29) )
    {
      v25 = sub_480F20(a1, a5);
      v8 = GetTickCount();
      *(_DWORD *)(a5 + 1448) = CChar::GetASpeed((_DWORD *)a5) + v8;
      CChar::SetDirection(
        (_DWORD *)a5,
        *((_DWORD *)v29 + 83) - *(_DWORD *)(a5 + 332),
        *((_DWORD *)v29 + 84) - *(_DWORD *)(a5 + 336));
      v22 = 0;
      v9 = v25 * (*(int (__thiscall **)(int, CIOObject *))(*(_DWORD *)a5 + 168))(a5, v29);
      v21 = v9 / (*(int (__thiscall **)(_DWORD *, int))(*a1 + 36))(a1, a5);
      v26 = sub_4833D0(a1, a5, v29);
      v20 = 0;
      v10 = sub_483230((_DWORD *)a5);
      v24 = (*(int (__thiscall **)(_DWORD *, int, int))(*a1 + 20))(a1, a5, v10);
      a4 = v25 * (v26 * v24 / 100);
      v11 = (*(int (__thiscall **)(_DWORD *, int, int *, int *, unsigned int *, _DWORD *))(*a1 + 36))(
              a1,
              a5,
              &v22,
              &v20,
              &v21,
              a1);
      v23 = (*(int (__thiscall **)(CIOObject *, int, DWORD))(*(_DWORD *)v29 + 72))(v29, a5, a4 / v11);
      if ( !v23 )
        (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v29 + 80))(v29, a5);
      (*(void (__thiscall **)(_DWORD *, int))(*a1 + 56))(a1, a5);
      v18 = v23;
      v17 = v21;
      v16 = v22;
      v15 = a1[2];
      v14 = std___Mpunct_wchar_t___do_frac_digits(v29);
      v12 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v12, v14, 1, v15, v16, v17, v18);
      (*(void (__thiscall **)(_DWORD *, int, CIOObject *, int, int, int))(*a1 + 84))(a1, a5, v29, v25, v26, v24);
    }
    else if ( a1[10] )
    {
      v13 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v13, 0);
    }
    CIOObject::Release(v29, a2, a3, a4, (volatile int *)v29 + 88);
  }
  else if ( a1[10] )
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (00483230) --------------------------------------------------------
int __thiscall sub_483230(_DWORD *this)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-Ch]

  v3 = CChar::GetMaxMagic(this);
  v1 = CChar::GetMinMagic(this);
  return RandomBetween(v1, v3);
}

//----- (00483260) --------------------------------------------------------
int __thiscall sub_483260(void *this, int a2)
{
  int v3; // [esp+8h] [ebp-4h]

  v3 = 0;
  if ( (*(int (__thiscall **)(void *))(*(_DWORD *)this + 80))(this) == 2 )
    v3 = 20 * *(_DWORD *)(a2 + 968);
  return v3;
}

//----- (004832A0) --------------------------------------------------------
int __thiscall sub_4832A0(_DWORD *this, int a2)
{
  int v4; // [esp+8h] [ebp-4h]

  if ( !a2 )
    return this[11];
  v4 = this[11];
  if ( !(*(int (__thiscall **)(_DWORD *))(*this + 80))(this) )
    v4 -= 5 * *(_DWORD *)(a2 + 976) * this[10] / 0x64u;
  return v4;
}

//----- (00483310) --------------------------------------------------------
int __thiscall sub_483310(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax

  result = (*(int (__thiscall **)(void *))(*(_DWORD *)this + 80))(this);
  if ( result == 1 )
    result = CMagic::Excute(this, a2, a3, a4, a5, a6);
  return result;
}

//----- (00483360) --------------------------------------------------------
int __thiscall CMagic::Excute(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax
  int v7; // eax

  result = a2;
  if ( *(_DWORD *)(a2 + 972) )
  {
    result = (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)this + 40))(this, a2, a3);
    if ( result )
    {
      v7 = CBuff::CreateBuff(0, *(_DWORD *)(a2 + 972) + 2, -20 * *(_DWORD *)(a2 + 972), (int)this);
      result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 180))(a3, v7);
    }
  }
  return result;
}

//----- (004833D0) --------------------------------------------------------
int __thiscall sub_4833D0(void *this, int a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // esi
  int v5; // eax
  int v7; // [esp+4h] [ebp-10h]
  int Number; // [esp+Ch] [ebp-8h]
  int v9; // [esp+10h] [ebp-4h]

  Number = *(_DWORD *)(a2 + 60) - a3[15];
  v3 = (*(int (__thiscall **)(void *))(*(_DWORD *)this + 80))(this);
  v4 = (*(int (__thiscall **)(_DWORD *, int, int))(*a3 + 144))(a3, a2, v3);
  v5 = abs(Number);
  v9 = (v4 - Number * v5 / 6) & ((v4 - Number * v5 / 6 < 0) - 1);
  if ( v9 >= 100 )
    v7 = 0;
  else
    v7 = 100 - v9;
  return v7;
}

//----- (00483460) --------------------------------------------------------
int __thiscall sub_483460(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int v6; // [esp+4h] [ebp-Ch]

  v3 = 9 * a2[15] / 2;
  v4 = CChar::GetInt(a2);
  if ( (v3 + 5 * this[2] * v4) / 2 >= 200 * this[2] + 600 )
    v6 = 200 * this[2] + 600;
  else
    v6 = (v3 + 5 * this[2] * v4) / 2;
  return v6 + a3;
}

//----- (004834E0) --------------------------------------------------------
BOOL __thiscall sub_4834E0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 63;
  return 0;
}

//----- (00483520) --------------------------------------------------------
int __thiscall sub_483520(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 3 * a2[15] / 2;
  v7 = (v3 + 3 * this[2] * CChar::GetInt(a2) / 10) / 2;
  if ( v7 >= 21 * this[2] + 30 )
    v5 = 21 * this[2] + 30;
  else
    v5 = v7;
  return v5 + a3 + 2 * this[2];
}

//----- (004835A0) --------------------------------------------------------
int __thiscall sub_4835A0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 25);
  sub_480340(a2 + 156, 33);
  return sub_481070(this, a2);
}

//----- (004835E0) --------------------------------------------------------
int __thiscall sub_4835E0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 3 * a2[15] / 2;
  v7 = (v3 + 10 * this[2] * CChar::GetInt(a2) / 3) / 2 + 380;
  if ( v7 >= 150 * this[2] + 500 )
    v5 = 150 * this[2] + 500;
  else
    v5 = v7;
  return v5 + a3;
}

//----- (00483670) --------------------------------------------------------
BOOL __thiscall sub_483670(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 59;
  return 0;
}

//----- (004836B0) --------------------------------------------------------
int __thiscall sub_4836B0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 46);
  return sub_481070(this, a2);
}

//----- (004836E0) --------------------------------------------------------
int __thiscall sub_4836E0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 3 * a2[15] / 2;
  v7 = (v3 + 14 * this[2] * CChar::GetInt(a2) / 3) / 2 + 580;
  if ( v7 >= 300 * this[2] + 600 )
    v5 = 300 * this[2] + 600;
  else
    v5 = v7;
  return v5 + a3;
}

//----- (00483770) --------------------------------------------------------
int __thiscall sub_483770(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 3 * a2[15] / 2;
  v7 = (v3 + 3 * this[2] * CChar::GetInt(a2) / 13) / 2;
  if ( v7 >= 16 * this[2] + 30 )
    v5 = 16 * this[2] + 30;
  else
    v5 = v7;
  return v5 + a3;
}

//----- (004837F0) --------------------------------------------------------
int __thiscall sub_4837F0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 24);
  sub_480340(a2 + 156, 32);
  return sub_481070(this, a2);
}

//----- (00483830) --------------------------------------------------------
int __thiscall sub_483830(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int v6; // [esp+4h] [ebp-Ch]

  v3 = 3 * a2[15] / 2;
  v4 = CChar::GetInt(a2);
  if ( (v3 + 10 * this[2] * v4 / 4) / 2 + 240 >= 150 * this[2] + 400 )
    v6 = 150 * this[2] + 400;
  else
    v6 = (v3 + 10 * this[2] * v4 / 4) / 2 + 240;
  return v6 + a3;
}

//----- (004838C0) --------------------------------------------------------
BOOL __thiscall sub_4838C0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 58;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 64;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 67;
  }
  return 0;
}

//----- (00483930) --------------------------------------------------------
int __thiscall sub_483930(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-14h]
  int v6; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * a2[15] / 2;
  nMin = (v3 + 2 * this[2] * CChar::GetInt(a2) / 16) / 2;
  nMax = nMin + sub_483260(this, (int)a2);
  if ( nMin >= 12 * this[2] + 30 )
    v6 = 12 * this[2] + 30;
  else
    v6 = nMin;
  if ( nMax >= 12 * this[2] + 180 )
    v5 = 12 * this[2] + 180;
  else
    v5 = nMax;
  return a3 + RandomBetween(v6, v5);
}

//----- (00483A00) --------------------------------------------------------
int __stdcall sub_483A00(_DWORD *a1)
{
  void *v1; // eax
  char v3[4]; // [esp+4h] [ebp-14h] BYREF
  int v4[2]; // [esp+8h] [ebp-10h] BYREF
  _DWORD *v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h] BYREF

  v5 = (_DWORD *)a1[162];
  (*(void (__cdecl **)(_DWORD *, int, int, int))(*a1 + 88))(a1, 24, 1, v5[2] - 1);
  if ( v5 && sub_481150(v5, a1) )
  {
    v4[1] = (int)v5;
    operator_delete(v5);
  }
  v4[0] = (a1[115] << 16) + 4;
  sub_446130(dword_4E218C, &v6, v4);
  v1 = sub_430C20(dword_4E218C, v3);
  if ( (unsigned __int8)unknown_libname_16(v1) )
    return 0;
  v5 = *(_DWORD **)(sub_420250(&v6) + 4);
  v5 = sub_47F760(v5);
  sub_47F780(v5, 4, 1);
  (*(void (__thiscall **)(_DWORD *, _DWORD *, _DWORD, _DWORD))(*v5 + 8))(v5, a1, 0, 0);
  a1[162] = v5;
  CPlayer::Write((int)a1, 81, "bb", 4, 1);
  CDBSocket::Write(9, "dbw", a1[113], 4, a1[137]);
  sub_480340(a1 + 156, 9);
  sub_480340(a1 + 156, 23);
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00483B50) --------------------------------------------------------
int __thiscall sub_483B50(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // esi
  int v5; // edi
  int v7; // [esp+8h] [ebp-14h]
  int v8; // [esp+Ch] [ebp-10h]
  int nMin; // [esp+14h] [ebp-8h]
  int nMax; // [esp+18h] [ebp-4h]

  v3 = 5 * a2[15] / 3;
  nMin = (v3 + 6 * this[2] * CChar::GetInt(a2) / 4) / 2 + 50;
  v4 = sub_483260(this, (int)a2);
  v5 = 5 * a2[15] / 3;
  nMax = v4 + (v5 + 11 * this[2] * CChar::GetInt(a2) / 3) / 2 + 150;
  if ( nMin >= 60 * this[2] + 200 )
    v8 = 60 * this[2] + 200;
  else
    v8 = nMin;
  if ( nMax >= 200 * this[2] + 200 )
    v7 = 200 * this[2] + 200;
  else
    v7 = nMax;
  return a3 + RandomBetween(v8, v7);
}

//----- (00483C70) --------------------------------------------------------
int __thiscall sub_483C70(_DWORD *this, _DWORD *a2, int a3)
{
  int v4; // esi
  int v5; // esi
  int v6; // esi
  int v7; // [esp+4h] [ebp-18h]
  int v8; // [esp+8h] [ebp-14h]
  int nMin; // [esp+10h] [ebp-Ch]
  int v11; // [esp+14h] [ebp-8h]
  int nMaxa; // [esp+18h] [ebp-4h]
  int nMax; // [esp+18h] [ebp-4h]

  v11 = a2[162];
  if ( !v11 )
    return 0;
  v4 = 3 * a2[15] / 2;
  nMin = v4 + 3 * this[2] * CChar::GetInt(a2) / 10 / 2 + 10;
  v5 = 3 * a2[15] / 2;
  nMaxa = v5 + 5 * this[2] * CChar::GetInt(a2) / 8 / 2 + 30;
  v6 = nMaxa + sub_483260(this, (int)a2);
  nMax = (*(int (__thiscall **)(int, _DWORD *, _DWORD))(*(_DWORD *)v11 + 20))(v11, a2, 0) + v6;
  if ( nMin >= 30 * this[2] + 150 )
    v8 = 30 * this[2] + 150;
  else
    v8 = nMin;
  if ( nMax >= 40 * this[2] + 200 )
    v7 = 40 * this[2] + 200;
  else
    v7 = nMax;
  return a3 + RandomBetween(v8, v7);
}

//----- (00483DB0) --------------------------------------------------------
int __thiscall sub_483DB0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 31);
  sub_480340(a2 + 156, 41);
  return sub_481070(this, a2);
}

//----- (00483DF0) --------------------------------------------------------
int __thiscall sub_483DF0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * a2[15] / 2 + sub_483260(this, (int)a2);
  nMin = v3 + 2 * this[2] * CChar::GetInt(a2) / 7 / 2 + 320;
  v4 = 3 * a2[15] / 2 + sub_483260(this, (int)a2);
  nMax = v4 + 10 * this[2] * CChar::GetInt(a2) / 2 / 2 + 320;
  if ( nMin >= this[2] + 450 )
    v7 = this[2] + 450;
  else
    v7 = nMin;
  if ( nMax >= 200 * this[2] + 700 )
    v6 = 200 * this[2] + 700;
  else
    v6 = nMax;
  return a3 + RandomBetween(v7, v6);
}

//----- (00483F10) --------------------------------------------------------
BOOL __thiscall sub_483F10(_DWORD *this, int a2)
{
  BOOL result; // eax

  if ( this[2] < this[7] )
    result = *(_DWORD *)(a2 + 60) >= 4 * this[2] + 53;
  else
    result = 0;
  return result;
}

//----- (00483F50) --------------------------------------------------------
int __thiscall sub_483F50(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 42);
  return sub_481070(this, a2);
}

//----- (00483F80) --------------------------------------------------------
int __thiscall sub_483F80(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * a2[15] / 2 + sub_483260(this, (int)a2);
  nMin = v3 + 5 * this[2] * (3 * CChar::GetInt(a2) / 2) / 3 / 2 + 360;
  v4 = 3 * a2[15] / 2 + sub_483260(this, (int)a2);
  nMax = v4 + 10 * this[2] * (3 * CChar::GetInt(a2) / 2) / 2 / 2 + 700;
  if ( nMin >= 154 * this[2] + 456 )
    v7 = 154 * this[2] + 456;
  else
    v7 = nMin;
  if ( nMax >= 300 * this[2] + 900 )
    v6 = 300 * this[2] + 900;
  else
    v6 = nMax;
  return a3 + RandomBetween(v7, v6);
}

//----- (004840C0) --------------------------------------------------------
BOOL __thiscall sub_4840C0(_DWORD *this, int a2)
{
  BOOL result; // eax

  if ( this[2] < this[7] )
    result = *(_DWORD *)(a2 + 60) >= 3 * this[2] + 63;
  else
    result = 0;
  return result;
}

//----- (00484100) --------------------------------------------------------
void __userpurge sub_484100(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  DWORD v8; // esi
  int v9; // eax
  int v10; // eax
  int v11; // eax
  unsigned int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // [esp-Ch] [ebp-48h]
  int v18; // [esp-Ch] [ebp-48h]
  int v19; // [esp-8h] [ebp-44h]
  unsigned int v20; // [esp-4h] [ebp-40h]
  int v21; // [esp-4h] [ebp-40h]
  int v23; // [esp+Ch] [ebp-30h] BYREF
  unsigned int v24; // [esp+10h] [ebp-2Ch] BYREF
  int v25; // [esp+14h] [ebp-28h] BYREF
  int v27; // [esp+1Ch] [ebp-20h]
  int v28; // [esp+20h] [ebp-1Ch]
  _DWORD *v29; // [esp+24h] [ebp-18h]
  void *i; // [esp+28h] [ebp-14h]
  int v31; // [esp+2Ch] [ebp-10h]
  int v32; // [esp+30h] [ebp-Ch] BYREF
  char v33; // [esp+37h] [ebp-5h] BYREF
  CIOObject *v34; // [esp+38h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v33, &v32);
  v34 = 0;
  if ( v33 )
  {
    if ( v33 == 1 )
      v34 = CMonster::FindMonster(a2, a3, a4, v32);
  }
  else
  {
    v34 = sub_450810(v32);
  }
  if ( v34 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v34) )
    {
      v31 = sub_480F20(a1, a5);
      v8 = GetTickCount();
      a4 = CChar::GetASpeed((_DWORD *)a5) + v8;
      *(_DWORD *)(a5 + 1448) = a4;
      CChar::SetDirection(
        (_DWORD *)a5,
        *((_DWORD *)v34 + 83) - *(_DWORD *)(a5 + 332),
        *((_DWORD *)v34 + 84) - *(_DWORD *)(a5 + 336));
      v29 = 0;
      v9 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
      for ( i = sub_4935A0(*(char **)(a5 + 320), a2, a3, a4, (_DWORD *)v34 + 81, v9);
            i;
            i = (void *)CBaseList::Pop((int)i, a2, a3, a4) )
      {
        v29 = (_DWORD *)unknown_libname_15(i);
        if ( (*(int (__thiscall **)(int, _DWORD *, _DWORD))(*(_DWORD *)a5 + 176))(a5, v29, 0)
          && CChar::IsNormal((int)v29)
          && *(_DWORD *)(a5 + 316) == v29[79] )
        {
          v25 = 0;
          v10 = (*(int (__thiscall **)(int, CIOObject *))(*(_DWORD *)a5 + 168))(a5, v34);
          a4 = v31 * v10;
          v24 = a4 / (*(int (__thiscall **)(_DWORD *, int))(*a1 + 36))(a1, a5);
          v28 = sub_4833D0(a1, a5, v29);
          v23 = 0;
          v11 = sub_483230((_DWORD *)a5);
          v27 = (*(int (__thiscall **)(_DWORD *, int, int))(*a1 + 20))(a1, a5, v11);
          if ( (*(int (__thiscall **)(_DWORD *))(*a1 + 100))(a1) )
          {
            a4 = v31 * (v28 * v27 / 100);
            v12 = (*(int (__thiscall **)(_DWORD *, int, int *, int *, unsigned int *, _DWORD *))(*a1 + 36))(
                    a1,
                    a5,
                    &v25,
                    &v23,
                    &v24,
                    a1);
            if ( !(*(int (__thiscall **)(_DWORD *, int, DWORD))(*v29 + 72))(v29, a5, a4 / v12) )
              (*(void (__thiscall **)(_DWORD *, int))(*v29 + 80))(v29, a5);
            if ( v25 > 0 )
            {
              v20 = v24;
              v19 = v25;
              v17 = std___Mpunct_wchar_t___do_frac_digits(v29);
              v13 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
              v14 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, unsigned int))(*a1 + 96))(
                      a1,
                      a1[1],
                      v13,
                      v17,
                      v19,
                      v20);
              CChar::WriteInSight(a2, a3, a4, a5, 10, "bbddww", v14);
              (*(void (__thiscall **)(_DWORD *, int, _DWORD *, int, int, int))(*a1 + 84))(a1, a5, v29, v31, v28, v27);
            }
          }
          else
          {
            (*(void (__thiscall **)(_DWORD *, int, _DWORD *, int, int, int))(*a1 + 84))(a1, a5, v29, v31, v28, v27);
            (*(void (__thiscall **)(_DWORD *, int))(*v29 + 80))(v29, a5);
          }
        }
      }
      (*(void (__thiscall **)(_DWORD *, int))(*a1 + 56))(a1, a5);
      v21 = a1[2];
      v18 = std___Mpunct_wchar_t___do_frac_digits(v34);
      v15 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v15, v18, 0, v21);
    }
    else if ( a1[10] )
    {
      v16 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v16, 0);
    }
    CIOObject::Release(v34, a2, a3, a4, (volatile int *)v34 + 88);
  }
  else if ( a1[10] )
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (004844A0) --------------------------------------------------------
void __userpurge sub_4844A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a6)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-34h]
  int v11; // [esp-Ch] [ebp-34h]
  int v12; // [esp-8h] [ebp-30h]
  int v13; // [esp-4h] [ebp-2Ch]
  int v14; // [esp-4h] [ebp-2Ch]
  int v16; // [esp+4h] [ebp-24h] BYREF
  int v17; // [esp+8h] [ebp-20h] BYREF
  int v18; // [esp+Ch] [ebp-1Ch] BYREF
  int v20; // [esp+14h] [ebp-14h]
  int v21; // [esp+18h] [ebp-10h]
  _DWORD *v22; // [esp+1Ch] [ebp-Ch]
  void *v23; // [esp+20h] [ebp-8h]
  DWORD v24; // [esp+24h] [ebp-4h]

  if ( a6 )
  {
    CChar::SetDirection((_DWORD *)a5, a6[83] - *(_DWORD *)(a5 + 332), a6[84] - *(_DWORD *)(a5 + 336));
    v22 = 0;
    v6 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
    v23 = sub_4934F0(*(char **)(a5 + 320), a2, a3, a4, a6 + 81, v6);
    v24 = GetTickCount();
    a1[16] = a1[11] + v24 - a1[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a5 + 228))(a5, a1[12] + v24, 1);
    *(_DWORD *)(a5 + 468) = a1[12] + v24;
    CChar::Unlock(a5);
    while ( v23 )
    {
      v22 = (_DWORD *)unknown_libname_15(v23);
      if ( CChar::IsNormal((int)v22) && *(_DWORD *)(a5 + 316) == v22[79] )
      {
        v18 = 0;
        v17 = 0;
        v21 = sub_4833D0(a1, a5, v22);
        v16 = 0;
        v20 = (*(int (__thiscall **)(_DWORD *, int))(*a1 + 88))(a1, a5);
        if ( (*(int (__thiscall **)(_DWORD *))(*a1 + 100))(a1) )
        {
          if ( !(*(int (__thiscall **)(_DWORD *, int, int, int *, int *, int *, _DWORD *))(*v22 + 72))(
                  v22,
                  a5,
                  v21 * v20 / 100,
                  &v18,
                  &v16,
                  &v17,
                  a1) )
            (*(void (__thiscall **)(_DWORD *, int))(*v22 + 80))(v22, a5);
          if ( v18 > 0 )
          {
            v13 = v17;
            v12 = v18;
            v10 = std___Mpunct_wchar_t___do_frac_digits(v22);
            v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
            v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*a1 + 96))(a1, a1[1], v7, v10, v12, v13);
            CChar::WriteInSight(a2, a3, a4, a5, 10, "bbddww", v8);
            (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*a1 + 104))(a1, a5, v22);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*a1 + 104))(a1, a5, v22);
          (*(void (__thiscall **)(_DWORD *, int))(*v22 + 80))(v22, a5);
        }
      }
      v23 = (void *)CBaseList::Pop((int)v23, a2, a3, a4);
    }
    CChar::Lock(a5);
    v14 = a1[2];
    v11 = std___Mpunct_wchar_t___do_frac_digits(a6);
    v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v9, v11, 0, v14);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (00484710) --------------------------------------------------------
void __userpurge sub_484710(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7)
{
  int v7; // eax
  int v8; // eax
  DWORD v9; // esi
  DWORD v10; // esi
  int v11; // eax
  int v12; // eax
  unsigned int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // [esp-Ch] [ebp-38h]
  int v18; // [esp-Ch] [ebp-38h]
  int v19; // [esp-8h] [ebp-34h]
  unsigned int v20; // [esp-4h] [ebp-30h]
  int v21; // [esp-4h] [ebp-30h]
  int v23; // [esp+8h] [ebp-24h] BYREF
  unsigned int v24; // [esp+Ch] [ebp-20h] BYREF
  int v25; // [esp+10h] [ebp-1Ch] BYREF
  int v27; // [esp+18h] [ebp-14h]
  int v28; // [esp+1Ch] [ebp-10h]
  _DWORD *v29; // [esp+20h] [ebp-Ch]
  void *v30; // [esp+24h] [ebp-8h]
  int v31; // [esp+28h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, int, _DWORD))*a1)(a1, a5, 0) )
  {
    v29 = 0;
    v8 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
    v30 = sub_4935A0(*(char **)(a5 + 320), a2, a3, a4, (_DWORD *)(a5 + 324), v8);
    v31 = sub_480F20(a1, a5);
    v9 = GetTickCount();
    v10 = CChar::GetASpeed((_DWORD *)a5) + v9;
    *(_DWORD *)(a5 + 1448) = v10;
    while ( v30 )
    {
      v29 = (_DWORD *)unknown_libname_15(v30);
      if ( (*(int (__thiscall **)(int, _DWORD *, _DWORD))(*(_DWORD *)a5 + 176))(a5, v29, 0)
        && CChar::IsNormal((int)v29)
        && *(_DWORD *)(a5 + 316) == v29[79] )
      {
        v25 = 0;
        v11 = (*(int (__thiscall **)(int, _DWORD *))(*(_DWORD *)a5 + 168))(a5, v29);
        v10 = v31 * v11;
        v24 = v10 / (*(int (__thiscall **)(_DWORD *, int))(*a1 + 36))(a1, a5);
        v28 = sub_4833D0(a1, a5, v29);
        v23 = 0;
        v12 = sub_483230((_DWORD *)a5);
        v27 = (*(int (__thiscall **)(_DWORD *, int, int))(*a1 + 20))(a1, a5, v12);
        if ( (*(int (__thiscall **)(_DWORD *))(*a1 + 100))(a1) )
        {
          v10 = v31 * (v28 * v27 / 100);
          v13 = (*(int (__thiscall **)(_DWORD *, int, int *, int *, unsigned int *, _DWORD *))(*a1 + 36))(
                  a1,
                  a5,
                  &v25,
                  &v23,
                  &v24,
                  a1);
          if ( !(*(int (__thiscall **)(_DWORD *, int, DWORD))(*v29 + 72))(v29, a5, v10 / v13) )
            (*(void (__thiscall **)(_DWORD *, int))(*v29 + 80))(v29, a5);
          if ( v25 > 0 )
          {
            v20 = v24;
            v19 = v25;
            v17 = std___Mpunct_wchar_t___do_frac_digits(v29);
            v14 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
            v15 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, unsigned int))(*a1 + 96))(
                    a1,
                    a1[1],
                    v14,
                    v17,
                    v19,
                    v20);
            CChar::WriteInSight(a2, a3, v10, a5, 10, "bbddww", v15);
            (*(void (__thiscall **)(_DWORD *, int, _DWORD *, int, int, int))(*a1 + 84))(a1, a5, v29, v31, v28, v27);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, int, _DWORD *, int, int, int))(*a1 + 84))(a1, a5, v29, v31, v28, v27);
          (*(void (__thiscall **)(_DWORD *, int))(*v29 + 80))(v29, a5);
        }
      }
      v30 = (void *)CBaseList::Pop((int)v30, a2, a3, v10);
    }
    (*(void (__thiscall **)(_DWORD *, int))(*a1 + 56))(a1, a5);
    v21 = a1[2];
    v18 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    v16 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, v10, a5, 63, "bddbb", a1[1], v16, v18, 0, v21);
  }
  else if ( a1[10] )
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (004849E0) --------------------------------------------------------
void __userpurge sub_4849E0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-34h]
  int v11; // [esp-Ch] [ebp-34h]
  int v12; // [esp-8h] [ebp-30h]
  int v13; // [esp-4h] [ebp-2Ch]
  int v14; // [esp-4h] [ebp-2Ch]
  int v16; // [esp+4h] [ebp-24h] BYREF
  int v17; // [esp+8h] [ebp-20h] BYREF
  int v18; // [esp+Ch] [ebp-1Ch] BYREF
  int v20; // [esp+14h] [ebp-14h]
  int v21; // [esp+18h] [ebp-10h]
  _DWORD *v22; // [esp+1Ch] [ebp-Ch]
  void *v23; // [esp+20h] [ebp-8h]
  DWORD v24; // [esp+24h] [ebp-4h]

  v22 = 0;
  v6 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
  v23 = sub_4934F0((char *)a5[80], a2, a3, a4, a5 + 81, v6);
  v24 = GetTickCount();
  a1[16] = a1[11] + v24 - a1[10];
  (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a5 + 228))(a5, a1[12] + v24, 1);
  a5[117] = a1[12] + v24;
  CChar::Unlock((int)a5);
  while ( v23 )
  {
    v22 = (_DWORD *)unknown_libname_15(v23);
    if ( CChar::IsNormal((int)v22) && a5[79] == v22[79] )
    {
      v18 = 0;
      v17 = 0;
      v21 = sub_4833D0(a1, (int)a5, v22);
      v16 = 0;
      v20 = (*(int (__thiscall **)(_DWORD *, _DWORD *))(*a1 + 88))(a1, a5);
      if ( !(*(int (__thiscall **)(_DWORD *, _DWORD *, int, int *, int *, int *, _DWORD *))(*v22 + 72))(
              v22,
              a5,
              v21 * v20 / 100,
              &v18,
              &v16,
              &v17,
              a1) )
        (*(void (__thiscall **)(_DWORD *, _DWORD *))(*v22 + 80))(v22, a5);
      if ( v18 > 0 )
      {
        v13 = v17;
        v12 = v18;
        v10 = std___Mpunct_wchar_t___do_frac_digits(v22);
        v7 = std___Mpunct_wchar_t___do_frac_digits(a5);
        v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*a1 + 96))(a1, a1[1], v7, v10, v12, v13);
        CChar::WriteInSight(a2, a3, a4, (int)a5, 10, "bbddww", v8);
        (*(void (__thiscall **)(_DWORD *, _DWORD *, _DWORD *))(*a1 + 104))(a1, a5, v22);
      }
    }
    v23 = (void *)CBaseList::Pop((int)v23, a2, a3, a4);
  }
  CChar::Lock((int)a5);
  v14 = a1[2];
  v11 = std___Mpunct_wchar_t___do_frac_digits(a5);
  v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
  CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v9, v11, 0, v14);
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (00484BE0) --------------------------------------------------------
void __userpurge sub_484BE0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  DWORD v10; // esi
  DWORD v11; // esi
  int v12; // eax
  unsigned int v13; // esi
  int v14; // eax
  unsigned int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // [esp-Ch] [ebp-44h]
  int v20; // [esp-Ch] [ebp-44h]
  int v21; // [esp-8h] [ebp-40h]
  unsigned int v22; // [esp-4h] [ebp-3Ch]
  int v23; // [esp-4h] [ebp-3Ch]
  int v25; // [esp+8h] [ebp-30h] BYREF
  unsigned int v26; // [esp+Ch] [ebp-2Ch] BYREF
  int v27; // [esp+10h] [ebp-28h] BYREF
  int v29; // [esp+18h] [ebp-20h]
  int v30; // [esp+1Ch] [ebp-1Ch]
  _DWORD *v31; // [esp+20h] [ebp-18h]
  void *v32; // [esp+24h] [ebp-14h]
  _DWORD *v33; // [esp+28h] [ebp-10h]
  int v34; // [esp+2Ch] [ebp-Ch] BYREF
  int v35; // [esp+30h] [ebp-8h] BYREF
  int v36; // [esp+34h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "dd", &v34, &v35);
  v33 = (_DWORD *)sub_491080(*(_DWORD *)(a5 + 316));
  if ( CSMap::IsValidTile(v33, &v34, 0) )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, _DWORD))*a1)(a1, a5, 0) )
    {
      v34 >>= 5;
      v35 >>= 5;
      v31 = 0;
      v9 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
      v32 = sub_4935A0(*(char **)(a5 + 320), a2, a3, a4, &v34, v9);
      v36 = sub_480F20(a1, a5);
      v10 = GetTickCount();
      v11 = CChar::GetASpeed((_DWORD *)a5) + v10;
      *(_DWORD *)(a5 + 1448) = v11;
      while ( v32 )
      {
        v31 = (_DWORD *)unknown_libname_15(v32);
        if ( (*(int (__thiscall **)(int, _DWORD *, _DWORD))(*(_DWORD *)a5 + 176))(a5, v31, 0)
          && CChar::IsNormal((int)v31)
          && *(_DWORD *)(a5 + 316) == v31[79] )
        {
          v27 = 0;
          v12 = (*(int (__thiscall **)(int, _DWORD *))(*(_DWORD *)a5 + 168))(a5, v31);
          v13 = v36 * v12;
          v26 = v13 / (*(int (__thiscall **)(_DWORD *, int))(*a1 + 36))(a1, a5);
          v30 = sub_4833D0(a1, a5, v31);
          v25 = 0;
          v14 = sub_483230((_DWORD *)a5);
          v29 = (*(int (__thiscall **)(_DWORD *, int, int))(*a1 + 20))(a1, a5, v14);
          v11 = v36 * (v30 * v29 / 100);
          v15 = (*(int (__thiscall **)(_DWORD *, int, int *, int *, unsigned int *, _DWORD *))(*a1 + 36))(
                  a1,
                  a5,
                  &v27,
                  &v25,
                  &v26,
                  a1);
          if ( !(*(int (__thiscall **)(_DWORD *, int, DWORD))(*v31 + 72))(v31, a5, v11 / v15) )
            (*(void (__thiscall **)(_DWORD *, int))(*v31 + 80))(v31, a5);
          if ( v27 > 0 )
          {
            v22 = v26;
            v21 = v27;
            v19 = std___Mpunct_wchar_t___do_frac_digits(v31);
            v16 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
            v17 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, unsigned int))(*a1 + 96))(
                    a1,
                    a1[1],
                    v16,
                    v19,
                    v21,
                    v22);
            CChar::WriteInSight(a2, a3, v11, a5, 10, "bbddww", v17);
            (*(void (__thiscall **)(_DWORD *, int, _DWORD *, int, int, int))(*a1 + 84))(a1, a5, v31, v36, v30, v29);
          }
        }
        v32 = (void *)CBaseList::Pop((int)v32, a2, a3, v11);
      }
      (*(void (__thiscall **)(_DWORD *, int))(*a1 + 56))(a1, a5);
      v23 = a1[2];
      v20 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      v18 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, v11, a5, 63, "bddbb", a1[1], v18, v20, 0, v23);
    }
    else if ( a1[10] )
    {
      v8 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v8, 0);
    }
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (00484EE0) --------------------------------------------------------
int __thiscall sub_484EE0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 5 * a2[15] / 3;
  v7 = (v3 + 5 * this[2] * CChar::GetInt(a2) / 7) / 2;
  if ( v7 >= 40 * this[2] + 120 )
    v5 = 40 * this[2] + 120;
  else
    v5 = v7;
  return v5 + a3;
}

//----- (00484F60) --------------------------------------------------------
int __thiscall sub_484F60(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 27);
  sub_480340(a2 + 156, 44);
  return sub_481070(this, a2);
}

//----- (00484FA0) --------------------------------------------------------
int __thiscall CMagicWidePos::Excute(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 5 * a2[15] / 3;
  v7 = (v3 + 6 * this[2] * CChar::GetInt(a2) / 5) / 2;
  if ( v7 >= 70 * this[2] + 150 )
    v5 = 70 * this[2] + 150;
  else
    v5 = v7;
  return v5 + a3 + 8 * this[2];
}

//----- (00485030) --------------------------------------------------------
int __thiscall sub_485030(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 47);
  return sub_481070(this, a2);
}

//----- (00485060) --------------------------------------------------------
int __thiscall sub_485060(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-4h]

  v3 = 6 * a2[15] / 2;
  v6 = (v3 + 4 * this[2] * CChar::GetInt(a2) / 5) / 2 + 580;
  if ( v6 >= 900 )
    v5 = 900;
  else
    v5 = v6;
  return v5 + a3;
}

//----- (004850D0) --------------------------------------------------------
int __thiscall sub_4850D0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 48);
  return sub_481070(this, a2);
}

//----- (00485100) --------------------------------------------------------
int __thiscall sub_485100(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax
  CBuffMoveSpeed *v7; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    if ( (int)this[18] < 8 )
    {
      ++this[18];
      v7 = CBuff::CreateBuff(26, 5 * this[2] + 4, 0, (int)this);
      result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v7);
    }
  }
  return result;
}

//----- (00485170) --------------------------------------------------------
BOOL __thiscall sub_485170(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 61;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 67;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 70;
  }
  return 0;
}

//----- (00485200) --------------------------------------------------------
int __thiscall sub_485200(_DWORD *this, int a2)
{
  int result; // eax

  result = sub_481040(this, a2);
  this[18] = 0;
  return result;
}

//----- (00485230) --------------------------------------------------------
int __thiscall sub_485230(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax
  CBuffMoveSpeed *v7; // eax
  int savedregs; // [esp+4h] [ebp+0h]

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    if ( (int)this[18] < 5 )
    {
      ++this[18];
      v7 = CBuff::CreateBuff(8, 2 * this[2] + 6, (int)this, savedregs);
      result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v7);
    }
  }
  return result;
}
// 485275: variable 'savedregs' is possibly undefined

//----- (004852A0) --------------------------------------------------------
BOOL __thiscall CMagicWideIce::GetMagic(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 58;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 63;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 68;
  }
  return 0;
}

//----- (00485310) --------------------------------------------------------
int __thiscall sub_485310(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-14h]
  int v7; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v3 = 3 * a2[15] / 2 + sub_483260(this, (int)a2);
  nMin = v3 + 7 * this[2] * CChar::GetInt(a2) / 3 / 2 + 360;
  v4 = 3 * a2[15] / 2 + sub_483260(this, (int)a2);
  nMax = v4 + 10 * this[2] * CChar::GetInt(a2) / 4 / 2 + 700;
  if ( nMin >= 700 )
    v7 = 700;
  else
    v7 = nMin;
  if ( nMax >= 1000 )
    v6 = 1000;
  else
    v6 = nMax;
  return a3 + RandomBetween(v7, v6);
}

//----- (00485400) --------------------------------------------------------
int __thiscall sub_485400(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 43);
  return sub_481070(this, a2);
}

//----- (00485430) --------------------------------------------------------
int __thiscall sub_485430(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v5; // [esp+4h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-4h]

  v3 = 3 * a2[15] / 2;
  v6 = (v3 + 2 * this[2] * CChar::GetInt(a2) / 6) / 2 + 480;
  if ( v6 >= 500 )
    v5 = 500;
  else
    v5 = v6;
  return v5 + a3;
}

//----- (004854A0) --------------------------------------------------------
int __thiscall sub_4854A0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 45);
  return sub_481070(this, a2);
}

//----- (004854D0) --------------------------------------------------------
void __userpurge sub_4854D0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-4h] [ebp-14h]
  _DWORD *v12; // [esp+4h] [ebp-Ch]
  int v13; // [esp+8h] [ebp-8h] BYREF
  int v14; // [esp+Ch] [ebp-4h] BYREF

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "dd", &v13, &v14);
  v12 = (_DWORD *)sub_491080(*(_DWORD *)(a5 + 316));
  if ( CSMap::IsValidTile(v12, &v13, 0)
    && (*(int (__thiscall **)(_DWORD *, int, int, int))(*a1 + 100))(a1, a5, v13, v14) )
  {
    v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
    v10 = a1[2];
    v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v9, 0, 0, v10);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (004855D0) --------------------------------------------------------
int __thiscall sub_4855D0(void *this, int a2, int a3)
{
  int result; // eax

  if ( a3 )
    result = (*(int (__thiscall **)(void *, int, _DWORD, _DWORD))(*(_DWORD *)this + 92))(
               this,
               a2,
               *(_DWORD *)(a3 + 332),
               *(_DWORD *)(a3 + 336));
  return result;
}

//----- (00485610) --------------------------------------------------------
void __userpurge sub_485610(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  int v7; // eax
  int v8; // eax
  int v9; // [esp-4h] [ebp-Ch]
  _DWORD *v11; // [esp+4h] [ebp-4h]

  v11 = (_DWORD *)sub_491080(a5[79]);
  if ( CSMap::IsValidTile(v11, &a6, 0)
    && (*(int (__thiscall **)(_DWORD *, _DWORD *, int, int))(*a1 + 104))(a1, a5, a6, a7) )
  {
    v9 = a1[2];
    v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v8, 0, 0, v9);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 61, "db", v7, 0);
  }
}

//----- (004856D0) --------------------------------------------------------
_DWORD *__thiscall CChainLitning::GetMagic(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  int v6; // esi
  int v7; // edi
  int v8; // eax
  int nMin; // [esp+Ch] [ebp-Ch]
  int v12; // [esp+10h] [ebp-8h]

  v4 = sub_483260(a2);
  v5 = 3 * a2[15] / 2;
  nMin = v4 + (v5 + 5 * this[2] * (3 * CChar::GetInt(a2) / 2) / 3) / 2 + 360;
  v6 = sub_483260(a2);
  v7 = 3 * a2[15] / 2;
  v8 = CChar::GetInt(a2);
  v12 = RandomBetween(nMin, v6 + (v7 + 10 * this[2] * (3 * v8 / 2) / 2) / 2 + 700);
  return CMonsterMagic::Create(228, a2[79], &a3, 1, (int)a2, v12, 16000);
}
// 483260: using guessed type _DWORD __stdcall sub_483260(_DWORD);

//----- (004857C0) --------------------------------------------------------
_DWORD *__thiscall CChainLitning::Redistribute(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // esi
  int v5; // eax

  v4 = 3 * a2[15] / 2;
  v5 = CChar::GetInt(a2);
  return CMonsterMagic::Create(229, a2[79], &a3, 1, (int)a2, 60 * ((v4 + 10 * this[2] * v5 / 4) / 2 + 240) / 100, 16000);
}

//----- (00485840) --------------------------------------------------------
CMonsterMagic *__userpurge sub_485840@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, _DWORD *a4, int a5, int a6)
{
  int v6; // esi
  int v7; // eax

  v6 = 3 * a4[15] / 2;
  v7 = CChar::GetInt(a4);
  return CMonsterMagic::Create(
           a2,
           a3,
           v6,
           230,
           a4[79],
           &a5,
           1,
           (int)a4,
           60 * ((v6 + 14 * *(_DWORD *)(a1 + 8) * v7 / 3) / 2 + 380) / 100,
           16000);
}

//----- (004858C0) --------------------------------------------------------
CMonsterMagic *__userpurge sub_4858C0@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int *a5, int a6, int a7)
{
  int v7; // eax

  v7 = CChar::GetAttack(a5);
  return CMonsterMagic::Create(
           a2,
           a3,
           a4,
           231,
           a5[79],
           &a6,
           1,
           (int)a5,
           (200 * *(_DWORD *)(a1 + 8) + 50) * v7 / 100 / 10,
           12000);
}

//----- (00485930) --------------------------------------------------------
BOOL __thiscall sub_485930(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 70;
  return 0;
}

//----- (00485970) --------------------------------------------------------
void __userpurge sub_485970(_DWORD *a1@<ecx>, DWORD a2@<ebx>, _DWORD *a3, int a4, int a5)
{
  int v5; // esi
  int v6; // edi
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-24h]
  int v10; // [esp-4h] [ebp-1Ch]
  int v11; // [esp+8h] [ebp-10h]
  int v13; // [esp+10h] [ebp-8h]
  int v14; // [esp+14h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a3, 0) )
  {
    v13 = sub_480F20(a1, (int)a3);
    v5 = RandomBetween(0, 2 * a1[2]);
    v6 = 15 * a3[15] / 10;
    v14 = v5 + (unsigned int)(v13 * ((v6 + 5 * a1[2] * CChar::GetWis(a3) / 10) / 2)) / a1[11] + 100;
    if ( v14 >= 50 * a1[2] + 50 )
      v11 = 50 * a1[2] + 50;
    else
      v11 = v14;
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a3 + 88))(a3, 7, 1, v11);
    v7 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a3 + 88))(a3, 8, 0, v7);
    v10 = a1[2];
    v9 = std___Mpunct_wchar_t___do_frac_digits(a3);
    v8 = std___Mpunct_wchar_t___do_frac_digits(a3);
    CChar::WriteInSight(a2, v6, v5, (int)a3, 63, "bddbb", a1[1], v8, v9, 0, v10);
  }
}

//----- (00485AB0) --------------------------------------------------------
int __thiscall sub_485AB0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 10);
  return sub_481070(this, a2);
}

//----- (00485AE0) --------------------------------------------------------
BOOL __thiscall sub_485AE0(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal((int)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3);
}

//----- (00485B80) --------------------------------------------------------
void __userpurge sub_485B80(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-24h]
  int v13; // [esp-4h] [ebp-1Ch]
  int v15; // [esp+4h] [ebp-14h]
  int v16; // [esp+Ch] [ebp-Ch] BYREF
  char v17; // [esp+13h] [ebp-5h] BYREF
  CIOObject *v18; // [esp+14h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v17, &v16);
  v18 = sub_450810(v16);
  if ( v18 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v18) )
    {
      v15 = sub_480F20(a1, a5);
      v8 = (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 80))(a1, a5, v18);
      (*(void (__cdecl **)(CIOObject *, int, int, unsigned int))(*(_DWORD *)v18 + 88))(
        v18,
        7,
        1,
        (unsigned int)(v15 * v8) / a1[11]);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v18);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v10, v12, 0, v13);
    }
    else if ( a1[10] )
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v18, a2, a3, a4, (volatile int *)v18 + 88);
  }
  else if ( a1[10] )
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (00485CE0) --------------------------------------------------------
int __thiscall sub_485CE0(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // edi
  int v5; // esi
  int v7; // [esp+8h] [ebp-Ch]
  int v9; // [esp+10h] [ebp-4h]

  v3 = 30 * this[2];
  v4 = 7 * a2[15] / 11;
  v5 = v3 + (v4 + 3 * this[2] * CChar::GetWis(a2) / 11) / 2 + 70;
  v9 = RandomBetween(0, 2 * this[2]) + v5;
  if ( v9 >= 40 * this[2] + 100 )
    v7 = 40 * this[2] + 100;
  else
    v7 = v9;
  return v7;
}

//----- (00485D80) --------------------------------------------------------
int __thiscall sub_485D80(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 16);
  sub_480340(a2 + 156, 22);
  return sub_481070(this, a2);
}

//----- (00485DC0) --------------------------------------------------------
int __thiscall sub_485DC0(int *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // edi
  int v5; // esi
  int v7; // [esp+8h] [ebp-Ch]
  int v9; // [esp+10h] [ebp-4h]

  v3 = 50 * this[2];
  v4 = 8 * a2[15] / 11;
  v5 = v3 + (v4 + 5 * this[2] * CChar::GetWis(a2) / 9) / 2 + 500;
  v9 = RandomBetween(0, this[2]) + v5;
  if ( v9 >= 50 * this[2] + 650 )
    v7 = 50 * this[2] + 650;
  else
    v7 = v9;
  return v7;
}

//----- (00485E60) --------------------------------------------------------
int __thiscall sub_485E60(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 28);
  return sub_481070(this, a2);
}

//----- (00485E90) --------------------------------------------------------
int __thiscall sub_485E90(_DWORD *this, _DWORD *a2, int a3)
{
  int v3; // esi
  int v4; // esi
  int v6; // [esp+4h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-4h]

  v3 = 100 * this[2];
  v4 = v3 + 11 * CChar::GetWis(a2) / 3 + 750;
  v7 = RandomBetween(0, 100) + v4;
  if ( v7 >= 1600 )
    v6 = 1600;
  else
    v6 = v7;
  return v6;
}

//----- (00485EF0) --------------------------------------------------------
BOOL __thiscall sub_485EF0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 60;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 66;
  return 0;
}

//----- (00485F50) --------------------------------------------------------
int __stdcall sub_485F50(int a1, _DWORD *a2)
{
  return 25 * CChar::GetMaxHP(a2) / 100;
}

//----- (00485F70) --------------------------------------------------------
int __thiscall sub_485F70(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 55);
  return sub_481070(this, a2);
}

//----- (00485FA0) --------------------------------------------------------
int __thiscall sub_485FA0(_DWORD *this, int a2, _DWORD *a3)
{
  return (20 * this[2] + 15) * CChar::GetMaxHP(a3) / 100;
}

//----- (00485FD0) --------------------------------------------------------
BOOL __thiscall sub_485FD0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 62;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 69;
  return 0;
}

//----- (00486030) --------------------------------------------------------
int __stdcall sub_486030(int a1, _DWORD *a2)
{
  return CChar::GetMaxHP(a2);
}

//----- (00486050) --------------------------------------------------------
_DWORD *__thiscall sub_486050(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // edx
  _DWORD *result; // eax

  if ( a4 )
  {
    a2[144] -= this[2];
    v4 = a3 + a2[144];
    result = a2;
  }
  else
  {
    result = this;
    v4 = this[2] + a2[144];
  }
  a2[144] = v4;
  return result;
}

//----- (004860B0) --------------------------------------------------------
BOOL __thiscall sub_4860B0(_DWORD *this, int a2)
{
  return this[2] == 1 && (*(_DWORD *)(a2 + 464) & 2) != 0 && *(int *)(a2 + 60) >= 30;
}

//----- (004860F0) --------------------------------------------------------
int __thiscall sub_4860F0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int result; // eax
  int v5; // [esp+8h] [ebp-8h]

  if ( a4 )
  {
    a2[45] -= this[2];
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 31, 1, a3);
    if ( (int)this[2] >= 10 )
      v5 = 10;
    else
      v5 = this[2];
    a2[64] -= v5;
    if ( a3 >= 10 )
      result = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 31, 1, 10);
    else
      result = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 31, 1, a3);
  }
  else
  {
    (*(void (__cdecl **)(_DWORD *, int, int, _DWORD))(*a2 + 92))(a2, 31, 1, this[2]);
    if ( (int)this[2] >= 10 )
      result = (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 96))(a2, 31, 1, 10);
    else
      result = (*(int (__cdecl **)(_DWORD *, int, int, _DWORD))(*a2 + 96))(a2, 31, 1, this[2]);
  }
  return result;
}

//----- (004861F0) --------------------------------------------------------
BOOL __thiscall sub_4861F0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( (int)this[2] > 0 && (int)this[2] < 5 )
    return *(_DWORD *)(a2 + 60) > this[2] + 9;
  if ( (int)this[2] >= 5 && (int)this[2] < 10 )
    return *(_DWORD *)(a2 + 60) > this[2] + 28;
  if ( (int)this[2] < 10 || (int)this[2] >= 15 )
    return 0;
  return *(_DWORD *)(a2 + 60) > this[2] + 36;
}

//----- (004862A0) --------------------------------------------------------
int __thiscall sub_4862A0(_DWORD *this, _DWORD *a2)
{
  if ( !a2[115] && (a2[116] & 4) != 0 )
    sub_480340(a2 + 156, 36);
  return sub_481070(this, a2);
}

//----- (004862F0) --------------------------------------------------------
int __stdcall sub_4862F0(_DWORD *a1, int a2, int a3)
{
  if ( a3 )
    a1[45] -= 80;
  return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a1 + 92))(a1, 31, 1, 80);
}

//----- (00486350) --------------------------------------------------------
int __stdcall sub_486350(_DWORD *a1, int a2, int a3)
{
  if ( a3 )
    a1[45] -= 20;
  return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a1 + 92))(a1, 31, 1, 20);
}

//----- (004863B0) --------------------------------------------------------
BOOL __thiscall sub_4863B0(_DWORD *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= a2[15] - 9 * this[2];
}

//----- (00486420) --------------------------------------------------------
void __userpurge sub_486420(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-18h]
  int v10; // [esp-4h] [ebp-10h]
  __int64 v11; // [esp+0h] [ebp-Ch]

  if ( (**(int (__thiscall ***)(int, int, _DWORD))a1)(a1, a5, 0) )
  {
    v11 = CChar::IsMState((_QWORD *)a5, 1i64);
    if ( v11 )
      (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a5 + 124))(a5, 1, 0);
    v7 = CBuff::CreateBuff(2, 10 * *(_DWORD *)(a1 + 8) + 720, *(_DWORD *)(a1 + 8), v11);
    (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a5 + 180))(a5, v7);
    (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(
      a5,
      8,
      0,
      *(_DWORD *)(a5 + 60) - 9 * *(_DWORD *)(a1 + 8));
    v10 = *(_DWORD *)(a1 + 8);
    v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    v8 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", *(_DWORD *)(a1 + 4), v8, v9, 0, v10);
  }
}

//----- (00486500) --------------------------------------------------------
_DWORD *__thiscall sub_486500(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // edx
  _DWORD *result; // eax

  if ( a4 )
  {
    a2[242] -= this[2];
    v4 = a3 + a2[242];
    result = a2;
  }
  else
  {
    result = this;
    v4 = this[2] + a2[242];
  }
  a2[242] = v4;
  return result;
}

//----- (00486560) --------------------------------------------------------
_DWORD *__thiscall sub_486560(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // edx
  _DWORD *result; // eax

  if ( a4 )
  {
    a2[243] -= this[2];
    v4 = a3 + a2[243];
    result = a2;
  }
  else
  {
    result = this;
    v4 = this[2] + a2[243];
  }
  a2[243] = v4;
  return result;
}

//----- (004865C0) --------------------------------------------------------
_DWORD *__thiscall sub_4865C0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // edx
  _DWORD *result; // eax

  if ( a4 )
  {
    a2[244] -= this[2];
    v4 = a3 + a2[244];
    result = a2;
  }
  else
  {
    result = this;
    v4 = this[2] + a2[244];
  }
  a2[244] = v4;
  return result;
}

//----- (00486620) --------------------------------------------------------
void __userpurge sub_486620(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-10h]
  int v11; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0) )
  {
    v7 = CBuff::CreateBuff(3, 900, 2 * a1[2] + 3, a1[2]);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v7);
    v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v8);
    v11 = a1[2];
    v10 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v9, v10, 0, v11);
  }
}

//----- (004866D0) --------------------------------------------------------
BOOL __thiscall sub_4866D0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 35;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 40;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 45;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 50;
  }
  return 0;
}

//----- (00486760) --------------------------------------------------------
BOOL __thiscall sub_486760(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( (int)this[2] > 0 && (int)this[2] < 3 )
    return *(_DWORD *)(a2 + 60) > this[2] + 29;
  if ( (int)this[2] >= 3 && (int)this[2] < 6 )
    return *(_DWORD *)(a2 + 60) > this[2] + 31;
  if ( (int)this[2] >= 6 && (int)this[2] < 9 )
    return *(_DWORD *)(a2 + 60) > this[2] + 33;
  if ( (int)this[2] >= 9 && (int)this[2] < 12 )
    return *(_DWORD *)(a2 + 60) > this[2] + 35;
  if ( (int)this[2] < 12 || (int)this[2] >= 15 )
    return 0;
  return *(_DWORD *)(a2 + 60) > this[2] + 37;
}

//----- (00486860) --------------------------------------------------------
BOOL __thiscall sub_486860(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((int)a2)
      && !CChar::IsNormal((int)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3)
      && !CPlayer::IsEState(a3, 24);
}

//----- (00486910) --------------------------------------------------------
void __userpurge sub_486910(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-Ch] [ebp-1Ch]
  int v12; // [esp-4h] [ebp-14h]
  int v14; // [esp+4h] [ebp-Ch] BYREF
  char v15; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v16; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v15, &v14);
  v16 = sub_450810(v14);
  if ( v16 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v16) )
    {
      CPlayer::AddEState(v16, 8);
      (*(void (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 80))(a1, a5, v16);
      CPlayer::Write((int)v16, 67, "b", 53);
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      v12 = a1[2];
      v11 = std___Mpunct_wchar_t___do_frac_digits(v16);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v9, v11, 0, v12);
    }
    else
    {
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v10, 0);
    }
    CIOObject::Release(v16, a2, a3, a4, (volatile int *)v16 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (00486A50) --------------------------------------------------------
int __thiscall sub_486A50(_DWORD *this, int a2, _DWORD *a3)
{
  int result; // eax

  a3[147] = 13 * CChar::GetMaxHP(a3) / 100;
  result = 11 * CChar::GetMaxMP(this) / 100;
  a3[148] = result;
  return result;
}

//----- (00486AA0) --------------------------------------------------------
int __thiscall sub_486AA0(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 29);
  sub_480340(a2 + 156, 34);
  return sub_481070(this, a2);
}

//----- (00486AE0) --------------------------------------------------------
int __thiscall sub_486AE0(_DWORD *this, int a2, _DWORD *a3)
{
  int v3; // eax
  int result; // eax
  _DWORD *v5; // [esp+0h] [ebp-Ch]
  int v7; // [esp+8h] [ebp-4h]

  v3 = CChar::GetMaxHP(a3);
  a3[147] = v3 / 10 + this[2] * v3 / 4;
  v7 = CChar::GetMaxMP(v5);
  result = v7 / 10;
  a3[148] = v7 / 10 + this[2] * v7 / 10;
  return result;
}
// 486B25: variable 'v5' is possibly undefined

//----- (00486B60) --------------------------------------------------------
int __thiscall sub_486B60(_DWORD *this, int a2, _DWORD *a3)
{
  int v3; // eax
  int result; // eax
  _DWORD *v5; // [esp+0h] [ebp-Ch]
  int v7; // [esp+8h] [ebp-4h]

  v3 = CChar::GetMaxHP(a3);
  a3[147] = v3 / 10 + v3 * (12 * this[2] - 9) / 100;
  v7 = CChar::GetMaxMP(v5);
  result = v7 / 10;
  a3[148] = v7 / 10 + v7 * (4 * this[2] - 3) / 100;
  return result;
}
// 486BAA: variable 'v5' is possibly undefined

//----- (00486BF0) --------------------------------------------------------
int __thiscall sub_486BF0(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // edx
  int result; // eax

  if ( a4 )
  {
    *(_DWORD *)(a2 + 264) -= this[2] + 7;
    v4 = a3 + *(_DWORD *)(a2 + 264) + 7;
  }
  else
  {
    v4 = this[2] + *(_DWORD *)(a2 + 264) + 7;
  }
  result = a2;
  *(_DWORD *)(a2 + 264) = v4;
  return result;
}

//----- (00486C60) --------------------------------------------------------
int __thiscall sub_486C60(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 20);
  return sub_481070(this, a2);
}

//----- (00486C90) --------------------------------------------------------
_DWORD *__thiscall sub_486C90(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v4; // edx
  _DWORD *result; // eax

  if ( a4 )
  {
    a2[66] -= this[2];
    v4 = a3 + a2[66];
    result = a2;
  }
  else
  {
    result = this;
    v4 = this[2] + a2[66];
  }
  a2[66] = v4;
  return result;
}

//----- (00486CF0) --------------------------------------------------------
BOOL __thiscall sub_486CF0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 62;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 68;
  return 0;
}

//----- (00486D50) --------------------------------------------------------
void __userpurge sub_486D50(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-Ch] [ebp-10h]
  int v12; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0) )
  {
    v8 = CBuff::CreateBuff(1, 900, a1[14], a1[15]);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v8);
    v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v9);
    v12 = a1[2];
    v11 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v10 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v10, v11, 0, v12);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 61, "db", v7, 0);
  }
}

//----- (00486E20) --------------------------------------------------------
BOOL __thiscall sub_486E20(void *this, _DWORD *a2, int *a3)
{
  return CChar::IsNormal((int)a3)
      && (*(int (__thiscall **)(int *))(*a3 + 60))(a3)
      && !CPlayer::IsWearBuffStandard(a3)
      && CChar::IsNormal((int)a2)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0);
}

//----- (00486EC0) --------------------------------------------------------
void __userpurge sub_486EC0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-14h]
  _DWORD *v15; // [esp+0h] [ebp-10h]
  int v16; // [esp+4h] [ebp-Ch] BYREF
  char v17; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v18; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v17, &v16);
  v18 = sub_450810(v16);
  if ( v18 )
  {
    if ( (**(int (__thiscall ***)(int, int, CIOObject *))a1)(a1, a5, v18) )
    {
      v8 = CBuff::CreateBuff(12, 600 * *(_DWORD *)(a1 + 8), 15 * *(_DWORD *)(a1 + 8), a1);
      (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v18 + 180))(v18, v8);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v15 + 32))(v15, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = v15[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v18);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", v15[1], v10, v12, 0, v13);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v18, a2, a3, a4, (volatile int *)v18 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 486F6D: variable 'v15' is possibly undefined

//----- (00487000) --------------------------------------------------------
void __userpurge sub_487000(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-18h] [ebp-30h]
  int v13; // [esp-10h] [ebp-28h]
  int v14; // [esp+0h] [ebp-18h]
  int v16; // [esp+8h] [ebp-10h]
  int v17; // [esp+Ch] [ebp-Ch] BYREF
  char v18; // [esp+13h] [ebp-5h] BYREF
  CIOObject *v19; // [esp+14h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v18, &v17);
  v19 = 0;
  LOBYTE(v14) = v18;
  if ( v18 )
  {
    if ( v18 == 1 )
      v19 = CMonster::FindMonster(a2, a3, a4, v17);
  }
  else
  {
    v19 = sub_450810(v17);
  }
  if ( v19 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v19) )
    {
      v16 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v19) )
      {
        v16 = 1;
        v8 = CBuff::CreateBuff(8, 8, v14, (int)a1);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v19 + 180))(v19, v8);
      }
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v19 + 80))(v19, a5);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v19);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v10, v12, 1, v13, 0, 0, v16);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v19, a2, a3, a4, (volatile int *)v19 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 4870CD: variable 'v14' is possibly undefined
// 4870F8: variable 'a1' is possibly undefined

//----- (00487190) --------------------------------------------------------
int __thiscall sub_487190(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 37);
  return sub_481070(this, a2);
}

//----- (004871C0) --------------------------------------------------------
void __userpurge sub_4871C0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // [esp-Ch] [ebp-24h]
  int v14; // [esp-Ch] [ebp-24h]
  int v15; // [esp-8h] [ebp-20h]
  int v16; // [esp-4h] [ebp-1Ch]
  int v17; // [esp-4h] [ebp-1Ch]
  int v18; // [esp+0h] [ebp-18h]
  volatile int *v20; // [esp+8h] [ebp-10h]
  int v21; // [esp+10h] [ebp-8h]
  int v22; // [esp+14h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0) )
  {
    v21 = sub_480F20(a1, (int)a5);
    v22 = (unsigned int)(v21 * (*(int (__thiscall **)(_DWORD *, _DWORD *))(*a1 + 84))(a1, a5)) / a1[11];
    if ( a5[254] )
    {
      v20 = (volatile int *)CParty::FindParty(a5[254]);
      if ( v20 )
      {
        v16 = (*(int (__thiscall **)(_DWORD *))(*a1 + 80))(a1);
        v15 = a1[1];
        v8 = (*(int (__thiscall **)(_DWORD *))(*a1 + 88))(a1);
        CParty::Healing((int)v20, a5, v8, v22, v15, v16);
        CIOObject::Release(v20, a2, a3, a4);
      }
    }
    else
    {
      if ( (*(int (__thiscall **)(_DWORD *))(*a1 + 88))(a1) )
        v18 = v22 * CChar::GetMaxHP(a5) / 100;
      else
        v18 = v22;
      (*(void (__cdecl **)(_DWORD *, int, int, int))(*a5 + 88))(a5, 7, 1, v18);
      v13 = std___Mpunct_wchar_t___do_frac_digits(a5);
      v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
      v10 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, _DWORD))(*a1 + 80))(a1, a1[1], v9, v13, v18, 0);
      CChar::WriteInSight(a2, a3, a4, (int)a5, 10, "bbddww", v10);
    }
    v11 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v11);
    v17 = a1[2];
    v14 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v12 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v12, v14, 0, v17);
  }
  else if ( a1[10] )
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 61, "db", v7, 0);
  }
}

//----- (00487390) --------------------------------------------------------
int __thiscall sub_487390(_DWORD *this, _DWORD *a2)
{
  int v2; // esi
  __int64 v3; // rax
  int v4; // esi
  int v6; // [esp+4h] [ebp-Ch]
  int v8; // [esp+Ch] [ebp-4h]

  v2 = a2[15] / 2;
  v3 = v2 + 8 * this[2] * CChar::GetWis(a2) / 7;
  v4 = 60 * this[2] + (((int)v3 - HIDWORD(v3)) >> 1);
  v8 = v4 + RandomBetween(0, 10 * this[2]) + 100;
  if ( v8 >= 180 * this[2] )
    v6 = 180 * this[2];
  else
    v6 = v8;
  return v6;
}

//----- (00487430) --------------------------------------------------------
int __thiscall sub_487430(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 57);
  return sub_481070(this, a2);
}

//----- (00487460) --------------------------------------------------------
int __thiscall sub_487460(_DWORD *this, _DWORD *a2)
{
  sub_480340(a2 + 156, 58);
  return sub_481070(this, a2);
}

//----- (00487490) --------------------------------------------------------
int __stdcall sub_487490(int a1)
{
  int v1; // esi

  v1 = 8 * *(_DWORD *)(a1 + 60) / 11;
  return v1 + RandomBetween(0, 100) + 550;
}

//----- (004874D0) --------------------------------------------------------
BOOL __thiscall sub_4874D0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 58;
  return 0;
}

//----- (00487510) --------------------------------------------------------
void __userpurge sub_487510(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-10h]
  int v11; // [esp-4h] [ebp-8h]
  _DWORD *v13; // [esp+0h] [ebp-4h]

  if ( (**a1)(a1, a5, 0) )
  {
    v7 = CBuff::CreateBuff(9, 900, 3, (int)a1);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v7);
    v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v13 + 32))(v13, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v8);
    v11 = v13[2];
    v10 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", v13[1], v9, v10, 0, v11);
  }
}
// 487552: variable 'v13' is possibly undefined

//----- (004875B0) --------------------------------------------------------
void __userpurge sub_4875B0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  const std::vector<CIOSocket::CIOTimer>::const_iterator *v7; // eax
  int v8; // eax
  CBuffMoveSpeed *v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // [esp-18h] [ebp-48h]
  int v14; // [esp-10h] [ebp-40h]
  int v15; // [esp-4h] [ebp-34h]
  int v16; // [esp+0h] [ebp-30h]
  char v18[4]; // [esp+8h] [ebp-28h] BYREF
  int v19; // [esp+Ch] [ebp-24h]
  int v20; // [esp+10h] [ebp-20h]
  int v21; // [esp+14h] [ebp-1Ch]
  int v22; // [esp+18h] [ebp-18h] BYREF
  char v23; // [esp+1Fh] [ebp-11h] BYREF
  CIOObject *v24; // [esp+20h] [ebp-10h]
  int v25; // [esp+24h] [ebp-Ch] BYREF
  CIOObject *v26; // [esp+28h] [ebp-8h]
  int v27; // [esp+2Ch] [ebp-4h] BYREF

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bdd", &v23, &v22, &v25);
  CIOCriticalSection::Enter((CIOCriticalSection *)(a5 + 1020), a2, a3, a4);
  v24 = 0;
  sub_44AE20(
    (std::_Tree<std::_Tmap_traits<int,CSocket *,std::less<int>,std::allocator<std::pair<int const ,CSocket *> >,0> > *)(a5 + 1068),
    &v27,
    &v25);
  v7 = (const std::vector<CIOSocket::CIOTimer>::const_iterator *)sub_430C20((int *)(a5 + 1068), v18);
  if ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
         (std::vector<CIOSocket::CIOTimer>::const_iterator *)&v27,
         v7) )
  {
    v24 = *(CIOObject **)(sub_420250(&v27) + 4);
    if ( *(_DWORD *)(*((_DWORD *)v24 + 10) + 64) == 360 )
    {
      if ( !(*(int (__thiscall **)(CIOObject *, int, int, int))(*(_DWORD *)v24 + 120))(v24, a5, 9, -1) )
        CPlayer::_OutofInven(v24);
    }
    else
    {
      v24 = 0;
    }
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(a5 + 1020), a2, a3, a4);
  if ( !v24 )
    goto LABEL_8;
  v26 = 0;
  LOBYTE(v16) = v23;
  if ( v23 )
  {
    if ( v23 == 1 )
      v26 = CMonster::FindMonster(a2, a3, a4, v22);
  }
  else
  {
    v26 = sub_450810(v22);
  }
  if ( v26 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v26) )
    {
      v21 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v26) )
      {
        v21 = 1;
        v20 = (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)v26 + 144))(v26, a5, 4);
        v19 = *(_DWORD *)(a5 + 60) + 10 * a1[2];
        v19 -= v20 * v19 / 100;
        v9 = CBuff::CreateBuff(11, 10 * a1[2] + 10, v19, v16);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v26 + 180))(v26, v9);
      }
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v26 + 80))(v26, a5);
      v10 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
      v15 = v21;
      v14 = a1[2];
      v13 = std___Mpunct_wchar_t___do_frac_digits(v26);
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v11, v13, 1, v14, 0, 0, v15);
    }
    else
    {
      v12 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v12, 0);
    }
    CIOObject::Release(v26, a2, a3, a4, (volatile int *)v26 + 88);
  }
  else
  {
LABEL_8:
    v8 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v8, 0);
  }
}
// 48779D: variable 'v16' is possibly undefined

//----- (00487860) --------------------------------------------------------
void __userpurge sub_487860(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-10h]
  int v11; // [esp-4h] [ebp-8h]
  _DWORD *v13; // [esp+0h] [ebp-4h]

  if ( (**a1)(a1, a5, 0) )
  {
    v7 = CBuff::CreateBuff(10, 900, 5, (int)a1);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v7);
    v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v13 + 32))(v13, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v8);
    v11 = v13[2];
    v10 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", v13[1], v9, v10, 0, v11);
  }
}
// 4878A2: variable 'v13' is possibly undefined

//----- (00487900) --------------------------------------------------------
BOOL __thiscall sub_487900(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal((int)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3)
      && a2[254]
      && a2[254] == a3[254]
      && a2 != a3;
}

//----- (004879D0) --------------------------------------------------------
void __userpurge sub_4879D0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-1Ch]
  int v11; // [esp-4h] [ebp-14h]
  _DWORD *v13; // [esp+0h] [ebp-10h]
  int v14; // [esp+4h] [ebp-Ch] BYREF
  char v15; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v16; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v15, &v14);
  v16 = sub_450810(v14);
  if ( v16 )
  {
    if ( (**(int (__thiscall ***)(int, int, CIOObject *))a1)(a1, a5, v16) )
    {
      v7 = CBuff::CreateBuff(13, 300 * *(_DWORD *)(a1 + 8) + 300, -(10 * *(_DWORD *)(a1 + 8) + 40), a1);
      (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v16 + 180))(v16, v7);
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v13 + 32))(v13, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      v11 = v13[2];
      v10 = std___Mpunct_wchar_t___do_frac_digits(v16);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", v13[1], v9, v10, 0, v11);
    }
    CIOObject::Release(v16, a2, a3, a4, (volatile int *)v16 + 88);
  }
}
// 487A69: variable 'v13' is possibly undefined

//----- (00487AE0) --------------------------------------------------------
BOOL __thiscall sub_487AE0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 53;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 62;
  return 0;
}

//----- (00487B40) --------------------------------------------------------
BOOL __thiscall sub_487B40(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal((int)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 1)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3)
      && (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))(*a2 + 176))(a2, a3, 0);
}

//----- (00487BF0) --------------------------------------------------------
void __userpurge sub_487BF0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-1Ch]
  int v11; // [esp-4h] [ebp-14h]
  int v13; // [esp+4h] [ebp-Ch] BYREF
  char v14; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v15; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v14, &v13);
  v15 = sub_450810(v13);
  if ( v15 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v15) )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v15) )
      {
        v7 = CBuff::CreateBuff(7, 3, (int)a1, v13);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v15 + 180))(v15, v7);
      }
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      v11 = a1[2];
      v10 = std___Mpunct_wchar_t___do_frac_digits(v15);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v9, v10, 0, v11);
    }
    CIOObject::Release(v15, a2, a3, a4, (volatile int *)v15 + 88);
  }
}
// 487C81: variable 'a1' is possibly undefined

//----- (00487CF0) --------------------------------------------------------
BOOL __thiscall sub_487CF0(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal((int)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3)
      && a3[115] == 1
      && (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))(*a2 + 176))(a2, a3, 0);
}

//----- (00487DB0) --------------------------------------------------------
void __userpurge sub_487DB0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-14h]
  int v15; // [esp+4h] [ebp-Ch] BYREF
  char v16; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v17; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v16, &v15);
  v17 = sub_450810(v15);
  if ( v17 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v17) )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v17) )
      {
        v8 = CBuff::CreateBuff(15, 8, (int)a1, v15);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v17 + 180))(v17, v8);
      }
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v17);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v10, v12, 0, v13);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v17, a2, a3, a4, (volatile int *)v17 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 487E5F: variable 'a1' is possibly undefined

//----- (00487EF0) --------------------------------------------------------
void __userpurge sub_487EF0(int (__thiscall ***a1)(_DWORD, int, CIOObject *)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-14h]
  _DWORD *v15; // [esp+0h] [ebp-10h]
  int v16; // [esp+4h] [ebp-Ch] BYREF
  char v17; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v18; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v17, &v16);
  v18 = sub_450810(v16);
  if ( v18 )
  {
    if ( (**a1)(a1, a5, v18) )
    {
      v8 = CBuff::CreateBuff(14, 300, (int)a1, v16);
      (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v18 + 180))(v18, v8);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v15 + 32))(v15, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = v15[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v18);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", v15[1], v10, v12, 0, v13);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v18, a2, a3, a4, (volatile int *)v18 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 487F87: variable 'v15' is possibly undefined

//----- (00488010) --------------------------------------------------------
int __thiscall sub_488010(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // [esp+4h] [ebp-4h]

  v5 = 2 * a2[17] * a2[17] / dword_4D6AB8[a2[115]];
  if ( !a4 )
    return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 5, 1, v5 * (10 * this[2] + 14) / 100);
  a2[28] -= v5 * (10 * this[2] + 14) / 100;
  return (*(int (__cdecl **)(_DWORD *, int, int, int))(*a2 + 92))(a2, 5, 1, v5 * (10 * a3 + 14) / 100);
}

//----- (004880D0) --------------------------------------------------------
int __thiscall sub_4880D0(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // [esp+8h] [ebp-4h]
  int *v5; // [esp+18h] [ebp+Ch]

  v5 = (int *)(a3 + 4);
  v4 = *v5;
  *(_DWORD *)(a2 + 112) -= *(v5 - 1) * (10 * this[2] + 14) / 100;
  result = *(_DWORD *)(a2 + 112) + v4 * (10 * this[2] + 14) / 100;
  *(_DWORD *)(a2 + 112) = result;
  return result;
}

//----- (00488160) --------------------------------------------------------
BOOL __thiscall sub_488160(_DWORD *this, int a2)
{
  BOOL result; // eax

  if ( this[2] < this[7] )
    result = *(_DWORD *)(a2 + 60) >= 5 * this[2] + 50;
  else
    result = 0;
  return result;
}

//----- (004881A0) --------------------------------------------------------
void __userpurge sub_4881A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-10h]
  int v11; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0) )
  {
    v7 = CBuff::CreateBuff(27, 1200, 7 * a1[2] + 14, 3 * a1[2] + 14);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v7);
    v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v8);
    v11 = a1[2];
    v10 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v9, v10, 0, v11);
  }
}

//----- (00488260) --------------------------------------------------------
BOOL __thiscall sub_488260(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 70;
  }
  return 0;
}

//----- (004882D0) --------------------------------------------------------
BOOL __thiscall sub_4882D0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 58;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 67;
  return 0;
}

//----- (00488330) --------------------------------------------------------
void __userpurge sub_488330(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-18h] [ebp-38h]
  int v11; // [esp-10h] [ebp-30h]
  int v12; // [esp+0h] [ebp-20h]
  int v14; // [esp+Ch] [ebp-14h]
  int v15; // [esp+10h] [ebp-10h]
  int v16; // [esp+14h] [ebp-Ch] BYREF
  char v17; // [esp+1Bh] [ebp-5h] BYREF
  CIOObject *v18; // [esp+1Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v17, &v16);
  v18 = 0;
  if ( v17 )
  {
    if ( v17 == 1 )
      v18 = CMonster::FindMonster(a2, a3, a4, v16);
  }
  else
  {
    v18 = sub_450810(v16);
  }
  if ( v18 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v18) )
    {
      v15 = 0;
      v14 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v18) )
      {
        v15 = 1;
        v7 = CChar::GetAttack((void *)a5);
        if ( (40 * a1[2] + 50) * v7 / 50 >= *((_DWORD *)v18 + 68) - 1 )
          v12 = *((_DWORD *)v18 + 68) - 1;
        else
          v12 = (40 * a1[2] + 50) * CChar::GetAttack((void *)a5) / 50;
        v14 = v12;
        if ( (*(int (__thiscall **)(CIOObject *))(*(_DWORD *)v18 + 64))(v18) )
          *((_DWORD *)v18 + 118) = GetTickCount() + 20000;
        (*(void (__cdecl **)(CIOObject *, int, _DWORD, int))(*(_DWORD *)v18 + 88))(v18, 7, 0, v12);
        (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)a5 + 88))(a5, 7, 1, v12 * (10 * a1[2] + 20) / 50);
        v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
        (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      }
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v18 + 80))(v18, a5);
      v11 = a1[2];
      v10 = std___Mpunct_wchar_t___do_frac_digits(v18);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v9, v10, 1, v11, v14, 0, v15);
    }
    CIOObject::Release(v18, a2, a3, a4, (volatile int *)v18 + 88);
  }
}

//----- (00488540) --------------------------------------------------------
BOOL __thiscall sub_488540(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 57;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 66;
  return 0;
}

//----- (004885A0) --------------------------------------------------------
void __userpurge sub_4885A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-18h] [ebp-3Ch]
  int v13; // [esp-10h] [ebp-34h]
  int v14; // [esp+0h] [ebp-24h]
  int v16; // [esp+Ch] [ebp-18h]
  int v17; // [esp+Ch] [ebp-18h]
  int v18; // [esp+10h] [ebp-14h]
  int v19; // [esp+14h] [ebp-10h]
  int v20; // [esp+18h] [ebp-Ch] BYREF
  char v21; // [esp+1Fh] [ebp-5h] BYREF
  CIOObject *v22; // [esp+20h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v21, &v20);
  v22 = 0;
  if ( v21 )
  {
    if ( v21 == 1 )
      v22 = CMonster::FindMonster(a2, a3, a4, v20);
  }
  else
  {
    v22 = sub_450810(v20);
  }
  if ( v22 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v22) )
    {
      v19 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v22) )
      {
        v19 = 1;
        v18 = (*(int (__thiscall **)(CIOObject *, int, int))(*(_DWORD *)v22 + 144))(v22, a5, 3);
        v16 = (150 * a1[2] + 100) * CChar::GetAttack((void *)a5) / 20;
        v17 = v16 - v18 * v16 / 100;
        if ( v17 >= 4500 )
          v14 = 4500;
        else
          v14 = v17;
        v8 = CBuff::CreateBuff(29, 30, v14 / 30, v14);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v22 + 180))(v22, v8);
      }
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v22 + 80))(v22, a5);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v22);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v10, v12, 1, v13, 0, 0, v19);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v22, a2, a3, a4, (volatile int *)v22 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (004887B0) --------------------------------------------------------
BOOL __thiscall sub_4887B0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 68;
  }
  return 0;
}

//----- (00488820) --------------------------------------------------------
void __userpurge sub_488820(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-14h]
  _DWORD *v15; // [esp+0h] [ebp-10h]
  int v16; // [esp+4h] [ebp-Ch] BYREF
  char v17; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v18; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v17, &v16);
  v18 = sub_450810(v16);
  if ( v18 )
  {
    if ( (**(int (__thiscall ***)(int, int, CIOObject *))a1)(a1, a5, v18) )
    {
      v8 = CBuff::CreateBuff(36, 900, 8 * *(_DWORD *)(a1 + 8) + 16, a1);
      (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v18 + 180))(v18, v8);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*v15 + 32))(v15, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = v15[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v18);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", v15[1], v10, v12, 0, v13);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v18, a2, a3, a4, (volatile int *)v18 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 4888C9: variable 'v15' is possibly undefined

//----- (00488960) --------------------------------------------------------
BOOL __thiscall CSuffering::Excute(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 57;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 66;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 69;
  }
  return 0;
}

//----- (004889F0) --------------------------------------------------------
void __userpurge sub_4889F0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-1Ch]
  int v13; // [esp-4h] [ebp-14h]
  int v15; // [esp+4h] [ebp-Ch] BYREF
  char v16; // [esp+Bh] [ebp-5h] BYREF
  CIOObject *v17; // [esp+Ch] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v16, &v15);
  v17 = sub_450810(v15);
  if ( v17 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v17) )
    {
      v8 = CBuff::CreateBuff(37, 600, 30 * a1[2] + 5, 20 * a1[2] + 5);
      (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v17 + 180))(v17, v8);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v17);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v10, v12, 0, v13);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v17, a2, a3, a4, (volatile int *)v17 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (00488B30) --------------------------------------------------------
BOOL __thiscall sub_488B30(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 62;
  return 0;
}

//----- (00488B70) --------------------------------------------------------
void __userpurge sub_488B70(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-20h]
  int v13; // [esp-4h] [ebp-18h]
  int v14; // [esp+0h] [ebp-14h]
  int v16; // [esp+8h] [ebp-Ch] BYREF
  char v17; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v18; // [esp+10h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v17, &v16);
  v18 = 0;
  LOBYTE(v14) = v17;
  if ( v17 )
  {
    if ( v17 == 1 )
      v18 = CMonster::FindMonster(a2, a3, a4, v16);
  }
  else
  {
    v18 = sub_450810(v16);
  }
  if ( v18 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v18) )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v18) )
      {
        v8 = CBuff::CreateBuff(7, a1[2] + 1, v14, (int)a1);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v18 + 180))(v18, v8);
      }
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v18 + 80))(v18, a5);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v18);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v10, v12, 0, v13);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v18, a2, a3, a4, (volatile int *)v18 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 488C37: variable 'v14' is possibly undefined
// 488C62: variable 'a1' is possibly undefined

//----- (00488CF0) --------------------------------------------------------
void __userpurge sub_488CF0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-18h] [ebp-30h]
  int v11; // [esp-10h] [ebp-28h]
  int v12; // [esp+0h] [ebp-18h]
  int v14; // [esp+8h] [ebp-10h]
  int v15; // [esp+Ch] [ebp-Ch] BYREF
  char v16; // [esp+13h] [ebp-5h] BYREF
  CIOObject *v17; // [esp+14h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v16, &v15);
  v17 = 0;
  LOBYTE(v12) = v16;
  if ( v16 )
  {
    if ( v16 == 1 )
      v17 = CMonster::FindMonster(a2, a3, a4, v15);
  }
  else
  {
    v17 = sub_450810(v15);
  }
  if ( v17 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v17) )
    {
      v14 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v17) )
      {
        v14 = 1;
        v7 = CBuff::CreateBuff(20, 15, -30 * a1[2], v12);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v17 + 180))(v17, v7);
      }
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v17 + 80))(v17, a5);
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      v11 = a1[2];
      v10 = std___Mpunct_wchar_t___do_frac_digits(v17);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v9, v10, 1, v11, 0, 0, v14);
    }
    CIOObject::Release(v17, a2, a3, a4, (volatile int *)v17 + 88);
  }
}
// 488DA9: variable 'v12' is possibly undefined

//----- (00488E50) --------------------------------------------------------
BOOL __thiscall sub_488E50(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 61;
  return 0;
}

//----- (00488E90) --------------------------------------------------------
void __userpurge sub_488E90(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-18h] [ebp-30h]
  int v13; // [esp-10h] [ebp-28h]
  int v14; // [esp+0h] [ebp-18h]
  int v16; // [esp+8h] [ebp-10h]
  int v17; // [esp+Ch] [ebp-Ch] BYREF
  char v18; // [esp+13h] [ebp-5h] BYREF
  CIOObject *v19; // [esp+14h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v18, &v17);
  v19 = 0;
  LOBYTE(v14) = v18;
  if ( v18 )
  {
    if ( v18 == 1 )
      v19 = CMonster::FindMonster(a2, a3, a4, v17);
  }
  else
  {
    v19 = sub_450810(v17);
  }
  if ( v19 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v19) )
    {
      v16 = 0;
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v19) )
      {
        v16 = 1;
        v8 = CBuff::CreateBuff(0, 8 * a1[2], -50, v14);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v19 + 180))(v19, v8);
      }
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v19 + 80))(v19, a5);
      v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v19);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v10, v12, 1, v13, 0, 0, v16);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v19, a2, a3, a4, (volatile int *)v19 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 488F67: variable 'v14' is possibly undefined

//----- (00489030) --------------------------------------------------------
BOOL __thiscall sub_489030(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 58;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 69;
  return 0;
}

//----- (00489090) --------------------------------------------------------
void __userpurge sub_489090(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-Ch] [ebp-20h]
  int v12; // [esp-4h] [ebp-18h]
  int v14; // [esp+8h] [ebp-Ch] BYREF
  char v15; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v16; // [esp+10h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v15, &v14);
  v16 = 0;
  if ( v15 )
  {
    if ( v15 == 1 )
      v16 = CMonster::FindMonster(a2, a3, a4, v14);
  }
  else
  {
    v16 = sub_450810(v14);
  }
  if ( v16 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v16) )
    {
      CChar::CancelBuffPrty((int)v16, a2, a3, a4, 4);
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v16 + 80))(v16, a5);
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      v12 = a1[2];
      v11 = std___Mpunct_wchar_t___do_frac_digits(v16);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v9, v11, 0, v12);
    }
    else
    {
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v10, 0);
    }
    CIOObject::Release(v16, a2, a3, a4, (volatile int *)v16 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (004891E0) --------------------------------------------------------
void __userpurge sub_4891E0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-Ch] [ebp-20h]
  int v12; // [esp-4h] [ebp-18h]
  int v14; // [esp+8h] [ebp-Ch] BYREF
  char v15; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v16; // [esp+10h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v15, &v14);
  v16 = 0;
  if ( v15 )
  {
    if ( v15 == 1 )
      v16 = CMonster::FindMonster(a2, a3, a4, v14);
  }
  else
  {
    v16 = sub_450810(v14);
  }
  if ( v16 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v16) )
    {
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v16 + 132))(v16, a5);
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      v12 = a1[2];
      v11 = std___Mpunct_wchar_t___do_frac_digits(v16);
      v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v9, v11, 0, v12);
    }
    else
    {
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v10, 0);
    }
    CIOObject::Release(v16, a2, a3, a4, (volatile int *)v16 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (00489320) --------------------------------------------------------
BOOL __thiscall sub_489320(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal((int)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[68] > (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)this + 32))(this, a2)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3)
      && a2 != a3;
}

//----- (004893C0) --------------------------------------------------------
int __thiscall sub_4893C0(_DWORD *this, _DWORD *a2)
{
  return (5 * this[2] + 5) * CChar::GetMaxHP(a2) / 100;
}

//----- (004893F0) --------------------------------------------------------
void __thiscall CDarknessVision::CanSkillUp(_DWORD *this, int a2, void *Src, int end)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-20h]
  int v10; // [esp-4h] [ebp-18h]
  int v12; // [esp+8h] [ebp-Ch] BYREF
  char v13; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v14; // [esp+10h] [ebp-4h]

  ScanPacket((char *)Src, (char *)end, "bd", &v13, &v12);
  v14 = 0;
  if ( !v13 )
    v14 = sub_450810(v12);
  if ( v14 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*this)(this, a2, v14) )
    {
      v5 = (*(int (__thiscall **)(_DWORD *, int))(*this + 32))(this, a2);
      (*(void (__cdecl **)(CIOObject *, int, int, int))(*(_DWORD *)v14 + 88))(v14, 7, 1, (25 * this[2] + 50) * v5 / 100);
      v6 = (*(int (__thiscall **)(_DWORD *, int))(*this + 32))(this, a2);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 7, 0, v6);
      v10 = this[2];
      v9 = std___Mpunct_wchar_t___do_frac_digits(v14);
      v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      CChar::WriteInSight(a2, 63, "bddbb", this[1], v7, v9, 0, v10);
    }
    else
    {
      v8 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
      CChar::WriteInSight(a2, 61, "db", v8, 0);
    }
    CIOObject::Release(v14, (volatile int *)v14 + 88);
  }
  else
  {
    v4 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a2);
    CChar::WriteInSight(a2, 61, "db", v4, 0);
  }
}

//----- (00489550) --------------------------------------------------------
BOOL __thiscall sub_489550(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)this + 32))(this, a2);
}

//----- (004895C0) --------------------------------------------------------
int __thiscall sub_4895C0(_DWORD *this, _DWORD *a2)
{
  return 10 * CChar::GetMaxMP(this) / 100;
}

//----- (004895E0) --------------------------------------------------------
void __userpurge sub_4895E0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-10h]
  int v10; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0)
    && a5[69] > (*(int (__thiscall **)(_DWORD *, _DWORD *))(*a1 + 32))(a1, a5) )
  {
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a5 + 88))(a5, 7, 1, a1[2] * 2 * a5[69]);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, _DWORD))(*a5 + 88))(a5, 8, 0, a5[69]);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 61, "db", v7, 0);
  }
  v10 = a1[2];
  v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
  v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
  CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v8, v9, 0, v10);
}

//----- (004896C0) --------------------------------------------------------
void __userpurge sub_4896C0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-Ch] [ebp-20h]
  int v12; // [esp-4h] [ebp-18h]
  int v13; // [esp+0h] [ebp-14h]
  int i; // [esp+8h] [ebp-Ch]
  volatile int *v16; // [esp+Ch] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0) )
  {
    if ( a5[254] )
    {
      v16 = (volatile int *)CParty::FindParty(a5[254]);
      if ( v16 )
      {
        for ( i = CParty::GetPlayerList((int)v16); i; i = CBaseList::Pop(i, a2, a3, a4) )
        {
          v13 = unknown_libname_15(i);
          v7 = CBuff::CreateBuff(75, 15, 350, 300);
          (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)v13 + 180))(v13, v7);
        }
        CIOObject::Release(v16, a2, a3, a4);
      }
    }
    else
    {
      v8 = CBuff::CreateBuff(75, 15, 350, 300);
      (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v8);
    }
    v9 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v9);
    v12 = a1[2];
    v11 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v10 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v10, v11, 0, v12);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (004897F0) --------------------------------------------------------
BOOL __thiscall sub_4897F0(void *this, _DWORD *a2, _DWORD *a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal((int)a3)
      && a2[79] == a3[79]
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[68] > (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)this + 32))(this, a2)
      && (*(int (__thiscall **)(_DWORD *))(*a3 + 60))(a3);
}

//----- (00489890) --------------------------------------------------------
void __userpurge sub_489890(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-Ch] [ebp-20h]
  int v13; // [esp-4h] [ebp-18h]
  int v14; // [esp+0h] [ebp-14h]
  int v16; // [esp+8h] [ebp-Ch] BYREF
  char v17; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v18; // [esp+10h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v17, &v16);
  v18 = 0;
  LOBYTE(v14) = v17;
  if ( v17 )
  {
    if ( v17 == 1 )
      v18 = CMonster::FindMonster(a2, a3, a4, v16);
  }
  else
  {
    v18 = sub_450810(v16);
  }
  if ( v18 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v18) )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v18) )
      {
        v8 = CBuff::CreateBuff(81, 10, 70 * a1[2] - 20, v14);
        (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v18 + 180))(v18, v8);
      }
      v9 = (*(int (__thiscall **)(_DWORD *, int))(*a1 + 32))(a1, a5);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 7, 0, v9);
      v13 = a1[2];
      v12 = std___Mpunct_wchar_t___do_frac_digits(v18);
      v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v10, v12, 0, v13);
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v18, a2, a3, a4, (volatile int *)v18 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 48995C: variable 'v14' is possibly undefined

//----- (00489A10) --------------------------------------------------------
BOOL __thiscall sub_489A10(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal(a3)
      && a2[79] == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0);
}

//----- (00489AA0) --------------------------------------------------------
int __userpurge sub_489AA0@<eax>(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a1, int a6)
{
  CIOObject *v8; // [esp+4h] [ebp-8h]
  int v9; // [esp+8h] [ebp-4h]

  v9 = 1;
  if ( !(*(int (__thiscall **)(_DWORD *))(*ecx0 + 88))(ecx0) )
  {
    v8 = sub_450810(a6);
    if ( !v8 )
      return 0;
    if ( CChar::IsMStateEx(v8, ecx0[14]) )
    {
      CPlayer::Write(a1, 68, "bb", 101, ecx0[1]);
      v9 = 0;
    }
    CIOObject::Release(v8, a2, a3, a4, (volatile int *)v8 + 88);
  }
  return v9;
}

//----- (00489B30) --------------------------------------------------------
void __userpurge sub_489B30(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // [esp-18h] [ebp-30h]
  int v13; // [esp-10h] [ebp-28h]
  int v14; // [esp-Ch] [ebp-24h]
  int v15; // [esp-4h] [ebp-1Ch]
  int v16; // [esp-4h] [ebp-1Ch]
  int v18; // [esp+8h] [ebp-10h] BYREF
  int v19; // [esp+Ch] [ebp-Ch] BYREF
  char v20; // [esp+13h] [ebp-5h] BYREF
  CIOObject *v21; // [esp+14h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bd", &v20, &v19);
  v21 = 0;
  if ( v20 )
  {
    if ( v20 == 1 )
      v21 = CMonster::FindMonster(a2, a3, a4, v19);
  }
  else
  {
    v21 = sub_450810(v19);
  }
  if ( v21 )
  {
    if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v21) )
    {
      v18 = 0;
      (*(void (__thiscall **)(_DWORD *, int, CIOObject *, int *))(*a1 + 80))(a1, a5, v21, &v18);
      (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v21 + 80))(v21, a5);
      v8 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(int, int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      if ( (*(int (__thiscall **)(_DWORD *))(*a1 + 88))(a1) )
      {
        v15 = v18;
        v13 = a1[2];
        v12 = std___Mpunct_wchar_t___do_frac_digits(v21);
        v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", a1[1], v9, v12, 1, v13, 0, 0, v15);
      }
      else
      {
        v16 = a1[2];
        v14 = std___Mpunct_wchar_t___do_frac_digits(v21);
        v10 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v10, v14, 0, v16);
      }
    }
    else
    {
      v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v11, 0);
    }
    CIOObject::Release(v21, a2, a3, a4, (volatile int *)v21 + 88);
  }
  else
  {
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}

//----- (00489CE0) --------------------------------------------------------
void __userpurge sub_489CE0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, _DWORD *a6)
{
  int v6; // eax
  int v7; // [esp-Ch] [ebp-14h]
  int v8; // [esp-4h] [ebp-Ch]
  DWORD v10; // [esp+4h] [ebp-4h]

  v10 = GetTickCount();
  a1[16] = a1[11] + v10 - a1[10];
  (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a5 + 228))(a5, a1[12] + v10, 1);
  a5[117] = a1[12] + v10;
  (*(void (__thiscall **)(_DWORD *, _DWORD *, _DWORD *))(*a1 + 84))(a1, a5, a6);
  v8 = a1[2];
  v7 = std___Mpunct_wchar_t___do_frac_digits(a6);
  v6 = std___Mpunct_wchar_t___do_frac_digits(a5);
  CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v6, v7, 0, v8);
}

//----- (00489D90) --------------------------------------------------------
int __thiscall sub_489D90(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(46, 1200, 6 * this[2] + 2, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489DD0) --------------------------------------------------------
int __thiscall CSkillBuff::CanExcute(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax

  v4 = CBuff::CreateBuff(47, 1200, 8 * this[2] + 3, (int)this);
  return (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489E10) --------------------------------------------------------
BOOL __thiscall sub_489E10(void *this, _DWORD *a2, int a3)
{
  return sub_489A10(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (00489E60) --------------------------------------------------------
int __thiscall CSkillBuff::PreExcute(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // eax

  v4 = CBuff::CreateBuff(48, 1200, 8 * this[2] + 3, (int)this);
  return (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489EA0) --------------------------------------------------------
BOOL __thiscall sub_489EA0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 64;
  return 0;
}

//----- (00489EE0) --------------------------------------------------------
int __thiscall sub_489EE0(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(49, 1200, 6 * this[2] + 2, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489F20) --------------------------------------------------------
BOOL __thiscall sub_489F20(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 65;
  return 0;
}

//----- (00489F60) --------------------------------------------------------
int __thiscall sub_489F60(_DWORD *this, int a2, int a3, int a4)
{
  CBuffMoveSpeed *v4; // eax

  v4 = CBuff::CreateBuff(50, 900, 3 * this[2] + 2, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (00489FA0) --------------------------------------------------------
BOOL __thiscall sub_489FA0(void *this, _DWORD *a2, int a3)
{
  return sub_480E80(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 156))(a3) == 1;
}

//----- (00489FF0) --------------------------------------------------------
int __thiscall sub_489FF0(void *this, int a2, _DWORD *a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(void *, int, _DWORD *))(*(_DWORD *)this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(83, 15, 50 * a3[78] / -100, (int)this);
    result = (*(int (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A050) --------------------------------------------------------
BOOL __thiscall sub_48A050(void *this, _DWORD *a2, int a3)
{
  return sub_480E80(this, a2, a3);
}

//----- (0048A070) --------------------------------------------------------
int __thiscall sub_48A070(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(84, 10, (250 * this[2] + 100) / 10, (int)this);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A0D0) --------------------------------------------------------
BOOL __thiscall sub_48A0D0(void *this, _DWORD *a2, int a3)
{
  return sub_480E80(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (0048A120) --------------------------------------------------------
int __thiscall sub_48A120(_DWORD *this, int a2, _DWORD *a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, _DWORD *))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(85, 20 * this[2] + 50, a3[64] * (25 * this[2] + 25) / -100, (int)this);
    result = (*(int (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A1A0) --------------------------------------------------------
BOOL __thiscall sub_48A1A0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 67;
  return 0;
}

//----- (0048A1E0) --------------------------------------------------------
int __thiscall sub_48A1E0(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(86, 20 * this[2] + 50, -24 * this[2], (int)this);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A240) --------------------------------------------------------
int __thiscall sub_48A240(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(87, 20 * this[2] + 50, -12 * this[2], (int)this);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A2A0) --------------------------------------------------------
int __thiscall CStrenUpInt::Apply(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  int v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(88, 20 * this[2] + 50, -20 * this[2], (int)this);
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A300) --------------------------------------------------------
int __thiscall sub_48A300(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(89, 20 * this[2] + 50, -24 * this[2], (int)this);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A360) --------------------------------------------------------
int __thiscall CCloudSight::CanExcute(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  int v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(90, 20 * this[2] + 50, -16 * this[2], (int)this);
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A3C0) --------------------------------------------------------
BOOL __thiscall sub_48A3C0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 66;
  return 0;
}

//----- (0048A400) --------------------------------------------------------
int __thiscall sub_48A400(_DWORD *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(_DWORD *, int, int))(*this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(91, 10 * this[2] + 30, -(8 * this[2] + 4), -(6 * this[2] + 2));
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A480) --------------------------------------------------------
int __thiscall sub_48A480(void *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax

  result = (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(93, 15, -50, (int)this);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A4D0) --------------------------------------------------------
int __thiscall sub_48A4D0(void *this, int a2, int a3, _DWORD *a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax
  int savedregs; // [esp+4h] [ebp+0h]

  result = (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)this + 40))(this, a2, a3);
  if ( result )
  {
    *a4 = 1;
    v5 = CBuff::CreateBuff(94, 10, (int)this, savedregs);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}
// 48A4FB: variable 'savedregs' is possibly undefined

//----- (0048A520) --------------------------------------------------------
void __userpurge sub_48A520(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, _DWORD *a7)
{
  if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a1 + 40))(a1, a5, a6) )
  {
    *a7 = 1;
    CChar::CancelBuffPrty(a6, a2, a3, a4, 2);
  }
}

//----- (0048A560) --------------------------------------------------------
BOOL __thiscall CMeshDefense::CanSkillUp(void *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && a2[69] >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 32))(this, 0);
}

//----- (0048A5D0) --------------------------------------------------------
void __userpurge sub_48A5D0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-10h]
  int v11; // [esp-4h] [ebp-8h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0) )
  {
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*a1 + 80))(a1, a5);
    v7 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v7);
    v11 = a1[2];
    v10 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v8, v10, 0, v11);
  }
  else
  {
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 61, "db", v9, 0);
  }
}

//----- (0048A680) --------------------------------------------------------
int __thiscall sub_48A680(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(69, 60, 6 * this[2] + 5, -(2 * this[2] + 3));
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A6D0) --------------------------------------------------------
BOOL __thiscall sub_48A6D0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  switch ( this[2] )
  {
    case 1:
      return *(_DWORD *)(a2 + 60) >= 56;
    case 2:
      return *(_DWORD *)(a2 + 60) >= 59;
    case 3:
      return *(_DWORD *)(a2 + 60) >= 62;
    case 4:
      return *(_DWORD *)(a2 + 60) >= 65;
    case 5:
      return *(_DWORD *)(a2 + 60) >= 70;
  }
  return 0;
}

//----- (0048A770) --------------------------------------------------------
int __thiscall sub_48A770(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(76, 900, 5 * this[2] + 10, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A7B0) --------------------------------------------------------
int __thiscall sub_48A7B0(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(77, 900, 5 * this[2] + 10, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A7F0) --------------------------------------------------------
int __thiscall sub_48A7F0(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(78, 900, 5 * this[2] + 10, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A830) --------------------------------------------------------
int __thiscall sub_48A830(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(79, 900, 5 * this[2] + 10, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A870) --------------------------------------------------------
int __thiscall sub_48A870(_DWORD *this, int a2)
{
  CBuffMoveSpeed *v2; // eax

  v2 = CBuff::CreateBuff(80, 900, 5 * this[2] + 10, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v2);
}

//----- (0048A8B0) --------------------------------------------------------
void __userpurge sub_48A8B0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5)
{
  CBuffMoveSpeed *v5; // eax
  CBuffMoveSpeed *v6; // eax
  _DWORD *v8; // [esp+4h] [ebp-10h]
  int i; // [esp+8h] [ebp-Ch]
  volatile int *v10; // [esp+Ch] [ebp-8h]
  int v11; // [esp+10h] [ebp-4h]

  v11 = a5[254];
  if ( v11 )
  {
    v10 = (volatile int *)CParty::FindParty(v11);
    if ( v10 )
    {
      for ( i = CParty::GetPlayerList((int)v10); i; i = CBaseList::Pop(i, a2, a3, a4) )
      {
        v8 = (_DWORD *)unknown_libname_15(i);
        if ( sub_448870(a5 + 83, v8 + 83) <= 64 )
        {
          v5 = CBuff::CreateBuff(82, 38, 200, a1);
          (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*v8 + 180))(v8, v5);
          CChar::CancelBuffPrty((int)v8, a2, a3, a4, 4);
        }
      }
      CIOObject::Release(v10, a2, a3, a4);
    }
  }
  else
  {
    v6 = CBuff::CreateBuff(82, 38, 200, a1);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v6);
    CChar::CancelBuffPrty((int)a5, a2, a3, a4, 4);
  }
}
// 48A938: variable 'a1' is possibly undefined
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (0048A9A0) --------------------------------------------------------
void __userpurge sub_48A9A0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-28h]
  int v10; // [esp-4h] [ebp-20h]
  void *v12; // [esp+10h] [ebp-Ch]
  int *v13; // [esp+18h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, _DWORD *, _DWORD))*a1)(a1, a5, 0) )
  {
    v13 = (int *)(*(int (__thiscall **)(_DWORD *, _DWORD *))(*a1 + 80))(a1, a5);
    if ( v13 )
    {
      if ( a5[254] )
      {
        v12 = (void *)CParty::FindParty(a5[254]);
        if ( v12 )
        {
          CParty::Chant(v12, a5, v13);
          std__locale__facet___scalar_deleting_destructor_(v13, 1);
          CIOObject::Release((volatile int *)v12, a2, a3, a4);
        }
      }
      else
      {
        if ( a5[146] )
          CChar::CancelBuff((int)a5, a2, a3, a4, a5[146]);
        (*(void (__thiscall **)(_DWORD *, int *))(*a5 + 180))(a5, v13);
        a5[146] = v13[1];
      }
      v7 = (*(int (__thiscall **)(_DWORD *, _DWORD))(*a1 + 32))(a1, 0);
      (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(*a5 + 88))(a5, 8, 0, v7);
      v10 = a1[2];
      v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
      v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v8, v9, 0, v10);
    }
  }
}
// 48AA2C: conditional instruction was optimized away because of '%var_4.4!=0'

//----- (0048AAF0) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48AAF0(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(28, 0, 7 * this[2] + 9, 3 * this[2] + 9);
}

//----- (0048AB30) --------------------------------------------------------
BOOL __thiscall sub_48AB30(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 57;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 63;
  return 0;
}

//----- (0048AB90) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48AB90(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(38, 0, 8 * this[2] + 4, (int)this);
}

//----- (0048ABC0) --------------------------------------------------------
BOOL __thiscall sub_48ABC0(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 61;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 67;
  return 0;
}

//----- (0048AC20) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48AC20(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(70, 0, 3 * this[2] + 2, (int)this);
}

//----- (0048AC50) --------------------------------------------------------
BOOL __thiscall sub_48AC50(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 57;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 64;
  return 0;
}

//----- (0048ACB0) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48ACB0(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(71, 0, 3 * this[2] + 2, (int)this);
}

//----- (0048ACE0) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48ACE0(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(72, 0, 3 * this[2] + 2, (int)this);
}

//----- (0048AD10) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48AD10(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(73, 0, 5 * this[2] + 5, (int)this);
}

//----- (0048AD40) --------------------------------------------------------
BOOL __thiscall sub_48AD40(_DWORD *this, int a2)
{
  if ( this[2] >= this[7] )
    return 0;
  if ( this[2] == 1 )
    return *(_DWORD *)(a2 + 60) >= 58;
  if ( this[2] == 2 )
    return *(_DWORD *)(a2 + 60) >= 65;
  return 0;
}

//----- (0048ADA0) --------------------------------------------------------
CBuffMoveSpeed *__thiscall sub_48ADA0(_DWORD *this, int a2)
{
  return CBuff::CreateBuff(74, 0, 25 * this[2] + 25, (int)this);
}

//----- (0048ADD0) --------------------------------------------------------
int __stdcall sub_48ADD0(int a1, int a2)
{
  return a2 + a2 / 5 + 2 * *(_DWORD *)(a1 + 72);
}

//----- (0048AE00) --------------------------------------------------------
BOOL __thiscall sub_48AE00(_DWORD *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2) && CPlayer::IsWState(a2, 0) && a2[145] >= this[17];
}

//----- (0048AE50) --------------------------------------------------------
int __stdcall sub_48AE50(int a1, int a2)
{
  return *(_DWORD *)(a1 + 72) + a2 / 2;
}

//----- (0048AE70) --------------------------------------------------------
int __thiscall sub_48AE70(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax
  CBuffMoveSpeed *v7; // eax
  CBuffMoveSpeed *v8; // eax
  int v10; // [esp+0h] [ebp-4h]

  result = (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)this + 40))(this, a2, a3);
  if ( result )
  {
    v7 = CBuff::CreateBuff(0, 8, -50, (int)this);
    (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v7);
    v8 = CBuff::CreateBuff(20, 8, -50, v10);
    result = (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v8);
  }
  return result;
}
// 48AEB3: variable 'v10' is possibly undefined

//----- (0048AED0) --------------------------------------------------------
void __userpurge sub_48AED0(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-10h]
  int v10; // [esp-4h] [ebp-8h]
  _DWORD *v12; // [esp+0h] [ebp-4h]

  if ( (**a1)(a1, a5, 0) )
  {
    v7 = CBuff::CreateBuff(24, 15, 0, (int)a1);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v7);
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*v12 + 56))(v12, a5);
    v10 = v12[2];
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", v12[1], v8, v9, 0, v10);
  }
}
// 48AF11: variable 'v12' is possibly undefined

//----- (0048AF60) --------------------------------------------------------
int __stdcall sub_48AF60(int a1, int a2)
{
  return a2 + 20 * a2 / 100 + 2 * *(_DWORD *)(a1 + 64);
}

//----- (0048AF90) --------------------------------------------------------
int __thiscall sub_48AF90(_DWORD *this, int a2)
{
  return (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 35, 0, this[17]);
}

//----- (0048AFC0) --------------------------------------------------------
int __stdcall sub_48AFC0(int a1, int a2)
{
  return a2 + 2 * *(_DWORD *)(a1 + 60);
}

//----- (0048AFE0) --------------------------------------------------------
int __thiscall CChantDefLightning::CreateBuff(void *this, void *a2, _DWORD *a3, int a4, int a5, int a6, unsigned int *a7)
{
  int v7; // eax
  int v8; // eax
  int v9; // eax
  unsigned int v10; // esi
  unsigned int v11; // eax
  int v13; // [esp+0h] [ebp-Ch]
  int v15; // [esp+8h] [ebp-4h]

  v7 = CChar::GetAttack(a2);
  v15 = (*(int (__thiscall **)(void *, void *, int))(*(_DWORD *)this + 16))(this, a2, v7);
  v8 = (*(int (__thiscall **)(void *))(*(_DWORD *)this + 84))(this);
  if ( !CChar::CheckHit((int)a2, a3, v8) )
    return 0;
  if ( (*(int (__thiscall **)(void *, void *, _DWORD *))(*(_DWORD *)this + 40))(this, a2, a3) )
  {
    v9 = CBuff::CreateBuff(7, 5, v13, (int)this);
    (*(void (__thiscall **)(_DWORD *, int))(*a3 + 180))(a3, v9);
  }
  v10 = a4 * (*(int (__thiscall **)(void *, _DWORD *))(*(_DWORD *)a2 + 168))(a2, a3);
  *a7 = v10 / (*(int (__thiscall **)(void *, void *))(*(_DWORD *)this + 36))(this, a2);
  v11 = (*(int (__thiscall **)(void *, void *, int, int, unsigned int *, void *))(*(_DWORD *)this + 36))(
          this,
          a2,
          a5,
          a6,
          a7,
          this);
  return (*(int (__thiscall **)(_DWORD *, void *, unsigned int))(*a3 + 72))(a3, a2, a4 * v15 / v11);
}
// 48B040: variable 'v13' is possibly undefined
// 48B076: variable 'this' is possibly undefined

//----- (0048B0E0) --------------------------------------------------------
void __userpurge sub_48B0E0(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-10h]
  int v10; // [esp-4h] [ebp-8h]
  _DWORD *v12; // [esp+0h] [ebp-4h]

  if ( (**a1)(a1, a5, 0) )
  {
    v7 = CBuff::CreateBuff(23, 15, 0, (int)a1);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v7);
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*v12 + 56))(v12, a5);
    v10 = v12[2];
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", v12[1], v8, v9, 0, v10);
  }
}
// 48B121: variable 'v12' is possibly undefined

//----- (0048B170) --------------------------------------------------------
int __stdcall sub_48B170(int a1, int a2)
{
  return a2 + 20 * a2 / 100 + 2 * *(_DWORD *)(a1 + 80);
}

//----- (0048B1A0) --------------------------------------------------------
BOOL __thiscall sub_48B1A0(_DWORD *this, _DWORD *a2, int a3)
{
  return CChar::IsNormal((int)a2)
      && CChar::IsNormal(a3)
      && a2[79] == *(_DWORD *)(a3 + 316)
      && CPlayer::IsWState(a2, 0)
      && (*(int (__thiscall **)(_DWORD *, int, _DWORD))(*a2 + 176))(a2, a3, 0)
      && a2[145] >= this[17];
}

//----- (0048B230) --------------------------------------------------------
void __userpurge sub_48B230(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int end)
{
  int v7; // eax
  int v8; // eax
  CBuffMoveSpeed *v9; // eax
  CBuffMoveSpeed *v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // [esp-Ch] [ebp-20h]
  int v14; // [esp-4h] [ebp-18h]
  int v15; // [esp+0h] [ebp-14h]
  int v16; // [esp+0h] [ebp-14h]
  int v18; // [esp+8h] [ebp-Ch] BYREF
  char v19; // [esp+Ch] [ebp-8h] BYREF
  char v20; // [esp+Dh] [ebp-7h] BYREF
  char v21; // [esp+Eh] [ebp-6h] BYREF
  char v22; // [esp+Fh] [ebp-5h] BYREF
  CIOObject *v23; // [esp+10h] [ebp-4h]

  ScanPacket(a2, a3, a4, (char *)Src, (char *)end, "bdbbb", &v20, &v18, &v19, &v22, &v21);
  CChar::Lock(a5);
  if ( CPlayer::CanMove((_DWORD *)a5)
    && CSMap::ReadLock(
         *(_DWORD **)(a5 + 320),
         a2,
         a3,
         a4,
         (Concurrency::details::_CancellationTokenRegistration *)a5,
         v19,
         v22,
         v21,
         1,
         1) )
  {
    CChar::Unlock(a5);
    v23 = 0;
    LOBYTE(v15) = v20;
    if ( v20 )
    {
      if ( v20 == 1 )
        v23 = CMonster::FindMonster(a2, a3, a4, v18);
    }
    else
    {
      v23 = sub_450810(v18);
    }
    if ( v23 )
    {
      if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))*a1)(a1, a5, v23) )
      {
        if ( (*(int (__thiscall **)(_DWORD *, int, CIOObject *))(*a1 + 40))(a1, a5, v23) )
        {
          v9 = CBuff::CreateBuff(21, 10, -50, v15);
          (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v23 + 180))(v23, v9);
          v10 = CBuff::CreateBuff(22, 10, 0, v16);
          (*(void (__thiscall **)(CIOObject *, CBuffMoveSpeed *))(*(_DWORD *)v23 + 180))(v23, v10);
        }
        (*(void (__thiscall **)(CIOObject *, int))(*(_DWORD *)v23 + 80))(v23, a5);
        (*(void (__thiscall **)(_DWORD *, int))(*a1 + 56))(a1, a5);
        v14 = a1[2];
        v13 = std___Mpunct_wchar_t___do_frac_digits(v23);
        v11 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbb", a1[1], v11, v13, 0, v14);
      }
      else
      {
        v12 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v12, 0);
      }
      CIOObject::Release(v23, a2, a3, a4, (volatile int *)v23 + 88);
    }
    else
    {
      v8 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v8, 0);
    }
  }
  else
  {
    CChar::Unlock(a5);
    CPlayer::Write(a5, 67, "b", 68);
    v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, "db", v7, 0);
  }
}
// 48B382: variable 'v15' is possibly undefined
// 48B39F: variable 'v16' is possibly undefined

//----- (0048B440) --------------------------------------------------------
void __userpurge sub_48B440(int (__thiscall ***a1)(_DWORD, _DWORD *, _DWORD)@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  CBuffMoveSpeed *v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-10h]
  int v10; // [esp-4h] [ebp-8h]
  _DWORD *v12; // [esp+0h] [ebp-4h]

  if ( (**a1)(a1, a5, 0) )
  {
    v7 = CBuff::CreateBuff(25, 15, 0, (int)a1);
    (*(void (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a5 + 180))(a5, v7);
    (*(void (__thiscall **)(_DWORD *, _DWORD *))(*v12 + 56))(v12, a5);
    v10 = v12[2];
    v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
    v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", v12[1], v8, v9, 0, v10);
  }
}
// 48B481: variable 'v12' is possibly undefined

//----- (0048B4D0) --------------------------------------------------------
int __stdcall sub_48B4D0(_DWORD *a1)
{
  int v1; // esi

  v1 = sub_483230(a1);
  return 3 * a1[15] + 5 * CChar::GetInt(a1) / 2 + v1;
}

//----- (0048B510) --------------------------------------------------------
int __stdcall sub_48B510(_DWORD *a1)
{
  int v1; // esi

  v1 = sub_483230(a1);
  return 7 * CChar::GetInt(a1) / 2 + v1 + 4 * a1[15];
}

//----- (0048B550) --------------------------------------------------------
int __stdcall sub_48B550(_DWORD *a1)
{
  return 6 * CChar::GetStr(a1) / 2 + 5 * a1[15] / 3;
}

//----- (0048B590) --------------------------------------------------------
int __thiscall sub_48B590(void *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax
  int savedregs; // [esp+4h] [ebp+0h]

  v3 = CBuff::CreateBuff(7, 12, (int)this, savedregs);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v3);
}
// 48B59B: variable 'savedregs' is possibly undefined

//----- (0048B5C0) --------------------------------------------------------
int __thiscall sub_48B5C0(_DWORD *this, _DWORD *a2)
{
  int v2; // esi

  if ( this[14] )
    return 6 * a2[15] + 11 * CChar::GetStr(a2);
  v2 = sub_483230(a2);
  return 5 * CChar::GetInt(a2) / 4 + v2 + 2 * a2[15];
}

//----- (0048B630) --------------------------------------------------------
void __userpurge sub_48B630(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-34h]
  int v9; // [esp-8h] [ebp-30h]
  int v10; // [esp-4h] [ebp-2Ch]
  int v12; // [esp+4h] [ebp-24h] BYREF
  int v13; // [esp+8h] [ebp-20h] BYREF
  int v14; // [esp+Ch] [ebp-1Ch] BYREF
  int v16; // [esp+14h] [ebp-14h]
  int v17; // [esp+18h] [ebp-10h]
  _DWORD *v18; // [esp+1Ch] [ebp-Ch]
  void *v19; // [esp+20h] [ebp-8h]
  DWORD v20; // [esp+24h] [ebp-4h]

  v20 = GetTickCount();
  if ( v20 >= a1[16] )
  {
    if ( (int)++a1[18] <= 13 )
    {
      if ( a1[18] == 1 )
        CChar::AddGState((volatile LONG *)a5, 0x4000);
      a1[16] = v20 + 5000;
      v18 = 0;
      v5 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
      v19 = sub_4934F0(*(char **)(a5 + 320), a2, a3, a4, (_DWORD *)(a5 + 324), v5);
      CChar::Unlock(a5);
      while ( v19 )
      {
        v18 = (_DWORD *)unknown_libname_15(v19);
        if ( CChar::IsNormal((int)v18) && *(_DWORD *)(a5 + 316) == v18[79] )
        {
          v14 = 0;
          v13 = 0;
          v17 = sub_4833D0(a1, a5, v18);
          v12 = 0;
          v16 = (*(int (__thiscall **)(_DWORD *, int))(*a1 + 88))(a1, a5);
          if ( !(*(int (__thiscall **)(_DWORD *, int, int, int *, int *, int *, _DWORD *))(*v18 + 72))(
                  v18,
                  a5,
                  v17 * v16 / 100,
                  &v14,
                  &v12,
                  &v13,
                  a1) )
            (*(void (__thiscall **)(_DWORD *, int))(*v18 + 80))(v18, a5);
          if ( v14 > 0 )
          {
            v10 = v13;
            v9 = v14;
            v8 = std___Mpunct_wchar_t___do_frac_digits(v18);
            v6 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
            v7 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*a1 + 96))(a1, a1[1], v6, v8, v9, v10);
            CChar::WriteInSight(a2, a3, a4, a5, 10, "bbddww", v7);
          }
        }
        v19 = (void *)CBaseList::Pop((int)v19, a2, a3, a4);
      }
      CChar::Lock(a5);
    }
    else
    {
      a1[14] = 1;
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (0048B800) --------------------------------------------------------
LONG __thiscall CTDiamondClow::Excute(_DWORD *this, volatile LONG *a2, int a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v8; // [esp-Ch] [ebp-30h]
  int v9; // [esp-Ch] [ebp-30h]
  int v10; // [esp-8h] [ebp-2Ch]
  int v11; // [esp-4h] [ebp-28h]
  int v12; // [esp-4h] [ebp-28h]
  int v14; // [esp+4h] [ebp-20h] BYREF
  int v15; // [esp+8h] [ebp-1Ch] BYREF
  int v16; // [esp+Ch] [ebp-18h] BYREF
  int v18; // [esp+14h] [ebp-10h]
  int v19; // [esp+18h] [ebp-Ch]
  _DWORD *v20; // [esp+1Ch] [ebp-8h]
  int v21; // [esp+20h] [ebp-4h]

  v20 = 0;
  v3 = (*(int (__thiscall **)(_DWORD *))(*this + 92))(this);
  v21 = sub_4934F0(a2 + 81, v3);
  *((_DWORD *)a2 + 117) = this[12] + GetTickCount();
  CChar::Unlock((int)a2);
  while ( v21 )
  {
    v20 = (_DWORD *)unknown_libname_15(v21);
    if ( CChar::IsNormal((int)v20) && *((_DWORD *)a2 + 79) == v20[79] )
    {
      v16 = 0;
      v15 = 0;
      v19 = sub_4833D0(a2, v20);
      v14 = 0;
      v18 = (*(int (__thiscall **)(_DWORD *, volatile LONG *))(*this + 88))(this, a2);
      if ( !(*(int (__thiscall **)(_DWORD *, volatile LONG *, int, int *, int *, int *, _DWORD *))(*v20 + 72))(
              v20,
              a2,
              v19 * v18 / 100,
              &v16,
              &v14,
              &v15,
              this) )
        (*(void (__thiscall **)(_DWORD *, volatile LONG *))(*v20 + 80))(v20, a2);
      if ( v16 > 0 )
      {
        v11 = v15;
        v10 = v16;
        v8 = std___Mpunct_wchar_t___do_frac_digits(v20);
        v4 = std___Mpunct_wchar_t___do_frac_digits(a2);
        v5 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*this + 96))(this, this[1], v4, v8, v10, v11);
        CChar::WriteInSight((int)a2, 10, "bbddww", v5);
      }
    }
    v21 = CBaseList::Pop(v21);
  }
  CChar::Lock((int)a2);
  v12 = this[2];
  v9 = std___Mpunct_wchar_t___do_frac_digits(a2);
  v6 = std___Mpunct_wchar_t___do_frac_digits(a2);
  CChar::WriteInSight((int)a2, 63, "bddbb", this[1], v6, v9, 0, v12);
  return CChar::AddGState(a2, 0x10000);
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 4833D0: using guessed type _DWORD __stdcall sub_4833D0(_DWORD, _DWORD);
// 4934F0: using guessed type _DWORD __stdcall sub_4934F0(_DWORD, _DWORD);

//----- (0048B9C0) --------------------------------------------------------
void __userpurge sub_48B9C0(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, _DWORD *a6)
{
  int v6; // eax
  int v7; // [esp-Ch] [ebp-38h]
  int v8; // [esp-4h] [ebp-30h]
  _DWORD *v10; // [esp+4h] [ebp-28h]
  int v11[2]; // [esp+8h] [ebp-24h] BYREF
  int v12; // [esp+10h] [ebp-1Ch]
  int nMax; // [esp+14h] [ebp-18h]
  void *i; // [esp+18h] [ebp-14h]
  DWORD v15; // [esp+1Ch] [ebp-10h]
  int nMin; // [esp+20h] [ebp-Ch]
  int v17; // [esp+24h] [ebp-8h]
  int v18; // [esp+28h] [ebp-4h]

  if ( a6 && a6[79] == a5[79] )
  {
    v15 = GetTickCount();
    a1[16] = a1[11] + v15 - a1[10];
    (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a5 + 228))(a5, a1[12] + v15, 1);
    a5[117] = a1[12] + v15;
    v8 = a1[2];
    v7 = std___Mpunct_wchar_t___do_frac_digits(a6);
    v6 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v6, v7, 0, v8);
    v18 = RandomBetween(0, 4);
    nMin = dword_4D62B0[2 * v18] - 96;
    nMax = dword_4D62B0[2 * v18] + 96;
    v12 = dword_4D62B4[2 * v18] - 96;
    v17 = dword_4D62B4[2 * v18] + 96;
    for ( i = sub_4934F0((char *)a5[80], a2, a3, a4, a6 + 81, 2); i; i = (void *)CBaseList::Pop((int)i, a2, a3, a4) )
    {
      v11[0] = RandomBetween(nMin, nMax);
      v11[1] = RandomBetween(v12, v17);
      v10 = (_DWORD *)unknown_libname_15(i);
      if ( CChar::IsNormal((int)v10) )
        CPlayer::Teleport(v10, a5[79], v11, 30000, 0);
    }
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 4D62B0: using guessed type int dword_4D62B0[];

//----- (0048BB50) --------------------------------------------------------
void __userpurge sub_48BB50(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6)
{
  int v6; // eax
  int v7; // eax
  int v8; // [esp-Ch] [ebp-1Ch]
  int v9; // [esp-4h] [ebp-14h]
  int v11; // [esp+4h] [ebp-Ch] BYREF
  DWORD v12; // [esp+8h] [ebp-8h]
  CIOObject *v13; // [esp+Ch] [ebp-4h]

  v13 = sub_493770((char *)a5[80], a2, a3, a4, a5 + 81, a1[14], 5);
  if ( v13 )
  {
    v12 = GetTickCount();
    a1[16] = a1[11] + v12 - a1[10];
    (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a5 + 228))(a5, a1[12] + v12, 1);
    a5[117] = a1[12] + v12;
    v6 = CChar::GetMaxHP(a5);
    (*(void (__cdecl **)(_DWORD *, int, int, int))(*a5 + 88))(a5, 7, 1, v6 / 20);
    v9 = a1[2];
    v8 = std___Mpunct_wchar_t___do_frac_digits(v13);
    v7 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v7, v8, 0, v9);
    CChar::Unlock((int)a5);
    v11 = 0;
    (*(void (__thiscall **)(CIOObject *, _DWORD *, int, int *, int *, int *, _DWORD))(*(_DWORD *)v13 + 72))(
      v13,
      a5,
      0xFFFF,
      &v11,
      &v11,
      &v11,
      0);
    CIOObject::Release(v13, a2, a3, a4, (volatile int *)v13 + 88);
    CChar::Lock((int)a5);
  }
}

//----- (0048BC80) --------------------------------------------------------
int __thiscall sub_48BC80(void *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  v3 = CBuff::CreateBuff(95, 180, 50, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048BCB0) --------------------------------------------------------
int __thiscall sub_48BCB0(void *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  v3 = CBuff::CreateBuff(96, 180, 50, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048BCE0) --------------------------------------------------------
int __stdcall sub_48BCE0(int a1)
{
  return RandomBetween(3000, 4000);
}

//----- (0048BD00) --------------------------------------------------------
void __userpurge sub_48BD00(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-30h]
  int v10; // [esp-8h] [ebp-2Ch]
  int v11; // [esp-4h] [ebp-28h]
  int v13; // [esp+4h] [ebp-20h] BYREF
  int v14; // [esp+8h] [ebp-1Ch] BYREF
  int v15; // [esp+Ch] [ebp-18h] BYREF
  int v17; // [esp+14h] [ebp-10h]
  int v18; // [esp+18h] [ebp-Ch]
  _DWORD *v19; // [esp+1Ch] [ebp-8h]
  void *v20; // [esp+20h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, int, _DWORD))(*a1 + 76))(a1, a5, 0) )
  {
    v19 = 0;
    v6 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
    v20 = sub_4935A0(*(char **)(a5 + 320), a2, a3, a4, (_DWORD *)(a5 + 324), v6);
    CChar::Unlock(a5);
    while ( v20 )
    {
      v19 = (_DWORD *)unknown_libname_15(v20);
      if ( CChar::IsNormal((int)v19)
        && *(_DWORD *)(a5 + 316) == v19[79]
        && (*(int (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)(a5 + 484) + 176))(*(_DWORD *)(a5 + 484), v19, 1) )
      {
        v15 = 0;
        v14 = 0;
        v18 = sub_4833D0(a1, *(_DWORD *)(a5 + 484), v19);
        v13 = 0;
        v17 = (*(int (__thiscall **)(_DWORD *, int))(*a1 + 88))(a1, a5);
        if ( (*(int (__thiscall **)(_DWORD *))(*a1 + 100))(a1) )
        {
          if ( !(*(int (__thiscall **)(_DWORD *, _DWORD, int, int *, int *, int *, _DWORD *))(*v19 + 72))(
                  v19,
                  *(_DWORD *)(a5 + 484),
                  v18 * v17 / 100,
                  &v15,
                  &v13,
                  &v14,
                  a1) )
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*v19 + 80))(v19, *(_DWORD *)(a5 + 484));
          if ( v15 > 0 )
          {
            v11 = v14;
            v10 = v15;
            v9 = std___Mpunct_wchar_t___do_frac_digits(v19);
            v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
            v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*a1 + 96))(a1, a1[1], v7, v9, v10, v11);
            CChar::WriteInSight(a2, a3, a4, a5, 10, "bbddww", v8);
            (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*a1 + 104))(a1, a5, v19);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*a1 + 104))(a1, a5, v19);
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*v19 + 80))(v19, *(_DWORD *)(a5 + 484));
        }
      }
      v20 = (void *)CBaseList::Pop((int)v20, a2, a3, a4);
    }
    CChar::Lock(a5);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (0048BF10) --------------------------------------------------------
int __thiscall CDoSpiritAbsorb::ExcuteM(void *this, int a2)
{
  return sub_483230(a2, this);
}
// 483230: using guessed type int __thiscall sub_483230(_DWORD, _DWORD);

//----- (0048BF30) --------------------------------------------------------
int __thiscall sub_48BF30(void *this, int a2, int a3)
{
  return (*(int (__thiscall **)(void *, _DWORD, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 84))(
           this,
           *(_DWORD *)(a2 + 484),
           a3,
           0,
           0,
           0);
}

//----- (0048BF60) --------------------------------------------------------
int __thiscall sub_48BF60(void *this, int a2, int a3)
{
  int v3; // eax
  CBuffMoveSpeed *v4; // eax

  v3 = (*(int (__thiscall **)(void *, int))(*(_DWORD *)this + 88))(this, a2);
  v4 = CBuff::CreateBuff(92, 60, v3, (int)this);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (0048BFA0) --------------------------------------------------------
int __stdcall sub_48BFA0(_DWORD *a1)
{
  int v1; // esi
  int v3; // [esp+4h] [ebp-14h]
  int v4; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]

  v1 = 3 * a1[15] / 2;
  nMin = (v1 + 20 * CChar::GetInt(a1) / 16) / 2;
  if ( nMin >= 150 )
    v4 = 150;
  else
    v4 = nMin;
  if ( nMin >= 300 )
    v3 = 300;
  else
    v3 = nMin;
  return RandomBetween(v4, v3);
}

//----- (0048C040) --------------------------------------------------------
int __thiscall sub_48C040(_DWORD *this, _DWORD *a2)
{
  int v2; // esi
  int v3; // esi
  int v5; // [esp+4h] [ebp-14h]
  int v6; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v2 = 3 * a2[15] / 2;
  nMin = v2 + 3 * this[2] * CChar::GetInt(a2) / 10 / 2 + 10;
  v3 = 3 * a2[15] / 2;
  nMax = v3 + 5 * this[2] * CChar::GetInt(a2) / 8 / 2 + 30;
  if ( nMin >= 300 )
    v6 = 300;
  else
    v6 = nMin;
  if ( nMax >= 400 )
    v5 = 400;
  else
    v5 = nMax;
  return RandomBetween(v6, v5);
}

//----- (0048C110) --------------------------------------------------------
void __userpurge sub_48C110(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1)
{
  int v6; // eax
  int v7; // [esp-Ch] [ebp-2Ch]
  int v9; // [esp+4h] [ebp-1Ch] BYREF
  int v10; // [esp+8h] [ebp-18h] BYREF
  int v11; // [esp+Ch] [ebp-14h] BYREF
  int v13; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  DWORD v15; // [esp+1Ch] [ebp-4h]

  if ( a1 )
  {
    CChar::SetDirection((_DWORD *)a5, a1[83] - *(_DWORD *)(a5 + 332), a1[84] - *(_DWORD *)(a5 + 336));
    v15 = GetTickCount();
    ecx0[16] = ecx0[11] + v15 - ecx0[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a5 + 228))(a5, ecx0[12] + v15, 1);
    *(_DWORD *)(a5 + 468) = ecx0[12] + v15;
    if ( CChar::IsNormal((int)a1) )
    {
      if ( *(_DWORD *)(a5 + 316) == a1[79] && sub_448870((_DWORD *)(a5 + 332), a1 + 83) < 170 )
      {
        v11 = 0;
        v10 = 0;
        v14 = sub_4833D0(ecx0, a5, *(_DWORD **)(a5 + 464));
        v9 = 0;
        v13 = (*(int (__thiscall **)(_DWORD *, int))(*ecx0 + 88))(ecx0, a5);
        if ( !(*(int (__thiscall **)(_DWORD *, int, int, int *, int *, int *, _DWORD *))(*a1 + 72))(
                a1,
                a5,
                v14 * v13 / 100,
                &v11,
                &v9,
                &v10,
                ecx0) )
          (*(void (__thiscall **)(_DWORD *, int))(*a1 + 80))(a1, a5);
        v7 = std___Mpunct_wchar_t___do_frac_digits(a1);
        v6 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", ecx0[1], v6, v7, 1, 5);
        CPlayer::Write((int)a1, 69, "bw", 7, a1[68]);
        CPlayer::UpdatePartyMember(a1, 7);
      }
    }
  }
}

//----- (0048C2D0) --------------------------------------------------------
int __stdcall CMFireRain::GetMagicM(_DWORD *a1)
{
  int v1; // esi

  v1 = 3 * a1[15] / 2;
  return v1 + 60 * CChar::GetInt(a1) / 10;
}

//----- (0048C310) --------------------------------------------------------
void __userpurge sub_48C310(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1)
{
  int v6; // eax
  int v7; // [esp-Ch] [ebp-2Ch]
  int v9; // [esp+4h] [ebp-1Ch] BYREF
  int v10; // [esp+8h] [ebp-18h] BYREF
  int v11; // [esp+Ch] [ebp-14h] BYREF
  int v13; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  DWORD v15; // [esp+1Ch] [ebp-4h]

  if ( a1 )
  {
    CChar::SetDirection((_DWORD *)a5, a1[83] - *(_DWORD *)(a5 + 332), a1[84] - *(_DWORD *)(a5 + 336));
    v15 = GetTickCount();
    ecx0[16] = ecx0[11] + v15 - ecx0[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a5 + 228))(a5, ecx0[12] + v15, 1);
    *(_DWORD *)(a5 + 468) = ecx0[12] + v15;
    if ( CChar::IsNormal((int)a1) )
    {
      if ( *(_DWORD *)(a5 + 316) == a1[79] && sub_448870((_DWORD *)(a5 + 332), a1 + 83) < 170 )
      {
        v11 = 0;
        v10 = 0;
        v14 = sub_4833D0(ecx0, a5, *(_DWORD **)(a5 + 464));
        v9 = 0;
        v13 = (*(int (__thiscall **)(_DWORD *, int))(*ecx0 + 88))(ecx0, a5);
        if ( !(*(int (__thiscall **)(_DWORD *, int, int, int *, int *, int *, _DWORD *))(*a1 + 72))(
                a1,
                a5,
                v14 * v13 / 100,
                &v11,
                &v9,
                &v10,
                ecx0) )
          (*(void (__thiscall **)(_DWORD *, int))(*a1 + 80))(a1, a5);
        v7 = std___Mpunct_wchar_t___do_frac_digits(a1);
        v6 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", ecx0[1], v6, v7, 1, 20);
        CPlayer::Write((int)a1, 69, "bw", 7, a1[68]);
        CPlayer::UpdatePartyMember(a1, 7);
      }
    }
  }
}

//----- (0048C4D0) --------------------------------------------------------
int __stdcall CMSpark::ExcuteM(_DWORD *a1)
{
  int v1; // esi
  int v2; // esi
  int v4; // [esp+4h] [ebp-14h]
  int v5; // [esp+8h] [ebp-10h]
  int nMin; // [esp+10h] [ebp-8h]
  int nMax; // [esp+14h] [ebp-4h]

  v1 = 5 * a1[15] / 3;
  nMin = (v1 + 6 * *(_DWORD *)(a1[110] + 320) * CChar::GetInt(a1) / 4) / 2 + 50;
  v2 = 5 * a1[15] / 3;
  nMax = (v2 + 11 * *(_DWORD *)(a1[110] + 320) * CChar::GetInt(a1) / 3) / 2 + 150;
  if ( nMin >= 60 * *(_DWORD *)(a1[110] + 320) + 200 )
    v5 = 60 * *(_DWORD *)(a1[110] + 320) + 200;
  else
    v5 = nMin;
  if ( nMax >= 200 * *(_DWORD *)(a1[110] + 320) + 200 )
    v4 = 200 * *(_DWORD *)(a1[110] + 320) + 200;
  else
    v4 = nMax;
  return RandomBetween(v5, v4);
}

//----- (0048C610) --------------------------------------------------------
void __userpurge sub_48C610(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1)
{
  int v6; // eax
  int v7; // [esp-Ch] [ebp-2Ch]
  int v9; // [esp+4h] [ebp-1Ch] BYREF
  int v10; // [esp+8h] [ebp-18h] BYREF
  int v11; // [esp+Ch] [ebp-14h] BYREF
  int v13; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  DWORD v15; // [esp+1Ch] [ebp-4h]

  if ( a1 )
  {
    CChar::SetDirection((_DWORD *)a5, a1[83] - *(_DWORD *)(a5 + 332), a1[84] - *(_DWORD *)(a5 + 336));
    v15 = GetTickCount();
    ecx0[16] = ecx0[11] + v15 - ecx0[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a5 + 228))(a5, ecx0[12] + v15, 1);
    *(_DWORD *)(a5 + 468) = ecx0[12] + v15;
    if ( CChar::IsNormal((int)a1) )
    {
      if ( *(_DWORD *)(a5 + 316) == a1[79] && sub_448870((_DWORD *)(a5 + 332), a1 + 83) < 170 )
      {
        v11 = 0;
        v10 = 0;
        v14 = sub_4833D0(ecx0, a5, *(_DWORD **)(a5 + 464));
        v9 = 0;
        v13 = (*(int (__thiscall **)(_DWORD *, int))(*ecx0 + 88))(ecx0, a5);
        if ( !(*(int (__thiscall **)(_DWORD *, int, int, int *, int *, int *, _DWORD *))(*a1 + 72))(
                a1,
                a5,
                v14 * v13 / 100,
                &v11,
                &v9,
                &v10,
                ecx0) )
          (*(void (__thiscall **)(_DWORD *, int))(*a1 + 80))(a1, a5);
        v7 = std___Mpunct_wchar_t___do_frac_digits(a1);
        v6 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", ecx0[1], v6, v7, 1, 2);
        CPlayer::Write((int)a1, 69, "bw", 7, a1[68]);
        CPlayer::UpdatePartyMember(a1, 7);
      }
    }
  }
}

//----- (0048C7D0) --------------------------------------------------------
int __stdcall sub_48C7D0(_DWORD *a1)
{
  int v1; // esi
  int v3; // [esp+4h] [ebp-Ch]
  int v4; // [esp+Ch] [ebp-4h]

  v1 = 5 * a1[15] / 3;
  v4 = (v1 + 6 * *(_DWORD *)(a1[110] + 320) * CChar::GetInt(a1) / 5) / 2;
  if ( v4 >= 70 * *(_DWORD *)(a1[110] + 320) + 150 )
    v3 = 70 * *(_DWORD *)(a1[110] + 320) + 150;
  else
    v3 = v4;
  return v3 + 8 * *(_DWORD *)(a1[110] + 320);
}

//----- (0048C880) --------------------------------------------------------
int __userpurge sub_48C880@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6)
{
  int v6; // eax
  int v8; // [esp-Ch] [ebp-14h]
  int v9; // [esp-4h] [ebp-Ch]
  DWORD v11; // [esp+4h] [ebp-4h]

  v11 = GetTickCount();
  a1[16] = a1[11] + v11 - a1[10];
  (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a5 + 228))(a5, a1[12] + v11, 1);
  a5[117] = a1[12] + v11;
  v9 = a1[2];
  v8 = std___Mpunct_wchar_t___do_frac_digits(a5);
  v6 = std___Mpunct_wchar_t___do_frac_digits(a5);
  CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v6, v8, 0, v9);
  return (*(int (__thiscall **)(_DWORD *, _DWORD, int, _DWORD, _DWORD))(*a5 + 232))(
           a5,
           a1[14],
           (int)a1[15] >> 16,
           (unsigned __int8)BYTE1(a1[15]),
           (unsigned __int8)a1[15]);
}

//----- (0048C950) --------------------------------------------------------
void __userpurge sub_48C950(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, _DWORD *a6)
{
  int v6; // eax
  int v7; // [esp-Ch] [ebp-20h]
  int v8; // [esp-4h] [ebp-18h]
  int v10; // [esp+4h] [ebp-10h] BYREF
  int v11; // [esp+8h] [ebp-Ch] BYREF
  int v12; // [esp+Ch] [ebp-8h] BYREF
  DWORD v13; // [esp+10h] [ebp-4h]

  if ( a6 )
  {
    v10 = 0;
    v11 = 0;
    v12 = 0;
    CChar::SetDirection(a5, a6[83] - a5[83], a6[84] - a5[84]);
    v13 = GetTickCount();
    a1[16] = a1[11] + v13 - a1[10];
    (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a5 + 228))(a5, a1[12] + v13, 1);
    a5[117] = a1[12] + v13;
    CChar::Unlock((int)a5);
    (*(void (__thiscall **)(_DWORD *, _DWORD *, int, int *, int *, int *, _DWORD *))(*a6 + 72))(
      a6,
      a5,
      2 * a6[68],
      &v12,
      &v10,
      &v11,
      a1);
    CChar::Lock((int)a5);
    v8 = a1[2];
    v7 = std___Mpunct_wchar_t___do_frac_digits(a6);
    v6 = std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, (int)a5, 63, "bddbb", a1[1], v6, v7, 0, v8);
  }
}

//----- (0048CA70) --------------------------------------------------------
int __stdcall sub_48CA70(_DWORD *a1)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-8h]

  v3 = CChar::GetMaxAttack(a1);
  v1 = CChar::GetMaxAttack(a1);
  return RandomBetween(v1, v3);
}

//----- (0048CAA0) --------------------------------------------------------
int __thiscall sub_48CAA0(void *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax
  int savedregs; // [esp+4h] [ebp+0h]

  v3 = CBuff::CreateBuff(7, 10, (int)this, savedregs);
  return (*(int (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v3);
}
// 48CAAB: variable 'savedregs' is possibly undefined

//----- (0048CAD0) --------------------------------------------------------
void __thiscall sub_48CAD0(void *this, int a2, int a3)
{
  CBuffMoveSpeed *v3; // eax

  if ( a3 )
  {
    v3 = CBuff::CreateBuff(105, 20000, 800, (int)this);
    (*(void (__thiscall **)(int, CBuffMoveSpeed *))(*(_DWORD *)a3 + 180))(a3, v3);
  }
}

//----- (0048CB10) --------------------------------------------------------
void __userpurge sub_48CB10(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-34h]
  int v11; // [esp-Ch] [ebp-34h]
  int v12; // [esp-8h] [ebp-30h]
  int v13; // [esp-4h] [ebp-2Ch]
  int v15; // [esp+4h] [ebp-24h] BYREF
  int v16; // [esp+8h] [ebp-20h] BYREF
  int v17; // [esp+Ch] [ebp-1Ch] BYREF
  int v19; // [esp+14h] [ebp-14h]
  int v20; // [esp+18h] [ebp-10h]
  _DWORD *v21; // [esp+1Ch] [ebp-Ch]
  void *v22; // [esp+20h] [ebp-8h]
  DWORD v23; // [esp+24h] [ebp-4h]

  if ( a1 )
  {
    CChar::SetDirection((_DWORD *)a5, a1[83] - *(_DWORD *)(a5 + 332), a1[84] - *(_DWORD *)(a5 + 336));
    v21 = 0;
    v6 = (*(int (__thiscall **)(_DWORD *))(*ecx0 + 92))(ecx0);
    v22 = sub_4934F0(*(char **)(a5 + 320), a2, a3, a4, a1 + 81, v6);
    v23 = GetTickCount();
    ecx0[16] = ecx0[11] + v23 - ecx0[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a5 + 228))(a5, ecx0[12] + v23, 1);
    *(_DWORD *)(a5 + 468) = ecx0[12] + v23;
    CChar::Unlock(a5);
    while ( v22 )
    {
      v21 = (_DWORD *)unknown_libname_15(v22);
      if ( CChar::IsNormal((int)v21) && *(_DWORD *)(a5 + 316) == v21[79] )
      {
        v17 = 0;
        v16 = 0;
        v20 = sub_4833D0(ecx0, a5, v21);
        v15 = 0;
        v19 = (*(int (__thiscall **)(_DWORD *, int))(*ecx0 + 88))(ecx0, a5);
        if ( (*(int (__thiscall **)(_DWORD *))(*ecx0 + 100))(ecx0) )
        {
          if ( !(*(int (__thiscall **)(_DWORD *, int, int, int *, int *, int *, _DWORD *))(*v21 + 72))(
                  v21,
                  a5,
                  v20 * v19 / 100,
                  &v17,
                  &v15,
                  &v16,
                  ecx0) )
            (*(void (__thiscall **)(_DWORD *, int))(*v21 + 80))(v21, a5);
          if ( v17 > 0 )
          {
            v13 = v16;
            v12 = v17;
            v10 = std___Mpunct_wchar_t___do_frac_digits(v21);
            v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
            v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*ecx0 + 96))(
                   ecx0,
                   ecx0[1],
                   v7,
                   v10,
                   v12,
                   v13);
            CChar::WriteInSight(a2, a3, a4, a5, 10, "bbddww", v8);
            (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*ecx0 + 104))(ecx0, a5, v21);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*ecx0 + 104))(ecx0, a5, v21);
          (*(void (__thiscall **)(_DWORD *, int))(*v21 + 80))(v21, a5);
        }
      }
      v22 = (void *)CBaseList::Pop((int)v22, a2, a3, a4);
    }
    CChar::Lock(a5);
    v11 = std___Mpunct_wchar_t___do_frac_digits(a1);
    v9 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", ecx0[1], v9, v11, 1, 10);
    CPlayer::Write((int)a1, 69, "bw", 7, a1[68]);
    CPlayer::UpdatePartyMember(a1, 7);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (0048CDA0) --------------------------------------------------------
int __stdcall sub_48CDA0(int a1)
{
  return RandomBetween(2500, 3500);
}

//----- (0048CDC0) --------------------------------------------------------
int __stdcall sub_48CDC0(int a1)
{
  return RandomBetween(2000, 2500);
}

//----- (0048CDE0) --------------------------------------------------------
CMonsterMagic *__userpurge sub_48CDE0@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a4, int a5, int a6)
{
  return CMonsterMagic::Create(a1, a2, a3, 230, *(_DWORD *)(a4 + 316), &a5, 1, a4, 800, 60000);
}

//----- (0048CE20) --------------------------------------------------------
int __stdcall sub_48CE20(int a1)
{
  return RandomBetween(4000, 5000);
}

//----- (0048CE40) --------------------------------------------------------
void __stdcall CDemonBeastSummon::ExcuteM(int a1, int pChar)
{
  if ( pChar )
  {
    CMonsterMaguniMaster::Create(a1, pChar);
    CMonsterMaguniMaster::Create(a1, pChar);
  }
  else
  {
    CMonsterMaguniMaster::Create(a1, a1);
    CMonsterMaguniMaster::Create(a1, a1);
    LOG_ERR("CDemonBeastSummon::ExcuteM pChar is Null");
  }
}

//----- (0048CEB0) --------------------------------------------------------
int __stdcall sub_48CEB0(_DWORD *a1)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-8h]

  v3 = CChar::GetMaxAttack(a1);
  v1 = CChar::GetMinAttack(a1);
  return RandomBetween(v1, v3);
}

//----- (0048CEE0) --------------------------------------------------------
int __stdcall sub_48CEE0(int a1)
{
  int v1; // eax
  int v3; // [esp-4h] [ebp-8h]

  v3 = CChar::GetMaxAttack(*(_DWORD **)(a1 + 484));
  v1 = CChar::GetMinAttack(*(_DWORD **)(a1 + 484));
  return RandomBetween(v1, v3);
}

//----- (0048CF20) --------------------------------------------------------
void __userpurge sub_48CF20(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // [esp-Ch] [ebp-34h]
  int v11; // [esp-8h] [ebp-30h]
  int v12; // [esp-4h] [ebp-2Ch]
  int v14; // [esp+4h] [ebp-24h] BYREF
  int v15; // [esp+8h] [ebp-20h] BYREF
  int v16; // [esp+Ch] [ebp-1Ch] BYREF
  int v18; // [esp+14h] [ebp-14h]
  int v19; // [esp+18h] [ebp-10h]
  _DWORD *v20; // [esp+1Ch] [ebp-Ch]
  void *v21; // [esp+20h] [ebp-8h]
  DWORD v22; // [esp+24h] [ebp-4h]

  v20 = 0;
  v6 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
  v21 = sub_4935A0((char *)a5[80], a2, a3, a4, a5 + 81, v6);
  v22 = GetTickCount();
  a1[16] = a1[11] + v22 - a1[10];
  (*(void (__thiscall **)(_DWORD *, DWORD, int))(*a5 + 228))(a5, a1[12] + v22, 1);
  a5[117] = a1[12] + v22;
  CChar::Unlock((int)a5);
  while ( v21 )
  {
    v20 = (_DWORD *)unknown_libname_15(v21);
    if ( CChar::IsNormal((int)v20) && a5[79] == v20[79] )
    {
      v16 = 0;
      v15 = 0;
      v19 = sub_4833D0(a1, (int)a5, v20);
      v14 = 0;
      v18 = (*(int (__thiscall **)(_DWORD *, _DWORD *))(*a1 + 88))(a1, a5);
      if ( !(*(int (__thiscall **)(_DWORD *, _DWORD *, int, int *, int *, int *, _DWORD *))(*v20 + 72))(
              v20,
              a5,
              v19 * v18 / 100,
              &v16,
              &v14,
              &v15,
              a1) )
        (*(void (__thiscall **)(_DWORD *, _DWORD *))(*v20 + 80))(v20, a5);
      if ( v16 > 0 )
      {
        v12 = v15;
        v11 = v16;
        v10 = std___Mpunct_wchar_t___do_frac_digits(v20);
        v7 = std___Mpunct_wchar_t___do_frac_digits(a5);
        v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*a1 + 96))(a1, a1[1], v7, v10, v11, v12);
        CChar::WriteInSight(a2, a3, a4, (int)a5, 10, "bbddww", v8);
        (*(void (__thiscall **)(_DWORD *, _DWORD *, _DWORD *))(*a1 + 104))(a1, a5, v20);
      }
    }
    v21 = (void *)CBaseList::Pop((int)v21, a2, a3, a4);
  }
  CChar::Lock((int)a5);
  v9 = std___Mpunct_wchar_t___do_frac_digits(a5);
  CChar::WriteInSight(a2, a3, a4, (int)a5, 61, "db", v9, 9);
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (0048D100) --------------------------------------------------------
BOOL __stdcall sub_48D100(_QWORD *a1, int a2)
{
  return CChar::IsBState(a1, 0x40000000000i64) == 0;
}

//----- (0048D140) --------------------------------------------------------
int __thiscall sub_48D140(int *this, _DWORD *a2, int a3, int a4)
{
  int result; // eax
  CBuffMoveSpeed *v5; // eax
  int savedregs; // [esp+4h] [ebp+0h]

  result = (*(int (__thiscall **)(int *, _DWORD *, _DWORD))*this)(this, a2, 0);
  if ( result )
  {
    CPlayer::ReturnToPoint(a2, this[14]);
    v5 = CBuff::CreateBuff(115, this[11] / 0x3E8u, (int)this, savedregs);
    result = (*(int (__thiscall **)(_DWORD *, CBuffMoveSpeed *))(*a2 + 180))(a2, v5);
  }
  return result;
}
// 48D17E: variable 'savedregs' is possibly undefined

//----- (0048D1A0) --------------------------------------------------------
BOOL __thiscall CPurgatorialFlame::AddMagicMonster(int (__thiscall ***this)(void *, int, _DWORD), int a2, int a3)
{
  return (**this)(this, a2, 0) != 0;
}

//----- (0048D1D0) --------------------------------------------------------
void __userpurge sub_48D1D0(_DWORD *ecx0@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, _DWORD *a1)
{
  int v6; // eax
  int v7; // [esp-Ch] [ebp-2Ch]
  int v9; // [esp+4h] [ebp-1Ch] BYREF
  int v10; // [esp+8h] [ebp-18h] BYREF
  int v11; // [esp+Ch] [ebp-14h] BYREF
  int v13; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  DWORD v15; // [esp+1Ch] [ebp-4h]

  if ( a1 )
  {
    CChar::SetDirection((_DWORD *)a5, a1[83] - *(_DWORD *)(a5 + 332), a1[84] - *(_DWORD *)(a5 + 336));
    v15 = GetTickCount();
    ecx0[16] = ecx0[11] + v15 - ecx0[10];
    (*(void (__thiscall **)(int, DWORD, int))(*(_DWORD *)a5 + 228))(a5, ecx0[12] + v15, 1);
    *(_DWORD *)(a5 + 468) = ecx0[12] + v15;
    if ( CChar::IsNormal((int)a1) )
    {
      if ( *(_DWORD *)(a5 + 316) == a1[79] && sub_448870((_DWORD *)(a5 + 332), a1 + 83) < 170 )
      {
        v11 = 0;
        v10 = 0;
        v14 = sub_4833D0(ecx0, a5, *(_DWORD **)(a5 + 464));
        v9 = 0;
        v13 = (*(int (__thiscall **)(_DWORD *, int))(*ecx0 + 88))(ecx0, a5);
        if ( !(*(int (__thiscall **)(_DWORD *, int, int, int *, int *, int *, _DWORD *))(*a1 + 72))(
                a1,
                a5,
                v14 * v13 / 100,
                &v11,
                &v9,
                &v10,
                ecx0) )
          (*(void (__thiscall **)(_DWORD *, int))(*a1 + 80))(a1, a5);
        v7 = std___Mpunct_wchar_t___do_frac_digits(a1);
        v6 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, "bddbbwwb", ecx0[1], v6, v7, 1, 10);
        CPlayer::Write((int)a1, 69, "bw", 7, a1[68]);
        CPlayer::UpdatePartyMember(a1, 7);
      }
    }
  }
}

//----- (0048D390) --------------------------------------------------------
CMonsterMagic *__userpurge sub_48D390@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, _DWORD *a4, int a5, int a6)
{
  int v6; // eax
  int v8; // [esp-4h] [ebp-Ch]
  int v9; // [esp+4h] [ebp-4h]

  v8 = CChar::GetMaxMagic(a4);
  v6 = CChar::GetMinMagic(a4);
  v9 = RandomBetween(v6, v8);
  return CMonsterMagic::Create(a1, a2, a3, 338, a4[79], &a5, 1, (int)a4, v9, 5000);
}

//----- (0048D3F0) --------------------------------------------------------
int __stdcall sub_48D3F0(int a1)
{
  int v2; // eax
  int v3; // [esp-4h] [ebp-8h]

  if ( !*(_DWORD *)(a1 + 484) )
    return 0;
  v3 = CChar::GetMaxMagic(*(_DWORD **)(a1 + 484));
  v2 = CChar::GetMinMagic(*(_DWORD **)(a1 + 484));
  return RandomBetween(v2, v3);
}

//----- (0048D440) --------------------------------------------------------
void __userpurge sub_48D440(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6)
{
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-30h]
  int v10; // [esp-8h] [ebp-2Ch]
  int v11; // [esp-4h] [ebp-28h]
  int v13; // [esp+4h] [ebp-20h] BYREF
  int v14; // [esp+8h] [ebp-1Ch] BYREF
  int v15; // [esp+Ch] [ebp-18h] BYREF
  int v17; // [esp+14h] [ebp-10h]
  int v18; // [esp+18h] [ebp-Ch]
  _DWORD *v19; // [esp+1Ch] [ebp-8h]
  void *v20; // [esp+20h] [ebp-4h]

  if ( (*(int (__thiscall **)(_DWORD *, int, _DWORD))(*a1 + 76))(a1, a5, 0) )
  {
    v19 = 0;
    v6 = (*(int (__thiscall **)(_DWORD *))(*a1 + 92))(a1);
    v20 = sub_4934F0(*(char **)(a5 + 320), a2, a3, a4, (_DWORD *)(a5 + 324), v6);
    ++*(_DWORD *)(a5 + 532);
    CChar::Unlock(a5);
    while ( v20 )
    {
      v19 = (_DWORD *)unknown_libname_15(v20);
      if ( CChar::IsNormal((int)v19)
        && *(_DWORD *)(a5 + 316) == v19[79]
        && (*(int (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)(a5 + 484) + 176))(*(_DWORD *)(a5 + 484), v19, 1) )
      {
        v15 = 0;
        v14 = 0;
        v18 = sub_4833D0(a1, *(_DWORD *)(a5 + 484), v19);
        v13 = 0;
        v17 = (*(int (__thiscall **)(_DWORD *, int))(*a1 + 88))(a1, a5);
        if ( *(int *)(a5 + 532) > 2 )
          v17 *= *(_DWORD *)(a5 + 532) - 1;
        if ( (*(int (__thiscall **)(_DWORD *))(*a1 + 100))(a1) )
        {
          if ( !(*(int (__thiscall **)(_DWORD *, _DWORD, int, int *, int *, int *, _DWORD *))(*v19 + 72))(
                  v19,
                  *(_DWORD *)(a5 + 484),
                  v18 * v17 / 100,
                  &v15,
                  &v13,
                  &v14,
                  a1) )
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*v19 + 80))(v19, *(_DWORD *)(a5 + 484));
          if ( v15 > 0 )
          {
            v11 = v14;
            v10 = v15;
            v9 = std___Mpunct_wchar_t___do_frac_digits(v19);
            v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a5);
            v8 = (*(int (__thiscall **)(_DWORD *, _DWORD, int, int, int, int))(*a1 + 96))(a1, a1[1], v7, v9, v10, v11);
            CChar::WriteInSight(a2, a3, a4, a5, 10, "bbddww", v8);
            (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*a1 + 104))(a1, a5, v19);
          }
        }
        else
        {
          (*(void (__thiscall **)(_DWORD *, int, _DWORD *))(*a1 + 104))(a1, a5, v19);
          (*(void (__thiscall **)(_DWORD *, _DWORD))(*v19 + 80))(v19, *(_DWORD *)(a5 + 484));
        }
      }
      v20 = (void *)CBaseList::Pop((int)v20, a2, a3, a4);
    }
    CChar::Lock(a5);
  }
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);

//----- (0048D680) --------------------------------------------------------
void *__thiscall sub_48D680(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (0048D6B0) --------------------------------------------------------
int __thiscall sub_48D6B0(int *this)
{
  return sub_48D930(this);
}

//----- (0048D6D0) --------------------------------------------------------
std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *__thiscall sub_48D6D0(int *this, std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator,bool> *a2, std::pair<char const * const,CItem *> *a3)
{
  _DWORD *v3; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v5; // eax
  int v7; // eax
  _DWORD *v8; // eax
  const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v9; // eax
  _DWORD *v10; // [esp-4h] [ebp-3Ch]
  _DWORD *v11; // [esp-4h] [ebp-3Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v12; // [esp+0h] [ebp-38h]
  bool v14; // [esp+Bh] [ebp-2Dh] BYREF
  char v15[7]; // [esp+Ch] [ebp-2Ch] BYREF
  bool v16; // [esp+13h] [ebp-25h] BYREF
  char v17[7]; // [esp+14h] [ebp-24h] BYREF
  bool v18; // [esp+1Bh] [ebp-1Dh] BYREF
  char v19[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v21; // [esp+2Ch] [ebp-Ch]
  std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *v22; // [esp+30h] [ebp-8h]
  char v23; // [esp+37h] [ebp-1h]

  v21 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_478AB0(this);
  v22 = (std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *)this[1];
  v23 = 1;
  while ( !*(_BYTE *)sub_431110((int)v21) )
  {
    v22 = v21;
    v10 = (_DWORD *)sub_473500((int)v21);
    v3 = (_DWORD *)unknown_libname_25(a3);
    v23 = sub_48D9E0(v3, v10);
    if ( v23 )
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)unknown_libname_25(v21);
    else
      v12 = *(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node **)sub_430F90((int)v21);
    v21 = v12;
  }
  sub_446700(&v20, (int)v22);
  if ( v23 )
  {
    v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
           (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v19);
    if ( (unsigned __int8)unknown_libname_16(v4) )
    {
      v18 = 1;
      v5 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270((int)this, (int)v17, 1, v22, a3);
      std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
        a2,
        v5,
        &v18);
      return a2;
    }
    sub_418880(&v20);
  }
  v11 = (_DWORD *)unknown_libname_25(a3);
  v7 = unknown_libname_15(&v20);
  v8 = (_DWORD *)sub_473500(v7);
  if ( sub_48D9E0(v8, v11) )
  {
    v16 = 1;
    v9 = (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)sub_420270((int)this, (int)v15, v23, v22, a3);
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      v9,
      &v16);
  }
  else
  {
    v14 = 0;
    std::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>::pair<std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::iterator,bool>(
      a2,
      (const std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)&v20,
      &v14);
  }
  return a2;
}
// 42F830: using guessed type int __thiscall unknown_libname_15(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0048D880) --------------------------------------------------------
_DWORD *sub_48D880()
{
  _DWORD *result; // eax
  _DWORD *v1; // [esp+0h] [ebp-Ch]
  CMemory **v2; // [esp+4h] [ebp-8h]
  int v3; // [esp+8h] [ebp-4h]

  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA760);
  v3 = dword_4DA75C;
  if ( dword_4DA75C )
  {
    dword_4DA75C = *(_DWORD *)(dword_4DA75C + 4);
    CIOSpinLock::Leave(&dword_4DA760);
    result = (_DWORD *)v3;
  }
  else
  {
    CIOSpinLock::Leave(&dword_4DA760);
    v2 = operator_new(0x4Cu);
    if ( v2 )
      v1 = sub_480D40(v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (0048D900) --------------------------------------------------------
LONG __cdecl sub_48D900(int a1)
{
  CIOSpinLock::Enter((CIOSpinLock *)&dword_4DA760);
  *(_DWORD *)(a1 + 4) = dword_4DA75C;
  dword_4DA75C = a1;
  return CIOSpinLock::Leave(&dword_4DA760);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (0048D930) --------------------------------------------------------
int __thiscall sub_48D930(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_48DA20(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0048D9E0) --------------------------------------------------------
BOOL __stdcall sub_48D9E0(_DWORD *a1, _DWORD *a2)
{
  return *a1 < *a2;
}

//----- (0048DA20) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_48DA20(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_48DAC0((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (0048DAC0) --------------------------------------------------------
_DWORD *__thiscall sub_48DAC0(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_48DC30(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (0048DB20) --------------------------------------------------------
int __thiscall sub_48DB20(int *this)
{
  int result; // eax
  int *v2; // eax
  int *v3; // eax
  int v5; // [esp+4h] [ebp-4h]

  result = sub_431110(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = (int *)sub_430F90(*this);
    if ( *(_BYTE *)sub_431110(*v2) )
    {
      while ( 1 )
      {
        v5 = *(_DWORD *)sub_446FF0(*this);
        result = *(char *)sub_431110(v5);
        if ( result )
          break;
        result = sub_430F90(v5);
        if ( *this != *(_DWORD *)result )
          break;
        *this = v5;
      }
      *this = v5;
    }
    else
    {
      v3 = (int *)sub_430F90(*this);
      result = sub_42F920(*v3);
      *this = result;
    }
  }
  return result;
}

//----- (0048DBE0) --------------------------------------------------------
void __thiscall std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::_Node::_Node(std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *this, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Larg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Parg, std::_Tree_nod<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::_Node *_Rarg, const std::pair<char const * const,CItem *> *_Val, char _Carg)
{
  int v6; // edx

  *(_DWORD *)this = _Larg;
  *((_DWORD *)this + 1) = _Parg;
  *((_DWORD *)this + 2) = _Rarg;
  v6 = *((_DWORD *)_Val + 1);
  *((_DWORD *)this + 3) = *(_DWORD *)_Val;
  *((_DWORD *)this + 4) = v6;
  *((_BYTE *)this + 20) = _Carg;
  *((_BYTE *)this + 21) = 0;
}

//----- (0048DC30) --------------------------------------------------------
int __stdcall sub_48DC30(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_48DC30(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (0048DCB0) --------------------------------------------------------
_DWORD *__thiscall sub_48DCB0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC3F0;
  return this;
}
// 4BC3F0: using guessed type int (__stdcall *off_4BC3F0)(int, int);

//----- (0048DCD0) --------------------------------------------------------
_DWORD *__thiscall sub_48DCD0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC440;
  return this;
}
// 4BC440: using guessed type int (__stdcall *off_4BC440)(int, int);

//----- (0048DCF0) --------------------------------------------------------
_DWORD *__thiscall sub_48DCF0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC490;
  return this;
}
// 4BC490: using guessed type int (__stdcall *off_4BC490)(int, int);

//----- (0048DD10) --------------------------------------------------------
_DWORD *__thiscall sub_48DD10(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC4E0;
  return this;
}
// 4BC4E0: using guessed type int (__stdcall *off_4BC4E0)(int, int);

//----- (0048DD30) --------------------------------------------------------
_DWORD *__thiscall sub_48DD30(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC530;
  return this;
}
// 4BC530: using guessed type int (__stdcall *off_4BC530)(int, int);

//----- (0048DD50) --------------------------------------------------------
_DWORD *__thiscall sub_48DD50(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC580;
  return this;
}
// 4BC580: using guessed type int (__stdcall *off_4BC580)(int, int);

//----- (0048DD70) --------------------------------------------------------
_DWORD *__thiscall sub_48DD70(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC5D0;
  return this;
}
// 4BC5D0: using guessed type int (__stdcall *off_4BC5D0)(int, int);

//----- (0048DD90) --------------------------------------------------------
_DWORD *__thiscall sub_48DD90(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC630;
  return this;
}
// 4BC630: using guessed type int (__stdcall *off_4BC630)(int, int);

//----- (0048DDB0) --------------------------------------------------------
int __thiscall sub_48DDB0(_DWORD *this, int a2)
{
  return this[9] + 9 * this[2];
}

//----- (0048DDD0) --------------------------------------------------------
_DWORD *__thiscall sub_48DDD0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC690;
  return this;
}
// 4BC690: using guessed type int (__stdcall *off_4BC690)(int, int);

//----- (0048DDF0) --------------------------------------------------------
int __thiscall sub_48DDF0(_DWORD *this, int a2, int a3)
{
  return a3 + 8 * this[2];
}

//----- (0048DE10) --------------------------------------------------------
int __thiscall sub_48DE10(_DWORD *this)
{
  return this[2] / 2;
}

//----- (0048DE30) --------------------------------------------------------
_DWORD *__thiscall sub_48DE30(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC6F0;
  return this;
}
// 4BC6F0: using guessed type int (__stdcall *off_4BC6F0)(int, int);

//----- (0048DE50) --------------------------------------------------------
int sub_48DE50()
{
  return 100;
}

//----- (0048DE60) --------------------------------------------------------
int __thiscall sub_48DE60(_DWORD *this, int a2)
{
  return this[9] + 3 * this[2];
}

//----- (0048DE80) --------------------------------------------------------
int __thiscall sub_48DE80(_DWORD *this, int a2)
{
  return this[11] - 100 * this[2];
}

//----- (0048DEA0) --------------------------------------------------------
int __thiscall sub_48DEA0(_DWORD *this)
{
  return 2 * this[2];
}

//----- (0048DEC0) --------------------------------------------------------
_DWORD *__thiscall sub_48DEC0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BC750;
  return this;
}
// 4BC750: using guessed type int (__stdcall *off_4BC750)(int, int);

//----- (0048DEE0) --------------------------------------------------------
int __thiscall sub_48DEE0(_DWORD *this)
{
  return 150 * this[2] + 50;
}

//----- (0048DF00) --------------------------------------------------------
int __thiscall sub_48DF00(_DWORD *this, int a2)
{
  return this[9] + this[2];
}

//----- (0048DF20) --------------------------------------------------------
_DWORD *__thiscall sub_48DF20(_DWORD *this)
{
  sub_48DEC0(this);
  *this = &off_4BC7A0;
  return this;
}
// 4BC7A0: using guessed type int (__stdcall *off_4BC7A0)(int, int);

//----- (0048DF40) --------------------------------------------------------
int __thiscall sub_48DF40(_DWORD *this)
{
  return 200 * this[2] + 800;
}

//----- (0048DF60) --------------------------------------------------------
int __thiscall sub_48DF60(_DWORD *this, int a2)
{
  return this[9] + 4 * this[2];
}

//----- (0048DF80) --------------------------------------------------------
_DWORD *__thiscall sub_48DF80(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC7F0;
  return this;
}
// 4BC7F0: using guessed type int (__stdcall *off_4BC7F0)(int, int);

//----- (0048DFA0) --------------------------------------------------------
int __stdcall sub_48DFA0(int a1, int a2)
{
  return a2;
}

//----- (0048DFB0) --------------------------------------------------------
int __thiscall sub_48DFB0(_DWORD *this)
{
  return -6 * this[2];
}

//----- (0048DFD0) --------------------------------------------------------
int __thiscall sub_48DFD0(_DWORD *this, int a2)
{
  return 2 * this[2];
}

//----- (0048DFF0) --------------------------------------------------------
_DWORD *__thiscall sub_48DFF0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC850;
  return this;
}
// 4BC850: using guessed type int (__stdcall *off_4BC850)(int, int);

//----- (0048E010) --------------------------------------------------------
int __thiscall sub_48E010(_DWORD *this, int a2, int a3)
{
  return a3 + 12 * this[2];
}

//----- (0048E030) --------------------------------------------------------
_DWORD *__thiscall sub_48E030(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC8B0;
  return this;
}
// 4BC8B0: using guessed type int (__stdcall *off_4BC8B0)(int, int);

//----- (0048E050) --------------------------------------------------------
int __thiscall sub_48E050(_DWORD *this, int a2, int a3)
{
  return a3 + 50 * this[2] + 150;
}

//----- (0048E070) --------------------------------------------------------
int CReturn::CReturn()
{
  return 200;
}

//----- (0048E080) --------------------------------------------------------
_DWORD *__thiscall sub_48E080(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC910;
  return this;
}
// 4BC910: using guessed type int (__stdcall *off_4BC910)(int, int);

//----- (0048E0A0) --------------------------------------------------------
int __thiscall sub_48E0A0(int *this, int a2, int a3)
{
  int v3; // esi

  v3 = a3 + 20 * this[2] + 60;
  return v3 + RandomBetween(0, this[2]);
}

//----- (0048E0E0) --------------------------------------------------------
int sub_48E0E0()
{
  return 50;
}

//----- (0048E0F0) --------------------------------------------------------
int __thiscall CUpBow::CUpBow(_DWORD *this)
{
  return this[2] + this[2] / 2;
}

//----- (0048E110) --------------------------------------------------------
_DWORD *__thiscall CUpConCen::CUpConCen(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC970;
  return this;
}
// 48DD90: using guessed type int __thiscall sub_48DD90(_DWORD);
// 4BC970: using guessed type int (__stdcall *off_4BC970)(int, int);

//----- (0048E130) --------------------------------------------------------
int __thiscall CPullSwing::CPullSwing(_DWORD *this, int a2, int a3)
{
  return a3 + 10 * this[2] + 50;
}

//----- (0048E150) --------------------------------------------------------
int __thiscall CBlow::CBlow(_DWORD *this)
{
  return this[2] + 9;
}

//----- (0048E170) --------------------------------------------------------
_DWORD *__thiscall CPullSwing::GetSpendMP(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BC9D0;
  return this;
}
// 48DD90: using guessed type int __thiscall sub_48DD90(_DWORD);
// 4BC9D0: using guessed type int (__stdcall *off_4BC9D0)(int, int);

//----- (0048E190) --------------------------------------------------------
int __thiscall sub_48E190(int *this, int a2, int a3)
{
  int v3; // esi

  v3 = a3 + 24 * this[2] + 80;
  return v3 + RandomBetween(0, this[2]);
}

//----- (0048E1D0) --------------------------------------------------------
_DWORD *__thiscall CThunder::GetHit(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCA30;
  return this;
}
// 48DD90: using guessed type int __thiscall sub_48DD90(_DWORD);
// 4BCA30: using guessed type int (__stdcall *off_4BCA30)(int, int);

//----- (0048E1F0) --------------------------------------------------------
_DWORD *__thiscall CShot::CShot(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCA90;
  return this;
}
// 48DD90: using guessed type int __thiscall sub_48DD90(_DWORD);
// 4BCA90: using guessed type int (__stdcall *off_4BCA90)(int, int);

//----- (0048E210) --------------------------------------------------------
_DWORD *__thiscall CShot::GetHostility(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCAF0;
  return this;
}
// 48DD90: using guessed type int __thiscall sub_48DD90(_DWORD);
// 4BCAF0: using guessed type int (__stdcall *off_4BCAF0)(int, int);

//----- (0048E230) --------------------------------------------------------
_DWORD *__thiscall sub_48E230(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCB50;
  return this;
}
// 4BCB50: using guessed type int (__stdcall *off_4BCB50)(int, int);

//----- (0048E250) --------------------------------------------------------
_DWORD *__thiscall sub_48E250(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCBB0;
  return this;
}
// 4BCBB0: using guessed type int (__stdcall *off_4BCBB0)(int, int);

//----- (0048E270) --------------------------------------------------------
int sub_48E270()
{
  return 75;
}

//----- (0048E280) --------------------------------------------------------
int __thiscall CMock::CMock(_DWORD *this, int a2)
{
  return this[9] + 3 * this[2] / 2;
}

//----- (0048E2B0) --------------------------------------------------------
_DWORD *__thiscall sub_48E2B0(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCC10;
  return this;
}
// 4BCC10: using guessed type int (__stdcall *off_4BCC10)(int, int);

//----- (0048E2D0) --------------------------------------------------------
int __thiscall sub_48E2D0(_DWORD *this, int a2)
{
  return this[9] + 5 * this[2];
}

//----- (0048E2F0) --------------------------------------------------------
int __thiscall sub_48E2F0(_DWORD *this)
{
  return this[2] + 5;
}

//----- (0048E310) --------------------------------------------------------
int __thiscall sub_48E310(_DWORD *this, int a2, int a3)
{
  this[10] = GetTickCount();
  return 1;
}

//----- (0048E330) --------------------------------------------------------
_DWORD *__thiscall sub_48E330(_DWORD *this)
{
  sub_48DD90(this);
  *this = &off_4BCC70;
  return this;
}
// 4BCC70: using guessed type int (__stdcall *off_4BCC70)(int, int);

//----- (0048E350) --------------------------------------------------------
_DWORD *__thiscall sub_48E350(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4BCCD0;
  return this;
}
// 4BCCD0: using guessed type int (__stdcall *off_4BCCD0)(int, int);

//----- (0048E370) --------------------------------------------------------
_DWORD *__thiscall CNegative::GetHostility(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BCD30;
  return this;
}
// 480D40: using guessed type int __thiscall sub_480D40(_DWORD);
// 4BCD30: using guessed type int (__stdcall *off_4BCD30)(int, int);

//----- (0048E390) --------------------------------------------------------
_DWORD *__thiscall CNegative::GetSpendMP(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4BCD90;
  return this;
}
// 4BCD90: using guessed type int (__stdcall *off_4BCD90)(int, int);

//----- (0048E3B0) --------------------------------------------------------
_DWORD *__thiscall CFlameArrow::CFlameArrow(_DWORD *this)
{
  CNegative::GetSpendMP(this);
  *this = &off_4BCDF0;
  return this;
}
// 4BCDF0: using guessed type int (__stdcall *off_4BCDF0)(int, int);

//----- (0048E3D0) --------------------------------------------------------
_DWORD *__thiscall CFlameArrow::GetAttack(_DWORD *this)
{
  CNegative::GetSpendMP(this);
  *this = &off_4BCE50;
  return this;
}
// 4BCE50: using guessed type int (__stdcall *off_4BCE50)(int, int);

//----- (0048E3F0) --------------------------------------------------------
_DWORD *__thiscall CTranscendental::CTranscendental(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4BCEB0;
  return this;
}
// 4BCEB0: using guessed type int (__stdcall *off_4BCEB0)(int, int);

//----- (0048E410) --------------------------------------------------------
int __thiscall CTranscendental::GetAttack(_DWORD *this, int a2)
{
  return this[9] + this[2] / 4;
}

//----- (0048E440) --------------------------------------------------------
_DWORD *__thiscall CUpperSlash::CUpperSlash(_DWORD *this)
{
  CTranscendental::CTranscendental(this);
  *this = &off_4BCF10;
  return this;
}
// 4BCF10: using guessed type int (__stdcall *off_4BCF10)(int, int);

//----- (0048E460) --------------------------------------------------------
_DWORD *__thiscall CUpperSlash::GetAttack(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4BCF70;
  return this;
}
// 4BCF70: using guessed type int (__stdcall *off_4BCF70)(int, int);

//----- (0048E480) --------------------------------------------------------
int __thiscall sub_48E480(_DWORD *this, int a2)
{
  return this[9] + this[2] / 2;
}

//----- (0048E4A0) --------------------------------------------------------
_DWORD *__thiscall CUpperSlash::GetHostility(_DWORD *this)
{
  CUpperSlash::GetAttack(this);
  *this = &off_4BCFD0;
  return this;
}
// 4BCFD0: using guessed type int (__stdcall *off_4BCFD0)(int, int);

//----- (0048E4C0) --------------------------------------------------------
_DWORD *__thiscall sub_48E4C0(_DWORD *this)
{
  CUpperSlash::GetAttack(this);
  *this = &off_4BD030;
  return this;
}
// 4BD030: using guessed type int (__stdcall *off_4BD030)(int, int);

//----- (0048E4E0) --------------------------------------------------------
int __thiscall sub_48E4E0(_DWORD *this, int a2)
{
  return this[2] + this[9];
}

//----- (0048E500) --------------------------------------------------------
_DWORD *__thiscall sub_48E500(_DWORD *this)
{
  CUpperSlash::GetAttack(this);
  *this = &off_4BD090;
  return this;
}
// 4BD090: using guessed type int (__stdcall *off_4BD090)(int, int);

//----- (0048E520) --------------------------------------------------------
_DWORD *__thiscall sub_48E520(_DWORD *this)
{
  CUpperSlash::GetAttack(this);
  *this = &off_4BD0F0;
  return this;
}
// 4BD0F0: using guessed type int (__stdcall *off_4BD0F0)(int, int);

//----- (0048E540) --------------------------------------------------------
_DWORD *__thiscall sub_48E540(_DWORD *this)
{
  sub_48E560(this);
  *this = &off_4BD150;
  return this;
}
// 4BD150: using guessed type int (__stdcall *off_4BD150)(int, int);

//----- (0048E560) --------------------------------------------------------
_DWORD *__thiscall sub_48E560(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD1C0;
  return this;
}
// 4BD1C0: using guessed type int (__stdcall *off_4BD1C0)(int, int);

//----- (0048E580) --------------------------------------------------------
_DWORD *__thiscall sub_48E580(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4BD230;
  return this;
}
// 4BD230: using guessed type int (__stdcall *off_4BD230)(int, int);

//----- (0048E5B0) --------------------------------------------------------
int CInfernal::CInfernal()
{
  return 9;
}

//----- (0048E5C0) --------------------------------------------------------
_DWORD *__thiscall sub_48E5C0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD2A0;
  return this;
}
// 4BD2A0: using guessed type int (__stdcall *off_4BD2A0)(int, int);

//----- (0048E5E0) --------------------------------------------------------
_DWORD *__thiscall sub_48E5E0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD310;
  return this;
}
// 4BD310: using guessed type int (__stdcall *off_4BD310)(int, int);

//----- (0048E600) --------------------------------------------------------
_DWORD *__thiscall sub_48E600(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD380;
  return this;
}
// 4BD380: using guessed type int (__stdcall *off_4BD380)(int, int);

//----- (0048E620) --------------------------------------------------------
_DWORD *__thiscall sub_48E620(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD3F0;
  return this;
}
// 4BD3F0: using guessed type int (__stdcall *off_4BD3F0)(int, int);

//----- (0048E640) --------------------------------------------------------
int CExplosion::GetSpendMP()
{
  return 7;
}

//----- (0048E650) --------------------------------------------------------
_DWORD *__thiscall sub_48E650(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD460;
  return this;
}
// 4BD460: using guessed type int (__stdcall *off_4BD460)(int, int);

//----- (0048E670) --------------------------------------------------------
int CGetherShot::CGetherShot()
{
  return 8;
}

//----- (0048E680) --------------------------------------------------------
_DWORD *__thiscall sub_48E680(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BD4D0;
  return this;
}
// 4BD4D0: using guessed type int (__stdcall *off_4BD4D0)(int, int);

//----- (0048E6A0) --------------------------------------------------------
_DWORD *__thiscall sub_48E6A0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4BD540;
  return this;
}
// 4BD540: using guessed type int (__stdcall *off_4BD540)(int, int);

//----- (0048E6C0) --------------------------------------------------------
_DWORD *__thiscall sub_48E6C0(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4BD5B0;
  return this;
}
// 4BD5B0: using guessed type int (__stdcall *off_4BD5B0)(int, int);

//----- (0048E6E0) --------------------------------------------------------
_DWORD *__thiscall sub_48E6E0(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4BD620;
  return this;
}
// 4BD620: using guessed type int (__stdcall *off_4BD620)(int, int);

//----- (0048E700) --------------------------------------------------------
int __stdcall sub_48E700(int a1, int a2, int a3)
{
  return 0;
}

//----- (0048E710) --------------------------------------------------------
_DWORD *__thiscall CSpiritBlast::CSpiritBlast(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4BD690;
  return this;
}
// 48E6E0: using guessed type int __thiscall sub_48E6E0(_DWORD);
// 4BD690: using guessed type int (__stdcall *off_4BD690)(int, int);

//----- (0048E730) --------------------------------------------------------
CMagic *__thiscall CMagic::CMagic(CMagic *this)
{
  sub_48E6E0(this);
  *(_DWORD *)this = &off_4BD700;
  return this;
}
// 4BD700: using guessed type int (__stdcall *off_4BD700)(int, int);

//----- (0048E750) --------------------------------------------------------
CFire *__thiscall CFire::CFire(CFire *this)
{
  sub_48E6E0(this);
  *(_DWORD *)this = &off_4BD770;
  return this;
}
// 4BD770: using guessed type int (__stdcall *off_4BD770)(int, int);

//----- (0048E770) --------------------------------------------------------
CFireExplosion *__thiscall CFireExplosion::CFireExplosion(CFireExplosion *this, int a2)
{
  return (CFireExplosion *)(*((_DWORD *)this + 9) + 16 * *((_DWORD *)this + 2));
}

//----- (0048E790) --------------------------------------------------------
CFireEruption *__thiscall CFireEruption::CFireEruption(CFireEruption *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BD7E0;
  return this;
}
// 4BD7E0: using guessed type int (__stdcall *off_4BD7E0)(int, int);

//----- (0048E7B0) --------------------------------------------------------
CIce *__thiscall CIce::CIce(CIce *this, int a2)
{
  return (CIce *)(*((_DWORD *)this + 9) + 6 * *((_DWORD *)this + 2));
}

//----- (0048E7D0) --------------------------------------------------------
_DWORD *__thiscall CIce::GetSpendMP(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BD830;
  return this;
}
// 4BD830: using guessed type int (__stdcall *off_4BD830)(int, int);

//----- (0048E7F0) --------------------------------------------------------
int __thiscall sub_48E7F0(_DWORD *this, int a2)
{
  return this[9] + 2 * this[2];
}

//----- (0048E810) --------------------------------------------------------
_DWORD *__thiscall sub_48E810(_DWORD *this)
{
  CIce::GetSpendMP(this);
  *this = &off_4BD888;
  return this;
}
// 4BD888: using guessed type int (__stdcall *off_4BD888)(int, int);

//----- (0048E830) --------------------------------------------------------
int __thiscall sub_48E830(_DWORD *this)
{
  return this[9] + 2 * this[2];
}

//----- (0048E850) --------------------------------------------------------
_DWORD *__thiscall sub_48E850(_DWORD *this)
{
  CIce::GetSpendMP(this);
  *this = &off_4BD8E0;
  return this;
}
// 4BD8E0: using guessed type int (__stdcall *off_4BD8E0)(int, int);

//----- (0048E870) --------------------------------------------------------
int __thiscall sub_48E870(_DWORD *this)
{
  return this[9] + 4 * this[2];
}

//----- (0048E890) --------------------------------------------------------
_DWORD *__thiscall sub_48E890(_DWORD *this)
{
  CIce::GetSpendMP(this);
  *this = &off_4BD938;
  return this;
}
// 4BD938: using guessed type int (__stdcall *off_4BD938)(int, int);

//----- (0048E8B0) --------------------------------------------------------
_DWORD *__thiscall sub_48E8B0(_DWORD *this)
{
  CIce::GetSpendMP(this);
  *this = &off_4BD990;
  return this;
}
// 4BD990: using guessed type int (__stdcall *off_4BD990)(int, int);

//----- (0048E8D0) --------------------------------------------------------
int __thiscall sub_48E8D0(_DWORD *this, int a2)
{
  return this[9] + 30 * this[2];
}

//----- (0048E8F0) --------------------------------------------------------
_DWORD *__thiscall sub_48E8F0(_DWORD *this)
{
  CIce::GetSpendMP(this);
  *this = &off_4BD9E8;
  return this;
}
// 4BD9E8: using guessed type int (__stdcall *off_4BD9E8)(int, int);

//----- (0048E910) --------------------------------------------------------
_DWORD *__thiscall sub_48E910(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDA40;
  return this;
}
// 4BDA40: using guessed type int (__stdcall *off_4BDA40)(int, int);

//----- (0048E930) --------------------------------------------------------
_DWORD *__thiscall sub_48E930(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDA90;
  return this;
}
// 4BDA90: using guessed type int (__stdcall *off_4BDA90)(int, int);

//----- (0048E950) --------------------------------------------------------
_DWORD *__thiscall sub_48E950(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDAE0;
  return this;
}
// 4BDAE0: using guessed type int (__stdcall *off_4BDAE0)(int, int);

//----- (0048E970) --------------------------------------------------------
_DWORD *__thiscall CExplosiveBurst::GetAddValueType(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDB30;
  return this;
}
// 4BDB30: using guessed type int (__stdcall *off_4BDB30)(int, int);

//----- (0048E990) --------------------------------------------------------
_DWORD *__thiscall sub_48E990(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDB80;
  return this;
}
// 4BDB80: using guessed type int (__stdcall *off_4BDB80)(int, int);

//----- (0048E9B0) --------------------------------------------------------
_DWORD *__thiscall sub_48E9B0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDBD0;
  return this;
}
// 4BDBD0: using guessed type int (__stdcall *off_4BDBD0)(int, int);

//----- (0048E9D0) --------------------------------------------------------
_DWORD *__thiscall sub_48E9D0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDC20;
  return this;
}
// 4BDC20: using guessed type int (__stdcall *off_4BDC20)(int, int);

//----- (0048E9F0) --------------------------------------------------------
_DWORD *__thiscall sub_48E9F0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDC70;
  return this;
}
// 4BDC70: using guessed type int (__stdcall *off_4BDC70)(int, int);

//----- (0048EA10) --------------------------------------------------------
CIceRequiem *__thiscall CIceRequiem::CIceRequiem(CIceRequiem *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BDCC0;
  return this;
}
// 4BDCC0: using guessed type int (__stdcall *off_4BDCC0)(int, int);

//----- (0048EA30) --------------------------------------------------------
_DWORD *__thiscall CIceRequiem::GetAddValueType(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDD10;
  return this;
}
// 4BDD10: using guessed type int (__stdcall *off_4BDD10)(int, int);

//----- (0048EA50) --------------------------------------------------------
_DWORD *__thiscall sub_48EA50(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDD60;
  return this;
}
// 4BDD60: using guessed type int (__stdcall *off_4BDD60)(int, int);

//----- (0048EA70) --------------------------------------------------------
_DWORD *__thiscall sub_48EA70(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDDB0;
  return this;
}
// 4BDDB0: using guessed type int (__stdcall *off_4BDDB0)(int, int);

//----- (0048EA90) --------------------------------------------------------
_DWORD *__thiscall sub_48EA90(_DWORD *this)
{
  sub_48EA70(this);
  *this = &off_4BDE08;
  return this;
}
// 4BDE08: using guessed type int (__stdcall *off_4BDE08)(int, int);

//----- (0048EAB0) --------------------------------------------------------
int __thiscall sub_48EAB0(_DWORD *this, int a2)
{
  return this[9] - 30 * this[2];
}

//----- (0048EAD0) --------------------------------------------------------
CIceStorm *__thiscall CIceStorm::CIceStorm(CIceStorm *this)
{
  sub_48EA70(this);
  *(_DWORD *)this = &off_4BDE60;
  return this;
}
// 4BDE60: using guessed type int (__stdcall *off_4BDE60)(int, int);

//----- (0048EAF0) --------------------------------------------------------
CFireRain *__thiscall CFireRain::CFireRain(CFireRain *this, int a2)
{
  return (CFireRain *)(*((_DWORD *)this + 9) + 80 * *((_DWORD *)this + 2));
}

//----- (0048EB10) --------------------------------------------------------
CPoisonCloud *__thiscall CPoisonCloud::CPoisonCloud(CPoisonCloud *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BDEB8;
  return this;
}
// 4BDEB8: using guessed type int (__stdcall *off_4BDEB8)(int, int);

//----- (0048EB30) --------------------------------------------------------
_DWORD *__thiscall CManaBurn::GetSpendMP(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDF08;
  return this;
}
// 4BDF08: using guessed type int (__stdcall *off_4BDF08)(int, int);

//----- (0048EB50) --------------------------------------------------------
CHealing *__thiscall CHealing::CHealing(CHealing *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BDF58;
  return this;
}
// 4BDF58: using guessed type int (__stdcall *off_4BDF58)(int, int);

//----- (0048EB70) --------------------------------------------------------
_DWORD *__thiscall CMShock::GetSpendMP(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BDFA8;
  return this;
}
// 4BDFA8: using guessed type int (__stdcall *off_4BDFA8)(int, int);

//----- (0048EB90) --------------------------------------------------------
CHealingAny *__thiscall CHealingAny::CHealingAny(CHealingAny *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BDFF8;
  return this;
}
// 4BDFF8: using guessed type int (__stdcall *off_4BDFF8)(int, int);

//----- (0048EBB0) --------------------------------------------------------
_DWORD *__thiscall CUpperSmash::GetSpendMP(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BE048;
  return this;
}
// 4BE048: using guessed type int (__stdcall *off_4BE048)(int, int);

//----- (0048EBD0) --------------------------------------------------------
int CHealingAnyPlus::CHealingAnyPlus()
{
  return 4;
}

//----- (0048EBE0) --------------------------------------------------------
_DWORD *__thiscall sub_48EBE0(_DWORD *this)
{
  CUpperSmash::GetSpendMP(this);
  *this = &off_4BE0A8;
  return this;
}
// 4BE0A8: using guessed type int (__stdcall *off_4BE0A8)(int, int);

//----- (0048EC00) --------------------------------------------------------
_DWORD *__thiscall sub_48EC00(_DWORD *this)
{
  CUpperSmash::GetSpendMP(this);
  *this = &off_4BE108;
  return this;
}
// 4BE108: using guessed type int (__stdcall *off_4BE108)(int, int);

//----- (0048EC20) --------------------------------------------------------
int __thiscall sub_48EC20(_DWORD *this, int a2)
{
  return this[9] + 40 * this[2];
}

//----- (0048EC40) --------------------------------------------------------
int sub_48EC40()
{
  return 11;
}

//----- (0048EC50) --------------------------------------------------------
CHealingAnyQuick *__thiscall CHealingAnyQuick::CHealingAnyQuick(CHealingAnyQuick *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE168;
  return this;
}
// 4BE168: using guessed type int (__stdcall *off_4BE168)(int, int);

//----- (0048EC70) --------------------------------------------------------
CHealingInstance *__thiscall CHealingInstance::CHealingInstance(CHealingInstance *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE1B8;
  return this;
}
// 4BE1B8: using guessed type int (__stdcall *off_4BE1B8)(int, int);

//----- (0048EC90) --------------------------------------------------------
_DWORD *__thiscall CHealingInstance::GetSpendMP(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BE208;
  return this;
}
// 4BE208: using guessed type int (__stdcall *off_4BE208)(int, int);

//----- (0048ECB0) --------------------------------------------------------
CHealingGreatRe *__thiscall CHealingGreatRe::CHealingGreatRe(CHealingGreatRe *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE258;
  return this;
}
// 4BE258: using guessed type int (__stdcall *off_4BE258)(int, int);

//----- (0048ECD0) --------------------------------------------------------
CRest *__thiscall CRest::CRest(CRest *this, int a2)
{
  return (CRest *)(*((_DWORD *)this + 9) + 25 * *((_DWORD *)this + 2));
}

//----- (0048ECF0) --------------------------------------------------------
CUpFatal *__thiscall CUpFatal::CUpFatal(CUpFatal *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE2A8;
  return this;
}
// 4BE2A8: using guessed type int (__stdcall *off_4BE2A8)(int, int);

//----- (0048ED10) --------------------------------------------------------
CUpFatal2 *__thiscall CUpFatal2::CUpFatal2(CUpFatal2 *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE2F8;
  return this;
}
// 4BE2F8: using guessed type int (__stdcall *off_4BE2F8)(int, int);

//----- (0048ED30) --------------------------------------------------------
CUpFatal3 *__thiscall CUpFatal3::CUpFatal3(CUpFatal3 *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE348;
  return this;
}
// 4BE348: using guessed type int (__stdcall *off_4BE348)(int, int);

//----- (0048ED50) --------------------------------------------------------
CMeditation *__thiscall CMeditation::CMeditation(CMeditation *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE398;
  return this;
}
// 4BE398: using guessed type int (__stdcall *off_4BE398)(int, int);

//----- (0048ED70) --------------------------------------------------------
BOOL __thiscall sub_48ED70(_DWORD *this, int a2, unsigned int a3)
{
  return a2 >= this[3] && a3 > 3;
}

//----- (0048EDB0) --------------------------------------------------------
CUpFire *__thiscall CUpFire::CUpFire(CUpFire *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE3E8;
  return this;
}
// 4BE3E8: using guessed type int (__stdcall *off_4BE3E8)(int, int);

//----- (0048EDD0) --------------------------------------------------------
CFatalChance *__thiscall CFatalChance::CFatalChance(CFatalChance *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE438;
  return this;
}
// 4BE438: using guessed type int (__stdcall *off_4BE438)(int, int);

//----- (0048EDF0) --------------------------------------------------------
CUpBlockShield *__thiscall CUpBlockShield::CUpBlockShield(CUpBlockShield *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE488;
  return this;
}
// 4BE488: using guessed type int (__stdcall *off_4BE488)(int, int);

//----- (0048EE10) --------------------------------------------------------
CGunnery *__thiscall CGunnery::CGunnery(CGunnery *this, int a2)
{
  return (CGunnery *)(*((_DWORD *)this + 9) + 8 * *((_DWORD *)this + 2));
}

//----- (0048EE30) --------------------------------------------------------
CRevival *__thiscall CRevival::CRevival(CRevival *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE4D8;
  return this;
}
// 4BE4D8: using guessed type int (__stdcall *off_4BE4D8)(int, int);

//----- (0048EE50) --------------------------------------------------------
CResurrection *__thiscall CResurrection::CResurrection(CResurrection *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE528;
  return this;
}
// 4BE528: using guessed type int (__stdcall *off_4BE528)(int, int);

//----- (0048EE70) --------------------------------------------------------
int __thiscall CResurrection::GetSpendMP(_DWORD *this, int a2)
{
  return this[9] + 12 * this[2];
}

//----- (0048EE90) --------------------------------------------------------
CReincarnate *__thiscall CReincarnate::CReincarnate(CReincarnate *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE578;
  return this;
}
// 4BE578: using guessed type int (__stdcall *off_4BE578)(int, int);

//----- (0048EEB0) --------------------------------------------------------
int __thiscall CReincarnate::GetSpendMP(_DWORD *this, int a2)
{
  return this[9] + 31 * this[2];
}

//----- (0048EED0) --------------------------------------------------------
CUpEvade *__thiscall CUpEvade::CUpEvade(CUpEvade *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE5C8;
  return this;
}
// 4BE5C8: using guessed type int (__stdcall *off_4BE5C8)(int, int);

//----- (0048EEF0) --------------------------------------------------------
CUpRFEvade *__thiscall CUpRFEvade::CUpRFEvade(CUpRFEvade *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE618;
  return this;
}
// 4BE618: using guessed type int (__stdcall *off_4BE618)(int, int);

//----- (0048EF10) --------------------------------------------------------
CStoneShield *__thiscall CStoneShield::CStoneShield(CStoneShield *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE668;
  return this;
}
// 4BE668: using guessed type int (__stdcall *off_4BE668)(int, int);

//----- (0048EF30) --------------------------------------------------------
CHaste *__thiscall CHaste::CHaste(CHaste *this, int a2)
{
  return (CHaste *)(*((_DWORD *)this + 9) + 11 * *((_DWORD *)this + 2));
}

//----- (0048EF50) --------------------------------------------------------
CFrostBlast *__thiscall CFrostBlast::CFrostBlast(CFrostBlast *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE6B8;
  return this;
}
// 4BE6B8: using guessed type int (__stdcall *off_4BE6B8)(int, int);

//----- (0048EF70) --------------------------------------------------------
CHealingParty *__thiscall CHealingParty::CHealingParty(CHealingParty *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE708;
  return this;
}
// 4BE708: using guessed type int (__stdcall *off_4BE708)(int, int);

//----- (0048EF90) --------------------------------------------------------
_DWORD *__thiscall CMPoisonCloud::GetResistNum(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BE758;
  return this;
}
// 4BE758: using guessed type int (__stdcall *off_4BE758)(int, int);

//----- (0048EFB0) --------------------------------------------------------
int __thiscall sub_48EFB0(_DWORD *this, int a2)
{
  return this[9];
}

//----- (0048EFD0) --------------------------------------------------------
_DWORD *__thiscall sub_48EFD0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BE7A8;
  return this;
}
// 4BE7A8: using guessed type int (__stdcall *off_4BE7A8)(int, int);

//----- (0048EFF0) --------------------------------------------------------
_DWORD *__thiscall sub_48EFF0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BE7F8;
  return this;
}
// 4BE7F8: using guessed type int (__stdcall *off_4BE7F8)(int, int);

//----- (0048F010) --------------------------------------------------------
CWildAccuracy *__thiscall CWildAccuracy::CWildAccuracy(CWildAccuracy *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE848;
  return this;
}
// 4BE848: using guessed type int (__stdcall *off_4BE848)(int, int);

//----- (0048F030) --------------------------------------------------------
CPoisonArrow *__thiscall CPoisonArrow::CPoisonArrow(CPoisonArrow *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BE898;
  return this;
}
// 4BE898: using guessed type int (__stdcall *off_4BE898)(int, int);

//----- (0048F050) --------------------------------------------------------
CWildStrength *__thiscall CWildStrength::CWildStrength(CWildStrength *this, int a2)
{
  return (CWildStrength *)(*((_DWORD *)this + 9) + 20 * *((_DWORD *)this + 2));
}

//----- (0048F070) --------------------------------------------------------
CProtect *__thiscall CProtect::CProtect(CProtect *this)
{
  CProtect::GetSpendMP(this);
  *(_DWORD *)this = &off_4BE8E8;
  return this;
}
// 4BE8E8: using guessed type int (__stdcall *off_4BE8E8)(int, int);

//----- (0048F090) --------------------------------------------------------
_DWORD *__thiscall CProtect::GetSpendMP(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BE948;
  return this;
}
// 4BE948: using guessed type int (__stdcall *off_4BE948)(int, int);

//----- (0048F0B0) --------------------------------------------------------
CShieldSmash *__thiscall CShieldSmash::CShieldSmash(CShieldSmash *this, int a2)
{
  return (CShieldSmash *)(*((_DWORD *)this + 9) + 32 * *((_DWORD *)this + 2));
}

//----- (0048F0D0) --------------------------------------------------------
CSilenceArrow *__thiscall CSilenceArrow::CSilenceArrow(CSilenceArrow *this)
{
  CProtect::GetSpendMP(this);
  *(_DWORD *)this = &off_4BE9A8;
  return this;
}
// 4BE9A8: using guessed type int (__stdcall *off_4BE9A8)(int, int);

//----- (0048F0F0) --------------------------------------------------------
CProtectRange *__thiscall CProtectRange::CProtectRange(CProtectRange *this, int a2)
{
  return (CProtectRange *)(*((_DWORD *)this + 9) + 27 * *((_DWORD *)this + 2));
}

//----- (0048F110) --------------------------------------------------------
CUpReinforceVitality *__thiscall CUpReinforceVitality::CUpReinforceVitality(CUpReinforceVitality *this)
{
  CProtect::GetSpendMP(this);
  *(_DWORD *)this = &off_4BEA08;
  return this;
}
// 4BEA08: using guessed type int (__stdcall *off_4BEA08)(int, int);

//----- (0048F130) --------------------------------------------------------
int __thiscall CUpReinforceVitality::CanLearn(_DWORD *this, int a2)
{
  return this[9] + 26 * this[2];
}

//----- (0048F150) --------------------------------------------------------
_DWORD *__thiscall sub_48F150(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEA68;
  return this;
}
// 4BEA68: using guessed type int (__stdcall *off_4BEA68)(int, int);

//----- (0048F170) --------------------------------------------------------
CUpAttackRange *__thiscall CUpAttackRange::CUpAttackRange(CUpAttackRange *this, int a2)
{
  return (CUpAttackRange *)(*((_DWORD *)this + 9) + 36 * *((_DWORD *)this + 2));
}

//----- (0048F190) --------------------------------------------------------
CVitalityDrain *__thiscall CVitalityDrain::CVitalityDrain(CVitalityDrain *this)
{
  CProtect::GetSpendMP(this);
  *(_DWORD *)this = &off_4BEAC8;
  return this;
}
// 4BEAC8: using guessed type int (__stdcall *off_4BEAC8)(int, int);

//----- (0048F1B0) --------------------------------------------------------
CSuffering *__thiscall CSuffering::CSuffering(CSuffering *this, int a2)
{
  return (CSuffering *)(*((_DWORD *)this + 9) + 38 * *((_DWORD *)this + 2));
}

//----- (0048F1D0) --------------------------------------------------------
_DWORD *__thiscall CHaste::GetSpendMP(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEB28;
  return this;
}
// 4BEB28: using guessed type int (__stdcall *off_4BEB28)(int, int);

//----- (0048F200) --------------------------------------------------------
_DWORD *__thiscall sub_48F200(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEB88;
  return this;
}
// 4BEB88: using guessed type int (__stdcall *off_4BEB88)(int, int);

//----- (0048F220) --------------------------------------------------------
_DWORD *__thiscall sub_48F220(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEBE8;
  return this;
}
// 4BEBE8: using guessed type int (__stdcall *off_4BEBE8)(int, int);

//----- (0048F240) --------------------------------------------------------
_DWORD *__thiscall sub_48F240(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEC48;
  return this;
}
// 4BEC48: using guessed type int (__stdcall *off_4BEC48)(int, int);

//----- (0048F260) --------------------------------------------------------
_DWORD *__thiscall sub_48F260(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BECA8;
  return this;
}
// 4BECA8: using guessed type int (__stdcall *off_4BECA8)(int, int);

//----- (0048F280) --------------------------------------------------------
_DWORD *__thiscall sub_48F280(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BED08;
  return this;
}
// 4BED08: using guessed type int (__stdcall *off_4BED08)(int, int);

//----- (0048F2A0) --------------------------------------------------------
_DWORD *__thiscall sub_48F2A0(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BED68;
  return this;
}
// 4BED68: using guessed type int (__stdcall *off_4BED68)(int, int);

//----- (0048F2C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F2C0(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEDC8;
  return this;
}
// 4BEDC8: using guessed type int (__stdcall *off_4BEDC8)(int, int);

//----- (0048F2E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F2E0(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEE28;
  return this;
}
// 4BEE28: using guessed type int (__stdcall *off_4BEE28)(int, int);

//----- (0048F300) --------------------------------------------------------
_DWORD *__thiscall sub_48F300(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEE88;
  return this;
}
// 4BEE88: using guessed type int (__stdcall *off_4BEE88)(int, int);

//----- (0048F320) --------------------------------------------------------
_DWORD *__thiscall sub_48F320(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEEE8;
  return this;
}
// 4BEEE8: using guessed type int (__stdcall *off_4BEEE8)(int, int);

//----- (0048F340) --------------------------------------------------------
_DWORD *__thiscall sub_48F340(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BEF48;
  return this;
}
// 4BEF48: using guessed type int (__stdcall *off_4BEF48)(int, int);

//----- (0048F360) --------------------------------------------------------
_DWORD *__thiscall sub_48F360(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BEFA8;
  return this;
}
// 4BEFA8: using guessed type int (__stdcall *off_4BEFA8)(int, int);

//----- (0048F380) --------------------------------------------------------
_DWORD *__thiscall sub_48F380(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BF000;
  return this;
}
// 4BF000: using guessed type int (__stdcall *off_4BF000)(int, int);

//----- (0048F3A0) --------------------------------------------------------
int __thiscall sub_48F3A0(_DWORD *this, int a2)
{
  return this[9] + 15 * this[2];
}

//----- (0048F3C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F3C0(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF058;
  return this;
}
// 4BF058: using guessed type int (__stdcall *off_4BF058)(int, int);

//----- (0048F3E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F3E0(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF0B0;
  return this;
}
// 4BF0B0: using guessed type int (__stdcall *off_4BF0B0)(int, int);

//----- (0048F400) --------------------------------------------------------
_DWORD *__thiscall sub_48F400(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF108;
  return this;
}
// 4BF108: using guessed type int (__stdcall *off_4BF108)(int, int);

//----- (0048F420) --------------------------------------------------------
_DWORD *__thiscall sub_48F420(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF160;
  return this;
}
// 4BF160: using guessed type int (__stdcall *off_4BF160)(int, int);

//----- (0048F440) --------------------------------------------------------
int __thiscall sub_48F440(_DWORD *this, int a2)
{
  return this[9] + 14 * this[2];
}

//----- (0048F460) --------------------------------------------------------
_DWORD *__thiscall sub_48F460(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF1B8;
  return this;
}
// 4BF1B8: using guessed type int (__stdcall *off_4BF1B8)(int, int);

//----- (0048F480) --------------------------------------------------------
_DWORD *__thiscall sub_48F480(_DWORD *this)
{
  sub_48F380(this);
  *this = &off_4BF210;
  return this;
}
// 4BF210: using guessed type int (__stdcall *off_4BF210)(int, int);

//----- (0048F4A0) --------------------------------------------------------
_DWORD *__thiscall sub_48F4A0(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF268;
  return this;
}
// 4BF268: using guessed type int (__stdcall *off_4BF268)(int, int);

//----- (0048F4C0) --------------------------------------------------------
_DWORD *__thiscall sub_48F4C0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BF2C0;
  return this;
}
// 4BF2C0: using guessed type int (__stdcall *off_4BF2C0)(int, int);

//----- (0048F4E0) --------------------------------------------------------
_DWORD *__thiscall sub_48F4E0(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF318;
  return this;
}
// 4BF318: using guessed type int (__stdcall *off_4BF318)(int, int);

//----- (0048F500) --------------------------------------------------------
_DWORD *__thiscall sub_48F500(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF370;
  return this;
}
// 4BF370: using guessed type int (__stdcall *off_4BF370)(int, int);

//----- (0048F520) --------------------------------------------------------
_DWORD *__thiscall sub_48F520(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF3C8;
  return this;
}
// 4BF3C8: using guessed type int (__stdcall *off_4BF3C8)(int, int);

//----- (0048F540) --------------------------------------------------------
_DWORD *__thiscall sub_48F540(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF420;
  return this;
}
// 4BF420: using guessed type int (__stdcall *off_4BF420)(int, int);

//----- (0048F560) --------------------------------------------------------
_DWORD *__thiscall sub_48F560(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF478;
  return this;
}
// 4BF478: using guessed type int (__stdcall *off_4BF478)(int, int);

//----- (0048F580) --------------------------------------------------------
_DWORD *__thiscall sub_48F580(_DWORD *this)
{
  sub_48F4C0(this);
  *this = &off_4BF4D0;
  return this;
}
// 4BF4D0: using guessed type int (__stdcall *off_4BF4D0)(int, int);

//----- (0048F5A0) --------------------------------------------------------
_DWORD *__thiscall sub_48F5A0(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4BF528;
  return this;
}
// 4BF528: using guessed type int (__stdcall *off_4BF528)(int, int);

//----- (0048F5C0) --------------------------------------------------------
CManaBurn *__thiscall CManaBurn::CManaBurn(CManaBurn *this)
{
  sub_48E6A0(this);
  *(_DWORD *)this = &off_4BF588;
  return this;
}
// 4BF588: using guessed type int (__stdcall *off_4BF588)(int, int);

//----- (0048F5E0) --------------------------------------------------------
CMeshChance *__thiscall CMeshChance::CMeshChance(CMeshChance *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BF5F8;
  return this;
}
// 4BF5F8: using guessed type int (__stdcall *off_4BF5F8)(int, int);

//----- (0048F600) --------------------------------------------------------
CMeshStr *__thiscall CMeshStr::CMeshStr(CMeshStr *this)
{
  sub_48DD90(this);
  *(_DWORD *)this = &off_4BF648;
  return this;
}
// 4BF648: using guessed type int (__stdcall *off_4BF648)(int, int);

//----- (0048F620) --------------------------------------------------------
CMeshHth *__thiscall CMeshHth::CMeshHth(CMeshHth *this)
{
  sub_48DD90(this);
  *(_DWORD *)this = &off_4BF6A8;
  return this;
}
// 4BF6A8: using guessed type int (__stdcall *off_4BF6A8)(int, int);

//----- (0048F640) --------------------------------------------------------
CMeshDex *__thiscall CMeshDex::CMeshDex(CMeshDex *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BF708;
  return this;
}
// 4BF708: using guessed type int (__stdcall *off_4BF708)(int, int);

//----- (0048F660) --------------------------------------------------------
CMeshInt *__thiscall CMeshInt::CMeshInt(CMeshInt *this)
{
  sub_48DD90(this);
  *(_DWORD *)this = &off_4BF758;
  return this;
}
// 4BF758: using guessed type int (__stdcall *off_4BF758)(int, int);

//----- (0048F680) --------------------------------------------------------
CMeshWis *__thiscall CMeshWis::CMeshWis(CMeshWis *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BF7B8;
  return this;
}
// 4BF7B8: using guessed type int (__stdcall *off_4BF7B8)(int, int);

//----- (0048F6A0) --------------------------------------------------------
CMeshDefense *__thiscall CMeshDefense::CMeshDefense(CMeshDefense *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BF808;
  return this;
}
// 4BF808: using guessed type int (__stdcall *off_4BF808)(int, int);

//----- (0048F6C0) --------------------------------------------------------
CVanishConfi *__thiscall CVanishConfi::CVanishConfi(CVanishConfi *this)
{
  sub_48E6A0(this);
  *(_DWORD *)this = &off_4BF858;
  return this;
}
// 4BF858: using guessed type int (__stdcall *off_4BF858)(int, int);

//----- (0048F6E0) --------------------------------------------------------
int CDestroySight::CDestroySight()
{
  return 14;
}

//----- (0048F6F0) --------------------------------------------------------
_DWORD *__thiscall sub_48F6F0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BF8C8;
  return this;
}
// 4BF8C8: using guessed type int (__stdcall *off_4BF8C8)(int, int);

//----- (0048F710) --------------------------------------------------------
int sub_48F710()
{
  return 15;
}

//----- (0048F720) --------------------------------------------------------
CBerserk *__thiscall CBerserk::CBerserk(CBerserk *this)
{
  sub_48E6A0(this);
  *(_DWORD *)this = &off_4BF938;
  return this;
}
// 4BF938: using guessed type int (__stdcall *off_4BF938)(int, int);

//----- (0048F740) --------------------------------------------------------
CSkillSelfBuff *__thiscall CSkillSelfBuff::CSkillSelfBuff(CSkillSelfBuff *this)
{
  sub_48E6A0(this);
  *(_DWORD *)this = &off_4BF9A8;
  return this;
}
// 4BF9A8: using guessed type int (__stdcall *off_4BF9A8)(int, int);

//----- (0048F760) --------------------------------------------------------
int __thiscall CBerserk::GetSpendMP(_DWORD *this)
{
  return this[14] != 0 ? 40 : 10;
}

//----- (0048F780) --------------------------------------------------------
CResistLightning *__thiscall CResistLightning::CResistLightning(CResistLightning *this)
{
  return (CResistLightning *)(*((_DWORD *)this + 14) != 0 ? 4 : 0);
}

//----- (0048F7A0) --------------------------------------------------------
CResistIce *__thiscall CResistIce::CResistIce(CResistIce *this)
{
  return (CResistIce *)((*((_DWORD *)this + 14) != 0) + 17);
}

//----- (0048F7C0) --------------------------------------------------------
CResistFire *__thiscall CResistFire::CResistFire(CResistFire *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BFA68;
  return this;
}
// 4BFA68: using guessed type int (__stdcall *off_4BFA68)(int, int);

//----- (0048F7E0) --------------------------------------------------------
CResistCurse *__thiscall CResistCurse::CResistCurse(CResistCurse *this)
{
  sub_480D40(this);
  *(_DWORD *)this = &off_4BFAB8;
  return this;
}
// 4BFAB8: using guessed type int (__stdcall *off_4BFAB8)(int, int);

//----- (0048F800) --------------------------------------------------------
_DWORD *__thiscall CResistPalsy::GetSpendMP(_DWORD *this)
{
  CProtect::GetSpendMP(this);
  *this = &off_4BFB08;
  return this;
}
// 4BFB08: using guessed type int (__stdcall *off_4BFB08)(int, int);

//----- (0048F820) --------------------------------------------------------
CResistPalsy *__thiscall CResistPalsy::CResistPalsy(CResistPalsy *this)
{
  CProtect::GetSpendMP(this);
  *(_DWORD *)this = &off_4BFB68;
  return this;
}
// 4BFB68: using guessed type int (__stdcall *off_4BFB68)(int, int);

//----- (0048F840) --------------------------------------------------------
CEmergencyEscape *__thiscall CEmergencyEscape::CEmergencyEscape(CEmergencyEscape *this)
{
  sub_48E580(this);
  *(_DWORD *)this = &off_4BFBC8;
  return this;
}
// 4BFBC8: using guessed type int (__stdcall *off_4BFBC8)(int, int);

//----- (0048F860) --------------------------------------------------------
int CChantProtect::CChantProtect()
{
  return 22;
}

//----- (0048F870) --------------------------------------------------------
_DWORD *__thiscall sub_48F870(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4BFC38;
  return this;
}
// 4BFC38: using guessed type int (__stdcall *off_4BFC38)(int, int);

//----- (0048F890) --------------------------------------------------------
_DWORD *__thiscall sub_48F890(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BFCA8;
  return this;
}
// 4BFCA8: using guessed type int (__stdcall *off_4BFCA8)(int, int);

//----- (0048F8B0) --------------------------------------------------------
BOOL __thiscall sub_48F8B0(_DWORD *this, int a2, int a3)
{
  unsigned int v3; // edx

  v3 = this[16] % 2u;
  ++this[16];
  return v3 == 0;
}

//----- (0048F900) --------------------------------------------------------
int CChantDefFire::CChantDefFire()
{
  return 19;
}

//----- (0048F910) --------------------------------------------------------
_DWORD *__thiscall sub_48F910(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4BFD18;
  return this;
}
// 4BFD18: using guessed type int (__stdcall *off_4BFD18)(int, int);

//----- (0048F930) --------------------------------------------------------
int sub_48F930()
{
  return 20;
}

//----- (0048F940) --------------------------------------------------------
CChantBattle *__thiscall CChantBattle::CChantBattle(CChantBattle *this)
{
  sub_48F890(this);
  *(_DWORD *)this = &off_4BFD88;
  return this;
}
// 4BFD88: using guessed type int (__stdcall *off_4BFD88)(int, int);

//----- (0048F960) --------------------------------------------------------
int CTLitningBlast::CTLitningBlast()
{
  return 21;
}

//----- (0048F970) --------------------------------------------------------
_DWORD *__thiscall sub_48F970(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4BFDF8;
  return this;
}
// 4BFDF8: using guessed type int (__stdcall *off_4BFDF8)(int, int);

//----- (0048F990) --------------------------------------------------------
_DWORD *__thiscall sub_48F990(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BFA18;
  return this;
}
// 4BFA18: using guessed type int (__stdcall *off_4BFA18)(int, int);

//----- (0048F9B0) --------------------------------------------------------
_DWORD *__thiscall sub_48F9B0(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4BFE68;
  return this;
}
// 4BFE68: using guessed type int (__stdcall *off_4BFE68)(int, int);

//----- (0048F9D0) --------------------------------------------------------
_DWORD *__thiscall sub_48F9D0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4BFEB8;
  return this;
}
// 4BFEB8: using guessed type int (__stdcall *off_4BFEB8)(int, int);

//----- (0048F9F0) --------------------------------------------------------
int sub_48F9F0()
{
  return 23;
}

//----- (0048FA00) --------------------------------------------------------
CTFury *__thiscall CTFury::CTFury(CTFury *this)
{
  sub_48E6A0(this);
  *(_DWORD *)this = &off_4BFF28;
  return this;
}
// 4BFF28: using guessed type int (__stdcall *off_4BFF28)(int, int);

//----- (0048FA20) --------------------------------------------------------
int CTGroundSplinter::CTGroundSplinter()
{
  return 24;
}

//----- (0048FA30) --------------------------------------------------------
CBerserk *__thiscall sub_48FA30(CBerserk *this)
{
  CBerserk::CBerserk(this);
  *(_DWORD *)this = &off_4BFF98;
  return this;
}
// 4BFF98: using guessed type int (__stdcall *off_4BFF98)(int, int);

//----- (0048FA50) --------------------------------------------------------
int sub_48FA50()
{
  return 6;
}

//----- (0048FA60) --------------------------------------------------------
int CTDiamondClow::CTDiamondClow()
{
  return 25;
}

//----- (0048FA70) --------------------------------------------------------
_DWORD *__thiscall sub_48FA70(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4C0008;
  return this;
}
// 4C0008: using guessed type int (__stdcall *off_4C0008)(int, int);

//----- (0048FA90) --------------------------------------------------------
_DWORD *__thiscall sub_48FA90(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4C0068;
  return this;
}
// 4C0068: using guessed type int (__stdcall *off_4C0068)(int, int);

//----- (0048FAB0) --------------------------------------------------------
CDoFury *__thiscall CDoFury::CDoFury(CDoFury *this)
{
  sub_48E580(this);
  *(_DWORD *)this = &off_4C00D8;
  return this;
}
// 4C00D8: using guessed type int (__stdcall *off_4C00D8)(int, int);

//----- (0048FAD0) --------------------------------------------------------
int CDoGroundFeal::GetAddValueType()
{
  return 10;
}

//----- (0048FAF0) --------------------------------------------------------
_DWORD *__thiscall sub_48FAF0(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4C0148;
  return this;
}
// 4C0148: using guessed type int (__stdcall *off_4C0148)(int, int);

//----- (0048FB10) --------------------------------------------------------
_DWORD *__thiscall sub_48FB10(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4C01B8;
  return this;
}
// 4C01B8: using guessed type int (__stdcall *off_4C01B8)(int, int);

//----- (0048FB30) --------------------------------------------------------
_DWORD *__thiscall sub_48FB30(_DWORD *this)
{
  sub_480D40(this);
  *this = &off_4C0218;
  return this;
}
// 4C0218: using guessed type int (__stdcall *off_4C0218)(int, int);

//----- (0048FB50) --------------------------------------------------------
_DWORD *__thiscall sub_48FB50(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4C0268;
  return this;
}
// 4C0268: using guessed type int (__stdcall *off_4C0268)(int, int);

//----- (0048FB70) --------------------------------------------------------
_DWORD *__thiscall sub_48FB70(_DWORD *this)
{
  sub_48FB50(this);
  *this = &off_4C02C8;
  return this;
}
// 4C02C8: using guessed type int (__stdcall *off_4C02C8)(int, int);

//----- (0048FB90) --------------------------------------------------------
_DWORD *__thiscall sub_48FB90(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4C0328;
  return this;
}
// 4C0328: using guessed type int (__stdcall *off_4C0328)(int, int);

//----- (0048FBB0) --------------------------------------------------------
_DWORD *__thiscall sub_48FBB0(_DWORD *this)
{
  sub_48FB50(this);
  *this = &off_4C0388;
  return this;
}
// 4C0388: using guessed type int (__stdcall *off_4C0388)(int, int);

//----- (0048FBD0) --------------------------------------------------------
_DWORD *__thiscall sub_48FBD0(_DWORD *this)
{
  sub_48E580(this);
  *this = &off_4C03E8;
  return this;
}
// 4C03E8: using guessed type int (__stdcall *off_4C03E8)(int, int);

//----- (0048FBF0) --------------------------------------------------------
_DWORD *__thiscall sub_48FBF0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4C0458;
  return this;
}
// 4C0458: using guessed type int (__stdcall *off_4C0458)(int, int);

//----- (0048FC20) --------------------------------------------------------
_DWORD *__thiscall CDoOverrun::GetAddValueType(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4C04C8;
  return this;
}
// 4C04C8: using guessed type int (__stdcall *off_4C04C8)(int, int);

//----- (0048FC40) --------------------------------------------------------
int sub_48FC40()
{
  return 3;
}

//----- (0048FC50) --------------------------------------------------------
int CSkill_MonsterMagic::CSkill_MonsterMagic()
{
  return 26;
}

//----- (0048FC60) --------------------------------------------------------
_DWORD *__thiscall sub_48FC60(_DWORD *this)
{
  CNegative::GetHostility(this);
  *this = &off_4C0538;
  return this;
}
// 4C0538: using guessed type int (__stdcall *off_4C0538)(int, int);

//----- (0048FC90) --------------------------------------------------------
_DWORD *__thiscall sub_48FC90(_DWORD *this)
{
  sub_48E6E0(this);
  *this = &off_4C0598;
  return this;
}
// 4C0598: using guessed type int (__stdcall *off_4C0598)(int, int);

//----- (0048FCB0) --------------------------------------------------------
_DWORD *__thiscall sub_48FCB0(_DWORD *this)
{
  sub_48E6A0(this);
  *this = &off_4C0608;
  return this;
}
// 4C0608: using guessed type int (__stdcall *off_4C0608)(int, int);

//----- (0048FCD0) --------------------------------------------------------
int CMIceStorm::CMIceStorm()
{
  return 28;
}

//----- (0048FCE0) --------------------------------------------------------
_DWORD *__thiscall sub_48FCE0(_DWORD *this)
{
  sub_48F890(this);
  *this = &off_4C0678;
  this[19] = 0;
  return this;
}
// 4C0678: using guessed type int (__stdcall *off_4C0678)(int, int);

//----- (0048FD10) --------------------------------------------------------
int sub_48FD10()
{
  return 29;
}

//----- (0048FD20) --------------------------------------------------------
_DWORD *__thiscall sub_48FD20(_DWORD *this, int a2, int a3)
{
  *this = a2;
  this[1] = a3;
  this[2] = 0;
  this[3] = 0;
  return this;
}

//----- (0048FD60) --------------------------------------------------------
void *__usercall sub_48FD60@<eax>(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  void *result; // eax

  result = (void *)this;
  if ( *(_DWORD *)(this + 8) )
  {
    result = *(void **)(this + 8);
    if ( result )
      result = sub_48FDE0(*(int **)(this + 8), 3);
  }
  if ( *(_DWORD *)(this + 12) )
  {
    result = *(void **)(this + 12);
    if ( result )
      result = CCompleteFire::CCompleteFire(*(CCompleteFire **)(this + 12), a2, a3, a4, 3u);
  }
  return result;
}

//----- (0048FDE0) --------------------------------------------------------
int *__thiscall sub_48FDE0(int *this, char a2)
{
  int *result; // eax

  if ( (a2 & 2) != 0 )
  {
    sub_4370E0((int)this, 8, *(this - 1), (int (__thiscall *)(int))sub_4964E0);
    if ( (a2 & 1) != 0 )
      j_operator_delete(this - 1);
    result = this - 1;
  }
  else
  {
    sub_4964E0(this);
    if ( (a2 & 1) != 0 )
      operator_delete(this);
    result = this;
  }
  return result;
}
// 4A16B4: using guessed type _DWORD __cdecl j_operator_delete(void *pBlock);

//----- (0048FE50) --------------------------------------------------------
CCompleteFire *__userpurge CCompleteFire::CCompleteFire@<eax>(CCompleteFire *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned int a5)
{
  CCompleteFire *result; // eax

  if ( (a5 & 2) != 0 )
  {
    sub_4370E0((int)this, 24, *((_DWORD *)this - 1), (int (__thiscall *)(int))CRWLock::~CRWLock);
    if ( (a5 & 1) != 0 )
      j_operator_delete((char *)this - 4);
    result = (CCompleteFire *)((char *)this - 4);
  }
  else
  {
    CRWLock::~CRWLock(this, a2, a3, a4);
    if ( (a5 & 1) != 0 )
      operator_delete(this);
    result = this;
  }
  return result;
}
// 4A16B4: using guessed type _DWORD __cdecl j_operator_delete(void *pBlock);

//----- (0048FEC0) --------------------------------------------------------
int __thiscall CCellMap::AllocTile(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // [esp+0h] [ebp-14h]
  _DWORD *v3; // [esp+4h] [ebp-10h]
  _DWORD *v5; // [esp+Ch] [ebp-8h]
  _DWORD *v6; // [esp+10h] [ebp-4h]

  if ( this[2] || this[3] )
  {
    LOG_ERR("CCellMap::AllocTile() Can't allocate Tile. CellMap(%d,%d)", *this, this[1]);
    result = 0;
  }
  else
  {
    v6 = (_DWORD *)j_operator_new(0x80004u);
    if ( v6 )
    {
      *v6 = 0x10000;
      `vector constructor iterator'(v6 + 1, 8u, 0x10000, unknown_libname_31);
      v3 = v6 + 1;
    }
    else
    {
      v3 = 0;
    }
    this[2] = v3;
    v5 = (_DWORD *)j_operator_new(0x1804u);
    if ( v5 )
    {
      *v5 = 256;
      `vector constructor iterator'(v5 + 1, 0x18u, 256, (void *(__thiscall *)(void *))CRWLock::CRWLock);
      v2 = v5 + 1;
    }
    else
    {
      v2 = 0;
    }
    this[3] = v2;
    result = 1;
  }
  return result;
}

//----- (0048FFB0) --------------------------------------------------------
CMFireFlowerExplosion *__thiscall CMFireFlowerExplosion::CMFireFlowerExplosion(CMFireFlowerExplosion *this, FILE *Stream)
{
  int j; // [esp+4h] [ebp-10h]
  int i; // [esp+8h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-8h]
  int Buffer; // [esp+10h] [ebp-4h] BYREF

  if ( !sub_4A17A2(&Buffer, 4u, 1u, Stream) )
    return 0;
  if ( Buffer == 1 )
  {
    v6 = *((_DWORD *)this + 2);
    for ( i = 0; i < 256; ++i )
    {
      for ( j = 0; j < 256; ++j )
      {
        if ( !sub_4A17A2((void *)(v6 + 4), 4u, 1u, Stream) )
        {
          LOG_ERR("CCellMap::ReadTileAttr() Invalid Tile Attr. (Tile:%d,%d)", j, i);
          return 0;
        }
        v6 += 8;
      }
    }
  }
  return (CMFireFlowerExplosion *)1;
}

//----- (00490070) --------------------------------------------------------
int __thiscall sub_490070(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int j; // [esp+4h] [ebp-20h]
  int i; // [esp+8h] [ebp-1Ch]
  CRWLock *v6; // [esp+Ch] [ebp-18h]
  int v7[2]; // [esp+10h] [ebp-14h] BYREF
  int v8; // [esp+18h] [ebp-Ch]
  int v9; // [esp+1Ch] [ebp-8h]
  int v10; // [esp+20h] [ebp-4h]

  if ( this )
  {
    CCellMap::_CCellMap(this, a2, v7);
    v6 = (CRWLock *)(this[3] + 24 * (v7[0] + 16 * v9));
    v10 = 16 - (v8 - v7[0]);
    result = v9;
    for ( i = v9; i < v7[1]; ++i )
    {
      result = v7[0];
      for ( j = v7[0]; j < v8; ++j )
      {
        CRWLock::ReadLock(v6);
        result = (int)v6 + 24;
        v6 = (CRWLock *)((char *)v6 + 24);
      }
      v6 = (CRWLock *)((char *)v6 + 24 * v10);
    }
  }
  return result;
}

//----- (00490120) --------------------------------------------------------
int __thiscall CCellMap::_CCellMap(_DWORD *this, _DWORD *a2, int *a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-30h]
  int v5; // [esp+4h] [ebp-2Ch]
  int v6; // [esp+8h] [ebp-28h]
  int v7; // [esp+Ch] [ebp-24h]
  int v8; // [esp+14h] [ebp-1Ch]
  int v9; // [esp+18h] [ebp-18h]
  int v10; // [esp+1Ch] [ebp-14h]
  int v11; // [esp+28h] [ebp-8h]
  int v12; // [esp+2Ch] [ebp-4h]

  v11 = a2[3];
  v10 = a2[2];
  v8 = a2[1];
  v12 = *this << 8;
  v9 = this[1] << 8;
  if ( *a2 <= v12 )
    v7 = 0;
  else
    v7 = (int)(unsigned __int8)*a2 >> 4;
  *a3 = v7;
  if ( v11 <= v9 )
    v6 = 0;
  else
    v6 = (int)(unsigned __int8)v11 >> 4;
  a3[3] = v6;
  if ( v10 >= v12 + 256 )
    v5 = 16;
  else
    v5 = (((unsigned __int8)v10 - 1) >> 4) + 1;
  a3[2] = v5;
  if ( v8 >= v9 + 256 )
    v4 = 16;
  else
    v4 = (((unsigned __int8)v8 - 1) >> 4) + 1;
  result = v4;
  a3[1] = v4;
  return result;
}

//----- (00490220) --------------------------------------------------------
int __userpurge sub_490220@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5)
{
  int result; // eax
  int j; // [esp+4h] [ebp-20h]
  int i; // [esp+8h] [ebp-1Ch]
  CRWLock *v9; // [esp+Ch] [ebp-18h]
  int v10[2]; // [esp+10h] [ebp-14h] BYREF
  int v11; // [esp+18h] [ebp-Ch]
  int v12; // [esp+1Ch] [ebp-8h]
  int v13; // [esp+20h] [ebp-4h]

  if ( a1 )
  {
    CCellMap::_CCellMap(a1, a5, v10);
    v9 = (CRWLock *)(a1[3] + 24 * (v10[0] + 16 * v12));
    v13 = 16 - (v11 - v10[0]);
    result = v12;
    for ( i = v12; i < v10[1]; ++i )
    {
      result = v10[0];
      for ( j = v10[0]; j < v11; ++j )
      {
        CRWLock::ReadUnlock(v9, a2, a3, a4);
        result = (int)v9 + 24;
        v9 = (CRWLock *)((char *)v9 + 24);
      }
      v9 = (CRWLock *)((char *)v9 + 24 * v13);
    }
  }
  return result;
}

//----- (004902D0) --------------------------------------------------------
CRWLock *__thiscall sub_4902D0(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  CRWLock *result; // eax
  int l; // [esp+4h] [ebp-38h]
  int k; // [esp+8h] [ebp-34h]
  int j; // [esp+Ch] [ebp-30h]
  int i; // [esp+10h] [ebp-2Ch]
  CRWLock *v9; // [esp+14h] [ebp-28h]
  int v10[4]; // [esp+18h] [ebp-24h] BYREF
  int v11; // [esp+28h] [ebp-14h]
  int v12[2]; // [esp+2Ch] [ebp-10h] BYREF
  int v13; // [esp+34h] [ebp-8h]
  int v14; // [esp+38h] [ebp-4h]

  if ( this )
  {
    sub_490470(this, a2, v12);
    sub_490470(this, a3, v10);
    v9 = (CRWLock *)(this[3] + 24 * (v12[0] + 16 * v14));
    v11 = 16 - (v13 - v12[0]);
    for ( i = v14; i < v10[3]; ++i )
    {
      for ( j = v12[0]; j < v13; ++j )
      {
        CRWLock::ReadLock(v9);
        v9 = (CRWLock *)((char *)v9 + 24);
      }
      v9 = (CRWLock *)((char *)v9 + 24 * v11);
    }
    while ( 1 )
    {
      result = (CRWLock *)i;
      if ( i >= v10[1] )
        break;
      for ( k = v12[0]; k < v10[0]; ++k )
      {
        CRWLock::ReadLock(v9);
        v9 = (CRWLock *)((char *)v9 + 24);
      }
      while ( k < v10[2] )
      {
        CRWLock::WriteLock(v9);
        ++k;
        v9 = (CRWLock *)((char *)v9 + 24);
      }
      while ( k < v13 )
      {
        CRWLock::ReadLock(v9);
        ++k;
        v9 = (CRWLock *)((char *)v9 + 24);
      }
      ++i;
      v9 = (CRWLock *)((char *)v9 + 24 * v11);
    }
    while ( i < v12[1] )
    {
      for ( l = v12[0]; l < v13; ++l )
      {
        CRWLock::ReadLock(v9);
        v9 = (CRWLock *)((char *)v9 + 24);
      }
      ++i;
      result = (CRWLock *)((char *)v9 + 24 * v11);
      v9 = result;
    }
  }
  return result;
}

//----- (00490470) --------------------------------------------------------
int __thiscall sub_490470(_DWORD *this, _DWORD *a2, int *a3)
{
  int result; // eax
  int v4; // [esp+0h] [ebp-40h]
  int v5; // [esp+4h] [ebp-3Ch]
  int v6; // [esp+8h] [ebp-38h]
  int v7; // [esp+Ch] [ebp-34h]
  int v8; // [esp+10h] [ebp-30h]
  int v9; // [esp+14h] [ebp-2Ch]
  int v10; // [esp+18h] [ebp-28h]
  int v11; // [esp+1Ch] [ebp-24h]
  int v12; // [esp+24h] [ebp-1Ch]
  int v13; // [esp+28h] [ebp-18h]
  int v14; // [esp+2Ch] [ebp-14h]
  int v15; // [esp+38h] [ebp-8h]
  int v16; // [esp+3Ch] [ebp-4h]

  v15 = a2[3];
  v14 = a2[2];
  v12 = a2[1];
  v16 = *this << 8;
  v13 = this[1] << 8;
  if ( *a2 < v16 + 256 )
  {
    if ( *a2 <= v16 )
      v10 = 0;
    else
      v10 = (int)(unsigned __int8)*a2 >> 4;
    v11 = v10;
  }
  else
  {
    v11 = 16;
  }
  *a3 = v11;
  if ( v15 < v13 + 256 )
  {
    if ( v15 <= v13 )
      v8 = 0;
    else
      v8 = (int)(unsigned __int8)v15 >> 4;
    v9 = v8;
  }
  else
  {
    v9 = 16;
  }
  a3[3] = v9;
  if ( v14 > v16 )
  {
    if ( v14 >= v16 + 256 )
      v6 = 16;
    else
      v6 = (((unsigned __int8)v14 - 1) >> 4) + 1;
    v7 = v6;
  }
  else
  {
    v7 = 0;
  }
  a3[2] = v7;
  result = v12;
  if ( v12 > v13 )
  {
    if ( v12 >= v13 + 256 )
      v4 = 16;
    else
      v4 = (((unsigned __int8)v12 - 1) >> 4) + 1;
    result = v4;
    v5 = v4;
  }
  else
  {
    v5 = 0;
  }
  a3[1] = v5;
  return result;
}

//----- (004905E0) --------------------------------------------------------
CRWLock *__userpurge CCellMap::ReadUnlock@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  CRWLock *result; // eax
  int l; // [esp+4h] [ebp-38h]
  int k; // [esp+8h] [ebp-34h]
  int j; // [esp+Ch] [ebp-30h]
  CRWLock *i; // [esp+10h] [ebp-2Ch]
  CRWLock *v12; // [esp+14h] [ebp-28h]
  int v13[4]; // [esp+18h] [ebp-24h] BYREF
  int v14; // [esp+28h] [ebp-14h]
  int v15[2]; // [esp+2Ch] [ebp-10h] BYREF
  int v16; // [esp+34h] [ebp-8h]
  CRWLock *v17; // [esp+38h] [ebp-4h]

  if ( this )
  {
    sub_490470(this, (_DWORD *)a2, v15);
    sub_490470(this, (_DWORD *)a3, v13);
    v12 = (CRWLock *)(this[3] + 24 * (v15[0] + 16 * (_DWORD)v17));
    v14 = 16 - (v16 - v15[0]);
    for ( i = v17; (int)i < v13[3]; i = (CRWLock *)((char *)i + 1) )
    {
      for ( j = v15[0]; j < v16; ++j )
      {
        CRWLock::ReadUnlock(v12, ebx0, edi0, a4);
        v12 = (CRWLock *)((char *)v12 + 24);
      }
      v12 = (CRWLock *)((char *)v12 + 24 * v14);
    }
    while ( 1 )
    {
      result = i;
      if ( (int)i >= v13[1] )
        break;
      for ( k = v15[0]; k < v13[0]; ++k )
      {
        CRWLock::ReadUnlock(v12, ebx0, edi0, a4);
        v12 = (CRWLock *)((char *)v12 + 24);
      }
      while ( k < v13[2] )
      {
        CRWLock::WriteUnlock(v12, ebx0, edi0, a4);
        ++k;
        v12 = (CRWLock *)((char *)v12 + 24);
      }
      while ( k < v16 )
      {
        CRWLock::ReadUnlock(v12, ebx0, edi0, a4);
        ++k;
        v12 = (CRWLock *)((char *)v12 + 24);
      }
      i = (CRWLock *)((char *)i + 1);
      v12 = (CRWLock *)((char *)v12 + 24 * v14);
    }
    while ( (int)i < v15[1] )
    {
      for ( l = v15[0]; l < v16; ++l )
      {
        CRWLock::ReadUnlock(v12, ebx0, edi0, a4);
        v12 = (CRWLock *)((char *)v12 + 24);
      }
      i = (CRWLock *)((char *)i + 1);
      result = (CRWLock *)((char *)v12 + 24 * v14);
      v12 = result;
    }
  }
  return result;
}

//----- (00490780) --------------------------------------------------------
void __userpurge CSellMap::SendDelete(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, _DWORD *a3, int a4)
{
  int v7[2]; // [esp+4h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v8; // [esp+Ch] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+10h] [ebp-4h]

  if ( this )
  {
    v7[0] = (unsigned __int8)*a3;
    v7[1] = (unsigned __int8)a3[1];
    v8 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v7);
    for ( i = *v8; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
    {
      if ( *((_DWORD *)i + 4) == -6 )
      {
        *v8 = 0;
        ELOG("CSellMap::SendDelete %p %p\n", (char)i);
        EBREAK(ebx0, edi0, esi0);
        return;
      }
      (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, int, int))(*(_DWORD *)i + 44))(
        i,
        a2,
        a4);
    }
  }
}

//----- (00490830) --------------------------------------------------------
void __userpurge CCellMap::GetRWLockRect(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, _DWORD *a3, int a4)
{
  int v7[2]; // [esp+4h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v8; // [esp+Ch] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+10h] [ebp-4h]

  if ( this )
  {
    v7[0] = (unsigned __int8)*a3;
    v7[1] = (unsigned __int8)a3[1];
    v8 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v7);
    for ( i = *v8; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
    {
      if ( *((_DWORD *)i + 4) == -6 )
      {
        *v8 = 0;
        ELOG("CSellMap::SendMove %p %p\n", (char)i);
        EBREAK(ebx0, edi0, esi0);
        return;
      }
      (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, int, int))(*(_DWORD *)i + 48))(
        i,
        a2,
        a4);
    }
  }
}

//----- (004908E0) --------------------------------------------------------
void __userpurge CSellMap::SendCreate(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, _DWORD *a3, int a4)
{
  int v7[2]; // [esp+4h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v8; // [esp+Ch] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+10h] [ebp-4h]

  if ( this )
  {
    v7[0] = (unsigned __int8)*a3;
    v7[1] = (unsigned __int8)a3[1];
    v8 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v7);
    for ( i = *v8; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
    {
      if ( *((_DWORD *)i + 4) == -6 )
      {
        *v8 = 0;
        ELOG("CSellMap::SendCreate %p %p\n", (char)i);
        EBREAK(ebx0, edi0, esi0);
        return;
      }
      (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, int, int))(*(_DWORD *)i + 52))(
        i,
        a2,
        a4);
    }
  }
}

//----- (00490990) --------------------------------------------------------
void __userpurge CSellMap::SendPacket(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, int a3)
{
  int v6[2]; // [esp+4h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v7; // [esp+Ch] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+10h] [ebp-4h]

  if ( this )
  {
    v6[0] = (unsigned __int8)*a2;
    v6[1] = (unsigned __int8)a2[1];
    v7 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v6);
    for ( i = *v7; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
    {
      if ( *((_DWORD *)i + 4) == -6 )
      {
        *v7 = 0;
        ELOG("CSellMap::SendPacket %p %p\n", (char)i);
        EBREAK(ebx0, edi0, a4);
        return;
      }
      (*(void (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, int))(*(_DWORD *)i + 40))(i, a3);
    }
  }
}

//----- (00490A40) --------------------------------------------------------
void __userpurge CSellMap::GetPlayerList(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, void **a3)
{
  int v6[2]; // [esp+4h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v7; // [esp+Ch] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+10h] [ebp-4h]

  if ( this )
  {
    v6[0] = (unsigned __int8)*a2;
    v6[1] = (unsigned __int8)a2[1];
    v7 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v6);
    for ( i = *v7; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
    {
      if ( *((_DWORD *)i + 4) == -6 )
      {
        *v7 = 0;
        ELOG("CSellMap::GetPlayerList %p %p\n", (char)i);
        EBREAK(ebx0, edi0, a4);
        return;
      }
      if ( (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)i + 60))(i) )
        *a3 = CBaseList::Push(*a3, ebx0, edi0, a4, (int)i);
    }
  }
}

//----- (00490B00) --------------------------------------------------------
void __userpurge CSellMap::GetPlayerMonsterList(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, void **a3)
{
  int v6[2]; // [esp+4h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v7; // [esp+Ch] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+10h] [ebp-4h]

  if ( this )
  {
    v6[0] = (unsigned __int8)*a2;
    v6[1] = (unsigned __int8)a2[1];
    v7 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v6);
    for ( i = *v7; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
    {
      if ( *((_DWORD *)i + 4) == -6 )
      {
        *v7 = 0;
        ELOG("CSellMap::GetPlayerMonsterList %p %p\n", (char)i);
        EBREAK(ebx0, edi0, a4);
        return;
      }
      if ( (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)i + 60))(i)
        || (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)i + 64))(i) )
      {
        *a3 = CBaseList::Push(*a3, ebx0, edi0, a4, (int)i);
      }
    }
  }
}

//----- (00490BD0) --------------------------------------------------------
int __userpurge CSellMap::GetClosestPlayer@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, _DWORD *a2, Concurrency::details::_CancellationTokenRegistration **a3)
{
  Concurrency::details::_CancellationTokenRegistration *v7; // [esp+4h] [ebp-14h]
  int v8[2]; // [esp+8h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v9; // [esp+10h] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+14h] [ebp-4h]

  if ( !this )
    return 0;
  v8[0] = (unsigned __int8)*a2;
  v8[1] = (unsigned __int8)a2[1];
  v9 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v8);
  for ( i = *v9; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
  {
    if ( *((_DWORD *)i + 4) == -6 )
    {
      *v9 = 0;
      ELOG("CSellMap::GetClosestPlayer %p %p\n", (char)i);
      EBREAK(ebx0, edi0, a4);
      return 0;
    }
    if ( (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)i + 60))(i) )
    {
      v7 = i;
      if ( CChar::IsNormal((int)i) )
      {
        if ( !CChar::IsGState(v7, 0x2000) && *((_DWORD *)v7 + 114) != 4 )
        {
          CIOObject::AddRef(v7, ebx0, edi0, a4, (volatile int *)v7 + 89);
          *a3 = v7;
          return 1;
        }
      }
    }
  }
  return 0;
}

//----- (00490CD0) --------------------------------------------------------
int __userpurge CSellMap::GetMonster@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, _DWORD *a2, int a3, Concurrency::details::_CancellationTokenRegistration **a4)
{
  Concurrency::details::_CancellationTokenRegistration *v8; // [esp+4h] [ebp-14h]
  int v9[2]; // [esp+8h] [ebp-10h] BYREF
  Concurrency::details::_CancellationTokenRegistration **v10; // [esp+10h] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *i; // [esp+14h] [ebp-4h]

  if ( !this )
    return 0;
  v9[0] = (unsigned __int8)*a2;
  v9[1] = (unsigned __int8)a2[1];
  v10 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(this, v9);
  for ( i = *v10; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
  {
    if ( *((_DWORD *)i + 4) == -6 )
    {
      *v10 = 0;
      ELOG("CSellMap::GetMonster %p %p\n", (char)i);
      EBREAK(ebx0, edi0, esi0);
      return 0;
    }
    if ( (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)i + 64))(i) )
    {
      v8 = i;
      if ( CChar::IsNormal((int)i) )
      {
        if ( a3 == *(_DWORD *)(*((_DWORD *)v8 + 110) + 60) )
        {
          CIOObject::AddRef(v8, ebx0, edi0, esi0, (volatile int *)v8 + 88);
          *a4 = v8;
          return 1;
        }
      }
    }
  }
  return 0;
}

//----- (00490DC0) --------------------------------------------------------
_DWORD *__thiscall sub_490DC0(_DWORD *this)
{
  *this = 0;
  this[1] = 0;
  memset(this + 2, 0, 0x4000u);
  return this;
}

//----- (00490E00) --------------------------------------------------------
void __usercall CCellMap::GetPlayerList(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int i; // [esp+10h] [ebp-8h]

  for ( i = 0; i < 4096; ++i )
  {
    if ( this[i + 2] )
      sub_490E70((void *)this[i + 2], a2, a3, a4, 1);
  }
}

//----- (00490E70) --------------------------------------------------------
void *__userpurge sub_490E70@<eax>(void *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5)
{
  sub_48FD60((int)a1, a2, a3, a4);
  if ( (a5 & 1) != 0 )
    operator_delete(a1);
  return a1;
}

//----- (00490EA0) --------------------------------------------------------
int __usercall CSMap::LoadMap@<eax>(DWORD ebx0@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, int a1)
{
  int result; // eax
  CMFireFlowerExplosion *v5; // [esp+4h] [ebp-24h]
  _DWORD *v6; // [esp+8h] [ebp-20h]
  CMemory **v7; // [esp+14h] [ebp-14h]
  CMemory **v8; // [esp+18h] [ebp-10h]
  _DWORD *v9; // [esp+1Ch] [ebp-Ch]
  FILE *Stream; // [esp+20h] [ebp-8h]

  Stream = fopen((const char *)(a1 + 48), "rb");
  if ( Stream )
  {
    v9 = (_DWORD *)sub_491080(*(_DWORD *)(a1 + 32));
    if ( !v9 )
    {
      v8 = operator_new(0x4008u);
      if ( v8 )
        v6 = sub_490DC0(v8);
      else
        v6 = 0;
      dword_4E2738 = (int)v6;
      v9 = v6;
    }
    v7 = operator_new(0x10u);
    if ( v7 )
      v5 = (CMFireFlowerExplosion *)sub_48FD20(v7, *(_DWORD *)(a1 + 40), *(_DWORD *)(a1 + 44));
    else
      v5 = 0;
    v9[64 * *(_DWORD *)(a1 + 44) + 2 + *(_DWORD *)(a1 + 40)] = v5;
    if ( CCellMap::AllocTile(v5) && CMFireFlowerExplosion::CMFireFlowerExplosion(v5, Stream) )
    {
      fclose(Stream);
      result = 1;
    }
    else
    {
      LOG_ERR("Map loading is failed. (%s)", (const char *)(a1 + 48));
      fclose(Stream);
      if ( v9 )
        sub_491010(v9, ebx0, a2, a3, 1);
      result = 0;
    }
  }
  else
  {
    LOG_ERR("CSMap::LoadMap() Can't read map(%s).", (const char *)(a1 + 48));
    result = 0;
  }
  return result;
}
// 4E2738: using guessed type int dword_4E2738;

//----- (00491010) --------------------------------------------------------
_DWORD *__userpurge sub_491010@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CCellMap::GetPlayerList(this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (00491040) --------------------------------------------------------
void __usercall sub_491040(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  if ( dword_4E2738 )
    sub_491010((_DWORD *)dword_4E2738, a1, a2, a3, 1);
}
// 4E2738: using guessed type int dword_4E2738;

//----- (00491080) --------------------------------------------------------
int __cdecl sub_491080(int a1)
{
  int result; // eax

  if ( a1 < 32 )
    result = dword_4E2738;
  else
    result = 0;
  return result;
}
// 4E2738: using guessed type int dword_4E2738;

//----- (004910A0) --------------------------------------------------------
int __thiscall sub_4910A0(char *this, _DWORD *a2, int *a3)
{
  int result; // eax
  _DWORD *v4; // [esp+0h] [ebp-18h]
  int j; // [esp+8h] [ebp-10h]
  int i; // [esp+Ch] [ebp-Ch]
  char *v7; // [esp+10h] [ebp-8h]
  int v8; // [esp+14h] [ebp-4h]

  v7 = &this[256 * a3[3] + 8 + 4 * *a3];
  result = 64 - (a3[2] - *a3);
  v8 = result;
  for ( i = a3[3]; i < a3[1]; ++i )
  {
    for ( j = *a3; j < a3[2]; ++j )
    {
      v4 = *(_DWORD **)v7;
      v7 += 4;
      sub_490070(v4, a2);
    }
    v7 += 4 * v8;
    result = i + 1;
  }
  return result;
}

//----- (00491150) --------------------------------------------------------
int __userpurge sub_491150@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int *a6)
{
  int result; // eax
  _DWORD *v7; // [esp+0h] [ebp-18h]
  int j; // [esp+8h] [ebp-10h]
  int i; // [esp+Ch] [ebp-Ch]
  _DWORD **v10; // [esp+10h] [ebp-8h]
  int v11; // [esp+14h] [ebp-4h]

  v10 = (_DWORD **)(a1 + 4 * ((a6[3] << 6) + *a6) + 8);
  result = 64 - (a6[2] - *a6);
  v11 = result;
  for ( i = a6[3]; i < a6[1]; ++i )
  {
    for ( j = *a6; j < a6[2]; ++j )
    {
      v7 = *v10++;
      sub_490220(v7, a2, a3, a4, a5);
    }
    v10 += v11;
    result = i + 1;
  }
  return result;
}

//----- (00491200) --------------------------------------------------------
int __thiscall sub_491200(char *this, _DWORD *a2, _DWORD *a3, int *a4)
{
  int result; // eax
  _DWORD *v5; // [esp+0h] [ebp-18h]
  int j; // [esp+8h] [ebp-10h]
  int i; // [esp+Ch] [ebp-Ch]
  char *v8; // [esp+10h] [ebp-8h]
  int v9; // [esp+14h] [ebp-4h]

  v8 = &this[256 * a4[3] + 8 + 4 * *a4];
  result = 64 - (a4[2] - *a4);
  v9 = result;
  for ( i = a4[3]; i < a4[1]; ++i )
  {
    for ( j = *a4; j < a4[2]; ++j )
    {
      v5 = *(_DWORD **)v8;
      v8 += 4;
      sub_4902D0(v5, a2, a3);
    }
    v8 += 4 * v9;
    result = i + 1;
  }
  return result;
}

//----- (004912B0) --------------------------------------------------------
int __userpurge sub_4912B0@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int *a7)
{
  int result; // eax
  _DWORD *v8; // [esp+0h] [ebp-18h]
  int j; // [esp+8h] [ebp-10h]
  int i; // [esp+Ch] [ebp-Ch]
  _DWORD **v11; // [esp+10h] [ebp-8h]
  int v12; // [esp+14h] [ebp-4h]

  v11 = (_DWORD **)(a1 + 4 * ((a7[3] << 6) + *a7) + 8);
  result = 64 - (a7[2] - *a7);
  v12 = result;
  for ( i = a7[3]; i < a7[1]; ++i )
  {
    for ( j = *a7; j < a7[2]; ++j )
    {
      v8 = *v11++;
      CCellMap::ReadUnlock(v8, a2, a3, a4, a5, a6);
    }
    v11 += v12;
    result = i + 1;
  }
  return result;
}

//----- (00491360) --------------------------------------------------------
int __userpurge sub_491360@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, _DWORD *a3)
{
  int *v7; // eax
  CRWLock *v8; // [esp+4h] [ebp-10h]
  int v9[2]; // [esp+8h] [ebp-Ch] BYREF
  _DWORD *v10; // [esp+10h] [ebp-4h]

  v10 = (_DWORD *)CSMap::_GetCellMap(this, a3);
  if ( !v10 )
    return 0;
  v9[0] = (unsigned __int8)*a3;
  v9[1] = (unsigned __int8)a3[1];
  v8 = (CRWLock *)CCellMap::GetLock(v10, v9);
  CRWLock::WriteLock(v8);
  v7 = (int *)CCellMap::GetTile(v10, v9);
  sub_496520(v7, ebx0, edi0, a4, a2);
  CRWLock::WriteUnlock(v8, ebx0, edi0, a4);
  return 1;
}

//----- (004913E0) --------------------------------------------------------
int __userpurge sub_4913E0@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, Concurrency::details::_CancellationTokenRegistration *a2, int a3)
{
  Concurrency::details::_CancellationTokenRegistration **v7; // eax
  CRWLock *v8; // [esp+4h] [ebp-10h]
  int v9[2]; // [esp+8h] [ebp-Ch] BYREF
  _DWORD *v10; // [esp+10h] [ebp-4h]

  v10 = (_DWORD *)CSMap::_GetCellMap(this, (_DWORD *)a3);
  if ( !v10 )
    return 0;
  v9[0] = (unsigned __int8)*(_DWORD *)a3;
  v9[1] = (unsigned __int8)*(_DWORD *)(a3 + 4);
  v8 = (CRWLock *)CCellMap::GetLock(v10, v9);
  CRWLock::WriteLock(v8);
  v7 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(v10, v9);
  sub_496550(v7, a2);
  CRWLock::WriteUnlock(v8, ebx0, edi0, a4);
  return 1;
}

//----- (00491460) --------------------------------------------------------
int __userpurge CSMap::ReadLock@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD esi0@<esi>, Concurrency::details::_CancellationTokenRegistration *a2, int Number, int a4, int a5, int a6, int a7)
{
  int v10; // edx
  int result; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  Concurrency::details::_CancellationTokenRegistration **v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  _DWORD *v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  _DWORD *v29; // eax
  _DWORD *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  _DWORD *v34; // eax
  _DWORD *v35; // eax
  _DWORD *v36; // eax
  _DWORD *v37; // eax
  _DWORD *v38; // eax
  _DWORD *v39; // eax
  _DWORD *v40; // eax
  _DWORD *v41; // eax
  _DWORD *v42; // eax
  _DWORD *v43; // eax
  _DWORD *v44; // eax
  _DWORD *v45; // eax
  _DWORD *v46; // eax
  _DWORD *v47; // eax
  _DWORD *v48; // eax
  _DWORD *v49; // eax
  _DWORD *v50; // eax
  _DWORD *v51; // eax
  int v52; // [esp-44h] [ebp-E8h]
  int v53; // [esp-40h] [ebp-E4h]
  int v54; // [esp-3Ch] [ebp-E0h]
  int v55; // [esp-38h] [ebp-DCh]
  int v56; // [esp-34h] [ebp-D8h]
  int v57; // [esp-30h] [ebp-D4h]
  int v58; // [esp-24h] [ebp-C8h]
  int v59; // [esp-20h] [ebp-C4h]
  int v60; // [esp-1Ch] [ebp-C0h]
  int v61; // [esp-18h] [ebp-BCh]
  int *v62; // [esp-14h] [ebp-B8h]
  int v63; // [esp-10h] [ebp-B4h]
  int *v64; // [esp-10h] [ebp-B4h]
  int v65; // [esp-Ch] [ebp-B0h]
  int v66; // [esp-Ch] [ebp-B0h]
  int v67; // [esp-8h] [ebp-ACh]
  int v68; // [esp-8h] [ebp-ACh]
  int v69; // [esp-4h] [ebp-A8h]
  int v70; // [esp-4h] [ebp-A8h]
  void *v71; // [esp-4h] [ebp-A8h]
  CIOBuffer *v72; // [esp-4h] [ebp-A8h]
  void *v73; // [esp-4h] [ebp-A8h]
  CIOBuffer *v74; // [esp-4h] [ebp-A8h]
  CIOBuffer *v75; // [esp-4h] [ebp-A8h]
  void *v76; // [esp-4h] [ebp-A8h]
  CIOBuffer *v77; // [esp-4h] [ebp-A8h]
  CIOBuffer *v78; // [esp-4h] [ebp-A8h]
  void *v79; // [esp-4h] [ebp-A8h]
  CIOBuffer *v80; // [esp-4h] [ebp-A8h]
  CIOBuffer *v81; // [esp-4h] [ebp-A8h]
  CIOBuffer *v82; // [esp-4h] [ebp-A8h]
  void *v83; // [esp-4h] [ebp-A8h]
  CIOBuffer *v84; // [esp-4h] [ebp-A8h]
  CIOBuffer *v85; // [esp-4h] [ebp-A8h]
  CIOBuffer *v86; // [esp-4h] [ebp-A8h]
  CIOBuffer *v87; // [esp-4h] [ebp-A8h]
  void *v88; // [esp-4h] [ebp-A8h]
  CIOBuffer *v89; // [esp-4h] [ebp-A8h]
  CIOBuffer *v90; // [esp-4h] [ebp-A8h]
  CIOBuffer *v91; // [esp-4h] [ebp-A8h]
  void *v92; // [esp-4h] [ebp-A8h]
  CIOBuffer *v93; // [esp-4h] [ebp-A8h]
  CIOBuffer *v94; // [esp-4h] [ebp-A8h]
  CIOBuffer *v95; // [esp-4h] [ebp-A8h]
  void *v96; // [esp-4h] [ebp-A8h]
  CIOBuffer *v97; // [esp-4h] [ebp-A8h]
  CIOBuffer *v98; // [esp-4h] [ebp-A8h]
  CIOBuffer *v99; // [esp-4h] [ebp-A8h]
  CIOBuffer *v100; // [esp-4h] [ebp-A8h]
  void *v101; // [esp-4h] [ebp-A8h]
  CIOBuffer *v102; // [esp-4h] [ebp-A8h]
  CIOBuffer *v103; // [esp-4h] [ebp-A8h]
  int v105; // [esp+4h] [ebp-A0h] BYREF
  int v106; // [esp+8h] [ebp-9Ch]
  int v107; // [esp+Ch] [ebp-98h]
  int v108; // [esp+10h] [ebp-94h]
  int *v109; // [esp+14h] [ebp-90h]
  int v110; // [esp+18h] [ebp-8Ch]
  int v111[2]; // [esp+1Ch] [ebp-88h] BYREF
  int v112[2]; // [esp+24h] [ebp-80h] BYREF
  CIOBuffer *v113; // [esp+2Ch] [ebp-78h]
  int v114; // [esp+30h] [ebp-74h] BYREF
  int v115; // [esp+34h] [ebp-70h]
  int v116; // [esp+38h] [ebp-6Ch]
  int v117; // [esp+3Ch] [ebp-68h]
  int v118; // [esp+40h] [ebp-64h] BYREF
  int v119; // [esp+44h] [ebp-60h]
  int v120; // [esp+48h] [ebp-5Ch] BYREF
  int v121; // [esp+4Ch] [ebp-58h]
  int v122; // [esp+50h] [ebp-54h]
  int v123; // [esp+54h] [ebp-50h] BYREF
  int v124; // [esp+58h] [ebp-4Ch]
  int v125; // [esp+5Ch] [ebp-48h]
  int v126; // [esp+60h] [ebp-44h]
  int v127[3]; // [esp+64h] [ebp-40h] BYREF
  int v128; // [esp+70h] [ebp-34h]
  CIOBuffer *v129; // [esp+74h] [ebp-30h]
  int v130; // [esp+78h] [ebp-2Ch] BYREF
  int v131; // [esp+7Ch] [ebp-28h]
  int v132; // [esp+80h] [ebp-24h] BYREF
  int v133; // [esp+84h] [ebp-20h]
  int v134; // [esp+88h] [ebp-1Ch]
  int v135; // [esp+8Ch] [ebp-18h]
  void *Src; // [esp+90h] [ebp-14h]
  _DWORD *v137; // [esp+94h] [ebp-10h]
  int j; // [esp+98h] [ebp-Ch] BYREF
  int i; // [esp+9Ch] [ebp-8h]
  _DWORD *v140; // [esp+A0h] [ebp-4h]
  int Numbera; // [esp+B0h] [ebp+Ch]
  int v142; // [esp+B4h] [ebp+10h]

  v10 = *((_DWORD *)a2 + 82);
  v118 = *((_DWORD *)a2 + 81);
  v119 = v10;
  v120 = Number + *((_DWORD *)a2 + 83);
  v121 = a4 + *((_DWORD *)a2 + 84);
  v130 = v120 >> 5;
  v131 = v121 >> 5;
  v137 = (_DWORD *)sub_492570(this, &v118);
  if ( !v137 )
    return 0;
  v140 = (_DWORD *)sub_492570(this, &v130);
  if ( !v140 )
    return 0;
  v122 = a7 != 0 ? 100 : 64;
  v12 = abs(Number);
  if ( v12 <= v122 && (v13 = abs(a4), v13 <= v122) )
  {
    sub_492440(&v118, &v123, 25);
    sub_492440(&v130, &v105, 25);
    if ( Number <= 0 )
    {
      v132 = v130;
      v134 = v118 + 1;
      v114 = v105;
      v116 = v125;
    }
    else
    {
      v132 = v118;
      v134 = v130 + 1;
      v114 = v123;
      v116 = v107;
    }
    if ( a4 <= 0 )
    {
      v133 = v119 + 1;
      v135 = v131;
      v115 = v124;
      v117 = v108;
    }
    else
    {
      v133 = v131 + 1;
      v135 = v119;
      v115 = v106;
      v117 = v126;
    }
    v111[0] = (unsigned __int8)v118;
    v111[1] = (unsigned __int8)v119;
    sub_492510(&v114, v127);
    v110 = v127[0] + (v128 << 6);
    if ( v110 >= 0 && v110 <= 4096 )
    {
      sub_491200((char *)this, &v114, &v132, v127);
      v15 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(v137, v111);
      if ( sub_496550(v15, a2) )
      {
        CChar::SetXY(a2, &v120);
        *((_DWORD *)a2 + 85) += a5;
        CChar::SetDirection(a2, Number, a4);
        v112[0] = (unsigned __int8)v130;
        v112[1] = (unsigned __int8)v131;
        v109 = (int *)CCellMap::GetTile(v140, v112);
        sub_496520(v109, ebx0, a3, esi0, (int)a2);
        v16 = std___Mpunct_wchar_t___do_frac_digits(a2);
        v129 = (CIOBuffer *)sub_44FCE0(ebx0, a3, esi0, 55, "d", v16);
        v17 = std___Mpunct_wchar_t___do_frac_digits(a2);
        if ( a7 )
        {
          Src = sub_44FCE0(ebx0, a3, esi0, (a6 != 0) + 101, "dbbb", v17, Number, a4, a5);
          CPlayer::Send(Src);
        }
        else
        {
          Src = sub_44FCE0(ebx0, a3, esi0, (a6 != 0) + 34, "dbbb", v17, Number, a4, a5);
        }
        v70 = *((_DWORD *)a2 + 128);
        v68 = *((_DWORD *)a2 + 278);
        v66 = *((_DWORD *)a2 + 120);
        v64 = CPlayer::GetGuildName((int *)a2);
        v62 = CPlayer::GetGuildClassTitle((int *)a2);
        v61 = *((_DWORD *)a2 + 73);
        v60 = *((_DWORD *)a2 + 72);
        v59 = *((_DWORD *)a2 + 140);
        v58 = *((_DWORD *)a2 + 139);
        v57 = *((_DWORD *)a2 + 70);
        v56 = *((_DWORD *)a2 + 87);
        v55 = *((_DWORD *)a2 + 85);
        v54 = *((_DWORD *)a2 + 84);
        v53 = *((_DWORD *)a2 + 83);
        v52 = *((_DWORD *)a2 + 115);
        v18 = std___Mpunct_wchar_t___do_frac_digits(a2);
        v113 = (CIOBuffer *)sub_44FCE0(
                              ebx0,
                              a3,
                              esi0,
                              50,
                              "dsbdddwdmbbIssdbd",
                              v18,
                              (char *)a2 + 32,
                              v52,
                              v53,
                              v54,
                              v55,
                              v56,
                              v57,
                              (char *)a2 + 1052,
                              14,
                              v58,
                              v59,
                              v60,
                              v61,
                              v62,
                              v64,
                              v66,
                              v68,
                              v70);
        Numbera = v130 - v118;
        v142 = v131 - v119;
        if ( v130 == v118 )
        {
          if ( v142 )
          {
            if ( v142 <= 0 )
            {
              for ( i = v108; i < v126; ++i )
              {
                for ( j = v105; j < v107; ++j )
                {
                  v75 = v113;
                  v23 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CSellMap::SendCreate(v23, ebx0, a3, esi0, (int)a2, &j, (int)v75);
                }
              }
              while ( i < v106 )
              {
                for ( j = v105; j < v107; ++j )
                {
                  v76 = Src;
                  v24 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CCellMap::GetRWLockRect(v24, ebx0, a3, esi0, (int)a2, &j, (int)v76);
                }
                ++i;
              }
              while ( i < v124 )
              {
                for ( j = v105; j < v107; ++j )
                {
                  v77 = v129;
                  v25 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CSellMap::SendDelete(v25, ebx0, a3, esi0, (int)a2, &j, (int)v77);
                }
                ++i;
              }
            }
            else
            {
              for ( i = v126; i < v108; ++i )
              {
                for ( j = v123; j < v125; ++j )
                {
                  v72 = v129;
                  v20 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CSellMap::SendDelete(v20, ebx0, a3, esi0, (int)a2, &j, (int)v72);
                }
              }
              while ( i < v124 )
              {
                for ( j = v123; j < v125; ++j )
                {
                  v73 = Src;
                  v21 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CCellMap::GetRWLockRect(v21, ebx0, a3, esi0, (int)a2, &j, (int)v73);
                }
                ++i;
              }
              while ( i < v106 )
              {
                for ( j = v123; j < v125; ++j )
                {
                  v74 = v113;
                  v22 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CSellMap::SendCreate(v22, ebx0, a3, esi0, (int)a2, &j, (int)v74);
                }
                ++i;
              }
            }
          }
          else
          {
            for ( i = v126; i < v124; ++i )
            {
              for ( j = v123; j < v125; ++j )
              {
                v71 = Src;
                v19 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CCellMap::GetRWLockRect(v19, ebx0, a3, esi0, (int)a2, &j, (int)v71);
              }
            }
          }
        }
        else if ( Numbera <= 0 )
        {
          if ( Numbera < 0 )
          {
            if ( v142 )
            {
              if ( v142 <= 0 )
              {
                for ( i = v108; i < v126; ++i )
                {
                  for ( j = v105; j < v107; ++j )
                  {
                    v99 = v113;
                    v47 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendCreate(v47, ebx0, a3, esi0, (int)a2, &j, (int)v99);
                  }
                }
                while ( i < v106 )
                {
                  for ( j = v105; j < v123; ++j )
                  {
                    v100 = v113;
                    v48 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendCreate(v48, ebx0, a3, esi0, (int)a2, &j, (int)v100);
                  }
                  while ( j < v107 )
                  {
                    v101 = Src;
                    v49 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CCellMap::GetRWLockRect(v49, ebx0, a3, esi0, (int)a2, &j, (int)v101);
                    ++j;
                  }
                  while ( j < v125 )
                  {
                    v102 = v129;
                    v50 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendDelete(v50, ebx0, a3, esi0, (int)a2, &j, (int)v102);
                    ++j;
                  }
                  ++i;
                }
                while ( i < v124 )
                {
                  for ( j = v123; j < v125; ++j )
                  {
                    v103 = v129;
                    v51 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendDelete(v51, ebx0, a3, esi0, (int)a2, &j, (int)v103);
                  }
                  ++i;
                }
              }
              else
              {
                for ( i = v126; i < v108; ++i )
                {
                  for ( j = v123; j < v125; ++j )
                  {
                    v94 = v129;
                    v42 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendDelete(v42, ebx0, a3, esi0, (int)a2, &j, (int)v94);
                  }
                }
                while ( i < v124 )
                {
                  for ( j = v105; j < v123; ++j )
                  {
                    v95 = v113;
                    v43 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendCreate(v43, ebx0, a3, esi0, (int)a2, &j, (int)v95);
                  }
                  while ( j < v107 )
                  {
                    v96 = Src;
                    v44 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CCellMap::GetRWLockRect(v44, ebx0, a3, esi0, (int)a2, &j, (int)v96);
                    ++j;
                  }
                  while ( j < v125 )
                  {
                    v97 = v129;
                    v45 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendDelete(v45, ebx0, a3, esi0, (int)a2, &j, (int)v97);
                    ++j;
                  }
                  ++i;
                }
                while ( i < v106 )
                {
                  for ( j = v105; j < v107; ++j )
                  {
                    v98 = v113;
                    v46 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                    CSellMap::SendCreate(v46, ebx0, a3, esi0, (int)a2, &j, (int)v98);
                  }
                  ++i;
                }
              }
            }
            else
            {
              for ( i = v108; i < v106; ++i )
              {
                for ( j = v105; j < v123; ++j )
                {
                  v91 = v113;
                  v39 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CSellMap::SendCreate(v39, ebx0, a3, esi0, (int)a2, &j, (int)v91);
                }
                while ( j < v107 )
                {
                  v92 = Src;
                  v40 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CCellMap::GetRWLockRect(v40, ebx0, a3, esi0, (int)a2, &j, (int)v92);
                  ++j;
                }
                while ( j < v125 )
                {
                  v93 = v129;
                  v41 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                  CSellMap::SendDelete(v41, ebx0, a3, esi0, (int)a2, &j, (int)v93);
                  ++j;
                }
              }
            }
          }
        }
        else if ( v142 )
        {
          if ( v142 <= 0 )
          {
            for ( i = v108; i < v126; ++i )
            {
              for ( j = v105; j < v107; ++j )
              {
                v86 = v113;
                v34 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendCreate(v34, ebx0, a3, esi0, (int)a2, &j, (int)v86);
              }
            }
            while ( i < v106 )
            {
              for ( j = v123; j < v105; ++j )
              {
                v87 = v129;
                v35 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendDelete(v35, ebx0, a3, esi0, (int)a2, &j, (int)v87);
              }
              while ( j < v125 )
              {
                v88 = Src;
                v36 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CCellMap::GetRWLockRect(v36, ebx0, a3, esi0, (int)a2, &j, (int)v88);
                ++j;
              }
              while ( j < v107 )
              {
                v89 = v113;
                v37 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendCreate(v37, ebx0, a3, esi0, (int)a2, &j, (int)v89);
                ++j;
              }
              ++i;
            }
            while ( i < v124 )
            {
              for ( j = v123; j < v125; ++j )
              {
                v90 = v129;
                v38 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendDelete(v38, ebx0, a3, esi0, (int)a2, &j, (int)v90);
              }
              ++i;
            }
          }
          else
          {
            for ( i = v126; i < v108; ++i )
            {
              for ( j = v123; j < v125; ++j )
              {
                v81 = v129;
                v29 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendDelete(v29, ebx0, a3, esi0, (int)a2, &j, (int)v81);
              }
            }
            while ( i < v124 )
            {
              for ( j = v123; j < v105; ++j )
              {
                v82 = v129;
                v30 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendDelete(v30, ebx0, a3, esi0, (int)a2, &j, (int)v82);
              }
              while ( j < v125 )
              {
                v83 = Src;
                v31 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CCellMap::GetRWLockRect(v31, ebx0, a3, esi0, (int)a2, &j, (int)v83);
                ++j;
              }
              while ( j < v107 )
              {
                v84 = v113;
                v32 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendCreate(v32, ebx0, a3, esi0, (int)a2, &j, (int)v84);
                ++j;
              }
              ++i;
            }
            while ( i < v106 )
            {
              for ( j = v105; j < v107; ++j )
              {
                v85 = v113;
                v33 = (_DWORD *)CSMap::_GetCellMap(this, &j);
                CSellMap::SendCreate(v33, ebx0, a3, esi0, (int)a2, &j, (int)v85);
              }
              ++i;
            }
          }
        }
        else
        {
          for ( i = v126; i < v124; ++i )
          {
            for ( j = v123; j < v105; ++j )
            {
              v78 = v129;
              v26 = (_DWORD *)CSMap::_GetCellMap(this, &j);
              CSellMap::SendDelete(v26, ebx0, a3, esi0, (int)a2, &j, (int)v78);
            }
            while ( j < v125 )
            {
              v79 = Src;
              v27 = (_DWORD *)CSMap::_GetCellMap(this, &j);
              CCellMap::GetRWLockRect(v27, ebx0, a3, esi0, (int)a2, &j, (int)v79);
              ++j;
            }
            while ( j < v107 )
            {
              v80 = v113;
              v28 = (_DWORD *)CSMap::_GetCellMap(this, &j);
              CSellMap::SendCreate(v28, ebx0, a3, esi0, (int)a2, &j, (int)v80);
              ++j;
            }
          }
        }
        if ( (v109[1] & 0x10000) != 0 )
          CPortal::OpenPortal((int)a2);
        sub_4912B0((int)this, ebx0, a3, esi0, (int)&v114, (int)&v132, v127);
        CIOBuffer::Release(v129);
        CIOBuffer::Release(v113);
        CIOBuffer::Release((CIOBuffer *)Src);
        result = 1;
      }
      else
      {
        sub_4912B0((int)this, ebx0, a3, esi0, (int)&v114, (int)&v132, v127);
        result = 0;
      }
    }
    else
    {
      ELOG("CSMap::MovePlayer rtMap.left(%d) rtMap.bottom(%d) nIndex(%d) PID(%d) Name(%s)", v127[0]);
      if ( dword_4E2754 < GetTickCount() && ++dword_4E2740 < 5 )
        EBREAK(ebx0, a3, esi0);
      result = 0;
    }
  }
  else
  {
    LOG_NORMAL("move hack PID(%d) Delta(%d,%d)", *((_DWORD *)a2 + 113), Number, a4);
    v69 = *((_DWORD *)a2 + 87);
    v67 = *((_DWORD *)a2 + 85);
    v65 = *((_DWORD *)a2 + 84);
    v63 = *((_DWORD *)a2 + 83);
    v14 = std___Mpunct_wchar_t___do_frac_digits(a2);
    CPlayer::Write((int)a2, 33, "ddddw", v14, v63, v65, v67, v69);
    result = 0;
  }
  return result;
}
// 491A8A: conditional instruction was optimized away because of '%arg_8.4<0'
// 491E2B: conditional instruction was optimized away because of '%arg_8.4<0'
// 492241: conditional instruction was optimized away because of '%arg_8.4<0'
// 4E2740: using guessed type int dword_4E2740;
// 4E2754: using guessed type int dword_4E2754;

//----- (00492440) --------------------------------------------------------
_DWORD *__stdcall sub_492440(_DWORD *a1, _DWORD *a2, int a3)
{
  _DWORD *result; // eax
  int v4; // [esp+0h] [ebp-14h]
  int v5; // [esp+4h] [ebp-10h]
  int v6; // [esp+8h] [ebp-Ch]
  int v7; // [esp+Ch] [ebp-8h]

  if ( *a1 - a3 >= 0 )
    v7 = *a1 - a3;
  else
    v7 = 0;
  *a2 = v7;
  if ( a1[1] - a3 >= 0 )
    v6 = a1[1] - a3;
  else
    v6 = 0;
  a2[3] = v6;
  if ( *a1 + a3 + 1 <= 0x4000 )
    v5 = *a1 + a3 + 1;
  else
    v5 = 0x4000;
  a2[2] = v5;
  if ( a1[1] + a3 + 1 <= 0x4000 )
    v4 = a1[1] + a3 + 1;
  else
    v4 = 0x4000;
  result = a2;
  a2[1] = v4;
  return result;
}

//----- (00492510) --------------------------------------------------------
int *__stdcall sub_492510(int *a1, int *a2)
{
  int *result; // eax

  *a2 = *a1 >> 8;
  a2[3] = a1[3] >> 8;
  a2[2] = ((a1[2] - 1) >> 8) + 1;
  result = a1;
  a2[1] = ((a1[1] - 1) >> 8) + 1;
  return result;
}

//----- (00492570) --------------------------------------------------------
int __thiscall sub_492570(_DWORD *this, int *a2)
{
  int result; // eax

  if ( *a2 >= 0 && *a2 >> 8 < 64 && a2[1] >= 0 && a2[1] >> 8 < 64 )
    result = CSMap::_GetCellMap(this, a2);
  else
    result = 0;
  return result;
}

//----- (004925C0) --------------------------------------------------------
int __userpurge sub_4925C0@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, Concurrency::details::_CancellationTokenRegistration *a5, int Number, int a7, int a8, int a9)
{
  int v9; // edx
  int result; // eax
  int v11; // eax
  Concurrency::details::_CancellationTokenRegistration **v12; // eax
  int *v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  _DWORD *v26; // eax
  _DWORD *v27; // eax
  _DWORD *v28; // eax
  _DWORD *v29; // eax
  _DWORD *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  _DWORD *v34; // eax
  _DWORD *v35; // eax
  _DWORD *v36; // eax
  _DWORD *v37; // eax
  _DWORD *v38; // eax
  _DWORD *v39; // eax
  _DWORD *v40; // eax
  _DWORD *v41; // eax
  _DWORD *v42; // eax
  _DWORD *v43; // eax
  _DWORD *v44; // eax
  _DWORD *v45; // eax
  _DWORD *v46; // eax
  _DWORD *v47; // eax
  _DWORD *v48; // eax
  _DWORD *v49; // eax
  _DWORD *v50; // eax
  int v51; // [esp-30h] [ebp-C8h]
  int v52; // [esp-2Ch] [ebp-C4h]
  int v53; // [esp-28h] [ebp-C0h]
  int v54; // [esp-24h] [ebp-BCh]
  int v55; // [esp-20h] [ebp-B8h]
  int v56; // [esp-1Ch] [ebp-B4h]
  int v57; // [esp-18h] [ebp-B0h]
  int v58; // [esp-14h] [ebp-ACh]
  int v59; // [esp-10h] [ebp-A8h]
  CIOBuffer *v60; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v61; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v62; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v63; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v64; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v65; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v66; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v67; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v68; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v69; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v70; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v71; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v72; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v73; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v74; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v75; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v76; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v77; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v78; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v79; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v80; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v81; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v82; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v83; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v84; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v85; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v86; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v87; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v88; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v89; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v90; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v91; // [esp-4h] [ebp-9Ch]
  CIOBuffer *v92; // [esp-4h] [ebp-9Ch]
  int v94; // [esp+4h] [ebp-94h] BYREF
  int v95; // [esp+8h] [ebp-90h]
  int v96; // [esp+Ch] [ebp-8Ch]
  int v97; // [esp+10h] [ebp-88h]
  int v98[2]; // [esp+14h] [ebp-84h] BYREF
  int v99[2]; // [esp+1Ch] [ebp-7Ch] BYREF
  CIOBuffer *v100; // [esp+24h] [ebp-74h]
  int v101; // [esp+28h] [ebp-70h] BYREF
  int v102; // [esp+2Ch] [ebp-6Ch]
  int v103; // [esp+30h] [ebp-68h]
  int v104; // [esp+34h] [ebp-64h]
  int v105; // [esp+38h] [ebp-60h] BYREF
  int v106; // [esp+3Ch] [ebp-5Ch]
  int v107; // [esp+40h] [ebp-58h] BYREF
  int v108; // [esp+44h] [ebp-54h]
  int v109; // [esp+48h] [ebp-50h] BYREF
  int v110; // [esp+4Ch] [ebp-4Ch]
  int v111; // [esp+50h] [ebp-48h]
  int v112; // [esp+54h] [ebp-44h]
  int v113[4]; // [esp+58h] [ebp-40h] BYREF
  CIOBuffer *v114; // [esp+68h] [ebp-30h]
  int v115; // [esp+6Ch] [ebp-2Ch] BYREF
  int v116; // [esp+70h] [ebp-28h]
  int v117; // [esp+74h] [ebp-24h] BYREF
  int v118; // [esp+78h] [ebp-20h]
  int v119; // [esp+7Ch] [ebp-1Ch]
  int v120; // [esp+80h] [ebp-18h]
  CIOBuffer *v121; // [esp+84h] [ebp-14h]
  _DWORD *v122; // [esp+88h] [ebp-10h]
  int j; // [esp+8Ch] [ebp-Ch] BYREF
  int i; // [esp+90h] [ebp-8h]
  _DWORD *v125; // [esp+94h] [ebp-4h]
  int Numbera; // [esp+A4h] [ebp+Ch]
  int v127; // [esp+A8h] [ebp+10h]

  v9 = *((_DWORD *)a5 + 82);
  v105 = *((_DWORD *)a5 + 81);
  v106 = v9;
  v107 = Number + *((_DWORD *)a5 + 83);
  v108 = a7 + *((_DWORD *)a5 + 84);
  v115 = v107 >> 5;
  v116 = v108 >> 5;
  v122 = (_DWORD *)sub_492570(a1, &v105);
  if ( !v122 )
    return 0;
  v125 = (_DWORD *)sub_492570(a1, &v115);
  if ( !v125 )
    return 0;
  if ( Number <= 127 && Number >= -128 && a7 <= 127 && a7 >= -128 )
  {
    sub_492440(&v105, &v109, 25);
    sub_492440(&v115, &v94, 25);
    if ( Number <= 0 )
    {
      v117 = v115;
      v119 = v105 + 1;
      v101 = v94;
      v103 = v111;
    }
    else
    {
      v117 = v105;
      v119 = v115 + 1;
      v101 = v109;
      v103 = v96;
    }
    if ( a7 <= 0 )
    {
      v118 = v106 + 1;
      v120 = v116;
      v102 = v110;
      v104 = v97;
    }
    else
    {
      v118 = v116 + 1;
      v120 = v106;
      v102 = v95;
      v104 = v112;
    }
    v98[0] = (unsigned __int8)v105;
    v98[1] = (unsigned __int8)v106;
    sub_492510(&v101, v113);
    sub_491200(a1, &v101, &v117, v113);
    v12 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(v122, v98);
    if ( sub_496550(v12, a5) )
    {
      CChar::SetXY(a5, &v107);
      CChar::SetDirection(a5, Number, a7);
      v99[0] = (unsigned __int8)v115;
      v99[1] = (unsigned __int8)v116;
      v13 = (int *)CCellMap::GetTile(v125, v99);
      sub_496520(v13, a2, a3, a4, (int)a5);
      v14 = std___Mpunct_wchar_t___do_frac_digits(a5);
      v114 = (CIOBuffer *)sub_44FCE0(a2, a3, a4, 56, "d", v14);
      v15 = std___Mpunct_wchar_t___do_frac_digits(a5);
      v121 = (CIOBuffer *)sub_44FCE0(a2, a3, a4, (a8 != 0) + 36, "dbbb", v15, Number, a7, a9);
      v16 = (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *))(*(_DWORD *)a5 + 240))(a5);
      v59 = (*(int (__thiscall **)(Concurrency::details::_CancellationTokenRegistration *, _DWORD, _DWORD, int))(*(_DWORD *)a5 + 224))(
              a5,
              *(_DWORD *)(*((_DWORD *)a5 + 110) + 64),
              *((_DWORD *)a5 + 131),
              v16);
      v58 = *((_DWORD *)a5 + 73);
      v57 = *((_DWORD *)a5 + 72);
      v56 = *((_DWORD *)a5 + 70);
      v55 = CChar::GetMaxHP(a5);
      v54 = *((_DWORD *)a5 + 68);
      v53 = *((_DWORD *)a5 + 87);
      v52 = *((_DWORD *)a5 + 84);
      v51 = *((_DWORD *)a5 + 83);
      v17 = std___Mpunct_wchar_t___do_frac_digits(a5);
      v100 = (CIOBuffer *)sub_44FCE0(
                            a2,
                            a3,
                            a4,
                            51,
                            "wdddwdddIsbds",
                            *(_DWORD *)(*((_DWORD *)a5 + 110) + 60),
                            v17,
                            v51,
                            v52,
                            v53,
                            v54,
                            v55,
                            v56,
                            v57,
                            v58,
                            v59);
      Numbera = v115 - v105;
      v127 = v116 - v106;
      if ( v115 == v105 )
      {
        if ( v127 )
        {
          if ( v127 <= 0 )
          {
            for ( i = v97; i < v112; ++i )
            {
              for ( j = v94; j < v96; ++j )
              {
                v64 = v100;
                v22 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v22, a2, a3, a4, &j, (int)v64);
              }
            }
            while ( i < v95 )
            {
              for ( j = v94; j < v96; ++j )
              {
                v65 = v121;
                v23 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v23, a2, a3, a4, &j, (int)v65);
              }
              ++i;
            }
            while ( i < v110 )
            {
              for ( j = v94; j < v96; ++j )
              {
                v66 = v114;
                v24 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v24, a2, a3, a4, &j, (int)v66);
              }
              ++i;
            }
          }
          else
          {
            for ( i = v112; i < v97; ++i )
            {
              for ( j = v109; j < v111; ++j )
              {
                v61 = v114;
                v19 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v19, a2, a3, a4, &j, (int)v61);
              }
            }
            while ( i < v110 )
            {
              for ( j = v109; j < v111; ++j )
              {
                v62 = v121;
                v20 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v20, a2, a3, a4, &j, (int)v62);
              }
              ++i;
            }
            while ( i < v95 )
            {
              for ( j = v109; j < v111; ++j )
              {
                v63 = v100;
                v21 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v21, a2, a3, a4, &j, (int)v63);
              }
              ++i;
            }
          }
        }
        else
        {
          for ( i = v112; i < v110; ++i )
          {
            for ( j = v109; j < v111; ++j )
            {
              v60 = v121;
              v18 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v18, a2, a3, a4, &j, (int)v60);
            }
          }
        }
      }
      else if ( Numbera <= 0 )
      {
        if ( Numbera < 0 )
        {
          if ( v127 )
          {
            if ( v127 <= 0 )
            {
              for ( i = v97; i < v112; ++i )
              {
                for ( j = v94; j < v96; ++j )
                {
                  v88 = v100;
                  v46 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v46, a2, a3, a4, &j, (int)v88);
                }
              }
              while ( i < v95 )
              {
                for ( j = v94; j < v109; ++j )
                {
                  v89 = v100;
                  v47 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v47, a2, a3, a4, &j, (int)v89);
                }
                while ( j < v96 )
                {
                  v90 = v121;
                  v48 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v48, a2, a3, a4, &j, (int)v90);
                  ++j;
                }
                while ( j < v111 )
                {
                  v91 = v114;
                  v49 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v49, a2, a3, a4, &j, (int)v91);
                  ++j;
                }
                ++i;
              }
              while ( i < v110 )
              {
                for ( j = v109; j < v111; ++j )
                {
                  v92 = v114;
                  v50 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v50, a2, a3, a4, &j, (int)v92);
                }
                ++i;
              }
            }
            else
            {
              for ( i = v112; i < v97; ++i )
              {
                for ( j = v109; j < v111; ++j )
                {
                  v83 = v114;
                  v41 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v41, a2, a3, a4, &j, (int)v83);
                }
              }
              while ( i < v110 )
              {
                for ( j = v94; j < v109; ++j )
                {
                  v84 = v100;
                  v42 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v42, a2, a3, a4, &j, (int)v84);
                }
                while ( j < v96 )
                {
                  v85 = v121;
                  v43 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v43, a2, a3, a4, &j, (int)v85);
                  ++j;
                }
                while ( j < v111 )
                {
                  v86 = v114;
                  v44 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v44, a2, a3, a4, &j, (int)v86);
                  ++j;
                }
                ++i;
              }
              while ( i < v95 )
              {
                for ( j = v94; j < v96; ++j )
                {
                  v87 = v100;
                  v45 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                  CSellMap::SendPacket(v45, a2, a3, a4, &j, (int)v87);
                }
                ++i;
              }
            }
          }
          else
          {
            for ( i = v97; i < v95; ++i )
            {
              for ( j = v94; j < v109; ++j )
              {
                v80 = v100;
                v38 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v38, a2, a3, a4, &j, (int)v80);
              }
              while ( j < v96 )
              {
                v81 = v121;
                v39 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v39, a2, a3, a4, &j, (int)v81);
                ++j;
              }
              while ( j < v111 )
              {
                v82 = v114;
                v40 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
                CSellMap::SendPacket(v40, a2, a3, a4, &j, (int)v82);
                ++j;
              }
            }
          }
        }
      }
      else if ( v127 )
      {
        if ( v127 <= 0 )
        {
          for ( i = v97; i < v112; ++i )
          {
            for ( j = v94; j < v96; ++j )
            {
              v75 = v100;
              v33 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v33, a2, a3, a4, &j, (int)v75);
            }
          }
          while ( i < v95 )
          {
            for ( j = v109; j < v94; ++j )
            {
              v76 = v114;
              v34 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v34, a2, a3, a4, &j, (int)v76);
            }
            while ( j < v111 )
            {
              v77 = v121;
              v35 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v35, a2, a3, a4, &j, (int)v77);
              ++j;
            }
            while ( j < v96 )
            {
              v78 = v100;
              v36 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v36, a2, a3, a4, &j, (int)v78);
              ++j;
            }
            ++i;
          }
          while ( i < v110 )
          {
            for ( j = v109; j < v111; ++j )
            {
              v79 = v114;
              v37 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v37, a2, a3, a4, &j, (int)v79);
            }
            ++i;
          }
        }
        else
        {
          for ( i = v112; i < v97; ++i )
          {
            for ( j = v109; j < v111; ++j )
            {
              v70 = v114;
              v28 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v28, a2, a3, a4, &j, (int)v70);
            }
          }
          while ( i < v110 )
          {
            for ( j = v109; j < v94; ++j )
            {
              v71 = v114;
              v29 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v29, a2, a3, a4, &j, (int)v71);
            }
            while ( j < v111 )
            {
              v72 = v121;
              v30 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v30, a2, a3, a4, &j, (int)v72);
              ++j;
            }
            while ( j < v96 )
            {
              v73 = v100;
              v31 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v31, a2, a3, a4, &j, (int)v73);
              ++j;
            }
            ++i;
          }
          while ( i < v95 )
          {
            for ( j = v94; j < v96; ++j )
            {
              v74 = v100;
              v32 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
              CSellMap::SendPacket(v32, a2, a3, a4, &j, (int)v74);
            }
            ++i;
          }
        }
      }
      else
      {
        for ( i = v112; i < v110; ++i )
        {
          for ( j = v109; j < v94; ++j )
          {
            v67 = v114;
            v25 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
            CSellMap::SendPacket(v25, a2, a3, a4, &j, (int)v67);
          }
          while ( j < v111 )
          {
            v68 = v121;
            v26 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
            CSellMap::SendPacket(v26, a2, a3, a4, &j, (int)v68);
            ++j;
          }
          while ( j < v96 )
          {
            v69 = v100;
            v27 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
            CSellMap::SendPacket(v27, a2, a3, a4, &j, (int)v69);
            ++j;
          }
        }
      }
      sub_4912B0((int)a1, a2, a3, a4, (int)&v101, (int)&v117, v113);
      CIOBuffer::Release(v114);
      CIOBuffer::Release(v100);
      CIOBuffer::Release(v121);
      result = 1;
    }
    else
    {
      sub_4912B0((int)a1, a2, a3, a4, (int)&v101, (int)&v117, v113);
      result = 0;
    }
  }
  else
  {
    v11 = std___Mpunct_wchar_t___do_frac_digits(a5);
    LOG_NORMAL("invalid monster move(%d : %d, %d)", v11, Number, a7);
    result = 0;
  }
  return result;
}
// 492A81: conditional instruction was optimized away because of '%arg_8.4<0'
// 492DF6: conditional instruction was optimized away because of '%arg_8.4<0'
// 4931D8: conditional instruction was optimized away because of '%arg_8.4<0'

//----- (00493390) --------------------------------------------------------
int __userpurge sub_493390@<eax>(_DWORD *this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4)
{
  _DWORD *v7; // eax
  int v10[4]; // [esp+4h] [ebp-28h] BYREF
  int v11[4]; // [esp+14h] [ebp-18h] BYREF
  int j; // [esp+24h] [ebp-8h] BYREF
  int i; // [esp+28h] [ebp-4h]

  sub_492440((_DWORD *)a3, v10, 25);
  sub_492510(v10, v11);
  sub_4910A0((char *)this, v10, v11);
  for ( i = v10[3]; i < v10[1]; ++i )
  {
    for ( j = v10[0]; j < v10[2]; ++j )
    {
      v7 = (_DWORD *)CSMap::_GetCellMap(this, &j);
      CSellMap::SendCreate(v7, ebx0, edi0, esi0, a2, &j, a4);
    }
  }
  return sub_491150((int)this, ebx0, edi0, esi0, v10, v11);
}

//----- (00493440) --------------------------------------------------------
int __userpurge sub_493440@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  _DWORD *v7; // eax
  int v10[4]; // [esp+4h] [ebp-28h] BYREF
  int v11[4]; // [esp+14h] [ebp-18h] BYREF
  int j; // [esp+24h] [ebp-8h] BYREF
  int i; // [esp+28h] [ebp-4h]

  sub_492440(a5, v10, a7);
  sub_492510(v10, v11);
  sub_4910A0(a1, v10, v11);
  for ( i = v10[3]; i < v10[1]; ++i )
  {
    for ( j = v10[0]; j < v10[2]; ++j )
    {
      v7 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
      CSellMap::SendPacket(v7, a2, a3, a4, &j, a6);
    }
  }
  return sub_491150((int)a1, a2, a3, a4, v10, v11);
}

//----- (004934F0) --------------------------------------------------------
void *__userpurge sub_4934F0@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6)
{
  _DWORD *v6; // eax
  int v9[4]; // [esp+4h] [ebp-2Ch] BYREF
  void *v10; // [esp+14h] [ebp-1Ch] BYREF
  int v11[4]; // [esp+18h] [ebp-18h] BYREF
  int j; // [esp+28h] [ebp-8h] BYREF
  int i; // [esp+2Ch] [ebp-4h]

  v10 = 0;
  sub_492440(a5, v9, a6);
  sub_492510(v9, v11);
  sub_4910A0(a1, v9, v11);
  for ( i = v9[3]; i < v9[1]; ++i )
  {
    for ( j = v9[0]; j < v9[2]; ++j )
    {
      v6 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
      CSellMap::GetPlayerList(v6, a2, a3, a4, &j, &v10);
    }
  }
  sub_491150((int)a1, a2, a3, a4, v9, v11);
  return v10;
}

//----- (004935A0) --------------------------------------------------------
void *__userpurge sub_4935A0@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6)
{
  _DWORD *v6; // eax
  int v9[4]; // [esp+4h] [ebp-2Ch] BYREF
  void *v10; // [esp+14h] [ebp-1Ch] BYREF
  int v11[4]; // [esp+18h] [ebp-18h] BYREF
  int j; // [esp+28h] [ebp-8h] BYREF
  int i; // [esp+2Ch] [ebp-4h]

  v10 = 0;
  sub_492440(a5, v9, a6);
  sub_492510(v9, v11);
  sub_4910A0(a1, v9, v11);
  for ( i = v9[3]; i < v9[1]; ++i )
  {
    for ( j = v9[0]; j < v9[2]; ++j )
    {
      v6 = (_DWORD *)CSMap::_GetCellMap(a1, &j);
      CSellMap::GetPlayerMonsterList(v6, a2, a3, a4, &j, &v10);
    }
  }
  sub_491150((int)a1, a2, a3, a4, v9, v11);
  return v10;
}

//----- (00493650) --------------------------------------------------------
Concurrency::details::_CancellationTokenRegistration *__userpurge sub_493650@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6)
{
  _DWORD *v6; // eax
  int i; // [esp+8h] [ebp-30h]
  int v10[4]; // [esp+Ch] [ebp-2Ch] BYREF
  Concurrency::details::_CancellationTokenRegistration *v11; // [esp+1Ch] [ebp-1Ch] BYREF
  int v12[4]; // [esp+20h] [ebp-18h] BYREF
  int k; // [esp+30h] [ebp-8h] BYREF
  int j; // [esp+34h] [ebp-4h]

  v11 = 0;
  sub_492440(a5, v10, a6);
  sub_492510(v10, v12);
  sub_4910A0(a1, v10, v12);
  for ( i = 1; i <= a6; ++i )
  {
    for ( j = a5[1] - i; j <= i + a5[1]; ++j )
    {
      for ( k = *a5 - i; k <= i + *a5; ++k )
      {
        v6 = (_DWORD *)CSMap::_GetCellMap(a1, &k);
        if ( CSellMap::GetClosestPlayer(v6, a2, a3, a4, &k, &v11) )
          goto LABEL_14;
        if ( j != a5[1] - i && j != i + a5[1] )
          k += 2 * i - 1;
      }
    }
  }
LABEL_14:
  sub_491150((int)a1, a2, a3, a4, v10, v12);
  return v11;
}

//----- (00493770) --------------------------------------------------------
Concurrency::details::_CancellationTokenRegistration *__userpurge sub_493770@<eax>(char *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, _DWORD *a5, int a6, int a7)
{
  _DWORD *v7; // eax
  int i; // [esp+8h] [ebp-30h]
  int v11[4]; // [esp+Ch] [ebp-2Ch] BYREF
  int v12[4]; // [esp+1Ch] [ebp-1Ch] BYREF
  int k; // [esp+2Ch] [ebp-Ch] BYREF
  int j; // [esp+30h] [ebp-8h]
  Concurrency::details::_CancellationTokenRegistration *v15; // [esp+34h] [ebp-4h] BYREF

  v15 = 0;
  sub_492440(a5, v11, a7);
  sub_492510(v11, v12);
  sub_4910A0(a1, v11, v12);
  for ( i = 1; i <= a7; ++i )
  {
    for ( j = a5[1] - i; j <= i + a5[1]; ++j )
    {
      for ( k = *a5 - i; k <= i + *a5; ++k )
      {
        v7 = (_DWORD *)CSMap::_GetCellMap(a1, &k);
        if ( CSellMap::GetMonster(v7, a2, a3, a4, &k, a6, &v15) )
          goto LABEL_14;
        if ( j != a5[1] - i && j != i + a5[1] )
          k += 2 * i - 1;
      }
    }
  }
LABEL_14:
  sub_491150((int)a1, a2, a3, a4, v11, v12);
  return v15;
}

//----- (004938A0) --------------------------------------------------------
void __userpurge sub_4938A0(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a1, int a3, int *a4)
{
  int v7; // eax
  int v8[2]; // [esp+4h] [ebp-3Ch] BYREF
  CIOBuffer *v9; // [esp+Ch] [ebp-34h]
  int v10[2]; // [esp+10h] [ebp-30h] BYREF
  CIOBuffer *v11; // [esp+18h] [ebp-28h]
  CIOBuffer *v12; // [esp+1Ch] [ebp-24h]
  CRWLock *v13; // [esp+20h] [ebp-20h]
  int v14[2]; // [esp+24h] [ebp-1Ch] BYREF
  Concurrency::details::_CancellationTokenRegistration *v15; // [esp+2Ch] [ebp-14h]
  Concurrency::details::_CancellationTokenRegistration **v16; // [esp+30h] [ebp-10h]
  int v17; // [esp+34h] [ebp-Ch]
  _DWORD *v18; // [esp+38h] [ebp-8h]
  volatile int *v19; // [esp+3Ch] [ebp-4h]

  v18 = (_DWORD *)sub_492570(this, a4);
  if ( !v18 )
    return;
  v15 = 0;
  v14[0] = (unsigned __int8)*a4;
  v14[1] = (unsigned __int8)a4[1];
  v13 = (CRWLock *)CCellMap::GetLock(v18, v14);
  CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 1020), a2, edi0, esi0);
  CRWLock::WriteLock(v13);
  v16 = (Concurrency::details::_CancellationTokenRegistration **)CCellMap::GetTile(v18, v14);
  v17 = 0;
  v19 = 0;
  v15 = CTile::GetItem(v16, a2, edi0, esi0, a3);
  if ( v15 && !CBase::IsDeleted(v15) && sub_448870((_DWORD *)(a1 + 332), (_DWORD *)v15 + 15) <= 64 )
  {
    if ( *((_DWORD *)v15 + 19)
      && (*((_DWORD *)v15 + 18)
       || (v7 = std___Mpunct_wchar_t___do_frac_digits((_DWORD *)a1), *((_DWORD *)v15 + 19) != v7)) )
    {
      if ( *((_DWORD *)v15 + 18) && *((_DWORD *)v15 + 19) == *(_DWORD *)(a1 + 1016) )
      {
        v19 = (volatile int *)CParty::FindParty(*((_DWORD *)v15 + 19));
        if ( v19 )
        {
          sub_496550(v16, v15);
          CRWLock::WriteUnlock(v13, a2, edi0, esi0);
          CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 1020), a2, edi0, esi0);
          CParty::StoreItem((int)v19, v15);
          v17 = 1;
          goto LABEL_18;
        }
      }
      else
      {
        CPlayer::Write(a1, 67, "b", 23);
      }
    }
    else
    {
      CIOObject::AddRef((volatile int *)v15, a2, edi0, esi0);
      if ( CPlayer::_InsertItem((_DWORD *)a1, 12, v15) == 1 )
      {
        sub_496550(v16, v15);
        *((_DWORD *)v15 + 18) = 0;
        *((_DWORD *)v15 + 19) = 0;
        *((_DWORD *)v15 + 17) = 0;
        *((_DWORD *)v15 + 14) = 0;
        v17 = 1;
      }
      CIOObject::Release((volatile int *)v15, a2, edi0, esi0);
    }
  }
  CRWLock::WriteUnlock(v13, a2, edi0, esi0);
  CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 1020), a2, edi0, esi0);
LABEL_18:
  if ( v17 )
  {
    if ( v19 )
    {
      CParty::DistributeItem((int)v19, (_DWORD *)(a1 + 332));
      CIOObject::Release(v19, a2, edi0, esi0);
    }
    else
    {
      if ( (*(int *)(*((_DWORD *)v15 + 10) + 64) >= 665 && *(int *)(*((_DWORD *)v15 + 10) + 64) <= 668
         || *(int *)(*((_DWORD *)v15 + 10) + 64) >= 802 && *(int *)(*((_DWORD *)v15 + 10) + 64) <= 825
         || *(int *)(*((_DWORD *)v15 + 10) + 64) >= 856 && *(int *)(*((_DWORD *)v15 + 10) + 64) <= 867
         || *(_DWORD *)(*((_DWORD *)v15 + 10) + 64) == 688)
        && abs(*(_DWORD *)(a1 + 332) - 57367) < 1000
        && abs(*(_DWORD *)(a1 + 336) - 9077) < 1001 )
      {
        v10[0] = 1792;
        v10[1] = 284;
        v11 = (CIOBuffer *)sub_44FCE0(a2, edi0, esi0, 68, "bsw", 42, a1 + 32, *(_DWORD *)(*((_DWORD *)v15 + 10) + 64));
        sub_493440(*(char **)(a1 + 320), a2, edi0, esi0, v10, (int)v11, 32);
        CIOBuffer::Release(v11);
      }
      if ( (*(int *)(*((_DWORD *)v15 + 10) + 64) >= 673 && *(int *)(*((_DWORD *)v15 + 10) + 64) <= 687
         || *(int *)(*((_DWORD *)v15 + 10) + 64) >= 826 && *(int *)(*((_DWORD *)v15 + 10) + 64) <= 855)
        && abs(*(_DWORD *)(a1 + 332) - 20284) < 1160
        && abs(*(_DWORD *)(a1 + 336) - 67480) < 1212 )
      {
        v8[0] = 634;
        v8[1] = 2109;
        v9 = (CIOBuffer *)sub_44FCE0(a2, edi0, esi0, 68, "bsw", 42, a1 + 32, *(_DWORD *)(*((_DWORD *)v15 + 10) + 64));
        sub_493440(*(char **)(a1 + 320), a2, edi0, esi0, v8, (int)v9, 38);
        CIOBuffer::Release(v9);
      }
    }
    v12 = (CIOBuffer *)sub_44FCE0(a2, edi0, esi0, 59, "d", a3);
    sub_493440(*(char **)(a1 + 320), a2, edi0, esi0, a4, (int)v12, 25);
    CIOBuffer::Release(v12);
  }
}

//----- (00493CD0) --------------------------------------------------------
void __userpurge sub_493CD0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 28), a2, a3, a4);
  *(_DWORD *)(a1 + 20) = *(_DWORD *)(a1 + 24);
  switch ( *(_DWORD *)(a1 + 20) )
  {
    case 0:
      break;
    case 1:
      *(_DWORD *)(a1 + 24) = 2;
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(a1 + 16), 22, "bb", *(_DWORD *)(a1 + 20), 95);
      CIOObject::AddTimer((CIOObject *)a1, a2, a3, a4, 0x186A0u, 0);
      break;
    case 2:
      *(_DWORD *)(a1 + 24) = 3;
      CNPCScenario::MirrorGState(1, 2);
      CNPCScenario::ThroneGState(1, 4);
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(a1 + 16), 22, "bb", *(_DWORD *)(a1 + 20), 96);
      CIOObject::AddTimer((CIOObject *)a1, a2, a3, a4, 0x222E0u, 0);
      break;
    case 3:
      *(_DWORD *)(a1 + 24) = 4;
      CNPCScenario::ThroneGState(1, 8);
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(a1 + 16), 22, "bb", *(_DWORD *)(a1 + 20), 97);
      CIOObject::AddTimer((CIOObject *)a1, a2, a3, a4, 0x7530u, 0);
      break;
    case 4:
      *(_DWORD *)(a1 + 24) = 5;
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(a1 + 16), 22, "bb", *(_DWORD *)(a1 + 20), 98);
      CIOObject::AddTimer((CIOObject *)a1, a2, a3, a4, 0x7530u, 0);
      break;
    case 5:
      *(_DWORD *)(a1 + 24) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      CMonsterTowerBoss::Create(a2, a3, a4);
      break;
    default:
      *(_DWORD *)(a1 + 24) = 0;
      *(_DWORD *)(a1 + 20) = 0;
      break;
  }
  CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 28), a2, a3, a4);
}

//----- (00493E80) --------------------------------------------------------
int __thiscall sub_493E80(_DWORD *this, int a2, int a3)
{
  this[4] = a2;
  this[6] = a3;
  return (*(int (__thiscall **)(_DWORD *, _DWORD))(*this + 8))(this, 0);
}

//----- (00493EB0) --------------------------------------------------------
int __usercall sub_493EB0@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  int v6; // [esp+4h] [ebp-4h]

  CIOCriticalSection::Enter((CIOCriticalSection *)(a1 + 28), a2, a3, a4);
  v6 = *(_DWORD *)(a1 + 20);
  CIOCriticalSection::Leave((CIOCriticalSection *)(a1 + 28), a2, a3, a4);
  return v6;
}

//----- (00493EE0) --------------------------------------------------------
void *__thiscall sub_493EE0(void *this)
{
  int v1; // eax
  char v4; // [esp+6h] [ebp-2h] BYREF
  char v5; // [esp+7h] [ebp-1h] BYREF

  v1 = LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(this, &v4, v1);
  return this;
}
// 44B910: using guessed type int __thiscall LocaleUpdate__GetLocaleT(_DWORD);

//----- (00493F10) --------------------------------------------------------
void *__thiscall sub_493F10(void *this)
{
  CIOObject::CIOObject((CIOObject *)this);
  *(_DWORD *)this = &off_4C0934;
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)((char *)this + 28));
  *((_DWORD *)this + 6) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 4) = 0;
  return this;
}
// 4C0934: using guessed type int (__stdcall *off_4C0934)(int);

//----- (00493F60) --------------------------------------------------------
void *__userpurge sub_493F60@<eax>(void *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5)
{
  sub_493F90((int)a1, a2, a3, a4);
  if ( (a5 & 1) != 0 )
    operator_delete(a1);
  return a1;
}

//----- (00493F90) --------------------------------------------------------
_DWORD *__usercall sub_493F90@<eax>(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *(_DWORD *)a1 = &off_4C0934;
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)(a1 + 28), a2, a3, a4);
  return std__locale__facet___facet((_DWORD *)a1);
}
// 4C0934: using guessed type int (__stdcall *off_4C0934)(int);

//----- (00493FC0) --------------------------------------------------------
int __thiscall sub_493FC0(int *this)
{
  return sub_493FE0(this);
}

//----- (00493FE0) --------------------------------------------------------
int __thiscall sub_493FE0(int *this)
{
  return sub_494000(this);
}

//----- (00494000) --------------------------------------------------------
int __thiscall sub_494000(int *this)
{
  int *v1; // eax
  void *v2; // eax
  void *v3; // eax
  void *v4; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-14h]
  char v8[4]; // [esp+4h] [ebp-Ch] BYREF
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)sub_430C20(this, v10);
  v1 = (int *)std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
                (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v9);
  sub_4940B0(
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)this,
    (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v8,
    *v1,
    v6);
  v2 = (void *)unknown_libname_25(this[1]);
  sub_44CD70(v2);
  v3 = (void *)sub_446FF0(this[1]);
  sub_44CD70(v3);
  v4 = (void *)sub_430F90(this[1]);
  sub_44CD70(v4);
  sub_4338F0((void *)this[1], 1);
  this[1] = 0;
  this[2] = 0;
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (004940B0) --------------------------------------------------------
std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *__thiscall sub_4940B0(std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *this, std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *result, int a3, char a4)
{
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v4; // eax
  void *v5; // eax
  std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *v6; // eax
  int *v7; // eax
  int v9; // [esp+4h] [ebp-10h] BYREF
  int v10; // [esp+8h] [ebp-Ch] BYREF
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  char v12[4]; // [esp+10h] [ebp-4h] BYREF

  v4 = std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
         this,
         (std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> >::iterator *)v12);
  if ( (unsigned __int8)unknown_libname_16(v4)
    && (v5 = sub_430C20((int *)this, v11), (unsigned __int8)unknown_libname_16(v5)) )
  {
    sub_494150((int *)this);
    std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::begin(
      this,
      result);
    v6 = result;
  }
  else
  {
    while ( std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>,0>>::const_iterator::operator!=(
              (std::vector<CIOSocket::CIOTimer>::const_iterator *)&a3,
              (const std::vector<CIOSocket::CIOTimer>::const_iterator *)&a4) )
    {
      v7 = sub_446090(&a3, &v10, 0);
      sub_44AF50((int *)this, &v9, *v7);
    }
    *(_DWORD *)result = a3;
    v6 = result;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_16(_DWORD);

//----- (00494150) --------------------------------------------------------
_DWORD *__thiscall sub_494150(int *this)
{
  void **v1; // eax
  _DWORD *result; // eax

  v1 = (void **)sub_478AB0(this);
  sub_4941B0(*v1);
  *(_DWORD *)sub_478AB0(this) = this[1];
  this[2] = 0;
  *(_DWORD *)sub_418790(this) = this[1];
  result = (_DWORD *)CServer::SendAlive(this);
  *result = this[1];
  return result;
}

//----- (004941B0) --------------------------------------------------------
int __stdcall sub_4941B0(void *a1)
{
  char *i; // eax
  int result; // eax
  _DWORD *v3; // eax
  int v4; // [esp+4h] [ebp-4h]

  v4 = (int)a1;
  for ( i = (char *)sub_431110((int)a1); ; i = (char *)sub_431110(v4) )
  {
    result = *i;
    if ( result )
      break;
    v3 = (_DWORD *)sub_430F90(v4);
    sub_4941B0(*v3);
    v4 = *(_DWORD *)unknown_libname_25(v4);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
    a1 = (void *)v4;
  }
  return result;
}
// 474590: using guessed type _DWORD __cdecl unknown_libname_25(_DWORD);

//----- (00494230) --------------------------------------------------------
int __stdcall sub_494230(_BYTE *a1)
{
  unsigned __int8 *v2; // [esp+8h] [ebp+8h]

  if ( !*a1 )
    return 0;
  do
  {
    if ( (unsigned __int8)*a1 >= 0x80u )
    {
      v2 = a1 + 1;
      if ( *v2 < 0x80u )
        return 0;
      a1 = v2 + 1;
    }
    else
    {
      if ( (unsigned __int8)*a1 <= 0x20u || strchr("',\"", (char)*a1) )
        return 0;
      ++a1;
    }
  }
  while ( *a1 );
  return 1;
}

//----- (004942C0) --------------------------------------------------------
_DWORD *__userpurge sub_4942C0@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6)
{
  CIOSocket::CIOSocket((int)a1, a2, a3, a4, a5);
  *a1 = &off_4C0950;
  a1[27] = 0;
  a1[70] = InterlockedIncrement(&dword_4E2ED8);
  a1[31] = 0;
  a1[32] = 0;
  a1[33] = 0;
  a1[35] = *(_DWORD *)(a6 + 4);
  a1[34] = *(unsigned __int16 *)(a6 + 2);
  a1[30] = 0;
  a1[36] = 0;
  a1[38] = 0;
  a1[43] = 0;
  a1[40] = 0;
  a1[41] = 0;
  a1[42] = 0;
  memset(a1 + 44, 0, 0xBu);
  memset((char *)a1 + 187, 0, 0x48u);
  a1[65] = 0;
  a1[67] = 1;
  a1[68] = 0;
  a1[66] = GetTickCount();
  return a1;
}
// 4C0950: using guessed type int (__stdcall *off_4C0950)(int);

//----- (00494400) --------------------------------------------------------
_DWORD *__userpurge sub_494400@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a5)
{
  sub_494430(a1, a2, a3, a4);
  if ( (a5 & 1) != 0 )
    operator_delete(a1);
  return a1;
}

//----- (00494430) --------------------------------------------------------
_DWORD *__usercall sub_494430@<eax>(_DWORD *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *a1 = &off_4C0950;
  return CIOSocket::_CIOSocket((int)a1, a2, a3, a4);
}
// 4C0950: using guessed type int (__stdcall *off_4C0950)(int);

//----- (00494450) --------------------------------------------------------
void __usercall sub_494450(struct in_addr *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  char *v4; // eax
  ULONG v5; // [esp-8h] [ebp-Ch]
  CIOSocket *v7; // [esp+0h] [ebp-4h]

  v7 = (CIOSocket *)this;
  v5 = this[34].S_un.S_addr;
  v4 = inet_ntoa(this[35]);
  LOG_INFO("new connection in_addr(%s) port(%d) socket(%p)", v4, v5, this);
  sub_47E620(a2, a3, a4, v7);
  CIOSocket::OnCreate(v7);
  if ( dword_4E118C < sub_47E700() && *((_DWORD *)v7 + 35) != inet_addr("211.108.45.218") )
  {
    CSocket::Write(a2, a3, a4, (int)v7, 45, "b", 6);
    sub_495B20((int)v7, a2, a3, a4, 6);
    CIOSocket::GracefulClose(v7, a2, a3, a4);
  }
}
// 4E118C: using guessed type int dword_4E118C;

//----- (004944F0) --------------------------------------------------------
void __usercall CIOSocket::Recv(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  char *v4; // eax
  char *v5; // eax
  int v6; // [esp-8h] [ebp-28h]
  int v7; // [esp-4h] [ebp-24h]
  int v8; // [esp-4h] [ebp-24h]
  char v9; // [esp+3h] [ebp-1Dh]
  int v11; // [esp+8h] [ebp-18h]
  int v12; // [esp+10h] [ebp-10h]
  unsigned int v13; // [esp+14h] [ebp-Ch]
  unsigned __int8 *i; // [esp+18h] [ebp-8h]
  unsigned int Size; // [esp+1Ch] [ebp-4h]

  if ( *(int *)(this + 104) <= 0xFFFF )
  {
    Size = *(_DWORD *)(*(_DWORD *)(this + 92) + 8000);
    for ( i = *(unsigned __int8 **)(this + 92); ; i += v13 )
    {
      if ( Size < 3 )
        goto LABEL_5;
      v12 = i[2];
      v13 = *(unsigned __int16 *)i;
      if ( Size < v13 )
        break;
      if ( *(unsigned __int16 *)i < 3u )
      {
        LOG_ERR("invalid buffer size. (type:%d, size:%d, bit:%X)", v12, v13, *(_DWORD *)(this + 108));
        CIOSocket::Close((CIOSocket *)this, a2, a3, a4);
        return;
      }
      v9 = (*(_DWORD *)(this + 128))++ & 0x3F;
      Decode(a2, a3, a4, v9, i + 2, v13 - 2);
      if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0 )
      {
        if ( *(_DWORD *)(this + 132) )
        {
          if ( (int)(v13 - 3) > 0 )
          {
            v11 = Decode_AES_Rijndael(i + 3, v13 - 3, (int)&unk_4E158E, i + 3, v13 - 3);
            if ( v11 )
            {
              LOG_ERR("_HsCrypt_GetDecMsg() is Failed.  ErrorType(%d)", v11);
              CSocket::Write(a2, a3, a4, this, 45, "b", 1);
              CIOSocket::Close((CIOSocket *)this, a2, a3, a4);
              return;
            }
          }
        }
      }
      CSocket::Process((struct in_addr *)this, a2, a3, a4, (unsigned __int16 *)i);
      Size -= v13;
    }
    if ( *(unsigned __int16 *)i <= 0x1F40u )
    {
LABEL_5:
      CIOSocket::Read((CIOSocket *)this, a2, a3, a4, Size);
      return;
    }
    v8 = CSocket::Id((_DWORD *)this);
    v5 = inet_ntoa(*(struct in_addr *)(this + 140));
    LOG_NORMAL(
      "exceed buffer size. (type %d) (size %d) (bit %X) (addr %s) (SID %x) ",
      v12,
      v13,
      *(_DWORD *)(this + 108),
      v5,
      v8);
    CIOSocket::Close((CIOSocket *)this, a2, a3, a4);
  }
  else
  {
    v7 = CSocket::Id((_DWORD *)this);
    v6 = *(_DWORD *)(this + 104);
    v4 = inet_ntoa(*(struct in_addr *)(this + 140));
    LOG_NORMAL("close pending socket (addr %s) (bytes %d) (id %x)", v4, v6, v7);
    CIOSocket::Close((CIOSocket *)this, a2, a3, a4);
  }
}

//----- (00494700) --------------------------------------------------------
void __usercall sub_494700(_DWORD *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  volatile int *v5; // [esp+4h] [ebp-4h]

  sub_47E6B0(a2, a3, a4, (int)this);
  sub_495B20((int)this, a2, a3, a4, 0);
  v5 = (volatile int *)this[30];
  if ( v5 )
  {
    CSocket::Lock(this);
    this[30] = 0;
    CSocket::Unlock(this);
    CIOObject::Release((CIOObject *)v5, a2, a3, a4, v5 + 110);
  }
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (00494760) --------------------------------------------------------
int __thiscall sub_494760(volatile LONG *this)
{
  char optval[2]; // [esp+4h] [ebp-8h] BYREF
  __int16 v4; // [esp+6h] [ebp-6h]
  SOCKET s; // [esp+8h] [ebp-4h]

  CSocket::Lock(this);
  s = InterlockedExchange(this + 4, 0);
  CSocket::Unlock(this);
  *(_WORD *)optval = 1;
  v4 = 0;
  setsockopt(s, 0xFFFF, 128, optval, 4);
  return closesocket(s);
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (004947C0) --------------------------------------------------------
int __thiscall sub_4947C0(SOCKET *this)
{
  CSocket::Lock(this);
  shutdown(this[4], 2);
  return CSocket::Unlock(this);
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (004947F0) --------------------------------------------------------
void __userpurge CSocket::_CSocket(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, void *Src)
{
  int v6; // [esp+4h] [ebp-4h]

  if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0
    && *(_DWORD *)(this + 132)
    && *((_DWORD *)Src + 2000) != 3
    && (v6 = Encode_AES_Rijndael(
               (char *)Src + 3,
               *((_DWORD *)Src + 2000) - 3,
               (int)&unk_4E1368,
               (char *)Src + 3,
               *((_DWORD *)Src + 2000) - 3)) != 0 )
  {
    LOG_ERR("_HsCrypt_GetEncMsg() is Failed.  ErrorType(%d)", v6);
    CSocket::Write(a2, a3, a4, this, 45, "b", 1);
    CIOSocket::Close((CIOSocket *)this, a2, a3, a4);
  }
  else
  {
    Encode(a2, a3, a4, *(_BYTE *)(this + 124), (unsigned __int8 *)Src + 2, *((_DWORD *)Src + 2000) - 2);
    CIOSocket::Write((CIOSocket *)this, a2, a3, a4, (CIOBuffer *)Src);
  }
}

//----- (004948C0) --------------------------------------------------------
void __usercall CSocket::Write(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, int a1, char a2, ...)
{
  CMemory **v5; // [esp+0h] [ebp-10h]
  va_list va; // [esp+20h] [ebp+10h] BYREF

  va_start(va, a2);
  v5 = CIOBuffer::Alloc();
  *((_BYTE *)v5 + 2) = a2;
  *(_WORD *)v5 = (unsigned __int16)WritePacket(ebx0, edi0, a3, (char *)v5 + 3, (int)va) - (_WORD)v5;
  v5[2000] = (CMemory *)*(unsigned __int16 *)v5;
  CSocket::_CSocket(a1, v5);
}

//----- (00494930) --------------------------------------------------------
void __userpurge CSocket::Process(struct in_addr *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, unsigned __int16 *a2)
{
  int v5; // eax
  int v6; // eax
  char *v7; // eax
  char *v8; // eax
  char *v9; // eax
  char *v10; // eax
  char *v11; // eax
  ULONG v12; // [esp-Ch] [ebp-18Ch]
  const void *v13; // [esp-8h] [ebp-188h]
  int v14; // [esp-4h] [ebp-184h]
  int v15; // [esp-4h] [ebp-184h]
  int v16; // [esp-4h] [ebp-184h]
  int v17; // [esp-4h] [ebp-184h]
  int v18; // [esp-4h] [ebp-184h]
  char v20; // [esp+Ch] [ebp-174h] BYREF
  char v21[52]; // [esp+Dh] [ebp-173h] BYREF
  __int16 v22; // [esp+41h] [ebp-13Fh]
  char v23; // [esp+43h] [ebp-13Dh]
  int v24; // [esp+44h] [ebp-13Ch] BYREF
  char v25; // [esp+48h] [ebp-138h] BYREF
  int v26; // [esp+49h] [ebp-137h]
  int v27; // [esp+4Dh] [ebp-133h]
  int v28; // [esp+51h] [ebp-12Fh]
  int v29; // [esp+55h] [ebp-12Bh]
  __int16 v30; // [esp+59h] [ebp-127h]
  char v31; // [esp+5Bh] [ebp-125h]
  int v32; // [esp+5Ch] [ebp-124h]
  int v33; // [esp+60h] [ebp-120h] BYREF
  int v34; // [esp+64h] [ebp-11Ch] BYREF
  int v35; // [esp+68h] [ebp-118h] BYREF
  unsigned __int8 v36; // [esp+6Fh] [ebp-111h] BYREF
  char *v37; // [esp+70h] [ebp-110h] BYREF
  char *v38; // [esp+74h] [ebp-10Ch] BYREF
  int v39; // [esp+78h] [ebp-108h] BYREF
  unsigned __int8 v40; // [esp+7Fh] [ebp-101h] BYREF
  unsigned __int8 v41; // [esp+80h] [ebp-100h] BYREF
  unsigned __int8 v42; // [esp+81h] [ebp-FFh] BYREF
  unsigned __int8 v43; // [esp+82h] [ebp-FEh] BYREF
  unsigned __int8 v44; // [esp+83h] [ebp-FDh] BYREF
  char *v45; // [esp+84h] [ebp-FCh] BYREF
  unsigned __int8 v46; // [esp+89h] [ebp-F7h] BYREF
  unsigned __int8 v47; // [esp+8Ah] [ebp-F6h] BYREF
  unsigned __int8 v48; // [esp+8Bh] [ebp-F5h] BYREF
  _BYTE *v49; // [esp+8Ch] [ebp-F4h] BYREF
  char *name; // [esp+90h] [ebp-F0h] BYREF
  char v51; // [esp+94h] [ebp-ECh] BYREF
  int v52; // [esp+95h] [ebp-EBh]
  int v53; // [esp+99h] [ebp-E7h]
  int v54; // [esp+9Dh] [ebp-E3h]
  int v55; // [esp+A1h] [ebp-DFh]
  __int16 v56; // [esp+A5h] [ebp-DBh]
  char v57; // [esp+A7h] [ebp-D9h]
  int v58; // [esp+A8h] [ebp-D8h]
  int v59; // [esp+ACh] [ebp-D4h]
  char v60; // [esp+B3h] [ebp-CDh] BYREF
  int v61; // [esp+B4h] [ebp-CCh] BYREF
  int v62; // [esp+B8h] [ebp-C8h]
  int v63; // [esp+BCh] [ebp-C4h] BYREF
  char v64; // [esp+C0h] [ebp-C0h] BYREF
  char v65[156]; // [esp+C1h] [ebp-BFh] BYREF
  __int16 v66; // [esp+15Dh] [ebp-23h]
  char v67; // [esp+15Fh] [ebp-21h]
  int v68; // [esp+160h] [ebp-20h] BYREF
  int v69; // [esp+164h] [ebp-1Ch]
  ULONG v70; // [esp+168h] [ebp-18h]
  int v71; // [esp+16Ch] [ebp-14h] BYREF
  int v72; // [esp+170h] [ebp-10h]
  void *Src; // [esp+174h] [ebp-Ch]
  char *end; // [esp+178h] [ebp-8h]
  char v75[4]; // [esp+17Ch] [ebp-4h]

  v68 = dword_4D9830;
  Src = (char *)a2 + 3;
  end = (char *)a2 + *a2;
  *(_DWORD *)v75 = *((unsigned __int8 *)a2 + 2);
  if ( *(int *)v75 >= 11 )
  {
    if ( this[30].S_un.S_addr )
    {
      CPlayer::Process(this[30].S_un.S_addr, *(int *)v75, Src, (int)end);
    }
    else
    {
LABEL_83:
      if ( !CSocket::IsSBit(this, 6) )
      {
        v18 = CSocket::Id(this);
        v13 = (const void *)this[30].S_un.S_addr;
        v12 = this[34].S_un.S_addr;
        v11 = inet_ntoa(this[35]);
        LOG_NORMAL(
          "Invalid state at CSocket::Process() Type(%d) UID(%d) Bit(%x) Addr(%s) Port(%d) Player(%p) SID(%x)",
          *(_DWORD *)v75,
          this[38].S_un.S_addr,
          this[27].S_un.S_addr,
          v11,
          v12,
          v13,
          v18);
      }
    }
  }
  else
  {
    switch ( *(_DWORD *)v75 )
    {
      case 0:
        if ( (this[27].S_un.S_addr & 0x4E) != 2 )
          goto LABEL_83;
        ScanPacket(ebx0, a3, a4, (char *)Src, end, "d", &v33);
        CDBSocket::Write(79, "ddd", this[70].S_un.S_addr, this[38].S_un.S_addr, v33);
        return;
      case 1:
        if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
        {
          v25 = 0;
          v26 = 0;
          v27 = 0;
          v28 = 0;
          v29 = 0;
          v30 = 0;
          v31 = 0;
          ScanPacket(ebx0, a3, a4, (char *)Src, end, "m", &v25, 20);
          v32 = AntiCpSvr_6(&v25, (char *)&this[46].S_un.S_addr + 3, &this[65]);
          if ( v32 )
          {
            if ( (dword_4E1174[0] & 2) == 0 )
            {
              v16 = v32;
              v9 = inet_ntoa(this[35]);
              LOG_ERR(
                "_AntiCpSvr_AnalyzeGuidAckMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                this[38].S_un.S_addr,
                v9,
                v16);
              CSocket::Write(ebx0, a3, a4, (int)this, 45, "b", 1);
              sub_495B20((int)this, ebx0, a3, a4, 1);
            }
          }
        }
        return;
      case 2:
        if ( (this[27].S_un.S_addr & 0x43) != 0 )
          goto LABEL_83;
        if ( (dword_4E1174[0] & 8) != 0 )
        {
          ScanPacket(ebx0, a3, a4, (char *)Src, end, "ss", &name, 17, &v49, 9);
          if ( !sub_494230(name) )
          {
LABEL_44:
            CSocket::Write(ebx0, a3, a4, (int)this, 43, "b", 2);
            return;
          }
          if ( !*v49 )
          {
            CSocket::Write(ebx0, a3, a4, (int)this, 43, "b", 3);
            return;
          }
        }
        else
        {
          ScanPacket(ebx0, a3, a4, (char *)Src, end, "ss", &name, 17, &v49, 17);
          if ( !IsValidAdminName(name) )
            goto LABEL_44;
        }
        CAuthSocket::Write(
          ebx0,
          a3,
          a4,
          1,
          "dssdw",
          this[70].S_un.S_addr,
          name,
          v49,
          this[35].S_un.S_addr,
          this[34].S_un.S_addr);
        BitSet((volatile signed __int32 *)&this[27], 0);
        break;
      case 3:
        if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
        {
          v20 = 0;
          memset(v21, 0, sizeof(v21));
          v22 = 0;
          v23 = 0;
          ScanPacket(ebx0, (DWORD)&v24, a4, (char *)Src, end, "m", &v20, 56);
          this[68].S_un.S_addr = 0;
          v24 = AntiCpSvr_4(this[65].S_un.S_addr, &v20, (char *)&this[46].S_un.S_addr + 3);
          if ( !v24 || (dword_4E1174[0] & 2) != 0 )
          {
            if ( this[67].S_un.S_addr )
              this[67].S_un.S_addr = 0;
          }
          else
          {
            v17 = v24;
            v10 = inet_ntoa(this[35]);
            LOG_ERR(
              "_AntiCpSvr_AnalyzeAckMsg is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
              this[38].S_un.S_addr,
              v10,
              v17);
            CSocket::Write(ebx0, (DWORD)&v24, a4, (int)this, 45, "b", 1);
            sub_495B20((int)this, ebx0, (DWORD)&v24, a4, 1);
          }
        }
        return;
      case 4:
        if ( (this[27].S_un.S_addr & 0x4E) != 2 )
          goto LABEL_83;
        Src = ScanPacket(ebx0, a3, a4, (char *)Src, end, "s", &v45, 15);
        if ( IsValidName(v45) )
        {
          ScanPacket(ebx0, a3, a4, (char *)Src, end, "bbbbbbbb", &v41, &v48, &v46, &v44, &v40, &v42, &v47, &v43);
          CDBSocket::Write(
            34,
            "dsdbbbbbbbb",
            this[70].S_un.S_addr,
            v45,
            this[38].S_un.S_addr,
            v41,
            v48,
            v46,
            v44,
            v40,
            v42,
            v47,
            v43);
        }
        else
        {
          CSocket::Write(ebx0, a3, a4, (int)this, 67, "b", 4);
        }
        return;
      case 5:
        InterlockedDecrement((volatile LONG *)&this[43]);
        ScanPacket(ebx0, a3, a4, (char *)Src, end, "d", &v71);
        v72 = v71 - GetTickCount() - this[36].S_un.S_addr;
        if ( v72 <= 10000 )
        {
          if ( v72 < -10000 )
          {
            if ( v72 < -30000 )
            {
              v6 = CSocket::Id(this);
              LOG_NORMAL("[SpeedHack] UID(%d) Diff(%d) SID(%x)", this[38].S_un.S_addr, v72, v6);
            }
            this[36].S_un.S_addr += v72 + 10000;
          }
        }
        else if ( v72 <= 30000 )
        {
          this[36].S_un.S_addr += 1000;
        }
        else
        {
          v5 = CSocket::Id(this);
          LOG_NORMAL("[SpeedHack] UID(%d) Diff(%d) SID(%x)", this[38].S_un.S_addr, v72, v5);
          CSocket::Write(ebx0, a3, a4, (int)this, 45, "b", 4);
          sub_495B20((int)this, ebx0, a3, a4, 4);
        }
        if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
        {
          v70 = GetTickCount();
          if ( this[68].S_un.S_addr && this[66].S_un.S_addr - 115000 < v70 )
          {
            CSocket::Write(ebx0, a3, a4, (int)this, 45, "b", 1);
            sub_495B20((int)this, ebx0, a3, a4, 1);
          }
          if ( this[66].S_un.S_addr < v70 )
          {
            v64 = 0;
            memset(v65, 0, sizeof(v65));
            v66 = 0;
            v67 = 0;
            if ( this[67].S_un.S_addr )
              v69 = AntiCpSvr_3(this[65].S_un.S_addr, &v64, (char *)&this[46].S_un.S_addr + 3, 7);
            else
              v69 = AntiCpSvr_3(this[65].S_un.S_addr, &v64, (char *)&this[46].S_un.S_addr + 3, 1);
            if ( !v69 || (dword_4E1174[0] & 2) != 0 )
            {
              CSocket::Write(ebx0, (DWORD)&v68, a4, (int)this, 3, "m", &v64, 160);
              this[66].S_un.S_addr = v70 + 120000;
              this[68].S_un.S_addr = 1;
            }
            else
            {
              v14 = v69;
              v7 = inet_ntoa(this[35]);
              LOG_ERR(
                "_AntiCpSvr_MakeReqMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                this[38].S_un.S_addr,
                v7,
                v14);
              CSocket::Write(ebx0, (DWORD)&v68, a4, (int)this, 45, "b", 1);
              sub_495B20((int)this, ebx0, (DWORD)&v68, a4, 1);
            }
          }
        }
        return;
      case 6:
        if ( (this[27].S_un.S_addr & 0x4E) != 2 )
          goto LABEL_83;
        if ( (*(_WORD *)dword_4E1174 & 0x100) != 0 )
        {
          ScanPacket(ebx0, a3, a4, (char *)Src, end, "bss", &v36, &v38, 17, &v37, 15);
          if ( IsValidAdminName(v38) && IsValidName(v37) )
          {
            BitSet((volatile signed __int32 *)&this[27], 2u);
            CDBSocket::Write(52, "dbdss", this[70].S_un.S_addr, v36, this[38].S_un.S_addr, v38, v37);
          }
          else
          {
            CSocket::Write(ebx0, a3, a4, (int)this, 67, "b", 4);
          }
        }
        return;
      case 7:
        if ( (this[27].S_un.S_addr & 0x4E) != 2 )
          goto LABEL_83;
        ScanPacket(ebx0, a3, a4, (char *)Src, end, "d", &v39);
        if ( v39 )
          CDBSocket::Write(0, "ddd", v39, this[38].S_un.S_addr, this[70].S_un.S_addr);
        return;
      case 8:
        if ( (this[27].S_un.S_addr & 0x43) != 0 )
          goto LABEL_83;
        ScanPacket(ebx0, a3, a4, (char *)Src, end, "d", &v63);
        this[36].S_un.S_addr = v63 - GetTickCount();
        v62 = RandomBetween(1, 63);
        this[69].S_un.S_addr = RandomBetween(100000, 2000000000);
        if ( (*(_WORD *)dword_4E1174 & 0x4000) != 0 )
        {
          CSocket::Write(
            ebx0,
            a3,
            a4,
            (int)this,
            42,
            "dbddddbbbmm",
            this[69].S_un.S_addr,
            v62,
            dword_4E117C,
            Time,
            *(_DWORD *)dword_4E1174,
            dword_4E1178,
            dword_4E1188,
            dword_4E1184,
            dword_4E35B8,
            &unk_4E1368,
            550,
            &unk_4E158E,
            550);
          this[33].S_un.S_addr = 1;
        }
        else
        {
          CSocket::Write(
            ebx0,
            a3,
            a4,
            (int)this,
            42,
            "dbddddbbb",
            this[69].S_un.S_addr,
            v62,
            dword_4E117C,
            Time,
            *(_DWORD *)dword_4E1174,
            dword_4E1178,
            dword_4E1188,
            dword_4E1184,
            dword_4E35B8);
        }
        this[32].S_un.S_addr = v62;
        this[31].S_un.S_addr = v62;
        return;
      case 9:
        if ( (this[27].S_un.S_addr & 0x43) != 0 )
          goto LABEL_83;
        if ( *(_BYTE *)Src )
        {
          v59 = (signed int)this[69].S_un.S_addr % (int)uValue + 9052;
          ScanPacket(ebx0, a3, a4, (char *)Src, end, "bd", &v60, &v61);
          if ( v61 >= 9052 && v59 == v61 )
          {
            if ( (*(_WORD *)dword_4E1174 & 0x2000) != 0 )
            {
              v51 = 0;
              v52 = 0;
              v53 = 0;
              v54 = 0;
              v55 = 0;
              v56 = 0;
              v57 = 0;
              v58 = AntiCpSvr_5(&v51, (char *)&this[46].S_un.S_addr + 3);
              if ( !v58 || (dword_4E1174[0] & 2) != 0 )
              {
                CSocket::Write(ebx0, a3, a4, (int)this, 2, "m", &v51, 20);
              }
              else
              {
                v15 = v58;
                v8 = inet_ntoa(this[35]);
                LOG_ERR(
                  "_AntiCpSvr_MakeGuidReqMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                  this[38].S_un.S_addr,
                  v8,
                  v15);
                CSocket::Write(ebx0, a3, a4, (int)this, 45, "b", 1);
                sub_495B20((int)this, ebx0, a3, a4, 1);
              }
            }
          }
          else
          {
            CSocket::Write(ebx0, a3, a4, (int)this, 45, "b", 10);
            sub_495B20((int)this, ebx0, a3, a4, 10);
          }
        }
        else
        {
          CIOSocket::Close((CIOSocket *)this, ebx0, a3, a4);
        }
        return;
      case 0xA:
        if ( (this[27].S_un.S_addr & 0x4E) != 2 )
          goto LABEL_83;
        ScanPacket(ebx0, a3, a4, (char *)Src, end, "dd", &v35, &v34);
        sub_495D30((int)this, ebx0, a3, a4, v35, v34);
        return;
      default:
        goto LABEL_83;
    }
  }
}
// 4B4008: using guessed type int __stdcall AntiCpSvr_5(_DWORD, _DWORD);
// 4B400C: using guessed type int __stdcall AntiCpSvr_3(_DWORD, _DWORD, _DWORD, _DWORD);
// 4B4018: using guessed type int __stdcall AntiCpSvr_4(_DWORD, _DWORD, _DWORD);
// 4B401C: using guessed type int __stdcall AntiCpSvr_6(_DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4E1178: using guessed type int dword_4E1178;
// 4E117C: using guessed type int dword_4E117C;
// 4E1184: using guessed type int dword_4E1184;
// 4E1188: using guessed type int dword_4E1188;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00495770) --------------------------------------------------------
int __userpurge sub_495770@<eax>(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5, int a6, void *Src)
{
  int v10; // eax
  int result; // eax
  int v12; // [esp-1Ch] [ebp-24h]
  int v13; // [esp-18h] [ebp-20h]

  if ( a2 == 1 )
  {
    CSocket::Lock(this);
    if ( CSocket::IsSBit((_DWORD *)this, 6) )
    {
      v13 = *(_DWORD *)(this + 136);
      v12 = *(_DWORD *)(this + 140);
      v10 = CSocket::Id((_DWORD *)this);
      CAuthSocket::Write(ebx0, edi0, esi0, 2, "dddwbdddb", v10, a3, v12, v13, a4, 0, 0, 0, 7);
    }
    else
    {
      if ( *(_DWORD *)(this + 152) )
        EBREAK(ebx0, edi0, esi0);
      *(_DWORD *)(this + 152) = a3;
      *(_DWORD *)(this + 156) = a4 | (a6 != 0 ? 512 : 256);
      *(_DWORD *)(this + 160) = a5;
      time((__time32_t *const)(this + 148));
      *(_DWORD *)(this + 164) = *(_DWORD *)(this + 148);
      memcpy((void *)(this + 176), Src, 0xAu);
      CDBSocket::Write(33, "dd", *(_DWORD *)(this + 280), a3);
    }
    result = CSocket::Unlock(this);
  }
  else if ( a2 > 1 && a2 <= 9 )
  {
    CSocket::Write(ebx0, edi0, esi0, this, 43, "b", a2);
    result = BitReset((volatile signed __int32 *)(this + 108), 0);
  }
  else
  {
    CSocket::Write(ebx0, edi0, esi0, this, 43, "b", 0);
    result = BitReset((volatile signed __int32 *)(this + 108), 0);
  }
  return result;
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (004958F0) --------------------------------------------------------
void __userpurge sub_4958F0(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4)
{
  BitSet((volatile signed __int32 *)(this + 108), 1u);
  if ( dword_4E35B8 == 1 && (dword_4E1174[0] & 4) != 0 )
    CSocket::Write(ebx0, edi0, esi0, this, 98, "bd", *(_DWORD *)(this + 156) & 0x30, *(_DWORD *)(this + 160));
  CSocket::Write(ebx0, edi0, esi0, this, 17, "bdbm", *(_DWORD *)(this + 156), *(_DWORD *)(this + 160), a3, a2, a4);
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00495980) --------------------------------------------------------
void __userpurge sub_495980(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7)
{
  CSocket::Write(a2, a3, a4, a1, 68, "bbww", 15, a5, a6, a7);
}

//----- (004959B0) --------------------------------------------------------
void __userpurge sub_4959B0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, int a7)
{
  CSocket::Write(a2, a3, a4, a1, 68, "bwwd", 16, a5, a6, a7);
}

//----- (004959E0) --------------------------------------------------------
void __userpurge sub_4959E0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src)
{
  LONG v6; // eax
  int v8; // [esp+4h] [ebp-Ch]
  unsigned __int8 v9; // [esp+Bh] [ebp-5h] BYREF
  int v10; // [esp+Ch] [ebp-4h] BYREF

  if ( a5 == 1 )
  {
    ReadPacket(a2, a3, a4, Src, "db", &v10, &v9);
    if ( v10 )
    {
      v8 = CItem::CreateItem(dword_4D6AC4[v9], 0, 1, -1);
      if ( v8 )
      {
        v6 = CItem::NewIID();
        (*(void (__thiscall **)(int, int, LONG))(*(_DWORD *)v8 + 116))(v8, v10, v6);
      }
    }
    CDBSocket::Write(33, "dd", *(_DWORD *)(a1 + 280), *(_DWORD *)(a1 + 152));
  }
  else
  {
    CSocket::Write(a2, a3, a4, a1, 44, "b", a5);
  }
}

//----- (00495A90) --------------------------------------------------------
void __userpurge sub_495A90(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  switch ( a5 )
  {
    case 1:
      goto LABEL_6;
    case 2:
      CAuthSocket::Write(a2, a3, a4, 11, "bddbd", 5, 0, *(_DWORD *)(a1 + 152), 4, 0);
LABEL_6:
      CDBSocket::Write(33, "dd", *(_DWORD *)(a1 + 280), *(_DWORD *)(a1 + 152));
      return;
    case 3:
      CSocket::Write(a2, a3, a4, a1, 67, "b", 103);
      break;
  }
}

//----- (00495B20) --------------------------------------------------------
void __userpurge sub_495B20(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  __time32_t v5; // eax
  volatile int *v7; // [esp+4h] [ebp-4h]

  CSocket::Lock(a1);
  if ( *(_DWORD *)(a1 + 152) )
  {
    v5 = time(0);
    CAuthSocket::Write(
      a2,
      a3,
      a4,
      2,
      "dddwbdddb",
      *(_DWORD *)(a1 + 280),
      *(_DWORD *)(a1 + 152),
      *(_DWORD *)(a1 + 140),
      *(_DWORD *)(a1 + 136),
      *(_DWORD *)(a1 + 156),
      *(_DWORD *)(a1 + 168),
      *(_DWORD *)(a1 + 148),
      v5,
      a5);
    *(_DWORD *)(a1 + 152) = 0;
  }
  BitSet((volatile signed __int32 *)(a1 + 108), 6u);
  v7 = *(volatile int **)(a1 + 120);
  if ( v7 )
  {
    CIOObject::AddRef((CIOObject *)v7, a2, a3, a4, v7 + 88);
    CSocket::Unlock(a1);
    CBase::Delete((char *)v7);
    CIOObject::Release((CIOObject *)v7, a2, a3, a4, v7 + 88);
  }
  else
  {
    CSocket::Unlock(a1);
  }
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (00495C20) --------------------------------------------------------
void __usercall sub_495C20(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  CSocket::Write(a2, a3, a4, a1, 45, "b", 3);
  sub_495B20(a1, a2, a3, a4, 3);
}

//----- (00495C50) --------------------------------------------------------
void __userpurge sub_495C50(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, const char *a7)
{
  char Buffer[132]; // [esp+4h] [ebp-88h] BYREF
  int v9; // [esp+88h] [ebp-4h]

  v9 = dword_4D9830;
  if ( a5 == 1 )
  {
    sprintf(Buffer, "[Account Block] ID(%s), UID(%d)", a7, a6);
    CSocket::Write(a2, a3, a4, a1, 15, "s", Buffer);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00495CC0) --------------------------------------------------------
void __userpurge sub_495CC0(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, int a6, const char *a7)
{
  char Buffer[132]; // [esp+4h] [ebp-88h] BYREF
  int v9; // [esp+88h] [ebp-4h]

  v9 = dword_4D9830;
  if ( a5 == 1 )
  {
    sprintf(Buffer, "[Account Free] ID(%s), UID(%d)", a7, a6);
    CSocket::Write(a2, a3, a4, a1, 15, "s", Buffer);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00495D30) --------------------------------------------------------
void __userpurge sub_495D30(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  int v6; // [esp+0h] [ebp-14h]
  CMemory **v8; // [esp+8h] [ebp-Ch]
  bool v9; // [esp+Ch] [ebp-8h]
  CIOObject *v10; // [esp+10h] [ebp-4h]

  v10 = *(CIOObject **)(this + 120);
  CSocket::Lock(this);
  v8 = operator_new(0x690u);
  if ( v8 )
    v6 = CPlayer::CPlayer((int)v8, this, *(_DWORD *)(this + 152), a2);
  else
    v6 = 0;
  *(_DWORD *)(this + 120) = v6;
  CIOObject::AddRef(*(CIOObject **)(this + 120), ebx0, edi0, a4, (volatile int *)(*(_DWORD *)(this + 120) + 440));
  CSocket::Unlock(this);
  if ( v10 )
  {
    CBase::Delete((char *)v10);
    CIOObject::Release(v10, ebx0, edi0, a4, (volatile int *)v10 + 110);
  }
  BitSet((volatile signed __int32 *)(this + 108), 3u);
  v9 = 0;
  if ( a3 )
  {
    if ( CGuild::IsLoad(a3) )
      a3 = 0;
    else
      v9 = CAlliance::IsLoad(a3) == 0;
  }
  CDBSocket::Write(1, "ddddb", a2, a3, *(_DWORD *)(this + 152), *(_DWORD *)(this + 280), v9);
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (00495E50) --------------------------------------------------------
void __userpurge CSocket::OnDelPlayer(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a4@<esi>, int a2, int a3)
{
  CIOObject *v7; // [esp+4h] [ebp-4h]

  if ( a2 == 1 )
  {
    CSocket::Lock(this);
    v7 = *(CIOObject **)(this + 120);
    if ( v7 )
    {
      CIOObject::AddRef(v7, ebx0, edi0, a4, (volatile int *)v7 + 88);
      CSocket::Unlock(this);
      if ( CPlayer::OnLoadPlayer((int)v7, a3) )
      {
        BitSet((volatile signed __int32 *)(this + 108), 4u);
        if ( (dword_4E1178 & 0x100) != 0 )
          CAuthSocket::Write(ebx0, edi0, a4, 15, "dd", *((_DWORD *)v7 + 112), *((_DWORD *)v7 + 113));
      }
      else
      {
        BitReset((volatile signed __int32 *)(this + 108), 3u);
        CSocket::Write(ebx0, edi0, a4, this, 67, "b", 7);
      }
      CIOObject::Release(v7, ebx0, edi0, a4, (volatile int *)v7 + 88);
    }
    else
    {
      CSocket::Unlock(this);
    }
  }
  else
  {
    BitReset((volatile signed __int32 *)(this + 108), 3u);
    if ( a2 == 2 )
      CSocket::Write(ebx0, edi0, a4, this, 67, "b", 7);
    else
      CSocket::Write(ebx0, edi0, a4, this, 67, "b", 8);
  }
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);
// 4E1178: using guessed type int dword_4E1178;

//----- (00495F90) --------------------------------------------------------
void __userpurge sub_495F90(int this@<ecx>, DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, int a2, int a3, int a4, int a5)
{
  int v9; // [esp+4h] [ebp-4h]

  if ( a2 == 2 )
  {
    CSocket::Lock(this);
    if ( CSocket::IsSBit((_DWORD *)this, 6) )
    {
      CSocket::Unlock(this);
    }
    else
    {
      v9 = *(_DWORD *)(this + 152);
      CSocket::Unlock(this);
      CAuthSocket::Write(ebx0, edi0, esi0, 12, "dbdss", *(_DWORD *)(this + 280), a3, v9, a4, a5);
    }
  }
  else
  {
    BitReset((volatile signed __int32 *)(this + 108), 2u);
    CSocket::Write(ebx0, edi0, esi0, this, 97, "b", a2);
  }
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (00496030) --------------------------------------------------------
void __userpurge sub_496030(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5, void *Src, int a7)
{
  int v7; // eax
  int i; // [esp+4h] [ebp-14h]
  _DWORD *v10; // [esp+8h] [ebp-10h]
  unsigned __int8 v11; // [esp+12h] [ebp-6h] BYREF
  unsigned __int8 v12; // [esp+13h] [ebp-5h] BYREF
  int v13; // [esp+14h] [ebp-4h]
  char *Srca; // [esp+24h] [ebp+Ch]

  if ( a5 == 1 )
  {
    CSocket::Lock(a1);
    if ( CSocket::IsSBit((_DWORD *)a1, 6) )
    {
      CSocket::Unlock(a1);
    }
    else
    {
      v13 = *(_DWORD *)(a1 + 152);
      CSocket::Unlock(a1);
      Srca = (char *)ReadPacket(a2, a3, a4, Src, "b", &v11);
      v10 = ReadPacket(a2, a3, a4, &Srca[v11], "b", &v12);
      for ( i = 0; i < v12; ++i )
      {
        v7 = CItem::NewIID();
        sub_44F9B0(v10, v7);
        v10 = (_DWORD *)((char *)v10 + 26);
      }
      CDBSocket::Write(54, "ddm", *(_DWORD *)(a1 + 280), v13, Srca, a7 - (_DWORD)Srca);
    }
  }
  else
  {
    BitReset((volatile signed __int32 *)(a1 + 108), 2u);
    CSocket::Write(a2, a3, a4, a1, 97, "b", a5);
  }
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (00496150) --------------------------------------------------------
void __userpurge sub_496150(int a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  if ( a5 == 1 )
  {
    CSocket::Write(a2, a3, a4, a1, 45, "b", 8);
    sub_495B20(a1, a2, a3, a4, 8);
  }
  else
  {
    BitReset((volatile signed __int32 *)(a1 + 108), 2u);
    CSocket::Write(a2, a3, a4, a1, 97, "b", a5);
  }
}

//----- (004961B0) --------------------------------------------------------
BOOL CStatus::Update()
{
  struct Concurrency::details::UMSThreadProxy *v0; // eax
  struct Concurrency::details::UMSThreadProxy *v1; // eax
  int v2; // eax
  int v3; // eax
  LONG v4; // eax
  LONG v5; // eax

  CSocket::Lock(&unk_4E2EDC);
  CScreen::Empty((Concurrency::details::WorkSearchContext *)&unk_4E2EDC);
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " Running Thread : %d", dword_4E0FDC);
  v0 = Concurrency::details::UMSFreeVirtualProcessorRoot::GetExecutingProxy((Concurrency::details::UMSFreeVirtualProcessorRoot *)&unk_4DA7B8);
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " Pending DB Output : %d", v0);
  v1 = Concurrency::details::UMSFreeVirtualProcessorRoot::GetExecutingProxy((Concurrency::details::UMSFreeVirtualProcessorRoot *)dword_4DA6F0);
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " Pending Auth Output : %d", v1);
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " ====================");
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " Change of Currency : %d", dword_4E2014);
  v2 = sub_47E710();
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " Max. Connection : %d", v2);
  v3 = sub_47E700();
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " Cur. Connection : %d", v3);
  v4 = CMonster::Size();
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " Monster : %d", v4);
  v5 = CNPC::Size();
  CScreen::Add((CScreen *)&unk_4E2EDC, 0, " NPC : %d", v5);
  CSocket::Unlock(&unk_4E2EDC);
  return InvalidateRect(hWnd, 0, 1);
}
// 4327C0: using guessed type int __thiscall CSocket::Lock(_DWORD);
// 4327E0: using guessed type int __thiscall CSocket::Unlock(_DWORD);

//----- (00496300) --------------------------------------------------------
void *__thiscall sub_496300(void *this)
{
  int v2; // [esp+4h] [ebp-18h]
  int l; // [esp+8h] [ebp-14h]
  int k; // [esp+Ch] [ebp-10h]
  int v5; // [esp+10h] [ebp-Ch]
  int j; // [esp+14h] [ebp-8h]
  int i; // [esp+18h] [ebp-4h]

  dword_4E35B0 = 6;
  dword_4E35AC = 11;
  dword_4E35A8 = 6;
  for ( i = 0; i < 10; ++i )
  {
    for ( j = 0; j < 21; ++j )
    {
      v5 = dword_4D8528[21 * i + j];
      switch ( v5 )
      {
        case 100:
          dword_4E3260[21 * i + j] = 6;
          break;
        case 50:
          dword_4E3260[21 * i + j] = 5;
          break;
        case 25:
          dword_4E3260[21 * i + j] = 4;
          break;
        default:
          dword_4E3260[21 * i + j] = 3;
          break;
      }
    }
  }
  for ( k = 0; k < 10; ++k )
  {
    for ( l = 0; l < 21; ++l )
    {
      v2 = dword_4D8870[21 * k + l];
      switch ( v2 )
      {
        case 100:
          dword_4E2F18[21 * k + l] = 0;
          break;
        case 50:
          dword_4E2F18[21 * k + l] = 1;
          break;
        case 25:
          dword_4E2F18[21 * k + l] = 2;
          break;
        default:
          dword_4E2F18[21 * k + l] = 3;
          break;
      }
    }
  }
  return this;
}
// 4E35A8: using guessed type int dword_4E35A8;
// 4E35AC: using guessed type int dword_4E35AC;
// 4E35B0: using guessed type int dword_4E35B0;

//----- (004964E0) --------------------------------------------------------
int __thiscall sub_4964E0(int *this)
{
  int result; // eax
  int v2; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  result = (int)this;
  for ( i = *this; i; i = v2 )
  {
    v2 = *(_DWORD *)(i + 16);
    *(_DWORD *)(i + 16) = -6;
    result = CBase::Delete((char *)i);
  }
  return result;
}

//----- (00496520) --------------------------------------------------------
int __userpurge sub_496520@<eax>(int *a1@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a5)
{
  int result; // eax

  if ( *(_DWORD *)(a5 + 16) != -6 )
    EBREAK(a2, a3, a4);
  result = *a1;
  *(_DWORD *)(a5 + 16) = *a1;
  *a1 = a5;
  return result;
}

//----- (00496550) --------------------------------------------------------
int __thiscall sub_496550(Concurrency::details::_CancellationTokenRegistration **this, Concurrency::details::_CancellationTokenRegistration *a2)
{
  Concurrency::details::_CancellationTokenRegistration *v4; // [esp+8h] [ebp-4h]

  while ( 1 )
  {
    v4 = *this;
    if ( *this == a2 )
    {
      *this = Concurrency::details::_CancellationTokenRegistration::_GetToken(a2);
      *((_DWORD *)a2 + 4) = -6;
      return 1;
    }
    if ( !v4 )
      break;
    this = (Concurrency::details::_CancellationTokenRegistration **)((char *)v4 + 16);
  }
  return 0;
}

//----- (004965B0) --------------------------------------------------------
Concurrency::details::_CancellationTokenRegistration *__userpurge CTile::GetItem@<eax>(Concurrency::details::_CancellationTokenRegistration **this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, int a2)
{
  struct Concurrency::details::_CancellationTokenState *i; // [esp+8h] [ebp-4h]

  for ( i = *this; i; i = Concurrency::details::_CancellationTokenRegistration::_GetToken(i) )
  {
    if ( *((_DWORD *)i + 4) == -6 )
    {
      *this = 0;
      ELOG("CTile::GetItem %p %p\n", (char)i);
      EBREAK(ebx0, a3, a4);
      return 0;
    }
    if ( (*(int (__thiscall **)(struct Concurrency::details::_CancellationTokenState *))(*(_DWORD *)i + 68))(i)
      && a2 == std___Mpunct_wchar_t___do_frac_digits(i) )
    {
      return i;
    }
  }
  return 0;
}

//----- (00496640) --------------------------------------------------------
volatile signed __int32 *__thiscall sub_496640(volatile signed __int32 *this, int a2, int a3)
{
  CBase::CBase((CBase *)this);
  *this = (volatile signed __int32)&off_4C0E08;
  BitSet(this + 5, 1u);
  *((_DWORD *)this + 8) = a2;
  *((_DWORD *)this + 9) = a3;
  return this;
}
// 4C0E08: using guessed type int (__stdcall *off_4C0E08)(int);

//----- (00496690) --------------------------------------------------------
void *__userpurge sub_496690@<eax>(void *this@<ecx>, DWORD ebx0@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>, char a2)
{
  CTables::CTables((CTables *)this, ebx0, a3, a4);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (004966C0) --------------------------------------------------------
CTables *__usercall CTables::CTables@<eax>(CTables *this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  *(_DWORD *)this = &off_4C0E08;
  CIOObject::Release(*((volatile int **)this + 8), a2, a3, a4);
  CIOObject::Release(*((volatile int **)this + 9), a2, a3, a4);
  return (CTables *)CBase::_CBase(this, a2, a3, a4);
}
// 4C0E08: using guessed type int (__stdcall *off_4C0E08)(int);

//----- (00496700) --------------------------------------------------------
void __usercall sub_496700(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, _DWORD *a1, _DWORD *a2)
{
  int v5; // eax
  int v6; // eax
  volatile signed __int32 *v7; // [esp+0h] [ebp-Ch]
  CMemory **v8; // [esp+4h] [ebp-8h]

  sub_460490((unsigned int)a1, (unsigned int)a2);
  if ( !CBase::IsDeleted(a1) && !CBase::IsDeleted(a2) )
  {
    if ( sub_448870(a1 + 83, a2 + 83) <= 64 )
    {
      if ( a1[275] )
      {
        CPlayer::Write((int)a2, 67, "b", 19);
      }
      else if ( a2[275] )
      {
        CPlayer::Write((int)a1, 67, "b", 19);
      }
      else
      {
        CIOObject::AddRef(a1, ebx0, edi0, a3);
        CIOObject::AddRef(a2, ebx0, edi0, a3);
        v8 = operator_new(0x28u);
        if ( v8 )
          v7 = sub_496640((volatile signed __int32 *)v8, (int)a1, (int)a2);
        else
          v7 = 0;
        a2[275] = v7;
        a1[275] = v7;
        v5 = std___Mpunct_wchar_t___do_frac_digits(a2);
        CPlayer::Write((int)a1, 77, "bd", 1, v5);
        v6 = std___Mpunct_wchar_t___do_frac_digits(a1);
        CPlayer::Write((int)a2, 77, "bd", 1, v6);
      }
    }
    else
    {
      CPlayer::Write((int)a1, 67, "b", 24);
      CPlayer::Write((int)a2, 67, "b", 24);
    }
  }
  sub_44D620((int)a1, (int)a2);
}

//----- (00496880) --------------------------------------------------------
void __usercall sub_496880(int this@<ecx>, DWORD a2@<ebx>, DWORD a3@<edi>, DWORD a4@<esi>)
{
  sub_460490(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
  if ( !BitSet((volatile signed __int32 *)(this + 20), 4u) )
  {
    CPlayer::_EndTrade(*(_DWORD *)(this + 32), 2);
    CPlayer::_EndTrade(*(_DWORD *)(this + 36), 2);
  }
  sub_44D620(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
  CBase::OnDelete((volatile int *)this, a2, a3, a4);
}

//----- (004968F0) --------------------------------------------------------
void __thiscall sub_4968F0(int this, int a2)
{
  sub_460490(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
  if ( BitSet((volatile signed __int32 *)(this + 20), 2u) )
  {
    sub_44D620(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
  }
  else
  {
    if ( !BitSet((volatile signed __int32 *)(this + 20), 4u) )
    {
      CPlayer::_EndTrade(*(_DWORD *)(this + 32), 3);
      CPlayer::_EndTrade(*(_DWORD *)(this + 36), 3);
    }
    sub_44D620(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
    CBase::Delete((char *)this);
  }
}

//----- (00496990) --------------------------------------------------------
void __thiscall sub_496990(int this, _DWORD *a2)
{
  int v2; // eax

  sub_460490(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
  CPlayer::AddEState(a2, 4);
  v2 = CTrade::GetOther((_DWORD *)this, (int)a2);
  CPlayer::Write(v2, 67, "b", 22);
  if ( CPlayer::IsEState(*(_DWORD **)(this + 32), 4) && CPlayer::IsEState(*(_DWORD **)(this + 36), 4) )
  {
    if ( sub_448870((_DWORD *)(*(_DWORD *)(this + 32) + 332), (_DWORD *)(*(_DWORD *)(this + 36) + 332)) <= 64
      && !BitSet((volatile signed __int32 *)(this + 20), 4u) )
    {
      sub_45FA10(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
      if ( CPlayer::_CheckTrade(*(_DWORD **)(this + 32)) && CPlayer::_CheckTrade(*(_DWORD **)(this + 36)) )
      {
        CPlayer::_TradeItem(*(_DWORD **)(this + 32), *(_DWORD **)(this + 36));
        CPlayer::_TradeItem(*(_DWORD **)(this + 36), *(_DWORD **)(this + 32));
        CPlayer::_EndTrade(*(_DWORD *)(this + 32), 1);
        CPlayer::_EndTrade(*(_DWORD *)(this + 36), 1);
      }
      else
      {
        CPlayer::_EndTrade(*(_DWORD *)(this + 32), 2);
        CPlayer::_EndTrade(*(_DWORD *)(this + 36), 2);
      }
      sub_45FA60(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
    }
    sub_44D620(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
    CBase::Delete((char *)this);
  }
  else
  {
    sub_44D620(*(_DWORD *)(this + 32), *(_DWORD *)(this + 36));
  }
}

//----- (00496B30) --------------------------------------------------------
void __userpurge Encode(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char chCodeNum, unsigned __int8 *ptr, int len)
{
  unsigned __int8 *v6; // [esp+0h] [ebp-4h]

  if ( chCodeNum < 0 || chCodeNum >= 64 )
    EBREAK(a1, a2, a3);
  v6 = &ptr[len];
  while ( ptr != v6 )
  {
    *ptr = g_chEncodeCode[chCodeNum][*ptr];
    ++ptr;
  }
}

//----- (00496B90) --------------------------------------------------------
void __userpurge Decode(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char chCodeNum, unsigned __int8 *ptr, int len)
{
  unsigned __int8 *v6; // [esp+0h] [ebp-4h]

  if ( chCodeNum >= 64 )
    EBREAK(a1, a2, a3);
  v6 = &ptr[len];
  while ( ptr != v6 )
  {
    *ptr = g_chEncodeCode[chCodeNum + 100][*ptr];
    ++ptr;
  }
}

//----- (00496BE0) --------------------------------------------------------
void __cdecl InitRandom()
{
  unsigned int v0; // eax
  int i; // [esp+0h] [ebp-4h]
  int j; // [esp+0h] [ebp-4h]

  v0 = time(0);
  srand(v0);
  g_nRandtable[0] = time(0);
  for ( i = 1; i < 32; ++i )
    g_nRandtable[i] = 1103515245 * dword_4E36C4[i] + 12345;
  g_nRandIndex = 2;
  for ( j = 0; j < 310; ++j )
    Random();
}
// 4E36C4: using guessed type int dword_4E36C4[];

//----- (00496C70) --------------------------------------------------------
unsigned int __cdecl Random()
{
  return (unsigned int)_Random() >> 1;
}

//----- (00496C80) --------------------------------------------------------
int __cdecl _Random()
{
  char v0; // al

  v0 = InterlockedIncrement(&g_nRandIndex);
  g_nRandtable[v0 & 0x1F] += g_nRandtable[(v0 - 3) & 0x1F];
  return g_nRandtable[v0 & 0x1F];
}

//----- (00496CD0) --------------------------------------------------------
int __fastcall BitSet(volatile signed __int32 *pBit, unsigned int nOffset)
{
  int result; // eax

  if ( _interlockedbittestandset(pBit, nOffset) )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (00496CE0) --------------------------------------------------------
int __fastcall BitReset(volatile signed __int32 *pBit, unsigned int nOffset)
{
  int result; // eax

  if ( _interlockedbittestandreset(pBit, nOffset) )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (00496CF0) --------------------------------------------------------
void *__userpurge WritePacket@<eax>(DWORD ebx0@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, void *a1, int a2)
{
  int v5; // ecx
  int v7; // [esp+4h] [ebp-14h]
  size_t Size; // [esp+8h] [ebp-10h]
  void *Src; // [esp+Ch] [ebp-Ch]
  _BYTE *v10; // [esp+10h] [ebp-8h]
  char *v11; // [esp+14h] [ebp-4h]
  int v12; // [esp+24h] [ebp+Ch]
  int v13; // [esp+24h] [ebp+Ch]

  v12 = a2 + 4;
  v11 = *(char **)(v12 - 4);
  while ( 1 )
  {
    v7 = *v11++;
    switch ( v7 )
    {
      case 0:
        return a1;
      case 66:
      case 98:
        v12 += 4;
        *(_BYTE *)a1 = *(_BYTE *)(v12 - 4);
        a1 = (char *)a1 + 1;
        break;
      case 73:
        v12 += 8;
        *(_DWORD *)a1 = *(_DWORD *)(v12 - 8);
        *((_DWORD *)a1 + 1) = *(_DWORD *)(v12 - 4);
        a1 = (char *)a1 + 8;
        break;
      case 77:
      case 109:
        v13 = v12 + 4;
        Src = *(void **)(v13 - 4);
        v12 = v13 + 4;
        Size = *(_DWORD *)(v12 - 4);
        memcpy(a1, Src, Size);
        a1 = (char *)a1 + Size;
        break;
      case 83:
      case 115:
        v12 += 4;
        v10 = *(_BYTE **)(v12 - 4);
        if ( v10 )
        {
          do
          {
            *(_BYTE *)a1 = *v10;
            v5 = *(char *)a1;
            a1 = (char *)a1 + 1;
            ++v10;
          }
          while ( v5 );
        }
        else
        {
          *(_BYTE *)a1 = 0;
          a1 = (char *)a1 + 1;
        }
        break;
      case 87:
      case 119:
        v12 += 4;
        *(_WORD *)a1 = *(_WORD *)(v12 - 4);
        a1 = (char *)a1 + 2;
        break;
      case 100:
        v12 += 4;
        *(_DWORD *)a1 = *(_DWORD *)(v12 - 4);
        a1 = (char *)a1 + 4;
        break;
      default:
        EBREAK(ebx0, edi0, a3);
        break;
    }
  }
}

//----- (00496F10) --------------------------------------------------------
char *__usercall WritePacket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char *packet, const char *__formal, ...)
{
  return (char *)WritePacket(a1, a2, a3, packet, (int)&__formal);
}

//----- (00496F40) --------------------------------------------------------
void *__userpurge ReadPacketV@<eax>(DWORD a1@<ebx>, DWORD edi0@<edi>, DWORD a3@<esi>, void *Src, int a2)
{
  _DWORD *v5; // edx
  int v6; // ecx
  int v7; // ecx
  int v9; // [esp+4h] [ebp-1Ch]
  int v10; // [esp+8h] [ebp-18h]
  void **v11; // [esp+Ch] [ebp-14h]
  size_t Size; // [esp+10h] [ebp-10h]
  void *v13; // [esp+14h] [ebp-Ch]
  _BYTE *v14; // [esp+18h] [ebp-8h]
  char *v15; // [esp+1Ch] [ebp-4h]
  int v16; // [esp+2Ch] [ebp+Ch]
  int v17; // [esp+2Ch] [ebp+Ch]
  int v18; // [esp+2Ch] [ebp+Ch]

  v16 = a2 + 4;
  v15 = *(char **)(v16 - 4);
  while ( 1 )
  {
    v9 = *v15++;
    switch ( v9 )
    {
      case 0:
        return Src;
      case 66:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = *(char *)Src;
        Src = (char *)Src + 1;
        break;
      case 73:
        v16 += 4;
        v5 = *(_DWORD **)(v16 - 4);
        *v5 = *(_DWORD *)Src;
        v5[1] = *((_DWORD *)Src + 1);
        Src = (char *)Src + 8;
        break;
      case 77:
        v18 = v16 + 4;
        v11 = *(void ***)(v18 - 4);
        v16 = v18 + 4;
        v10 = *(_DWORD *)(v16 - 4);
        *v11 = Src;
        Src = (char *)Src + v10;
        break;
      case 83:
        v16 += 4;
        v14 = *(_BYTE **)(v16 - 4);
        do
        {
          *v14 = *(_BYTE *)Src;
          v7 = (char)*v14++;
          Src = (char *)Src + 1;
        }
        while ( v7 );
        break;
      case 87:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = *(unsigned __int16 *)Src;
        Src = (char *)Src + 2;
        break;
      case 98:
        v16 += 4;
        **(_BYTE **)(v16 - 4) = *(_BYTE *)Src;
        Src = (char *)Src + 1;
        break;
      case 100:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = *(_DWORD *)Src;
        Src = (char *)Src + 4;
        break;
      case 109:
        v17 = v16 + 4;
        v13 = *(void **)(v17 - 4);
        v16 = v17 + 4;
        Size = *(_DWORD *)(v16 - 4);
        memcpy(v13, Src, Size);
        Src = (char *)Src + Size;
        break;
      case 115:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = Src;
        do
        {
          v6 = *(char *)Src;
          Src = (char *)Src + 1;
        }
        while ( v6 );
        break;
      case 119:
        v16 += 4;
        **(_WORD **)(v16 - 4) = *(_WORD *)Src;
        Src = (char *)Src + 2;
        break;
      default:
        EBREAK(a1, edi0, a3);
        break;
    }
  }
}

//----- (00497220) --------------------------------------------------------
void *__usercall ReadPacket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, void *Src, ...)
{
  va_list va; // [esp+10h] [ebp+Ch] BYREF

  va_start(va, Src);
  return ReadPacketV(a1, a2, a3, Src, (int)va);
}

//----- (00497250) --------------------------------------------------------
void *__userpurge ScanPacketV@<eax>(DWORD a1@<ebx>, DWORD edi0@<edi>, DWORD esi0@<esi>, void *Src, int a2, int a3)
{
  _DWORD *v6; // edx
  int v7; // edx
  int v8; // edx
  char *v10; // [esp+0h] [ebp-34h]
  char *v11; // [esp+4h] [ebp-30h]
  int v12; // [esp+Ch] [ebp-28h]
  size_t Size; // [esp+10h] [ebp-24h]
  void *v14; // [esp+14h] [ebp-20h]
  _BYTE *v15; // [esp+18h] [ebp-1Ch]
  int v16; // [esp+1Ch] [ebp-18h]
  int v17; // [esp+24h] [ebp-10h]
  void **v18; // [esp+28h] [ebp-Ch]
  char *v19; // [esp+30h] [ebp-4h]
  int v20; // [esp+44h] [ebp+10h]
  int v21; // [esp+44h] [ebp+10h]
  int v22; // [esp+44h] [ebp+10h]
  int v23; // [esp+44h] [ebp+10h]

  v20 = a3 + 4;
  v19 = *(char **)(v20 - 4);
  while ( 1 )
  {
LABEL_2:
    v12 = *v19++;
    switch ( v12 )
    {
      case 0:
        return Src;
      case 66:
        if ( (unsigned int)Src < a2 )
        {
          v20 += 4;
          **(_DWORD **)(v20 - 4) = *(char *)Src;
          Src = (char *)Src + 1;
        }
        continue;
      case 73:
        if ( (unsigned int)Src + 8 <= a2 )
        {
          v20 += 4;
          v6 = *(_DWORD **)(v20 - 4);
          *v6 = *(_DWORD *)Src;
          v6[1] = *((_DWORD *)Src + 1);
          Src = (char *)Src + 8;
        }
        continue;
      case 83:
        v22 = v20 + 4;
        v15 = *(_BYTE **)(v22 - 4);
        v20 = v22 + 4;
        v16 = *(_DWORD *)(v20 - 4);
        if ( v16 <= 0 )
          EBREAK(a1, edi0, esi0);
        if ( Src == (void *)a2 )
        {
          *v15 = 0;
          continue;
        }
        if ( (unsigned int)Src + v16 >= a2 )
          v10 = (char *)a2;
        else
          v10 = (char *)Src + v16;
        while ( 1 )
        {
          *v15 = *(_BYTE *)Src;
          v8 = (char)*v15++;
          Src = (char *)Src + 1;
          if ( !v8 )
            goto LABEL_2;
          if ( Src == v10 )
          {
            *(v15 - 1) = 0;
            goto LABEL_2;
          }
        }
      case 87:
        if ( (unsigned int)Src + 2 <= a2 )
        {
          v20 += 4;
          **(_DWORD **)(v20 - 4) = *(unsigned __int16 *)Src;
          Src = (char *)Src + 2;
        }
        continue;
      case 98:
        if ( (unsigned int)Src < a2 )
        {
          v20 += 4;
          **(_BYTE **)(v20 - 4) = *(_BYTE *)Src;
          Src = (char *)Src + 1;
        }
        continue;
      case 100:
        if ( (unsigned int)Src + 4 <= a2 )
        {
          v20 += 4;
          **(_DWORD **)(v20 - 4) = *(_DWORD *)Src;
          Src = (char *)Src + 4;
        }
        continue;
      case 109:
        v23 = v20 + 4;
        v14 = *(void **)(v23 - 4);
        v20 = v23 + 4;
        Size = *(_DWORD *)(v20 - 4);
        if ( (unsigned int)Src + Size <= a2 )
        {
          memcpy(v14, Src, Size);
          Src = (char *)Src + Size;
        }
        continue;
      case 115:
        v21 = v20 + 4;
        v18 = *(void ***)(v21 - 4);
        v20 = v21 + 4;
        v17 = *(_DWORD *)(v20 - 4);
        *v18 = Src;
        if ( (unsigned int)Src + v17 >= a2 )
          v11 = (char *)a2;
        else
          v11 = (char *)Src + v17;
        break;
      case 119:
        if ( (unsigned int)Src + 2 <= a2 )
        {
          v20 += 4;
          **(_WORD **)(v20 - 4) = *(_WORD *)Src;
          Src = (char *)Src + 2;
        }
        continue;
      default:
        EBREAK(a1, edi0, esi0);
        continue;
    }
    while ( Src != v11 )
    {
      v7 = *(char *)Src;
      Src = (char *)Src + 1;
      if ( !v7 )
        goto LABEL_2;
    }
    *v18 = (void *)&::Src;
  }
}

//----- (004975F0) --------------------------------------------------------
char *__usercall ScanPacket@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>, char *packet, char *end, const char *__formal, ...)
{
  return (char *)ScanPacketV(a1, a2, a3, packet, (int)end, (int)&__formal);
}

//----- (00497620) --------------------------------------------------------
char *__stdcall GetString(char *packet, char *str)
{
  int v2; // ecx

  do
  {
    *str = *packet;
    v2 = *str++;
    ++packet;
  }
  while ( v2 );
  return packet;
}

//----- (00497660) --------------------------------------------------------
char *__stdcall PutString(char *packet, const char *str)
{
  int v2; // ecx

  do
  {
    *packet = *str;
    v2 = *packet++;
    ++str;
  }
  while ( v2 );
  return packet;
}

//----- (004976A0) --------------------------------------------------------
void __cdecl init_codepage()
{
  int v0; // [esp+0h] [ebp-8h]
  int C; // [esp+4h] [ebp-4h]

  for ( C = 0; C < 256; ++C )
  {
    if ( IsDBCSLeadByte(C) )
      LOBYTE(v0) = -1;
    else
      v0 = tolower(C) & 0x7F;
    byte_4E35C0[C] = v0;
  }
}

//----- (00497700) --------------------------------------------------------
int __stdcall mbstricmp(const char *s1, const char *s2)
{
  int v3; // [esp+0h] [ebp-Ch]
  int v4; // [esp+0h] [ebp-Ch]
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+4h] [ebp-8h]
  int v7; // [esp+4h] [ebp-8h]

  while ( 1 )
  {
    while ( 1 )
    {
      v5 = *(unsigned __int8 *)s1++;
      v3 = *(unsigned __int8 *)s2++;
      if ( byte_4E35C0[v5] >= 0 )
        break;
      v6 = v5 - v3;
      if ( !v6 )
      {
        v7 = *(unsigned __int8 *)s1++;
        v4 = *(unsigned __int8 *)s2++;
        v6 = v7 - v4;
        if ( !v6 )
          continue;
      }
      return v6;
    }
    if ( byte_4E35C0[v5] != byte_4E35C0[v3] )
      break;
    if ( !v5 )
      return 0;
  }
  return byte_4E35C0[v5] - byte_4E35C0[v3];
}

//----- (004977B0) --------------------------------------------------------
int __stdcall IsValidString(const char *str)
{
  int result; // eax
  int v2; // eax
  const char *v3; // [esp+Ch] [ebp+8h]
  const char *v4; // [esp+Ch] [ebp+8h]

  if ( !*str )
    return 0;
  if ( dword_4E35B8 )
  {
    if ( dword_4E35B8 == 1 )
    {
      while ( 1 )
      {
        if ( isalnum(*(unsigned __int8 *)str) || strchr(" \n", *(unsigned __int8 *)str) )
        {
          ++str;
        }
        else
        {
          if ( *(unsigned __int8 *)str < 0xB0u || *(unsigned __int8 *)str > 0xF7u )
            return 0;
          v2 = *(unsigned __int8 *)str;
          v4 = str + 1;
          if ( v2 == 215 )
          {
            if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 > 0xF9u )
              return 0;
          }
          else if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 == 255 )
          {
            return 0;
          }
          str = v4 + 1;
        }
        if ( !*str )
          goto LABEL_41;
      }
    }
    if ( dword_4E35B8 == 2 )
    {
      while ( isalnum(*(unsigned __int8 *)str) || strchr(" \n", *(unsigned __int8 *)str) )
      {
        if ( !*++str )
          goto LABEL_41;
      }
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    do
    {
      if ( isalnum(*(unsigned __int8 *)str) || strchr(" \n", *(unsigned __int8 *)str) )
      {
        ++str;
      }
      else
      {
        if ( *(unsigned __int8 *)str < 0xB0u || *(unsigned __int8 *)str > 0xC8u )
          return 0;
        v3 = str + 1;
        if ( *(unsigned __int8 *)v3 < 0xA1u || *(unsigned __int8 *)v3 == 255 )
          return 0;
        str = v3 + 1;
      }
    }
    while ( *str );
LABEL_41:
    result = 1;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004979C0) --------------------------------------------------------
int __stdcall IsValidName(const char *name)
{
  int result; // eax
  int v2; // edx
  const char *v3; // [esp+Ch] [ebp+8h]
  const char *v4; // [esp+Ch] [ebp+8h]

  if ( !*name )
    return 0;
  if ( dword_4E35B8 )
  {
    if ( dword_4E35B8 == 1 )
    {
      while ( 1 )
      {
        if ( isalnum(*(unsigned __int8 *)name) )
        {
          ++name;
        }
        else
        {
          if ( *(unsigned __int8 *)name < 0xB0u || *(unsigned __int8 *)name > 0xF7u )
            return 0;
          v2 = *(unsigned __int8 *)name;
          v4 = name + 1;
          if ( v2 == 215 )
          {
            if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 > 0xF9u )
              return 0;
          }
          else if ( *(unsigned __int8 *)v4 < 0xA1u || *(unsigned __int8 *)v4 == 255 )
          {
            return 0;
          }
          name = v4 + 1;
        }
        if ( !*name )
          goto LABEL_38;
      }
    }
    if ( dword_4E35B8 == 2 )
    {
      while ( isalnum(*(unsigned __int8 *)name) )
      {
        if ( !*++name )
          goto LABEL_38;
      }
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    do
    {
      if ( isalnum(*(unsigned __int8 *)name) )
      {
        ++name;
      }
      else
      {
        if ( *(unsigned __int8 *)name < 0xB0u || *(unsigned __int8 *)name > 0xC8u )
          return 0;
        v3 = name + 1;
        if ( *(unsigned __int8 *)v3 < 0xA1u || *(unsigned __int8 *)v3 == 255 )
          return 0;
        name = v3 + 1;
      }
    }
    while ( *name );
LABEL_38:
    result = 1;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00497B80) --------------------------------------------------------
int __stdcall IsValidAdminName(const char *name)
{
  const char *v2; // [esp+8h] [ebp+8h]

  if ( !*name )
    return 0;
  do
  {
    if ( byte_4E35C0[*(unsigned __int8 *)name] >= 0 )
    {
      if ( !isalnum(*(unsigned __int8 *)name) && !strchr("_<>", *(unsigned __int8 *)name) )
        return 0;
      ++name;
    }
    else
    {
      v2 = name + 1;
      if ( !*v2 )
        return 0;
      name = v2 + 1;
    }
  }
  while ( *name );
  return 1;
}

//----- (00497C20) --------------------------------------------------------
std::string *__cdecl sub_497C20(std::string *a1)
{
  CHAR *i; // [esp+0h] [ebp-114h]
  CHAR Filename[268]; // [esp+4h] [ebp-110h] BYREF
  int v4; // [esp+110h] [ebp-4h]

  v4 = dword_4D9830;
  GetModuleFileNameA(0, Filename, 0x104u);
  for ( i = Filename; *i; ++i )
  {
    if ( *i == '\\' )
      *i = '/';
  }
  std::string::string(a1, Filename);
  return a1;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00497CB0) --------------------------------------------------------
void __thiscall InitCodePage::InitCodePage(InitCodePage *this)
{
  init_codepage();
  ACP_ID = GetACP();
}
// 4E3748: using guessed type int ACP_ID;

//----- (00497CE0) --------------------------------------------------------
int __stdcall Initialize_AES_ChiperText(int *a1)
{
  if ( !a1 )
    return 0x1B002;
  memset(a1 + 4, 0, 0x20Cu);
  memset((char *)a1 + 566, 0, 0x20Cu);
  Initialize_AES_ChiperText_1((int)(a1 + 4), a1, 16);
  Initialize_AES_ChiperText_2((int)a1 + 566, a1, 16);
  return 0;
}

//----- (00497D5D) --------------------------------------------------------
int __stdcall Encode_AES_Rijndael(void *Src, int a2, int a3, void *a4, int a5)
{
  if ( !Src || !a2 || !a3 || !a4 || !a5 )
    return 0x1B003;
  Encode_AES_Rijndael(a3, a4, Src, a2, (int)&unk_4CD658);
  return 0;
}

//----- (00497DA8) --------------------------------------------------------
int __stdcall Decode_AES_Rijndael(void *Src, int a2, int a3, void *a4, int a5)
{
  if ( !Src || !a2 || !a3 || !a4 || !a5 )
    return 0x1B004;
  Decode_AES_Rijndael(a3, a4, Src, a2, (int)&unk_4CD658);
  return 0;
}

//----- (00497DF3) --------------------------------------------------------
int __stdcall sub_497DF3(FILE *Stream, int a2)
{
  int Offset; // [esp+0h] [ebp-4h]

  if ( a2 )
    Offset = a2 / 16;
  else
    Offset = 0;
  return fseek(Stream, 16 * Offset, 0);
}

//----- (00497E3E) --------------------------------------------------------
int __userpurge sub_497E3E@<eax>(int a1, char *a2, int a3, FILE *Stream, int a5, size_t *a6)
{
  void *v6; // esp
  int v8; // eax
  _DWORD v9[13]; // [esp-Ch] [ebp-2074h] BYREF
  unsigned int v10; // [esp+28h] [ebp-2040h]
  unsigned int i; // [esp+2Ch] [ebp-203Ch]
  int v12; // [esp+30h] [ebp-2038h]
  int v13; // [esp+34h] [ebp-2034h]
  size_t Size; // [esp+38h] [ebp-2030h]
  int v15; // [esp+3Ch] [ebp-202Ch]
  unsigned int v16; // [esp+40h] [ebp-2028h]
  char Src[4096]; // [esp+44h] [ebp-2024h] BYREF
  char Buffer[4096]; // [esp+1044h] [ebp-1024h] BYREF
  unsigned int v19; // [esp+2044h] [ebp-24h]
  unsigned int v20; // [esp+2048h] [ebp-20h]
  unsigned int v21; // [esp+204Ch] [ebp-1Ch]
  CPPEH_RECORD ms_exc; // [esp+2050h] [ebp-18h]

  v6 = alloca(8272);
  ms_exc.old_esp = (DWORD)v9;
  v12 = 0;
  Size = 0;
  v20 = 0;
  v10 = 0;
  v21 = 0;
  v13 = 0;
  v16 = 0;
  v19 = 0;
  i = 0;
  v15 = 0;
  Src[0] = 0;
  memset(&Src[1], 0, 0xFFCu);
  *(_WORD *)&Src[4093] = 0;
  Src[4095] = 0;
  Buffer[0] = 0;
  memset(&Buffer[1], 0, 0xFFCu);
  *(_WORD *)&Buffer[4093] = 0;
  Buffer[4095] = 0;
  ms_exc.registration.TryLevel = 0;
  if ( !a2 || !a3 || !Stream || !a5 )
  {
    v9[12] = 110597;
    ms_exc.registration.TryLevel = -1;
    return 110597;
  }
  v8 = _fileno(Stream);
  v21 = _filelength(v8);
  if ( v21 == -1 )
  {
    v9[11] = 110601;
    ms_exc.registration.TryLevel = -1;
    return 110601;
  }
  if ( !v21 )
  {
    v9[10] = 110603;
    ms_exc.registration.TryLevel = -1;
    return 110603;
  }
  v13 = ftell(Stream);
  if ( v13 == -1 )
  {
    v9[9] = 110602;
    ms_exc.registration.TryLevel = -1;
    return 110602;
  }
  v12 = sub_497DF3(Stream, v13);
  if ( v12 )
  {
    v9[8] = 110604;
    ms_exc.registration.TryLevel = -1;
    return 110604;
  }
  if ( v21 < v13 + a3 )
  {
    v9[7] = 110598;
    ms_exc.registration.TryLevel = -1;
    return 110598;
  }
  v19 = v21 % 0x10;
  v10 = (a3 + v13) % 0x10u;
  if ( v10 )
  {
    if ( a3 + v13 > v21 - v19 )
      v20 = v13 % 0x10u + a3;
    else
      v20 = v13 % 0x10u + 16 - v10 + a3;
  }
  else
  {
    v20 = v13 % 0x10u + a3;
  }
  v16 = v20 >> 12;
  for ( i = 0; i < v16; ++i )
  {
    Size = sub_4A17A2(Buffer, 1u, 0x1000u, Stream);
    if ( !Size )
    {
      v9[6] = 110599;
      ms_exc.registration.TryLevel = -1;
      return 110599;
    }
    v12 = Decode_AES_Rijndael(Buffer, Size, a5, Src, 4096);
    if ( v12 )
    {
      v9[5] = 110600;
      ms_exc.registration.TryLevel = -1;
      return 110600;
    }
    if ( i )
    {
      memcpy(&a2[v15], Src, Size);
      v15 += 4096;
    }
    else
    {
      memcpy(a2, &Src[v13 % 0x10u], Size - v13 % 0x10u);
      v15 = Size - v13 % 0x10u;
    }
    memset(Buffer, 0, sizeof(Buffer));
    memset(Src, 0, sizeof(Src));
  }
  if ( v20 != v15 )
  {
    Size = sub_4A17A2(Buffer, 1u, v20 - v15, Stream);
    if ( !Size )
    {
      v9[4] = 110599;
      ms_exc.registration.TryLevel = -1;
      return 110599;
    }
    v12 = Decode_AES_Rijndael(Buffer, Size, a5, Src, 4096);
    if ( v12 )
    {
      v9[3] = 110600;
      ms_exc.registration.TryLevel = -1;
      return 110600;
    }
    if ( v16 )
    {
      memcpy(&a2[v15], Src, Size);
      v15 += Size;
    }
    else
    {
      memcpy(a2, &Src[v13 % 0x10u], a3);
      v15 = a3;
    }
  }
  *a6 = v15;
  return 0;
}
// 497E3E: could not find valid save-restore pair for ebp

//----- (004983BD) --------------------------------------------------------
int __stdcall sub_4983BD(FILE *Stream, void *a2, size_t ElementCount, int a4, int a5)
{
  void *v5; // esp
  int result; // eax
  _DWORD v7[6]; // [esp-Ch] [ebp-2038h] BYREF
  int v8; // [esp+Ch] [ebp-2020h]
  size_t Size; // [esp+10h] [ebp-201Ch]
  char Buffer; // [esp+14h] [ebp-2018h] BYREF
  char v11[4092]; // [esp+15h] [ebp-2017h] BYREF
  __int16 v12; // [esp+1011h] [ebp-101Bh]
  char v13; // [esp+1013h] [ebp-1019h]
  char Src; // [esp+1014h] [ebp-1018h] BYREF
  char v15[4092]; // [esp+1015h] [ebp-1017h] BYREF
  __int16 v16; // [esp+2011h] [ebp-1Bh]
  char v17; // [esp+2013h] [ebp-19h]
  CPPEH_RECORD ms_exc; // [esp+2014h] [ebp-18h]

  v5 = alloca(8212);
  ms_exc.old_esp = (DWORD)v7;
  v8 = 0;
  Size = 0;
  Buffer = 0;
  memset(v11, 0, sizeof(v11));
  v12 = 0;
  v13 = 0;
  Src = 0;
  memset(v15, 0, sizeof(v15));
  v16 = 0;
  v17 = 0;
  ms_exc.registration.TryLevel = 0;
  if ( Stream && a2 && ElementCount && ElementCount <= 0x1000 && a4 && a5 )
  {
    Size = sub_4A17A2(&Buffer, 1u, ElementCount, Stream);
    if ( Size )
    {
      v8 = Encode_AES_Rijndael(&Buffer, Size, a5, &Src, 4096);
      if ( v8 )
      {
        v7[3] = 110626;
        ms_exc.registration.TryLevel = -1;
        result = 110626;
      }
      else
      {
        memcpy(a2, &Src, Size);
        *(_DWORD *)a4 = Size;
        result = 0;
      }
    }
    else
    {
      v7[4] = 110625;
      ms_exc.registration.TryLevel = -1;
      result = 110625;
    }
  }
  else
  {
    v7[5] = 110624;
    ms_exc.registration.TryLevel = -1;
    result = 110624;
  }
  return result;
}

//----- (004988C1) --------------------------------------------------------
int __usercall sub_4988C1@<eax>(int a1@<ebp>)
{
  int result; // eax

  if ( *(_DWORD *)(a1 - 5512) )
  {
    result = fclose(*(FILE **)(a1 - 5512));
    *(_DWORD *)(a1 - 5512) = 0;
  }
  if ( *(_DWORD *)(a1 - 5516) )
  {
    result = fclose(*(FILE **)(a1 - 5516));
    *(_DWORD *)(a1 - 5516) = 0;
  }
  return result;
}

//----- (00498920) --------------------------------------------------------
unsigned int __cdecl Initialize_AES_Rijndael_BlockSize(int a1)
{
  unsigned int result; // eax
  unsigned int i; // [esp+4h] [ebp-4h]

  for ( i = 4; i < 4 * *(_DWORD *)(a1 + 516); ++i )
  {
    *(_DWORD *)(a1 + 4 * i + 256) = AES_Rijndael_U4[*(unsigned __int8 *)(a1 + 4 * i + 256)] ^ AES_Rijndael_U3[(unsigned __int8)BYTE1(*(_DWORD *)(a1 + 4 * i + 256))] ^ AES_Rijndael_U2[(unsigned __int8)BYTE2(*(_DWORD *)(a1 + 4 * i + 256))] ^ AES_Rijndael_U1[(unsigned __int8)HIBYTE(*(_DWORD *)(a1 + 4 * i + 256))];
    result = i + 1;
  }
  return result;
}
// 4D1708: using guessed type int AES_Rijndael_U1[256];
// 4D1B08: using guessed type int AES_Rijndael_U2[256];
// 4D1F08: using guessed type int AES_Rijndael_U3[256];
// 4D2308: using guessed type int AES_Rijndael_U4[257];

//----- (004989CB) --------------------------------------------------------
__int16 __cdecl Initialize_AES_ChiperText(int *a1, int a2, char a3, int a4)
{
  int v4; // eax
  int v6; // [esp+8h] [ebp-34h]
  int v7; // [esp+8h] [ebp-34h]
  int v8; // [esp+8h] [ebp-34h]
  int v9; // [esp+8h] [ebp-34h]
  int v10; // [esp+8h] [ebp-34h]
  int v11; // [esp+8h] [ebp-34h]
  int v12; // [esp+8h] [ebp-34h]
  int v13; // [esp+8h] [ebp-34h]
  int v14; // [esp+Ch] [ebp-30h]
  int v15; // [esp+Ch] [ebp-30h]
  int v16; // [esp+Ch] [ebp-30h]
  int v17; // [esp+Ch] [ebp-30h]
  int v18; // [esp+Ch] [ebp-30h]
  int v19; // [esp+Ch] [ebp-30h]
  int v20; // [esp+Ch] [ebp-30h]
  int v21; // [esp+Ch] [ebp-30h]
  int v22; // [esp+10h] [ebp-2Ch]
  int v23; // [esp+10h] [ebp-2Ch]
  int v24; // [esp+10h] [ebp-2Ch]
  int v25; // [esp+10h] [ebp-2Ch]
  int v26; // [esp+10h] [ebp-2Ch]
  int v27; // [esp+10h] [ebp-2Ch]
  int v28; // [esp+10h] [ebp-2Ch]
  int v29; // [esp+10h] [ebp-2Ch]
  int v30; // [esp+14h] [ebp-28h]
  int v31; // [esp+14h] [ebp-28h]
  int v32; // [esp+14h] [ebp-28h]
  int v33; // [esp+14h] [ebp-28h]
  int v34; // [esp+14h] [ebp-28h]
  int v35; // [esp+14h] [ebp-28h]
  int v36; // [esp+14h] [ebp-28h]
  int v37; // [esp+14h] [ebp-28h]
  int v38; // [esp+18h] [ebp-24h]
  int v39; // [esp+18h] [ebp-24h]
  int v40; // [esp+18h] [ebp-24h]
  int v41; // [esp+18h] [ebp-24h]
  int v42; // [esp+18h] [ebp-24h]
  int v43; // [esp+18h] [ebp-24h]
  int v44; // [esp+18h] [ebp-24h]
  int v45; // [esp+18h] [ebp-24h]
  int v46; // [esp+1Ch] [ebp-20h]
  int v47; // [esp+1Ch] [ebp-20h]
  int v48; // [esp+1Ch] [ebp-20h]
  int v49; // [esp+1Ch] [ebp-20h]
  int v50; // [esp+1Ch] [ebp-20h]
  int v51; // [esp+1Ch] [ebp-20h]
  int v52; // [esp+1Ch] [ebp-20h]
  int v53; // [esp+1Ch] [ebp-20h]
  unsigned int v54; // [esp+1Ch] [ebp-20h]
  int v55; // [esp+1Ch] [ebp-20h]
  int v56; // [esp+1Ch] [ebp-20h]
  int v57; // [esp+1Ch] [ebp-20h]
  int v58; // [esp+1Ch] [ebp-20h]
  int v59; // [esp+1Ch] [ebp-20h]
  int v60; // [esp+1Ch] [ebp-20h]
  int v61; // [esp+1Ch] [ebp-20h]
  int v62; // [esp+1Ch] [ebp-20h]
  int v63; // [esp+1Ch] [ebp-20h]
  unsigned int v64; // [esp+1Ch] [ebp-20h]
  int v65; // [esp+1Ch] [ebp-20h]
  int v66; // [esp+1Ch] [ebp-20h]
  int v67; // [esp+1Ch] [ebp-20h]
  int v68; // [esp+1Ch] [ebp-20h]
  int v69; // [esp+1Ch] [ebp-20h]
  int v70; // [esp+1Ch] [ebp-20h]
  int v71; // [esp+1Ch] [ebp-20h]
  int v72; // [esp+1Ch] [ebp-20h]
  int v73; // [esp+1Ch] [ebp-20h]
  int v74; // [esp+1Ch] [ebp-20h]
  int v75; // [esp+1Ch] [ebp-20h]
  int v76; // [esp+1Ch] [ebp-20h]
  int v77; // [esp+1Ch] [ebp-20h]
  int v78; // [esp+1Ch] [ebp-20h]
  int v79; // [esp+1Ch] [ebp-20h]
  int v80; // [esp+1Ch] [ebp-20h]
  int v81; // [esp+1Ch] [ebp-20h]
  int v82; // [esp+1Ch] [ebp-20h]
  unsigned int v83; // [esp+1Ch] [ebp-20h]
  int v84; // [esp+1Ch] [ebp-20h]
  int v85; // [esp+1Ch] [ebp-20h]
  int v86; // [esp+1Ch] [ebp-20h]
  int v87; // [esp+1Ch] [ebp-20h]
  int v88; // [esp+1Ch] [ebp-20h]
  int v89; // [esp+1Ch] [ebp-20h]
  int v90; // [esp+1Ch] [ebp-20h]
  int v91; // [esp+20h] [ebp-1Ch]
  int v92; // [esp+20h] [ebp-1Ch]
  int v93; // [esp+20h] [ebp-1Ch]
  int v94; // [esp+20h] [ebp-1Ch]
  int v95; // [esp+20h] [ebp-1Ch]
  int v96; // [esp+20h] [ebp-1Ch]
  int v97; // [esp+20h] [ebp-1Ch]
  int v98; // [esp+20h] [ebp-1Ch]
  int v99; // [esp+20h] [ebp-1Ch]
  int v100; // [esp+20h] [ebp-1Ch]
  int v101; // [esp+20h] [ebp-1Ch]
  int v102; // [esp+20h] [ebp-1Ch]
  int v103; // [esp+20h] [ebp-1Ch]
  int v104; // [esp+20h] [ebp-1Ch]
  int v105; // [esp+20h] [ebp-1Ch]
  int v106; // [esp+20h] [ebp-1Ch]
  int v107; // [esp+20h] [ebp-1Ch]
  int v108; // [esp+20h] [ebp-1Ch]
  int v109; // [esp+20h] [ebp-1Ch]
  int v110; // [esp+20h] [ebp-1Ch]
  int v111; // [esp+20h] [ebp-1Ch]
  int v112; // [esp+20h] [ebp-1Ch]
  int v113; // [esp+20h] [ebp-1Ch]
  int v114; // [esp+20h] [ebp-1Ch]
  int v115; // [esp+20h] [ebp-1Ch]
  int v116; // [esp+20h] [ebp-1Ch]
  int v117; // [esp+20h] [ebp-1Ch]
  int v118; // [esp+20h] [ebp-1Ch]
  int v119; // [esp+20h] [ebp-1Ch]
  int v120; // [esp+20h] [ebp-1Ch]
  int v121; // [esp+20h] [ebp-1Ch]
  int v122; // [esp+20h] [ebp-1Ch]
  int v123; // [esp+20h] [ebp-1Ch]
  int v124; // [esp+20h] [ebp-1Ch]
  int v125; // [esp+20h] [ebp-1Ch]
  int v126; // [esp+20h] [ebp-1Ch]
  int v127; // [esp+20h] [ebp-1Ch]
  int v128; // [esp+20h] [ebp-1Ch]
  int v129; // [esp+20h] [ebp-1Ch]
  int v130; // [esp+20h] [ebp-1Ch]
  int v131; // [esp+20h] [ebp-1Ch]
  int v132; // [esp+20h] [ebp-1Ch]
  int v133; // [esp+20h] [ebp-1Ch]
  int v134; // [esp+20h] [ebp-1Ch]
  int v135; // [esp+20h] [ebp-1Ch]
  int v136; // [esp+24h] [ebp-18h]
  int v137; // [esp+24h] [ebp-18h]
  int v138; // [esp+24h] [ebp-18h]
  int v139; // [esp+24h] [ebp-18h]
  int v140; // [esp+24h] [ebp-18h]
  int v141; // [esp+24h] [ebp-18h]
  int v142; // [esp+24h] [ebp-18h]
  int v143; // [esp+24h] [ebp-18h]
  int v144; // [esp+24h] [ebp-18h]
  int v145; // [esp+24h] [ebp-18h]
  int v146; // [esp+24h] [ebp-18h]
  int v147; // [esp+24h] [ebp-18h]
  int v148; // [esp+24h] [ebp-18h]
  int v149; // [esp+24h] [ebp-18h]
  int v150; // [esp+24h] [ebp-18h]
  int v151; // [esp+24h] [ebp-18h]
  int v152; // [esp+24h] [ebp-18h]
  int v153; // [esp+24h] [ebp-18h]
  int v154; // [esp+24h] [ebp-18h]
  int v155; // [esp+24h] [ebp-18h]
  int v156; // [esp+24h] [ebp-18h]
  int v157; // [esp+24h] [ebp-18h]
  int v158; // [esp+24h] [ebp-18h]
  int v159; // [esp+24h] [ebp-18h]
  int v160; // [esp+24h] [ebp-18h]
  int v161; // [esp+24h] [ebp-18h]
  int v162; // [esp+24h] [ebp-18h]
  int v163; // [esp+24h] [ebp-18h]
  int v164; // [esp+24h] [ebp-18h]
  int v165; // [esp+24h] [ebp-18h]
  int v166; // [esp+24h] [ebp-18h]
  int v167; // [esp+24h] [ebp-18h]
  int v168; // [esp+24h] [ebp-18h]
  int v169; // [esp+24h] [ebp-18h]
  int v170; // [esp+24h] [ebp-18h]
  int v171; // [esp+24h] [ebp-18h]
  int v172; // [esp+24h] [ebp-18h]
  int v173; // [esp+24h] [ebp-18h]
  int v174; // [esp+24h] [ebp-18h]
  int v175; // [esp+24h] [ebp-18h]
  int v176; // [esp+24h] [ebp-18h]
  int v177; // [esp+24h] [ebp-18h]
  int v178; // [esp+24h] [ebp-18h]
  int v179; // [esp+24h] [ebp-18h]
  int v180; // [esp+28h] [ebp-14h]
  int v181; // [esp+28h] [ebp-14h]
  int v182; // [esp+28h] [ebp-14h]
  int v183; // [esp+28h] [ebp-14h]
  int v184; // [esp+28h] [ebp-14h]
  int v185; // [esp+28h] [ebp-14h]
  int v186; // [esp+28h] [ebp-14h]
  int v187; // [esp+28h] [ebp-14h]
  int v188; // [esp+28h] [ebp-14h]
  int v189; // [esp+28h] [ebp-14h]
  int v190; // [esp+28h] [ebp-14h]
  int v191; // [esp+28h] [ebp-14h]
  int v192; // [esp+28h] [ebp-14h]
  int v193; // [esp+28h] [ebp-14h]
  int v194; // [esp+28h] [ebp-14h]
  int v195; // [esp+28h] [ebp-14h]
  int v196; // [esp+28h] [ebp-14h]
  int v197; // [esp+28h] [ebp-14h]
  int v198; // [esp+28h] [ebp-14h]
  int v199; // [esp+28h] [ebp-14h]
  int v200; // [esp+28h] [ebp-14h]
  int v201; // [esp+28h] [ebp-14h]
  int v202; // [esp+28h] [ebp-14h]
  int v203; // [esp+28h] [ebp-14h]
  int v204; // [esp+28h] [ebp-14h]
  int v205; // [esp+28h] [ebp-14h]
  int v206; // [esp+28h] [ebp-14h]
  int v207; // [esp+28h] [ebp-14h]
  int v208; // [esp+28h] [ebp-14h]
  int v209; // [esp+28h] [ebp-14h]
  int v210; // [esp+28h] [ebp-14h]
  int v211; // [esp+28h] [ebp-14h]
  int v212; // [esp+28h] [ebp-14h]
  int v213; // [esp+28h] [ebp-14h]
  int v214; // [esp+28h] [ebp-14h]
  int v215; // [esp+28h] [ebp-14h]
  int v216; // [esp+28h] [ebp-14h]
  int v217; // [esp+28h] [ebp-14h]
  int v218; // [esp+28h] [ebp-14h]
  int v219; // [esp+2Ch] [ebp-10h]
  int v220; // [esp+2Ch] [ebp-10h]
  int v221; // [esp+2Ch] [ebp-10h]
  int v222; // [esp+2Ch] [ebp-10h]
  int v223; // [esp+2Ch] [ebp-10h]
  int v224; // [esp+2Ch] [ebp-10h]
  int v225; // [esp+2Ch] [ebp-10h]
  int v226; // [esp+2Ch] [ebp-10h]
  int v227; // [esp+2Ch] [ebp-10h]
  int v228; // [esp+2Ch] [ebp-10h]
  int v229; // [esp+2Ch] [ebp-10h]
  int v230; // [esp+2Ch] [ebp-10h]
  int v231; // [esp+2Ch] [ebp-10h]
  int v232; // [esp+2Ch] [ebp-10h]
  int v233; // [esp+2Ch] [ebp-10h]
  int v234; // [esp+2Ch] [ebp-10h]
  int v235; // [esp+2Ch] [ebp-10h]
  int v236; // [esp+2Ch] [ebp-10h]
  int v237; // [esp+2Ch] [ebp-10h]
  int v238; // [esp+2Ch] [ebp-10h]
  int v239; // [esp+2Ch] [ebp-10h]
  int v240; // [esp+2Ch] [ebp-10h]
  int v241; // [esp+2Ch] [ebp-10h]
  int v242; // [esp+2Ch] [ebp-10h]
  int v243; // [esp+2Ch] [ebp-10h]
  int v244; // [esp+2Ch] [ebp-10h]
  int v245; // [esp+2Ch] [ebp-10h]
  int v246; // [esp+2Ch] [ebp-10h]
  int v247; // [esp+2Ch] [ebp-10h]
  int v248; // [esp+2Ch] [ebp-10h]
  int v249; // [esp+2Ch] [ebp-10h]
  int v250; // [esp+2Ch] [ebp-10h]
  int v251; // [esp+2Ch] [ebp-10h]
  int v252; // [esp+2Ch] [ebp-10h]
  int v253; // [esp+2Ch] [ebp-10h]
  int v254; // [esp+2Ch] [ebp-10h]
  int v255; // [esp+2Ch] [ebp-10h]
  int v256; // [esp+2Ch] [ebp-10h]
  int v257; // [esp+2Ch] [ebp-10h]
  int v258; // [esp+2Ch] [ebp-10h]
  int v259; // [esp+2Ch] [ebp-10h]
  int v260; // [esp+2Ch] [ebp-10h]
  int v261; // [esp+2Ch] [ebp-10h]
  int v262; // [esp+2Ch] [ebp-10h]
  unsigned int v263; // [esp+2Ch] [ebp-10h]
  int v264; // [esp+2Ch] [ebp-10h]
  int v265; // [esp+2Ch] [ebp-10h]
  int v266; // [esp+2Ch] [ebp-10h]
  int v267; // [esp+2Ch] [ebp-10h]
  int v268; // [esp+2Ch] [ebp-10h]
  int v269; // [esp+2Ch] [ebp-10h]
  int v270; // [esp+2Ch] [ebp-10h]
  int v271; // [esp+2Ch] [ebp-10h]
  int v272; // [esp+2Ch] [ebp-10h]
  int v273; // [esp+2Ch] [ebp-10h]
  int v274; // [esp+2Ch] [ebp-10h]
  int v275; // [esp+2Ch] [ebp-10h]
  int v276; // [esp+2Ch] [ebp-10h]
  int v277; // [esp+2Ch] [ebp-10h]
  int v278; // [esp+2Ch] [ebp-10h]
  int v279; // [esp+2Ch] [ebp-10h]
  int v280; // [esp+2Ch] [ebp-10h]
  int v281; // [esp+2Ch] [ebp-10h]
  int v282; // [esp+2Ch] [ebp-10h]
  int v283; // [esp+2Ch] [ebp-10h]
  int v284; // [esp+2Ch] [ebp-10h]
  int v285; // [esp+30h] [ebp-Ch]
  int v286; // [esp+30h] [ebp-Ch]
  int v287; // [esp+30h] [ebp-Ch]
  int v288; // [esp+30h] [ebp-Ch]
  int v289; // [esp+30h] [ebp-Ch]
  int v290; // [esp+30h] [ebp-Ch]
  int v291; // [esp+30h] [ebp-Ch]
  int v292; // [esp+30h] [ebp-Ch]
  int v293; // [esp+30h] [ebp-Ch]
  int v294; // [esp+30h] [ebp-Ch]
  int v295; // [esp+30h] [ebp-Ch]
  int v296; // [esp+30h] [ebp-Ch]
  int v297; // [esp+30h] [ebp-Ch]
  int v298; // [esp+30h] [ebp-Ch]
  int v299; // [esp+30h] [ebp-Ch]
  int v300; // [esp+30h] [ebp-Ch]
  int v301; // [esp+30h] [ebp-Ch]
  int v302; // [esp+30h] [ebp-Ch]
  int v303; // [esp+30h] [ebp-Ch]
  int v304; // [esp+30h] [ebp-Ch]
  int v305; // [esp+30h] [ebp-Ch]
  int v306; // [esp+30h] [ebp-Ch]
  int v307; // [esp+30h] [ebp-Ch]
  int v308; // [esp+30h] [ebp-Ch]
  int v309; // [esp+30h] [ebp-Ch]
  int v310; // [esp+30h] [ebp-Ch]
  int v311; // [esp+30h] [ebp-Ch]
  int v312; // [esp+30h] [ebp-Ch]
  int v313; // [esp+30h] [ebp-Ch]
  int v314; // [esp+34h] [ebp-8h]
  int v315; // [esp+34h] [ebp-8h]
  int v316; // [esp+34h] [ebp-8h]
  int v317; // [esp+34h] [ebp-8h]
  int v318; // [esp+34h] [ebp-8h]
  int v319; // [esp+34h] [ebp-8h]
  int v320; // [esp+34h] [ebp-8h]
  int v321; // [esp+34h] [ebp-8h]
  int v322; // [esp+34h] [ebp-8h]
  int v323; // [esp+34h] [ebp-8h]
  int v324; // [esp+34h] [ebp-8h]
  int v325; // [esp+34h] [ebp-8h]
  int v326; // [esp+34h] [ebp-8h]
  int v327; // [esp+34h] [ebp-8h]
  int v328; // [esp+34h] [ebp-8h]
  int v329; // [esp+34h] [ebp-8h]
  int v330; // [esp+34h] [ebp-8h]
  int v331; // [esp+34h] [ebp-8h]
  int v332; // [esp+34h] [ebp-8h]
  int v333; // [esp+34h] [ebp-8h]
  int v334; // [esp+34h] [ebp-8h]
  int v335; // [esp+34h] [ebp-8h]
  int v336; // [esp+34h] [ebp-8h]
  int v337; // [esp+34h] [ebp-8h]
  int v338; // [esp+34h] [ebp-8h]
  int v339; // [esp+34h] [ebp-8h]
  int v340; // [esp+34h] [ebp-8h]
  int v341; // [esp+34h] [ebp-8h]
  int v342; // [esp+34h] [ebp-8h]
  int v343; // [esp+34h] [ebp-8h]
  int v344; // [esp+34h] [ebp-8h]
  int v345; // [esp+34h] [ebp-8h]
  int v346; // [esp+34h] [ebp-8h]
  int v347; // [esp+34h] [ebp-8h]
  int v348; // [esp+34h] [ebp-8h]
  int v349; // [esp+34h] [ebp-8h]
  int v350; // [esp+34h] [ebp-8h]
  int v351; // [esp+34h] [ebp-8h]
  int v352; // [esp+34h] [ebp-8h]
  int v353; // [esp+34h] [ebp-8h]
  int v354; // [esp+34h] [ebp-8h]
  int v355; // [esp+34h] [ebp-8h]
  int v356; // [esp+34h] [ebp-8h]
  int v357; // [esp+34h] [ebp-8h]
  int v358; // [esp+34h] [ebp-8h]
  int v359; // [esp+34h] [ebp-8h]
  int v360; // [esp+34h] [ebp-8h]
  int v361; // [esp+34h] [ebp-8h]
  int v362; // [esp+34h] [ebp-8h]
  int v363; // [esp+38h] [ebp-4h]
  int v364; // [esp+38h] [ebp-4h]
  int v365; // [esp+38h] [ebp-4h]
  int v366; // [esp+38h] [ebp-4h]
  int v367; // [esp+38h] [ebp-4h]
  int v368; // [esp+38h] [ebp-4h]
  int v369; // [esp+38h] [ebp-4h]
  int v370; // [esp+38h] [ebp-4h]
  int v371; // [esp+38h] [ebp-4h]
  int v372; // [esp+38h] [ebp-4h]
  int v373; // [esp+38h] [ebp-4h]
  int v374; // [esp+38h] [ebp-4h]
  int v375; // [esp+38h] [ebp-4h]
  int v376; // [esp+38h] [ebp-4h]

  if ( (a3 & 3) != 0 )
  {
    *(_BYTE *)(a4 + 520) = a3 & 3 | *(_BYTE *)(a4 + 520) & 0xFC;
    if ( (*(_BYTE *)(a4 + 520) & 1) != 0 )
    {
      v46 = *a1;
      *(_DWORD *)a4 = *a1;
      v91 = a1[1];
      *(_DWORD *)(a4 + 4) = v91;
      v136 = a1[2];
      *(_DWORD *)(a4 + 8) = v136;
      v180 = a1[3];
      *(_DWORD *)(a4 + 12) = v180;
      switch ( a2 )
      {
        case 0:
          v4 = 4 * *(_DWORD *)(a4 + 512);
          break;
        case 16:
          v47 = AES_Rijndael_S[HIBYTE(v180)] ^ AES_Rijndael_Te6[(unsigned __int8)v180] ^ AES_Rijndael_Te5[BYTE1(v180)] ^ AES_Rijndael_Te4[BYTE2(v180)] ^ 0x1000000 ^ v46;
          *(_DWORD *)(a4 + 16) = v47;
          v92 = v47 ^ v91;
          *(_DWORD *)(a4 + 20) = v92;
          v137 = v92 ^ v136;
          *(_DWORD *)(a4 + 24) = v137;
          v181 = v137 ^ v180;
          *(_DWORD *)(a4 + 28) = v181;
          v48 = AES_Rijndael_S[HIBYTE(v181)] ^ AES_Rijndael_Te6[(unsigned __int8)v181] ^ AES_Rijndael_Te5[BYTE1(v181)] ^ AES_Rijndael_Te4[BYTE2(v181)] ^ 0x2000000 ^ v47;
          *(_DWORD *)(a4 + 32) = v48;
          v93 = v48 ^ v92;
          *(_DWORD *)(a4 + 36) = v93;
          v138 = v93 ^ v137;
          *(_DWORD *)(a4 + 40) = v138;
          v182 = v138 ^ v181;
          *(_DWORD *)(a4 + 44) = v182;
          v49 = AES_Rijndael_S[HIBYTE(v182)] ^ AES_Rijndael_Te6[(unsigned __int8)v182] ^ AES_Rijndael_Te5[BYTE1(v182)] ^ AES_Rijndael_Te4[BYTE2(v182)] ^ 0x4000000 ^ v48;
          *(_DWORD *)(a4 + 48) = v49;
          v94 = v49 ^ v93;
          *(_DWORD *)(a4 + 52) = v94;
          v139 = v94 ^ v138;
          *(_DWORD *)(a4 + 56) = v139;
          v183 = v139 ^ v182;
          *(_DWORD *)(a4 + 60) = v183;
          v50 = AES_Rijndael_S[HIBYTE(v183)] ^ AES_Rijndael_Te6[(unsigned __int8)v183] ^ AES_Rijndael_Te5[BYTE1(v183)] ^ AES_Rijndael_Te4[BYTE2(v183)] ^ 0x8000000 ^ v49;
          *(_DWORD *)(a4 + 64) = v50;
          v95 = v50 ^ v94;
          *(_DWORD *)(a4 + 68) = v95;
          v140 = v95 ^ v139;
          *(_DWORD *)(a4 + 72) = v140;
          v184 = v140 ^ v183;
          *(_DWORD *)(a4 + 76) = v184;
          v51 = AES_Rijndael_S[HIBYTE(v184)] ^ AES_Rijndael_Te6[(unsigned __int8)v184] ^ AES_Rijndael_Te5[BYTE1(v184)] ^ AES_Rijndael_Te4[BYTE2(v184)] ^ 0x10000000 ^ v50;
          *(_DWORD *)(a4 + 80) = v51;
          v96 = v51 ^ v95;
          *(_DWORD *)(a4 + 84) = v96;
          v141 = v96 ^ v140;
          *(_DWORD *)(a4 + 88) = v141;
          v185 = v141 ^ v184;
          *(_DWORD *)(a4 + 92) = v185;
          v52 = AES_Rijndael_S[HIBYTE(v185)] ^ AES_Rijndael_Te6[(unsigned __int8)v185] ^ AES_Rijndael_Te5[BYTE1(v185)] ^ AES_Rijndael_Te4[BYTE2(v185)] ^ 0x20000000 ^ v51;
          *(_DWORD *)(a4 + 96) = v52;
          v97 = v52 ^ v96;
          *(_DWORD *)(a4 + 100) = v97;
          v142 = v97 ^ v141;
          *(_DWORD *)(a4 + 104) = v142;
          v186 = v142 ^ v185;
          *(_DWORD *)(a4 + 108) = v186;
          v53 = AES_Rijndael_S[HIBYTE(v186)] ^ AES_Rijndael_Te6[(unsigned __int8)v186] ^ AES_Rijndael_Te5[BYTE1(v186)] ^ AES_Rijndael_Te4[BYTE2(v186)] ^ 0x40000000 ^ v52;
          *(_DWORD *)(a4 + 112) = v53;
          v98 = v53 ^ v97;
          *(_DWORD *)(a4 + 116) = v98;
          v143 = v98 ^ v142;
          *(_DWORD *)(a4 + 120) = v143;
          v187 = v143 ^ v186;
          *(_DWORD *)(a4 + 124) = v187;
          v54 = AES_Rijndael_S[HIBYTE(v187)] ^ AES_Rijndael_Te6[(unsigned __int8)v187] ^ AES_Rijndael_Te5[BYTE1(v187)] ^ AES_Rijndael_Te4[BYTE2(v187)] ^ 0x80000000 ^ v53;
          *(_DWORD *)(a4 + 128) = v54;
          v99 = v54 ^ v98;
          *(_DWORD *)(a4 + 132) = v99;
          v144 = v99 ^ v143;
          *(_DWORD *)(a4 + 136) = v144;
          v188 = v144 ^ v187;
          *(_DWORD *)(a4 + 140) = v188;
          v55 = AES_Rijndael_S[HIBYTE(v188)] ^ AES_Rijndael_Te6[(unsigned __int8)v188] ^ AES_Rijndael_Te5[BYTE1(v188)] ^ AES_Rijndael_Te4[BYTE2(v188)] ^ 0x1B000000 ^ v54;
          *(_DWORD *)(a4 + 144) = v55;
          v100 = v55 ^ v99;
          *(_DWORD *)(a4 + 148) = v100;
          v145 = v100 ^ v144;
          *(_DWORD *)(a4 + 152) = v145;
          v189 = v145 ^ v188;
          *(_DWORD *)(a4 + 156) = v189;
          v56 = AES_Rijndael_S[HIBYTE(v189)] ^ AES_Rijndael_Te6[(unsigned __int8)v189] ^ AES_Rijndael_Te5[BYTE1(v189)] ^ AES_Rijndael_Te4[BYTE2(v189)] ^ 0x36000000 ^ v55;
          *(_DWORD *)(a4 + 160) = v56;
          v101 = v56 ^ v100;
          *(_DWORD *)(a4 + 164) = v101;
          v146 = v101 ^ v145;
          *(_DWORD *)(a4 + 168) = v146;
          *(_DWORD *)(a4 + 172) = v146 ^ v189;
          *(_DWORD *)(a4 + 512) = 4;
          *(_DWORD *)(a4 + 516) = 10;
          goto LABEL_10;
        case 24:
          v219 = a1[4];
          *(_DWORD *)(a4 + 16) = v219;
          v285 = a1[5];
          *(_DWORD *)(a4 + 20) = v285;
          v57 = AES_Rijndael_S[HIBYTE(v285)] ^ AES_Rijndael_Te6[(unsigned __int8)v285] ^ AES_Rijndael_Te5[BYTE1(v285)] ^ AES_Rijndael_Te4[BYTE2(v285)] ^ 0x1000000 ^ v46;
          *(_DWORD *)(a4 + 24) = v57;
          v102 = v57 ^ v91;
          *(_DWORD *)(a4 + 28) = v102;
          v147 = v102 ^ v136;
          *(_DWORD *)(a4 + 32) = v147;
          v190 = v147 ^ v180;
          *(_DWORD *)(a4 + 36) = v190;
          v220 = v190 ^ v219;
          *(_DWORD *)(a4 + 40) = v220;
          v286 = v220 ^ v285;
          *(_DWORD *)(a4 + 44) = v286;
          v58 = AES_Rijndael_S[HIBYTE(v286)] ^ AES_Rijndael_Te6[(unsigned __int8)v286] ^ AES_Rijndael_Te5[BYTE1(v286)] ^ AES_Rijndael_Te4[BYTE2(v286)] ^ 0x2000000 ^ v57;
          *(_DWORD *)(a4 + 48) = v58;
          v103 = v58 ^ v102;
          *(_DWORD *)(a4 + 52) = v103;
          v148 = v103 ^ v147;
          *(_DWORD *)(a4 + 56) = v148;
          v191 = v148 ^ v190;
          *(_DWORD *)(a4 + 60) = v191;
          v221 = v191 ^ v220;
          *(_DWORD *)(a4 + 64) = v221;
          v287 = v221 ^ v286;
          *(_DWORD *)(a4 + 68) = v287;
          v59 = AES_Rijndael_S[HIBYTE(v287)] ^ AES_Rijndael_Te6[(unsigned __int8)v287] ^ AES_Rijndael_Te5[BYTE1(v287)] ^ AES_Rijndael_Te4[BYTE2(v287)] ^ 0x4000000 ^ v58;
          *(_DWORD *)(a4 + 72) = v59;
          v104 = v59 ^ v103;
          *(_DWORD *)(a4 + 76) = v104;
          v149 = v104 ^ v148;
          *(_DWORD *)(a4 + 80) = v149;
          v192 = v149 ^ v191;
          *(_DWORD *)(a4 + 84) = v192;
          v222 = v192 ^ v221;
          *(_DWORD *)(a4 + 88) = v222;
          v288 = v222 ^ v287;
          *(_DWORD *)(a4 + 92) = v288;
          v60 = AES_Rijndael_S[HIBYTE(v288)] ^ AES_Rijndael_Te6[(unsigned __int8)v288] ^ AES_Rijndael_Te5[BYTE1(v288)] ^ AES_Rijndael_Te4[BYTE2(v288)] ^ 0x8000000 ^ v59;
          *(_DWORD *)(a4 + 96) = v60;
          v105 = v60 ^ v104;
          *(_DWORD *)(a4 + 100) = v105;
          v150 = v105 ^ v149;
          *(_DWORD *)(a4 + 104) = v150;
          v193 = v150 ^ v192;
          *(_DWORD *)(a4 + 108) = v193;
          v223 = v193 ^ v222;
          *(_DWORD *)(a4 + 112) = v223;
          v289 = v223 ^ v288;
          *(_DWORD *)(a4 + 116) = v289;
          v61 = AES_Rijndael_S[HIBYTE(v289)] ^ AES_Rijndael_Te6[(unsigned __int8)v289] ^ AES_Rijndael_Te5[BYTE1(v289)] ^ AES_Rijndael_Te4[BYTE2(v289)] ^ 0x10000000 ^ v60;
          *(_DWORD *)(a4 + 120) = v61;
          v106 = v61 ^ v105;
          *(_DWORD *)(a4 + 124) = v106;
          v151 = v106 ^ v150;
          *(_DWORD *)(a4 + 128) = v151;
          v194 = v151 ^ v193;
          *(_DWORD *)(a4 + 132) = v194;
          v224 = v194 ^ v223;
          *(_DWORD *)(a4 + 136) = v224;
          v290 = v224 ^ v289;
          *(_DWORD *)(a4 + 140) = v290;
          v62 = AES_Rijndael_S[HIBYTE(v290)] ^ AES_Rijndael_Te6[(unsigned __int8)v290] ^ AES_Rijndael_Te5[BYTE1(v290)] ^ AES_Rijndael_Te4[BYTE2(v290)] ^ 0x20000000 ^ v61;
          *(_DWORD *)(a4 + 144) = v62;
          v107 = v62 ^ v106;
          *(_DWORD *)(a4 + 148) = v107;
          v152 = v107 ^ v151;
          *(_DWORD *)(a4 + 152) = v152;
          v195 = v152 ^ v194;
          *(_DWORD *)(a4 + 156) = v195;
          v225 = v195 ^ v224;
          *(_DWORD *)(a4 + 160) = v225;
          v291 = v225 ^ v290;
          *(_DWORD *)(a4 + 164) = v291;
          v63 = AES_Rijndael_S[HIBYTE(v291)] ^ AES_Rijndael_Te6[(unsigned __int8)v291] ^ AES_Rijndael_Te5[BYTE1(v291)] ^ AES_Rijndael_Te4[BYTE2(v291)] ^ 0x40000000 ^ v62;
          *(_DWORD *)(a4 + 168) = v63;
          v108 = v63 ^ v107;
          *(_DWORD *)(a4 + 172) = v108;
          v153 = v108 ^ v152;
          *(_DWORD *)(a4 + 176) = v153;
          v196 = v153 ^ v195;
          *(_DWORD *)(a4 + 180) = v196;
          v226 = v196 ^ v225;
          *(_DWORD *)(a4 + 184) = v226;
          v292 = v226 ^ v291;
          *(_DWORD *)(a4 + 188) = v292;
          v64 = AES_Rijndael_S[HIBYTE(v292)] ^ AES_Rijndael_Te6[(unsigned __int8)v292] ^ AES_Rijndael_Te5[BYTE1(v292)] ^ AES_Rijndael_Te4[BYTE2(v292)] ^ 0x80000000 ^ v63;
          *(_DWORD *)(a4 + 192) = v64;
          v109 = v64 ^ v108;
          *(_DWORD *)(a4 + 196) = v109;
          v154 = v109 ^ v153;
          *(_DWORD *)(a4 + 200) = v154;
          *(_DWORD *)(a4 + 204) = v154 ^ v196;
          *(_DWORD *)(a4 + 512) = 6;
          *(_DWORD *)(a4 + 516) = 12;
          goto LABEL_10;
        case 32:
          v227 = a1[4];
          *(_DWORD *)(a4 + 16) = v227;
          v293 = a1[5];
          *(_DWORD *)(a4 + 20) = v293;
          v314 = a1[6];
          *(_DWORD *)(a4 + 24) = v314;
          v363 = a1[7];
          *(_DWORD *)(a4 + 28) = v363;
          v65 = AES_Rijndael_S[HIBYTE(v363)] ^ AES_Rijndael_Te6[(unsigned __int8)v363] ^ AES_Rijndael_Te5[BYTE1(v363)] ^ AES_Rijndael_Te4[BYTE2(v363)] ^ 0x1000000 ^ v46;
          *(_DWORD *)(a4 + 32) = v65;
          v110 = v65 ^ v91;
          *(_DWORD *)(a4 + 36) = v110;
          v155 = v110 ^ v136;
          *(_DWORD *)(a4 + 40) = v155;
          v197 = v155 ^ v180;
          *(_DWORD *)(a4 + 44) = v197;
          v228 = AES_Rijndael_S[(unsigned __int8)v197] ^ AES_Rijndael_Te6[BYTE1(v197)] ^ AES_Rijndael_Te5[BYTE2(v197)] ^ AES_Rijndael_Te4[HIBYTE(v197)] ^ v227;
          *(_DWORD *)(a4 + 48) = v228;
          v294 = v228 ^ v293;
          *(_DWORD *)(a4 + 52) = v294;
          v315 = v294 ^ v314;
          *(_DWORD *)(a4 + 56) = v315;
          v364 = v315 ^ v363;
          *(_DWORD *)(a4 + 60) = v364;
          v66 = AES_Rijndael_S[HIBYTE(v364)] ^ AES_Rijndael_Te6[(unsigned __int8)v364] ^ AES_Rijndael_Te5[BYTE1(v364)] ^ AES_Rijndael_Te4[BYTE2(v364)] ^ 0x2000000 ^ v65;
          *(_DWORD *)(a4 + 64) = v66;
          v111 = v66 ^ v110;
          *(_DWORD *)(a4 + 68) = v111;
          v156 = v111 ^ v155;
          *(_DWORD *)(a4 + 72) = v156;
          v198 = v156 ^ v197;
          *(_DWORD *)(a4 + 76) = v198;
          v229 = AES_Rijndael_S[(unsigned __int8)v198] ^ AES_Rijndael_Te6[BYTE1(v198)] ^ AES_Rijndael_Te5[BYTE2(v198)] ^ AES_Rijndael_Te4[HIBYTE(v198)] ^ v228;
          *(_DWORD *)(a4 + 80) = v229;
          v295 = v229 ^ v294;
          *(_DWORD *)(a4 + 84) = v295;
          v316 = v295 ^ v315;
          *(_DWORD *)(a4 + 88) = v316;
          v365 = v316 ^ v364;
          *(_DWORD *)(a4 + 92) = v365;
          v67 = AES_Rijndael_S[HIBYTE(v365)] ^ AES_Rijndael_Te6[(unsigned __int8)v365] ^ AES_Rijndael_Te5[BYTE1(v365)] ^ AES_Rijndael_Te4[BYTE2(v365)] ^ 0x4000000 ^ v66;
          *(_DWORD *)(a4 + 96) = v67;
          v112 = v67 ^ v111;
          *(_DWORD *)(a4 + 100) = v112;
          v157 = v112 ^ v156;
          *(_DWORD *)(a4 + 104) = v157;
          v199 = v157 ^ v198;
          *(_DWORD *)(a4 + 108) = v199;
          v230 = AES_Rijndael_S[(unsigned __int8)v199] ^ AES_Rijndael_Te6[BYTE1(v199)] ^ AES_Rijndael_Te5[BYTE2(v199)] ^ AES_Rijndael_Te4[HIBYTE(v199)] ^ v229;
          *(_DWORD *)(a4 + 112) = v230;
          v296 = v230 ^ v295;
          *(_DWORD *)(a4 + 116) = v296;
          v317 = v296 ^ v316;
          *(_DWORD *)(a4 + 120) = v317;
          v366 = v317 ^ v365;
          *(_DWORD *)(a4 + 124) = v366;
          v68 = AES_Rijndael_S[HIBYTE(v366)] ^ AES_Rijndael_Te6[(unsigned __int8)v366] ^ AES_Rijndael_Te5[BYTE1(v366)] ^ AES_Rijndael_Te4[BYTE2(v366)] ^ 0x8000000 ^ v67;
          *(_DWORD *)(a4 + 128) = v68;
          v113 = v68 ^ v112;
          *(_DWORD *)(a4 + 132) = v113;
          v158 = v113 ^ v157;
          *(_DWORD *)(a4 + 136) = v158;
          v200 = v158 ^ v199;
          *(_DWORD *)(a4 + 140) = v200;
          v231 = AES_Rijndael_S[(unsigned __int8)v200] ^ AES_Rijndael_Te6[BYTE1(v200)] ^ AES_Rijndael_Te5[BYTE2(v200)] ^ AES_Rijndael_Te4[HIBYTE(v200)] ^ v230;
          *(_DWORD *)(a4 + 144) = v231;
          v297 = v231 ^ v296;
          *(_DWORD *)(a4 + 148) = v297;
          v318 = v297 ^ v317;
          *(_DWORD *)(a4 + 152) = v318;
          v367 = v318 ^ v366;
          *(_DWORD *)(a4 + 156) = v367;
          v69 = AES_Rijndael_S[HIBYTE(v367)] ^ AES_Rijndael_Te6[(unsigned __int8)v367] ^ AES_Rijndael_Te5[BYTE1(v367)] ^ AES_Rijndael_Te4[BYTE2(v367)] ^ 0x10000000 ^ v68;
          *(_DWORD *)(a4 + 160) = v69;
          v114 = v69 ^ v113;
          *(_DWORD *)(a4 + 164) = v114;
          v159 = v114 ^ v158;
          *(_DWORD *)(a4 + 168) = v159;
          v201 = v159 ^ v200;
          *(_DWORD *)(a4 + 172) = v201;
          v232 = AES_Rijndael_S[(unsigned __int8)v201] ^ AES_Rijndael_Te6[BYTE1(v201)] ^ AES_Rijndael_Te5[BYTE2(v201)] ^ AES_Rijndael_Te4[HIBYTE(v201)] ^ v231;
          *(_DWORD *)(a4 + 176) = v232;
          v298 = v232 ^ v297;
          *(_DWORD *)(a4 + 180) = v298;
          v319 = v298 ^ v318;
          *(_DWORD *)(a4 + 184) = v319;
          v368 = v319 ^ v367;
          *(_DWORD *)(a4 + 188) = v368;
          v70 = AES_Rijndael_S[HIBYTE(v368)] ^ AES_Rijndael_Te6[(unsigned __int8)v368] ^ AES_Rijndael_Te5[BYTE1(v368)] ^ AES_Rijndael_Te4[BYTE2(v368)] ^ 0x20000000 ^ v69;
          *(_DWORD *)(a4 + 192) = v70;
          v115 = v70 ^ v114;
          *(_DWORD *)(a4 + 196) = v115;
          v160 = v115 ^ v159;
          *(_DWORD *)(a4 + 200) = v160;
          v202 = v160 ^ v201;
          *(_DWORD *)(a4 + 204) = v202;
          v233 = AES_Rijndael_S[(unsigned __int8)v202] ^ AES_Rijndael_Te6[BYTE1(v202)] ^ AES_Rijndael_Te5[BYTE2(v202)] ^ AES_Rijndael_Te4[HIBYTE(v202)] ^ v232;
          *(_DWORD *)(a4 + 208) = v233;
          v299 = v233 ^ v298;
          *(_DWORD *)(a4 + 212) = v299;
          v320 = v299 ^ v319;
          *(_DWORD *)(a4 + 216) = v320;
          v369 = v320 ^ v368;
          *(_DWORD *)(a4 + 220) = v369;
          v71 = AES_Rijndael_S[HIBYTE(v369)] ^ AES_Rijndael_Te6[(unsigned __int8)v369] ^ AES_Rijndael_Te5[BYTE1(v369)] ^ AES_Rijndael_Te4[BYTE2(v369)] ^ 0x40000000 ^ v70;
          *(_DWORD *)(a4 + 224) = v71;
          v116 = v71 ^ v115;
          *(_DWORD *)(a4 + 228) = v116;
          v161 = v116 ^ v160;
          *(_DWORD *)(a4 + 232) = v161;
          *(_DWORD *)(a4 + 236) = v161 ^ v202;
          *(_DWORD *)(a4 + 512) = 8;
          *(_DWORD *)(a4 + 516) = 14;
          goto LABEL_10;
        default:
          *(_BYTE *)(a4 + 520) &= 0xFCu;
          LOWORD(v4) = 0;
          break;
      }
    }
    else
    {
LABEL_10:
      if ( (*(_BYTE *)(a4 + 520) & 2) != 0 )
      {
        v72 = *a1;
        *(_DWORD *)(a4 + 256) = *a1;
        v117 = a1[1];
        *(_DWORD *)(a4 + 260) = v117;
        v162 = a1[2];
        *(_DWORD *)(a4 + 264) = v162;
        v203 = a1[3];
        *(_DWORD *)(a4 + 268) = v203;
        switch ( a2 )
        {
          case 0:
            v4 = 4 * *(_DWORD *)(a4 + 512);
            break;
          case 16:
            v234 = AES_Rijndael_S[HIBYTE(v203)] ^ AES_Rijndael_Te6[(unsigned __int8)v203] ^ AES_Rijndael_Te5[BYTE1(v203)] ^ AES_Rijndael_Te4[BYTE2(v203)] ^ 0x1000000;
            v73 = v234 ^ v203 ^ v162 ^ v117 ^ v72;
            v235 = *(_DWORD *)(a4 + 256) ^ v234;
            *(_DWORD *)(a4 + 272) = AES_Rijndael_U4[(unsigned __int8)v235] ^ AES_Rijndael_U3[BYTE1(v235)] ^ AES_Rijndael_U2[BYTE2(v235)] ^ AES_Rijndael_U1[HIBYTE(v235)];
            v236 = *(_DWORD *)(a4 + 260) ^ v235;
            *(_DWORD *)(a4 + 276) = AES_Rijndael_U4[(unsigned __int8)v236] ^ AES_Rijndael_U3[BYTE1(v236)] ^ AES_Rijndael_U2[BYTE2(v236)] ^ AES_Rijndael_U1[HIBYTE(v236)];
            v237 = *(_DWORD *)(a4 + 264) ^ v236;
            *(_DWORD *)(a4 + 280) = AES_Rijndael_U4[(unsigned __int8)v237] ^ AES_Rijndael_U3[BYTE1(v237)] ^ AES_Rijndael_U2[BYTE2(v237)] ^ AES_Rijndael_U1[HIBYTE(v237)];
            v238 = *(_DWORD *)(a4 + 268) ^ v237;
            *(_DWORD *)(a4 + 284) = AES_Rijndael_U4[(unsigned __int8)v238] ^ AES_Rijndael_U3[BYTE1(v238)] ^ AES_Rijndael_U2[BYTE2(v238)] ^ AES_Rijndael_U1[HIBYTE(v238)];
            v239 = AES_Rijndael_S[HIBYTE(v73)] ^ AES_Rijndael_Te6[(unsigned __int8)v73] ^ AES_Rijndael_Te5[BYTE1(v73)] ^ AES_Rijndael_Te4[BYTE2(v73)] ^ 0x2000000;
            v118 = v239 ^ v203 ^ v117;
            v240 = *(_DWORD *)(a4 + 272) ^ AES_Rijndael_U4[(unsigned __int8)v239] ^ AES_Rijndael_U3[BYTE1(v239)] ^ AES_Rijndael_U2[BYTE2(v239)] ^ AES_Rijndael_U1[HIBYTE(v239)];
            *(_DWORD *)(a4 + 288) = v240;
            v241 = *(_DWORD *)(a4 + 276) ^ v240;
            *(_DWORD *)(a4 + 292) = v241;
            v242 = *(_DWORD *)(a4 + 280) ^ v241;
            *(_DWORD *)(a4 + 296) = v242;
            *(_DWORD *)(a4 + 300) = *(_DWORD *)(a4 + 284) ^ v242;
            v243 = AES_Rijndael_S[HIBYTE(v118)] ^ AES_Rijndael_Te6[(unsigned __int8)v118] ^ AES_Rijndael_Te5[BYTE1(v118)] ^ AES_Rijndael_Te4[BYTE2(v118)] ^ 0x4000000;
            v163 = v243 ^ v203 ^ v162;
            v244 = *(_DWORD *)(a4 + 288) ^ AES_Rijndael_U4[(unsigned __int8)v243] ^ AES_Rijndael_U3[BYTE1(v243)] ^ AES_Rijndael_U2[BYTE2(v243)] ^ AES_Rijndael_U1[HIBYTE(v243)];
            *(_DWORD *)(a4 + 304) = v244;
            v245 = *(_DWORD *)(a4 + 292) ^ v244;
            *(_DWORD *)(a4 + 308) = v245;
            v246 = *(_DWORD *)(a4 + 296) ^ v245;
            *(_DWORD *)(a4 + 312) = v246;
            *(_DWORD *)(a4 + 316) = *(_DWORD *)(a4 + 300) ^ v246;
            v247 = AES_Rijndael_S[HIBYTE(v163)] ^ AES_Rijndael_Te6[(unsigned __int8)v163] ^ AES_Rijndael_Te5[BYTE1(v163)] ^ AES_Rijndael_Te4[BYTE2(v163)] ^ 0x8000000;
            v204 = v247 ^ v203;
            v248 = *(_DWORD *)(a4 + 304) ^ AES_Rijndael_U4[(unsigned __int8)v247] ^ AES_Rijndael_U3[BYTE1(v247)] ^ AES_Rijndael_U2[BYTE2(v247)] ^ AES_Rijndael_U1[HIBYTE(v247)];
            *(_DWORD *)(a4 + 320) = v248;
            v249 = *(_DWORD *)(a4 + 308) ^ v248;
            *(_DWORD *)(a4 + 324) = v249;
            v250 = *(_DWORD *)(a4 + 312) ^ v249;
            *(_DWORD *)(a4 + 328) = v250;
            *(_DWORD *)(a4 + 332) = *(_DWORD *)(a4 + 316) ^ v250;
            v251 = AES_Rijndael_S[HIBYTE(v204)] ^ AES_Rijndael_Te6[(unsigned __int8)v204] ^ AES_Rijndael_Te5[BYTE1(v204)] ^ AES_Rijndael_Te4[BYTE2(v204)] ^ 0x10000000;
            v74 = v251 ^ v73;
            v252 = *(_DWORD *)(a4 + 320) ^ AES_Rijndael_U4[(unsigned __int8)v251] ^ AES_Rijndael_U3[BYTE1(v251)] ^ AES_Rijndael_U2[BYTE2(v251)] ^ AES_Rijndael_U1[HIBYTE(v251)];
            *(_DWORD *)(a4 + 336) = v252;
            v253 = *(_DWORD *)(a4 + 324) ^ v252;
            *(_DWORD *)(a4 + 340) = v253;
            v254 = *(_DWORD *)(a4 + 328) ^ v253;
            *(_DWORD *)(a4 + 344) = v254;
            *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 332) ^ v254;
            v255 = AES_Rijndael_S[HIBYTE(v74)] ^ AES_Rijndael_Te6[(unsigned __int8)v74] ^ AES_Rijndael_Te5[BYTE1(v74)] ^ AES_Rijndael_Te4[BYTE2(v74)] ^ 0x20000000;
            v119 = v255 ^ v118;
            v256 = *(_DWORD *)(a4 + 336) ^ AES_Rijndael_U4[(unsigned __int8)v255] ^ AES_Rijndael_U3[BYTE1(v255)] ^ AES_Rijndael_U2[BYTE2(v255)] ^ AES_Rijndael_U1[HIBYTE(v255)];
            *(_DWORD *)(a4 + 352) = v256;
            v257 = *(_DWORD *)(a4 + 340) ^ v256;
            *(_DWORD *)(a4 + 356) = v257;
            v258 = *(_DWORD *)(a4 + 344) ^ v257;
            *(_DWORD *)(a4 + 360) = v258;
            *(_DWORD *)(a4 + 364) = *(_DWORD *)(a4 + 348) ^ v258;
            v259 = AES_Rijndael_S[HIBYTE(v119)] ^ AES_Rijndael_Te6[(unsigned __int8)v119] ^ AES_Rijndael_Te5[BYTE1(v119)] ^ AES_Rijndael_Te4[BYTE2(v119)] ^ 0x40000000;
            v164 = v259 ^ v163;
            v260 = *(_DWORD *)(a4 + 352) ^ AES_Rijndael_U4[(unsigned __int8)v259] ^ AES_Rijndael_U3[BYTE1(v259)] ^ AES_Rijndael_U2[BYTE2(v259)] ^ AES_Rijndael_U1[HIBYTE(v259)];
            *(_DWORD *)(a4 + 368) = v260;
            v261 = *(_DWORD *)(a4 + 356) ^ v260;
            *(_DWORD *)(a4 + 372) = v261;
            v262 = *(_DWORD *)(a4 + 360) ^ v261;
            *(_DWORD *)(a4 + 376) = v262;
            *(_DWORD *)(a4 + 380) = *(_DWORD *)(a4 + 364) ^ v262;
            v263 = AES_Rijndael_S[HIBYTE(v164)] ^ AES_Rijndael_Te6[(unsigned __int8)v164] ^ AES_Rijndael_Te5[BYTE1(v164)] ^ AES_Rijndael_Te4[BYTE2(v164)] ^ 0x80000000;
            v205 = v263 ^ v204;
            v264 = *(_DWORD *)(a4 + 368) ^ AES_Rijndael_U4[(unsigned __int8)v263] ^ AES_Rijndael_U3[BYTE1(v263)] ^ AES_Rijndael_U2[BYTE2(v263)] ^ AES_Rijndael_U1[HIBYTE(v263)];
            *(_DWORD *)(a4 + 384) = v264;
            v265 = *(_DWORD *)(a4 + 372) ^ v264;
            *(_DWORD *)(a4 + 388) = v265;
            v266 = *(_DWORD *)(a4 + 376) ^ v265;
            *(_DWORD *)(a4 + 392) = v266;
            *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 380) ^ v266;
            v267 = AES_Rijndael_S[HIBYTE(v205)] ^ AES_Rijndael_Te6[(unsigned __int8)v205] ^ AES_Rijndael_Te5[BYTE1(v205)] ^ AES_Rijndael_Te4[BYTE2(v205)] ^ 0x1B000000;
            v75 = v267 ^ v74;
            v268 = *(_DWORD *)(a4 + 384) ^ AES_Rijndael_U4[(unsigned __int8)v267] ^ AES_Rijndael_U3[BYTE1(v267)] ^ AES_Rijndael_U2[BYTE2(v267)] ^ AES_Rijndael_U1[HIBYTE(v267)];
            *(_DWORD *)(a4 + 400) = v268;
            v269 = *(_DWORD *)(a4 + 388) ^ v268;
            *(_DWORD *)(a4 + 404) = v269;
            v270 = *(_DWORD *)(a4 + 392) ^ v269;
            *(_DWORD *)(a4 + 408) = v270;
            *(_DWORD *)(a4 + 412) = *(_DWORD *)(a4 + 396) ^ v270;
            v120 = AES_Rijndael_S[HIBYTE(v75)] ^ AES_Rijndael_Te6[(unsigned __int8)v75] ^ AES_Rijndael_Te5[BYTE1(v75)] ^ AES_Rijndael_Te4[BYTE2(v75)] ^ 0x36000000 ^ v119;
            *(_DWORD *)(a4 + 416) = v205 ^ v164 ^ v120 ^ v75;
            *(_DWORD *)(a4 + 420) = v205 ^ v120;
            *(_DWORD *)(a4 + 424) = v120 ^ v75;
            *(_DWORD *)(a4 + 428) = v120;
            *(_DWORD *)(a4 + 512) = 4;
            *(_DWORD *)(a4 + 516) = 10;
            goto LABEL_17;
          case 24:
            v271 = a1[4];
            *(_DWORD *)(a4 + 272) = AES_Rijndael_U4[(unsigned __int8)v271] ^ AES_Rijndael_U3[BYTE1(v271)] ^ AES_Rijndael_U2[BYTE2(v271)] ^ AES_Rijndael_U1[HIBYTE(v271)];
            v300 = a1[5];
            *(_DWORD *)(a4 + 276) = AES_Rijndael_U4[(unsigned __int8)v300] ^ AES_Rijndael_U3[BYTE1(v300)] ^ AES_Rijndael_U2[BYTE2(v300)] ^ AES_Rijndael_U1[HIBYTE(v300)];
            v76 = AES_Rijndael_S[HIBYTE(v300)] ^ AES_Rijndael_Te6[(unsigned __int8)v300] ^ AES_Rijndael_Te5[BYTE1(v300)] ^ AES_Rijndael_Te4[BYTE2(v300)] ^ 0x1000000 ^ v72;
            *(_DWORD *)(a4 + 280) = AES_Rijndael_U4[(unsigned __int8)v76] ^ AES_Rijndael_U3[BYTE1(v76)] ^ AES_Rijndael_U2[BYTE2(v76)] ^ AES_Rijndael_U1[HIBYTE(v76)];
            v121 = v76 ^ v117;
            *(_DWORD *)(a4 + 284) = AES_Rijndael_U4[(unsigned __int8)v121] ^ AES_Rijndael_U3[BYTE1(v121)] ^ AES_Rijndael_U2[BYTE2(v121)] ^ AES_Rijndael_U1[HIBYTE(v121)];
            v165 = v121 ^ v162;
            *(_DWORD *)(a4 + 288) = AES_Rijndael_U4[(unsigned __int8)v165] ^ AES_Rijndael_U3[BYTE1(v165)] ^ AES_Rijndael_U2[BYTE2(v165)] ^ AES_Rijndael_U1[HIBYTE(v165)];
            v206 = v165 ^ v203;
            *(_DWORD *)(a4 + 292) = AES_Rijndael_U4[(unsigned __int8)v206] ^ AES_Rijndael_U3[BYTE1(v206)] ^ AES_Rijndael_U2[BYTE2(v206)] ^ AES_Rijndael_U1[HIBYTE(v206)];
            v272 = v206 ^ v271;
            *(_DWORD *)(a4 + 296) = AES_Rijndael_U4[(unsigned __int8)v272] ^ AES_Rijndael_U3[BYTE1(v272)] ^ AES_Rijndael_U2[BYTE2(v272)] ^ AES_Rijndael_U1[HIBYTE(v272)];
            v301 = v272 ^ v300;
            *(_DWORD *)(a4 + 300) = AES_Rijndael_U4[(unsigned __int8)v301] ^ AES_Rijndael_U3[BYTE1(v301)] ^ AES_Rijndael_U2[BYTE2(v301)] ^ AES_Rijndael_U1[HIBYTE(v301)];
            v321 = AES_Rijndael_S[HIBYTE(v301)] ^ AES_Rijndael_Te6[(unsigned __int8)v301] ^ AES_Rijndael_Te5[BYTE1(v301)] ^ AES_Rijndael_Te4[BYTE2(v301)] ^ 0x2000000;
            v77 = v321 ^ v76;
            v322 = *(_DWORD *)(a4 + 280) ^ AES_Rijndael_U4[(unsigned __int8)v321] ^ AES_Rijndael_U3[BYTE1(v321)] ^ AES_Rijndael_U2[BYTE2(v321)] ^ AES_Rijndael_U1[HIBYTE(v321)];
            *(_DWORD *)(a4 + 304) = v322;
            v122 = v77 ^ v121;
            v323 = *(_DWORD *)(a4 + 284) ^ v322;
            *(_DWORD *)(a4 + 308) = v323;
            v166 = v122 ^ v165;
            v324 = *(_DWORD *)(a4 + 288) ^ v323;
            *(_DWORD *)(a4 + 312) = v324;
            v207 = v166 ^ v206;
            v325 = *(_DWORD *)(a4 + 292) ^ v324;
            *(_DWORD *)(a4 + 316) = v325;
            v273 = v207 ^ v272;
            v326 = *(_DWORD *)(a4 + 296) ^ v325;
            *(_DWORD *)(a4 + 320) = v326;
            v302 = v273 ^ v301;
            *(_DWORD *)(a4 + 324) = *(_DWORD *)(a4 + 300) ^ v326;
            v327 = AES_Rijndael_S[HIBYTE(v302)] ^ AES_Rijndael_Te6[(unsigned __int8)v302] ^ AES_Rijndael_Te5[BYTE1(v302)] ^ AES_Rijndael_Te4[BYTE2(v302)] ^ 0x4000000;
            v78 = v327 ^ v77;
            v328 = *(_DWORD *)(a4 + 304) ^ AES_Rijndael_U4[(unsigned __int8)v327] ^ AES_Rijndael_U3[BYTE1(v327)] ^ AES_Rijndael_U2[BYTE2(v327)] ^ AES_Rijndael_U1[HIBYTE(v327)];
            *(_DWORD *)(a4 + 328) = v328;
            v123 = v78 ^ v122;
            v329 = *(_DWORD *)(a4 + 308) ^ v328;
            *(_DWORD *)(a4 + 332) = v329;
            v167 = v123 ^ v166;
            v330 = *(_DWORD *)(a4 + 312) ^ v329;
            *(_DWORD *)(a4 + 336) = v330;
            v208 = v167 ^ v207;
            v331 = *(_DWORD *)(a4 + 316) ^ v330;
            *(_DWORD *)(a4 + 340) = v331;
            v274 = v208 ^ v273;
            v332 = *(_DWORD *)(a4 + 320) ^ v331;
            *(_DWORD *)(a4 + 344) = v332;
            v303 = v274 ^ v302;
            *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 324) ^ v332;
            v333 = AES_Rijndael_S[HIBYTE(v303)] ^ AES_Rijndael_Te6[(unsigned __int8)v303] ^ AES_Rijndael_Te5[BYTE1(v303)] ^ AES_Rijndael_Te4[BYTE2(v303)] ^ 0x8000000;
            v79 = v333 ^ v78;
            v334 = *(_DWORD *)(a4 + 328) ^ AES_Rijndael_U4[(unsigned __int8)v333] ^ AES_Rijndael_U3[BYTE1(v333)] ^ AES_Rijndael_U2[BYTE2(v333)] ^ AES_Rijndael_U1[HIBYTE(v333)];
            *(_DWORD *)(a4 + 352) = v334;
            v124 = v79 ^ v123;
            v335 = *(_DWORD *)(a4 + 332) ^ v334;
            *(_DWORD *)(a4 + 356) = v335;
            v168 = v124 ^ v167;
            v336 = *(_DWORD *)(a4 + 336) ^ v335;
            *(_DWORD *)(a4 + 360) = v336;
            v209 = v168 ^ v208;
            v337 = *(_DWORD *)(a4 + 340) ^ v336;
            *(_DWORD *)(a4 + 364) = v337;
            v275 = v209 ^ v274;
            v338 = *(_DWORD *)(a4 + 344) ^ v337;
            *(_DWORD *)(a4 + 368) = v338;
            v304 = v275 ^ v303;
            *(_DWORD *)(a4 + 372) = *(_DWORD *)(a4 + 348) ^ v338;
            v339 = AES_Rijndael_S[HIBYTE(v304)] ^ AES_Rijndael_Te6[(unsigned __int8)v304] ^ AES_Rijndael_Te5[BYTE1(v304)] ^ AES_Rijndael_Te4[BYTE2(v304)] ^ 0x10000000;
            v80 = v339 ^ v79;
            v340 = *(_DWORD *)(a4 + 352) ^ AES_Rijndael_U4[(unsigned __int8)v339] ^ AES_Rijndael_U3[BYTE1(v339)] ^ AES_Rijndael_U2[BYTE2(v339)] ^ AES_Rijndael_U1[HIBYTE(v339)];
            *(_DWORD *)(a4 + 376) = v340;
            v125 = v80 ^ v124;
            v341 = *(_DWORD *)(a4 + 356) ^ v340;
            *(_DWORD *)(a4 + 380) = v341;
            v169 = v125 ^ v168;
            v342 = *(_DWORD *)(a4 + 360) ^ v341;
            *(_DWORD *)(a4 + 384) = v342;
            v210 = v169 ^ v209;
            v343 = *(_DWORD *)(a4 + 364) ^ v342;
            *(_DWORD *)(a4 + 388) = v343;
            v276 = v210 ^ v275;
            v344 = *(_DWORD *)(a4 + 368) ^ v343;
            *(_DWORD *)(a4 + 392) = v344;
            v305 = v276 ^ v304;
            *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 372) ^ v344;
            v345 = AES_Rijndael_S[HIBYTE(v305)] ^ AES_Rijndael_Te6[(unsigned __int8)v305] ^ AES_Rijndael_Te5[BYTE1(v305)] ^ AES_Rijndael_Te4[BYTE2(v305)] ^ 0x20000000;
            v81 = v345 ^ v80;
            v346 = *(_DWORD *)(a4 + 376) ^ AES_Rijndael_U4[(unsigned __int8)v345] ^ AES_Rijndael_U3[BYTE1(v345)] ^ AES_Rijndael_U2[BYTE2(v345)] ^ AES_Rijndael_U1[HIBYTE(v345)];
            *(_DWORD *)(a4 + 400) = v346;
            v126 = v81 ^ v125;
            v347 = *(_DWORD *)(a4 + 380) ^ v346;
            *(_DWORD *)(a4 + 404) = v347;
            v170 = v126 ^ v169;
            v348 = *(_DWORD *)(a4 + 384) ^ v347;
            *(_DWORD *)(a4 + 408) = v348;
            v211 = v170 ^ v210;
            v349 = *(_DWORD *)(a4 + 388) ^ v348;
            *(_DWORD *)(a4 + 412) = v349;
            v277 = v211 ^ v276;
            v350 = *(_DWORD *)(a4 + 392) ^ v349;
            *(_DWORD *)(a4 + 416) = v350;
            v306 = v277 ^ v305;
            *(_DWORD *)(a4 + 420) = *(_DWORD *)(a4 + 396) ^ v350;
            v351 = AES_Rijndael_S[HIBYTE(v306)] ^ AES_Rijndael_Te6[(unsigned __int8)v306] ^ AES_Rijndael_Te5[BYTE1(v306)] ^ AES_Rijndael_Te4[BYTE2(v306)] ^ 0x40000000;
            v82 = v351 ^ v81;
            v352 = *(_DWORD *)(a4 + 400) ^ AES_Rijndael_U4[(unsigned __int8)v351] ^ AES_Rijndael_U3[BYTE1(v351)] ^ AES_Rijndael_U2[BYTE2(v351)] ^ AES_Rijndael_U1[HIBYTE(v351)];
            *(_DWORD *)(a4 + 424) = v352;
            v127 = v82 ^ v126;
            v353 = *(_DWORD *)(a4 + 404) ^ v352;
            *(_DWORD *)(a4 + 428) = v353;
            v171 = v127 ^ v170;
            v354 = *(_DWORD *)(a4 + 408) ^ v353;
            *(_DWORD *)(a4 + 432) = v354;
            v212 = v171 ^ v211;
            v355 = *(_DWORD *)(a4 + 412) ^ v354;
            *(_DWORD *)(a4 + 436) = v355;
            v356 = *(_DWORD *)(a4 + 416) ^ v355;
            *(_DWORD *)(a4 + 440) = v356;
            v307 = v212 ^ v277 ^ v306;
            *(_DWORD *)(a4 + 444) = *(_DWORD *)(a4 + 420) ^ v356;
            v83 = AES_Rijndael_S[HIBYTE(v307)] ^ AES_Rijndael_Te6[(unsigned __int8)v307] ^ AES_Rijndael_Te5[BYTE1(v307)] ^ AES_Rijndael_Te4[BYTE2(v307)] ^ 0x80000000 ^ v82;
            *(_DWORD *)(a4 + 448) = v83;
            v128 = v83 ^ v127;
            *(_DWORD *)(a4 + 452) = v128;
            v172 = v128 ^ v171;
            *(_DWORD *)(a4 + 456) = v172;
            *(_DWORD *)(a4 + 460) = v172 ^ v212;
            *(_DWORD *)(a4 + 512) = 6;
            *(_DWORD *)(a4 + 516) = 12;
            goto LABEL_17;
          case 32:
            v278 = a1[4];
            *(_DWORD *)(a4 + 272) = AES_Rijndael_U4[(unsigned __int8)v278] ^ AES_Rijndael_U3[BYTE1(v278)] ^ AES_Rijndael_U2[BYTE2(v278)] ^ AES_Rijndael_U1[HIBYTE(v278)];
            v308 = a1[5];
            *(_DWORD *)(a4 + 276) = AES_Rijndael_U4[(unsigned __int8)v308] ^ AES_Rijndael_U3[BYTE1(v308)] ^ AES_Rijndael_U2[BYTE2(v308)] ^ AES_Rijndael_U1[HIBYTE(v308)];
            v357 = a1[6];
            *(_DWORD *)(a4 + 280) = AES_Rijndael_U4[(unsigned __int8)v357] ^ AES_Rijndael_U3[BYTE1(v357)] ^ AES_Rijndael_U2[BYTE2(v357)] ^ AES_Rijndael_U1[HIBYTE(v357)];
            v370 = a1[7];
            *(_DWORD *)(a4 + 284) = AES_Rijndael_U4[(unsigned __int8)v370] ^ AES_Rijndael_U3[BYTE1(v370)] ^ AES_Rijndael_U2[BYTE2(v370)] ^ AES_Rijndael_U1[HIBYTE(v370)];
            v84 = AES_Rijndael_S[HIBYTE(v370)] ^ AES_Rijndael_Te6[(unsigned __int8)v370] ^ AES_Rijndael_Te5[BYTE1(v370)] ^ AES_Rijndael_Te4[BYTE2(v370)] ^ 0x1000000 ^ v72;
            *(_DWORD *)(a4 + 288) = AES_Rijndael_U4[(unsigned __int8)v84] ^ AES_Rijndael_U3[BYTE1(v84)] ^ AES_Rijndael_U2[BYTE2(v84)] ^ AES_Rijndael_U1[HIBYTE(v84)];
            v129 = v84 ^ v117;
            *(_DWORD *)(a4 + 292) = AES_Rijndael_U4[(unsigned __int8)v129] ^ AES_Rijndael_U3[BYTE1(v129)] ^ AES_Rijndael_U2[BYTE2(v129)] ^ AES_Rijndael_U1[HIBYTE(v129)];
            v173 = v129 ^ v162;
            *(_DWORD *)(a4 + 296) = AES_Rijndael_U4[(unsigned __int8)v173] ^ AES_Rijndael_U3[BYTE1(v173)] ^ AES_Rijndael_U2[BYTE2(v173)] ^ AES_Rijndael_U1[HIBYTE(v173)];
            v213 = v173 ^ v203;
            *(_DWORD *)(a4 + 300) = AES_Rijndael_U4[(unsigned __int8)v213] ^ AES_Rijndael_U3[BYTE1(v213)] ^ AES_Rijndael_U2[BYTE2(v213)] ^ AES_Rijndael_U1[HIBYTE(v213)];
            v279 = AES_Rijndael_S[(unsigned __int8)v213] ^ AES_Rijndael_Te6[BYTE1(v213)] ^ AES_Rijndael_Te5[BYTE2(v213)] ^ AES_Rijndael_Te4[HIBYTE(v213)] ^ v278;
            *(_DWORD *)(a4 + 304) = AES_Rijndael_U4[(unsigned __int8)v279] ^ AES_Rijndael_U3[BYTE1(v279)] ^ AES_Rijndael_U2[BYTE2(v279)] ^ AES_Rijndael_U1[HIBYTE(v279)];
            v309 = v279 ^ v308;
            *(_DWORD *)(a4 + 308) = AES_Rijndael_U4[(unsigned __int8)v309] ^ AES_Rijndael_U3[BYTE1(v309)] ^ AES_Rijndael_U2[BYTE2(v309)] ^ AES_Rijndael_U1[HIBYTE(v309)];
            v358 = v309 ^ v357;
            *(_DWORD *)(a4 + 312) = AES_Rijndael_U4[(unsigned __int8)v358] ^ AES_Rijndael_U3[BYTE1(v358)] ^ AES_Rijndael_U2[BYTE2(v358)] ^ AES_Rijndael_U1[HIBYTE(v358)];
            v371 = v358 ^ v370;
            *(_DWORD *)(a4 + 316) = AES_Rijndael_U4[(unsigned __int8)v371] ^ AES_Rijndael_U3[BYTE1(v371)] ^ AES_Rijndael_U2[BYTE2(v371)] ^ AES_Rijndael_U1[HIBYTE(v371)];
            v38 = AES_Rijndael_S[HIBYTE(v371)] ^ AES_Rijndael_Te6[(unsigned __int8)v371] ^ AES_Rijndael_Te5[BYTE1(v371)] ^ AES_Rijndael_Te4[BYTE2(v371)] ^ 0x2000000;
            v85 = v38 ^ v84;
            v39 = *(_DWORD *)(a4 + 288) ^ AES_Rijndael_U4[(unsigned __int8)v38] ^ AES_Rijndael_U3[BYTE1(v38)] ^ AES_Rijndael_U2[BYTE2(v38)] ^ AES_Rijndael_U1[HIBYTE(v38)];
            *(_DWORD *)(a4 + 320) = v39;
            v130 = v85 ^ v129;
            v40 = *(_DWORD *)(a4 + 292) ^ v39;
            *(_DWORD *)(a4 + 324) = v40;
            v174 = v130 ^ v173;
            v41 = *(_DWORD *)(a4 + 296) ^ v40;
            *(_DWORD *)(a4 + 328) = v41;
            v214 = v174 ^ v213;
            *(_DWORD *)(a4 + 332) = *(_DWORD *)(a4 + 300) ^ v41;
            v42 = AES_Rijndael_S[(unsigned __int8)v214] ^ AES_Rijndael_Te6[BYTE1(v214)] ^ AES_Rijndael_Te5[BYTE2(v214)] ^ AES_Rijndael_Te4[HIBYTE(v214)];
            v280 = v42 ^ v279;
            v43 = *(_DWORD *)(a4 + 304) ^ AES_Rijndael_U4[(unsigned __int8)v42] ^ AES_Rijndael_U3[BYTE1(v42)] ^ AES_Rijndael_U2[BYTE2(v42)] ^ AES_Rijndael_U1[HIBYTE(v42)];
            *(_DWORD *)(a4 + 336) = v43;
            v310 = v280 ^ v309;
            v44 = *(_DWORD *)(a4 + 308) ^ v43;
            *(_DWORD *)(a4 + 340) = v44;
            v359 = v310 ^ v358;
            v45 = *(_DWORD *)(a4 + 312) ^ v44;
            *(_DWORD *)(a4 + 344) = v45;
            v372 = v359 ^ v371;
            *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 316) ^ v45;
            v30 = AES_Rijndael_S[HIBYTE(v372)] ^ AES_Rijndael_Te6[(unsigned __int8)v372] ^ AES_Rijndael_Te5[BYTE1(v372)] ^ AES_Rijndael_Te4[BYTE2(v372)] ^ 0x4000000;
            v86 = v30 ^ v85;
            v31 = *(_DWORD *)(a4 + 320) ^ AES_Rijndael_U4[(unsigned __int8)v30] ^ AES_Rijndael_U3[BYTE1(v30)] ^ AES_Rijndael_U2[BYTE2(v30)] ^ AES_Rijndael_U1[HIBYTE(v30)];
            *(_DWORD *)(a4 + 352) = v31;
            v131 = v86 ^ v130;
            v32 = *(_DWORD *)(a4 + 324) ^ v31;
            *(_DWORD *)(a4 + 356) = v32;
            v175 = v131 ^ v174;
            v33 = *(_DWORD *)(a4 + 328) ^ v32;
            *(_DWORD *)(a4 + 360) = v33;
            v215 = v175 ^ v214;
            *(_DWORD *)(a4 + 364) = *(_DWORD *)(a4 + 332) ^ v33;
            v34 = AES_Rijndael_S[(unsigned __int8)v215] ^ AES_Rijndael_Te6[BYTE1(v215)] ^ AES_Rijndael_Te5[BYTE2(v215)] ^ AES_Rijndael_Te4[HIBYTE(v215)];
            v281 = v34 ^ v280;
            v35 = *(_DWORD *)(a4 + 336) ^ AES_Rijndael_U4[(unsigned __int8)v34] ^ AES_Rijndael_U3[BYTE1(v34)] ^ AES_Rijndael_U2[BYTE2(v34)] ^ AES_Rijndael_U1[HIBYTE(v34)];
            *(_DWORD *)(a4 + 368) = v35;
            v311 = v281 ^ v310;
            v36 = *(_DWORD *)(a4 + 340) ^ v35;
            *(_DWORD *)(a4 + 372) = v36;
            v360 = v311 ^ v359;
            v37 = *(_DWORD *)(a4 + 344) ^ v36;
            *(_DWORD *)(a4 + 376) = v37;
            v373 = v360 ^ v372;
            *(_DWORD *)(a4 + 380) = *(_DWORD *)(a4 + 348) ^ v37;
            v22 = AES_Rijndael_S[HIBYTE(v373)] ^ AES_Rijndael_Te6[(unsigned __int8)v373] ^ AES_Rijndael_Te5[BYTE1(v373)] ^ AES_Rijndael_Te4[BYTE2(v373)] ^ 0x8000000;
            v87 = v22 ^ v86;
            v23 = *(_DWORD *)(a4 + 352) ^ AES_Rijndael_U4[(unsigned __int8)v22] ^ AES_Rijndael_U3[BYTE1(v22)] ^ AES_Rijndael_U2[BYTE2(v22)] ^ AES_Rijndael_U1[HIBYTE(v22)];
            *(_DWORD *)(a4 + 384) = v23;
            v132 = v87 ^ v131;
            v24 = *(_DWORD *)(a4 + 356) ^ v23;
            *(_DWORD *)(a4 + 388) = v24;
            v176 = v132 ^ v175;
            v25 = *(_DWORD *)(a4 + 360) ^ v24;
            *(_DWORD *)(a4 + 392) = v25;
            v216 = v176 ^ v215;
            *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 364) ^ v25;
            v26 = AES_Rijndael_S[(unsigned __int8)v216] ^ AES_Rijndael_Te6[BYTE1(v216)] ^ AES_Rijndael_Te5[BYTE2(v216)] ^ AES_Rijndael_Te4[HIBYTE(v216)];
            v282 = v26 ^ v281;
            v27 = *(_DWORD *)(a4 + 368) ^ AES_Rijndael_U4[(unsigned __int8)v26] ^ AES_Rijndael_U3[BYTE1(v26)] ^ AES_Rijndael_U2[BYTE2(v26)] ^ AES_Rijndael_U1[HIBYTE(v26)];
            *(_DWORD *)(a4 + 400) = v27;
            v312 = v282 ^ v311;
            v28 = *(_DWORD *)(a4 + 372) ^ v27;
            *(_DWORD *)(a4 + 404) = v28;
            v361 = v312 ^ v360;
            v29 = *(_DWORD *)(a4 + 376) ^ v28;
            *(_DWORD *)(a4 + 408) = v29;
            v374 = v361 ^ v373;
            *(_DWORD *)(a4 + 412) = *(_DWORD *)(a4 + 380) ^ v29;
            v14 = AES_Rijndael_S[HIBYTE(v374)] ^ AES_Rijndael_Te6[(unsigned __int8)v374] ^ AES_Rijndael_Te5[BYTE1(v374)] ^ AES_Rijndael_Te4[BYTE2(v374)] ^ 0x10000000;
            v88 = v14 ^ v87;
            v15 = *(_DWORD *)(a4 + 384) ^ AES_Rijndael_U4[(unsigned __int8)v14] ^ AES_Rijndael_U3[BYTE1(v14)] ^ AES_Rijndael_U2[BYTE2(v14)] ^ AES_Rijndael_U1[HIBYTE(v14)];
            *(_DWORD *)(a4 + 416) = v15;
            v133 = v88 ^ v132;
            v16 = *(_DWORD *)(a4 + 388) ^ v15;
            *(_DWORD *)(a4 + 420) = v16;
            v177 = v133 ^ v176;
            v17 = *(_DWORD *)(a4 + 392) ^ v16;
            *(_DWORD *)(a4 + 424) = v17;
            v217 = v177 ^ v216;
            *(_DWORD *)(a4 + 428) = *(_DWORD *)(a4 + 396) ^ v17;
            v18 = AES_Rijndael_S[(unsigned __int8)v217] ^ AES_Rijndael_Te6[BYTE1(v217)] ^ AES_Rijndael_Te5[BYTE2(v217)] ^ AES_Rijndael_Te4[HIBYTE(v217)];
            v283 = v18 ^ v282;
            v19 = *(_DWORD *)(a4 + 400) ^ AES_Rijndael_U4[(unsigned __int8)v18] ^ AES_Rijndael_U3[BYTE1(v18)] ^ AES_Rijndael_U2[BYTE2(v18)] ^ AES_Rijndael_U1[HIBYTE(v18)];
            *(_DWORD *)(a4 + 432) = v19;
            v313 = v283 ^ v312;
            v20 = *(_DWORD *)(a4 + 404) ^ v19;
            *(_DWORD *)(a4 + 436) = v20;
            v362 = v313 ^ v361;
            v21 = *(_DWORD *)(a4 + 408) ^ v20;
            *(_DWORD *)(a4 + 440) = v21;
            v375 = v362 ^ v374;
            *(_DWORD *)(a4 + 444) = *(_DWORD *)(a4 + 412) ^ v21;
            v6 = AES_Rijndael_S[HIBYTE(v375)] ^ AES_Rijndael_Te6[(unsigned __int8)v375] ^ AES_Rijndael_Te5[BYTE1(v375)] ^ AES_Rijndael_Te4[BYTE2(v375)] ^ 0x20000000;
            v89 = v6 ^ v88;
            v7 = *(_DWORD *)(a4 + 416) ^ AES_Rijndael_U4[(unsigned __int8)v6] ^ AES_Rijndael_U3[BYTE1(v6)] ^ AES_Rijndael_U2[BYTE2(v6)] ^ AES_Rijndael_U1[HIBYTE(v6)];
            *(_DWORD *)(a4 + 448) = v7;
            v134 = v89 ^ v133;
            v8 = *(_DWORD *)(a4 + 420) ^ v7;
            *(_DWORD *)(a4 + 452) = v8;
            v178 = v134 ^ v177;
            v9 = *(_DWORD *)(a4 + 424) ^ v8;
            *(_DWORD *)(a4 + 456) = v9;
            v218 = v178 ^ v217;
            *(_DWORD *)(a4 + 460) = *(_DWORD *)(a4 + 428) ^ v9;
            v10 = AES_Rijndael_S[(unsigned __int8)v218] ^ AES_Rijndael_Te6[BYTE1(v218)] ^ AES_Rijndael_Te5[BYTE2(v218)] ^ AES_Rijndael_Te4[HIBYTE(v218)];
            v284 = v10 ^ v283;
            v11 = *(_DWORD *)(a4 + 432) ^ AES_Rijndael_U4[(unsigned __int8)v10] ^ AES_Rijndael_U3[BYTE1(v10)] ^ AES_Rijndael_U2[BYTE2(v10)] ^ AES_Rijndael_U1[HIBYTE(v10)];
            *(_DWORD *)(a4 + 464) = v11;
            v12 = *(_DWORD *)(a4 + 436) ^ v11;
            *(_DWORD *)(a4 + 468) = v12;
            v13 = *(_DWORD *)(a4 + 440) ^ v12;
            *(_DWORD *)(a4 + 472) = v13;
            v376 = v284 ^ v313 ^ v362 ^ v375;
            *(_DWORD *)(a4 + 476) = *(_DWORD *)(a4 + 444) ^ v13;
            v90 = AES_Rijndael_S[HIBYTE(v376)] ^ AES_Rijndael_Te6[(unsigned __int8)v376] ^ AES_Rijndael_Te5[BYTE1(v376)] ^ AES_Rijndael_Te4[BYTE2(v376)] ^ 0x40000000 ^ v89;
            *(_DWORD *)(a4 + 480) = v90;
            v135 = v90 ^ v134;
            *(_DWORD *)(a4 + 484) = v135;
            v179 = v135 ^ v178;
            *(_DWORD *)(a4 + 488) = v179;
            *(_DWORD *)(a4 + 492) = v179 ^ v218;
            *(_DWORD *)(a4 + 512) = 8;
            *(_DWORD *)(a4 + 516) = 14;
            goto LABEL_17;
          default:
            *(_BYTE *)(a4 + 520) &= 0xFCu;
            LOWORD(v4) = 0;
            break;
        }
      }
      else
      {
LABEL_17:
        LOWORD(v4) = 1;
      }
    }
  }
  else
  {
    LOWORD(v4) = 0;
  }
  return v4;
}
// 4D1708: using guessed type int AES_Rijndael_U1[256];
// 4D1B08: using guessed type int AES_Rijndael_U2[256];
// 4D1F08: using guessed type int AES_Rijndael_U3[256];
// 4D2308: using guessed type int AES_Rijndael_U4[257];

//----- (0049C998) --------------------------------------------------------
__int16 __cdecl Encode_AES_Rijndael_Block(_DWORD *a1, int *a2, int a3)
{
  int v4; // [esp+0h] [ebp-28h]
  int v5; // [esp+4h] [ebp-24h]
  int v6; // [esp+4h] [ebp-24h]
  int v7; // [esp+4h] [ebp-24h]
  int v8; // [esp+4h] [ebp-24h]
  int v9; // [esp+4h] [ebp-24h]
  int v10; // [esp+4h] [ebp-24h]
  int v11; // [esp+4h] [ebp-24h]
  int v12; // [esp+8h] [ebp-20h]
  int v13; // [esp+8h] [ebp-20h]
  int v14; // [esp+8h] [ebp-20h]
  int v15; // [esp+8h] [ebp-20h]
  int v16; // [esp+8h] [ebp-20h]
  int v17; // [esp+8h] [ebp-20h]
  int v18; // [esp+8h] [ebp-20h]
  int v19; // [esp+Ch] [ebp-1Ch]
  int v20; // [esp+Ch] [ebp-1Ch]
  int v21; // [esp+Ch] [ebp-1Ch]
  int v22; // [esp+Ch] [ebp-1Ch]
  int v23; // [esp+Ch] [ebp-1Ch]
  int v24; // [esp+Ch] [ebp-1Ch]
  int v25; // [esp+Ch] [ebp-1Ch]
  int v26; // [esp+10h] [ebp-18h]
  int v27; // [esp+10h] [ebp-18h]
  int v28; // [esp+10h] [ebp-18h]
  int v29; // [esp+10h] [ebp-18h]
  int v30; // [esp+10h] [ebp-18h]
  int v31; // [esp+10h] [ebp-18h]
  int v32; // [esp+10h] [ebp-18h]
  int v33; // [esp+14h] [ebp-14h]
  int v34; // [esp+14h] [ebp-14h]
  int v35; // [esp+14h] [ebp-14h]
  int v36; // [esp+14h] [ebp-14h]
  int v37; // [esp+14h] [ebp-14h]
  int v38; // [esp+18h] [ebp-10h]
  int v39; // [esp+18h] [ebp-10h]
  int v40; // [esp+18h] [ebp-10h]
  int v41; // [esp+18h] [ebp-10h]
  int v42; // [esp+18h] [ebp-10h]
  int v43; // [esp+1Ch] [ebp-Ch]
  int v44; // [esp+1Ch] [ebp-Ch]
  int v45; // [esp+1Ch] [ebp-Ch]
  int v46; // [esp+1Ch] [ebp-Ch]
  int v47; // [esp+1Ch] [ebp-Ch]
  int v48; // [esp+20h] [ebp-8h]
  int v49; // [esp+20h] [ebp-8h]
  int v50; // [esp+20h] [ebp-8h]
  int v51; // [esp+20h] [ebp-8h]
  int v52; // [esp+20h] [ebp-8h]
  _DWORD *v53; // [esp+24h] [ebp-4h]

  if ( (*(_BYTE *)(a3 + 520) & 1) == 0 )
    return 0;
  v33 = *(_DWORD *)a3 ^ *a1;
  v38 = *(_DWORD *)(a3 + 4) ^ a1[1];
  v43 = *(_DWORD *)(a3 + 8) ^ a1[2];
  v48 = *(_DWORD *)(a3 + 12) ^ a1[3];
  v53 = (_DWORD *)(a3 + 4 * (4 * *(_DWORD *)(a3 + 516) - 36));
  v4 = *(_DWORD *)(a3 + 516);
  switch ( v4 )
  {
    case 10:
      goto LABEL_8;
    case 12:
LABEL_7:
      v6 = AES_Rijndael_Te3[(unsigned __int8)v48] ^ AES_Rijndael_Te2[BYTE1(v43)] ^ AES_Rijndael_Te1[BYTE2(v38)] ^ AES_Rijndael_Te0[HIBYTE(v33)] ^ *(v53 - 8);
      v13 = AES_Rijndael_Te3[(unsigned __int8)v33] ^ AES_Rijndael_Te2[BYTE1(v48)] ^ AES_Rijndael_Te1[BYTE2(v43)] ^ AES_Rijndael_Te0[HIBYTE(v38)] ^ *(v53 - 7);
      v20 = AES_Rijndael_Te3[(unsigned __int8)v38] ^ AES_Rijndael_Te2[BYTE1(v33)] ^ AES_Rijndael_Te1[BYTE2(v48)] ^ AES_Rijndael_Te0[HIBYTE(v43)] ^ *(v53 - 6);
      v27 = AES_Rijndael_Te3[(unsigned __int8)v43] ^ AES_Rijndael_Te2[BYTE1(v38)] ^ AES_Rijndael_Te1[BYTE2(v33)] ^ AES_Rijndael_Te0[HIBYTE(v48)] ^ *(v53 - 5);
      v33 = AES_Rijndael_Te3[(unsigned __int8)v27] ^ AES_Rijndael_Te2[BYTE1(v20)] ^ AES_Rijndael_Te1[BYTE2(v13)] ^ AES_Rijndael_Te0[HIBYTE(v6)] ^ *(v53 - 4);
      v38 = AES_Rijndael_Te3[(unsigned __int8)v6] ^ AES_Rijndael_Te2[BYTE1(v27)] ^ AES_Rijndael_Te1[BYTE2(v20)] ^ AES_Rijndael_Te0[HIBYTE(v13)] ^ *(v53 - 3);
      v43 = AES_Rijndael_Te3[(unsigned __int8)v13] ^ AES_Rijndael_Te2[BYTE1(v6)] ^ AES_Rijndael_Te1[BYTE2(v27)] ^ AES_Rijndael_Te0[HIBYTE(v20)] ^ *(v53 - 2);
      v48 = AES_Rijndael_Te3[(unsigned __int8)v20] ^ AES_Rijndael_Te2[BYTE1(v13)] ^ AES_Rijndael_Te1[BYTE2(v6)] ^ AES_Rijndael_Te0[HIBYTE(v27)] ^ *(v53 - 1);
LABEL_8:
      v7 = AES_Rijndael_Te3[(unsigned __int8)v48] ^ AES_Rijndael_Te2[BYTE1(v43)] ^ AES_Rijndael_Te1[BYTE2(v38)] ^ AES_Rijndael_Te0[HIBYTE(v33)] ^ *v53;
      v14 = AES_Rijndael_Te3[(unsigned __int8)v33] ^ AES_Rijndael_Te2[BYTE1(v48)] ^ AES_Rijndael_Te1[BYTE2(v43)] ^ AES_Rijndael_Te0[HIBYTE(v38)] ^ v53[1];
      v21 = AES_Rijndael_Te3[(unsigned __int8)v38] ^ AES_Rijndael_Te2[BYTE1(v33)] ^ AES_Rijndael_Te1[BYTE2(v48)] ^ AES_Rijndael_Te0[HIBYTE(v43)] ^ v53[2];
      v28 = AES_Rijndael_Te3[(unsigned __int8)v43] ^ AES_Rijndael_Te2[BYTE1(v38)] ^ AES_Rijndael_Te1[BYTE2(v33)] ^ AES_Rijndael_Te0[HIBYTE(v48)] ^ v53[3];
      v34 = AES_Rijndael_Te3[(unsigned __int8)v28] ^ AES_Rijndael_Te2[BYTE1(v21)] ^ AES_Rijndael_Te1[BYTE2(v14)] ^ AES_Rijndael_Te0[HIBYTE(v7)] ^ v53[4];
      v39 = AES_Rijndael_Te3[(unsigned __int8)v7] ^ AES_Rijndael_Te2[BYTE1(v28)] ^ AES_Rijndael_Te1[BYTE2(v21)] ^ AES_Rijndael_Te0[HIBYTE(v14)] ^ v53[5];
      v44 = AES_Rijndael_Te3[(unsigned __int8)v14] ^ AES_Rijndael_Te2[BYTE1(v7)] ^ AES_Rijndael_Te1[BYTE2(v28)] ^ AES_Rijndael_Te0[HIBYTE(v21)] ^ v53[6];
      v49 = AES_Rijndael_Te3[(unsigned __int8)v21] ^ AES_Rijndael_Te2[BYTE1(v14)] ^ AES_Rijndael_Te1[BYTE2(v7)] ^ AES_Rijndael_Te0[HIBYTE(v28)] ^ v53[7];
      v8 = AES_Rijndael_Te3[(unsigned __int8)v49] ^ AES_Rijndael_Te2[BYTE1(v44)] ^ AES_Rijndael_Te1[BYTE2(v39)] ^ AES_Rijndael_Te0[HIBYTE(v34)] ^ v53[8];
      v15 = AES_Rijndael_Te3[(unsigned __int8)v34] ^ AES_Rijndael_Te2[BYTE1(v49)] ^ AES_Rijndael_Te1[BYTE2(v44)] ^ AES_Rijndael_Te0[HIBYTE(v39)] ^ v53[9];
      v22 = AES_Rijndael_Te3[(unsigned __int8)v39] ^ AES_Rijndael_Te2[BYTE1(v34)] ^ AES_Rijndael_Te1[BYTE2(v49)] ^ AES_Rijndael_Te0[HIBYTE(v44)] ^ v53[10];
      v29 = AES_Rijndael_Te3[(unsigned __int8)v44] ^ AES_Rijndael_Te2[BYTE1(v39)] ^ AES_Rijndael_Te1[BYTE2(v34)] ^ AES_Rijndael_Te0[HIBYTE(v49)] ^ v53[11];
      v35 = AES_Rijndael_Te3[(unsigned __int8)v29] ^ AES_Rijndael_Te2[BYTE1(v22)] ^ AES_Rijndael_Te1[BYTE2(v15)] ^ AES_Rijndael_Te0[HIBYTE(v8)] ^ v53[12];
      v40 = AES_Rijndael_Te3[(unsigned __int8)v8] ^ AES_Rijndael_Te2[BYTE1(v29)] ^ AES_Rijndael_Te1[BYTE2(v22)] ^ AES_Rijndael_Te0[HIBYTE(v15)] ^ v53[13];
      v45 = AES_Rijndael_Te3[(unsigned __int8)v15] ^ AES_Rijndael_Te2[BYTE1(v8)] ^ AES_Rijndael_Te1[BYTE2(v29)] ^ AES_Rijndael_Te0[HIBYTE(v22)] ^ v53[14];
      v50 = AES_Rijndael_Te3[(unsigned __int8)v22] ^ AES_Rijndael_Te2[BYTE1(v15)] ^ AES_Rijndael_Te1[BYTE2(v8)] ^ AES_Rijndael_Te0[HIBYTE(v29)] ^ v53[15];
      v9 = AES_Rijndael_Te3[(unsigned __int8)v50] ^ AES_Rijndael_Te2[BYTE1(v45)] ^ AES_Rijndael_Te1[BYTE2(v40)] ^ AES_Rijndael_Te0[HIBYTE(v35)] ^ v53[16];
      v16 = AES_Rijndael_Te3[(unsigned __int8)v35] ^ AES_Rijndael_Te2[BYTE1(v50)] ^ AES_Rijndael_Te1[BYTE2(v45)] ^ AES_Rijndael_Te0[HIBYTE(v40)] ^ v53[17];
      v23 = AES_Rijndael_Te3[(unsigned __int8)v40] ^ AES_Rijndael_Te2[BYTE1(v35)] ^ AES_Rijndael_Te1[BYTE2(v50)] ^ AES_Rijndael_Te0[HIBYTE(v45)] ^ v53[18];
      v30 = AES_Rijndael_Te3[(unsigned __int8)v45] ^ AES_Rijndael_Te2[BYTE1(v40)] ^ AES_Rijndael_Te1[BYTE2(v35)] ^ AES_Rijndael_Te0[HIBYTE(v50)] ^ v53[19];
      v36 = AES_Rijndael_Te3[(unsigned __int8)v30] ^ AES_Rijndael_Te2[BYTE1(v23)] ^ AES_Rijndael_Te1[BYTE2(v16)] ^ AES_Rijndael_Te0[HIBYTE(v9)] ^ v53[20];
      v41 = AES_Rijndael_Te3[(unsigned __int8)v9] ^ AES_Rijndael_Te2[BYTE1(v30)] ^ AES_Rijndael_Te1[BYTE2(v23)] ^ AES_Rijndael_Te0[HIBYTE(v16)] ^ v53[21];
      v46 = AES_Rijndael_Te3[(unsigned __int8)v16] ^ AES_Rijndael_Te2[BYTE1(v9)] ^ AES_Rijndael_Te1[BYTE2(v30)] ^ AES_Rijndael_Te0[HIBYTE(v23)] ^ v53[22];
      v51 = AES_Rijndael_Te3[(unsigned __int8)v23] ^ AES_Rijndael_Te2[BYTE1(v16)] ^ AES_Rijndael_Te1[BYTE2(v9)] ^ AES_Rijndael_Te0[HIBYTE(v30)] ^ v53[23];
      v10 = AES_Rijndael_Te3[(unsigned __int8)v51] ^ AES_Rijndael_Te2[BYTE1(v46)] ^ AES_Rijndael_Te1[BYTE2(v41)] ^ AES_Rijndael_Te0[HIBYTE(v36)] ^ v53[24];
      v17 = AES_Rijndael_Te3[(unsigned __int8)v36] ^ AES_Rijndael_Te2[BYTE1(v51)] ^ AES_Rijndael_Te1[BYTE2(v46)] ^ AES_Rijndael_Te0[HIBYTE(v41)] ^ v53[25];
      v24 = AES_Rijndael_Te3[(unsigned __int8)v41] ^ AES_Rijndael_Te2[BYTE1(v36)] ^ AES_Rijndael_Te1[BYTE2(v51)] ^ AES_Rijndael_Te0[HIBYTE(v46)] ^ v53[26];
      v31 = AES_Rijndael_Te3[(unsigned __int8)v46] ^ AES_Rijndael_Te2[BYTE1(v41)] ^ AES_Rijndael_Te1[BYTE2(v36)] ^ AES_Rijndael_Te0[HIBYTE(v51)] ^ v53[27];
      v37 = AES_Rijndael_Te3[(unsigned __int8)v31] ^ AES_Rijndael_Te2[BYTE1(v24)] ^ AES_Rijndael_Te1[BYTE2(v17)] ^ AES_Rijndael_Te0[HIBYTE(v10)] ^ v53[28];
      v42 = AES_Rijndael_Te3[(unsigned __int8)v10] ^ AES_Rijndael_Te2[BYTE1(v31)] ^ AES_Rijndael_Te1[BYTE2(v24)] ^ AES_Rijndael_Te0[HIBYTE(v17)] ^ v53[29];
      v47 = AES_Rijndael_Te3[(unsigned __int8)v17] ^ AES_Rijndael_Te2[BYTE1(v10)] ^ AES_Rijndael_Te1[BYTE2(v31)] ^ AES_Rijndael_Te0[HIBYTE(v24)] ^ v53[30];
      v52 = AES_Rijndael_Te3[(unsigned __int8)v24] ^ AES_Rijndael_Te2[BYTE1(v17)] ^ AES_Rijndael_Te1[BYTE2(v10)] ^ AES_Rijndael_Te0[HIBYTE(v31)] ^ v53[31];
      v11 = AES_Rijndael_Te3[(unsigned __int8)v52] ^ AES_Rijndael_Te2[BYTE1(v47)] ^ AES_Rijndael_Te1[BYTE2(v42)] ^ AES_Rijndael_Te0[HIBYTE(v37)] ^ v53[32];
      v18 = AES_Rijndael_Te3[(unsigned __int8)v37] ^ AES_Rijndael_Te2[BYTE1(v52)] ^ AES_Rijndael_Te1[BYTE2(v47)] ^ AES_Rijndael_Te0[HIBYTE(v42)] ^ v53[33];
      v25 = AES_Rijndael_Te3[(unsigned __int8)v42] ^ AES_Rijndael_Te2[BYTE1(v37)] ^ AES_Rijndael_Te1[BYTE2(v52)] ^ AES_Rijndael_Te0[HIBYTE(v47)] ^ v53[34];
      v32 = AES_Rijndael_Te3[(unsigned __int8)v47] ^ AES_Rijndael_Te2[BYTE1(v42)] ^ AES_Rijndael_Te1[BYTE2(v37)] ^ AES_Rijndael_Te0[HIBYTE(v52)] ^ v53[35];
      v33 = AES_Rijndael_S[(unsigned __int8)v32] ^ AES_Rijndael_Te6[BYTE1(v25)] ^ AES_Rijndael_Te5[BYTE2(v18)] ^ AES_Rijndael_Te4[HIBYTE(v11)] ^ v53[36];
      v38 = AES_Rijndael_S[(unsigned __int8)v11] ^ AES_Rijndael_Te6[BYTE1(v32)] ^ AES_Rijndael_Te5[BYTE2(v25)] ^ AES_Rijndael_Te4[HIBYTE(v18)] ^ v53[37];
      v43 = AES_Rijndael_S[(unsigned __int8)v18] ^ AES_Rijndael_Te6[BYTE1(v11)] ^ AES_Rijndael_Te5[BYTE2(v32)] ^ AES_Rijndael_Te4[HIBYTE(v25)] ^ v53[38];
      v48 = AES_Rijndael_S[(unsigned __int8)v25] ^ AES_Rijndael_Te6[BYTE1(v18)] ^ AES_Rijndael_Te5[BYTE2(v11)] ^ AES_Rijndael_Te4[HIBYTE(v32)] ^ v53[39];
      break;
    case 14:
      v5 = AES_Rijndael_Te3[(unsigned __int8)v48] ^ AES_Rijndael_Te2[BYTE1(v43)] ^ AES_Rijndael_Te1[BYTE2(v38)] ^ AES_Rijndael_Te0[HIBYTE(v33)] ^ *(v53 - 16);
      v12 = AES_Rijndael_Te3[(unsigned __int8)v33] ^ AES_Rijndael_Te2[BYTE1(v48)] ^ AES_Rijndael_Te1[BYTE2(v43)] ^ AES_Rijndael_Te0[HIBYTE(v38)] ^ *(v53 - 15);
      v19 = AES_Rijndael_Te3[(unsigned __int8)v38] ^ AES_Rijndael_Te2[BYTE1(v33)] ^ AES_Rijndael_Te1[BYTE2(v48)] ^ AES_Rijndael_Te0[HIBYTE(v43)] ^ *(v53 - 14);
      v26 = AES_Rijndael_Te3[(unsigned __int8)v43] ^ AES_Rijndael_Te2[BYTE1(v38)] ^ AES_Rijndael_Te1[BYTE2(v33)] ^ AES_Rijndael_Te0[HIBYTE(v48)] ^ *(v53 - 13);
      v33 = AES_Rijndael_Te3[(unsigned __int8)v26] ^ AES_Rijndael_Te2[BYTE1(v19)] ^ AES_Rijndael_Te1[BYTE2(v12)] ^ AES_Rijndael_Te0[HIBYTE(v5)] ^ *(v53 - 12);
      v38 = AES_Rijndael_Te3[(unsigned __int8)v5] ^ AES_Rijndael_Te2[BYTE1(v26)] ^ AES_Rijndael_Te1[BYTE2(v19)] ^ AES_Rijndael_Te0[HIBYTE(v12)] ^ *(v53 - 11);
      v43 = AES_Rijndael_Te3[(unsigned __int8)v12] ^ AES_Rijndael_Te2[BYTE1(v5)] ^ AES_Rijndael_Te1[BYTE2(v26)] ^ AES_Rijndael_Te0[HIBYTE(v19)] ^ *(v53 - 10);
      v48 = AES_Rijndael_Te3[(unsigned __int8)v19] ^ AES_Rijndael_Te2[BYTE1(v12)] ^ AES_Rijndael_Te1[BYTE2(v5)] ^ AES_Rijndael_Te0[HIBYTE(v26)] ^ *(v53 - 9);
      goto LABEL_7;
  }
  *a2 = v33;
  a2[1] = v38;
  a2[2] = v43;
  a2[3] = v48;
  return 1;
}

//----- (0049DCC7) --------------------------------------------------------
__int16 __cdecl Decode_AES_Rijndael_Block(_DWORD *a1, int *a2, int a3)
{
  int v4; // [esp+0h] [ebp-28h]
  int v5; // [esp+4h] [ebp-24h]
  int v6; // [esp+4h] [ebp-24h]
  int v7; // [esp+4h] [ebp-24h]
  int v8; // [esp+4h] [ebp-24h]
  int v9; // [esp+4h] [ebp-24h]
  int v10; // [esp+4h] [ebp-24h]
  int v11; // [esp+4h] [ebp-24h]
  int v12; // [esp+8h] [ebp-20h]
  int v13; // [esp+8h] [ebp-20h]
  int v14; // [esp+8h] [ebp-20h]
  int v15; // [esp+8h] [ebp-20h]
  int v16; // [esp+8h] [ebp-20h]
  int v17; // [esp+8h] [ebp-20h]
  int v18; // [esp+8h] [ebp-20h]
  int v19; // [esp+Ch] [ebp-1Ch]
  int v20; // [esp+Ch] [ebp-1Ch]
  int v21; // [esp+Ch] [ebp-1Ch]
  int v22; // [esp+Ch] [ebp-1Ch]
  int v23; // [esp+Ch] [ebp-1Ch]
  int v24; // [esp+Ch] [ebp-1Ch]
  int v25; // [esp+Ch] [ebp-1Ch]
  int v26; // [esp+10h] [ebp-18h]
  int v27; // [esp+10h] [ebp-18h]
  int v28; // [esp+10h] [ebp-18h]
  int v29; // [esp+10h] [ebp-18h]
  int v30; // [esp+10h] [ebp-18h]
  int v31; // [esp+10h] [ebp-18h]
  int v32; // [esp+10h] [ebp-18h]
  int v33; // [esp+14h] [ebp-14h]
  int v34; // [esp+14h] [ebp-14h]
  int v35; // [esp+14h] [ebp-14h]
  int v36; // [esp+14h] [ebp-14h]
  int v37; // [esp+14h] [ebp-14h]
  int v38; // [esp+18h] [ebp-10h]
  int v39; // [esp+18h] [ebp-10h]
  int v40; // [esp+18h] [ebp-10h]
  int v41; // [esp+18h] [ebp-10h]
  int v42; // [esp+18h] [ebp-10h]
  int v43; // [esp+1Ch] [ebp-Ch]
  int v44; // [esp+1Ch] [ebp-Ch]
  int v45; // [esp+1Ch] [ebp-Ch]
  int v46; // [esp+1Ch] [ebp-Ch]
  int v47; // [esp+1Ch] [ebp-Ch]
  int v48; // [esp+20h] [ebp-8h]
  int v49; // [esp+20h] [ebp-8h]
  int v50; // [esp+20h] [ebp-8h]
  int v51; // [esp+20h] [ebp-8h]
  int v52; // [esp+20h] [ebp-8h]

  if ( (*(_BYTE *)(a3 + 520) & 2) == 0 )
    return 0;
  v33 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 256) ^ *a1;
  v38 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 260) ^ a1[1];
  v43 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 264) ^ a1[2];
  v48 = *(_DWORD *)(a3 + 16 * *(_DWORD *)(a3 + 516) + 268) ^ a1[3];
  v4 = *(_DWORD *)(a3 + 516);
  switch ( v4 )
  {
    case 10:
      goto LABEL_8;
    case 12:
LABEL_7:
      v6 = AES_Rijndael_Td3[(unsigned __int8)v38] ^ AES_Rijndael_Td2[BYTE1(v43)] ^ AES_Rijndael_Td1[BYTE2(v48)] ^ AES_Rijndael_Td0[HIBYTE(v33)] ^ *(_DWORD *)(a3 + 432);
      v13 = AES_Rijndael_Td3[(unsigned __int8)v43] ^ AES_Rijndael_Td2[BYTE1(v48)] ^ AES_Rijndael_Td1[BYTE2(v33)] ^ AES_Rijndael_Td0[HIBYTE(v38)] ^ *(_DWORD *)(a3 + 436);
      v20 = AES_Rijndael_Td3[(unsigned __int8)v48] ^ AES_Rijndael_Td2[BYTE1(v33)] ^ AES_Rijndael_Td1[BYTE2(v38)] ^ AES_Rijndael_Td0[HIBYTE(v43)] ^ *(_DWORD *)(a3 + 440);
      v27 = AES_Rijndael_Td3[(unsigned __int8)v33] ^ AES_Rijndael_Td2[BYTE1(v38)] ^ AES_Rijndael_Td1[BYTE2(v43)] ^ AES_Rijndael_Td0[HIBYTE(v48)] ^ *(_DWORD *)(a3 + 444);
      v33 = AES_Rijndael_Td3[(unsigned __int8)v13] ^ AES_Rijndael_Td2[BYTE1(v20)] ^ AES_Rijndael_Td1[BYTE2(v27)] ^ AES_Rijndael_Td0[HIBYTE(v6)] ^ *(_DWORD *)(a3 + 416);
      v38 = AES_Rijndael_Td3[(unsigned __int8)v20] ^ AES_Rijndael_Td2[BYTE1(v27)] ^ AES_Rijndael_Td1[BYTE2(v6)] ^ AES_Rijndael_Td0[HIBYTE(v13)] ^ *(_DWORD *)(a3 + 420);
      v43 = AES_Rijndael_Td3[(unsigned __int8)v27] ^ AES_Rijndael_Td2[BYTE1(v6)] ^ AES_Rijndael_Td1[BYTE2(v13)] ^ AES_Rijndael_Td0[HIBYTE(v20)] ^ *(_DWORD *)(a3 + 424);
      v48 = AES_Rijndael_Td3[(unsigned __int8)v6] ^ AES_Rijndael_Td2[BYTE1(v13)] ^ AES_Rijndael_Td1[BYTE2(v20)] ^ AES_Rijndael_Td0[HIBYTE(v27)] ^ *(_DWORD *)(a3 + 428);
LABEL_8:
      v7 = AES_Rijndael_Td3[(unsigned __int8)v38] ^ AES_Rijndael_Td2[BYTE1(v43)] ^ AES_Rijndael_Td1[BYTE2(v48)] ^ AES_Rijndael_Td0[HIBYTE(v33)] ^ *(_DWORD *)(a3 + 400);
      v14 = AES_Rijndael_Td3[(unsigned __int8)v43] ^ AES_Rijndael_Td2[BYTE1(v48)] ^ AES_Rijndael_Td1[BYTE2(v33)] ^ AES_Rijndael_Td0[HIBYTE(v38)] ^ *(_DWORD *)(a3 + 404);
      v21 = AES_Rijndael_Td3[(unsigned __int8)v48] ^ AES_Rijndael_Td2[BYTE1(v33)] ^ AES_Rijndael_Td1[BYTE2(v38)] ^ AES_Rijndael_Td0[HIBYTE(v43)] ^ *(_DWORD *)(a3 + 408);
      v28 = AES_Rijndael_Td3[(unsigned __int8)v33] ^ AES_Rijndael_Td2[BYTE1(v38)] ^ AES_Rijndael_Td1[BYTE2(v43)] ^ AES_Rijndael_Td0[HIBYTE(v48)] ^ *(_DWORD *)(a3 + 412);
      v34 = AES_Rijndael_Td3[(unsigned __int8)v14] ^ AES_Rijndael_Td2[BYTE1(v21)] ^ AES_Rijndael_Td1[BYTE2(v28)] ^ AES_Rijndael_Td0[HIBYTE(v7)] ^ *(_DWORD *)(a3 + 384);
      v39 = AES_Rijndael_Td3[(unsigned __int8)v21] ^ AES_Rijndael_Td2[BYTE1(v28)] ^ AES_Rijndael_Td1[BYTE2(v7)] ^ AES_Rijndael_Td0[HIBYTE(v14)] ^ *(_DWORD *)(a3 + 388);
      v44 = AES_Rijndael_Td3[(unsigned __int8)v28] ^ AES_Rijndael_Td2[BYTE1(v7)] ^ AES_Rijndael_Td1[BYTE2(v14)] ^ AES_Rijndael_Td0[HIBYTE(v21)] ^ *(_DWORD *)(a3 + 392);
      v49 = AES_Rijndael_Td3[(unsigned __int8)v7] ^ AES_Rijndael_Td2[BYTE1(v14)] ^ AES_Rijndael_Td1[BYTE2(v21)] ^ AES_Rijndael_Td0[HIBYTE(v28)] ^ *(_DWORD *)(a3 + 396);
      v8 = AES_Rijndael_Td3[(unsigned __int8)v39] ^ AES_Rijndael_Td2[BYTE1(v44)] ^ AES_Rijndael_Td1[BYTE2(v49)] ^ AES_Rijndael_Td0[HIBYTE(v34)] ^ *(_DWORD *)(a3 + 368);
      v15 = AES_Rijndael_Td3[(unsigned __int8)v44] ^ AES_Rijndael_Td2[BYTE1(v49)] ^ AES_Rijndael_Td1[BYTE2(v34)] ^ AES_Rijndael_Td0[HIBYTE(v39)] ^ *(_DWORD *)(a3 + 372);
      v22 = AES_Rijndael_Td3[(unsigned __int8)v49] ^ AES_Rijndael_Td2[BYTE1(v34)] ^ AES_Rijndael_Td1[BYTE2(v39)] ^ AES_Rijndael_Td0[HIBYTE(v44)] ^ *(_DWORD *)(a3 + 376);
      v29 = AES_Rijndael_Td3[(unsigned __int8)v34] ^ AES_Rijndael_Td2[BYTE1(v39)] ^ AES_Rijndael_Td1[BYTE2(v44)] ^ AES_Rijndael_Td0[HIBYTE(v49)] ^ *(_DWORD *)(a3 + 380);
      v35 = AES_Rijndael_Td3[(unsigned __int8)v15] ^ AES_Rijndael_Td2[BYTE1(v22)] ^ AES_Rijndael_Td1[BYTE2(v29)] ^ AES_Rijndael_Td0[HIBYTE(v8)] ^ *(_DWORD *)(a3 + 352);
      v40 = AES_Rijndael_Td3[(unsigned __int8)v22] ^ AES_Rijndael_Td2[BYTE1(v29)] ^ AES_Rijndael_Td1[BYTE2(v8)] ^ AES_Rijndael_Td0[HIBYTE(v15)] ^ *(_DWORD *)(a3 + 356);
      v45 = AES_Rijndael_Td3[(unsigned __int8)v29] ^ AES_Rijndael_Td2[BYTE1(v8)] ^ AES_Rijndael_Td1[BYTE2(v15)] ^ AES_Rijndael_Td0[HIBYTE(v22)] ^ *(_DWORD *)(a3 + 360);
      v50 = AES_Rijndael_Td3[(unsigned __int8)v8] ^ AES_Rijndael_Td2[BYTE1(v15)] ^ AES_Rijndael_Td1[BYTE2(v22)] ^ AES_Rijndael_Td0[HIBYTE(v29)] ^ *(_DWORD *)(a3 + 364);
      v9 = AES_Rijndael_Td3[(unsigned __int8)v40] ^ AES_Rijndael_Td2[BYTE1(v45)] ^ AES_Rijndael_Td1[BYTE2(v50)] ^ AES_Rijndael_Td0[HIBYTE(v35)] ^ *(_DWORD *)(a3 + 336);
      v16 = AES_Rijndael_Td3[(unsigned __int8)v45] ^ AES_Rijndael_Td2[BYTE1(v50)] ^ AES_Rijndael_Td1[BYTE2(v35)] ^ AES_Rijndael_Td0[HIBYTE(v40)] ^ *(_DWORD *)(a3 + 340);
      v23 = AES_Rijndael_Td3[(unsigned __int8)v50] ^ AES_Rijndael_Td2[BYTE1(v35)] ^ AES_Rijndael_Td1[BYTE2(v40)] ^ AES_Rijndael_Td0[HIBYTE(v45)] ^ *(_DWORD *)(a3 + 344);
      v30 = AES_Rijndael_Td3[(unsigned __int8)v35] ^ AES_Rijndael_Td2[BYTE1(v40)] ^ AES_Rijndael_Td1[BYTE2(v45)] ^ AES_Rijndael_Td0[HIBYTE(v50)] ^ *(_DWORD *)(a3 + 348);
      v36 = AES_Rijndael_Td3[(unsigned __int8)v16] ^ AES_Rijndael_Td2[BYTE1(v23)] ^ AES_Rijndael_Td1[BYTE2(v30)] ^ AES_Rijndael_Td0[HIBYTE(v9)] ^ *(_DWORD *)(a3 + 320);
      v41 = AES_Rijndael_Td3[(unsigned __int8)v23] ^ AES_Rijndael_Td2[BYTE1(v30)] ^ AES_Rijndael_Td1[BYTE2(v9)] ^ AES_Rijndael_Td0[HIBYTE(v16)] ^ *(_DWORD *)(a3 + 324);
      v46 = AES_Rijndael_Td3[(unsigned __int8)v30] ^ AES_Rijndael_Td2[BYTE1(v9)] ^ AES_Rijndael_Td1[BYTE2(v16)] ^ AES_Rijndael_Td0[HIBYTE(v23)] ^ *(_DWORD *)(a3 + 328);
      v51 = AES_Rijndael_Td3[(unsigned __int8)v9] ^ AES_Rijndael_Td2[BYTE1(v16)] ^ AES_Rijndael_Td1[BYTE2(v23)] ^ AES_Rijndael_Td0[HIBYTE(v30)] ^ *(_DWORD *)(a3 + 332);
      v10 = AES_Rijndael_Td3[(unsigned __int8)v41] ^ AES_Rijndael_Td2[BYTE1(v46)] ^ AES_Rijndael_Td1[BYTE2(v51)] ^ AES_Rijndael_Td0[HIBYTE(v36)] ^ *(_DWORD *)(a3 + 304);
      v17 = AES_Rijndael_Td3[(unsigned __int8)v46] ^ AES_Rijndael_Td2[BYTE1(v51)] ^ AES_Rijndael_Td1[BYTE2(v36)] ^ AES_Rijndael_Td0[HIBYTE(v41)] ^ *(_DWORD *)(a3 + 308);
      v24 = AES_Rijndael_Td3[(unsigned __int8)v51] ^ AES_Rijndael_Td2[BYTE1(v36)] ^ AES_Rijndael_Td1[BYTE2(v41)] ^ AES_Rijndael_Td0[HIBYTE(v46)] ^ *(_DWORD *)(a3 + 312);
      v31 = AES_Rijndael_Td3[(unsigned __int8)v36] ^ AES_Rijndael_Td2[BYTE1(v41)] ^ AES_Rijndael_Td1[BYTE2(v46)] ^ AES_Rijndael_Td0[HIBYTE(v51)] ^ *(_DWORD *)(a3 + 316);
      v37 = AES_Rijndael_Td3[(unsigned __int8)v17] ^ AES_Rijndael_Td2[BYTE1(v24)] ^ AES_Rijndael_Td1[BYTE2(v31)] ^ AES_Rijndael_Td0[HIBYTE(v10)] ^ *(_DWORD *)(a3 + 288);
      v42 = AES_Rijndael_Td3[(unsigned __int8)v24] ^ AES_Rijndael_Td2[BYTE1(v31)] ^ AES_Rijndael_Td1[BYTE2(v10)] ^ AES_Rijndael_Td0[HIBYTE(v17)] ^ *(_DWORD *)(a3 + 292);
      v47 = AES_Rijndael_Td3[(unsigned __int8)v31] ^ AES_Rijndael_Td2[BYTE1(v10)] ^ AES_Rijndael_Td1[BYTE2(v17)] ^ AES_Rijndael_Td0[HIBYTE(v24)] ^ *(_DWORD *)(a3 + 296);
      v52 = AES_Rijndael_Td3[(unsigned __int8)v10] ^ AES_Rijndael_Td2[BYTE1(v17)] ^ AES_Rijndael_Td1[BYTE2(v24)] ^ AES_Rijndael_Td0[HIBYTE(v31)] ^ *(_DWORD *)(a3 + 300);
      v11 = AES_Rijndael_Td3[(unsigned __int8)v42] ^ AES_Rijndael_Td2[BYTE1(v47)] ^ AES_Rijndael_Td1[BYTE2(v52)] ^ AES_Rijndael_Td0[HIBYTE(v37)] ^ *(_DWORD *)(a3 + 272);
      v18 = AES_Rijndael_Td3[(unsigned __int8)v47] ^ AES_Rijndael_Td2[BYTE1(v52)] ^ AES_Rijndael_Td1[BYTE2(v37)] ^ AES_Rijndael_Td0[HIBYTE(v42)] ^ *(_DWORD *)(a3 + 276);
      v25 = AES_Rijndael_Td3[(unsigned __int8)v52] ^ AES_Rijndael_Td2[BYTE1(v37)] ^ AES_Rijndael_Td1[BYTE2(v42)] ^ AES_Rijndael_Td0[HIBYTE(v47)] ^ *(_DWORD *)(a3 + 280);
      v32 = AES_Rijndael_Td3[(unsigned __int8)v37] ^ AES_Rijndael_Td2[BYTE1(v42)] ^ AES_Rijndael_Td1[BYTE2(v47)] ^ AES_Rijndael_Td0[HIBYTE(v52)] ^ *(_DWORD *)(a3 + 284);
      v33 = AES_Rijndael_Si[(unsigned __int8)v18] ^ AES_Rijndael_Td7[BYTE1(v25)] ^ AES_Rijndael_Td6[BYTE2(v32)] ^ AES_Rijndael_Td4[HIBYTE(v11)] ^ *(_DWORD *)(a3 + 256);
      v38 = AES_Rijndael_Si[(unsigned __int8)v25] ^ AES_Rijndael_Td7[BYTE1(v32)] ^ AES_Rijndael_Td6[BYTE2(v11)] ^ AES_Rijndael_Td4[HIBYTE(v18)] ^ *(_DWORD *)(a3 + 260);
      v43 = AES_Rijndael_Si[(unsigned __int8)v32] ^ AES_Rijndael_Td7[BYTE1(v11)] ^ AES_Rijndael_Td6[BYTE2(v18)] ^ AES_Rijndael_Td4[HIBYTE(v25)] ^ *(_DWORD *)(a3 + 264);
      v48 = AES_Rijndael_Si[(unsigned __int8)v11] ^ AES_Rijndael_Td7[BYTE1(v18)] ^ AES_Rijndael_Td6[BYTE2(v25)] ^ AES_Rijndael_Td4[HIBYTE(v32)] ^ *(_DWORD *)(a3 + 268);
      break;
    case 14:
      v5 = AES_Rijndael_Td3[(unsigned __int8)v38] ^ AES_Rijndael_Td2[BYTE1(v43)] ^ AES_Rijndael_Td1[BYTE2(v48)] ^ AES_Rijndael_Td0[HIBYTE(v33)] ^ *(_DWORD *)(a3 + 464);
      v12 = AES_Rijndael_Td3[(unsigned __int8)v43] ^ AES_Rijndael_Td2[BYTE1(v48)] ^ AES_Rijndael_Td1[BYTE2(v33)] ^ AES_Rijndael_Td0[HIBYTE(v38)] ^ *(_DWORD *)(a3 + 468);
      v19 = AES_Rijndael_Td3[(unsigned __int8)v48] ^ AES_Rijndael_Td2[BYTE1(v33)] ^ AES_Rijndael_Td1[BYTE2(v38)] ^ AES_Rijndael_Td0[HIBYTE(v43)] ^ *(_DWORD *)(a3 + 472);
      v26 = AES_Rijndael_Td3[(unsigned __int8)v33] ^ AES_Rijndael_Td2[BYTE1(v38)] ^ AES_Rijndael_Td1[BYTE2(v43)] ^ AES_Rijndael_Td0[HIBYTE(v48)] ^ *(_DWORD *)(a3 + 476);
      v33 = AES_Rijndael_Td3[(unsigned __int8)v12] ^ AES_Rijndael_Td2[BYTE1(v19)] ^ AES_Rijndael_Td1[BYTE2(v26)] ^ AES_Rijndael_Td0[HIBYTE(v5)] ^ *(_DWORD *)(a3 + 448);
      v38 = AES_Rijndael_Td3[(unsigned __int8)v19] ^ AES_Rijndael_Td2[BYTE1(v26)] ^ AES_Rijndael_Td1[BYTE2(v5)] ^ AES_Rijndael_Td0[HIBYTE(v12)] ^ *(_DWORD *)(a3 + 452);
      v43 = AES_Rijndael_Td3[(unsigned __int8)v26] ^ AES_Rijndael_Td2[BYTE1(v5)] ^ AES_Rijndael_Td1[BYTE2(v12)] ^ AES_Rijndael_Td0[HIBYTE(v19)] ^ *(_DWORD *)(a3 + 456);
      v48 = AES_Rijndael_Td3[(unsigned __int8)v5] ^ AES_Rijndael_Td2[BYTE1(v12)] ^ AES_Rijndael_Td1[BYTE2(v19)] ^ AES_Rijndael_Td0[HIBYTE(v26)] ^ *(_DWORD *)(a3 + 460);
      goto LABEL_7;
  }
  *a2 = v33;
  a2[1] = v38;
  a2[2] = v43;
  a2[3] = v48;
  return 1;
}
// 4CF708: using guessed type int AES_Rijndael_Td0[256];
// 4CFB08: using guessed type int AES_Rijndael_Td1[256];
// 4CFF08: using guessed type int AES_Rijndael_Td2[256];
// 4D0308: using guessed type int AES_Rijndael_Td3[256];
// 4D0708: using guessed type int AES_Rijndael_Td4[256];
// 4D0B08: using guessed type int AES_Rijndael_Td6[256];
// 4D0F08: using guessed type int AES_Rijndael_Td7[256];
// 4D1308: using guessed type int AES_Rijndael_Si[256];

//----- (0049EFED) --------------------------------------------------------
__int16 __cdecl Initialize_AES_ChiperText_1(int a1, int *a2, int a3)
{
  return Initialize_AES_ChiperText(a2, a3, 1, a1);
}

//----- (0049F008) --------------------------------------------------------
__int16 __cdecl Initialize_AES_ChiperText_2(int a1, int *a2, int a3)
{
  return Initialize_AES_ChiperText(a2, a3, 2, a1);
}

//----- (0049F030) --------------------------------------------------------
void *__cdecl Encode_AES_Rijndael(int a1, void *a2, void *Src, int a4, int a5)
{
  void *result; // eax
  int v6; // [esp+0h] [ebp-28h]
  int i; // [esp+4h] [ebp-24h]
  int v8[4]; // [esp+8h] [ebp-20h] BYREF
  _DWORD v9[4]; // [esp+18h] [ebp-10h] BYREF

  result = (void *)a4;
  v6 = a4 - 16;
  while ( v6 >= 0 )
  {
    memcpy(v9, Src, sizeof(v9));
    Encode_AES_Rijndael_Block(v9, v8, a1);
    memcpy(a2, v8, 0x10u);
    v6 -= 16;
    result = (char *)Src + 16;
    Src = (char *)Src + 16;
    a2 = (char *)a2 + 16;
  }
  if ( v6 != -16 )
  {
    memcpy(v9, Src, v6 + 16);
    for ( i = 0; i < v6 + 16; ++i )
      *((_BYTE *)v9 + i) ^= *(_BYTE *)(i + a5);
    result = memcpy(a2, v9, v6 + 16);
  }
  return result;
}

//----- (0049F10F) --------------------------------------------------------
void *__cdecl Decode_AES_Rijndael(int a1, void *a2, void *Src, int a4, int a5)
{
  void *result; // eax
  int v6; // [esp+0h] [ebp-28h]
  int i; // [esp+4h] [ebp-24h]
  int v8[4]; // [esp+8h] [ebp-20h] BYREF
  _DWORD v9[4]; // [esp+18h] [ebp-10h] BYREF

  result = (void *)a4;
  v6 = a4 - 16;
  while ( v6 >= 0 )
  {
    memcpy(v9, Src, sizeof(v9));
    Decode_AES_Rijndael_Block(v9, v8, a1);
    memcpy(a2, v8, 0x10u);
    v6 -= 16;
    result = (char *)Src + 16;
    Src = (char *)Src + 16;
    a2 = (char *)a2 + 16;
  }
  if ( v6 != -16 )
  {
    memcpy(v9, Src, v6 + 16);
    for ( i = 0; i < v6 + 16; ++i )
      *((_BYTE *)v9 + i) ^= *(_BYTE *)(i + a5);
    result = memcpy(a2, v9, v6 + 16);
  }
  return result;
}

//----- (0049F22E) --------------------------------------------------------
void __thiscall std::runtime_error::runtime_error(std::runtime_error *this, const std::runtime_error *__that)
{
  exception::exception(this, __that);
  *(_DWORD *)this = &off_4D270C;
  std::string::string((std::runtime_error *)((char *)this + 12), (const std::runtime_error *)((char *)__that + 12));
}
// 4D270C: using guessed type int (__stdcall *off_4D270C)(int);

//----- (0049F271) --------------------------------------------------------
std::runtime_error *__thiscall sub_49F271(std::runtime_error *this, struct exception *__that)
{
  std::runtime_error::runtime_error(this, __that);
  *(_DWORD *)this = &std::out_of_range::`vftable';
  return this;
}
// 4D2724: using guessed type void *std::out_of_range::`vftable';

//----- (0049F2C9) --------------------------------------------------------
std::runtime_error *__thiscall sub_49F2C9(std::runtime_error *this, struct exception *__that)
{
  std::runtime_error::runtime_error(this, __that);
  *(_DWORD *)this = &std::length_error::`vftable';
  return this;
}
// 4D2718: using guessed type void *std::length_error::`vftable';

//----- (0049F65E) --------------------------------------------------------
void __thiscall sub_49F65E(void *this)
{
  if ( this != (void *)dword_4D9830 )
    report_failure();
}
// 49F62D: using guessed type int report_failure(void);
// 4D9830: using guessed type int dword_4D9830;

//----- (004A0647) --------------------------------------------------------
int __cdecl sub_4A0647(int a1)
{
  int result; // eax

  result = dword_4E3750;
  dword_4E3750 = a1;
  return result;
}
// 4E3750: using guessed type int dword_4E3750;

//----- (004A0FE3) --------------------------------------------------------
unsigned int __cdecl fread_0(void *buffer, unsigned int size, unsigned int count, _iobuf *stream)
{
  unsigned int v5; // [esp+Ch] [ebp-1Ch]

  _lock_file(stream);
  v5 = fwrite(buffer, size, count, stream);
  _unlock_file(stream);
  return v5;
}

//----- (004A1236) --------------------------------------------------------
int sub_4A1236()
{
  return flsall(1);
}
// 4A1111: using guessed type _DWORD __cdecl flsall(_DWORD);

//----- (004A17A2) --------------------------------------------------------
size_t __cdecl sub_4A17A2(void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream)
{
  size_t v5; // [esp+Ch] [ebp-1Ch]

  _lock_file(Stream);
  v5 = fread(Buffer, ElementSize, ElementCount, Stream);
  _unlock_file(Stream);
  return v5;
}

//----- (004A2489) --------------------------------------------------------
void __thiscall sub_4A2489(void *this)
{
  bool v1; // zf

  v1 = *((_DWORD *)this + 2) == 0;
  *(_DWORD *)this = &exception::`vftable';
  if ( !v1 )
    free(*((void **)this + 1));
}
// 4D2AA0: using guessed type void *exception::`vftable';

//----- (004A24AC) --------------------------------------------------------
void *__thiscall sub_4A24AC(void *this, char a2)
{
  sub_4A2489(this);
  if ( (a2 & 1) != 0 )
    operator_delete(this);
  return this;
}

//----- (004A7BF9) --------------------------------------------------------
void __cdecl _RTC_Terminate()
{
  void (**i)(void); // [esp+Ch] [ebp-1Ch]

  for ( i = dword_4D3C90; i < dword_4D3C90; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (004A7C3D) --------------------------------------------------------
void __cdecl sub_4A7C3D()
{
  void (**i)(void); // [esp+Ch] [ebp-1Ch]

  for ( i = &dword_4D3C98; i < &dword_4D3C98; ++i )
  {
    if ( *i )
      (*i)();
  }
}

//----- (004A89F9) --------------------------------------------------------
void __cdecl __noreturn _inconsistency()
{
  if ( off_4DA1C8 )
    off_4DA1C8();
  terminate();
}
// 4DA1C8: using guessed type int (*off_4DA1C8)(void);

//----- (004AA18E) --------------------------------------------------------
int __cdecl sub_4AA18E(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_4DA3E0);
}
// 4AA036: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (004AA1A4) --------------------------------------------------------
int __cdecl sub_4AA1A4(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_4DA3F8);
}
// 4AA036: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (004AA1BA) --------------------------------------------------------
int __cdecl _atoflt(_CRT_FLOAT *Result, const char *String)
{
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  char v4[12]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+10h] [ebp-4h]

  v5 = dword_4D9830;
  __strgtold12(v4, v3, String, 0, 0, 0, 0);
  return sub_4AA18E((int)v4, (int)Result);
}
// 4AAC97: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004AA1F7) --------------------------------------------------------
int __cdecl sub_4AA1F7(int a1, int a2)
{
  char v3[4]; // [esp+0h] [ebp-14h] BYREF
  char v4[12]; // [esp+4h] [ebp-10h] BYREF
  int v5; // [esp+10h] [ebp-4h]

  v5 = dword_4D9830;
  __strgtold12(v4, v3, a2, 0, 0, 0, 0);
  return sub_4AA1A4((int)v4, a1);
}
// 4AAC97: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004ABF90) --------------------------------------------------------
int __usercall sub_4ABF90@<eax>(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CDBSocket::CDBSocket_0(dword_4DA6F0, a1, a2, a3);
  return atexit((void (__cdecl *)())sub_4B2FC0);
}

//----- (004ABFB0) --------------------------------------------------------
int sub_4ABFB0()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA75C);
  return atexit(sub_4B2FE0);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (004ABFD0) --------------------------------------------------------
int sub_4ABFD0()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA764);
  return atexit(sub_4B2FD0);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004ABFF0) --------------------------------------------------------
int sub_4ABFF0()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA770);
  return atexit(sub_4B2FF0);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004AC010) --------------------------------------------------------
int sub_4AC010()
{
  CCalendar::CCalendar((CCalendar *)dword_4DA798);
  return atexit(sub_4B3000);
}

//----- (004AC030) --------------------------------------------------------
int sub_4AC030()
{
  CDBSocket::CDBSocket(dword_4DA7B8);
  return atexit(sub_4B3010);
}

//----- (004AC050) --------------------------------------------------------
int sub_4AC050()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA824);
  return atexit(sub_4B3020);
}

//----- (004AC070) --------------------------------------------------------
_DWORD *sub_4AC070()
{
  return CFindPath::NODE::NODE(dword_4E0908, -1, -1);
}

//----- (004AC090) --------------------------------------------------------
int sub_4AC090()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4E0900);
  return atexit(sub_4B3030);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (004AC0B0) --------------------------------------------------------
int sub_4AC0B0()
{
  std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>>::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *>>>((std::map<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> > > *)&unk_4E094C);
  return atexit(sub_4B3040);
}

//----- (004AC0D0) --------------------------------------------------------
int sub_4AC0D0()
{
  std::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>::list<std::pair<CryptoPP::BufferedTransformation *,CryptoPP::value_ptr<std::string>>>(dword_4E0958);
  return atexit(sub_4B3050);
}

//----- (004AC0F0) --------------------------------------------------------
int sub_4AC0F0()
{
  sub_418A00(dword_4E0968);
  return atexit(sub_4B3060);
}

//----- (004AC110) --------------------------------------------------------
int sub_4AC110()
{
  sub_418A00(dword_4E0974);
  return atexit(sub_4B3070);
}

//----- (004AC130) --------------------------------------------------------
int sub_4AC130()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E0980);
  return atexit((void (__cdecl *)())sub_4B3080);
}

//----- (004AC150) --------------------------------------------------------
int sub_4AC150()
{
  sub_41D000(dword_4E09A4);
  return atexit(sub_4B3090);
}

//----- (004AC170) --------------------------------------------------------
int sub_4AC170()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E09B0);
  return atexit((void (__cdecl *)())sub_4B30A0);
}

//----- (004AC190) --------------------------------------------------------
int sub_4AC190()
{
  sub_41D030(dword_4E09C8);
  return atexit(sub_4B30B0);
}

//----- (004AC1B0) --------------------------------------------------------
int sub_4AC1B0()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E09D4);
  return atexit((void (__cdecl *)())sub_4B30C0);
}

//----- (004AC1D0) --------------------------------------------------------
int sub_4AC1D0()
{
  sub_420920(&unk_4E09F0);
  return atexit(sub_4B30D0);
}

//----- (004AC1F0) --------------------------------------------------------
void sub_4AC1F0()
{
  char *v0; // [esp+0h] [ebp-170h] BYREF
  CItem *v1; // [esp+4h] [ebp-16Ch] BYREF
  char *v2; // [esp+8h] [ebp-168h] BYREF
  CItem *v3; // [esp+Ch] [ebp-164h] BYREF
  char *v4; // [esp+10h] [ebp-160h] BYREF
  CItem *v5; // [esp+14h] [ebp-15Ch] BYREF
  char *v6; // [esp+18h] [ebp-158h] BYREF
  CItem *v7; // [esp+1Ch] [ebp-154h] BYREF
  char *v8; // [esp+20h] [ebp-150h] BYREF
  CItem *v9; // [esp+24h] [ebp-14Ch] BYREF
  char *v10; // [esp+28h] [ebp-148h] BYREF
  CItem *v11; // [esp+2Ch] [ebp-144h] BYREF
  char *v12; // [esp+30h] [ebp-140h] BYREF
  CItem *v13; // [esp+34h] [ebp-13Ch] BYREF
  char *v14; // [esp+38h] [ebp-138h] BYREF
  CItem *v15; // [esp+3Ch] [ebp-134h] BYREF
  char *v16; // [esp+40h] [ebp-130h] BYREF
  CItem *v17; // [esp+44h] [ebp-12Ch] BYREF
  char *v18; // [esp+48h] [ebp-128h] BYREF
  CItem *v19; // [esp+4Ch] [ebp-124h] BYREF
  char *v20; // [esp+50h] [ebp-120h] BYREF
  CItem *v21; // [esp+54h] [ebp-11Ch] BYREF
  char *v22; // [esp+58h] [ebp-118h] BYREF
  CItem *v23; // [esp+5Ch] [ebp-114h] BYREF
  char *v24; // [esp+60h] [ebp-110h] BYREF
  CItem *v25; // [esp+64h] [ebp-10Ch] BYREF
  char *v26; // [esp+68h] [ebp-108h] BYREF
  CItem *v27; // [esp+6Ch] [ebp-104h] BYREF
  char *v28; // [esp+70h] [ebp-100h] BYREF
  CItem *v29; // [esp+74h] [ebp-FCh] BYREF
  char *v30; // [esp+78h] [ebp-F8h] BYREF
  CItem *v31; // [esp+7Ch] [ebp-F4h] BYREF
  char *v32; // [esp+80h] [ebp-F0h] BYREF
  CItem *v33; // [esp+84h] [ebp-ECh] BYREF
  char *v34; // [esp+88h] [ebp-E8h] BYREF
  CItem *v35; // [esp+8Ch] [ebp-E4h] BYREF
  char *v36; // [esp+90h] [ebp-E0h] BYREF
  CItem *v37; // [esp+94h] [ebp-DCh] BYREF
  char *v38; // [esp+98h] [ebp-D8h] BYREF
  CItem *v39; // [esp+9Ch] [ebp-D4h] BYREF
  char *v40; // [esp+A0h] [ebp-D0h] BYREF
  CItem *v41; // [esp+A4h] [ebp-CCh] BYREF
  char *v42; // [esp+A8h] [ebp-C8h] BYREF
  CItem *v43; // [esp+ACh] [ebp-C4h] BYREF
  char *v44; // [esp+B0h] [ebp-C0h] BYREF
  CItem *v45; // [esp+B4h] [ebp-BCh] BYREF
  char *v46; // [esp+B8h] [ebp-B8h] BYREF
  CItem *v47; // [esp+BCh] [ebp-B4h] BYREF
  char *v48; // [esp+C0h] [ebp-B0h] BYREF
  CItem *v49; // [esp+C4h] [ebp-ACh] BYREF
  char *v50; // [esp+C8h] [ebp-A8h] BYREF
  CItem *v51; // [esp+CCh] [ebp-A4h] BYREF
  char *v52; // [esp+D0h] [ebp-A0h] BYREF
  CItem *v53; // [esp+D4h] [ebp-9Ch] BYREF
  char *v54; // [esp+D8h] [ebp-98h] BYREF
  CItem *v55; // [esp+DCh] [ebp-94h] BYREF
  char *v56; // [esp+E0h] [ebp-90h] BYREF
  CItem *v57; // [esp+E4h] [ebp-8Ch] BYREF
  char *v58; // [esp+E8h] [ebp-88h] BYREF
  CItem *v59; // [esp+ECh] [ebp-84h] BYREF
  char *v60; // [esp+F0h] [ebp-80h] BYREF
  CItem *v61; // [esp+F4h] [ebp-7Ch] BYREF
  char *v62; // [esp+F8h] [ebp-78h] BYREF
  CItem *v63; // [esp+FCh] [ebp-74h] BYREF
  char *v64; // [esp+100h] [ebp-70h] BYREF
  CItem *v65; // [esp+104h] [ebp-6Ch] BYREF
  char *v66; // [esp+108h] [ebp-68h] BYREF
  CItem *v67; // [esp+10Ch] [ebp-64h] BYREF
  char *v68; // [esp+110h] [ebp-60h] BYREF
  CItem *v69; // [esp+114h] [ebp-5Ch] BYREF
  char *v70; // [esp+118h] [ebp-58h] BYREF
  CItem *v71; // [esp+11Ch] [ebp-54h] BYREF
  char *v72; // [esp+120h] [ebp-50h] BYREF
  CItem *v73; // [esp+124h] [ebp-4Ch] BYREF
  char *v74; // [esp+128h] [ebp-48h] BYREF
  CItem *v75; // [esp+12Ch] [ebp-44h] BYREF
  char *v76; // [esp+130h] [ebp-40h] BYREF
  CItem *v77; // [esp+134h] [ebp-3Ch] BYREF
  char *v78; // [esp+138h] [ebp-38h] BYREF
  CItem *v79; // [esp+13Ch] [ebp-34h] BYREF
  char *v80; // [esp+140h] [ebp-30h] BYREF
  CItem *v81; // [esp+144h] [ebp-2Ch] BYREF
  char *v82; // [esp+148h] [ebp-28h] BYREF
  CItem *v83; // [esp+14Ch] [ebp-24h] BYREF
  char *v84; // [esp+150h] [ebp-20h] BYREF
  CItem *v85; // [esp+154h] [ebp-1Ch] BYREF
  char *v86; // [esp+158h] [ebp-18h] BYREF
  CItem *v87; // [esp+15Ch] [ebp-14h] BYREF
  char *v88; // [esp+160h] [ebp-10h] BYREF
  CItem *v89; // [esp+164h] [ebp-Ch] BYREF
  char *_Val1; // [esp+168h] [ebp-8h] BYREF
  CItem *_Val2; // [esp+16Ch] [ebp-4h] BYREF

  _Val2 = 0;
  _Val1 = "weapon";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A00,
    (const char *const *)&_Val1,
    &_Val2);
  v89 = (CItem *)1;
  v88 = "defense";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A08,
    (const char *const *)&v88,
    &v89);
  v87 = (CItem *)2;
  v86 = "ornament";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A10,
    (const char *const *)&v86,
    &v87);
  v85 = (CItem *)3;
  v84 = "general";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A18,
    (const char *const *)&v84,
    &v85);
  v83 = (CItem *)4;
  v82 = "quest";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A20,
    (const char *const *)&v82,
    &v83);
  v81 = (CItem *)5;
  v80 = "money";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A28,
    (const char *const *)&v80,
    &v81);
  v79 = 0;
  v78 = "sword";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A30,
    (const char *const *)&v78,
    &v79);
  v77 = (CItem *)1;
  v76 = "wand";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A38,
    (const char *const *)&v76,
    &v77);
  v75 = (CItem *)2;
  v74 = "bow";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A40,
    (const char *const *)&v74,
    &v75);
  v73 = (CItem *)3;
  v72 = "shield";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A48,
    (const char *const *)&v72,
    &v73);
  v71 = (CItem *)4;
  v70 = "helmet";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A50,
    (const char *const *)&v70,
    &v71);
  v69 = (CItem *)5;
  v68 = "upperarmor";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A58,
    (const char *const *)&v68,
    &v69);
  v67 = (CItem *)6;
  v66 = "lowerarmor";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A60,
    (const char *const *)&v66,
    &v67);
  v65 = (CItem *)7;
  v64 = "gauntlet";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A68,
    (const char *const *)&v64,
    &v65);
  v63 = (CItem *)8;
  v62 = "boots";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A70,
    (const char *const *)&v62,
    &v63);
  v61 = (CItem *)9;
  v60 = "ring";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A78,
    (const char *const *)&v60,
    &v61);
  v59 = (CItem *)10;
  v58 = "necklace";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A80,
    (const char *const *)&v58,
    &v59);
  v57 = (CItem *)11;
  v56 = "trinket";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A88,
    (const char *const *)&v56,
    &v57);
  v55 = (CItem *)12;
  v54 = "refresh";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A90,
    (const char *const *)&v54,
    &v55);
  v53 = (CItem *)13;
  v52 = "charm";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0A98,
    (const char *const *)&v52,
    &v53);
  v51 = (CItem *)14;
  v50 = "gem";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AA0,
    (const char *const *)&v50,
    &v51);
  v49 = (CItem *)15;
  v48 = "etc";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AA8,
    (const char *const *)&v48,
    &v49);
  v47 = (CItem *)16;
  v46 = "coin";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AB0,
    (const char *const *)&v46,
    &v47);
  v45 = (CItem *)17;
  v44 = "common";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AB8,
    (const char *const *)&v44,
    &v45);
  v43 = (CItem *)18;
  v42 = "repair";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AC0,
    (const char *const *)&v42,
    &v43);
  v41 = 0;
  v40 = "knight";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AC8,
    (const char *const *)&v40,
    &v41);
  v39 = (CItem *)1;
  v38 = "mage";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AD0,
    (const char *const *)&v38,
    &v39);
  v37 = (CItem *)2;
  v36 = "archer";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AD8,
    (const char *const *)&v36,
    &v37);
  v35 = (CItem *)3;
  v34 = "warrior";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AE0,
    (const char *const *)&v34,
    &v35);
  v33 = (CItem *)4;
  v32 = "assassin";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AE8,
    (const char *const *)&v32,
    &v33);
  v31 = (CItem *)5;
  v30 = "talisman";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AF0,
    (const char *const *)&v30,
    &v31);
  v29 = (CItem *)6;
  v28 = "spiritknight";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0AF8,
    (const char *const *)&v28,
    &v29);
  v27 = (CItem *)7;
  v26 = "monk";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B00,
    (const char *const *)&v26,
    &v27);
  v25 = (CItem *)7;
  v24 = "hp";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B08,
    (const char *const *)&v24,
    &v25);
  v23 = (CItem *)8;
  v22 = "mp";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B10,
    (const char *const *)&v22,
    &v23);
  v21 = (CItem *)27;
  v20 = "xattack";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B18,
    (const char *const *)&v20,
    &v21);
  v19 = (CItem *)28;
  v18 = "xmagic";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B20,
    (const char *const *)&v18,
    &v19);
  v17 = (CItem *)9;
  v16 = "xhit";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B28,
    (const char *const *)&v16,
    &v17);
  v15 = (CItem *)15;
  v14 = "xdefense";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B30,
    (const char *const *)&v14,
    &v15);
  v13 = (CItem *)10;
  v12 = "xdodge";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B38,
    (const char *const *)&v12,
    &v13);
  v11 = (CItem *)-1;
  v10 = "all";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B40,
    (const char *const *)&v10,
    &v11);
  v9 = (CItem *)6;
  v8 = "transform";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B48,
    (const char *const *)&v8,
    &v9);
  v7 = (CItem *)19;
  v6 = "cocoon";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B50,
    (const char *const *)&v6,
    &v7);
  v5 = (CItem *)20;
  v4 = "mask";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B58,
    (const char *const *)&v4,
    &v5);
  v3 = (CItem *)21;
  v2 = "sword2h";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B60,
    (const char *const *)&v2,
    &v3);
  v1 = (CItem *)22;
  v0 = "standard";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E0B68,
    (const char *const *)&v0,
    &v1);
}

//----- (004AC930) --------------------------------------------------------
int sub_4AC930()
{
  CIOException::CInit::CInit((CIOException::CInit *)&unk_4E0DB4);
  return atexit(sub_4B30E0);
}

//----- (004AC950) --------------------------------------------------------
int sub_4AC950()
{
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)&unk_4E0FE8);
  return atexit((void (__cdecl *)())sub_4B30F0);
}

//----- (004AC970) --------------------------------------------------------
int sub_4AC970()
{
  return atexit(sub_4B3100);
}

//----- (004AC990) --------------------------------------------------------
int sub_4AC990()
{
  sub_425830((std::vector<CIOSocket::CIOTimer> *)&unk_4E100C);
  return atexit(sub_4B3110);
}

//----- (004AC9B0) --------------------------------------------------------
int sub_4AC9B0()
{
  CIOSocket::CIOTimerInstance::CIOTimerInstance((CIOObject *)&unk_4E1020);
  return atexit(sub_4B3120);
}

//----- (004AC9D0) --------------------------------------------------------
void sub_4AC9D0()
{
  `vector constructor iterator'(&unk_4E1030, 8u, 16, (void *(__thiscall *)(void *))CIOBuffer::CSlot::CSlot);
}

//----- (004AC9F0) --------------------------------------------------------
int sub_4AC9F0()
{
  sub_42F980(dword_4E10B4);
  return atexit(sub_4B3130);
}

//----- (004ACA10) --------------------------------------------------------
int sub_4ACA10()
{
  sub_42F9D0(dword_4E10C0);
  return atexit(sub_4B3140);
}

//----- (004ACA30) --------------------------------------------------------
int sub_4ACA30()
{
  sub_42FA10(dword_4E10CC);
  return atexit(sub_4B3150);
}

//----- (004ACA50) --------------------------------------------------------
int sub_4ACA50()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E10D8);
  return atexit((void (__cdecl *)())sub_4B3160);
}

//----- (004ACA70) --------------------------------------------------------
int sub_4ACA70()
{
  sub_432030(dword_4E10F0);
  return atexit(sub_4B3170);
}

//----- (004ACA90) --------------------------------------------------------
int sub_4ACA90()
{
  sub_4320A0(dword_4E10FC);
  return atexit(sub_4B3180);
}

//----- (004ACAB0) --------------------------------------------------------
_DWORD *sub_4ACAB0()
{
  return std__ios_base__ios_base(&dword_4E1108);
}

//----- (004ACAC0) --------------------------------------------------------
_DWORD *sub_4ACAC0()
{
  return sub_4324B0(&dword_4E110C);
}

//----- (004ACAD0) --------------------------------------------------------
int sub_4ACAD0()
{
  CScreen::CScreen((CScreen *)&unk_4E1128);
  return atexit((void (__cdecl *)())sub_4B3190);
}

//----- (004ACAF0) --------------------------------------------------------
int sub_4ACAF0()
{
  return atexit(sub_4B31A0);
}

//----- (004ACB10) --------------------------------------------------------
int sub_4ACB10()
{
  std::string::string((std::string *)&unk_4E1194);
  return atexit(sub_4B31B0);
}

//----- (004ACB30) --------------------------------------------------------
int sub_4ACB30()
{
  std::string::string((std::string *)&unk_4E11B0);
  return atexit(sub_4B31C0);
}

//----- (004ACB50) --------------------------------------------------------
int sub_4ACB50()
{
  std::string::string((std::string *)&unk_4E11CC);
  return atexit(sub_4B31D0);
}

//----- (004ACB70) --------------------------------------------------------
int sub_4ACB70()
{
  std::string::string((std::string *)&unk_4E11E8);
  return atexit(sub_4B31E0);
}

//----- (004ACB90) --------------------------------------------------------
int sub_4ACB90()
{
  std::string::string((std::string *)&unk_4E1204);
  return atexit(sub_4B31F0);
}

//----- (004ACBB0) --------------------------------------------------------
int sub_4ACBB0()
{
  std::string::string((std::string *)&unk_4E1220);
  return atexit(sub_4B3200);
}

//----- (004ACBD0) --------------------------------------------------------
int sub_4ACBD0()
{
  std::string::string((std::string *)&unk_4E123C);
  return atexit(sub_4B3210);
}

//----- (004ACBF0) --------------------------------------------------------
int sub_4ACBF0()
{
  sub_433BC0(dword_4E1258);
  return atexit(sub_4B3220);
}

//----- (004ACC10) --------------------------------------------------------
int sub_4ACC10()
{
  std::string::string((std::string *)&unk_4E1264);
  return atexit(sub_4B3230);
}

//----- (004ACC30) --------------------------------------------------------
void *sub_4ACC30()
{
  return CMemory::CInit::CInit(&unk_4E1808);
}

//----- (004ACC40) --------------------------------------------------------
DWORD sub_4ACC40()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E181C = result;
  return result;
}
// 4E181C: using guessed type int dword_4E181C;

//----- (004ACC50) --------------------------------------------------------
int sub_4ACC50()
{
  sub_447760(dword_4E1820);
  return atexit(sub_4B3240);
}

//----- (004ACC70) --------------------------------------------------------
int sub_4ACC70()
{
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)&unk_4E182C);
  return atexit((void (__cdecl *)())sub_4B3250);
}

//----- (004ACC90) --------------------------------------------------------
int sub_4ACC90()
{
  sub_447790(dword_4E184C);
  return atexit(sub_4B3260);
}

//----- (004ACCB0) --------------------------------------------------------
int sub_4ACCB0()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E1858);
  return atexit((void (__cdecl *)())sub_4B3270);
}

//----- (004ACCD0) --------------------------------------------------------
int sub_4ACCD0()
{
  sub_4477C0(dword_4E1870);
  return atexit(sub_4B3280);
}

//----- (004ACCF0) --------------------------------------------------------
int sub_4ACCF0()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E187C);
  return atexit((void (__cdecl *)())sub_4B3290);
}

//----- (004ACD10) --------------------------------------------------------
int sub_4ACD10()
{
  sub_4382D0(dword_4E1898);
  return atexit(sub_4B32A0);
}

//----- (004ACD30) --------------------------------------------------------
int sub_4ACD30()
{
  `vector constructor iterator'(
    &unk_4E18F0,
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  return atexit(sub_4B32B0);
}

//----- (004ACD60) --------------------------------------------------------
int sub_4ACD60()
{
  CMonsterObject::CMonsterObject((CMonsterObject *)dword_4E1930);
  return atexit(sub_4B32D0);
}
// 4E1930: using guessed type int dword_4E1930[26];

//----- (004ACD80) --------------------------------------------------------
int sub_4ACD80()
{
  CMonsterObject::CMonsterObject((CMonsterObject *)dword_4E1998);
  return atexit(sub_4B32E0);
}
// 4E1998: using guessed type int dword_4E1998[26];

//----- (004ACDA0) --------------------------------------------------------
int sub_4ACDA0()
{
  CMonsterObject::CMonsterObject((CMonsterObject *)dword_4E1A00);
  return atexit(sub_4B32F0);
}
// 4E1A00: using guessed type int dword_4E1A00[25];

//----- (004ACDC0) --------------------------------------------------------
int sub_4ACDC0()
{
  sub_44B880(dword_4E1A9C);
  return atexit(sub_4B3300);
}

//----- (004ACDE0) --------------------------------------------------------
int sub_4ACDE0()
{
  sub_44B8B0(dword_4E1AA8);
  return atexit(sub_4B3310);
}

//----- (004ACE00) --------------------------------------------------------
int sub_4ACE00()
{
  sub_44B8E0(dword_4E1AB4);
  return atexit(sub_4B3320);
}

//----- (004ACE20) --------------------------------------------------------
int sub_4ACE20()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E1AC0);
  return atexit((void (__cdecl *)())sub_4B3330);
}

//----- (004ACE40) --------------------------------------------------------
int sub_4ACE40()
{
  CNPCObject::CNPCObject((int)dword_4E1AD8);
  return atexit(sub_4B3340);
}
// 4E1AD8: using guessed type int dword_4E1AD8[24];

//----- (004ACE60) --------------------------------------------------------
int sub_4ACE60()
{
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)&unk_4E1B38);
  return atexit((void (__cdecl *)())sub_4B3350);
}

//----- (004ACE80) --------------------------------------------------------
int sub_4ACE80()
{
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)&unk_4E1B58);
  return atexit((void (__cdecl *)())sub_4B3360);
}

//----- (004ACEA0) --------------------------------------------------------
int sub_4ACEA0()
{
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)&unk_4E1B78);
  return atexit((void (__cdecl *)())sub_4B3370);
}

//----- (004ACEC0) --------------------------------------------------------
int sub_4ACEC0()
{
  sub_44CD40(dword_4E1B9C);
  return atexit(sub_4B3380);
}

//----- (004ACEE0) --------------------------------------------------------
void sub_4ACEE0()
{
  char *v0; // [esp+0h] [ebp-390h] BYREF
  CItem *v1; // [esp+4h] [ebp-38Ch] BYREF
  char *v2; // [esp+8h] [ebp-388h] BYREF
  CItem *v3; // [esp+Ch] [ebp-384h] BYREF
  char *v4; // [esp+10h] [ebp-380h] BYREF
  CItem *v5; // [esp+14h] [ebp-37Ch] BYREF
  char *v6; // [esp+18h] [ebp-378h] BYREF
  CItem *v7; // [esp+1Ch] [ebp-374h] BYREF
  char *v8; // [esp+20h] [ebp-370h] BYREF
  CItem *v9; // [esp+24h] [ebp-36Ch] BYREF
  char *v10; // [esp+28h] [ebp-368h] BYREF
  CItem *v11; // [esp+2Ch] [ebp-364h] BYREF
  char *v12; // [esp+30h] [ebp-360h] BYREF
  CItem *v13; // [esp+34h] [ebp-35Ch] BYREF
  char *v14; // [esp+38h] [ebp-358h] BYREF
  CItem *v15; // [esp+3Ch] [ebp-354h] BYREF
  char *v16; // [esp+40h] [ebp-350h] BYREF
  CItem *v17; // [esp+44h] [ebp-34Ch] BYREF
  char *v18; // [esp+48h] [ebp-348h] BYREF
  CItem *v19; // [esp+4Ch] [ebp-344h] BYREF
  char *v20; // [esp+50h] [ebp-340h] BYREF
  CItem *v21; // [esp+54h] [ebp-33Ch] BYREF
  char *v22; // [esp+58h] [ebp-338h] BYREF
  CItem *v23; // [esp+5Ch] [ebp-334h] BYREF
  char *v24; // [esp+60h] [ebp-330h] BYREF
  CItem *v25; // [esp+64h] [ebp-32Ch] BYREF
  char *v26; // [esp+68h] [ebp-328h] BYREF
  CItem *v27; // [esp+6Ch] [ebp-324h] BYREF
  char *v28; // [esp+70h] [ebp-320h] BYREF
  CItem *v29; // [esp+74h] [ebp-31Ch] BYREF
  char *v30; // [esp+78h] [ebp-318h] BYREF
  CItem *v31; // [esp+7Ch] [ebp-314h] BYREF
  char *v32; // [esp+80h] [ebp-310h] BYREF
  CItem *v33; // [esp+84h] [ebp-30Ch] BYREF
  char *v34; // [esp+88h] [ebp-308h] BYREF
  CItem *v35; // [esp+8Ch] [ebp-304h] BYREF
  char *v36; // [esp+90h] [ebp-300h] BYREF
  CItem *v37; // [esp+94h] [ebp-2FCh] BYREF
  char *v38; // [esp+98h] [ebp-2F8h] BYREF
  CItem *v39; // [esp+9Ch] [ebp-2F4h] BYREF
  char *v40; // [esp+A0h] [ebp-2F0h] BYREF
  CItem *v41; // [esp+A4h] [ebp-2ECh] BYREF
  char *v42; // [esp+A8h] [ebp-2E8h] BYREF
  CItem *v43; // [esp+ACh] [ebp-2E4h] BYREF
  char *v44; // [esp+B0h] [ebp-2E0h] BYREF
  CItem *v45; // [esp+B4h] [ebp-2DCh] BYREF
  char *v46; // [esp+B8h] [ebp-2D8h] BYREF
  CItem *v47; // [esp+BCh] [ebp-2D4h] BYREF
  char *v48; // [esp+C0h] [ebp-2D0h] BYREF
  CItem *v49; // [esp+C4h] [ebp-2CCh] BYREF
  char *v50; // [esp+C8h] [ebp-2C8h] BYREF
  CItem *v51; // [esp+CCh] [ebp-2C4h] BYREF
  char *v52; // [esp+D0h] [ebp-2C0h] BYREF
  CItem *v53; // [esp+D4h] [ebp-2BCh] BYREF
  char *v54; // [esp+D8h] [ebp-2B8h] BYREF
  CItem *v55; // [esp+DCh] [ebp-2B4h] BYREF
  char *v56; // [esp+E0h] [ebp-2B0h] BYREF
  CItem *v57; // [esp+E4h] [ebp-2ACh] BYREF
  char *v58; // [esp+E8h] [ebp-2A8h] BYREF
  CItem *v59; // [esp+ECh] [ebp-2A4h] BYREF
  char *v60; // [esp+F0h] [ebp-2A0h] BYREF
  CItem *v61; // [esp+F4h] [ebp-29Ch] BYREF
  char *v62; // [esp+F8h] [ebp-298h] BYREF
  CItem *v63; // [esp+FCh] [ebp-294h] BYREF
  char *v64; // [esp+100h] [ebp-290h] BYREF
  CItem *v65; // [esp+104h] [ebp-28Ch] BYREF
  char *v66; // [esp+108h] [ebp-288h] BYREF
  CItem *v67; // [esp+10Ch] [ebp-284h] BYREF
  char *v68; // [esp+110h] [ebp-280h] BYREF
  CItem *v69; // [esp+114h] [ebp-27Ch] BYREF
  char *v70; // [esp+118h] [ebp-278h] BYREF
  CItem *v71; // [esp+11Ch] [ebp-274h] BYREF
  char *v72; // [esp+120h] [ebp-270h] BYREF
  CItem *v73; // [esp+124h] [ebp-26Ch] BYREF
  char *v74; // [esp+128h] [ebp-268h] BYREF
  CItem *v75; // [esp+12Ch] [ebp-264h] BYREF
  char *v76; // [esp+130h] [ebp-260h] BYREF
  CItem *v77; // [esp+134h] [ebp-25Ch] BYREF
  char *v78; // [esp+138h] [ebp-258h] BYREF
  CItem *v79; // [esp+13Ch] [ebp-254h] BYREF
  char *v80; // [esp+140h] [ebp-250h] BYREF
  CItem *v81; // [esp+144h] [ebp-24Ch] BYREF
  char *v82; // [esp+148h] [ebp-248h] BYREF
  CItem *v83; // [esp+14Ch] [ebp-244h] BYREF
  char *v84; // [esp+150h] [ebp-240h] BYREF
  CItem *v85; // [esp+154h] [ebp-23Ch] BYREF
  char *v86; // [esp+158h] [ebp-238h] BYREF
  CItem *v87; // [esp+15Ch] [ebp-234h] BYREF
  char *v88; // [esp+160h] [ebp-230h] BYREF
  CItem *v89; // [esp+164h] [ebp-22Ch] BYREF
  char *v90; // [esp+168h] [ebp-228h] BYREF
  CItem *v91; // [esp+16Ch] [ebp-224h] BYREF
  char *v92; // [esp+170h] [ebp-220h] BYREF
  CItem *v93; // [esp+174h] [ebp-21Ch] BYREF
  char *v94; // [esp+178h] [ebp-218h] BYREF
  CItem *v95; // [esp+17Ch] [ebp-214h] BYREF
  char *v96; // [esp+180h] [ebp-210h] BYREF
  CItem *v97; // [esp+184h] [ebp-20Ch] BYREF
  char *v98; // [esp+188h] [ebp-208h] BYREF
  CItem *v99; // [esp+18Ch] [ebp-204h] BYREF
  char *v100; // [esp+190h] [ebp-200h] BYREF
  CItem *v101; // [esp+194h] [ebp-1FCh] BYREF
  char *v102; // [esp+198h] [ebp-1F8h] BYREF
  CItem *v103; // [esp+19Ch] [ebp-1F4h] BYREF
  char *v104; // [esp+1A0h] [ebp-1F0h] BYREF
  CItem *v105; // [esp+1A4h] [ebp-1ECh] BYREF
  char *v106; // [esp+1A8h] [ebp-1E8h] BYREF
  CItem *v107; // [esp+1ACh] [ebp-1E4h] BYREF
  char *v108; // [esp+1B0h] [ebp-1E0h] BYREF
  CItem *v109; // [esp+1B4h] [ebp-1DCh] BYREF
  char *v110; // [esp+1B8h] [ebp-1D8h] BYREF
  CItem *v111; // [esp+1BCh] [ebp-1D4h] BYREF
  char *v112; // [esp+1C0h] [ebp-1D0h] BYREF
  CItem *v113; // [esp+1C4h] [ebp-1CCh] BYREF
  char *v114; // [esp+1C8h] [ebp-1C8h] BYREF
  CItem *v115; // [esp+1CCh] [ebp-1C4h] BYREF
  char *v116; // [esp+1D0h] [ebp-1C0h] BYREF
  CItem *v117; // [esp+1D4h] [ebp-1BCh] BYREF
  char *v118; // [esp+1D8h] [ebp-1B8h] BYREF
  CItem *v119; // [esp+1DCh] [ebp-1B4h] BYREF
  char *v120; // [esp+1E0h] [ebp-1B0h] BYREF
  CItem *v121; // [esp+1E4h] [ebp-1ACh] BYREF
  char *v122; // [esp+1E8h] [ebp-1A8h] BYREF
  CItem *v123; // [esp+1ECh] [ebp-1A4h] BYREF
  char *v124; // [esp+1F0h] [ebp-1A0h] BYREF
  CItem *v125; // [esp+1F4h] [ebp-19Ch] BYREF
  char *v126; // [esp+1F8h] [ebp-198h] BYREF
  CItem *v127; // [esp+1FCh] [ebp-194h] BYREF
  char *v128; // [esp+200h] [ebp-190h] BYREF
  CItem *v129; // [esp+204h] [ebp-18Ch] BYREF
  char *v130; // [esp+208h] [ebp-188h] BYREF
  CItem *v131; // [esp+20Ch] [ebp-184h] BYREF
  char *v132; // [esp+210h] [ebp-180h] BYREF
  CItem *v133; // [esp+214h] [ebp-17Ch] BYREF
  char *v134; // [esp+218h] [ebp-178h] BYREF
  CItem *v135; // [esp+21Ch] [ebp-174h] BYREF
  char *v136; // [esp+220h] [ebp-170h] BYREF
  CItem *v137; // [esp+224h] [ebp-16Ch] BYREF
  char *v138; // [esp+228h] [ebp-168h] BYREF
  CItem *v139; // [esp+22Ch] [ebp-164h] BYREF
  char *v140; // [esp+230h] [ebp-160h] BYREF
  CItem *v141; // [esp+234h] [ebp-15Ch] BYREF
  char *v142; // [esp+238h] [ebp-158h] BYREF
  CItem *v143; // [esp+23Ch] [ebp-154h] BYREF
  char *v144; // [esp+240h] [ebp-150h] BYREF
  CItem *v145; // [esp+244h] [ebp-14Ch] BYREF
  char *v146; // [esp+248h] [ebp-148h] BYREF
  CItem *v147; // [esp+24Ch] [ebp-144h] BYREF
  char *v148; // [esp+250h] [ebp-140h] BYREF
  CItem *v149; // [esp+254h] [ebp-13Ch] BYREF
  char *v150; // [esp+258h] [ebp-138h] BYREF
  CItem *v151; // [esp+25Ch] [ebp-134h] BYREF
  char *v152; // [esp+260h] [ebp-130h] BYREF
  CItem *v153; // [esp+264h] [ebp-12Ch] BYREF
  char *v154; // [esp+268h] [ebp-128h] BYREF
  CItem *v155; // [esp+26Ch] [ebp-124h] BYREF
  char *v156; // [esp+270h] [ebp-120h] BYREF
  CItem *v157; // [esp+274h] [ebp-11Ch] BYREF
  char *v158; // [esp+278h] [ebp-118h] BYREF
  CItem *v159; // [esp+27Ch] [ebp-114h] BYREF
  char *v160; // [esp+280h] [ebp-110h] BYREF
  CItem *v161; // [esp+284h] [ebp-10Ch] BYREF
  char *v162; // [esp+288h] [ebp-108h] BYREF
  CItem *v163; // [esp+28Ch] [ebp-104h] BYREF
  char *v164; // [esp+290h] [ebp-100h] BYREF
  CItem *v165; // [esp+294h] [ebp-FCh] BYREF
  char *v166; // [esp+298h] [ebp-F8h] BYREF
  CItem *v167; // [esp+29Ch] [ebp-F4h] BYREF
  char *v168; // [esp+2A0h] [ebp-F0h] BYREF
  CItem *v169; // [esp+2A4h] [ebp-ECh] BYREF
  char *v170; // [esp+2A8h] [ebp-E8h] BYREF
  CItem *v171; // [esp+2ACh] [ebp-E4h] BYREF
  char *v172; // [esp+2B0h] [ebp-E0h] BYREF
  CItem *v173; // [esp+2B4h] [ebp-DCh] BYREF
  char *v174; // [esp+2B8h] [ebp-D8h] BYREF
  CItem *v175; // [esp+2BCh] [ebp-D4h] BYREF
  char *v176; // [esp+2C0h] [ebp-D0h] BYREF
  CItem *v177; // [esp+2C4h] [ebp-CCh] BYREF
  char *v178; // [esp+2C8h] [ebp-C8h] BYREF
  CItem *v179; // [esp+2CCh] [ebp-C4h] BYREF
  char *v180; // [esp+2D0h] [ebp-C0h] BYREF
  CItem *v181; // [esp+2D4h] [ebp-BCh] BYREF
  char *v182; // [esp+2D8h] [ebp-B8h] BYREF
  CItem *v183; // [esp+2DCh] [ebp-B4h] BYREF
  char *v184; // [esp+2E0h] [ebp-B0h] BYREF
  CItem *v185; // [esp+2E4h] [ebp-ACh] BYREF
  char *v186; // [esp+2E8h] [ebp-A8h] BYREF
  CItem *v187; // [esp+2ECh] [ebp-A4h] BYREF
  char *v188; // [esp+2F0h] [ebp-A0h] BYREF
  CItem *v189; // [esp+2F4h] [ebp-9Ch] BYREF
  char *v190; // [esp+2F8h] [ebp-98h] BYREF
  CItem *v191; // [esp+2FCh] [ebp-94h] BYREF
  char *v192; // [esp+300h] [ebp-90h] BYREF
  CItem *v193; // [esp+304h] [ebp-8Ch] BYREF
  char *v194; // [esp+308h] [ebp-88h] BYREF
  CItem *v195; // [esp+30Ch] [ebp-84h] BYREF
  char *v196; // [esp+310h] [ebp-80h] BYREF
  CItem *v197; // [esp+314h] [ebp-7Ch] BYREF
  char *v198; // [esp+318h] [ebp-78h] BYREF
  CItem *v199; // [esp+31Ch] [ebp-74h] BYREF
  char *v200; // [esp+320h] [ebp-70h] BYREF
  CItem *v201; // [esp+324h] [ebp-6Ch] BYREF
  char *v202; // [esp+328h] [ebp-68h] BYREF
  CItem *v203; // [esp+32Ch] [ebp-64h] BYREF
  char *v204; // [esp+330h] [ebp-60h] BYREF
  CItem *v205; // [esp+334h] [ebp-5Ch] BYREF
  char *v206; // [esp+338h] [ebp-58h] BYREF
  CItem *v207; // [esp+33Ch] [ebp-54h] BYREF
  char *v208; // [esp+340h] [ebp-50h] BYREF
  CItem *v209; // [esp+344h] [ebp-4Ch] BYREF
  char *v210; // [esp+348h] [ebp-48h] BYREF
  CItem *v211; // [esp+34Ch] [ebp-44h] BYREF
  char *v212; // [esp+350h] [ebp-40h] BYREF
  CItem *v213; // [esp+354h] [ebp-3Ch] BYREF
  char *v214; // [esp+358h] [ebp-38h] BYREF
  CItem *v215; // [esp+35Ch] [ebp-34h] BYREF
  char *v216; // [esp+360h] [ebp-30h] BYREF
  CItem *v217; // [esp+364h] [ebp-2Ch] BYREF
  char *v218; // [esp+368h] [ebp-28h] BYREF
  CItem *v219; // [esp+36Ch] [ebp-24h] BYREF
  char *v220; // [esp+370h] [ebp-20h] BYREF
  CItem *v221; // [esp+374h] [ebp-1Ch] BYREF
  char *v222; // [esp+378h] [ebp-18h] BYREF
  CItem *v223; // [esp+37Ch] [ebp-14h] BYREF
  char *v224; // [esp+380h] [ebp-10h] BYREF
  CItem *v225; // [esp+384h] [ebp-Ch] BYREF
  char *_Val1; // [esp+388h] [ebp-8h] BYREF
  CItem *_Val2; // [esp+38Ch] [ebp-4h] BYREF

  _Val2 = (CItem *)1;
  _Val1 = "name";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BA8,
    (const char *const *)&_Val1,
    &_Val2);
  v225 = (CItem *)2;
  v224 = "index";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BB0,
    (const char *const *)&v224,
    &v225);
  v223 = (CItem *)3;
  v222 = "map";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BB8,
    (const char *const *)&v222,
    &v223);
  v221 = (CItem *)4;
  v220 = "area";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BC0,
    (const char *const *)&v220,
    &v221);
  v219 = (CItem *)5;
  v218 = "max";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BC8,
    (const char *const *)&v218,
    &v219);
  v217 = (CItem *)6;
  v216 = "rect";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BD0,
    (const char *const *)&v216,
    &v217);
  v215 = (CItem *)7;
  v214 = "level";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BD8,
    (const char *const *)&v214,
    &v215);
  v213 = (CItem *)8;
  v212 = "race";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BE0,
    (const char *const *)&v212,
    &v213);
  v211 = (CItem *)9;
  v210 = "str";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BE8,
    (const char *const *)&v210,
    &v211);
  v209 = (CItem *)10;
  v208 = "hth";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BF0,
    (const char *const *)&v208,
    &v209);
  v207 = (CItem *)11;
  v206 = "int";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1BF8,
    (const char *const *)&v206,
    &v207);
  v205 = (CItem *)12;
  v204 = "wis";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C00,
    (const char *const *)&v204,
    &v205);
  v203 = (CItem *)13;
  v202 = "dex";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C08,
    (const char *const *)&v202,
    &v203);
  v201 = (CItem *)14;
  v200 = "hp";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C10,
    (const char *const *)&v200,
    &v201);
  v199 = (CItem *)15;
  v198 = "mp";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C18,
    (const char *const *)&v198,
    &v199);
  v197 = (CItem *)16;
  v196 = "hit";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C20,
    (const char *const *)&v196,
    &v197);
  v195 = (CItem *)17;
  v194 = "dodge";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C28,
    (const char *const *)&v194,
    &v195);
  v193 = (CItem *)18;
  v192 = "attack";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C30,
    (const char *const *)&v192,
    &v193);
  v191 = (CItem *)19;
  v190 = "magic";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C38,
    (const char *const *)&v190,
    &v191);
  v189 = (CItem *)20;
  v188 = "defense";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C40,
    (const char *const *)&v188,
    &v189);
  v187 = (CItem *)21;
  v186 = "absorb";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C48,
    (const char *const *)&v186,
    &v187);
  v185 = (CItem *)22;
  v184 = "aspeed";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C50,
    (const char *const *)&v184,
    &v185);
  v183 = (CItem *)23;
  v182 = "mspeed";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C58,
    (const char *const *)&v182,
    &v183);
  v181 = (CItem *)24;
  v180 = "resist";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C60,
    (const char *const *)&v180,
    &v181);
  v179 = (CItem *)25;
  v178 = "resistfire";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C68,
    (const char *const *)&v178,
    &v179);
  v177 = (CItem *)26;
  v176 = "resistice";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C70,
    (const char *const *)&v176,
    &v177);
  v175 = (CItem *)27;
  v174 = "resistlitning";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C78,
    (const char *const *)&v174,
    &v175);
  v173 = (CItem *)28;
  v172 = "resistcurse";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C80,
    (const char *const *)&v172,
    &v173);
  v171 = (CItem *)29;
  v170 = "resistpalsy";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C88,
    (const char *const *)&v170,
    &v171);
  v169 = (CItem *)30;
  v168 = "kind";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C90,
    (const char *const *)&v168,
    &v169);
  v167 = (CItem *)31;
  v166 = "xy";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1C98,
    (const char *const *)&v166,
    &v167);
  v165 = (CItem *)32;
  v164 = "filename";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CA0,
    (const char *const *)&v164,
    &v165);
  v163 = (CItem *)33;
  v162 = "ai";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CA8,
    (const char *const *)&v162,
    &v163);
  v161 = (CItem *)34;
  v160 = "range";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CB0,
    (const char *const *)&v160,
    &v161);
  v159 = (CItem *)35;
  v158 = "sight";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CB8,
    (const char *const *)&v158,
    &v159);
  v157 = (CItem *)36;
  v156 = "exp";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CC0,
    (const char *const *)&v156,
    &v157);
  v155 = (CItem *)37;
  v154 = "itemgroup";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CC8,
    (const char *const *)&v154,
    &v155);
  v153 = (CItem *)38;
  v152 = "class";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CD0,
    (const char *const *)&v152,
    &v153);
  v151 = (CItem *)39;
  v150 = "limit";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CD8,
    (const char *const *)&v150,
    &v151);
  v149 = (CItem *)40;
  v148 = "buy";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CE0,
    (const char *const *)&v148,
    &v149);
  v147 = (CItem *)41;
  v146 = "endurance";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CE8,
    (const char *const *)&v146,
    &v147);
  v145 = (CItem *)42;
  v144 = "specialty";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CF0,
    (const char *const *)&v144,
    &v145);
  v143 = (CItem *)43;
  v142 = "teleport";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1CF8,
    (const char *const *)&v142,
    &v143);
  v141 = (CItem *)44;
  v140 = "image";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D00,
    (const char *const *)&v140,
    &v141);
  v139 = (CItem *)45;
  v138 = "action";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D08,
    (const char *const *)&v138,
    &v139);
  v137 = (CItem *)46;
  v136 = "refresh";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D10,
    (const char *const *)&v136,
    &v137);
  v135 = (CItem *)47;
  v134 = "wear";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D18,
    (const char *const *)&v134,
    &v135);
  v133 = (CItem *)48;
  v132 = "use";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D20,
    (const char *const *)&v132,
    &v133);
  v131 = (CItem *)49;
  v130 = "plural";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D28,
    (const char *const *)&v130,
    &v131);
  v129 = (CItem *)50;
  v128 = "item";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D30,
    (const char *const *)&v128,
    &v129);
  v127 = (CItem *)51;
  v126 = "group";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D38,
    (const char *const *)&v126,
    &v127);
  v125 = (CItem *)52;
  v124 = "money";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D40,
    (const char *const *)&v124,
    &v125);
  v123 = (CItem *)53;
  v122 = "move";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D48,
    (const char *const *)&v122,
    &v123);
  v121 = (CItem *)54;
  v120 = "html";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D50,
    (const char *const *)&v120,
    &v121);
  v119 = (CItem *)55;
  v118 = "shape";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D58,
    (const char *const *)&v118,
    &v119);
  v117 = (CItem *)56;
  v116 = "dir";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D60,
    (const char *const *)&v116,
    &v117);
  v115 = (CItem *)57;
  v114 = "desc";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D68,
    (const char *const *)&v114,
    &v115);
  v113 = (CItem *)58;
  v112 = "sell";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D70,
    (const char *const *)&v112,
    &v113);
  v111 = (CItem *)59;
  v110 = "pre";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D78,
    (const char *const *)&v110,
    &v111);
  v109 = (CItem *)60;
  v108 = "delay";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D80,
    (const char *const *)&v108,
    &v109);
  v107 = (CItem *)61;
  v106 = "lasttime";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D88,
    (const char *const *)&v106,
    &v107);
  v105 = (CItem *)62;
  v104 = "value1";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D90,
    (const char *const *)&v104,
    &v105);
  v103 = (CItem *)63;
  v102 = "value2";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1D98,
    (const char *const *)&v102,
    &v103);
  v101 = (CItem *)64;
  v100 = "case";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DA0,
    (const char *const *)&v100,
    &v101);
  v99 = (CItem *)65;
  v98 = "if";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DA8,
    (const char *const *)&v98,
    &v99);
  v97 = (CItem *)66;
  v96 = "then";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DB0,
    (const char *const *)&v96,
    &v97);
  v95 = (CItem *)67;
  v94 = "else";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DB8,
    (const char *const *)&v94,
    &v95);
  v93 = (CItem *)68;
  v92 = "reward";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DC0,
    (const char *const *)&v92,
    &v93);
  v91 = (CItem *)69;
  v90 = "party";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DC8,
    (const char *const *)&v90,
    &v91);
  v89 = (CItem *)70;
  v88 = "quest";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DD0,
    (const char *const *)&v88,
    &v89);
  v87 = (CItem *)71;
  v86 = "contribute";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DD8,
    (const char *const *)&v86,
    &v87);
  v85 = (CItem *)72;
  v84 = "supoint";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DE0,
    (const char *const *)&v84,
    &v85);
  v83 = (CItem *)73;
  v82 = "save";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DE8,
    (const char *const *)&v82,
    &v83);
  v81 = (CItem *)74;
  v80 = "clear";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DF0,
    (const char *const *)&v80,
    &v81);
  v79 = (CItem *)75;
  v78 = "notclear";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1DF8,
    (const char *const *)&v78,
    &v79);
  v77 = (CItem *)76;
  v76 = "link";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E00,
    (const char *const *)&v76,
    &v77);
  v75 = (CItem *)77;
  v74 = "in";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E08,
    (const char *const *)&v74,
    &v75);
  v73 = (CItem *)78;
  v72 = "out";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E10,
    (const char *const *)&v72,
    &v73);
  v71 = (CItem *)79;
  v70 = "linked";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E18,
    (const char *const *)&v70,
    &v71);
  v69 = (CItem *)80;
  v68 = "droprate";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E20,
    (const char *const *)&v68,
    &v69);
  v67 = (CItem *)81;
  v66 = "maxlevel";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E28,
    (const char *const *)&v66,
    &v67);
  v65 = (CItem *)82;
  v64 = "charming";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E30,
    (const char *const *)&v64,
    &v65);
  v63 = (CItem *)83;
  v62 = "setgem";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E38,
    (const char *const *)&v62,
    &v63);
  v61 = (CItem *)84;
  v60 = "repair";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E40,
    (const char *const *)&v60,
    &v61);
  v59 = (CItem *)85;
  v58 = "gstate";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E48,
    (const char *const *)&v58,
    &v59);
  v57 = (CItem *)86;
  v56 = "cooltime";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E50,
    (const char *const *)&v56,
    &v57);
  v55 = (CItem *)87;
  v54 = "cycle";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E58,
    (const char *const *)&v54,
    &v55);
  v53 = (CItem *)88;
  v52 = "changeprefix";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E60,
    (const char *const *)&v52,
    &v53);
  v51 = (CItem *)89;
  v50 = "buff";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E68,
    (const char *const *)&v50,
    &v51);
  v49 = (CItem *)90;
  v48 = "cocoon";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E70,
    (const char *const *)&v48,
    &v49);
  v47 = (CItem *)91;
  v46 = "imageex";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E78,
    (const char *const *)&v46,
    &v47);
  v45 = (CItem *)92;
  v44 = "itemrand";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E80,
    (const char *const *)&v44,
    &v45);
  v43 = (CItem *)93;
  v42 = "guide";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E88,
    (const char *const *)&v42,
    &v43);
  v41 = (CItem *)94;
  v40 = "redistribute";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E90,
    (const char *const *)&v40,
    &v41);
  v39 = (CItem *)95;
  v38 = "cid";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1E98,
    (const char *const *)&v38,
    &v39);
  v37 = (CItem *)96;
  v36 = "warrelation";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EA0,
    (const char *const *)&v36,
    &v37);
  v35 = (CItem *)97;
  v34 = "rage";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EA8,
    (const char *const *)&v34,
    &v35);
  v33 = (CItem *)98;
  v32 = "pay";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EB0,
    (const char *const *)&v32,
    &v33);
  v31 = (CItem *)99;
  v30 = "protect";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EB8,
    (const char *const *)&v30,
    &v31);
  v29 = (CItem *)100;
  v28 = "revival";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EC0,
    (const char *const *)&v28,
    &v29);
  v27 = (CItem *)101;
  v26 = "code";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EC8,
    (const char *const *)&v26,
    &v27);
  v25 = (CItem *)102;
  v24 = "stbuff";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1ED0,
    (const char *const *)&v24,
    &v25);
  v23 = (CItem *)103;
  v22 = "from";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1ED8,
    (const char *const *)&v22,
    &v23);
  v21 = (CItem *)104;
  v20 = "to";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EE0,
    (const char *const *)&v20,
    &v21);
  v19 = (CItem *)105;
  v18 = "maxprotect";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EE8,
    (const char *const *)&v18,
    &v19);
  v17 = (CItem *)106;
  v16 = "effect";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EF0,
    (const char *const *)&v16,
    &v17);
  v15 = (CItem *)107;
  v14 = "skill";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1EF8,
    (const char *const *)&v14,
    &v15);
  v13 = (CItem *)108;
  v12 = "scenario";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F00,
    (const char *const *)&v12,
    &v13);
  v11 = (CItem *)109;
  v10 = "country";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F08,
    (const char *const *)&v10,
    &v11);
  v9 = (CItem *)110;
  v8 = "bstate";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F10,
    (const char *const *)&v8,
    &v9);
  v7 = (CItem *)111;
  v6 = "citem";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F18,
    (const char *const *)&v6,
    &v7);
  v5 = (CItem *)112;
  v4 = "SkillInfo";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F20,
    (const char *const *)&v4,
    &v5);
  v3 = (CItem *)113;
  v2 = "sgxy";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F28,
    (const char *const *)&v2,
    &v3);
  v1 = (CItem *)114;
  v0 = "sgdir";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F30,
    (const char *const *)&v0,
    &v1);
}

//----- (004AE1D0) --------------------------------------------------------
int sub_4AE1D0()
{
  sub_44CD90(dword_4E1F38);
  return atexit(sub_4B3390);
}

//----- (004AE1F0) --------------------------------------------------------
void sub_4AE1F0()
{
  CGoods *v0; // [esp+0h] [ebp-E0h]
  CItem *v1; // [esp+4h] [ebp-DCh]
  CItem *v2; // [esp+8h] [ebp-D8h]
  CItem *v3; // [esp+Ch] [ebp-D4h]
  CItem *v4; // [esp+10h] [ebp-D0h]
  CItem *v5; // [esp+14h] [ebp-CCh]
  CItem *v6; // [esp+18h] [ebp-C8h]
  CItem *v7; // [esp+1Ch] [ebp-C4h]
  CGroup *v8; // [esp+20h] [ebp-C0h]
  CItem *v9; // [esp+24h] [ebp-BCh]
  CItem *v10; // [esp+28h] [ebp-B8h]
  CItem *v11; // [esp+2Ch] [ebp-B4h]
  CInitMonster *v12; // [esp+30h] [ebp-B0h]
  CItem *v13; // [esp+34h] [ebp-ACh]
  char *v14; // [esp+38h] [ebp-A8h] BYREF
  CMemory **v15; // [esp+3Ch] [ebp-A4h]
  CItem *v16; // [esp+40h] [ebp-A0h] BYREF
  char *v17; // [esp+44h] [ebp-9Ch] BYREF
  CMemory **v18; // [esp+48h] [ebp-98h]
  CItem *v19; // [esp+4Ch] [ebp-94h] BYREF
  char *v20; // [esp+50h] [ebp-90h] BYREF
  CMemory **v21; // [esp+54h] [ebp-8Ch]
  CItem *v22; // [esp+58h] [ebp-88h] BYREF
  char *v23; // [esp+5Ch] [ebp-84h] BYREF
  CMemory **v24; // [esp+60h] [ebp-80h]
  CItem *v25; // [esp+64h] [ebp-7Ch] BYREF
  char *v26; // [esp+68h] [ebp-78h] BYREF
  CMemory **v27; // [esp+6Ch] [ebp-74h]
  CItem *v28; // [esp+70h] [ebp-70h] BYREF
  char *v29; // [esp+74h] [ebp-6Ch] BYREF
  CMemory **v30; // [esp+78h] [ebp-68h]
  CItem *v31; // [esp+7Ch] [ebp-64h] BYREF
  char *v32; // [esp+80h] [ebp-60h] BYREF
  CMemory **v33; // [esp+84h] [ebp-5Ch]
  CItem *v34; // [esp+88h] [ebp-58h] BYREF
  char *v35; // [esp+8Ch] [ebp-54h] BYREF
  CMemory **v36; // [esp+90h] [ebp-50h]
  CItem *v37; // [esp+94h] [ebp-4Ch] BYREF
  char *v38; // [esp+98h] [ebp-48h] BYREF
  CMemory **v39; // [esp+9Ch] [ebp-44h]
  CItem *v40; // [esp+A0h] [ebp-40h] BYREF
  char *v41; // [esp+A4h] [ebp-3Ch] BYREF
  CMemory **v42; // [esp+A8h] [ebp-38h]
  CItem *v43; // [esp+ACh] [ebp-34h] BYREF
  char *v44; // [esp+B0h] [ebp-30h] BYREF
  CMemory **v45; // [esp+B4h] [ebp-2Ch]
  CItem *v46; // [esp+B8h] [ebp-28h] BYREF
  char *v47; // [esp+BCh] [ebp-24h] BYREF
  CMemory **v48; // [esp+C0h] [ebp-20h]
  CItem *v49; // [esp+C4h] [ebp-1Ch] BYREF
  char *v50; // [esp+C8h] [ebp-18h] BYREF
  CMemory **v51; // [esp+CCh] [ebp-14h]
  CItem *v52; // [esp+D0h] [ebp-10h] BYREF
  char *_Val1; // [esp+D4h] [ebp-Ch] BYREF
  CMemory **v54; // [esp+D8h] [ebp-8h]
  CItem *_Val2; // [esp+DCh] [ebp-4h] BYREF

  v54 = operator_new(0xB4u);
  if ( v54 )
    v13 = (CItem *)CInitMap::CInitMap(v54);
  else
    v13 = 0;
  _Val2 = v13;
  _Val1 = "initmap";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F48,
    (const char *const *)&_Val1,
    &_Val2);
  v51 = operator_new(0x14Cu);
  if ( v51 )
    v12 = CInitMonster::CInitMonster((CInitMonster *)v51);
  else
    v12 = 0;
  v52 = v12;
  v50 = "monster";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F50,
    (const char *const *)&v50,
    &v52);
  v48 = operator_new(0x58u);
  if ( v48 )
    v11 = (CItem *)sub_4382D0(v48);
  else
    v11 = 0;
  v49 = v11;
  v47 = "genmonster";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F58,
    (const char *const *)&v47,
    &v49);
  v45 = operator_new(0xB8u);
  if ( v45 )
    v10 = (CItem *)CInitItem::CInitItem(v45);
  else
    v10 = 0;
  v46 = v10;
  v44 = "item";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F60,
    (const char *const *)&v44,
    &v46);
  v42 = operator_new(0x38u);
  if ( v42 )
    v9 = (CItem *)CPrefix::CPrefix(v42);
  else
    v9 = 0;
  v43 = v9;
  v41 = "prefix";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F68,
    (const char *const *)&v41,
    &v43);
  v39 = operator_new(0x34u);
  if ( v39 )
    v8 = CGroup::CGroup((CGroup *)v39);
  else
    v8 = 0;
  v40 = v8;
  v38 = "group";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F70,
    (const char *const *)&v38,
    &v40);
  v36 = operator_new(0x34u);
  if ( v36 )
    v7 = CItemGroup::CItemGroup((CItemGroup *)v36);
  else
    v7 = 0;
  v37 = v7;
  v35 = "itemgroup";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F78,
    (const char *const *)&v35,
    &v37);
  v33 = operator_new(0x28u);
  if ( v33 )
    v6 = (CItem *)CInitNPC::CInitNPC(v33);
  else
    v6 = 0;
  v34 = v6;
  v32 = "npc";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F80,
    (const char *const *)&v32,
    &v34);
  v30 = operator_new(0xB4u);
  if ( v30 )
    v5 = (CItem *)CGenNPC::CGenNPC(v30);
  else
    v5 = 0;
  v31 = v5;
  v29 = "gennpc";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F88,
    (const char *const *)&v29,
    &v31);
  v27 = operator_new(0x60u);
  if ( v27 )
    v4 = (CItem *)sub_47EDE0((int)v27);
  else
    v4 = 0;
  v28 = v4;
  v26 = "skill";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F90,
    (const char *const *)&v26,
    &v28);
  v24 = operator_new(0x38u);
  if ( v24 )
    v3 = (CItem *)CQuest::CQuest(v24);
  else
    v3 = 0;
  v25 = v3;
  v23 = "quest";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1F98,
    (const char *const *)&v23,
    &v25);
  v21 = operator_new(0x34u);
  if ( v21 )
    v2 = (CItem *)CGoto::CGoto(v21);
  else
    v2 = 0;
  v22 = v2;
  v20 = "goto";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1FA0,
    (const char *const *)&v20,
    &v22);
  v18 = operator_new(0x48u);
  if ( v18 )
    v1 = (CItem *)CPortal::CPortal(v18);
  else
    v1 = 0;
  v19 = v1;
  v17 = "portal";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1FA8,
    (const char *const *)&v17,
    &v19);
  v15 = operator_new(0x34u);
  if ( v15 )
    v0 = CGoods::CGoods((CGoods *)v15);
  else
    v0 = 0;
  v16 = v0;
  v14 = "goods";
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E1FB0,
    (const char *const *)&v14,
    &v16);
}

//----- (004AE6A0) --------------------------------------------------------
DWORD sub_4AE6A0()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E1FC0 = result;
  return result;
}
// 4E1FC0: using guessed type int dword_4E1FC0;

//----- (004AE6B0) --------------------------------------------------------
int sub_4AE6B0()
{
  sub_44FB90(dword_4E1FC4);
  return atexit(sub_4B33A0);
}

//----- (004AE6D0) --------------------------------------------------------
int sub_4AE6D0()
{
  CIOCriticalSection::CIOCriticalSection((CIOCriticalSection *)&unk_4E1FD0);
  return atexit((void (__cdecl *)())sub_4B33B0);
}

//----- (004AE6F0) --------------------------------------------------------
DWORD sub_4AE6F0()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E201C = result;
  return result;
}
// 4E201C: using guessed type int dword_4E201C;

//----- (004AE700) --------------------------------------------------------
int sub_4AE700()
{
  sub_47A6F0(dword_4E2020);
  return atexit(sub_4B33C0);
}

//----- (004AE720) --------------------------------------------------------
int sub_4AE720()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E202C);
  return atexit((void (__cdecl *)())sub_4B33D0);
}

//----- (004AE740) --------------------------------------------------------
int sub_4AE740()
{
  sub_47A760(dword_4E2044);
  return atexit(sub_4B33E0);
}

//----- (004AE760) --------------------------------------------------------
int sub_4AE760()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E2050);
  return atexit((void (__cdecl *)())sub_4B33F0);
}

//----- (004AE780) --------------------------------------------------------
int sub_4AE780()
{
  sub_47A6F0(dword_4E2068);
  return atexit(sub_4B3400);
}

//----- (004AE7A0) --------------------------------------------------------
int sub_4AE7A0()
{
  `vector constructor iterator'(
    &unk_4E2078,
    0x20u,
    2,
    (void *(__thiscall *)(void *))CIOCriticalSection::CIOCriticalSection);
  return atexit(sub_4B3410);
}

//----- (004AE7D0) --------------------------------------------------------
int sub_4AE7D0()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E20B8);
  return atexit((void (__cdecl *)())sub_4B3430);
}

//----- (004AE7F0) --------------------------------------------------------
int sub_4AE7F0()
{
  sub_47A790(dword_4E20D0);
  return atexit(sub_4B3440);
}

//----- (004AE810) --------------------------------------------------------
int sub_4AE810()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E20DC);
  return atexit((void (__cdecl *)())sub_4B3450);
}

//----- (004AE830) --------------------------------------------------------
int sub_4AE830()
{
  sub_47A8B0((CIOObject *)&unk_4E20F4);
  return atexit(sub_4B3460);
}

//----- (004AE850) --------------------------------------------------------
int sub_4AE850()
{
  sub_47DAA0(dword_4E210C);
  return atexit(sub_4B3470);
}

//----- (004AE870) --------------------------------------------------------
int sub_4AE870()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E2118);
  return atexit((void (__cdecl *)())sub_4B3480);
}

//----- (004AE890) --------------------------------------------------------
int sub_4AE890()
{
  sub_47EBE0(dword_4E214C);
  return atexit(sub_4B3490);
}

//----- (004AE8B0) --------------------------------------------------------
int sub_4AE8B0()
{
  sub_47EC80((CIOServer *)&unk_4E2158);
  return atexit(sub_4B34A0);
}

//----- (004AE8D0) --------------------------------------------------------
int sub_4AE8D0()
{
  CRWLock::CRWLock((CRWLock *)&unk_4E2170);
  return atexit((void (__cdecl *)())sub_4B34B0);
}

//----- (004AE8F0) --------------------------------------------------------
int sub_4AE8F0()
{
  sub_48D680(dword_4E218C);
  return atexit(sub_4B34C0);
}

//----- (004AE910) --------------------------------------------------------
int sub_4AE910()
{
  sub_48D680(dword_4E2198);
  return atexit(sub_4B34D0);
}

//----- (004AE930) --------------------------------------------------------
void sub_4AE930()
{
  CItem *v0; // [esp+0h] [ebp-980h]
  CItem *v1; // [esp+4h] [ebp-97Ch]
  CItem *v2; // [esp+8h] [ebp-978h]
  CItem *v3; // [esp+Ch] [ebp-974h]
  CItem *v4; // [esp+10h] [ebp-970h]
  CItem *v5; // [esp+14h] [ebp-96Ch]
  CFire *v6; // [esp+18h] [ebp-968h]
  CItem *v7; // [esp+1Ch] [ebp-964h]
  CItem *v8; // [esp+20h] [ebp-960h]
  CItem *v9; // [esp+24h] [ebp-95Ch]
  CItem *v10; // [esp+28h] [ebp-958h]
  CItem *v11; // [esp+2Ch] [ebp-954h]
  CItem *v12; // [esp+30h] [ebp-950h]
  CItem *v13; // [esp+34h] [ebp-94Ch]
  CItem *v14; // [esp+38h] [ebp-948h]
  CItem *v15; // [esp+3Ch] [ebp-944h]
  CItem *v16; // [esp+40h] [ebp-940h]
  CItem *v17; // [esp+44h] [ebp-93Ch]
  CItem *v18; // [esp+48h] [ebp-938h]
  CItem *v19; // [esp+4Ch] [ebp-934h]
  CItem *v20; // [esp+50h] [ebp-930h]
  CItem *v21; // [esp+54h] [ebp-92Ch]
  CItem *v22; // [esp+58h] [ebp-928h]
  CItem *v23; // [esp+5Ch] [ebp-924h]
  CItem *v24; // [esp+60h] [ebp-920h]
  CItem *v25; // [esp+64h] [ebp-91Ch]
  CItem *v26; // [esp+68h] [ebp-918h]
  CItem *v27; // [esp+6Ch] [ebp-914h]
  CItem *v28; // [esp+70h] [ebp-910h]
  CItem *v29; // [esp+74h] [ebp-90Ch]
  CFatalChance *v30; // [esp+78h] [ebp-908h]
  CItem *v31; // [esp+7Ch] [ebp-904h]
  CItem *v32; // [esp+80h] [ebp-900h]
  CItem *v33; // [esp+84h] [ebp-8FCh]
  CItem *v34; // [esp+88h] [ebp-8F8h]
  CHealingInstance *v35; // [esp+8Ch] [ebp-8F4h]
  CItem *v36; // [esp+90h] [ebp-8F0h]
  CItem *v37; // [esp+94h] [ebp-8ECh]
  CItem *v38; // [esp+98h] [ebp-8E8h]
  CItem *v39; // [esp+9Ch] [ebp-8E4h]
  CItem *v40; // [esp+A0h] [ebp-8E0h]
  CIceRequiem *v41; // [esp+A4h] [ebp-8DCh]
  CItem *v42; // [esp+A8h] [ebp-8D8h]
  CItem *v43; // [esp+ACh] [ebp-8D4h]
  CItem *v44; // [esp+B0h] [ebp-8D0h]
  CItem *v45; // [esp+B4h] [ebp-8CCh]
  CItem *v46; // [esp+B8h] [ebp-8C8h]
  CItem *v47; // [esp+BCh] [ebp-8C4h]
  CItem *v48; // [esp+C0h] [ebp-8C0h]
  CItem *v49; // [esp+C4h] [ebp-8BCh]
  CItem *v50; // [esp+C8h] [ebp-8B8h]
  CItem *v51; // [esp+CCh] [ebp-8B4h]
  CItem *v52; // [esp+D0h] [ebp-8B0h]
  CHealingParty *v53; // [esp+D4h] [ebp-8ACh]
  CItem *v54; // [esp+D8h] [ebp-8A8h]
  CItem *v55; // [esp+DCh] [ebp-8A4h]
  CItem *v56; // [esp+E0h] [ebp-8A0h]
  CHealingParty *v57; // [esp+E4h] [ebp-89Ch]
  CItem *v58; // [esp+E8h] [ebp-898h]
  CFrostBlast *v59; // [esp+ECh] [ebp-894h]
  CItem *v60; // [esp+F0h] [ebp-890h]
  CItem *v61; // [esp+F4h] [ebp-88Ch]
  CItem *v62; // [esp+F8h] [ebp-888h]
  CItem *v63; // [esp+FCh] [ebp-884h]
  CItem *v64; // [esp+100h] [ebp-880h]
  CItem *v65; // [esp+104h] [ebp-87Ch]
  CItem *v66; // [esp+108h] [ebp-878h]
  CItem *v67; // [esp+10Ch] [ebp-874h]
  CItem *v68; // [esp+110h] [ebp-870h]
  CItem *v69; // [esp+114h] [ebp-86Ch]
  CItem *v70; // [esp+118h] [ebp-868h]
  CItem *v71; // [esp+11Ch] [ebp-864h]
  CItem *v72; // [esp+120h] [ebp-860h]
  CItem *v73; // [esp+124h] [ebp-85Ch]
  CItem *v74; // [esp+128h] [ebp-858h]
  CItem *v75; // [esp+12Ch] [ebp-854h]
  CItem *v76; // [esp+130h] [ebp-850h]
  CItem *v77; // [esp+134h] [ebp-84Ch]
  CItem *v78; // [esp+138h] [ebp-848h]
  CItem *v79; // [esp+13Ch] [ebp-844h]
  CItem *v80; // [esp+140h] [ebp-840h]
  CItem *v81; // [esp+144h] [ebp-83Ch]
  CItem *v82; // [esp+148h] [ebp-838h]
  CItem *v83; // [esp+14Ch] [ebp-834h]
  CItem *v84; // [esp+150h] [ebp-830h]
  CItem *v85; // [esp+154h] [ebp-82Ch]
  CHealingAny *v86; // [esp+158h] [ebp-828h]
  CItem *v87; // [esp+15Ch] [ebp-824h]
  CItem *v88; // [esp+160h] [ebp-820h]
  CItem *v89; // [esp+164h] [ebp-81Ch]
  CItem *v90; // [esp+168h] [ebp-818h]
  CItem *v91; // [esp+16Ch] [ebp-814h]
  CHealing *v92; // [esp+170h] [ebp-810h]
  CHealing *v93; // [esp+174h] [ebp-80Ch]
  CHealing *v94; // [esp+178h] [ebp-808h]
  CHealing *v95; // [esp+17Ch] [ebp-804h]
  CHealing *v96; // [esp+180h] [ebp-800h]
  CItem *v97; // [esp+184h] [ebp-7FCh]
  CItem *v98; // [esp+188h] [ebp-7F8h]
  CItem *v99; // [esp+18Ch] [ebp-7F4h]
  CItem *v100; // [esp+190h] [ebp-7F0h]
  CItem *v101; // [esp+194h] [ebp-7ECh]
  CItem *v102; // [esp+198h] [ebp-7E8h]
  CItem *v103; // [esp+19Ch] [ebp-7E4h]
  CItem *v104; // [esp+1A0h] [ebp-7E0h]
  CFireEruption *v105; // [esp+1A4h] [ebp-7DCh]
  CItem *v106; // [esp+1A8h] [ebp-7D8h]
  CItem *v107; // [esp+1ACh] [ebp-7D4h]
  CItem *v108; // [esp+1B0h] [ebp-7D0h]
  CItem *v109; // [esp+1B4h] [ebp-7CCh]
  CItem *v110; // [esp+1B8h] [ebp-7C8h]
  CItem *v111; // [esp+1BCh] [ebp-7C4h]
  CItem *v112; // [esp+1C0h] [ebp-7C0h]
  CItem *v113; // [esp+1C4h] [ebp-7BCh]
  CItem *v114; // [esp+1C8h] [ebp-7B8h]
  CItem *v115; // [esp+1CCh] [ebp-7B4h]
  CIceStorm *v116; // [esp+1D0h] [ebp-7B0h]
  CItem *v117; // [esp+1D4h] [ebp-7ACh]
  CItem *v118; // [esp+1D8h] [ebp-7A8h]
  CItem *v119; // [esp+1DCh] [ebp-7A4h]
  CItem *v120; // [esp+1E0h] [ebp-7A0h]
  CItem *v121; // [esp+1E4h] [ebp-79Ch]
  CItem *v122; // [esp+1E8h] [ebp-798h]
  CItem *v123; // [esp+1ECh] [ebp-794h]
  CItem *v124; // [esp+1F0h] [ebp-790h]
  CItem *v125; // [esp+1F4h] [ebp-78Ch]
  CItem *v126; // [esp+1F8h] [ebp-788h]
  CItem *v127; // [esp+1FCh] [ebp-784h]
  CItem *v128; // [esp+200h] [ebp-780h]
  CItem *v129; // [esp+204h] [ebp-77Ch]
  CItem *v130; // [esp+208h] [ebp-778h]
  CItem *v131; // [esp+20Ch] [ebp-774h]
  CItem *v132; // [esp+210h] [ebp-770h]
  CItem *v133; // [esp+214h] [ebp-76Ch]
  CItem *v134; // [esp+218h] [ebp-768h]
  CItem *v135; // [esp+21Ch] [ebp-764h]
  CItem *v136; // [esp+220h] [ebp-760h]
  CHealingGreatRe *v137; // [esp+224h] [ebp-75Ch]
  CItem *v138; // [esp+228h] [ebp-758h]
  CItem *v139; // [esp+22Ch] [ebp-754h]
  CItem *v140; // [esp+230h] [ebp-750h]
  CHealingAnyQuick *v141; // [esp+234h] [ebp-74Ch]
  CItem *v142; // [esp+238h] [ebp-748h]
  CItem *v143; // [esp+23Ch] [ebp-744h]
  CItem *v144; // [esp+240h] [ebp-740h]
  CItem *v145; // [esp+244h] [ebp-73Ch]
  CItem *v146; // [esp+248h] [ebp-738h]
  CItem *v147; // [esp+24Ch] [ebp-734h]
  CItem *v148; // [esp+250h] [ebp-730h]
  CItem *v149; // [esp+254h] [ebp-72Ch]
  CItem *v150; // [esp+258h] [ebp-728h]
  CItem *v151; // [esp+25Ch] [ebp-724h]
  char *v152; // [esp+260h] [ebp-720h] BYREF
  CMemory **v153; // [esp+264h] [ebp-71Ch]
  CItem *v154; // [esp+268h] [ebp-718h] BYREF
  char *v155; // [esp+26Ch] [ebp-714h] BYREF
  CMemory **v156; // [esp+270h] [ebp-710h]
  CItem *v157; // [esp+274h] [ebp-70Ch] BYREF
  char *v158; // [esp+278h] [ebp-708h] BYREF
  CMemory **v159; // [esp+27Ch] [ebp-704h]
  CItem *v160; // [esp+280h] [ebp-700h] BYREF
  char *v161; // [esp+284h] [ebp-6FCh] BYREF
  CMemory **v162; // [esp+288h] [ebp-6F8h]
  CItem *v163; // [esp+28Ch] [ebp-6F4h] BYREF
  char *v164; // [esp+290h] [ebp-6F0h] BYREF
  CMemory **v165; // [esp+294h] [ebp-6ECh]
  CItem *v166; // [esp+298h] [ebp-6E8h] BYREF
  char *v167; // [esp+29Ch] [ebp-6E4h] BYREF
  CMemory **v168; // [esp+2A0h] [ebp-6E0h]
  CItem *v169; // [esp+2A4h] [ebp-6DCh] BYREF
  char *v170; // [esp+2A8h] [ebp-6D8h] BYREF
  CMemory **v171; // [esp+2ACh] [ebp-6D4h]
  CItem *v172; // [esp+2B0h] [ebp-6D0h] BYREF
  char *v173; // [esp+2B4h] [ebp-6CCh] BYREF
  CMemory **v174; // [esp+2B8h] [ebp-6C8h]
  CItem *v175; // [esp+2BCh] [ebp-6C4h] BYREF
  char *v176; // [esp+2C0h] [ebp-6C0h] BYREF
  CMemory **v177; // [esp+2C4h] [ebp-6BCh]
  CItem *v178; // [esp+2C8h] [ebp-6B8h] BYREF
  char *v179; // [esp+2CCh] [ebp-6B4h] BYREF
  CMemory **v180; // [esp+2D0h] [ebp-6B0h]
  CItem *v181; // [esp+2D4h] [ebp-6ACh] BYREF
  char *v182; // [esp+2D8h] [ebp-6A8h] BYREF
  CMemory **v183; // [esp+2DCh] [ebp-6A4h]
  CItem *v184; // [esp+2E0h] [ebp-6A0h] BYREF
  char *v185; // [esp+2E4h] [ebp-69Ch] BYREF
  CMemory **v186; // [esp+2E8h] [ebp-698h]
  CItem *v187; // [esp+2ECh] [ebp-694h] BYREF
  char *v188; // [esp+2F0h] [ebp-690h] BYREF
  CMemory **v189; // [esp+2F4h] [ebp-68Ch]
  CItem *v190; // [esp+2F8h] [ebp-688h] BYREF
  char *v191; // [esp+2FCh] [ebp-684h] BYREF
  CMemory **v192; // [esp+300h] [ebp-680h]
  CItem *v193; // [esp+304h] [ebp-67Ch] BYREF
  char *v194; // [esp+308h] [ebp-678h] BYREF
  CMemory **v195; // [esp+30Ch] [ebp-674h]
  CItem *v196; // [esp+310h] [ebp-670h] BYREF
  char *v197; // [esp+314h] [ebp-66Ch] BYREF
  CMemory **v198; // [esp+318h] [ebp-668h]
  CItem *v199; // [esp+31Ch] [ebp-664h] BYREF
  char *v200; // [esp+320h] [ebp-660h] BYREF
  CMemory **v201; // [esp+324h] [ebp-65Ch]
  CItem *v202; // [esp+328h] [ebp-658h] BYREF
  char *v203; // [esp+32Ch] [ebp-654h] BYREF
  CMemory **v204; // [esp+330h] [ebp-650h]
  CItem *v205; // [esp+334h] [ebp-64Ch] BYREF
  char *v206; // [esp+338h] [ebp-648h] BYREF
  CMemory **v207; // [esp+33Ch] [ebp-644h]
  CItem *v208; // [esp+340h] [ebp-640h] BYREF
  char *v209; // [esp+344h] [ebp-63Ch] BYREF
  CMemory **v210; // [esp+348h] [ebp-638h]
  CItem *v211; // [esp+34Ch] [ebp-634h] BYREF
  char *v212; // [esp+350h] [ebp-630h] BYREF
  CMemory **v213; // [esp+354h] [ebp-62Ch]
  CItem *v214; // [esp+358h] [ebp-628h] BYREF
  char *v215; // [esp+35Ch] [ebp-624h] BYREF
  CMemory **v216; // [esp+360h] [ebp-620h]
  CItem *v217; // [esp+364h] [ebp-61Ch] BYREF
  char *v218; // [esp+368h] [ebp-618h] BYREF
  CMemory **v219; // [esp+36Ch] [ebp-614h]
  CItem *v220; // [esp+370h] [ebp-610h] BYREF
  char *v221; // [esp+374h] [ebp-60Ch] BYREF
  CMemory **v222; // [esp+378h] [ebp-608h]
  CItem *v223; // [esp+37Ch] [ebp-604h] BYREF
  char *v224; // [esp+380h] [ebp-600h] BYREF
  CMemory **v225; // [esp+384h] [ebp-5FCh]
  CItem *v226; // [esp+388h] [ebp-5F8h] BYREF
  char *v227; // [esp+38Ch] [ebp-5F4h] BYREF
  CMemory **v228; // [esp+390h] [ebp-5F0h]
  CItem *v229; // [esp+394h] [ebp-5ECh] BYREF
  char *v230; // [esp+398h] [ebp-5E8h] BYREF
  CMemory **v231; // [esp+39Ch] [ebp-5E4h]
  CItem *v232; // [esp+3A0h] [ebp-5E0h] BYREF
  char *v233; // [esp+3A4h] [ebp-5DCh] BYREF
  CMemory **v234; // [esp+3A8h] [ebp-5D8h]
  CItem *v235; // [esp+3ACh] [ebp-5D4h] BYREF
  char *v236; // [esp+3B0h] [ebp-5D0h] BYREF
  CMemory **v237; // [esp+3B4h] [ebp-5CCh]
  CItem *v238; // [esp+3B8h] [ebp-5C8h] BYREF
  char *v239; // [esp+3BCh] [ebp-5C4h] BYREF
  CMemory **v240; // [esp+3C0h] [ebp-5C0h]
  CItem *v241; // [esp+3C4h] [ebp-5BCh] BYREF
  char *v242; // [esp+3C8h] [ebp-5B8h] BYREF
  CMemory **v243; // [esp+3CCh] [ebp-5B4h]
  CItem *v244; // [esp+3D0h] [ebp-5B0h] BYREF
  char *v245; // [esp+3D4h] [ebp-5ACh] BYREF
  CMemory **v246; // [esp+3D8h] [ebp-5A8h]
  CItem *v247; // [esp+3DCh] [ebp-5A4h] BYREF
  char *v248; // [esp+3E0h] [ebp-5A0h] BYREF
  CMemory **v249; // [esp+3E4h] [ebp-59Ch]
  CItem *v250; // [esp+3E8h] [ebp-598h] BYREF
  char *v251; // [esp+3ECh] [ebp-594h] BYREF
  CMemory **v252; // [esp+3F0h] [ebp-590h]
  CItem *v253; // [esp+3F4h] [ebp-58Ch] BYREF
  char *v254; // [esp+3F8h] [ebp-588h] BYREF
  CMemory **v255; // [esp+3FCh] [ebp-584h]
  CItem *v256; // [esp+400h] [ebp-580h] BYREF
  char *v257; // [esp+404h] [ebp-57Ch] BYREF
  CMemory **v258; // [esp+408h] [ebp-578h]
  CItem *v259; // [esp+40Ch] [ebp-574h] BYREF
  char *v260; // [esp+410h] [ebp-570h] BYREF
  CMemory **v261; // [esp+414h] [ebp-56Ch]
  CItem *v262; // [esp+418h] [ebp-568h] BYREF
  char *v263; // [esp+41Ch] [ebp-564h] BYREF
  CMemory **v264; // [esp+420h] [ebp-560h]
  CItem *v265; // [esp+424h] [ebp-55Ch] BYREF
  char *v266; // [esp+428h] [ebp-558h] BYREF
  CMemory **v267; // [esp+42Ch] [ebp-554h]
  CItem *v268; // [esp+430h] [ebp-550h] BYREF
  char *v269; // [esp+434h] [ebp-54Ch] BYREF
  CMemory **v270; // [esp+438h] [ebp-548h]
  CItem *v271; // [esp+43Ch] [ebp-544h] BYREF
  char *v272; // [esp+440h] [ebp-540h] BYREF
  CMemory **v273; // [esp+444h] [ebp-53Ch]
  CItem *v274; // [esp+448h] [ebp-538h] BYREF
  char *v275; // [esp+44Ch] [ebp-534h] BYREF
  CMemory **v276; // [esp+450h] [ebp-530h]
  CItem *v277; // [esp+454h] [ebp-52Ch] BYREF
  char *v278; // [esp+458h] [ebp-528h] BYREF
  CMemory **v279; // [esp+45Ch] [ebp-524h]
  CItem *v280; // [esp+460h] [ebp-520h] BYREF
  char *v281; // [esp+464h] [ebp-51Ch] BYREF
  CMemory **v282; // [esp+468h] [ebp-518h]
  CItem *v283; // [esp+46Ch] [ebp-514h] BYREF
  char *v284; // [esp+470h] [ebp-510h] BYREF
  CMemory **v285; // [esp+474h] [ebp-50Ch]
  CItem *v286; // [esp+478h] [ebp-508h] BYREF
  char *v287; // [esp+47Ch] [ebp-504h] BYREF
  CMemory **v288; // [esp+480h] [ebp-500h]
  CItem *v289; // [esp+484h] [ebp-4FCh] BYREF
  char *v290; // [esp+488h] [ebp-4F8h] BYREF
  CMemory **v291; // [esp+48Ch] [ebp-4F4h]
  CItem *v292; // [esp+490h] [ebp-4F0h] BYREF
  char *v293; // [esp+494h] [ebp-4ECh] BYREF
  CMemory **v294; // [esp+498h] [ebp-4E8h]
  CItem *v295; // [esp+49Ch] [ebp-4E4h] BYREF
  char *v296; // [esp+4A0h] [ebp-4E0h] BYREF
  CMemory **v297; // [esp+4A4h] [ebp-4DCh]
  CItem *v298; // [esp+4A8h] [ebp-4D8h] BYREF
  char *v299; // [esp+4ACh] [ebp-4D4h] BYREF
  CMemory **v300; // [esp+4B0h] [ebp-4D0h]
  CItem *v301; // [esp+4B4h] [ebp-4CCh] BYREF
  char *v302; // [esp+4B8h] [ebp-4C8h] BYREF
  CMemory **v303; // [esp+4BCh] [ebp-4C4h]
  CItem *v304; // [esp+4C0h] [ebp-4C0h] BYREF
  char *v305; // [esp+4C4h] [ebp-4BCh] BYREF
  CMemory **v306; // [esp+4C8h] [ebp-4B8h]
  CItem *v307; // [esp+4CCh] [ebp-4B4h] BYREF
  char *v308; // [esp+4D0h] [ebp-4B0h] BYREF
  CMemory **v309; // [esp+4D4h] [ebp-4ACh]
  CItem *v310; // [esp+4D8h] [ebp-4A8h] BYREF
  char *v311; // [esp+4DCh] [ebp-4A4h] BYREF
  CMemory **v312; // [esp+4E0h] [ebp-4A0h]
  CItem *v313; // [esp+4E4h] [ebp-49Ch] BYREF
  char *v314; // [esp+4E8h] [ebp-498h] BYREF
  CMemory **v315; // [esp+4ECh] [ebp-494h]
  CItem *v316; // [esp+4F0h] [ebp-490h] BYREF
  char *v317; // [esp+4F4h] [ebp-48Ch] BYREF
  CMemory **v318; // [esp+4F8h] [ebp-488h]
  CItem *v319; // [esp+4FCh] [ebp-484h] BYREF
  char *v320; // [esp+500h] [ebp-480h] BYREF
  CMemory **v321; // [esp+504h] [ebp-47Ch]
  CItem *v322; // [esp+508h] [ebp-478h] BYREF
  char *v323; // [esp+50Ch] [ebp-474h] BYREF
  CMemory **v324; // [esp+510h] [ebp-470h]
  CItem *v325; // [esp+514h] [ebp-46Ch] BYREF
  char *v326; // [esp+518h] [ebp-468h] BYREF
  CMemory **v327; // [esp+51Ch] [ebp-464h]
  CItem *v328; // [esp+520h] [ebp-460h] BYREF
  char *v329; // [esp+524h] [ebp-45Ch] BYREF
  CMemory **v330; // [esp+528h] [ebp-458h]
  CItem *v331; // [esp+52Ch] [ebp-454h] BYREF
  char *v332; // [esp+530h] [ebp-450h] BYREF
  CMemory **v333; // [esp+534h] [ebp-44Ch]
  CItem *v334; // [esp+538h] [ebp-448h] BYREF
  char *v335; // [esp+53Ch] [ebp-444h] BYREF
  CMemory **v336; // [esp+540h] [ebp-440h]
  CItem *v337; // [esp+544h] [ebp-43Ch] BYREF
  char *v338; // [esp+548h] [ebp-438h] BYREF
  CMemory **v339; // [esp+54Ch] [ebp-434h]
  CItem *v340; // [esp+550h] [ebp-430h] BYREF
  char *v341; // [esp+554h] [ebp-42Ch] BYREF
  CMemory **v342; // [esp+558h] [ebp-428h]
  CItem *v343; // [esp+55Ch] [ebp-424h] BYREF
  char *v344; // [esp+560h] [ebp-420h] BYREF
  CMemory **v345; // [esp+564h] [ebp-41Ch]
  CItem *v346; // [esp+568h] [ebp-418h] BYREF
  char *v347; // [esp+56Ch] [ebp-414h] BYREF
  CMemory **v348; // [esp+570h] [ebp-410h]
  CItem *v349; // [esp+574h] [ebp-40Ch] BYREF
  char *v350; // [esp+578h] [ebp-408h] BYREF
  CMemory **v351; // [esp+57Ch] [ebp-404h]
  CItem *v352; // [esp+580h] [ebp-400h] BYREF
  char *v353; // [esp+584h] [ebp-3FCh] BYREF
  CMemory **v354; // [esp+588h] [ebp-3F8h]
  CItem *v355; // [esp+58Ch] [ebp-3F4h] BYREF
  char *v356; // [esp+590h] [ebp-3F0h] BYREF
  CMemory **v357; // [esp+594h] [ebp-3ECh]
  CItem *v358; // [esp+598h] [ebp-3E8h] BYREF
  char *v359; // [esp+59Ch] [ebp-3E4h] BYREF
  CMemory **v360; // [esp+5A0h] [ebp-3E0h]
  CItem *v361; // [esp+5A4h] [ebp-3DCh] BYREF
  char *v362; // [esp+5A8h] [ebp-3D8h] BYREF
  CMemory **v363; // [esp+5ACh] [ebp-3D4h]
  CItem *v364; // [esp+5B0h] [ebp-3D0h] BYREF
  char *v365; // [esp+5B4h] [ebp-3CCh] BYREF
  CMemory **v366; // [esp+5B8h] [ebp-3C8h]
  CItem *v367; // [esp+5BCh] [ebp-3C4h] BYREF
  char *v368; // [esp+5C0h] [ebp-3C0h] BYREF
  CMemory **v369; // [esp+5C4h] [ebp-3BCh]
  CItem *v370; // [esp+5C8h] [ebp-3B8h] BYREF
  char *v371; // [esp+5CCh] [ebp-3B4h] BYREF
  CMemory **v372; // [esp+5D0h] [ebp-3B0h]
  CItem *v373; // [esp+5D4h] [ebp-3ACh] BYREF
  char *v374; // [esp+5D8h] [ebp-3A8h] BYREF
  CMemory **v375; // [esp+5DCh] [ebp-3A4h]
  CItem *v376; // [esp+5E0h] [ebp-3A0h] BYREF
  char *v377; // [esp+5E4h] [ebp-39Ch] BYREF
  CMemory **v378; // [esp+5E8h] [ebp-398h]
  CItem *v379; // [esp+5ECh] [ebp-394h] BYREF
  char *v380; // [esp+5F0h] [ebp-390h] BYREF
  CMemory **v381; // [esp+5F4h] [ebp-38Ch]
  CItem *v382; // [esp+5F8h] [ebp-388h] BYREF
  char *v383; // [esp+5FCh] [ebp-384h] BYREF
  CMemory **v384; // [esp+600h] [ebp-380h]
  CItem *v385; // [esp+604h] [ebp-37Ch] BYREF
  char *v386; // [esp+608h] [ebp-378h] BYREF
  CMemory **v387; // [esp+60Ch] [ebp-374h]
  CItem *v388; // [esp+610h] [ebp-370h] BYREF
  char *v389; // [esp+614h] [ebp-36Ch] BYREF
  CMemory **v390; // [esp+618h] [ebp-368h]
  CItem *v391; // [esp+61Ch] [ebp-364h] BYREF
  char *v392; // [esp+620h] [ebp-360h] BYREF
  CMemory **v393; // [esp+624h] [ebp-35Ch]
  CItem *v394; // [esp+628h] [ebp-358h] BYREF
  char *v395; // [esp+62Ch] [ebp-354h] BYREF
  CMemory **v396; // [esp+630h] [ebp-350h]
  CItem *v397; // [esp+634h] [ebp-34Ch] BYREF
  char *v398; // [esp+638h] [ebp-348h] BYREF
  CMemory **v399; // [esp+63Ch] [ebp-344h]
  CItem *v400; // [esp+640h] [ebp-340h] BYREF
  char *v401; // [esp+644h] [ebp-33Ch] BYREF
  CMemory **v402; // [esp+648h] [ebp-338h]
  CItem *v403; // [esp+64Ch] [ebp-334h] BYREF
  char *v404; // [esp+650h] [ebp-330h] BYREF
  CMemory **v405; // [esp+654h] [ebp-32Ch]
  CItem *v406; // [esp+658h] [ebp-328h] BYREF
  char *v407; // [esp+65Ch] [ebp-324h] BYREF
  CMemory **v408; // [esp+660h] [ebp-320h]
  CItem *v409; // [esp+664h] [ebp-31Ch] BYREF
  char *v410; // [esp+668h] [ebp-318h] BYREF
  CMemory **v411; // [esp+66Ch] [ebp-314h]
  CItem *v412; // [esp+670h] [ebp-310h] BYREF
  char *v413; // [esp+674h] [ebp-30Ch] BYREF
  CMemory **v414; // [esp+678h] [ebp-308h]
  CItem *v415; // [esp+67Ch] [ebp-304h] BYREF
  char *v416; // [esp+680h] [ebp-300h] BYREF
  CMemory **v417; // [esp+684h] [ebp-2FCh]
  CItem *v418; // [esp+688h] [ebp-2F8h] BYREF
  char *v419; // [esp+68Ch] [ebp-2F4h] BYREF
  CMemory **v420; // [esp+690h] [ebp-2F0h]
  CItem *v421; // [esp+694h] [ebp-2ECh] BYREF
  char *v422; // [esp+698h] [ebp-2E8h] BYREF
  CMemory **v423; // [esp+69Ch] [ebp-2E4h]
  CItem *v424; // [esp+6A0h] [ebp-2E0h] BYREF
  char *v425; // [esp+6A4h] [ebp-2DCh] BYREF
  CMemory **v426; // [esp+6A8h] [ebp-2D8h]
  CItem *v427; // [esp+6ACh] [ebp-2D4h] BYREF
  char *v428; // [esp+6B0h] [ebp-2D0h] BYREF
  CMemory **v429; // [esp+6B4h] [ebp-2CCh]
  CItem *v430; // [esp+6B8h] [ebp-2C8h] BYREF
  char *v431; // [esp+6BCh] [ebp-2C4h] BYREF
  CMemory **v432; // [esp+6C0h] [ebp-2C0h]
  CItem *v433; // [esp+6C4h] [ebp-2BCh] BYREF
  char *v434; // [esp+6C8h] [ebp-2B8h] BYREF
  CMemory **v435; // [esp+6CCh] [ebp-2B4h]
  CItem *v436; // [esp+6D0h] [ebp-2B0h] BYREF
  char *v437; // [esp+6D4h] [ebp-2ACh] BYREF
  CMemory **v438; // [esp+6D8h] [ebp-2A8h]
  CItem *v439; // [esp+6DCh] [ebp-2A4h] BYREF
  char *v440; // [esp+6E0h] [ebp-2A0h] BYREF
  CMemory **v441; // [esp+6E4h] [ebp-29Ch]
  CItem *v442; // [esp+6E8h] [ebp-298h] BYREF
  char *v443; // [esp+6ECh] [ebp-294h] BYREF
  CMemory **v444; // [esp+6F0h] [ebp-290h]
  CItem *v445; // [esp+6F4h] [ebp-28Ch] BYREF
  char *v446; // [esp+6F8h] [ebp-288h] BYREF
  CMemory **v447; // [esp+6FCh] [ebp-284h]
  CItem *v448; // [esp+700h] [ebp-280h] BYREF
  char *v449; // [esp+704h] [ebp-27Ch] BYREF
  CMemory **v450; // [esp+708h] [ebp-278h]
  CItem *v451; // [esp+70Ch] [ebp-274h] BYREF
  char *v452; // [esp+710h] [ebp-270h] BYREF
  CMemory **v453; // [esp+714h] [ebp-26Ch]
  CItem *v454; // [esp+718h] [ebp-268h] BYREF
  char *v455; // [esp+71Ch] [ebp-264h] BYREF
  CMemory **v456; // [esp+720h] [ebp-260h]
  CItem *v457; // [esp+724h] [ebp-25Ch] BYREF
  char *v458; // [esp+728h] [ebp-258h] BYREF
  CMemory **v459; // [esp+72Ch] [ebp-254h]
  CItem *v460; // [esp+730h] [ebp-250h] BYREF
  char *v461; // [esp+734h] [ebp-24Ch] BYREF
  CMemory **v462; // [esp+738h] [ebp-248h]
  CItem *v463; // [esp+73Ch] [ebp-244h] BYREF
  char *v464; // [esp+740h] [ebp-240h] BYREF
  CMemory **v465; // [esp+744h] [ebp-23Ch]
  CItem *v466; // [esp+748h] [ebp-238h] BYREF
  char *v467; // [esp+74Ch] [ebp-234h] BYREF
  CMemory **v468; // [esp+750h] [ebp-230h]
  CItem *v469; // [esp+754h] [ebp-22Ch] BYREF
  char *v470; // [esp+758h] [ebp-228h] BYREF
  CMemory **v471; // [esp+75Ch] [ebp-224h]
  CItem *v472; // [esp+760h] [ebp-220h] BYREF
  char *v473; // [esp+764h] [ebp-21Ch] BYREF
  CMemory **v474; // [esp+768h] [ebp-218h]
  CItem *v475; // [esp+76Ch] [ebp-214h] BYREF
  char *v476; // [esp+770h] [ebp-210h] BYREF
  CMemory **v477; // [esp+774h] [ebp-20Ch]
  CItem *v478; // [esp+778h] [ebp-208h] BYREF
  char *v479; // [esp+77Ch] [ebp-204h] BYREF
  CMemory **v480; // [esp+780h] [ebp-200h]
  CItem *v481; // [esp+784h] [ebp-1FCh] BYREF
  char *v482; // [esp+788h] [ebp-1F8h] BYREF
  CMemory **v483; // [esp+78Ch] [ebp-1F4h]
  CItem *v484; // [esp+790h] [ebp-1F0h] BYREF
  char *v485; // [esp+794h] [ebp-1ECh] BYREF
  CMemory **v486; // [esp+798h] [ebp-1E8h]
  CItem *v487; // [esp+79Ch] [ebp-1E4h] BYREF
  char *v488; // [esp+7A0h] [ebp-1E0h] BYREF
  CMemory **v489; // [esp+7A4h] [ebp-1DCh]
  CItem *v490; // [esp+7A8h] [ebp-1D8h] BYREF
  char *v491; // [esp+7ACh] [ebp-1D4h] BYREF
  CMemory **v492; // [esp+7B0h] [ebp-1D0h]
  CItem *v493; // [esp+7B4h] [ebp-1CCh] BYREF
  char *v494; // [esp+7B8h] [ebp-1C8h] BYREF
  CMemory **v495; // [esp+7BCh] [ebp-1C4h]
  CItem *v496; // [esp+7C0h] [ebp-1C0h] BYREF
  char *v497; // [esp+7C4h] [ebp-1BCh] BYREF
  CMemory **v498; // [esp+7C8h] [ebp-1B8h]
  CItem *v499; // [esp+7CCh] [ebp-1B4h] BYREF
  char *v500; // [esp+7D0h] [ebp-1B0h] BYREF
  CMemory **v501; // [esp+7D4h] [ebp-1ACh]
  CItem *v502; // [esp+7D8h] [ebp-1A8h] BYREF
  char *v503; // [esp+7DCh] [ebp-1A4h] BYREF
  CMemory **v504; // [esp+7E0h] [ebp-1A0h]
  CItem *v505; // [esp+7E4h] [ebp-19Ch] BYREF
  char *v506; // [esp+7E8h] [ebp-198h] BYREF
  CMemory **v507; // [esp+7ECh] [ebp-194h]
  CItem *v508; // [esp+7F0h] [ebp-190h] BYREF
  char *v509; // [esp+7F4h] [ebp-18Ch] BYREF
  CMemory **v510; // [esp+7F8h] [ebp-188h]
  CItem *v511; // [esp+7FCh] [ebp-184h] BYREF
  char *v512; // [esp+800h] [ebp-180h] BYREF
  CMemory **v513; // [esp+804h] [ebp-17Ch]
  CItem *v514; // [esp+808h] [ebp-178h] BYREF
  char *v515; // [esp+80Ch] [ebp-174h] BYREF
  CMemory **v516; // [esp+810h] [ebp-170h]
  CItem *v517; // [esp+814h] [ebp-16Ch] BYREF
  char *v518; // [esp+818h] [ebp-168h] BYREF
  CMemory **v519; // [esp+81Ch] [ebp-164h]
  CItem *v520; // [esp+820h] [ebp-160h] BYREF
  char *v521; // [esp+824h] [ebp-15Ch] BYREF
  CMemory **v522; // [esp+828h] [ebp-158h]
  CItem *v523; // [esp+82Ch] [ebp-154h] BYREF
  char *v524; // [esp+830h] [ebp-150h] BYREF
  CMemory **v525; // [esp+834h] [ebp-14Ch]
  CItem *v526; // [esp+838h] [ebp-148h] BYREF
  char *v527; // [esp+83Ch] [ebp-144h] BYREF
  CMemory **v528; // [esp+840h] [ebp-140h]
  CItem *v529; // [esp+844h] [ebp-13Ch] BYREF
  char *v530; // [esp+848h] [ebp-138h] BYREF
  CMemory **v531; // [esp+84Ch] [ebp-134h]
  CItem *v532; // [esp+850h] [ebp-130h] BYREF
  char *v533; // [esp+854h] [ebp-12Ch] BYREF
  CMemory **v534; // [esp+858h] [ebp-128h]
  CItem *v535; // [esp+85Ch] [ebp-124h] BYREF
  char *v536; // [esp+860h] [ebp-120h] BYREF
  CMemory **v537; // [esp+864h] [ebp-11Ch]
  CItem *v538; // [esp+868h] [ebp-118h] BYREF
  char *v539; // [esp+86Ch] [ebp-114h] BYREF
  CMemory **v540; // [esp+870h] [ebp-110h]
  CItem *v541; // [esp+874h] [ebp-10Ch] BYREF
  char *v542; // [esp+878h] [ebp-108h] BYREF
  CMemory **v543; // [esp+87Ch] [ebp-104h]
  CItem *v544; // [esp+880h] [ebp-100h] BYREF
  char *v545; // [esp+884h] [ebp-FCh] BYREF
  CMemory **v546; // [esp+888h] [ebp-F8h]
  CItem *v547; // [esp+88Ch] [ebp-F4h] BYREF
  char *v548; // [esp+890h] [ebp-F0h] BYREF
  CMemory **v549; // [esp+894h] [ebp-ECh]
  CItem *v550; // [esp+898h] [ebp-E8h] BYREF
  char *v551; // [esp+89Ch] [ebp-E4h] BYREF
  CMemory **v552; // [esp+8A0h] [ebp-E0h]
  CItem *v553; // [esp+8A4h] [ebp-DCh] BYREF
  char *v554; // [esp+8A8h] [ebp-D8h] BYREF
  CMemory **v555; // [esp+8ACh] [ebp-D4h]
  CItem *v556; // [esp+8B0h] [ebp-D0h] BYREF
  char *v557; // [esp+8B4h] [ebp-CCh] BYREF
  CMemory **v558; // [esp+8B8h] [ebp-C8h]
  CItem *v559; // [esp+8BCh] [ebp-C4h] BYREF
  char *v560; // [esp+8C0h] [ebp-C0h] BYREF
  CMemory **v561; // [esp+8C4h] [ebp-BCh]
  CItem *v562; // [esp+8C8h] [ebp-B8h] BYREF
  char *v563; // [esp+8CCh] [ebp-B4h] BYREF
  CMemory **v564; // [esp+8D0h] [ebp-B0h]
  CItem *v565; // [esp+8D4h] [ebp-ACh] BYREF
  char *v566; // [esp+8D8h] [ebp-A8h] BYREF
  CMemory **v567; // [esp+8DCh] [ebp-A4h]
  CItem *v568; // [esp+8E0h] [ebp-A0h] BYREF
  char *v569; // [esp+8E4h] [ebp-9Ch] BYREF
  CMemory **v570; // [esp+8E8h] [ebp-98h]
  CItem *v571; // [esp+8ECh] [ebp-94h] BYREF
  char *v572; // [esp+8F0h] [ebp-90h] BYREF
  CMemory **v573; // [esp+8F4h] [ebp-8Ch]
  CItem *v574; // [esp+8F8h] [ebp-88h] BYREF
  char *v575; // [esp+8FCh] [ebp-84h] BYREF
  CMemory **v576; // [esp+900h] [ebp-80h]
  CItem *v577; // [esp+904h] [ebp-7Ch] BYREF
  char *v578; // [esp+908h] [ebp-78h] BYREF
  CMemory **v579; // [esp+90Ch] [ebp-74h]
  CItem *v580; // [esp+910h] [ebp-70h] BYREF
  char *v581; // [esp+914h] [ebp-6Ch] BYREF
  CMemory **v582; // [esp+918h] [ebp-68h]
  CItem *v583; // [esp+91Ch] [ebp-64h] BYREF
  char *v584; // [esp+920h] [ebp-60h] BYREF
  CMemory **v585; // [esp+924h] [ebp-5Ch]
  CItem *v586; // [esp+928h] [ebp-58h] BYREF
  char *v587; // [esp+92Ch] [ebp-54h] BYREF
  CMemory **v588; // [esp+930h] [ebp-50h]
  CItem *v589; // [esp+934h] [ebp-4Ch] BYREF
  char *v590; // [esp+938h] [ebp-48h] BYREF
  CMemory **v591; // [esp+93Ch] [ebp-44h]
  CItem *v592; // [esp+940h] [ebp-40h] BYREF
  char *v593; // [esp+944h] [ebp-3Ch] BYREF
  CMemory **v594; // [esp+948h] [ebp-38h]
  CItem *v595; // [esp+94Ch] [ebp-34h] BYREF
  char *v596; // [esp+950h] [ebp-30h] BYREF
  CMemory **v597; // [esp+954h] [ebp-2Ch]
  CItem *v598; // [esp+958h] [ebp-28h] BYREF
  char *v599; // [esp+95Ch] [ebp-24h] BYREF
  CMemory **v600; // [esp+960h] [ebp-20h]
  CItem *v601; // [esp+964h] [ebp-1Ch] BYREF
  char *v602; // [esp+968h] [ebp-18h] BYREF
  CMemory **v603; // [esp+96Ch] [ebp-14h]
  CItem *v604; // [esp+970h] [ebp-10h] BYREF
  char *_Val1; // [esp+974h] [ebp-Ch] BYREF
  CMemory **v606; // [esp+978h] [ebp-8h]
  CItem *_Val2; // [esp+97Ch] [ebp-4h] BYREF

  v606 = operator_new(0x4Cu);
  if ( v606 )
    v151 = (CItem *)sub_48DCD0(v606);
  else
    v151 = 0;
  _Val2 = v151;
  _Val1 = 0;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)dword_4E21A8,
    (const char *const *)&_Val1,
    &_Val2);
  v603 = operator_new(0x4Cu);
  if ( v603 )
    v150 = (CItem *)sub_48DCF0(v603);
  else
    v150 = 0;
  v604 = v150;
  v602 = (char *)1;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21B0,
    (const char *const *)&v602,
    &v604);
  v600 = operator_new(0x4Cu);
  if ( v600 )
    v149 = (CItem *)sub_48DD10(v600);
  else
    v149 = 0;
  v601 = v149;
  v599 = (char *)2;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21B8,
    (const char *const *)&v599,
    &v601);
  v597 = operator_new(0x4Cu);
  if ( v597 )
    v148 = (CItem *)sub_48DDD0(v597);
  else
    v148 = 0;
  v598 = v148;
  v596 = (char *)3;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21C0,
    (const char *const *)&v596,
    &v598);
  v594 = operator_new(0x4Cu);
  if ( v594 )
    v147 = (CItem *)sub_48DEC0(v594);
  else
    v147 = 0;
  v595 = v147;
  v593 = (char *)4;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21C8,
    (const char *const *)&v593,
    &v595);
  v591 = operator_new(0x4Cu);
  if ( v591 )
    v146 = (CItem *)sub_48E030(v591);
  else
    v146 = 0;
  v592 = v146;
  v590 = (char *)5;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21D0,
    (const char *const *)&v590,
    &v592);
  v588 = operator_new(0x4Cu);
  if ( v588 )
    v145 = (CItem *)CIceRequiem::GetAddValueType(v588);
  else
    v145 = 0;
  v589 = v145;
  v587 = (char *)6;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21D8,
    (const char *const *)&v587,
    &v589);
  v585 = operator_new(0x4Cu);
  if ( v585 )
    v144 = (CItem *)sub_48E080(v585);
  else
    v144 = 0;
  v586 = v144;
  v584 = (char *)7;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21E0,
    (const char *const *)&v584,
    &v586);
  v582 = operator_new(0x4Cu);
  if ( v582 )
    v143 = (CItem *)sub_48DF20(v582);
  else
    v143 = 0;
  v583 = v143;
  v581 = (char *)8;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21E8,
    (const char *const *)&v581,
    &v583);
  v579 = operator_new(0x4Cu);
  if ( v579 )
    v142 = (CItem *)CUpConCen::CUpConCen(v579);
  else
    v142 = 0;
  v580 = v142;
  v578 = (char *)9;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21F0,
    (const char *const *)&v578,
    &v580);
  v576 = operator_new(0x4Cu);
  if ( v576 )
    v141 = CHealingAnyQuick::CHealingAnyQuick((CHealingAnyQuick *)v576);
  else
    v141 = 0;
  v577 = v141;
  v575 = (char *)10;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E21F8,
    (const char *const *)&v575,
    &v577);
  v573 = operator_new(0x4Cu);
  if ( v573 )
    v140 = (CItem *)sub_48E910(v573);
  else
    v140 = 0;
  v574 = v140;
  v572 = (char *)11;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2200,
    (const char *const *)&v572,
    &v574);
  v570 = operator_new(0x4Cu);
  if ( v570 )
    v139 = (CItem *)sub_48E930(v570);
  else
    v139 = 0;
  v571 = v139;
  v569 = (char *)12;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2208,
    (const char *const *)&v569,
    &v571);
  v567 = operator_new(0x4Cu);
  if ( v567 )
    v138 = (CItem *)CPullSwing::GetSpendMP(v567);
  else
    v138 = 0;
  v568 = v138;
  v566 = (char *)13;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2210,
    (const char *const *)&v566,
    &v568);
  v564 = operator_new(0x4Cu);
  if ( v564 )
    v137 = CHealingGreatRe::CHealingGreatRe((CHealingGreatRe *)v564);
  else
    v137 = 0;
  v565 = v137;
  v563 = (char *)14;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2218,
    (const char *const *)&v563,
    &v565);
  v561 = operator_new(0x4Cu);
  if ( v561 )
    v136 = CUpFatal::CUpFatal((CUpFatal *)v561);
  else
    v136 = 0;
  v562 = v136;
  v560 = (char *)15;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2220,
    (const char *const *)&v560,
    &v562);
  v558 = operator_new(0x4Cu);
  if ( v558 )
    v135 = (CItem *)CThunder::GetHit(v558);
  else
    v135 = 0;
  v559 = v135;
  v557 = (char *)16;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2228,
    (const char *const *)&v557,
    &v559);
  v555 = operator_new(0x4Cu);
  if ( v555 )
    v134 = (CItem *)CShot::CShot(v555);
  else
    v134 = 0;
  v556 = v134;
  v554 = (char *)17;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2230,
    (const char *const *)&v554,
    &v556);
  v552 = operator_new(0x4Cu);
  if ( v552 )
    v133 = CRevival::CRevival((CRevival *)v552);
  else
    v133 = 0;
  v553 = v133;
  v551 = (char *)18;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2238,
    (const char *const *)&v551,
    &v553);
  v549 = operator_new(0x4Cu);
  if ( v549 )
    v132 = (CItem *)sub_48F4A0(v549);
  else
    v132 = 0;
  v550 = v132;
  v548 = (char *)19;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2240,
    (const char *const *)&v548,
    &v550);
  v546 = operator_new(0x4Cu);
  if ( v546 )
    v131 = (CItem *)sub_48EA50(v546);
  else
    v131 = 0;
  v547 = v131;
  v545 = (char *)20;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2248,
    (const char *const *)&v545,
    &v547);
  v543 = operator_new(0x4Cu);
  if ( v543 )
    v130 = CUpEvade::CUpEvade((CUpEvade *)v543);
  else
    v130 = 0;
  v544 = v130;
  v542 = (char *)21;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2250,
    (const char *const *)&v542,
    &v544);
  v540 = operator_new(0x4Cu);
  if ( v540 )
    v129 = (CItem *)CShot::GetHostility(v540);
  else
    v129 = 0;
  v541 = v129;
  v539 = (char *)22;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2258,
    (const char *const *)&v539,
    &v541);
  v537 = operator_new(0x4Cu);
  if ( v537 )
    v128 = (CItem *)sub_48F4E0(v537);
  else
    v128 = 0;
  v538 = v128;
  v536 = (char *)23;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2260,
    (const char *const *)&v536,
    &v538);
  v534 = operator_new(0x4Cu);
  if ( v534 )
    v127 = (CItem *)sub_48F360(v534);
  else
    v127 = 0;
  v535 = v127;
  v533 = (char *)24;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2268,
    (const char *const *)&v533,
    &v535);
  v531 = operator_new(0x4Cu);
  if ( v531 )
    v126 = (CItem *)sub_48DD70(v531);
  else
    v126 = 0;
  v532 = v126;
  v530 = (char *)25;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2270,
    (const char *const *)&v530,
    &v532);
  v528 = operator_new(0x4Cu);
  if ( v528 )
    v125 = (CItem *)sub_48EFD0(v528);
  else
    v125 = 0;
  v529 = v125;
  v527 = (char *)26;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2278,
    (const char *const *)&v527,
    &v529);
  v525 = operator_new(0x4Cu);
  if ( v525 )
    v124 = (CItem *)sub_48F500(v525);
  else
    v124 = 0;
  v526 = v124;
  v524 = (char *)27;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2280,
    (const char *const *)&v524,
    &v526);
  v522 = operator_new(0x4Cu);
  if ( v522 )
    v123 = (CItem *)sub_48F520(v522);
  else
    v123 = 0;
  v523 = v123;
  v521 = (char *)28;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2288,
    (const char *const *)&v521,
    &v523);
  v519 = operator_new(0x4Cu);
  if ( v519 )
    v122 = (CItem *)sub_48F540(v519);
  else
    v122 = 0;
  v520 = v122;
  v518 = (char *)29;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2290,
    (const char *const *)&v518,
    &v520);
  v516 = operator_new(0x4Cu);
  if ( v516 )
    v121 = CMeditation::CMeditation((CMeditation *)v516);
  else
    v121 = 0;
  v517 = v121;
  v515 = (char *)30;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2298,
    (const char *const *)&v515,
    &v517);
  v513 = operator_new(0x4Cu);
  if ( v513 )
    v120 = (CItem *)sub_48F560(v513);
  else
    v120 = 0;
  v514 = v120;
  v512 = (char *)31;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22A0,
    (const char *const *)&v512,
    &v514);
  v510 = operator_new(0x4Cu);
  if ( v510 )
    v119 = (CItem *)sub_48F580(v510);
  else
    v119 = 0;
  v511 = v119;
  v509 = (char *)32;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22A8,
    (const char *const *)&v509,
    &v511);
  v507 = operator_new(0x4Cu);
  if ( v507 )
    v118 = (CItem *)sub_48EFF0(v507);
  else
    v118 = 0;
  v508 = v118;
  v506 = (char *)33;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22B0,
    (const char *const *)&v506,
    &v508);
  v504 = operator_new(0x4Cu);
  if ( v504 )
    v117 = CWildAccuracy::CWildAccuracy((CWildAccuracy *)v504);
  else
    v117 = 0;
  v505 = v117;
  v503 = (char *)34;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22B8,
    (const char *const *)&v503,
    &v505);
  v501 = operator_new(0x4Cu);
  if ( v501 )
    v116 = CIceStorm::CIceStorm((CIceStorm *)v501);
  else
    v116 = 0;
  v502 = v116;
  v500 = (char *)35;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22C0,
    (const char *const *)&v500,
    &v502);
  v498 = operator_new(0x4Cu);
  if ( v498 )
    v115 = (CItem *)CExplosiveBurst::GetAddValueType(v498);
  else
    v115 = 0;
  v499 = v115;
  v497 = (char *)36;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22C8,
    (const char *const *)&v497,
    &v499);
  v495 = operator_new(0x4Cu);
  if ( v495 )
    v114 = (CItem *)sub_48DCB0(v495);
  else
    v114 = 0;
  v496 = v114;
  v494 = (char *)62;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22D0,
    (const char *const *)&v494,
    &v496);
  v492 = operator_new(0x4Cu);
  if ( v492 )
    v113 = (CItem *)sub_48EA50(v492);
  else
    v113 = 0;
  v493 = v113;
  v491 = (char *)80;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22D8,
    (const char *const *)&v491,
    &v493);
  v489 = operator_new(0x4Cu);
  if ( v489 )
    v112 = (CItem *)sub_48EA50(v489);
  else
    v112 = 0;
  v490 = v112;
  v488 = (char *)81;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22E0,
    (const char *const *)&v488,
    &v490);
  v486 = operator_new(0x4Cu);
  if ( v486 )
    v111 = (CItem *)sub_48DCD0(v486);
  else
    v111 = 0;
  v487 = v111;
  v485 = (char *)0x10000;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22E8,
    (const char *const *)&v485,
    &v487);
  v483 = operator_new(0x4Cu);
  if ( v483 )
    v110 = (CItem *)sub_48DCF0(v483);
  else
    v110 = 0;
  v484 = v110;
  v482 = (char *)65537;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22F0,
    (const char *const *)&v482,
    &v484);
  v480 = operator_new(0x4Cu);
  if ( v480 )
    v109 = (CItem *)CNegative::GetSpendMP(v480);
  else
    v109 = 0;
  v481 = v109;
  v479 = (char *)65538;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E22F8,
    (const char *const *)&v479,
    &v481);
  v477 = operator_new(0x4Cu);
  if ( v477 )
    v108 = (CItem *)CTranscendental::CTranscendental(v477);
  else
    v108 = 0;
  v478 = v108;
  v476 = (char *)65539;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2300,
    (const char *const *)&v476,
    &v478);
  v474 = operator_new(0x4Cu);
  if ( v474 )
    v107 = (CItem *)CUpperSlash::GetAttack(v474);
  else
    v107 = 0;
  v475 = v107;
  v473 = (char *)65540;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2308,
    (const char *const *)&v473,
    &v475);
  v471 = operator_new(0x4Cu);
  if ( v471 )
    v106 = CUpFatal3::CUpFatal3((CUpFatal3 *)v471);
  else
    v106 = 0;
  v472 = v106;
  v470 = (char *)65541;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2310,
    (const char *const *)&v470,
    &v472);
  v468 = operator_new(0x4Cu);
  if ( v468 )
    v105 = CFireEruption::CFireEruption((CFireEruption *)v468);
  else
    v105 = 0;
  v469 = v105;
  v467 = (char *)65544;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2318,
    (const char *const *)&v467,
    &v469);
  v465 = operator_new(0x4Cu);
  if ( v465 )
    v104 = (CItem *)CUpperSlash::GetHostility(v465);
  else
    v104 = 0;
  v466 = v104;
  v464 = (char *)65545;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2320,
    (const char *const *)&v464,
    &v466);
  v462 = operator_new(0x4Cu);
  if ( v462 )
    v103 = (CItem *)CIce::GetSpendMP(v462);
  else
    v103 = 0;
  v463 = v103;
  v461 = (char *)65546;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2328,
    (const char *const *)&v461,
    &v463);
  v459 = operator_new(0x4Cu);
  if ( v459 )
    v102 = (CItem *)sub_48E910(v459);
  else
    v102 = 0;
  v460 = v102;
  v458 = (char *)65547;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2330,
    (const char *const *)&v458,
    &v460);
  v456 = operator_new(0x4Cu);
  if ( v456 )
    v101 = (CItem *)sub_48E9B0(v456);
  else
    v101 = 0;
  v457 = v101;
  v455 = (char *)65548;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2338,
    (const char *const *)&v455,
    &v457);
  v453 = operator_new(0x4Cu);
  if ( v453 )
    v100 = (CItem *)sub_48E9D0(v453);
  else
    v100 = 0;
  v454 = v100;
  v452 = (char *)65549;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2340,
    (const char *const *)&v452,
    &v454);
  v450 = operator_new(0x4Cu);
  if ( v450 )
    v99 = (CItem *)sub_48E9F0(v450);
  else
    v99 = 0;
  v451 = v99;
  v449 = (char *)65550;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2348,
    (const char *const *)&v449,
    &v451);
  v447 = operator_new(0x4Cu);
  if ( v447 )
    v98 = (CItem *)sub_48E990(v447);
  else
    v98 = 0;
  v448 = v98;
  v446 = (char *)65551;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2350,
    (const char *const *)&v446,
    &v448);
  v444 = operator_new(0x4Cu);
  if ( v444 )
    v97 = (CItem *)sub_48EA70(v444);
  else
    v97 = 0;
  v445 = v97;
  v443 = (char *)65552;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2358,
    (const char *const *)&v443,
    &v445);
  v441 = operator_new(0x4Cu);
  if ( v441 )
    v96 = CHealing::CHealing((CHealing *)v441);
  else
    v96 = 0;
  v442 = v96;
  v440 = (char *)65553;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2360,
    (const char *const *)&v440,
    &v442);
  v438 = operator_new(0x4Cu);
  if ( v438 )
    v95 = CHealing::CHealing((CHealing *)v438);
  else
    v95 = 0;
  v439 = v95;
  v437 = (char *)65554;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2368,
    (const char *const *)&v437,
    &v439);
  v435 = operator_new(0x4Cu);
  if ( v435 )
    v94 = CHealing::CHealing((CHealing *)v435);
  else
    v94 = 0;
  v436 = v94;
  v434 = (char *)65555;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2370,
    (const char *const *)&v434,
    &v436);
  v432 = operator_new(0x4Cu);
  if ( v432 )
    v93 = CHealing::CHealing((CHealing *)v432);
  else
    v93 = 0;
  v433 = v93;
  v431 = (char *)65556;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2378,
    (const char *const *)&v431,
    &v433);
  v429 = operator_new(0x4Cu);
  if ( v429 )
    v92 = CHealing::CHealing((CHealing *)v429);
  else
    v92 = 0;
  v430 = v92;
  v428 = (char *)65557;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2380,
    (const char *const *)&v428,
    &v430);
  v426 = operator_new(0x4Cu);
  if ( v426 )
    v91 = (CItem *)sub_48E810(v426);
  else
    v91 = 0;
  v427 = v91;
  v425 = (char *)65558;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2388,
    (const char *const *)&v425,
    &v427);
  v423 = operator_new(0x4Cu);
  if ( v423 )
    v90 = (CItem *)sub_48E4C0(v423);
  else
    v90 = 0;
  v424 = v90;
  v422 = (char *)65559;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2390,
    (const char *const *)&v422,
    &v424);
  v420 = operator_new(0x4Cu);
  if ( v420 )
    v89 = (CItem *)sub_48E680(v420);
  else
    v89 = 0;
  v421 = v89;
  v419 = (char *)65560;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2398,
    (const char *const *)&v419,
    &v421);
  v417 = operator_new(0x4Cu);
  if ( v417 )
    v88 = (CItem *)sub_48E5C0(v417);
  else
    v88 = 0;
  v418 = v88;
  v416 = (char *)65561;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23A0,
    (const char *const *)&v416,
    &v418);
  v414 = operator_new(0x4Cu);
  if ( v414 )
    v87 = (CItem *)CMShock::GetSpendMP(v414);
  else
    v87 = 0;
  v415 = v87;
  v413 = (char *)65562;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23A8,
    (const char *const *)&v413,
    &v415);
  v411 = operator_new(0x4Cu);
  if ( v411 )
    v86 = CHealingAny::CHealingAny((CHealingAny *)v411);
  else
    v86 = 0;
  v412 = v86;
  v410 = (char *)65563;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23B0,
    (const char *const *)&v410,
    &v412);
  v408 = operator_new(0x4Cu);
  if ( v408 )
    v85 = (CItem *)CUpperSmash::GetSpendMP(v408);
  else
    v85 = 0;
  v409 = v85;
  v407 = (char *)65564;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23B8,
    (const char *const *)&v407,
    &v409);
  v405 = operator_new(0x4Cu);
  if ( v405 )
    v84 = (CItem *)sub_48E890(v405);
  else
    v84 = 0;
  v406 = v84;
  v404 = (char *)65565;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23C0,
    (const char *const *)&v404,
    &v406);
  v402 = operator_new(0x4Cu);
  if ( v402 )
    v83 = CMeditation::CMeditation((CMeditation *)v402);
  else
    v83 = 0;
  v403 = v83;
  v401 = (char *)65566;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23C8,
    (const char *const *)&v401,
    &v403);
  v399 = operator_new(0x4Cu);
  if ( v399 )
    v82 = (CItem *)sub_48E500(v399);
  else
    v82 = 0;
  v400 = v82;
  v398 = (char *)65567;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23D0,
    (const char *const *)&v398,
    &v400);
  v396 = operator_new(0x4Cu);
  if ( v396 )
    v81 = (CItem *)CUpperSlash::CUpperSlash(v396);
  else
    v81 = 0;
  v397 = v81;
  v395 = (char *)65568;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23D8,
    (const char *const *)&v395,
    &v397);
  v393 = operator_new(0x4Cu);
  if ( v393 )
    v80 = (CItem *)CFlameArrow::CFlameArrow(v393);
  else
    v80 = 0;
  v394 = v80;
  v392 = (char *)65569;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23E0,
    (const char *const *)&v392,
    &v394);
  v390 = operator_new(0x4Cu);
  if ( v390 )
    v79 = (CItem *)sub_48EA90(v390);
  else
    v79 = 0;
  v391 = v79;
  v389 = (char *)65570;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23E8,
    (const char *const *)&v389,
    &v391);
  v387 = operator_new(0x4Cu);
  if ( v387 )
    v78 = (CItem *)sub_48E850(v387);
  else
    v78 = 0;
  v388 = v78;
  v386 = (char *)65571;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23F0,
    (const char *const *)&v386,
    &v388);
  v384 = operator_new(0x4Cu);
  if ( v384 )
    v77 = (CItem *)sub_48E5E0(v384);
  else
    v77 = 0;
  v385 = v77;
  v383 = (char *)65572;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E23F8,
    (const char *const *)&v383,
    &v385);
  v381 = operator_new(0x4Cu);
  if ( v381 )
    v76 = (CItem *)sub_48E600(v381);
  else
    v76 = 0;
  v382 = v76;
  v380 = (char *)65573;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2400,
    (const char *const *)&v380,
    &v382);
  v378 = operator_new(0x4Cu);
  if ( v378 )
    v75 = CResurrection::CResurrection((CResurrection *)v378);
  else
    v75 = 0;
  v379 = v75;
  v377 = (char *)65574;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2408,
    (const char *const *)&v377,
    &v379);
  v375 = operator_new(0x4Cu);
  if ( v375 )
    v74 = CReincarnate::CReincarnate((CReincarnate *)v375);
  else
    v74 = 0;
  v376 = v74;
  v374 = (char *)65575;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2410,
    (const char *const *)&v374,
    &v376);
  v372 = operator_new(0x4Cu);
  if ( v372 )
    v73 = (CItem *)sub_48E350(v372);
  else
    v73 = 0;
  v373 = v73;
  v371 = (char *)65576;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2418,
    (const char *const *)&v371,
    &v373);
  v369 = operator_new(0x4Cu);
  if ( v369 )
    v72 = (CItem *)sub_48E620(v369);
  else
    v72 = 0;
  v370 = v72;
  v368 = (char *)65577;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2420,
    (const char *const *)&v368,
    &v370);
  v366 = operator_new(0x4Cu);
  if ( v366 )
    v71 = (CItem *)sub_48E520(v366);
  else
    v71 = 0;
  v367 = v71;
  v365 = (char *)65578;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2428,
    (const char *const *)&v365,
    &v367);
  v363 = operator_new(0x4Cu);
  if ( v363 )
    v70 = (CItem *)sub_48E6C0(v363);
  else
    v70 = 0;
  v364 = v70;
  v362 = (char *)65579;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2430,
    (const char *const *)&v362,
    &v364);
  v360 = operator_new(0x4Cu);
  if ( v360 )
    v69 = (CItem *)sub_48E650(v360);
  else
    v69 = 0;
  v361 = v69;
  v359 = (char *)65580;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2438,
    (const char *const *)&v359,
    &v361);
  v357 = operator_new(0x4Cu);
  if ( v357 )
    v68 = (CItem *)CSpiritBlast::CSpiritBlast(v357);
  else
    v68 = 0;
  v358 = v68;
  v356 = (char *)65581;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2440,
    (const char *const *)&v356,
    &v358);
  v354 = operator_new(0x4Cu);
  if ( v354 )
    v67 = (CItem *)CFlameArrow::GetAttack(v354);
  else
    v67 = 0;
  v355 = v67;
  v353 = (char *)65582;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2448,
    (const char *const *)&v353,
    &v355);
  v351 = operator_new(0x4Cu);
  if ( v351 )
    v66 = (CItem *)sub_48E540(v351);
  else
    v66 = 0;
  v352 = v66;
  v350 = (char *)65583;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2450,
    (const char *const *)&v350,
    &v352);
  v348 = operator_new(0x4Cu);
  if ( v348 )
    v65 = CMagic::CMagic((CMagic *)v348);
  else
    v65 = 0;
  v349 = v65;
  v347 = (char *)65584;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2458,
    (const char *const *)&v347,
    &v349);
  v345 = operator_new(0x4Cu);
  if ( v345 )
    v64 = CProtect::CProtect((CProtect *)v345);
  else
    v64 = 0;
  v346 = v64;
  v344 = (char *)65585;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2460,
    (const char *const *)&v344,
    &v346);
  v342 = operator_new(0x4Cu);
  if ( v342 )
    v63 = CSilenceArrow::CSilenceArrow((CSilenceArrow *)v342);
  else
    v63 = 0;
  v343 = v63;
  v341 = (char *)65586;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2468,
    (const char *const *)&v341,
    &v343);
  v339 = operator_new(0x4Cu);
  if ( v339 )
    v62 = CUpReinforceVitality::CUpReinforceVitality((CUpReinforceVitality *)v339);
  else
    v62 = 0;
  v340 = v62;
  v338 = (char *)65587;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2470,
    (const char *const *)&v338,
    &v340);
  v336 = operator_new(0x4Cu);
  if ( v336 )
    v61 = (CItem *)sub_48F150(v336);
  else
    v61 = 0;
  v337 = v61;
  v335 = (char *)65588;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2478,
    (const char *const *)&v335,
    &v337);
  v333 = operator_new(0x4Cu);
  if ( v333 )
    v60 = CVitalityDrain::CVitalityDrain((CVitalityDrain *)v333);
  else
    v60 = 0;
  v334 = v60;
  v332 = (char *)65589;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2480,
    (const char *const *)&v332,
    &v334);
  v330 = operator_new(0x4Cu);
  if ( v330 )
    v59 = CFrostBlast::CFrostBlast((CFrostBlast *)v330);
  else
    v59 = 0;
  v331 = v59;
  v329 = (char *)65590;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2488,
    (const char *const *)&v329,
    &v331);
  v327 = operator_new(0x4Cu);
  if ( v327 )
    v58 = (CItem *)sub_48E8B0(v327);
  else
    v58 = 0;
  v328 = v58;
  v326 = (char *)65591;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2490,
    (const char *const *)&v326,
    &v328);
  v324 = operator_new(0x4Cu);
  if ( v324 )
    v57 = CHealingParty::CHealingParty((CHealingParty *)v324);
  else
    v57 = 0;
  v325 = v57;
  v323 = (char *)65592;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2498,
    (const char *const *)&v323,
    &v325);
  v321 = operator_new(0x4Cu);
  if ( v321 )
    v56 = (CItem *)sub_48EBE0(v321);
  else
    v56 = 0;
  v322 = v56;
  v320 = (char *)65593;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24A0,
    (const char *const *)&v320,
    &v322);
  v318 = operator_new(0x4Cu);
  if ( v318 )
    v55 = (CItem *)sub_48EC00(v318);
  else
    v55 = 0;
  v319 = v55;
  v317 = (char *)65594;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24A8,
    (const char *const *)&v317,
    &v319);
  v315 = operator_new(0x4Cu);
  if ( v315 )
    v54 = (CItem *)sub_48E8F0(v315);
  else
    v54 = 0;
  v316 = v54;
  v314 = (char *)65595;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24B0,
    (const char *const *)&v314,
    &v316);
  v312 = operator_new(0x4Cu);
  if ( v312 )
    v53 = CHealingParty::CHealingParty((CHealingParty *)v312);
  else
    v53 = 0;
  v313 = v53;
  v311 = (char *)65596;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24B8,
    (const char *const *)&v311,
    &v313);
  v309 = operator_new(0x4Cu);
  if ( v309 )
    v52 = (CItem *)CMPoisonCloud::GetResistNum(v309);
  else
    v52 = 0;
  v310 = v52;
  v308 = (char *)65597;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24C0,
    (const char *const *)&v308,
    &v310);
  v306 = operator_new(0x4Cu);
  if ( v306 )
    v51 = (CItem *)sub_48DCB0(v306);
  else
    v51 = 0;
  v307 = v51;
  v305 = (char *)65598;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24C8,
    (const char *const *)&v305,
    &v307);
  v303 = operator_new(0x4Cu);
  if ( v303 )
    v50 = (CItem *)sub_48EA50(v303);
  else
    v50 = 0;
  v304 = v50;
  v302 = (char *)65616;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24D0,
    (const char *const *)&v302,
    &v304);
  v300 = operator_new(0x4Cu);
  if ( v300 )
    v49 = (CItem *)sub_48EA50(v300);
  else
    v49 = 0;
  v301 = v49;
  v299 = (char *)65617;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24D8,
    (const char *const *)&v299,
    &v301);
  v297 = operator_new(0x4Cu);
  if ( v297 )
    v48 = (CItem *)sub_48DCD0(v297);
  else
    v48 = 0;
  v298 = v48;
  v296 = (char *)0x20000;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24E0,
    (const char *const *)&v296,
    &v298);
  v294 = operator_new(0x4Cu);
  if ( v294 )
    v47 = (CItem *)sub_48DCF0(v294);
  else
    v47 = 0;
  v295 = v47;
  v293 = (char *)131073;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24E8,
    (const char *const *)&v293,
    &v295);
  v291 = operator_new(0x4Cu);
  if ( v291 )
    v46 = (CItem *)sub_48DD30(v291);
  else
    v46 = 0;
  v292 = v46;
  v290 = (char *)131074;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24F0,
    (const char *const *)&v290,
    &v292);
  v288 = operator_new(0x4Cu);
  if ( v288 )
    v45 = (CItem *)sub_48DE30(v288);
  else
    v45 = 0;
  v289 = v45;
  v287 = (char *)131075;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E24F8,
    (const char *const *)&v287,
    &v289);
  v285 = operator_new(0x4Cu);
  if ( v285 )
    v44 = (CItem *)sub_48DF80(v285);
  else
    v44 = 0;
  v286 = v44;
  v284 = (char *)131076;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2500,
    (const char *const *)&v284,
    &v286);
  v282 = operator_new(0x4Cu);
  if ( v282 )
    v43 = (CItem *)sub_48DD50(v282);
  else
    v43 = 0;
  v283 = v43;
  v281 = (char *)131077;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2508,
    (const char *const *)&v281,
    &v283);
  v279 = operator_new(0x4Cu);
  if ( v279 )
    v42 = (CItem *)sub_48DFF0(v279);
  else
    v42 = 0;
  v280 = v42;
  v278 = (char *)131078;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2510,
    (const char *const *)&v278,
    &v280);
  v276 = operator_new(0x4Cu);
  if ( v276 )
    v41 = CIceRequiem::CIceRequiem((CIceRequiem *)v276);
  else
    v41 = 0;
  v277 = v41;
  v275 = (char *)131079;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2518,
    (const char *const *)&v275,
    &v277);
  v273 = operator_new(0x4Cu);
  if ( v273 )
    v40 = CPoisonCloud::CPoisonCloud((CPoisonCloud *)v273);
  else
    v40 = 0;
  v274 = v40;
  v272 = (char *)131080;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2520,
    (const char *const *)&v272,
    &v274);
  v270 = operator_new(0x4Cu);
  if ( v270 )
    v39 = (CItem *)sub_48E230(v270);
  else
    v39 = 0;
  v271 = v39;
  v269 = (char *)131081;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2528,
    (const char *const *)&v269,
    &v271);
  v267 = operator_new(0x4Cu);
  if ( v267 )
    v38 = (CItem *)CHealingInstance::GetSpendMP(v267);
  else
    v38 = 0;
  v268 = v38;
  v266 = (char *)131082;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2530,
    (const char *const *)&v266,
    &v268);
  v264 = operator_new(0x4Cu);
  if ( v264 )
    v37 = (CItem *)sub_48E910(v264);
  else
    v37 = 0;
  v265 = v37;
  v263 = (char *)131083;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2538,
    (const char *const *)&v263,
    &v265);
  v261 = operator_new(0x4Cu);
  if ( v261 )
    v36 = (CItem *)sub_48E930(v261);
  else
    v36 = 0;
  v262 = v36;
  v260 = (char *)131084;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2540,
    (const char *const *)&v260,
    &v262);
  v258 = operator_new(0x4Cu);
  if ( v258 )
    v35 = CHealingInstance::CHealingInstance((CHealingInstance *)v258);
  else
    v35 = 0;
  v259 = v35;
  v257 = (char *)131085;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2548,
    (const char *const *)&v257,
    &v259);
  v255 = operator_new(0x4Cu);
  if ( v255 )
    v34 = (CItem *)sub_48E250(v255);
  else
    v34 = 0;
  v256 = v34;
  v254 = (char *)131086;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2550,
    (const char *const *)&v254,
    &v256);
  v252 = operator_new(0x4Cu);
  if ( v252 )
    v33 = CUpFatal2::CUpFatal2((CUpFatal2 *)v252);
  else
    v33 = 0;
  v253 = v33;
  v251 = (char *)131087;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2558,
    (const char *const *)&v251,
    &v253);
  v249 = operator_new(0x4Cu);
  if ( v249 )
    v32 = (CItem *)sub_48E2B0(v249);
  else
    v32 = 0;
  v250 = v32;
  v248 = (char *)131088;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2560,
    (const char *const *)&v248,
    &v250);
  v246 = operator_new(0x4Cu);
  if ( v246 )
    v31 = CUpFire::CUpFire((CUpFire *)v246);
  else
    v31 = 0;
  v247 = v31;
  v245 = (char *)131089;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&dword_4E2568,
    (const char *const *)&v245,
    &v247);
  v243 = operator_new(0x4Cu);
  if ( v243 )
    v30 = CFatalChance::CFatalChance((CFatalChance *)v243);
  else
    v30 = 0;
  v244 = v30;
  v242 = (char *)131090;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2570,
    (const char *const *)&v242,
    &v244);
  v240 = operator_new(0x4Cu);
  if ( v240 )
    v29 = CUpBlockShield::CUpBlockShield((CUpBlockShield *)v240);
  else
    v29 = 0;
  v241 = v29;
  v239 = (char *)131091;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2578,
    (const char *const *)&v239,
    &v241);
  v237 = operator_new(0x4Cu);
  if ( v237 )
    v28 = (CItem *)CManaBurn::GetSpendMP(v237);
  else
    v28 = 0;
  v238 = v28;
  v236 = (char *)131092;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2580,
    (const char *const *)&v236,
    &v238);
  v234 = operator_new(0x4Cu);
  if ( v234 )
    v27 = (CItem *)sub_48E330(v234);
  else
    v27 = 0;
  v235 = v27;
  v233 = (char *)131093;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2588,
    (const char *const *)&v233,
    &v235);
  v231 = operator_new(0x4Cu);
  if ( v231 )
    v26 = CUpRFEvade::CUpRFEvade((CUpRFEvade *)v231);
  else
    v26 = 0;
  v232 = v26;
  v230 = (char *)131094;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2590,
    (const char *const *)&v230,
    &v232);
  v228 = operator_new(0x4Cu);
  if ( v228 )
    v25 = CStoneShield::CStoneShield((CStoneShield *)v228);
  else
    v25 = 0;
  v229 = v25;
  v227 = (char *)131095;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2598,
    (const char *const *)&v227,
    &v229);
  v225 = operator_new(0x4Cu);
  if ( v225 )
    v24 = (CItem *)sub_48F3C0(v225);
  else
    v24 = 0;
  v226 = v24;
  v224 = (char *)131096;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25A0,
    (const char *const *)&v224,
    &v226);
  v222 = operator_new(0x4Cu);
  if ( v222 )
    v23 = (CItem *)sub_48F3E0(v222);
  else
    v23 = 0;
  v223 = v23;
  v221 = (char *)131097;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25A8,
    (const char *const *)&v221,
    &v223);
  v219 = operator_new(0x4Cu);
  if ( v219 )
    v22 = (CItem *)sub_48F400(v219);
  else
    v22 = 0;
  v220 = v22;
  v218 = (char *)131098;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25B0,
    (const char *const *)&v218,
    &v220);
  v216 = operator_new(0x4Cu);
  if ( v216 )
    v21 = CPoisonArrow::CPoisonArrow((CPoisonArrow *)v216);
  else
    v21 = 0;
  v217 = v21;
  v215 = (char *)131099;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25B8,
    (const char *const *)&v215,
    &v217);
  v213 = operator_new(0x4Cu);
  if ( v213 )
    v20 = (CItem *)sub_48F420(v213);
  else
    v20 = 0;
  v214 = v20;
  v212 = (char *)131100;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25C0,
    (const char *const *)&v212,
    &v214);
  v210 = operator_new(0x4Cu);
  if ( v210 )
    v19 = (CItem *)sub_48F460(v210);
  else
    v19 = 0;
  v211 = v19;
  v209 = (char *)131101;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25C8,
    (const char *const *)&v209,
    &v211);
  v207 = operator_new(0x4Cu);
  if ( v207 )
    v18 = CMeditation::CMeditation((CMeditation *)v207);
  else
    v18 = 0;
  v208 = v18;
  v206 = (char *)131102;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25D0,
    (const char *const *)&v206,
    &v208);
  v204 = operator_new(0x4Cu);
  if ( v204 )
    v17 = (CItem *)sub_48F480(v204);
  else
    v17 = 0;
  v205 = v17;
  v203 = (char *)131103;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25D8,
    (const char *const *)&v203,
    &v205);
  v201 = operator_new(0x4Cu);
  if ( v201 )
    v16 = (CItem *)sub_48E950(v201);
  else
    v16 = 0;
  v202 = v16;
  v200 = (char *)131104;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25E0,
    (const char *const *)&v200,
    &v202);
  v198 = operator_new(0x4Cu);
  if ( v198 )
    v15 = (CItem *)CHaste::GetSpendMP(v198);
  else
    v15 = 0;
  v199 = v15;
  v197 = (char *)131105;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25E8,
    (const char *const *)&v197,
    &v199);
  v195 = operator_new(0x4Cu);
  if ( v195 )
    v14 = (CItem *)sub_48F200(v195);
  else
    v14 = 0;
  v196 = v14;
  v194 = (char *)131106;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25F0,
    (const char *const *)&v194,
    &v196);
  v192 = operator_new(0x4Cu);
  if ( v192 )
    v13 = (CItem *)sub_48F220(v192);
  else
    v13 = 0;
  v193 = v13;
  v191 = (char *)131107;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E25F8,
    (const char *const *)&v191,
    &v193);
  v189 = operator_new(0x4Cu);
  if ( v189 )
    v12 = (CItem *)sub_48F240(v189);
  else
    v12 = 0;
  v190 = v12;
  v188 = (char *)131108;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2600,
    (const char *const *)&v188,
    &v190);
  v186 = operator_new(0x4Cu);
  if ( v186 )
    v11 = (CItem *)sub_48F260(v186);
  else
    v11 = 0;
  v187 = v11;
  v185 = (char *)131109;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2608,
    (const char *const *)&v185,
    &v187);
  v183 = operator_new(0x4Cu);
  if ( v183 )
    v10 = (CItem *)sub_48F280(v183);
  else
    v10 = 0;
  v184 = v10;
  v182 = (char *)131110;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2610,
    (const char *const *)&v182,
    &v184);
  v180 = operator_new(0x4Cu);
  if ( v180 )
    v9 = (CItem *)sub_48F2A0(v180);
  else
    v9 = 0;
  v181 = v9;
  v179 = (char *)131111;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2618,
    (const char *const *)&v179,
    &v181);
  v177 = operator_new(0x4Cu);
  if ( v177 )
    v8 = (CItem *)sub_48F2C0(v177);
  else
    v8 = 0;
  v178 = v8;
  v176 = (char *)131112;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2620,
    (const char *const *)&v176,
    &v178);
  v174 = operator_new(0x4Cu);
  if ( v174 )
    v7 = (CItem *)sub_48F2E0(v174);
  else
    v7 = 0;
  v175 = v7;
  v173 = (char *)131113;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2628,
    (const char *const *)&v173,
    &v175);
  v171 = operator_new(0x4Cu);
  if ( v171 )
    v6 = CFire::CFire((CFire *)v171);
  else
    v6 = 0;
  v172 = v6;
  v170 = (char *)131114;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2630,
    (const char *const *)&v170,
    &v172);
  v168 = operator_new(0x4Cu);
  if ( v168 )
    v5 = (CItem *)sub_48F300(v168);
  else
    v5 = 0;
  v169 = v5;
  v167 = (char *)131115;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2638,
    (const char *const *)&v167,
    &v169);
  v165 = operator_new(0x4Cu);
  if ( v165 )
    v4 = (CItem *)sub_48F320(v165);
  else
    v4 = 0;
  v166 = v4;
  v164 = (char *)131116;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2640,
    (const char *const *)&v164,
    &v166);
  v162 = operator_new(0x4Cu);
  if ( v162 )
    v3 = (CItem *)sub_48F340(v162);
  else
    v3 = 0;
  v163 = v3;
  v161 = (char *)131117;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2648,
    (const char *const *)&v161,
    &v163);
  v159 = operator_new(0x4Cu);
  if ( v159 )
    v2 = (CItem *)sub_48DCB0(v159);
  else
    v2 = 0;
  v160 = v2;
  v158 = (char *)131134;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2650,
    (const char *const *)&v158,
    &v160);
  v156 = operator_new(0x4Cu);
  if ( v156 )
    v1 = (CItem *)sub_48EA50(v156);
  else
    v1 = 0;
  v157 = v1;
  v155 = (char *)131152;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2658,
    (const char *const *)&v155,
    &v157);
  v153 = operator_new(0x4Cu);
  if ( v153 )
    v0 = (CItem *)sub_48EA50(v153);
  else
    v0 = 0;
  v154 = v0;
  v152 = (char *)131153;
  std::pair<char const * const,CItem *>::pair<char const * const,CItem *>(
    (std::pair<char const * const,CItem *> *)&unk_4E2660,
    (const char *const *)&v152,
    &v154);
}
// 4E21A8: using guessed type int dword_4E21A8[];
// 4E2568: using guessed type int dword_4E2568;

//----- (004B23C0) --------------------------------------------------------
CMeshDefense *sub_4B23C0()
{
  CMeshDefense *result; // eax
  CMeshDefense *v1; // [esp+0h] [ebp-48h]
  CMeshWis *v2; // [esp+4h] [ebp-44h]
  CMeshInt *v3; // [esp+8h] [ebp-40h]
  CMeshDex *v4; // [esp+Ch] [ebp-3Ch]
  CMeshHth *v5; // [esp+10h] [ebp-38h]
  CMeshStr *v6; // [esp+14h] [ebp-34h]
  CMeshChance *v7; // [esp+18h] [ebp-30h]
  CManaBurn *v8; // [esp+1Ch] [ebp-2Ch]
  _DWORD *v9; // [esp+20h] [ebp-28h]
  CMemory **v10; // [esp+28h] [ebp-20h]
  CMemory **v11; // [esp+2Ch] [ebp-1Ch]
  CMemory **v12; // [esp+30h] [ebp-18h]
  CMemory **v13; // [esp+34h] [ebp-14h]
  CMemory **v14; // [esp+38h] [ebp-10h]
  CMemory **v15; // [esp+3Ch] [ebp-Ch]
  CMemory **v16; // [esp+40h] [ebp-8h]
  CMemory **v17; // [esp+44h] [ebp-4h]

  v17 = operator_new(0x4Cu);
  if ( v17 )
    v9 = sub_48F5A0(v17);
  else
    v9 = 0;
  dword_4E2668[0] = (int)v9;
  v16 = operator_new(0x4Cu);
  if ( v16 )
    v8 = CManaBurn::CManaBurn((CManaBurn *)v16);
  else
    v8 = 0;
  dword_4E266C = (int)v8;
  v15 = operator_new(0x4Cu);
  if ( v15 )
    v7 = CMeshChance::CMeshChance((CMeshChance *)v15);
  else
    v7 = 0;
  dword_4E2670 = (int)v7;
  v14 = operator_new(0x4Cu);
  if ( v14 )
    v6 = CMeshStr::CMeshStr((CMeshStr *)v14);
  else
    v6 = 0;
  dword_4E2674 = (int)v6;
  v13 = operator_new(0x4Cu);
  if ( v13 )
    v5 = CMeshHth::CMeshHth((CMeshHth *)v13);
  else
    v5 = 0;
  dword_4E2678 = (int)v5;
  v12 = operator_new(0x4Cu);
  if ( v12 )
    v4 = CMeshDex::CMeshDex((CMeshDex *)v12);
  else
    v4 = 0;
  dword_4E267C = (int)v4;
  v11 = operator_new(0x4Cu);
  if ( v11 )
    v3 = CMeshInt::CMeshInt((CMeshInt *)v11);
  else
    v3 = 0;
  dword_4E2680 = (int)v3;
  v10 = operator_new(0x4Cu);
  if ( v10 )
    v2 = CMeshWis::CMeshWis((CMeshWis *)v10);
  else
    v2 = 0;
  dword_4E2684 = (int)v2;
  result = (CMeshDefense *)operator_new(0x4Cu);
  if ( result )
  {
    result = CMeshDefense::CMeshDefense(result);
    v1 = result;
  }
  else
  {
    v1 = 0;
  }
  dword_4E2688 = (int)v1;
  return result;
}
// 4E2668: using guessed type int dword_4E2668[];
// 4E266C: using guessed type int dword_4E266C;
// 4E2670: using guessed type int dword_4E2670;
// 4E2674: using guessed type int dword_4E2674;
// 4E2678: using guessed type int dword_4E2678;
// 4E267C: using guessed type int dword_4E267C;
// 4E2680: using guessed type int dword_4E2680;
// 4E2684: using guessed type int dword_4E2684;
// 4E2688: using guessed type int dword_4E2688;

//----- (004B2580) --------------------------------------------------------
CMemory **sub_4B2580()
{
  CMemory **result; // eax
  CMemory **v1; // [esp+0h] [ebp-148h]
  _DWORD *v2; // [esp+4h] [ebp-144h]
  _DWORD *v3; // [esp+8h] [ebp-140h]
  _DWORD *v4; // [esp+Ch] [ebp-13Ch]
  _DWORD *v5; // [esp+10h] [ebp-138h]
  _DWORD *v6; // [esp+14h] [ebp-134h]
  _DWORD *v7; // [esp+18h] [ebp-130h]
  _DWORD *v8; // [esp+1Ch] [ebp-12Ch]
  _DWORD *v9; // [esp+20h] [ebp-128h]
  _DWORD *v10; // [esp+24h] [ebp-124h]
  _DWORD *v11; // [esp+28h] [ebp-120h]
  _DWORD *v12; // [esp+2Ch] [ebp-11Ch]
  _DWORD *v13; // [esp+30h] [ebp-118h]
  _DWORD *v14; // [esp+34h] [ebp-114h]
  _DWORD *v15; // [esp+38h] [ebp-110h]
  CDoFury *v16; // [esp+3Ch] [ebp-10Ch]
  _DWORD *v17; // [esp+40h] [ebp-108h]
  _DWORD *v18; // [esp+44h] [ebp-104h]
  _DWORD *v19; // [esp+48h] [ebp-100h]
  _DWORD *v20; // [esp+4Ch] [ebp-FCh]
  CBerserk *v21; // [esp+50h] [ebp-F8h]
  CTFury *v22; // [esp+54h] [ebp-F4h]
  _DWORD *v23; // [esp+58h] [ebp-F0h]
  _DWORD *v24; // [esp+5Ch] [ebp-ECh]
  _DWORD *v25; // [esp+60h] [ebp-E8h]
  _DWORD *v26; // [esp+64h] [ebp-E4h]
  _DWORD *v27; // [esp+68h] [ebp-E0h]
  CEmergencyEscape *v28; // [esp+6Ch] [ebp-DCh]
  _DWORD *v29; // [esp+70h] [ebp-D8h]
  CChantBattle *v30; // [esp+74h] [ebp-D4h]
  _DWORD *v31; // [esp+78h] [ebp-D0h]
  _DWORD *v32; // [esp+7Ch] [ebp-CCh]
  CSkillSelfBuff *v33; // [esp+80h] [ebp-C8h]
  CResistPalsy *v34; // [esp+84h] [ebp-C4h]
  _DWORD *v35; // [esp+88h] [ebp-C0h]
  CResistCurse *v36; // [esp+8Ch] [ebp-BCh]
  CResistFire *v37; // [esp+90h] [ebp-B8h]
  CBerserk *v38; // [esp+94h] [ebp-B4h]
  _DWORD *v39; // [esp+98h] [ebp-B0h]
  _DWORD *v40; // [esp+9Ch] [ebp-ACh]
  CVanishConfi *v41; // [esp+A0h] [ebp-A8h]
  CMemory **v42; // [esp+A8h] [ebp-A0h]
  CMemory **v43; // [esp+ACh] [ebp-9Ch]
  CMemory **v44; // [esp+B0h] [ebp-98h]
  CMemory **v45; // [esp+B4h] [ebp-94h]
  CMemory **v46; // [esp+B8h] [ebp-90h]
  CMemory **v47; // [esp+BCh] [ebp-8Ch]
  CMemory **v48; // [esp+C0h] [ebp-88h]
  CMemory **v49; // [esp+C4h] [ebp-84h]
  CMemory **v50; // [esp+C8h] [ebp-80h]
  CMemory **v51; // [esp+CCh] [ebp-7Ch]
  CMemory **v52; // [esp+D0h] [ebp-78h]
  CMemory **v53; // [esp+D4h] [ebp-74h]
  CMemory **v54; // [esp+D8h] [ebp-70h]
  CMemory **v55; // [esp+DCh] [ebp-6Ch]
  CMemory **v56; // [esp+E0h] [ebp-68h]
  CMemory **v57; // [esp+E4h] [ebp-64h]
  CMemory **v58; // [esp+E8h] [ebp-60h]
  CMemory **v59; // [esp+ECh] [ebp-5Ch]
  CMemory **v60; // [esp+F0h] [ebp-58h]
  CMemory **v61; // [esp+F4h] [ebp-54h]
  CMemory **v62; // [esp+F8h] [ebp-50h]
  CMemory **v63; // [esp+FCh] [ebp-4Ch]
  CMemory **v64; // [esp+100h] [ebp-48h]
  CMemory **v65; // [esp+104h] [ebp-44h]
  CMemory **v66; // [esp+108h] [ebp-40h]
  CMemory **v67; // [esp+10Ch] [ebp-3Ch]
  CMemory **v68; // [esp+110h] [ebp-38h]
  CMemory **v69; // [esp+114h] [ebp-34h]
  CMemory **v70; // [esp+118h] [ebp-30h]
  CMemory **v71; // [esp+11Ch] [ebp-2Ch]
  CMemory **v72; // [esp+120h] [ebp-28h]
  CMemory **v73; // [esp+124h] [ebp-24h]
  CMemory **v74; // [esp+128h] [ebp-20h]
  CMemory **v75; // [esp+12Ch] [ebp-1Ch]
  CMemory **v76; // [esp+130h] [ebp-18h]
  CMemory **v77; // [esp+134h] [ebp-14h]
  CMemory **v78; // [esp+138h] [ebp-10h]
  CMemory **v79; // [esp+13Ch] [ebp-Ch]
  CMemory **v80; // [esp+140h] [ebp-8h]
  CMemory **v81; // [esp+144h] [ebp-4h]

  v81 = operator_new(0x4Cu);
  if ( v81 )
    v41 = CVanishConfi::CVanishConfi((CVanishConfi *)v81);
  else
    v41 = 0;
  dword_4E2690[0] = (int)v41;
  v80 = operator_new(0x4Cu);
  if ( v80 )
    v40 = sub_48F6F0(v80);
  else
    v40 = 0;
  dword_4E2694 = (int)v40;
  v79 = operator_new(0x4Cu);
  if ( v79 )
    v39 = sub_48F990(v79);
  else
    v39 = 0;
  dword_4E2698 = (int)v39;
  v78 = operator_new(0x4Cu);
  if ( v78 )
    v38 = CBerserk::CBerserk((CBerserk *)v78);
  else
    v38 = 0;
  dword_4E269C = (int)v38;
  v77 = operator_new(0x4Cu);
  if ( v77 )
    v37 = CResistFire::CResistFire((CResistFire *)v77);
  else
    v37 = 0;
  dword_4E26A0 = (int)v37;
  v76 = operator_new(0x4Cu);
  if ( v76 )
    v36 = CResistCurse::CResistCurse((CResistCurse *)v76);
  else
    v36 = 0;
  dword_4E26A4 = (int)v36;
  v75 = operator_new(0x4Cu);
  if ( v75 )
    v35 = CResistPalsy::GetSpendMP(v75);
  else
    v35 = 0;
  dword_4E26A8 = (int)v35;
  v74 = operator_new(0x4Cu);
  if ( v74 )
    v34 = CResistPalsy::CResistPalsy((CResistPalsy *)v74);
  else
    v34 = 0;
  dword_4E26AC = (int)v34;
  v73 = operator_new(0x4Cu);
  if ( v73 )
    v33 = CSkillSelfBuff::CSkillSelfBuff((CSkillSelfBuff *)v73);
  else
    v33 = 0;
  dword_4E26B0 = (int)v33;
  v72 = operator_new(0x4Cu);
  if ( v72 )
    v32 = sub_48F870(v72);
  else
    v32 = 0;
  dword_4E26B4 = (int)v32;
  v71 = operator_new(0x4Cu);
  if ( v71 )
    v31 = sub_48F910(v71);
  else
    v31 = 0;
  dword_4E26B8 = (int)v31;
  v70 = operator_new(0x4Cu);
  if ( v70 )
    v30 = CChantBattle::CChantBattle((CChantBattle *)v70);
  else
    v30 = 0;
  dword_4E26BC = (int)v30;
  v69 = operator_new(0x4Cu);
  if ( v69 )
    v29 = sub_48F970(v69);
  else
    v29 = 0;
  dword_4E26C0 = (int)v29;
  v68 = operator_new(0x4Cu);
  if ( v68 )
    v28 = CEmergencyEscape::CEmergencyEscape((CEmergencyEscape *)v68);
  else
    v28 = 0;
  dword_4E26C4 = (int)v28;
  v67 = operator_new(0x4Cu);
  if ( v67 )
    v27 = sub_48EA50(v67);
  else
    v27 = 0;
  dword_4E26C8 = (int)v27;
  v66 = operator_new(0x4Cu);
  if ( v66 )
    v26 = sub_48F990(v66);
  else
    v26 = 0;
  dword_4E26CC = (int)v26;
  v65 = operator_new(0x4Cu);
  if ( v65 )
    v25 = sub_48F990(v65);
  else
    v25 = 0;
  dword_4E26D0 = (int)v25;
  v64 = operator_new(0x4Cu);
  if ( v64 )
    v24 = sub_48F9B0(v64);
  else
    v24 = 0;
  dword_4E26D4 = (int)v24;
  v63 = operator_new(0x4Cu);
  if ( v63 )
    v23 = sub_48F9D0(v63);
  else
    v23 = 0;
  dword_4E26D8 = (int)v23;
  v62 = operator_new(0x4Cu);
  if ( v62 )
    v22 = CTFury::CTFury((CTFury *)v62);
  else
    v22 = 0;
  dword_4E26DC = (int)v22;
  v61 = operator_new(0x4Cu);
  if ( v61 )
    v21 = sub_48FA30((CBerserk *)v61);
  else
    v21 = 0;
  dword_4E26E0 = (int)v21;
  v60 = operator_new(0x4Cu);
  if ( v60 )
    v20 = sub_48F990(v60);
  else
    v20 = 0;
  dword_4E26E4 = (int)v20;
  v59 = operator_new(0x4Cu);
  if ( v59 )
    v19 = sub_48FA70(v59);
  else
    v19 = 0;
  dword_4E26E8 = (int)v19;
  v58 = operator_new(0x4Cu);
  if ( v58 )
    v18 = sub_48FA90(v58);
  else
    v18 = 0;
  dword_4E26EC = (int)v18;
  v57 = operator_new(0x4Cu);
  if ( v57 )
    v17 = sub_48EA50(v57);
  else
    v17 = 0;
  dword_4E26F0 = (int)v17;
  v56 = operator_new(0x4Cu);
  if ( v56 )
    v16 = CDoFury::CDoFury((CDoFury *)v56);
  else
    v16 = 0;
  dword_4E26F4 = (int)v16;
  v55 = operator_new(0x4Cu);
  if ( v55 )
    v15 = sub_48FAF0(v55);
  else
    v15 = 0;
  dword_4E26F8 = (int)v15;
  v54 = operator_new(0x4Cu);
  if ( v54 )
    v14 = sub_48FB10(v54);
  else
    v14 = 0;
  dword_4E26FC = (int)v14;
  v53 = operator_new(0x4Cu);
  if ( v53 )
    v13 = sub_48FB30(v53);
  else
    v13 = 0;
  dword_4E2700 = (int)v13;
  v52 = operator_new(0x4Cu);
  if ( v52 )
    v12 = sub_48FB50(v52);
  else
    v12 = 0;
  dword_4E2704 = (int)v12;
  v51 = operator_new(0x4Cu);
  if ( v51 )
    v11 = sub_48FB70(v51);
  else
    v11 = 0;
  dword_4E2708 = (int)v11;
  v50 = operator_new(0x4Cu);
  if ( v50 )
    v10 = sub_48FB90(v50);
  else
    v10 = 0;
  dword_4E270C = (int)v10;
  v49 = operator_new(0x4Cu);
  if ( v49 )
    v9 = sub_48FBB0(v49);
  else
    v9 = 0;
  dword_4E2710 = (int)v9;
  v48 = operator_new(0x4Cu);
  if ( v48 )
    v8 = sub_48FBD0(v48);
  else
    v8 = 0;
  dword_4E2714 = (int)v8;
  v47 = operator_new(0x4Cu);
  if ( v47 )
    v7 = sub_48FBF0(v47);
  else
    v7 = 0;
  dword_4E2718 = (int)v7;
  v46 = operator_new(0x4Cu);
  if ( v46 )
    v6 = sub_48F990(v46);
  else
    v6 = 0;
  dword_4E271C = (int)v6;
  v45 = operator_new(0x4Cu);
  if ( v45 )
    v5 = CDoOverrun::GetAddValueType(v45);
  else
    v5 = 0;
  dword_4E2720 = (int)v5;
  v44 = operator_new(0x4Cu);
  if ( v44 )
    v4 = sub_48FC60(v44);
  else
    v4 = 0;
  dword_4E2724 = (int)v4;
  v43 = operator_new(0x4Cu);
  if ( v43 )
    v3 = sub_48FC90(v43);
  else
    v3 = 0;
  dword_4E2728 = (int)v3;
  v42 = operator_new(0x4Cu);
  if ( v42 )
    v2 = sub_48FCB0(v42);
  else
    v2 = 0;
  dword_4E272C = (int)v2;
  result = operator_new(0x50u);
  if ( result )
  {
    result = (CMemory **)sub_48FCE0(result);
    v1 = result;
  }
  else
  {
    v1 = 0;
  }
  dword_4E2730 = (int)v1;
  return result;
}
// 4E2690: using guessed type int dword_4E2690[];
// 4E2694: using guessed type int dword_4E2694;
// 4E2698: using guessed type int dword_4E2698;
// 4E269C: using guessed type int dword_4E269C;
// 4E26A0: using guessed type int dword_4E26A0;
// 4E26A4: using guessed type int dword_4E26A4;
// 4E26A8: using guessed type int dword_4E26A8;
// 4E26AC: using guessed type int dword_4E26AC;
// 4E26B0: using guessed type int dword_4E26B0;
// 4E26B4: using guessed type int dword_4E26B4;
// 4E26B8: using guessed type int dword_4E26B8;
// 4E26BC: using guessed type int dword_4E26BC;
// 4E26C0: using guessed type int dword_4E26C0;
// 4E26C4: using guessed type int dword_4E26C4;
// 4E26C8: using guessed type int dword_4E26C8;
// 4E26CC: using guessed type int dword_4E26CC;
// 4E26D0: using guessed type int dword_4E26D0;
// 4E26D4: using guessed type int dword_4E26D4;
// 4E26D8: using guessed type int dword_4E26D8;
// 4E26DC: using guessed type int dword_4E26DC;
// 4E26E0: using guessed type int dword_4E26E0;
// 4E26E4: using guessed type int dword_4E26E4;
// 4E26E8: using guessed type int dword_4E26E8;
// 4E26EC: using guessed type int dword_4E26EC;
// 4E26F0: using guessed type int dword_4E26F0;
// 4E26F4: using guessed type int dword_4E26F4;
// 4E26F8: using guessed type int dword_4E26F8;
// 4E26FC: using guessed type int dword_4E26FC;
// 4E2700: using guessed type int dword_4E2700;
// 4E2704: using guessed type int dword_4E2704;
// 4E2708: using guessed type int dword_4E2708;
// 4E270C: using guessed type int dword_4E270C;
// 4E2710: using guessed type int dword_4E2710;
// 4E2714: using guessed type int dword_4E2714;
// 4E2718: using guessed type int dword_4E2718;
// 4E271C: using guessed type int dword_4E271C;
// 4E2720: using guessed type int dword_4E2720;
// 4E2724: using guessed type int dword_4E2724;
// 4E2728: using guessed type int dword_4E2728;
// 4E272C: using guessed type int dword_4E272C;
// 4E2730: using guessed type int dword_4E2730;

//----- (004B2F00) --------------------------------------------------------
DWORD sub_4B2F00()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E2744 = result;
  return result;
}
// 4E2744: using guessed type int dword_4E2744;

//----- (004B2F10) --------------------------------------------------------
int sub_4B2F10()
{
  sub_493EE0(dword_4E2748);
  return atexit(sub_4B34E0);
}

//----- (004B2F30) --------------------------------------------------------
DWORD sub_4B2F30()
{
  DWORD result; // eax

  result = GetTickCount();
  dword_4E2754 = result;
  return result;
}
// 4E2754: using guessed type int dword_4E2754;

//----- (004B2F40) --------------------------------------------------------
int sub_4B2F40()
{
  `vector constructor iterator'(&unk_4E2758, 0x3Cu, 32, sub_493F10);
  return atexit(sub_4B34F0);
}

//----- (004B2F70) --------------------------------------------------------
int sub_4B2F70()
{
  CScreen::CScreen((CScreen *)&unk_4E2EDC);
  return atexit((void (__cdecl *)())sub_4B3510);
}

//----- (004B2F90) --------------------------------------------------------
int sub_4B2F90()
{
  sub_496300(&unk_4E35B4);
  return atexit(sub_4B3520);
}

//----- (004B2FB0) --------------------------------------------------------
void sub_4B2FB0()
{
  InitCodePage::InitCodePage((InitCodePage *)&unk_4E374C);
}

//----- (004B2FC0) --------------------------------------------------------
void __usercall sub_4B2FC0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CAuthSocket::_CAuthSocket(dword_4DA6F0, a1, a2, a3);
}

//----- (004B2FD0) --------------------------------------------------------
void __cdecl sub_4B2FD0()
{
  CMemoryPool_CAuthPacket::_CPool::_CPool(&dword_4DA764);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004B2FE0) --------------------------------------------------------
void __cdecl sub_4B2FE0()
{
  CMemoryPool_CSkill::_CPool::_CPool(&dword_4DA75C);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (004B2FF0) --------------------------------------------------------
void __cdecl sub_4B2FF0()
{
  CMemoryPool_CBaseList::_CPool::_CPool();
}

//----- (004B3000) --------------------------------------------------------
void __cdecl sub_4B3000()
{
  CCalendar::_CCalendar(dword_4DA798);
}

//----- (004B3010) --------------------------------------------------------
void __cdecl sub_4B3010()
{
  CDBSocket::_CDBSocket(dword_4DA7B8);
}

//----- (004B3020) --------------------------------------------------------
void __cdecl sub_4B3020()
{
  CMemoryPool_CDBPacket::_CPool::_CPool(&dword_4DA824);
}

//----- (004B3030) --------------------------------------------------------
void __cdecl sub_4B3030()
{
  CMemoryPool_CFindPath::NODE::_CPool::_CPool(&dword_4E0900);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (004B3040) --------------------------------------------------------
void __cdecl sub_4B3040()
{
  sub_410880((std::_Tree<std::_Tmap_traits<char const *,CItem *,iless,std::allocator<std::pair<char const * const,CItem *> >,0> > *)&unk_4E094C);
}

//----- (004B3050) --------------------------------------------------------
void __cdecl sub_4B3050()
{
  sub_472990(dword_4E0958);
}

//----- (004B3060) --------------------------------------------------------
void __cdecl sub_4B3060()
{
  sub_418A30(dword_4E0968);
}

//----- (004B3070) --------------------------------------------------------
void __cdecl sub_4B3070()
{
  sub_418A30(dword_4E0974);
}

//----- (004B3080) --------------------------------------------------------
void __usercall sub_4B3080(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E0980, a1, a2, a3);
}

//----- (004B3090) --------------------------------------------------------
void __cdecl sub_4B3090()
{
  sub_41D060(dword_4E09A4);
}

//----- (004B30A0) --------------------------------------------------------
void __usercall sub_4B30A0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E09B0, a1, a2, a3);
}

//----- (004B30B0) --------------------------------------------------------
void __cdecl sub_4B30B0()
{
  sub_41D1F0(dword_4E09C8);
}

//----- (004B30C0) --------------------------------------------------------
void __usercall sub_4B30C0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E09D4, a1, a2, a3);
}

//----- (004B30D0) --------------------------------------------------------
void __cdecl sub_4B30D0()
{
  sub_4209C0(&unk_4E09F0);
}

//----- (004B30E0) --------------------------------------------------------
void __cdecl sub_4B30E0()
{
  CIOException::CInit::~CInit((CIOException::CInit *)&unk_4E0DB4);
}

//----- (004B30F0) --------------------------------------------------------
void __usercall sub_4B30F0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)&unk_4E0FE8, a1, a2, a3);
}

//----- (004B3100) --------------------------------------------------------
void __cdecl sub_4B3100()
{
  CIOSocket::CInit::_CInit();
}

//----- (004B3110) --------------------------------------------------------
void __cdecl sub_4B3110()
{
  sub_4258D0((std::vector<CIOSocket::CIOTimer> *)&unk_4E100C);
}

//----- (004B3120) --------------------------------------------------------
void __cdecl sub_4B3120()
{
  CIOSocket::CIOTimerInstance::_CIOTimerInstance(&unk_4E1020);
}

//----- (004B3130) --------------------------------------------------------
void __cdecl sub_4B3130()
{
  sub_42FA40(dword_4E10B4);
}

//----- (004B3140) --------------------------------------------------------
void __cdecl sub_4B3140()
{
  sub_42FBD0(dword_4E10C0);
}

//----- (004B3150) --------------------------------------------------------
void __cdecl sub_4B3150()
{
  sub_42FD60(dword_4E10CC);
}

//----- (004B3160) --------------------------------------------------------
void __usercall sub_4B3160(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E10D8, a1, a2, a3);
}

//----- (004B3170) --------------------------------------------------------
void __cdecl sub_4B3170()
{
  sub_4320D0(dword_4E10F0);
}

//----- (004B3180) --------------------------------------------------------
void __cdecl sub_4B3180()
{
  sub_432260(dword_4E10FC);
}

//----- (004B3190) --------------------------------------------------------
void __usercall sub_4B3190(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CScreen::~CScreen((CScreen *)&unk_4E1128, a1, a2, a3);
}

//----- (004B31A0) --------------------------------------------------------
void __cdecl sub_4B31A0()
{
  CLog::CInit::~CInit((CLog::CInit *)&unk_4E115C);
}

//----- (004B31B0) --------------------------------------------------------
void __cdecl sub_4B31B0()
{
  sub_40F780((std::string *)&unk_4E1194);
}

//----- (004B31C0) --------------------------------------------------------
void __cdecl sub_4B31C0()
{
  sub_40F780((std::string *)&unk_4E11B0);
}

//----- (004B31D0) --------------------------------------------------------
void __cdecl sub_4B31D0()
{
  sub_40F780((std::string *)&unk_4E11CC);
}

//----- (004B31E0) --------------------------------------------------------
void __cdecl sub_4B31E0()
{
  sub_40F780((std::string *)&unk_4E11E8);
}

//----- (004B31F0) --------------------------------------------------------
void __cdecl sub_4B31F0()
{
  sub_40F780((std::string *)&unk_4E1204);
}

//----- (004B3200) --------------------------------------------------------
void __cdecl sub_4B3200()
{
  sub_40F780((std::string *)&unk_4E1220);
}

//----- (004B3210) --------------------------------------------------------
void __cdecl sub_4B3210()
{
  sub_40F780((std::string *)&unk_4E123C);
}

//----- (004B3220) --------------------------------------------------------
void __cdecl sub_4B3220()
{
  sub_433BF0(dword_4E1258);
}

//----- (004B3230) --------------------------------------------------------
void __cdecl sub_4B3230()
{
  sub_40F780((std::string *)&unk_4E1264);
}

//----- (004B3240) --------------------------------------------------------
void __cdecl sub_4B3240()
{
  sub_4477F0(dword_4E1820);
}

//----- (004B3250) --------------------------------------------------------
void __usercall sub_4B3250(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)&unk_4E182C, a1, a2, a3);
}

//----- (004B3260) --------------------------------------------------------
void __cdecl sub_4B3260()
{
  sub_447980(dword_4E184C);
}

//----- (004B3270) --------------------------------------------------------
void __usercall sub_4B3270(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E1858, a1, a2, a3);
}

//----- (004B3280) --------------------------------------------------------
void __cdecl sub_4B3280()
{
  sub_447A70(dword_4E1870);
}

//----- (004B3290) --------------------------------------------------------
void __usercall sub_4B3290(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E187C, a1, a2, a3);
}

//----- (004B32A0) --------------------------------------------------------
void __cdecl sub_4B32A0()
{
  CGenMonster::_CGenMonster(&unk_4E1898);
}

//----- (004B32B0) --------------------------------------------------------
void __cdecl sub_4B32B0()
{
  sub_4370E0((int)&unk_4E18F0, 32, 2, (int (__thiscall *)(int))CIOCriticalSection::~CIOCriticalSection);
}

//----- (004B32D0) --------------------------------------------------------
void __cdecl sub_4B32D0()
{
  CNPCObject::_CNPCObject(dword_4E1930);
}
// 4E1930: using guessed type int dword_4E1930[26];

//----- (004B32E0) --------------------------------------------------------
void __cdecl sub_4B32E0()
{
  CNPCObject::_CNPCObject(dword_4E1998);
}
// 4E1998: using guessed type int dword_4E1998[26];

//----- (004B32F0) --------------------------------------------------------
void __cdecl sub_4B32F0()
{
  CNPCObject::_CNPCObject(dword_4E1A00);
}
// 4E1A00: using guessed type int dword_4E1A00[25];

//----- (004B3300) --------------------------------------------------------
void __cdecl sub_4B3300()
{
  sub_44B920(dword_4E1A9C);
}

//----- (004B3310) --------------------------------------------------------
void __cdecl sub_4B3310()
{
  sub_44BB90(dword_4E1AA8);
}

//----- (004B3320) --------------------------------------------------------
void __cdecl sub_4B3320()
{
  sub_44BE00(dword_4E1AB4);
}

//----- (004B3330) --------------------------------------------------------
void __usercall sub_4B3330(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E1AC0, a1, a2, a3);
}

//----- (004B3340) --------------------------------------------------------
void __cdecl sub_4B3340()
{
  CNPCObject::_CNPCObject(dword_4E1AD8);
}
// 4E1AD8: using guessed type int dword_4E1AD8[24];

//----- (004B3350) --------------------------------------------------------
void __usercall sub_4B3350(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)&unk_4E1B38, a1, a2, a3);
}

//----- (004B3360) --------------------------------------------------------
void __usercall sub_4B3360(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)&unk_4E1B58, a1, a2, a3);
}

//----- (004B3370) --------------------------------------------------------
void __usercall sub_4B3370(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)&unk_4E1B78, a1, a2, a3);
}

//----- (004B3380) --------------------------------------------------------
void __cdecl sub_4B3380()
{
  sub_44CEE0(dword_4E1B9C);
}

//----- (004B3390) --------------------------------------------------------
void __cdecl sub_4B3390()
{
  sub_44D150(dword_4E1F38);
}

//----- (004B33A0) --------------------------------------------------------
void __cdecl sub_4B33A0()
{
  sub_44FBF0(dword_4E1FC4);
}

//----- (004B33B0) --------------------------------------------------------
void __usercall sub_4B33B0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CIOCriticalSection::~CIOCriticalSection((CIOCriticalSection *)&unk_4E1FD0, a1, a2, a3);
}

//----- (004B33C0) --------------------------------------------------------
void __cdecl sub_4B33C0()
{
  sub_47A8D0(dword_4E2020);
}

//----- (004B33D0) --------------------------------------------------------
void __usercall sub_4B33D0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E202C, a1, a2, a3);
}

//----- (004B33E0) --------------------------------------------------------
void __cdecl sub_4B33E0()
{
  sub_47A9C0(dword_4E2044);
}

//----- (004B33F0) --------------------------------------------------------
void __usercall sub_4B33F0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E2050, a1, a2, a3);
}

//----- (004B3400) --------------------------------------------------------
void __cdecl sub_4B3400()
{
  sub_47A8D0(dword_4E2068);
}

//----- (004B3410) --------------------------------------------------------
void __cdecl sub_4B3410()
{
  sub_4370E0((int)&unk_4E2078, 32, 2, (int (__thiscall *)(int))CIOCriticalSection::~CIOCriticalSection);
}

//----- (004B3430) --------------------------------------------------------
void __usercall sub_4B3430(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E20B8, a1, a2, a3);
}

//----- (004B3440) --------------------------------------------------------
void __cdecl sub_4B3440()
{
  sub_472990(dword_4E20D0);
}

//----- (004B3450) --------------------------------------------------------
void __usercall sub_4B3450(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E20DC, a1, a2, a3);
}

//----- (004B3460) --------------------------------------------------------
void __cdecl sub_4B3460()
{
  CIOSocket::CIOTimerInstance::_CIOTimerInstance(&unk_4E20F4);
}

//----- (004B3470) --------------------------------------------------------
void __cdecl sub_4B3470()
{
  sub_47DAD0(dword_4E210C);
}

//----- (004B3480) --------------------------------------------------------
void __usercall sub_4B3480(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E2118, a1, a2, a3);
}

//----- (004B3490) --------------------------------------------------------
void __cdecl sub_4B3490()
{
  sub_47ECF0(dword_4E214C);
}

//----- (004B34A0) --------------------------------------------------------
void __cdecl sub_4B34A0()
{
  sub_47ECD0((std::numpunct<char> *)&unk_4E2158);
}

//----- (004B34B0) --------------------------------------------------------
void __usercall sub_4B34B0(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CRWLock::~CRWLock((CRWLock *)&unk_4E2170, a1, a2, a3);
}

//----- (004B34C0) --------------------------------------------------------
void __cdecl sub_4B34C0()
{
  sub_4808E0(dword_4E218C);
}

//----- (004B34D0) --------------------------------------------------------
void __cdecl sub_4B34D0()
{
  sub_4808E0(dword_4E2198);
}

//----- (004B34E0) --------------------------------------------------------
void __cdecl sub_4B34E0()
{
  sub_493FC0(dword_4E2748);
}

//----- (004B34F0) --------------------------------------------------------
void __cdecl sub_4B34F0()
{
  sub_4370E0((int)&unk_4E2758, 60, 32, (int (__thiscall *)(int))sub_493F90);
}

//----- (004B3510) --------------------------------------------------------
void __usercall sub_4B3510(DWORD a1@<ebx>, DWORD a2@<edi>, DWORD a3@<esi>)
{
  CScreen::~CScreen((CScreen *)&unk_4E2EDC, a1, a2, a3);
}

//----- (004B3520) --------------------------------------------------------
void __cdecl sub_4B3520()
{
  unknown_libname_1();
}

// nfuncs=3729 queued=3360 decompiled=3360 lumina nreq=0 worse=0 better=0
// ALL OK, 3360 function(s) have been successfully decompiled
