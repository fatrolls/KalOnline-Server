/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2009 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Data declarations

extern _UNKNOWN loc_49F2E1; // weak
extern _UNKNOWN loc_4A1025; // weak
extern _UNKNOWN loc_4A17E4; // weak
// extern PGET_MODULE_BASE_ROUTINE SymGetModuleBase;
// extern PFUNCTION_TABLE_ACCESS_ROUTINE SymFunctionTableAccess;
extern int (__stdcall *off_4B433C)(int); // weak
extern char aCanTConnectToA[]; // idb
extern char byte_4B437D; // idb
extern char aConnectionClos[]; // idb
extern char aInvalidPacketT[]; // idb
extern char aDddd[5]; // weak
extern char aShutdownSStart[]; // idb
extern char aShutdownShutdo[]; // idb
extern char aShutdownSCance[]; // idb
extern char aGmCommandNotic[]; // idb
extern char aS[2]; // weak
extern char aDs[3]; // weak
extern char aDw[3]; // weak
extern char aDd[3]; // weak
extern char aDdd[4]; // weak
extern char aM[2]; // weak
extern char aDb[3]; // weak
extern char aDbds[5]; // weak
extern char aD[2]; // weak
extern char aDwwd[5]; // weak
extern char aDbww[5]; // weak
extern char aDddwbdddb[10]; // weak
extern char aDdbbdds[8]; // weak
extern char aAuthServerVers[]; // idb
extern char aWb[3]; // weak
extern char aCountryCodeIsD[]; // idb
extern char aAuthVersionIsD[]; // idb
extern char aBdb[4]; // weak
extern int (__stdcall *off_4B4564)(int); // weak
extern int (__stdcall *off_4B457C)(int); // weak
extern int (__stdcall *off_4B4598)(int); // weak
extern char aInvalidSymbolD[]; // idb
extern char aInvalidSymbolS[]; // idb
extern int (__stdcall *off_4B4630[3])(int); // weak
extern char aCbuffCreatebuf[]; // idb
extern int (__stdcall *off_4B467C[3])(int); // weak
extern int (__stdcall *off_4B4698[3])(int); // weak
extern int (__stdcall *off_4B46B4[3])(int); // weak
extern int (__stdcall *off_4B46D0[3])(int); // weak
extern int (__stdcall *off_4B46EC[3])(int); // weak
extern int (__stdcall *off_4B4708[3])(int); // weak
extern int (__stdcall *off_4B4724[3])(int); // weak
extern int (__stdcall *off_4B4740[3])(int); // weak
extern int (__stdcall *off_4B475C[3])(int); // weak
extern int (__stdcall *off_4B4778[3])(int); // weak
extern int (__stdcall *off_4B4794[3])(int); // weak
extern int (__stdcall *off_4B47B0[3])(int); // weak
extern int (__stdcall *off_4B47CC[3])(int); // weak
extern int (__stdcall *off_4B47E8[3])(int); // weak
extern int (__stdcall *off_4B4804[3])(int); // weak
extern int (__stdcall *off_4B4820[3])(int); // weak
extern int (__stdcall *off_4B483C[3])(int); // weak
extern int (__stdcall *off_4B4858[3])(int); // weak
extern int (__stdcall *off_4B4874[3])(int); // weak
extern int (__stdcall *off_4B4890[3])(int); // weak
extern int (__stdcall *off_4B48AC[3])(int); // weak
extern int (__stdcall *off_4B48C8[3])(int); // weak
extern int (__stdcall *off_4B48E4[3])(int); // weak
extern int (__stdcall *off_4B4900[3])(int); // weak
extern int (__stdcall *off_4B491C[3])(int); // weak
extern int (__stdcall *off_4B4938[3])(int); // weak
extern int (__stdcall *off_4B4954[3])(int); // weak
extern int (__stdcall *off_4B4970[3])(int); // weak
extern int (__stdcall *off_4B498C[3])(int); // weak
extern int (__stdcall *off_4B49A8[3])(int); // weak
extern int (__stdcall *off_4B49C4[3])(int); // weak
extern int (__stdcall *off_4B49E0[3])(int); // weak
extern int (__stdcall *off_4B49FC[3])(int); // weak
extern int (__stdcall *off_4B4A18[3])(int); // weak
extern int (__stdcall *off_4B4A34[3])(int); // weak
extern int (__stdcall *off_4B4A50[3])(int); // weak
extern int (__stdcall *off_4B4A6C[3])(int); // weak
extern int (__stdcall *off_4B4A88[3])(int); // weak
extern int (__stdcall *off_4B4AA4[3])(int); // weak
extern int (__stdcall *off_4B4AC0[3])(int); // weak
extern char aBbddww[7]; // weak
extern char aDbdb[5]; // weak
extern char aBid[4]; // weak
extern char aBb[3]; // weak
extern char aBw[3]; // weak
extern int (__stdcall *off_4B4AF8)(int); // weak
extern int (__stdcall *off_4B4B10)(int); // weak
extern int (*off_4B4BCC[40])(); // weak
extern int (*off_4B4C1C[20])(); // weak
extern int (*off_4B4C44[10])(); // weak
extern char aInvalidFormatS[]; // idb
extern char aDuplicateKeySD[]; // idb
extern char aSFileOpenFaile[]; // idb
extern char aRb[]; // idb
extern char a1[]; // idb
extern int (__stdcall *off_4B4CEC)(int); // weak
extern char aCanTConnectToD[]; // idb
extern char aConnectionCl_0[]; // idb
extern char aInvalidPacke_0[]; // idb
extern char aDbddbbddwbd[12]; // weak
extern char aDbddb[6]; // weak
extern char aDbb[4]; // weak
extern char aDbbss[6]; // weak
extern char aDbdd[5]; // weak
extern char aBm[3]; // weak
extern char aD2s_guild_same[]; // idb
extern char aDbs[4]; // weak
extern char aB[2]; // weak
extern char aDbw[4]; // weak
extern char aDbServerVersio[]; // idb
extern char aSystemOrEventI[]; // idb
extern char aCanTGetItemId[]; // idb
extern char aCountryCodeI_0[]; // idb
extern char aDbVersionIsDif[]; // idb
extern char aBddddb[7]; // weak
extern int (__stdcall *off_4B4EE8)(int); // weak
extern int (__stdcall *off_4B4F00)(int); // weak
extern int (__stdcall *off_4B4F48)(int); // weak
extern char aMapSetTTooLong[20]; // weak
extern char aUnknown[8]; // weak
extern int dword_4B4FB8; // weak
extern char aListTTooLong[17]; // weak
extern char aInvalidMapSetT[28]; // weak
extern int (__stdcall *off_4B4FF0)(int); // weak
extern char aCguildLoadMemb[]; // idb
extern char aCguildadminLoa[]; // idb
extern char aBbs[4]; // weak
extern char aBbsb[5]; // weak
extern char aCguildLoginG_0[]; // idb
extern char aCguildLoginGui[]; // idb
extern char aCguildLogoutMe[]; // idb
extern char aCguildDelpla_1[]; // idb
extern char aCguildDelpla_0[]; // idb
extern char aCguildDelplaye[]; // idb
extern char aBdssbd[7]; // weak
extern char aDbm[4]; // weak
extern char aCguildCreate_0[]; // idb
extern char aCguildCreatetr[]; // idb
extern char aBbsd[5]; // weak
extern char aCguildCreate_1[]; // idb
extern char aCguildCreateco[]; // idb
extern char aCguildCreategu[]; // idb
extern char aBdds[5]; // weak
extern char aCguildConfluxM[]; // idb
extern char aCguildConfluxs[]; // idb
extern char aCguildSecessio[]; // idb
extern char aCguildBanishPl[]; // idb
extern char aCguildBanishMe[]; // idb
extern char aDbd[4]; // weak
extern char aBbd[4]; // weak
extern char aCguildAppointm[]; // idb
extern char aCguildDissol_0[]; // idb
extern char aCguildDissolut[]; // idb
extern char aBbbs[5]; // weak
extern char aCguildTitelcha[]; // idb
extern char aBbdddd[7]; // weak
extern char aBdsssssssbm[12]; // weak
extern char aBddddd[7]; // weak
extern char aDddddd[7]; // weak
extern char aCguildSetexpad[]; // idb
extern char aSd[3]; // weak
extern char aCguildSetconne[]; // idb
extern char a6[]; // idb
extern char a5[]; // idb
extern char a4[2]; // idb
extern char a3[2]; // idb
extern char a2[2]; // idb
extern char aCguildSetpoint[]; // idb
extern char aBbdsd[6]; // weak
extern char aBbsdssd[8]; // weak
extern char aCguildWardecla[]; // idb
extern char aBbds[5]; // weak
extern char aBbdb[5]; // weak
extern char aBbb[4]; // weak
extern char aCguildTaxlevyF[]; // idb
extern int (__stdcall *off_4B56A0)(int); // weak
extern char aCallianceLoadA[]; // idb
extern char aDdb[4]; // weak
extern char aBdbdss[7]; // weak
extern char aCallianceJoinA[]; // idb
extern char aCallianceExpir[]; // idb
extern char aBdbm[5]; // weak
extern int (__stdcall *off_4B5798)(int); // weak
extern char aCcastleLoadGui[]; // idb
extern char aCcastleLoadCas[]; // idb
extern char aCcastleWarbegi[]; // idb
extern char aBbddm[6]; // weak
extern char aBbbb[5]; // weak
extern char aBbbm[5]; // weak
extern char aCcastleUnfurls[]; // idb
extern char aBbdsb[6]; // weak
extern char aBbsbb[6]; // weak
extern char aCcastleWarend[17]; // idb
extern char aCcastleIswaren[19]; // idb
extern int (__stdcall *off_4B58F0)(int); // weak
extern char aCwarLoadNotFin[]; // idb
extern char aVectorTTooLong[19]; // weak
extern int (__stdcall *off_4B5978)(int); // weak
extern char aCinititemOpenD[]; // idb
extern char aCinititemSetIn[]; // idb
extern char aCinititemSetDu[]; // idb
extern char aCinititemSet_0[]; // idb
extern char aCinititemSetsp[]; // idb
extern int (__stdcall *off_4B5AA8[3])(int); // weak
extern int (__stdcall *off_4B5AB8[3])(int); // weak
extern int (__stdcall *off_4B5AC8[3])(int); // weak
extern int (__stdcall *off_4B5AD8[3])(int); // weak
extern int (__stdcall *off_4B5AE8[3])(int); // weak
extern int (__stdcall *off_4B5AF8[3])(int); // weak
extern int (__stdcall *off_4B5B08[3])(int); // weak
extern int (__stdcall *off_4B5B18[3])(int); // weak
extern int (__stdcall *off_4B5B28[3])(int); // weak
extern int (__stdcall *off_4B5B38[3])(int); // weak
extern int (__stdcall *off_4B5B48[3])(int); // weak
extern int (__stdcall *off_4B5B58)(int); // weak
extern char aCprefixSetDupl[]; // idb
extern char aStandard[9]; // weak
extern char aSword2h[8]; // weak
extern char aMask[5]; // weak
extern char aCocoon[7]; // weak
extern char aTransform[10]; // weak
extern char aAll[4]; // weak
extern char aXdodge[7]; // weak
extern char aXdefense[9]; // weak
extern char aXhit[5]; // weak
extern char aXmagic[7]; // weak
extern char aXattack[8]; // weak
extern char aMp[3]; // weak
extern char aHp[3]; // weak
extern char aMonk[5]; // weak
extern char aSpiritknight[13]; // weak
extern char aTalisman[9]; // weak
extern char aAssassin[9]; // weak
extern char aWarrior[8]; // weak
extern char aArcher[7]; // weak
extern char aMage[5]; // weak
extern char aKnight[7]; // weak
extern char aRepair[7]; // weak
extern char aCommon[7]; // weak
extern char aCoin[5]; // weak
extern char aEtc[4]; // weak
extern char aGem[4]; // weak
extern char aCharm[6]; // weak
extern char aRefresh[8]; // weak
extern char aTrinket[8]; // weak
extern char aNecklace[9]; // weak
extern char aRing[5]; // weak
extern char aBoots[6]; // weak
extern char aGauntlet[9]; // weak
extern char aLowerarmor[11]; // weak
extern char aUpperarmor[11]; // weak
extern char aHelmet[7]; // weak
extern char aShield[7]; // weak
extern char aBow[4]; // weak
extern char aWand[5]; // weak
extern char aSword[6]; // weak
extern char aMoney_0[6]; // weak
extern char aQuest[6]; // weak
extern char aGeneral[8]; // weak
extern char aOrnament[9]; // weak
extern char aDefense[8]; // weak
extern char aWeapon[7]; // weak
extern int (__stdcall *off_4B5D58)(int); // weak
extern char aSN_03d_03d_ksm[]; // idb
extern char aException_dmp[]; // idb
extern char String2[]; // idb
extern char aBufferOverrun[]; // idb
extern char aException02d_0[]; // idb
extern char aException02d02[]; // idb
extern char aQuit[7]; // weak
extern char a_[6]; // weak
extern char aSubjectExcepti[]; // idb
extern char aFromS[]; // idb
extern char aData[7]; // weak
extern char aRcptTo_S[]; // idb
extern char asc_4B5EA0[]; // idb
extern char asc_4B5EA4[]; // idb
extern char aMailFromS[]; // idb
extern char aHeloWww_inixso[24]; // weak
extern char aStackDump[]; // idb
extern char a02x[]; // idb
extern char aBytesAtCsEip[]; // idb
extern char aEdx08xEs04xEdi[]; // idb
extern char aEcx08xDs04xEsi[]; // idb
extern char aEbx08xSs04xEsp[]; // idb
extern char aEax08xCs04xEip[]; // idb
extern char aRegisters[]; // idb
extern char asc_4B5FB4[]; // idb
extern char aS_1[]; // idb
extern char aSLocation08xCa[]; // idb
extern char aWriteTo[9]; // weak
extern char aReadFrom[10]; // weak
extern char aSInModuleSAt04[]; // idb
extern char aStartAt02d02d0[]; // idb
extern char aUnknown_0[]; // idb
extern char aX04d02d02d02d0[]; // idb
extern char aFirstExcpetion[16]; // weak
extern char OutputString[]; // idb
extern _UNKNOWN unk_4B60D0; // weak
extern char aModuleList[]; // idb
extern char aUnknownExcepti[23]; // weak
extern char aAMicrosoftCExc[26]; // weak
extern char aADllInitializa[28]; // weak
extern char aAStackOverflow[17]; // weak
extern char aAPrivilegedIns[25]; // weak
extern char aAnIntegerOverf[20]; // weak
extern char aAnIntegerDivid[26]; // weak
extern char aAFloatUnderflo[18]; // weak
extern char aAFloatStackChe[20]; // weak
extern char aAFloatOverflow[17]; // weak
extern char aAFloatInvalidO[26]; // weak
extern char aAFloatInexactR[23]; // weak
extern char aAFloatDivideBy[23]; // weak
extern char aAFloatDenormal[25]; // weak
extern char aAArrayBoundsEx[24]; // weak
extern char aAnInvalidDispo[23]; // weak
extern char aANoncontinuabl[27]; // weak
extern char aAnIllegalInstr[23]; // weak
extern char aANoMemory[12]; // weak
extern char aAnInPageError[17]; // weak
extern char aAnAccessViolat[20]; // weak
extern char aABreakpoint[13]; // weak
extern char aADatatypeMisal[24]; // weak
extern char aAControlBreak[16]; // weak
extern char aAControlC[12]; // weak
extern char aS_0[]; // idb
extern char a08x_0[]; // idb
extern char a08x[]; // idb
extern _UNKNOWN unk_4B63F8; // weak
extern char aParams08x08x08[]; // idb
extern char aSS[]; // idb
extern char aSDS[]; // idb
extern char aSX[]; // idb
extern char a08x08x[]; // idb
extern char aCallStackInfor[]; // idb
extern char aBytesAtCsEip_0[]; // idb
extern char a08x08xS[]; // idb
extern char aIntelCallStack[]; // idb
extern _UNKNOWN unk_4B64B8; // weak
extern char aX04d02d02d02_0[]; // idb
extern char aEassert[]; // idb
extern char aCallStackInf_0[]; // idb
extern char aX04d02d02d02_1[]; // idb
extern char aCallStack[]; // idb
extern char aStackDump_0[]; // idb
extern char aRegisters_0[]; // idb
extern char aCiocriticalsec[]; // idb
extern char aRegisterwaitEr[]; // idb
extern char aCioobjectRel_0[]; // idb
extern char aCioobjectRelea[]; // idb
extern int (__stdcall *off_4B6624)(int); // weak
extern char aCiosocketReadX[]; // idb
extern char aCiosocketWrite[]; // idb
extern char aDifferentWrite[]; // idb
extern char aCiosocketWri_0[]; // idb
extern int (__stdcall *off_4B66D8)(int); // weak
extern char aRegisterwait_0[]; // idb
extern char aListenErrorD[]; // idb
extern char aBindErrorD[]; // idb
extern char aSocketErrorD[]; // idb
extern char aAcceptErrorD[]; // idb
extern char aCreateiocomple[]; // idb
extern int (__stdcall *off_4B677C)(int); // weak
extern int (__stdcall *off_4B6798)(int); // weak
extern char aCitemInsertini[]; // idb
extern char aCitemInsertpre[]; // idb
extern char aCitemInsertite[]; // idb
extern char aItemgroupRel_0[]; // idb
extern char aItemgroupReloa[]; // idb
extern char aConfigItemgrou[]; // idb
extern char aInvalidServerS[]; // idb
extern char aCitemNewitemIn[]; // idb
extern int (__stdcall *off_4B69E0)(int); // weak
extern int (__stdcall *off_4B6AC0)(int); // weak
extern char aCitemCreateite[]; // idb
extern char aWdddd[6]; // weak
extern char aDdwdbddd[9]; // weak
extern char aDwbbdbbdb[10]; // weak
extern char aDwbddbbdb[10]; // weak
extern char aDddwbd[7]; // weak
extern char aBsw[4]; // weak
extern char aDdbd[5]; // weak
extern char aBdwbddbbdds[12]; // weak
extern char aCitemInserti_0[]; // idb
extern int (__stdcall *off_4B6C50)(int); // weak
extern char aCitemweaponI_3[]; // idb
extern char aCitemweaponI_2[]; // idb
extern char aCitemweaponI_1[]; // idb
extern char aCitemweaponI_0[]; // idb
extern char aCitemweaponIni[]; // idb
extern char aDdw[4]; // weak
extern char aDddbd[6]; // weak
extern char aDddbb[6]; // weak
extern char aDdbbb[6]; // weak
extern char aDdbb[5]; // weak
extern char aDddbwddb[9]; // weak
extern char aBd[3]; // weak
extern int (__stdcall *off_4B6E58)(int); // weak
extern char aCitemdefense_3[]; // idb
extern char aCitemdefense_2[]; // idb
extern char aCitemdefense_1[]; // idb
extern char aCitemdefense_0[]; // idb
extern char aCitemdefenseIn[]; // idb
extern int (__stdcall *off_4B7038)(int); // weak
extern int (__stdcall *off_4B7118)(int); // weak
extern char aDdwdb[6]; // weak
extern char aExcessOfItemNu[]; // idb
extern int (__stdcall *off_4B7248)(int); // weak
extern int (__stdcall *off_4B7328)(int); // weak
extern char aNoldnum0UidDPi[]; // idb
extern char aNoldnum0UidD_0[]; // idb
extern int (__stdcall *off_4B7470)(int); // weak
extern char aBdwbbdbbdds[12]; // weak
extern int (__stdcall *off_4B7558)(int); // weak
extern char aCitemgroupInse[]; // idb
extern int (__stdcall *off_4B75D8)(int); // weak
extern char aCgoodsForcedst[]; // idb
extern char aDwwbb[6]; // weak
extern char aDwwb[5]; // weak
extern int (__stdcall *off_4B7678)(int); // weak
extern char aCgoodsOnloadDu[]; // idb
extern int (*off_4B76F0[10])(); // weak
extern char a02d02d02d02d02[]; // idb
extern char aAb[]; // idb
extern char aLog02d02d02d_e[]; // idb
extern char aLog02d02d02d_l[]; // idb
extern char aCanTInsertInto[]; // idb
extern char aCanTReadS_Line[]; // idb
extern char aD_0[]; // idb
extern char aCanTOpenS[]; // idb
extern char aRt[]; // idb
extern char aSystem[]; // idb
extern char aEvent[]; // idb
extern char aSOnPortD[]; // idb
extern char aTitle[]; // idb
extern char aSeed[]; // idb
extern char aMaillimitlv[]; // idb
extern char aLanguage[]; // idb
extern char aLanguagem_kr_t[17]; // weak
extern char aCountry[]; // idb
extern char aItemver[]; // idb
extern char aOdbc[]; // idb
extern void *off_4B7858; // weak
extern char aAuthport[]; // idb
extern char aDbport[]; // idb
extern char aPort[]; // idb
extern char aMailto[]; // idb
extern char aMailfrom[]; // idb
extern char aMailserver[]; // idb
extern char aAuthserver[]; // idb
extern char aDbserver[]; // idb
extern char a127_0_0_1[10]; // weak
extern char aMap[]; // idb
extern char a_Map[6]; // weak
extern char aAgelimit[]; // idb
extern char aServerid[]; // idb
extern char aMaxuser[]; // idb
extern char aNumberofthread[]; // idb
extern char aMainconfig_txt[]; // idb
extern char aCanTFindWordsI[]; // idb
extern char aExceptionTest[]; // idb
extern _UNKNOWN unk_4B7988; // weak
extern char Text[]; // idb
extern char Caption[]; // idb
extern char aShutdownServ_1[]; // idb
extern char aShutdownServ_0[]; // idb
extern char aShutdownServer[]; // idb
extern char aAssertDisabled[]; // idb
extern char aAssertEnabled[]; // idb
extern char aAddThreadCount[]; // idb
extern char aLogFlushed[]; // idb
extern char aStackDumpCompl[]; // idb
extern char aStackDumpStart[]; // idb
extern char aExceptionTestC[]; // idb
extern char aExceptionTestS[]; // idb
extern char aGmCommandNot_0[]; // idb
extern char aShutdownTimeSe[]; // idb
extern char aShutdownError[]; // idb
extern char aServerIsReadyO[]; // idb
extern char aSeedIsD[]; // idb
extern char aInitcryptIsDon[]; // idb
extern char a_hscrypt_initc[]; // idb
extern char aHackshieldInit[]; // idb
extern char a_anticpsvr_ini[]; // idb
extern char aConfigHackshie[22]; // weak
extern char aWsastartupErro[]; // idb
extern char aServerStarted[]; // idb
extern char aAnotherServerI[]; // idb
extern char aGlobal[8]; // weak
extern char aShutdownComple[]; // idb
extern char aHackshieldFina[]; // idb
extern char aShutdownStarte[]; // idb
extern int (__stdcall *off_4B7CE0)(int); // weak
extern char aCmonsterSetInv[]; // idb
extern char aCinitmonsterOn[]; // idb
extern char aCsellmap_getce[]; // idb
extern int (__stdcall *off_4B7DC8)(int); // weak
extern char aCgenmonsterSet[]; // idb
extern char aCgenmosnterOnl[]; // idb
extern int (__stdcall *off_4B7E78)(int); // weak
extern int (__stdcall *off_4B7E90)(int); // weak
extern int (__stdcall *off_4B7F88)(int); // weak
extern int (__stdcall *off_4B8090)(int); // weak
extern int (__stdcall *off_4B8198)(int); // weak
extern int (__stdcall *off_4B82A0)(int); // weak
extern int (__stdcall *off_4B8398)(int); // weak
extern int (__stdcall *off_4B8490)(int); // weak
extern int (__stdcall *off_4B8588)(int); // weak
extern int (__stdcall *off_4B8680)(int); // weak
extern int (__stdcall *off_4B8778)(int); // weak
extern int (__stdcall *off_4B8880)(int); // weak
extern int (__stdcall *off_4B8988)(int); // weak
extern int (__stdcall *off_4B8A90)(int); // weak
extern int (__stdcall *off_4B8B98)(int); // weak
extern int (__stdcall *off_4B8CA0)(int); // weak
extern int (__stdcall *off_4B8DA8)(int); // weak
extern int (__stdcall *off_4B8EB0)(int); // weak
extern int (__stdcall *off_4B8FB8)(int); // weak
extern int (__stdcall *off_4B90C0)(int); // weak
extern char aWdddwdddisbds[14]; // weak
extern int (__stdcall *off_4B91D8)(int); // weak
extern _UNKNOWN unk_4B92DC; // weak
extern char aDdwwb[6]; // weak
extern char aCsellmapIsmove[]; // idb
extern int (__stdcall *off_4B9308)(int); // weak
extern char aCmonsterguildw[]; // idb
extern char aCmonstermagicC[]; // idb
extern int (__stdcall *off_4B9470)(int); // weak
extern int (__stdcall *off_4B9578)(int); // weak
extern _UNKNOWN unk_4B967C; // weak
extern int (__stdcall *off_4B9680)(int); // weak
extern char aCinitnpcOnload[]; // idb
extern int (__stdcall *off_4B96F8)(int); // weak
extern char aCgennpcSetCanT[]; // idb
extern char aCgennpcOnloadD[]; // idb
extern int (__stdcall *off_4B97A0)(int); // weak
extern int (__stdcall *off_4B97B8)(int); // weak
extern char aCnpcCreateIn_0[]; // idb
extern char aCnpcCreateInva[]; // idb
extern int (__stdcall *off_4B98F0)(int); // weak
extern int (__stdcall *off_4B99D0)(int); // weak
extern int (__stdcall *off_4B9AB0)(int); // weak
extern int (__stdcall *off_4B9B90)(int); // weak
extern int (__stdcall *off_4B9C70)(int); // weak
extern int (__stdcall *off_4B9D50)(int); // weak
extern char aDwbdddwdd[10]; // weak
extern char aBddd[5]; // weak
extern char aBs[3]; // weak
extern char aConfigEtc_txt[]; // idb
extern char aReadingEtc___[]; // idb
extern char aConfigQuest_tx[]; // idb
extern char aReadingQuest__[]; // idb
extern char aConfigInitskil[]; // idb
extern char aReadingInitski[]; // idb
extern char aConfigInitnpc_[]; // idb
extern char aReadingInitnpc[]; // idb
extern char aConfigGoods_tx[]; // idb
extern char aReadingGoods__[]; // idb
extern char aReadingItemgro[]; // idb
extern char aConfigPrefix_t[]; // idb
extern char aReadingPrefix_[]; // idb
extern char aConfigInititem[]; // idb
extern char aReadingInitite[]; // idb
extern char aConfigGenmonst[]; // idb
extern char aReadingGenmons[]; // idb
extern char aConfigInitmons[]; // idb
extern char aReadingInitmon[]; // idb
extern char aConfigInitmap_[]; // idb
extern char aReadingMap___[]; // idb
extern char aCobjectdbOpe_0[]; // idb
extern char aCobjectdbOpenD[]; // idb
extern char aInvalidForma_1[]; // idb
extern char aInvalidForma_0[]; // idb
extern char aUnmatchedClose[]; // idb
extern char aSFileOpenFai_0[]; // idb
extern char aUnmatchedOpenP[]; // idb
extern char aInvalidForma_3[]; // idb
extern char aInvalidForma_2[]; // idb
extern char aSgdir[6]; // weak
extern char aSgxy[5]; // weak
extern char aSkillinfo[10]; // weak
extern char aCitem[6]; // weak
extern char aBstate[7]; // weak
extern char aCountry_0[8]; // weak
extern char aScenario[9]; // weak
extern char aSkill_0[6]; // weak
extern char aEffect[7]; // weak
extern char aMaxprotect[11]; // weak
extern char aTo[3]; // weak
extern char aFrom[5]; // weak
extern char aStbuff[7]; // weak
extern char aCode[5]; // weak
extern char aRevival[8]; // weak
extern char aProtect[8]; // weak
extern char aPay[4]; // weak
extern char aRage_0[5]; // weak
extern char aWarrelation[12]; // weak
extern char aCid[4]; // weak
extern char aRedistribute[13]; // weak
extern char aGuide[6]; // weak
extern char aItemrand[9]; // weak
extern char aImageex[8]; // weak
extern char aBuff[5]; // weak
extern char aChangeprefix[13]; // weak
extern char aCycle[6]; // weak
extern char aCooltime[9]; // weak
extern char aGstate[7]; // weak
extern char aSetgem[7]; // weak
extern char aCharming[9]; // weak
extern char aMaxlevel[9]; // weak
extern char aDroprate[9]; // weak
extern char aLinked[7]; // weak
extern char aOut[4]; // weak
extern char aIn[3]; // weak
extern char aLink[5]; // weak
extern char aNotclear[9]; // weak
extern char aClear[6]; // weak
extern char aSave[5]; // weak
extern char aSupoint[8]; // weak
extern char aContribute[11]; // weak
extern char aParty[6]; // weak
extern char aReward[7]; // weak
extern char aElse[5]; // weak
extern char aThen[5]; // weak
extern char aIf[3]; // weak
extern char aCase[5]; // weak
extern char aValue2[7]; // weak
extern char aValue1[7]; // weak
extern char aLasttime[9]; // weak
extern char aDelay[6]; // weak
extern char aPre[4]; // weak
extern char aSell[5]; // weak
extern char aDesc[5]; // weak
extern char aDir[4]; // weak
extern char aShape[6]; // weak
extern char aHtml[5]; // weak
extern char aMove_0[5]; // weak
extern char aGroup[6]; // weak
extern char aItem[5]; // weak
extern char aPlural[7]; // weak
extern char aUse[4]; // weak
extern char aWear[5]; // weak
extern char aAction[7]; // weak
extern char aImage[6]; // weak
extern char aTeleport[9]; // weak
extern char aSpecialty[10]; // weak
extern char aEndurance[10]; // weak
extern char aBuy[4]; // weak
extern char aLimit[6]; // weak
extern char aClass[6]; // weak
extern char aItemgroup[10]; // weak
extern char aExp[4]; // weak
extern char aSight[6]; // weak
extern char aRange[6]; // weak
extern char aAi[3]; // weak
extern char aFilename[9]; // weak
extern char aXy[3]; // weak
extern char aKind[5]; // weak
extern char aResistpalsy[12]; // weak
extern char aResistcurse[12]; // weak
extern char aResistlitning[14]; // weak
extern char aResistice[10]; // weak
extern char aResistfire[11]; // weak
extern char aResist[7]; // weak
extern char aMspeed[7]; // weak
extern char aAspeed[7]; // weak
extern char aAbsorb[7]; // weak
extern char aMagic[6]; // weak
extern char aAttack[7]; // weak
extern char aDodge[6]; // weak
extern char aHit[4]; // weak
extern char aDex[4]; // weak
extern char aWis[4]; // weak
extern char aInt[4]; // weak
extern char aHth[4]; // weak
extern char aStr[4]; // weak
extern char aRace[5]; // weak
extern char aLevel[6]; // weak
extern char aRect[5]; // weak
extern char aMax[4]; // weak
extern char aArea[5]; // weak
extern char aMap_0[4]; // weak
extern char aIndex[6]; // weak
extern char aName[5]; // weak
extern char aGoods[6]; // weak
extern char aPortal[7]; // weak
extern char aGoto[5]; // weak
extern char aGennpc[7]; // weak
extern char aNpc[4]; // weak
extern char aPrefix[7]; // weak
extern char aGenmonster[11]; // weak
extern char aMonster[8]; // weak
extern char aInitmap[8]; // weak
extern int (__stdcall *off_4BA5A0)(int); // weak
extern int (__stdcall *off_4BA5E8)(int); // weak
extern char aCpartyOnfreePD[]; // idb
extern char aBdsbbww[8]; // weak
extern char aCpartyLeaveNot[]; // idb
extern int (__stdcall *off_4BA660)(int); // weak
extern char aDdddddd[8]; // weak
extern char aCurrencyIncrem[]; // idb
extern char a__totalSumDD[]; // idb
extern char aTotalSumDDDD[]; // idb
extern char a__02d02dDD[]; // idb
extern char a02d02dDDDD[]; // idb
extern char aCplayerOndelet[]; // idb
extern char aDsbdddwdmbbiss[18]; // weak
extern char aBi[3]; // weak
extern char aSamePlayerOnGa[]; // idb
extern char aInvalidStateAt[]; // idb
extern char aInvalidPacke_1[]; // idb
extern char aC2s_mailWrongT[]; // idb
extern char aC2s_frdWrongTy[]; // idb
extern char aDdddd[6]; // weak
extern char aDbwbb[6]; // weak
extern char aWrongPacketAtC[]; // idb
extern char aWww[4]; // weak
extern char aWwwwwww[8]; // weak
extern char aDbbd[5]; // weak
extern char aCreateItemFail[]; // idb
extern char aInsert_failAtC[]; // idb
extern char aCplayerOnloa_1[]; // idb
extern char aCplayerOnloa_0[]; // idb
extern char aM_pmoneyM_nnum[]; // idb
extern char aCplayerOnloa_2[29]; // idb
extern char aCplayerOnloadp[]; // idb
extern char aWdd[4]; // weak
extern char aBsbwbbbbbwwwww[31]; // weak
extern char aCplayer_create[]; // idb
extern char aDbbwibbbbbbwww[23]; // weak
extern char aBww[4]; // weak
extern int (__stdcall *off_4BAC50)(int); // weak
extern char aBbwwww[7]; // weak
extern char aBbwwwww[8]; // weak
extern char aBbwww[6]; // weak
extern char aBwwwww[7]; // weak
extern char aBdddb[6]; // weak
extern char aMapIs1_PidDUid[]; // idb
extern char aCplayerOntelep[]; // idb
extern char aCplayer_outofi[]; // idb
extern char aKickoutAtBuyit[]; // idb
extern char asc_4BAD60[1]; // idb
extern _UNKNOWN unk_4BADB4; // weak
extern char aCplayerSellite[]; // idb
extern char a_insertitem[19]; // idb
extern char aOX[12]; // idb
extern char aFailToInsertTr[]; // idb
extern char aBds[4]; // weak
extern char aBddb[5]; // weak
extern char aDbbs[5]; // weak
extern char aCplayerSaveq_0[]; // idb
extern char aCplayerSaveque[]; // idb
extern char aDwbb[5]; // weak
extern char aWbb[4]; // weak
extern char aBbss[5]; // weak
extern char asc_4BAFAC[]; // idb
extern char aSs[3]; // weak
extern char aReturn[]; // idb
extern char aLuxury[]; // idb
extern char aEvent_1[]; // idb
extern char aQueen[]; // idb
extern char aNest[]; // idb
extern char aLord[]; // idb
extern char aGposition[]; // idb
extern char aAdddef[]; // idb
extern char aAddotp[]; // idb
extern char aAddatk[]; // idb
extern char aAddevasion[]; // idb
extern char aEgggrade[]; // idb
extern char aRage[]; // idb
extern char aRageadd[]; // idb
extern char aAddresist[]; // idb
extern char aResetquest[]; // idb
extern char aFinishquest[]; // idb
extern char aAddquest[]; // idb
extern char aAddcp[]; // idb
extern char aAddmp[]; // idb
extern char aAddhp[]; // idb
extern char aWarbegin[]; // idb
extern char aResetlevel[]; // idb
extern char aBuffoff[]; // idb
extern char aLevelup[]; // idb
extern char aWarend[]; // idb
extern char aSnow[]; // idb
extern char aJmp[]; // idb
extern char aGetexp[]; // idb
extern char aDeclare[]; // idb
extern char aPktime[]; // idb
extern char aSkillredit[]; // idb
extern char aDD[]; // idb
extern char aSkill[]; // idb
extern char aCharmingCheatI[]; // idb
extern char aItemattribute[]; // idb
extern char aAnnstore[]; // idb
extern char aRevertitem[]; // idb
extern char aCreateCheatIte[]; // idb
extern char aAnn[]; // idb
extern char aUnblock[]; // idb
extern char aBlock[]; // idb
extern char aTest[]; // idb
extern char aPortuser[]; // idb
extern char aAnnsay[]; // idb
extern char a02dGmDMDMaxD[]; // idb
extern char a02d02dGmDMDMax[]; // idb
extern char aDpadpfdpatmxpd[]; // idb
extern char aChanged02dGmDM[]; // idb
extern char aChanged02d02dG[]; // idb
extern char aDDDD[]; // idb
extern char aDpadpfdpatpt[]; // idb
extern char aLocation[]; // idb
extern char aAddabsorb[]; // idb
extern char aShutdownoff[]; // idb
extern char aShutdownCancel[]; // idb
extern char aShutdownStar_0[]; // idb
extern char aShutdonn[]; // idb
extern char aResetMaximumUs[]; // idb
extern char aMaxUserD[]; // idb
extern char aMaxuser_0[]; // idb
extern char aEvent_0[]; // idb
extern char aD_1[]; // idb
extern char aSystem_0[]; // idb
extern char aInfosys[]; // idb
extern char aEventoff[]; // idb
extern char aEventnn[]; // idb
extern char aSysoff[]; // idb
extern char aSyson[]; // idb
extern char aGuildexp[]; // idb
extern char aMoney[]; // idb
extern char aActive[]; // idb
extern char aBbww[5]; // weak
extern char aUserall[8]; // idb
extern char aMove[]; // idb
extern char aSIsnTInPlayerL[]; // idb
extern char aSUidDPidDClass[]; // idb
extern char aInfo[]; // idb
extern char aDDD[]; // idb
extern char aMove2[]; // idb
extern char aKickoutAtTSPid[]; // idb
extern char aKick[]; // idb
extern char aHide[]; // idb
extern char aGmCommandSPidD[]; // idb
extern char aCplayerProcess[]; // idb
extern char aBwd[4]; // weak
extern char aBbbbb[6]; // weak
extern char aProcesseventRe[]; // idb
extern char aCplayerEventse[]; // idb
extern char aDbddbsbb[9]; // weak
extern char aBddbd[6]; // weak
extern char aM_mapfrd_sizeM[]; // idb
extern char aR_secondAtFrd_[]; // idb
extern char aBycountMax_frd[]; // idb
extern char aBycount0AtFrd_[]; // idb
extern char aDbbm[5]; // weak
extern char aBdsb[5]; // weak
extern char aDbdbbssdbwbdds[15]; // weak
extern char aDbddbbddwdd[12]; // weak
extern char aCplayerMails_0[]; // idb
extern char aCplayerMailsen[]; // idb
extern char aBdbb[5]; // weak
extern char aDbddd[6]; // weak
extern char aBdbdwm[7]; // weak
extern char aBdbdwmm[8]; // weak
extern char aDbdw[5]; // weak
extern char aDbddbd[7]; // weak
extern char aKickoutAtMail_[]; // idb
extern char aCplayerMailpro[]; // idb
extern char aBycountMail_ma[]; // idb
extern char aDbbdsdbwbdd[12]; // weak
extern char asc_4BB928[3]; // idb
extern char aSdwbdd[7]; // weak
extern char aCookingItemI_7[]; // idb
extern char aCookingItemI_6[]; // idb
extern char aCookingItemI_5[]; // idb
extern char aCookingItemI_4[]; // idb
extern char aCookingItemI_3[]; // idb
extern char aCookingItemI_2[]; // idb
extern char aCookingItemI_1[]; // idb
extern char aCookingItemI_0[]; // idb
extern char aCookingItemIns[]; // idb
extern char aSss[4]; // weak
extern char aBdm[4]; // weak
extern char aDbss[5]; // weak
extern char aDbsbddd[8]; // weak
extern char aCplayerOnsetmy[]; // idb
extern char aDdddw[6]; // weak
extern char aDdss[5]; // weak
extern char aOnchangeplayer[]; // idb
extern char aOnchangeguildn[]; // idb
extern char aBdwws[6]; // weak
extern char aSiegegunproces[]; // idb
extern char aSiegeguncontro[]; // idb
extern char asc_4BBD80[1]; // idb
extern char aEnforceItem_0[14]; // idb
extern char aEnforceItem[16]; // idb
extern char aEnforceitemP_1[]; // idb
extern char aEnforceitemP_0[]; // idb
extern char aEnforceitemPid[]; // idb
extern char aMixitemItemIns[]; // idb
extern char aMixitemInsertI[]; // idb
extern char aMixitemPidDI_0[]; // idb
extern char aMixitemPidDIte[]; // idb
extern char aMixitemPidDNot[]; // idb
extern int (__stdcall *off_4BBF54)(int); // weak
extern char aCactionitemAct[]; // idb
extern char aCcaseSetcond_0[]; // idb
extern char aCcaseSetcondit[]; // idb
extern int (__stdcall *off_4BC020[3])(int); // weak
extern int (__stdcall *off_4BC030[18])(int); // weak
extern int (__stdcall *off_4BC038[16])(int); // weak
extern int (__stdcall *off_4BC040[14])(int); // weak
extern int (__stdcall *off_4BC048[12])(int); // weak
extern int (__stdcall *off_4BC050[10])(int); // weak
extern int (__stdcall *off_4BC058[8])(int); // weak
extern int (__stdcall *off_4BC060[6])(int); // weak
extern int (__stdcall *off_4BC068[4])(int); // weak
extern int (__stdcall *off_4BC070[2])(int); // weak
extern char aCquestSetactio[]; // idb
extern char aCcaseSetacti_0[]; // idb
extern char aCcaseSetaction[]; // idb
extern int (__stdcall *off_4BC110[3])(int); // weak
extern int (__stdcall *off_4BC120[26])(int); // weak
extern int (__stdcall *off_4BC128[24])(int); // weak
extern int (__stdcall *off_4BC130[22])(int); // weak
extern int (__stdcall *off_4BC138[20])(int); // weak
extern int (__stdcall *off_4BC140[18])(int); // weak
extern int (__stdcall *off_4BC148[16])(int); // weak
extern int (__stdcall *off_4BC150[14])(int); // weak
extern int (__stdcall *off_4BC158[12])(int); // weak
extern int (__stdcall *off_4BC160[10])(int); // weak
extern int (__stdcall *off_4BC168[8])(int); // weak
extern int (__stdcall *off_4BC170[6])(int); // weak
extern int (__stdcall *off_4BC178[4])(int); // weak
extern int (__stdcall *off_4BC180[2])(int); // weak
extern char aCquestSetcondi[]; // idb
extern char aCquestSetcaseI[]; // idb
extern char aCquestProceedN[]; // idb
extern char aDddwbdd[8]; // weak
extern int (__stdcall *off_4BC224)(int); // weak
extern int (__stdcall *off_4BC240)(int); // weak
extern char aCinitskillOn_0[]; // idb
extern char aCinitskillOnlo[]; // idb
extern char aDuplicateKeyAt[]; // idb
extern char aCplayerskillSe[]; // idb
extern char aDbbw[5]; // weak
extern char aCplayerskillCh[]; // idb
extern char aBddbb[6]; // weak
extern char aBddbbwwb[9]; // weak
extern char aBdbbb[6]; // weak
extern char aCdemonbeastsum[]; // idb
extern int (__stdcall *off_4BC3F0)(int, int); // weak
extern int (__stdcall *off_4BC440)(int, int); // weak
extern int (__stdcall *off_4BC490)(int, int); // weak
extern int (__stdcall *off_4BC4E0)(int, int); // weak
extern int (__stdcall *off_4BC530)(int, int); // weak
extern int (__stdcall *off_4BC580)(int, int); // weak
extern int (__stdcall *off_4BC5D0)(int, int); // weak
extern int (__stdcall *off_4BC630)(int, int); // weak
extern int (__stdcall *off_4BC690)(int, int); // weak
extern int (__stdcall *off_4BC6F0)(int, int); // weak
extern int (__stdcall *off_4BC750)(int, int); // weak
extern int (__stdcall *off_4BC7A0)(int, int); // weak
extern int (__stdcall *off_4BC7F0)(int, int); // weak
extern int (__stdcall *off_4BC850)(int, int); // weak
extern int (__stdcall *off_4BC8B0)(int, int); // weak
extern int (__stdcall *off_4BC910)(int, int); // weak
extern int (__stdcall *off_4BC970)(int, int); // weak
extern int (__stdcall *off_4BC9D0)(int, int); // weak
extern int (__stdcall *off_4BCA30)(int, int); // weak
extern int (__stdcall *off_4BCA90)(int, int); // weak
extern int (__stdcall *off_4BCAF0)(int, int); // weak
extern int (__stdcall *off_4BCB50)(int, int); // weak
extern int (__stdcall *off_4BCBB0)(int, int); // weak
extern int (__stdcall *off_4BCC10)(int, int); // weak
extern int (__stdcall *off_4BCC70)(int, int); // weak
extern int (__stdcall *off_4BCCD0)(int, int); // weak
extern int (__stdcall *off_4BCD30)(int, int); // weak
extern int (__stdcall *off_4BCD90)(int, int); // weak
extern int (__stdcall *off_4BCDF0)(int, int); // weak
extern int (__stdcall *off_4BCE50)(int, int); // weak
extern int (__stdcall *off_4BCEB0)(int, int); // weak
extern int (__stdcall *off_4BCF10)(int, int); // weak
extern int (__stdcall *off_4BCF70)(int, int); // weak
extern int (__stdcall *off_4BCFD0)(int, int); // weak
extern int (__stdcall *off_4BD030)(int, int); // weak
extern int (__stdcall *off_4BD090)(int, int); // weak
extern int (__stdcall *off_4BD0F0)(int, int); // weak
extern int (__stdcall *off_4BD150)(int, int); // weak
extern int (__stdcall *off_4BD1C0)(int, int); // weak
extern int (__stdcall *off_4BD230)(int, int); // weak
extern int (__stdcall *off_4BD2A0)(int, int); // weak
extern int (__stdcall *off_4BD310)(int, int); // weak
extern int (__stdcall *off_4BD380)(int, int); // weak
extern int (__stdcall *off_4BD3F0)(int, int); // weak
extern int (__stdcall *off_4BD460)(int, int); // weak
extern int (__stdcall *off_4BD4D0)(int, int); // weak
extern int (__stdcall *off_4BD540)(int, int); // weak
extern int (__stdcall *off_4BD5B0)(int, int); // weak
extern int (__stdcall *off_4BD620)(int, int); // weak
extern int (__stdcall *off_4BD690)(int, int); // weak
extern int (__stdcall *off_4BD700)(int, int); // weak
extern int (__stdcall *off_4BD770)(int, int); // weak
extern int (__stdcall *off_4BD7E0)(int, int); // weak
extern int (__stdcall *off_4BD830)(int, int); // weak
extern int (__stdcall *off_4BD888)(int, int); // weak
extern int (__stdcall *off_4BD8E0)(int, int); // weak
extern int (__stdcall *off_4BD938)(int, int); // weak
extern int (__stdcall *off_4BD990)(int, int); // weak
extern int (__stdcall *off_4BD9E8)(int, int); // weak
extern int (__stdcall *off_4BDA40)(int, int); // weak
extern int (__stdcall *off_4BDA90)(int, int); // weak
extern int (__stdcall *off_4BDAE0)(int, int); // weak
extern int (__stdcall *off_4BDB30)(int, int); // weak
extern int (__stdcall *off_4BDB80)(int, int); // weak
extern int (__stdcall *off_4BDBD0)(int, int); // weak
extern int (__stdcall *off_4BDC20)(int, int); // weak
extern int (__stdcall *off_4BDC70)(int, int); // weak
extern int (__stdcall *off_4BDCC0)(int, int); // weak
extern int (__stdcall *off_4BDD10)(int, int); // weak
extern int (__stdcall *off_4BDD60)(int, int); // weak
extern int (__stdcall *off_4BDDB0)(int, int); // weak
extern int (__stdcall *off_4BDE08)(int, int); // weak
extern int (__stdcall *off_4BDE60)(int, int); // weak
extern int (__stdcall *off_4BDEB8)(int, int); // weak
extern int (__stdcall *off_4BDF08)(int, int); // weak
extern int (__stdcall *off_4BDF58)(int, int); // weak
extern int (__stdcall *off_4BDFA8)(int, int); // weak
extern int (__stdcall *off_4BDFF8)(int, int); // weak
extern int (__stdcall *off_4BE048)(int, int); // weak
extern int (__stdcall *off_4BE0A8)(int, int); // weak
extern int (__stdcall *off_4BE108)(int, int); // weak
extern int (__stdcall *off_4BE168)(int, int); // weak
extern int (__stdcall *off_4BE1B8)(int, int); // weak
extern int (__stdcall *off_4BE208)(int, int); // weak
extern int (__stdcall *off_4BE258)(int, int); // weak
extern int (__stdcall *off_4BE2A8)(int, int); // weak
extern int (__stdcall *off_4BE2F8)(int, int); // weak
extern int (__stdcall *off_4BE348)(int, int); // weak
extern int (__stdcall *off_4BE398)(int, int); // weak
extern int (__stdcall *off_4BE3E8)(int, int); // weak
extern int (__stdcall *off_4BE438)(int, int); // weak
extern int (__stdcall *off_4BE488)(int, int); // weak
extern int (__stdcall *off_4BE4D8)(int, int); // weak
extern int (__stdcall *off_4BE528)(int, int); // weak
extern int (__stdcall *off_4BE578)(int, int); // weak
extern int (__stdcall *off_4BE5C8)(int, int); // weak
extern int (__stdcall *off_4BE618)(int, int); // weak
extern int (__stdcall *off_4BE668)(int, int); // weak
extern int (__stdcall *off_4BE6B8)(int, int); // weak
extern int (__stdcall *off_4BE708)(int, int); // weak
extern int (__stdcall *off_4BE758)(int, int); // weak
extern int (__stdcall *off_4BE7A8)(int, int); // weak
extern int (__stdcall *off_4BE7F8)(int, int); // weak
extern int (__stdcall *off_4BE848)(int, int); // weak
extern int (__stdcall *off_4BE898)(int, int); // weak
extern int (__stdcall *off_4BE8E8)(int, int); // weak
extern int (__stdcall *off_4BE948)(int, int); // weak
extern int (__stdcall *off_4BE9A8)(int, int); // weak
extern int (__stdcall *off_4BEA08)(int, int); // weak
extern int (__stdcall *off_4BEA68)(int, int); // weak
extern int (__stdcall *off_4BEAC8)(int, int); // weak
extern int (__stdcall *off_4BEB28)(int, int); // weak
extern int (__stdcall *off_4BEB88)(int, int); // weak
extern int (__stdcall *off_4BEBE8)(int, int); // weak
extern int (__stdcall *off_4BEC48)(int, int); // weak
extern int (__stdcall *off_4BECA8)(int, int); // weak
extern int (__stdcall *off_4BED08)(int, int); // weak
extern int (__stdcall *off_4BED68)(int, int); // weak
extern int (__stdcall *off_4BEDC8)(int, int); // weak
extern int (__stdcall *off_4BEE28)(int, int); // weak
extern int (__stdcall *off_4BEE88)(int, int); // weak
extern int (__stdcall *off_4BEEE8)(int, int); // weak
extern int (__stdcall *off_4BEF48)(int, int); // weak
extern int (__stdcall *off_4BEFA8)(int, int); // weak
extern int (__stdcall *off_4BF000)(int, int); // weak
extern int (__stdcall *off_4BF058)(int, int); // weak
extern int (__stdcall *off_4BF0B0)(int, int); // weak
extern int (__stdcall *off_4BF108)(int, int); // weak
extern int (__stdcall *off_4BF160)(int, int); // weak
extern int (__stdcall *off_4BF1B8)(int, int); // weak
extern int (__stdcall *off_4BF210)(int, int); // weak
extern int (__stdcall *off_4BF268)(int, int); // weak
extern int (__stdcall *off_4BF2C0)(int, int); // weak
extern int (__stdcall *off_4BF318)(int, int); // weak
extern int (__stdcall *off_4BF370)(int, int); // weak
extern int (__stdcall *off_4BF3C8)(int, int); // weak
extern int (__stdcall *off_4BF420)(int, int); // weak
extern int (__stdcall *off_4BF478)(int, int); // weak
extern int (__stdcall *off_4BF4D0)(int, int); // weak
extern int (__stdcall *off_4BF528)(int, int); // weak
extern int (__stdcall *off_4BF588)(int, int); // weak
extern int (__stdcall *off_4BF5F8)(int, int); // weak
extern int (__stdcall *off_4BF648)(int, int); // weak
extern int (__stdcall *off_4BF6A8)(int, int); // weak
extern int (__stdcall *off_4BF708)(int, int); // weak
extern int (__stdcall *off_4BF758)(int, int); // weak
extern int (__stdcall *off_4BF7B8)(int, int); // weak
extern int (__stdcall *off_4BF808)(int, int); // weak
extern int (__stdcall *off_4BF858)(int, int); // weak
extern int (__stdcall *off_4BF8C8)(int, int); // weak
extern int (__stdcall *off_4BF938)(int, int); // weak
extern int (__stdcall *off_4BF9A8)(int, int); // weak
extern int (__stdcall *off_4BFA18)(int, int); // weak
extern int (__stdcall *off_4BFA68)(int, int); // weak
extern int (__stdcall *off_4BFAB8)(int, int); // weak
extern int (__stdcall *off_4BFB08)(int, int); // weak
extern int (__stdcall *off_4BFB68)(int, int); // weak
extern int (__stdcall *off_4BFBC8)(int, int); // weak
extern int (__stdcall *off_4BFC38)(int, int); // weak
extern int (__stdcall *off_4BFCA8)(int, int); // weak
extern int (__stdcall *off_4BFD18)(int, int); // weak
extern int (__stdcall *off_4BFD88)(int, int); // weak
extern int (__stdcall *off_4BFDF8)(int, int); // weak
extern int (__stdcall *off_4BFE68)(int, int); // weak
extern int (__stdcall *off_4BFEB8)(int, int); // weak
extern int (__stdcall *off_4BFF28)(int, int); // weak
extern int (__stdcall *off_4BFF98)(int, int); // weak
extern int (__stdcall *off_4C0008)(int, int); // weak
extern int (__stdcall *off_4C0068)(int, int); // weak
extern int (__stdcall *off_4C00D8)(int, int); // weak
extern int (__stdcall *off_4C0148)(int, int); // weak
extern int (__stdcall *off_4C01B8)(int, int); // weak
extern int (__stdcall *off_4C0218)(int, int); // weak
extern int (__stdcall *off_4C0268)(int, int); // weak
extern int (__stdcall *off_4C02C8)(int, int); // weak
extern int (__stdcall *off_4C0328)(int, int); // weak
extern int (__stdcall *off_4C0388)(int, int); // weak
extern int (__stdcall *off_4C03E8)(int, int); // weak
extern int (__stdcall *off_4C0458)(int, int); // weak
extern int (__stdcall *off_4C04C8)(int, int); // weak
extern int (__stdcall *off_4C0538)(int, int); // weak
extern int (__stdcall *off_4C0598)(int, int); // weak
extern int (__stdcall *off_4C0608)(int, int); // weak
extern int (__stdcall *off_4C0678)(int, int); // weak
extern char aCcellmapAlloct[]; // idb
extern char aCcellmapReadti[]; // idb
extern char aCsellmapSendde[]; // idb
extern char aCsellmapSendmo[]; // idb
extern char aCsellmapSendcr[]; // idb
extern char aCsellmapSendpa[]; // idb
extern char aCsellmapGetpla[]; // idb
extern char aCsellmapGetp_0[]; // idb
extern char aCsellmapGetclo[]; // idb
extern char aCsellmapGetmon[]; // idb
extern char aMapLoadingIsFa[]; // idb
extern char aCsmapLoadmapCa[]; // idb
extern char aDbbb[5]; // weak
extern char aCsmapMoveplaye[]; // idb
extern char aMoveHackPidDDe[]; // idb
extern char aInvalidMonster[]; // idb
extern int (__stdcall *off_4C0934)(int); // weak
extern char asc_4C094C[4]; // idb
extern int (__stdcall *off_4C0950)(int); // weak
extern char cp[]; // idb
extern char aNewConnectionI[]; // idb
extern char a_hscrypt_getde[]; // idb
extern char aInvalidBufferS[]; // idb
extern char aExceedBufferSi[]; // idb
extern char aClosePendingSo[]; // idb
extern char a_hscrypt_geten[]; // idb
extern char aInvalidState_0[]; // idb
extern char a_anticpsvr_a_0[]; // idb
extern char a_anticpsvr_ana[]; // idb
extern char aDbdss[6]; // weak
extern char aBss[4]; // weak
extern char aDsdbbbbbbbb[12]; // weak
extern char aBbbbbbbb[9]; // weak
extern char aDssdw[6]; // weak
extern char a_anticpsvr_m_0[]; // idb
extern char aDbddddbbb[10]; // weak
extern char aDbddddbbbmm[12]; // weak
extern char a_anticpsvr_mak[]; // idb
extern char aBwwd[5]; // weak
extern char aAccountBlockId[]; // idb
extern char aAccountFreeIdS[]; // idb
extern char aDdddb[6]; // weak
extern char aDdm[4]; // weak
extern char aNpcD[]; // idb
extern char aMonsterD[]; // idb
extern char aCur_Connection[]; // idb
extern char aMax_Connection[]; // idb
extern char aChangeOfCurren[]; // idb
extern char asc_4C0D8C[]; // idb
extern char aPendingAuthOut[]; // idb
extern char aPendingDbOutpu[]; // idb
extern char aRunningThreadD[]; // idb
extern char aCtileGetitemPP[]; // idb
extern int (__stdcall *off_4C0E08)(int); // weak
extern char byte_4C0E50[]; // weak
extern char byte_4C7250[]; // weak
extern char asc_4CD650[3]; // idb
extern char a__0[4]; // idb
extern _UNKNOWN unk_4CD658; // weak
extern _UNKNOWN unk_4CD678; // weak
extern int dword_4CD694; // weak
extern int dword_4CD698; // weak
extern int dword_4CD69C; // weak
extern int dword_4CD6A0; // weak
extern int dword_4CD6A4; // weak
extern int dword_4CD6A8; // weak
extern int dword_4CD6AC; // weak
extern int dword_4CD6B0; // weak
extern int dword_4CD6B4; // weak
extern int dword_4CD6B8; // weak
extern int dword_4CD708[]; // weak
extern int dword_4CDB08[]; // weak
extern int dword_4CDF08[]; // weak
extern int dword_4CE308[]; // weak
extern int dword_4CE708[]; // weak
extern int dword_4CEB08[]; // weak
extern int dword_4CEF08[]; // weak
extern int dword_4CF308[]; // weak
extern int dword_4CF708[]; // weak
extern int dword_4CFB08[]; // weak
extern int dword_4CFF08[]; // weak
extern int dword_4D0308[]; // weak
extern int dword_4D0708[]; // weak
extern int dword_4D0B08[]; // weak
extern int dword_4D0F08[]; // weak
extern int dword_4D1308[]; // weak
extern int dword_4D1708[]; // weak
extern int dword_4D1B08[]; // weak
extern int dword_4D1F08[]; // weak
extern int dword_4D2308[]; // weak
extern int (__stdcall *std__logic_error___vftable_)(int); // weak
extern int (__stdcall *std__length_error___vftable_)(int); // weak
extern int (__stdcall *std__out_of_range___vftable_)(int); // weak
extern char aInvalidStringP[24]; // weak
extern char aStringTooLong[16]; // weak
extern int (__stdcall *exception___vftable_)(char); // weak
extern RTTICompleteObjectLocator exception___RTTI_Complete_Object_Locator_[12]; // weak
extern _UNKNOWN unk_4D3D84; // weak
extern int dword_4D52FC[]; // weak
extern int dword_4D5678[]; // weak
extern int dword_4D567C[]; // weak
extern _DWORD dword_4D5998[7]; // idb
extern int dword_4D59B8[]; // weak
extern _DWORD dword_4D5A48[70]; // idb
extern int dword_4D5B60[]; // weak
extern int dword_4D5B64[]; // weak
extern int dword_4D5B68[]; // weak
extern int dword_4D5B6C[]; // weak
extern int dword_4D5B70[]; // weak
extern int dword_4D5B74[]; // weak
extern int dword_4D5B78[]; // weak
extern volatile LONG dword_4D5B7C; // idb
extern volatile LONG dword_4D5B80; // idb
extern volatile LONG dword_4D5B84; // idb
extern int dword_4D5B88[]; // weak
extern int dword_4D5BE8[]; // weak
extern int dword_4D5C48[]; // weak
extern int dword_4D5CA8[]; // weak
extern int dword_4D5E40[]; // weak
extern int dword_4D5E90[]; // weak
extern int dword_4D5EE8[]; // weak
extern int dword_4D5F38[]; // weak
extern int dword_4D5F90[]; // weak
extern int dword_4D5FE8[]; // weak
extern int dword_4D603C[]; // weak
extern int dword_4D6068[]; // weak
extern int dword_4D6090[]; // weak
extern int dword_4D60A4[]; // weak
extern int dword_4D60A8[]; // weak
extern int dword_4D60AC[]; // weak
extern int dword_4D60B0[]; // weak
extern int dword_4D60B4[]; // weak
extern int dword_4D60B8[]; // weak
extern int dword_4D62A0; // idb
extern char *off_4D62AC; // weak
extern int dword_4D62B0[]; // weak
extern int dword_4D62B4[]; // weak
extern int dword_4D62D8[]; // weak
extern int dword_4D62F0[]; // weak
extern int dword_4D6310[]; // weak
extern int dword_4D6330[]; // weak
extern int dword_4D63D0[]; // weak
extern int dword_4D63D4[]; // weak
extern int dword_4D63D8[]; // weak
extern int dword_4D669C[]; // weak
extern int dword_4D66AC[]; // weak
extern int dword_4D66BC[]; // weak
extern int dword_4D66C0[]; // weak
extern int dword_4D66C4[]; // weak
extern int dword_4D66F0[]; // weak
extern int dword_4D66F4[]; // weak
extern __int64 qword_4D6948; // weak
extern int dword_4D6A10[]; // weak
extern int dword_4D6A1C[]; // weak
extern _UNKNOWN unk_4D6A28; // weak
extern int dword_4D6A7C[]; // weak
extern int dword_4D6A88[]; // weak
extern int dword_4D6AB8[]; // weak
extern int dword_4D6AC4[]; // weak
extern int dword_4D6E60[]; // weak
extern int dword_4D6E64[]; // weak
extern _DWORD dword_4D77C8[77]; // idb
extern int dword_4D7900[]; // weak
extern _UNKNOWN unk_4D7904; // weak
extern int dword_4D7960[]; // weak
extern int dword_4D7D48[]; // weak
extern int dword_4D8130[]; // weak
extern int dword_4D82C8[]; // weak
extern int dword_4D8398[]; // weak
extern int dword_4D8528[]; // weak
extern int dword_4D8870[]; // weak
extern int dword_4D8BB8[]; // weak
extern int dword_4D8CAC[]; // weak
extern int dword_4D8CE4[]; // weak
extern int dword_4D8D00[]; // weak
extern int dword_4D9180[]; // weak
extern int dword_4D9198[]; // weak
extern int dword_4D91A4[]; // weak
extern int dword_4D91D0[]; // weak
extern int dword_4D9210[]; // weak
extern int dword_4D9248[]; // weak
extern int dword_4D9268[]; // weak
extern int dword_4D92BC[]; // weak
extern int dword_4D92DC[]; // weak
extern int dword_4D92FC[]; // weak
extern int dword_4D9320[]; // weak
extern int dword_4D9830; // weak
extern int (*off_4DA1C8)(void); // weak
extern _UNKNOWN unk_4DA3E0; // weak
extern _UNKNOWN unk_4DA3F8; // weak
extern HANDLE hHandle; // idb
extern int dword_4DA6E4; // weak
extern int dword_4DA6E8; // weak
extern _UNKNOWN unk_4DA6F0; // weak
extern volatile LONG Target; // idb
extern int dword_4DA75C; // weak
extern _UNKNOWN unk_4DA760; // weak
extern int dword_4DA764; // weak
extern _UNKNOWN unk_4DA768; // weak
extern volatile LONG Addend; // idb
extern int dword_4DA770; // weak
extern _UNKNOWN unk_4DA774; // weak
extern int dword_4DA778; // weak
extern int dword_4DA77C; // weak
extern int dword_4DA780; // weak
extern int dword_4DA784; // weak
extern int dword_4DA788; // weak
extern int dword_4DA78C; // weak
extern int dword_4DA790; // weak
extern int dword_4DA794; // weak
extern _UNKNOWN unk_4DA798; // weak
extern HANDLE dword_4DA7A8; // idb
extern int dword_4DA7AC; // weak
extern _UNKNOWN unk_4DA7B8; // weak
extern int dword_4DA7C8; // weak
extern int dword_4DA824; // weak
extern _UNKNOWN unk_4DA828; // weak
extern int dword_4DA9B0; // weak
extern int dword_4E0900; // weak
extern _UNKNOWN unk_4E0904; // weak
extern _UNKNOWN unk_4E0908; // weak
extern _UNKNOWN unk_4E094C; // weak
extern _UNKNOWN unk_4E0958; // weak
extern int dword_4E0964; // weak
extern _UNKNOWN unk_4E0968; // weak
extern _UNKNOWN unk_4E0974; // weak
extern _UNKNOWN unk_4E0980; // weak
extern HANDLE dword_4E0998; // idb
extern int dword_4E099C; // weak
extern int dword_4E09A0; // weak
extern _UNKNOWN unk_4E09A4; // weak
extern _UNKNOWN unk_4E09B0; // weak
extern _UNKNOWN unk_4E09C8; // weak
extern _UNKNOWN unk_4E09D4; // weak
extern _UNKNOWN unk_4E09F0; // weak
extern _UNKNOWN unk_4E0A00; // weak
extern _UNKNOWN unk_4E0A08; // weak
extern _UNKNOWN unk_4E0A10; // weak
extern _UNKNOWN unk_4E0A18; // weak
extern _UNKNOWN unk_4E0A20; // weak
extern _UNKNOWN unk_4E0A28; // weak
extern _UNKNOWN unk_4E0A30; // weak
extern _UNKNOWN unk_4E0A38; // weak
extern _UNKNOWN unk_4E0A40; // weak
extern _UNKNOWN unk_4E0A48; // weak
extern _UNKNOWN unk_4E0A50; // weak
extern _UNKNOWN unk_4E0A58; // weak
extern _UNKNOWN unk_4E0A60; // weak
extern _UNKNOWN unk_4E0A68; // weak
extern _UNKNOWN unk_4E0A70; // weak
extern _UNKNOWN unk_4E0A78; // weak
extern _UNKNOWN unk_4E0A80; // weak
extern _UNKNOWN unk_4E0A88; // weak
extern _UNKNOWN unk_4E0A90; // weak
extern _UNKNOWN unk_4E0A98; // weak
extern _UNKNOWN unk_4E0AA0; // weak
extern _UNKNOWN unk_4E0AA8; // weak
extern _UNKNOWN unk_4E0AB0; // weak
extern _UNKNOWN unk_4E0AB8; // weak
extern _UNKNOWN unk_4E0AC0; // weak
extern _UNKNOWN unk_4E0AC8; // weak
extern _UNKNOWN unk_4E0AD0; // weak
extern _UNKNOWN unk_4E0AD8; // weak
extern _UNKNOWN unk_4E0AE0; // weak
extern _UNKNOWN unk_4E0AE8; // weak
extern _UNKNOWN unk_4E0AF0; // weak
extern _UNKNOWN unk_4E0AF8; // weak
extern _UNKNOWN unk_4E0B00; // weak
extern _UNKNOWN unk_4E0B08; // weak
extern _UNKNOWN unk_4E0B10; // weak
extern _UNKNOWN unk_4E0B18; // weak
extern _UNKNOWN unk_4E0B20; // weak
extern _UNKNOWN unk_4E0B28; // weak
extern _UNKNOWN unk_4E0B30; // weak
extern _UNKNOWN unk_4E0B38; // weak
extern _UNKNOWN unk_4E0B40; // weak
extern _UNKNOWN unk_4E0B48; // weak
extern _UNKNOWN unk_4E0B50; // weak
extern _UNKNOWN unk_4E0B58; // weak
extern _UNKNOWN unk_4E0B60; // weak
extern _UNKNOWN unk_4E0B68; // weak
extern int dword_4E0B70; // weak
extern char dword_4E0B74[]; // idb
extern LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter; // idb
extern char byte_4E0B80[]; // idb
extern char FileName[]; // idb
extern time_t dword_4E0D8C; // idb
extern struct _RTL_CRITICAL_SECTION CriticalSection; // idb
extern char *dword_4E0DA8; // idb
extern int dword_4E0DAC; // idb
extern int dword_4E0DB0; // idb
extern _UNKNOWN unk_4E0DB4; // weak
extern int dword_4E0DB8; // weak
extern int dword_4E0DC0; // idb
extern int dword_4E0DC4; // idb
extern int dword_4E0DC8; // idb
extern DWORD nCount; // idb
extern int dword_4E0DD0[]; // weak
extern HANDLE Handles; // idb
extern int dword_4E0FD0; // weak
extern HANDLE hEvent; // idb
extern volatile LONG dword_4E0FD8; // idb
extern volatile LONG dword_4E0FDC; // idb
extern HANDLE CompletionPort; // idb
extern volatile LONG dword_4E0FE4; // idb
extern _UNKNOWN unk_4E0FE8; // weak
extern _UNKNOWN unk_4E100C; // weak
extern _UNKNOWN unk_4E1020; // weak
extern volatile LONG dword_4E1028; // idb
extern _DWORD dword_4E1030[32]; // idb
extern volatile LONG dword_4E10B0; // idb
extern _UNKNOWN unk_4E10B4; // weak
extern _UNKNOWN unk_4E10C0; // weak
extern _UNKNOWN unk_4E10CC; // weak
extern _UNKNOWN unk_4E10D8; // weak
extern _UNKNOWN unk_4E10F0; // weak
extern _UNKNOWN unk_4E10FC; // weak
extern _UNKNOWN unk_4E1108; // weak
extern _UNKNOWN unk_4E110C; // weak
extern int dword_4E1110[]; // weak
extern FILE *dword_4E111C; // idb
extern _UNKNOWN unk_4E1128; // weak
extern char dword_4E1160[]; // idb
extern int dword_4E1164; // weak
extern u_short hostshort; // idb
extern u_short dword_4E116C; // idb
extern u_short dword_4E1170; // idb
extern char dword_4E1174[]; // idb
extern int dword_4E1178; // weak
extern int dword_4E117C; // weak
extern int dword_4E1180; // weak
extern int dword_4E1184; // weak
extern int dword_4E1188; // weak
extern int dword_4E118C; // weak
extern char dword_4E1190[]; // idb
extern _UNKNOWN unk_4E1194; // weak
extern _UNKNOWN unk_4E11B0; // weak
extern _UNKNOWN unk_4E11CC; // weak
extern _UNKNOWN unk_4E11E8; // weak
extern _UNKNOWN unk_4E1204; // weak
extern _UNKNOWN unk_4E1220; // weak
extern _UNKNOWN unk_4E123C; // weak
extern _UNKNOWN unk_4E1258; // weak
extern _UNKNOWN unk_4E1264; // weak
extern HANDLE dword_4E1280; // idb
extern char ClassName[]; // idb
extern char WindowName[]; // idb
extern HINSTANCE hInstance; // idb
extern _UNKNOWN unk_4E1358; // weak
extern _UNKNOWN unk_4E1368; // weak
extern _UNKNOWN unk_4E158E; // weak
extern UINT uValue; // idb
extern int dword_4E17B8; // weak
extern volatile LONG dword_4E17C0; // idb
extern int dword_4E17C8[]; // weak
extern _UNKNOWN unk_4E1808; // weak
extern volatile LONG dword_4E1810; // idb
extern int dword_4E1814; // weak
extern int dword_4E181C; // weak
extern _UNKNOWN unk_4E1820; // weak
extern _UNKNOWN unk_4E182C; // weak
extern _UNKNOWN unk_4E184C; // weak
extern _UNKNOWN unk_4E1858; // weak
extern _UNKNOWN unk_4E1870; // weak
extern _UNKNOWN unk_4E187C; // weak
extern _UNKNOWN unk_4E1898; // weak
extern _UNKNOWN unk_4E18F0; // weak
extern _UNKNOWN unk_4E1930; // weak
extern _UNKNOWN unk_4E1998; // weak
extern _UNKNOWN unk_4E1A00; // weak
extern int dword_4E1A64; // weak
extern int dword_4E1A68; // weak
extern int dword_4E1A70[]; // weak
extern int dword_4E1A90; // weak
extern int dword_4E1A94; // weak
extern volatile LONG dword_4E1A98; // idb
extern _UNKNOWN unk_4E1A9C; // weak
extern _UNKNOWN unk_4E1AA8; // weak
extern _UNKNOWN unk_4E1AB4; // weak
extern _UNKNOWN unk_4E1AC0; // weak
extern _UNKNOWN unk_4E1AD8; // weak
extern _UNKNOWN unk_4E1B38; // weak
extern _UNKNOWN unk_4E1B58; // weak
extern _UNKNOWN unk_4E1B78; // weak
extern volatile LONG dword_4E1B98; // idb
extern _UNKNOWN unk_4E1B9C; // weak
extern _UNKNOWN unk_4E1BA8; // weak
extern _UNKNOWN unk_4E1BB0; // weak
extern _UNKNOWN unk_4E1BB8; // weak
extern _UNKNOWN unk_4E1BC0; // weak
extern _UNKNOWN unk_4E1BC8; // weak
extern _UNKNOWN unk_4E1BD0; // weak
extern _UNKNOWN unk_4E1BD8; // weak
extern _UNKNOWN unk_4E1BE0; // weak
extern _UNKNOWN unk_4E1BE8; // weak
extern _UNKNOWN unk_4E1BF0; // weak
extern _UNKNOWN unk_4E1BF8; // weak
extern _UNKNOWN unk_4E1C00; // weak
extern _UNKNOWN unk_4E1C08; // weak
extern _UNKNOWN unk_4E1C10; // weak
extern _UNKNOWN unk_4E1C18; // weak
extern _UNKNOWN unk_4E1C20; // weak
extern _UNKNOWN unk_4E1C28; // weak
extern _UNKNOWN unk_4E1C30; // weak
extern _UNKNOWN unk_4E1C38; // weak
extern _UNKNOWN unk_4E1C40; // weak
extern _UNKNOWN unk_4E1C48; // weak
extern _UNKNOWN unk_4E1C50; // weak
extern _UNKNOWN unk_4E1C58; // weak
extern _UNKNOWN unk_4E1C60; // weak
extern _UNKNOWN unk_4E1C68; // weak
extern _UNKNOWN unk_4E1C70; // weak
extern _UNKNOWN unk_4E1C78; // weak
extern _UNKNOWN unk_4E1C80; // weak
extern _UNKNOWN unk_4E1C88; // weak
extern _UNKNOWN unk_4E1C90; // weak
extern _UNKNOWN unk_4E1C98; // weak
extern _UNKNOWN unk_4E1CA0; // weak
extern _UNKNOWN unk_4E1CA8; // weak
extern _UNKNOWN unk_4E1CB0; // weak
extern _UNKNOWN unk_4E1CB8; // weak
extern _UNKNOWN unk_4E1CC0; // weak
extern _UNKNOWN unk_4E1CC8; // weak
extern _UNKNOWN unk_4E1CD0; // weak
extern _UNKNOWN unk_4E1CD8; // weak
extern _UNKNOWN unk_4E1CE0; // weak
extern _UNKNOWN unk_4E1CE8; // weak
extern _UNKNOWN unk_4E1CF0; // weak
extern _UNKNOWN unk_4E1CF8; // weak
extern _UNKNOWN unk_4E1D00; // weak
extern _UNKNOWN unk_4E1D08; // weak
extern _UNKNOWN unk_4E1D10; // weak
extern _UNKNOWN unk_4E1D18; // weak
extern _UNKNOWN unk_4E1D20; // weak
extern _UNKNOWN unk_4E1D28; // weak
extern _UNKNOWN unk_4E1D30; // weak
extern _UNKNOWN unk_4E1D38; // weak
extern _UNKNOWN unk_4E1D40; // weak
extern _UNKNOWN unk_4E1D48; // weak
extern _UNKNOWN unk_4E1D50; // weak
extern _UNKNOWN unk_4E1D58; // weak
extern _UNKNOWN unk_4E1D60; // weak
extern _UNKNOWN unk_4E1D68; // weak
extern _UNKNOWN unk_4E1D70; // weak
extern _UNKNOWN unk_4E1D78; // weak
extern _UNKNOWN unk_4E1D80; // weak
extern _UNKNOWN unk_4E1D88; // weak
extern _UNKNOWN unk_4E1D90; // weak
extern _UNKNOWN unk_4E1D98; // weak
extern _UNKNOWN unk_4E1DA0; // weak
extern _UNKNOWN unk_4E1DA8; // weak
extern _UNKNOWN unk_4E1DB0; // weak
extern _UNKNOWN unk_4E1DB8; // weak
extern _UNKNOWN unk_4E1DC0; // weak
extern _UNKNOWN unk_4E1DC8; // weak
extern _UNKNOWN unk_4E1DD0; // weak
extern _UNKNOWN unk_4E1DD8; // weak
extern _UNKNOWN unk_4E1DE0; // weak
extern _UNKNOWN unk_4E1DE8; // weak
extern _UNKNOWN unk_4E1DF0; // weak
extern _UNKNOWN unk_4E1DF8; // weak
extern _UNKNOWN unk_4E1E00; // weak
extern _UNKNOWN unk_4E1E08; // weak
extern _UNKNOWN unk_4E1E10; // weak
extern _UNKNOWN unk_4E1E18; // weak
extern _UNKNOWN unk_4E1E20; // weak
extern _UNKNOWN unk_4E1E28; // weak
extern _UNKNOWN unk_4E1E30; // weak
extern _UNKNOWN unk_4E1E38; // weak
extern _UNKNOWN unk_4E1E40; // weak
extern _UNKNOWN unk_4E1E48; // weak
extern _UNKNOWN unk_4E1E50; // weak
extern _UNKNOWN unk_4E1E58; // weak
extern _UNKNOWN unk_4E1E60; // weak
extern _UNKNOWN unk_4E1E68; // weak
extern _UNKNOWN unk_4E1E70; // weak
extern _UNKNOWN unk_4E1E78; // weak
extern _UNKNOWN unk_4E1E80; // weak
extern _UNKNOWN unk_4E1E88; // weak
extern _UNKNOWN unk_4E1E90; // weak
extern _UNKNOWN unk_4E1E98; // weak
extern _UNKNOWN unk_4E1EA0; // weak
extern _UNKNOWN unk_4E1EA8; // weak
extern _UNKNOWN unk_4E1EB0; // weak
extern _UNKNOWN unk_4E1EB8; // weak
extern _UNKNOWN unk_4E1EC0; // weak
extern _UNKNOWN unk_4E1EC8; // weak
extern _UNKNOWN unk_4E1ED0; // weak
extern _UNKNOWN unk_4E1ED8; // weak
extern _UNKNOWN unk_4E1EE0; // weak
extern _UNKNOWN unk_4E1EE8; // weak
extern _UNKNOWN unk_4E1EF0; // weak
extern _UNKNOWN unk_4E1EF8; // weak
extern _UNKNOWN unk_4E1F00; // weak
extern _UNKNOWN unk_4E1F08; // weak
extern _UNKNOWN unk_4E1F10; // weak
extern _UNKNOWN unk_4E1F18; // weak
extern _UNKNOWN unk_4E1F20; // weak
extern _UNKNOWN unk_4E1F28; // weak
extern _UNKNOWN unk_4E1F30; // weak
extern _UNKNOWN unk_4E1F38; // weak
extern _UNKNOWN unk_4E1F48; // weak
extern _UNKNOWN unk_4E1F50; // weak
extern _UNKNOWN unk_4E1F58; // weak
extern _UNKNOWN unk_4E1F60; // weak
extern _UNKNOWN unk_4E1F68; // weak
extern _UNKNOWN unk_4E1F70; // weak
extern _UNKNOWN unk_4E1F78; // weak
extern _UNKNOWN unk_4E1F80; // weak
extern _UNKNOWN unk_4E1F88; // weak
extern _UNKNOWN unk_4E1F90; // weak
extern _UNKNOWN unk_4E1F98; // weak
extern _UNKNOWN unk_4E1FA0; // weak
extern _UNKNOWN unk_4E1FA8; // weak
extern _UNKNOWN unk_4E1FB0; // weak
extern volatile LONG dword_4E1FB8; // idb
extern int dword_4E1FC0; // weak
extern _UNKNOWN unk_4E1FC4; // weak
extern _UNKNOWN unk_4E1FD0; // weak
extern int dword_4E1FF0; // weak
extern int dword_4E1FF4; // weak
extern int dword_4E1FF8; // weak
extern volatile LONG dword_4E1FFC; // idb
extern volatile LONG dword_4E2000; // idb
extern int dword_4E2004; // weak
extern _UNKNOWN unk_4E200C; // weak
extern volatile LONG dword_4E2014; // idb
extern int dword_4E201C; // weak
extern _UNKNOWN unk_4E2020; // weak
extern _UNKNOWN unk_4E202C; // weak
extern _UNKNOWN unk_4E2044; // weak
extern _UNKNOWN unk_4E2050; // weak
extern _UNKNOWN unk_4E2068; // weak
extern _UNKNOWN unk_4E2078; // weak
extern _UNKNOWN unk_4E2098; // weak
extern _UNKNOWN unk_4E20B8; // weak
extern _UNKNOWN unk_4E20D0; // weak
extern _UNKNOWN unk_4E20DC; // weak
extern _UNKNOWN unk_4E20F4; // weak
extern int dword_4E2104; // weak
extern int dword_4E2108; // weak
extern _UNKNOWN unk_4E210C; // weak
extern _UNKNOWN unk_4E2118; // weak
extern int dword_4E2130; // weak
extern HWND hWnd; // idb
extern int dword_4E2138; // weak
extern int dword_4E213C; // weak
extern int dword_4E2140; // weak
extern time_t dword_4E2148; // idb
extern _UNKNOWN unk_4E214C; // weak
extern _UNKNOWN unk_4E2158; // weak
extern int dword_4E2168; // weak
extern _UNKNOWN unk_4E2170; // weak
extern int dword_4E2188; // weak
extern _UNKNOWN unk_4E218C; // weak
extern _UNKNOWN unk_4E2198; // weak
extern char dword_4E21A8[]; // idb
extern _UNKNOWN unk_4E21B0; // weak
extern _UNKNOWN unk_4E21B8; // weak
extern _UNKNOWN unk_4E21C0; // weak
extern _UNKNOWN unk_4E21C8; // weak
extern _UNKNOWN unk_4E21D0; // weak
extern _UNKNOWN unk_4E21D8; // weak
extern _UNKNOWN unk_4E21E0; // weak
extern _UNKNOWN unk_4E21E8; // weak
extern _UNKNOWN unk_4E21F0; // weak
extern _UNKNOWN unk_4E21F8; // weak
extern _UNKNOWN unk_4E2200; // weak
extern _UNKNOWN unk_4E2208; // weak
extern _UNKNOWN unk_4E2210; // weak
extern _UNKNOWN unk_4E2218; // weak
extern _UNKNOWN unk_4E2220; // weak
extern _UNKNOWN unk_4E2228; // weak
extern _UNKNOWN unk_4E2230; // weak
extern _UNKNOWN unk_4E2238; // weak
extern _UNKNOWN unk_4E2240; // weak
extern _UNKNOWN unk_4E2248; // weak
extern _UNKNOWN unk_4E2250; // weak
extern _UNKNOWN unk_4E2258; // weak
extern _UNKNOWN unk_4E2260; // weak
extern _UNKNOWN unk_4E2268; // weak
extern _UNKNOWN unk_4E2270; // weak
extern _UNKNOWN unk_4E2278; // weak
extern _UNKNOWN unk_4E2280; // weak
extern _UNKNOWN unk_4E2288; // weak
extern _UNKNOWN unk_4E2290; // weak
extern _UNKNOWN unk_4E2298; // weak
extern _UNKNOWN unk_4E22A0; // weak
extern _UNKNOWN unk_4E22A8; // weak
extern _UNKNOWN unk_4E22B0; // weak
extern _UNKNOWN unk_4E22B8; // weak
extern _UNKNOWN unk_4E22C0; // weak
extern _UNKNOWN unk_4E22C8; // weak
extern _UNKNOWN unk_4E22D0; // weak
extern _UNKNOWN unk_4E22D8; // weak
extern _UNKNOWN unk_4E22E0; // weak
extern _UNKNOWN unk_4E22E8; // weak
extern _UNKNOWN unk_4E22F0; // weak
extern _UNKNOWN unk_4E22F8; // weak
extern _UNKNOWN unk_4E2300; // weak
extern _UNKNOWN unk_4E2308; // weak
extern _UNKNOWN unk_4E2310; // weak
extern _UNKNOWN unk_4E2318; // weak
extern _UNKNOWN unk_4E2320; // weak
extern _UNKNOWN unk_4E2328; // weak
extern _UNKNOWN unk_4E2330; // weak
extern _UNKNOWN unk_4E2338; // weak
extern _UNKNOWN unk_4E2340; // weak
extern _UNKNOWN unk_4E2348; // weak
extern _UNKNOWN unk_4E2350; // weak
extern _UNKNOWN unk_4E2358; // weak
extern _UNKNOWN unk_4E2360; // weak
extern _UNKNOWN unk_4E2368; // weak
extern _UNKNOWN unk_4E2370; // weak
extern _UNKNOWN unk_4E2378; // weak
extern _UNKNOWN unk_4E2380; // weak
extern _UNKNOWN unk_4E2388; // weak
extern _UNKNOWN unk_4E2390; // weak
extern _UNKNOWN unk_4E2398; // weak
extern _UNKNOWN unk_4E23A0; // weak
extern _UNKNOWN unk_4E23A8; // weak
extern _UNKNOWN unk_4E23B0; // weak
extern _UNKNOWN unk_4E23B8; // weak
extern _UNKNOWN unk_4E23C0; // weak
extern _UNKNOWN unk_4E23C8; // weak
extern _UNKNOWN unk_4E23D0; // weak
extern _UNKNOWN unk_4E23D8; // weak
extern _UNKNOWN unk_4E23E0; // weak
extern _UNKNOWN unk_4E23E8; // weak
extern _UNKNOWN unk_4E23F0; // weak
extern _UNKNOWN unk_4E23F8; // weak
extern _UNKNOWN unk_4E2400; // weak
extern _UNKNOWN unk_4E2408; // weak
extern _UNKNOWN unk_4E2410; // weak
extern _UNKNOWN unk_4E2418; // weak
extern _UNKNOWN unk_4E2420; // weak
extern _UNKNOWN unk_4E2428; // weak
extern _UNKNOWN unk_4E2430; // weak
extern _UNKNOWN unk_4E2438; // weak
extern _UNKNOWN unk_4E2440; // weak
extern _UNKNOWN unk_4E2448; // weak
extern _UNKNOWN unk_4E2450; // weak
extern _UNKNOWN unk_4E2458; // weak
extern _UNKNOWN unk_4E2460; // weak
extern _UNKNOWN unk_4E2468; // weak
extern _UNKNOWN unk_4E2470; // weak
extern _UNKNOWN unk_4E2478; // weak
extern _UNKNOWN unk_4E2480; // weak
extern _UNKNOWN unk_4E2488; // weak
extern _UNKNOWN unk_4E2490; // weak
extern _UNKNOWN unk_4E2498; // weak
extern _UNKNOWN unk_4E24A0; // weak
extern _UNKNOWN unk_4E24A8; // weak
extern _UNKNOWN unk_4E24B0; // weak
extern _UNKNOWN unk_4E24B8; // weak
extern _UNKNOWN unk_4E24C0; // weak
extern _UNKNOWN unk_4E24C8; // weak
extern _UNKNOWN unk_4E24D0; // weak
extern _UNKNOWN unk_4E24D8; // weak
extern _UNKNOWN unk_4E24E0; // weak
extern _UNKNOWN unk_4E24E8; // weak
extern _UNKNOWN unk_4E24F0; // weak
extern _UNKNOWN unk_4E24F8; // weak
extern _UNKNOWN unk_4E2500; // weak
extern _UNKNOWN unk_4E2508; // weak
extern _UNKNOWN unk_4E2510; // weak
extern _UNKNOWN unk_4E2518; // weak
extern _UNKNOWN unk_4E2520; // weak
extern _UNKNOWN unk_4E2528; // weak
extern _UNKNOWN unk_4E2530; // weak
extern _UNKNOWN unk_4E2538; // weak
extern _UNKNOWN unk_4E2540; // weak
extern _UNKNOWN unk_4E2548; // weak
extern _UNKNOWN unk_4E2550; // weak
extern _UNKNOWN unk_4E2558; // weak
extern _UNKNOWN unk_4E2560; // weak
extern int dword_4E2568[]; // weak
extern _UNKNOWN unk_4E2570; // weak
extern _UNKNOWN unk_4E2578; // weak
extern _UNKNOWN unk_4E2580; // weak
extern _UNKNOWN unk_4E2588; // weak
extern _UNKNOWN unk_4E2590; // weak
extern _UNKNOWN unk_4E2598; // weak
extern _UNKNOWN unk_4E25A0; // weak
extern _UNKNOWN unk_4E25A8; // weak
extern _UNKNOWN unk_4E25B0; // weak
extern _UNKNOWN unk_4E25B8; // weak
extern _UNKNOWN unk_4E25C0; // weak
extern _UNKNOWN unk_4E25C8; // weak
extern _UNKNOWN unk_4E25D0; // weak
extern _UNKNOWN unk_4E25D8; // weak
extern _UNKNOWN unk_4E25E0; // weak
extern _UNKNOWN unk_4E25E8; // weak
extern _UNKNOWN unk_4E25F0; // weak
extern _UNKNOWN unk_4E25F8; // weak
extern _UNKNOWN unk_4E2600; // weak
extern _UNKNOWN unk_4E2608; // weak
extern _UNKNOWN unk_4E2610; // weak
extern _UNKNOWN unk_4E2618; // weak
extern _UNKNOWN unk_4E2620; // weak
extern _UNKNOWN unk_4E2628; // weak
extern _UNKNOWN unk_4E2630; // weak
extern _UNKNOWN unk_4E2638; // weak
extern _UNKNOWN unk_4E2640; // weak
extern _UNKNOWN unk_4E2648; // weak
extern _UNKNOWN unk_4E2650; // weak
extern _UNKNOWN unk_4E2658; // weak
extern _UNKNOWN unk_4E2660; // weak
extern int dword_4E2668[]; // weak
extern int dword_4E266C; // weak
extern int dword_4E2670; // weak
extern int dword_4E2674; // weak
extern int dword_4E2678; // weak
extern int dword_4E267C; // weak
extern int dword_4E2680; // weak
extern int dword_4E2684; // weak
extern int dword_4E2688; // weak
extern int dword_4E2690[]; // weak
extern int dword_4E2694; // weak
extern int dword_4E2698; // weak
extern int dword_4E269C; // weak
extern int dword_4E26A0; // weak
extern int dword_4E26A4; // weak
extern int dword_4E26A8; // weak
extern int dword_4E26AC; // weak
extern int dword_4E26B0; // weak
extern int dword_4E26B4; // weak
extern int dword_4E26B8; // weak
extern int dword_4E26BC; // weak
extern int dword_4E26C0; // weak
extern int dword_4E26C4; // weak
extern int dword_4E26C8; // weak
extern int dword_4E26CC; // weak
extern int dword_4E26D0; // weak
extern int dword_4E26D4; // weak
extern int dword_4E26D8; // weak
extern int dword_4E26DC; // weak
extern int dword_4E26E0; // weak
extern int dword_4E26E4; // weak
extern int dword_4E26E8; // weak
extern int dword_4E26EC; // weak
extern int dword_4E26F0; // weak
extern int dword_4E26F4; // weak
extern int dword_4E26F8; // weak
extern int dword_4E26FC; // weak
extern int dword_4E2700; // weak
extern int dword_4E2704; // weak
extern int dword_4E2708; // weak
extern int dword_4E270C; // weak
extern int dword_4E2710; // weak
extern int dword_4E2714; // weak
extern int dword_4E2718; // weak
extern int dword_4E271C; // weak
extern int dword_4E2720; // weak
extern int dword_4E2724; // weak
extern int dword_4E2728; // weak
extern int dword_4E272C; // weak
extern int dword_4E2730; // weak
extern int dword_4E2738; // weak
extern int dword_4E2740; // weak
extern int dword_4E2744; // weak
extern _UNKNOWN unk_4E2748; // weak
extern int dword_4E2754; // weak
extern _UNKNOWN unk_4E2758; // weak
extern volatile LONG dword_4E2ED8; // idb
extern _UNKNOWN unk_4E2EDC; // weak
extern int (__cdecl *dword_4E2F10)(_DWORD); // weak
extern int dword_4E2F18[]; // weak
extern int dword_4E3260[]; // weak
extern int dword_4E35A8; // weak
extern int dword_4E35AC; // weak
extern int dword_4E35B0; // weak
extern _UNKNOWN unk_4E35B4; // weak
extern int dword_4E35B8; // weak
extern char byte_4E35C0[]; // weak
extern volatile LONG dword_4E36C0; // idb
extern int dword_4E36C4[]; // weak
extern int dword_4E36C8[]; // weak
extern int dword_4E3748; // weak
extern _UNKNOWN unk_4E374C; // weak
extern int dword_4E3750; // weak
extern FARPROC lpfn; // idb

//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

void *__cdecl sub_401000(size_t a1);
void __cdecl sub_401020(int a1);
// LONG __userpurge CAuthPacket::OnIOCallback<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
LONG __thiscall CIOBuffer::Release(int this);
// int __usercall CAuthSocket::CAuthSocket<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// LONG __usercall CIOObject::AddRef<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void *__thiscall CIOObject::OnFree(void *this);
// int __thiscall std___Init_locks____Init_locks(_DWORD); weak
// int __userpurge CAuthSocket::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CAuthSocket::_CAuthSocket<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CAuthSocket::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __thiscall sub_4012D0(void *this);
// int __cdecl unknown_libname_1(_DWORD); weak
// BOOL __usercall CAuthSocket::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __userpurge CAuthSocket::Initialize(ULONG_PTR a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, LONG Value);
// void __userpurge CAuthSocket::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CAuthSocket::OnClose(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CAuthSocket::OnRead(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
LONG __thiscall CIOBuffer::AddRef(int this);
BOOL __thiscall CIOObject::PostObject(ULONG_PTR this, DWORD dwNumberOfBytesTransferred);
// void __usercall CAuthSocket::Process(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __usercall CIOObject::Release<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CAuthSocket::Write(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5);
int __cdecl CMemoryPool_CAuthPacket::_Alloc();
LONG __thiscall CIOSpinLock::Enter(volatile LONG *this);
LONG __thiscall CIOSpinLock::Leave(volatile LONG *this);
LONG __cdecl CMemoryPool_CAuthPacket::_Free(int a1);
int __thiscall CAuthPacket::CAuthPacket(int this);
int __thiscall CIOObject::CIOObject(int this);
int __thiscall CIOObject::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CIOSocket::CIOTimerInstance::_CIOTimerInstance(void *this);
LONG __cdecl CMemoryPool_CAuthPacket::_CPool::_CPool();
LONG __cdecl CMemoryPool_CAuthPacket::_FreeAll();
LONG __cdecl CMemoryPool_CSkill::_CPool::_CPool();
LONG __cdecl CMemoryPool_CSkill::_FreeAll();
int __thiscall CBase::CBase(int this);
// int __usercall CBase::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void __stdcall CMonster::ResetNextMove(int a1, int a2);
// int __userpurge CBase::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CBase::_CBase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CBase::OnFree<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CBase::Set(void *this, int a2, char a3);
void *__thiscall sub_402340(void *this, int a2);
int __thiscall sub_402360(void *this);
int __thiscall sub_402380(void *this);
void *__thiscall sub_4023A0(void *this, void *a2);
// void *__userpurge CBaseList::Push<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CBaseList::Pop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void *__cdecl CMemoryPool_CBaseList::_Alloc();
LONG __cdecl CMemoryPool_CBaseList::_Free(int a1);
LONG __cdecl CMemoryPool_CBaseList::_CPool::_CPool();
LONG __cdecl CMemoryPool_CBaseList::_FreeAll();
int __thiscall sub_402550(int this);
int __stdcall CBuff::UpdateBuff(int a1, int a2);
// _DWORD __stdcall std__locale__facet___scalar_deleting_destructor_(_DWORD); weak
void *__cdecl CBuff::CreateBuff(int a1, int a2, int a3, int a4);
int __thiscall CBuffMoveSpeed::CBuffMoveSpeed(int this, int a2, int a3, int a4);
int __thiscall CBuff::CBuff(int this, int a2, int a3, int a4, int a5);
int __thiscall CBuffStone::CBuffStone(int this, int a2, int a3, int a4, int a5);
int __thiscall CBuffMeditation::CBuffMeditation(int this, int a2, int a3, int a4);
int __thiscall CBuffFatalChance::CBuffFatalChance(int this, int a2, int a3, int a4, int a5);
int __thiscall CBuffRevivalSequela::CBuffRevivalSequela(int this, int a2, int a3, int a4);
int __thiscall CBuffStun::CBuffStun(int this, int a2, int a3, int a4);
int __thiscall CBuffMoveStop::CBuffMoveStop(int this, int a2, int a3, int a4);
int __thiscall CBuffPoison::CBuffPoison(int this, int a2, int a3, int a4);
int __thiscall CBuffPoisonCloud::CBuffPoisonCloud(int this, int a2, int a3, int a4);
int __thiscall CBuffHaste::CBuffHaste(int this, int a2, int a3, int a4);
int __thiscall CBuffHP::CBuffHP(int this, int a2, int a3, int a4);
int __thiscall CBuffMP::CBuffMP(int this, int a2, int a3, int a4);
int __thiscall CBuffSleep::CBuffSleep(int this, int a2, int a3, int a4);
int __thiscall sub_405FD0(int this, int a2, int a3, int a4, int a5);
void *__thiscall CBuffCTDefensePer::Copy(void *this);
void *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(int this, const void *a2);
int __thiscall sub_406090(int this, int a2, int a3, int a4);
void *__thiscall CBuffCTHealing::Copy(void *this);
void *__thiscall CBuffCTHealing::CBuffCTHealing(int this, const void *a2);
int __thiscall sub_406150(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
void *__thiscall CBuffCTPrtyPtEx::Copy(void *this);
void *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(int this, const void *a2);
int __thiscall CBuffSuffering::CBuffSuffering(int this, int a2, int a3, int a4);
int __thiscall CBuffInchantWeapon::CBuffInchantWeapon(int this, int a2, int a3, int a4);
int __thiscall CBuffSpiritDmg::CBuffSpiritDmg(int this, int a2, int a3, int a4);
int __thiscall CBuffFlagPrty::CBuffFlagPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall CBuffFlagHP::CBuffFlagHP(int this, int a2, int a3, int a4);
int __thiscall CBuffBerserk::CBuffBerserk(int this, int a2, int a3, int a4, int a5);
int __thiscall CBuffSilenceShot::CBuffSilenceShot(int this, int a2, int a3, int a4);
int __thiscall CBuffManaBurn::CBuffManaBurn(int this, int a2, int a3, int a4);
int __thiscall CBuffPrty::CBuffPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall CBuffPrtyEx::CBuffPrtyEx(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall CBuffExpire::CBuffExpire(int this, int a2, int a3, int a4, int a5, int a6, int a7);
void *__thiscall CBuffExpireEvent::CBuffExpireEvent(void *this, int a2, int a3, int a4, int a5, int a6);
void *__thiscall CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(void *this, int a2, int a3, int a4, int a5, int a6);
void *__thiscall sub_4065D0(void *this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall CBuffRemainEx::CBuffRemainEx(int this, int a2, int a3, int a4, int a5, int a6);
int __thiscall CBuffRemain::CBuffRemain(int this);
int __thiscall CBuffRemainDead::CBuffRemainDead(int this, int a2, int a3, int a4, int a5, int a6);
int __thiscall CBuffRemainDeadEx::CBuffRemainDeadEx(int this, int a2, int a3, int a4, int a5);
void *__thiscall CBuffRemainXBlow::CBuffRemainXBlow(void *this, int a2, int a3, int a4, int a5, int a6);
void *__thiscall CBuffRemainPrty::CBuffRemainPrty(void *this, int a2, int a3, int a4, int a5, int a6, int a7);
void *__thiscall CBuffRemainCount::CBuffRemainCount(void *this, int a2, int a3, int a4, int a5, int a6);
void *__thiscall CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(void *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall CBuffRemainPet::CBuffRemainPet(int this, int a2, int a3);
signed int __stdcall CBuffRemainPet::SetBuff(int a1);
int __thiscall CBuffHydrochloricAcid::CBuffHydrochloricAcid(int this, int a2, int a3, int a4);
int __thiscall CBuffMixDamage::CBuffMixDamage(int this, int a2, int a3, int a4, int a5);
signed int __stdcall CSkill::CanExcuteM(int a1, int a2);
bool __thiscall CBuff::IsExpired(void *this, int a2);
signed int __thiscall CBuffMoveSpeed::ApplyBuff(void *this, int a2);
int __thiscall CBuffMoveSpeed::FreeBuff(int this, int a2);
signed int __thiscall CBuffMoveSpeed::UpdateBuff(void *this, int a2, int a3);
__int64 __thiscall CChar::IsMState(int this, __int64 a2);
int __thiscall CBuffMoveSpeed::IsExpired(void *this, int a2);
signed int __thiscall CBuffStone::ApplyBuff(int this, int a2);
int __thiscall CBuffStone::FreeBuff(int this, int a2);
signed int __stdcall CBuffMeditation::ApplyBuff(int a1);
int __stdcall CBuffMeditation::FreeBuff(int a1);
bool __thiscall CBuffMeditation::IsExpired(void *this, int a2);
_DWORD __cdecl sub_406E10(_DWORD, _DWORD); // weak
signed int __thiscall CBuffFatalChance::ApplyBuff(int this, int a2);
int __thiscall CBuffFatalChance::FreeBuff(int this, int a2);
signed int __thiscall CBuffRevivalSequela::ApplyBuff(int this, int a2);
int __thiscall CBuffRevivalSequela::FreeBuff(int this, int a2);
signed int __thiscall CBuffRevivalSequela::UpdateBuff(int this, int a2, int a3);
signed int __thiscall CBuffStun::ApplyBuff(void *this, int a2);
int __stdcall CBuffStun::FreeBuff(int a1);
signed int __thiscall CBuffStun::UpdateBuff(void *this, int a2, int a3);
int __thiscall CBuffStun::IsExpired(void *this, int a2);
signed int __thiscall CBuffMoveStop::ApplyBuff(void *this, int a2);
int __stdcall CBuffMoveStop::FreeBuff(int a1);
signed int __thiscall CBuffMoveStop::UpdateBuff(void *this, int a2, int a3);
int __thiscall CBuffMoveStop::IsExpired(void *this, int a2);
signed int __stdcall CBuffPoison::ApplyBuff(int a1);
int __stdcall CBuffPoison::FreeBuff(int a1);
signed int __thiscall CBuffPoison::UpdateBuff(void *this, int a2, int a3);
// int __userpurge CBuffPoison::IsExpired<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD); weak
signed int __stdcall CBuffPoisonCloud::ApplyBuff(int a1);
int __stdcall CBuffPoisonCloud::FreeBuff(int a1);
signed int __thiscall CBuffPoisonCloud::UpdateBuff(void *this, int a2, int a3);
// int __userpurge CBuffPoisonCloud::IsExpired<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
signed int __thiscall CBuffHaste::ApplyBuff(void *this, int a2);
int __thiscall CBuffHaste::FreeBuff(void *this, int a2);
// signed int __userpurge CBuffHP::ApplyBuff<eax>(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1);
int __stdcall CBuffHP::FreeBuff(int a1);
// signed int __userpurge CBuffMP::ApplyBuff<eax>(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1);
int __stdcall CBuffMP::FreeBuff(int a1);
bool __thiscall CBuffMP::IsExpired(int this, int a2);
signed int __thiscall CBuffSleep::ApplyBuff(void *this, int a2);
int __stdcall CBuffSleep::FreeBuff(int a1);
signed int __thiscall CBuffSleep::UpdateBuff(void *this, int a2, int a3);
int __thiscall CBuffSleep::IsExpired(void *this, int a2);
signed int __thiscall CBuffCTDefensePer::ApplyBuff(int this, int a2);
int __thiscall CBuffCTDefensePer::FreeBuff(int this, int a2);
signed int __stdcall CBuffCTHealing::ApplyBuff(int a1);
int __stdcall CBuffCTHealing::FreeBuff(int a1);
int __thiscall CBuffCTHealing::IsExpired(void *this, int a2);
signed int __thiscall CBuffCTPrtyPtEx::ApplyBuff(int this, int a2);
int __thiscall CBuffCTPrtyPtEx::FreeBuff(int this, int a2);
signed int __stdcall CBuffSuffering::ApplyBuff(int a1);
int __stdcall CBuffSuffering::FreeBuff(int a1);
signed int __thiscall CBuffSuffering::UpdateBuff(void *this, int a2, int a3);
// int __userpurge CBuffSuffering::IsExpired<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
signed int __thiscall CBuffInchantWeapon::ApplyBuff(int this, int a2);
int __thiscall CBuffInchantWeapon::FreeBuff(int this, int a2);
signed int __stdcall CBuffSpiritDmg::ApplyBuff(int a1);
int __stdcall CBuffSpiritDmg::FreeBuff(int a1);
signed int __thiscall CBuffSpiritDmg::UpdateBuff(void *this, int a2, int a3);
// int __userpurge CBuffSpiritDmg::IsExpired<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
signed int __thiscall CBuffFlagPrty::ApplyBuff(int this, int a2);
int __thiscall CBuffFlagPrty::FreeBuff(int this, int a2);
signed int __stdcall CBuffFlagHP::ApplyBuff(int a1);
int __stdcall CBuffFlagHP::FreeBuff(int a1);
signed int __thiscall CBuffFlagHP::UpdateBuff(int this, int a2, int a3);
bool __thiscall CBuffHP::IsExpired(int this, int a2);
signed int __thiscall CBuffBerserk::ApplyBuff(int this, int a2);
int __thiscall CBuffBerserk::FreeBuff(int this, int a2);
signed int __stdcall CBuffSilenceShot::ApplyBuff(int a1);
int __stdcall CBuffSilenceShot::FreeBuff(int a1);
signed int __thiscall CBuffSilenceShot::UpdateBuff(void *this, int a2, int a3);
int __thiscall CBuffSilenceShot::IsExpired(void *this, int a2);
signed int __stdcall CBuffManaBurn::ApplyBuff(int a1);
int __stdcall CBuffManaBurn::FreeBuff(int a1);
signed int __thiscall CBuffManaBurn::UpdateBuff(void *this, int a2, int a3);
int __thiscall CBuffManaBurn::IsExpired(void *this, int a2);
signed int __thiscall CBuffPrty::ApplyBuff(int this, int a2);
int __thiscall CBuffPrty::FreeBuff(int this, int a2);
int __thiscall CBuffPrty::UpdateBuff(int this, int a2, int a3);
int __thiscall CBuff::IsPrty(int this, int a2);
bool __thiscall CBuffPrty::IsExpired(int this, int a2);
signed int __thiscall CBuffPrtyEx::ApplyBuff(int this, int a2);
int __thiscall CBuffPrtyEx::FreeBuff(int this, int a2);
int __thiscall CChar::IsMStateEx(int this, int a2);
int __thiscall CBuffPrtyEx::UpdateBuff(int this, int a2, int a3);
bool __thiscall CBuffPrtyEx::IsExpired(int this, int a2);
// signed int __userpurge CBuffExpire::SetBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CBuffExpire::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
bool __thiscall CBuffExpire::IsExpired(int this, int a2);
signed int __thiscall CBuffExpireEvent::ApplyBuff(void *this, int a2);
int __thiscall CBuffExpireEvent::FreeBuff(int this, int a2);
// signed int __userpurge CBuffExpireLuckyStone2::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
__int64 __thiscall CChar::IsBState(int this, __int64 a2);
signed int __thiscall CBuffRemain::SetBuff(int this, int a2);
// signed int __userpurge CBuffRemain::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CBuffExpire::FreeBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CBuffRemain::IsExpired<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CBuffRemain::SaveRemain(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
signed int __thiscall CBuffRemainEx::SetBuff(int this, int a2);
LONG __thiscall CChar::AddGState(int this, int a2);
// signed int __userpurge CBuffRemainEx::ApplyBuff<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
// void __userpurge CBuffRemainEx::FreeBuff(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
signed int __thiscall CBuffRemainDead::SetBuff(void *this, int a2);
// signed int __userpurge CBuffRemainDead::ApplyBuff<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// void __userpurge CBuffRemainDead::FreeBuff(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1);
signed int __thiscall CBuffRemainDeadEx::SetBuff(int this, int a2);
int __thiscall CPlayer::AddEState(int this, int a2);
// signed int __userpurge CBuffRemainXBlow::ApplyBuff<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
signed int __thiscall CBuffRemainPrty::SetBuff(int this, int a2);
// signed int __userpurge CBuffRemainPrty::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CBuffRemainPrty::FreeBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CBuffRemainCount::UpdateBuff<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, int a2, int a3);
// signed int __userpurge CBuffRemainLuckyStone1::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CBuffRemainPet::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CBuffRemainPet::FreeBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CBuffRemainPet::IsExpired<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
signed int __thiscall CBuffHydrochloricAcid::ApplyBuff(void *this, int a2);
int __stdcall CBuffHydrochloricAcid::FreeBuff(int a1);
// signed int __userpurge CBuffHydrochloricAcid::IsExpired<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
signed int __thiscall CBuffMixDamage::ApplyBuff(void *this, int a2);
// signed int __userpurge CBuffMixDamage::IsExpired<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CCalendar::CCalendar(int this);
int __thiscall CCalendar::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CCalendar::_CCalendar(void *this);
// void __usercall CCalendar::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __setargv(void); weak
int __cdecl CCalendar::GetTime();
// void __userpurge CCalendar::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CCalendar::ElapseTime(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __cdecl CCalendar::IsIntercalary();
int __thiscall CChar::CChar(int this);
bool __thiscall CChar::Index(int this, int a2);
int __stdcall CMonsterSiegeGunBall::Damage(int a1, int a2, int a3, int a4, int a5, int a6);
int __thiscall CChar::AddMState(int this, int a2, int a3);
LONG __thiscall CChar::SubGState(int this, int a2);
LONG __thiscall CChar::AddMStateEx(int this, int a2);
LONG __thiscall CChar::SubMStateEx(int this, int a2);
int __thiscall CChar::SubMState(int this, int a2, int a3);
int __thiscall CChar::GetFinalDefense(void *this, int a2);
int __thiscall CChar::GetFinalAbsorb(int this, int a2);
int __thiscall CChar::GetFinalResist(void *this, int a2, int a3);
signed int __stdcall CChar::GetMSpeed(int a1);
// int __userpurge CChar::UpdateChild<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
// int __userpurge CChar::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CChar::_CChar<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CChar::ReviseProperty(int this);
int __thiscall CChar::GetDropPt(int this, int a2);
int __thiscall CChar::SetXY(int this, int a2);
void __thiscall CChar::SetDirection(void *this, int a2, int a3);
int __thiscall CChar::SetReverseDirection(int this, int a2);
bool __thiscall CChar::IsNormal(int this);
int __thiscall CBase::IsDeleted(_DWORD); // weak
int __thiscall CChar::IsGState(int this, int a2);
// void __userpurge CChar::SetBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CChar::AddBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CChar::_FindBuff(int this, int a2);
// int __userpurge CChar::GetBuffRemain<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CChar::UpdateBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CChar::RefreshBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CChar::CancelBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CChar::CancelAllBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CChar::DeleteAllBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CChar::CancelBuffPrty(int a1<ecx>, int a2<edx>, DWORD ebx0<ebx>, DWORD a4<edi>, DWORD a5<esi>, int a3);
// void __usercall CChar::ResetAllBuff(int a1<ecx>, int a2<edx>, DWORD a3<ebx>, DWORD a4<edi>, DWORD a5<esi>);
// void __usercall CChar::SaveAllBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// LONG __usercall CChar::WriteInSight<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6);
// LONG __usercall CChar::WriteInRect<eax>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a1, char a2, int a3, char a4);
int __fastcall CConfig::CConfig(int a1, int a2);
// int __fastcall std__ios_base__ios_base(_DWORD, _DWORD); weak
void *__thiscall CConfig::_CConfig(int this);
void *__thiscall CConfig::Close(int this);
void __cdecl sub_40BBE0(int a1);
int __thiscall sub_40BCA0(void *this);
int __thiscall sub_40BCC0(void *this);
int __thiscall sub_40BCE0(void *this);
int __thiscall sub_40BD00(void *this);
int __thiscall sub_40BD20(void *this);
signed int __thiscall CConfig::GetToken(void *this);
void *__thiscall CConfig::Find(void *this, void *a2, const char *a3);
void *__fastcall CConfig::GetValue(int a1, int a2, void *a3);
void *__thiscall sub_40C300(void *this, int a2);
_UNKNOWN *__cdecl sub_40C330();
// int std__ios_base__ios_base(void); weak
char *__cdecl sub_40C360();
void *__cdecl sub_40C380(const char *a1);
void *__fastcall CConfig::GetList(void *this, int edx0, void *a2);
void *__thiscall sub_40C4E0(void *this, int a2);
void *__thiscall sub_40C510(void *this, char a2, char a3);
char *__thiscall sub_40C550(void *this);
signed int __thiscall CConfig::Open(int this, const char *a2);
int __thiscall sub_40C8D0(void *this);
int __thiscall sub_40C8F0(void *this, const char *a2);
int __thiscall CConfig::Get(void *this, const char *a2, int a3);
int __thiscall sub_40C970(void *this, const char *a2);
int __thiscall CConfig::GetInt(void *this, const char *a2, int a3);
int __cdecl CConfig::GetTimeStamp();
// int __userpurge CDBPacket::OnIOCallback<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, int a3, int a4);
// int __usercall CDBSocket::CDBSocket<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CDBSocket::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2);
// int __usercall CDBSocket::_CDBSocket<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CDBSocket::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __usercall CDBSocket::Stop(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
BOOL __cdecl CDBSocket::OnClose();
// void __usercall CDBSocket::OnRead(int this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CDBSocket::Process(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __thiscall CSocket::IsSBit(int this, char a2);
// void __usercall CDBSocket::Write(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5);
int __cdecl CMemoryPool_CDBPacket::_Alloc();
_DWORD __cdecl CMemoryPool_CDBPacket::_Free(_DWORD); // weak
int __thiscall CDBPacket::CDBPacket(_DWORD); // weak
int __thiscall CDBPacket::_scalar_deleting_destructor_(void *this, char a2);
LONG __cdecl CMemoryPool_CDBPacket::_CPool::_CPool();
LONG __cdecl CMemoryPool_CDBPacket::_FreeAll();
int __thiscall CFindPath::CFindPath(int this);
void *__thiscall CFindPath::_CFindPath(void *this);
// signed int __userpurge CFindPath::FindPath<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, int a2, int a3);
_DWORD __cdecl sub_40E130(_DWORD, _DWORD); // weak
int __thiscall CFindPath::CalcH(int this, int a2);
int __thiscall CFindPath::GetBestNode(_DWORD); // weak
void *__thiscall CFindPath::FreeNode(void *this);
// int __userpurge sub_40E270<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CFindPath::LinkChild<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, int a3, int a4);
int __thiscall CFindPath::CheckList(int this, int a2, unsigned int a3);
_DWORD __stdcall CFindPath::Propagation(_DWORD); // weak
int __thiscall CFindPath::Insert(void *this, int a2);
int __cdecl CMemoryPool_CFindPath::NODE::_Alloc();
_DWORD __cdecl CMemoryPool_CFindPath::NODE::_Free(_DWORD); // weak
int __thiscall CFindPath::NODE::NODE(int this, int a2, int a3);
void *__thiscall CMemoryPool_CAuthPacket::_CPool::CPool(void *this);
LONG __cdecl CMemoryPool_CFindPath::NODE::_CPool::_CPool();
LONG __cdecl CMemoryPool_CFindPath::NODE::_FreeAll();
void *__thiscall CGoto::CGoto(void *this);
// int __userpurge CGoto::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2);
// int __usercall CGoto::_CGoto<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
_DWORD __cdecl CGoto::FindGoto(char, _DWORD); // weak
signed int __thiscall CGoto::Set(void *this, int a2, char a3);
signed int __thiscall CGoto::OnLoad(int this);
void *__thiscall CPortal::CPortal(void *this);
// int __userpurge CPortal::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2);
// int __usercall CPortal::_CPortal<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CPortal::Set(void *this, int a2, char a3);
signed int __thiscall CPortal::OnLoad(int this);
// signed int __usercall CPortal::OpenPortal<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __thiscall sub_40ED20(int this, int a2, int a3);
char __stdcall sub_40EEE0(const char *a1, const char *a2);
int __thiscall sub_40EF10(int this, int a2, const char **a3);
void *__thiscall sub_40EFA0(int this, void *a2);
int __thiscall sub_40EFD0(int this, const void *a2);
int __thiscall sub_40F000(int this, int a2, int a3);
int __thiscall sub_40F040(int *this);
int __cdecl sub_40F060(int a1);
void *__thiscall sub_40F070(int this, void *a2);
void *__thiscall sub_40F0A0(int this, void *a2, const char **a3);
void *__thiscall sub_40F0D0(int this, void *a2, char a3, int a4, int a5);
int __thiscall sub_40F510(void *this);
void *__thiscall sub_40F550(void *this, int a2);
void *__thiscall sub_40F580(void *this, int a2);
// _DWORD __stdcall std__locale__facet__facet(_DWORD); weak
// int __thiscall sub_40F5F0(_DWORD); weak
int __thiscall sub_40F610(void *this, char a2);
// int __thiscall std__locale__facet___facet(_DWORD); weak
int __thiscall sub_40F660(int this);
int __thiscall sub_40F680(void *this, char a2);
int __thiscall sub_40F6B0(void *this);
int __thiscall sub_40F6E0(void *this);
int __thiscall sub_40F700(void *this, char a2);
void *__thiscall sub_40F730(void *this, int a2);
int __thiscall sub_40F780(int this);
void *__thiscall sub_40F7A0(void *this, int a2, int a3, int a4);
// int __cdecl std__char_traits_char___copy(void *, void *, size_t); idb
// int __thiscall unknown_libname_4(_DWORD); weak
int __thiscall sub_40F8A0(int this, char a2, size_t a3);
int __thiscall sub_40F920(int this, unsigned int a2, int a3);
void *__cdecl sub_40F9B0(void *a1, const void *a2, size_t a3);
int __thiscall sub_40F9D0(int this, int a2);
// _DWORD __cdecl std__char_traits_char___assign(_DWORD, _DWORD); weak
bool __thiscall sub_40FA20(void *this, int a2, char a3);
// int __thiscall unknown_libname_25(_DWORD); weak
int __thiscall sub_40FB00(void *this, int a2, int a3);
void *__stdcall sub_40FC00(size_t a1);
void *__cdecl sub_40FC50(size_t a1);
int __thiscall sub_40FC70(void *this, char a2, const void *a3);
int *__thiscall sub_40FCF0(int *this);
int __thiscall sub_40FD10(void *this, char *a2);
void *__thiscall sub_40FD50(void *this, char *a2);
// int __cdecl std__char_traits_char___length(char *); idb
void *__thiscall sub_40FDA0(void *this, char *a2, size_t a3);
char __thiscall sub_40FE20(void *this, unsigned int a2);
// int __cdecl _tolower(int);
signed int __cdecl sub_40FE70();
int __thiscall sub_40FE90(int this, const char **a2);
int __thiscall sub_40FF20(void *this, int a2);
int __thiscall sub_410050(void *this, int a2);
void *__stdcall sub_410180(int a1, int a2, int a3, int a4, char a5);
// void *__cdecl operator new(unsigned int, void *); idb
void *__stdcall sub_410210(int a1, int a2, const void *a3);
int __thiscall sub_410280(int this, unsigned int a2);
void *__stdcall sub_4102F0(int a1);
int *__thiscall sub_410310(int *this);
signed int __cdecl sub_410330();
void *__stdcall sub_410360(int a1);
signed int __cdecl sub_410380();
int __thiscall sub_4103A0(int *this);
int __thiscall sub_410480(int this, int a2, int a3, int a4, int a5, char a6);
int __thiscall sub_4104E0(int this, int a2, int a3, const void *a4);
int __cdecl sub_410520(int a1);
void *__cdecl sub_410560(int a1);
void *__cdecl sub_410580(int a1);
void *__thiscall sub_4105A0(void *this);
void *__thiscall sub_4105D0(void *this, int a2, int a3);
int __thiscall sub_410610(int this);
int __cdecl sub_410680();
int __thiscall sub_4107A0(void *this);
int __cdecl sub_4107E0();
int __thiscall sub_410880(int this);
int __thiscall sub_4108A0(int this);
int __thiscall sub_4108C0(int this);
void *__thiscall sub_410970(int this, void *a2, int a3, char a4);
int __thiscall sub_410A10(void *this, int a2, int a3);
void *__thiscall sub_4111A0(void *this, int a2);
int __thiscall sub_4111D0(void *this);
int __thiscall sub_4111F0(void *this, char a2);
int __thiscall sub_411220(int this);
int __thiscall sub_411280(int *this, int a2, int a3);
_DWORD __stdcall sub_4112B0(_DWORD); // weak
int __cdecl sub_411330(int a1);
int *__thiscall sub_411370(int *this);
int *__thiscall sub_411390(int *this);
int __thiscall sub_4113B0(int *this);
char __cdecl sub_411470(int a1, int a2);
int __thiscall CGuild::CGuild(int this);
// int __userpurge CGuild::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CGuild::_CGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_4116E0(int this);
// __int32 __usercall CGuild::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
signed int __thiscall CBase::Delete(void *this);
// int __usercall CGuild::SecondProcess<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall CGuild::MinuteProcess<eax>(DWORD a1<ebx>, char a2<dil>, DWORD a3<esi>, unsigned int a4);
// int __usercall CGuild::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CGuild::IsLoad<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// void __usercall CGuild::Load(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6);
// void __usercall CGuild::Login(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __usercall CGuild::LoginCastle<eax>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a3<esi>, int a1, int a2);
// __int32 __userpurge CGuild::Logout<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CGuild::DelPlayer(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// signed int __usercall CGuild::CreateTrial<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// void *__usercall CChar::Lock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CChar::Unlock(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CParty::GetSize(void *this);
// signed int __userpurge CGuild::CreateTrialSecedeAnswer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// signed int __userpurge CGuild::CreateConsent<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
signed int __thiscall CGuild::IsAllConsent(void *this);
// signed int __userpurge CGuild::CreateGuildName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5);
// signed int __userpurge CGuild::CreateGuildNameAnswer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, const char *a7);
int __thiscall CGuild::IsSkillAble(int this, int a2, char a3);
// signed int __userpurge CGuild::Conflux<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6);
// signed int __usercall CGuild::ConfluxAnswer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, char a6, int a7);
// signed int __usercall CGuild::ConfluxSecedeAnswer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6);
char __thiscall CGuild::IsTempMemberFUll(void *this);
// signed int __userpurge CGuild::Secession<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CGuild::Banish<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6);
// signed int __userpurge CGuild::Appointment<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6, const char *a7);
// signed int __userpurge CGuild::Dissolution<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CGuild::TitleChange<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6, const char *a7);
// signed int __userpurge CGuild::SetTodayMessage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6);
// int __userpurge CGuild::GetTodayMessage<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// void __userpurge CGuild::SendMemberInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>, int a4, int a5);
// signed int __userpurge CGuild::AdminInfo<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __userpurge CGuild::BasicInfo<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// signed int __userpurge CGuild::SetSkillAble<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// signed int __userpurge CGuild::CheckStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CGuild::SetStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CGuild::OnSetStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// signed int __userpurge CGuild::SetExpADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __usercall CGuild::SetExp<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, const char *a4, signed int a5);
// signed int __userpurge CGuild::SetConnectTell<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CGuild::SetMemberLelvelUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6);
signed int __thiscall CGuild::GetTitle2Class(void *this, const char *a2);
char *__thiscall CGuild::GetClass2Title(void *this, int a2);
char *__thiscall CGuild::SetClassTitle(int this, char *a2, const char *a3);
char __thiscall CGuild::IsMemberFull(void *this);
char __thiscall CGuild::IsAppointmentFull(void *this, int a2);
int __thiscall CGuild::GetAppointmentLimitTime(void *this, int a2);
// signed int __userpurge CGuild::IsSameName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, const char *a4);
// int __usercall sub_416230<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
int __cdecl CGuild::FindGuild(const char *a1);
int __thiscall CGuild::FindLeaderPlayer(void *this);
char *__thiscall CGuild::GetLeaderName(void *this);
int __thiscall CGuild::FindMember(void *this, int a2, const char *a3);
// int __usercall CGuild::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// signed int __userpurge CGuild::MemberADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge CGuild::MemberDEL<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4);
// char __userpurge CGuild::SetLevel<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4);
signed int __cdecl CGuild::GetGuildSkill(int a1);
// void __userpurge CGuild::SetPointADD(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
signed int __thiscall CGuild::CalPenaltyLevel(int this);
signed int __thiscall CGuild::CalPenaltyTLevel(int this);
// int __userpurge CGuild::BroadcastLock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6);
// char __userpurge CGuild::Broadcast<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6);
// LONG __usercall CGuild::SendPlayerSight<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, void *a5, int a6);
// signed int __userpurge CGuild::AllianceOffer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6, signed int a7);
// signed int __userpurge CGuild::AllianceOfferAnswer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, time_t a7, int a8);
// int __userpurge CGuild::SetAlliance<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CGuild::AllianceBroadcast<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
bool __cdecl sub_4173F0();
bool __cdecl CGuild::IsDeclareWarPeriod();
bool __cdecl CGuild::IsWarWaitingPeriod();
bool __cdecl CGuild::IsWarringPeriod();
time_t __cdecl CGuild::GetWarEndTime();
// signed int __userpurge CGuild::WarDeclare<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __usercall CGuild::WarDelcareList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5);
// signed int __userpurge CGuild::TrialUnfurlStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CGuild::UnfurlStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __usercall CGuild::BrokenStandard<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __usercall CGuild::BrokenGate<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// signed int __usercall CGuild::CanAttack<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// signed int __userpurge CGuild::CastleInfo<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5);
// signed int __userpurge CGuild::TaxRateControl<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6);
// signed int __userpurge CGuild::TaxLevy<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __usercall CGuild::CastleGateNPC<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, int a6);
// signed int __userpurge CGuild::CastleSetGateLmit<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, signed int a6);
// bool __userpurge CGuild::IsAlliancePeriod<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CGuild::ChangePlayerName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6);
// void __usercall CGuild::ChangeGuildName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6);
int __thiscall sub_418420(int this, int a2);
int __thiscall sub_418480(int this);
void *__thiscall sub_4184E0(void *this);
int __thiscall sub_418510(int this);
int __thiscall sub_418530(int this);
int __thiscall sub_418590(int this);
void *__thiscall sub_4185D0(int this, void *a2, int a3, char a4);
_DWORD __stdcall sub_418670(_DWORD); // weak
bool __stdcall sub_4186F0(int a1, int a2);
_DWORD __stdcall sub_418710(_DWORD); // weak
int __thiscall sub_418790(int this);
int __thiscall sub_4187B0(int this);
int *__thiscall sub_418860(int *this);
int *__thiscall sub_418880(int *this);
void *__thiscall sub_4188A0(int this, void *a2, int a3, char a4);
_DWORD __cdecl sub_418940(_DWORD, char, char); // weak
_DWORD __cdecl sub_418960(_DWORD, _DWORD); // weak
int __cdecl sub_418980(int a1, int a2);
int __cdecl sub_4189A0(int a1, char a2);
int __cdecl sub_4189C0(char a1, char a2, int a3);
void *__thiscall sub_418A00(void *this);
int __thiscall sub_418A30(int this);
int __thiscall sub_418A50(int this);
int __thiscall sub_418A70(int this);
int __thiscall CAlliance::CAlliance(int this);
// int __userpurge CAlliance::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CAlliance::_CAlliance<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// __int32 __usercall CAlliance::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
signed int __thiscall CAlliance::Clear(int this);
// int __usercall CAlliance::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __usercall CAlliance::IsLoad<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// void __usercall CAlliance::Load(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// __int32 __usercall CAlliance::LoadSetGuild<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6);
// int __userpurge CAlliance::DeleteSetGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __usercall CAlliance::Join<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5, int a6, int a7, const char *a8, int a9, int a10);
// __int32 __usercall CAlliance::PostponeExpire<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// LONG __userpurge CAlliance::Postpone<eax>(__int32 a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, unsigned int a6);
// __int32 __usercall CAlliance::Expire<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, unsigned int a4);
// int __userpurge CAlliance::AllianceInfo<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>, int a4);
int __thiscall CAlliance::Add(int this, int a2);
// int __usercall CAlliance::GetSize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CWar::SetGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CAlliance::BroadcastLock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
// char __userpurge CAlliance::Broadcast<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
// void __usercall CAlliance::ChangeLeaderName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6);
// void __usercall CAlliance::ChangeGuildName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6);
int __thiscall CCastle::CCastle(_DWORD); // weak
// int __userpurge CCastle::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2);
// int __usercall CCastle::_CCastle<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// BOOL __usercall CCastle::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// __int32 __usercall CCastle::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// __int32 __usercall CCastle::Load<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// char __usercall CCastle::SetWarGuild<al>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a3<esi>, int a1, int a2);
// void __usercall CCastle::WarBegin(char a1<dil>, DWORD ebx0<ebx>, DWORD a3<esi>, int a2);
int __cdecl CCastle::WarPortal(int a1, int a2, int a3, int a4);
// int __userpurge CCastle::_WarMsg<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a2);
// int __userpurge CCastle::WarMsg<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a2);
// int __usercall CCastle::WarList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// int __usercall CCastle::OnDelete<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CCastle::SetGuild<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2);
int __cdecl CCastle::GetCastle(char a1);
int __cdecl CCastle::GetMonsterTile2CID(int a1, int a2, int a3);
// signed int __userpurge CCastle::SubGateState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// bool __userpurge CCastle::IsLord<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// bool __userpurge CCastle::IsAlliance<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CCastle::IsAlreadyDeclare<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __usercall CCastle::IsAllCastleWarRelation<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __usercall CCastle::Login<eax>(DWORD a1<ebx>, DWORD a2<esi>, int a3, int a4);
// __int32 __userpurge CCastle::WarAllianceADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, __int32 a8);
// __int32 __userpurge CCastle::WarADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, const char *a7, int a8);
// int __usercall CCastle::GetWarSize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CCastle::WarDelcareList<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>, int a4);
// bool __usercall CCastle::IsStandardAlive<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CCastle::GetStandardUnfurl<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// __int32 __userpurge CCastle::SetStandardUnfurl<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// __int32 __userpurge CCastle::SetCurStandardGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __usercall CCastle::UnfurlStandardCancel(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// __int32 __userpurge CCastle::BrokenStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __usercall CCastle::CreateStandard<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6, int a7);
// void __userpurge CCastle::CreateGate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, const char *a7);
// void *__userpurge CCastle::CreateNoExistGate<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4<esi>, int a5, int a6, const char *a7);
// int __usercall CCastle::IsGateAlive<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5);
// int __usercall CCastle::GetTaxRate<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// __int32 __userpurge CCastle::SetTaxRate<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// bool __usercall CCastle::IsPayment<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CCastle::GetTax<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// __int32 __userpurge CCastle::AddTax<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CCastle::ResetTax<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CCastle::TaxSave<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// signed int __userpurge CCastle::IsGateUse<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CCastle::IsGateUseWarring<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CCastle::GateGoto(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// signed int __userpurge CCastle::SetGateLimit<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6);
// __int32 __usercall CCastle::SetWarRemainSecondTime<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// __int32 __usercall CCastle::ChangeLeaderName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5);
// __int32 __usercall CCastle::ChangeGuildName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5);
// __int32 __userpurge CCastle::SetLordDeclare<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// __int32 __usercall CCastle::SecondProcess<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall CCastle::WarEnd<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __usercall CCastle::IsWarEnd<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CCastle::ChangeLord(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __cdecl CCastle::IsWarDeclared();
int __thiscall CWar::CWar(int this);
// int __userpurge CWar::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CWar::_CWar<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// BOOL __usercall CWar::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// __int32 __usercall CWar::Load<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// int __usercall CWar::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void *__thiscall CWar::ADD(void *this, int a2);
int __thiscall CWar::Clear(_DWORD); // weak
int __thiscall sub_41C710(int this);
int __thiscall sub_41C770(_DWORD); // weak
int __thiscall sub_41C7D0(void *this);
int __thiscall sub_41C800(int this, int a2);
int __thiscall sub_41C840(int this, int a2);
// int __thiscall std___String_base___String_base(_DWORD); weak
_DWORD __stdcall sub_41C8D0(_DWORD); // weak
_DWORD __stdcall sub_41C950(_DWORD); // weak
int __thiscall sub_41C9D0(int this, int a2, const void *a3, int a4);
int __stdcall sub_41CA50(int a1, int a2, int a3);
int __thiscall sub_41CA80(int this, int a2, int a3);
int *__thiscall sub_41CAB0(int *this);
int __thiscall sub_41CAD0(int this, int a2);
signed int __cdecl sub_41CB60();
int __thiscall sub_41CB80(int this, const void *a2, int a3, int a4);
void *__stdcall sub_41CE40(int a1);
void *__thiscall sub_41CE60(void *this, int a2);
int __thiscall sub_41CE80(void *this, int a2);
int *__thiscall sub_41CEB0(int *this);
int __thiscall sub_41CEE0(void *this, int a2);
int __thiscall sub_41CF00(int this, int a2);
char *__stdcall sub_41CF30(const void *a1, int a2, void *a3);
int __cdecl sub_41CF60(int a1, int a2, int a3);
void *__cdecl sub_41CF80(const void *a1, int a2, int a3);
char *__cdecl sub_41CFC0(const void *a1, int a2, void *a3);
void *__thiscall sub_41D000(void *this);
void *__thiscall sub_41D030(void *this);
int __thiscall sub_41D060(int this);
int __thiscall sub_41D080(int this);
int __thiscall sub_41D0A0(int this);
void *__thiscall sub_41D150(int this, void *a2, int a3, char a4);
int __thiscall sub_41D1F0(int this);
int __thiscall sub_41D210(int this);
int __thiscall sub_41D230(int this);
void *__thiscall sub_41D2E0(int this, void *a2, int a3, char a4);
int __thiscall CInitItem::CInitItem(int this);
// int __userpurge CInitItem::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CInitItem::_CInitItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_41D5C0(int this);
int __cdecl CInitItem::Open();
signed int __cdecl CInitItem::FindKey(char a1);
int __cdecl CInitItem::Copy();
signed int __thiscall CInitItem::Set(void *this, int a2, char a3);
signed int __thiscall CInitItem::OnLoad(int this);
signed int __thiscall CInitItem::SetSpec(void *this, char a2);
int __thiscall sub_41EAA0(int this, int a2, int a3);
int __thiscall sub_41EAE0(int this, int a2);
int __thiscall CSpecPrty::CSpecPrty(int this, int a2, int a3, int a4);
int __thiscall CSpec::CSpec(int this, int a2, int a3);
int __thiscall CSpecGState::CSpecGState(int this, int a2);
int __thiscall CSpecTeleport::CSpecTeleport(int this, int a2, int a3);
int __thiscall CSpecRefresh::CSpecRefresh(int this, int a2, int a3);
int __thiscall CSpecCharming::CSpecCharming(int this, int a2);
int __thiscall CSpecRepair::CSpecRepair(int this, int a2);
int __thiscall CSpecChangePrefix::CSpecChangePrefix(int this, int a2, int a3, int a4, int a5, int a6);
int __thiscall CSpecProtect::CSpecProtect(int this);
int __thiscall CSpecBuff::CSpecBuff(int this, int a2, int a3, int a4);
int __thiscall CSpecRevival::CSpecRevival(int this, int a2);
char __thiscall CInitItem::ApplySpec(void *this, int a2);
char __thiscall CInitItem::FreeSpec(void *this, int a2);
// int __userpurge CInitItem::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CInitItem::Enchant(void *this, int a2, int a3);
int __cdecl CInitItem::GetSpecValue(int a1, int a2, char a3);
int __thiscall CPrefix::CPrefix(int this);
// int __userpurge CPrefix::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CPrefix::_CPrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __cdecl CPrefix::Copy();
signed int __thiscall CPrefix::Set(void *this, int a2, char a3);
signed int __thiscall CPrefix::OnLoad(int this);
char __thiscall CPrefix::ApplySpec(void *this, int a2);
char __thiscall CPrefix::FreeSpec(void *this, int a2);
int __thiscall CSpecPrty::ApplySpec(int this, int a2);
int __thiscall CSpecPrty::FreeSpec(int this, int a2);
LONG __thiscall CSpecGState::ApplySpec(int this, int a2);
LONG __thiscall CSpecGState::FreeSpec(int this, int a2);
// signed int __userpurge CSpecTeleport::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __usercall CParty::ExistOnPK<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CSpecRefresh::Use(void *this, int a2);
int __thiscall CSpecCharming::Enchant(int this, int a2, int a3);
int __stdcall CSpecRepair::Enchant(int a1, int a2);
int __thiscall CSpecChangePrefix::Enchant(int this, int a2, int a3);
int __stdcall CSpecProtect::Enchant(int a1, int a2);
int __thiscall CSpecBuff::Use(void *this, int a2);
// signed int __userpurge CSpecRevival::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
void *__thiscall sub_41FFC0(void *this);
int __thiscall sub_41FFF0(int this);
int __cdecl sub_420010();
int __thiscall sub_420030(void *this, int a2, int a3);
int __thiscall sub_420060(int this, int a2, int a3);
char __stdcall sub_420220(int a1, int a2);
int __thiscall sub_420250(int *this);
void *__thiscall sub_420270(int this, void *a2, char a3, int a4, int a5);
int __thiscall sub_4206B0(int this);
void *__thiscall sub_420760(void *this);
void *__thiscall sub_420780(int this, void *a2, int a3, char a4);
int __thiscall sub_420820(int this);
_DWORD __stdcall sub_420880(_DWORD); // weak
void *__cdecl sub_420900(int a1);
void *__thiscall sub_420920(void *this);
void *__thiscall sub_420950(void *this, int a2, char a3);
int __thiscall sub_420990(int this, int a2, int a3);
int __thiscall sub_4209C0(int this);
int __thiscall sub_4209E0(int this);
int __thiscall sub_420A00(int this);
void *__thiscall sub_420AB0(int this, void *a2, int a3, char a4);
int __thiscall sub_420B50(int this);
_DWORD __stdcall sub_420BB0(_DWORD); // weak
int __thiscall CInitMap::CInitMap(int this);
// int __userpurge CInitMap::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CInitMap::_CInitMap<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CInitMap::Set(void *this, int a2, char a3);
// signed int __usercall CInitMap::OnLoad<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __usercall sub_420E30<eax>(DWORD a1<eax>, DWORD a2<edx>, DWORD a3<ecx>, DWORD a4<ebx>, DWORD a5<edi>, DWORD a6<esi>, void *lpContext);
void *__thiscall CIOException::CInit::CInit(void *this);
const char *__cdecl sub_4210A0(const char *a1);
// void __usercall sub_4210E0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
void __cdecl CIOException::Lock();
void __cdecl CIOException::Unlock();
BOOL __cdecl sub_421140();
int __cdecl sub_4212B0(const char *cp, int a2, char *a3, LPCSTR lpFileName);
int __cdecl sub_421820(SOCKET s, LPCSTR lpFileName); // idb
// void __usercall sub_4218D0(int a1<eax>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
_DWORD sub_421EC0(HANDLE hFile, LPCSTR arg4, ...);
void *__cdecl sub_421F30(int a1);
int __cdecl sub_421FE0(HANDLE hFile); // idb
// int __cdecl _getdrive();
// int __cdecl sub_422180(HANDLE hFile); idb
int __cdecl sub_422280(int a1);
// void __usercall sub_422460(int a1<eax>, HANDLE hFile, unsigned int a3, unsigned int a4);
int __cdecl sub_4225E0(HANDLE hFile, PVOID ContextRecord); // idb
// void __usercall sub_4228C0(int a1<eax>, void *a2, int a3);
// LONG __userpurge TopLevelExceptionFilter<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, struct _EXCEPTION_POINTERS *a4);
void __cdecl CIOException::CInit::_CInit();
void __cdecl sub_422B30(const char *a1, char a2);
// int __usercall sub_422D80<eax>(int result<eax>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall sub_422DC0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// signed int __usercall CIOException::Filter<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
void __cdecl CIOException::Open(char *a1, int a2, int a3);
bool __cdecl CIOException::Enable();
LONG __cdecl CIOException::Disable();
LONG __cdecl CIOException::IsEnable();
void __cdecl CIOException::SendMail();
LONG __cdecl CIOException::ToggleRaise();
void __cdecl CIOException::DumpStack(int a1, int a2, int a3);
DWORD __cdecl sub_423130(HANDLE hFile, HANDLE hThread);
LONG __thiscall CIOSpinLock::Wait(void *this);
struct _RTL_CRITICAL_SECTION *__thiscall CIOCriticalSection::CIOCriticalSection(struct _RTL_CRITICAL_SECTION *this);
// void __usercall CIOCriticalSection::_CIOCriticalSection(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void *__usercall CIOCriticalSection::Enter<eax>(struct _RTL_CRITICAL_SECTION *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CIOCriticalSection::Leave(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __cdecl CIOSocket::CInit::_CInit();
// signed int __usercall CIOSocket::CreateIOThread<eax>(char a1<cl>, int a2<edx>, DWORD a3<ebx>, DWORD a4<edi>, DWORD a5<esi>, int a6);
DWORD __thiscall CIOSocket::AddIOThread(DWORD this);
signed int __cdecl CIOSocket::CloseIOThread();
void __cdecl CIOSocket::FreeIOThread();
// int __cdecl std__locale__facet___facet(_DWORD); weak
// LONG __userpurge sub_423980<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, volatile LONG *lpAddend);
// int __userpurge sub_4239C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int lpAddend);
// signed int __userpurge CIOObject::RegisterWait<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
// void __userpurge CIOObject::AddTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall CIOSocket::CIOTimer::CIOTimer(int this, int a2, int a3, int a4);
// BOOL __userpurge CIOObject::OnTimerCallback<eax>(ULONG_PTR a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, DWORD dwNumberOfBytesTransferred);
// int __userpurge CIOObject::OnIOCallback<eax>(int a1<eax>, int a2<ecx>, DWORD a3<ebx>, DWORD a4<edi>, DWORD a5<esi>, int a6, int a7, int a8);
int __thiscall CIOSocket::CIOTimerInstance::OnTimerCallback(void *this, int a2);
DWORD __stdcall CIOSocket::CIOTimerInstance::OnIOCallback(int a1, int a2, int a3);
// int __userpurge CIOSocket::WaitThread<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
void __cdecl CIOSocket::IOThread();
void __cdecl CIOSocket::DumpStack();
int __stdcall sub_423F60(int a1, int a2, int a3, void (__thiscall *a4)(_DWORD));
void *__cdecl CIOBuffer::Alloc();
LONG __thiscall CIOBuffer::Free(void *this);
int __cdecl CIOBuffer::FreeAll();
// int __userpurge CIOSocket::CIOSocket<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CIOSocket::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CIOSocket::_CIOSocket<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CIOSocket::Close(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CIOSocket::GracefulClose(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CIOSocket::OnIOCallback<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __usercall CIOSocket::OnCreate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CIOSocket::ReadCallback(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CIOSocket::Read(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, size_t a5);
// void __userpurge CIOSocket::WriteCallback(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CIOSocket::Write(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CIOServer::CIOServer(int this);
int __thiscall CIOServer::_scalar_deleting_destructor_(void *this, char a2);
int __thiscall CIOServer::_CIOServer(void *this);
BOOL __thiscall CIOServer::Close(BOOL this);
// signed int __userpurge CIOServer::Start<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int hostshort);
BOOL __thiscall CIOServer::OnWaitCallback(ULONG_PTR this);
int __thiscall CIOServer::Stop(int this);
// void __userpurge CIOServer::OnIOCallback(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __usercall CIOSocket::Initialize(ULONG_PTR a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
bool __thiscall sub_424D30(int this);
int __thiscall sub_424D50(int this);
int __thiscall sub_424D70(int this, int a2);
char __thiscall sub_424DC0(int this);
int __thiscall sub_424E10(int this);
char *__thiscall sub_424E30(int this, int a2);
char __thiscall sub_424EA0(int this);
int __thiscall sub_424EF0(int this, int a2, int a3, int a4);
int __stdcall sub_424F70(int a1, int a2);
int __thiscall sub_424FA0(int this, int a2, int a3, int a4);
int __thiscall sub_425280(void *this, int a2);
int __cdecl sub_4252A0(char a1, char a2);
int __cdecl sub_4252F0(char a1, char a2);
void *__cdecl sub_425330(void *a1, int a2, int a3);
int __cdecl sub_425370(int a1, int a2, int a3);
void *__thiscall sub_4253A0(void *this);
int __cdecl sub_4253C0();
int __cdecl sub_4253D0(char a1, char a2);
int __cdecl sub_425440(char a1, char a2);
// int __cdecl unknown_libname_6(_DWORD, _DWORD); weak
int __cdecl sub_4254E0(int a1, int a2, int a3);
int __thiscall sub_425520(void *this, int a2, int a3);
void *__thiscall sub_425550(void *this, int a2);
int __cdecl sub_425570(char a1, int a2, int a3, int a4, int a5, int a6);
int __cdecl sub_425640(char a1, char a2, char a3, int a4, int a5, int a6);
char __stdcall sub_4256A0(void *a1, int a2);
char __thiscall CIOSocket::CIOTimer::operator_(void *this, int a2);
int __cdecl sub_4256E0(char a1, int a2, int a3, int a4, int a5, int a6);
void *__thiscall sub_425830(void *this);
int __thiscall sub_425850(void *this);
int __thiscall CIOSocket::CIOTimerInstance::CIOTimerInstance(int this);
void *__thiscall CIOBuffer::CSlot::CSlot(void *this);
int __thiscall sub_4258D0(int this);
int __thiscall CItem::CItem(int this);
int __thiscall CItem::Use(int this, int a2);
int __thiscall CItem::Enchant(int this, int a2, int a3);
int __stdcall CItem::ChangePrefix(int a1, int a2, int a3, int a4);
// int __userpurge CItem::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CItem::_CItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __cdecl CItem::InsertInitItem(int a1);
signed int __cdecl CItem::InsertPrefix(int a1);
signed int __cdecl CItem::InsertItemGroup(int a1);
// void __usercall CItem::ReloadItemGroup(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __fastcall CObjectDB::CObjectDB(int a1, int a2);
void *__thiscall CObjectDB::_CObjectDB(int this);
int __cdecl CItem::FindInitItem(char a1);
int __cdecl CItem::FindPrefix(char a1);
int __cdecl CItem::NewItem(int a1);
int __thiscall CItemMask::CItemMask(int this, int a2);
bool __thiscall CItemDefense::IsBroken(int this);
// int __userpurge CItemMask::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
int __thiscall CItemStandard::CItemStandard(int this, int a2);
// int __usercall CItemStandard::_CItemStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __cdecl sub_426060(int a1, int *a2);
int __cdecl CItem::CreateItem(char a1, int a2, int a3, int a4);
int __cdecl CItem::CreateCheatItem(char a1, int a2, int a3, int a4);
int __thiscall CItem::AddState(int this, int a2);
int __cdecl CItem::CreateOwnItem(char a1, int a2, int a3, int a4);
// int __usercall CItem::CreateDropItem<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5);
// int __usercall CItem::CreateQuestItem<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// int __usercall CItem::Close<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl CItem::ClearItemGroup();
// void __userpurge CItem::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CItem::PutInfo(int this, int *a2, int a3);
int __thiscall sub_426810(int this, int a2, int a3);
int __thiscall CItem::Init(int this, int a2, signed int a3, int a4);
// void __userpurge CItem::SendDelete(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CItem::SendCreate(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// signed int __userpurge CItem::Trash<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItem::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_426AD0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CItem::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge CItem::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// LONG __userpurge CItem::Drop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// int __userpurge CItem::Trade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
bool __thiscall CItem::CanSell(int this, int a2);
int __thiscall CItem::IsState(int this, int a2);
char __thiscall CItem::CanTrade(int this, int a2, int a3, int a4);
char __thiscall CItem::CanDrop(int this, int a2, int a3);
// signed int __userpurge CItem::StorageOut<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6, int a7, int a8);
// void __userpurge CItem::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7);
LONG __cdecl CItem::NewIID();
int __thiscall CItem::GetSellMoney(int this, int a2);
int __thiscall CItem::SetEtc(int this, int a2);
// LONG __userpurge CItem::SendItemInfo<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, char a6);
// int __userpurge CItem::InsertItem<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8, int a9);
int __thiscall CItemWeapon::CItemWeapon(int this, int a2);
// int __usercall CItemGeneral::_CItemGeneral<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CItemWeapon::PutInfo(int this, int *a2, int a3);
int __thiscall sub_4277C0(int this, int a2, int a3);
int __thiscall CItemWeapon::Init(int this, char a2, int a3, int a4);
// void __userpurge CItemWeapon::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CItem::SubState(int this, int a2);
int __thiscall CPlayer::AddWState(int this, char a2);
int __thiscall CPlayer::IsWState(int this, char a2);
// signed int __userpurge CItemWeapon::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemWeapon::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CItemWeapon::ApplySpec(int this, int a2);
int __thiscall CItemWeapon::FreeSpec(int this, int a2);
// void __userpurge CItemWeapon::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemWeapon::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CPlayer::SubWState(int this, char a2);
// void __userpurge sub_428D00(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CItemWeapon::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
bool __thiscall CItemDefense::CanSell(int this, int a2);
// signed int __userpurge CItemWeapon::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CItemWeapon::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7);
// signed int __userpurge CItemWeapon::Charming<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall CItem::GetLevel(int this);
// signed int __userpurge CItemWeapon::CharmingCheat<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6, int a7);
// signed int __userpurge CItemDefense::Repair<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CItemWeapon::ChangePrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// signed int __userpurge CItemWeapon::Protect<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
int __thiscall CItemWeapon::GetSellMoney(int this, int a2);
// void __userpurge CItemWeapon::UpgradeDestroy(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CItemWeapon::UpgradeRateUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemWeapon::UpgradeLevel(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4);
int __thiscall CItemDefense::CItemDefense(int this, int a2);
// int __userpurge CItemGeneral::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
int *__thiscall CItemDefense::PutInfo(int this, int *a2, int a3);
int __thiscall sub_42A590(int this, int a2, int a3);
// void __userpurge CItemDefense::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CItemDefense::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemDefense::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
char __thiscall CItemDefense::ApplySpec(int this, int a2);
char __thiscall CItemDefense::FreeSpec(int this, int a2);
// void __userpurge CItemDefense::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemDefense::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_42AE20(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CItemDefense::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge CItemDefense::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// signed int __userpurge CItemDefense::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemDefense::Charming<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemDefense::CharmingCheat<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6, int a7);
// signed int __userpurge CItemDefense::ChangePrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// signed int __userpurge CItemDefense::Protect<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
int __thiscall CItemDefense::GetSellMoney(int this, int a2);
// void __userpurge CItemDefense::UpgradeDestroy(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemMask::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemMask::PutOn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __thiscall CItemMask::Init(int this, int a2, int a3, int a4);
// void __userpurge CItemStandard::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CItemStandard::ApplySpec(int this, int a2);
int __thiscall CItemStandard::FreeSpec(int this, int a2);
// void __userpurge CItemStandard::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemStandard::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CItemStandard::CanDrop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
char __thiscall CItemStandard::CanTrade(int this, int a2, int a3, int a4);
// int __userpurge CItemStandard::Broken<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall CItemOrnament::CItemOrnament(int this, int a2);
int __thiscall CItemOrnament::Init(void *this, char a2, int a3, int a4);
// void __userpurge CItemOrnament::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CItemOrnament::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemOrnament::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
char __thiscall CItemOrnament::ApplySpec(int this, int a2);
char __thiscall CItemOrnament::FreeSpec(int this, int a2);
// void __userpurge CItemOrnament::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemOrnament::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemOrnament::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge CItemOrnament::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// char __userpurge CItemTransform::CanDrop<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemOrnament::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CItemOrnament::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7);
// signed int __userpurge CItemOrnament::ChangePrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
int __thiscall CItemOrnament::GetSellMoney(int this, int a2);
// void __userpurge CItemOrnament::UpgradeDestroy(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CItemGeneral::CItemGeneral(int this, int a2);
int __thiscall CItem::Sum(int this, int a2);
// int __userpurge CItemGeneral::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CItemGeneral::Trade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// signed int __userpurge CItemGeneral::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemGeneral::StorageOut<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int *a8);
int __thiscall CItemGeneral::Enchant(int this, int a2, int a3);
int __thiscall CItemQuest::CItemQuest(int this, int a2);
// int __userpurge CItemGeneral::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
bool __thiscall CItemQuest::CanMerge(int this, int a2);
int __thiscall CItemMoney::CItemMoney(int this, int a2);
bool __thiscall CItemMoney::CanMerge(int this, int a2);
// signed int __userpurge CItemMoney::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CItemMoney::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// signed int __userpurge CItemMoney::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, LONG Value);
// LONG __userpurge CItemMoney::Drop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// int __userpurge CItemMoney::Trade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// signed int __userpurge CItemMoney::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemMoney::StorageOut<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int *a8);
int __thiscall CItemMoney::SetEtc(int this, int a2);
int __thiscall CItemTransform::CItemTransform(int this, int a2);
int *__thiscall CItemTransform::PutInfo(int this, int *a2, int a3);
int __thiscall sub_42E710(int this, int a2, int a3);
int __thiscall CItemTransform::Init(int this, int a2, int a3, int a4);
// void __userpurge CItemTransform::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CItemTransform::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CItemTransform::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CItemTransform::ApplySpec(void *this, int a2);
int __thiscall CItemTransform::FreeSpec(void *this, int a2);
// void __userpurge CItemTransform::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemTransform::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CItemTransform::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge CItemTransform::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
char __thiscall CItemTransform::CanTrade(int this, int a2, int a3, int a4);
// signed int __userpurge CItemTransform::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CItemTransform::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7);
// void *__userpurge CItemTransform::UpdateExp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6);
// LONG __userpurge CItemTransform::CheatLevelUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, signed int a6);
// void __userpurge CItemTransform::SaveInfo(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// signed int __userpurge CItemTransform::ApplyTransform<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, signed int a6);
int __thiscall CItemTransform::FreeTransform(int this, int a2);
int __thiscall sub_42F590(int this);
int __thiscall sub_42F5F0(int this);
int __thiscall sub_42F650(int this);
_DWORD __stdcall sub_42F6B0(_DWORD); // weak
_DWORD __stdcall sub_42F730(_DWORD); // weak
_DWORD __stdcall sub_42F7B0(_DWORD); // weak
// int __cdecl unknown_libname_7();
int __thiscall sub_42F840(int *this);
int __cdecl sub_42F920(int a1);
int __cdecl sub_42F960(int a1, __int16 a2);
void *__thiscall sub_42F980(void *this);
void *__stdcall sub_42F9B0(void *a1, void **a2);
void *__thiscall sub_42F9D0(void *this);
// int __cdecl _initp_misc_winxfltr();
void *__thiscall sub_42FA10(void *this);
int __thiscall sub_42FA40(int this);
int __thiscall sub_42FA60(int this);
int __thiscall sub_42FA80(int this);
void *__thiscall sub_42FB30(int this, void *a2, int a3, char a4);
int __thiscall sub_42FBD0(int this);
int __thiscall sub_42FBF0(int this);
int __thiscall sub_42FC10(int this);
void *__thiscall sub_42FCC0(int this, void *a2, int a3, char a4);
int __thiscall sub_42FD60(int this);
int __thiscall sub_42FD80(int this);
int __thiscall sub_42FDA0(int this);
void *__thiscall sub_42FE50(int this, void *a2, int a3, char a4);
int __cdecl CGroup::Copy();
int __thiscall CGroup::CGroup(int this);
// int __userpurge CGroup::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CGroup::_CGroup<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CGroup::Set(void *this, int a2, char a3);
int __thiscall sub_430160(int this);
int __thiscall sub_4301A0(int this, int a2);
signed int __thiscall CGroup::OnLoad(int this);
void __thiscall CGroup::GetItemInfo(void *this, int a2, int a3, int a4);
signed int __cdecl CItemGroup::InsertGroup(int a1);
int __cdecl CItemGroup::ClearGroup();
int __cdecl CItemGroup::Copy();
int __thiscall CItemGroup::CItemGroup(int this);
// int __userpurge CItemGroup::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CItemGroup::_CItemGroup<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CItemGroup::Set(void *this, int a2, char a3);
signed int __thiscall CItemGroup::OnLoad(int this);
int __stdcall CItemGroup::FindGroup(char a1);
void __thiscall CItemGroup::GetItemInfo(void *this, int a2, int a3, int a4);
int __thiscall CItemGroup::GetFirstGroup(void *this);
// void __usercall CGoods::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, void *a6);
int __cdecl CGoods::ClearGoods();
int __cdecl CGoods::Copy();
int __thiscall CGoods::CGoods(int this);
// int __userpurge CGoods::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CGoods::_CGoods<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CGoods::Set(void *this, int a2, char a3);
signed int __thiscall CGoods::OnLoad(void *this);
int __thiscall sub_430B90(int this);
char *__thiscall sub_430BB0(int this, int a2);
void *__thiscall sub_430C20(int this, void *a2);
int __thiscall sub_430C40(int this);
char *__thiscall sub_430CA0(int this, int a2);
int __thiscall sub_430D10(int this);
char *__thiscall sub_430D70(int this, int a2);
int __cdecl sub_430DE0();
int __thiscall sub_430E00(void *this, int a2, int a3);
int __thiscall sub_430E30(void *this, int a2, int a3);
int __thiscall sub_430E60(int this);
int __thiscall sub_430EA0(int this, int a2, int a3, int a4);
int __thiscall sub_430F20(int this);
int __cdecl sub_430F90(int a1);
_DWORD __stdcall sub_430FA0(_DWORD); // weak
int __thiscall sub_431020(int this, int a2, int a3, int a4);
int __thiscall sub_4310A0(int this);
int __cdecl sub_431110(int a1);
_DWORD __stdcall sub_431120(_DWORD); // weak
int __thiscall sub_4311A0(int this);
int __thiscall sub_4311E0(int this, int a2, int a3, int a4);
char __thiscall sub_431260(int this, int a2);
int __thiscall sub_4312E0(int this);
void *__thiscall sub_431350(void *this);
// _DWORD __stdcall unknown_libname_8(_DWORD); weak
void *__thiscall sub_431390(void *this);
int __stdcall sub_4313B0(int a1, int a2);
int __thiscall sub_4313E0(int this, int a2, int a3, int a4);
int __stdcall sub_4316C0(int a1, int a2);
int __thiscall sub_4316F0(int this, int a2, int a3, int a4);
void *__stdcall sub_4319C0(int a1, int a2, int a3, int a4, char a5);
int __thiscall sub_431A40(int this, int a2, int a3, int a4);
int __thiscall sub_431D20(void *this, int a2, int a3);
int __thiscall sub_431D50(void *this, int a2);
signed int __cdecl sub_431D80();
int __thiscall sub_431DB0(void *this, int a2);
int __thiscall sub_431DD0(void *this, int a2);
void *__cdecl sub_431DF0(void *a1, int a2, int a3);
void *__stdcall sub_431E30(int a1, int a2, void *a3);
void *__stdcall sub_431E60(int a1, int a2, void *a3);
void *__cdecl sub_431E90(void *a1, int a2, int a3);
int __cdecl sub_431EF0(int a1, int a2, int a3);
int __cdecl sub_431F30(int a1, int a2, int a3);
int __cdecl sub_431F70(int a1, int a2);
void *__cdecl sub_431FA0(int a1, int a2, void *a3);
void *__cdecl sub_431FE0(void *a1, int a2);
void *__thiscall sub_432030(void *this);
void *__thiscall sub_432060(void *this, int a2, char a3);
void *__thiscall sub_4320A0(void *this);
int __thiscall sub_4320D0(int this);
int __thiscall sub_4320F0(int this);
int __thiscall sub_432110(int this);
void *__thiscall sub_4321C0(int this, void *a2, int a3, char a4);
int __thiscall sub_432260(int this);
int __thiscall sub_432280(int this);
int __thiscall sub_4322A0(int this);
void *__thiscall sub_432350(int this, void *a2, int a3, char a4);
void *__thiscall sub_4323F0(void *this, int a2);
__int32 __thiscall sub_432410(int this);
unsigned __int32 __thiscall sub_432430(int this);
int __thiscall sub_432450(void *this);
void *__thiscall sub_4324B0(void *this);
int __cdecl CLog::CInit::_CInit();
// void __usercall CLog::AddV(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, signed int a1, const char *a2, va_list a3);
// void *__usercall CSocket::Lock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CSocket::Unlock(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CLog::Flush(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
void sub_432860(char *arg0, ...);
void sub_432890(const char *a1, ...);
void sub_4328C0(const char *a1, ...);
signed int __fastcall CMainConfig::Open(int a1, int a2);
int __thiscall sub_432EC0(void *this);
int __cdecl CMainConfig::Close();
int __cdecl sub_432EF0(int a1);
int __thiscall sub_432F60(int this, int a2, int a3);
int __thiscall sub_433110(int this);
int __thiscall sub_433170(int this, int a2, int a3);
int __thiscall sub_433200(int this, int a2, int a3);
int __cdecl sub_433230(int a1);
void *__thiscall sub_433240(int this, void *a2, int a3);
_DWORD __stdcall sub_433270(_DWORD); // weak
void *__thiscall sub_4332F0(int this, void *a2, char a3, int a4, int a5);
int __cdecl sub_433730(int a1);
int __thiscall sub_433740(void *this, int a2);
void *__stdcall sub_433870(int a1, int a2, int a3, int a4, char a5);
void __stdcall sub_4338F0(int a1, int a2);
int __stdcall sub_433910(void *a1);
int __thiscall sub_433930(int *this);
int __thiscall sub_433950(int *this);
int __thiscall sub_433A30(int this, int a2, int a3, int a4, int a5, char a6);
int __thiscall sub_433A80(int this, int a2);
int __cdecl sub_433AB0(int a1);
int __cdecl sub_433AF0(void *a1);
void *__cdecl sub_433B00(int a1);
int __thiscall sub_433B20(void *this, char a2);
// int sub_433B50(void); weak
void *__thiscall sub_433B70(void *this, char *a2);
int __thiscall sub_433B90(void *this);
void *__thiscall sub_433BC0(void *this);
int __thiscall sub_433BF0(int this);
int __thiscall sub_433C10(int this);
int __thiscall sub_433C30(int this);
void *__thiscall sub_433CE0(int this, void *a2, int a3, char a4);
int __thiscall sub_433D80(void *this, int a2, int a3);
int __thiscall sub_434510(int *this, int a2, int a3);
int __thiscall sub_434540(int *this);
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd);
ATOM __cdecl sub_434710(HINSTANCE hInstance);
int __cdecl sub_434790(HINSTANCE hInstance, int nCmdShow); // idb
// int __usercall sub_434840<eax>(int a1<eax>, char a2<dil>);
// LRESULT __userpurge sub_4348E0<eax>(DWORD a1<ebx>, char a2<dil>, DWORD a3<esi>, HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
signed int __stdcall DialogFunc(HWND hDlg, int a2, unsigned __int16 a3, int a4);
// signed int __userpurge sub_434ED0<eax>(DWORD a1<ebx>, DWORD a2<esi>, HWND hDlg, int a4, unsigned int a5, int a6);
signed int __stdcall sub_435130(HWND hDlg, int a2, unsigned __int16 a3, int a4);
// int __userpurge sub_4351C0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __userpurge sub_435500<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __thiscall sub_4355E0(void *this, int a2);
int __thiscall sub_435600(void *this, int a2, unsigned int a3, int a4);
void *__thiscall CMemory::CInit::CInit(void *this);
int __thiscall CMemory::CMemory(int this);
signed int __thiscall CMemory::_heap_init(void *this);
signed int __thiscall CMemory::::sbh_heap_init(int this, int a2);
void *__cdecl CMemory::_malloc(size_t a1);
void *__thiscall CMemory::_heap_alloc_base(int this, int dwBytes);
int __thiscall CMemory::::sbh_alloc_block(int this, int a2);
int __thiscall CMemory::::sbh_alloc_new_region(int this);
signed int __stdcall CMemory::::sbh_alloc_new_group(int a1);
void __cdecl CMemory::_free(int a1);
void __thiscall CMemory::_free_base(int this, void *lpMem);
unsigned int __thiscall CMemory::::sbh_find_block(int this, int a2);
int __thiscall CMemory::::sbh_free_block(int this, unsigned int a2, int a3);
void *__cdecl CMemory::_realloc(int a1, size_t a2);
LPVOID __thiscall CMemory::_realloc_base(int this, int lpMem, int dwBytes);
signed int __stdcall CMemory::::sbh_resize_block(int a1, int a2, int a3);
void *__cdecl CNoMemoryObject::operator_new(size_t a1);
void __thiscall CMemory::_mlock(int this);
void __thiscall CMemory::_munlock(int this);
int __stdcall sub_4370E0(int a1, int a2, int a3, int (__thiscall *a4)(_DWORD));
int __thiscall CInitMonster::CInitMonster(int this);
// int __userpurge CInitMonster::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CInitMonster::_CInitMonster<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __cdecl CInitMonster::Copy();
signed int __thiscall CInitMonster::Set(void *this, int a2, char a3);
signed int __thiscall CInitMonster::OnLoad(void *this);
// void __userpurge CInitMonster::DropItemEx(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, char a6, int a7, int a8, int a9, int a10);
// char __userpurge CInitMonster::DropItem<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9);
bool __thiscall CSMap::IsValidTile(void *this, int a2, int a3);
bool __thiscall CCellMap::IsValidTile(int this, int a2, int a3, char a4);
int __thiscall CCellMap::GetTile(int this, int a2);
int __thiscall CSMap::_GetCellMap(void *this, int a2);
int __thiscall sub_4382D0(int this);
// int __userpurge CGenMonster::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CGenMonster::_CGenMonster<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CGenMonster::CGenMonster(int this, int a2, int a3, int a4, int a5);
int __cdecl CGenMonster::Copy();
signed int __thiscall CGenMonster::Set(void *this, int a2, char a3);
signed int __thiscall CGenMonster::OnLoad(void *this);
// void __userpurge CGenMonster::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CGenMonster::GetGenTile(int this, int a2, int a3);
// __int32 __usercall CGenMonster::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __thiscall CMonsterObject::CMonsterObject(int this);
void *__thiscall CLink::Initialize(void *this);
int __thiscall CMonsterObject::_scalar_deleting_destructor_(void *this, char a2);
// void __userpurge CMonsterObject::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
void *__thiscall CLink::MoveTo(void *this, int a2);
// void __userpurge CMonsterObject::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CLink::Insert(int this, int a2);
// int __usercall CMonsterObject::Stop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_438DB0(int this);
int __thiscall CMonster::GetGID(int this);
char *__cdecl CMonster::GetGuildName();
void __stdcall CMonster::Summon(int a1, int a2, int a3, int a4);
// int __userpurge CMonster::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CMonster::_CMonster<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CChar::GetDefense(void *this, int a2);
int __thiscall CChar::GetAbsorb(int this);
int __thiscall CChar::GetResist(void *this, int a2);
int __thiscall CMonster::CMonster(int this, int a2);
// void __usercall CMonster::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __usercall CMonster::Stop(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
LONG __cdecl CMonster::Size();
// int __usercall CMonster::NewMonster<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
int __thiscall CMonsterMaguni::CMonsterMaguni(int this, int a2);
int __thiscall CMonsterReal::GetAttackType(int this);
int __thiscall CMonsterReal::ResetNextMove(int this, int a2, int a3);
// int __usercall CMonsterReal::_CMonsterReal<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_4398F0(int this);
int __thiscall CMonsterMaguniWithSkillOnly::CMonsterMaguniWithSkillOnly(int this, int a2);
// int __userpurge CMonsterMaguniWithSkillOnly::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CMonsterMaguniWithSkillOnly::_CMonsterMaguniWithSkillOnly<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(int this, int a2);
int __thiscall CMonsterInactive::CMonsterInactive(int this, int a2);
int __thiscall sub_439A00(int this, int a2);
// int __userpurge CMonsterNotReal::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CMonsterNotReal::_CMonsterNotReal<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CMonsterMagic::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CMonsterInactive::_CMonsterInactive<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_439AD0(int this);
int __thiscall CMonsterNotReal::CMonsterNotReal(int this);
int __thiscall CMonsterGuildWar::GetGID(int this);
char *__thiscall CMonsterGuildWar::GetGuildName(void *this);
int __thiscall CMonsterItem::CMonsterItem(int this, int a2);
// int __userpurge CMonsterItem::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CMonsterItem::_CMonsterItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_439BD0(int this, int a2);
int __thiscall CMonsterBlackBug::CMonsterBlackBug(int this, int a2);
// int __userpurge CMonsterEgg::CMonsterEgg<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonsterCocoon::CMonsterCocoon(int this, int a2);
int __thiscall sub_439D20(int this, int a2);
// int __userpurge CMonsterFireFlower::CMonsterFireFlower<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_439DE0(int this);
char *__thiscall CMonsterSiegeGun::GetGuildName(void *this);
int __thiscall sub_439EA0(int this);
// int __userpurge CMonsterSiegeGun::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
int __thiscall CMonsterSiegeGunRuins::CMonsterSiegeGunRuins(int this);
int __thiscall CMonsterWithSkillOnly::CMonsterWithSkillOnly(int this, int a2);
int __thiscall CMonsterInvaderBoss::CMonsterInvaderBoss(int this, int a2);
// signed int __usercall CMonster::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
int __thiscall CChar::GetMaxHP(_DWORD); // weak
// int __usercall CMonster::FindMonster<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// int __usercall CMonster::GetMonsterList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// int __usercall CMonster::ScanMonster<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __usercall CMonster::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CMonster::SendDelete(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CMonster::SendCreate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CMonster::SetTarget<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonster::SetProperty(int this, int a2);
// signed int __usercall CMonster::AI<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// __int32 __userpurge CMonster::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// __int32 __usercall CMonster::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void *__thiscall CLink::Remove(void *this);
// int __usercall CMonster::GetOperatorName<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CMonster::CanAttack(int this, int a2, int a3);
int __thiscall sub_43A7D0(int this);
// int __userpurge CMonsterReal::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
int __thiscall CMonsterReal::CMonsterReal(int this, int a2);
// int __usercall CMonsterReal::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CMonsterReal::SendCreate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CMonsterReal::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
signed int __thiscall CChar::GetFinalDamage(void *this, int a2, int a3, int a4);
// void __userpurge CMonsterReal::Defense(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonsterReal::ReviseProperty(int this);
int __thiscall CChar::GetMaxMP(_DWORD); // weak
// int __userpurge CMonsterReal::SetTarget<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// LONG __usercall CMonsterReal::UpdateProperty<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7);
// int __usercall CMonsterReal::UpdatePrtyPt<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8);
int __thiscall CChar::GetStr(_DWORD); // weak
int __thiscall CChar::GetHth(_DWORD); // weak
int __thiscall CChar::GetInt(_DWORD); // weak
int __thiscall CChar::GetWis(_DWORD); // weak
int __thiscall CChar::GetDex(_DWORD); // weak
// int __usercall CMonsterReal::UpdatePrtyPer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8);
// LONG __userpurge CPlayer::AddMState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// LONG __userpurge CPlayer::SubMState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall CMonsterReal::SetProperty(int this, int a2);
int __thiscall CFindPath::Init(int this, int a2, int a3, int a4);
// LONG __userpurge CMonsterReal::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CMonsterReal::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterReal::AI(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterReal::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CMonsterReal::AddHostility<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, int a3, signed int a4);
// void __userpurge CMonsterReal::RemoveHostility(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonsterReal::GetMSpeed(int this, int a2);
// int __usercall CMonsterReal::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
__int64 __cdecl sub_43D870(int a1, int a2);
signed int __thiscall CChar::GetASpeed(int this);
int __thiscall CChar::GetAttack(_DWORD); // weak
int __thiscall CChar::GetMinAttack(_DWORD); // weak
int __thiscall CChar::GetMaxAttack(int this);
bool __thiscall CChar::CheckHit(void *this, int a2, int a3);
int __thiscall CChar::GetHit(int this);
int __thiscall CChar::GetDodge(int this);
// int __usercall CMonsterReal::Move<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// bool __userpurge CMonsterReal::GetRandomPt<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CSMap::IsMoveTile<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9);
// signed int __userpurge CCellMap::IsMoveTile<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// int __fastcall unknown_libname_9(_DWORD, _DWORD); weak
int __thiscall CCellMap::GetLock(int this, int a2);
// signed int __userpurge CMonsterReal::GetChasePt<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
bool __thiscall CFindPath::IsGoal(int this);
int __thiscall CFindPath::GetPixel(int this);
signed int __thiscall CFindPath::SetNextPath(int this);
// int __usercall CMonsterReal::ScanSight<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterReal::ManageBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __userpurge CMonsterReal::ApplyDamage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10, int a11);
int __thiscall CChar::GetFatalDamage(int this, int a2, int a3, int a4);
// int __userpurge CMonsterReal::AfterDamage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, signed int a7);
// int __userpurge CMonsterReal::AllotTransformExp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CMonsterReal::AllotExp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall sub_43F1A0(int this);
// void __usercall CMonsterReal::ResetHostility(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __userpurge CMonsterMaguni::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// DWORD __userpurge CMonsterMaguni::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// int __userpurge CMonsterMaguniWithSkillOnly::SetTarget<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CMonsterMaguniWithSkillOnly::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterMaguniWithSkillOnly::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterMaguniWithSkill::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterMaguniWithSkill::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CMonsterMaguniWithSkill::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_440070(int this);
int __thiscall CMonsterTowerBoss::IsIgnore(int this);
int __thiscall CMonsterTowerBoss::CMonsterTowerBoss(int this, int a2, int a3);
// signed int __usercall CMonsterTowerBoss::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall CMonsterTowerBoss::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CMonsterTowerBoss::Defense(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CMonsterMaguniMaster::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterTowerBoss::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CMonsterTowerBoss::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CMonsterTowerBoss::UpdateChild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonsterTowerBoss::Summon(int this, int a2, int a3, int a4, int a5);
int __thiscall CMonsterTowerBoss::Reaction(int this, signed int a2, int a3);
// int __usercall CMonsterTowerBoss::OnSummon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __stdcall CMonsterNotReal::AddBuff(int a1);
// signed int __userpurge CMonsterInactive::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall CMonsterInactive::SetProperty(int this, int a2);
// __int32 __userpurge CMonsterInactive::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonsterGuildWar::CMonsterGuildWar(int this, int a2, int a3, int a4, int a5, const char *a6);
// int __usercall CMonsterGuildWar::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, signed int a5, int a6, int a7, int a8, const char *a9, int a10);
bool __thiscall CInitMonster::IsRace(int this, int a2);
// signed int __userpurge CMonsterGuildWar::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
int __thiscall CMonsterGuildWar::SetProperty(int this, int a2);
// void __usercall CMonsterGuildWar::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CMonsterGuildWar::SetGuild(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6);
// LONG __userpurge CPlayer::SubGState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CMonsterItem::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// void __usercall CMonsterItem::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// __int32 __userpurge CMonsterItem::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CMonsterItem::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CMonsterMagic::CMonsterMagic(int this, int a2, int a3, int a4, int a5, int a6);
// int __usercall CMonsterMagic::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, signed int a5, int a6, int a7, int a8, int a9, int a10);
// void __usercall CMonsterMagic::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CMonsterMagic::SetProperty(int this, int a2);
// __int32 __userpurge CMonsterMagic::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CMonsterBlackBug::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// LONG __userpurge CMonsterReal::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// signed int __userpurge CMonsterBlackBug::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// int __userpurge CMonsterBlackBug::UpdateChild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonsterBlackBug::Summon(int this, int a2, int a3, int a4, int a5);
// void __usercall CMonsterSiegeGunRuins::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterEgg::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CMonsterEgg::Summon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// int __usercall CMonsterEgg::OnSummon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterCocoon::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterMaguniMaster::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
int __thiscall CMonsterMaguniMaster::CMonsterMaguniMaster(int this);
// void __usercall CMonsterMaguniMaster::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CMonsterBigBirdMother::CMonsterBigBirdMother(int this);
// void __usercall CMonsterBigBirdMother::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __usercall CMonsterBigBirdMother::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CMonsterBigBirdMother::Summon(int this, int a2, int a3, int a4, int a5);
// int __usercall CMonsterBigBirdMother::OnSummon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CMonsterBigBirdMother::Move<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __userpurge CMonsterBigBirdMother::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// int __usercall CMonsterBigBirdMother::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterFireFlower::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterBigBirdMaster::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __thiscall CMonsterBigBirdMaster::CMonsterBigBirdMaster(int this);
// int __usercall CMonsterFireFlower::_CMonsterFireFlower<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterBigBirdMaster::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// LONG __userpurge CMonsterMaguniMaster::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
int __thiscall CMonsterSiegeGun::CMonsterSiegeGun(int this, int a2, int a3, int a4, const char *a5, int a6);
// int __usercall CMonsterSiegeGun::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, signed int a5, int a6, int a7, int a8, const char *a9, int a10);
// void __usercall CMonsterSiegeGun::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterSiegeGun::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// LONG __userpurge CMonsterSiegeGun::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// void __userpurge CMonsterSiegeGun::SetFire(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CMonsterSiegeGun::Summon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, int a7, int a8);
// void __userpurge CMonsterSiegeGun::SetOperator(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CMonsterSiegeGun::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// int __userpurge CMonsterSiegeGunBall::CMonsterSiegeGunBall<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// int __usercall CMonsterSiegeGunBall::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, signed int a5, int a6, int a7);
// void __usercall CMonsterSiegeGunBall::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterSiegeGunBall::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterSiegeGunRuins::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterWithSkillOnly::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void __thiscall CMonsterWithSkillOnly::Attack(int this);
// void __usercall CMonsterInvaderBoss::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CMonsterInvaderBoss::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_445B20(int this);
void *__thiscall sub_445B40(int this, void *a2);
bool __thiscall sub_445B60(int this);
char *__thiscall sub_445B80(int this, int a2);
int __thiscall sub_445BF0(int this);
char *__thiscall sub_445C10(int this, int a2);
void *__thiscall sub_445C80(void *this);
int __thiscall sub_445CB0(int this);
int __thiscall sub_445CD0(int this, int a2);
int __thiscall sub_445D30(int this);
int __thiscall sub_445D90(int this);
int __thiscall sub_445DF0(int this, int a2, int a3);
int __thiscall sub_445FA0(int this, int a2);
int __thiscall sub_446000(int this);
int __thiscall sub_446060(void *this, int a2, int a3);
int __thiscall sub_446090(int *this, int a2, int a3);
void *__thiscall sub_4460C0(void *this);
int __thiscall sub_4460F0(int this);
bool __cdecl sub_446110();
int __thiscall sub_446130(int this, int a2, int a3);
int __thiscall sub_4461C0(int this);
int __thiscall sub_446200(int this, int a2, int a3, int a4);
char *__stdcall sub_446280(void *a1, int a2, int a3);
int __thiscall sub_4462B0(int this, int a2, int a3, int a4);
// int __cdecl unknown_libname_10();
void *__thiscall sub_446350(int this, void *a2, int a3, char a4);
int __thiscall sub_4463F0(int this, int a2, int a3);
_DWORD __stdcall sub_446430(_DWORD); // weak
int __thiscall sub_4464B0(int this);
_DWORD __stdcall sub_446560(_DWORD); // weak
void *__thiscall sub_4465E0(int this, void *a2, int a3, char a4);
_DWORD __stdcall sub_446680(_DWORD); // weak
void *__thiscall sub_446700(void *this, int a2);
void *__thiscall sub_446720(int this, void *a2, int a3);
int __thiscall sub_446750(int this);
signed int __cdecl sub_446800();
int __thiscall sub_446820(int this, int a2, int a3, int a4);
int __cdecl sub_446B00();
void *__stdcall sub_446B40(int a1);
signed int __cdecl sub_446B60();
int __thiscall sub_446B80(int this, int a2, int a3, int a4);
void *__stdcall sub_446E50(int a1);
void *__thiscall sub_446E70(int this, void *a2, int a3);
int __thiscall sub_446EA0(int this, int a2);
int __thiscall sub_446F30(int this);
int __cdecl sub_446F90(int a1);
int __thiscall sub_446FA0(void *this, int a2, int a3);
// _DWORD __stdcall sub_446FD0(_DWORD); weak
int __cdecl sub_446FF0(int a1);
int __cdecl sub_447000(int a1);
void *__thiscall sub_447010(int this, void *a2, int a3, char a4);
int __thiscall sub_4470B0(void *this, int a2);
int __cdecl sub_4470E0(int a1);
int __thiscall sub_447120(int this, int a2);
int __cdecl sub_4471B0();
_DWORD __stdcall sub_4472D0(_DWORD); // weak
void *__thiscall sub_447350(void *this, int a2);
int __thiscall sub_447370(int this);
void *__thiscall sub_4473D0(void *this, int a2);
_DWORD __stdcall sub_4473F0(_DWORD); // weak
int __cdecl sub_447470(int a1, int a2);
void *__stdcall sub_4474B0(int a1, int a2, void *a3);
int __cdecl sub_4474E0(int a1, int a2, int a3);
int __cdecl sub_447520(int a1, int a2, int a3);
// _DWORD __stdcall std___Init_locks__operator_(_DWORD); weak
// _DWORD __cdecl unknown_libname_11(_DWORD); weak
void *__cdecl sub_447570(void *a1, int a2, int a3);
void *__stdcall sub_4475D0(void *a1, int a2);
void *__cdecl sub_4475F0(int a1, int a2, void *a3);
void *__cdecl sub_447660(int a1, int a2, void *a3);
void *__cdecl sub_4476D0(void *a1, int a2);
void *__cdecl sub_447720(void *a1, int a2);
void *__thiscall sub_447760(void *this);
void *__thiscall sub_447790(void *this);
void *__thiscall sub_4477C0(void *this);
int __thiscall sub_4477F0(int this);
int __thiscall sub_447810(int this);
int __thiscall sub_447830(int this);
void *__thiscall sub_4478E0(int this, void *a2, int a3, char a4);
int __thiscall sub_447980(int this);
int __thiscall sub_4479A0(int this);
int __thiscall sub_4479C0(int this);
int __thiscall sub_447A70(int this);
int __thiscall sub_447A90(int this);
int __thiscall sub_447AB0(int this);
void *__thiscall sub_447B60(int this, void *a2, int a3, char a4);
int __thiscall CInitNPC::CInitNPC(int this);
// int __userpurge CInitNPC::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CInitNPC::_CInitNPC<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
char __cdecl CInitNPC::Close();
int __cdecl CInitNPC::Copy();
signed int __thiscall CInitNPC::Set(void *this, int a2, char a3);
signed int __thiscall CInitNPC::OnLoad(void *this);
int __thiscall CGenNPC::CGenNPC(int this);
// int __userpurge CGenNPC::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CGenNPC::_CGenNPC<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
char __cdecl CGenNPC::Close();
int __cdecl CGenNPC::Copy();
signed int __thiscall CGenNPC::Set(void *this, int a2, char a3);
signed int __thiscall CGenNPC::OnLoad(void *this);
int __thiscall CNPCObject::CNPCObject(int this);
int __thiscall CNPCObject::_CNPCObject(void *this);
// void __userpurge CNPCObject::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CNPCObject::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CNPC::CNPC(int this, int a2);
bool __thiscall sub_448820(void *this, int a2);
int __cdecl sub_448870(int a1, int a2);
void __stdcall CGunnery::ExcutePassive(int a1, int a2, int a3);
// int __userpurge CNPC::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CNPC::_CNPC<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CNPC::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __thiscall CNPCTeleport::CNPCTeleport(int this, int a2);
// int __usercall CNPCScenario::_CNPCScenario<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CNPCMerchant::CNPCMerchant(int this, int a2);
// int __userpurge CNPCInformant::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
int __thiscall CNPCQuest::CNPCQuest(int this, int a2);
bool __thiscall CNPCQuest::CanReply(void *this, int a2);
int __thiscall CNPCScenario::CNPCScenario(int this, int a2);
int __thiscall CNPCDoor::CNPCDoor(int this, int a2);
int __thiscall CNPCSiegeGunStone::CNPCSiegeGunStone(int this, int a2);
LONG __cdecl CNPC::Size();
// void __usercall CNPC::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall CNPC::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall CNPC::FindNPC<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// int __usercall CNPC::CanReply<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5);
// int __usercall sub_4490A0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5);
// int __usercall CNPC::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CNPC::SendDelete(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CNPC::SendCreate(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// LONG __userpurge CMonsterReal::AddGState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CNPC::Reply(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CNPC::WarRelationShow<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// __int32 __usercall CNPC::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// LONG __usercall CNPC::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __usercall CMonster::IsRemoved<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void __thiscall CNPC::SetProperty(int this, int a2, int a3);
// void __userpurge CNPC::Show(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CNPC::GetNPCList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6);
// int __userpurge CNPCQuest::Reply<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CNPCScenario::MirrorGState(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __usercall CNPCScenario::ThroneGState(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __usercall CNPCScenario::ResetBossTower(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// void __usercall CNPCScenario::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CNPCScenario::InitScenario(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CNPCScenario::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// void __userpurge CNPCTeleport::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// void __usercall CNPCDoor::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CNPCDoor::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// void __userpurge CNPCSiegeGunStone::Reply(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CNPCSiegeGunStone::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CPlayer::SubEState(int this, int a2);
int __thiscall CPlayer::IsEState(int this, int a2);
// void __userpurge CNPCSiegeGunStone::SiegeGunSet(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall CPlayerSkill::IsSkill(void *this, int a2);
// void __userpurge CNPCSiegeGunStone::SiegeGunUnSet(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CNPCSiegeGunStone::Show(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CNPCSiegeGunStone::SendCreate(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CNPCSiegeGunStone::SetOperator(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CNPCSiegeGunStone::SetSiegeGun(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_44ADC0(int this, int a2);
int __thiscall sub_44AE20(int this, int a2, int a3);
void *__thiscall sub_44AEB0(int this, void *a2, int a3, char a4);
int __thiscall sub_44AF50(void *this, int a2, int a3);
int __thiscall sub_44B6E0(int this);
int *__thiscall sub_44B740(int *this);
int *__thiscall sub_44B760(int *this);
_DWORD __stdcall sub_44B780(_DWORD); // weak
signed int __cdecl sub_44B800();
int __thiscall sub_44B820(int this, int a2, int a3, int a4);
signed int __cdecl sub_44B850();
void *__thiscall sub_44B880(void *this);
void *__thiscall sub_44B8B0(void *this);
void *__thiscall sub_44B8E0(void *this);
// int __thiscall _LocaleUpdate__GetLocaleT(_DWORD); weak
int __thiscall sub_44B920(int this);
int __thiscall sub_44B940(int this);
int __thiscall sub_44B960(int this);
void *__thiscall sub_44BA10(int this, void *a2, int a3, char a4);
int __thiscall sub_44BAB0(int this);
_DWORD __stdcall sub_44BB10(_DWORD); // weak
int __thiscall sub_44BB90(int this);
int __thiscall sub_44BBB0(int this);
int __thiscall sub_44BBD0(int this);
void *__thiscall sub_44BC80(int this, void *a2, int a3, char a4);
int __thiscall sub_44BD20(int this);
_DWORD __stdcall sub_44BD80(_DWORD); // weak
int __thiscall sub_44BE00(int this);
int __thiscall sub_44BE20(int this);
int __thiscall sub_44BE40(int this);
signed int __cdecl sub_44BEF0();
signed int __thiscall CObjectDB::Open(int this, const char *a2);
int __cdecl CObjectDB::FindSymbol(char a1);
signed int __fastcall CObjectDB::Load(void *a1, int a2, int a3);
int __stdcall sub_44C860(int a1, int a2);
// __int32 __usercall CObjectDB::Close<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
LONG __cdecl CObjectDB::CanReload();
int __thiscall sub_44C970(int this, int a2, int *a3);
void *__thiscall sub_44CA00(int this, void *a2, int *a3);
int __thiscall sub_44CA30(int this, int *a2);
int __thiscall sub_44CAC0(void *this, int a2);
int __thiscall sub_44CBF0(void *this, int a2);
void *__stdcall sub_44CD20(int a1);
void *__thiscall sub_44CD40(void *this);
int __stdcall sub_44CD70(int a1);
void *__thiscall sub_44CD90(void *this);
void *__cdecl sub_44CDC0(void *a1, void **a2);
int __thiscall CQuest::CQuest(int this);
// int __userpurge CQuest::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
void *__thiscall sub_44CE80(void *this, char a2);
void *__cdecl sub_44CEC0(int a1);
int __thiscall sub_44CEE0(int this);
int __thiscall sub_44CF00(int this);
int __thiscall sub_44CF20(int this);
void *__thiscall sub_44CFD0(int this, void *a2, int a3, char a4);
int __thiscall sub_44D070(int this);
_DWORD __stdcall sub_44D0D0(_DWORD); // weak
int __thiscall sub_44D150(int this);
int __thiscall sub_44D170(int this);
int __thiscall sub_44D190(int this);
void *__thiscall sub_44D240(int this, void *a2, int a3, char a4);
int __thiscall sub_44D2E0(int this);
_DWORD __stdcall sub_44D340(_DWORD); // weak
// int __userpurge CParty::CParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CParty::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CParty::_CParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CParty::FindParty<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// void __usercall CParty::Accept(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __usercall sub_44D620(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void *__usercall CParty::OnFree<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CParty::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CParty::Add(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CParty::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __userpurge CParty::IsHead<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
signed int __thiscall CParty::IsMember(void *this, int a2);
int __thiscall CParty::FindTopLevel(void *this);
// void __userpurge CParty::Join(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CParty::Leave(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CParty::Delete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CParty::Exile(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CParty::AllotExp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// LONG __userpurge CParty::SendPartyInfo<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
// void __userpurge CParty::UpdateMemberHP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CParty::UpdateMemberLevel(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CParty::Broadcast(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6);
// LONG __userpurge CParty::_Broadcast<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6);
// int __usercall CParty::GetRandomPlayer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __userpurge CParty::Teleport<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CParty::StoreItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CParty::DistributeItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CParty::AllotTransformExp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CParty::Healing(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9);
// int __userpurge CParty::Chant<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __usercall CParty::GetPlayerList<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CParty::_GetPlayerList<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CParty::GetLuckySize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_44F580(_DWORD); // weak
int __thiscall sub_44F5A0(int this, int a2, void *a3);
int __thiscall sub_44F600(int this, int a2);
int __thiscall sub_44F660(int this);
char __thiscall sub_44F6A0(int this, int a2);
int __stdcall sub_44F720(int a1, int a2);
int __thiscall sub_44F750(int this);
void *__thiscall sub_44F7C0(void *this, char a2);
int __thiscall sub_44F7E0(void *this, int a2, int a3);
void *__thiscall sub_44F810(int this, void *a2, int a3, char a4);
int __thiscall sub_44F8B0(int *this);
int __thiscall sub_44F8D0(int this);
_DWORD __stdcall sub_44F930(_DWORD); // weak
_DWORD __cdecl sub_44F9B0(_DWORD, _DWORD); // weak
char *__cdecl sub_44F9D0(const void *a1, int a2, void *a3);
int __cdecl sub_44FA10(int a1, int a2);
int __cdecl sub_44FA50(int a1, int a2, int a3);
int __cdecl sub_44FA90(int a1, int a2, int a3);
void *__cdecl sub_44FAC0(const void *a1, int a2, int a3);
void *__cdecl sub_44FB00(int a1);
char *__cdecl sub_44FB20(const void *a1, int a2, void *a3);
int __cdecl sub_44FB60(int a1, int a2, int a3);
void *__thiscall sub_44FB90(void *this);
void *__thiscall sub_44FBC0(void *this, int a2, char a3);
int __thiscall sub_44FBF0(int this);
int __thiscall sub_44FC10(int this);
int __thiscall sub_44FC30(int this);
// void *__usercall sub_44FCE0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5);
int __cdecl sub_44FD40(int a1, int a2);
// void __userpurge CPlayerObject::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CPlayer::CPlayer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge CPlayer::SendPacket(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
// void __userpurge CPlayer::SendMove(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, void *a2, void *a3);
int __thiscall CPlayer::InitGambleInfo(int this);
// int __userpurge CPlayer::_scalar_deleting_destructor_<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CPlayer::_CPlayer<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_450650(int this);
int __thiscall sub_450670(int this);
int __thiscall sub_450690(int this);
int __thiscall sub_4506B0(int this);
int __thiscall sub_4506D0(int this);
int __thiscall sub_4506F0(int this);
int __thiscall sub_450710(int this);
// void __usercall CPlayer::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall CPlayer::ScanPlayer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// int __usercall sub_450810<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __usercall CPlayer::FindPlayer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4);
// LONG __usercall CPlayer::WriteAll<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5);
// LONG __usercall CPlayer::WriteInMap<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6);
// void __usercall CPlayer::LogPlayerStatistic(DWORD a1<ebx>, DWORD a2<esi>);
// int __usercall CPlayer::OnFree<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CPlayer::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CPlayer::IsPBit(int this, char a2);
// void __userpurge CPlayer::SendDelete(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, void *a6);
// void __userpurge CPlayer::SendCreate(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, void *a6);
// int __usercall CPlayer::AI<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __userpurge CPlayer::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
// void __userpurge CPlayer::InfoDie(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall CPlayer::ReviseProperty(int this);
// void __userpurge CPlayer::AddMStateEx(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::AddBState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge CPlayer::SubMStateEx(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::SubBState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall CPlayer::GetFinalDefense(void *this, int a2);
int __thiscall CPlayer::GetFinalAbsorb(void *this, int a2);
int __thiscall CPlayer::GetFinalResist(void *this, int a2, int a3);
int __thiscall CPlayer::GetMSpeed(int this, int a2);
bool __thiscall CPlayer::GetAttackType(int this);
bool __thiscall CPlayer::CheckBlock(int this, int a2);
// void __userpurge CPlayer::UpdateTransformExp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __usercall CPlayer::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// LONG __usercall CPlayer::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CPlayer::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CPlayer::GetAutoRefreshHP(int this);
int __thiscall CPlayer::GetAutoRefreshMP(int this);
// void __usercall CPlayer::WarPortalAll(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CPlayer::Send(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a2);
// void __usercall CPlayer::Write(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6);
// void __userpurge CPlayer::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall CPlayer::GetInvenSize(void *this);
// void __userpurge CPlayer::ExchangeBoddariToItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CPlayer::ExchahgeItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9);
int __thiscall CPlayer::GetNeedPoint(int this, int a2);
// signed int __userpurge CPlayer::OnLoadPlayer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_457E30(int this);
int __thiscall sub_457E60(int this);
// signed int __usercall CPlayer::_Create<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CChar::GetMinMagic(_DWORD); // weak
int __thiscall CChar::GetMaxMagic(int this);
// void __usercall CPlayer::GameStart(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall CPlayer::GameRestart<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CSocket::Id(_DWORD); // weak
// void __userpurge CPlayer::SaveAllProperty(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CPlayer::UpdateProperty(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, signed __int64 a7);
// void __usercall CPlayer::UpdatePrtyPt(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a1, int a2, int a3, int a4, int a5);
// void __usercall CPlayer::UpdatePrtyPer(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8);
// int __userpurge CPlayer::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __usercall CPlayer::LevelUp(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::Teleport(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6, int a7, int a8);
int __thiscall CSMap::IsOnTile(void *this, int a2, int a3);
int __thiscall CCellMap::IsOnTile(int this, int a2, int a3);
// void __userpurge CPlayer::OnTeleport(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CPlayer::_IntoInven<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::_OutofInven(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CPlayer::FindItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall CPlayer::_FindItem(void *this, int a2, int a3);
int __thiscall CPlayer::_FindMergeItem(void *this, int a2);
// void __userpurge CPlayer::BuyItemEx(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, int a7, char *a8, unsigned int a9);
// void __userpurge CPlayer::SellItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, char *a7, unsigned int a8);
// void __userpurge CPlayer::DropItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6);
// void __userpurge CPlayer::TrashItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// signed int __userpurge CPlayer::RemoveItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge CPlayer::PutOnItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// void __userpurge CPlayer::PutOffItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// void __userpurge CPlayer::UseItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// signed int __userpurge CPlayer::InsertItem<eax>(int a1<ecx>, int a2<edx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a5<esi>, int a3, int a4);
// signed int __userpurge CPlayer::_InsertItem<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CPlayer::EnchantItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CPlayer::UpgradeItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6);
// void __userpurge CPlayer::AskTrade(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CPlayer::OnAskTrade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __usercall CPlayer::CancelTrade(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CPlayer::_EndTrade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::ShowOffItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall CTrade::IsEnd(int this);
int __thiscall CTrade::GetOther(int this, int a2);
// void __usercall CPlayer::TradeAgreed(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall CPlayer::_CheckTrade(int this);
// char __userpurge CPlayer::_TradeItem<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5);
// void __userpurge CPlayer::_StorageIn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall CPlayer::_StorageOut(void *this, char a2, int a3);
signed int __thiscall CPlayer::_FindStorageItem(void *this, int a2, int a3, int a4, int a5);
// void __usercall CPlayer::StorageInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::PutInStorage(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, char *a7, unsigned int a8);
// void __userpurge CPlayer::PutOutStorage(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, char *a7, unsigned int a8);
// void __userpurge CPlayer::SetStallInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_45F300(int this, int a2);
// void __userpurge CPlayer::GetStallInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge CPlayer::SwitchStall<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CChar::IsGStateExcept(int this, int a2);
// void __userpurge CPlayer::BuyItemAtStall(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, signed int a4<esi>, unsigned int a5, int a6, int a7, char *a8, unsigned int a9);
signed int __thiscall sub_45F9A0(int this);
int __thiscall sub_45F9D0(int this, int a2);
// void *__usercall sub_45FA10<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, unsigned int a4, unsigned int a5);
// void __usercall sub_45FA60(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CPlayer::AskParty(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::OnAskParty(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __usercall CPlayer::LeaveParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CPlayer::ExileParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CPlayer::GetPartySize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CPlayer::UpdatePartyMember<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::SaveQuestFlag(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6);
// bool __userpurge CPlayer::CheckQuestFlag<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5);
// int __userpurge CPlayer::CheckQuestClear<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// void __userpurge CPlayer::QuestGuide(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::AskPvP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void *__usercall sub_460490<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CPlayer::OnAskPvP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __usercall CPlayer::OnPvP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CPlayer::EndPvP<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// void __userpurge CPlayer::ProcessMsg(int a1<ecx>, DWORD a2<ebx>, char a3<dil>, DWORD a4<esi>, char *a5);
// void __userpurge CPlayer::ChatCommand(int this<ecx>, DWORD ebx0<ebx>, char a3<dil>, DWORD a4<esi>, const char *a2);
// int __userpurge CPlayer::Rest<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CPlayer::CutdownExp(int this, signed int a2);
// void __usercall CPlayer::Revival(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::RevivalSkill(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CPlayer::RevivalItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5);
// void __userpurge CPlayer::SaveRevivalPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CPlayer::ProcessEvent(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// void __userpurge CPlayer::OnProcessEvent(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, int a2, void *a3);
// void __usercall CPlayer::InitStat(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CPlayer::EventInsert(int this, int a2);
void *__thiscall CPlayer::EventRemoveAll(void *this);
bool __thiscall CPlayer::EventIsMoraTime(int this);
// unsigned int __userpurge CPlayer::EventSetMora<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CPlayer::EventSaveDB(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>);
// void __userpurge CPlayer::MLMProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_466AB0(int this, int a2, int a3, const void *a4, int a5, int a6, int a7, int a8);
// void *__usercall sub_466B20<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, unsigned int a4, unsigned int a5);
// void __usercall sub_466B70(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// void __userpurge CPlayer::MLMLoad(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CPlayer::_MLMInsert(void *this, int a2);
// void __userpurge CPlayer::MLMDelete(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
void __thiscall CPlayer::_MLMDelete(void *this, int a2, int a3);
// void __usercall CPlayer::MLMDeleteAll(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::MLMUpdate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall CPlayer::_MLMFind(int this, int a2, int a3);
// int __userpurge CPlayer::_MLMGet<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int *a5, int a6);
// int __usercall CPlayer::MLMPupilNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::MLMPayMoney(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::MLMAccumFee(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall CPlayer::MLMLevelUp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::FRDProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_468200(int this);
int __thiscall sub_468240(int this, int a2, const void *a3, int a4);
// signed int __userpurge CPlayer::MailSend<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int *a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14);
// void __userpurge CPlayer::MailSendResult(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, signed int a7, char a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15);
// void __userpurge CPlayer::MAILProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_469C80(int this);
// signed int __userpurge CPlayer::IsCooking<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge CPlayer::Cooking<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CPlayer::GetGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::SetGuild(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CPlayer::GetGID<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::SetGID(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::SetGuildLevel(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::SetGuildName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, const char *a5);
// void __userpurge CPlayer::SetGuildStandard(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge CPlayer::SetGuildClass(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6);
int __thiscall CPlayer::GetGuildName(int this);
int __thiscall CPlayer::GetGuildStandard(int this);
int __thiscall CPlayer::GetGuildClassTitle(int this);
// signed int __userpurge CPlayer::IsDefenseSide<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// signed int __userpurge CPlayer::CanAttack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CPlayer::PKKill(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
void *__thiscall sub_46B2C0(void *this);
signed int __thiscall CPlayer::GetDropItemMask(int this);
// int __userpurge CPlayer::AddBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CPlayer::PKBulletinInfoSend<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// __int32 __usercall CPlayer::PKBulletinLoad<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// void __usercall CPlayer::ScanONPKPlayer(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __usercall CPlayer::EventBuff(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1);
// void __usercall CPlayer::DropItemONPKDie(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CPlayer::Transform(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, signed int a6);
// void __usercall CPlayer::FreeTransform(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CPlayer::BreakStandard(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CPlayer::RefreshStandardBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
bool __thiscall CPlayer::IsWearBuffStandard(int this);
// void __userpurge CPlayer::Bless(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, signed int a6);
// LONG __userpurge CPlayer::SetSystemCode<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, signed int a4, int a5);
// LONG __userpurge CPlayer::SetEventCode<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, signed int a4, int a5);
int __thiscall CPlayer::IsPCBang(int this);
// void __userpurge CPlayer::Shortcut(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char *a5, unsigned int a6);
// void __userpurge CPlayer::OnGetMyTelPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall sub_46C290(int this);
int __thiscall sub_46C2D0(int this);
// void __userpurge CPlayer::SetMyTelPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
void *__thiscall sub_46C920(void *this, int a2, int a3, int a4);
// void __userpurge CPlayer::OnSetMyTelPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6);
int __thiscall CPlayer::GetPalsyDamage(int this, int a2);
// signed int __usercall CPlayer::CanMove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge CPlayer::NPCProcess<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, int a7, int a8);
// void __userpurge CPlayer::ChangePlayerName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, const char *a5);
// void __userpurge CPlayer::OnChangePlayerName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6);
// void __userpurge CPlayer::ChangeGuildName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, const char *a5);
// void __userpurge CPlayer::OnChangeGuildName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6);
// void __userpurge CPlayer::EventProcessNPC(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, signed int a6, int a7);
int __stdcall CPlayer::SubState(int a1, int a2);
int __stdcall CPlayer::IsState(int a1, int a2);
// signed int __userpurge CPlayer::InsertOwnItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CPlayer::ExchangeDanjiToItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CPlayer::SiegeGunProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// int __userpurge CPlayer::SiegeGunControl<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, int a7);
// void __userpurge CPlayer::SiegeGunUnset(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge CPlayer::ReturnToPoint<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __usercall CPlayer::CountWarrelationPlayer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __userpurge CPlayer::EnforceItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, char a10);
int __thiscall sub_46EF70(int this);
signed int __stdcall sub_46EF90(int a1, int a2, int a3);
bool __stdcall sub_46F2C0(int a1);
// void __userpurge sub_46F320(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_46F350(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9);
int __thiscall sub_4703E0(int this, int a2);
int __thiscall sub_470440(int this, int a2, int a3);
int __thiscall sub_470600(int this, const char **a2);
int __thiscall sub_470660(int this, int a2, const char **a3);
void *__thiscall sub_4706F0(void *this);
int __thiscall sub_470720(int this);
int __thiscall sub_470740(int this, int a2);
int __thiscall sub_4707A0(void *this);
char *__thiscall sub_4707D0(int this, int a2);
void *__thiscall sub_470840(void *this);
int __thiscall sub_470870(int this);
int __thiscall sub_470890(int this, int a2, int a3);
int __thiscall sub_470A40(int this, int a2);
void *__thiscall sub_470AA0(void *this);
int __thiscall sub_470AD0(int this);
int __thiscall sub_470AF0(int this, int a2, int a3);
int __thiscall sub_470CA0(void *this, int a2, int a3);
int __thiscall sub_471430(int this, int a2);
int __thiscall sub_471490(int this);
int __thiscall sub_4714F0(int this, int a2, int a3);
void *__thiscall sub_471580(void *this);
int __thiscall sub_4715B0(int this);
int __thiscall sub_4715D0(int this, int a2, int a3);
int __thiscall sub_471780(int this, int a2);
int __thiscall sub_4717E0(_DWORD); // weak
int __thiscall sub_471840(int this, int a2, int a3);
void *__thiscall sub_4718D0(void *this);
int __thiscall sub_471900(int this);
int __thiscall sub_471920(int this, int a2);
void *__thiscall sub_471980(void *this);
int __thiscall sub_4719B0(int this);
int __thiscall sub_4719D0(int this, int a2, int a3);
int __thiscall sub_471B80(int this, int a2);
int __thiscall sub_471BE0(int this);
int __thiscall sub_471C40(int this, int a2, int a3);
void *__thiscall sub_471CD0(void *this);
int __thiscall sub_471D00(int this);
int __thiscall sub_471D20(int this, int a2, int a3);
char __stdcall sub_471ED0(void *a1, void *a2);
int __thiscall sub_471F00(void *this, int a2, int a3);
int __thiscall sub_472690(int this, void *a2);
int __thiscall sub_4726F0(int this, int a2, void *a3);
char __thiscall sub_472780(int this);
int __thiscall sub_4727A0(int this, const void *a2);
int __thiscall sub_4727D0(int this);
int __thiscall sub_472800(void *this, int a2, char a3, const void *a4);
int __thiscall sub_472830(int this, int a2, const void *a3);
int __thiscall sub_472860(int this, int a2, int a3);
int __thiscall sub_472890(int *this, int a2, int a3);
int __thiscall sub_4728C0(int this, int a2, const void *a3);
int __thiscall sub_4728F0(int this, int a2, const void *a3);
int __thiscall sub_472920(int this, int a2, const void *a3);
void *__thiscall sub_472950(void *this, int a2, int a3);
int __thiscall sub_472990(int this);
void *__thiscall sub_4729B0(int this, void *a2, int a3, char a4);
void *__thiscall sub_472A50(int this, void *a2, int a3);
void *__thiscall sub_472A80(int this, void *a2, int a3, char a4);
void *__thiscall sub_472B20(int this, void *a2, const char **a3);
int __thiscall sub_472B50(int this, int a2, const char **a3);
void *__thiscall sub_472B90(int this, void *a2, int a3, char a4);
int __thiscall sub_472C30(int this, int a2, int a3);
int __thiscall sub_472C70(int this);
int __thiscall sub_472D20(int this);
int __thiscall sub_472D60(int this);
int __thiscall sub_472DA0(int this, int a2, int a3, int a4);
char __thiscall sub_472E20(int this, int a2);
char *__stdcall sub_472EA0(void *a1, int a2, int a3);
void *__thiscall sub_472ED0(void *this, int a2, int a3);
void *__thiscall sub_472F10(int this, void *a2, int a3, char a4);
int __thiscall sub_472FB0(int this, int a2, int a3);
void *__thiscall sub_472FF0(int this, void *a2, char a3, int a4, const void *a5);
int __thiscall sub_473430(int this);
int __cdecl sub_4734E0(int a1);
int __cdecl sub_4734F0(int a1);
int __cdecl sub_473500(int a1);
void *__thiscall sub_473520(void *this, int a2, int a3);
void *__thiscall sub_473560(int this, void *a2, int a3, char a4);
void *__thiscall sub_473600(int this, void *a2, int a3);
int __thiscall sub_473630(int this, int a2, int a3);
_DWORD __stdcall sub_473670(_DWORD); // weak
void *__thiscall sub_4736F0(int this, void *a2, char a3, int a4, const void *a5);
int __thiscall sub_473B30(void *this, int a2);
int __cdecl sub_473C60(int a1);
int __cdecl sub_473CA0(int a1);
int __thiscall sub_473CE0(void *this, int a2);
int __thiscall sub_473E10(int this);
int __cdecl sub_473EC0(int a1);
void *__thiscall sub_473ED0(void *this, int a2, int a3);
void *__thiscall sub_473F10(int this, void *a2, int a3, char a4);
void *__thiscall sub_473FB0(int this, void *a2, int a3);
int __thiscall sub_473FE0(int this, int a2, int a3);
_DWORD __stdcall sub_474020(_DWORD); // weak
void *__thiscall sub_4740A0(int this, void *a2, char a3, int a4, int a5);
int __thiscall sub_4744E0(int this);
int __cdecl sub_474590(int a1);
void *__thiscall sub_4745A0(int this, void *a2, int a3, char a4);
int __thiscall sub_474640(int this);
int __cdecl sub_4746F0(int a1);
void *__thiscall sub_474700(void *this, int a2, int a3);
void *__thiscall sub_474740(int this, void *a2, int a3, char a4);
void *__thiscall sub_4747E0(int this, void *a2, int a3);
int __thiscall sub_474810(int this, int a2, int a3);
_DWORD __stdcall sub_474850(_DWORD); // weak
void *__thiscall sub_4748D0(int this, void *a2, char a3, int a4, const void *a5);
int __thiscall sub_474D10(int this);
int __cdecl sub_474DC0(int a1);
int __cdecl sub_474DD0(int a1);
void *__thiscall sub_474DE0(void *this, int a2, int a3);
void *__thiscall sub_474E20(int this, void *a2, int a3, char a4);
void *__thiscall sub_474EC0(int this, void *a2, void *a3);
int __thiscall sub_474EF0(int this, int a2, void *a3);
void *__thiscall sub_474F30(int this, void *a2, char a3, int a4, int a5);
int __thiscall sub_475370(void *this, int a2);
int __cdecl sub_4754A0(int a1);
int __cdecl sub_4754E0(int a1);
int __thiscall sub_475520(void *this, int a2);
int __thiscall sub_475650(int this);
int __stdcall sub_475700(void *a1);
int __thiscall sub_475720(void *this, char a2, const void *a3);
int __thiscall sub_4757A0(void *this, int a2, int a3);
// int __thiscall std___Container_base___Container_base(_DWORD); weak
int *__thiscall sub_475880(int *this);
int *__thiscall sub_4758A0(int *this);
int *__thiscall sub_4758C0(int *this);
int *__thiscall sub_4758E0(int *this);
int *__thiscall sub_475900(int *this);
int *__thiscall sub_475920(int *this);
int *__thiscall sub_475940(int *this);
int __thiscall sub_475960(int *this);
int *__thiscall sub_475980(int *this);
int *__thiscall sub_4759A0(int *this);
int __thiscall sub_4759C0(int this);
int __thiscall sub_475A20(int this);
void *__thiscall sub_475A80(int this, void *a2, const char **a3);
int __thiscall sub_475AB0(int this, const char **a2);
int __thiscall sub_475B40(int this);
int __thiscall sub_475BA0(int this, int a2, int a3, int a4);
int __thiscall sub_475E70(void *this, int a2, int a3);
int __thiscall sub_476600(int this);
int __thiscall sub_476660(int this, int a2);
int __thiscall sub_4766F0(void *this, int a2);
void *__stdcall sub_476820(int a1, int a2, int a3, const void *a4, char a5);
signed int __cdecl sub_4768A0();
void *__thiscall sub_4768C0(int this, void *a2, int a3);
int __thiscall sub_4768F0(int this);
int __thiscall sub_476960(int this, int a2);
void *__stdcall sub_4769F0(int a1, int a2, int a3, const void *a4, char a5);
int __cdecl sub_476A70(int a1);
signed int __cdecl sub_476A80();
int __thiscall sub_476AA0(void *this, int a2, int a3);
void *__thiscall sub_477230(int this, void *a2, int a3);
int __thiscall sub_477260(int this);
int __thiscall sub_4772D0(int this, int a2);
int __thiscall sub_477360(void *this, int a2);
int __thiscall sub_477490(void *this, int a2);
void *__stdcall sub_4775C0(int a1, int a2, int a3, int a4, char a5);
signed int __cdecl sub_477640();
int __thiscall sub_477660(int this);
void *__thiscall sub_4776C0(int this, void *a2, int a3);
int __thiscall sub_4776F0(int this);
int __cdecl sub_477760(int a1);
signed int __cdecl sub_477770();
int __thiscall sub_477790(void *this, int a2, int a3);
void *__thiscall sub_477F20(int this, void *a2, int a3);
int __thiscall sub_477F50(int this);
int __thiscall sub_477FC0(int this, int a2);
int __thiscall sub_478050(void *this, int a2);
int __thiscall sub_478180(void *this, int a2);
void *__stdcall sub_4782B0(int a1, int a2, int a3, const void *a4, char a5);
signed int __cdecl sub_478330();
int __thiscall sub_478350(int this);
void *__thiscall sub_4783B0(int this, void *a2, void *a3);
int __thiscall sub_4783E0(int this);
int __thiscall sub_478450(int this, void *a2);
void *__stdcall sub_4784E0(int a1, int a2, int a3, int a4, char a5);
void *__stdcall sub_478560(int a1, int a2, const void *a3);
int __thiscall sub_4785D0(int this, unsigned int a2);
void *__stdcall sub_478640(int a1);
int *__thiscall sub_478660(int *this);
int __thiscall sub_478680(int *this, int a2, int a3);
int *__thiscall sub_4786B0(int *this);
int *__thiscall sub_4786D0(int *this);
int *__thiscall sub_4786F0(int *this);
int __thiscall sub_478710(void *this, int a2, int a3);
int *__thiscall sub_478740(int *this);
int __thiscall sub_478760(int *this, int a2, int a3);
int *__thiscall sub_478790(int *this);
int *__thiscall sub_4787B0(int *this);
int __thiscall sub_4787E0(int *this, int a2, int a3);
int *__thiscall sub_478810(int *this);
int *__thiscall sub_478830(int *this);
int __thiscall sub_478850(int this);
int __thiscall sub_4788F0(int this, int a2, int a3);
_DWORD __stdcall sub_478920(_DWORD); // weak
int __thiscall sub_4789A0(int this, int a2);
_DWORD __stdcall sub_478A30(_DWORD); // weak
int __thiscall sub_478AB0(int this);
int __thiscall sub_478AD0(int this, const char **a2);
_DWORD __stdcall sub_478B60(_DWORD); // weak
signed int __cdecl sub_478BE0();
_DWORD __stdcall sub_478C10(_DWORD); // weak
int __thiscall sub_478C90(int this, int a2);
int __cdecl sub_478D20();
signed int __cdecl sub_478E40();
void *__stdcall sub_478E70(int a1);
int __cdecl sub_478E90(int a1);
int __cdecl sub_478ED0(int a1);
int __thiscall sub_478F10(int this, int a2);
int __cdecl sub_478FA0();
signed int __cdecl sub_4790C0();
void *__stdcall sub_4790F0(int a1);
_DWORD __stdcall sub_479110(_DWORD); // weak
int __cdecl sub_479190(int a1);
int __thiscall sub_4791D0(int this, int a2);
int __cdecl sub_479260();
signed int __cdecl sub_479380();
void *__stdcall sub_4793B0(int a1);
int __cdecl sub_4793D0(int a1);
int __cdecl sub_479410(int a1);
int __thiscall sub_479450(int this, int a2);
int __cdecl sub_4794E0();
signed int __cdecl sub_479600();
void *__stdcall sub_479630(int a1);
_DWORD __stdcall sub_479650(_DWORD); // weak
int __thiscall sub_4796D0(int this, void *a2);
int __cdecl sub_479760();
signed int __cdecl sub_479880();
signed int __cdecl sub_4798B0();
int *__thiscall sub_4798D0(int *this);
int __thiscall sub_4798F0(int *this);
int __thiscall sub_4799D0(int *this);
int __thiscall sub_479AB0(int *this);
int *__thiscall sub_479B70(int *this);
int __thiscall sub_479B90(int *this);
int __thiscall sub_479C70(int *this);
int __thiscall sub_479D50(int *this);
int __thiscall sub_479E10(int this, int a2, int a3, int a4, const void *a5, char a6);
int __thiscall sub_479E60(int this, int a2, int a3, int a4, const void *a5, char a6);
int __thiscall sub_479EB0(int this, int a2, int a3, int a4, int a5, char a6);
int __thiscall sub_479F10(int this, int a2, int a3, int a4, const void *a5, char a6);
int __thiscall sub_479F60(int this, int a2, int a3, int a4, int a5, char a6);
int __thiscall sub_479FB0(int this, int a2, int a3, const void *a4);
void *__thiscall sub_479FF0(void *this, int a2);
signed int __cdecl sub_47A030();
int *__thiscall sub_47A060(int *this);
int *__thiscall sub_47A080(int *this);
int __thiscall sub_47A0A0(int *this);
int __thiscall sub_47A160(int *this);
int __cdecl sub_47A220(int a1, int a2);
_DWORD __cdecl sub_47A240(_DWORD, _DWORD); // weak
_DWORD __cdecl sub_47A260(_DWORD, char); // weak
int __cdecl sub_47A280(char a1, char a2, int a3);
int __cdecl sub_47A2B0(char a1, char a2, int a3);
int __cdecl sub_47A2E0(char a1, char a2, int a3);
int __cdecl sub_47A310(char a1, char a2, int a3);
int __cdecl sub_47A340(char a1, char a2, int a3);
int __cdecl sub_47A370(char a1, char a2, int a3);
int __cdecl sub_47A3A0(void *a1);
int __cdecl sub_47A3B0(int a1, int a2);
int __cdecl sub_47A3F0(int a1, int a2, int a3);
void *__cdecl sub_47A430(int a1);
void *__cdecl sub_47A450(int a1);
void *__cdecl sub_47A470(int a1);
void *__cdecl sub_47A490(int a1);
void *__cdecl sub_47A4B0(int a1);
int __thiscall sub_47A4D0(void *this, char a2);
// int sub_47A500(void); weak
int __cdecl sub_47A520(char a1, char a2, int a3);
int __cdecl sub_47A560(char a1, char a2, int a3);
int __cdecl sub_47A5A0(char a1, char a2, int a3);
int __cdecl sub_47A5E0(char a1, char a2, int a3);
int __cdecl sub_47A620(char a1, char a2, int a3);
int __cdecl sub_47A660(int a1, int a2);
void *__cdecl sub_47A690(int a1, int a2, void *a3);
void *__stdcall sub_47A6D0(void *a1, int a2);
void *__thiscall sub_47A6F0(void *this);
void *__thiscall sub_47A720(void *this, int a2, int a3);
void *__thiscall sub_47A760(void *this);
int __thiscall sub_47A790(void *this);
int __cdecl sub_47A7D0();
void *__thiscall sub_47A870(void *this, char a2);
int __thiscall sub_47A8B0(int this);
int __thiscall sub_47A8D0(int this);
int __thiscall sub_47A8F0(int this);
int __thiscall sub_47A910(int this);
int __thiscall sub_47A9C0(int this);
int __thiscall sub_47A9E0(int this);
int __thiscall sub_47AA00(int this);
bool __thiscall sub_47AAB0(int this, int a2);
char __thiscall sub_47AAE0(int this, int a2);
bool __thiscall sub_47AB00(int this, int a2);
char __thiscall sub_47AB60(int this, int a2);
// signed int __userpurge sub_47AB90<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// bool __userpurge sub_47AC50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// bool __userpurge sub_47AC80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge sub_47ACA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// bool __userpurge sub_47ACC0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_47ACF0(int this, int a2);
// void __userpurge sub_47AD50(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
void __thiscall sub_47AD80(int this, int a2);
// void __userpurge sub_47ADA0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_47AE20(int this, int a2);
// char __userpurge sub_47AE50<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge sub_47AF80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_47B000(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_47B050(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_47B0A0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_47B0C0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge sub_47B0E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_47B1B0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
void __stdcall sub_47B1D0(int a1);
// void __userpurge sub_47B1F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_47B230(int this);
signed int __thiscall sub_47B330(void *this, char a2);
int __thiscall sub_47B8A0(int this);
void *__thiscall sub_47B8E0(void *this, int a2);
// _DWORD __stdcall std__locale__facet__facet(_DWORD); weak
int __thiscall sub_47B940(void *this, char a2);
// int __cdecl std__locale__facet___facet(_DWORD); weak
int __thiscall sub_47B990(void *this);
void *__thiscall sub_47B9B0(void *this, int a2);
void *__thiscall sub_47B9E0(void *this, int a2);
void *__thiscall sub_47BA10(void *this, int a2);
void *__thiscall sub_47BA40(void *this, int a2);
int __thiscall sub_47BA70(void *this, char a2);
int __thiscall sub_47BAA0(void *this);
void *__thiscall sub_47BAC0(void *this, int a2);
void *__thiscall sub_47BAF0(void *this, int a2);
void *__thiscall sub_47BB20(void *this, int a2);
void *__thiscall sub_47BB50(void *this, int a2);
void *__thiscall sub_47BB80(void *this, int a2);
int __thiscall sub_47BBB0(void *this, char a2);
// signed int __userpurge sub_47BBE0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, char a4);
void *__thiscall sub_47C470(void *this, int a2);
int __thiscall sub_47C4A0(void *this, char a2);
// int __cdecl std__locale__facet___facet(_DWORD); weak
int __thiscall sub_47C4F0(void *this);
void *__thiscall sub_47C510(void *this, int a2);
// _DWORD __stdcall std__locale__facet__facet(_DWORD); weak
void *__thiscall sub_47C570(void *this, int a2);
void *__thiscall sub_47C5A0(void *this, int a2);
int __thiscall sub_47C5D0(void *this, char a2);
void *__thiscall sub_47C600(void *this, int a2);
int __thiscall sub_47C630(void *this, char a2);
int __thiscall sub_47C660(void *this);
void *__thiscall sub_47C680(void *this, int a2);
void *__thiscall sub_47C6B0(void *this, int a2);
void *__thiscall sub_47C6E0(void *this, int a2);
void *__thiscall sub_47C710(void *this, int a2);
void *__thiscall sub_47C740(void *this, int a2);
void *__thiscall sub_47C770(void *this, int a2);
void *__thiscall sub_47C7A0(void *this, int a2);
void *__thiscall sub_47C7D0(void *this, int a2);
void *__thiscall sub_47C800(void *this, int a2);
int __thiscall sub_47C830(int this, int a2);
signed int __thiscall sub_47C880(int this, int a2);
char __thiscall sub_47C910(void *this, int a2);
// int __usercall sub_47C980<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall CActionItem::_CActionItem(int this, char a2);
// __int32 __usercall sub_47CA50<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall sub_47CAC0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __usercall sub_47CB40<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// signed int __userpurge sub_47CB80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5);
void *__thiscall CQuest::_CQuest(void *this);
// signed int __userpurge sub_47CD70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5);
signed int __thiscall sub_47CE60(int this);
void __thiscall sub_47CEC0(void *this, int a2);
int __thiscall sub_47CF60(void *this);
char *__thiscall sub_47CF90(int this, int a2);
int __thiscall sub_47D000(int this, int a2);
int __thiscall sub_47D030(void *this);
_DWORD __stdcall sub_47D070(_DWORD); // weak
int __thiscall sub_47D0A0(int *this, int a2, int a3);
int __thiscall sub_47D0D0(int this);
int __thiscall sub_47D110(int this, int a2, int a3, int a4);
char __thiscall sub_47D190(int this, int a2);
char *__stdcall sub_47D210(void *a1, int a2, int a3);
int __thiscall sub_47D240(void *this, char a2, int a3);
int __cdecl sub_47D2C0();
int __thiscall sub_47D360(int this);
signed int __cdecl sub_47D3D0();
int __thiscall sub_47D3F0(int this, int a2, int a3, int a4);
void *__stdcall sub_47D6D0(int a1);
void *__stdcall sub_47D6F0(int a1, int a2, int a3);
int __thiscall sub_47D760(int this, unsigned int a2);
int __thiscall sub_47D7D0(void *this, int a2);
void *__thiscall sub_47D800(void *this, int a2);
void *__cdecl sub_47D820(void *a1, int a2, int a3);
int __cdecl sub_47D860(int a1, int a2);
int __cdecl sub_47D8A0(int a1, int a2, int a3);
int __cdecl sub_47D8E0(int a1, int a2, int a3);
void *__cdecl sub_47D920(int a1);
void *__cdecl sub_47D940(void *a1, int a2, int a3);
int __cdecl sub_47D9A0(int a1, int a2);
void *__cdecl sub_47D9D0(int a1, int a2, void *a3);
void *__stdcall sub_47DA10(void *a1, int a2);
void *__cdecl sub_47DA30(int a1, int a2, void *a3);
void *__thiscall sub_47DAA0(void *this);
int __thiscall sub_47DAD0(int this);
int __thiscall sub_47DAF0(int this);
int __thiscall sub_47DB10(int this);
void *__thiscall sub_47DBC0(int this, void *a2, int a3, char a4);
int __thiscall sub_47DC60(int this);
_DWORD __stdcall sub_47DCC0(_DWORD); // weak
int __thiscall sub_47DD40(int this);
// BOOL __usercall sub_47DDA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
LONG __thiscall sub_47DDE0(void *this);
__int32 __thiscall sub_47DE70(volatile LONG *this);
LONG __thiscall sub_47E030(int this);
LONG __thiscall sub_47E060(int this);
// int __usercall sub_47E080<eax>(volatile LONG *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_47E0D0(volatile LONG *this);
// __int32 __usercall sub_47E1C0<eax>(volatile LONG *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_47E220(int this);
// void __usercall sub_47E270(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void *__thiscall sub_47E2A0(int this, int a2, int a3);
int sub_47E320(int a1, int a2, const char *a3, ...);
char *__thiscall sub_47E3D0(int this, int a2, const char *a3);
int __thiscall sub_47E480(int this);
// BOOL __usercall sub_47E4A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// signed int __usercall sub_47E5F0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// __int32 __usercall sub_47E620<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// __int32 __usercall sub_47E6B0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __cdecl sub_47E700();
int __cdecl sub_47E710();
// int __usercall sub_47E720<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall sub_47E780<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall sub_47E800<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// void __usercall sub_47E880(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __userpurge sub_47E940<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
int __thiscall sub_47E990(int this, int a2);
void *__thiscall sub_47E9F0(int this, void *a2, int a3, char a4);
signed int __cdecl sub_47EA90();
int __thiscall sub_47EAB0(int this);
void *__thiscall sub_47EB10(int this, void *a2, int a3);
int __thiscall CServer::SendAlive(int this);
_DWORD __stdcall sub_47EB60(_DWORD); // weak
void *__thiscall sub_47EBE0(void *this);
int __thiscall sub_47EC10(int this);
int __thiscall sub_47EC80(int this);
int __thiscall sub_47ECA0(void *this, char a2);
int __thiscall sub_47ECD0(void *this);
int __thiscall sub_47ECF0(int this);
int __thiscall sub_47ED10(int this);
int __thiscall sub_47ED30(int this);
int __thiscall sub_47EDE0(int this);
// int __userpurge sub_47EEA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall sub_47EED0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
signed int __thiscall sub_47EEF0(void *this, int a2, char a3);
signed int __thiscall sub_47F1E0(int this);
int __thiscall sub_47F450(int this);
LONG __thiscall sub_47F4D0(void *this);
int __cdecl sub_47F560();
char __cdecl sub_47F5D0();
int __thiscall sub_47F680(int this, int a2);
void __thiscall sub_47F6B0(int this, int a2, int a3);
void *__thiscall sub_47F760(void *this);
int __thiscall sub_47F780(int this, int a2, int a3);
// void __userpurge sub_47F7A0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
signed int __thiscall sub_47F910(void *this, int a2, int a3);
// void __userpurge sub_47F970(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5);
// void __userpurge sub_47FA60(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall sub_47FBB0(void *this, signed int a2, int a3, int a4);
int __thiscall sub_47FC00(void *this);
int __cdecl sub_47FC50(int a1, int a2, char a3);
void __thiscall sub_47FC90(int *this, signed int a2, int a3, int a4);
signed int __thiscall sub_47FD70(void *this, signed int a2);
// void __userpurge sub_47FF00(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall sub_4800E0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge sub_480240(int *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5);
void __thiscall sub_4802D0(void *this);
void __thiscall sub_480340(void *this, int a2);
int __thiscall sub_480390(void *this, signed int a2, int a3);
// void __usercall sub_4803E0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall sub_480540(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_480830(int this);
int __thiscall sub_480870(void *this);
int __thiscall sub_4808E0(int this);
void __cdecl CPlayerSkill::UpperChanceStone();
int __cdecl sub_480910();
signed int __thiscall sub_480970(int this, int a2);
signed int __thiscall sub_480A00(int this);
int __thiscall sub_480A80(void *this, int a2);
// signed int __userpurge sub_480B70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge sub_480C50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMonsterSkill::Close(int this);
// int __userpurge sub_480CF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_480D40(int this);
signed int __thiscall sub_480E10(int this, int a2);
bool __thiscall CMonsterSkill::LoadSkill(int this, int a2, int a3);
bool __thiscall sub_480E80(void *this, int a2, int a3);
int __thiscall sub_480F20(void *this, int a2);
bool __stdcall sub_480F80(int a1, int a2);
bool __thiscall sub_481000(int this, int a2);
int __thiscall sub_481040(void *this, int a2);
// signed int __userpurge sub_481070<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge sub_481150<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge sub_481210<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
bool __stdcall sub_481330(int a1, int a2);
// int __userpurge sub_4813A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_4814F0(int this, int a2, signed int a3, int a4);
int __thiscall sub_481630(int this, int a2, signed int a3, int a4);
int __thiscall CBehead::CanExcute(int this, int a2, int a3, int a4);
// int __userpurge sub_481750<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __stdcall sub_481970(int a1);
bool __thiscall sub_4819A0(void *this, int a2, int a3);
// int __userpurge CUpBow::ExcutePassive<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, unsigned int a4<esi>, int a5, char *a6, unsigned int a7);
char __thiscall sub_481E80(int this, int a2);
int __thiscall sub_481F10(int this, int a2);
// signed int __userpurge sub_481F30<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_481F60(int this, int a2, int a3);
// signed int __userpurge sub_481FD0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_482000(void *this, void *a2, int a3, int a4, int a5, int a6, int a7);
// signed int __userpurge sub_4820C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_4820F0(int this, int a2);
// signed int __userpurge sub_482130<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_482160(void *this, void *a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_482260(void *this, void *a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_482340(int this, int a2, int a3);
char __thiscall sub_482370(int this, int a2);
bool __thiscall sub_4823E0(void *this, int a2, int a3);
int __thiscall sub_482430(int this, int a2, int a3);
int __thiscall sub_482490(void *this, int a2);
char __thiscall sub_4824E0(int this, int a2);
bool __thiscall sub_482570(void *this, int a2, int a3);
int __thiscall sub_482610(void *this, void *a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_482710(int this, int a2, int a3);
char __thiscall sub_482770(int this, int a2);
bool __thiscall sub_4827E0(void *this, int a2, int a3);
// char *__userpurge sub_482830<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// signed int __userpurge sub_482960<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge sub_482990<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_4829B0(int this, int a2, int a3);
int __thiscall sub_482A00(void *this, void *a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_482B20(int this, int a2, int a3);
int __thiscall sub_482B70(int this, int a2, int a3);
int __thiscall sub_482D30(int this);
char __thiscall sub_482D60(int this, int a2);
int __thiscall sub_482DF0(int this, int a2, int a3);
int __thiscall sub_482E20(void *this, void *a2, int a3, int a4, int a5, int a6, int a7);
char __thiscall sub_482F40(int this, int a2);
// int __userpurge sub_482FA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, unsigned int a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_483230(int this);
int __thiscall sub_483260(void *this, int a2);
int __thiscall sub_4832A0(void *this, int a2);
int __thiscall sub_483310(void *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall CMagic::Excute(void *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_4833D0(void *this, int a2, int a3);
int __thiscall sub_483460(int this, int a2, int a3);
char __thiscall sub_4834E0(int this, int a2);
int __thiscall sub_483520(int this, int a2, int a3);
// signed int __userpurge sub_4835A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_4835E0(int this, int a2, int a3);
char __thiscall sub_483670(int this, int a2);
// signed int __userpurge sub_4836B0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_4836E0(int this, int a2, int a3);
int __thiscall sub_483770(int this, int a2, int a3);
// signed int __userpurge sub_4837F0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_483830(int this, int a2, int a3);
char __thiscall sub_4838C0(int this, int a2);
int __thiscall sub_483930(int this, int a2, int a3);
// signed int __userpurge sub_483A00<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
int __thiscall sub_483B50(int this, int a2, int a3);
int __thiscall sub_483C70(int this, int a2, int a3);
// signed int __userpurge sub_483DB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_483DF0(void *this, int a2, int a3);
bool __thiscall CShock::GetMagic(int this, int a2);
// signed int __userpurge sub_483F50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_483F80(void *this, int a2, int a3);
char __thiscall sub_4840C0(int this, int a2);
// int __userpurge sub_484100<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, unsigned int a4<esi>, int a5, char *a6, unsigned int a7);
// void __userpurge sub_4844A0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// LONG __userpurge sub_484710<eax>(LONG a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// LONG __userpurge sub_4849E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// LONG __userpurge sub_484BE0<eax>(LONG a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_484EE0(int this, int a2, int a3);
// signed int __userpurge sub_484F60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall CMagicWidePos::Excute(int this, int a2, int a3);
// signed int __userpurge sub_485030<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_485060(int this, int a2, int a3);
// signed int __userpurge sub_4850D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_485100(void *this, int a2, int a3, int a4, int a5, int a6);
char __thiscall sub_485170(int this, int a2);
int __thiscall sub_485200(void *this, int a2);
int __thiscall sub_485230(void *this, int a2, int a3, int a4, int a5, int a6);
char __thiscall CMagicWideIce::GetMagic(int this, int a2);
int __thiscall sub_485310(void *this, int a2, int a3);
// signed int __userpurge sub_485400<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_485430(int this, int a2, int a3);
// signed int __userpurge sub_4854A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// LONG __userpurge sub_4854D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_4855D0(void *this, int a2, int a3);
// LONG __userpurge sub_485610<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge CChainLitning::GetMagic<eax>(void *a1<ecx>, DWORD a2<ebx>, int a3, char a4, int a5);
// int __userpurge CChainLitning::Redistribute<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5, int a6);
// int __userpurge sub_485840<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5, int a6);
// int __userpurge sub_4858C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6, int a7);
char __thiscall sub_485930(int this, int a2);
// LONG __userpurge sub_485970<eax>(int a1<ecx>, DWORD a2<ebx>, int a3, int a4, int a5);
// signed int __userpurge sub_485AB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
bool __thiscall sub_485AE0(void *this, int a2, int a3);
// int __userpurge sub_485B80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_485CE0(int this, int a2, int a3);
// signed int __userpurge sub_485D80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_485DC0(int this, int a2, int a3);
// signed int __userpurge sub_485E60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
signed int __thiscall sub_485E90(int this, int a2, int a3);
char __thiscall sub_485EF0(int this, int a2);
int __stdcall sub_485F50(int a1, int a2);
// signed int __userpurge sub_485F70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_485FA0(int this, int a2, int a3);
char __thiscall sub_485FD0(int this, int a2);
int __stdcall sub_486030(int a1, int a2);
int __thiscall sub_486050(int this, int a2, int a3, int a4);
bool __thiscall sub_4860B0(int this, int a2);
int __thiscall sub_4860F0(int this, int a2, signed int a3, int a4);
bool __thiscall sub_4861F0(int this, int a2);
// signed int __userpurge sub_4862A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __stdcall sub_4862F0(int a1, int a2, int a3);
int __stdcall sub_486350(int a1, int a2, int a3);
bool __thiscall sub_4863B0(void *this, int a2, int a3);
// LONG __userpurge sub_486420<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall sub_486500(int this, int a2, int a3, int a4);
int __thiscall sub_486560(int this, int a2, int a3, int a4);
int __thiscall sub_4865C0(int this, int a2, int a3, int a4);
// LONG __userpurge sub_486620<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
char __thiscall sub_4866D0(int this, int a2);
bool __thiscall sub_486760(int this, int a2);
bool __thiscall sub_486860(void *this, int a2, int a3);
// __int32 __userpurge sub_486910<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __stdcall sub_486A50(int a1, int a2);
// signed int __userpurge sub_486AA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_486AE0(void *this, int a2, int a3);
int __thiscall sub_486B60(void *this, int a2, int a3);
int __thiscall sub_486BF0(int this, int a2, int a3, int a4);
// signed int __userpurge sub_486C60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_486C90(int this, int a2, int a3, int a4);
char __thiscall sub_486CF0(int this, int a2);
// LONG __userpurge sub_486D50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
bool __thiscall sub_486E20(void *this, int a2, int a3);
// __int32 __userpurge sub_486EC0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// __int32 __userpurge sub_487000<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// signed int __userpurge sub_487190<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// LONG __userpurge sub_4871C0<eax>(LONG a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall sub_487390(int this, int a2);
// signed int __userpurge sub_487430<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// signed int __userpurge sub_487460<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __stdcall sub_487490(int a1);
char __thiscall sub_4874D0(int this, int a2);
// LONG __userpurge sub_487510<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// __int32 __userpurge sub_4875B0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// LONG __userpurge sub_487860<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
bool __thiscall sub_487900(void *this, int a2, int a3);
// int __userpurge sub_4879D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
char __thiscall sub_487AE0(int this, int a2);
bool __thiscall sub_487B40(void *this, int a2, int a3);
// int __userpurge sub_487BF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
bool __thiscall sub_487CF0(void *this, int a2, int a3);
// __int32 __userpurge sub_487DB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// __int32 __userpurge sub_487EF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
int __thiscall sub_488010(int this, int a2, int a3, int a4);
int __thiscall sub_4880D0(int this, int a2, int a3);
char __thiscall sub_488160(int this, int a2);
// LONG __userpurge sub_4881A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
char __thiscall sub_488260(int this, int a2);
char __thiscall sub_4882D0(int this, int a2);
// char *__userpurge sub_488330<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, void *a3, int a4);
char __thiscall sub_488540(int this, int a2);
// __int32 __userpurge sub_4885A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
char __thiscall sub_4887B0(int this, int a2);
// __int32 __userpurge sub_488820<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
char __thiscall CSuffering::Excute(int this, int a2);
// __int32 __userpurge sub_4889F0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
char __thiscall sub_488B30(int this, int a2);
// __int32 __userpurge sub_488B70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// char *__userpurge sub_488CF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
char __thiscall sub_488E50(int this, int a2);
// __int32 __userpurge sub_488E90<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
char __thiscall sub_489030(int this, int a2);
// __int32 __userpurge sub_489090<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// __int32 __userpurge sub_4891E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
bool __thiscall sub_489320(void *this, int a2, int a3);
int __thiscall sub_4893C0(int this, int a2);
// __int32 __userpurge CDarknessVision::CanSkillUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
bool __thiscall sub_489550(void *this, int a2, int a3);
int __stdcall sub_4895C0(int a1);
// LONG __userpurge sub_4895E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// LONG __userpurge sub_4896C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
bool __thiscall sub_4897F0(void *this, int a2, int a3);
// __int32 __userpurge sub_489890<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
bool __thiscall sub_489A10(void *this, int a2, int a3);
// signed int __userpurge sub_489AA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// __int32 __userpurge sub_489B30<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// LONG __userpurge sub_489CE0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall sub_489D90(int this, int a2, int a3, int a4);
int __thiscall CSkillBuff::CanExcute(int this, int a2, int a3, int a4);
bool __thiscall sub_489E10(void *this, int a2, int a3);
int __thiscall CSkillBuff::PreExcute(int this, int a2, int a3, int a4);
char __thiscall sub_489EA0(int this, int a2);
int __thiscall sub_489EE0(int this, int a2, int a3, int a4);
char __thiscall sub_489F20(int this, int a2);
int __thiscall sub_489F60(int this, int a2, int a3, int a4);
bool __thiscall sub_489FA0(void *this, int a2, int a3);
int __thiscall sub_489FF0(void *this, int a2, int a3, int a4);
bool __thiscall sub_48A050(void *this, int a2, int a3);
int __thiscall sub_48A070(void *this, int a2, int a3, int a4);
bool __thiscall sub_48A0D0(void *this, int a2, int a3);
int __thiscall sub_48A120(void *this, int a2, int a3, int a4);
char __thiscall sub_48A1A0(int this, int a2);
int __thiscall sub_48A1E0(void *this, int a2, int a3, int a4);
int __thiscall sub_48A240(void *this, int a2, int a3, int a4);
int __thiscall CStrenUpInt::Apply(void *this, int a2, int a3, int a4);
int __thiscall sub_48A300(void *this, int a2, int a3, int a4);
int __thiscall CCloudSight::CanExcute(void *this, int a2, int a3, int a4);
char __thiscall sub_48A3C0(int this, int a2);
int __thiscall sub_48A400(void *this, int a2, int a3, int a4);
int __thiscall sub_48A480(void *this, int a2, int a3, int a4);
int __thiscall sub_48A4D0(void *this, int a2, int a3, int a4);
// void __userpurge sub_48A520(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
bool __thiscall CMeshDefense::CanSkillUp(void *this, int a2, int a3);
// LONG __userpurge sub_48A5D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall sub_48A680(int this, int a2);
char __thiscall sub_48A6D0(int this, int a2);
int __thiscall sub_48A770(int this, int a2);
int __thiscall sub_48A7B0(int this, int a2);
int __thiscall sub_48A7F0(int this, int a2);
int __thiscall sub_48A830(int this, int a2);
int __thiscall sub_48A870(int this, int a2);
// void __userpurge sub_48A8B0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// LONG __userpurge sub_48A9A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
void *__thiscall sub_48AAF0(int this, int a2);
char __thiscall sub_48AB30(int this, int a2);
void *__thiscall sub_48AB90(int this, int a2);
char __thiscall sub_48ABC0(int this, int a2);
void *__thiscall sub_48AC20(int this, int a2);
char __thiscall sub_48AC50(int this, int a2);
void *__thiscall sub_48ACB0(int this, int a2);
void *__thiscall sub_48ACE0(int this, int a2);
void *__thiscall sub_48AD10(int this, int a2);
char __thiscall sub_48AD40(int this, int a2);
void *__thiscall sub_48ADA0(int this, int a2);
int __stdcall sub_48ADD0(int a1, signed int a2);
bool __thiscall sub_48AE00(void *this, int a2, int a3);
int __stdcall sub_48AE50(int a1, signed int a2);
int __thiscall sub_48AE70(void *this, int a2, int a3, int a4, int a5, int a6);
// LONG __userpurge sub_48AED0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __stdcall sub_48AF60(int a1, int a2);
int __thiscall sub_48AF90(int this, int a2);
int __stdcall sub_48AFC0(int a1, int a2);
int __thiscall CChantDefLightning::CreateBuff(void *this, void *a2, int a3, int a4, int a5, int a6, int a7);
// LONG __userpurge sub_48B0E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __stdcall sub_48B170(int a1, int a2);
bool __thiscall sub_48B1A0(void *this, int a2, int a3);
// __int32 __userpurge sub_48B230<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7);
// LONG __userpurge sub_48B440<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __stdcall sub_48B4D0(int a1);
int __stdcall sub_48B510(int a1);
int __stdcall sub_48B550(int a1);
int __thiscall sub_48B590(int this, int a2, int a3);
int __thiscall sub_48B5C0(int this, int a2);
// void *__userpurge sub_48B630<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// LONG __userpurge CTDiamondClow::Excute<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge sub_48B9C0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void *__userpurge sub_48BB50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall sub_48BC80(int this, int a2, int a3);
int __thiscall sub_48BCB0(int this, int a2, int a3);
int __stdcall sub_48BCE0(int a1);
// void *__userpurge sub_48BD00<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __stdcall CDoSpiritAbsorb::ExcuteM(int a1);
int __thiscall sub_48BF30(void *this, int a2, int a3);
int __thiscall sub_48BF60(void *this, int a2, int a3);
int __stdcall sub_48BFA0(int a1);
int __thiscall sub_48C040(int this, int a2);
// void __userpurge sub_48C110(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __stdcall CMFireRain::GetMagicM(int a1);
// void __userpurge sub_48C310(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __stdcall CMSpark::ExcuteM(int a1);
// void __userpurge sub_48C610(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __stdcall sub_48C7D0(int a1);
// int __userpurge sub_48C880<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge sub_48C950(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __stdcall sub_48CA70(int a1);
int __thiscall sub_48CAA0(int this, int a2, int a3);
void __thiscall sub_48CAD0(int this, int a2, int a3);
// void __userpurge sub_48CB10(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __stdcall sub_48CDA0(int a1);
int __stdcall sub_48CDC0(int a1);
// int __userpurge sub_48CDE0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, int a6);
int __stdcall sub_48CE20(int a1);
// void __userpurge sub_48CE40(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
int __stdcall sub_48CEB0(int a1);
int __stdcall sub_48CEE0(int a1);
// LONG __userpurge sub_48CF20<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
signed int __stdcall sub_48D100(int a1, int a2);
// int __userpurge sub_48D140<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
signed int __thiscall CPurgatorialFlame::AddMagicMonster(void *this, int a2, int a3);
// void __userpurge sub_48D1D0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge sub_48D390<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, int a6);
int __stdcall sub_48D3F0(int a1);
// void *__userpurge sub_48D440<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
void *__thiscall sub_48D680(void *this);
int __thiscall sub_48D6B0(int this);
int __thiscall sub_48D6D0(int this, int a2, int a3);
int __cdecl sub_48D880();
LONG __cdecl sub_48D900(int a1);
int __thiscall sub_48D930(int this);
bool __stdcall sub_48D9E0(int a1, int a2);
void *__thiscall sub_48DA00(void *this);
void *__thiscall sub_48DA20(int this, void *a2, int a3, char a4);
int __thiscall sub_48DAC0(int this);
int __thiscall sub_48DB20(int *this);
int __thiscall sub_48DBE0(int this, int a2, int a3, int a4, int a5, char a6);
_DWORD __stdcall sub_48DC30(_DWORD); // weak
int __thiscall sub_48DCB0(int this);
int __thiscall sub_48DCD0(int this);
int __thiscall sub_48DCF0(int this);
int __thiscall sub_48DD10(int this);
int __thiscall sub_48DD30(int this);
int __thiscall sub_48DD50(int this);
int __thiscall sub_48DD70(int this);
int __thiscall sub_48DD90(int this);
int __thiscall sub_48DDB0(int this, int a2);
int __thiscall sub_48DDD0(int this);
int __thiscall sub_48DDF0(int this, int a2, int a3);
int __thiscall sub_48DE10(int this);
int __thiscall sub_48DE30(int this);
signed int __cdecl sub_48DE50();
int __thiscall sub_48DE60(int this, int a2);
int __thiscall sub_48DE80(int this, int a2);
int __thiscall sub_48DEA0(int this);
int __thiscall sub_48DEC0(int this);
int __thiscall sub_48DEE0(int this);
int __thiscall sub_48DF00(int this, int a2);
int __thiscall sub_48DF20(int this);
int __thiscall sub_48DF40(int this);
int __thiscall sub_48DF60(int this, int a2);
int __thiscall sub_48DF80(int this);
int __stdcall sub_48DFA0(int a1, int a2);
int __thiscall sub_48DFB0(int this);
int __thiscall sub_48DFD0(int this, int a2);
int __thiscall sub_48DFF0(int this);
int __thiscall sub_48E010(int this, int a2, int a3);
int __thiscall sub_48E030(int this);
int __thiscall sub_48E050(int this, int a2, int a3);
signed int __cdecl CReturn::CReturn();
int __thiscall sub_48E080(int this);
int __thiscall sub_48E0A0(int this, int a2, int a3);
signed int __cdecl sub_48E0E0();
int __thiscall CUpBow::CUpBow(int this);
int __thiscall CUpConCen::CUpConCen(int this);
int __thiscall CPullSwing::CPullSwing(int this, int a2, int a3);
int __thiscall CBlow::CBlow(int this);
int __thiscall CPullSwing::GetSpendMP(int this);
int __thiscall sub_48E190(int this, int a2, int a3);
int __thiscall CThunder::GetHit(int this);
int __thiscall CShot::CShot(int this);
int __thiscall CShot::GetHostility(int this);
int __thiscall sub_48E230(int this);
int __thiscall sub_48E250(int this);
signed int __cdecl sub_48E270();
int __thiscall CMock::CMock(int this, int a2);
int __thiscall sub_48E2B0(int this);
int __thiscall sub_48E2D0(int this, int a2);
int __thiscall sub_48E2F0(int this);
signed int __thiscall sub_48E310(int this, int a2, int a3);
int __thiscall sub_48E330(int this);
int __thiscall sub_48E350(int this);
int __thiscall CNegative::GetHostility(int this);
int __thiscall CNegative::GetSpendMP(int this);
int __thiscall CFlameArrow::CFlameArrow(int this);
int __thiscall CFlameArrow::GetAttack(int this);
int __thiscall CTranscendental::CTranscendental(int this);
int __thiscall CTranscendental::GetAttack(int this, int a2);
int __thiscall CUpperSlash::CUpperSlash(int this);
int __thiscall CUpperSlash::GetAttack(int this);
int __thiscall sub_48E480(int this, int a2);
int __thiscall CUpperSlash::GetHostility(int this);
int __thiscall sub_48E4C0(int this);
int __thiscall sub_48E4E0(int this, int a2);
int __thiscall sub_48E500(int this);
int __thiscall sub_48E520(int this);
int __thiscall sub_48E540(int this);
int __thiscall sub_48E560(int this);
int __thiscall sub_48E580(int this);
signed int __cdecl CInfernal::CInfernal();
int __thiscall sub_48E5C0(int this);
int __thiscall sub_48E5E0(int this);
int __thiscall sub_48E600(int this);
int __thiscall sub_48E620(int this);
signed int __cdecl CExplosion::GetSpendMP();
int __thiscall sub_48E650(int this);
signed int __cdecl CGetherShot::CGetherShot();
int __thiscall sub_48E680(int this);
int __thiscall sub_48E6A0(int this);
int __thiscall sub_48E6C0(int this);
int __thiscall sub_48E6E0(int this);
int __stdcall sub_48E700(int a1, int a2, int a3);
int __thiscall CSpiritBlast::CSpiritBlast(int this);
int __thiscall CMagic::CMagic(int this);
int __thiscall CFire::CFire(int this);
int __thiscall CFireExplosion::CFireExplosion(int this, int a2);
int __thiscall CFireEruption::CFireEruption(int this);
int __thiscall CIce::CIce(int this, int a2);
int __thiscall CIce::GetSpendMP(int this);
int __thiscall sub_48E7F0(int this, int a2);
int __thiscall sub_48E810(int this);
int __thiscall sub_48E830(int this);
int __thiscall sub_48E850(int this);
int __thiscall sub_48E870(int this);
int __thiscall sub_48E890(int this);
int __thiscall sub_48E8B0(int this);
int __thiscall sub_48E8D0(int this, int a2);
int __thiscall sub_48E8F0(int this);
int __thiscall sub_48E910(int this);
int __thiscall sub_48E930(int this);
int __thiscall sub_48E950(int this);
int __thiscall CExplosiveBurst::GetAddValueType(int this);
int __thiscall sub_48E990(int this);
int __thiscall sub_48E9B0(int this);
int __thiscall sub_48E9D0(int this);
int __thiscall sub_48E9F0(int this);
int __thiscall CIceRequiem::CIceRequiem(int this);
int __thiscall CIceRequiem::GetAddValueType(int this);
int __thiscall sub_48EA50(int this);
int __thiscall sub_48EA70(int this);
int __thiscall sub_48EA90(int this);
int __thiscall sub_48EAB0(int this, int a2);
int __thiscall CIceStorm::CIceStorm(int this);
int __thiscall CFireRain::CFireRain(int this, int a2);
int __thiscall CPoisonCloud::CPoisonCloud(int this);
int __thiscall CManaBurn::GetSpendMP(int this);
int __thiscall CHealing::CHealing(int this);
int __thiscall CMShock::GetSpendMP(int this);
int __thiscall CHealingAny::CHealingAny(int this);
int __thiscall CUpperSmash::GetSpendMP(int this);
signed int __cdecl CHealingAnyPlus::CHealingAnyPlus();
int __thiscall sub_48EBE0(int this);
int __thiscall sub_48EC00(int this);
int __thiscall sub_48EC20(int this, int a2);
signed int __cdecl sub_48EC40();
int __thiscall CHealingAnyQuick::CHealingAnyQuick(int this);
int __thiscall CHealingInstance::CHealingInstance(int this);
int __thiscall CHealingInstance::GetSpendMP(int this);
int __thiscall CHealingGreatRe::CHealingGreatRe(int this);
int __thiscall CRest::CRest(int this, int a2);
int __thiscall CUpFatal::CUpFatal(int this);
int __thiscall CUpFatal2::CUpFatal2(int this);
int __thiscall CUpFatal3::CUpFatal3(int this);
int __thiscall CMeditation::CMeditation(int this);
bool __thiscall sub_48ED70(int this, int a2, unsigned int a3);
int __thiscall CUpFire::CUpFire(int this);
int __thiscall CFatalChance::CFatalChance(int this);
int __thiscall CUpBlockShield::CUpBlockShield(int this);
int __thiscall CGunnery::CGunnery(int this, int a2);
int __thiscall CRevival::CRevival(int this);
int __thiscall CResurrection::CResurrection(int this);
int __thiscall CResurrection::GetSpendMP(int this, int a2);
int __thiscall CReincarnate::CReincarnate(int this);
int __thiscall CReincarnate::GetSpendMP(int this, int a2);
int __thiscall CUpEvade::CUpEvade(int this);
int __thiscall CUpRFEvade::CUpRFEvade(int this);
int __thiscall CStoneShield::CStoneShield(int this);
int __thiscall CHaste::CHaste(int this, int a2);
int __thiscall CFrostBlast::CFrostBlast(int this);
int __thiscall CHealingParty::CHealingParty(int this);
int __thiscall CMPoisonCloud::GetResistNum(int this);
int __thiscall sub_48EFB0(int this, int a2);
int __thiscall sub_48EFD0(int this);
int __thiscall sub_48EFF0(int this);
int __thiscall CWildAccuracy::CWildAccuracy(int this);
int __thiscall CPoisonArrow::CPoisonArrow(int this);
int __thiscall CWildStrength::CWildStrength(int this, int a2);
int __thiscall CProtect::CProtect(int this);
int __thiscall CProtect::GetSpendMP(int this);
int __thiscall CShieldSmash::CShieldSmash(int this, int a2);
int __thiscall CSilenceArrow::CSilenceArrow(int this);
int __thiscall CProtectRange::CProtectRange(int this, int a2);
int __thiscall CUpReinforceVitality::CUpReinforceVitality(int this);
int __thiscall CUpReinforceVitality::CanLearn(int this, int a2);
int __thiscall sub_48F150(int this);
int __thiscall CUpAttackRange::CUpAttackRange(int this, int a2);
int __thiscall CVitalityDrain::CVitalityDrain(int this);
int __thiscall CSuffering::CSuffering(int this, int a2);
int __thiscall CHaste::GetSpendMP(int this);
int __stdcall CRainforceDefense::CRainforceDefense(int a1);
int __thiscall sub_48F200(int this);
int __thiscall sub_48F220(int this);
int __thiscall sub_48F240(int this);
int __thiscall sub_48F260(int this);
int __thiscall sub_48F280(int this);
int __thiscall sub_48F2A0(int this);
int __thiscall sub_48F2C0(int this);
int __thiscall sub_48F2E0(int this);
int __thiscall sub_48F300(int this);
int __thiscall sub_48F320(int this);
int __thiscall sub_48F340(int this);
int __thiscall sub_48F360(int this);
int __thiscall sub_48F380(int this);
int __thiscall sub_48F3A0(int this, int a2);
int __thiscall sub_48F3C0(int this);
int __thiscall sub_48F3E0(int this);
int __thiscall sub_48F400(int this);
int __thiscall sub_48F420(int this);
int __thiscall sub_48F440(int this, int a2);
int __thiscall sub_48F460(int this);
int __thiscall sub_48F480(int this);
int __thiscall sub_48F4A0(int this);
int __thiscall sub_48F4C0(int this);
int __thiscall sub_48F4E0(int this);
int __thiscall sub_48F500(int this);
int __thiscall sub_48F520(int this);
int __thiscall sub_48F540(int this);
int __thiscall sub_48F560(int this);
int __thiscall sub_48F580(int this);
int __thiscall sub_48F5A0(int this);
int __thiscall CManaBurn::CManaBurn(int this);
int __thiscall CMeshChance::CMeshChance(int this);
int __thiscall CMeshStr::CMeshStr(int this);
int __thiscall CMeshHth::CMeshHth(int this);
int __thiscall CMeshDex::CMeshDex(int this);
int __thiscall CMeshInt::CMeshInt(int this);
int __thiscall CMeshWis::CMeshWis(int this);
int __thiscall CMeshDefense::CMeshDefense(int this);
int __thiscall CVanishConfi::CVanishConfi(int this);
signed int __cdecl CDestroySight::CDestroySight();
int __thiscall sub_48F6F0(int this);
signed int __cdecl sub_48F710();
int __thiscall CBerserk::CBerserk(int this);
int __thiscall CSkillSelfBuff::CSkillSelfBuff(int this);
signed int __thiscall CBerserk::GetSpendMP(int this);
int __thiscall CResistLightning::CResistLightning(int this);
int __thiscall CResistIce::CResistIce(int this);
int __thiscall CResistFire::CResistFire(int this);
int __thiscall CResistCurse::CResistCurse(int this);
int __thiscall CResistPalsy::GetSpendMP(int this);
int __thiscall CResistPalsy::CResistPalsy(int this);
int __thiscall CEmergencyEscape::CEmergencyEscape(int this);
signed int __cdecl CChantProtect::CChantProtect();
int __thiscall sub_48F870(int this);
int __thiscall sub_48F890(int this);
signed int __thiscall sub_48F8B0(int this, int a2, int a3);
signed int __cdecl CChantDefFire::CChantDefFire();
int __thiscall sub_48F910(int this);
signed int __cdecl sub_48F930();
int __thiscall CChantBattle::CChantBattle(int this);
signed int __cdecl CTLitningBlast::CTLitningBlast();
int __thiscall sub_48F970(int this);
int __thiscall sub_48F990(int this);
int __thiscall sub_48F9B0(int this);
int __thiscall sub_48F9D0(int this);
signed int __cdecl sub_48F9F0();
int __thiscall CTFury::CTFury(int this);
signed int __cdecl CTGroundSplinter::CTGroundSplinter();
int __thiscall sub_48FA30(int this);
signed int __cdecl sub_48FA50();
signed int __cdecl CTDiamondClow::CTDiamondClow();
int __thiscall sub_48FA70(int this);
int __thiscall sub_48FA90(int this);
int __thiscall CDoFury::CDoFury(int this);
signed int __cdecl CDoGroundFeal::GetAddValueType();
int __thiscall sub_48FAF0(int this);
int __thiscall sub_48FB10(int this);
int __thiscall sub_48FB30(int this);
int __thiscall sub_48FB50(int this);
int __thiscall sub_48FB70(int this);
int __thiscall sub_48FB90(int this);
int __thiscall sub_48FBB0(int this);
int __thiscall sub_48FBD0(int this);
int __thiscall sub_48FBF0(int this);
int __thiscall CDoOverrun::GetAddValueType(int this);
signed int __cdecl sub_48FC40();
signed int __cdecl CSkill_MonsterMagic::CSkill_MonsterMagic();
int __thiscall sub_48FC60(int this);
int __thiscall sub_48FC90(int this);
int __thiscall sub_48FCB0(int this);
signed int __cdecl CMIceStorm::CMIceStorm();
int __thiscall sub_48FCE0(int this);
signed int __cdecl sub_48FD10();
int __thiscall sub_48FD20(int this, int a2, int a3);
// int __usercall sub_48FD60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_48FDE0(int this, char a2);
// int __userpurge CCompleteFire::CCompleteFire<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
signed int __thiscall sub_48FEC0(void *this);
signed int __thiscall CMFireFlowerExplosion::CMFireFlowerExplosion(void *this, FILE *a2);
int __thiscall sub_490070(int this, int a2);
int __thiscall CCellMap::_CCellMap(int this, int a2, int a3);
// int __userpurge sub_490220<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_4902D0(int this, int a2, int a3);
int __thiscall sub_490470(int this, int a2, int a3);
// int __userpurge CCellMap::ReadUnlock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge sub_490780(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge CCellMap::GetRWLockRect(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_4908E0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_490990(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge sub_490A40(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int *a6);
// void __userpurge sub_490B00(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int *a6);
// signed int __userpurge sub_490BD0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge sub_490CD0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
int __thiscall sub_490DC0(int this);
// void __usercall CCellMap::GetPlayerList(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __userpurge sub_490E70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// signed int __usercall sub_490EA0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4);
// int __userpurge sub_491010<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// void __usercall sub_491040(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_491080(signed int a1);
int __thiscall sub_4910A0(void *this, int a2, int a3);
// int __userpurge sub_491150<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
int __thiscall sub_491200(void *this, int a2, int a3, int a4);
// int __userpurge sub_4912B0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// signed int __userpurge sub_491360<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge sub_4913E0<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// signed int __userpurge CSMap::ReadLock<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10);
int __stdcall sub_492440(int a1, int a2, int a3);
int __stdcall sub_492510(int a1, int a2);
int __thiscall sub_492570(void *this, int a2);
// signed int __userpurge sub_4925C0<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9);
// int __userpurge sub_493390<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge sub_493440<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// int __userpurge sub_4934F0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge sub_4935A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge sub_493650<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge sub_493770<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_4938A0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_493CD0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_493E80(void *this, int a2, int a3);
// int __usercall sub_493EB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
void *__thiscall sub_493EE0(void *this);
int __thiscall sub_493F10(int this);
// int __userpurge sub_493F60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall sub_493F90<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
int __thiscall sub_493FC0(int this);
int __thiscall sub_493FE0(int this);
int __thiscall sub_494000(int this);
void *__thiscall sub_4940B0(int this, void *a2, int a3, char a4);
int __thiscall sub_494150(int this);
_DWORD __stdcall sub_4941B0(_DWORD); // weak
signed int __stdcall sub_494230(int *a1);
// int __userpurge sub_4942C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// int __userpurge sub_494400<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall sub_494430<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall sub_494450(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall sub_4944F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall sub_494700(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// int __usercall sub_494760<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall CSocket::_scalar_deleting_destructor_(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge CSocket::_CSocket(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall sub_4948C0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6);
// void __userpurge sub_494930(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_495770(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6, int a7, int a8, int a9, const void *a10);
// void __userpurge sub_4958F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_495980(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_4959B0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_4959E0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6);
// void __userpurge sub_495A90(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_495B20(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __usercall sub_495C20(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge sub_495C50(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_495CC0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7);
// void __userpurge sub_495D30(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge CSocket::OnDelPlayer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6);
// void __userpurge sub_495F90(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8);
// void __userpurge sub_496030(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, int a7);
// void __userpurge sub_496150(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// BOOL __usercall sub_4961B0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __thiscall sub_4962E0(int this);
void *__thiscall sub_496300(void *this);
// int std___Iterator_base___Iterator_base(); weak
void *__thiscall sub_4964E0(void *this);
// int __userpurge sub_496520<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
signed int __thiscall sub_496550(void *this, int a2);
// int __userpurge sub_4965B0<eax>(int *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
int __thiscall sub_496640(int this, int a2, int a3);
// int __userpurge sub_496690<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5);
// int __usercall CTables::CTables<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __usercall sub_496700(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5);
// int __usercall sub_496880<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>);
// void __userpurge sub_4968F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// void __userpurge sub_496990(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5);
// int __userpurge sub_496B30<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5, int a6);
// int __userpurge sub_496B90<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5, int a6);
int __cdecl sub_496BE0();
unsigned int __cdecl sub_496C70();
int __cdecl sub_496C80();
signed int __cdecl sub_496CD0();
signed int __cdecl sub_496CE0();
// char *__userpurge sub_496CF0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, int a5);
// char *__usercall sub_496F10<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, char a5);
// char *__userpurge sub_496F40<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, int a5);
// char *__usercall sub_497220<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, char a5);
// char *__userpurge sub_497250<eax>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, char *a1, unsigned int a2, int a3);
// char *__usercall sub_4975F0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, unsigned int a5, char a6);
int __stdcall sub_497620(int a1, int a2);
int __stdcall sub_497660(int a1, int a2);
void __cdecl sub_4976A0();
int __stdcall sub_497700(int a1, int a2);
signed int __stdcall sub_4977B0(int a1);
_DWORD __stdcall sub_4979C0(_DWORD); // weak
signed int __stdcall sub_497B80(int *a1);
void *__cdecl sub_497C20(void *a1);
void *__thiscall sub_497CB0(void *this);
// BOOL __stdcall MiniDumpWriteDump(HANDLE hProcess, DWORD ProcessId, HANDLE hFile, MINIDUMP_TYPE DumpType, PMINIDUMP_EXCEPTION_INFORMATION ExceptionParam, PMINIDUMP_USER_STREAM_INFORMATION UserStreamParam, PMINIDUMP_CALLBACK_INFORMATION CallbackParam);
signed int __stdcall sub_497CE0(int a1);
signed int __stdcall sub_497D5D(void *a1, void *a2, int a3, void *a4, int a5);
signed int __stdcall sub_497DA8(void *a1, void *a2, int a3, void *a4, int a5);
int __stdcall sub_497DF3(FILE *, int); // idb
// signed int __userpurge sub_4983BD<eax>(int a1<eax>, FILE *a2, void *a3, size_t a4, int a5, int a6);
// int __usercall sub_4988C1<eax>(int a1<ebp>);
int __cdecl sub_498920(int a1);
__int16 __cdecl sub_4989CB(int a1, int a2, char a3, int a4);
signed __int16 __cdecl sub_49C998(int a1, int a2, int a3);
signed __int16 __cdecl sub_49DCC7(int a1, int a2, int a3);
__int16 __cdecl sub_49EFED(int a1, int a2, int a3);
__int16 __cdecl sub_49F008(int a1, int a2, int a3);
void *__cdecl sub_49F030(int a1, void *a2, void *a3, void *a4, int a5);
void *__cdecl sub_49F10F(int a1, void *a2, void *a3, void *a4, int a5);
void __cdecl sub_49F1EE();
void *__thiscall sub_49F22E(void *this, int a2);
void *__thiscall sub_49F271(void *this, int a2);
void __cdecl sub_49F289();
// void *__cdecl memcpy(void *, const void *, size_t);
// void __thiscall report_failure(void *this); weak
void __thiscall sub_49F65E(void *this);
// void *__cdecl memset(void *, int, size_t);
// int __cdecl atexit(void (__cdecl *)());
// time_t __cdecl time(time_t *);
// struct tm *__cdecl localtime(const time_t *);
// int __cdecl abs(int);
// int __cdecl fclose(FILE *);
// int __cdecl isalnum(int);
// int __cdecl ungetc_0(int, FILE *);
// int __cdecl fgetc(FILE *);
// size_t __cdecl strlen(const char *);
// FILE *__cdecl fopen(const char *, const char *);
// int __cdecl strcmp(const char *, const char *);
// void *__cdecl memcpy_0(void *, const void *, size_t);
// char *__cdecl strcpy(char *, const char *);
// time_t __cdecl mktime(struct tm *);
// int sprintf(char *, const char *, ...);
int __cdecl sub_4A0647(int a1);
// char *__cdecl strrchr(const char *, int);
// size_t __cdecl strcspn(const char *, const char *);
// size_t __cdecl strspn(const char *, const char *);
// int __cdecl _except_handler3(int, PVOID TargetFrame, int); idb
// struct tm *__cdecl gmtime(const time_t *);
// void *__cdecl memchr(const void *, int, size_t);
// int __cdecl _vsnprintf(char *, size_t, const char *, va_list);
// int _snprintf(char *, size_t, const char *, ...);
// int __cdecl _beginthreadex(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, int, int, DWORD dwCreationFlags, LPDWORD lpThreadId); idb
// __int32 __cdecl strtol(const char *, char **, int);
// unsigned __int32 __cdecl strtoul(const char *, char **, int);
// size_t __cdecl fwrite(const void *, size_t, size_t, FILE *);
int __cdecl sub_4A0FE3(const void *a1, size_t a2, size_t a3, FILE *a4);
// int __cdecl vsprintf(char *, const char *, va_list);
// _DWORD __cdecl flsall(_DWORD); weak
// int __cdecl fflush(FILE *);
int __cdecl sub_4A1236();
// int fscanf(FILE *, const char *, ...);
__int32 __cdecl j__atol(const char *);
// void *__cdecl malloc(size_t);
// int __fastcall unknown_libname_15(_DWORD, _DWORD); weak
// int sscanf(const char *, const char *, ...);
// char *__cdecl strncpy(char *, const char *, size_t);
_DWORD __cdecl sub_4A16B4(_DWORD); // weak
// size_t __cdecl fread(void *, size_t, size_t, FILE *);
int __cdecl sub_4A17A2(void *, size_t, size_t, FILE *); // idb
// char *__cdecl strchr(const char *, int);
// void __cdecl srand(unsigned int);
// int __cdecl tolower(int);
// int __cdecl fseek(FILE *, __int32, int);
// _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD); weak
// _DWORD __stdcall exception__exception(_DWORD); weak
void __thiscall sub_4A2489(int this);
int __thiscall sub_4A24AC(int this, char a2);
// void __cdecl free(void *);
// _DWORD __cdecl _lock_file(_DWORD); weak
// _DWORD __cdecl _unlock_file(_DWORD); weak
void __cdecl sub_4A7BF9();
void __cdecl sub_4A7C3D(); // idb
// void __cdecl terminate(); idb
void __cdecl sub_4A89F9();
int unk_4A8A14(); // weak
// __int32 __stdcall __CxxUnhandledExceptionFilter(struct _EXCEPTION_POINTERS *); idb
int __cdecl sub_4A8ACA();
LPTOP_LEVEL_EXCEPTION_FILTER __cdecl sub_4A8ADD();
// _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD); weak
int __cdecl sub_4AA18E(int a1, int a2);
int __cdecl sub_4AA1A4(int a1, int a2);
int __cdecl sub_4AA1BA(int a1, int a2);
int __cdecl sub_4AA1F7(int a1, int a2);
// int __cdecl _stricmp(const char *, const char *);
// _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// void __usercall sub_4ABF6A(int this<ecx>, int a2<ebp>);
// int __usercall sub_4ABF7C<eax>(int this<ecx>, int a2<ebp>);
// int __usercall sub_4ABF90<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4ABFB0();
int __cdecl sub_4ABFD0();
int __cdecl sub_4ABFF0();
int __cdecl sub_4AC010();
// int __usercall sub_4AC030<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4AC050();
int __cdecl sub_4AC070();
int __cdecl sub_4AC090();
int __cdecl sub_4AC0B0();
int __cdecl sub_4AC0D0();
int __cdecl sub_4AC0F0();
int __cdecl sub_4AC110();
int __cdecl sub_4AC130();
int __cdecl sub_4AC150();
int __cdecl sub_4AC170();
int __cdecl sub_4AC190();
int __cdecl sub_4AC1B0();
int __cdecl sub_4AC1D0();
int __cdecl sub_4AC1F0();
int __cdecl sub_4AC930();
int __cdecl sub_4AC950();
int __cdecl sub_4AC970();
int __cdecl sub_4AC990();
int __cdecl sub_4AC9B0();
int __cdecl sub_4AC9D0();
int __cdecl sub_4AC9F0();
int __cdecl sub_4ACA10();
int __cdecl sub_4ACA30();
int __cdecl sub_4ACA50();
int __cdecl sub_4ACA70();
int __cdecl sub_4ACA90();
int __fastcall sub_4ACAB0(int a1, int a2);
void *__cdecl sub_4ACAC0();
int __cdecl sub_4ACAD0();
int __cdecl sub_4ACAF0();
int __cdecl sub_4ACB10();
int __cdecl sub_4ACB30();
int __cdecl sub_4ACB50();
int __cdecl sub_4ACB70();
int __cdecl sub_4ACB90();
int __cdecl sub_4ACBB0();
int __cdecl sub_4ACBD0();
int __cdecl sub_4ACBF0();
int __cdecl sub_4ACC10();
void *__cdecl sub_4ACC30();
DWORD __cdecl sub_4ACC40();
int __cdecl sub_4ACC50();
int __cdecl sub_4ACC70();
int __cdecl sub_4ACC90();
int __cdecl sub_4ACCB0();
int __cdecl sub_4ACCD0();
int __cdecl sub_4ACCF0();
int __cdecl sub_4ACD10();
int __cdecl sub_4ACD30();
int __cdecl sub_4ACD60();
int __cdecl sub_4ACD80();
int __cdecl sub_4ACDA0();
int __cdecl sub_4ACDC0();
int __cdecl sub_4ACDE0();
int __cdecl sub_4ACE00();
int __cdecl sub_4ACE20();
int __cdecl sub_4ACE40();
int __cdecl sub_4ACE60();
int __cdecl sub_4ACE80();
int __cdecl sub_4ACEA0();
int __cdecl sub_4ACEC0();
int __cdecl sub_4ACEE0();
int __cdecl sub_4AE1D0();
int __cdecl sub_4AE1F0();
DWORD __cdecl sub_4AE6A0();
int __cdecl sub_4AE6B0();
int __cdecl sub_4AE6D0();
DWORD __cdecl sub_4AE6F0();
int __cdecl sub_4AE700();
int __cdecl sub_4AE720();
int __cdecl sub_4AE740();
int __cdecl sub_4AE760();
int __cdecl sub_4AE780();
int __cdecl sub_4AE7A0();
int __cdecl sub_4AE7D0();
int __cdecl sub_4AE7F0();
int __cdecl sub_4AE810();
int __cdecl sub_4AE830();
int __cdecl sub_4AE850();
int __cdecl sub_4AE870();
int __cdecl sub_4AE890();
int __cdecl sub_4AE8B0();
int __cdecl sub_4AE8D0();
int __cdecl sub_4AE8F0();
int __cdecl sub_4AE910();
int __cdecl sub_4AE930();
void *__cdecl sub_4B23C0();
void *__cdecl sub_4B2580();
DWORD __cdecl sub_4B2F00();
int __cdecl sub_4B2F10();
DWORD __cdecl sub_4B2F30();
int __cdecl sub_4B2F40();
int __cdecl sub_4B2F70();
int __cdecl sub_4B2F90();
void *__cdecl sub_4B2FB0();
// int __usercall sub_4B2FC0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
LONG __cdecl sub_4B2FD0();
LONG __cdecl sub_4B2FE0();
LONG __cdecl sub_4B2FF0();
int __cdecl sub_4B3000();
// int __usercall sub_4B3010<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
LONG __cdecl sub_4B3020();
LONG __cdecl sub_4B3030();
int __cdecl sub_4B3040();
int __cdecl sub_4B3050();
int __cdecl sub_4B3060();
int __cdecl sub_4B3070();
// BOOL __usercall sub_4B3080<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3090();
// BOOL __usercall sub_4B30A0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B30B0();
// BOOL __usercall sub_4B30C0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B30D0();
void __cdecl sub_4B30E0(); // idb
// void __usercall sub_4B30F0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3100();
int __cdecl sub_4B3110();
int __cdecl sub_4B3120();
int __cdecl sub_4B3130();
int __cdecl sub_4B3140();
int __cdecl sub_4B3150();
// BOOL __usercall sub_4B3160<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3170();
int __cdecl sub_4B3180();
// void __usercall sub_4B3190(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B31A0();
int __cdecl sub_4B31B0();
int __cdecl sub_4B31C0();
int __cdecl sub_4B31D0();
int __cdecl sub_4B31E0();
int __cdecl sub_4B31F0();
int __cdecl sub_4B3200();
int __cdecl sub_4B3210();
int __cdecl sub_4B3220();
int __cdecl sub_4B3230();
int __cdecl sub_4B3240();
// void __usercall sub_4B3250(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3260();
// BOOL __usercall sub_4B3270<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3280();
// BOOL __usercall sub_4B3290<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// int __usercall sub_4B32A0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B32B0();
int __cdecl sub_4B32D0();
int __cdecl sub_4B32E0();
int __cdecl sub_4B32F0();
int __cdecl sub_4B3300();
int __cdecl sub_4B3310();
int __cdecl sub_4B3320();
// BOOL __usercall sub_4B3330<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3340();
// void __usercall sub_4B3350(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __usercall sub_4B3360(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
// void __usercall sub_4B3370(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3380();
int __cdecl sub_4B3390();
int __cdecl sub_4B33A0();
// void __usercall sub_4B33B0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B33C0();
// BOOL __usercall sub_4B33D0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B33E0();
// BOOL __usercall sub_4B33F0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3400();
int __cdecl sub_4B3410();
// BOOL __usercall sub_4B3430<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3440();
// BOOL __usercall sub_4B3450<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3460();
int __cdecl sub_4B3470();
// BOOL __usercall sub_4B3480<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3490();
int __cdecl sub_4B34A0();
// BOOL __usercall sub_4B34B0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B34C0();
int __cdecl sub_4B34D0();
int __cdecl sub_4B34E0();
int __cdecl sub_4B34F0();
// void __usercall sub_4B3510(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>);
int __cdecl sub_4B3520();
// int __stdcall AntiCpSvr_MakeGuidReqMsg(_DWORD, _DWORD); weak
// int __stdcall AntiCpSvr_MakeReqMsg(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall AntiCpSvr_Finalize(_DWORD); weak
// int __thiscall AntiCpSvr_Initialize(_DWORD, _DWORD); weak
// int __stdcall AntiCpSvr_AnalyzeAckMsg(_DWORD, _DWORD, _DWORD); weak
// int __stdcall AntiCpSvr_AnalyzeGuidAckMsg(_DWORD, _DWORD, _DWORD); weak
// BOOL __stdcall GetTextMetricsA(HDC hdc, LPTEXTMETRICA lptm);
// BOOL __stdcall TextOutA(HDC hdc, int x, int y, LPCSTR lpString, int c);
// COLORREF __stdcall SetTextColor(HDC hdc, COLORREF color);
// LONG __stdcall InterlockedDecrement(volatile LONG *lpAddend);
// DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
// HANDLE __stdcall CreateEventA(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCSTR lpName);
// BOOL __stdcall CloseHandle(HANDLE hObject);
// BOOL __stdcall ResetEvent(HANDLE hEvent);
// LONG __stdcall InterlockedExchange(volatile LONG *Target, LONG Value);
// BOOL __stdcall SetEvent(HANDLE hEvent);
// LONG __stdcall InterlockedIncrement(volatile LONG *lpAddend);
// BOOL __stdcall PostQueuedCompletionStatus(HANDLE CompletionPort, DWORD dwNumberOfBytesTransferred, ULONG_PTR dwCompletionKey, LPOVERLAPPED lpOverlapped);
// LONG __stdcall InterlockedCompareExchange(volatile LONG *Destination, LONG Exchange, LONG Comperand);
// DWORD __stdcall GetTickCount();
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// BOOL __stdcall GetThreadContext(HANDLE hThread, LPCONTEXT lpContext);
// HANDLE __stdcall GetCurrentThread();
// LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);
// LPSTR __stdcall lstrcpyA(LPSTR lpString1, LPCSTR lpString2);
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall ExitProcess(UINT uExitCode);
// void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// BOOL __stdcall DeleteFileA(LPCSTR lpFileName);
// BOOL __stdcall MoveFileExA(LPCSTR lpExistingFileName, LPCSTR lpNewFileName, DWORD dwFlags);
// BOOL __stdcall ReadFile(HANDLE hFile, LPVOID lpBuffer, DWORD nNumberOfBytesToRead, LPDWORD lpNumberOfBytesRead, LPOVERLAPPED lpOverlapped);
// HANDLE __stdcall CreateFileA(LPCSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
// HANDLE __stdcall GetCurrentProcess();
// SIZE_T __stdcall VirtualQuery(LPCVOID lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, SIZE_T dwLength);
// DWORD __stdcall GetCurrentThreadId();
// void __stdcall GetLocalTime(LPSYSTEMTIME lpSystemTime);
// DWORD __stdcall SetFilePointer(HANDLE hFile, LONG lDistanceToMove, PLONG lpDistanceToMoveHigh, DWORD dwMoveMethod);
// void __stdcall OutputDebugStringA(LPCSTR lpOutputString);
// BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// DWORD __stdcall GetCurrentProcessId();
// BOOL __stdcall SetThreadPriority(HANDLE hThread, int nPriority);
// void __stdcall GetSystemInfo(LPSYSTEM_INFO lpSystemInfo);
// BOOL __stdcall IsBadWritePtr(LPVOID lp, UINT_PTR ucb);
// void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// DWORD __stdcall ResumeThread(HANDLE hThread);
// DWORD __stdcall SuspendThread(HANDLE hThread);
// void __stdcall Sleep(DWORD dwMilliseconds);
// BOOL __stdcall SwitchToThread();
// BOOL __stdcall TryEnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// HANDLE __stdcall CreateIoCompletionPort(HANDLE FileHandle, HANDLE ExistingCompletionPort, ULONG_PTR CompletionKey, DWORD NumberOfConcurrentThreads);
// BOOL __stdcall SetProcessPriorityBoost(HANDLE hProcess, BOOL bDisablePriorityBoost);
// DWORD __stdcall WaitForMultipleObjects(DWORD nCount, const HANDLE *lpHandles, BOOL bWaitAll, DWORD dwMilliseconds);
// BOOL __stdcall GetQueuedCompletionStatus(HANDLE CompletionPort, LPDWORD lpNumberOfBytesTransferred, PULONG_PTR lpCompletionKey, LPOVERLAPPED *lpOverlapped, DWORD dwMilliseconds);
// DWORD __stdcall SetThreadIdealProcessor(HANDLE hThread, DWORD dwIdealProcessor);
// DWORD __stdcall GetLastError();
// LONG __stdcall InterlockedExchangeAdd(volatile LONG *Addend, LONG Value);
// HANDLE __stdcall CreateMutexA(LPSECURITY_ATTRIBUTES lpMutexAttributes, BOOL bInitialOwner, LPCSTR lpName);
// BOOL __stdcall HeapDestroy(HANDLE hHeap);
// HANDLE __stdcall HeapCreate(DWORD flOptions, SIZE_T dwInitialSize, SIZE_T dwMaximumSize);
// BOOL __stdcall HeapFree(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem);
// BOOL __stdcall VirtualFree(LPVOID lpAddress, SIZE_T dwSize, DWORD dwFreeType);
// LPVOID __stdcall HeapAlloc(HANDLE hHeap, DWORD dwFlags, SIZE_T dwBytes);
// LPVOID __stdcall VirtualAlloc(LPVOID lpAddress, SIZE_T dwSize, DWORD flAllocationType, DWORD flProtect);
// LPVOID __stdcall HeapReAlloc(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem, SIZE_T dwBytes);
// SIZE_T __stdcall HeapSize(HANDLE hHeap, DWORD dwFlags, LPCVOID lpMem);
// BOOL __stdcall IsDBCSLeadByte(BYTE TestChar);
// UINT __stdcall GetACP();
// int __stdcall lstrlenA(LPCSTR lpString);
// HDC __stdcall BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint);
// BOOL __stdcall GetClientRect(HWND hWnd, LPRECT lpRect);
// BOOL __stdcall EndPaint(HWND hWnd, const PAINTSTRUCT *lpPaint);
// BOOL __stdcall SetDlgItemInt(HWND hDlg, int nIDDlgItem, UINT uValue, BOOL bSigned);
// UINT __stdcall GetDlgItemTextA(HWND hDlg, int nIDDlgItem, LPSTR lpString, int cchMax);
// UINT __stdcall IsDlgButtonChecked(HWND hDlg, int nIDButton);
// UINT __stdcall GetDlgItemInt(HWND hDlg, int nIDDlgItem, BOOL *lpTranslated, BOOL bSigned);
// HWND __stdcall GetDlgItem(HWND hDlg, int nIDDlgItem);
// BOOL __stdcall EnableWindow(HWND hWnd, BOOL bEnable);
// BOOL __stdcall EndDialog(HWND hDlg, INT_PTR nResult);
// INT_PTR __stdcall DialogBoxParamA(HINSTANCE hInstance, LPCSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType);
// BOOL __stdcall DestroyWindow(HWND hWnd);
// void __stdcall PostQuitMessage(int nExitCode);
// HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
// HMENU __stdcall GetMenu(HWND hWnd);
// BOOL __stdcall EnableMenuItem(HMENU hMenu, UINT uIDEnableItem, UINT uEnable);
// BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow);
// BOOL __stdcall UpdateWindow(HWND hWnd);
// HICON __stdcall LoadIconA(HINSTANCE hInstance, LPCSTR lpIconName);
// HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);
// ATOM __stdcall RegisterClassExA(const WNDCLASSEXA *);
// int __stdcall LoadStringA(HINSTANCE hInstance, UINT uID, LPSTR lpBuffer, int cchBufferMax);
// HACCEL __stdcall LoadAcceleratorsA(HINSTANCE hInstance, LPCSTR lpTableName);
// BOOL __stdcall GetMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax);
// int __stdcall TranslateAcceleratorA(HWND hWnd, HACCEL hAccTable, LPMSG lpMsg);
// BOOL __stdcall TranslateMessage(const MSG *lpMsg);
// LRESULT __stdcall DispatchMessageA(const MSG *lpMsg);
// BOOL __stdcall SetWindowTextA(HWND hWnd, LPCSTR lpString);
// BOOL __stdcall InvalidateRect(HWND hWnd, const RECT *lpRect, BOOL bErase);
// int __stdcall wvsprintfA(LPSTR, LPCSTR, va_list arglist);
// int wsprintfA(LPSTR, LPCSTR, ...);
// BOOL __stdcall PtInRect(const RECT *lprc, POINT pt);
// BOOL __stdcall PostMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// BOOL __stdcall KillTimer(HWND hWnd, UINT_PTR uIDEvent);
// UINT_PTR __stdcall SetTimer(HWND hWnd, UINT_PTR nIDEvent, UINT uElapse, TIMERPROC lpTimerFunc);
// int __stdcall shutdown(SOCKET s, int how);
// char *__stdcall inet_ntoa(struct in_addr in);
// SOCKET __stdcall accept(SOCKET s, struct sockaddr *addr, int *addrlen);
// BOOL __stdcall WSAResetEvent(HANDLE hEvent);
// int __stdcall WSAGetLastError();
// u_long __stdcall htonl(u_long hostlong);
// int __stdcall listen(SOCKET s, int backlog);
// HANDLE __stdcall WSACreateEvent();
// int __stdcall WSAEventSelect(SOCKET s, HANDLE hEventObject, __int32 lNetworkEvents);
// BOOL __stdcall WSACloseEvent(HANDLE hEvent);
// int __stdcall WSASend(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesSent, DWORD dwFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// int __stdcall WSARecv(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesRecvd, LPDWORD lpFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// int __stdcall WSAStartup(WORD wVersionRequested, LPWSADATA lpWSAData);
// int __stdcall WSACleanup();
// int __stdcall setsockopt(SOCKET s, int level, int optname, const char *optval, int optlen);
// int __stdcall recv(SOCKET s, char *buf, int len, int flags);
// int __stdcall send(SOCKET s, const char *buf, int len, int flags);
// int __stdcall getsockname(SOCKET s, struct sockaddr *name, int *namelen);
// SOCKET __stdcall socket(int af, int type, int protocol);
// int __stdcall bind(SOCKET s, const struct sockaddr *name, int namelen);
// unsigned __int32 __stdcall inet_addr(const char *cp);
// struct hostent *__stdcall gethostbyname(const char *name);
// u_short __stdcall htons(u_short hostshort);
// int __stdcall connect(SOCKET s, const struct sockaddr *name, int namelen);
// int __stdcall closesocket(SOCKET s);
// BOOL __stdcall StackWalk(DWORD MachineType, HANDLE hProcess, HANDLE hThread, LPSTACKFRAME StackFrame, PVOID ContextRecord, PREAD_PROCESS_MEMORY_ROUTINE ReadMemoryRoutine, PFUNCTION_TABLE_ACCESS_ROUTINE FunctionTableAccessRoutine, PGET_MODULE_BASE_ROUTINE GetModuleBaseRoutine, PTRANSLATE_ADDRESS_ROUTINE TranslateAddress);
// BOOL __stdcall SymFromAddr(HANDLE hProcess, DWORD64 Address, PDWORD64 Displacement, PSYMBOL_INFO Symbol);
// DWORD __stdcall UnDecorateSymbolName(PCSTR name, PSTR outputString, DWORD maxStringLength, DWORD flags);
// BOOL __stdcall SymGetLineFromAddr64(HANDLE hProcess, DWORD64 qwAddr, PDWORD pdwDisplacement, PIMAGEHLP_LINE64 Line64);
// BOOL __stdcall SymInitialize(HANDLE hProcess, PCSTR UserSearchPath, BOOL fInvadeProcess);
// DWORD __stdcall SymGetOptions();
// DWORD __stdcall SymSetOptions(DWORD SymOptions);
// BOOL __stdcall SymCleanup(HANDLE hProcess);


//----- (00401000) --------------------------------------------------------
void *__cdecl sub_401000(size_t a1)
{
  return CMemory::_malloc(a1);
}

//----- (00401020) --------------------------------------------------------
void __cdecl sub_401020(int a1)
{
  CMemory::_free(a1);
}

//----- (00401040) --------------------------------------------------------
LONG __userpurge CAuthPacket::OnIOCallback<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v8; // ST04_4@1

  v8 = a1;
  CAuthSocket::Process(a2, a3, a4, a6);
  CIOBuffer::Release(*(_DWORD *)(v8 + 16));
  return CMemoryPool_CAuthPacket::_Free(v8);
}

//----- (00401070) --------------------------------------------------------
LONG __thiscall CIOBuffer::Release(int this)
{
  LONG result; // eax@1
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  result = InterlockedDecrement((volatile LONG *)(this + 8004));
  if ( !result )
    result = CIOBuffer::Free((void *)v2);
  return result;
}

//----- (004010A0) --------------------------------------------------------
int __usercall CAuthSocket::CAuthSocket<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1

  v5 = (int)this;
  CIOSocket::CIOSocket((int)this, a2, a3, a4, 0);
  *(_DWORD *)v5 = &off_4B433C;
  CIOObject::AddRef(v5, a2, a3, a4);
  return v5;
}
// 4B433C: using guessed type int (__stdcall *off_4B433C)(int);

//----- (004010D0) --------------------------------------------------------
LONG __usercall CIOObject::AddRef<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return sub_423980(a1, a2, a3, a4, (volatile LONG *)(a1 + 12));
}

//----- (004010F0) --------------------------------------------------------
void *__thiscall CIOObject::OnFree(void *this)
{
  void *result; // eax@1

  result = this;
  if ( this )
    result = (void *)(**(int (__thiscall ***)(_DWORD, _DWORD))this)(this, 1);
  return result;
}

//----- (00401140) --------------------------------------------------------
int __userpurge CAuthSocket::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CAuthSocket::_CAuthSocket(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00401170) --------------------------------------------------------
int __usercall CAuthSocket::_CAuthSocket<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B433C;
  return CIOSocket::_CIOSocket(a1, a2, a3, a4);
}
// 4B433C: using guessed type int (__stdcall *off_4B433C)(int);

//----- (00401190) --------------------------------------------------------
int __usercall CAuthSocket::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int v3; // eax@1
  int v4; // eax@2
  struct hostent *v6; // [sp+0h] [bp-1Ch]@2
  struct sockaddr name; // [sp+4h] [bp-18h]@1
  int v8; // [sp+14h] [bp-8h]@1
  SOCKET Value; // [sp+18h] [bp-4h]@1

  v8 = dword_4D9830;
  Value = socket(2, 1, 0);
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_WORD *)&name.sa_data[0] = 0;
  bind(Value, &name, 16);
  name.sa_family = 2;
  v3 = sub_4012D0(&unk_4E11CC);
  *(_DWORD *)&name.sa_data[2] = inet_addr((const char *)v3);
  if ( *(_DWORD *)&name.sa_data[2] == -1 )
  {
    v4 = sub_4012D0(&unk_4E11CC);
    v6 = gethostbyname((const char *)v4);
    if ( !v6 )
      goto LABEL_12;
    memcpy(&name.sa_data[2], *(const void **)v6->h_addr_list, v6->h_length);
  }
  *(_WORD *)&name.sa_data[0] = htons(hostshort);
  if ( connect(Value, &name, 16) == -1 )
  {
    sub_4328C0("Can't connect to Auth Server");
LABEL_12:
    closesocket(Value);
    return 0;
  }
  if ( !dword_4DA6E8 )
    hHandle = CreateEventA(0, 1, 0, 0);
  CAuthSocket::Initialize((ULONG_PTR)&unk_4DA6F0, a1, a2, a3, Value);
  if ( !dword_4DA6E8 )
    WaitForSingleObject(hHandle, 0xFFFFFFFFu);
  return dword_4DA6E8;
}
// 4D9830: using guessed type int dword_4D9830;
// 4DA6E8: using guessed type int dword_4DA6E8;

//----- (004012D0) --------------------------------------------------------
int __thiscall sub_4012D0(void *this)
{
  return unknown_libname_1(this);
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);

//----- (00401320) --------------------------------------------------------
BOOL __usercall CAuthSocket::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  BOOL result; // eax@1

  dword_4DA6E4 = 1;
  result = ResetEvent(hHandle);
  if ( Target != -1 )
  {
    CAuthSocket::Write(a1, a2, a3, 4, (unsigned int)&byte_4B437D);
    WaitForSingleObject(hHandle, 0xFFFFFFFFu);
    result = CloseHandle(hHandle);
    hHandle = 0;
  }
  return result;
}
// 4DA6E4: using guessed type int dword_4DA6E4;

//----- (00401380) --------------------------------------------------------
void __userpurge CAuthSocket::Initialize(ULONG_PTR a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, LONG Value)
{
  void *v5; // ST10_4@5
  ULONG_PTR v6; // [sp+0h] [bp-Ch]@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 20), a2, a3, a4);
  if ( InterlockedExchange(&Target, Value) == -1 )
    CIOObject::AddRef((int)&unk_4DA6F0, a2, a3, a4);
  memset((void *)(v6 + 52), 0, 0x14u);
  memset((void *)(v6 + 72), 0, 0x14u);
  *(_DWORD *)(*(_DWORD *)(v6 + 92) + 8000) = 0;
  *(_DWORD *)(v6 + 104) = 0;
  while ( *(_DWORD *)(v6 + 96) )
  {
    v5 = *(void **)(v6 + 96);
    *(_DWORD *)(v6 + 96) = *(_DWORD *)(*(_DWORD *)(v6 + 96) + 8008);
    CIOBuffer::Free(v5);
  }
  *(_DWORD *)(v6 + 100) = 0;
  *(_DWORD *)(v6 + 96) = 0;
  CIOCriticalSection::Leave(v6 + 20, a2, a3, a4);
  CIOSocket::Initialize(v6, a2, a3, a4);
}

//----- (00401460) --------------------------------------------------------
void __userpurge CAuthSocket::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( !dword_4DA6E4 )
  {
    if ( !CAuthSocket::Start(a2, a3, a4) )
      CIOObject::AddTimer(v5, a2, a3, a4, 10000, 0);
  }
}
// 4DA6E4: using guessed type int dword_4DA6E4;

//----- (00401490) --------------------------------------------------------
void __usercall CAuthSocket::OnClose(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  if ( !dword_4DA6E8 || dword_4DA6E4 )
  {
    SetEvent(hHandle);
  }
  else
  {
    sub_4328C0("Connection closed from Auth Server");
    CIOObject::AddTimer(v4, a2, a3, a4, 10000, 0);
  }
}
// 4DA6E4: using guessed type int dword_4DA6E4;
// 4DA6E8: using guessed type int dword_4DA6E8;

//----- (004014E0) --------------------------------------------------------
void __usercall CAuthSocket::OnRead(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST0C_4@5
  int v5; // [sp+0h] [bp-18h]@1
  DWORD v6; // [sp+4h] [bp-14h]@2
  size_t v7; // [sp+Ch] [bp-Ch]@3
  DWORD v8; // [sp+10h] [bp-8h]@1
  size_t v9; // [sp+14h] [bp-4h]@1

  v5 = a1;
  v9 = *(_DWORD *)(*(_DWORD *)(a1 + 92) + 8000);
  v8 = *(_DWORD *)(a1 + 92);
  while ( 1 )
  {
    v6 = v8;
    if ( v9 < 2 )
      break;
    v7 = *(_WORD *)v8;
    if ( v9 < v7 )
      break;
    v9 -= v7;
    v8 += v7;
    v4 = CMemoryPool_CAuthPacket::_Alloc();
    *(_DWORD *)(v4 + 16) = *(_DWORD *)(v5 + 92);
    CIOBuffer::AddRef(*(_DWORD *)(v5 + 92));
    CIOObject::PostObject(v4, v6);
  }
  CIOSocket::Read(v5, a2, a3, a4, v9);
}

//----- (00401570) --------------------------------------------------------
LONG __thiscall CIOBuffer::AddRef(int this)
{
  return InterlockedIncrement((volatile LONG *)(this + 8004));
}

//----- (00401590) --------------------------------------------------------
BOOL __thiscall CIOObject::PostObject(ULONG_PTR this, DWORD dwNumberOfBytesTransferred)
{
  return PostQueuedCompletionStatus(CompletionPort, dwNumberOfBytesTransferred, this, 0);
}

//----- (004015C0) --------------------------------------------------------
void __usercall CAuthSocket::Process(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v4; // [sp+4h] [bp-E0h]@60
  int v5; // [sp+8h] [bp-DCh]@60
  int v6; // [sp+10h] [bp-D4h]@57
  int v7; // [sp+14h] [bp-D0h]@57
  int v8; // [sp+18h] [bp-CCh]@57
  int v9; // [sp+1Ch] [bp-C8h]@57
  int v10; // [sp+20h] [bp-C4h]@57
  char v11[4]; // [sp+2Ch] [bp-B8h]@41
  char v12[4]; // [sp+30h] [bp-B4h]@40
  unsigned __int16 v13; // [sp+34h] [bp-B0h]@39
  int v14; // [sp+38h] [bp-ACh]@39
  int v15; // [sp+3Ch] [bp-A8h]@36
  int v16; // [sp+40h] [bp-A4h]@36
  int v17; // [sp+4Ch] [bp-98h]@33
  int v18; // [sp+50h] [bp-94h]@33
  unsigned __int8 v19; // [sp+57h] [bp-8Dh]@34
  int v20; // [sp+58h] [bp-8Ch]@27
  unsigned __int8 v21; // [sp+5Fh] [bp-85h]@28
  int v22; // [sp+60h] [bp-84h]@27
  int v23; // [sp+64h] [bp-80h]@24
  int v24; // [sp+68h] [bp-7Ch]@24
  unsigned __int8 v25; // [sp+6Fh] [bp-75h]@25
  int v26; // [sp+70h] [bp-74h]@25
  int v27; // [sp+74h] [bp-70h]@25
  int v28; // [sp+78h] [bp-6Ch]@21
  int v29; // [sp+7Ch] [bp-68h]@21
  unsigned __int8 v30; // [sp+83h] [bp-61h]@22
  int v31; // [sp+84h] [bp-60h]@22
  int v32; // [sp+88h] [bp-5Ch]@22
  int v33; // [sp+8Ch] [bp-58h]@18
  int v34; // [sp+90h] [bp-54h]@18
  int v35; // [sp+94h] [bp-50h]@15
  int v36; // [sp+98h] [bp-4Ch]@15
  unsigned __int16 v37; // [sp+9Ch] [bp-48h]@16
  int v38; // [sp+A0h] [bp-44h]@16
  unsigned __int16 v39; // [sp+A4h] [bp-40h]@16
  int v40; // [sp+A8h] [bp-3Ch]@12
  int v41; // [sp+ACh] [bp-38h]@12
  unsigned __int8 v42; // [sp+B3h] [bp-31h]@13
  unsigned __int16 v43; // [sp+B4h] [bp-30h]@13
  unsigned __int16 v44; // [sp+B8h] [bp-2Ch]@13
  int v45; // [sp+BCh] [bp-28h]@7
  void *v46; // [sp+C0h] [bp-24h]@8
  int v47; // [sp+C4h] [bp-20h]@7
  unsigned __int8 v48; // [sp+CAh] [bp-1Ah]@8
  unsigned __int8 v49; // [sp+CBh] [bp-19h]@8
  int v50; // [sp+CCh] [bp-18h]@8
  int v51; // [sp+D0h] [bp-14h]@8
  int v52; // [sp+D4h] [bp-10h]@8
  unsigned __int8 v53; // [sp+DAh] [bp-Ah]@4
  unsigned __int8 v54; // [sp+DBh] [bp-9h]@2
  void *v55; // [sp+DCh] [bp-8h]@1
  char v56[4]; // [sp+E0h] [bp-4h]@1

  v55 = (void *)(a4 + 3);
  *(_DWORD *)v56 = *(_BYTE *)(a4 + 2);
  switch ( *(_DWORD *)v56 )
  {
    case 0:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"bdb");
      if ( (signed int)v54 <= 2 )
      {
        if ( v53 == dword_4E35B8 )
        {
          dword_4DA6E8 = 1;
          SetEvent(hHandle);
          CAuthSocket::Write(a1, a2, a3, 8, (unsigned int)"wb");
          sub_432890("Auth server version (Version:%d)", v54);
          sub_47E880(a1, a2, a3);
        }
        else
        {
          sub_4328C0("Country Code is different (AuthSvr:%d, MainSvr:%d)", v53, dword_4E35B8);
          CIOSocket::Close((int)&unk_4DA6F0, a1, a2, a3);
        }
      }
      else
      {
        sub_4328C0("Auth version is different (AuthSvr:%d, MainSvr:%d)", v54, 2);
        CIOSocket::Close((int)&unk_4DA6F0, a1, a2, a3);
      }
      break;
    case 1:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"ddbbdds");
      v47 = sub_47E800(a1, a2, a3, v45);
      if ( v47 )
      {
        sub_495770(v47, a1, a2, a3, v48, v51, v49, v52, v50, v46);
        CIOObject::Release(v47, a1, a2, a3);
      }
      else
      {
        if ( v48 == 1 )
          CAuthSocket::Write(a1, a2, a3, 2, (unsigned int)"dddwbdddb");
      }
      break;
    case 2:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dbww");
      v41 = sub_47E800(a1, a2, a3, v40);
      if ( v41 )
      {
        sub_495980(v41, a1, a2, a3, v42, v43, v44);
        CIOObject::Release(v41, a1, a2, a3);
      }
      break;
    case 3:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dwwd");
      v36 = sub_47E800(a1, a2, a3, v35);
      if ( v36 )
      {
        sub_4959B0(v36, a1, a2, a3, v37, v39, v38);
        CIOObject::Release(v36, a1, a2, a3);
      }
      break;
    case 4:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"d");
      v34 = sub_47E800(a1, a2, a3, v33);
      if ( v34 )
      {
        sub_495C20(v34, a1, a2, a3);
        CIOObject::Release(v34, a1, a2, a3);
      }
      break;
    case 5:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dbds");
      v29 = sub_47E800(a1, a2, a3, v28);
      if ( v29 )
      {
        sub_495C50(v29, a1, a2, a3, v30, v31, v32);
        CIOObject::Release(v29, a1, a2, a3);
      }
      break;
    case 6:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dbds");
      v24 = sub_47E800(a1, a2, a3, v23);
      if ( v24 )
      {
        sub_495CC0(v24, a1, a2, a3, v25, v26, v27);
        CIOObject::Release(v24, a1, a2, a3);
      }
      break;
    case 7:
      v55 = sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"db");
      v22 = sub_450810(a1, a2, a3, v20);
      if ( v22 )
      {
        CPlayer::OnProcessEvent((void *)v22, a1, a2, a3, v21, v55);
        sub_4239C0(v22, a1, a2, a3, v22 + 352);
      }
      break;
    case 8:
      CDBSocket::Write(a1, a2, a3, 53, (unsigned int)"m");
      break;
    case 9:
      if ( *(_WORD *)dword_4E1174 & 0x100 )
      {
        v55 = sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"db");
        v18 = sub_47E800(a1, a2, a3, v17);
        if ( v18 )
        {
          sub_496030(v18, a1, a2, a3, v19, (char *)v55, a4 + *(_WORD *)a4);
          CIOObject::Release(v18, a1, a2, a3);
        }
      }
      break;
    case 0xA:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"ddd");
      v16 = sub_47E800(a1, a2, a3, v15);
      if ( v16 )
      {
        sub_4948C0(a1, a2, a3, v16, 99, (unsigned int)"dd");
        CIOObject::Release(v16, a1, a2, a3);
      }
      break;
    case 0xB:
      v55 = sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dw");
      CGoods::ForcedStorageIn(a1, a2, a3, v14, v13, v55);
      break;
    case 0xC:
      v55 = sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"ds");
      if ( *(_DWORD *)v12 >= 0 )
      {
        if ( *(_DWORD *)v12 )
        {
          if ( dword_4E17B8 )
          {
            sub_432860("[Shutdown] Shutdown's already started. (%d min. remains)", dword_4E17B8 / 60000);
          }
          else
          {
            if ( **(_BYTE **)v11 )
            {
              CPlayer::WriteAll(a1, a2, a3, 15, (unsigned int)"s");
              if ( dword_4E35B8 == 1 )
                sub_432890("[GM Command] Notice from Auth : %s", *(_DWORD *)v11);
            }
            dword_4E17B8 = 60000 * *(_DWORD *)v12;
            SetTimer(hWnd, 2u, 0x2710u, 0);
            sub_432890("Shutdown's started. (%d min. remains)", *(_DWORD *)v12);
          }
        }
        else
        {
          if ( dword_4E17B8 )
          {
            KillTimer(hWnd, 2u);
            dword_4E17B8 = 0;
            sub_432890("Shutdown's canceled.");
          }
        }
      }
      else
      {
        if ( **(_BYTE **)v11 )
        {
          CPlayer::WriteAll(a1, a2, a3, 15, (unsigned int)"s");
          if ( dword_4E35B8 == 1 )
            sub_432890("[GM Command] Notice from Auth : %s", *(_DWORD *)v11);
        }
      }
      break;
    case 0xD:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dd");
      break;
    case 0xE:
      v6 = 0;
      v10 = 0;
      v8 = 0;
      v9 = 0;
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dddd");
      v7 = CPlayer::ScanPlayer(a1, a2, a3, v6);
      if ( v7 )
      {
        CPlayer::EventProcessNPC(v7, a1, a2, a3, v9, v8, 3);
        sub_4239C0(v7, a1, a2, a3, v7 + 352);
      }
      break;
    case 0xF:
      sub_497220(a1, a2, a3, (char *)v55, (unsigned int)"dd");
      CDBSocket::Write(a1, a2, a3, 80, (unsigned int)"d");
      v5 = sub_47E800(a1, a2, a3, v4);
      if ( v5 )
      {
        sub_496CD0();
        CIOObject::Release(v5, a1, a2, a3);
      }
      break;
    default:
      sub_4328C0("invalid packet type at CAuthSocket::Process Type(%d)", *(_DWORD *)v56);
      break;
  }
}
// 4DA6E8: using guessed type int dword_4DA6E8;
// 4E17B8: using guessed type int dword_4E17B8;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00401DE0) --------------------------------------------------------
int __usercall CIOObject::Release<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return sub_4239C0(a1, a2, a3, a4, a1 + 12);
}

//----- (00401E00) --------------------------------------------------------
void __usercall CAuthSocket::Write(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5)
{
  int v5; // ST0C_4@3

  if ( Target != -1 )
  {
    v5 = (int)CIOBuffer::Alloc();
    *(_BYTE *)(v5 + 2) = a4;
    *(_WORD *)v5 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)(v5 + 3), (int)&a5) - v5;
    *(_DWORD *)(v5 + 8000) = *(_WORD *)v5;
    CIOSocket::Write((int)&unk_4DA6F0, a1, a2, a3, v5);
  }
}

//----- (00401E80) --------------------------------------------------------
int __cdecl CMemoryPool_CAuthPacket::_Alloc()
{
  int result; // eax@2
  int v1; // [sp+0h] [bp-Ch]@4
  int v2; // [sp+4h] [bp-8h]@3
  int v3; // [sp+8h] [bp-4h]@1

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA768);
  v3 = dword_4DA764;
  if ( dword_4DA764 )
  {
    dword_4DA764 = *(_DWORD *)(dword_4DA764 + 16);
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA768);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA768);
    v2 = (int)sub_401000(0x14u);
    if ( v2 )
      v1 = CAuthPacket::CAuthPacket(v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 4DA764: using guessed type int dword_4DA764;

//----- (00401F00) --------------------------------------------------------
LONG __thiscall CIOSpinLock::Enter(volatile LONG *this)
{
  LONG result; // eax@1
  void *v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  result = InterlockedCompareExchange(this, 1, 0);
  if ( result )
    result = CIOSpinLock::Wait(v2);
  return result;
}

//----- (00401F30) --------------------------------------------------------
LONG __thiscall CIOSpinLock::Leave(volatile LONG *this)
{
  return InterlockedExchange(this, 0);
}

//----- (00401F50) --------------------------------------------------------
LONG __cdecl CMemoryPool_CAuthPacket::_Free(int a1)
{
  CIOSpinLock::Enter((volatile LONG *)&unk_4DA768);
  *(_DWORD *)(a1 + 16) = dword_4DA764;
  dword_4DA764 = a1;
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA768);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (00401F80) --------------------------------------------------------
int __thiscall CAuthPacket::CAuthPacket(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B4564;
  return v2;
}
// 4B4564: using guessed type int (__stdcall *off_4B4564)(int);

//----- (00401FA0) --------------------------------------------------------
int __thiscall CIOObject::CIOObject(int this)
{
  *(_DWORD *)this = &off_4B457C;
  *(_DWORD *)(this + 4) = 1;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 1;
  return this;
}
// 4B457C: using guessed type int (__stdcall *off_4B457C)(int);

//----- (00401FE0) --------------------------------------------------------
int __thiscall CIOObject::_scalar_deleting_destructor_(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  std__locale__facet___facet(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (00402010) --------------------------------------------------------
int __thiscall CIOSocket::CIOTimerInstance::_CIOTimerInstance(void *this)
{
  return std__locale__facet___facet(this);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (00402030) --------------------------------------------------------
LONG __cdecl CMemoryPool_CAuthPacket::_CPool::_CPool()
{
  return CMemoryPool_CAuthPacket::_FreeAll();
}

//----- (00402040) --------------------------------------------------------
LONG __cdecl CMemoryPool_CAuthPacket::_FreeAll()
{
  int v1; // [sp+Ch] [bp-4h]@2

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA768);
  while ( 1 )
  {
    v1 = dword_4DA764;
    if ( !dword_4DA764 )
      break;
    dword_4DA764 = *(_DWORD *)(dword_4DA764 + 16);
    if ( v1 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
  }
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA768);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004020B0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CSkill::_CPool::_CPool()
{
  return CMemoryPool_CSkill::_FreeAll();
}

//----- (004020C0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CSkill::_FreeAll()
{
  int v1; // [sp+4h] [bp-4h]@2

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA760);
  while ( 1 )
  {
    v1 = dword_4DA75C;
    if ( !dword_4DA75C )
      break;
    dword_4DA75C = *(_DWORD *)(dword_4DA75C + 4);
    sub_401020(v1);
  }
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA760);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (00402110) --------------------------------------------------------
int __thiscall CBase::CBase(int this)
{
  int v2; // ST04_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B4598;
  *(_DWORD *)(v2 + 16) = -6;
  *(_DWORD *)(v2 + 28) = InterlockedIncrement(&Addend);
  *(_DWORD *)(v2 + 24) = 0;
  *(_DWORD *)(v2 + 20) = 0;
  InterlockedIncrement((volatile LONG *)(v2 + 8));
  InterlockedDecrement((volatile LONG *)(v2 + 12));
  return v2;
}
// 4B4598: using guessed type int (__stdcall *off_4B4598)(int);

//----- (00402180) --------------------------------------------------------
int __usercall CBase::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return sub_4239C0(a1, a2, a3, a4, a1 + 8);
}

//----- (004021B0) --------------------------------------------------------
void __stdcall CMonster::ResetNextMove(int a1, int a2)
{
  ;
}

//----- (004021C0) --------------------------------------------------------
int __userpurge CBase::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CBase::_CBase(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (004021F0) --------------------------------------------------------
int __usercall CBase::_CBase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4B4598;
  if ( *(_DWORD *)(a1 + 16) != -6 )
    sub_422D80(a1, a2, a3, a4);
  return std__locale__facet___facet(v5);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);
// 4B4598: using guessed type int (__stdcall *off_4B4598)(int);

//----- (00402220) --------------------------------------------------------
int __usercall CBase::OnFree<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  int v5; // [sp+4h] [bp-Ch]@1

  v5 = a1;
  result = a1;
  if ( *(_DWORD *)(a1 + 16) != -6 )
    result = sub_422D80(a1, a2, a3, a4);
  if ( v5 )
    result = (**(int (__thiscall ***)(_DWORD, _DWORD))v5)(v5, 1);
  return result;
}

//----- (00402270) --------------------------------------------------------
signed int __thiscall CBase::Set(void *this, int a2, char a3)
{
  signed int result; // eax@3
  int v4; // ecx@4
  void *v5; // eax@4
  void *v6; // eax@9
  int v7; // eax@9
  int v8; // [sp-4h] [bp-1Ch]@5
  void *v9; // [sp+0h] [bp-18h]@1
  char v10; // [sp+4h] [bp-14h]@9
  char v11; // [sp+Ch] [bp-Ch]@4
  char v12[4]; // [sp+10h] [bp-8h]@4
  char v13; // [sp+14h] [bp-4h]@4
  int v14; // [sp+20h] [bp+8h]@4

  v9 = this;
  if ( a2 )
  {
    v6 = sub_4023A0(&a3, &v10);
    v7 = sub_402360(v6);
    sub_4328C0("invalid symbol(%d) value(%s) at CBase::Set", a2, v7);
    result = 0;
  }
  else
  {
    do
    {
      if ( (unsigned __int8)sub_402380(&a3) )
        return 1;
      sub_4023A0(&a3, &v13);
      v5 = sub_4023A0(&v13, &v11);
      *(_DWORD *)v12 = sub_402360(v5);
      v14 = CObjectDB::FindSymbol(v12[0]);
      if ( !v14 )
      {
        v8 = *(_DWORD *)v12;
        sub_4328C0("invalid symbol(%s) at CBase::Set", *(_DWORD *)v12);
        return 0;
      }
      v8 = v4;
      sub_402340(&v8, (int)&v13);
    }
    while ( (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)v9 + 28))(v9, v14, v8) );
    result = 0;
  }
  return result;
}

//----- (00402340) --------------------------------------------------------
void *__thiscall sub_402340(void *this, int a2)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  return this;
}

//----- (00402360) --------------------------------------------------------
int __thiscall sub_402360(void *this)
{
  return (***(int (__thiscall ****)(_DWORD))this)(*(_DWORD *)this);
}

//----- (00402380) --------------------------------------------------------
int __thiscall sub_402380(void *this)
{
  return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 24))(*(_DWORD *)this);
}

//----- (004023A0) --------------------------------------------------------
void *__thiscall sub_4023A0(void *this, void *a2)
{
  int v3; // ST08_4@1
  int v4; // eax@1

  v3 = *(_DWORD *)this;
  *(_DWORD *)this = *(_DWORD *)(*(int (**)(void))(**(_DWORD **)this + 16))();
  v4 = (*(int (__thiscall **)(int))(*(_DWORD *)v3 + 12))(v3);
  sub_402340(a2, v4);
  return a2;
}

//----- (004023F0) --------------------------------------------------------
void *__userpurge CBaseList::Push<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST00_4@1
  void *v7; // ST04_4@1

  v6 = a1;
  v7 = CMemoryPool_CBaseList::_Alloc();
  CIOObject::AddRef(a5, a2, a3, a4);
  *(_DWORD *)v7 = a5;
  *((_DWORD *)v7 + 1) = v6;
  return v7;
}

//----- (00402430) --------------------------------------------------------
int __usercall CBaseList::Pop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1
  int v6; // ST08_4@1

  v5 = a1;
  v6 = *(_DWORD *)(a1 + 4);
  CIOObject::Release(*(_DWORD *)a1, a2, a3, a4);
  CMemoryPool_CBaseList::_Free(v5);
  return v6;
}

//----- (00402460) --------------------------------------------------------
void *__cdecl CMemoryPool_CBaseList::_Alloc()
{
  void *result; // eax@2
  int v1; // [sp+4h] [bp-4h]@1

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA774);
  v1 = dword_4DA770;
  if ( dword_4DA770 )
  {
    dword_4DA770 = *(_DWORD *)(dword_4DA770 + 4);
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA774);
    result = (void *)v1;
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA774);
    result = sub_401000(8u);
  }
  return result;
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004024C0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CBaseList::_Free(int a1)
{
  CIOSpinLock::Enter((volatile LONG *)&unk_4DA774);
  *(_DWORD *)(a1 + 4) = dword_4DA770;
  dword_4DA770 = a1;
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA774);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004024F0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CBaseList::_CPool::_CPool()
{
  return CMemoryPool_CBaseList::_FreeAll();
}

//----- (00402500) --------------------------------------------------------
LONG __cdecl CMemoryPool_CBaseList::_FreeAll()
{
  int v1; // [sp+4h] [bp-4h]@2

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA774);
  while ( 1 )
  {
    v1 = dword_4DA770;
    if ( !dword_4DA770 )
      break;
    dword_4DA770 = *(_DWORD *)(dword_4DA770 + 4);
    sub_401020(v1);
  }
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA774);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (00402550) --------------------------------------------------------
int __thiscall sub_402550(int this)
{
  *(_DWORD *)this = off_4B4630;
  *(_DWORD *)(this + 20) = 0;
  return this;
}
// 4B4630: using guessed type int (__stdcall *off_4B4630[3])(int);

//----- (00402580) --------------------------------------------------------
int __stdcall CBuff::UpdateBuff(int a1, int a2)
{
  if ( a1 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 0;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (00402610) --------------------------------------------------------
void *__cdecl CBuff::CreateBuff(int a1, int a2, int a3, int a4)
{
  int v5; // [sp+0h] [bp-540h]@503
  int v6; // [sp+4h] [bp-53Ch]@499
  int v7; // [sp+8h] [bp-538h]@495
  void *v8; // [sp+Ch] [bp-534h]@491
  void *v9; // [sp+10h] [bp-530h]@487
  void *v10; // [sp+14h] [bp-52Ch]@481
  void *v11; // [sp+18h] [bp-528h]@475
  void *v12; // [sp+1Ch] [bp-524h]@469
  void *v13; // [sp+20h] [bp-520h]@465
  void *v14; // [sp+24h] [bp-51Ch]@461
  void *v15; // [sp+28h] [bp-518h]@457
  void *v16; // [sp+2Ch] [bp-514h]@453
  void *v17; // [sp+30h] [bp-510h]@449
  int v18; // [sp+34h] [bp-50Ch]@445
  int v19; // [sp+38h] [bp-508h]@441
  int v20; // [sp+3Ch] [bp-504h]@437
  void *v21; // [sp+40h] [bp-500h]@433
  int v22; // [sp+44h] [bp-4FCh]@429
  int v23; // [sp+48h] [bp-4F8h]@425
  int v24; // [sp+4Ch] [bp-4F4h]@421
  int v25; // [sp+50h] [bp-4F0h]@417
  void *v26; // [sp+54h] [bp-4ECh]@413
  void *v27; // [sp+58h] [bp-4E8h]@409
  void *v28; // [sp+5Ch] [bp-4E4h]@405
  void *v29; // [sp+60h] [bp-4E0h]@401
  void *v30; // [sp+64h] [bp-4DCh]@397
  void *v31; // [sp+68h] [bp-4D8h]@393
  void *v32; // [sp+6Ch] [bp-4D4h]@389
  void *v33; // [sp+70h] [bp-4D0h]@385
  void *v34; // [sp+74h] [bp-4CCh]@381
  void *v35; // [sp+78h] [bp-4C8h]@377
  void *v36; // [sp+7Ch] [bp-4C4h]@373
  void *v37; // [sp+80h] [bp-4C0h]@369
  void *v38; // [sp+84h] [bp-4BCh]@365
  void *v39; // [sp+88h] [bp-4B8h]@361
  void *v40; // [sp+8Ch] [bp-4B4h]@357
  void *v41; // [sp+90h] [bp-4B0h]@353
  int v42; // [sp+94h] [bp-4ACh]@349
  void *v43; // [sp+98h] [bp-4A8h]@343
  void *v44; // [sp+9Ch] [bp-4A4h]@337
  void *v45; // [sp+A0h] [bp-4A0h]@331
  void *v46; // [sp+A4h] [bp-49Ch]@325
  int v47; // [sp+A8h] [bp-498h]@319
  int v48; // [sp+ACh] [bp-494h]@313
  int v49; // [sp+B0h] [bp-490h]@307
  int v50; // [sp+B4h] [bp-48Ch]@301
  int v51; // [sp+B8h] [bp-488h]@295
  int v52; // [sp+BCh] [bp-484h]@289
  int v53; // [sp+C0h] [bp-480h]@283
  int v54; // [sp+C4h] [bp-47Ch]@279
  int v55; // [sp+C8h] [bp-478h]@275
  int v56; // [sp+CCh] [bp-474h]@271
  int v57; // [sp+D0h] [bp-470h]@267
  int v58; // [sp+D4h] [bp-46Ch]@263
  int v59; // [sp+D8h] [bp-468h]@259
  int v60; // [sp+DCh] [bp-464h]@255
  int v61; // [sp+E0h] [bp-460h]@251
  int v62; // [sp+E4h] [bp-45Ch]@247
  int v63; // [sp+E8h] [bp-458h]@243
  int v64; // [sp+ECh] [bp-454h]@239
  int v65; // [sp+F0h] [bp-450h]@235
  int v66; // [sp+F4h] [bp-44Ch]@231
  int v67; // [sp+F8h] [bp-448h]@227
  int v68; // [sp+FCh] [bp-444h]@223
  int v69; // [sp+100h] [bp-440h]@219
  int v70; // [sp+104h] [bp-43Ch]@215
  int v71; // [sp+108h] [bp-438h]@211
  int v72; // [sp+10Ch] [bp-434h]@207
  int v73; // [sp+110h] [bp-430h]@203
  int v74; // [sp+114h] [bp-42Ch]@199
  int v75; // [sp+118h] [bp-428h]@195
  int v76; // [sp+11Ch] [bp-424h]@191
  int v77; // [sp+120h] [bp-420h]@187
  int v78; // [sp+124h] [bp-41Ch]@183
  int v79; // [sp+128h] [bp-418h]@179
  int v80; // [sp+12Ch] [bp-414h]@175
  int v81; // [sp+130h] [bp-410h]@171
  int v82; // [sp+134h] [bp-40Ch]@167
  int v83; // [sp+138h] [bp-408h]@163
  int v84; // [sp+13Ch] [bp-404h]@159
  int v85; // [sp+140h] [bp-400h]@155
  int v86; // [sp+144h] [bp-3FCh]@151
  int v87; // [sp+148h] [bp-3F8h]@147
  int v88; // [sp+14Ch] [bp-3F4h]@143
  int v89; // [sp+150h] [bp-3F0h]@139
  int v90; // [sp+154h] [bp-3ECh]@135
  int v91; // [sp+158h] [bp-3E8h]@131
  int v92; // [sp+15Ch] [bp-3E4h]@127
  int v93; // [sp+160h] [bp-3E0h]@123
  int v94; // [sp+164h] [bp-3DCh]@119
  int v95; // [sp+168h] [bp-3D8h]@115
  int v96; // [sp+16Ch] [bp-3D4h]@111
  int v97; // [sp+170h] [bp-3D0h]@107
  int v98; // [sp+174h] [bp-3CCh]@103
  int v99; // [sp+178h] [bp-3C8h]@99
  int v100; // [sp+17Ch] [bp-3C4h]@95
  int v101; // [sp+180h] [bp-3C0h]@91
  int v102; // [sp+184h] [bp-3BCh]@87
  int v103; // [sp+188h] [bp-3B8h]@83
  int v104; // [sp+18Ch] [bp-3B4h]@79
  int v105; // [sp+190h] [bp-3B0h]@75
  int v106; // [sp+194h] [bp-3ACh]@71
  int v107; // [sp+198h] [bp-3A8h]@67
  int v108; // [sp+19Ch] [bp-3A4h]@63
  int v109; // [sp+1A0h] [bp-3A0h]@59
  int v110; // [sp+1A4h] [bp-39Ch]@55
  int v111; // [sp+1A8h] [bp-398h]@51
  int v112; // [sp+1ACh] [bp-394h]@47
  int v113; // [sp+1B0h] [bp-390h]@43
  int v114; // [sp+1B4h] [bp-38Ch]@39
  int v115; // [sp+1B8h] [bp-388h]@35
  int v116; // [sp+1BCh] [bp-384h]@31
  int v117; // [sp+1C0h] [bp-380h]@27
  int v118; // [sp+1C4h] [bp-37Ch]@23
  int v119; // [sp+1C8h] [bp-378h]@19
  int v120; // [sp+1CCh] [bp-374h]@15
  int v121; // [sp+1D0h] [bp-370h]@11
  int v122; // [sp+1D4h] [bp-36Ch]@7
  int v123; // [sp+1D8h] [bp-368h]@3
  int v124; // [sp+1E0h] [bp-360h]@502
  int v125; // [sp+1E4h] [bp-35Ch]@498
  int v126; // [sp+1E8h] [bp-358h]@494
  void *v127; // [sp+1ECh] [bp-354h]@490
  void *v128; // [sp+1F0h] [bp-350h]@486
  void *v129; // [sp+1F4h] [bp-34Ch]@480
  void *v130; // [sp+1F8h] [bp-348h]@474
  void *v131; // [sp+1FCh] [bp-344h]@468
  void *v132; // [sp+200h] [bp-340h]@464
  void *v133; // [sp+204h] [bp-33Ch]@460
  void *v134; // [sp+208h] [bp-338h]@456
  void *v135; // [sp+20Ch] [bp-334h]@452
  void *v136; // [sp+210h] [bp-330h]@448
  int v137; // [sp+214h] [bp-32Ch]@444
  int v138; // [sp+218h] [bp-328h]@440
  int v139; // [sp+21Ch] [bp-324h]@436
  void *v140; // [sp+220h] [bp-320h]@432
  int v141; // [sp+224h] [bp-31Ch]@428
  int v142; // [sp+228h] [bp-318h]@424
  int v143; // [sp+22Ch] [bp-314h]@420
  int v144; // [sp+230h] [bp-310h]@416
  void *v145; // [sp+234h] [bp-30Ch]@412
  void *v146; // [sp+238h] [bp-308h]@408
  void *v147; // [sp+23Ch] [bp-304h]@404
  void *v148; // [sp+240h] [bp-300h]@400
  void *v149; // [sp+244h] [bp-2FCh]@396
  void *v150; // [sp+248h] [bp-2F8h]@392
  void *v151; // [sp+24Ch] [bp-2F4h]@388
  void *v152; // [sp+250h] [bp-2F0h]@384
  void *v153; // [sp+254h] [bp-2ECh]@380
  void *v154; // [sp+258h] [bp-2E8h]@376
  void *v155; // [sp+25Ch] [bp-2E4h]@372
  void *v156; // [sp+260h] [bp-2E0h]@368
  void *v157; // [sp+264h] [bp-2DCh]@364
  void *v158; // [sp+268h] [bp-2D8h]@360
  void *v159; // [sp+26Ch] [bp-2D4h]@356
  void *v160; // [sp+270h] [bp-2D0h]@352
  int v161; // [sp+274h] [bp-2CCh]@348
  void *v162; // [sp+278h] [bp-2C8h]@342
  void *v163; // [sp+27Ch] [bp-2C4h]@336
  void *v164; // [sp+280h] [bp-2C0h]@330
  void *v165; // [sp+284h] [bp-2BCh]@324
  int v166; // [sp+288h] [bp-2B8h]@318
  int v167; // [sp+28Ch] [bp-2B4h]@312
  int v168; // [sp+290h] [bp-2B0h]@306
  int v169; // [sp+294h] [bp-2ACh]@300
  int v170; // [sp+298h] [bp-2A8h]@294
  int v171; // [sp+29Ch] [bp-2A4h]@288
  int v172; // [sp+2A0h] [bp-2A0h]@282
  int v173; // [sp+2A4h] [bp-29Ch]@278
  int v174; // [sp+2A8h] [bp-298h]@274
  int v175; // [sp+2ACh] [bp-294h]@270
  int v176; // [sp+2B0h] [bp-290h]@266
  int v177; // [sp+2B4h] [bp-28Ch]@262
  int v178; // [sp+2B8h] [bp-288h]@258
  int v179; // [sp+2BCh] [bp-284h]@254
  int v180; // [sp+2C0h] [bp-280h]@250
  int v181; // [sp+2C4h] [bp-27Ch]@246
  int v182; // [sp+2C8h] [bp-278h]@242
  int v183; // [sp+2CCh] [bp-274h]@238
  int v184; // [sp+2D0h] [bp-270h]@234
  int v185; // [sp+2D4h] [bp-26Ch]@230
  int v186; // [sp+2D8h] [bp-268h]@226
  int v187; // [sp+2DCh] [bp-264h]@222
  int v188; // [sp+2E0h] [bp-260h]@218
  int v189; // [sp+2E4h] [bp-25Ch]@214
  int v190; // [sp+2E8h] [bp-258h]@210
  int v191; // [sp+2ECh] [bp-254h]@206
  int v192; // [sp+2F0h] [bp-250h]@202
  int v193; // [sp+2F4h] [bp-24Ch]@198
  int v194; // [sp+2F8h] [bp-248h]@194
  int v195; // [sp+2FCh] [bp-244h]@190
  int v196; // [sp+300h] [bp-240h]@186
  int v197; // [sp+304h] [bp-23Ch]@182
  int v198; // [sp+308h] [bp-238h]@178
  int v199; // [sp+30Ch] [bp-234h]@174
  int v200; // [sp+310h] [bp-230h]@170
  int v201; // [sp+314h] [bp-22Ch]@166
  int v202; // [sp+318h] [bp-228h]@162
  int v203; // [sp+31Ch] [bp-224h]@158
  int v204; // [sp+320h] [bp-220h]@154
  int v205; // [sp+324h] [bp-21Ch]@150
  int v206; // [sp+328h] [bp-218h]@146
  int v207; // [sp+32Ch] [bp-214h]@142
  int v208; // [sp+330h] [bp-210h]@138
  int v209; // [sp+334h] [bp-20Ch]@134
  int v210; // [sp+338h] [bp-208h]@130
  int v211; // [sp+33Ch] [bp-204h]@126
  int v212; // [sp+340h] [bp-200h]@122
  int v213; // [sp+344h] [bp-1FCh]@118
  int v214; // [sp+348h] [bp-1F8h]@114
  int v215; // [sp+34Ch] [bp-1F4h]@110
  int v216; // [sp+350h] [bp-1F0h]@106
  int v217; // [sp+354h] [bp-1ECh]@102
  int v218; // [sp+358h] [bp-1E8h]@98
  int v219; // [sp+35Ch] [bp-1E4h]@94
  int v220; // [sp+360h] [bp-1E0h]@90
  int v221; // [sp+364h] [bp-1DCh]@86
  int v222; // [sp+368h] [bp-1D8h]@82
  int v223; // [sp+36Ch] [bp-1D4h]@78
  int v224; // [sp+370h] [bp-1D0h]@74
  int v225; // [sp+374h] [bp-1CCh]@70
  int v226; // [sp+378h] [bp-1C8h]@66
  int v227; // [sp+37Ch] [bp-1C4h]@62
  int v228; // [sp+380h] [bp-1C0h]@58
  int v229; // [sp+384h] [bp-1BCh]@54
  int v230; // [sp+388h] [bp-1B8h]@50
  int v231; // [sp+38Ch] [bp-1B4h]@46
  int v232; // [sp+390h] [bp-1B0h]@42
  int v233; // [sp+394h] [bp-1ACh]@38
  int v234; // [sp+398h] [bp-1A8h]@34
  int v235; // [sp+39Ch] [bp-1A4h]@30
  int v236; // [sp+3A0h] [bp-1A0h]@26
  int v237; // [sp+3A4h] [bp-19Ch]@22
  int v238; // [sp+3A8h] [bp-198h]@18
  int v239; // [sp+3ACh] [bp-194h]@14
  int v240; // [sp+3B0h] [bp-190h]@10
  int v241; // [sp+3B4h] [bp-18Ch]@6
  int v242; // [sp+3B8h] [bp-188h]@2
  int v243; // [sp+3BCh] [bp-184h]@502
  int v244; // [sp+3C0h] [bp-180h]@498
  int v245; // [sp+3C4h] [bp-17Ch]@498
  int v246; // [sp+3C8h] [bp-178h]@494
  int v247; // [sp+3CCh] [bp-174h]@494
  int v248; // [sp+3DCh] [bp-164h]@464
  int v249; // [sp+3E0h] [bp-160h]@460
  int v250; // [sp+3E4h] [bp-15Ch]@456
  int v251; // [sp+3E8h] [bp-158h]@452
  int v252; // [sp+3ECh] [bp-154h]@448
  int v253; // [sp+41Ch] [bp-124h]@282
  int v254; // [sp+420h] [bp-120h]@278
  int v255; // [sp+424h] [bp-11Ch]@270
  int v256; // [sp+428h] [bp-118h]@266
  int v257; // [sp+42Ch] [bp-114h]@262
  int v258; // [sp+430h] [bp-110h]@262
  int v259; // [sp+434h] [bp-10Ch]@258
  int v260; // [sp+438h] [bp-108h]@254
  int v261; // [sp+43Ch] [bp-104h]@250
  int v262; // [sp+440h] [bp-100h]@246
  int v263; // [sp+444h] [bp-FCh]@242
  int v264; // [sp+448h] [bp-F8h]@238
  int v265; // [sp+44Ch] [bp-F4h]@234
  int v266; // [sp+450h] [bp-F0h]@230
  int v267; // [sp+454h] [bp-ECh]@226
  int v268; // [sp+458h] [bp-E8h]@222
  int v269; // [sp+45Ch] [bp-E4h]@218
  int v270; // [sp+460h] [bp-E0h]@214
  int v271; // [sp+464h] [bp-DCh]@210
  int v272; // [sp+468h] [bp-D8h]@206
  int v273; // [sp+46Ch] [bp-D4h]@202
  int v274; // [sp+470h] [bp-D0h]@198
  int v275; // [sp+474h] [bp-CCh]@194
  int v276; // [sp+478h] [bp-C8h]@190
  int v277; // [sp+47Ch] [bp-C4h]@186
  int v278; // [sp+480h] [bp-C0h]@182
  int v279; // [sp+484h] [bp-BCh]@178
  int v280; // [sp+488h] [bp-B8h]@178
  int v281; // [sp+48Ch] [bp-B4h]@174
  int v282; // [sp+490h] [bp-B0h]@170
  int v283; // [sp+494h] [bp-ACh]@166
  int v284; // [sp+498h] [bp-A8h]@162
  int v285; // [sp+49Ch] [bp-A4h]@158
  int v286; // [sp+4A0h] [bp-A0h]@154
  int v287; // [sp+4A4h] [bp-9Ch]@150
  int v288; // [sp+4A8h] [bp-98h]@146
  int v289; // [sp+4ACh] [bp-94h]@146
  int v290; // [sp+4B0h] [bp-90h]@142
  int v291; // [sp+4B4h] [bp-8Ch]@138
  int v292; // [sp+4B8h] [bp-88h]@134
  int v293; // [sp+4BCh] [bp-84h]@130
  int v294; // [sp+4C0h] [bp-80h]@130
  int v295; // [sp+4C4h] [bp-7Ch]@126
  int v296; // [sp+4C8h] [bp-78h]@122
  int v297; // [sp+4CCh] [bp-74h]@118
  int v298; // [sp+4D0h] [bp-70h]@114
  int v299; // [sp+4D4h] [bp-6Ch]@110
  int v300; // [sp+4D8h] [bp-68h]@106
  int v301; // [sp+4DCh] [bp-64h]@106
  int v302; // [sp+4E0h] [bp-60h]@102
  int v303; // [sp+4E4h] [bp-5Ch]@102
  int v304; // [sp+4E8h] [bp-58h]@98
  int v305; // [sp+4ECh] [bp-54h]@78
  int v306; // [sp+4F0h] [bp-50h]@74
  int v307; // [sp+4F4h] [bp-4Ch]@70
  int v308; // [sp+4F8h] [bp-48h]@66
  int v309; // [sp+4FCh] [bp-44h]@54
  int v310; // [sp+500h] [bp-40h]@50
  int v311; // [sp+504h] [bp-3Ch]@46
  int v312; // [sp+508h] [bp-38h]@42
  int v313; // [sp+50Ch] [bp-34h]@38
  int v314; // [sp+510h] [bp-30h]@26
  int v315; // [sp+514h] [bp-2Ch]@22
  int v316; // [sp+518h] [bp-28h]@18
  int v317; // [sp+51Ch] [bp-24h]@14
  int v318; // [sp+520h] [bp-20h]@14
  int v319; // [sp+524h] [bp-1Ch]@10
  int v320; // [sp+528h] [bp-18h]@6
  int v321; // [sp+52Ch] [bp-14h]@6
  int v322; // [sp+530h] [bp-10h]@2
  __int32 v323; // [sp+534h] [bp-Ch]@1
  void *v324; // [sp+53Ch] [bp-4h]@1

  v324 = 0;
  v323 = a2;
  switch ( a1 )
  {
    case 0:
      v322 = a3;
      v242 = (int)sub_401000(0x1Cu);
      if ( v242 )
        v123 = CBuffMoveSpeed::CBuffMoveSpeed(v242, a1, 1000 * a2, v322);
      else
        v123 = 0;
      v324 = (void *)v123;
      break;
    case 1:
      v321 = a3;
      v320 = a4;
      v241 = (int)sub_401000(0x1Cu);
      if ( v241 )
        v122 = CBuffStone::CBuffStone(v241, a1, 1000 * a2, v321, v320);
      else
        v122 = 0;
      v324 = (void *)v122;
      break;
    case 2:
      v319 = a3;
      v240 = (int)sub_401000(0x1Cu);
      if ( v240 )
        v121 = CBuffMeditation::CBuffMeditation(v240, a1, 1000 * a2, v319);
      else
        v121 = 0;
      v324 = (void *)v121;
      break;
    case 3:
      v318 = a3;
      v317 = a4;
      v239 = (int)sub_401000(0x1Cu);
      if ( v239 )
        v120 = CBuffFatalChance::CBuffFatalChance(v239, a1, 1000 * a2, v318, v317);
      else
        v120 = 0;
      v324 = (void *)v120;
      break;
    case 4:
      v316 = a3;
      v238 = (int)sub_401000(0x18u);
      if ( v238 )
        v119 = CBuffRevivalSequela::CBuffRevivalSequela(v238, a1, 1000 * a2, v316);
      else
        v119 = 0;
      v324 = (void *)v119;
      break;
    case 5:
      v315 = a3;
      v237 = (int)sub_401000(0x30u);
      if ( v237 )
        v118 = CBuffPrty::CBuffPrty(v237, a1, 1000 * a2, 1, 64, 0, 27, v315, 2, v315);
      else
        v118 = 0;
      v324 = (void *)v118;
      break;
    case 6:
      v314 = a3;
      v236 = (int)sub_401000(0x30u);
      if ( v236 )
        v117 = CBuffPrty::CBuffPrty(v236, a1, 1000 * a2, 1, 128, 0, 28, v314, 2, v314);
      else
        v117 = 0;
      v324 = (void *)v117;
      break;
    case 7:
      v235 = (int)sub_401000(0x1Cu);
      if ( v235 )
        v116 = CBuffStun::CBuffStun(v235, a1, 1000 * a2, 0);
      else
        v116 = 0;
      v324 = (void *)v116;
      break;
    case 8:
      v234 = (int)sub_401000(0x1Cu);
      if ( v234 )
        v115 = CBuffMoveStop::CBuffMoveStop(v234, a1, 1000 * a2, 0);
      else
        v115 = 0;
      v324 = (void *)v115;
      break;
    case 9:
      v313 = a3;
      v233 = (int)sub_401000(0x30u);
      if ( v233 )
        v114 = CBuffPrty::CBuffPrty(v233, a1, 1000 * a2, 2, 1024, 0, 9, v313, 1, 0);
      else
        v114 = 0;
      v324 = (void *)v114;
      break;
    case 10:
      v312 = a3;
      v232 = (int)sub_401000(0x30u);
      if ( v232 )
        v113 = CBuffPrty::CBuffPrty(v232, a1, 1000 * a2, 2, 2048, 0, 11, v312, 1, 0);
      else
        v113 = 0;
      v324 = (void *)v113;
      break;
    case 11:
      v311 = a3;
      v231 = (int)sub_401000(0x20u);
      if ( v231 )
        v112 = CBuffPoison::CBuffPoison(v231, a1, 1000 * a2, v311);
      else
        v112 = 0;
      v324 = (void *)v112;
      break;
    case 12:
      v310 = a3;
      v230 = (int)sub_401000(0x18u);
      if ( v230 )
        v111 = CBuffHaste::CBuffHaste(v230, a1, 1000 * a2, v310);
      else
        v111 = 0;
      v324 = (void *)v111;
      break;
    case 13:
      v309 = a3;
      v229 = (int)sub_401000(0x30u);
      if ( v229 )
        v110 = CBuffPrty::CBuffPrty(v229, a1, 1000 * a2, 2, 16384, 0, 37, v309, 2, 0);
      else
        v110 = 0;
      v324 = (void *)v110;
      break;
    case 14:
      v228 = (int)sub_401000(0x30u);
      if ( v228 )
        v109 = CBuffPrty::CBuffPrty(v228, a1, 1000 * a2, 2, 32768, 0, 0, 0, 0, 0);
      else
        v109 = 0;
      v324 = (void *)v109;
      break;
    case 15:
      v227 = (int)sub_401000(0x30u);
      if ( v227 )
        v108 = CBuffPrty::CBuffPrty(v227, a1, 1000 * a2, 4, 65536, 0, 0, 0, 0, 0);
      else
        v108 = 0;
      v324 = (void *)v108;
      break;
    case 18:
      v308 = a3;
      v226 = (int)sub_401000(0x18u);
      if ( v226 )
        v107 = CBuffHP::CBuffHP(v226, a1, 1000 * a2, v308);
      else
        v107 = 0;
      v324 = (void *)v107;
      break;
    case 19:
      v307 = a3;
      v225 = (int)sub_401000(0x18u);
      if ( v225 )
        v106 = CBuffMP::CBuffMP(v225, a1, 1000 * a2, v307);
      else
        v106 = 0;
      v324 = (void *)v106;
      break;
    case 20:
      v306 = a3;
      v224 = (int)sub_401000(0x30u);
      if ( v224 )
        v105 = CBuffPrty::CBuffPrty(v224, a1, 1000 * a2, 4, 4194304, 0, 17, v306, 2, 0);
      else
        v105 = 0;
      v324 = (void *)v105;
      break;
    case 21:
      v305 = a3;
      v223 = (int)sub_401000(0x30u);
      if ( v223 )
        v104 = CBuffPrty::CBuffPrty(v223, a1, 1000 * a2, 4, 8388608, 0, 9, v305, 2, 0);
      else
        v104 = 0;
      v324 = (void *)v104;
      break;
    case 22:
      v222 = (int)sub_401000(0x30u);
      if ( v222 )
        v103 = CBuffPrty::CBuffPrty(v222, a1, 1000 * a2, 4, 16777216, 0, 0, 0, 0, 0);
      else
        v103 = 0;
      v324 = (void *)v103;
      break;
    case 23:
      v221 = (int)sub_401000(0x30u);
      if ( v221 )
        v102 = CBuffPrty::CBuffPrty(v221, a1, 1000 * a2, 2, 33554432, 0, 0, 0, 0, 0);
      else
        v102 = 0;
      v324 = (void *)v102;
      break;
    case 24:
      v220 = (int)sub_401000(0x30u);
      if ( v220 )
        v101 = CBuffPrty::CBuffPrty(v220, a1, 1000 * a2, 2, 67108864, 0, 0, 0, 0, 0);
      else
        v101 = 0;
      v324 = (void *)v101;
      break;
    case 25:
      v219 = (int)sub_401000(0x30u);
      if ( v219 )
        v100 = CBuffPrty::CBuffPrty(v219, a1, 1000 * a2, 2, 134217728, 0, 0, 0, 0, 0);
      else
        v100 = 0;
      v324 = (void *)v100;
      break;
    case 26:
      v304 = a3;
      v218 = (int)sub_401000(0x1Cu);
      if ( v218 )
        v99 = CBuffSleep::CBuffSleep(v218, a1, 1000 * a2, v304);
      else
        v99 = 0;
      v324 = (void *)v99;
      break;
    case 27:
      v303 = a3;
      v302 = a4;
      v217 = (int)sub_401000(0x30u);
      if ( v217 )
        v98 = CBuffPrty::CBuffPrty(v217, a1, 1000 * a2, 2, 536870912, 0, 15, v303, 2, v302);
      else
        v98 = 0;
      v324 = (void *)v98;
      break;
    case 28:
      v301 = a3;
      v300 = a4;
      v216 = (int)sub_401000(0x1Cu);
      if ( v216 )
        v97 = sub_405FD0(v216, a1, 1000 * a2, v301, v300);
      else
        v97 = 0;
      v324 = (void *)v97;
      break;
    case 38:
      v299 = a3;
      v215 = (int)sub_401000(0x1Cu);
      if ( v215 )
        v96 = sub_406090(v215, a1, 1000 * a2, v299);
      else
        v96 = 0;
      v324 = (void *)v96;
      break;
    case 70:
      v298 = a3;
      v214 = (int)sub_401000(0x24u);
      if ( v214 )
        v95 = sub_406150(v214, a1, 1000 * a2, v298, 16, 20, 64, 0);
      else
        v95 = 0;
      v324 = (void *)v95;
      break;
    case 71:
      v297 = a3;
      v213 = (int)sub_401000(0x24u);
      if ( v213 )
        v94 = sub_406150(v213, a1, 1000 * a2, v297, 16, 19, 128, 0);
      else
        v94 = 0;
      v324 = (void *)v94;
      break;
    case 72:
      v296 = a3;
      v212 = (int)sub_401000(0x24u);
      if ( v212 )
        v93 = sub_406150(v212, a1, 1000 * a2, v296, 16, 18, 256, 0);
      else
        v93 = 0;
      v324 = (void *)v93;
      break;
    case 73:
      v295 = a3;
      v211 = (int)sub_401000(0x24u);
      if ( v211 )
        v92 = sub_406150(v211, a1, 1000 * a2, v295, 16, 9, 512, 0);
      else
        v92 = 0;
      v324 = (void *)v92;
      break;
    case 75:
      v294 = a3;
      v293 = a4;
      v210 = (int)sub_401000(0x2Cu);
      if ( v210 )
        v91 = CBuffPrtyEx::CBuffPrtyEx(v210, a1, 1000 * a2, 2, 2048, 0, 15, v294, 1, v293);
      else
        v91 = 0;
      v324 = (void *)v91;
      break;
    case 74:
      v292 = a3;
      v209 = (int)sub_401000(0x24u);
      if ( v209 )
        v90 = sub_406150(v209, a1, 1000 * a2, v292, 16, 12, 1024, 0);
      else
        v90 = 0;
      v324 = (void *)v90;
      break;
    case 29:
      v291 = a3;
      v208 = (int)sub_401000(0x1Cu);
      if ( v208 )
        v89 = CBuffSuffering::CBuffSuffering(v208, a1, 1000 * a2, v291);
      else
        v89 = 0;
      v324 = (void *)v89;
      break;
    case 36:
      v290 = a3;
      v207 = (int)sub_401000(0x18u);
      if ( v207 )
        v88 = CBuffInchantWeapon::CBuffInchantWeapon(v207, a1, 1000 * a2, v290);
      else
        v88 = 0;
      v324 = (void *)v88;
      break;
    case 37:
      v289 = a3;
      v288 = a4;
      v206 = (int)sub_401000(0x30u);
      if ( v206 )
        v87 = CBuffPrty::CBuffPrty(v206, a1, 1000 * a2, 2, 0, 2, 15, v289, 1, v288);
      else
        v87 = 0;
      v324 = (void *)v87;
      break;
    case 39:
      v287 = a3;
      v205 = (int)sub_401000(0x1Cu);
      if ( v205 )
        v86 = CBuffSpiritDmg::CBuffSpiritDmg(v205, a1, 1000 * a2, v287);
      else
        v86 = 0;
      v324 = (void *)v86;
      break;
    case 40:
      v286 = a3;
      v204 = (int)sub_401000(0x30u);
      if ( v204 )
        v85 = CBuffFlagPrty::CBuffFlagPrty(v204, a1, 1000 * a2, 1, 0, 16, 32, v286, 2, 0);
      else
        v85 = 0;
      v324 = (void *)v85;
      break;
    case 41:
      v285 = a3;
      v203 = (int)sub_401000(0x30u);
      if ( v203 )
        v84 = CBuffFlagPrty::CBuffFlagPrty(v203, a1, 1000 * a2, 1, 0, 32, 27, v285, 2, v285);
      else
        v84 = 0;
      v324 = (void *)v84;
      break;
    case 42:
      v284 = a3;
      v202 = (int)sub_401000(0x30u);
      if ( v202 )
        v83 = CBuffFlagPrty::CBuffFlagPrty(v202, a1, 1000 * a2, 1, 0, 64, 28, v284, 2, v284);
      else
        v83 = 0;
      v324 = (void *)v83;
      break;
    case 43:
      v283 = a3;
      v201 = (int)sub_401000(0x30u);
      if ( v201 )
        v82 = CBuffFlagPrty::CBuffFlagPrty(v201, a1, 1000 * a2, 1, 0, 128, 16, v283, 1, 0);
      else
        v82 = 0;
      v324 = (void *)v82;
      break;
    case 44:
      v282 = a3;
      v200 = (int)sub_401000(0x30u);
      if ( v200 )
        v81 = CBuffFlagPrty::CBuffFlagPrty(v200, a1, 1000 * a2, 1, 0, 256, 29, v282, 1, 0);
      else
        v81 = 0;
      v324 = (void *)v81;
      break;
    case 45:
      v281 = a3;
      v199 = (int)sub_401000(0x18u);
      if ( v199 )
        v80 = CBuffFlagHP::CBuffFlagHP(v199, a1, 1000 * a2, v281);
      else
        v80 = 0;
      v324 = (void *)v80;
      break;
    case 69:
      v280 = a3;
      v279 = a4;
      v198 = (int)sub_401000(0x1Cu);
      if ( v198 )
        v79 = CBuffBerserk::CBuffBerserk(v198, a1, 1000 * a2, v280, v279);
      else
        v79 = 0;
      v324 = (void *)v79;
      break;
    case 46:
      v278 = a3;
      v197 = (int)sub_401000(0x2Cu);
      if ( v197 )
        v78 = CBuffPrtyEx::CBuffPrtyEx(v197, a1, 1000 * a2, 2, 1, 0, 0, v278, 1, 0);
      else
        v78 = 0;
      v324 = (void *)v78;
      break;
    case 47:
      v277 = a3;
      v196 = (int)sub_401000(0x2Cu);
      if ( v196 )
        v77 = CBuffPrtyEx::CBuffPrtyEx(v196, a1, 1000 * a2, 2, 2, 0, 1, v277, 1, 0);
      else
        v77 = 0;
      v324 = (void *)v77;
      break;
    case 48:
      v276 = a3;
      v195 = (int)sub_401000(0x2Cu);
      if ( v195 )
        v76 = CBuffPrtyEx::CBuffPrtyEx(v195, a1, 1000 * a2, 2, 4, 0, 4, v276, 1, 0);
      else
        v76 = 0;
      v324 = (void *)v76;
      break;
    case 49:
      v275 = a3;
      v194 = (int)sub_401000(0x2Cu);
      if ( v194 )
        v75 = CBuffPrtyEx::CBuffPrtyEx(v194, a1, 1000 * a2, 2, 8, 0, 2, v275, 1, 0);
      else
        v75 = 0;
      v324 = (void *)v75;
      break;
    case 50:
      v274 = a3;
      v193 = (int)sub_401000(0x2Cu);
      if ( v193 )
        v74 = CBuffPrtyEx::CBuffPrtyEx(v193, a1, 1000 * a2, 2, 16, 0, 31, v274, 2, 0);
      else
        v74 = 0;
      v324 = (void *)v74;
      break;
    case 76:
      v273 = a3;
      v192 = (int)sub_401000(0x2Cu);
      if ( v192 )
        v73 = CBuffPrtyEx::CBuffPrtyEx(v192, a1, 1000 * a2, 2, 4096, 0, 20, v273, 1, 0);
      else
        v73 = 0;
      v324 = (void *)v73;
      break;
    case 77:
      v272 = a3;
      v191 = (int)sub_401000(0x2Cu);
      if ( v191 )
        v72 = CBuffPrtyEx::CBuffPrtyEx(v191, a1, 1000 * a2, 2, 8192, 0, 19, v272, 1, 0);
      else
        v72 = 0;
      v324 = (void *)v72;
      break;
    case 78:
      v271 = a3;
      v190 = (int)sub_401000(0x2Cu);
      if ( v190 )
        v71 = CBuffPrtyEx::CBuffPrtyEx(v190, a1, 1000 * a2, 2, 16384, 0, 18, v271, 1, 0);
      else
        v71 = 0;
      v324 = (void *)v71;
      break;
    case 79:
      v270 = a3;
      v189 = (int)sub_401000(0x2Cu);
      if ( v189 )
        v70 = CBuffPrtyEx::CBuffPrtyEx(v189, a1, 1000 * a2, 2, 32768, 0, 21, v270, 1, 0);
      else
        v70 = 0;
      v324 = (void *)v70;
      break;
    case 80:
      v269 = a3;
      v188 = (int)sub_401000(0x2Cu);
      if ( v188 )
        v69 = CBuffPrtyEx::CBuffPrtyEx(v188, a1, 1000 * a2, 2, 65536, 0, 22, v269, 1, 0);
      else
        v69 = 0;
      v324 = (void *)v69;
      break;
    case 81:
      v268 = a3;
      v187 = (int)sub_401000(0x1Cu);
      if ( v187 )
        v68 = CBuffSilenceShot::CBuffSilenceShot(v187, a1, 1000 * a2, v268);
      else
        v68 = 0;
      v324 = (void *)v68;
      break;
    case 82:
      v267 = a3;
      v186 = (int)sub_401000(0x2Cu);
      if ( v186 )
        v67 = CBuffPrtyEx::CBuffPrtyEx(v186, a1, 1000 * a2, 1, 131072, 0, 32, v267, 2, 0);
      else
        v67 = 0;
      v324 = (void *)v67;
      break;
    case 83:
      v266 = a3;
      v185 = (int)sub_401000(0x2Cu);
      if ( v185 )
        v66 = CBuffPrtyEx::CBuffPrtyEx(v185, a1, 1000 * a2, 4, 262144, 0, 38, v266, 3, 0);
      else
        v66 = 0;
      v324 = (void *)v66;
      break;
    case 84:
      v265 = a3;
      v184 = (int)sub_401000(0x1Cu);
      if ( v184 )
        v65 = CBuffManaBurn::CBuffManaBurn(v184, a1, 1000 * a2, v265);
      else
        v65 = 0;
      v324 = (void *)v65;
      break;
    case 85:
      v264 = a3;
      v183 = (int)sub_401000(0x2Cu);
      if ( v183 )
        v64 = CBuffPrtyEx::CBuffPrtyEx(v183, a1, 1000 * a2, 4, 524288, 0, 31, v264, 2, 0);
      else
        v64 = 0;
      v324 = (void *)v64;
      break;
    case 86:
      v263 = a3;
      v182 = (int)sub_401000(0x2Cu);
      if ( v182 )
        v63 = CBuffPrtyEx::CBuffPrtyEx(v182, a1, 1000 * a2, 4, 1048576, 0, 0, v263, 2, 0);
      else
        v63 = 0;
      v324 = (void *)v63;
      break;
    case 87:
      v262 = a3;
      v181 = (int)sub_401000(0x2Cu);
      if ( v181 )
        v62 = CBuffPrtyEx::CBuffPrtyEx(v181, a1, 1000 * a2, 4, 2097152, 0, 1, v262, 2, 0);
      else
        v62 = 0;
      v324 = (void *)v62;
      break;
    case 88:
      v261 = a3;
      v180 = (int)sub_401000(0x2Cu);
      if ( v180 )
        v61 = CBuffPrtyEx::CBuffPrtyEx(v180, a1, 1000 * a2, 4, 4194304, 0, 4, v261, 2, 0);
      else
        v61 = 0;
      v324 = (void *)v61;
      break;
    case 89:
      v260 = a3;
      v179 = (int)sub_401000(0x2Cu);
      if ( v179 )
        v60 = CBuffPrtyEx::CBuffPrtyEx(v179, a1, 1000 * a2, 4, 8388608, 0, 2, v260, 2, 0);
      else
        v60 = 0;
      v324 = (void *)v60;
      break;
    case 90:
      v259 = a3;
      v178 = (int)sub_401000(0x2Cu);
      if ( v178 )
        v59 = CBuffPrtyEx::CBuffPrtyEx(v178, a1, 1000 * a2, 4, 16777216, 0, 3, v259, 2, 0);
      else
        v59 = 0;
      v324 = (void *)v59;
      break;
    case 91:
      v258 = a3;
      v257 = a4;
      v177 = (int)sub_401000(0x2Cu);
      if ( v177 )
        v58 = CBuffPrtyEx::CBuffPrtyEx(v177, a1, 1000 * a2, 4, 33554432, 0, 15, v258, 2, v257);
      else
        v58 = 0;
      v324 = (void *)v58;
      break;
    case 92:
      v256 = a3;
      v176 = (int)sub_401000(0x20u);
      if ( v176 )
        v57 = CBuffPoisonCloud::CBuffPoisonCloud(v176, a1, 1000 * a2, v256);
      else
        v57 = 0;
      v324 = (void *)v57;
      break;
    case 93:
      v255 = a3;
      v175 = (int)sub_401000(0x2Cu);
      if ( v175 )
        v56 = CBuffPrtyEx::CBuffPrtyEx(v175, a1, 1000 * a2, 4, 67108864, 0, 9, v255, 2, 0);
      else
        v56 = 0;
      v324 = (void *)v56;
      break;
    case 94:
      v174 = (int)sub_401000(0x30u);
      if ( v174 )
        v55 = CBuffPrty::CBuffPrty(v174, a1, 1000 * a2, 4, 0, 8192, 0, 0, 0, 0);
      else
        v55 = 0;
      v324 = (void *)v55;
      break;
    case 95:
      v254 = a3;
      v173 = (int)sub_401000(0x30u);
      if ( v173 )
        v54 = CBuffPrty::CBuffPrty(v173, a1, 1000 * a2, 2, 0, 16384, 16, v254, 1, 0);
      else
        v54 = 0;
      v324 = (void *)v54;
      break;
    case 96:
      v253 = a3;
      v172 = (int)sub_401000(0x30u);
      if ( v172 )
        v53 = CBuffPrty::CBuffPrty(v172, a1, 1000 * a2, 2, 0, 32768, 29, v253, 1, 0);
      else
        v53 = 0;
      v324 = (void *)v53;
      break;
    case 30:
      if ( !a3 )
        v323 = a2 + time(0);
      v171 = (int)sub_401000(0x20u);
      if ( v171 )
        v52 = CBuffExpire::CBuffExpire(v171, a1, v323, 0, 2, 0, 32);
      else
        v52 = 0;
      v324 = (void *)v52;
      break;
    case 31:
      if ( !a3 )
        v323 = a2 + time(0);
      v170 = (int)sub_401000(0x20u);
      if ( v170 )
        v51 = CBuffExpire::CBuffExpire(v170, a1, v323, 0, 4, 0, 32);
      else
        v51 = 0;
      v324 = (void *)v51;
      break;
    case 32:
      if ( !a3 )
        v323 = a2 + time(0);
      v169 = (int)sub_401000(0x20u);
      if ( v169 )
        v50 = CBuffExpire::CBuffExpire(v169, a1, v323, 0, 8, 0, 32);
      else
        v50 = 0;
      v324 = (void *)v50;
      break;
    case 97:
      if ( !a3 )
        v323 = a2 + time(0);
      v168 = (int)sub_401000(0x20u);
      if ( v168 )
        v49 = CBuffExpire::CBuffExpire(v168, a1, v323, 0, 8388608, 0, 32);
      else
        v49 = 0;
      v324 = (void *)v49;
      break;
    case 98:
      if ( !a3 )
        v323 = a2 + time(0);
      v167 = (int)sub_401000(0x20u);
      if ( v167 )
        v48 = CBuffExpire::CBuffExpire(v167, a1, v323, 0, 16777216, 0, 32);
      else
        v48 = 0;
      v324 = (void *)v48;
      break;
    case 99:
      if ( !a3 )
        v323 = a2 + time(0);
      v166 = (int)sub_401000(0x20u);
      if ( v166 )
        v47 = CBuffExpire::CBuffExpire(v166, a1, v323, 0, 33554432, 0, 32);
      else
        v47 = 0;
      v324 = (void *)v47;
      break;
    case 101:
      if ( !a3 )
        v323 = a2 + time(0);
      v165 = sub_401000(0x20u);
      if ( v165 )
        v46 = CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(v165, a1, v323, 0, 134217728, 0);
      else
        v46 = 0;
      v324 = v46;
      break;
    case 33:
      if ( !a3 )
        v323 = a2 + time(0);
      v164 = sub_401000(0x20u);
      if ( v164 )
        v45 = CBuffExpireEvent::CBuffExpireEvent(v164, a1, v323, 0, 16, 0);
      else
        v45 = 0;
      v324 = v45;
      break;
    case 34:
      if ( !a3 )
        v323 = a2 + time(0);
      v163 = sub_401000(0x20u);
      if ( v163 )
        v44 = CBuffExpireEvent::CBuffExpireEvent(v163, a1, v323, 0, 32, 0);
      else
        v44 = 0;
      v324 = v44;
      break;
    case 35:
      if ( !a3 )
        v323 = a2 + time(0);
      v162 = sub_401000(0x20u);
      if ( v162 )
        v43 = CBuffExpireEvent::CBuffExpireEvent(v162, a1, v323, 0, 64, 0);
      else
        v43 = 0;
      v324 = v43;
      break;
    case 102:
      if ( !a3 )
        v323 = a2 + time(0);
      v161 = (int)sub_401000(0x20u);
      if ( v161 )
        v42 = CBuffExpire::CBuffExpire(v161, a1, v323, 0, 268435456, 0, 128);
      else
        v42 = 0;
      v324 = (void *)v42;
      break;
    case 16:
      v160 = sub_401000(0x20u);
      if ( v160 )
        v41 = sub_4065D0(v160, a1, a2, 0, 128, 0, 64);
      else
        v41 = 0;
      v324 = v41;
      break;
    case 17:
      v159 = sub_401000(0x20u);
      if ( v159 )
        v40 = sub_4065D0(v159, a1, a2, 0, 256, 0, 64);
      else
        v40 = 0;
      v324 = v40;
      break;
    case 51:
      v158 = sub_401000(0x20u);
      if ( v158 )
        v39 = sub_4065D0(v158, a1, a2, 0, 512, 0, 32);
      else
        v39 = 0;
      v324 = v39;
      break;
    case 52:
      v157 = sub_401000(0x20u);
      if ( v157 )
        v38 = sub_4065D0(v157, a1, a2, 0, 1024, 0, 32);
      else
        v38 = 0;
      v324 = v38;
      break;
    case 53:
      v156 = sub_401000(0x20u);
      if ( v156 )
        v37 = CBuffRemainXBlow::CBuffRemainXBlow(v156, a1, a2, 0, 2048, 0);
      else
        v37 = 0;
      v324 = v37;
      break;
    case 54:
      v155 = sub_401000(0x20u);
      if ( v155 )
        v36 = CBuffRemainXBlow::CBuffRemainXBlow(v155, a1, a2, 0, 4096, 0);
      else
        v36 = 0;
      v324 = v36;
      break;
    case 55:
      v154 = sub_401000(0x20u);
      if ( v154 )
        v35 = sub_4065D0(v154, a1, a2, 0, 8192, 0, 32);
      else
        v35 = 0;
      v324 = v35;
      break;
    case 56:
      v153 = sub_401000(0x20u);
      if ( v153 )
        v34 = sub_4065D0(v153, a1, a2, 0, 16384, 0, 32);
      else
        v34 = 0;
      v324 = v34;
      break;
    case 57:
      v152 = sub_401000(0x20u);
      if ( v152 )
        v33 = sub_4065D0(v152, a1, a2, 0, 32768, 0, 32);
      else
        v33 = 0;
      v324 = v33;
      break;
    case 58:
      v151 = sub_401000(0x20u);
      if ( v151 )
        v32 = CBuffRemainCount::CBuffRemainCount(v151, a1, a2, 0, 65536, 0);
      else
        v32 = 0;
      v324 = v32;
      break;
    case 59:
      v150 = sub_401000(0x20u);
      if ( v150 )
        v31 = CBuffRemainCount::CBuffRemainCount(v150, a1, a2, 0, 131072, 0);
      else
        v31 = 0;
      v324 = v31;
      break;
    case 60:
      v149 = sub_401000(0x28u);
      if ( v149 )
        v30 = CBuffRemainPrty::CBuffRemainPrty(v149, a1, a2, 5, 0, 262144, 0);
      else
        v30 = 0;
      v324 = v30;
      break;
    case 61:
      v148 = sub_401000(0x28u);
      if ( v148 )
        v29 = CBuffRemainPrty::CBuffRemainPrty(v148, a1, a2, 10, 1, 524288, 0);
      else
        v29 = 0;
      v324 = v29;
      break;
    case 62:
      v147 = sub_401000(0x28u);
      if ( v147 )
        v28 = CBuffRemainPrty::CBuffRemainPrty(v147, a1, a2, 5, 2, 1048576, 0);
      else
        v28 = 0;
      v324 = v28;
      break;
    case 63:
      v146 = sub_401000(0x28u);
      if ( v146 )
        v27 = CBuffRemainPrty::CBuffRemainPrty(v146, a1, a2, 10, 3, 2097152, 0);
      else
        v27 = 0;
      v324 = v27;
      break;
    case 64:
      v145 = sub_401000(0x28u);
      if ( v145 )
        v26 = CBuffRemainPrty::CBuffRemainPrty(v145, a1, a2, 5, 4, 4194304, 0);
      else
        v26 = 0;
      v324 = v26;
      break;
    case 65:
      v144 = (int)sub_401000(0x20u);
      if ( v144 )
        v25 = CBuffRemainDead::CBuffRemainDead(v144, a1, a2, 0, 0, 256);
      else
        v25 = 0;
      v324 = (void *)v25;
      break;
    case 66:
      v143 = (int)sub_401000(0x20u);
      if ( v143 )
        v24 = CBuffRemainDeadEx::CBuffRemainDeadEx(v143, a1, a2, 0, 32);
      else
        v24 = 0;
      v324 = (void *)v24;
      break;
    case 67:
      v142 = (int)sub_401000(0x20u);
      if ( v142 )
        v23 = CBuffRemainDeadEx::CBuffRemainDeadEx(v142, a1, a2, 0, 64);
      else
        v23 = 0;
      v324 = (void *)v23;
      break;
    case 68:
      v141 = (int)sub_401000(0x20u);
      if ( v141 )
        v22 = CBuffRemainDeadEx::CBuffRemainDeadEx(v141, a1, a2, 0, 128);
      else
        v22 = 0;
      v324 = (void *)v22;
      break;
    case 100:
      v140 = sub_401000(0x20u);
      if ( v140 )
        v21 = CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(v140, a1, a2, 0, 67108864, 0);
      else
        v21 = 0;
      v324 = v21;
      break;
    case 103:
      v139 = (int)sub_401000(0x28u);
      if ( v139 )
        v20 = CBuffRemainPet::CBuffRemainPet(v139, a1, 1);
      else
        v20 = 0;
      v324 = (void *)v20;
      break;
    case 104:
      v138 = (int)sub_401000(0x20u);
      if ( v138 )
        v19 = CBuffRemainEx::CBuffRemainEx(v138, a1, a2, 0, 256, 1);
      else
        v19 = 0;
      v324 = (void *)v19;
      break;
    case 105:
      v137 = (int)sub_401000(0x20u);
      if ( v137 )
        v18 = CBuffHydrochloricAcid::CBuffHydrochloricAcid(v137, a1, 4000, 800);
      else
        v18 = 0;
      v324 = (void *)v18;
      break;
    case 106:
      v252 = a3;
      v136 = sub_401000(0x28u);
      if ( v136 )
        v17 = CBuffRemainPrty::CBuffRemainPrty(v136, a1, a2, v252, 0, 0, 2);
      else
        v17 = 0;
      v324 = v17;
      break;
    case 107:
      v251 = a3;
      v135 = sub_401000(0x28u);
      if ( v135 )
        v16 = CBuffRemainPrty::CBuffRemainPrty(v135, a1, a2, v251, 1, 0, 4);
      else
        v16 = 0;
      v324 = v16;
      break;
    case 108:
      v250 = a3;
      v134 = sub_401000(0x28u);
      if ( v134 )
        v15 = CBuffRemainPrty::CBuffRemainPrty(v134, a1, a2, v250, 2, 0, 8);
      else
        v15 = 0;
      v324 = v15;
      break;
    case 109:
      v249 = a3;
      v133 = sub_401000(0x28u);
      if ( v133 )
        v14 = CBuffRemainPrty::CBuffRemainPrty(v133, a1, a2, v249, 3, 0, 16);
      else
        v14 = 0;
      v324 = v14;
      break;
    case 110:
      v248 = a3;
      v132 = sub_401000(0x28u);
      if ( v132 )
        v13 = CBuffRemainPrty::CBuffRemainPrty(v132, a1, a2, v248, 4, 0, 32);
      else
        v13 = 0;
      v324 = v13;
      break;
    case 111:
      v131 = sub_401000(0x20u);
      if ( v131 )
        v12 = sub_4065D0(v131, a1, a2, 0, 0, 64, 32);
      else
        v12 = 0;
      v324 = v12;
      break;
    case 112:
      if ( !a3 )
        v323 = a2 + time(0);
      v130 = sub_401000(0x20u);
      if ( v130 )
        v11 = CBuffExpireEvent::CBuffExpireEvent(v130, a1, v323, 0, 0, 128);
      else
        v11 = 0;
      v324 = v11;
      break;
    case 113:
      if ( !a3 )
        v323 = a2 + time(0);
      v129 = sub_401000(0x20u);
      if ( v129 )
        v10 = CBuffExpireEvent::CBuffExpireEvent(v129, a1, v323, 0, 0, 256);
      else
        v10 = 0;
      v324 = v10;
      break;
    case 114:
      if ( !a3 )
        v323 = a2 + time(0);
      v128 = sub_401000(0x20u);
      if ( v128 )
        v9 = CBuffExpireEvent::CBuffExpireEvent(v128, a1, v323, 0, 0, 512);
      else
        v9 = 0;
      v324 = v9;
      break;
    case 115:
      v127 = sub_401000(0x20u);
      if ( v127 )
        v8 = sub_4065D0(v127, a1, a2, 0, 0, 1024, 32);
      else
        v8 = 0;
      v324 = v8;
      break;
    case 116:
      v246 = a3;
      v247 = a4;
      v126 = (int)sub_401000(0x28u);
      if ( v126 )
        v7 = CBuffMixDamage::CBuffMixDamage(v126, a1, 1000 * a2, v246, v247);
      else
        v7 = 0;
      v324 = (void *)v7;
      break;
    case 117:
      v245 = a3;
      v244 = a4;
      v125 = (int)sub_401000(0x2Cu);
      if ( v125 )
        v6 = CBuffPrtyEx::CBuffPrtyEx(v125, a1, 1000 * a2, 1, 0, 131072, 15, v245, 1, v244);
      else
        v6 = 0;
      v324 = (void *)v6;
      break;
    case 118:
      v243 = a3;
      v124 = (int)sub_401000(0x2Cu);
      if ( v124 )
        v5 = CBuffPrtyEx::CBuffPrtyEx(v124, a1, 1000 * a2, 1, 0, 262144, 32, v243, 2, 0);
      else
        v5 = 0;
      v324 = (void *)v5;
      break;
    default:
      sub_4328C0("CBuff::CreateBuff() Invalid Buff Type.(Buff:%d)", a1);
      break;
  }
  return v324;
}

//----- (00405C60) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::CBuffMoveSpeed(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B467C;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B467C: using guessed type int (__stdcall *off_4B467C[3])(int);

//----- (00405CA0) --------------------------------------------------------
int __thiscall CBuff::CBuff(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST00_4@1

  v6 = this;
  *(_DWORD *)this = off_4B4630;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = a3 + GetTickCount();
  *(_DWORD *)(v6 + 12) = a4;
  *(_DWORD *)(v6 + 16) = a5;
  *(_DWORD *)(v6 + 20) = 0;
  return v6;
}
// 4B4630: using guessed type int (__stdcall *off_4B4630[3])(int);

//----- (00405CF0) --------------------------------------------------------
int __thiscall CBuffStone::CBuffStone(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST10_4@1

  v6 = this;
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)v6 = off_4B4698;
  *(_DWORD *)(v6 + 24) = a5;
  return v6;
}
// 4B4698: using guessed type int (__stdcall *off_4B4698[3])(int);

//----- (00405D30) --------------------------------------------------------
int __thiscall CBuffMeditation::CBuffMeditation(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)v5 = off_4B46B4;
  *(_DWORD *)(v5 + 24) = GetTickCount() + 4000;
  return v5;
}
// 4B46B4: using guessed type int (__stdcall *off_4B46B4[3])(int);

//----- (00405D70) --------------------------------------------------------
int __thiscall CBuffFatalChance::CBuffFatalChance(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST10_4@1

  v6 = this;
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)v6 = off_4B46D0;
  *(_DWORD *)(v6 + 24) = a5;
  return v6;
}
// 4B46D0: using guessed type int (__stdcall *off_4B46D0[3])(int);

//----- (00405DB0) --------------------------------------------------------
int __thiscall CBuffRevivalSequela::CBuffRevivalSequela(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)v5 = off_4B46EC;
  return v5;
}
// 4B46EC: using guessed type int (__stdcall *off_4B46EC[3])(int);

//----- (00405DE0) --------------------------------------------------------
int __thiscall CBuffStun::CBuffStun(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B4708;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B4708: using guessed type int (__stdcall *off_4B4708[3])(int);

//----- (00405E20) --------------------------------------------------------
int __thiscall CBuffMoveStop::CBuffMoveStop(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B4724;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B4724: using guessed type int (__stdcall *off_4B4724[3])(int);

//----- (00405E60) --------------------------------------------------------
int __thiscall CBuffPoison::CBuffPoison(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B4740;
  *(_DWORD *)(v5 + 24) = 0;
  *(_DWORD *)(v5 + 28) = GetTickCount() + 2000;
  return v5;
}
// 4B4740: using guessed type int (__stdcall *off_4B4740[3])(int);

//----- (00405EB0) --------------------------------------------------------
int __thiscall CBuffPoisonCloud::CBuffPoisonCloud(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B475C;
  *(_DWORD *)(v5 + 24) = 0;
  *(_DWORD *)(v5 + 28) = GetTickCount() + 2000;
  return v5;
}
// 4B475C: using guessed type int (__stdcall *off_4B475C[3])(int);

//----- (00405F00) --------------------------------------------------------
int __thiscall CBuffHaste::CBuffHaste(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)v5 = off_4B4778;
  return v5;
}
// 4B4778: using guessed type int (__stdcall *off_4B4778[3])(int);

//----- (00405F30) --------------------------------------------------------
int __thiscall CBuffHP::CBuffHP(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)v5 = off_4B4794;
  return v5;
}
// 4B4794: using guessed type int (__stdcall *off_4B4794[3])(int);

//----- (00405F60) --------------------------------------------------------
int __thiscall CBuffMP::CBuffMP(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)v5 = off_4B47B0;
  return v5;
}
// 4B47B0: using guessed type int (__stdcall *off_4B47B0[3])(int);

//----- (00405F90) --------------------------------------------------------
int __thiscall CBuffSleep::CBuffSleep(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B47CC;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B47CC: using guessed type int (__stdcall *off_4B47CC[3])(int);

//----- (00405FD0) --------------------------------------------------------
int __thiscall sub_405FD0(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST10_4@1

  v6 = this;
  CBuff::CBuff(this, a2, a3, a4, 16);
  *(_DWORD *)v6 = off_4B47E8;
  *(_DWORD *)(v6 + 24) = a5;
  return v6;
}
// 4B47E8: using guessed type int (__stdcall *off_4B47E8[3])(int);

//----- (00406010) --------------------------------------------------------
void *__thiscall CBuffCTDefensePer::Copy(void *this)
{
  void *v2; // [sp+0h] [bp-Ch]@2
  void *v3; // [sp+4h] [bp-8h]@1
  int v4; // [sp+8h] [bp-4h]@1

  v3 = this;
  v4 = (int)sub_401000(0x1Cu);
  if ( v4 )
    v2 = CBuffCTDefensePer::CBuffCTDefensePer(v4, v3);
  else
    v2 = 0;
  return v2;
}

//----- (00406050) --------------------------------------------------------
void *__thiscall CBuffCTDefensePer::CBuffCTDefensePer(int this, const void *a2)
{
  void *v3; // ST0C_4@1

  v3 = (void *)this;
  sub_402550(this);
  *(_DWORD *)v3 = off_4B47E8;
  memcpy(v3, a2, 0x1Cu);
  return v3;
}
// 4B47E8: using guessed type int (__stdcall *off_4B47E8[3])(int);

//----- (00406090) --------------------------------------------------------
int __thiscall sub_406090(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 16);
  *(_DWORD *)v5 = off_4B4804;
  *(_DWORD *)(v5 + 24) = GetTickCount() + 3000;
  return v5;
}
// 4B4804: using guessed type int (__stdcall *off_4B4804[3])(int);

//----- (004060D0) --------------------------------------------------------
void *__thiscall CBuffCTHealing::Copy(void *this)
{
  void *v2; // [sp+0h] [bp-Ch]@2
  void *v3; // [sp+4h] [bp-8h]@1
  int v4; // [sp+8h] [bp-4h]@1

  v3 = this;
  v4 = (int)sub_401000(0x1Cu);
  if ( v4 )
    v2 = CBuffCTHealing::CBuffCTHealing(v4, v3);
  else
    v2 = 0;
  return v2;
}

//----- (00406110) --------------------------------------------------------
void *__thiscall CBuffCTHealing::CBuffCTHealing(int this, const void *a2)
{
  void *v3; // ST0C_4@1

  v3 = (void *)this;
  sub_402550(this);
  *(_DWORD *)v3 = off_4B4804;
  memcpy(v3, a2, 0x1Cu);
  return v3;
}
// 4B4804: using guessed type int (__stdcall *off_4B4804[3])(int);

//----- (00406150) --------------------------------------------------------
int __thiscall sub_406150(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v9; // ST10_4@1

  v9 = this;
  CBuff::CBuff(this, a2, a3, a4, a5);
  *(_DWORD *)v9 = off_4B4820;
  *(_DWORD *)(v9 + 28) = a6;
  *(_DWORD *)(v9 + 32) = a7;
  *(_DWORD *)(v9 + 24) = a8;
  return v9;
}
// 4B4820: using guessed type int (__stdcall *off_4B4820[3])(int);

//----- (004061A0) --------------------------------------------------------
void *__thiscall CBuffCTPrtyPtEx::Copy(void *this)
{
  void *v2; // [sp+0h] [bp-Ch]@2
  void *v3; // [sp+4h] [bp-8h]@1
  int v4; // [sp+8h] [bp-4h]@1

  v3 = this;
  v4 = (int)sub_401000(0x24u);
  if ( v4 )
    v2 = CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(v4, v3);
  else
    v2 = 0;
  return v2;
}

//----- (004061E0) --------------------------------------------------------
void *__thiscall CBuffCTPrtyPtEx::CBuffCTPrtyPtEx(int this, const void *a2)
{
  void *v3; // ST0C_4@1

  v3 = (void *)this;
  sub_402550(this);
  *(_DWORD *)v3 = off_4B4820;
  memcpy(v3, a2, 0x24u);
  return v3;
}
// 4B4820: using guessed type int (__stdcall *off_4B4820[3])(int);

//----- (00406220) --------------------------------------------------------
int __thiscall CBuffSuffering::CBuffSuffering(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B483C;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B483C: using guessed type int (__stdcall *off_4B483C[3])(int);

//----- (00406260) --------------------------------------------------------
int __thiscall CBuffInchantWeapon::CBuffInchantWeapon(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)v5 = off_4B4858;
  return v5;
}
// 4B4858: using guessed type int (__stdcall *off_4B4858[3])(int);

//----- (00406290) --------------------------------------------------------
int __thiscall CBuffSpiritDmg::CBuffSpiritDmg(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B4874;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B4874: using guessed type int (__stdcall *off_4B4874[3])(int);

//----- (004062D0) --------------------------------------------------------
int __thiscall CBuffFlagPrty::CBuffFlagPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int v11; // ST10_4@1

  v11 = this;
  CBuff::CBuff(this, a2, a3, a8, a4);
  *(_DWORD *)v11 = off_4B4890;
  *(_DWORD *)(v11 + 24) = a9;
  *(_DWORD *)(v11 + 32) = a7;
  *(_DWORD *)(v11 + 40) = a5;
  *(_DWORD *)(v11 + 44) = a6;
  *(_DWORD *)(v11 + 28) = a10;
  return v11;
}
// 4B4890: using guessed type int (__stdcall *off_4B4890[3])(int);

//----- (00406330) --------------------------------------------------------
int __thiscall CBuffFlagHP::CBuffFlagHP(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 1);
  *(_DWORD *)v5 = off_4B48AC;
  return v5;
}
// 4B48AC: using guessed type int (__stdcall *off_4B48AC[3])(int);

//----- (00406360) --------------------------------------------------------
int __thiscall CBuffBerserk::CBuffBerserk(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST10_4@1

  v6 = this;
  CBuff::CBuff(this, a2, a3, a4, 2);
  *(_DWORD *)v6 = off_4B48C8;
  *(_DWORD *)(v6 + 24) = a5;
  return v6;
}
// 4B48C8: using guessed type int (__stdcall *off_4B48C8[3])(int);

//----- (004063A0) --------------------------------------------------------
int __thiscall CBuffSilenceShot::CBuffSilenceShot(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B48E4;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B48E4: using guessed type int (__stdcall *off_4B48E4[3])(int);

//----- (004063E0) --------------------------------------------------------
int __thiscall CBuffManaBurn::CBuffManaBurn(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B4900;
  *(_DWORD *)(v5 + 24) = 0;
  return v5;
}
// 4B4900: using guessed type int (__stdcall *off_4B4900[3])(int);

//----- (00406420) --------------------------------------------------------
int __thiscall CBuffPrty::CBuffPrty(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int v11; // ST10_4@1

  v11 = this;
  CBuff::CBuff(this, a2, a3, a8, a4);
  *(_DWORD *)v11 = off_4B491C;
  *(_DWORD *)(v11 + 24) = 0;
  *(_DWORD *)(v11 + 28) = a9;
  *(_DWORD *)(v11 + 36) = a7;
  *(_DWORD *)(v11 + 40) = a5;
  *(_DWORD *)(v11 + 44) = a6;
  *(_DWORD *)(v11 + 32) = a10;
  return v11;
}
// 4B491C: using guessed type int (__stdcall *off_4B491C[3])(int);

//----- (00406490) --------------------------------------------------------
int __thiscall CBuffPrtyEx::CBuffPrtyEx(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int v11; // ST10_4@1

  v11 = this;
  CBuff::CBuff(this, a2, a3, a8, a4);
  *(_DWORD *)v11 = off_4B4938;
  *(_DWORD *)(v11 + 24) = 0;
  *(_DWORD *)(v11 + 28) = a9;
  *(_DWORD *)(v11 + 36) = a7;
  *(_DWORD *)(v11 + 40) = a5;
  *(_DWORD *)(v11 + 32) = a10;
  return v11;
}
// 4B4938: using guessed type int (__stdcall *off_4B4938[3])(int);

//----- (004064F0) --------------------------------------------------------
int __thiscall CBuffExpire::CBuffExpire(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v8; // ST00_4@1

  v8 = this;
  sub_402550(this);
  *(_DWORD *)v8 = off_4B4954;
  *(_DWORD *)(v8 + 4) = a2;
  *(_DWORD *)(v8 + 8) = a3;
  *(_DWORD *)(v8 + 12) = a4;
  *(_DWORD *)(v8 + 24) = a5;
  *(_DWORD *)(v8 + 28) = a6;
  *(_DWORD *)(v8 + 16) = a7;
  return v8;
}
// 4B4954: using guessed type int (__stdcall *off_4B4954[3])(int);

//----- (00406550) --------------------------------------------------------
void *__thiscall CBuffExpireEvent::CBuffExpireEvent(void *this, int a2, int a3, int a4, int a5, int a6)
{
  void *v7; // ST18_4@1

  v7 = this;
  CBuffExpire::CBuffExpire((int)this, a2, a3, a4, a5, a6, 128);
  *(_DWORD *)v7 = off_4B4970;
  return v7;
}
// 4B4970: using guessed type int (__stdcall *off_4B4970[3])(int);

//----- (00406590) --------------------------------------------------------
void *__thiscall CBuffExpireLuckyStone2::CBuffExpireLuckyStone2(void *this, int a2, int a3, int a4, int a5, int a6)
{
  void *v7; // ST18_4@1

  v7 = this;
  CBuffExpire::CBuffExpire((int)this, a2, a3, a4, a5, a6, 32);
  *(_DWORD *)v7 = off_4B498C;
  return v7;
}
// 4B498C: using guessed type int (__stdcall *off_4B498C[3])(int);

//----- (004065D0) --------------------------------------------------------
void *__thiscall sub_4065D0(void *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  void *v8; // ST00_4@1

  v8 = this;
  sub_402550((int)this);
  *(_DWORD *)v8 = off_4B49A8;
  *((_DWORD *)v8 + 1) = a2;
  *((_DWORD *)v8 + 2) = a3;
  *((_DWORD *)v8 + 3) = a4;
  *((_DWORD *)v8 + 6) = a5;
  *((_DWORD *)v8 + 7) = a6;
  *((_DWORD *)v8 + 4) = a7;
  return v8;
}
// 4B49A8: using guessed type int (__stdcall *off_4B49A8[3])(int);

//----- (00406630) --------------------------------------------------------
int __thiscall CBuffRemainEx::CBuffRemainEx(int this, int a2, int a3, int a4, int a5, int a6)
{
  int v7; // ST00_4@1

  v7 = this;
  CBuffRemain::CBuffRemain(this);
  *(_DWORD *)v7 = off_4B49C4;
  *(_DWORD *)(v7 + 4) = a2;
  *(_DWORD *)(v7 + 8) = a3;
  *(_DWORD *)(v7 + 12) = a4;
  *(_DWORD *)(v7 + 24) = a5;
  *(_DWORD *)(v7 + 16) = a6;
  return v7;
}
// 4B49C4: using guessed type int (__stdcall *off_4B49C4[3])(int);

//----- (00406680) --------------------------------------------------------
int __thiscall CBuffRemain::CBuffRemain(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_402550(this);
  *(_DWORD *)v2 = off_4B49A8;
  return v2;
}
// 4B49A8: using guessed type int (__stdcall *off_4B49A8[3])(int);

//----- (004066A0) --------------------------------------------------------
int __thiscall CBuffRemainDead::CBuffRemainDead(int this, int a2, int a3, int a4, int a5, int a6)
{
  int v7; // ST00_4@1

  v7 = this;
  CBuffRemain::CBuffRemain(this);
  *(_DWORD *)v7 = off_4B49E0;
  *(_DWORD *)(v7 + 4) = a2;
  *(_DWORD *)(v7 + 8) = a3;
  *(_DWORD *)(v7 + 12) = a4;
  *(_DWORD *)(v7 + 24) = a5;
  *(_DWORD *)(v7 + 16) = a6;
  return v7;
}
// 4B49E0: using guessed type int (__stdcall *off_4B49E0[3])(int);

//----- (004066F0) --------------------------------------------------------
int __thiscall CBuffRemainDeadEx::CBuffRemainDeadEx(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST14_4@1

  v6 = this;
  CBuffRemainDead::CBuffRemainDead(this, a2, a3, a4, a5, 256);
  *(_DWORD *)v6 = off_4B49FC;
  return v6;
}
// 4B49FC: using guessed type int (__stdcall *off_4B49FC[3])(int);

//----- (00406730) --------------------------------------------------------
void *__thiscall CBuffRemainXBlow::CBuffRemainXBlow(void *this, int a2, int a3, int a4, int a5, int a6)
{
  void *v7; // ST18_4@1

  v7 = this;
  sub_4065D0(this, a2, a3, a4, a5, a6, 32);
  *(_DWORD *)v7 = off_4B4A18;
  return v7;
}
// 4B4A18: using guessed type int (__stdcall *off_4B4A18[3])(int);

//----- (00406770) --------------------------------------------------------
void *__thiscall CBuffRemainPrty::CBuffRemainPrty(void *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  void *v8; // ST18_4@1

  v8 = this;
  sub_4065D0(this, a2, a3, a4, a6, a7, 32);
  *(_DWORD *)v8 = off_4B4A34;
  *((_DWORD *)v8 + 8) = a5;
  return v8;
}
// 4B4A34: using guessed type int (__stdcall *off_4B4A34[3])(int);

//----- (004067B0) --------------------------------------------------------
void *__thiscall CBuffRemainCount::CBuffRemainCount(void *this, int a2, int a3, int a4, int a5, int a6)
{
  void *v7; // ST18_4@1

  v7 = this;
  sub_4065D0(this, a2, a3, a4, a5, a6, 32);
  *(_DWORD *)v7 = off_4B4A50;
  return v7;
}
// 4B4A50: using guessed type int (__stdcall *off_4B4A50[3])(int);

//----- (004067F0) --------------------------------------------------------
void *__thiscall CBuffRemainLuckyStone1::CBuffRemainLuckyStone1(void *this, int a2, int a3, int a4, int a5, int a6)
{
  void *v7; // ST18_4@1

  v7 = this;
  sub_4065D0(this, a2, a3, a4, a5, a6, 1);
  *(_DWORD *)v7 = off_4B4A6C;
  return v7;
}
// 4B4A6C: using guessed type int (__stdcall *off_4B4A6C[3])(int);

//----- (00406830) --------------------------------------------------------
int __thiscall CBuffRemainPet::CBuffRemainPet(int this, int a2, int a3)
{
  int v4; // ST00_4@1

  v4 = this;
  CBuffRemain::CBuffRemain(this);
  *(_DWORD *)v4 = off_4B4A88;
  *(_DWORD *)(v4 + 4) = a2;
  *(_DWORD *)(v4 + 16) = a3;
  *(_DWORD *)(v4 + 8) = 7200;
  *(_DWORD *)(v4 + 12) = 0;
  *(_DWORD *)(v4 + 32) = 0;
  return v4;
}
// 4B4A88: using guessed type int (__stdcall *off_4B4A88[3])(int);

//----- (00406890) --------------------------------------------------------
signed int __stdcall CBuffRemainPet::SetBuff(int a1)
{
  return 1;
}

//----- (004068B0) --------------------------------------------------------
int __thiscall CBuffHydrochloricAcid::CBuffHydrochloricAcid(int this, int a2, int a3, int a4)
{
  int v5; // ST10_4@1

  v5 = this;
  CBuff::CBuff(this, a2, a3, a4, 4);
  *(_DWORD *)v5 = off_4B4AA4;
  *(_DWORD *)(v5 + 24) = 0;
  *(_DWORD *)(v5 + 28) = 0;
  return v5;
}
// 4B4AA4: using guessed type int (__stdcall *off_4B4AA4[3])(int);

//----- (00406900) --------------------------------------------------------
int __thiscall CBuffMixDamage::CBuffMixDamage(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST00_4@1

  v6 = this;
  sub_402550(this);
  *(_DWORD *)v6 = off_4B4AC0;
  *(_DWORD *)(v6 + 4) = a2;
  *(_DWORD *)(v6 + 8) = a3 + GetTickCount();
  *(_DWORD *)(v6 + 12) = a5;
  *(_DWORD *)(v6 + 24) = a4;
  *(_DWORD *)(v6 + 36) = a3;
  *(_DWORD *)(v6 + 16) = 1;
  *(_DWORD *)(v6 + 20) = 0;
  return v6;
}
// 4B4AC0: using guessed type int (__stdcall *off_4B4AC0[3])(int);

//----- (00406970) --------------------------------------------------------
signed int __stdcall CSkill::CanExcuteM(int a1, int a2)
{
  return 1;
}

//----- (00406990) --------------------------------------------------------
bool __thiscall CBuff::IsExpired(void *this, int a2)
{
  bool result; // eax@1
  void *v3; // ST00_4@1
  DWORD v4; // eax@1
  int v5; // edx@1
  char v6; // zf@1

  v3 = this;
  v4 = GetTickCount();
  v5 = *((_DWORD *)v3 + 2) - v4;
  v6 = *((_DWORD *)v3 + 2) == v4;
  result = v5 < 0;
  LOBYTE(result) = v5 < 0 | v6;
  return result;
}

//----- (004069C0) --------------------------------------------------------
signed int __thiscall CBuffMoveSpeed::ApplyBuff(void *this, int a2)
{
  void *v3; // ST10_4@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 2, 0);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 1, *((_DWORD *)v3 + 3));
  return 1;
}

//----- (00406A00) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::FreeBuff(int this, int a2)
{
  int v3; // ST10_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 0, *(_DWORD *)(this + 12));
  *(_DWORD *)(v3 + 12) = 0;
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 2, 0);
}

//----- (00406A40) --------------------------------------------------------
signed int __thiscall CBuffMoveSpeed::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 2i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 2, 0);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  *(_DWORD *)(a3 + 260) -= *((_DWORD *)v4 + 3);
  *((_DWORD *)v4 + 3) = *(_DWORD *)(a2 + 12);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 96))(a3, 32, 1, *((_DWORD *)v4 + 3));
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00406BA0) --------------------------------------------------------
__int64 __thiscall CChar::IsMState(int this, __int64 a2)
{
  return a2 & *(_QWORD *)(this + 288);
}

//----- (00406BD0) --------------------------------------------------------
int __thiscall CBuffMoveSpeed::IsExpired(void *this, int a2)
{
  int result; // eax@2
  void *v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CChar::IsMState(a2, 2i64) )
  {
    if ( CBuff::IsExpired(v3, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v3 + 8))(v3, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00406C20) --------------------------------------------------------
signed int __thiscall CBuffStone::ApplyBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 16, 1, *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    15,
    1,
    *(_DWORD *)(v3 + 24),
    *(_DWORD *)(v3 + 24));
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 4, 0);
  return 1;
}

//----- (00406C80) --------------------------------------------------------
int __thiscall CBuffStone::FreeBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 16, 0, *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    15,
    0,
    *(_DWORD *)(v3 + 24),
    *(_DWORD *)(v3 + 24));
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 4, 0);
}

//----- (00406CE0) --------------------------------------------------------
signed int __stdcall CBuffMeditation::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 8, 0);
  return 1;
}

//----- (00406D10) --------------------------------------------------------
int __stdcall CBuffMeditation::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 8, 0);
}

//----- (00406D30) --------------------------------------------------------
bool __thiscall CBuffMeditation::IsExpired(void *this, int a2)
{
  int v2; // esi@4
  int v4; // [sp+4h] [bp-10h]@5
  void *v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@4
  DWORD v7; // [sp+10h] [bp-4h]@1

  v5 = this;
  v7 = GetTickCount();
  if ( v7 >= *((_DWORD *)v5 + 6) )
  {
    if ( CChar::IsNormal(a2) )
    {
      if ( *(_DWORD *)(a2 + 276) < CChar::GetMaxMP(a2) )
      {
        v2 = *((_DWORD *)v5 + 3) * CChar::GetWis(a2) / 15;
        v6 = sub_406E10(0, *((_DWORD *)v5 + 3) + 1) + v2;
        if ( v6 >= 5 * *((_DWORD *)v5 + 3) + 5 )
          v4 = 5 * *((_DWORD *)v5 + 3) + 5;
        else
          v4 = v6;
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 1, v4);
      }
    }
    *((_DWORD *)v5 + 6) = v7 + 4000;
  }
  return CBuff::IsExpired(v5, a2);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);

//----- (00406E10) --------------------------------------------------------
unsigned int __cdecl sub_406E10(unsigned int a1, signed int a2)
{
  unsigned int result; // eax@2

  if ( (signed int)a1 >= a2 )
    result = a1;
  else
    result = a1 + sub_496C80() % (a2 - a1 + 1);
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (00406E40) --------------------------------------------------------
signed int __thiscall CBuffFatalChance::ApplyBuff(int this, int a2)
{
  int v3; // ST10_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 31, 1, *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 1, *(_DWORD *)(v3 + 24));
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 16, 0);
  return 1;
}

//----- (00406EA0) --------------------------------------------------------
int __thiscall CBuffFatalChance::FreeBuff(int this, int a2)
{
  int v3; // ST10_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 31, 0, *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 0, *(_DWORD *)(v3 + 24));
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 16, 0);
}

//----- (00406EF0) --------------------------------------------------------
signed int __thiscall CBuffRevivalSequela::ApplyBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    27,
    1,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    28,
    1,
    *(_DWORD *)(v3 + 12),
    *(_DWORD *)(v3 + 12));
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 32, 0);
  return 1;
}

//----- (00406F60) --------------------------------------------------------
int __thiscall CBuffRevivalSequela::FreeBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    27,
    0,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    28,
    0,
    *(_DWORD *)(v3 + 12),
    *(_DWORD *)(v3 + 12));
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 32, 0);
}

//----- (00406FC0) --------------------------------------------------------
signed int __thiscall CBuffRevivalSequela::UpdateBuff(int this, int a2, int a3)
{
  *(_DWORD *)(this + 8) = *(_DWORD *)(a2 + 8);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (00407010) --------------------------------------------------------
signed int __thiscall CBuffStun::ApplyBuff(void *this, int a2)
{
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 256, 0);
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
  {
    *(_DWORD *)(a2 + 468) = *((_DWORD *)v3 + 2);
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 228))(a2, *((_DWORD *)v3 + 2), 1);
  }
  return 1;
}

//----- (00407080) --------------------------------------------------------
int __stdcall CBuffStun::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 256, 0);
}

//----- (004070A0) --------------------------------------------------------
signed int __thiscall CBuffStun::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-20h]@1
  DWORD v5; // [sp+2Ch] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 256i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 256, 0);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a3 + 64))(a3) )
  {
    *(_DWORD *)(a3 + 468) = *((_DWORD *)v4 + 2);
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 228))(a3, *((_DWORD *)v4 + 2), 1);
  }
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00407200) --------------------------------------------------------
int __thiscall CBuffStun::IsExpired(void *this, int a2)
{
  int result; // eax@2
  void *v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CChar::IsMState(a2, 256i64) )
  {
    if ( CBuff::IsExpired(v3, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v3 + 8))(v3, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00407260) --------------------------------------------------------
signed int __thiscall CBuffMoveStop::ApplyBuff(void *this, int a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 228))(a2, *((_DWORD *)v3 + 2), 1);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 512, 0);
  return 1;
}

//----- (004072B0) --------------------------------------------------------
int __stdcall CBuffMoveStop::FreeBuff(int a1)
{
  DWORD v1; // eax@2

  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a1 + 64))(a1) )
  {
    v1 = GetTickCount();
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 228))(a1, v1, 1);
  }
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 512, 0);
}

//----- (00407300) --------------------------------------------------------
signed int __thiscall CBuffMoveStop::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 512i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 512, 0);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a3 + 64))(a3) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 228))(a3, *((_DWORD *)v4 + 2), 1);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00407440) --------------------------------------------------------
int __thiscall CBuffMoveStop::IsExpired(void *this, int a2)
{
  int result; // eax@2
  void *v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CChar::IsMState(a2, 512i64) )
  {
    if ( CBuff::IsExpired(v3, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v3 + 8))(v3, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004074A0) --------------------------------------------------------
signed int __stdcall CBuffPoison::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 4096, 0);
  return 1;
}

//----- (004074D0) --------------------------------------------------------
int __stdcall CBuffPoison::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 4096, 0);
}

//----- (004074F0) --------------------------------------------------------
signed int __thiscall CBuffPoison::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 4096i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 4096, 0);
  *((_DWORD *)v4 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00407620) --------------------------------------------------------
int __userpurge CBuffPoison::IsExpired<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  int v6; // [sp+0h] [bp-18h]@6
  void *v7; // [sp+Ch] [bp-Ch]@1
  DWORD v8; // [sp+14h] [bp-4h]@3

  v7 = a1;
  if ( CChar::IsMState(a5, 4096i64) )
  {
    v8 = GetTickCount();
    if ( v8 >= *((_DWORD *)v7 + 7) )
    {
      if ( *(_DWORD *)(a5 + 272) > 1 )
      {
        if ( *(_DWORD *)(a5 + 272) <= *((_DWORD *)v7 + 3) )
          v6 = *(_DWORD *)(a5 + 272) - 1;
        else
          v6 = *((_DWORD *)v7 + 3);
        (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 7, 0, v6);
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 60))(a5) )
        {
          std___Mpunct_wchar_t___do_frac_digits(a5);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          CPlayer::Write(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
        }
        else
        {
          if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 64))(a5) )
            *(_DWORD *)(a5 + 472) = GetTickCount() + 20000;
        }
      }
      *((_DWORD *)v7 + 7) = v8 + 2000;
    }
    if ( CBuff::IsExpired(v7, a5) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v7 + 8))(v7, a5);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00407780) --------------------------------------------------------
signed int __stdcall CBuffPoisonCloud::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0, 4096);
  return 1;
}

//----- (004077B0) --------------------------------------------------------
int __stdcall CBuffPoisonCloud::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0, 4096);
}

//----- (004077D0) --------------------------------------------------------
signed int __thiscall CBuffPoisonCloud::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 17592186044416i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 0, 4096);
  *((_DWORD *)v4 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00407900) --------------------------------------------------------
int __userpurge CBuffPoisonCloud::IsExpired<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  int result; // eax@2
  int v6; // [sp+0h] [bp-18h]@6
  void *v7; // [sp+Ch] [bp-Ch]@1
  DWORD v8; // [sp+14h] [bp-4h]@3

  v7 = this;
  if ( CChar::IsMState(a2, 17592186044416i64) )
  {
    v8 = GetTickCount();
    if ( v8 >= *((_DWORD *)v7 + 7) )
    {
      if ( *(_DWORD *)(a2 + 272) > 1 )
      {
        if ( *(_DWORD *)(a2 + 272) <= *((_DWORD *)v7 + 3) )
          v6 = *(_DWORD *)(a2 + 272) - 1;
        else
          v6 = *((_DWORD *)v7 + 3);
        (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 7, 0, v6);
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
        {
          std___Mpunct_wchar_t___do_frac_digits(a2);
          std___Mpunct_wchar_t___do_frac_digits(a2);
          CPlayer::Write(ebx0, a3, a4, a2, 10, (unsigned int)"bbddww");
        }
        else
        {
          if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
            *(_DWORD *)(a2 + 472) = GetTickCount() + 20000;
        }
      }
      *((_DWORD *)v7 + 7) = v8 + 1000;
    }
    if ( CBuff::IsExpired(v7, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v7 + 8))(v7, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00407A40) --------------------------------------------------------
signed int __thiscall CBuffHaste::ApplyBuff(void *this, int a2)
{
  signed int result; // eax@2
  void *v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CPlayer::IsWearBuffStandard(a2) )
  {
    result = 0;
  }
  else
  {
    if ( CChar::IsMState(a2, 1i64) )
      (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 1, 0);
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 8192, 0);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 1, *((_DWORD *)v3 + 3));
    result = 1;
  }
  return result;
}

//----- (00407AC0) --------------------------------------------------------
int __thiscall CBuffHaste::FreeBuff(void *this, int a2)
{
  void *v3; // ST10_4@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 8192, 0);
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 32, 0, *((_DWORD *)v3 + 3));
}

//----- (00407B00) --------------------------------------------------------
signed int __userpurge CBuffHP::ApplyBuff<eax>(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1)
{
  if ( CChar::IsMState(a1, 1i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 1, 0);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 1048576, 0);
  CPlayer::Rest(a1, ebx0, a2, a3, 1);
  return 1;
}

//----- (00407B60) --------------------------------------------------------
int __stdcall CBuffHP::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 1048576, 0);
}

//----- (00407B80) --------------------------------------------------------
signed int __userpurge CBuffMP::ApplyBuff<eax>(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1)
{
  if ( CChar::IsMState(a1, 1i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 1, 0);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 2097152, 0);
  CPlayer::Rest(a1, ebx0, a2, a3, 1);
  return 1;
}

//----- (00407BE0) --------------------------------------------------------
int __stdcall CBuffMP::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 2097152, 0);
}

//----- (00407C00) --------------------------------------------------------
bool __thiscall CBuffMP::IsExpired(int this, int a2)
{
  int v3; // ST10_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 1, *(_DWORD *)(this + 12));
  return CBuff::IsExpired((void *)v3, a2);
}

//----- (00407C40) --------------------------------------------------------
signed int __thiscall CBuffSleep::ApplyBuff(void *this, int a2)
{
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 228))(a2, *((_DWORD *)v3 + 2), 1);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 268435456, 0);
  return 1;
}

//----- (00407C90) --------------------------------------------------------
int __stdcall CBuffSleep::FreeBuff(int a1)
{
  DWORD v1; // eax@2

  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a1 + 64))(a1) )
  {
    v1 = GetTickCount();
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 228))(a1, v1, 1);
  }
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 268435456, 0);
}

//----- (00407CE0) --------------------------------------------------------
signed int __thiscall CBuffSleep::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 268435456i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 268435456, 0);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a3 + 64))(a3) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 228))(a3, *((_DWORD *)v4 + 2), 1);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00407E20) --------------------------------------------------------
int __thiscall CBuffSleep::IsExpired(void *this, int a2)
{
  int result; // eax@2
  void *v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CChar::IsMState(a2, 268435456i64) )
  {
    if ( CBuff::IsExpired(v3, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v3 + 8))(v3, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00407E80) --------------------------------------------------------
signed int __thiscall CBuffCTDefensePer::ApplyBuff(int this, int a2)
{
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    15,
    1,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 24));
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 1073741824, 0);
  return 1;
}

//----- (00407ED0) --------------------------------------------------------
int __thiscall CBuffCTDefensePer::FreeBuff(int this, int a2)
{
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    15,
    0,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 24));
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 1073741824, 0);
}

//----- (00407F10) --------------------------------------------------------
signed int __stdcall CBuffCTHealing::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0, 4);
  return 1;
}

//----- (00407F40) --------------------------------------------------------
int __stdcall CBuffCTHealing::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0, 4);
}

//----- (00407F60) --------------------------------------------------------
int __thiscall CBuffCTHealing::IsExpired(void *this, int a2)
{
  int v2; // eax@4
  void *v4; // [sp+0h] [bp-8h]@1
  DWORD v5; // [sp+4h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( v5 >= *((_DWORD *)v4 + 6) )
  {
    if ( CChar::IsNormal(a2) )
    {
      if ( *(_DWORD *)(a2 + 272) < CChar::GetMaxHP(a2) )
      {
        v2 = sub_406E10(0, 6);
        (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a2 + 88))(a2, 7, 1, *((_DWORD *)v4 + 3) + v2);
      }
    }
    *((_DWORD *)v4 + 6) = v5 + 3000;
  }
  return 0;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00407FE0) --------------------------------------------------------
signed int __thiscall CBuffCTPrtyPtEx::ApplyBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    *(_DWORD *)(this + 28),
    1,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 24));
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, *(_DWORD *)(v3 + 32));
  return 1;
}

//----- (00408030) --------------------------------------------------------
int __thiscall CBuffCTPrtyPtEx::FreeBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    *(_DWORD *)(this + 28),
    0,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 24));
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 120))(a2, *(_DWORD *)(v3 + 32));
}

//----- (00408080) --------------------------------------------------------
signed int __stdcall CBuffSuffering::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, -2147483648, 0);
  return 1;
}

//----- (004080B0) --------------------------------------------------------
int __stdcall CBuffSuffering::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, -2147483648, 0);
}

//----- (004080D0) --------------------------------------------------------
signed int __thiscall CBuffSuffering::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 2147483648i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, -2147483648, 0);
  *((_DWORD *)v4 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00408200) --------------------------------------------------------
int __userpurge CBuffSuffering::IsExpired<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  int result; // eax@2
  int v6; // [sp+0h] [bp-14h]@5
  void *v7; // [sp+Ch] [bp-8h]@1

  v7 = this;
  if ( CChar::IsMState(a2, 2147483648i64) )
  {
    if ( *(_DWORD *)(a2 + 272) > 1 )
    {
      if ( *(_DWORD *)(a2 + 272) <= *((_DWORD *)v7 + 3) )
        v6 = *(_DWORD *)(a2 + 272) - 1;
      else
        v6 = *((_DWORD *)v7 + 3);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 7, 0, v6);
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a2);
        std___Mpunct_wchar_t___do_frac_digits(a2);
        CPlayer::Write(ebx0, a3, a4, a2, 10, (unsigned int)"bbddww");
      }
      else
      {
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
          *(_DWORD *)(a2 + 472) = GetTickCount() + 20000;
      }
    }
    if ( CBuff::IsExpired(v7, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v7 + 8))(v7, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00408310) --------------------------------------------------------
signed int __thiscall CBuffInchantWeapon::ApplyBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    27,
    1,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    28,
    1,
    *(_DWORD *)(v3 + 12),
    *(_DWORD *)(v3 + 12));
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(a2, 0, 1);
  return 1;
}

//----- (00408380) --------------------------------------------------------
int __thiscall CBuffInchantWeapon::FreeBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    27,
    0,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
    a2,
    28,
    0,
    *(_DWORD *)(v3 + 12),
    *(_DWORD *)(v3 + 12));
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(a2, 0, 1);
}

//----- (004083E0) --------------------------------------------------------
signed int __stdcall CBuffSpiritDmg::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0, 8);
  return 1;
}

//----- (00408410) --------------------------------------------------------
int __stdcall CBuffSpiritDmg::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0, 8);
}

//----- (00408430) --------------------------------------------------------
signed int __thiscall CBuffSpiritDmg::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 34359738368i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 0, 8);
  *((_DWORD *)v4 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00408550) --------------------------------------------------------
int __userpurge CBuffSpiritDmg::IsExpired<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  int v6; // [sp+0h] [bp-14h]@5
  void *v7; // [sp+Ch] [bp-8h]@1

  v7 = a1;
  if ( CChar::IsMState(a5, 34359738368i64) )
  {
    if ( *(_DWORD *)(a5 + 272) > 1 )
    {
      if ( *(_DWORD *)(a5 + 272) <= *((_DWORD *)v7 + 3) )
        v6 = *(_DWORD *)(a5 + 272) - 1;
      else
        v6 = *((_DWORD *)v7 + 3);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 7, 0, v6);
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 60))(a5) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CPlayer::Write(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
      }
      else
      {
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 64))(a5) )
          *(_DWORD *)(a5 + 472) = GetTickCount() + 20000;
      }
    }
    if ( CBuff::IsExpired(v7, a5) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v7 + 8))(v7, a5);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00408660) --------------------------------------------------------
signed int __thiscall CBuffFlagPrty::ApplyBuff(int this, int a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(
    a2,
    *(_DWORD *)(this + 40),
    *(_DWORD *)(this + 44));
  if ( *(_DWORD *)(v3 + 24) )
  {
    switch ( *(_DWORD *)(v3 + 24) )
    {
      case 1:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
          a2,
          *(_DWORD *)(v3 + 32),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 28));
        break;
      case 2:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
          a2,
          *(_DWORD *)(v3 + 32),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 28));
        break;
      case 3:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
          a2,
          *(_DWORD *)(v3 + 32),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 28));
        break;
    }
  }
  return 1;
}

//----- (00408730) --------------------------------------------------------
int __thiscall CBuffFlagPrty::FreeBuff(int this, int a2)
{
  int result; // eax@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(
    a2,
    *(_DWORD *)(this + 40),
    *(_DWORD *)(this + 44));
  result = v3;
  if ( *(_DWORD *)(v3 + 24) )
  {
    if ( *(_DWORD *)(v3 + 24) == 1 )
    {
      result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
                 a2,
                 *(_DWORD *)(v3 + 32),
                 0,
                 *(_DWORD *)(v3 + 12),
                 *(_DWORD *)(v3 + 28));
    }
    else
    {
      if ( *(_DWORD *)(v3 + 24) == 2 )
      {
        result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
                   a2,
                   *(_DWORD *)(v3 + 32),
                   0,
                   *(_DWORD *)(v3 + 12),
                   *(_DWORD *)(v3 + 28));
      }
      else
      {
        result = v3;
        if ( *(_DWORD *)(v3 + 24) == 3 )
          result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
                     a2,
                     *(_DWORD *)(v3 + 32),
                     0,
                     *(_DWORD *)(v3 + 12),
                     *(_DWORD *)(v3 + 28));
      }
    }
  }
  return result;
}

//----- (00408800) --------------------------------------------------------
signed int __stdcall CBuffFlagHP::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0, 512);
  return 1;
}

//----- (00408830) --------------------------------------------------------
int __stdcall CBuffFlagHP::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0, 512);
}

//----- (00408850) --------------------------------------------------------
signed int __thiscall CBuffFlagHP::UpdateBuff(int this, int a2, int a3)
{
  *(_DWORD *)(this + 12) = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(this + 8) = *(_DWORD *)(a2 + 8);
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (004088B0) --------------------------------------------------------
bool __thiscall CBuffHP::IsExpired(int this, int a2)
{
  int v3; // ST10_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 7, 1, *(_DWORD *)(this + 12));
  return CBuff::IsExpired((void *)v3, a2);
}

//----- (004088F0) --------------------------------------------------------
signed int __thiscall CBuffBerserk::ApplyBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    27,
    1,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    15,
    1,
    *(_DWORD *)(v3 + 24),
    *(_DWORD *)(v3 + 24));
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, 32);
  return 1;
}

//----- (00408960) --------------------------------------------------------
int __thiscall CBuffBerserk::FreeBuff(int this, int a2)
{
  int v3; // ST14_4@1

  v3 = this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    27,
    0,
    *(_DWORD *)(this + 12),
    *(_DWORD *)(this + 12));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
    a2,
    15,
    0,
    *(_DWORD *)(v3 + 24),
    *(_DWORD *)(v3 + 24));
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 120))(a2, 32);
}

//----- (004089C0) --------------------------------------------------------
signed int __stdcall CBuffSilenceShot::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0, 1024);
  return 1;
}

//----- (004089F0) --------------------------------------------------------
int __stdcall CBuffSilenceShot::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0, 1024);
}

//----- (00408A10) --------------------------------------------------------
signed int __thiscall CBuffSilenceShot::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 4398046511104i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 0, 1024);
  *((_DWORD *)v4 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00408B40) --------------------------------------------------------
int __thiscall CBuffSilenceShot::IsExpired(void *this, int a2)
{
  int result; // eax@2
  void *v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CChar::IsMState(a2, 4398046511104i64) )
  {
    (*(void (__cdecl **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 0, *((_DWORD *)v3 + 3));
    if ( CBuff::IsExpired(v3, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v3 + 8))(v3, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00408BB0) --------------------------------------------------------
signed int __stdcall CBuffManaBurn::ApplyBuff(int a1)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 104))(a1, 0, 2048);
  return 1;
}

//----- (00408BE0) --------------------------------------------------------
int __stdcall CBuffManaBurn::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 124))(a1, 0, 2048);
}

//----- (00408C00) --------------------------------------------------------
signed int __thiscall CBuffManaBurn::UpdateBuff(void *this, int a2, int a3)
{
  void *v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@1

  v4 = this;
  v5 = GetTickCount();
  if ( *((_DWORD *)v4 + 6) < 5 )
  {
    ++*((_DWORD *)v4 + 6);
  }
  else
  {
    if ( *((_DWORD *)v4 + 2) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *((_DWORD *)v4 + 6) = 0;
  }
  if ( !CChar::IsMState(a3, 8796093022208i64) )
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 104))(a3, 0, 2048);
  *((_DWORD *)v4 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v4 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v4 + 2) -= dword_4D8CE4[*((_DWORD *)v4 + 6)] * (*((_DWORD *)v4 + 2) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00408D30) --------------------------------------------------------
int __thiscall CBuffManaBurn::IsExpired(void *this, int a2)
{
  int result; // eax@2
  void *v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CChar::IsMState(a2, 8796093022208i64) )
  {
    (*(void (__cdecl **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 0, *((_DWORD *)v3 + 3));
    if ( CBuff::IsExpired(v3, a2) )
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v3 + 8))(v3, a2);
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00408DA0) --------------------------------------------------------
signed int __thiscall CBuffPrty::ApplyBuff(int this, int a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 104))(
    a2,
    *(_DWORD *)(this + 40),
    *(_DWORD *)(this + 44));
  if ( *(_DWORD *)(v3 + 28) )
  {
    switch ( *(_DWORD *)(v3 + 28) )
    {
      case 1:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
          a2,
          *(_DWORD *)(v3 + 36),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 32));
        break;
      case 2:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
          a2,
          *(_DWORD *)(v3 + 36),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 32));
        break;
      case 3:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
          a2,
          *(_DWORD *)(v3 + 36),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 32));
        break;
    }
  }
  return 1;
}

//----- (00408E70) --------------------------------------------------------
int __thiscall CBuffPrty::FreeBuff(int this, int a2)
{
  int result; // eax@1
  __int64 v3; // qax@1
  int v4; // [sp+8h] [bp-4h]@1

  v4 = this;
  v3 = CChar::IsMState(a2, *(_QWORD *)(this + 40));
  result = HIDWORD(v3) | v3;
  if ( result )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 124))(
      a2,
      *(_DWORD *)(v4 + 40),
      *(_DWORD *)(v4 + 44));
    result = v4;
    if ( *(_DWORD *)(v4 + 28) )
    {
      if ( *(_DWORD *)(v4 + 28) == 1 )
      {
        result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
                   a2,
                   *(_DWORD *)(v4 + 36),
                   0,
                   *(_DWORD *)(v4 + 12),
                   *(_DWORD *)(v4 + 32));
      }
      else
      {
        if ( *(_DWORD *)(v4 + 28) == 2 )
        {
          result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
                     a2,
                     *(_DWORD *)(v4 + 36),
                     0,
                     *(_DWORD *)(v4 + 12),
                     *(_DWORD *)(v4 + 32));
        }
        else
        {
          result = v4;
          if ( *(_DWORD *)(v4 + 28) == 3 )
            result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
                       a2,
                       *(_DWORD *)(v4 + 36),
                       0,
                       *(_DWORD *)(v4 + 12),
                       *(_DWORD *)(v4 + 32));
        }
      }
    }
  }
  return result;
}

//----- (00408F60) --------------------------------------------------------
int __thiscall CBuffPrty::UpdateBuff(int this, int a2, int a3)
{
  int v4; // [sp+10h] [bp-1Ch]@1
  DWORD v5; // [sp+28h] [bp-4h]@2

  v4 = this;
  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::UpdateBuff(a2, a3);
  v5 = GetTickCount();
  if ( *(_DWORD *)(v4 + 24) < 5 )
  {
    ++*(_DWORD *)(v4 + 24);
  }
  else
  {
    if ( *(_DWORD *)(v4 + 8) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *(_DWORD *)(v4 + 24) = 0;
  }
  if ( !CChar::IsMState(a3, *(_QWORD *)(v4 + 40)) )
  {
    *(_DWORD *)(v4 + 12) = *(_DWORD *)(a2 + 12);
    *(_DWORD *)(v4 + 32) = *(_DWORD *)(a2 + 32);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 4))(v4, a3);
  }
  *(_DWORD *)(v4 + 8) = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(v4 + 8) -= dword_4D8CE4[*(_DWORD *)(v4 + 24)] * (*(_DWORD *)(v4 + 8) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (004090C0) --------------------------------------------------------
int __thiscall CBuff::IsPrty(int this, int a2)
{
  return a2 & *(_DWORD *)(this + 16);
}

//----- (004090E0) --------------------------------------------------------
bool __thiscall CBuffPrty::IsExpired(int this, int a2)
{
  bool result; // eax@3
  int v3; // [sp+8h] [bp-4h]@1

  v3 = this;
  if ( CBuff::IsPrty(this, 4) )
  {
    if ( CChar::IsMState(a2, *(_QWORD *)(v3 + 40)) )
    {
      if ( CBuff::IsExpired((void *)v3, a2) )
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 8))(v3, a2);
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = CBuff::IsExpired((void *)v3, a2);
  }
  return result;
}

//----- (00409160) --------------------------------------------------------
signed int __thiscall CBuffPrtyEx::ApplyBuff(int this, int a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, *(_DWORD *)(this + 40));
  if ( *(_DWORD *)(v3 + 28) )
  {
    switch ( *(_DWORD *)(v3 + 28) )
    {
      case 1:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
          a2,
          *(_DWORD *)(v3 + 36),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 32));
        break;
      case 2:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
          a2,
          *(_DWORD *)(v3 + 36),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 32));
        break;
      case 3:
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
          a2,
          *(_DWORD *)(v3 + 36),
          1,
          *(_DWORD *)(v3 + 12),
          *(_DWORD *)(v3 + 32));
        break;
    }
  }
  return 1;
}

//----- (00409230) --------------------------------------------------------
int __thiscall CBuffPrtyEx::FreeBuff(int this, int a2)
{
  int result; // eax@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  result = CChar::IsMStateEx(a2, *(_DWORD *)(this + 40));
  if ( result )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 120))(a2, *(_DWORD *)(v3 + 40));
    result = v3;
    if ( *(_DWORD *)(v3 + 28) )
    {
      if ( *(_DWORD *)(v3 + 28) == 1 )
      {
        result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
                   a2,
                   *(_DWORD *)(v3 + 36),
                   0,
                   *(_DWORD *)(v3 + 12),
                   *(_DWORD *)(v3 + 32));
      }
      else
      {
        if ( *(_DWORD *)(v3 + 28) == 2 )
        {
          result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
                     a2,
                     *(_DWORD *)(v3 + 36),
                     0,
                     *(_DWORD *)(v3 + 12),
                     *(_DWORD *)(v3 + 32));
        }
        else
        {
          result = v3;
          if ( *(_DWORD *)(v3 + 28) == 3 )
            result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
                       a2,
                       *(_DWORD *)(v3 + 36),
                       0,
                       *(_DWORD *)(v3 + 12),
                       *(_DWORD *)(v3 + 32));
        }
      }
    }
  }
  return result;
}

//----- (00409310) --------------------------------------------------------
int __thiscall CChar::IsMStateEx(int this, int a2)
{
  return a2 & *(_DWORD *)(this + 296);
}

//----- (00409330) --------------------------------------------------------
int __thiscall CBuffPrtyEx::UpdateBuff(int this, int a2, int a3)
{
  int v4; // [sp+8h] [bp-1Ch]@1
  DWORD v5; // [sp+20h] [bp-4h]@2

  v4 = this;
  if ( !CBuff::IsPrty(this, 4) )
    return CBuff::UpdateBuff(a2, a3);
  v5 = GetTickCount();
  if ( *(_DWORD *)(v4 + 24) < 5 )
  {
    ++*(_DWORD *)(v4 + 24);
  }
  else
  {
    if ( *(_DWORD *)(v4 + 8) + 600000 > v5 )
    {
      if ( a2 )
        std__locale__facet___scalar_deleting_destructor_(1);
      return 0;
    }
    *(_DWORD *)(v4 + 24) = 0;
  }
  if ( !CChar::IsMStateEx(a3, *(_DWORD *)(v4 + 40)) )
  {
    *(_DWORD *)(v4 + 12) = *(_DWORD *)(a2 + 12);
    *(_DWORD *)(v4 + 32) = *(_DWORD *)(a2 + 32);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 4))(v4, a3);
  }
  *(_DWORD *)(v4 + 8) = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(v4 + 8) -= dword_4D8CE4[*(_DWORD *)(v4 + 24)] * (*(_DWORD *)(v4 + 8) - v5) / 0x64;
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 1;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 4D8CE4: using guessed type int dword_4D8CE4[];

//----- (00409480) --------------------------------------------------------
bool __thiscall CBuffPrtyEx::IsExpired(int this, int a2)
{
  bool result; // eax@3
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( CBuff::IsPrty(this, 4) )
  {
    if ( CChar::IsMStateEx(a2, *(_DWORD *)(v3 + 40)) )
    {
      if ( CBuff::IsExpired((void *)v3, a2) )
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 8))(v3, a2);
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = CBuff::IsExpired((void *)v3, a2);
  }
  return result;
}

//----- (004094F0) --------------------------------------------------------
signed int __userpurge CBuffExpire::SetBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2
  time_t v6; // eax@3
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  if ( (unsigned int)time(0) <= *(_DWORD *)(a1 + 8) )
  {
    v6 = time(0);
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 108))(
      a5,
      *(_DWORD *)(v7 + 24),
      *(_DWORD *)(v7 + 28),
      *(_DWORD *)(v7 + 8) - v6);
    result = 1;
  }
  else
  {
    CDBSocket::Write(a2, a3, a4, 25, (unsigned int)"dbdb");
    result = 0;
  }
  return result;
}

//----- (00409570) --------------------------------------------------------
signed int __userpurge CBuffExpire::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST18_4@1
  time_t v7; // eax@1

  v6 = a1;
  v7 = time(0);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 108))(
    a5,
    *(_DWORD *)(v6 + 24),
    *(_DWORD *)(v6 + 28),
    *(_DWORD *)(v6 + 8) - v7);
  CDBSocket::Write(a2, a3, a4, 25, (unsigned int)"dbdb");
  return 1;
}

//----- (004095E0) --------------------------------------------------------
bool __thiscall CBuffExpire::IsExpired(int this, int a2)
{
  return *(_DWORD *)(this + 8) < (unsigned int)time(0);
}

//----- (00409610) --------------------------------------------------------
signed int __thiscall CBuffExpireEvent::ApplyBuff(void *this, int a2)
{
  void *v3; // ST14_4@1
  time_t v4; // eax@1

  v3 = this;
  v4 = time(0);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 108))(
    a2,
    *((_DWORD *)v3 + 6),
    *((_DWORD *)v3 + 7),
    *((_DWORD *)v3 + 2) - v4);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 1, 10, 10);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 28, 1, 10, 10);
  return 1;
}

//----- (00409680) --------------------------------------------------------
int __thiscall CBuffExpireEvent::FreeBuff(int this, int a2)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 128))(
    a2,
    *(_DWORD *)(this + 24),
    *(_DWORD *)(this + 28));
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 0, 10, 10);
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 28, 0, 10, 10);
}

//----- (004096E0) --------------------------------------------------------
signed int __userpurge CBuffExpireLuckyStone2::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2
  int v6; // [sp+8h] [bp-4h]@1

  v6 = a1;
  if ( CChar::IsBState(a5, 67108864i64) )
    result = 0;
  else
    result = CBuffExpire::ApplyBuff(v6, a2, a3, a4, a5);
  return result;
}

//----- (00409720) --------------------------------------------------------
__int64 __thiscall CChar::IsBState(int this, __int64 a2)
{
  return a2 & *(_QWORD *)(this + 304);
}

//----- (00409750) --------------------------------------------------------
signed int __thiscall CBuffRemain::SetBuff(int this, int a2)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 108))(
    a2,
    *(_DWORD *)(this + 24),
    *(_DWORD *)(this + 28),
    *(_DWORD *)(this + 8));
  return 1;
}

//----- (00409780) --------------------------------------------------------
signed int __userpurge CBuffRemain::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 108))(
    a5,
    *(_DWORD *)(a1 + 24),
    *(_DWORD *)(a1 + 28),
    *(_DWORD *)(a1 + 8));
  CDBSocket::Write(a2, a3, a4, 25, (unsigned int)"dbdb");
  return 1;
}

//----- (004097E0) --------------------------------------------------------
void __userpurge CBuffExpire::FreeBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 128))(a5, *(_DWORD *)(a1 + 24), *(_DWORD *)(a1 + 28));
  CDBSocket::Write(a2, a3, a4, 25, (unsigned int)"dbdb");
}

//----- (00409830) --------------------------------------------------------
signed int __userpurge CBuffRemain::IsExpired<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2

  --*(_DWORD *)(a1 + 8);
  if ( *(_DWORD *)(a1 + 8) )
  {
    if ( !(*(_DWORD *)(a1 + 8) % 0x3Cu) )
      CDBSocket::Write(a2, a3, a4, 25, (unsigned int)"dbdb");
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (004098A0) --------------------------------------------------------
void __userpurge CBuffRemain::SaveRemain(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  CDBSocket::Write(a1, a2, a3, 25, (unsigned int)"dbdb");
}

//----- (004098E0) --------------------------------------------------------
signed int __thiscall CBuffRemainEx::SetBuff(int this, int a2)
{
  CChar::AddGState(a2, *(_DWORD *)(this + 24));
  return 1;
}

//----- (00409910) --------------------------------------------------------
LONG __thiscall CChar::AddGState(int this, int a2)
{
  return InterlockedExchange((volatile LONG *)(this + 280), a2 | *(_DWORD *)(this + 280));
}

//----- (00409940) --------------------------------------------------------
signed int __userpurge CBuffRemainEx::ApplyBuff<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 100))(a2, *(_DWORD *)(this + 24));
  CDBSocket::Write(ebx0, a3, a4, 25, (unsigned int)"dbdb");
  return 1;
}

//----- (00409990) --------------------------------------------------------
void __userpurge CBuffRemainEx::FreeBuff(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 112))(a2, *(_DWORD *)(this + 24));
  CDBSocket::Write(ebx0, a3, a4, 25, (unsigned int)"dbdb");
}

//----- (004099E0) --------------------------------------------------------
signed int __thiscall CBuffRemainDead::SetBuff(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  CChar::AddGState(a2, 2);
  *(_DWORD *)(a2 + 1448) = 1000 * *((_DWORD *)v3 + 2) + GetTickCount();
  *(_DWORD *)(a2 + 1452) = 1000 * *((_DWORD *)v3 + 2) + GetTickCount();
  return 1;
}

//----- (00409A40) --------------------------------------------------------
signed int __userpurge CBuffRemainDead::ApplyBuff<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  CDBSocket::Write(a1, a2, a3, 25, (unsigned int)"dbdb");
  return 1;
}

//----- (00409A80) --------------------------------------------------------
void __userpurge CBuffRemainDead::FreeBuff(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1)
{
  CDBSocket::Write(ebx0, a2, a3, 25, (unsigned int)"dbdb");
}

//----- (00409AC0) --------------------------------------------------------
signed int __thiscall CBuffRemainDeadEx::SetBuff(int this, int a2)
{
  CPlayer::AddEState(a2, *(_DWORD *)(this + 24));
  return 1;
}

//----- (00409AF0) --------------------------------------------------------
int __thiscall CPlayer::AddEState(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 568) |= a2;
  return result;
}

//----- (00409B20) --------------------------------------------------------
signed int __userpurge CBuffRemainXBlow::ApplyBuff<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  signed int result; // eax@5
  int v6; // [sp+10h] [bp-8h]@1

  v6 = (int)this;
  if ( CChar::IsBState(a2, 4096i64) && *(_DWORD *)(v6 + 4) == 53 || CChar::IsBState(a2, 2048i64) && *(_DWORD *)(v6 + 4) == 54 )
    result = 0;
  else
    result = CBuffRemain::ApplyBuff(v6, ebx0, a3, a4, a2);
  return result;
}

//----- (00409BA0) --------------------------------------------------------
signed int __thiscall CBuffRemainPrty::SetBuff(int this, int a2)
{
  signed int result; // eax@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( CBuffRemain::SetBuff(this, a2) )
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
      a2,
      *(_DWORD *)(v3 + 32),
      1,
      *(_DWORD *)(v3 + 12));
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00409BF0) --------------------------------------------------------
signed int __userpurge CBuffRemainPrty::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( CBuffRemain::ApplyBuff(a1, a2, a3, a4, a5) )
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(
      a5,
      *(_DWORD *)(v6 + 32),
      1,
      *(_DWORD *)(v6 + 12));
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00409C40) --------------------------------------------------------
int __userpurge CBuffRemainPrty::FreeBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST10_4@1

  v6 = a1;
  CBuffExpire::FreeBuff(a1, a2, a3, a4, a5);
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(
           a5,
           *(_DWORD *)(v6 + 32),
           0,
           *(_DWORD *)(v6 + 12));
}

//----- (00409C80) --------------------------------------------------------
signed int __userpurge CBuffRemainCount::UpdateBuff<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, int a2, int a3)
{
  void *v7; // [sp+8h] [bp-14h]@1

  v7 = this;
  if ( this == (void *)a2 )
  {
    --*((_DWORD *)this + 2);
    if ( !*((_DWORD *)this + 2) )
    {
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)this + 8))(this, a3);
      return 0;
    }
    goto LABEL_11;
  }
  if ( (unsigned int)(*(_DWORD *)(a2 + 8) + *((_DWORD *)this + 2)) <= 0x2710 )
  {
    *((_DWORD *)this + 2) += *(_DWORD *)(a2 + 8);
    if ( a2 )
      std__locale__facet___scalar_deleting_destructor_(1);
LABEL_11:
    CPlayer::Write(ebx0, edi0, a4, a3, 68, (unsigned int)"bId");
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 24))(v7, a3);
    return 1;
  }
  if ( a2 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 0;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (00409D80) --------------------------------------------------------
signed int __userpurge CBuffRemainLuckyStone1::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2
  int v6; // [sp+8h] [bp-4h]@1

  v6 = a1;
  if ( CChar::IsBState(a5, 134217728i64) )
    result = 0;
  else
    result = CBuffRemain::ApplyBuff(v6, a2, a3, a4, a5);
  return result;
}

//----- (00409DC0) --------------------------------------------------------
signed int __userpurge CBuffRemainPet::ApplyBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-Ch]@4
  int v7; // [sp+4h] [bp-8h]@1
  signed int i; // [sp+8h] [bp-4h]@1

  v7 = a1;
  for ( i = 0; i <= 4; ++i )
    (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 92))(a5, i, 1, 5);
  *(_DWORD *)(v7 + 32) = sub_406E10(0, 2);
  v6 = *(_DWORD *)(v7 + 32);
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 100))(a5, 524288);
    }
    else
    {
      if ( v6 == 2 )
        (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 100))(a5, 1048576);
    }
  }
  else
  {
    (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 262144);
  }
  CPlayer::Write(a2, a3, a4, a5, 47, (unsigned int)"bb");
  return 1;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (00409E90) --------------------------------------------------------
void __userpurge CBuffRemainPet::FreeBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+4h] [bp-Ch]@4
  int v6; // [sp+8h] [bp-8h]@1
  signed int i; // [sp+Ch] [bp-4h]@1

  v6 = a1;
  for ( i = 0; i <= 4; ++i )
    (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, i, 0, 5);
  v5 = *(_DWORD *)(v6 + 32);
  if ( !v5 )
  {
    (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 112))(a5, 262144);
    goto LABEL_9;
  }
  if ( v5 == 1 )
  {
LABEL_9:
    (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 112))(a5, 524288);
    goto LABEL_10;
  }
  if ( v5 == 2 )
LABEL_10:
    (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 1048576);
  switch ( *(_DWORD *)(v6 + 12) )
  {
    case 1:
      (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 5, 0, 25);
      (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 120))(a5, 134217728);
      break;
    case 2:
      (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 6, 0, 25);
      (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 120))(a5, 268435456);
      break;
    case 3:
      (*(void (__cdecl **)(int, signed int, _DWORD, signed int, signed int))(*(_DWORD *)a5 + 96))(a5, 27, 0, 25, 25);
      (*(void (__cdecl **)(int, signed int, _DWORD, signed int, signed int))(*(_DWORD *)a5 + 96))(a5, 28, 0, 25, 25);
      (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 120))(a5, 536870912);
      break;
    case 4:
      (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 96))(a5, 15, 0, 25, 25);
      (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 120))(a5, 1073741824);
      break;
    default:
      break;
  }
  *(_DWORD *)(v6 + 12) = 0;
  CPlayer::Write(a2, a3, a4, a5, 47, (unsigned int)"bb");
}

//----- (0040A040) --------------------------------------------------------
signed int __userpurge CBuffRemainPet::IsExpired<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  signed int result; // eax@2
  int v6; // [sp+8h] [bp-4h]@1

  v6 = this;
  --*(_DWORD *)(this + 8);
  if ( *(_DWORD *)(this + 8) )
  {
    if ( *(_DWORD *)(this + 12) )
    {
      if ( *(_DWORD *)(this + 8) % 0x384u < 0x12C )
      {
        switch ( *(_DWORD *)(this + 12) )
        {
          case 1:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 5, 0, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 120))(a2, 134217728);
            break;
          case 2:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 6, 0, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 120))(a2, 268435456);
            break;
          case 3:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 0, 25, 25);
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 28, 0, 25, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 120))(a2, 536870912);
            break;
          case 4:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 15, 0, 25, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 120))(a2, 1073741824);
            break;
          default:
            break;
        }
        *(_DWORD *)(v6 + 12) = 0;
      }
    }
    else
    {
      if ( *(_DWORD *)(this + 8) % 0x384u > 0x12C )
      {
        *(_DWORD *)(this + 12) = sub_406E10(1, 4);
        switch ( *(_DWORD *)(v6 + 12) )
        {
          case 1:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 5, 1, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, 134217728);
            std___Mpunct_wchar_t___do_frac_digits(a2);
            CChar::WriteInSight(ebx0, a3, a4, a2, 73, (unsigned int)"db");
            break;
          case 2:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 6, 1, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, 268435456);
            std___Mpunct_wchar_t___do_frac_digits(a2);
            CChar::WriteInSight(ebx0, a3, a4, a2, 73, (unsigned int)"db");
            break;
          case 3:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 27, 1, 25, 25);
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 28, 1, 25, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, 536870912);
            std___Mpunct_wchar_t___do_frac_digits(a2);
            CChar::WriteInSight(ebx0, a3, a4, a2, 73, (unsigned int)"db");
            break;
          case 4:
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 15, 1, 25, 25);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, 1073741824);
            std___Mpunct_wchar_t___do_frac_digits(a2);
            CChar::WriteInSight(ebx0, a3, a4, a2, 73, (unsigned int)"db");
            break;
          default:
            break;
        }
      }
    }
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0040A330) --------------------------------------------------------
signed int __thiscall CBuffHydrochloricAcid::ApplyBuff(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 116))(a2, -2147483648);
  *((_DWORD *)v3 + 2) = GetTickCount() + 20000;
  return 1;
}

//----- (0040A370) --------------------------------------------------------
int __stdcall CBuffHydrochloricAcid::FreeBuff(int a1)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a1 + 120))(a1, -2147483648);
}

//----- (0040A390) --------------------------------------------------------
signed int __userpurge CBuffHydrochloricAcid::IsExpired<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  signed int result; // eax@11
  int v6; // [sp+0h] [bp-10h]@4
  void *v7; // [sp+4h] [bp-Ch]@1
  DWORD v8; // [sp+Ch] [bp-4h]@1

  v7 = this;
  v8 = GetTickCount();
  if ( *(_DWORD *)(a2 + 272) > 1 )
  {
    if ( *((_DWORD *)v7 + 7) < v8 )
    {
      if ( *(_DWORD *)(a2 + 272) <= *((_DWORD *)v7 + 3) )
        v6 = *(_DWORD *)(a2 + 272) - 1;
      else
        v6 = *((_DWORD *)v7 + 3);
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 7, 0, v6);
      if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 60))(a2) )
      {
        CPlayer::Write(ebx0, a3, a4, a2, 69, (unsigned int)"bw");
        CPlayer::UpdatePartyMember(a2, ebx0, a3, a4, 7);
      }
      ++*((_DWORD *)v7 + 6);
      *((_DWORD *)v7 + 7) = v8 + 2500;
    }
  }
  if ( CBuff::IsExpired(v7, a2) || *((_DWORD *)v7 + 6) > 10 )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 8))(v7, a2);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0040A4A0) --------------------------------------------------------
signed int __thiscall CBuffMixDamage::ApplyBuff(void *this, int a2)
{
  void *v3; // ST00_4@1

  v3 = this;
  *((_DWORD *)v3 + 8) = *((_DWORD *)v3 + 9) + GetTickCount();
  *((_DWORD *)v3 + 2) = GetTickCount() + *((_DWORD *)v3 + 6) * *((_DWORD *)v3 + 9) + 1000;
  return 1;
}

//----- (0040A4F0) --------------------------------------------------------
signed int __userpurge CBuffMixDamage::IsExpired<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@13
  int v6; // [sp+0h] [bp-10h]@4
  int v7; // [sp+4h] [bp-Ch]@1
  DWORD v8; // [sp+Ch] [bp-4h]@1

  v7 = a1;
  v8 = GetTickCount();
  if ( *(_DWORD *)(a5 + 272) > 1 )
  {
    if ( *(_DWORD *)(v7 + 32) < v8 )
    {
      if ( *(_DWORD *)(a5 + 272) <= *(_DWORD *)(v7 + 12) )
        v6 = *(_DWORD *)(a5 + 272) - 1;
      else
        v6 = *(_DWORD *)(v7 + 12);
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 7, 0, v6);
      if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a5 + 60))(a5) )
      {
        CPlayer::Write(a2, a3, a4, a5, 69, (unsigned int)"bw");
        CPlayer::UpdatePartyMember(a5, a2, a3, a4, 7);
      }
      else
      {
        if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a5 + 64))(a5) )
          *(_DWORD *)(a5 + 472) = GetTickCount() + 20000;
      }
      --*(_DWORD *)(v7 + 24);
      *(_DWORD *)(v7 + 32) = *(_DWORD *)(v7 + 36) + v8;
    }
  }
  if ( CBuff::IsExpired((void *)v7, a5) || *(_DWORD *)(v7 + 24) < 1 )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 8))(v7, a5);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0040A620) --------------------------------------------------------
int __thiscall CCalendar::CCalendar(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B4AF8;
  return v2;
}
// 4B4AF8: using guessed type int (__stdcall *off_4B4AF8)(int);

//----- (0040A640) --------------------------------------------------------
int __thiscall CCalendar::_scalar_deleting_destructor_(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  CCalendar::_CCalendar(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0040A670) --------------------------------------------------------
int __thiscall CCalendar::_CCalendar(void *this)
{
  *(_DWORD *)this = &off_4B4AF8;
  return std__locale__facet___facet(this);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);
// 4B4AF8: using guessed type int (__stdcall *off_4B4AF8)(int);

//----- (0040A690) --------------------------------------------------------
void __usercall CCalendar::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  time_t v3; // [sp+0h] [bp-8h]@1
  struct tm *v4; // [sp+4h] [bp-4h]@1

  v3 = time(0);
  v4 = localtime(&v3);
  dword_4DA77C = v4->tm_year + 1900;
  dword_4DA780 = v4->tm_mon + 1;
  dword_4DA784 = v4->tm_mday;
  dword_4DA788 = v4->tm_hour;
  dword_4DA78C = v4->tm_min;
  dword_4DA790 = v4->tm_sec;
  dword_4DA794 = GetTickCount();
  CIOObject::AddTimer((int)&unk_4DA798, a1, a2, a3, 1000, 0);
}
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;
// 4DA784: using guessed type int dword_4DA784;
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;
// 4DA790: using guessed type int dword_4DA790;
// 4DA794: using guessed type int dword_4DA794;

//----- (0040A730) --------------------------------------------------------
int __cdecl CCalendar::GetTime()
{
  return dword_4DA78C + (dword_4DA788 << 8);
}
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;

//----- (0040A750) --------------------------------------------------------
void __userpurge CCalendar::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  CCalendar::ElapseTime(a1, a2, a3, a4);
}

//----- (0040A770) --------------------------------------------------------
void __usercall CCalendar::ElapseTime(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@29
  int v5; // [sp+4h] [bp-Ch]@1
  unsigned int v6; // [sp+Ch] [bp-4h]@3

  v5 = a1;
  if ( !dword_4DA778 )
  {
    v6 = GetTickCount();
    while ( v6 >= dword_4DA794 )
    {
      dword_4DA794 += 1000;
      ++dword_4DA790;
      if ( !(dword_4E1174[0] & 2) || *(_WORD *)dword_4E1174 & 0x2000 )
      {
        if ( !(dword_4DA790 % 30) )
          sub_47E780(a2, a3, a4);
      }
      CGuild::SecondProcess(a2, a3, a4);
      if ( dword_4DA790 >= 60 )
      {
        dword_4DA790 = 0;
        ++dword_4DA78C;
        CGuild::MinuteProcess(a2, a3, a4, v6);
        CPlayer::ScanONPKPlayer(a2, a3, a4);
        if ( dword_4E1174[0] & 2 )
        {
          if ( dword_4E1178 & 0x40 )
          {
            if ( !(dword_4DA78C % 10) )
              CPlayer::EventBuff(a2, a3, a4, 0);
          }
        }
        if ( dword_4DA78C >= 60 )
        {
          dword_4DA78C = 0;
          ++dword_4DA788;
          CPlayer::LogPlayerStatistic(a2, a4);
          if ( !(dword_4E1174[0] & 2) )
          {
            if ( dword_4E1178 & 0x40 )
            {
              if ( dword_4DA788 == 1 || dword_4DA788 == 12 || dword_4DA788 == 20 )
                CPlayer::EventBuff(a2, a3, a4, 0);
            }
          }
          if ( dword_4DA788 >= 24 )
          {
            dword_4DA788 = 0;
            ++dword_4DA784;
            if ( CCalendar::IsIntercalary() )
              v4 = 29;
            else
              v4 = dword_4D52FC[dword_4DA780];
            if ( dword_4DA784 > v4 )
            {
              dword_4DA784 = 1;
              ++dword_4DA780;
              if ( dword_4DA780 > 12 )
              {
                dword_4DA780 = 1;
                ++dword_4DA77C;
              }
            }
          }
        }
      }
    }
    CIOObject::AddTimer(v5, a2, a3, a4, dword_4DA794 - v6, 0);
  }
}
// 4D52FC: using guessed type int dword_4D52FC[];
// 4DA778: using guessed type int dword_4DA778;
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;
// 4DA784: using guessed type int dword_4DA784;
// 4DA788: using guessed type int dword_4DA788;
// 4DA78C: using guessed type int dword_4DA78C;
// 4DA790: using guessed type int dword_4DA790;
// 4DA794: using guessed type int dword_4DA794;
// 4E1178: using guessed type int dword_4E1178;

//----- (0040A990) --------------------------------------------------------
signed int __cdecl CCalendar::IsIntercalary()
{
  signed int v1; // [sp+4h] [bp-4h]@1

  v1 = 0;
  if ( dword_4DA780 == 2 )
  {
    if ( dword_4DA77C % 400 )
    {
      v1 = 1;
    }
    else
    {
      if ( dword_4DA77C % 100 )
      {
        v1 = 0;
      }
      else
      {
        if ( dword_4DA77C % 4 )
          v1 = 1;
      }
    }
  }
  return v1;
}
// 4DA77C: using guessed type int dword_4DA77C;
// 4DA780: using guessed type int dword_4DA780;

//----- (0040AA10) --------------------------------------------------------
int __thiscall CChar::CChar(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B4B10;
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v2 + 364));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v2 + 396));
  *(_DWORD *)(v2 + 352) = 0;
  *(_DWORD *)(v2 + 356) = 0;
  memset((void *)(v2 + 32), 0, 0x19u);
  *(_DWORD *)(v2 + 60) = 0;
  memset((void *)(v2 + 64), 0, 0x1Cu);
  memset((void *)(v2 + 92), 0, 0x60u);
  memset((void *)(v2 + 188), 0, 0x54u);
  *(_DWORD *)(v2 + 272) = 0;
  *(_DWORD *)(v2 + 276) = 0;
  *(_DWORD *)(v2 + 280) = 0;
  *(_DWORD *)(v2 + 288) = 0;
  *(_DWORD *)(v2 + 292) = 0;
  *(_DWORD *)(v2 + 296) = 0;
  *(_DWORD *)(v2 + 304) = 0;
  *(_DWORD *)(v2 + 308) = 0;
  *(_DWORD *)(v2 + 312) = 0;
  *(_DWORD *)(v2 + 316) = 0;
  *(_DWORD *)(v2 + 320) = 0;
  *(_DWORD *)(v2 + 328) = -1;
  *(_DWORD *)(v2 + 324) = -1;
  *(_DWORD *)(v2 + 336) = -1;
  *(_DWORD *)(v2 + 332) = -1;
  *(_DWORD *)(v2 + 340) = -1;
  *(_DWORD *)(v2 + 344) = 0;
  *(_DWORD *)(v2 + 348) = 1;
  *(_DWORD *)(v2 + 360) = 0;
  return v2;
}
// 4B4B10: using guessed type int (__stdcall *off_4B4B10)(int);

//----- (0040ABB0) --------------------------------------------------------
bool __thiscall CChar::Index(int this, int a2)
{
  return *(_DWORD *)(this + 344) == a2;
}

//----- (0040ABD0) --------------------------------------------------------
int __stdcall CMonsterSiegeGunBall::Damage(int a1, int a2, int a3, int a4, int a5, int a6)
{
  return 0;
}

//----- (0040ABE0) --------------------------------------------------------
int __thiscall CChar::AddMState(int this, int a2, int a3)
{
  int result; // eax@1
  int v4; // edx@1

  v4 = a3 | *(_DWORD *)(this + 292);
  result = this;
  *(_DWORD *)(this + 288) |= a2;
  *(_DWORD *)(this + 292) = v4;
  return result;
}

//----- (0040AC20) --------------------------------------------------------
LONG __thiscall CChar::SubGState(int this, int a2)
{
  return InterlockedExchange((volatile LONG *)(this + 280), *(_DWORD *)(this + 280) & ~a2);
}

//----- (0040AC50) --------------------------------------------------------
LONG __thiscall CChar::AddMStateEx(int this, int a2)
{
  return InterlockedExchange((volatile LONG *)(this + 296), a2 | *(_DWORD *)(this + 296));
}

//----- (0040AC80) --------------------------------------------------------
LONG __thiscall CChar::SubMStateEx(int this, int a2)
{
  return InterlockedExchange((volatile LONG *)(this + 296), *(_DWORD *)(this + 296) & ~a2);
}

//----- (0040ACB0) --------------------------------------------------------
int __thiscall CChar::SubMState(int this, int a2, int a3)
{
  int result; // eax@1
  int v4; // ST00_4@1
  int v5; // ecx@1

  v4 = this;
  result = *(_DWORD *)(this + 288) & ~a2;
  v5 = *(_DWORD *)(this + 292) & ~a3;
  *(_DWORD *)(v4 + 288) = result;
  *(_DWORD *)(v4 + 292) = v5;
  return result;
}

//----- (0040ACF0) --------------------------------------------------------
int __thiscall CChar::GetFinalDefense(void *this, int a2)
{
  void *v3; // ST04_4@1
  int v4; // eax@1

  v3 = this;
  v4 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 156))(a2);
  return CChar::GetDefense(v3, v4);
}

//----- (0040AD20) --------------------------------------------------------
int __thiscall CChar::GetFinalAbsorb(int this, int a2)
{
  return CChar::GetAbsorb(this);
}

//----- (0040AD40) --------------------------------------------------------
int __thiscall CChar::GetFinalResist(void *this, int a2, int a3)
{
  return CChar::GetResist(this, a3) / 10;
}

//----- (0040AD70) --------------------------------------------------------
signed int __stdcall CChar::GetMSpeed(int a1)
{
  return 1600;
}

//----- (0040AD90) --------------------------------------------------------
int __userpurge CChar::UpdateChild<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  return CIOObject::Release((int)this, ebx0, a3, a4);
}

//----- (0040ADB0) --------------------------------------------------------
int __userpurge CChar::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CChar::_CChar(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0040ADE0) --------------------------------------------------------
int __usercall CChar::_CChar<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4B4B10;
  CChar::DeleteAllBuff(a1, a2, a3, a4);
  CIOCriticalSection::_CIOCriticalSection(v5 + 396, a2, a3, a4);
  CIOCriticalSection::_CIOCriticalSection(v5 + 364, a2, a3, a4);
  return CBase::_CBase(v5, a2, a3, a4);
}
// 4B4B10: using guessed type int (__stdcall *off_4B4B10)(int);

//----- (0040AE20) --------------------------------------------------------
int __thiscall CChar::ReviseProperty(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // ST0C_4@1
  signed int v4; // ST08_4@1
  signed int v5; // ST14_4@1
  signed int v6; // eax@1

  v2 = this;
  *(_DWORD *)(this + 84) += 52 * *(_DWORD *)(this + 60) / 3;
  *(_DWORD *)(this + 88) += 8 * *(_DWORD *)(this + 60) + 140;
  v3 = CChar::GetStr(this);
  v4 = CChar::GetInt(v2);
  v5 = CChar::GetWis(v2);
  v6 = CChar::GetDex(v2);
  *(_DWORD *)(v2 + 120) += v6 / 8 + 15 * v3 / 54;
  *(_DWORD *)(v2 + 124) += v6 / 3;
  *(_DWORD *)(v2 + 128) += (v6 - 5) / 11 + (11 * v3 - 80) / 30 + 7 * *(_DWORD *)(v2 + 60) / 10 + 1;
  *(_DWORD *)(v2 + 132) += 18 * v6 / 77 + (8 * v3 - 25) / 15 + *(_DWORD *)(v2 + 60);
  *(_DWORD *)(v2 + 136) = v5 / 7 + (7 * v4 - 20) / 12 + *(_DWORD *)(v2 + 136) - 3;
  *(_DWORD *)(v2 + 140) = 14 * v5 / 45 + 7 * v4 / 12 + *(_DWORD *)(v2 + 140) - 3;
  *(_DWORD *)(v2 + 160) += v4 / 9;
  *(_DWORD *)(v2 + 164) += v4 / 9;
  *(_DWORD *)(v2 + 168) += v4 / 9;
  *(_DWORD *)(v2 + 172) += v5 / 9;
  result = *(_DWORD *)(v2 + 176) + CChar::GetHth(v2) / 9;
  *(_DWORD *)(v2 + 176) = result;
  return result;
}
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);

//----- (0040B060) --------------------------------------------------------
int __thiscall CChar::GetDropPt(int this, int a2)
{
  int result; // eax@3
  int v3; // [sp+0h] [bp-14h]@1
  int v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  v4 = *(_DWORD *)(this + 332) - 16;
  v5 = *(_DWORD *)(this + 336) + 16;
  v6 = *(_DWORD *)(this + 332) + 16;
  v7 = *(_DWORD *)(this + 336) - 16;
  do
  {
    do
    {
      *(_DWORD *)a2 = sub_406E10(v4, v6);
      *(_DWORD *)(a2 + 4) = sub_406E10(v7, v5);
    }
    while ( abs(*(_DWORD *)a2 - *(_DWORD *)(v3 + 332)) < 8 );
    result = abs(*(_DWORD *)(a2 + 4) - *(_DWORD *)(v3 + 336));
  }
  while ( result < 8 );
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0040B110) --------------------------------------------------------
int __thiscall CChar::SetXY(int this, int a2)
{
  int result; // eax@1
  int v3; // edx@1

  v3 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(this + 332) = *(_DWORD *)a2;
  *(_DWORD *)(this + 336) = v3;
  *(_DWORD *)(this + 324) = *(_DWORD *)a2 >> 5;
  *(_DWORD *)(this + 328) = *(_DWORD *)(a2 + 4) >> 5;
  result = this;
  *(_DWORD *)(this + 344) = ((*(_DWORD *)a2 >> 3) & 3) + 4 * ((*(_DWORD *)(a2 + 4) >> 3) & 3);
  return result;
}

//----- (0040B180) --------------------------------------------------------
void __thiscall CChar::SetDirection(void *this, int a2, int a3)
{
  void *v3; // [sp+0h] [bp-Ch]@1
  int v4; // [sp+4h] [bp-8h]@4
  int v5; // [sp+8h] [bp-4h]@4

  v3 = this;
  if ( a2 || a3 )
  {
    v4 = abs(a2);
    v5 = abs(a3);
    if ( v4 < v5 || v4 <= 127 )
    {
      if ( v4 < v5 )
      {
        if ( v5 > 127 )
        {
          a2 = 127 * a2 / v5;
          a3 = (((a3 <= 0) - 1) & 0xFE) - 127;
        }
      }
    }
    else
    {
      a3 = 127 * a3 / v4;
      a2 = (((a2 <= 0) - 1) & 0xFE) - 127;
    }
    *((_DWORD *)v3 + 87) = (unsigned __int8)a3 + (unsigned __int16)(((_WORD)a2 << 8) & 0xFF00);
  }
}

//----- (0040B240) --------------------------------------------------------
int __thiscall CChar::SetReverseDirection(int this, int a2)
{
  int result; // eax@1

  result = ((~a2 + 1) & 0xFF) + ((~a2 + 256) & 0xFF00);
  *(_DWORD *)(this + 348) = result;
  return result;
}

//----- (0040B280) --------------------------------------------------------
bool __thiscall CChar::IsNormal(int this)
{
  int v3; // [sp+Ch] [bp-4h]@1

  v3 = this;
  return *(_DWORD *)(this + 272) > 0 && !CBase::IsDeleted(this) && !CChar::IsGState(v3, 35) && !CChar::IsMState(v3, 524288i64);
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (0040B2F0) --------------------------------------------------------
int __thiscall CBase::IsDeleted(int this)
{
  return *(_DWORD *)(this + 20) & 1;
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (0040B310) --------------------------------------------------------
int __thiscall CChar::IsGState(int this, int a2)
{
  return a2 & *(_DWORD *)(this + 280);
}

//----- (0040B330) --------------------------------------------------------
void __userpurge CChar::SetBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // ST0C_4@1
  int v7; // [sp+4h] [bp-10h]@1
  void *v8; // [sp+10h] [bp-4h]@1

  v7 = a1;
  v8 = CBuff::CreateBuff(a5, a6, 1, v6);
  if ( v8 )
  {
    if ( (**(int (__thiscall ***)(void *, int))v8)(v8, v7) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 364), a2, a3, a4);
      *((_DWORD *)v8 + 5) = *(_DWORD *)(v7 + 360);
      *(_DWORD *)(v7 + 360) = v8;
      CIOCriticalSection::Leave(v7 + 364, a2, a3, a4);
    }
    else
    {
      if ( v8 )
        std__locale__facet___scalar_deleting_destructor_(1);
    }
  }
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B3D0) --------------------------------------------------------
int __userpurge CChar::AddBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  int v6; // [sp+4h] [bp-14h]@1
  int v7; // [sp+10h] [bp-8h]@4
  int v8; // [sp+14h] [bp-4h]@3

  v6 = a1;
  if ( a5 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
    v8 = CChar::_FindBuff(v6, *(_DWORD *)(a5 + 4));
    if ( v8 )
    {
      v7 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v8 + 12))(v8, a5, v6);
    }
    else
    {
      v7 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 4))(a5, v6);
      if ( v7 )
      {
        *(_DWORD *)(a5 + 20) = *(_DWORD *)(v6 + 360);
        *(_DWORD *)(v6 + 360) = a5;
      }
      else
      {
        if ( a5 )
          std__locale__facet___scalar_deleting_destructor_(1);
      }
    }
    CIOCriticalSection::Leave(v6 + 364, a2, a3, a4);
    result = v7;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B4A0) --------------------------------------------------------
int __thiscall CChar::_FindBuff(int this, int a2)
{
  int i; // [sp+4h] [bp-4h]@1

  for ( i = *(_DWORD *)(this + 360); i && *(_DWORD *)(i + 4) != a2; i = *(_DWORD *)(i + 20) )
    ;
  return i;
}

//----- (0040B4E0) --------------------------------------------------------
int __userpurge CChar::GetBuffRemain<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1
  int v8; // [sp+8h] [bp-4h]@1

  v6 = a1;
  v8 = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
  v7 = CChar::_FindBuff(v6, a5);
  if ( v7 )
    v8 = *(_DWORD *)(v7 + 8);
  CIOCriticalSection::Leave(v6 + 364, a2, a3, a4);
  return v8;
}

//----- (0040B540) --------------------------------------------------------
void __userpurge CChar::UpdateBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+4h] [bp-14h]@1
  int i; // [sp+10h] [bp-8h]@1
  int v7; // [sp+14h] [bp-4h]@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
  v7 = v5 + 360;
  for ( i = *(_DWORD *)(v5 + 360); i; i = *(_DWORD *)(i + 20) )
  {
    if ( *(_DWORD *)(i + 4) == a5 )
    {
      if ( !(*(int (__thiscall **)(int, int, int))(*(_DWORD *)i + 12))(i, i, v5) )
      {
        *(_DWORD *)v7 = *(_DWORD *)(i + 20);
        if ( i )
          std__locale__facet___scalar_deleting_destructor_(1);
      }
      break;
    }
    v7 = i + 20;
  }
  CIOCriticalSection::Leave(v5 + 364, a2, a3, a4);
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B5F0) --------------------------------------------------------
void __usercall CChar::RefreshBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-14h]@1
  int i; // [sp+10h] [bp-8h]@1
  int v6; // [sp+14h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
  v6 = v4 + 360;
  for ( i = *(_DWORD *)(v4 + 360); i; i = *(_DWORD *)v6 )
  {
    if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)i + 16))(i, v4) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)i + 8))(i, v4);
      *(_DWORD *)v6 = *(_DWORD *)(i + 20);
      if ( i )
        std__locale__facet___scalar_deleting_destructor_(1);
    }
    else
    {
      v6 = i + 20;
    }
  }
  CIOCriticalSection::Leave(v4 + 364, a2, a3, a4);
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B6A0) --------------------------------------------------------
void __userpurge CChar::CancelBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+4h] [bp-14h]@1
  int i; // [sp+10h] [bp-8h]@1
  int v7; // [sp+14h] [bp-4h]@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
  v7 = v5 + 360;
  for ( i = *(_DWORD *)(v5 + 360); i; i = *(_DWORD *)(i + 20) )
  {
    if ( *(_DWORD *)(i + 4) == a5 )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)i + 8))(i, v5);
      *(_DWORD *)v7 = *(_DWORD *)(i + 20);
      if ( i )
        std__locale__facet___scalar_deleting_destructor_(1);
      break;
    }
    v7 = i + 20;
  }
  CIOCriticalSection::Leave(v5 + 364, a2, a3, a4);
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B750) --------------------------------------------------------
void __usercall CChar::CancelAllBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-14h]@1
  int i; // [sp+10h] [bp-8h]@1
  int v6; // [sp+14h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
  v6 = v4 + 360;
  for ( i = *(_DWORD *)(v4 + 360); i; i = *(_DWORD *)v6 )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)i + 8))(i, v4);
    *(_DWORD *)v6 = *(_DWORD *)(i + 20);
    if ( i )
      std__locale__facet___scalar_deleting_destructor_(1);
  }
  CIOCriticalSection::Leave(v4 + 364, a2, a3, a4);
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B7E0) --------------------------------------------------------
void __usercall CChar::DeleteAllBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-14h]@1
  int i; // [sp+10h] [bp-8h]@1
  int v6; // [sp+14h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
  v6 = v4 + 360;
  for ( i = *(_DWORD *)(v4 + 360); i; i = *(_DWORD *)v6 )
  {
    *(_DWORD *)v6 = *(_DWORD *)(i + 20);
    if ( i )
      std__locale__facet___scalar_deleting_destructor_(1);
  }
  CIOCriticalSection::Leave(v4 + 364, a2, a3, a4);
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B870) --------------------------------------------------------
void __userpurge CChar::CancelBuffPrty(int a1<ecx>, int a2<edx>, DWORD ebx0<ebx>, DWORD a4<edi>, DWORD a5<esi>, int a3)
{
  int v6; // [sp+4h] [bp-14h]@1
  int i; // [sp+10h] [bp-8h]@1
  int v8; // [sp+14h] [bp-4h]@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), ebx0, a4, a5);
  v8 = v6 + 360;
  for ( i = *(_DWORD *)(v6 + 360); i; i = *(_DWORD *)v8 )
  {
    if ( a3 & *(_DWORD *)(i + 16) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)i + 8))(i, v6);
      *(_DWORD *)v8 = *(_DWORD *)(i + 20);
      if ( i )
        std__locale__facet___scalar_deleting_destructor_(1);
    }
    else
    {
      v8 = i + 20;
    }
  }
  CIOCriticalSection::Leave(v6 + 364, ebx0, a4, a5);
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0040B920) --------------------------------------------------------
void __usercall CChar::ResetAllBuff(int a1<ecx>, int a2<edx>, DWORD a3<ebx>, DWORD a4<edi>, DWORD a5<esi>)
{
  int v5; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a3, a4, a5);
  for ( i = *(_DWORD *)(v5 + 360); i; i = *(_DWORD *)(i + 20) )
    (**(void (__thiscall ***)(_DWORD, _DWORD))i)(i, v5);
  CIOCriticalSection::Leave(v5 + 364, a3, a4, a5);
}

//----- (0040B980) --------------------------------------------------------
void __usercall CChar::SaveAllBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 364), a2, a3, a4);
  for ( i = *(_DWORD *)(v4 + 360); i; i = *(_DWORD *)(i + 20) )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)i + 24))(i, v4);
  CIOCriticalSection::Leave(v4 + 364, a2, a3, a4);
}

//----- (0040B9E0) --------------------------------------------------------
LONG __usercall CChar::WriteInSight<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6)
{
  void *v7; // eax@1
  int v8; // ST18_4@1
  void *v9; // ST0C_4@1

  v7 = CIOBuffer::Alloc();
  v8 = (int)v7;
  v9 = v7;
  *((_BYTE *)v7 + 2) = a5;
  *(_WORD *)v9 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)v7 + 3, (int)&a6) - (_WORD)v9;
  *(_DWORD *)(v8 + 8000) = *(_WORD *)v9;
  sub_493440(*(_DWORD *)(a4 + 320), a1, a2, a3, a4 + 324, v8, 25);
  return CIOBuffer::Release(v8);
}

//----- (0040BA70) --------------------------------------------------------
LONG __usercall CChar::WriteInRect<eax>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a1, char a2, int a3, char a4)
{
  void *v8; // eax@1
  int v9; // ST18_4@1
  void *v10; // ST0C_4@1

  v8 = CIOBuffer::Alloc();
  v9 = (int)v8;
  v10 = v8;
  *((_BYTE *)v8 + 2) = a2;
  *(_WORD *)v10 = (unsigned int)sub_496CF0(ebx0, edi0, esi0, (char *)v8 + 3, (int)&a4) - (_WORD)v10;
  *(_DWORD *)(v9 + 8000) = *(_WORD *)v10;
  sub_493440(*(_DWORD *)(a1 + 320), ebx0, edi0, esi0, a1 + 324, v9, a3);
  return CIOBuffer::Release(v9);
}

//----- (0040BB00) --------------------------------------------------------
int __fastcall CConfig::CConfig(int a1, int a2)
{
  int v3; // ST00_4@1

  v3 = a1;
  std__ios_base__ios_base(a1 + 520, a2);
  *(_DWORD *)(v3 + 512) = 0;
  return v3;
}
// 40BB30: using guessed type int __fastcall std__ios_base__ios_base(_DWORD, _DWORD);

//----- (0040BB50) --------------------------------------------------------
void *__thiscall CConfig::_CConfig(int this)
{
  return CConfig::Close(this);
}

//----- (0040BB70) --------------------------------------------------------
void *__thiscall CConfig::Close(int this)
{
  int v2; // ecx@3
  int v3; // [sp-4h] [bp-10h]@3
  int v4; // [sp+0h] [bp-Ch]@1

  v4 = this;
  if ( *(_DWORD *)(this + 512) )
  {
    fclose(*(FILE **)(v4 + 512));
    *(_DWORD *)(v4 + 512) = 0;
  }
  v3 = v4 + 520;
  sub_402340(&v3, v4 + 520);
  sub_40BBE0(v3);
  v3 = v2;
  sub_402340(&v3, (int)&unk_4E1108);
  return sub_4323F0((void *)(v4 + 520), v3);
}

//----- (0040BBE0) --------------------------------------------------------
void __cdecl sub_40BBE0(int a1)
{
  int v1; // eax@2
  int v2; // ecx@2
  int v3; // eax@2
  int v4; // ecx@2
  int v5; // eax@4
  int v6; // [sp-4h] [bp-1Ch]@2
  int v7; // [sp+4h] [bp-14h]@4
  int v8; // [sp+8h] [bp-10h]@2
  int v9; // [sp+14h] [bp-4h]@4

  if ( (unsigned __int8)sub_40BCE0(&a1) )
  {
    v1 = sub_40BCA0(&a1);
    v6 = v2;
    sub_402340(&v6, v1);
    sub_40BBE0(v6);
    v3 = sub_40BCC0(&a1);
    v6 = v4;
    sub_402340(&v6, v3);
    sub_40BBE0(v6);
    v8 = a1;
    sub_401020(a1);
  }
  else
  {
    if ( (unsigned __int8)sub_40BD00(&a1) )
    {
      v9 = a1;
      v5 = (**(int (__thiscall ***)(_DWORD))a1)(a1);
      CMemory::_free(v5);
      v7 = v9;
      sub_401020(v9);
    }
    else
    {
      if ( (unsigned __int8)sub_40BD20(&a1) )
        sub_401020(a1);
    }
  }
}

//----- (0040BCA0) --------------------------------------------------------
int __thiscall sub_40BCA0(void *this)
{
  return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 12))(*(_DWORD *)this);
}

//----- (0040BCC0) --------------------------------------------------------
int __thiscall sub_40BCC0(void *this)
{
  return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 16))(*(_DWORD *)this);
}

//----- (0040BCE0) --------------------------------------------------------
int __thiscall sub_40BCE0(void *this)
{
  return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 20))(*(_DWORD *)this);
}

//----- (0040BD00) --------------------------------------------------------
int __thiscall sub_40BD00(void *this)
{
  return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 28))(*(_DWORD *)this);
}

//----- (0040BD20) --------------------------------------------------------
int __thiscall sub_40BD20(void *this)
{
  return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 32))(*(_DWORD *)this);
}

//----- (0040BD40) --------------------------------------------------------
signed int __thiscall CConfig::GetToken(void *this)
{
  signed int result; // eax@3
  int v2; // [sp+10h] [bp-14h]@4
  void *v3; // [sp+18h] [bp-Ch]@1
  int v4; // [sp+1Ch] [bp-8h]@2
  int v5; // [sp+1Ch] [bp-8h]@16
  int v6; // [sp+1Ch] [bp-8h]@18
  int v7; // [sp+1Ch] [bp-8h]@27
  int v8; // [sp+1Ch] [bp-8h]@29
  int v9; // [sp+1Ch] [bp-8h]@40
  void *v10; // [sp+20h] [bp-4h]@15
  void *v11; // [sp+20h] [bp-4h]@26
  int i; // [sp+20h] [bp-4h]@39

  v3 = this;
  while ( 2 )
  {
    v4 = fgetc(*((FILE **)v3 + 128));
    switch ( v4 + 1 )
    {
      case 0:
        return 0;
      case 60:
        do
        {
          v2 = fgetc(*((FILE **)v3 + 128));
          if ( v2 == -1 )
            return 0;
        }
        while ( v2 != 10 );
        ++*((_DWORD *)v3 + 129);
        return 3;
      case 11:
        ++*((_DWORD *)v3 + 129);
        return 3;
      case 62:
        return 4;
      case 45:
        return 5;
      case 59:
        return 6;
      case 41:
        return 7;
      case 42:
        return 8;
      case 35:
        v10 = v3;
        while ( 2 )
        {
          v5 = fgetc(*((FILE **)v3 + 128));
          switch ( v5 + 1 )
          {
            case 0:
              return 0;
            case 35:
              v6 = fgetc(*((FILE **)v3 + 128));
              if ( v6 == -1 )
              {
                *(_BYTE *)v10 = 0;
                result = 2;
              }
              else
              {
                if ( v6 == 34 )
                {
                  *(_BYTE *)v10 = 34;
                  v10 = (char *)v10 + 1;
                  continue;
                }
                ungetc_0(v6, *((FILE **)v3 + 128));
                *(_BYTE *)v10 = 0;
                result = 2;
              }
              break;
            case 14:
              continue;
            case 11:
              ++*((_DWORD *)v3 + 129);
              return 3;
            default:
              *(_BYTE *)v10 = v5;
              v10 = (char *)v10 + 1;
              continue;
          }
          break;
        }
        return result;
      case 40:
        v11 = v3;
        while ( 2 )
        {
          v7 = fgetc(*((FILE **)v3 + 128));
          switch ( v7 + 1 )
          {
            case 0:
              return 0;
            case 40:
              v8 = fgetc(*((FILE **)v3 + 128));
              if ( v8 == -1 )
              {
                *(_BYTE *)v11 = 0;
                result = 2;
              }
              else
              {
                if ( v8 == 39 )
                {
                  *(_BYTE *)v11 = 39;
                  v11 = (char *)v11 + 1;
                  continue;
                }
                ungetc_0(v8, *((FILE **)v3 + 128));
                *(_BYTE *)v11 = 0;
                result = 2;
              }
              break;
            case 14:
              continue;
            case 11:
              ++*((_DWORD *)v3 + 129);
              return 3;
            default:
              *(_BYTE *)v11 = v7;
              v11 = (char *)v11 + 1;
              continue;
          }
          break;
        }
        return result;
      case 10:
      case 14:
      case 33:
        continue;
      default:
        if ( isalnum(v4) || v4 == 45 )
        {
          *(_BYTE *)v3 = v4;
          for ( i = (int)((char *)v3 + 1); ; ++i )
          {
            v9 = fgetc(*((FILE **)v3 + 128));
            if ( v9 == -1 )
              goto LABEL_45;
            if ( !isalnum(v9) )
            {
              ungetc_0(v9, *((FILE **)v3 + 128));
LABEL_45:
              *(_BYTE *)i = 0;
              return 1;
            }
            *(_BYTE *)i = v9;
          }
        }
        return 9;
    }
  }
}

//----- (0040C1B0) --------------------------------------------------------
void *__thiscall CConfig::Find(void *this, void *a2, const char *a3)
{
  int v3; // eax@3
  int v4; // eax@3
  int v5; // eax@3
  int v7; // eax@4
  int v8; // eax@5
  const char *v9; // ecx@5
  const char *v10; // [sp-4h] [bp-10h]@3
  void *v11; // [sp+0h] [bp-Ch]@1
  char v12; // [sp+8h] [bp-4h]@1

  v11 = this;
  sub_402340(&v12, (int)((char *)this + 520));
  while ( !(unsigned __int8)sub_402380(&v12) )
  {
    v10 = a3;
    v3 = sub_40BCA0(&v12);
    v4 = sub_40BCA0((void *)v3);
    v5 = sub_402360((void *)v4);
    if ( !_stricmp((const char *)v5, v10) )
    {
      v7 = sub_40BCA0(&v12);
      sub_402340(a2, v7);
      return a2;
    }
    v8 = sub_40BCC0(&v12);
    v10 = v9;
    sub_402340(&v10, v8);
    sub_4323F0(&v12, (int)v10);
  }
  sub_402340(a2, (int)&unk_4E1108);
  return a2;
}

//----- (0040C250) --------------------------------------------------------
void *__fastcall CConfig::GetValue(int a1, int a2, void *a3)
{
  int v3; // eax@7
  void *result; // eax@9
  void *v5; // [sp+0h] [bp-10h]@7
  int v6; // [sp+4h] [bp-Ch]@1
  void *v7; // [sp+8h] [bp-8h]@6
  signed int v8; // [sp+Ch] [bp-4h]@2

  v6 = a1;
  do
    v8 = CConfig::GetToken((void *)v6);
  while ( v8 == 3 );
  if ( v8 != 1 && v8 != 2 )
  {
    if ( v8 == 7 )
    {
      CConfig::GetList((void *)v6, (int)a3, a3);
      result = a3;
    }
    else
    {
      *(_DWORD *)(v6 + 524) = v8;
      sub_402340(a3, (int)&unk_4E1108);
      result = a3;
    }
  }
  else
  {
    v7 = sub_401000(8u);
    if ( v7 )
    {
      v3 = (int)sub_40C380((const char *)v6);
      v5 = sub_40C300(v7, v3);
    }
    else
    {
      v5 = 0;
    }
    sub_446FD0(v5);
    result = a3;
  }
  return result;
}
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0040C300) --------------------------------------------------------
void *__thiscall sub_40C300(void *this, int a2)
{
  void *v3; // ST00_4@1

  v3 = this;
  std__ios_base__ios_base();
  *(_DWORD *)v3 = off_4B4BCC;
  *((_DWORD *)v3 + 1) = a2;
  return v3;
}
// 40C340: using guessed type int std__ios_base__ios_base(void);
// 4B4BCC: using guessed type int (*off_4B4BCC[40])();

//----- (0040C330) --------------------------------------------------------
_UNKNOWN *__cdecl sub_40C330()
{
  return &unk_4E1108;
}

//----- (0040C360) --------------------------------------------------------
char *__cdecl sub_40C360()
{
  return &byte_4B437D;
}

//----- (0040C380) --------------------------------------------------------
void *__cdecl sub_40C380(const char *a1)
{
  size_t v2; // eax@1
  size_t v3; // ST08_4@1
  void *v4; // eax@1

  v2 = strlen(a1);
  v3 = v2 + 1;
  v4 = CMemory::_malloc(v2 + 1);
  return memcpy(v4, a1, v3);
}

//----- (0040C3C0) --------------------------------------------------------
void *__fastcall CConfig::GetList(void *this, int edx0, void *a2)
{
  int v3; // edx@1
  void *result; // eax@3
  unsigned __int8 v5; // al@8
  int v6; // ecx@10
  int v7; // ecx@11
  int v8; // [sp-8h] [bp-30h]@11
  int v9; // [sp-4h] [bp-2Ch]@9
  void *v10; // [sp+0h] [bp-28h]@11
  void *v11; // [sp+4h] [bp-24h]@5
  void *v12; // [sp+8h] [bp-20h]@1
  void *v13; // [sp+14h] [bp-14h]@10
  void *v14; // [sp+1Ch] [bp-Ch]@4
  char v15; // [sp+20h] [bp-8h]@8
  char v16; // [sp+24h] [bp-4h]@1

  v12 = this;
  CConfig::GetValue((int)this, edx0, &v16);
  if ( (unsigned __int8)sub_402380(&v16) )
  {
    if ( *((_DWORD *)v12 + 131) == 8 )
    {
      sub_402340(a2, (int)&unk_4E1108);
      result = a2;
    }
    else
    {
      v14 = sub_401000(8u);
      if ( v14 )
        v11 = sub_40C4E0(v14, *((_DWORD *)v12 + 131));
      else
        v11 = 0;
      sub_446FD0(v11);
      result = a2;
    }
  }
  else
  {
    CConfig::GetList(v12, v3, &v15);
    v5 = sub_40BD20(&v15);
    if ( v5 )
    {
      v9 = v5;
      sub_402340(&v9, (int)&v16);
      sub_40BBE0(v9);
      sub_402340(a2, (int)&v15);
      result = a2;
    }
    else
    {
      v13 = sub_401000(0xCu);
      if ( v13 )
      {
        v9 = v6;
        sub_402340(&v9, (int)&v15);
        v8 = v7;
        sub_402340(&v8, (int)&v16);
        v10 = sub_40C510(v13, v8, v9);
      }
      else
      {
        v10 = 0;
      }
      sub_446FD0(v10);
      result = a2;
    }
  }
  return result;
}
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0040C4E0) --------------------------------------------------------
void *__thiscall sub_40C4E0(void *this, int a2)
{
  void *v3; // ST00_4@1

  v3 = this;
  std__ios_base__ios_base();
  *(_DWORD *)v3 = off_4B4C1C;
  *((_DWORD *)v3 + 1) = a2;
  return v3;
}
// 40C340: using guessed type int std__ios_base__ios_base(void);
// 4B4C1C: using guessed type int (*off_4B4C1C[20])();

//----- (0040C510) --------------------------------------------------------
void *__thiscall sub_40C510(void *this, char a2, char a3)
{
  void *v4; // ST04_4@1

  v4 = this;
  std__ios_base__ios_base();
  *(_DWORD *)v4 = off_4B4C44;
  sub_402340((char *)v4 + 4, (int)&a2);
  sub_402340((char *)v4 + 8, (int)&a3);
  return v4;
}
// 40C340: using guessed type int std__ios_base__ios_base(void);
// 4B4C44: using guessed type int (*off_4B4C44[10])();

//----- (0040C550) --------------------------------------------------------
char *__thiscall sub_40C550(void *this)
{
  return (char *)this + 4;
}

//----- (0040C590) --------------------------------------------------------
signed int __thiscall CConfig::Open(int this, const char *a2)
{
  int v3; // edx@10
  int v4; // ecx@10
  int v5; // ecx@12
  int v6; // eax@13
  int v7; // ecx@18
  void *v8; // eax@21
  int v9; // ecx@22
  int v10; // ecx@23
  char v12; // ST04_1@27
  char v13; // ST04_1@29
  int v14; // [sp-4h] [bp-68h]@7
  void *v15; // [sp+0h] [bp-64h]@29
  void *v16; // [sp+4h] [bp-60h]@27
  void *v17; // [sp+8h] [bp-5Ch]@25
  void *v18; // [sp+Ch] [bp-58h]@13
  int v19; // [sp+10h] [bp-54h]@4
  void *v20; // [sp+14h] [bp-50h]@1
  void *v21; // [sp+1Ch] [bp-48h]@24
  void *v22; // [sp+28h] [bp-3Ch]@23
  void *v23; // [sp+34h] [bp-30h]@22
  int v24; // [sp+3Ch] [bp-28h]@21
  void *v25; // [sp+48h] [bp-1Ch]@12
  char v26; // [sp+50h] [bp-14h]@10
  void *v27; // [sp+54h] [bp-10h]@3
  char *v28; // [sp+58h] [bp-Ch]@9
  int v29; // [sp+5Ch] [bp-8h]@4
  char v30; // [sp+60h] [bp-4h]@3

  v20 = (void *)this;
  *(_DWORD *)(this + 512) = fopen(a2, "rb");
  if ( !*((_DWORD *)v20 + 128) )
  {
    sub_4328C0("'%s' File open failed at CConfig::Open", a2);
    return 0;
  }
  std__ios_base__ios_base(&v30, v20);
  v27 = (char *)v20 + 520;
  *((_DWORD *)v20 + 129) = 1;
  while ( 1 )
  {
    v29 = CConfig::GetToken(v20);
    v19 = v29;
    if ( !v29 )
      break;
    if ( v19 == 1 )
    {
      v28 = (char *)sub_40C380((const char *)v20);
      v29 = CConfig::GetToken(v20);
      if ( v29 != 4 )
        goto LABEL_34;
      v29 = CConfig::GetToken(v20);
      std__ios_base__ios_base(&v26, v3);
      if ( v29 != 1 && v29 != 2 )
      {
        if ( v29 != 7 )
          goto LABEL_34;
        v14 = v4;
        CConfig::GetList(v20, v3, &v14);
        sub_4323F0(&v26, v14);
        if ( (unsigned __int8)sub_40BD20(&v26) )
        {
          v29 = sub_40C8D0(&v26);
          v14 = v7;
          sub_402340(&v14, (int)&v26);
          sub_40BBE0(v14);
LABEL_34:
          v14 = *((_DWORD *)v20 + 129);
          sub_4328C0("Invalid format %s(%d) at CConfig::Open", a2, v14);
          CMemory::_free((int)v28);
          goto LABEL_35;
        }
      }
      else
      {
        v25 = sub_401000(8u);
        if ( v25 )
        {
          v6 = (int)sub_40C380((const char *)v20);
          v18 = sub_40C300(v25, v6);
        }
        else
        {
          v18 = 0;
        }
        v14 = v5;
        sub_446FD0(v18);
        sub_4323F0(&v26, v14);
      }
      v8 = CConfig::Find(v20, &v24, v28);
      if ( (unsigned __int8)sub_402380(v8) )
      {
        v23 = sub_401000(0xCu);
        if ( v23 )
        {
          v22 = sub_401000(0xCu);
          if ( v22 )
          {
            v21 = sub_401000(8u);
            if ( v21 )
              v17 = sub_40C300(v21, (int)v28);
            else
              v17 = 0;
            v14 = v10;
            sub_402340(&v14, (int)&v26);
            v12 = v10;
            sub_446FD0(v17);
            v16 = sub_40C510(v22, v12, v14);
          }
          else
          {
            v16 = 0;
          }
          v14 = v9;
          sub_402340(&v14, (int)&unk_4E1108);
          v13 = v9;
          sub_446FD0(v16);
          v15 = sub_40C510(v23, v13, v14);
        }
        else
        {
          v15 = 0;
        }
        v14 = v9;
        sub_446FD0(v15);
        sub_4323F0(v27, v14);
        v27 = (void *)sub_40BCC0(v27);
      }
      else
      {
        v14 = *((_DWORD *)v20 + 129);
        sub_4328C0("Duplicate key %s(%d) at CConfig::Open", a2, v14);
        CMemory::_free((int)v28);
        sub_402340(&v14, (int)&v26);
        sub_40BBE0(v14);
      }
LABEL_35:
      while ( v29 != 3 && v29 )
        v29 = CConfig::GetToken(v20);
    }
    else
    {
      if ( v19 != 3 )
      {
        v14 = *((_DWORD *)v20 + 129);
        sub_4328C0("Invalid format %s(%d) at CConfig::Open", a2, v14);
      }
    }
  }
  v14 = *((_DWORD *)v20 + 128);
  fclose((FILE *)v14);
  *((_DWORD *)v20 + 128) = 0;
  return 1;
}
// 40BB30: using guessed type int __fastcall std__ios_base__ios_base(_DWORD, _DWORD);
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0040C8D0) --------------------------------------------------------
int __thiscall sub_40C8D0(void *this)
{
  return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 4))(*(_DWORD *)this);
}

//----- (0040C8F0) --------------------------------------------------------
int __thiscall sub_40C8F0(void *this, const char *a2)
{
  void *v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-4h]@1

  v3 = CConfig::Find(this, &v5, a2);
  v4 = sub_40BCC0(v3);
  return sub_402360((void *)v4);
}

//----- (0040C920) --------------------------------------------------------
int __thiscall CConfig::Get(void *this, const char *a2, int a3)
{
  int result; // eax@2
  int v4; // eax@3
  int v5; // [sp+4h] [bp-4h]@1

  CConfig::Find(this, &v5, a2);
  if ( (unsigned __int8)sub_402380(&v5) )
  {
    result = a3;
  }
  else
  {
    v4 = sub_40BCC0(&v5);
    result = sub_402360((void *)v4);
  }
  return result;
}

//----- (0040C970) --------------------------------------------------------
int __thiscall sub_40C970(void *this, const char *a2)
{
  void *v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-4h]@1

  v3 = CConfig::Find(this, &v5, a2);
  v4 = sub_40BCC0(v3);
  return sub_40C8D0((void *)v4);
}

//----- (0040C9A0) --------------------------------------------------------
int __thiscall CConfig::GetInt(void *this, const char *a2, int a3)
{
  int result; // eax@2
  int v4; // eax@3
  int v5; // [sp+4h] [bp-4h]@1

  CConfig::Find(this, &v5, a2);
  if ( (unsigned __int8)sub_402380(&v5) )
  {
    result = a3;
  }
  else
  {
    v4 = sub_40BCC0(&v5);
    result = sub_40C8D0((void *)v4);
  }
  return result;
}

//----- (0040C9F0) --------------------------------------------------------
int __cdecl CConfig::GetTimeStamp()
{
  int result; // eax@2
  HMODULE v1; // [sp+4h] [bp-8h]@1
  int v2; // [sp+8h] [bp-4h]@5

  v1 = GetModuleHandleA(0);
  if ( v1 )
  {
    if ( *(_WORD *)v1 == 23117 )
    {
      v2 = (int)((char *)v1 + *((_DWORD *)v1 + 15));
      if ( *(_DWORD *)v2 == 17744 )
        result = *(_DWORD *)(v2 + 8);
      else
        result = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0040CA50) --------------------------------------------------------
int __userpurge CDBPacket::OnIOCallback<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, int a3, int a4)
{
  void *v8; // ST04_4@1

  v8 = this;
  CDBSocket::Process(ebx0, edi0, esi0, a3);
  CIOBuffer::Release(*((_DWORD *)v8 + 4));
  return CMemoryPool_CDBPacket::_Free(v8);
}
// 40DD70: using guessed type _DWORD __cdecl CMemoryPool_CDBPacket::_Free(_DWORD);

//----- (0040CA80) --------------------------------------------------------
int __usercall CDBSocket::CDBSocket<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1

  v5 = (int)this;
  CIOSocket::CIOSocket((int)this, a2, a3, a4, 0);
  *(_DWORD *)v5 = &off_4B4CEC;
  CIOObject::AddRef(v5, a2, a3, a4);
  return v5;
}
// 4B4CEC: using guessed type int (__stdcall *off_4B4CEC)(int);

//----- (0040CAB0) --------------------------------------------------------
int __userpurge CDBSocket::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  CDBSocket::_CDBSocket(this, ebx0, a3, a4);
  if ( a2 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0040CAE0) --------------------------------------------------------
int __usercall CDBSocket::_CDBSocket<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)this = &off_4B4CEC;
  return CIOSocket::_CIOSocket((int)this, a2, a3, a4);
}
// 4B4CEC: using guessed type int (__stdcall *off_4B4CEC)(int);

//----- (0040CB00) --------------------------------------------------------
int __usercall CDBSocket::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int v3; // eax@1
  int v4; // eax@2
  struct hostent *v6; // [sp+0h] [bp-1Ch]@2
  struct sockaddr name; // [sp+4h] [bp-18h]@1
  int v8; // [sp+14h] [bp-8h]@1
  SOCKET s; // [sp+18h] [bp-4h]@1

  v8 = dword_4D9830;
  s = socket(2, 1, 0);
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = 0;
  *(_WORD *)&name.sa_data[0] = 0;
  bind(s, &name, 16);
  name.sa_family = 2;
  v3 = sub_4012D0(&unk_4E11B0);
  *(_DWORD *)&name.sa_data[2] = inet_addr((const char *)v3);
  if ( *(_DWORD *)&name.sa_data[2] == -1 )
  {
    v4 = sub_4012D0(&unk_4E11B0);
    v6 = gethostbyname((const char *)v4);
    if ( !v6 )
      goto LABEL_8;
    memcpy(&name.sa_data[2], *(const void **)v6->h_addr_list, v6->h_length);
  }
  *(_WORD *)&name.sa_data[0] = htons(dword_4E116C);
  if ( connect(s, &name, 16) != -1 )
  {
    dword_4DA7C8 = s;
    dword_4DA7A8 = CreateEventA(0, 1, 0, 0);
    CIOSocket::Initialize((ULONG_PTR)&unk_4DA7B8, a1, a2, a3);
    WaitForSingleObject(dword_4DA7A8, 0xFFFFFFFFu);
    dword_4DA7A8 = 0;
    CloseHandle(dword_4DA7A8);
    return dword_4DA7AC;
  }
  sub_4328C0("Can't connect to DB Server");
LABEL_8:
  closesocket(s);
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;
// 4DA7AC: using guessed type int dword_4DA7AC;
// 4DA7C8: using guessed type int dword_4DA7C8;

//----- (0040CC40) --------------------------------------------------------
void __usercall CDBSocket::Stop(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  if ( dword_4DA7AC )
  {
    dword_4DA7AC = 0;
    dword_4DA7A8 = CreateEventA(0, 1, 0, 0);
    CDBSocket::Write(a1, a2, a3, 32, (unsigned int)&byte_4B437D);
    WaitForSingleObject(dword_4DA7A8, 0xFFFFFFFFu);
    CloseHandle(dword_4DA7A8);
    dword_4DA7A8 = 0;
  }
}
// 4DA7AC: using guessed type int dword_4DA7AC;

//----- (0040CCA0) --------------------------------------------------------
BOOL __cdecl CDBSocket::OnClose()
{
  BOOL result; // eax@2

  if ( dword_4DA7AC )
  {
    dword_4DA7AC = 0;
    sub_4328C0("Connection closed from DB Server");
    result = PostMessageA(hWnd, 0x111u, 0x8009u, 0);
  }
  else
  {
    result = SetEvent(dword_4DA7A8);
  }
  return result;
}
// 4DA7AC: using guessed type int dword_4DA7AC;

//----- (0040CD00) --------------------------------------------------------
void __usercall CDBSocket::OnRead(int this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST0C_4@5
  int v5; // [sp+0h] [bp-18h]@1
  DWORD v6; // [sp+4h] [bp-14h]@2
  size_t v7; // [sp+Ch] [bp-Ch]@3
  DWORD v8; // [sp+10h] [bp-8h]@1
  size_t v9; // [sp+14h] [bp-4h]@1

  v5 = this;
  v9 = *(_DWORD *)(*(_DWORD *)(this + 92) + 8000);
  v8 = *(_DWORD *)(this + 92);
  while ( 1 )
  {
    v6 = v8;
    if ( v9 < 2 )
      break;
    v7 = *(_WORD *)v8;
    if ( v9 < v7 )
      break;
    v9 -= v7;
    v8 += v7;
    v4 = CMemoryPool_CDBPacket::_Alloc();
    *(_DWORD *)(v4 + 16) = *(_DWORD *)(v5 + 92);
    CIOBuffer::AddRef(*(_DWORD *)(v5 + 92));
    CIOObject::PostObject(v4, v6);
  }
  CIOSocket::Read(v5, a2, a3, a4, v9);
}

//----- (0040CD90) --------------------------------------------------------
void __usercall CDBSocket::Process(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v4; // [sp+8h] [bp-17Ch]@112
  int v5; // [sp+Ch] [bp-178h]@112
  char v6; // [sp+13h] [bp-171h]@113
  int v7; // [sp+14h] [bp-170h]@109
  int v8; // [sp+18h] [bp-16Ch]@109
  int v9; // [sp+24h] [bp-160h]@106
  int v10; // [sp+28h] [bp-15Ch]@106
  int v11; // [sp+2Ch] [bp-158h]@106
  int v12; // [sp+30h] [bp-154h]@106
  int v13; // [sp+34h] [bp-150h]@103
  char *v14; // [sp+38h] [bp-14Ch]@104
  unsigned __int8 v15; // [sp+3Fh] [bp-145h]@104
  int v16; // [sp+40h] [bp-144h]@103
  int v17; // [sp+44h] [bp-140h]@100
  char *v18; // [sp+48h] [bp-13Ch]@101
  unsigned __int8 v19; // [sp+4Fh] [bp-135h]@101
  int v20; // [sp+50h] [bp-134h]@100
  char v21; // [sp+5Fh] [bp-125h]@94
  unsigned __int8 v22; // [sp+67h] [bp-11Dh]@95
  int v23; // [sp+68h] [bp-11Ch]@89
  unsigned __int8 v24; // [sp+6Fh] [bp-115h]@90
  int v25; // [sp+70h] [bp-114h]@89
  int v26; // [sp+74h] [bp-110h]@84
  unsigned __int8 v27; // [sp+7Bh] [bp-109h]@85
  int v28; // [sp+7Ch] [bp-108h]@84
  unsigned __int8 v29; // [sp+83h] [bp-101h]@80
  int v30; // [sp+84h] [bp-100h]@79
  int v31; // [sp+88h] [bp-FCh]@79
  int v32; // [sp+8Ch] [bp-F8h]@74
  int v33; // [sp+90h] [bp-F4h]@74
  unsigned __int8 v34; // [sp+97h] [bp-EDh]@75
  int v35; // [sp+98h] [bp-ECh]@68
  char v36; // [sp+9Fh] [bp-E5h]@69
  int v37; // [sp+A0h] [bp-E4h]@68
  unsigned __int8 v38; // [sp+A6h] [bp-DEh]@67
  unsigned __int8 v39; // [sp+A7h] [bp-DDh]@66
  int v40; // [sp+A8h] [bp-DCh]@62
  int v41; // [sp+ACh] [bp-D8h]@62
  unsigned __int8 v42; // [sp+B3h] [bp-D1h]@63
  int v43; // [sp+B4h] [bp-D0h]@58
  int v44; // [sp+B8h] [bp-CCh]@58
  unsigned __int8 v45; // [sp+BFh] [bp-C5h]@59
  int v46; // [sp+C0h] [bp-C4h]@59
  unsigned __int8 v47; // [sp+C7h] [bp-BDh]@59
  int v48; // [sp+C8h] [bp-BCh]@59
  int v49; // [sp+CCh] [bp-B8h]@56
  int v50; // [sp+D0h] [bp-B4h]@55
  int v51; // [sp+D4h] [bp-B0h]@55
  unsigned __int8 v52; // [sp+DBh] [bp-A9h]@56
  int v53; // [sp+DCh] [bp-A8h]@56
  int v54; // [sp+E0h] [bp-A4h]@52
  int v55; // [sp+E4h] [bp-A0h]@52
  int v56; // [sp+E8h] [bp-9Ch]@51
  int v57; // [sp+ECh] [bp-98h]@51
  int v58; // [sp+F0h] [bp-94h]@45
  int v59; // [sp+F4h] [bp-90h]@44
  int v60; // [sp+F8h] [bp-8Ch]@43
  int v61; // [sp+FCh] [bp-88h]@43
  char *v62; // [sp+100h] [bp-84h]@45
  unsigned __int8 v63; // [sp+107h] [bp-7Dh]@45
  int v64; // [sp+10Ch] [bp-78h]@38
  int v65; // [sp+110h] [bp-74h]@39
  int v66; // [sp+114h] [bp-70h]@39
  int v67; // [sp+118h] [bp-6Ch]@38
  int v68; // [sp+11Ch] [bp-68h]@32
  int v69; // [sp+120h] [bp-64h]@32
  int v70; // [sp+124h] [bp-60h]@31
  int v71; // [sp+128h] [bp-5Ch]@33
  int v72; // [sp+12Ch] [bp-58h]@33
  int v73; // [sp+130h] [bp-54h]@31
  int v74; // [sp+134h] [bp-50h]@28
  unsigned __int8 v75; // [sp+13Bh] [bp-49h]@29
  int v76; // [sp+13Ch] [bp-48h]@28
  int v77; // [sp+140h] [bp-44h]@25
  int v78; // [sp+144h] [bp-40h]@25
  unsigned __int8 v79; // [sp+14Bh] [bp-39h]@26
  int v80; // [sp+14Ch] [bp-38h]@22
  int v81; // [sp+150h] [bp-34h]@22
  unsigned __int8 v82; // [sp+157h] [bp-2Dh]@23
  int v83; // [sp+158h] [bp-2Ch]@19
  int v84; // [sp+15Ch] [bp-28h]@19
  unsigned __int8 v85; // [sp+163h] [bp-21h]@20
  int v86; // [sp+164h] [bp-20h]@14
  int v87; // [sp+168h] [bp-1Ch]@14
  unsigned __int16 v88; // [sp+16Ch] [bp-18h]@15
  unsigned __int8 v89; // [sp+171h] [bp-13h]@15
  unsigned __int8 v90; // [sp+172h] [bp-12h]@4
  unsigned __int8 v91; // [sp+173h] [bp-11h]@2
  int v92; // [sp+174h] [bp-10h]@9
  int v93; // [sp+178h] [bp-Ch]@8
  void *v94; // [sp+17Ch] [bp-8h]@1
  char v95[4]; // [sp+180h] [bp-4h]@1

  v94 = (void *)(a4 + 3);
  *(_DWORD *)v95 = *(_BYTE *)(a4 + 2);
  switch ( *(_DWORD *)v95 )
  {
    case 1:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"bddddb");
      if ( v91 == 6 )
      {
        if ( v90 == dword_4E35B8 )
        {
          if ( dword_4E10B0 )
          {
            if ( v93 == *(_DWORD *)dword_4E1174 && v92 == dword_4E1178 )
            {
              dword_4DA7AC = 1;
              SetEvent(dword_4DA7A8);
              sub_432890("DB server version (Version:%d, IID:0x%x)", v91, dword_4E10B0);
              if ( dword_4E1174[0] & 1 )
                CDBSocket::Write(a1, a2, a3, 56, (unsigned int)&byte_4B437D);
            }
            else
            {
              sub_4328C0(
                "System or Event is diffrent with DBSvr. Sys(M:%d, D:%d), Ev(M:%d, D:%d)",
                *(_DWORD *)dword_4E1174,
                v93,
                dword_4E1178,
                v92);
              CIOSocket::Close((int)&unk_4DA7B8, a1, a2, a3);
            }
          }
          else
          {
            sub_4328C0("can't get Item ID");
            CIOSocket::Close((int)&unk_4DA7B8, a1, a2, a3);
          }
        }
        else
        {
          sub_4328C0("Country Code is different (DBSvr:%d, MainSvr:%d)", v90, dword_4E35B8);
          CIOSocket::Close((int)&unk_4DA7B8, a1, a2, a3);
        }
      }
      else
      {
        sub_4328C0("DB version is different (DBSvr:%d, MainSvr:%d)", v91, 6);
        CIOSocket::Close((int)&unk_4DA7B8, a1, a2, a3);
      }
      break;
    case 0:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbw");
      v87 = sub_47E800(a1, a2, a3, v86);
      if ( v87 )
      {
        sub_4958F0(v87, a1, a2, a3, (int)v94, v89, v88);
        if ( CSocket::IsSBit(v87, 7) )
          sub_4948C0(a1, a2, a3, v87, 67, (unsigned int)"b");
        CIOObject::Release(v87, a1, a2, a3);
      }
      break;
    case 2:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v84 = sub_47E800(a1, a2, a3, v83);
      if ( v84 )
      {
        sub_4959E0(v84, a1, a2, a3, v85, (char *)v94);
        CIOObject::Release(v84, a1, a2, a3);
      }
      break;
    case 3:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v81 = sub_47E800(a1, a2, a3, v80);
      if ( v81 )
      {
        sub_495A90(v81, a1, a2, a3, v82);
        CIOObject::Release(v81, a1, a2, a3);
      }
      break;
    case 4:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v78 = sub_47E800(a1, a2, a3, v77);
      if ( v78 )
      {
        CSocket::OnDelPlayer(v78, a1, a2, a3, v79, (int)v94);
        CIOObject::Release(v78, a1, a2, a3);
      }
      break;
    case 8:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v76 = sub_450810(a1, a2, a3, v74);
      if ( v76 )
      {
        CPlayer::OnProcessEvent((void *)v76, a1, a2, a3, v75, v94);
        sub_4239C0(v76, a1, a2, a3, v76 + 352);
      }
      break;
    case 9:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"ddd");
      v73 = sub_450810(a1, a2, a3, v70);
      if ( v73 )
      {
        v68 = 0;
        v69 = CPlayer::GetGuild(v73, a1, a2, a3);
        if ( v69 )
        {
          v68 = CGuild::CreateTrialSecedeAnswer(v69, a1, a2, a3, v73, v71, v72);
          sub_4239C0(v69, a1, a2, a3, v69 + 40);
        }
        if ( v68 )
          CPlayer::Write(a1, a2, a3, v73, 94, (unsigned int)"bb");
        sub_4239C0(v73, a1, a2, a3, v73 + 352);
      }
      break;
    case 0xA:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"ddd");
      v67 = sub_450810(a1, a2, a3, v64);
      if ( v67 )
      {
        if ( CGuild::ConfluxSecedeAnswer(a1, a2, a3, v67, v65, v66) )
          CPlayer::Write(a1, a2, a3, v67, 94, (unsigned int)"bb");
        sub_4239C0(v67, a1, a2, a3, v67 + 352);
      }
      break;
    case 0xB:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbs");
      v61 = sub_450810(a1, a2, a3, v60);
      if ( v61 )
      {
        v59 = CPlayer::GetGuild(v61, a1, a2, a3);
        if ( v59 )
        {
          v58 = CGuild::CreateGuildNameAnswer(v59, a1, a2, a3, v61, v63, v62);
          sub_4239C0(v59, a1, a2, a3, v59 + 40);
          if ( v58 )
            CPlayer::Write(a1, a2, a3, v61, 94, (unsigned int)"bb");
        }
        else
        {
          sub_4328C0("D2S_GUILD_SAMENAMECHECK guild point error (pid:%d)", *(_DWORD *)(v61 + 452));
        }
        sub_4239C0(v61, a1, a2, a3, v61 + 352);
      }
      break;
    case 0xC:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dd");
      CGuild::DelPlayer(a1, a2, a3, v57, v56);
      break;
    case 0x14:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"d");
      v55 = sub_450810(a1, a2, a3, v54);
      if ( v55 )
      {
        CPlayer::Write(a1, a2, a3, v55, 94, (unsigned int)"bm");
        sub_4239C0(v55, a1, a2, a3, v55 + 352);
      }
      break;
    case 0x15:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbdd");
      v51 = sub_416230(a1, a2, a3, v50);
      if ( v51 )
      {
        CGuild::OnSetStandard(v51, a1, a2, a3, v49, v52, v50, v53);
        sub_4239C0(v51, a1, a2, a3, v51 + 40);
      }
      break;
    case 0xD:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbbss");
      v44 = sub_47E800(a1, a2, a3, v43);
      if ( v44 )
      {
        sub_495F90(v44, a1, a2, a3, v47, v45, v48, v46);
        CIOObject::Release(v44, a1, a2, a3);
      }
      break;
    case 0xE:
      CAuthSocket::Write(a1, a2, a3, 13, (unsigned int)"m");
      break;
    case 0xF:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v41 = sub_47E800(a1, a2, a3, v40);
      if ( v41 )
      {
        sub_496150(v41, a1, a2, a3, v42);
        CIOObject::Release(v41, a1, a2, a3);
      }
      break;
    case 0x10:
      CPlayer::PKBulletinLoad(a1, a2, a3, (int)v94);
      break;
    case 0x11:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"b");
      CCastle::Load(a1, a2, a3, v39, (int)v94);
      break;
    case 0x12:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"b");
      CWar::Load(a1, a2, a3, v38, (int)v94);
      break;
    case 0x13:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v37 = sub_450810(a1, a2, a3, v35);
      if ( v37 )
      {
        if ( v36 )
          CPlayer::Write(a1, a2, a3, v37, 103, (unsigned int)"bm");
        else
          CPlayer::Write(a1, a2, a3, v37, 103, (unsigned int)"b");
        sub_4239C0(v37, a1, a2, a3, v37 + 352);
      }
      break;
    case 0x16:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v33 = sub_450810(a1, a2, a3, v32);
      if ( v33 )
      {
        if ( v34 )
          CPlayer::OnGetMyTelPt(v33, a1, a2, a3, v34, (int)v94);
        sub_4239C0(v33, a1, a2, a3, v33 + 352);
      }
      break;
    case 0x17:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v31 = CPlayer::ScanPlayer(a1, a2, a3, v30);
      if ( v31 )
      {
        CPlayer::OnSetMyTelPt(v31, a1, a2, a3, v29, (char *)v94);
        sub_4239C0(v31, a1, a2, a3, v31 + 352);
      }
      break;
    case 0x18:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      if ( dword_4E1174[0] & 0x40 )
      {
        v28 = CPlayer::ScanPlayer(a1, a2, a3, v26);
        if ( v28 )
        {
          CPlayer::FRDProcess(v28, a1, a2, a3, v27, (char *)v94, (unsigned int)v94);
          sub_4239C0(v28, a1, a2, a3, v28 + 352);
        }
      }
      break;
    case 0x19:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      if ( *(_WORD *)dword_4E1174 & 0x400 )
      {
        v25 = CPlayer::ScanPlayer(a1, a2, a3, v23);
        if ( v25 )
        {
          CPlayer::MAILProcess(v25, a1, a2, a3, v24, (char *)v94, (unsigned int)v94);
          sub_4239C0(v25, a1, a2, a3, v25 + 352);
        }
        else
        {
          if ( v24 == 1 )
          {
            v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbb");
            if ( !v21 )
            {
              if ( v22 != 3 )
                CDBSocket::Write(a1, a2, a3, 30, (unsigned int)"dbddb");
            }
          }
          else
          {
            if ( v24 == 11 )
            {
              v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dd");
              CDBSocket::Write(a1, a2, a3, 30, (unsigned int)"dbddbbddwbd");
            }
          }
        }
      }
      break;
    case 0x1A:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbs");
      v20 = sub_450810(a1, a2, a3, v17);
      if ( v20 )
      {
        CPlayer::OnChangePlayerName(v20, a1, a2, a3, v19, v18);
        sub_4239C0(v20, a1, a2, a3, v20 + 352);
      }
      break;
    case 0x1B:
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbs");
      v16 = sub_450810(a1, a2, a3, v13);
      if ( v16 )
      {
        CPlayer::OnChangeGuildName(v16, a1, a2, a3, v15, v14);
        sub_4239C0(v16, a1, a2, a3, v16 + 352);
      }
      break;
    case 0x1C:
      v9 = 0;
      v11 = 0;
      v12 = 0;
      sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"ddd");
      v10 = CPlayer::ScanPlayer(a1, a2, a3, v9);
      if ( v10 )
        sub_4239C0(v10, a1, a2, a3, v10 + 352);
      break;
    case 0x1D:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"dbw");
      v8 = sub_47E800(a1, a2, a3, v7);
      if ( v8 )
      {
        sub_4948C0(a1, a2, a3, v8, 25, (unsigned int)"bm");
        CIOObject::Release(v8, a1, a2, a3);
      }
      break;
    case 0x1E:
      v94 = sub_497220(a1, a2, a3, (char *)v94, (unsigned int)"db");
      v5 = sub_47E800(a1, a2, a3, v4);
      if ( v5 )
      {
        sub_4948C0(a1, a2, a3, v5, 26, (unsigned int)"b");
        if ( !v6 )
          sub_4948C0(a1, a2, a3, v5, 45, (unsigned int)"b");
        CIOObject::Release(v5, a1, a2, a3);
      }
      break;
    default:
      sub_4328C0("invalid packet type at CDBSocket::Process Type(%d)", *(_DWORD *)v95);
      break;
  }
}
// 4DA7AC: using guessed type int dword_4DA7AC;
// 4E1178: using guessed type int dword_4E1178;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0040DC60) --------------------------------------------------------
int __thiscall CSocket::IsSBit(int this, char a2)
{
  return *(_DWORD *)(this + 108) & (1 << a2);
}

//----- (0040DC80) --------------------------------------------------------
void __usercall CDBSocket::Write(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5)
{
  int v5; // ST10_4@1

  v5 = (int)CIOBuffer::Alloc();
  *(_BYTE *)(v5 + 2) = a4;
  *(_WORD *)v5 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)(v5 + 3), (int)&a5) - v5;
  *(_DWORD *)(v5 + 8000) = *(_WORD *)v5;
  CIOSocket::Write((int)&unk_4DA7B8, a1, a2, a3, v5);
}

//----- (0040DCF0) --------------------------------------------------------
int __cdecl CMemoryPool_CDBPacket::_Alloc()
{
  int result; // eax@2
  int v1; // [sp+0h] [bp-Ch]@4
  void *v2; // [sp+4h] [bp-8h]@3
  int v3; // [sp+8h] [bp-4h]@1

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA828);
  v3 = dword_4DA824;
  if ( dword_4DA824 )
  {
    dword_4DA824 = *(_DWORD *)(dword_4DA824 + 16);
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA828);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA828);
    v2 = sub_401000(0x14u);
    if ( v2 )
      v1 = CDBPacket::CDBPacket(v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 40DDA0: using guessed type int __thiscall CDBPacket::CDBPacket(_DWORD);
// 4DA824: using guessed type int dword_4DA824;

//----- (0040DD70) --------------------------------------------------------
LONG __cdecl CMemoryPool_CDBPacket::_Free(int a1)
{
  CIOSpinLock::Enter((volatile LONG *)&unk_4DA828);
  *(_DWORD *)(a1 + 16) = dword_4DA824;
  dword_4DA824 = a1;
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA828);
}
// 40DD70: using guessed type _DWORD __cdecl CMemoryPool_CDBPacket::_Free(_DWORD);
// 4DA824: using guessed type int dword_4DA824;

//----- (0040DDA0) --------------------------------------------------------
int __thiscall CDBPacket::CDBPacket(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B4EE8;
  return v2;
}
// 40DDA0: using guessed type int __thiscall CDBPacket::CDBPacket(_DWORD);
// 4B4EE8: using guessed type int (__stdcall *off_4B4EE8)(int);

//----- (0040DDC0) --------------------------------------------------------
int __thiscall CDBPacket::_scalar_deleting_destructor_(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  CIOSocket::CIOTimerInstance::_CIOTimerInstance(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0040DDF0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CDBPacket::_CPool::_CPool()
{
  return CMemoryPool_CDBPacket::_FreeAll();
}

//----- (0040DE00) --------------------------------------------------------
LONG __cdecl CMemoryPool_CDBPacket::_FreeAll()
{
  int v1; // [sp+Ch] [bp-4h]@2

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA828);
  while ( 1 )
  {
    v1 = dword_4DA824;
    if ( !dword_4DA824 )
      break;
    dword_4DA824 = *(_DWORD *)(dword_4DA824 + 16);
    if ( v1 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v1)(v1, 1);
  }
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA828);
}
// 4DA824: using guessed type int dword_4DA824;

//----- (0040DE70) --------------------------------------------------------
int __thiscall CFindPath::CFindPath(int this)
{
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = &unk_4E0908;
  *(_DWORD *)(this + 24) = -1;
  *(_DWORD *)(this + 20) = -1;
  *(_DWORD *)(this + 32) = -1;
  *(_DWORD *)(this + 28) = -1;
  *(_DWORD *)(this + 36) = 0;
  return this;
}

//----- (0040DEF0) --------------------------------------------------------
void *__thiscall CFindPath::_CFindPath(void *this)
{
  return CFindPath::FreeNode(this);
}

//----- (0040DF10) --------------------------------------------------------
signed int __userpurge CFindPath::FindPath<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, int a2, int a3)
{
  signed int result; // eax@4
  int v7; // ecx@5
  int v8; // edx@5
  int v9; // edx@5
  int v10; // eax@5
  int v11; // ecx@6
  int v12; // eax@8
  int v13; // [sp+0h] [bp-20h]@1
  int v14; // [sp+4h] [bp-1Ch]@20
  int v15; // [sp+8h] [bp-18h]@6
  int v16; // [sp+Ch] [bp-14h]@6
  int v17; // [sp+10h] [bp-10h]@6
  int v18; // [sp+14h] [bp-Ch]@5
  int v19; // [sp+18h] [bp-8h]@5
  int v20; // [sp+1Ch] [bp-4h]@5

  v13 = (int)this;
  if ( (*(_DWORD *)a2 != *(_DWORD *)a3 || *(_DWORD *)(a2 + 4) != *(_DWORD *)(a3 + 4))
    && CSMap::IsValidTile(*((void **)this + 1), a3, 131072) )
  {
    CFindPath::FreeNode((void *)v13);
    v7 = *(_DWORD *)(a2 + 4);
    *(_DWORD *)(v13 + 20) = *(_DWORD *)a2;
    *(_DWORD *)(v13 + 24) = v7;
    v8 = *(_DWORD *)(a3 + 4);
    *(_DWORD *)(v13 + 28) = *(_DWORD *)a3;
    *(_DWORD *)(v13 + 32) = v8;
    v19 = CMemoryPool_CFindPath::NODE::_Alloc();
    *(_DWORD *)v19 = 0;
    *(_DWORD *)(v19 + 8) = 0;
    *(_DWORD *)(v19 + 12) = CFindPath::CalcH(v13, v13 + 20);
    *(_DWORD *)(v19 + 4) = *(_DWORD *)(v19 + 12);
    *(_DWORD *)(v19 + 16) = 0;
    v9 = *(_DWORD *)(v13 + 24);
    v10 = v19;
    *(_DWORD *)(v19 + 20) = *(_DWORD *)(v13 + 20);
    *(_DWORD *)(v10 + 24) = v9;
    *(_DWORD *)(v19 + 60) = 0;
    *(_DWORD *)(v19 + 64) = -1;
    *(_DWORD *)(v13 + 8) = v19;
    *(_DWORD *)(v13 + 12) = 0;
    v18 = v19;
    v20 = 0;
    while ( 1 )
    {
      ++v20;
      v11 = *(_DWORD *)(v19 + 24);
      v15 = *(_DWORD *)(v19 + 20);
      v16 = v11;
      v17 = sub_40E130(v13 + 28, &v15);
      if ( v17 <= *(_DWORD *)(v13 + 36) || v17 <= 2304 )
      {
        v12 = CSMap::IsMoveTile(
                *(void **)(v13 + 4),
                ebx0,
                edi0,
                a4,
                *(_DWORD *)v13,
                (int)&v15,
                *(_DWORD *)(v13 + 28) - v15,
                *(_DWORD *)(v13 + 32) - v16,
                131072);
        if ( v12 )
          break;
      }
      v12 = v19;
      if ( *(_DWORD *)(v19 + 12) <= *(_DWORD *)(v18 + 12) )
      {
        v12 = v19;
        v18 = v19;
      }
      if ( v20 > 50 )
        goto LABEL_17;
      sub_40E270(v13, ebx0, edi0, a4, v19);
      v19 = CFindPath::GetBestNode(v13);
      if ( !v19 )
      {
        CFindPath::FreeNode((void *)v13);
        return 0;
      }
    }
    v18 = v19;
LABEL_17:
    if ( !v18 )
      sub_422D80(v12, ebx0, edi0, a4);
    v19 = 0;
    while ( 1 )
    {
      v14 = *(_DWORD *)v18;
      if ( !*(_DWORD *)v18 )
        break;
      *(_DWORD *)v18 = v19;
      v19 = v18;
      v18 = v14;
    }
    if ( v19 )
    {
      *(_DWORD *)(v13 + 16) = v19;
      result = 1;
    }
    else
    {
      CFindPath::FreeNode((void *)v13);
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 40E130: using guessed type _DWORD __cdecl sub_40E130(_DWORD, _DWORD);
// 40E1E0: using guessed type int __thiscall CFindPath::GetBestNode(_DWORD);

//----- (0040E130) --------------------------------------------------------
int __cdecl sub_40E130(int a1, int a2)
{
  int v3; // ST04_4@1

  v3 = *(_DWORD *)(a1 + 4) - *(_DWORD *)(a2 + 4);
  return v3 * v3 + (*(_DWORD *)a1 - *(_DWORD *)a2) * (*(_DWORD *)a1 - *(_DWORD *)a2);
}
// 40E130: using guessed type _DWORD __cdecl sub_40E130(_DWORD, _DWORD);

//----- (0040E170) --------------------------------------------------------
int __thiscall CFindPath::CalcH(int this, int a2)
{
  int v2; // ST08_4@1
  int v4; // [sp+0h] [bp-10h]@2
  int v5; // [sp+8h] [bp-8h]@1
  int v6; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v5 = abs(*(_DWORD *)(this + 28) - *(_DWORD *)a2);
  v6 = abs(*(_DWORD *)(v2 + 32) - *(_DWORD *)(a2 + 4));
  if ( v5 < (unsigned int)v6 )
    v4 = v6 << 16;
  else
    v4 = v5 << 16;
  return v6 * v6 + v4 + v5 * v5;
}

//----- (0040E1E0) --------------------------------------------------------
int __thiscall CFindPath::GetBestNode(int this)
{
  int result; // eax@2
  int v2; // [sp+4h] [bp-4h]@1

  v2 = *(_DWORD *)(this + 12);
  if ( v2 )
  {
    *(_DWORD *)(this + 12) = *(_DWORD *)(*(_DWORD *)(this + 12) + 64);
    *(_DWORD *)(v2 + 64) = -1;
    result = v2;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 40E1E0: using guessed type int __thiscall CFindPath::GetBestNode(_DWORD);

//----- (0040E220) --------------------------------------------------------
void *__thiscall CFindPath::FreeNode(void *this)
{
  void *result; // eax@2
  void *v2; // [sp+0h] [bp-8h]@1
  int v3; // [sp+4h] [bp-4h]@2

  v2 = this;
  while ( 1 )
  {
    result = v2;
    v3 = *((_DWORD *)v2 + 2);
    if ( !v3 )
      break;
    *((_DWORD *)v2 + 2) = *(_DWORD *)(*((_DWORD *)v2 + 2) + 60);
    CMemoryPool_CFindPath::NODE::_Free(v3);
  }
  *((_DWORD *)v2 + 4) = &unk_4E0908;
  return result;
}
// 40E6C0: using guessed type _DWORD __cdecl CMemoryPool_CFindPath::NODE::_Free(_DWORD);

//----- (0040E270) --------------------------------------------------------
int __userpurge sub_40E270<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST0C_4@1

  v6 = a1;
  CFindPath::LinkChild(a1, a2, a3, a4, a5, 32, 0);
  CFindPath::LinkChild(v6, a2, a3, a4, a5, 32, 32);
  CFindPath::LinkChild(v6, a2, a3, a4, a5, 0, 32);
  CFindPath::LinkChild(v6, a2, a3, a4, a5, -32, 32);
  CFindPath::LinkChild(v6, a2, a3, a4, a5, -32, 0);
  CFindPath::LinkChild(v6, a2, a3, a4, a5, -32, -32);
  CFindPath::LinkChild(v6, a2, a3, a4, a5, 0, -32);
  return CFindPath::LinkChild(v6, a2, a3, a4, a5, 32, -32);
}

//----- (0040E300) --------------------------------------------------------
int __userpurge CFindPath::LinkChild<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, int a3, int a4)
{
  int result; // eax@2
  int v8; // eax@11
  int v9; // eax@11
  int v10; // [sp+0h] [bp-1Ch]@1
  int v11; // [sp+4h] [bp-18h]@11
  int v12; // [sp+8h] [bp-14h]@1
  int v13; // [sp+Ch] [bp-10h]@1
  int v14; // [sp+10h] [bp-Ch]@4
  int v15; // [sp+14h] [bp-8h]@1
  int v16; // [sp+18h] [bp-4h]@4

  v10 = this;
  v12 = a3 + *(_DWORD *)(a2 + 20);
  v13 = a4 + *(_DWORD *)(a2 + 24);
  v15 = CFindPath::CalcH(this, (int)&v12);
  if ( !v15
    || (result = CSMap::IsMoveTile(*(void **)(v10 + 4), ebx0, edi0, esi0, *(_DWORD *)v10, a2 + 20, a3, a4, 131072)) != 0 )
  {
    v14 = *(_DWORD *)(a2 + 8) + 65536;
    v16 = CFindPath::CheckList(v10, (int)&v12, v15);
    if ( v16 )
    {
      if ( *(_DWORD *)(a2 + 16) >= 8 )
        sub_422D80(a2, ebx0, edi0, esi0);
      *(_DWORD *)(a2 + 4 * *(_DWORD *)(a2 + 16)++ + 28) = v16;
      result = v14;
      if ( (unsigned int)v14 < *(_DWORD *)(v16 + 8) )
      {
        *(_DWORD *)v16 = a2;
        *(_DWORD *)(v16 + 8) = v14;
        result = v16;
        *(_DWORD *)(v16 + 4) = v15 + v14;
        if ( *(_DWORD *)(v16 + 64) == -1 )
          result = CFindPath::Propagation(v16);
      }
    }
    else
    {
      v9 = CMemoryPool_CFindPath::NODE::_Alloc();
      v11 = v9;
      *(_DWORD *)(v9 + 16) = 0;
      *(_DWORD *)v9 = a2;
      *(_DWORD *)(v9 + 8) = v14;
      *(_DWORD *)(v9 + 12) = v15;
      *(_DWORD *)(v9 + 4) = v15 + v14;
      *(_DWORD *)(v9 + 20) = v12;
      *(_DWORD *)(v9 + 24) = v13;
      v8 = CFindPath::Insert((void *)v10, v9);
      if ( *(_DWORD *)(a2 + 16) >= 8 )
        sub_422D80(v8, ebx0, edi0, esi0);
      *(_DWORD *)(a2 + 4 * *(_DWORD *)(a2 + 16) + 28) = v11;
      result = a2;
      ++*(_DWORD *)(a2 + 16);
    }
  }
  return result;
}
// 40E4E0: using guessed type _DWORD __stdcall CFindPath::Propagation(_DWORD);

//----- (0040E480) --------------------------------------------------------
int __thiscall CFindPath::CheckList(int this, int a2, unsigned int a3)
{
  int i; // [sp+4h] [bp-4h]@1

  for ( i = *(_DWORD *)(this + 8); i && *(_DWORD *)(i + 12) <= a3; i = *(_DWORD *)(i + 60) )
  {
    if ( *(_DWORD *)(i + 20) == *(_DWORD *)a2 && *(_DWORD *)(i + 24) == *(_DWORD *)(a2 + 4) )
      return i;
  }
  return 0;
}

//----- (0040E4E0) --------------------------------------------------------
int __stdcall CFindPath::Propagation(int a1)
{
  int result; // eax@3
  int i; // [sp+4h] [bp-10h]@2
  int v3; // [sp+8h] [bp-Ch]@2
  int v4; // [sp+Ch] [bp-8h]@1
  int v5; // [sp+10h] [bp-4h]@4

  v4 = 0;
  while ( 1 )
  {
    v3 = *(_DWORD *)(a1 + 8) + 65536;
    for ( i = 0; ; ++i )
    {
      result = a1;
      if ( i >= *(_DWORD *)(a1 + 16) )
        break;
      v5 = *(_DWORD *)(a1 + 4 * i + 28);
      if ( (unsigned int)v3 < *(_DWORD *)(v5 + 8) )
      {
        *(_DWORD *)(v5 + 8) = v3;
        *(_DWORD *)(v5 + 4) = *(_DWORD *)(v5 + 12) + v3;
        *(_DWORD *)v5 = a1;
        if ( *(_DWORD *)(v5 + 64) == -1 )
        {
          *(_DWORD *)(v5 + 64) = v4;
          v4 = v5;
        }
      }
    }
    if ( !v4 )
      break;
    a1 = v4;
    v4 = *(_DWORD *)(v4 + 64);
    *(_DWORD *)(a1 + 64) = -1;
  }
  return result;
}
// 40E4E0: using guessed type _DWORD __stdcall CFindPath::Propagation(_DWORD);

//----- (0040E5A0) --------------------------------------------------------
int __thiscall CFindPath::Insert(void *this, int a2)
{
  int result; // eax@8
  int i; // [sp+4h] [bp-10h]@1
  int j; // [sp+4h] [bp-10h]@4
  int v5; // [sp+8h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-Ch]@6

  for ( i = (int)((char *)this + 8); ; i = v5 + 60 )
  {
    v5 = *(_DWORD *)i;
    if ( !*(_DWORD *)i )
      break;
    if ( *(_DWORD *)(v5 + 12) >= *(_DWORD *)(a2 + 12) )
      break;
  }
  *(_DWORD *)i = a2;
  *(_DWORD *)(a2 + 60) = v5;
  for ( j = (int)((char *)this + 12); ; j = v6 + 64 )
  {
    v6 = *(_DWORD *)j;
    if ( !*(_DWORD *)j )
      break;
    if ( *(_DWORD *)(v6 + 4) >= *(_DWORD *)(a2 + 4) )
      break;
  }
  result = a2;
  *(_DWORD *)j = a2;
  *(_DWORD *)(a2 + 64) = v6;
  return result;
}

//----- (0040E650) --------------------------------------------------------
int __cdecl CMemoryPool_CFindPath::NODE::_Alloc()
{
  int result; // eax@2
  int v1; // [sp+0h] [bp-Ch]@4
  void *v2; // [sp+4h] [bp-8h]@3
  int v3; // [sp+8h] [bp-4h]@1

  CIOSpinLock::Enter((volatile LONG *)&unk_4E0904);
  v3 = dword_4E0900;
  if ( dword_4E0900 )
  {
    dword_4E0900 = *(_DWORD *)dword_4E0900;
    CIOSpinLock::Leave((volatile LONG *)&unk_4E0904);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)&unk_4E0904);
    v2 = sub_401000(0x44u);
    if ( v2 )
      v1 = _LocaleUpdate__GetLocaleT(v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E6C0) --------------------------------------------------------
LONG __cdecl CMemoryPool_CFindPath::NODE::_Free(int a1)
{
  CIOSpinLock::Enter((volatile LONG *)&unk_4E0904);
  *(_DWORD *)a1 = dword_4E0900;
  dword_4E0900 = a1;
  return CIOSpinLock::Leave((volatile LONG *)&unk_4E0904);
}
// 40E6C0: using guessed type _DWORD __cdecl CMemoryPool_CFindPath::NODE::_Free(_DWORD);
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E6F0) --------------------------------------------------------
int __thiscall CFindPath::NODE::NODE(int this, int a2, int a3)
{
  *(_DWORD *)(this + 20) = a2;
  *(_DWORD *)(this + 24) = a3;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 16) = 0;
  return this;
}

//----- (0040E750) --------------------------------------------------------
void *__thiscall CMemoryPool_CAuthPacket::_CPool::CPool(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  std___Container_base___Container_base((char *)this + 4);
  return v2;
}
// 475860: using guessed type int __thiscall std___Container_base___Container_base(_DWORD);

//----- (0040E770) --------------------------------------------------------
LONG __cdecl CMemoryPool_CFindPath::NODE::_CPool::_CPool()
{
  return CMemoryPool_CFindPath::NODE::_FreeAll();
}

//----- (0040E780) --------------------------------------------------------
LONG __cdecl CMemoryPool_CFindPath::NODE::_FreeAll()
{
  int v1; // [sp+4h] [bp-4h]@2

  CIOSpinLock::Enter((volatile LONG *)&unk_4E0904);
  while ( 1 )
  {
    v1 = dword_4E0900;
    if ( !dword_4E0900 )
      break;
    dword_4E0900 = *(_DWORD *)dword_4E0900;
    sub_401020(v1);
  }
  return CIOSpinLock::Leave((volatile LONG *)&unk_4E0904);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (0040E7D0) --------------------------------------------------------
void *__thiscall CGoto::CGoto(void *this)
{
  void *v2; // ST0C_4@1

  v2 = this;
  CBase::CBase((int)this);
  *(_DWORD *)v2 = &off_4B4F00;
  *((_DWORD *)v2 + 8) = 0;
  memset((char *)v2 + 36, 0, 0x10u);
  return v2;
}
// 4B4F00: using guessed type int (__stdcall *off_4B4F00)(int);

//----- (0040E810) --------------------------------------------------------
int __userpurge CGoto::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  CGoto::_CGoto(this, ebx0, a3, a4);
  if ( a2 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0040E840) --------------------------------------------------------
int __usercall CGoto::_CGoto<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)this = &off_4B4F00;
  return CBase::_CBase((int)this, a2, a3, a4);
}
// 4B4F00: using guessed type int (__stdcall *off_4B4F00)(int);

//----- (0040E860) --------------------------------------------------------
signed int __cdecl CGoto::FindGoto(char a1, int a2)
{
  void *v2; // eax@1
  signed int result; // eax@2
  int v4; // eax@3
  int v5; // ecx@3
  char v6; // [sp+0h] [bp-8h]@1
  char v7; // [sp+4h] [bp-4h]@1

  sub_40EF10((int)&unk_4E094C, (int)&v7, (const char **)&a1);
  v2 = sub_430C20((int)&unk_4E094C, &v6);
  if ( (unsigned __int8)unknown_libname_8(v2) )
  {
    result = 0;
  }
  else
  {
    v4 = sub_420250((int *)&v7) + 4;
    v5 = a2;
    *(_DWORD *)a2 = *(_DWORD *)v4;
    *(_DWORD *)(v5 + 4) = *(_DWORD *)(v4 + 4);
    *(_DWORD *)(v5 + 8) = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v5 + 12) = *(_DWORD *)(v4 + 12);
    result = 1;
  }
  return result;
}
// 40E860: using guessed type _DWORD __cdecl CGoto::FindGoto(char, _DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0040E8D0) --------------------------------------------------------
signed int __thiscall CGoto::Set(void *this, int a2, char a3)
{
  void *v3; // eax@2
  int v4; // eax@2
  void *v6; // eax@4
  void *v7; // eax@4
  void *v8; // eax@4
  void *v9; // eax@4
  void *v10; // [sp+0h] [bp-18h]@1
  char v11; // [sp+4h] [bp-14h]@4
  char v12; // [sp+8h] [bp-10h]@4
  char v13; // [sp+Ch] [bp-Ch]@4
  char v14; // [sp+10h] [bp-8h]@4
  char v15; // [sp+14h] [bp-4h]@2

  v10 = this;
  if ( !a2 )
  {
    v3 = sub_4023A0(&a3, &v15);
    v4 = sub_40C8D0(v3);
    *((_DWORD *)v10 + 8) = sub_432EF0(v4);
    if ( !*((_DWORD *)v10 + 8) )
      return 1;
    v6 = sub_4023A0(&a3, &v14);
    *((_DWORD *)v10 + 9) = sub_40C8D0(v6);
    v7 = sub_4023A0(&a3, &v13);
    *((_DWORD *)v10 + 10) = sub_40C8D0(v7);
    v8 = sub_4023A0(&a3, &v12);
    *((_DWORD *)v10 + 11) = sub_40C8D0(v8);
    v9 = sub_4023A0(&a3, &v11);
    *((_DWORD *)v10 + 12) = sub_40C8D0(v9);
  }
  return 1;
}

//----- (0040E990) --------------------------------------------------------
signed int __thiscall CGoto::OnLoad(int this)
{
  signed int result; // eax@2
  int v2; // eax@3
  int v3; // [sp+0h] [bp-20h]@1
  char v4; // [sp+4h] [bp-1Ch]@3
  char v5; // [sp+Ch] [bp-14h]@3

  v3 = this;
  if ( *(_DWORD *)(this + 32) )
  {
    v2 = sub_40F000((int)&v5, this + 32, this + 36);
    sub_40ED20((int)&unk_4E094C, (int)&v4, v2);
    *(_DWORD *)(v3 + 32) = 0;
    memset((void *)(v3 + 36), 0, 0x10u);
    result = 1;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (0040EA00) --------------------------------------------------------
void *__thiscall CPortal::CPortal(void *this)
{
  void *v2; // ST0C_4@1

  v2 = this;
  CBase::CBase((int)this);
  *(_DWORD *)v2 = &off_4B4F48;
  memset((char *)v2 + 32, 0, 0x24u);
  *((_DWORD *)v2 + 17) = 0;
  return v2;
}
// 4B4F48: using guessed type int (__stdcall *off_4B4F48)(int);

//----- (0040EA40) --------------------------------------------------------
int __userpurge CPortal::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  CPortal::_CPortal(this, ebx0, a3, a4);
  if ( a2 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0040EA70) --------------------------------------------------------
int __usercall CPortal::_CPortal<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)this = &off_4B4F48;
  return CBase::_CBase((int)this, a2, a3, a4);
}
// 4B4F48: using guessed type int (__stdcall *off_4B4F48)(int);

//----- (0040EA90) --------------------------------------------------------
signed int __thiscall CPortal::Set(void *this, int a2, char a3)
{
  void *v4; // eax@6
  void *v5; // eax@8
  void *v6; // eax@8
  void *v7; // eax@8
  void *v8; // eax@8
  void *v9; // eax@8
  void *v10; // eax@9
  void *v11; // eax@9
  void *v12; // eax@9
  void *v13; // eax@9
  void *v14; // [sp-4h] [bp-38h]@4
  int v15; // [sp+0h] [bp-34h]@1
  void *v16; // [sp+4h] [bp-30h]@1
  char v17; // [sp+Ch] [bp-28h]@9
  char v18; // [sp+10h] [bp-24h]@9
  char v19; // [sp+14h] [bp-20h]@9
  char v20; // [sp+18h] [bp-1Ch]@9
  char v21; // [sp+1Ch] [bp-18h]@8
  char v22; // [sp+20h] [bp-14h]@8
  char v23; // [sp+24h] [bp-10h]@8
  char v24; // [sp+28h] [bp-Ch]@8
  char v25; // [sp+2Ch] [bp-8h]@8
  char v26; // [sp+30h] [bp-4h]@6

  v16 = this;
  v15 = a2;
  if ( a2 == 103 )
  {
    v5 = sub_4023A0(&a3, &v25);
    *((_DWORD *)v16 + 8) = sub_40C8D0(v5);
    v6 = sub_4023A0(&a3, &v24);
    *((_DWORD *)v16 + 9) = sub_40C8D0(v6);
    v7 = sub_4023A0(&a3, &v23);
    *((_DWORD *)v16 + 10) = sub_40C8D0(v7);
    v8 = sub_4023A0(&a3, &v22);
    *((_DWORD *)v16 + 11) = sub_40C8D0(v8);
    v9 = sub_4023A0(&a3, &v21);
    *((_DWORD *)v16 + 12) = sub_40C8D0(v9);
  }
  else
  {
    if ( v15 == 104 )
    {
      v10 = sub_4023A0(&a3, &v20);
      *((_DWORD *)v16 + 13) = sub_40C8D0(v10);
      v11 = sub_4023A0(&a3, &v19);
      *((_DWORD *)v16 + 14) = sub_40C8D0(v11);
      v12 = sub_4023A0(&a3, &v18);
      *((_DWORD *)v16 + 15) = sub_40C8D0(v12);
      v13 = sub_4023A0(&a3, &v17);
      *((_DWORD *)v16 + 16) = sub_40C8D0(v13);
    }
    else
    {
      if ( v15 != 109 )
      {
        v14 = this;
        sub_402340(&v14, (int)&a3);
        return CBase::Set(v16, a2, (char)v14);
      }
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v4 = sub_4023A0(&a3, &v26);
        *((_DWORD *)v16 + 17) |= 1 << sub_40C8D0(v4);
      }
    }
  }
  return 1;
}

//----- (0040EC10) --------------------------------------------------------
signed int __thiscall CPortal::OnLoad(int this)
{
  signed int result; // eax@2
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  if ( *(_DWORD *)(this + 68) & (1 << dword_4E35B8) )
  {
    sub_40EFD0((int)&unk_4E0958, (const void *)(this + 32));
    memset((void *)(v2 + 32), 0, 0x24u);
    *(_DWORD *)(v2 + 68) = 0;
    result = 1;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0040EC70) --------------------------------------------------------
signed int __usercall CPortal::OpenPortal<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@2
  char v6; // [sp+0h] [bp-10h]@2
  char v7; // [sp+4h] [bp-Ch]@5
  int v8; // [sp+8h] [bp-8h]@3
  char v9; // [sp+Ch] [bp-4h]@1

  sub_40EFA0((int)&unk_4E0958, &v9);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E0958, &v6);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v8 = sub_40F040((int *)&v9);
    if ( PtInRect((const RECT *)(v8 + 4), *(POINT *)(a4 + 324)) )
    {
      CChar::AddGState(a4, 4096);
      CPlayer::Teleport(a4, a1, a2, a3, *(_DWORD *)(v8 + 20), v8 + 24, *(_DWORD *)(v8 + 32), 0);
      return 1;
    }
    sub_47D0A0((int *)&v9, (int)&v7, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0040ED20) --------------------------------------------------------
int __thiscall sub_40ED20(int this, int a2, int a3)
{
  const char *v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  const char *v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_40F060(v21) )
  {
    v22 = v21;
    v3 = *(const char **)sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_40EEE0(*(const char **)v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_40F0D0(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_40FCF0((int *)&v20);
  }
  v8 = *(const char **)sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_40EEE0(*(const char **)v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_40F0D0(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0040EEE0) --------------------------------------------------------
char __stdcall sub_40EEE0(const char *a1, const char *a2)
{
  return strcmp(a1, a2) < 0;
}

//----- (0040EF10) --------------------------------------------------------
int __thiscall sub_40EF10(int this, int a2, const char **a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_40F0A0(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), sub_40EEE0(*a3, *(const char **)v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0040EFA0) --------------------------------------------------------
void *__thiscall sub_40EFA0(int this, void *a2)
{
  int v3; // eax@1

  v3 = sub_474590(*(_DWORD *)(this + 4));
  sub_446700(a2, *(_DWORD *)v3);
  return a2;
}

//----- (0040EFD0) --------------------------------------------------------
int __thiscall sub_40EFD0(int this, const void *a2)
{
  int v3; // ST08_4@1
  void *v4; // eax@1
  char v5; // [sp+4h] [bp-4h]@1

  v3 = this;
  v4 = sub_430C20(this, &v5);
  return sub_40FC70((void *)v3, *(_DWORD *)v4, a2);
}

//----- (0040F000) --------------------------------------------------------
int __thiscall sub_40F000(int this, int a2, int a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  *(_DWORD *)(this + 4) = *(_DWORD *)a3;
  *(_DWORD *)(this + 8) = *(_DWORD *)(a3 + 4);
  *(_DWORD *)(this + 12) = *(_DWORD *)(a3 + 8);
  *(_DWORD *)(this + 16) = *(_DWORD *)(a3 + 12);
  return this;
}

//----- (0040F040) --------------------------------------------------------
int __thiscall sub_40F040(int *this)
{
  return sub_475960(this);
}

//----- (0040F060) --------------------------------------------------------
int __cdecl sub_40F060(int a1)
{
  return a1 + 33;
}

//----- (0040F070) --------------------------------------------------------
void *__thiscall sub_40F070(int this, void *a2)
{
  int v3; // eax@1

  v3 = sub_418790(this);
  sub_446700(a2, *(_DWORD *)v3);
  return a2;
}

//----- (0040F0A0) --------------------------------------------------------
void *__thiscall sub_40F0A0(int this, void *a2, const char **a3)
{
  int v4; // eax@1

  v4 = sub_40FE90(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (0040F0D0) --------------------------------------------------------
void *__thiscall sub_40F0D0(int this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_40FE70() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_410180(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)_tolower(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)_tolower(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_40FF20((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)_tolower(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)_tolower(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_410050((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)_tolower(*(_DWORD *)v20) = 1;
        *(_BYTE *)_tolower(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)_tolower(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)_tolower(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_410050((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)_tolower(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)_tolower(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_40FF20((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)_tolower(*(_DWORD *)v34) = 1;
        *(_BYTE *)_tolower(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)_tolower(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)_tolower(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (0040F510) --------------------------------------------------------
int __thiscall sub_40F510(void *this)
{
  void *v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  if ( dword_4E2F10 )
    dword_4E2F10(this);
  (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 8))(v2);
  return _initp_misc_winxfltr();
}
// 4E2F10: using guessed type int (__cdecl *dword_4E2F10)(_DWORD);

//----- (0040F550) --------------------------------------------------------
void *__thiscall sub_40F550(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  sub_40F580(this, a2);
  *(_DWORD *)v3 = &std__length_error___vftable_;
  return v3;
}
// 4D2718: using guessed type int (__stdcall *std__length_error___vftable_)(int);

//----- (0040F580) --------------------------------------------------------
void *__thiscall sub_40F580(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet("unknown");
  *(_DWORD *)v3 = &std__logic_error___vftable_;
  sub_40F730((char *)v3 + 8, a2);
  return v3;
}
// 40F5C0: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4D270C: using guessed type int (__stdcall *std__logic_error___vftable_)(int);

//----- (0040F610) --------------------------------------------------------
int __thiscall sub_40F610(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  std__locale__facet___facet(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}
// 40F640: using guessed type int __thiscall std__locale__facet___facet(_DWORD);

//----- (0040F660) --------------------------------------------------------
int __thiscall sub_40F660(int this)
{
  return sub_4012D0((void *)(this + 8));
}

//----- (0040F680) --------------------------------------------------------
int __thiscall sub_40F680(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_40F6B0(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0040F6B0) --------------------------------------------------------
int __thiscall sub_40F6B0(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  *(_DWORD *)this = &std__logic_error___vftable_;
  sub_40F780((int)((char *)this + 8));
  return std__locale__facet___facet(v2);
}
// 40F640: using guessed type int __thiscall std__locale__facet___facet(_DWORD);
// 4D270C: using guessed type int (__stdcall *std__logic_error___vftable_)(int);

//----- (0040F6E0) --------------------------------------------------------
int __thiscall sub_40F6E0(void *this)
{
  *(_DWORD *)this = &std__length_error___vftable_;
  return sub_40F6B0(this);
}
// 4D2718: using guessed type int (__stdcall *std__length_error___vftable_)(int);

//----- (0040F700) --------------------------------------------------------
int __thiscall sub_40F700(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_40F6E0(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0040F730) --------------------------------------------------------
void *__thiscall sub_40F730(void *this, int a2)
{
  void *v3; // ST0C_4@1
  char v4; // ST08_1@1

  v3 = this;
  v4 = (char)this;
  std___Init_locks__operator_(a2);
  sub_44F7C0(v3, v4);
  sub_40F8A0((int)v3, 0, 0);
  sub_40F7A0(v3, a2, 0, dword_4B4FB8);
  return v3;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);
// 4B4FB8: using guessed type int dword_4B4FB8;

//----- (0040F780) --------------------------------------------------------
int __thiscall sub_40F780(int this)
{
  return sub_40F8A0(this, 1, 0);
}

//----- (0040F7A0) --------------------------------------------------------
void *__thiscall sub_40F7A0(void *this, int a2, int a3, int a4)
{
  int v4; // eax@8
  void *v5; // eax@8
  void *v6; // ST04_4@8
  size_t v7; // ST08_4@8
  void *v9; // [sp+0h] [bp-8h]@1
  int v10; // [sp+4h] [bp-4h]@3

  v9 = this;
  if ( unknown_libname_4(a2) < (unsigned int)a3 )
    sub_49F1EE();
  v10 = unknown_libname_4(a2) - a3;
  if ( a4 < (unsigned int)v10 )
    v10 = a4;
  if ( v9 == (void *)a2 )
  {
    sub_40F920((int)v9, v10 + a3, dword_4B4FB8);
    sub_40F920((int)v9, 0, a3);
  }
  else
  {
    if ( sub_40FA20(v9, v10, 0) )
    {
      v4 = unknown_libname_1(v10);
      v5 = (void *)unknown_libname_1(a3 + v4);
      std__char_traits_char___copy(v5, v6, v7);
      sub_40F9D0((int)v9, v10);
    }
  }
  return v9;
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);
// 40F880: using guessed type int __thiscall unknown_libname_4(_DWORD);
// 4B4FB8: using guessed type int dword_4B4FB8;

//----- (0040F8A0) --------------------------------------------------------
int __thiscall sub_40F8A0(int this, char a2, size_t a3)
{
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@4

  v4 = this;
  if ( a2 )
  {
    if ( *(_DWORD *)(this + 24) >= 0x10u )
    {
      v5 = *(_DWORD *)(this + 4);
      if ( a3 )
        std__char_traits_char___copy((void *)(this + 4), (void *)v5, a3);
      sub_4338F0(v5, *(_DWORD *)(v4 + 24) + 1);
    }
  }
  *(_DWORD *)(v4 + 24) = 15;
  return sub_40F9D0(v4, a3);
}

//----- (0040F920) --------------------------------------------------------
int __thiscall sub_40F920(int this, unsigned int a2, int a3)
{
  int v3; // eax@6
  int v4; // eax@6
  const void *v5; // ST04_4@6
  size_t v6; // ST08_4@6
  int v8; // [sp+0h] [bp-8h]@1

  v8 = this;
  if ( *(_DWORD *)(this + 20) < a2 )
    sub_49F1EE();
  if ( *(_DWORD *)(this + 20) - a2 < a3 )
    a3 = *(_DWORD *)(this + 20) - a2;
  if ( a3 )
  {
    v3 = unknown_libname_1(*(_DWORD *)(this + 20) - a2 - a3);
    v4 = unknown_libname_1(a3 + a2 + v3);
    sub_40F9B0((void *)(a2 + v4), v5, v6);
    sub_40F9D0(v8, *(_DWORD *)(v8 + 20) - a3);
  }
  return v8;
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);

//----- (0040F9B0) --------------------------------------------------------
void *__cdecl sub_40F9B0(void *a1, const void *a2, size_t a3)
{
  return memcpy_0(a1, a2, a3);
}

//----- (0040F9D0) --------------------------------------------------------
int __thiscall sub_40F9D0(int this, int a2)
{
  int v3; // eax@1
  int v4; // ST04_4@1
  char v5; // [sp+7h] [bp-1h]@1

  v5 = 0;
  *(_DWORD *)(this + 20) = a2;
  v3 = unknown_libname_1(&v5);
  return std__char_traits_char___assign(a2 + v3, v4);
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);
// 40FA10: using guessed type _DWORD __cdecl std__char_traits_char___assign(_DWORD, _DWORD);

//----- (0040FA20) --------------------------------------------------------
bool __thiscall sub_40FA20(void *this, int a2, char a3)
{
  int v4; // [sp+0h] [bp-8h]@8
  int v5; // [sp+4h] [bp-4h]@1

  v5 = (int)this;
  if ( unknown_libname_25(this) < (unsigned int)a2 )
    sub_49F289();
  if ( *(_DWORD *)(v5 + 24) >= (unsigned int)a2 )
  {
    if ( a3 && (unsigned int)a2 < 0x10 )
    {
      if ( (unsigned int)a2 >= *(_DWORD *)(v5 + 20) )
        v4 = *(_DWORD *)(v5 + 20);
      else
        v4 = a2;
      sub_40F8A0(v5, 1, v4);
    }
    else
    {
      if ( !a2 )
        sub_40F9D0(v5, 0);
    }
  }
  else
  {
    sub_40FB00((void *)v5, a2, *(_DWORD *)(v5 + 20));
  }
  return (unsigned int)a2 > 0;
}
// 40FAC0: using guessed type int __thiscall unknown_libname_25(_DWORD);

//----- (0040FB00) --------------------------------------------------------
int __thiscall sub_40FB00(void *this, int a2, int a3)
{
  void *v3; // eax@7
  size_t v4; // ST08_4@7
  int v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1
  void *v8; // [sp+8h] [bp-4h]@6

  v6 = (int)this;
  v7 = a2 | 0xF;
  if ( unknown_libname_25(this) >= (a2 | 0xFu) )
  {
    if ( v7 / 3u < *(_DWORD *)(v6 + 24) >> 1 )
    {
      if ( *(_DWORD *)(v6 + 24) <= (unsigned int)(unknown_libname_25(v6) - (*(_DWORD *)(v6 + 24) >> 1)) )
        v7 = *(_DWORD *)(v6 + 24) + (*(_DWORD *)(v6 + 24) >> 1);
    }
  }
  else
  {
    v7 = a2;
  }
  v8 = sub_40FC00(v7 + 1);
  if ( a3 )
  {
    v3 = (void *)unknown_libname_1(a3);
    std__char_traits_char___copy(v8, v3, v4);
  }
  sub_40F8A0(v6, 1, 0);
  *(_DWORD *)(v6 + 4) = v8;
  *(_DWORD *)(v6 + 24) = v7;
  return sub_40F9D0(v6, a3);
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);
// 40FAC0: using guessed type int __thiscall unknown_libname_25(_DWORD);

//----- (0040FC00) --------------------------------------------------------
void *__stdcall sub_40FC00(size_t a1)
{
  return sub_40FC50(a1);
}

//----- (0040FC50) --------------------------------------------------------
void *__cdecl sub_40FC50(size_t a1)
{
  return sub_401000(a1);
}

//----- (0040FC70) --------------------------------------------------------
int __thiscall sub_40FC70(void *this, char a2, const void *a3)
{
  int result; // eax@1
  int v4; // ST0C_4@1
  int v5; // eax@1
  int v6; // ST10_4@1
  int v7; // eax@1
  int v8; // ST14_4@1
  int v9; // eax@1

  v4 = (int)this;
  v5 = unknown_libname_7();
  v6 = v5;
  v7 = sub_446FF0(v5);
  v8 = (int)sub_410210(v6, *(_DWORD *)v7, a3);
  sub_410280(v4, 1u);
  *(_DWORD *)sub_446FF0(v6) = v8;
  v9 = sub_446FF0(v8);
  result = sub_474590(*(_DWORD *)v9);
  *(_DWORD *)result = v8;
  return result;
}

//----- (0040FCF0) --------------------------------------------------------
int *__thiscall sub_40FCF0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_410310(this);
  return v2;
}

//----- (0040FD10) --------------------------------------------------------
int __thiscall sub_40FD10(void *this, char *a2)
{
  void *v3; // [sp-4h] [bp-Ch]@1
  void *v4; // [sp+0h] [bp-8h]@1

  v4 = this;
  v3 = this;
  _LocaleUpdate__GetLocaleT(&v3);
  sub_44F7C0(v4, (char)v3);
  sub_40F8A0((int)v4, 0, 0);
  sub_40FD50(v4, a2);
  return (int)v4;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0040FD50) --------------------------------------------------------
void *__thiscall sub_40FD50(void *this, char *a2)
{
  void *v3; // ST08_4@1
  size_t v4; // eax@1

  v3 = this;
  v4 = std__char_traits_char___length(a2);
  return sub_40FDA0(v3, a2, v4);
}

//----- (0040FDA0) --------------------------------------------------------
void *__thiscall sub_40FDA0(void *this, char *a2, size_t a3)
{
  void *result; // eax@2
  int v4; // eax@2
  int v5; // ST08_4@2
  void *v6; // eax@4
  void *v7; // ST04_4@4
  void *v8; // [sp+0h] [bp-4h]@1

  v8 = this;
  if ( sub_40FE20(this, (unsigned int)a2) )
  {
    v4 = unknown_libname_1(a3);
    result = sub_40F7A0(v8, (int)v8, (int)&a2[-v4], v5);
  }
  else
  {
    if ( sub_40FA20(v8, a3, 0) )
    {
      v6 = (void *)unknown_libname_1(a2);
      std__char_traits_char___copy(v6, v7, a3);
      sub_40F9D0((int)v8, a3);
    }
    result = v8;
  }
  return result;
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);

//----- (0040FE20) --------------------------------------------------------
char __thiscall sub_40FE20(void *this, unsigned int a2)
{
  int v2; // eax@2
  int v3; // ST00_4@2
  int v5; // [sp+0h] [bp-4h]@1

  return a2 >= unknown_libname_1(this) && (v2 = unknown_libname_1(v5), *(_DWORD *)(v3 + 20) + v2 > a2);
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);

//----- (0040FE70) --------------------------------------------------------
signed int __cdecl sub_40FE70()
{
  return sub_410330();
}

//----- (0040FE90) --------------------------------------------------------
int __thiscall sub_40FE90(int this, const char **a2)
{
  int v2; // ST08_4@1
  const char *v3; // ST04_4@3
  int v4; // eax@3
  int v6; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_478AB0(this);
  v7 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_40F060(v6) )
  {
    v3 = *a2;
    v4 = sub_473500(v6);
    if ( sub_40EEE0(*(const char **)v4, v3) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)sub_474590(v6);
    }
  }
  return v7;
}

//----- (0040FF20) --------------------------------------------------------
int __thiscall sub_40FF20(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *(_DWORD *)v2;
  v3 = sub_474590(v11);
  if ( !*(_BYTE *)sub_40F060(*(_DWORD *)v3) )
  {
    v4 = sub_474590(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00410050) --------------------------------------------------------
int __thiscall sub_410050(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_474590(a2);
  v2 = sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *(_DWORD *)v2;
  v3 = sub_430F90(v11);
  if ( !*(_BYTE *)sub_40F060(*(_DWORD *)v3) )
  {
    v4 = sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00410180) --------------------------------------------------------
void *__stdcall sub_410180(int a1, int a2, int a3, int a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_410360(1);
  v6 = (int)operator new(0x24u, v7);
  if ( v6 )
    sub_410480(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00410210) --------------------------------------------------------
void *__stdcall sub_410210(int a1, int a2, const void *a3)
{
  int v4; // [sp+8h] [bp-8h]@1
  void *v5; // [sp+Ch] [bp-4h]@1

  v5 = sub_4102F0(1);
  v4 = (int)operator new(0x2Cu, v5);
  if ( v4 )
    sub_4104E0(v4, a1, a2, a3);
  return v5;
}

//----- (00410280) --------------------------------------------------------
int __thiscall sub_410280(int this, unsigned int a2)
{
  void *v2; // eax@2
  int result; // eax@3
  int v4; // [sp+0h] [bp-44h]@1
  char v5; // [sp+4h] [bp-40h]@2
  char v6; // [sp+20h] [bp-24h]@2

  v4 = this;
  if ( sub_410380() - *(_DWORD *)(this + 8) < a2 )
  {
    sub_40FD10(&v5, "list<T> too long");
    v2 = sub_40F550(&v6, (int)&v5);
    sub_40F510(v2);
    sub_40F6E0(&v6);
    sub_40F780((int)&v5);
  }
  result = v4;
  *(_DWORD *)(v4 + 8) += a2;
  return result;
}

//----- (004102F0) --------------------------------------------------------
void *__stdcall sub_4102F0(int a1)
{
  return sub_410560(a1);
}

//----- (00410310) --------------------------------------------------------
int *__thiscall sub_410310(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4103A0(this);
  return v2;
}

//----- (00410330) --------------------------------------------------------
signed int __cdecl sub_410330()
{
  return 214748364;
}

//----- (00410360) --------------------------------------------------------
void *__stdcall sub_410360(int a1)
{
  return sub_410580(a1);
}

//----- (00410380) --------------------------------------------------------
signed int __cdecl sub_410380()
{
  return sub_478E40();
}

//----- (004103A0) --------------------------------------------------------
int __thiscall sub_4103A0(int *this)
{
  int result; // eax@2
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  if ( *(_BYTE *)sub_40F060(*this) )
  {
    result = *(_DWORD *)sub_430F90(*v5);
    *v5 = result;
  }
  else
  {
    v2 = sub_474590(*v5);
    if ( *(_BYTE *)sub_40F060(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        if ( *(_BYTE *)sub_40F060(*v4) )
          break;
        if ( *v5 != *(_DWORD *)sub_474590(v6) )
          break;
        *v5 = v6;
      }
      result = *(_BYTE *)sub_40F060(v6);
      if ( !result )
        *v5 = v6;
    }
    else
    {
      v3 = sub_474590(*v5);
      result = sub_410520(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00410480) --------------------------------------------------------
int __thiscall sub_410480(int this, int a2, int a3, int a4, int a5, char a6)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  *(_DWORD *)(this + 12) = *(_DWORD *)a5;
  *(_DWORD *)(this + 16) = *(_DWORD *)(a5 + 4);
  *(_DWORD *)(this + 20) = *(_DWORD *)(a5 + 8);
  *(_DWORD *)(this + 24) = *(_DWORD *)(a5 + 12);
  *(_DWORD *)(this + 28) = *(_DWORD *)(a5 + 16);
  *(_BYTE *)(this + 32) = a6;
  *(_BYTE *)(this + 33) = 0;
  return this;
}

//----- (004104E0) --------------------------------------------------------
int __thiscall sub_4104E0(int this, int a2, int a3, const void *a4)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  memcpy((void *)(this + 8), a4, 0x24u);
  return this;
}

//----- (00410520) --------------------------------------------------------
int __cdecl sub_410520(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_430F90(a1);
    if ( *(_BYTE *)sub_40F060(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00410560) --------------------------------------------------------
void *__cdecl sub_410560(int a1)
{
  return sub_401000(44 * a1);
}

//----- (00410580) --------------------------------------------------------
void *__cdecl sub_410580(int a1)
{
  return sub_401000(36 * a1);
}

//----- (004105A0) --------------------------------------------------------
void *__thiscall sub_4105A0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v4 = 0;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_4105D0(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004105D0) --------------------------------------------------------
void *__thiscall sub_4105D0(void *this, int a2, int a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(a3);
  sub_432060(v4, a2, v5);
  sub_410610((int)v4);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00410610) --------------------------------------------------------
int __thiscall sub_410610(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = sub_410680();
  *(_BYTE *)sub_40F060(*(_DWORD *)(v2 + 4)) = 1;
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)CServer::SendAlive(v2) = *(_DWORD *)(v2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00410680) --------------------------------------------------------
int __cdecl sub_410680()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-14h]@1
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  int v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v1 = (int)sub_410360(1);
  v8 = v1;
  v9 = 0;
  v7 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v7);
  ++v9;
  v6 = 0;
  v3 = sub_446FF0(v8);
  sub_42F9B0((void *)v3, (void **)&v6);
  ++v9;
  v5 = 0;
  v4 = sub_430F90(v8);
  sub_42F9B0((void *)v4, (void **)&v5);
  *(_BYTE *)_tolower(v8) = 1;
  *(_BYTE *)sub_40F060(v8) = 0;
  return v8;
}

//----- (004107A0) --------------------------------------------------------
int __thiscall sub_4107A0(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_47A870(v3, (char)v2);
  *((_DWORD *)v3 + 1) = sub_4107E0();
  *((_DWORD *)v3 + 2) = 0;
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004107E0) --------------------------------------------------------
int __cdecl sub_4107E0()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // [sp+4h] [bp-8h]@1
  int v5; // [sp+8h] [bp-4h]@1

  v1 = (int)sub_4102F0(1);
  v4 = v1;
  v5 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v4);
  ++v5;
  v3 = sub_446FF0(v4);
  sub_42F9B0((void *)v3, (void **)&v4);
  return v4;
}

//----- (00410880) --------------------------------------------------------
int __thiscall sub_410880(int this)
{
  return sub_4108A0(this);
}

//----- (004108A0) --------------------------------------------------------
int __thiscall sub_4108A0(int this)
{
  return sub_4108C0(this);
}

//----- (004108C0) --------------------------------------------------------
int __thiscall sub_4108C0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_410970(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00410970) --------------------------------------------------------
void *__thiscall sub_410970(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_411220(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_411280(&a3, (int)&v10, 0);
      sub_410A10((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00410A10) --------------------------------------------------------
int __thiscall sub_410A10(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_40F060(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_411370(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_40F060(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_40F060(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_40F060(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_40F060(v57) )
        v51 = v55;
      else
        v51 = sub_411330(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_40F060(v57) )
        v50 = v55;
      else
        v50 = sub_410520(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_40F060(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = _tolower(v58);
    v34 = _tolower(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)_tolower(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)_tolower(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)_tolower(v56) )
        {
          *(_BYTE *)_tolower(v56) = 1;
          *(_BYTE *)_tolower(v55) = 0;
          sub_40FF20((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_40F060(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)_tolower(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)_tolower(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)_tolower(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)_tolower(*(_DWORD *)v40) = 1;
              *(_BYTE *)_tolower(v56) = 0;
              sub_410050((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = _tolower(v55);
            *(_BYTE *)_tolower(v56) = *(_BYTE *)v41;
            *(_BYTE *)_tolower(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)_tolower(*(_DWORD *)v42) = 1;
            sub_40FF20((void *)v52, v55);
            break;
          }
          *(_BYTE *)_tolower(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)_tolower(v56) )
        {
          *(_BYTE *)_tolower(v56) = 1;
          *(_BYTE *)_tolower(v55) = 0;
          sub_410050((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_40F060(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)_tolower(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)_tolower(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)_tolower(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)_tolower(*(_DWORD *)v46) = 1;
              *(_BYTE *)_tolower(v56) = 0;
              sub_40FF20((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = _tolower(v55);
            *(_BYTE *)_tolower(v56) = *(_BYTE *)v47;
            *(_BYTE *)_tolower(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)_tolower(*(_DWORD *)v48) = 1;
            sub_410050((void *)v52, v55);
            break;
          }
          *(_BYTE *)_tolower(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)_tolower(v57) = 1;
  }
  sub_44CD70(v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (004111A0) --------------------------------------------------------
void *__thiscall sub_4111A0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  sub_40F580(this, a2);
  *(_DWORD *)v3 = &std__out_of_range___vftable_;
  return v3;
}
// 4D2724: using guessed type int (__stdcall *std__out_of_range___vftable_)(int);

//----- (004111D0) --------------------------------------------------------
int __thiscall sub_4111D0(void *this)
{
  *(_DWORD *)this = &std__out_of_range___vftable_;
  return sub_40F6B0(this);
}
// 4D2724: using guessed type int (__stdcall *std__out_of_range___vftable_)(int);

//----- (004111F0) --------------------------------------------------------
int __thiscall sub_4111F0(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_4111D0(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (00411220) --------------------------------------------------------
int __thiscall sub_411220(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_4112B0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 4112B0: using guessed type _DWORD __stdcall sub_4112B0(_DWORD);

//----- (00411280) --------------------------------------------------------
int __thiscall sub_411280(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_411370(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (004112B0) --------------------------------------------------------
int __stdcall sub_4112B0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_40F060(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_4112B0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 4112B0: using guessed type _DWORD __stdcall sub_4112B0(_DWORD);

//----- (00411330) --------------------------------------------------------
int __cdecl sub_411330(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_474590(a1);
    if ( *(_BYTE *)sub_40F060(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00411370) --------------------------------------------------------
int *__thiscall sub_411370(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_411390(this);
  return v2;
}

//----- (00411390) --------------------------------------------------------
int *__thiscall sub_411390(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4113B0(this);
  return v2;
}

//----- (004113B0) --------------------------------------------------------
int __thiscall sub_4113B0(int *this)
{
  int result; // eax@1
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  result = sub_40F060(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = sub_430F90(*v5);
    if ( *(_BYTE *)sub_40F060(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        result = *(_BYTE *)sub_40F060(*v4);
        if ( result )
          break;
        result = sub_430F90(v6);
        if ( *v5 != *(_DWORD *)result )
          break;
        *v5 = v6;
      }
      *v5 = v6;
    }
    else
    {
      v3 = sub_430F90(*v5);
      result = sub_411330(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00411470) --------------------------------------------------------
char __cdecl sub_411470(int a1, int a2)
{
  char result; // al@1
  char v3; // ST03_1@1

  v3 = *(_BYTE *)a1;
  *(_BYTE *)a1 = *(_BYTE *)a2;
  result = v3;
  *(_BYTE *)a2 = v3;
  return result;
}

//----- (004114A0) --------------------------------------------------------
int __thiscall CGuild::CGuild(int this)
{
  int v2; // ST0C_4@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  int v7; // eax@1
  int v8; // eax@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B4FF0;
  sub_4184E0((void *)(v2 + 380));
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  memset((void *)(v2 + 44), 0, 0x11u);
  *(_DWORD *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 72) = 1;
  *(_DWORD *)(v2 + 76) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  v3 = sub_432EF0(912);
  strcpy((char *)(v2 + 84), (const char *)v3);
  v4 = sub_432EF0(913);
  strcpy((char *)(v2 + 99), (const char *)v4);
  v5 = sub_432EF0(914);
  strcpy((char *)(v2 + 114), (const char *)v5);
  v6 = sub_432EF0(915);
  strcpy((char *)(v2 + 129), (const char *)v6);
  v7 = sub_432EF0(916);
  strcpy((char *)(v2 + 144), (const char *)v7);
  v8 = sub_432EF0(917);
  strcpy((char *)(v2 + 159), (const char *)v8);
  memset((void *)(v2 + 174), 0, 0xB5u);
  *(_DWORD *)(v2 + 356) = 0;
  *(_DWORD *)(v2 + 360) = 3;
  *(_DWORD *)(v2 + 364) = 1;
  *(_DWORD *)(v2 + 368) = 1;
  *(_DWORD *)(v2 + 372) = 0;
  *(_DWORD *)(v2 + 376) = 0;
  *(_DWORD *)(v2 + 392) = 0;
  *(_DWORD *)(v2 + 396) = 0;
  memset((void *)(v2 + 400), 0, 8u);
  return v2;
}
// 4B4FF0: using guessed type int (__stdcall *off_4B4FF0)(int);

//----- (00411680) --------------------------------------------------------
int __userpurge CGuild::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CGuild::_CGuild(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (004116B0) --------------------------------------------------------
int __usercall CGuild::_CGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4B4FF0;
  sub_4116E0(a1 + 380);
  return CBase::_CBase(v5, a2, a3, a4);
}
// 4B4FF0: using guessed type int (__stdcall *off_4B4FF0)(int);

//----- (004116E0) --------------------------------------------------------
int __thiscall sub_4116E0(int this)
{
  return sub_418510(this);
}

//----- (00411700) --------------------------------------------------------
__int32 __usercall CGuild::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v4; // eax@3
  char v6; // [sp+0h] [bp-Ch]@2
  char v7; // [sp+4h] [bp-8h]@3
  char v8; // [sp+8h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_40F070((int)&unk_4E0968, &v8);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E0968, &v6);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = sub_420250((int *)&v8);
    CBase::Delete(*(void **)(v4 + 4));
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  sub_418480((int)&unk_4E0968);
  return sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00411780) --------------------------------------------------------
signed int __thiscall CBase::Delete(void *this)
{
  signed int result; // eax@1
  void *v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  result = sub_496CD0();
  if ( !result )
    result = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 36))(v2);
  return result;
}

//----- (004117B0) --------------------------------------------------------
int __usercall CGuild::SecondProcess<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( CGuild::IsWarringPeriod() )
    CCastle::SecondProcess(a1, a2, a3);
  return sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
}

//----- (004117E0) --------------------------------------------------------
int __usercall CGuild::MinuteProcess<eax>(DWORD a1<ebx>, char a2<dil>, DWORD a3<esi>, unsigned int a4)
{
  void *v4; // eax@2
  char v6; // [sp+0h] [bp-28h]@8
  char v7; // [sp+4h] [bp-24h]@7
  char v8; // [sp+8h] [bp-20h]@6
  char v9; // [sp+Ch] [bp-1Ch]@2
  int v10; // [sp+10h] [bp-18h]@47
  int v11; // [sp+14h] [bp-14h]@3
  int v12; // [sp+18h] [bp-10h]@1
  int v13; // [sp+1Ch] [bp-Ch]@10
  time_t v14; // [sp+20h] [bp-8h]@10
  struct tm *v15; // [sp+24h] [bp-4h]@10

  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_40F070((int)&unk_4E0968, &v12);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E0968, &v9);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v11 = *(_DWORD *)(sub_420250(&v12) + 4);
    if ( *(_DWORD *)(v11 + 356) && *(_DWORD *)(v11 + 356) < a4 )
    {
      if ( *(_DWORD *)(v11 + 32) )
      {
        *(_DWORD *)(v11 + 356) = 0;
        sub_446090(&v12, (int)&v8, 0);
      }
      else
      {
        CBase::Delete((void *)v11);
        v12 = *(_DWORD *)sub_44AF50(&unk_4E0968, (int)&v7, v12);
      }
    }
    else
    {
      sub_446090(&v12, (int)&v6, 0);
    }
  }
  v14 = time(0);
  v15 = localtime(&v14);
  v13 = 0;
  if ( *(_WORD *)dword_4E1174 & 0x100 )
  {
    if ( dword_4E1174[0] & 2 )
    {
      if ( v15->tm_min >= 5 )
      {
        if ( v15->tm_min >= 15 )
        {
          if ( v15->tm_min >= 16 )
          {
            if ( v15->tm_min < 50 )
              v13 = 4;
          }
          else
          {
            v13 = 2;
          }
        }
        else
        {
          v13 = 1;
        }
      }
      else
      {
        v13 = 0;
      }
    }
    else
    {
      if ( v15->tm_hour >= 17 )
      {
        if ( v15->tm_hour >= 18 )
        {
          if ( v15->tm_hour < 19 )
            v13 = 4;
        }
        else
        {
          if ( v15->tm_min >= 30 )
            v13 = 2;
          else
            v13 = 1;
        }
      }
      else
      {
        v13 = 0;
      }
    }
  }
  else
  {
    switch ( v15->tm_wday )
    {
      case 4:
        if ( v15->tm_hour >= 21 )
          v13 = 1;
        break;
      case 5:
        if ( v15->tm_hour >= 21 )
          v13 = 2;
        else
          v13 = 1;
        break;
      case 6:
        if ( v15->tm_hour >= 21 )
        {
          if ( v15->tm_hour < 23 )
            v13 = 4;
        }
        else
        {
          v13 = 2;
        }
        break;
    }
  }
  if ( dword_4E0964 != v13 )
  {
    if ( v13 == 4 )
    {
      v10 = v14;
      if ( *(_WORD *)dword_4E1174 & 0x100 )
      {
        if ( dword_4E1174[0] & 2 )
          v10 += 60 * (30 - v15->tm_min);
        else
          v10 += 3600;
      }
      else
      {
        if ( v15->tm_hour == 21 )
          v10 += 7200;
        else
          v10 += 3600;
      }
      CCastle::WarBegin(a2, a1, a3, v10);
    }
    if ( dword_4E0964 != 4 || !CCastle::IsWarDeclared() )
      dword_4E0964 = v13;
  }
  if ( dword_4E0964 )
    CAlliance::PostponeExpire(a1, a2, a3);
  else
    CAlliance::Expire(a1, a2, a3, v14);
  sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
  return CCastle::TaxSave(a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E0964: using guessed type int dword_4E0964;

//----- (00411AB0) --------------------------------------------------------
int __usercall CGuild::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v5; // eax@5
  int v7; // [sp+0h] [bp-18h]@1
  char v8; // [sp+8h] [bp-10h]@2
  char v9; // [sp+Ch] [bp-Ch]@5
  int v10; // [sp+10h] [bp-8h]@3
  char v11; // [sp+14h] [bp-4h]@1

  v7 = a1;
  sub_40F070(a1 + 380, &v11);
  while ( 1 )
  {
    v4 = sub_430C20(v7 + 380, &v8);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v10 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v11) + 4) + 32);
    if ( v10 )
    {
      CPlayer::SetGID(v10, a2, a3, a4, 0);
      CPlayer::SetGuild(v10, a2, a3, a4, 0);
      CPlayer::SetGuildLevel(v10, a2, a3, a4, 0);
      CPlayer::SetGuildName(v10, a2, a3, a4, &byte_4B437D);
      CPlayer::SetGuildStandard(v10, a2, a3, a4, 0);
      CPlayer::SetGuildClass(v10, a2, a3, a4, 0, &byte_4B437D);
      CIOObject::Release(v10, a2, a3, a4);
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v11) + 4) + 32) = 0;
      --*(_DWORD *)(v7 + 32);
    }
    v5 = sub_420250((int *)&v11);
    sub_401020(*(_DWORD *)(v5 + 4));
    sub_446090((int *)&v11, (int)&v9, 0);
  }
  sub_418530(v7 + 380);
  if ( *(_DWORD *)(v7 + 396) )
    CAlliance::DeleteSetGuild(*(_DWORD *)(v7 + 396), a2, a3, a4, v7);
  return CBase::OnDelete(v7, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00411BE0) --------------------------------------------------------
int __usercall CGuild::IsLoad<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  char v6; // [sp+4h] [bp-Ch]@1
  char v7; // [sp+8h] [bp-8h]@1
  int v8; // [sp+Ch] [bp-4h]@1

  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  sub_44AE20((int)&unk_4E0968, (int)&v7, (int)&a4);
  v4 = sub_430C20((int)&unk_4E0968, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v8 = 1;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v7) + 4) + 356) )
    {
      a3 = GetTickCount() + 600000;
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v7) + 4) + 356) = a3;
    }
  }
  sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
  return v8;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00411C80) --------------------------------------------------------
void __usercall CGuild::Load(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6)
{
  void *v6; // eax@1
  int v7; // eax@6
  int v8; // eax@11
  int v9; // [sp+0h] [bp-6Ch]@20
  int v10; // [sp+4h] [bp-68h]@18
  int v11; // [sp+8h] [bp-64h]@15
  int v12; // [sp+Ch] [bp-60h]@4
  char v13; // [sp+14h] [bp-58h]@11
  char v14; // [sp+1Ch] [bp-50h]@11
  void *v15; // [sp+24h] [bp-48h]@11
  char v16; // [sp+28h] [bp-44h]@6
  char v17; // [sp+30h] [bp-3Ch]@6
  int v18; // [sp+38h] [bp-34h]@3
  char v19; // [sp+3Ch] [bp-30h]@1
  char v20; // [sp+40h] [bp-2Ch]@11
  char v21; // [sp+44h] [bp-28h]@11
  int i; // [sp+48h] [bp-24h]@8
  char v23; // [sp+4Ch] [bp-20h]@1
  int v24; // [sp+50h] [bp-1Ch]@42
  int v25; // [sp+54h] [bp-18h]@6
  int v26; // [sp+58h] [bp-14h]@11
  int v27; // [sp+5Ch] [bp-10h]@11
  int v28; // [sp+60h] [bp-Ch]@8
  char v29; // [sp+64h] [bp-8h]@6
  char v30; // [sp+68h] [bp-4h]@6

  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20((int)&unk_4E0968, (int)&v23, (int)&a4);
  v6 = sub_430C20((int)&unk_4E0968, &v19);
  if ( (unsigned __int8)sub_47D070(v6) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
  }
  else
  {
    v18 = (int)sub_401000(0x198u);
    if ( v18 )
      v12 = CGuild::CGuild(v18);
    else
      v12 = 0;
    v25 = v12;
    a5 = sub_497620(a5, v12 + 44);
    a5 = sub_47A240(a5, v25 + 76);
    a5 = sub_47A240(a5, v25 + 68);
    a5 = sub_497620(a5, v25 + 174);
    a5 = sub_497620(a5, v25 + 84);
    a5 = sub_497620(a5, v25 + 99);
    a5 = sub_497620(a5, v25 + 114);
    a5 = sub_497620(a5, v25 + 129);
    a5 = sub_497620(a5, v25 + 144);
    a5 = sub_497620(a5, v25 + 159);
    a5 = sub_47A240(a5, v25 + 360);
    a5 = sub_47A240(a5, v25 + 364);
    a5 = sub_47A240(a5, v25 + 368);
    a5 = sub_47A240(a5, v25 + 372);
    a5 = sub_47A240(a5, v25 + 376);
    a5 = sub_47A240(a5, v25 + 392);
    v7 = sub_418940(&v16, a4, v25);
    sub_41CF00((int)&v17, v7);
    sub_445DF0((int)&unk_4E0968, (int)&v29, (int)&v17);
    if ( v30 )
    {
      *(_DWORD *)(v25 + 64) = 0;
      v28 = 0;
      a5 = sub_418960(a5, &v28);
      for ( i = 0; i < v28; ++i )
      {
        v15 = sub_401000(0x28u);
        v26 = (int)v15;
        a5 = sub_47A240(a5, &v27);
        a5 = sub_497620(a5, v26);
        *(_DWORD *)(v26 + 20) = 0;
        a5 = sub_418980(a5, v26 + 20);
        *(_DWORD *)(v26 + 24) = 0;
        a5 = sub_418960(a5, v26 + 24);
        *(_DWORD *)(v26 + 28) = 0;
        a5 = sub_418960(a5, v26 + 28);
        a5 = sub_47A240(a5, v26 + 36);
        *(_DWORD *)(v26 + 32) = 0;
        v8 = sub_418940(&v13, v27, v26);
        sub_41CF00((int)&v14, v8);
        sub_445DF0(v25 + 380, (int)&v20, (int)&v14);
        if ( v21 )
        {
          if ( *(_DWORD *)(v26 + 24) < 6 )
          {
            if ( 10000 * *(_DWORD *)(v26 + 20) >= 0 )
              v11 = 10000 * *(_DWORD *)(v26 + 20);
            else
              v11 = 0;
            if ( v11 + *(_DWORD *)(v25 + 64) <= 2000000000 )
            {
              if ( 10000 * *(_DWORD *)(v26 + 20) >= 0 )
                v9 = 10000 * *(_DWORD *)(v26 + 20);
              else
                v9 = 0;
              v10 = v9 + *(_DWORD *)(v25 + 64);
            }
            else
            {
              v10 = 2000000000;
            }
            *(_DWORD *)(v25 + 64) = v10;
          }
        }
        else
        {
          sub_4328C0("CGuild::Load() member insert error (gid:%d, pid:%d,count:%d)", a4, v27, v28);
          sub_401020(v26);
        }
      }
      if ( *(_WORD *)dword_4E1174 & 0x100 )
      {
        if ( *(_DWORD *)(v25 + 68) < 3 )
        {
          if ( *(_DWORD *)(v25 + 68) < 2 )
          {
            if ( *(_DWORD *)(v25 + 68) < 1 )
              *(_DWORD *)(v25 + 72) = 1;
            else
              *(_DWORD *)(v25 + 72) = 2;
          }
          else
          {
            *(_DWORD *)(v25 + 72) = 3;
          }
        }
        else
        {
          *(_DWORD *)(v25 + 72) = 4;
        }
        *(_DWORD *)(v25 + 72) = CGuild::CalPenaltyTLevel(v25);
      }
      else
      {
        if ( *(_DWORD *)(v25 + 68) < 16000000 )
        {
          if ( *(_DWORD *)(v25 + 68) < 7800000 )
          {
            if ( *(_DWORD *)(v25 + 68) < 2400000 )
              *(_DWORD *)(v25 + 72) = 1;
            else
              *(_DWORD *)(v25 + 72) = 2;
          }
          else
          {
            *(_DWORD *)(v25 + 72) = 3;
          }
        }
        else
        {
          *(_DWORD *)(v25 + 72) = 4;
        }
        *(_DWORD *)(v25 + 72) = CGuild::CalPenaltyLevel(v25);
      }
      v24 = 0;
      a5 = sub_418960(a5, &v24);
      if ( v24 )
        CAlliance::Load(a1, a2, a3, a5);
      if ( *(_DWORD *)(v25 + 392) )
        CAlliance::LoadSetGuild(a1, a2, a3, *(_DWORD *)(v25 + 392), a4, v25);
      if ( a6 )
      {
        CCastle::SetGuild(a6, a1, a2, a3, v25);
        ++*(_DWORD *)(v25 + 32);
      }
      CCastle::SetWarGuild(a1, a2, a3, a4, v25);
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
    }
    else
    {
      CBase::Delete((void *)v25);
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      sub_4328C0("CGuildAdmin::Load() guild insert error ( gid:%d )", a4);
    }
  }
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00412210) --------------------------------------------------------
void __usercall CGuild::Login(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@1
  int v5; // ST14_4@2
  int v6; // eax@2
  int v7; // eax@3
  int v8; // eax@3
  void *v9; // eax@3
  int v10; // ST14_4@4
  int v11; // eax@4
  int v12; // eax@5
  int v13; // eax@5
  int v14; // eax@5
  int v15; // eax@5
  int v16; // eax@5
  int v17; // ST14_4@5
  int v18; // eax@5
  char *v19; // ST14_4@5
  int v20; // eax@5
  int v21; // ST14_4@5
  int v22; // eax@5
  int v23; // eax@6
  void *v24; // ST10_4@8
  int v25; // eax@8
  int v26; // ST14_4@10
  char v27; // [sp+4h] [bp-18h]@3
  char v28; // [sp+8h] [bp-14h]@1
  int v29; // [sp+Ch] [bp-10h]@1
  void *v30; // [sp+10h] [bp-Ch]@8
  char v31; // [sp+14h] [bp-8h]@1
  char v32; // [sp+18h] [bp-4h]@3

  sub_47E0D0((volatile LONG *)&unk_4E0980);
  v29 = CPlayer::GetGID(a4, a1, a2, a3);
  sub_44AE20((int)&unk_4E0968, (int)&v31, (int)&v29);
  v4 = sub_430C20((int)&unk_4E0968, &v28);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
    v5 = *(_DWORD *)(a4 + 452);
    v6 = CPlayer::GetGID(a4, a1, a2, a3);
    sub_4328C0("CGuild::Login() guild key error (gid:%d,pid:%d)", v6, v5);
    CPlayer::SetGID(a4, a1, a2, a3, 0);
  }
  else
  {
    v7 = sub_420250((int *)&v31);
    sub_44AE20(*(_DWORD *)(v7 + 4) + 380, (int)&v32, a4 + 452);
    v8 = sub_420250((int *)&v31);
    v9 = sub_430C20(*(_DWORD *)(v8 + 4) + 380, &v27);
    if ( (unsigned __int8)unknown_libname_8(v9) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      v10 = *(_DWORD *)(a4 + 452);
      v11 = CPlayer::GetGID(a4, a1, a2, a3);
      sub_4328C0("CGuild::Login() guild member error (gid:%d,pid:%d)", v11, v10);
      CPlayer::SetGID(a4, a1, a2, a3, 0);
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v32) + 4) + 32) = a4;
      CIOObject::AddRef(a4, a1, a2, a3);
      v12 = sub_420250((int *)&v31);
      ++*(_DWORD *)(*(_DWORD *)(v12 + 4) + 32);
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v31) + 4) + 356) = 0;
      v13 = sub_420250((int *)&v31);
      CPlayer::SetGuild(a4, a1, a2, a3, *(_DWORD *)(v13 + 4));
      v14 = sub_420250((int *)&v31);
      CPlayer::SetGuildLevel(a4, a1, a2, a3, *(_DWORD *)(*(_DWORD *)(v14 + 4) + 72));
      v15 = sub_420250((int *)&v31);
      CPlayer::SetGuildName(a4, a1, a2, a3, (const char *)(*(_DWORD *)(v15 + 4) + 44));
      v16 = sub_420250((int *)&v31);
      CPlayer::SetGuildStandard(a4, a1, a2, a3, *(_DWORD *)(*(_DWORD *)(v16 + 4) + 76));
      v17 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v32) + 4) + 24);
      v18 = sub_420250((int *)&v31);
      v19 = CGuild::GetClass2Title(*(void **)(v18 + 4), v17);
      v20 = sub_420250((int *)&v32);
      CPlayer::SetGuildClass(a4, a1, a2, a3, *(_DWORD *)(*(_DWORD *)(v20 + 4) + 24), v19);
      v21 = *(_DWORD *)sub_420250((int *)&v31);
      v22 = sub_420250((int *)&v31);
      CGuild::SendMemberInfo(*(_DWORD *)(v22 + 4), a1, a3, a4, v21);
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v31) + 4) + 396) )
      {
        v23 = sub_420250((int *)&v31);
        CAlliance::AllianceInfo(*(_DWORD *)(*(_DWORD *)(v23 + 4) + 396), a1, a3, a4);
      }
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v32) + 4) + 28) )
      {
        v30 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bbsb");
        v24 = v30;
        v25 = sub_420250((int *)&v31);
        CGuild::Broadcast(*(_DWORD *)(v25 + 4), a1, a2, a3, v24, (void *)a4);
        CIOBuffer::Release((int)v30);
      }
      if ( *(_BYTE *)(*(_DWORD *)(sub_420250((int *)&v31) + 4) + 174) )
      {
        v26 = *(_DWORD *)(sub_420250((int *)&v31) + 4) + 174;
        CPlayer::Write(a1, a2, a3, a4, 94, (unsigned int)"bbs");
      }
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004124F0) --------------------------------------------------------
int __usercall CGuild::LoginCastle<eax>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a3<esi>, int a1, int a2)
{
  sub_47DE70((volatile LONG *)&unk_4E0980);
  CCastle::Login(ebx0, a3, a1, a2);
  return sub_47E080((volatile LONG *)&unk_4E0980, ebx0, edi0, a3);
}

//----- (00412520) --------------------------------------------------------
__int32 __userpurge CGuild::Logout<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@1
  __int32 result; // eax@2
  void *v7; // eax@2
  void *v8; // ST0C_4@2
  int v9; // eax@2
  void *v10; // eax@3
  int v11; // ST10_4@4
  int v12; // eax@4
  int v13; // [sp+0h] [bp-24h]@1
  char v14; // [sp+4h] [bp-20h]@3
  char v15; // [sp+8h] [bp-1Ch]@2
  char v16; // [sp+Ch] [bp-18h]@1
  int v17; // [sp+10h] [bp-14h]@1
  void *v18; // [sp+14h] [bp-10h]@8
  int v19; // [sp+18h] [bp-Ch]@2
  int v20; // [sp+1Ch] [bp-8h]@1
  char v21; // [sp+20h] [bp-4h]@3

  v13 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  v17 = CPlayer::GetGID(a5, a2, a3, a4);
  sub_44AE20((int)&unk_4E0974, (int)&v20, (int)&v17);
  v5 = sub_430C20((int)&unk_4E0974, &v16);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v7 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbs");
    v19 = (int)v7;
    v8 = v7;
    v9 = sub_420250(&v20);
    CGuild::Broadcast(*(_DWORD *)(v9 + 4), a2, a3, a4, v8, (void *)a5);
    CIOBuffer::Release(v19);
    sub_44AF50(&unk_4E0974, (int)&v15, v20);
    CBase::Delete((void *)v13);
    result = sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
  }
  else
  {
    sub_44AE20(v13 + 380, (int)&v21, a5 + 452);
    v10 = sub_430C20(v13 + 380, &v14);
    if ( (unsigned __int8)unknown_libname_8(v10) )
    {
      v11 = *(_DWORD *)(a5 + 452);
      v12 = CPlayer::GetGID(a5, a2, a3, a4);
      sub_4328C0("CGuild::Logout() member not find (gid:%d,pid:%d)", v12, v11);
      result = sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 32) = 0;
      CIOObject::Release(a5, a2, a3, a4);
      CPlayer::SetGuild(a5, a2, a3, a4, 0);
      CPlayer::SetGuildLevel(a5, a2, a3, a4, 0);
      CPlayer::SetGuildName(a5, a2, a3, a4, &byte_4B437D);
      CPlayer::SetGuildStandard(a5, a2, a3, a4, 0);
      CPlayer::SetGuildClass(a5, a2, a3, a4, 0, &byte_4B437D);
      --*(_DWORD *)(v13 + 32);
      if ( *(_DWORD *)(v13 + 32) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 28) )
        {
          v18 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbs");
          CGuild::Broadcast(v13, a2, a3, a4, v18, (void *)a5);
          CIOBuffer::Release((int)v18);
        }
      }
      else
      {
        *(_DWORD *)(v13 + 356) = GetTickCount() + 600000;
      }
      result = sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00412720) --------------------------------------------------------
void __usercall CGuild::DelPlayer(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  void *v5; // eax@1
  int v6; // eax@4
  int v7; // eax@5
  void *v8; // eax@5
  int v9; // eax@7
  int v10; // eax@9
  int v11; // eax@10
  int v12; // eax@12
  int v13; // eax@12
  void *v14; // eax@12
  void *v15; // ST18_4@16
  int v16; // eax@16
  int v17; // ST1C_4@16
  int v18; // eax@16
  char v19; // [sp+8h] [bp-2Ch]@12
  int v20; // [sp+Ch] [bp-28h]@8
  char v21; // [sp+10h] [bp-24h]@5
  char v22; // [sp+14h] [bp-20h]@8
  char v23; // [sp+18h] [bp-1Ch]@1
  int v24; // [sp+1Ch] [bp-18h]@12
  void *v25; // [sp+20h] [bp-14h]@16
  void *v26; // [sp+24h] [bp-10h]@7
  int v27; // [sp+28h] [bp-Ch]@6
  char v28; // [sp+2Ch] [bp-8h]@4
  char v29; // [sp+30h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20((int)&unk_4E0968, (int)&v29, (int)&a5);
  v5 = sub_430C20((int)&unk_4E0968, &v23);
  if ( (unsigned __int8)unknown_libname_8(v5) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
    return;
  }
  if ( a5 == a4 )
  {
    v6 = sub_420250((int *)&v29);
    sub_40F070(*(_DWORD *)(v6 + 4) + 380, &v28);
    while ( 1 )
    {
      v7 = sub_420250((int *)&v29);
      v8 = sub_430C20(*(_DWORD *)(v7 + 4) + 380, &v21);
      if ( !(unsigned __int8)sub_47D070(v8) )
        break;
      v27 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v28) + 4) + 32);
      if ( v27 )
      {
        CPlayer::SetGID(v27, a1, a2, a3, 0);
        CPlayer::SetGuild(v27, a1, a2, a3, 0);
        CPlayer::SetGuildLevel(v27, a1, a2, a3, 0);
        CPlayer::SetGuildName(v27, a1, a2, a3, &byte_4B437D);
        CPlayer::SetGuildStandard(v27, a1, a2, a3, 0);
        CPlayer::SetGuildClass(v27, a1, a2, a3, 0, &byte_4B437D);
        CPlayer::Write(a1, a2, a3, v27, 94, (unsigned int)"bb");
        std___Mpunct_wchar_t___do_frac_digits(v27);
        v26 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bdssbd");
        CGuild::SendPlayerSight(a1, a2, a3, v27, v26, 0);
        CIOObject::Release(v27, a1, a2, a3);
        *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v28) + 4) + 32) = 0;
        v9 = sub_420250((int *)&v29);
        --*(_DWORD *)(*(_DWORD *)(v9 + 4) + 32);
      }
      v20 = *(_DWORD *)(sub_420250((int *)&v28) + 4);
      sub_401020(v20);
      sub_446090((int *)&v28, (int)&v22, 0);
    }
    v10 = sub_420250((int *)&v29);
    sub_418530(*(_DWORD *)(v10 + 4) + 380);
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v29) + 4) + 32) > 0 )
    {
      v11 = sub_420250((int *)&v29);
      sub_4328C0("CGuild::DelPlayer() plaer reference error (ref:%d)", *(_DWORD *)(*(_DWORD *)(v11 + 4) + 32));
    }
    a3 = GetTickCount() + 600000;
    *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v29) + 4) + 356) = a3;
  }
  else
  {
    v12 = sub_420250((int *)&v29);
    sub_44AE20(*(_DWORD *)(v12 + 4) + 380, (int)&v24, (int)&a4);
    v13 = sub_420250((int *)&v29);
    v14 = sub_430C20(*(_DWORD *)(v13 + 4) + 380, &v19);
    if ( (unsigned __int8)unknown_libname_8(v14) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      sub_4328C0("CGuild::DelPlayer() not find member (gid:%d,pid:%d)", a5, a4);
      return;
    }
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v24) + 4) + 32) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      sub_4328C0("CGuild::DelPlayer error (gid:%d,pid:%d)", a5, a4);
      return;
    }
    sub_420250(&v24);
    v25 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bbs");
    v15 = v25;
    v16 = sub_420250((int *)&v29);
    CGuild::Broadcast(*(_DWORD *)(v16 + 4), a1, a2, a3, v15, 0);
    CIOBuffer::Release((int)v25);
    v17 = v24;
    v18 = sub_420250((int *)&v29);
    CGuild::MemberDEL(*(_DWORD *)(v18 + 4), a1, a2, v17);
  }
  sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00412A50) --------------------------------------------------------
signed int __usercall CGuild::CreateTrial<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  signed int result; // eax@2
  int v5; // eax@21
  int v6; // ST14_4@39
  int v7; // eax@39
  int v8; // eax@41
  signed int v9; // [sp+4h] [bp-A4h]@16
  int v10; // [sp+8h] [bp-A0h]@34
  int v11; // [sp+Ch] [bp-9Ch]@16
  int v12; // [sp+Ch] [bp-9Ch]@34
  int v13; // [sp+10h] [bp-98h]@32
  char *v14; // [sp+14h] [bp-94h]@34
  char v15; // [sp+18h] [bp-90h]@34
  char v16; // [sp+19h] [bp-8Fh]@34
  __int16 v17; // [sp+95h] [bp-13h]@34
  char v18; // [sp+97h] [bp-11h]@34
  int v19; // [sp+98h] [bp-10h]@1
  int v20; // [sp+9Ch] [bp-Ch]@16
  int v21; // [sp+A0h] [bp-8h]@34
  int v22; // [sp+A4h] [bp-4h]@7

  v19 = dword_4D9830;
  if ( CPlayer::GetGID(a4, a1, a2, a3) )
    return 13;
  if ( *(_DWORD *)(a4 + 60) < 30 )
    return 7;
  CChar::Lock(a4, a1, a2, a3);
  if ( !*(_DWORD *)(a4 + 1016) )
  {
    CChar::Unlock(a4, a1, a2, a3);
    return 12;
  }
  v22 = CParty::FindParty(a1, a2, a3, *(_DWORD *)(a4 + 1016));
  if ( !v22 )
  {
    CChar::Unlock(a4, a1, a2, a3);
    return 12;
  }
  CChar::Unlock(a4, a1, a2, a3);
  if ( !CParty::IsHead(v22, a1, a2, a3, a4) )
  {
    CIOObject::Release(v22, a1, a2, a3);
    return 11;
  }
  if ( CParty::GetSize((void *)v22) < 6 )
  {
    CIOObject::Release(v22, a1, a2, a3);
    return 12;
  }
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a4 + 1020), a1, a2, a3);
  if ( !*(_DWORD *)(a4 + 1096)
    || ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) > *(_DWORD *)(*(_DWORD *)(a4 + 1096) + 52) )
  {
    CIOCriticalSection::Leave(a4 + 1020, a1, a2, a3);
    CIOObject::Release(v22, a1, a2, a3);
    return 8;
  }
  CIOCriticalSection::Leave(a4 + 1020, a1, a2, a3);
  v11 = CParty::GetPlayerList(v22, a1, a2, a3);
  v9 = 0;
  v20 = 0;
  while ( v11 )
  {
    if ( !v20 )
    {
      v5 = unknown_libname_7();
      if ( CPlayer::GetGID(v5, a1, a2, a3) )
        v20 = 1;
      else
        v9 += *(_DWORD *)(unknown_libname_7() + 468);
    }
    v11 = CBaseList::Pop(v11, a1, a2, a3);
  }
  if ( v20 )
  {
    CIOObject::Release(v22, a1, a2, a3);
    return 13;
  }
  if ( *(_WORD *)dword_4E1174 & 0x100 )
  {
    if ( v9 < 1 )
    {
      CIOObject::Release(v22, a1, a2, a3);
      return 9;
    }
  }
  else
  {
    if ( v9 < 60 )
    {
      CIOObject::Release(v22, a1, a2, a3);
      return 9;
    }
  }
  v13 = CGuild::Create(a1, a2, a3, *(_DWORD *)(a4 + 452));
  if ( v13 )
  {
    v15 = 0;
    memset(&v16, 0, 0x7Cu);
    v17 = 0;
    v18 = 0;
    v14 = &v15;
    v12 = CParty::GetPlayerList(v22, a1, (DWORD)&v19, a3);
    v10 = 0;
    v21 = 0;
    sub_47E0D0((volatile LONG *)&unk_4E0980);
    while ( v12 )
    {
      if ( !v10 )
      {
        v6 = *(_DWORD *)(unknown_libname_7() + 452) != *(_DWORD *)(a4 + 452) ? 8 : 1;
        v7 = unknown_libname_7();
        if ( CGuild::MemberADD(v13, a1, (DWORD)&v19, a3, *(_DWORD *)(a4 + 452), v7, v6) )
        {
          v8 = unknown_libname_7();
          v14 = (char *)sub_44F9B0(v14, *(_DWORD *)(v8 + 452));
          ++v21;
        }
        else
        {
          v10 = *(_DWORD *)(unknown_libname_7() + 452);
        }
      }
      v12 = CBaseList::Pop(v12, a1, (DWORD)&v19, a3);
    }
    if ( v10 )
    {
      sub_4328C0("CGuild::CreateTrial() member add error (leader:%d,pid:%d)", *(_DWORD *)(a4 + 452), v10);
      sub_418420((int)&unk_4E0974, a4 + 452);
      CBase::Delete((void *)v13);
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, (DWORD)&v19, a3);
      CIOObject::Release(v22, a1, (DWORD)&v19, a3);
      result = 1;
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, (DWORD)&v19, a3);
      CIOObject::Release(v22, a1, (DWORD)&v19, a3);
      std___Mpunct_wchar_t___do_frac_digits(a4);
      CDBSocket::Write(a1, (DWORD)&v19, a3, 39, (unsigned int)"dbm");
      result = 0;
    }
  }
  else
  {
    CIOObject::Release(v22, a1, a2, a3);
    sub_4328C0("CGuild::CreateTrial() temp guild create error (pid:%d)", *(_DWORD *)(a4 + 452));
    result = 1;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00412E90) --------------------------------------------------------
void *__usercall CChar::Lock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 396), a2, a3, a4);
}

//----- (00412EB0) --------------------------------------------------------
void __usercall CChar::Unlock(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  CIOCriticalSection::Leave(a1 + 396, a2, a3, a4);
}

//----- (00412ED0) --------------------------------------------------------
int __thiscall CParty::GetSize(void *this)
{
  return sub_418590((int)((char *)this + 32));
}

//----- (00412EF0) --------------------------------------------------------
signed int __userpurge CGuild::CreateTrialSecedeAnswer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  void *v7; // eax@2
  signed int result; // eax@3
  int v9; // ST14_4@4
  int v10; // [sp+0h] [bp-18h]@1
  int v11; // [sp+4h] [bp-14h]@4
  int v12; // [sp+8h] [bp-10h]@3
  char v13; // [sp+Ch] [bp-Ch]@2
  char v14; // [sp+10h] [bp-8h]@2
  void *v15; // [sp+14h] [bp-4h]@5

  v10 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  if ( a6 )
  {
    sub_44AE20(v10 + 380, (int)&v14, (int)&a6);
    v7 = sub_430C20(v10 + 380, &v13);
    if ( (unsigned __int8)unknown_libname_8(v7) )
    {
      v12 = CPlayer::GetGID(a5, a2, a3, a4);
      sub_418420((int)&unk_4E0974, (int)&v12);
      CBase::Delete((void *)v10);
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 1;
    }
    else
    {
      v9 = *(_DWORD *)(sub_420250((int *)&v14) + 4);
      CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbsd");
      v11 = CPlayer::GetGID(a5, a2, a3, a4);
      sub_418420((int)&unk_4E0974, (int)&v11);
      CBase::Delete((void *)v10);
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 0;
    }
  }
  else
  {
    v15 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"b");
    CGuild::Broadcast(v10, a2, a3, a4, v15, (void *)a5);
    CIOBuffer::Release((int)v15);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 14;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00413020) --------------------------------------------------------
signed int __userpurge CGuild::CreateConsent<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // eax@1
  signed int result; // eax@2
  void *v8; // eax@12
  int v9; // ST14_4@13
  int v10; // eax@13
  int v11; // ST14_4@15
  int v12; // eax@15
  int v13; // [sp+0h] [bp-2Ch]@1
  int v14; // [sp+4h] [bp-28h]@15
  int v15; // [sp+8h] [bp-24h]@13
  char v16; // [sp+Ch] [bp-20h]@12
  char v17; // [sp+10h] [bp-1Ch]@12
  int v18; // [sp+14h] [bp-18h]@12
  int v19; // [sp+18h] [bp-14h]@9
  char v20; // [sp+1Ch] [bp-10h]@1
  int v21; // [sp+20h] [bp-Ch]@1
  int v22; // [sp+24h] [bp-8h]@14
  void *v23; // [sp+28h] [bp-4h]@8

  v13 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v13 + 380, (int)&v21, a5 + 452);
  v6 = sub_430C20(v13 + 380, &v20);
  if ( (unsigned __int8)unknown_libname_8(v6) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 15;
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v21) + 4) + 24) == 1
      || *(_DWORD *)(*(_DWORD *)(sub_420250(&v21) + 4) + 24) == 8 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v21) + 4) + 24) != 1 )
        *(_DWORD *)(*(_DWORD *)(sub_420250(&v21) + 4) + 24) = 7;
      sub_420250(&v21);
      v23 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbsb");
      CGuild::Broadcast(v13, a2, a3, a4, v23, 0);
      CIOBuffer::Release((int)v23);
      if ( a6 )
      {
        if ( CGuild::IsAllConsent((void *)v13) )
        {
          v18 = CPlayer::GetGID(a5, a2, a3, a4);
          v21 = *(_DWORD *)sub_44AE20(v13 + 380, (int)&v17, (int)&v18);
          v8 = sub_430C20(v13 + 380, &v16);
          if ( (unsigned __int8)unknown_libname_8(v8) )
          {
            v15 = CPlayer::GetGID(a5, a2, a3, a4);
            sub_418420((int)&unk_4E0974, (int)&v15);
            CBase::Delete((void *)v13);
            sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
            v9 = *(_DWORD *)(a5 + 452);
            v10 = CPlayer::GetGID(a5, a2, a3, a4);
            sub_4328C0("CGuild::CreateConsent() leader not find (leader:%d,pid:%d)", v10, v9);
            result = 1;
          }
          else
          {
            v22 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v21) + 4) + 32);
            if ( v22 )
            {
              CPlayer::Write(a2, a3, a4, v22, 94, (unsigned int)"b");
              sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
              result = 0;
            }
            else
            {
              v14 = CPlayer::GetGID(a5, a2, a3, a4);
              sub_418420((int)&unk_4E0974, (int)&v14);
              CBase::Delete((void *)v13);
              sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
              v11 = *(_DWORD *)(a5 + 452);
              v12 = CPlayer::GetGID(a5, a2, a3, a4);
              sub_4328C0("CGuild::CreateConsent() leader logout error (leader:%d,pid:%d)", v12, v11);
              result = 1;
            }
          }
        }
        else
        {
          sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 0;
        }
      }
      else
      {
        v19 = CPlayer::GetGID(a5, a2, a3, a4);
        sub_418420((int)&unk_4E0974, (int)&v19);
        CBase::Delete((void *)v13);
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 0;
      }
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 16;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004132A0) --------------------------------------------------------
signed int __thiscall CGuild::IsAllConsent(void *this)
{
  void *v1; // eax@2
  void *v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+4h] [bp-Ch]@2
  char v5; // [sp+8h] [bp-8h]@5
  char v6; // [sp+Ch] [bp-4h]@1

  v3 = this;
  sub_40F070((int)((char *)this + 380), &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)((char *)v3 + 380), &v4);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v6) + 4) + 24) == 8 )
      return 0;
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  return 1;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00413310) --------------------------------------------------------
signed int __userpurge CGuild::CreateGuildName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5)
{
  signed int result; // eax@2

  if ( CPlayer::GetGID(a4, a1, a2, a3) == *(_DWORD *)(a4 + 452) )
  {
    if ( sub_4979C0(a5) )
    {
      if ( CGuild::IsSameName(a1, a2, a3, a5) )
      {
        result = 19;
      }
      else
      {
        std___Mpunct_wchar_t___do_frac_digits(a4);
        CDBSocket::Write(a1, a2, a3, 41, (unsigned int)"ds");
        result = 0;
      }
    }
    else
    {
      result = 18;
    }
  }
  else
  {
    result = 22;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);

//----- (00413380) --------------------------------------------------------
signed int __userpurge CGuild::CreateGuildNameAnswer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, const char *a7)
{
  signed int result; // eax@2
  void *v8; // eax@13
  char v9; // al@19
  int v10; // eax@19
  int v11; // eax@20
  void *v12; // eax@31
  int v13; // eax@33
  void *v14; // eax@36
  int v15; // ST14_4@38
  int v16; // [sp+0h] [bp-5Ch]@27
  signed int v17; // [sp+4h] [bp-58h]@25
  int v18; // [sp+8h] [bp-54h]@22
  int v19; // [sp+Ch] [bp-50h]@1
  char v20; // [sp+10h] [bp-4Ch]@36
  char v21; // [sp+14h] [bp-48h]@39
  char v22; // [sp+18h] [bp-44h]@35
  char v23; // [sp+1Ch] [bp-40h]@31
  char v24; // [sp+20h] [bp-3Ch]@34
  char v25; // [sp+24h] [bp-38h]@30
  int v26; // [sp+28h] [bp-34h]@21
  int v27; // [sp+2Ch] [bp-30h]@20
  char v28; // [sp+30h] [bp-2Ch]@19
  char v29; // [sp+38h] [bp-24h]@19
  char v30; // [sp+40h] [bp-1Ch]@13
  char v31; // [sp+44h] [bp-18h]@18
  int i; // [sp+48h] [bp-14h]@12
  int v33; // [sp+4Ch] [bp-10h]@10
  int v34; // [sp+50h] [bp-Ch]@16
  char v35; // [sp+54h] [bp-8h]@19
  char v36; // [sp+58h] [bp-4h]@19

  v19 = a1;
  if ( a6 == 2 )
  {
    result = 1;
  }
  else
  {
    if ( a6 )
    {
      result = 19;
    }
    else
    {
      sub_47E0D0((volatile LONG *)&unk_4E0980);
      if ( CGuild::IsAllConsent((void *)v19) )
      {
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1020), a2, a3, a4);
        if ( *(_DWORD *)(a5 + 1096)
          && ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) <= *(_DWORD *)(*(_DWORD *)(a5 + 1096) + 52) )
        {
          v33 = *(_DWORD *)(a5 + 1096);
          if ( !(*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v33 + 120))(
                  v33,
                  a5,
                  31,
                  -((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000)) )
            CPlayer::_OutofInven(a5, a2, a3, a4, v33);
          CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
          strcpy((char *)(v19 + 44), a7);
          sub_40F070(v19 + 380, &i);
          while ( 1 )
          {
            v8 = sub_430C20(v19 + 380, &v30);
            if ( !(unsigned __int8)sub_47D070(v8) )
              break;
            if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&i) + 4) + 24) != 1 )
              *(_DWORD *)(*(_DWORD *)(sub_420250(&i) + 4) + 24) = 6;
            v34 = *(_DWORD *)(*(_DWORD *)(sub_420250(&i) + 4) + 32);
            if ( v34 )
              CPlayer::SetGuildName(v34, a2, a3, a4, (const char *)(v19 + 44));
            sub_446090(&i, (int)&v31, 0);
          }
          v9 = CPlayer::GetGID(a5, a2, a3, a4);
          v10 = sub_418940(&v28, v9, v19);
          sub_41CF00((int)&v29, v10);
          sub_445DF0((int)&unk_4E0968, (int)&v35, (int)&v29);
          if ( v36 )
          {
            v26 = CPlayer::GetGID(a5, a2, a3, a4);
            sub_418420((int)&unk_4E0974, (int)&v26);
            if ( 10000 * *(_DWORD *)(a5 + 468) >= 0 )
              v18 = 10000 * *(_DWORD *)(a5 + 468);
            else
              v18 = 0;
            if ( v18 <= 2000000000 )
            {
              if ( 10000 * *(_DWORD *)(a5 + 468) >= 0 )
                v16 = 10000 * *(_DWORD *)(a5 + 468);
              else
                v16 = 0;
              v17 = v16;
            }
            else
            {
              v17 = 2000000000;
            }
            *(_DWORD *)(v19 + 64) = v17;
            for ( i = *(_DWORD *)sub_40F070(v19 + 380, &v25); ; sub_446090(&i, (int)&v24, 0) )
            {
              v12 = sub_430C20(v19 + 380, &v23);
              if ( !(unsigned __int8)sub_47D070(v12) )
                break;
              v34 = *(_DWORD *)(*(_DWORD *)(sub_420250(&i) + 4) + 32);
              if ( v34 )
              {
                CPlayer::Write(a2, a3, a4, v34, 94, (unsigned int)"bbs");
                v13 = CPlayer::GetGID(a5, a2, a3, a4);
                CGuild::SendMemberInfo(v19, a2, a4, v34, v13);
              }
            }
            CPlayer::GetGID(a5, a2, a3, a4);
            CDBSocket::Write(a2, a3, a4, 42, (unsigned int)"ds");
            for ( i = *(_DWORD *)sub_40F070(v19 + 380, &v22); ; sub_446090(&i, (int)&v21, 0) )
            {
              v14 = sub_430C20(v19 + 380, &v20);
              if ( !(unsigned __int8)sub_47D070(v14) )
                break;
              if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&i) + 4) + 24) != 1 )
              {
                v15 = *(_DWORD *)sub_420250(&i);
                CPlayer::GetGID(a5, a2, a3, a4);
                CDBSocket::Write(a2, a3, a4, 43, (unsigned int)"dd");
              }
            }
            sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
            result = 0;
          }
          else
          {
            v11 = CPlayer::GetGID(a5, a2, a3, a4);
            sub_4328C0("CGuild::CreateGuildName() guild insert error (gid:%d)", v11);
            v27 = CPlayer::GetGID(a5, a2, a3, a4);
            sub_418420((int)&unk_4E0974, (int)&v27);
            CBase::Delete((void *)v19);
            sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
            result = 1;
          }
        }
        else
        {
          CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
          sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 8;
        }
      }
      else
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 20;
      }
    }
  }
  return result;
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00413790) --------------------------------------------------------
int __thiscall CGuild::IsSkillAble(int this, int a2, char a3)
{
  int result; // eax@2

  switch ( a2 )
  {
    case 1:
      result = 1;
      break;
    case 2:
      result = *(_DWORD *)(this + 360) & (1 << a3);
      break;
    case 3:
      result = *(_DWORD *)(this + 364) & (1 << a3);
      break;
    case 4:
      result = *(_DWORD *)(this + 368) & (1 << a3);
      break;
    case 5:
      result = *(_DWORD *)(this + 372) & (1 << a3);
      break;
    case 6:
      result = *(_DWORD *)(this + 376) & (1 << a3);
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (00413850) --------------------------------------------------------
signed int __userpurge CGuild::Conflux<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6)
{
  void *v6; // eax@1
  signed int result; // eax@2
  int v8; // ST18_4@2
  int v9; // eax@2
  int v10; // eax@3
  int v11; // eax@5
  int v12; // [sp+0h] [bp-10h]@1
  char v13; // [sp+4h] [bp-Ch]@1
  int v14; // [sp+8h] [bp-8h]@11
  char v15; // [sp+Ch] [bp-4h]@1

  v12 = a1;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  sub_44AE20(v12 + 380, (int)&v15, a5 + 452);
  v6 = sub_430C20(v12 + 380, &v13);
  if ( (unsigned __int8)unknown_libname_8(v6) )
  {
    v8 = *(_DWORD *)(a5 + 452);
    v9 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::Conflux() member find error (gid:%d,pid:%d)", v9, v8);
    sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 1;
  }
  else
  {
    v10 = sub_420250((int *)&v15);
    if ( CGuild::IsSkillAble(v12, *(_DWORD *)(*(_DWORD *)(v10 + 4) + 24), 0) )
    {
      LOBYTE(v11) = CGuild::IsTempMemberFUll((void *)v12);
      if ( v11 )
      {
        sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 23;
      }
      else
      {
        if ( CCastle::IsAllCastleWarRelation(a2, a3, a4, v12) && (CGuild::IsWarWaitingPeriod() || CGuild::IsWarringPeriod()) )
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 94;
        }
        else
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
          v14 = CPlayer::FindPlayer(a2, a3, a4, a6);
          if ( v14 )
          {
            if ( CChar::IsGState(v14, 256) )
            {
              CPlayer::Write(a2, a3, a4, a5, 95, (unsigned int)"b");
              sub_4239C0(v14, a2, a3, a4, v14 + 352);
              result = 0;
            }
            else
            {
              if ( CPlayer::GetGID(v14, a2, a3, a4) )
              {
                sub_4239C0(v14, a2, a3, a4, v14 + 352);
                result = 25;
              }
              else
              {
                CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbs");
                CPlayer::GetGID(a5, a2, a3, a4);
                CPlayer::Write(a2, a3, a4, v14, 94, (unsigned int)"bdds");
                sub_4239C0(v14, a2, a3, a4, v14 + 352);
                result = 0;
              }
            }
          }
          else
          {
            result = 24;
          }
        }
      }
    }
    else
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 22;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00413A50) --------------------------------------------------------
signed int __usercall CGuild::ConfluxAnswer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, char a6, int a7)
{
  signed int result; // eax@2
  void *v8; // eax@3
  int v9; // eax@5
  int v10; // eax@5
  void *v11; // eax@5
  int v12; // eax@9
  int v13; // eax@15
  int v14; // eax@15
  char v15; // [sp+0h] [bp-14h]@5
  char v16; // [sp+4h] [bp-10h]@3
  char v17; // [sp+8h] [bp-Ch]@3
  int v18; // [sp+Ch] [bp-8h]@7
  char v19; // [sp+10h] [bp-4h]@5

  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( CPlayer::GetGID(a4, a1, a2, a3) )
  {
    sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
    result = 29;
  }
  else
  {
    sub_44AE20((int)&unk_4E0968, (int)&v17, (int)&a5);
    v8 = sub_430C20((int)&unk_4E0968, &v16);
    if ( (unsigned __int8)unknown_libname_8(v8) )
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
      result = 1;
    }
    else
    {
      v9 = sub_420250((int *)&v17);
      sub_44AE20(*(_DWORD *)(v9 + 4) + 380, (int)&v19, (int)&a6);
      v10 = sub_420250((int *)&v17);
      v11 = sub_430C20(*(_DWORD *)(v10 + 4) + 380, &v15);
      if ( (unsigned __int8)unknown_libname_8(v11) )
      {
        sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
        result = 1;
      }
      else
      {
        v18 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v19) + 4) + 32);
        if ( v18 )
        {
          v12 = sub_420250((int *)&v17);
          if ( CCastle::IsAllCastleWarRelation(a1, a2, a3, *(_DWORD *)(v12 + 4)) && (CGuild::IsWarWaitingPeriod() || CGuild::IsWarringPeriod()) )
          {
            sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
            result = 94;
          }
          else
          {
            if ( a7 )
            {
              v13 = sub_420250((int *)&v17);
              LOBYTE(v14) = CGuild::IsTempMemberFUll(*(void **)(v13 + 4));
              if ( v14 )
              {
                sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
                result = 23;
              }
              else
              {
                sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
                std___Mpunct_wchar_t___do_frac_digits(a4);
                CDBSocket::Write(a1, a2, a3, 40, (unsigned int)"ddd");
                result = 0;
              }
            }
            else
            {
              CPlayer::Write(a1, a2, a3, v18, 94, (unsigned int)"bbs");
              sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
              result = 0;
            }
          }
        }
        else
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
          result = 24;
        }
      }
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00413C20) --------------------------------------------------------
signed int __usercall CGuild::ConfluxSecedeAnswer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6)
{
  signed int result; // eax@2
  void *v7; // eax@3
  int v8; // ST10_4@5
  int v9; // eax@5
  int v10; // ST18_4@7
  int v11; // eax@7
  int v12; // eax@8
  void *v13; // eax@9
  void *v14; // ST14_4@9
  int v15; // eax@9
  char v16; // [sp+0h] [bp-Ch]@3
  char v17; // [sp+4h] [bp-8h]@3
  int v18; // [sp+8h] [bp-4h]@9

  if ( a6 )
  {
    CPlayer::Write(a1, a2, a3, a4, 94, (unsigned int)"bbsd");
    result = 0;
  }
  else
  {
    sub_47E0D0((volatile LONG *)&unk_4E0980);
    sub_44AE20((int)&unk_4E0968, (int)&v17, (int)&a5);
    v7 = sub_430C20((int)&unk_4E0968, &v16);
    if ( (unsigned __int8)unknown_libname_8(v7) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      result = 1;
    }
    else
    {
      v8 = a5;
      v9 = sub_420250((int *)&v17);
      if ( CGuild::MemberADD(*(_DWORD *)(v9 + 4), a1, a2, a3, v8, a4, 6) )
      {
        CDBSocket::Write(a1, a2, a3, 43, (unsigned int)"dd");
        v10 = a5;
        v11 = sub_420250((int *)&v17);
        CGuild::SendMemberInfo(*(_DWORD *)(v11 + 4), a1, a3, a4, v10);
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v17) + 4) + 396) )
        {
          v12 = sub_420250((int *)&v17);
          CAlliance::AllianceInfo(*(_DWORD *)(*(_DWORD *)(v12 + 4) + 396), a1, a3, a4);
        }
        v13 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bbsb");
        v18 = (int)v13;
        v14 = v13;
        v15 = sub_420250((int *)&v17);
        CGuild::Broadcast(*(_DWORD *)(v15 + 4), a1, a2, a3, v14, 0);
        CIOBuffer::Release(v18);
        sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
        result = 0;
      }
      else
      {
        sub_4328C0("CGuild::ConfluxSecedeAnswer() member add error (gid:%d,pid:%d)", a5, *(_DWORD *)(a4 + 452));
        sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
        result = 1;
      }
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00413DB0) --------------------------------------------------------
char __thiscall CGuild::IsTempMemberFUll(void *this)
{
  void *v1; // eax@2
  void *v3; // [sp+0h] [bp-14h]@1
  char v4; // [sp+4h] [bp-10h]@2
  char v5; // [sp+8h] [bp-Ch]@5
  char v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  v7 = 0;
  sub_40F070((int)((char *)this + 380), &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)((char *)v3 + 380), &v4);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v6) + 4) + 24) == 6 )
      ++v7;
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  return v7 >= 10;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00413E30) --------------------------------------------------------
signed int __userpurge CGuild::Secession<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@1
  signed int result; // eax@2
  int v7; // ST1C_4@2
  int v8; // eax@2
  int v9; // [sp+0h] [bp-18h]@1
  char v10; // [sp+4h] [bp-14h]@1
  void *v11; // [sp+8h] [bp-10h]@7
  __int32 v12; // [sp+Ch] [bp-Ch]@5
  int v13; // [sp+10h] [bp-8h]@1
  void *v14; // [sp+14h] [bp-4h]@5

  v9 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v9 + 380, (int)&v13, a5 + 452);
  v5 = sub_430C20(v9 + 380, &v10);
  if ( (unsigned __int8)unknown_libname_8(v5) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    v7 = *(_DWORD *)(a5 + 452);
    v8 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::Secession() member delete error (gid:%d,pid:%d)", v8, v7);
    result = 1;
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v13) + 4) + 24) == 1 )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 31;
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250(&v13) + 4) + 32) = 0;
      CIOObject::Release(a5, a2, a3, a4);
      CPlayer::SetGID(a5, a2, a3, a4, 0);
      CPlayer::SetGuild(a5, a2, a3, a4, 0);
      CPlayer::SetGuildLevel(a5, a2, a3, a4, 0);
      CPlayer::SetGuildName(a5, a2, a3, a4, &byte_4B437D);
      CPlayer::SetGuildStandard(a5, a2, a3, a4, 0);
      CPlayer::SetGuildClass(a5, a2, a3, a4, 0, &byte_4B437D);
      CPlayer::BreakStandard(a5, a2, a3, a4);
      CGuild::MemberDEL(v9, a2, a3, v13);
      v12 = time(0) + 259200;
      CDBSocket::Write(a2, a3, a4, 45, (unsigned int)"dd");
      std___Mpunct_wchar_t___do_frac_digits(a5);
      v14 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bdssbd");
      CGuild::SendPlayerSight(a2, a3, a4, a5, v14, 0);
      --*(_DWORD *)(v9 + 32);
      if ( *(_DWORD *)(v9 + 32) )
      {
        v11 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbs");
        CGuild::Broadcast(v9, a2, a3, a4, v11, 0);
        CIOBuffer::Release((int)v11);
      }
      else
      {
        *(_DWORD *)(v9 + 356) = GetTickCount() + 600000;
      }
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 33;
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414030) --------------------------------------------------------
signed int __userpurge CGuild::Banish<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6)
{
  void *v6; // eax@1
  signed int result; // eax@2
  int v8; // ST1C_4@2
  int v9; // eax@2
  int v10; // eax@3
  void *v11; // eax@5
  int v12; // ST18_4@14
  int v13; // [sp+0h] [bp-24h]@1
  char v14; // [sp+4h] [bp-20h]@5
  char v15; // [sp+8h] [bp-1Ch]@1
  void *v16; // [sp+Ch] [bp-18h]@11
  __int32 v17; // [sp+10h] [bp-14h]@14
  int v18; // [sp+14h] [bp-10h]@5
  int v19; // [sp+18h] [bp-Ch]@9
  char v20; // [sp+1Ch] [bp-8h]@1
  void *v21; // [sp+20h] [bp-4h]@9

  v13 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v13 + 380, (int)&v20, a5 + 452);
  v6 = sub_430C20(v13 + 380, &v15);
  if ( (unsigned __int8)unknown_libname_8(v6) )
  {
    v8 = *(_DWORD *)(a5 + 452);
    v9 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::Banish() member find error (gid:%d,pid:%d)", v9, v8);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 1;
  }
  else
  {
    v10 = sub_420250((int *)&v20);
    if ( CGuild::IsSkillAble(v13, *(_DWORD *)(*(_DWORD *)(v10 + 4) + 24), 1) )
    {
      CGuild::FindMember((void *)v13, (int)&v18, a6);
      v11 = sub_430C20(v13 + 380, &v14);
      if ( (unsigned __int8)unknown_libname_8(v11) )
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 4;
      }
      else
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v18) + 4) + 24) == 1 )
        {
          sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 34;
        }
        else
        {
          v21 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbs");
          CGuild::Broadcast(v13, a2, a3, a4, v21, 0);
          CIOBuffer::Release((int)v21);
          v19 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v18) + 4) + 32);
          if ( v19 )
          {
            if ( CPlayer::GetGID(v19, a2, a3, a4) )
            {
              CPlayer::SetGID(v19, a2, a3, a4, 0);
              CPlayer::SetGuild(v19, a2, a3, a4, 0);
              CPlayer::SetGuildLevel(v19, a2, a3, a4, 0);
              CPlayer::SetGuildName(v19, a2, a3, a4, &byte_4B437D);
              CPlayer::SetGuildStandard(v19, a2, a3, a4, 0);
              CPlayer::SetGuildClass(v19, a2, a3, a4, 0, &byte_4B437D);
              CPlayer::BreakStandard(v19, a2, a3, a4);
              std___Mpunct_wchar_t___do_frac_digits(v19);
              v16 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bdssbd");
              CGuild::SendPlayerSight(a2, a3, a4, v19, v16, 0);
              --*(_DWORD *)(v13 + 32);
              if ( !*(_DWORD *)(v13 + 32) )
                sub_4328C0("CGuild::Banish() player reference error");
            }
            CIOObject::Release(v19, a2, a3, a4);
            *(_DWORD *)(*(_DWORD *)(sub_420250(&v18) + 4) + 32) = 0;
          }
          v17 = time(0) + 259200;
          v12 = *(_DWORD *)sub_420250(&v18);
          CDBSocket::Write(a2, a3, a4, 45, (unsigned int)"dd");
          CGuild::MemberDEL(v13, a2, a3, v18);
          sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 36;
        }
      }
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 22;
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004142D0) --------------------------------------------------------
signed int __userpurge CGuild::Appointment<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6, const char *a7)
{
  void *v7; // eax@1
  signed int result; // eax@2
  int v9; // ST1C_4@2
  int v10; // eax@2
  int v11; // eax@3
  void *v12; // eax@5
  int v13; // ST1C_4@11
  int v14; // eax@16
  int v15; // eax@19
  int v16; // eax@21
  int v17; // eax@53
  char *v18; // ST1C_4@53
  int v19; // ST18_4@53
  int v20; // eax@53
  int v21; // eax@53
  int v22; // eax@53
  int v23; // eax@53
  int v24; // eax@53
  void *v25; // ST18_4@53
  int v26; // eax@53
  int v27; // eax@54
  __int32 v28; // [sp+4h] [bp-44h]@56
  int v29; // [sp+8h] [bp-40h]@49
  int v30; // [sp+Ch] [bp-3Ch]@44
  int v31; // [sp+10h] [bp-38h]@42
  int v32; // [sp+14h] [bp-34h]@39
  int v33; // [sp+18h] [bp-30h]@33
  int v34; // [sp+1Ch] [bp-2Ch]@31
  int v35; // [sp+20h] [bp-28h]@28
  int v36; // [sp+24h] [bp-24h]@1
  char v37; // [sp+28h] [bp-20h]@5
  char v38; // [sp+2Ch] [bp-1Ch]@1
  void *v39; // [sp+30h] [bp-18h]@53
  int v40; // [sp+34h] [bp-14h]@12
  int v41; // [sp+38h] [bp-10h]@23
  int v42; // [sp+3Ch] [bp-Ch]@5
  char v43; // [sp+40h] [bp-8h]@1
  void *v44; // [sp+44h] [bp-4h]@58

  v36 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v36 + 380, (int)&v43, a5 + 452);
  v7 = sub_430C20(v36 + 380, &v38);
  if ( (unsigned __int8)unknown_libname_8(v7) )
  {
    v9 = *(_DWORD *)(a5 + 452);
    v10 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::Appointment() member find error (gid:%d,pid:%d)", v10, v9);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 1;
  }
  else
  {
    v11 = sub_420250((int *)&v43);
    if ( CGuild::IsSkillAble(v36, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 24), 3) )
    {
      CGuild::FindMember((void *)v36, (int)&v42, a6);
      v12 = sub_430C20(v36 + 380, &v37);
      if ( (unsigned __int8)unknown_libname_8(v12) )
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 4;
      }
      else
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 24) == 1 )
        {
          sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 37;
        }
        else
        {
          if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 24) != 2
            || (a4 = *(_DWORD *)(sub_420250(&v42) + 4), *(_DWORD *)(a4 + 36) <= time(0)) )
          {
            v40 = CGuild::GetTitle2Class((void *)v36, a7);
            if ( v40 )
            {
              if ( v40 == 1 )
              {
                sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
                result = 37;
              }
              else
              {
                v14 = sub_420250(&v42);
                if ( *(_DWORD *)(*(_DWORD *)(v14 + 4) + 24) == v40 )
                {
                  sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
                  result = 41;
                }
                else
                {
                  if ( v40 < 6 && (LOBYTE(v15) = CGuild::IsMemberFull((void *)v36), v15) )
                  {
                    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
                    result = 40;
                  }
                  else
                  {
                    LOBYTE(v16) = CGuild::IsAppointmentFull((void *)v36, v40);
                    if ( v16 )
                    {
                      v41 = CGuild::GetAppointmentLimitTime((void *)v36, v40);
                      if ( v41 && v41 > time(0) )
                      {
                        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
                        CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbd");
                        result = 0;
                      }
                      else
                      {
                        if ( v40 == 6 )
                        {
                          if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20) >= 0 )
                            v35 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20);
                          else
                            v35 = 0;
                          if ( *(_DWORD *)(v36 + 64) - v35 >= 0 )
                          {
                            if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20) >= 0 )
                              v33 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20);
                            else
                              v33 = 0;
                            v34 = *(_DWORD *)(v36 + 64) - v33;
                          }
                          else
                          {
                            v34 = 0;
                          }
                          *(_DWORD *)(v36 + 64) = v34;
                        }
                        else
                        {
                          if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 24) == 6 )
                          {
                            if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20) >= 0 )
                              v32 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20);
                            else
                              v32 = 0;
                            if ( v32 + *(_DWORD *)(v36 + 64) <= 2000000000 )
                            {
                              if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20) >= 0 )
                                v30 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 20);
                              else
                                v30 = 0;
                              v31 = v30 + *(_DWORD *)(v36 + 64);
                            }
                            else
                            {
                              v31 = 2000000000;
                            }
                            *(_DWORD *)(v36 + 64) = v31;
                          }
                        }
                        if ( *(_WORD *)dword_4E1174 & 0x100 )
                          v29 = CGuild::CalPenaltyTLevel(v36);
                        else
                          v29 = CGuild::CalPenaltyLevel(v36);
                        CGuild::SetLevel(v36, a2, a3, v29);
                        if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 32)
                          && CGuild::GetGuildSkill(*(_DWORD *)(v36 + 72)) & 1 )
                        {
                          v17 = sub_420250(&v42);
                          *(_DWORD *)(*(_DWORD *)(v17 + 4) + 24) = v40;
                          v18 = CGuild::GetClass2Title((void *)v36, v40);
                          v19 = v40;
                          v20 = sub_420250(&v42);
                          CPlayer::SetGuildClass(*(_DWORD *)(*(_DWORD *)(v20 + 4) + 32), a2, a3, a4, v19, v18);
                          v21 = sub_420250(&v42);
                          CPlayer::GetGuildStandard(*(_DWORD *)(*(_DWORD *)(v21 + 4) + 32));
                          v22 = sub_420250(&v42);
                          CPlayer::GetGuildName(*(_DWORD *)(*(_DWORD *)(v22 + 4) + 32));
                          v23 = sub_420250(&v42);
                          CPlayer::GetGuildClassTitle(*(_DWORD *)(*(_DWORD *)(v23 + 4) + 32));
                          v24 = sub_420250(&v42);
                          std___Mpunct_wchar_t___do_frac_digits(*(_DWORD *)(*(_DWORD *)(v24 + 4) + 32));
                          v39 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bdssbd");
                          v25 = v39;
                          v26 = sub_420250(&v42);
                          CGuild::SendPlayerSight(a2, a3, a4, *(_DWORD *)(*(_DWORD *)(v26 + 4) + 32), v25, 0);
                        }
                        else
                        {
                          v27 = sub_420250(&v42);
                          *(_DWORD *)(*(_DWORD *)(v27 + 4) + 24) = v40;
                        }
                        if ( v40 == 2 )
                          v28 = time(0) + 604800;
                        else
                          v28 = 0;
                        *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 36) = v28;
                        sub_420250(&v42);
                        sub_420250(&v42);
                        CDBSocket::Write(a2, a3, a4, 46, (unsigned int)"dbd");
                        sub_420250(&v42);
                        v44 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbsb");
                        CGuild::Broadcast(v36, a2, a3, a4, v44, 0);
                        CIOBuffer::Release((int)v44);
                        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
                        result = 0;
                      }
                    }
                    else
                    {
                      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
                      result = 38;
                    }
                  }
                }
              }
            }
            else
            {
              sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
              result = 55;
            }
          }
          else
          {
            v13 = *(_DWORD *)(*(_DWORD *)(sub_420250(&v42) + 4) + 36);
            CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbd");
            sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
            result = 0;
          }
        }
      }
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 22;
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414890) --------------------------------------------------------
signed int __userpurge CGuild::Dissolution<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@1
  signed int result; // eax@2
  int v7; // ST1C_4@2
  int v8; // eax@2
  void *v9; // eax@8
  int v10; // eax@11
  int v11; // [sp+0h] [bp-28h]@1
  char v12; // [sp+8h] [bp-20h]@8
  char v13; // [sp+Ch] [bp-1Ch]@11
  char v14; // [sp+10h] [bp-18h]@1
  int v15; // [sp+14h] [bp-14h]@9
  char v16; // [sp+18h] [bp-10h]@7
  __int32 v17; // [sp+1Ch] [bp-Ch]@7
  char v18; // [sp+20h] [bp-8h]@1
  void *v19; // [sp+24h] [bp-4h]@10

  v11 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v11 + 380, (int)&v18, a5 + 452);
  v5 = sub_430C20(v11 + 380, &v14);
  if ( (unsigned __int8)unknown_libname_8(v5) )
  {
    v7 = *(_DWORD *)(a5 + 452);
    v8 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::Dissolution() member find error (gid:%d,pid:%d)", v8, v7);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 1;
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v18) + 4) + 24) == 1 )
    {
      if ( CCastle::IsAllCastleWarRelation(a2, a3, a4, v11) )
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 107;
      }
      else
      {
        v17 = time(0) + 259200;
        sub_40F070(v11 + 380, &v16);
        while ( 1 )
        {
          v9 = sub_430C20(v11 + 380, &v12);
          if ( !(unsigned __int8)sub_47D070(v9) )
            break;
          v15 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v16) + 4) + 32);
          if ( v15 )
          {
            CPlayer::SetGID(v15, a2, a3, a4, 0);
            CPlayer::SetGuild(v15, a2, a3, a4, 0);
            CPlayer::SetGuildLevel(v15, a2, a3, a4, 0);
            CPlayer::SetGuildName(v15, a2, a3, a4, &byte_4B437D);
            CPlayer::SetGuildStandard(v15, a2, a3, a4, 0);
            CPlayer::SetGuildClass(v15, a2, a3, a4, 0, &byte_4B437D);
            CPlayer::BreakStandard(v15, a2, a3, a4);
            CPlayer::Write(a2, a3, a4, v15, 94, (unsigned int)"bb");
            std___Mpunct_wchar_t___do_frac_digits(v15);
            v19 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bdssbd");
            CGuild::SendPlayerSight(a2, a3, a4, v15, v19, 0);
            CIOObject::Release(v15, a2, a3, a4);
            *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v16) + 4) + 32) = 0;
            --*(_DWORD *)(v11 + 32);
          }
          v10 = sub_420250((int *)&v16);
          sub_401020(*(_DWORD *)(v10 + 4));
          sub_446090((int *)&v16, (int)&v13, 0);
        }
        sub_418530(v11 + 380);
        if ( *(_DWORD *)(v11 + 32) > 0 )
          sub_4328C0("CGuild::Dissolution() plaer reference error (ref:%d)", *(_DWORD *)(v11 + 32));
        *(_DWORD *)(v11 + 356) = GetTickCount() + 600000;
        CDBSocket::Write(a2, a3, a4, 47, (unsigned int)"dd");
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 44;
      }
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 22;
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00414B30) --------------------------------------------------------
signed int __userpurge CGuild::TitleChange<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6, const char *a7)
{
  signed int result; // eax@2
  void *v8; // eax@3
  int v9; // ST1C_4@4
  int v10; // eax@4
  int v11; // eax@5
  void *v12; // eax@10
  int v13; // eax@12
  int v14; // [sp+0h] [bp-24h]@1
  char v15; // [sp+4h] [bp-20h]@10
  char v16; // [sp+8h] [bp-1Ch]@15
  char v17; // [sp+Ch] [bp-18h]@9
  char v18; // [sp+10h] [bp-14h]@3
  int v19; // [sp+14h] [bp-10h]@11
  int v20; // [sp+18h] [bp-Ch]@7
  int i; // [sp+1Ch] [bp-8h]@3
  void *v22; // [sp+20h] [bp-4h]@9

  v14 = a1;
  if ( sub_4979C0(a7) )
  {
    sub_47E0D0((volatile LONG *)&unk_4E0980);
    sub_44AE20(v14 + 380, (int)&i, a5 + 452);
    v8 = sub_430C20(v14 + 380, &v18);
    if ( (unsigned __int8)unknown_libname_8(v8) )
    {
      v9 = *(_DWORD *)(a5 + 452);
      v10 = CPlayer::GetGID(a5, a2, a3, a4);
      sub_4328C0("CGuild::TitelChange() member find error (gid:%d,pid:%d)", v10, v9);
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 1;
    }
    else
    {
      v11 = sub_420250(&i);
      if ( CGuild::IsSkillAble(v14, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 24), 4) )
      {
        v20 = CGuild::GetTitle2Class((void *)v14, a6);
        if ( v20 )
        {
          CGuild::SetClassTitle(v14, (char *)v20, a7);
          v22 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbbs");
          CGuild::Broadcast(v14, a2, a3, a4, v22, 0);
          CIOBuffer::Release((int)v22);
          for ( i = *(_DWORD *)sub_40F070(v14 + 380, &v17); ; sub_446090(&i, (int)&v16, 0) )
          {
            v12 = sub_430C20(v14 + 380, &v15);
            if ( !(unsigned __int8)sub_47D070(v12) )
              break;
            v19 = *(_DWORD *)(*(_DWORD *)(sub_420250(&i) + 4) + 32);
            if ( v19 )
            {
              v13 = sub_420250(&i);
              if ( *(_DWORD *)(*(_DWORD *)(v13 + 4) + 24) == v20 )
              {
                CPlayer::SetGuildClass(v19, a2, a3, a4, v20, a7);
                if ( CGuild::GetGuildSkill(*(_DWORD *)(v14 + 72)) & 1 )
                {
                  CPlayer::GetGuildStandard(v19);
                  CPlayer::GetGuildName(v19);
                  CPlayer::GetGuildClassTitle(v19);
                  std___Mpunct_wchar_t___do_frac_digits(v19);
                  v22 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bdssbd");
                  CGuild::SendPlayerSight(a2, a3, a4, v19, v22, 0);
                }
              }
            }
          }
          CPlayer::GetGID(a5, a2, a3, a4);
          CDBSocket::Write(a2, a3, a4, 48, (unsigned int)"dbs");
          sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 0;
        }
        else
        {
          sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 55;
        }
      }
      else
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 22;
      }
    }
  }
  else
  {
    result = 45;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);

//----- (00414D90) --------------------------------------------------------
signed int __userpurge CGuild::SetTodayMessage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6)
{
  void *v6; // eax@1
  signed int result; // eax@2
  int v8; // ST10_4@2
  int v9; // eax@2
  int v10; // eax@3
  int v11; // [sp+0h] [bp-10h]@1
  char v12; // [sp+4h] [bp-Ch]@1
  char v13; // [sp+8h] [bp-8h]@1
  void *v14; // [sp+Ch] [bp-4h]@7

  v11 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v11 + 380, (int)&v13, a5 + 452);
  v6 = sub_430C20(v11 + 380, &v12);
  if ( (unsigned __int8)unknown_libname_8(v6) )
  {
    v8 = *(_DWORD *)(a5 + 452);
    v9 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::TitelChange() member find error (gid:%d,pid:%d)", v9, v8);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 1;
  }
  else
  {
    v10 = sub_420250((int *)&v13);
    if ( CGuild::IsSkillAble(v11, *(_DWORD *)(*(_DWORD *)(v10 + 4) + 24), 2) )
    {
      if ( sub_4977B0((int)a6) )
      {
        strcpy((char *)(v11 + 174), a6);
        v14 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbs");
        CGuild::Broadcast(v11, a2, a3, a4, v14, 0);
        CIOBuffer::Release((int)v14);
        CPlayer::GetGID(a5, a2, a3, a4);
        CDBSocket::Write(a2, a3, a4, 49, (unsigned int)"ds");
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 0;
      }
      else
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 56;
      }
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 22;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00414EF0) --------------------------------------------------------
int __userpurge CGuild::GetTodayMessage<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  sub_47DE70((volatile LONG *)&unk_4E0980);
  CPlayer::Write(a1, a2, a3, a4, 94, (unsigned int)"bbs");
  return sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
}

//----- (00414F40) --------------------------------------------------------
void __userpurge CGuild::SendMemberInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@3
  int v7; // eax@3
  char v8; // al@8
  char v9; // [sp+7h] [bp-1019h]@5
  int v10; // [sp+8h] [bp-1018h]@1
  char v11; // [sp+Ch] [bp-1014h]@2
  char v12; // [sp+10h] [bp-1010h]@7
  char v13; // [sp+14h] [bp-100Ch]@1
  char v14; // [sp+18h] [bp-1008h]@1
  char v15; // [sp+19h] [bp-1007h]@1
  __int16 v16; // [sp+1015h] [bp-Bh]@1
  char v17; // [sp+1017h] [bp-9h]@1
  int v18; // [sp+1018h] [bp-8h]@1
  int v19; // [sp+101Ch] [bp-4h]@1

  v18 = dword_4D9830;
  v10 = a1;
  v14 = 0;
  memset(&v15, 0, 0xFFCu);
  v16 = 0;
  v17 = 0;
  v19 = (int)&v14;
  sub_40F070(a1 + 380, &v13);
  while ( 1 )
  {
    v5 = sub_430C20(v10 + 380, &v11);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    v6 = sub_420250((int *)&v13);
    v19 = sub_497660(v19, *(_DWORD *)(v6 + 4));
    v7 = sub_420250((int *)&v13);
    v19 = sub_4189A0(v19, *(_BYTE *)(*(_DWORD *)(v7 + 4) + 24));
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v13) + 4) + 28)
      && *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v13) + 4) + 32) )
      v9 = *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v13) + 4) + 32) + 60);
    else
      v9 = 0;
    v19 = sub_4189A0(v19, v9);
    sub_446090((int *)&v13, (int)&v12, 0);
  }
  v8 = unknown_libname_10();
  CPlayer::Write(a2, (DWORD)&v18, a3, a4, 94, (unsigned int)"bdsssssssbm");
  CPlayer::Write(a2, (DWORD)&v18, a3, a4, 94, (unsigned int)"bbdddd");
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00415170) --------------------------------------------------------
signed int __userpurge CGuild::AdminInfo<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  signed int result; // eax@2

  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( *(_DWORD *)(a4 + 452) == CPlayer::GetGID(a4, a1, a2, a3) )
  {
    CPlayer::Write(a1, a2, a3, a4, 94, (unsigned int)"bddddd");
    sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
    result = 0;
  }
  else
  {
    sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
    result = 22;
  }
  return result;
}

//----- (00415200) --------------------------------------------------------
int __userpurge CGuild::BasicInfo<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  sub_47DE70((volatile LONG *)&unk_4E0980);
  CPlayer::Write(a1, a2, a3, a4, 94, (unsigned int)"bbdddd");
  sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
  return 0;
}

//----- (00415260) --------------------------------------------------------
signed int __userpurge CGuild::SetSkillAble<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@2
  int v11; // [sp+0h] [bp-4h]@1

  v11 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  if ( *(_DWORD *)(a5 + 452) == CPlayer::GetGID(a5, a2, a3, a4) )
  {
    *(_DWORD *)(v11 + 360) = a6;
    *(_DWORD *)(v11 + 364) = a7;
    *(_DWORD *)(v11 + 368) = a8;
    *(_DWORD *)(v11 + 372) = a9;
    *(_DWORD *)(v11 + 376) = a10;
    CDBSocket::Write(a2, a3, a4, 51, (unsigned int)"dddddd");
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 47;
  }
  else
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 22;
  }
  return result;
}

//----- (00415340) --------------------------------------------------------
signed int __userpurge CGuild::CheckStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-8h]@1

  v7 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  if ( *(_DWORD *)(a5 + 452) == CPlayer::GetGID(a5, a2, a3, a4) )
  {
    if ( *(_DWORD *)(v7 + 72) >= 2 )
    {
      if ( *(_DWORD *)(v7 + 76) & 0xFFFF )
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 0;
      }
      else
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CDBSocket::Write(a2, a3, a4, 68, (unsigned int)"ddd");
        sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 0;
      }
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 103;
    }
  }
  else
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 22;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004153F0) --------------------------------------------------------
signed int __userpurge CGuild::SetStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-8h]@1

  v7 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  if ( *(_DWORD *)(a5 + 452) == CPlayer::GetGID(a5, a2, a3, a4) )
  {
    if ( *(_DWORD *)(v7 + 72) >= 2 )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CDBSocket::Write(a2, a3, a4, 69, (unsigned int)"ddd");
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 0;
    }
    else
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 103;
    }
  }
  else
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 22;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00415480) --------------------------------------------------------
int __userpurge CGuild::OnSetStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  void *v8; // eax@3
  signed int v10; // [sp+0h] [bp-20h]@12
  int v11; // [sp+4h] [bp-1Ch]@1
  char v12; // [sp+8h] [bp-18h]@3
  char v13; // [sp+Ch] [bp-14h]@6
  int v14; // [sp+10h] [bp-10h]@10
  int v15; // [sp+14h] [bp-Ch]@4
  char v16; // [sp+18h] [bp-8h]@2
  int v17; // [sp+1Ch] [bp-4h]@8

  v11 = a1;
  if ( a6 )
  {
    sub_47E0D0((volatile LONG *)&unk_4E0980);
    *(_DWORD *)(v11 + 76) = a8;
    sub_40F070(v11 + 380, &v16);
    while ( 1 )
    {
      v8 = sub_430C20(v11 + 380, &v12);
      if ( !(unsigned __int8)sub_47D070(v8) )
        break;
      v15 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v16) + 4) + 32);
      if ( v15 )
      {
        CPlayer::SetGuildStandard(v15, a2, a3, a4, a8);
        CPlayer::Write(a2, a3, a4, v15, 94, (unsigned int)"bbd");
      }
      sub_446090((int *)&v16, (int)&v13, 0);
    }
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
  }
  v17 = sub_450810(a2, a3, a4, a5);
  if ( v17 )
  {
    if ( a6 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v17 + 1020), a2, a3, a4);
      v14 = *(_DWORD *)(v17 + 1096);
      if ( v14 )
      {
        if ( *(_DWORD *)(v14 + 52) <= 500000 )
          v10 = *(_DWORD *)(v14 + 52);
        else
          v10 = 500000;
        if ( !(*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v14 + 120))(v14, v17, 31, -v10) )
          CPlayer::_OutofInven(v17, a2, a3, a4, v14);
      }
      CIOCriticalSection::Leave(v17 + 1020, a2, a3, a4);
    }
    else
    {
      CPlayer::Write(a2, a3, a4, v17, 94, (unsigned int)"bb");
    }
    sub_4239C0(v17, a2, a3, a4, v17 + 352);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00415600) --------------------------------------------------------
signed int __userpurge CGuild::SetExpADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ecx@5
  signed __int64 v8; // ST08_8@5
  int v9; // ecx@6
  signed __int64 v10; // ST08_8@6
  int v11; // eax@19
  int v12; // eax@24
  int v13; // [sp+0h] [bp-2Ch]@8
  signed __int64 v14; // [sp+8h] [bp-24h]@6
  int v15; // [sp+24h] [bp-8h]@1
  int v16; // [sp+28h] [bp-4h]@10

  v15 = a1;
  if ( !*(_QWORD *)(a5 + 472) )
    return 51;
  if ( a6 == 10 )
  {
    if ( dword_4D567C[2 * *(_DWORD *)(a5 + 60)] | dword_4D5678[2 * *(_DWORD *)(a5 + 60)] )
    {
      v7 = *(_DWORD *)(a5 + 60);
      LODWORD(v8) = dword_4D5678[2 * v7];
      HIDWORD(v8) = dword_4D567C[2 * v7];
      if ( v8 / 10 >= *(_QWORD *)(a5 + 472) )
      {
        LODWORD(v14) = *(_DWORD *)(a5 + 472);
      }
      else
      {
        v9 = *(_DWORD *)(a5 + 60);
        HIDWORD(v10) = dword_4D567C[2 * v9];
        LODWORD(v10) = dword_4D5678[2 * v9];
        v14 = v10 / 10;
      }
      v13 = v14;
    }
    else
    {
      v13 = 0;
    }
    v16 = v13;
  }
  else
  {
    v16 = *(_DWORD *)(a5 + 472);
  }
  if ( v16 <= 0 )
  {
    sub_4328C0(
      "CGuild::SetExpADD() exp cal error (exppercent:%d,nextlevelexp:%d,exp:%d)",
      a6,
      dword_4D5678[2 * *(_DWORD *)(a5 + 60)],
      dword_4D567C[2 * *(_DWORD *)(a5 + 60)],
      *(_DWORD *)(a5 + 472),
      *(_DWORD *)(a5 + 476));
    return 1;
  }
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  if ( *(_WORD *)dword_4E1174 & 0x100 )
  {
    if ( *(_DWORD *)(v15 + 68) >= 3 )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 53;
    }
    *(_DWORD *)(v15 + 68) += v16;
    if ( *(_DWORD *)(v15 + 68) > 3 )
    {
      v16 -= *(_DWORD *)(v15 + 68) - 3;
      *(_DWORD *)(v15 + 68) = 3;
    }
    v12 = CGuild::CalPenaltyTLevel(v15);
    CGuild::SetLevel(v15, a2, a3, v12);
  }
  else
  {
    if ( *(_DWORD *)(v15 + 68) >= 16000000 )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 53;
    }
    *(_DWORD *)(v15 + 68) += v16;
    if ( *(_DWORD *)(v15 + 68) > 16000000 )
    {
      v16 -= *(_DWORD *)(v15 + 68) - 16000000;
      *(_DWORD *)(v15 + 68) = 16000000;
    }
    v11 = CGuild::CalPenaltyLevel(v15);
    CGuild::SetLevel(v15, a2, a3, v11);
  }
  CPlayer::GetGID(a5, a2, a3, a4);
  CDBSocket::Write(a2, a3, a4, 50, (unsigned int)"ddd");
  sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
  (*(void (__cdecl **)(int, signed int, _DWORD, int, _DWORD))(*(_DWORD *)a5 + 88))(
    a5,
    25,
    0,
    v16,
    (unsigned __int64)v16 >> 32);
  CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbd");
  return 0;
}
// 4D5678: using guessed type int dword_4D5678[];
// 4D567C: using guessed type int dword_4D567C[];

//----- (004158B0) --------------------------------------------------------
signed int __usercall CGuild::SetExp<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, const char *a4, signed int a5)
{
  signed int result; // eax@3
  void *v6; // eax@7
  int v7; // eax@8
  int v8; // eax@10
  int v9; // eax@11
  int v10; // eax@12
  int v11; // ST08_4@12
  int v12; // [sp+0h] [bp-14h]@10
  char v13; // [sp+4h] [bp-10h]@7
  char v14; // [sp+8h] [bp-Ch]@13
  int v15; // [sp+Ch] [bp-8h]@9
  char v16; // [sp+10h] [bp-4h]@6

  if ( a5 >= 0 && a5 <= 16000000 )
  {
    if ( strlen(a4) <= 0xE )
    {
      sub_47E0D0((volatile LONG *)&unk_4E0980);
      sub_40F070((int)&unk_4E0968, &v16);
      while ( 1 )
      {
        v6 = sub_430C20((int)&unk_4E0968, &v13);
        if ( !(unsigned __int8)sub_47D070(v6) )
        {
          CDBSocket::Write(a1, a2, a3, 59, (unsigned int)"sd");
          sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
          return 1;
        }
        v7 = sub_420250((int *)&v16);
        if ( !strcmp(a4, (const char *)(*(_DWORD *)(v7 + 4) + 44)) )
          break;
        sub_446090((int *)&v16, (int)&v14, 0);
      }
      v15 = a5 - *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v16) + 4) + 68);
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v16) + 4) + 68) = a5;
      if ( *(_WORD *)dword_4E1174 & 0x100 )
      {
        v9 = sub_420250((int *)&v16);
        v12 = CGuild::CalPenaltyTLevel(*(_DWORD *)(v9 + 4));
      }
      else
      {
        v8 = sub_420250((int *)&v16);
        v12 = CGuild::CalPenaltyLevel(*(_DWORD *)(v8 + 4));
      }
      v10 = sub_420250((int *)&v16);
      CGuild::SetLevel(*(_DWORD *)(v10 + 4), a1, a2, v12);
      v11 = *(_DWORD *)sub_420250((int *)&v16);
      CDBSocket::Write(a1, a2, a3, 50, (unsigned int)"ddd");
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00415A20) --------------------------------------------------------
signed int __userpurge CGuild::SetConnectTell<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // eax@1
  signed int result; // eax@2
  int v8; // ST14_4@2
  int v9; // eax@2
  int v10; // [sp+0h] [bp-10h]@1
  char v11; // [sp+4h] [bp-Ch]@1
  char v12; // [sp+8h] [bp-8h]@1
  void *v13; // [sp+Ch] [bp-4h]@6

  v10 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v10 + 380, (int)&v12, a5 + 452);
  v6 = sub_430C20(v10 + 380, &v11);
  if ( (unsigned __int8)unknown_libname_8(v6) )
  {
    v8 = *(_DWORD *)(a5 + 452);
    v9 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::SetConnectTell() member find error (gid:%d,pid:%d)", v9, v8);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 1;
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v12) + 4) + 28) == a6 )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 49;
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v12) + 4) + 28) = a6;
      if ( a6 )
        v13 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbsb");
      else
        v13 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbs");
      CGuild::Broadcast(v10, a2, a3, a4, v13, (void *)a5);
      CIOBuffer::Release((int)v13);
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 50;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00415B60) --------------------------------------------------------
int __userpurge CGuild::SetMemberLelvelUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6)
{
  int v7; // ST18_4@1
  void *v8; // ST1C_4@1

  v7 = a1;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  v8 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbbs");
  CGuild::Broadcast(v7, a2, a3, a4, v8, 0);
  CIOBuffer::Release((int)v8);
  return sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
}

//----- (00415BC0) --------------------------------------------------------
signed int __thiscall CGuild::GetTitle2Class(void *this, const char *a2)
{
  int v2; // eax@2
  signed int result; // eax@4
  int v4; // eax@6
  int v5; // eax@10
  int v6; // eax@14
  int v7; // eax@18
  int v8; // eax@22
  void *v9; // [sp+0h] [bp-4h]@1

  v9 = this;
  if ( strcmp(a2, "1") && (v2 = sub_432EF0(912), strcmp(a2, (const char *)v2)) && strcmp(a2, (const char *)v9 + 84) )
  {
    if ( strcmp(a2, "2") && (v4 = sub_432EF0(913), strcmp(a2, (const char *)v4)) && strcmp(a2, (const char *)v9 + 99) )
    {
      if ( strcmp(a2, "3") && (v5 = sub_432EF0(914), strcmp(a2, (const char *)v5)) && strcmp(a2, (const char *)v9 + 114) )
      {
        if ( strcmp(a2, "4")
          && (v6 = sub_432EF0(915), strcmp(a2, (const char *)v6))
          && strcmp(a2, (const char *)v9 + 129) )
        {
          if ( strcmp(a2, "5")
            && (v7 = sub_432EF0(916), strcmp(a2, (const char *)v7))
            && strcmp(a2, (const char *)v9 + 144) )
          {
            if ( strcmp(a2, "6")
              && (v8 = sub_432EF0(917), strcmp(a2, (const char *)v8))
              && strcmp(a2, (const char *)v9 + 159) )
              result = 0;
            else
              result = 6;
          }
          else
          {
            result = 5;
          }
        }
        else
        {
          result = 4;
        }
      }
      else
      {
        result = 3;
      }
    }
    else
    {
      result = 2;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (00415DD0) --------------------------------------------------------
char *__thiscall CGuild::GetClass2Title(void *this, int a2)
{
  char *result; // eax@2

  switch ( a2 )
  {
    case 1:
      result = (char *)this + 84;
      break;
    case 2:
      result = (char *)this + 99;
      break;
    case 3:
      result = (char *)this + 114;
      break;
    case 4:
      result = (char *)this + 129;
      break;
    case 5:
      result = (char *)this + 144;
      break;
    default:
      result = (char *)this + 159;
      break;
  }
  return result;
}

//----- (00415E50) --------------------------------------------------------
char *__thiscall CGuild::SetClassTitle(int this, char *a2, const char *a3)
{
  char *result; // eax@1

  result = a2;
  switch ( a2 )
  {
    case 1u:
      result = strcpy((char *)(this + 84), a3);
      break;
    case 2u:
      result = strcpy((char *)(this + 99), a3);
      break;
    case 3u:
      result = strcpy((char *)(this + 114), a3);
      break;
    case 4u:
      result = strcpy((char *)(this + 129), a3);
      break;
    case 5u:
      result = strcpy((char *)(this + 144), a3);
      break;
    case 6u:
      result = strcpy((char *)(this + 159), a3);
      break;
    default:
      return result;
  }
  return result;
}

//----- (00415F20) --------------------------------------------------------
char __thiscall CGuild::IsMemberFull(void *this)
{
  void *v1; // eax@2
  char result; // al@7
  void *v3; // [sp+4h] [bp-14h]@1
  char v4; // [sp+8h] [bp-10h]@2
  char v5; // [sp+Ch] [bp-Ch]@5
  char v6; // [sp+10h] [bp-8h]@1
  int v7; // [sp+14h] [bp-4h]@1

  v3 = this;
  v7 = 0;
  sub_40F070((int)((char *)this + 380), &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)((char *)v3 + 380), &v4);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v6) + 4) + 24) != 6 )
      ++v7;
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  switch ( *((_DWORD *)v3 + 18) )
  {
    case 1:
      result = v7 >= 12;
      break;
    case 2:
      result = v7 >= 26;
      break;
    case 3:
      result = v7 >= 40;
      break;
    case 4:
      result = v7 >= 54;
      break;
    default:
      result = 1;
      break;
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416000) --------------------------------------------------------
char __thiscall CGuild::IsAppointmentFull(void *this, int a2)
{
  char result; // al@3
  void *v3; // eax@5
  void *v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@5
  char v6; // [sp+Ch] [bp-Ch]@8
  char v7; // [sp+10h] [bp-8h]@4
  unsigned int v8; // [sp+14h] [bp-4h]@4

  v4 = this;
  if ( a2 != 5 && a2 != 6 )
  {
    v8 = 0;
    sub_40F070((int)((char *)this + 380), &v7);
    while ( 1 )
    {
      v3 = sub_430C20((int)((char *)v4 + 380), &v5);
      if ( !(unsigned __int8)sub_47D070(v3) )
        break;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v7) + 4) + 24) == a2 )
        ++v8;
      sub_446090((int *)&v7, (int)&v6, 0);
    }
    switch ( a2 )
    {
      case 2:
        result = (signed int)v8 <= 0;
        break;
      case 3:
        result = v8 < unknown_libname_10() / 0x64u;
        break;
      case 4:
        result = v8 < unknown_libname_10() / 0xAu;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416100) --------------------------------------------------------
int __thiscall CGuild::GetAppointmentLimitTime(void *this, int a2)
{
  int result; // eax@2
  void *v3; // eax@4
  void *v4; // [sp+0h] [bp-14h]@1
  char v5; // [sp+4h] [bp-10h]@4
  char v6; // [sp+8h] [bp-Ch]@7
  char v7; // [sp+Ch] [bp-8h]@3
  int v8; // [sp+10h] [bp-4h]@1

  v4 = this;
  v8 = 0;
  if ( a2 == 2 )
  {
    sub_40F070((int)((char *)this + 380), &v7);
    while ( 1 )
    {
      v3 = sub_430C20((int)((char *)v4 + 380), &v5);
      if ( !(unsigned __int8)sub_47D070(v3) )
        break;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v7) + 4) + 24) == 2 )
      {
        v8 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v7) + 4) + 36);
        break;
      }
      sub_446090((int *)&v7, (int)&v6, 0);
    }
    result = v8;
  }
  else
  {
    result = v8;
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416190) --------------------------------------------------------
signed int __userpurge CGuild::IsSameName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, const char *a4)
{
  void *v4; // eax@2
  int v5; // eax@3
  char v7; // [sp+4h] [bp-Ch]@2
  char v8; // [sp+8h] [bp-8h]@5
  char v9; // [sp+Ch] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E0980);
  sub_40F070((int)&unk_4E0968, &v9);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E0968, &v7);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v5 = sub_420250((int *)&v9);
    if ( !strcmp(a4, (const char *)(*(_DWORD *)(v5 + 4) + 44)) )
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
      return 1;
    }
    sub_446090((int *)&v9, (int)&v8, 0);
  }
  sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416230) --------------------------------------------------------
int __usercall sub_416230<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-Ch]@1
  char v7; // [sp+4h] [bp-8h]@1
  int v8; // [sp+8h] [bp-4h]@1

  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  sub_44AE20((int)&unk_4E0968, (int)&v7, (int)&a4);
  v4 = sub_430C20((int)&unk_4E0968, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v8 = *(_DWORD *)(sub_420250((int *)&v7) + 4);
    sub_423980(v8, a1, a2, a3, (volatile LONG *)(v8 + 40));
  }
  sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
  return v8;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004162B0) --------------------------------------------------------
int __cdecl CGuild::FindGuild(const char *a1)
{
  void *v1; // eax@2
  int v2; // eax@3
  char v4; // [sp+0h] [bp-Ch]@2
  char v5; // [sp+4h] [bp-8h]@5
  char v6; // [sp+8h] [bp-4h]@1

  sub_40F070((int)&unk_4E0968, &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)&unk_4E0968, &v4);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    v2 = sub_420250((int *)&v6);
    if ( !strcmp(a1, (const char *)(*(_DWORD *)(v2 + 4) + 44)) )
      return *(_DWORD *)(sub_420250((int *)&v6) + 4);
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416330) --------------------------------------------------------
int __thiscall CGuild::FindLeaderPlayer(void *this)
{
  void *v1; // eax@2
  void *v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+4h] [bp-Ch]@2
  char v5; // [sp+8h] [bp-8h]@5
  char v6; // [sp+Ch] [bp-4h]@1

  v3 = this;
  sub_40F070((int)((char *)this + 380), &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)((char *)v3 + 380), &v4);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v6) + 4) + 24) == 1 )
      return *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v6) + 4) + 32);
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004163B0) --------------------------------------------------------
char *__thiscall CGuild::GetLeaderName(void *this)
{
  void *v1; // eax@2
  void *v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+4h] [bp-Ch]@2
  char v5; // [sp+8h] [bp-8h]@5
  char v6; // [sp+Ch] [bp-4h]@1

  v3 = this;
  sub_40F070((int)((char *)this + 380), &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)((char *)v3 + 380), &v4);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v6) + 4) + 24) == 1 )
      return *(char **)(sub_420250((int *)&v6) + 4);
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  return &byte_4B437D;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416430) --------------------------------------------------------
int __thiscall CGuild::FindMember(void *this, int a2, const char *a3)
{
  void *v3; // eax@2
  int v4; // eax@3
  void *v6; // [sp+0h] [bp-10h]@1
  char v7; // [sp+4h] [bp-Ch]@2
  char v8; // [sp+8h] [bp-8h]@5
  int v9; // [sp+Ch] [bp-4h]@1

  v6 = this;
  sub_40F070((int)((char *)this + 380), &v9);
  while ( 1 )
  {
    v3 = sub_430C20((int)((char *)v6 + 380), &v7);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = sub_420250(&v9);
    if ( !strcmp(a3, *(const char **)(v4 + 4)) )
      break;
    sub_446090(&v9, (int)&v8, 0);
  }
  *(_DWORD *)a2 = v9;
  return a2;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004164B0) --------------------------------------------------------
int __usercall CGuild::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  int v4; // eax@4
  int result; // eax@7
  int v6; // [sp+4h] [bp-2Ch]@2
  char v7; // [sp+10h] [bp-20h]@4
  char v8; // [sp+18h] [bp-18h]@4
  int v9; // [sp+20h] [bp-10h]@1
  int v10; // [sp+24h] [bp-Ch]@4
  char v11; // [sp+28h] [bp-8h]@4
  char v12; // [sp+2Ch] [bp-4h]@4

  sub_47E0D0((volatile LONG *)&unk_4E0980);
  v9 = (int)sub_401000(0x198u);
  if ( v9 )
    v6 = CGuild::CGuild(v9);
  else
    v6 = 0;
  v10 = v6;
  v4 = sub_418940(&v7, a4, v6);
  sub_41CF00((int)&v8, v4);
  sub_445DF0((int)&unk_4E0974, (int)&v11, (int)&v8);
  if ( v12 )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
    result = v10;
  }
  else
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
    if ( v10 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v10)(v10, 1);
    result = 0;
  }
  return result;
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);

//----- (00416570) --------------------------------------------------------
signed int __userpurge CGuild::MemberADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // eax@1
  signed int result; // eax@2
  char *v9; // eax@3
  int v10; // [sp+0h] [bp-28h]@1
  char v11; // [sp+8h] [bp-20h]@1
  char v12; // [sp+10h] [bp-18h]@1
  void *v13; // [sp+18h] [bp-10h]@1
  char *v14; // [sp+1Ch] [bp-Ch]@1
  char v15; // [sp+20h] [bp-8h]@1
  char v16; // [sp+24h] [bp-4h]@1

  v10 = a1;
  v13 = sub_401000(0x28u);
  v14 = (char *)v13;
  v7 = sub_418940(&v11, *(_DWORD *)(a6 + 452), (char)v13);
  sub_41CF00((int)&v12, v7);
  sub_445DF0(v10 + 380, (int)&v15, (int)&v12);
  if ( v16 )
  {
    CPlayer::SetGID(a6, a2, a3, a4, a5);
    CPlayer::SetGuild(a6, a2, a3, a4, v10);
    CPlayer::SetGuildLevel(a6, a2, a3, a4, *(_DWORD *)(v10 + 72));
    CPlayer::SetGuildName(a6, a2, a3, a4, (const char *)(v10 + 44));
    CPlayer::SetGuildStandard(a6, a2, a3, a4, *(_DWORD *)(v10 + 76));
    v9 = CGuild::GetClass2Title((void *)v10, a7);
    CPlayer::SetGuildClass(a6, a2, a3, a4, a7, v9);
    strcpy(v14, (const char *)(a6 + 32));
    *((_DWORD *)v14 + 6) = a7;
    *((_DWORD *)v14 + 7) = 1;
    *((_DWORD *)v14 + 9) = 0;
    *((_DWORD *)v14 + 8) = a6;
    CIOObject::AddRef(a6, a2, a3, a4);
    ++*(_DWORD *)(v10 + 32);
    *(_DWORD *)(v10 + 356) = 0;
    *((_DWORD *)v14 + 5) = *(_DWORD *)(a6 + 468);
    result = 1;
  }
  else
  {
    sub_401020((int)v14);
    result = 0;
  }
  return result;
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);

//----- (004166C0) --------------------------------------------------------
int __userpurge CGuild::MemberDEL<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4)
{
  int v5; // [sp+0h] [bp-1Ch]@12
  int v6; // [sp+4h] [bp-18h]@8
  int v7; // [sp+8h] [bp-14h]@6
  int v8; // [sp+Ch] [bp-10h]@3
  int v9; // [sp+10h] [bp-Ch]@1
  char v10; // [sp+14h] [bp-8h]@15
  int v11; // [sp+18h] [bp-4h]@15

  v9 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 24) < 6 )
  {
    if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20) >= 0 )
      v8 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20);
    else
      v8 = 0;
    if ( *(_DWORD *)(v9 + 64) - v8 >= 0 )
    {
      if ( 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20) >= 0 )
        v6 = 10000 * *(_DWORD *)(*(_DWORD *)(sub_420250(&a4) + 4) + 20);
      else
        v6 = 0;
      v7 = *(_DWORD *)(v9 + 64) - v6;
    }
    else
    {
      v7 = 0;
    }
    *(_DWORD *)(v9 + 64) = v7;
    if ( *(_WORD *)dword_4E1174 & 0x100 )
      v5 = CGuild::CalPenaltyTLevel(v9);
    else
      v5 = CGuild::CalPenaltyLevel(v9);
    CGuild::SetLevel(v9, a2, a3, v5);
  }
  v11 = *(_DWORD *)(sub_420250(&a4) + 4);
  sub_401020(v11);
  return sub_44AF50((void *)(v9 + 380), (int)&v10, a4);
}

//----- (004167E0) --------------------------------------------------------
char __userpurge CGuild::SetLevel<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4)
{
  int v4; // eax@1
  int v5; // esi@2
  void *v6; // eax@4
  void *v7; // eax@11
  int v9; // [sp+4h] [bp-28h]@1
  char v10; // [sp+8h] [bp-24h]@11
  char v11; // [sp+Ch] [bp-20h]@14
  char v12; // [sp+10h] [bp-1Ch]@4
  char v13; // [sp+14h] [bp-18h]@8
  int v14; // [sp+18h] [bp-14h]@12
  char v15; // [sp+1Ch] [bp-10h]@10
  void *v16; // [sp+20h] [bp-Ch]@7
  int v17; // [sp+24h] [bp-8h]@5
  char v18; // [sp+28h] [bp-4h]@3

  v9 = a1;
  LOBYTE(v4) = a1;
  if ( *(_DWORD *)(a1 + 72) != a4 )
  {
    v5 = CGuild::GetGuildSkill(*(_DWORD *)(a1 + 72)) & 3;
    if ( v5 == (CGuild::GetGuildSkill(a4) & 3) )
    {
      sub_40F070(v9 + 380, &v15);
      while ( 1 )
      {
        v7 = sub_430C20(v9 + 380, &v10);
        v4 = (unsigned __int8)sub_47D070(v7);
        if ( !(_BYTE)v4 )
          break;
        v14 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v15) + 4) + 32);
        if ( v14 )
          CPlayer::SetGuildLevel(v14, a2, a3, v5, a4);
        sub_446090((int *)&v15, (int)&v11, 0);
      }
    }
    else
    {
      sub_40F070(v9 + 380, &v18);
      while ( 1 )
      {
        v6 = sub_430C20(v9 + 380, &v12);
        LOBYTE(v4) = sub_47D070(v6);
        if ( !(_BYTE)v4 )
          break;
        v17 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v18) + 4) + 32);
        if ( v17 )
        {
          CPlayer::SetGuildLevel(v17, a2, a3, v5, a4);
          if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v18) + 4) + 24) < 6 )
          {
            CPlayer::GetGuildStandard(v17);
            CPlayer::GetGuildName(v17);
            CPlayer::GetGuildClassTitle(v17);
            std___Mpunct_wchar_t___do_frac_digits(v17);
            v16 = sub_44FCE0(a2, a3, v5, 94, (unsigned int)"bdssbd");
            CGuild::SendPlayerSight(a2, a3, v5, v17, v16, 0);
          }
        }
        sub_446090((int *)&v18, (int)&v13, 0);
      }
    }
    *(_DWORD *)(v9 + 72) = a4;
  }
  return v4;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416970) --------------------------------------------------------
signed int __cdecl CGuild::GetGuildSkill(int a1)
{
  signed int result; // eax@2

  switch ( a1 )
  {
    case 1:
      result = 0;
      break;
    case 2:
      result = 1;
      break;
    case 3:
      result = 3;
      break;
    case 4:
      result = 15;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (004169D0) --------------------------------------------------------
void __userpurge CGuild::SetPointADD(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  void *v7; // eax@1
  int v8; // ST08_4@2
  int v9; // eax@2
  int v10; // [sp+0h] [bp-18h]@11
  int v11; // [sp+4h] [bp-14h]@8
  int v12; // [sp+8h] [bp-10h]@4
  int v13; // [sp+Ch] [bp-Ch]@1
  char v14; // [sp+10h] [bp-8h]@1
  char v15; // [sp+14h] [bp-4h]@1

  v13 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  sub_44AE20(v13 + 380, (int)&v15, a5 + 452);
  v7 = sub_430C20(v13 + 380, &v14);
  if ( (unsigned __int8)unknown_libname_8(v7) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    v8 = *(_DWORD *)(a5 + 452);
    v9 = CPlayer::GetGID(a5, a2, a3, a4);
    sub_4328C0("CGuild::SetPointADD() member find error (gid:%d,pid:%d)", v9, v8);
  }
  else
  {
    if ( a6 + *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v15) + 4) + 20) >= 0 )
      v12 = a6 + *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v15) + 4) + 20);
    else
      v12 = 0;
    *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v15) + 4) + 20) = v12;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v15) + 4) + 24) < 6 )
    {
      if ( *(_DWORD *)(v13 + 64) + 10000 * a6 >= 0 )
        v11 = *(_DWORD *)(v13 + 64) + 10000 * a6;
      else
        v11 = 0;
      *(_DWORD *)(v13 + 64) = v11;
      if ( *(_WORD *)dword_4E1174 & 0x100 )
        v10 = CGuild::CalPenaltyTLevel(v13);
      else
        v10 = CGuild::CalPenaltyLevel(v13);
      CGuild::SetLevel(v13, a2, a3, v10);
    }
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00416B20) --------------------------------------------------------
signed int __thiscall CGuild::CalPenaltyLevel(int this)
{
  signed int result; // eax@19
  signed int v2; // [sp+0h] [bp-14h]@16
  signed int v3; // [sp+Ch] [bp-8h]@9
  signed int v4; // [sp+10h] [bp-4h]@2

  if ( *(_DWORD *)(this + 68) < 16000000 )
  {
    if ( *(_DWORD *)(this + 68) < 7800000 )
    {
      if ( *(_DWORD *)(this + 68) < 2400000 )
        v4 = 1;
      else
        v4 = 2;
    }
    else
    {
      v4 = 3;
    }
  }
  else
  {
    v4 = 4;
  }
  if ( *(_DWORD *)(this + 64) < 4000000 )
  {
    if ( *(_DWORD *)(this + 64) < 2600000 )
    {
      if ( *(_DWORD *)(this + 64) < 1200000 )
        v3 = 1;
      else
        v3 = 2;
    }
    else
    {
      v3 = 3;
    }
  }
  else
  {
    v3 = 4;
  }
  if ( v4 >= v3 )
    v2 = v3;
  else
    v2 = v4;
  if ( *(_DWORD *)(this + 72) > v2 )
    result = v3;
  else
    result = v2;
  return result;
}

//----- (00416BF0) --------------------------------------------------------
signed int __thiscall CGuild::CalPenaltyTLevel(int this)
{
  signed int result; // eax@19
  signed int v2; // [sp+0h] [bp-14h]@16
  signed int v3; // [sp+Ch] [bp-8h]@9
  signed int v4; // [sp+10h] [bp-4h]@2

  if ( *(_DWORD *)(this + 68) < 3 )
  {
    if ( *(_DWORD *)(this + 68) < 2 )
    {
      if ( *(_DWORD *)(this + 68) < 1 )
        v4 = 1;
      else
        v4 = 2;
    }
    else
    {
      v4 = 3;
    }
  }
  else
  {
    v4 = 4;
  }
  if ( *(_DWORD *)(this + 64) < 30000 )
  {
    if ( *(_DWORD *)(this + 64) < 20000 )
    {
      if ( *(_DWORD *)(this + 64) < 10000 )
        v3 = 1;
      else
        v3 = 2;
    }
    else
    {
      v3 = 3;
    }
  }
  else
  {
    v3 = 4;
  }
  if ( v4 >= v3 )
    v2 = v3;
  else
    v2 = v4;
  if ( *(_DWORD *)(this + 72) > v2 )
    result = v3;
  else
    result = v2;
  return result;
}

//----- (00416CB0) --------------------------------------------------------
int __userpurge CGuild::BroadcastLock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6)
{
  int v7; // ST08_4@1

  v7 = a1;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  CGuild::Broadcast(v7, a2, a3, a4, a5, a6);
  return sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
}

//----- (00416CF0) --------------------------------------------------------
char __userpurge CGuild::Broadcast<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6)
{
  int v6; // eax@2
  void *v7; // eax@2
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@2
  char v11; // [sp+8h] [bp-Ch]@6
  void *v12; // [sp+Ch] [bp-8h]@3
  char v13; // [sp+10h] [bp-4h]@1

  v9 = a1;
  sub_40F070(a1 + 380, &v13);
  while ( 1 )
  {
    v7 = sub_430C20(v9 + 380, &v10);
    v6 = (unsigned __int8)sub_47D070(v7);
    if ( !(_BYTE)v6 )
      break;
    v12 = *(void **)(*(_DWORD *)(sub_420250((int *)&v13) + 4) + 32);
    if ( v12 )
    {
      if ( v12 != a6 )
        CPlayer::Send(v12, a2, a3, a4, a5);
    }
    sub_446090((int *)&v13, (int)&v11, 0);
  }
  return v6;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00416D70) --------------------------------------------------------
LONG __usercall CGuild::SendPlayerSight<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, void *a5, int a6)
{
  int v6; // eax@5
  int i; // [sp+0h] [bp-4h]@1

  for ( i = sub_4934F0(*(_DWORD *)(a4 + 320), a1, a2, a3, a4 + 324, 25); i; i = CBaseList::Pop(i, a1, a2, a3) )
  {
    if ( !a6 || a4 != unknown_libname_7() )
    {
      v6 = unknown_libname_7();
      CPlayer::Send((void *)v6, a1, a2, a3, a5);
    }
  }
  return CIOBuffer::Release((int)a5);
}

//----- (00416DE0) --------------------------------------------------------
signed int __userpurge CGuild::AllianceOffer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6, signed int a7)
{
  signed int result; // eax@2
  int v8; // [sp+0h] [bp-Ch]@1
  int v9; // [sp+4h] [bp-8h]@22
  int v10; // [sp+8h] [bp-4h]@18
  __int32 v11; // [sp+1Ch] [bp+10h]@15

  v8 = a1;
  if ( CPlayer::GetGID(a5, a2, a3, a4) != *(_DWORD *)(a5 + 452) )
    return 22;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( !(CGuild::GetGuildSkill(*(_DWORD *)(v8 + 72)) & 8) )
  {
    sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 57;
  }
  if ( *(_DWORD *)(v8 + 396) && *(_DWORD *)(v8 + 392) == CPlayer::GetGID(a5, a2, a3, a4) )
  {
    if ( CAlliance::GetSize(*(_DWORD *)(v8 + 396), a2, a3, a4) >= 8 )
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 64;
    }
  }
  else
  {
    if ( *(_DWORD *)(v8 + 392) )
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 58;
    }
    if ( a7 <= 0 || a7 > 15 )
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 59;
    }
    v11 = a7 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 3600 : 86400) + time(0);
  }
  if ( sub_4173F0() )
  {
    v10 = CGuild::FindGuild(a6);
    if ( v10 )
    {
      if ( *(_DWORD *)(v10 + 392) )
      {
        sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 61;
      }
      else
      {
        v9 = CGuild::FindLeaderPlayer((void *)v10);
        if ( v9 )
        {
          CPlayer::Write(a2, a3, a4, v9, 94, (unsigned int)"bbdsd");
          CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbs");
          sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 0;
        }
        else
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 60;
        }
      }
    }
    else
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 60;
    }
  }
  else
  {
    sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 68;
  }
  return result;
}

//----- (00416FE0) --------------------------------------------------------
signed int __userpurge CGuild::AllianceOfferAnswer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, time_t a7, int a8)
{
  void *v9; // eax@5
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@12
  int v13; // eax@13
  int v14; // ST20_4@24
  int v15; // ST14_4@24
  int v16; // eax@24
  void *v17; // eax@28
  int v18; // ST10_4@32
  int v19; // [sp+0h] [bp-24h]@1
  char v20; // [sp+4h] [bp-20h]@28
  char v21; // [sp+8h] [bp-1Ch]@31
  char v22; // [sp+Ch] [bp-18h]@5
  int v23; // [sp+10h] [bp-14h]@29
  char v24; // [sp+14h] [bp-10h]@27
  void *v25; // [sp+18h] [bp-Ch]@32
  char v26; // [sp+1Ch] [bp-8h]@5
  int v27; // [sp+20h] [bp-4h]@7

  v19 = a1;
  if ( CPlayer::GetGID(a5, a2, a3, a4) != *(_DWORD *)(a5 + 452) )
    return 22;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  if ( *(_DWORD *)(v19 + 392) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 61;
  }
  sub_44AE20((int)&unk_4E0968, (int)&v26, (int)&a6);
  v9 = sub_430C20((int)&unk_4E0968, &v22);
  if ( (unsigned __int8)unknown_libname_8(v9) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 60;
  }
  v10 = sub_420250((int *)&v26);
  v27 = CGuild::FindLeaderPlayer(*(void **)(v10 + 4));
  if ( !v27 )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 60;
  }
  v11 = sub_420250((int *)&v26);
  if ( !(CGuild::GetGuildSkill(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 72)) & 8) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 1;
  }
  if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v26) + 4) + 396)
    && (v12 = sub_420250((int *)&v26), *(_DWORD *)(*(_DWORD *)(v12 + 4) + 392) == a6) )
  {
    v13 = sub_420250((int *)&v26);
    if ( CAlliance::GetSize(*(_DWORD *)(*(_DWORD *)(v13 + 4) + 396), a2, a3, a4) >= 8 )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 64;
    }
    a7 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v26) + 4) + 396) + 76);
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v26) + 4) + 392) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 58;
    }
    if ( a7 <= time(0) || a7 > ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 54060 : 1296060) + time(0) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 59;
    }
  }
  if ( !sub_4173F0() )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 68;
  }
  if ( a8 )
  {
    v14 = a7;
    v15 = *(_DWORD *)(a5 + 452);
    v16 = sub_420250((int *)&v26);
    if ( !CAlliance::Join(
            a2,
            a3,
            a4,
            a6,
            (const char *)(v27 + 32),
            *(_DWORD *)(v16 + 4),
            v15,
            (const char *)(a5 + 32),
            v19,
            v14) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 1;
    }
    if ( *(_DWORD *)(v19 + 396) )
    {
      sub_40F070(v19 + 380, &v24);
      while ( 1 )
      {
        v17 = sub_430C20(v19 + 380, &v20);
        if ( !(unsigned __int8)sub_47D070(v17) )
          break;
        v23 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v24) + 4) + 32);
        if ( v23 )
          CAlliance::AllianceInfo(*(_DWORD *)(v19 + 396), a2, a4, v23);
        sub_446090((int *)&v24, (int)&v21, 0);
      }
      v18 = *(_DWORD *)(sub_420250((int *)&v26) + 4) + 44;
      v25 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbsdssd");
      CAlliance::BroadcastLock(*(_DWORD *)(v19 + 396), a2, a3, a4, v25);
      CIOBuffer::Release((int)v25);
    }
  }
  else
  {
    CPlayer::Write(a2, a3, a4, v27, 94, (unsigned int)"bbs");
    CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbs");
  }
  sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
  return 0;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00417360) --------------------------------------------------------
int __userpurge CGuild::SetAlliance<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int result; // eax@5
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  if ( *(_DWORD *)(a1 + 396) )
    CIOObject::Release(*(_DWORD *)(a1 + 396), a2, a3, a4);
  if ( a6 )
    CIOObject::AddRef(a6, a2, a3, a4);
  result = a6;
  *(_DWORD *)(v7 + 396) = a6;
  *(_DWORD *)(v7 + 392) = a5;
  return result;
}

//----- (004173B0) --------------------------------------------------------
int __userpurge CGuild::AllianceBroadcast<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( *(_DWORD *)(v6 + 396) )
    CAlliance::BroadcastLock(*(_DWORD *)(v6 + 396), a2, a3, a4, a5);
  return sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
}

//----- (004173F0) --------------------------------------------------------
bool __cdecl sub_4173F0()
{
  return dword_4E0964 == 0;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417410) --------------------------------------------------------
bool __cdecl CGuild::IsDeclareWarPeriod()
{
  return dword_4E0964 == 1;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417430) --------------------------------------------------------
bool __cdecl CGuild::IsWarWaitingPeriod()
{
  return dword_4E0964 == 2;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417450) --------------------------------------------------------
bool __cdecl CGuild::IsWarringPeriod()
{
  return dword_4E0964 == 4;
}
// 4E0964: using guessed type int dword_4E0964;

//----- (00417470) --------------------------------------------------------
time_t __cdecl CGuild::GetWarEndTime()
{
  time_t v1; // [sp+0h] [bp-8h]@1
  struct tm *v2; // [sp+4h] [bp-4h]@1

  v1 = time(0);
  v2 = localtime(&v1);
  if ( *(_WORD *)dword_4E1174 & 0x100 )
  {
    v2->tm_hour = 22;
  }
  else
  {
    v1 += 86400 * (7 - v2->tm_wday);
    v2 = localtime(&v1);
    v2->tm_hour = 7;
  }
  v2->tm_sec = 0;
  v2->tm_min = 0;
  return mktime(v2);
}

//----- (00417500) --------------------------------------------------------
signed int __userpurge CGuild::WarDeclare<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-14h]@1
  int v8; // [sp+4h] [bp-10h]@33
  int v9; // [sp+8h] [bp-Ch]@23
  int v10; // [sp+Ch] [bp-8h]@11
  int v11; // [sp+10h] [bp-4h]@30

  v7 = a1;
  if ( *(_DWORD *)(a5 + 452) != CPlayer::GetGID(a5, a2, a3, a4) )
    return 22;
  sub_47E0D0((volatile LONG *)&unk_4E0980);
  if ( !(*(_WORD *)dword_4E1174 & 0x100) && !(CGuild::GetGuildSkill(*(_DWORD *)(v7 + 72)) & 4) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 57;
  }
  if ( !CGuild::IsDeclareWarPeriod() )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 70;
  }
  if ( *(_DWORD *)(v7 + 392) && *(_DWORD *)(v7 + 392) != *(_DWORD *)(a5 + 452) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 71;
  }
  v10 = CCastle::GetCastle(a6);
  if ( !v10 )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 1;
  }
  if ( CCastle::IsLord(v10, a2, a3, a4, *(_DWORD *)(a5 + 452)) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 72;
  }
  if ( CCastle::IsAlreadyDeclare(v10, a2, a3, a4, *(_DWORD *)(a5 + 452)) )
  {
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    return 75;
  }
  if ( dword_4E35B8 == 2 )
  {
    if ( CCastle::GetWarSize(v10, a2, a3, a4) >= 24 )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 77;
    }
  }
  else
  {
    if ( CCastle::GetWarSize(v10, a2, a3, a4) >= 100 )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 77;
    }
  }
  v9 = 1;
  if ( *(_DWORD *)(v7 + 392) )
  {
    if ( CCastle::IsAlliance(v10, a2, a3, a4, *(_DWORD *)(v7 + 392)) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
      return 73;
    }
    v9 = CAlliance::GetSize(*(_DWORD *)(v7 + 396), a2, a3, a4);
  }
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1020), a2, a3, a4);
  if ( *(_DWORD *)(a5 + 1096)
    && v9 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000) <= *(_DWORD *)(*(_DWORD *)(a5 + 1096) + 52) )
  {
    v11 = *(_DWORD *)(a5 + 1096);
    if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v11 + 120))(
            *(_DWORD *)(a5 + 1096),
            a5,
            31,
            -(v9 * ((*(_WORD *)dword_4E1174 & 0x100) != 0 ? 100 : 100000))) )
      CPlayer::_OutofInven(a5, a2, a3, a4, v11);
    CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
    if ( *(_DWORD *)(v10 + 52) == -4 )
    {
      v8 = *(_DWORD *)(v10 + 48);
      if ( v8 )
      {
        if ( *(_DWORD *)(v8 + 392) )
          CCastle::WarAllianceADD(v10, a2, a3, a4, a6, *(_DWORD *)(v8 + 392), v8 + 44, *(_DWORD *)(v8 + 396));
        else
          CCastle::WarADD(v10, a2, a3, a4, a6, *(_DWORD *)(v10 + 32), (const char *)(v8 + 44), v8);
      }
      else
      {
        sub_4328C0(
          "CGuild::WarDeclare( CPlayer* , nCID )  PID:%d , UID:%d",
          *(_DWORD *)(a5 + 452),
          *(_DWORD *)(a5 + 448));
      }
    }
    if ( *(_DWORD *)(v7 + 392) )
      CCastle::WarAllianceADD(v10, a2, a3, a4, a6, *(_DWORD *)(v7 + 392), v7 + 44, *(_DWORD *)(v7 + 396));
    else
      CCastle::WarADD(v10, a2, a3, a4, a6, *(_DWORD *)(a5 + 452), (const char *)(a5 + 32), v7);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 0;
  }
  else
  {
    CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
    sub_47E1C0((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 74;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00417890) --------------------------------------------------------
int __usercall CGuild::WarDelcareList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E0980);
  v6 = CCastle::GetCastle(a5);
  if ( v6 )
    CCastle::WarDelcareList(v6, a1, a3, a4);
  return sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
}

//----- (004178D0) --------------------------------------------------------
signed int __userpurge CGuild::TrialUnfurlStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-8h]@1
  int v8; // [sp+4h] [bp-4h]@3

  v7 = a1;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( CGuild::IsWarringPeriod() )
  {
    v8 = CCastle::GetCastle(a6);
    if ( v8 )
    {
      if ( CCastle::IsStandardAlive(v8, a2, a3, a4) )
      {
        if ( CCastle::GetStandardUnfurl(v8, a2, a3, a4) )
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
          result = 95;
        }
        else
        {
          if ( *(_DWORD *)(a5 + 452) == CPlayer::GetGID(a5, a2, a3, a4) )
          {
            if ( *(_DWORD *)(v7 + 392) && *(_DWORD *)(v7 + 392) != *(_DWORD *)(a5 + 452) )
            {
              sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
              result = 92;
            }
            else
            {
              if ( CCastle::IsLord(v8, a2, a3, a4, *(_DWORD *)(a5 + 452))
                || CCastle::IsAlreadyDeclare(v8, a2, a3, a4, *(_DWORD *)(a5 + 452)) )
              {
                CChar::Lock(a5, a2, a3, a4);
                if ( CChar::IsGState(a5, 1024) )
                {
                  CChar::Unlock(a5, a2, a3, a4);
                  sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
                  result = 82;
                }
                else
                {
                  CCastle::SetStandardUnfurl(v8, a2, a3, a4, 1);
                  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 100))(a5, 1024);
                  *(_DWORD *)(a5 + 1468) = GetTickCount() + 60000;
                  *(_DWORD *)(a5 + 1268) = a6;
                  CChar::Unlock(a5, a2, a3, a4);
                  sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
                  result = 84;
                }
              }
              else
              {
                sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
                result = 93;
              }
            }
          }
          else
          {
            sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
            result = 22;
          }
        }
      }
      else
      {
        sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
        result = 83;
      }
    }
    else
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      result = 1;
    }
  }
  else
  {
    sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
    result = 91;
  }
  return result;
}

//----- (00417A90) --------------------------------------------------------
int __userpurge CGuild::UnfurlStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int result; // eax@2
  void *v7; // ST1C_4@8
  int v8; // [sp+0h] [bp-Ch]@1
  int v9; // [sp+8h] [bp-4h]@3

  v8 = a1;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( CGuild::IsWarringPeriod() )
  {
    v9 = CCastle::GetCastle(a6);
    if ( v9 )
    {
      if ( CCastle::IsStandardAlive(v9, a2, a3, a4) )
      {
        if ( CCastle::CreateStandard(a2, a3, a4, a6, *(_DWORD *)(a5 + 452), (const char *)(v8 + 44), 1) )
        {
          CCastle::SetCurStandardGuild(v9, a2, a3, a4, *(_DWORD *)(a5 + 452), v8);
          CCastle::SetStandardUnfurl(v9, a2, a3, a4, 0);
          CCastle::SetLordDeclare(v9, a2, a3, a4, 1);
          ++*(_DWORD *)(v8 + 32);
          v7 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbds");
          CCastle::WarMsg((void *)v9, a2, a3, a4, v7);
          CIOBuffer::Release((int)v7);
        }
        result = sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      }
      else
      {
        result = sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
      }
    }
    else
    {
      result = sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
    }
  }
  else
  {
    result = sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
  }
  return result;
}

//----- (00417BA0) --------------------------------------------------------
int __usercall CGuild::BrokenStandard<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v5; // [sp+0h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E0980);
  v5 = CCastle::GetCastle(a4);
  if ( v5 )
    CCastle::BrokenStandard(v5, a1, a2, a3, a4);
  return sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
}

//----- (00417BE0) --------------------------------------------------------
int __usercall CGuild::BrokenGate<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  void *v5; // ST18_4@3
  int v7; // [sp+8h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E0980);
  v7 = CCastle::GetCastle(a4);
  if ( v7 )
  {
    if ( CCastle::SubGateState(v7, a1, a2, a3, a4, a5) >= 0 )
    {
      v5 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bbdb");
      CCastle::WarMsg((void *)v7, a1, a2, a3, v5);
      CIOBuffer::Release((int)v5);
    }
  }
  return sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
}

//----- (00417C60) --------------------------------------------------------
signed int __usercall CGuild::CanAttack<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  signed int result; // eax@5

  if ( a4 && CCastle::IsAllCastleWarRelation(a1, a2, a3, a4) )
  {
    if ( a5 )
    {
      if ( a4 == a5 )
      {
        sub_4239C0(a4, a1, a2, a3, a4 + 40);
        sub_4239C0(a5, a1, a2, a3, a5 + 40);
        result = 0;
      }
      else
      {
        sub_47DE70((volatile LONG *)&unk_4E0980);
        if ( *(_DWORD *)(a4 + 392) && *(_DWORD *)(a4 + 392) == *(_DWORD *)(a5 + 392) )
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
          sub_4239C0(a4, a1, a2, a3, a4 + 40);
          sub_4239C0(a5, a1, a2, a3, a5 + 40);
          result = 0;
        }
        else
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
          sub_4239C0(a4, a1, a2, a3, a4 + 40);
          sub_4239C0(a5, a1, a2, a3, a5 + 40);
          result = 1;
        }
      }
    }
    else
    {
      if ( a4 )
        sub_4239C0(a4, a1, a2, a3, a4 + 40);
      result = 1;
    }
  }
  else
  {
    if ( a5 )
      sub_4239C0(a5, a1, a2, a3, a5 + 40);
    result = 0;
  }
  return result;
}

//----- (00417D70) --------------------------------------------------------
signed int __userpurge CGuild::CastleInfo<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5)
{
  signed int result; // eax@2
  int v6; // ST10_4@7
  int v7; // [sp+4h] [bp-4h]@3

  if ( *(_DWORD *)(a4 + 452) == CPlayer::GetGID(a4, a1, a2, a3) )
  {
    sub_47DE70((volatile LONG *)&unk_4E0980);
    v7 = CCastle::GetCastle(a5);
    if ( v7 )
    {
      if ( CCastle::IsLord(v7, a1, a2, a3, *(_DWORD *)(a4 + 452)) )
      {
        CCastle::GetTax(v7, a1, a2, a3);
        v6 = (unsigned __int8)CCastle::GetTaxRate(v7, a1, a2, a3);
        CPlayer::Write(a1, a2, a3, a4, 94, (unsigned int)"bbd");
        sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
        result = 0;
      }
      else
      {
        sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
        result = 86;
      }
    }
    else
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
      result = 1;
    }
  }
  else
  {
    result = 22;
  }
  return result;
}

//----- (00417E30) --------------------------------------------------------
signed int __userpurge CGuild::TaxRateControl<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+4h] [bp-4h]@6

  if ( *(_DWORD *)(a4 + 452) == CPlayer::GetGID(a4, a1, a2, a3) )
  {
    if ( a6 <= 115 && a6 >= 85 )
    {
      sub_47DE70((volatile LONG *)&unk_4E0980);
      v7 = CCastle::GetCastle(a5);
      if ( v7 )
      {
        if ( CCastle::IsLord(v7, a1, a2, a3, *(_DWORD *)(a4 + 452)) )
        {
          CCastle::SetTaxRate(v7, a1, a2, a3, a5, a6);
          sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
          CPlayer::Write(a1, a2, a3, a4, 94, (unsigned int)"bbb");
          result = 0;
        }
        else
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
          result = 1;
        }
      }
      else
      {
        sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
        result = 1;
      }
    }
    else
    {
      result = 87;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (00417F10) --------------------------------------------------------
signed int __userpurge CGuild::TaxLevy<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // edx@7
  int v8; // [sp+0h] [bp-10h]@1
  int v9; // [sp+4h] [bp-Ch]@7
  int v10; // [sp+8h] [bp-8h]@3
  int v11; // [sp+Ch] [bp-4h]@7

  v8 = a1;
  if ( *(_DWORD *)(a5 + 452) == CPlayer::GetGID(a5, a2, a3, a4) )
  {
    v10 = CCastle::GetCastle(a6);
    if ( v10 )
    {
      if ( CCastle::IsLord(v10, a2, a3, a4, *(_DWORD *)(a5 + 452)) )
      {
        v9 = CCastle::ResetTax(v10, a2, a3, a4, a6);
        *(_DWORD *)(v8 + 80) += v9;
        v11 = CItem::CreateItem(31, 0, v9, -1);
        if ( v11 )
        {
          if ( !CPlayer::InsertItem(a5, v7, a2, a3, a4, 31, v11) )
          {
            sub_4328C0("CGuild::TaxLevy() Fail to insert money(%d).", v9);
            CBase::Delete((void *)v11);
          }
        }
        CPlayer::Write(a2, a3, a4, a5, 94, (unsigned int)"bbd");
        result = 0;
      }
      else
      {
        result = 1;
      }
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (00418000) --------------------------------------------------------
signed int __usercall CGuild::CastleGateNPC<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, int a6)
{
  signed int result; // eax@2
  int v7; // eax@4
  int v8; // eax@5
  signed int v9; // [sp+0h] [bp-Ch]@4
  int v10; // [sp+4h] [bp-8h]@1

  sub_47DE70((volatile LONG *)&unk_4E0980);
  v10 = CCastle::GetCastle(a5);
  if ( v10 )
  {
    if ( CGuild::IsWarringPeriod() )
    {
      v7 = CPlayer::GetGID(a4, a1, a2, a3);
      v9 = CCastle::IsGateUseWarring(v10, a1, a2, a3, v7);
    }
    else
    {
      v8 = CPlayer::GetGID(a4, a1, a2, a3);
      v9 = CCastle::IsGateUse(v10, a1, a2, a3, v8);
    }
    if ( v9 )
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
      result = v9;
    }
    else
    {
      CCastle::GateGoto(a1, a2, a3, a4, a6);
      sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
      result = 0;
    }
  }
  else
  {
    sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
    result = 1;
  }
  return result;
}

//----- (004180B0) --------------------------------------------------------
signed int __userpurge CGuild::CastleSetGateLmit<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, signed int a6)
{
  signed int result; // eax@2
  int v7; // [sp+4h] [bp-4h]@3

  if ( *(_DWORD *)(a4 + 452) == CPlayer::GetGID(a4, a1, a2, a3) )
  {
    sub_47DE70((volatile LONG *)&unk_4E0980);
    v7 = CCastle::GetCastle(a5);
    if ( v7 )
    {
      if ( CCastle::IsLord(v7, a1, a2, a3, *(_DWORD *)(a4 + 452)) )
      {
        if ( CCastle::SetGateLimit(v7, a1, a2, a3, a6, a5) )
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
          result = 90;
        }
        else
        {
          sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
          result = 1;
        }
      }
      else
      {
        sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
        result = 22;
      }
    }
    else
    {
      sub_47E080((volatile LONG *)&unk_4E0980, a1, a2, a3);
      result = 1;
    }
  }
  else
  {
    result = 22;
  }
  return result;
}

//----- (00418170) --------------------------------------------------------
bool __userpurge CGuild::IsAlliancePeriod<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  bool v6; // [sp+0h] [bp-Ch]@2
  int v7; // [sp+4h] [bp-8h]@1

  v7 = a1;
  sub_47DE70((volatile LONG *)&unk_4E0980);
  if ( *(_DWORD *)(v7 + 392) )
    v6 = CCastle::IsAlliance(a5, a2, a3, a4, *(_DWORD *)(v7 + 392));
  else
    v6 = 0;
  sub_47E080((volatile LONG *)&unk_4E0980, a2, a3, a4);
  return v6;
}

//----- (004181D0) --------------------------------------------------------
void __usercall CGuild::ChangePlayerName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6)
{
  void *v6; // eax@3
  void *v7; // eax@5
  const char *v8; // ST08_4@7
  int v9; // eax@7
  char v10; // [sp+0h] [bp-14h]@5
  char v11; // [sp+4h] [bp-10h]@3
  int v12; // [sp+8h] [bp-Ch]@5
  char v13; // [sp+Ch] [bp-8h]@5
  char v14; // [sp+10h] [bp-4h]@3

  if ( a4 )
  {
    sub_47E0D0((volatile LONG *)&unk_4E0980);
    sub_44AE20((int)&unk_4E0968, (int)&v14, (int)&a4);
    v6 = sub_430C20((int)&unk_4E0968, &v11);
    if ( (unsigned __int8)unknown_libname_8(v6) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
    }
    else
    {
      v12 = *(_DWORD *)(sub_420250((int *)&v14) + 4);
      sub_44AE20(v12 + 380, (int)&v13, (int)&a5);
      v7 = sub_430C20(v12 + 380, &v10);
      if ( (unsigned __int8)unknown_libname_8(v7) )
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      }
      else
      {
        v8 = a6;
        v9 = sub_420250((int *)&v13);
        strcpy(*(char **)(v9 + 4), v8);
        if ( a4 == a5 )
        {
          CAlliance::ChangeLeaderName(a1, a2, a3, *(_DWORD *)(v12 + 392), a4, a6);
          CCastle::ChangeLeaderName(a1, a2, a3, a4, a6);
          sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
        }
        else
        {
          sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
        }
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004182E0) --------------------------------------------------------
void __usercall CGuild::ChangeGuildName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6)
{
  void *v6; // eax@4
  void *v7; // eax@7
  char v8; // [sp+0h] [bp-1Ch]@7
  char v9; // [sp+4h] [bp-18h]@10
  char v10; // [sp+8h] [bp-14h]@4
  int v11; // [sp+Ch] [bp-10h]@8
  char v12; // [sp+10h] [bp-Ch]@6
  int v13; // [sp+14h] [bp-8h]@6
  char v14; // [sp+18h] [bp-4h]@4

  if ( a4 )
  {
    if ( a4 == a5 )
    {
      sub_47E0D0((volatile LONG *)&unk_4E0980);
      sub_44AE20((int)&unk_4E0968, (int)&v14, (int)&a4);
      v6 = sub_430C20((int)&unk_4E0968, &v10);
      if ( (unsigned __int8)unknown_libname_8(v6) )
      {
        sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      }
      else
      {
        v13 = *(_DWORD *)(sub_420250((int *)&v14) + 4);
        strcpy((char *)(v13 + 44), a6);
        sub_40F070(v13 + 380, &v12);
        while ( 1 )
        {
          v7 = sub_430C20(v13 + 380, &v8);
          if ( !(unsigned __int8)sub_47D070(v7) )
            break;
          v11 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v12) + 4) + 32);
          if ( v11 )
          {
            CPlayer::Write(a1, a2, a3, v11, 68, (unsigned int)"bbs");
            CPlayer::SetGuildName(v11, a1, a2, a3, a6);
          }
          sub_446090((int *)&v12, (int)&v9, 0);
        }
        CAlliance::ChangeGuildName(a1, a2, a3, *(_DWORD *)(v13 + 392), a4, a6);
        CCastle::ChangeGuildName(a1, a2, a3, a4, a6);
        sub_47E1C0((volatile LONG *)&unk_4E0980, a1, a2, a3);
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00418420) --------------------------------------------------------
int __thiscall sub_418420(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472C30(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_4185D0(v3, &v4, v5, v6);
  return v7;
}

//----- (00418480) --------------------------------------------------------
int __thiscall sub_418480(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_418670(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 418670: using guessed type _DWORD __stdcall sub_418670(_DWORD);

//----- (004184E0) --------------------------------------------------------
void *__thiscall sub_4184E0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00418510) --------------------------------------------------------
int __thiscall sub_418510(int this)
{
  return sub_4187B0(this);
}

//----- (00418530) --------------------------------------------------------
int __thiscall sub_418530(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_418710(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 418710: using guessed type _DWORD __stdcall sub_418710(_DWORD);

//----- (00418590) --------------------------------------------------------
int __thiscall sub_418590(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (004185D0) --------------------------------------------------------
void *__thiscall sub_4185D0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_418480(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00418670) --------------------------------------------------------
int __stdcall sub_418670(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_418670(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 418670: using guessed type _DWORD __stdcall sub_418670(_DWORD);

//----- (004186F0) --------------------------------------------------------
bool __stdcall sub_4186F0(int a1, int a2)
{
  return *(_DWORD *)a1 < *(_DWORD *)a2;
}

//----- (00418710) --------------------------------------------------------
int __stdcall sub_418710(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_418710(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 418710: using guessed type _DWORD __stdcall sub_418710(_DWORD);

//----- (00418790) --------------------------------------------------------
int __thiscall sub_418790(int this)
{
  return sub_474590(*(_DWORD *)(this + 4));
}

//----- (004187B0) --------------------------------------------------------
int __thiscall sub_4187B0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4188A0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00418860) --------------------------------------------------------
int *__thiscall sub_418860(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_44B740(this);
  return v2;
}

//----- (00418880) --------------------------------------------------------
int *__thiscall sub_418880(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_44B760(this);
  return v2;
}

//----- (004188A0) --------------------------------------------------------
void *__thiscall sub_4188A0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_418530(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00418940) --------------------------------------------------------
int __cdecl sub_418940(int a1, char a2, char a3)
{
  sub_420990(a1, (int)&a2, (int)&a3);
  return a1;
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);

//----- (00418960) --------------------------------------------------------
int __cdecl sub_418960(int a1, int a2)
{
  *(_BYTE *)a2 = *(_BYTE *)a1;
  return a1 + 1;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);

//----- (00418980) --------------------------------------------------------
int __cdecl sub_418980(int a1, int a2)
{
  *(_WORD *)a2 = *(_WORD *)a1;
  return a1 + 2;
}

//----- (004189A0) --------------------------------------------------------
int __cdecl sub_4189A0(int a1, char a2)
{
  *(_BYTE *)a1 = a2;
  return a1 + 1;
}

//----- (004189C0) --------------------------------------------------------
int __cdecl sub_4189C0(char a1, char a2, int a3)
{
  int result; // eax@1

  while ( 1 )
  {
    result = sub_47D070(&a2);
    if ( !(_BYTE)result )
      break;
    ++*(_DWORD *)a3;
    sub_418860((int *)&a1);
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00418A00) --------------------------------------------------------
void *__thiscall sub_418A00(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00418A30) --------------------------------------------------------
int __thiscall sub_418A30(int this)
{
  return sub_418A50(this);
}

//----- (00418A50) --------------------------------------------------------
int __thiscall sub_418A50(int this)
{
  return sub_418A70(this);
}

//----- (00418A70) --------------------------------------------------------
int __thiscall sub_418A70(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4185D0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00418B20) --------------------------------------------------------
int __thiscall CAlliance::CAlliance(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B56A0;
  *(_DWORD *)(v2 + 32) = -5;
  *(_DWORD *)(v2 + 36) = 0;
  memset((void *)(v2 + 40), 0, 0x11u);
  memset((void *)(v2 + 57), 0, 0x11u);
  *(_DWORD *)(v2 + 76) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  return v2;
}
// 4B56A0: using guessed type int (__stdcall *off_4B56A0)(int);

//----- (00418B90) --------------------------------------------------------
int __userpurge CAlliance::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CAlliance::_CAlliance(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00418BC0) --------------------------------------------------------
int __usercall CAlliance::_CAlliance<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B56A0;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B56A0: using guessed type int (__stdcall *off_4B56A0)(int);

//----- (00418BE0) --------------------------------------------------------
__int32 __usercall CAlliance::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v4; // eax@3
  char v6; // [sp+0h] [bp-Ch]@2
  char v7; // [sp+4h] [bp-8h]@3
  char v8; // [sp+8h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E09B0);
  sub_40F070((int)&unk_4E09A4, &v8);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E09A4, &v6);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = sub_420250((int *)&v8);
    CAlliance::Clear(*(_DWORD *)(v4 + 4));
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  sub_41C710((int)&unk_4E09A4);
  return sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00418C60) --------------------------------------------------------
signed int __thiscall CAlliance::Clear(int this)
{
  int v1; // ST04_4@3
  int v3; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v3 = this;
  for ( i = *(_DWORD *)(this + 32); i != -5; i = v1 )
  {
    v1 = *(_DWORD *)(i + 32);
    *(_DWORD *)(i + 32) = -5;
    CBase::Delete((void *)i);
  }
  *(_DWORD *)(v3 + 32) = -5;
  return CBase::Delete((void *)v3);
}

//----- (00418CC0) --------------------------------------------------------
int __usercall CAlliance::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( *(_DWORD *)(a1 + 80) )
    CGuild::SetAlliance(*(_DWORD *)(a1 + 80), a2, a3, a4, 0, 0);
  CWar::SetGuild(v5, a2, a3, a4, 0);
  return CBase::OnDelete(v5, a2, a3, a4);
}

//----- (00418D00) --------------------------------------------------------
signed int __usercall CAlliance::IsLoad<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@2
  char v6; // [sp+0h] [bp-10h]@2
  char v7; // [sp+4h] [bp-Ch]@8
  int i; // [sp+8h] [bp-8h]@3
  char v9; // [sp+Ch] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E09B0);
  sub_40F070((int)&unk_4E09A4, &v9);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E09A4, &v6);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    for ( i = *(_DWORD *)(sub_420250((int *)&v9) + 4); i != -5; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 36) == a4 )
      {
        sub_47E080((volatile LONG *)&unk_4E09B0, a1, a2, a3);
        return 1;
      }
    }
    sub_446090((int *)&v9, (int)&v7, 0);
  }
  sub_47E080((volatile LONG *)&unk_4E09B0, a1, a2, a3);
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00418DA0) --------------------------------------------------------
void __usercall CAlliance::Load(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v4; // eax@3
  void *v5; // eax@3
  int v6; // eax@10
  int v7; // eax@10
  int v8; // eax@17
  int v9; // eax@17
  int v10; // [sp+0h] [bp-44h]@15
  int v11; // [sp+4h] [bp-40h]@8
  int v12; // [sp+8h] [bp-3Ch]@14
  char v13; // [sp+Ch] [bp-38h]@10
  char v14; // [sp+14h] [bp-30h]@10
  int v15; // [sp+1Ch] [bp-28h]@7
  char v16; // [sp+20h] [bp-24h]@3
  char v17[4]; // [sp+24h] [bp-20h]@3
  char v18; // [sp+28h] [bp-1Ch]@3
  int v19; // [sp+2Ch] [bp-18h]@17
  time_t v20; // [sp+30h] [bp-14h]@3
  int v21; // [sp+34h] [bp-10h]@10
  int v22; // [sp+38h] [bp-Ch]@1
  char v23; // [sp+3Ch] [bp-8h]@10
  char v24; // [sp+40h] [bp-4h]@10
  int v25; // [sp+4Ch] [bp+8h]@1
  int v26; // [sp+4Ch] [bp+8h]@3
  int v27; // [sp+4Ch] [bp+8h]@10

  sub_47E0D0((volatile LONG *)&unk_4E09B0);
  v22 = 0;
  v25 = sub_418960(a4, &v22);
  if ( v22 > 0 )
  {
    v4 = sub_47A240(v25, &v20);
    v26 = sub_47A240(v4, v17);
    sub_44AE20((int)&unk_4E09A4, (int)&v18, (int)v17);
    v5 = sub_430C20((int)&unk_4E09A4, &v16);
    if ( (unsigned __int8)sub_47D070(v5) )
    {
      sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
    }
    else
    {
      if ( v20 > time(0) )
      {
        v15 = (int)sub_401000(0x54u);
        if ( v15 )
          v11 = CAlliance::CAlliance(v15);
        else
          v11 = 0;
        v21 = v11;
        *(_DWORD *)(v11 + 36) = *(_DWORD *)v17;
        v6 = sub_497620(v26, v21 + 40);
        v27 = sub_497620(v6, v21 + 57);
        *(_DWORD *)(v21 + 76) = v20;
        v7 = sub_418940(&v13, v17[0], v21);
        sub_41CF00((int)&v14, v7);
        sub_445DF0((int)&unk_4E09A4, (int)&v23, (int)&v14);
        if ( v24 )
        {
          --v22;
          while ( v22 > 0 )
          {
            v12 = (int)sub_401000(0x54u);
            if ( v12 )
              v10 = CAlliance::CAlliance(v12);
            else
              v10 = 0;
            v19 = v10;
            v8 = sub_47A240(v27, v10 + 36);
            v9 = sub_497620(v8, v19 + 40);
            v27 = sub_497620(v9, v19 + 57);
            *(_DWORD *)(v19 + 76) = v20;
            CAlliance::Add(v21, v19);
            --v22;
          }
          sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
        }
        else
        {
          CBase::Delete((void *)v21);
          sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
          sub_4328C0("CAlliance::Load() alliance map inset error (aid:%d)", *(_DWORD *)v17);
        }
      }
      else
      {
        CDBSocket::Write(a1, a2, a3, 26, (unsigned int)"d");
        sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
      }
    }
  }
  else
  {
    sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
  }
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00418FF0) --------------------------------------------------------
__int32 __usercall CAlliance::LoadSetGuild<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6)
{
  void *v6; // eax@1
  __int32 result; // eax@2
  int v8; // eax@6
  char v9; // [sp+0h] [bp-Ch]@1
  int i; // [sp+4h] [bp-8h]@3
  char v11; // [sp+8h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E09B0);
  sub_44AE20((int)&unk_4E09A4, (int)&v11, (int)&a4);
  v6 = sub_430C20((int)&unk_4E09A4, &v9);
  if ( (unsigned __int8)unknown_libname_8(v6) )
  {
    CGuild::SetAlliance(a6, a1, a2, a3, 0, 0);
    result = sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
  }
  else
  {
    for ( i = *(_DWORD *)(sub_420250((int *)&v11) + 4); i != -5; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 36) == a5 )
      {
        CWar::SetGuild(i, a1, a2, a3, a6);
        v8 = sub_420250((int *)&v11);
        CGuild::SetAlliance(a6, a1, a2, a3, a4, *(_DWORD *)(v8 + 4));
        return sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
      }
    }
    CGuild::SetAlliance(a6, a1, a2, a3, 0, 0);
    result = sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004190C0) --------------------------------------------------------
int __userpurge CAlliance::DeleteSetGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int i; // [sp+4h] [bp-4h]@1

  result = a1;
  for ( i = a1; i != -5; i = *(_DWORD *)(i + 32) )
  {
    result = i;
    if ( *(_DWORD *)(i + 80) == a5 )
    {
      CGuild::SetAlliance(a5, a2, a3, a4, 0, 0);
      result = CWar::SetGuild(i, a2, a3, a4, 0);
    }
  }
  return result;
}

//----- (00419110) --------------------------------------------------------
signed int __usercall CAlliance::Join<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5, int a6, int a7, const char *a8, int a9, int a10)
{
  int v10; // eax@5
  int v12; // [sp+0h] [bp-3Ch]@12
  int v13; // [sp+4h] [bp-38h]@3
  int v14; // [sp+8h] [bp-34h]@11
  char v15; // [sp+Ch] [bp-30h]@5
  char v16; // [sp+14h] [bp-28h]@5
  int v17; // [sp+1Ch] [bp-20h]@2
  int i; // [sp+20h] [bp-1Ch]@8
  char v19; // [sp+24h] [bp-18h]@5
  char v20; // [sp+28h] [bp-14h]@5
  void *v21; // [sp+2Ch] [bp-10h]@7
  int v22; // [sp+30h] [bp-Ch]@1
  int v23; // [sp+34h] [bp-8h]@14
  int v24; // [sp+38h] [bp-4h]@5

  sub_47E0D0((volatile LONG *)&unk_4E09B0);
  v22 = 0;
  if ( *(_DWORD *)(a6 + 392) )
  {
    v24 = *(_DWORD *)(a6 + 396);
    for ( i = v24; i != -5; i = *(_DWORD *)(i + 32) )
      ++v22;
  }
  else
  {
    v17 = (int)sub_401000(0x54u);
    if ( v17 )
      v13 = CAlliance::CAlliance(v17);
    else
      v13 = 0;
    v24 = v13;
    v10 = sub_418940(&v15, a4, v13);
    sub_41CF00((int)&v16, v10);
    sub_445DF0((int)&unk_4E09A4, (int)&v19, (int)&v16);
    if ( !v20 )
    {
      CBase::Delete((void *)v24);
      sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
      sub_4328C0("CAlliance::Join() alliance map inset error (aid:%d)", a4);
      return 0;
    }
    *(_DWORD *)(v24 + 36) = a4;
    strcpy((char *)(v24 + 40), (const char *)(a6 + 44));
    strcpy((char *)(v24 + 57), a5);
    *(_DWORD *)(v24 + 76) = a10;
    CWar::SetGuild(v24, a1, a2, a3, a6);
    CGuild::SetAlliance(a6, a1, a2, a3, a4, v24);
    ++v22;
    CDBSocket::Write(a1, a2, a3, 23, (unsigned int)"dd");
    v21 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bdbdss");
    CGuild::Broadcast(a6, a1, a2, a3, v21, 0);
    CIOBuffer::Release((int)v21);
  }
  v14 = (int)sub_401000(0x54u);
  if ( v14 )
    v12 = CAlliance::CAlliance(v14);
  else
    v12 = 0;
  v23 = v12;
  *(_DWORD *)(v12 + 36) = a7;
  strcpy((char *)(v23 + 40), (const char *)(a9 + 44));
  strcpy((char *)(v23 + 57), a8);
  *(_DWORD *)(v23 + 76) = a10;
  CWar::SetGuild(v23, a1, a2, a3, a9);
  CGuild::SetAlliance(a9, a1, a2, a3, a4, v24);
  CAlliance::Add(v24, v23);
  CDBSocket::Write(a1, a2, a3, 24, (unsigned int)"ddb");
  sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
  return 1;
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);

//----- (00419370) --------------------------------------------------------
__int32 __usercall CAlliance::PostponeExpire<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  unsigned int v4; // ST04_4@3
  int v5; // ST00_4@3
  int v6; // eax@3
  char v8; // [sp+0h] [bp-10h]@2
  char v9; // [sp+4h] [bp-Ch]@3
  char v10; // [sp+8h] [bp-8h]@1
  time_t v11; // [sp+Ch] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E09B0);
  v11 = CGuild::GetWarEndTime();
  sub_40F070((int)&unk_4E09A4, &v10);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E09A4, &v8);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = v11;
    v5 = *(_DWORD *)sub_420250((int *)&v10);
    v6 = sub_420250((int *)&v10);
    CAlliance::Postpone(*(_DWORD *)(v6 + 4), a1, a2, a3, v5, v4);
    sub_446090((int *)&v10, (int)&v9, 0);
  }
  return sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00419400) --------------------------------------------------------
__int32 __userpurge CAlliance::Postpone<eax>(__int32 a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, unsigned int a6)
{
  __int32 result; // eax@1
  void *v7; // ST18_4@3
  __int32 v8; // [sp+0h] [bp-8h]@1

  v8 = a1;
  result = a1;
  if ( *(_DWORD *)(a1 + 76) < a6 )
  {
    *(_DWORD *)(a1 + 76) = a6;
    CDBSocket::Write(a2, a3, a4, 60, (unsigned int)"dd");
    v7 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbd");
    CAlliance::Broadcast(v8, a2, a3, a4, v7);
    result = CIOBuffer::Release((int)v7);
  }
  return result;
}

//----- (00419470) --------------------------------------------------------
__int32 __usercall CAlliance::Expire<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, unsigned int a4)
{
  void *v4; // eax@2
  char v6; // [sp+0h] [bp-1Ch]@5
  char v7; // [sp+4h] [bp-18h]@4
  char v8; // [sp+8h] [bp-14h]@2
  void *v9; // [sp+Ch] [bp-10h]@4
  char v10[4]; // [sp+10h] [bp-Ch]@3
  int v11; // [sp+14h] [bp-8h]@3
  int v12; // [sp+18h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E09B0);
  sub_40F070((int)&unk_4E09A4, &v12);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E09A4, &v8);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    *(_DWORD *)v10 = *(_DWORD *)sub_420250(&v12);
    v11 = *(_DWORD *)(sub_420250(&v12) + 4);
    if ( *(_DWORD *)(v11 + 76) >= a4 )
    {
      sub_446090(&v12, (int)&v6, 0);
    }
    else
    {
      CDBSocket::Write(a1, a2, a3, 26, (unsigned int)"d");
      v9 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bb");
      CAlliance::Broadcast(v11, a1, a2, a3, v9);
      CIOBuffer::Release((int)v9);
      CAlliance::Clear(v11);
      v12 = *(_DWORD *)sub_44AF50(&unk_4E09A4, (int)&v7, v12);
      sub_432890("CAlliance::Expire() Alliance's expired. (AID:%d)", *(_DWORD *)v10);
    }
  }
  return sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00419570) --------------------------------------------------------
int __userpurge CAlliance::AllianceInfo<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>, int a4)
{
  int v4; // ST24_4@1
  int i; // [sp+8h] [bp-1014h]@1
  char v7; // [sp+Ch] [bp-1010h]@1
  char v8; // [sp+Dh] [bp-100Fh]@1
  __int16 v9; // [sp+1009h] [bp-13h]@1
  char v10; // [sp+100Bh] [bp-11h]@1
  char v11; // [sp+100Ch] [bp-10h]@4
  int v12; // [sp+1010h] [bp-Ch]@1
  int v13; // [sp+1014h] [bp-8h]@1
  int v14; // [sp+1018h] [bp-4h]@1

  v12 = dword_4D9830;
  v4 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09B0);
  v7 = 0;
  memset(&v8, 0, 0xFFCu);
  v9 = 0;
  v10 = 0;
  v13 = (int)&v7;
  v14 = 0;
  for ( i = v4; i != -5; i = *(_DWORD *)(i + 32) )
  {
    v13 = sub_44F9B0(v13, *(_DWORD *)(i + 36));
    v13 = sub_497660(v13, i + 40);
    v13 = sub_497660(v13, i + 57);
    ++v14;
  }
  CPlayer::Write(a2, (DWORD)&v11, a3, a4, 94, (unsigned int)"bdbm");
  return sub_47E080((volatile LONG *)&unk_4E09B0, a2, (DWORD)&v11, a3);
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00419690) --------------------------------------------------------
int __thiscall CAlliance::Add(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(a2 + 32) = *(_DWORD *)(this + 32);
  result = this;
  *(_DWORD *)(this + 32) = a2;
  return result;
}

//----- (004196C0) --------------------------------------------------------
int __usercall CAlliance::GetSize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST00_4@1
  int i; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v4 = a1;
  v7 = 0;
  sub_47DE70((volatile LONG *)&unk_4E09B0);
  for ( i = v4; i != -5; i = *(_DWORD *)(i + 32) )
    ++v7;
  sub_47E080((volatile LONG *)&unk_4E09B0, a2, a3, a4);
  return v7;
}

//----- (00419710) --------------------------------------------------------
int __userpurge CWar::SetGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@5
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( *(_DWORD *)(a1 + 80) )
    CIOObject::Release(*(_DWORD *)(a1 + 80), a2, a3, a4);
  if ( a5 )
    CIOObject::AddRef(a5, a2, a3, a4);
  result = a5;
  *(_DWORD *)(v6 + 80) = a5;
  return result;
}

//----- (00419750) --------------------------------------------------------
int __userpurge CAlliance::BroadcastLock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  int v5; // ST08_4@1
  int i; // [sp+4h] [bp-4h]@1

  v5 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09B0);
  for ( i = v5; i != -5; i = *(_DWORD *)(i + 32) )
  {
    if ( *(_DWORD *)(i + 80) )
      CGuild::Broadcast(*(_DWORD *)(i + 80), a2, a3, a4, a5, 0);
  }
  return sub_47E080((volatile LONG *)&unk_4E09B0, a2, a3, a4);
}

//----- (004197B0) --------------------------------------------------------
char __userpurge CAlliance::Broadcast<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  char result; // al@1
  int i; // [sp+4h] [bp-4h]@1

  result = a1;
  for ( i = a1; i != -5; i = *(_DWORD *)(i + 32) )
  {
    result = i;
    if ( *(_DWORD *)(i + 80) )
      result = CGuild::Broadcast(*(_DWORD *)(i + 80), a2, a3, a4, a5, 0);
  }
  return result;
}

//----- (00419800) --------------------------------------------------------
void __usercall CAlliance::ChangeLeaderName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6)
{
  void *v6; // eax@3
  char v7; // [sp+0h] [bp-Ch]@3
  int i; // [sp+4h] [bp-8h]@4
  char v9; // [sp+8h] [bp-4h]@3

  if ( a4 )
  {
    sub_47E0D0((volatile LONG *)&unk_4E09B0);
    sub_44AE20((int)&unk_4E09A4, (int)&v9, (int)&a4);
    v6 = sub_430C20((int)&unk_4E09A4, &v7);
    if ( (unsigned __int8)sub_47D070(v6) )
    {
      for ( i = *(_DWORD *)(sub_420250((int *)&v9) + 4); i != -5; i = *(_DWORD *)(i + 32) )
      {
        if ( *(_DWORD *)(i + 36) == a5 )
        {
          strcpy((char *)(i + 57), a6);
          break;
        }
      }
    }
    sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004198A0) --------------------------------------------------------
void __usercall CAlliance::ChangeGuildName(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6)
{
  void *v6; // eax@3
  char v7; // [sp+0h] [bp-Ch]@3
  int i; // [sp+4h] [bp-8h]@4
  char v9; // [sp+8h] [bp-4h]@3

  if ( a4 )
  {
    sub_47E0D0((volatile LONG *)&unk_4E09B0);
    sub_44AE20((int)&unk_4E09A4, (int)&v9, (int)&a4);
    v6 = sub_430C20((int)&unk_4E09A4, &v7);
    if ( (unsigned __int8)sub_47D070(v6) )
    {
      for ( i = *(_DWORD *)(sub_420250((int *)&v9) + 4); i != -5; i = *(_DWORD *)(i + 32) )
      {
        if ( *(_DWORD *)(i + 36) == a5 )
        {
          strcpy((char *)(i + 40), a6);
          break;
        }
      }
    }
    sub_47E1C0((volatile LONG *)&unk_4E09B0, a1, a2, a3);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00419940) --------------------------------------------------------
int __thiscall CCastle::CCastle(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B5798;
  sub_41C7D0((void *)(v2 + 88));
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 100;
  *(_DWORD *)(v2 + 48) = 0;
  *(_DWORD *)(v2 + 52) = -4;
  *(_DWORD *)(v2 + 56) = 0;
  *(_DWORD *)(v2 + 60) = 0;
  *(_DWORD *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 44) = 0;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  *(_DWORD *)(v2 + 84) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 76) = 0;
  return v2;
}
// 419940: using guessed type int __thiscall CCastle::CCastle(_DWORD);
// 4B5798: using guessed type int (__stdcall *off_4B5798)(int);

//----- (00419A00) --------------------------------------------------------
int __userpurge CCastle::_scalar_deleting_destructor_<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a2)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  CCastle::_CCastle(this, ebx0, a3, a4);
  if ( a2 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00419A30) --------------------------------------------------------
int __usercall CCastle::_CCastle<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = (int)this;
  *(_DWORD *)this = &off_4B5798;
  sub_44F580((char *)this + 88);
  return CBase::_CBase(v5, a2, a3, a4);
}
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 4B5798: using guessed type int (__stdcall *off_4B5798)(int);

//----- (00419A60) --------------------------------------------------------
BOOL __usercall CCastle::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  dword_4E0998 = CreateEventA(0, 1, 0, 0);
  CDBSocket::Write(a1, a2, a3, 57, (unsigned int)&byte_4B437D);
  WaitForSingleObject(dword_4E0998, 0xFFFFFFFFu);
  return CloseHandle(dword_4E0998);
}

//----- (00419AB0) --------------------------------------------------------
__int32 __usercall CCastle::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v4; // eax@3
  char v6; // [sp+0h] [bp-Ch]@2
  char v7; // [sp+4h] [bp-8h]@3
  char v8; // [sp+8h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  sub_40F070((int)&unk_4E09C8, &v8);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E09C8, &v6);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = sub_420250((int *)&v8);
    CBase::Delete(*(void **)(v4 + 4));
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  sub_41C770(&unk_4E09C8);
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
}
// 41C770: using guessed type int __thiscall sub_41C770(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00419B30) --------------------------------------------------------
__int32 __usercall CCastle::Load<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  int v6; // eax@6
  int v7; // eax@6
  int v8; // eax@6
  int v9; // eax@6
  int v10; // eax@6
  int v11; // [sp+0h] [bp-24h]@4
  char v12; // [sp+4h] [bp-20h]@6
  char v13; // [sp+Ch] [bp-18h]@6
  void *v14; // [sp+14h] [bp-10h]@3
  int v15; // [sp+18h] [bp-Ch]@6
  char v16; // [sp+1Ch] [bp-8h]@6
  char v17; // [sp+20h] [bp-4h]@6
  int v18; // [sp+30h] [bp+Ch]@6

  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  if ( !a4 )
  {
    SetEvent(dword_4E0998);
    return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
  }
  v14 = sub_401000(0x68u);
  if ( v14 )
    v11 = CCastle::CCastle(v14);
  else
    v11 = 0;
  v15 = v11;
  v6 = sub_47A240(a5, v11 + 68);
  v7 = sub_47A240(v6, v11 + 32);
  v8 = sub_47A240(v7, v11 + 36);
  v9 = sub_418960(v8, v11 + 40);
  v18 = sub_418960(v9, v11 + 44);
  v10 = sub_418940(&v12, *(_DWORD *)(v15 + 68), v15);
  sub_41CF00((int)&v13, v10);
  sub_445DF0((int)&unk_4E09C8, (int)&v16, (int)&v13);
  if ( !v17 )
  {
    sub_4328C0("CCastle::Load() castle insert error ( cid:%d )", *(_DWORD *)(v15 + 68));
    CBase::Delete((void *)v15);
    return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
  }
  if ( *(_DWORD *)(v15 + 32) )
  {
    if ( a4 == 2 )
    {
      sub_4328C0("CCastle::Load() guild error (cid:%d, gid:%d)", *(_DWORD *)(v15 + 68), *(_DWORD *)(v15 + 32));
      *(_DWORD *)(v15 + 32) = 0;
      return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
    }
    CGuild::Load(a1, a2, a3, *(_DWORD *)(v15 + 32), v18, v15);
    if ( *(_DWORD *)(v15 + 56) )
      CIOObject::Release(*(_DWORD *)(v15 + 56), a1, a2, a3);
    if ( *(_DWORD *)(v15 + 48) )
      CIOObject::AddRef(*(_DWORD *)(v15 + 48), a1, a2, a3);
    *(_DWORD *)(v15 + 56) = *(_DWORD *)(v15 + 48);
    *(_DWORD *)(v15 + 60) = *(_DWORD *)(v15 + 32);
    CCastle::CreateStandard(a1, a2, a3, *(_DWORD *)(v15 + 68), *(_DWORD *)(v15 + 32), (const char *)(*(_DWORD *)(v15 + 48) + 44), 0);
    CCastle::CreateGate(
      v15,
      a1,
      a2,
      a3,
      *(_DWORD *)(v15 + 68),
      *(_DWORD *)(v15 + 32),
      (const char *)(*(_DWORD *)(v15 + 48) + 44));
  }
  else
  {
    CCastle::CreateStandard(a1, a2, a3, *(_DWORD *)(v15 + 68), 0, &byte_4B437D, 0);
    CCastle::CreateGate(v15, a1, a2, a3, *(_DWORD *)(v15 + 68), 0, &byte_4B437D);
  }
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
}
// 418940: using guessed type _DWORD __cdecl sub_418940(_DWORD, char, char);
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 419940: using guessed type int __thiscall CCastle::CCastle(_DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (00419D80) --------------------------------------------------------
char __usercall CCastle::SetWarGuild<al>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a3<esi>, int a1, int a2)
{
  int v5; // eax@2
  void *v6; // eax@2
  char v8; // [sp+0h] [bp-10h]@2
  char v9; // [sp+4h] [bp-Ch]@8
  int i; // [sp+8h] [bp-8h]@3
  char v11; // [sp+Ch] [bp-4h]@1

  sub_40F070((int)&unk_4E09C8, &v11);
  while ( 1 )
  {
    v6 = sub_430C20((int)&unk_4E09C8, &v8);
    v5 = (unsigned __int8)sub_47D070(v6);
    if ( !(_BYTE)v5 )
      break;
    for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v11) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 40) == a1 )
        CWar::SetGuild(i, ebx0, edi0, a3, a2);
    }
    sub_446090((int *)&v11, (int)&v9, 0);
  }
  return v5;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00419E10) --------------------------------------------------------
void __usercall CCastle::WarBegin(char a1<dil>, DWORD ebx0<ebx>, DWORD a3<esi>, int a2)
{
  void *v4; // esp@1
  void *v5; // eax@3
  int v6; // ST1C_4@11
  int v7; // eax@11
  int v8; // eax@11
  int v9; // ST10_4@11
  void *v10; // ST1C_4@11
  int v11; // eax@11
  int v12; // [sp+0h] [bp-1028h]@8
  char v13; // [sp+4h] [bp-1024h]@3
  char v14; // [sp+8h] [bp-1020h]@2
  int v15; // [sp+Ch] [bp-101Ch]@6
  void *v16; // [sp+10h] [bp-1018h]@11
  char v17; // [sp+14h] [bp-1014h]@1
  char v18; // [sp+18h] [bp-1010h]@1
  char v19; // [sp+19h] [bp-100Fh]@1
  __int16 v20; // [sp+1015h] [bp-13h]@1
  char v21; // [sp+1017h] [bp-11h]@1
  char v22; // [sp+1018h] [bp-10h]@1
  void *v23; // [sp+101Ch] [bp-Ch]@1
  int v24; // [sp+1020h] [bp-8h]@1
  int v25; // [sp+1024h] [bp-4h]@1

  dword_4DA9B0 = 0;
  v4 = alloca(4136);
  v23 = (void *)dword_4D9830;
  v18 = 0;
  memset(&v19, 0, 0xFFCu);
  v20 = 0;
  v21 = 0;
  v24 = (int)&v18;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v24 = CCastle::WarList(ebx0, (DWORD)&v22, a3, (int)&v25, v24);
  sub_40F070((int)&unk_4E09C8, &v17);
  while ( 1 )
  {
    v5 = sub_430C20((int)&unk_4E09C8, &v13);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v17) + 4) + 52) != -4 )
    {
      v15 = 0;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v17) + 4) + 48) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v17) + 4) + 48) + 392) )
          v12 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v17) + 4) + 48) + 392);
        else
          v12 = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v17) + 4) + 32);
        v15 = v12;
      }
      v6 = v15;
      v7 = sub_420250((int *)&v17);
      CPlayer::WarPortalAll(ebx0, (DWORD)&v22, a3, *(_DWORD *)v7, v6);
      v8 = sub_420250((int *)&v17);
      CNPC::WarRelationShow(ebx0, (DWORD)&v22, a3, *(_DWORD *)v8, 0);
      *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v17) + 4) + 76) = a2;
      v9 = *(_DWORD *)sub_420250((int *)&v17);
      v16 = sub_44FCE0(ebx0, (DWORD)&v22, a3, 94, (unsigned int)"bbddm");
      v10 = v16;
      v11 = sub_420250((int *)&v17);
      CCastle::_WarMsg(*(_DWORD *)(v11 + 4), ebx0, (DWORD)&v22, a3, v10);
      sub_432890("CCastle::WarBegin Started");
      CPlayer::CountWarrelationPlayer(ebx0, (DWORD)&v22, a3);
      CIOBuffer::Release((int)v16);
    }
    sub_446090((int *)&v17, (int)&v14, 0);
  }
  sub_47E080((volatile LONG *)&unk_4E09D4, ebx0, (DWORD)&v22, a3);
  CCastle::SetWarRemainSecondTime(ebx0, (DWORD)&v22, a3, 0);
  sub_49F65E(v23);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4DA9B0: using guessed type int dword_4DA9B0;

//----- (0041A030) --------------------------------------------------------
int __cdecl CCastle::WarPortal(int a1, int a2, int a3, int a4)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 1; ++i )
  {
    if ( a1 == dword_4D5B60[7 * i]
      && a2 == dword_4D5B64[7 * i]
      && a3 >= dword_4D5B68[7 * i]
      && a3 <= dword_4D5B70[7 * i]
      && a4 <= dword_4D5B6C[7 * i]
      && a4 >= dword_4D5B74[7 * i] )
      return dword_4D5B78[7 * i];
  }
  return -1;
}
// 4D5B60: using guessed type int dword_4D5B60[];
// 4D5B64: using guessed type int dword_4D5B64[];
// 4D5B68: using guessed type int dword_4D5B68[];
// 4D5B6C: using guessed type int dword_4D5B6C[];
// 4D5B70: using guessed type int dword_4D5B70[];
// 4D5B74: using guessed type int dword_4D5B74[];
// 4D5B78: using guessed type int dword_4D5B78[];

//----- (0041A0D0) --------------------------------------------------------
int __userpurge CCastle::_WarMsg<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a2)
{
  int result; // eax@6
  int v6; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@6

  v6 = this;
  if ( *(_DWORD *)(this + 48) )
  {
    sub_47DE70((volatile LONG *)&unk_4E09B0);
    if ( *(_DWORD *)(*(_DWORD *)(v6 + 48) + 396) )
      CAlliance::Broadcast(*(_DWORD *)(*(_DWORD *)(v6 + 48) + 396), ebx0, a3, a4, a2);
    else
      CGuild::Broadcast(*(_DWORD *)(v6 + 48), ebx0, a3, a4, a2, 0);
    sub_47E080((volatile LONG *)&unk_4E09B0, ebx0, a3, a4);
  }
  result = *(_DWORD *)(v6 + 52);
  for ( i = *(_DWORD *)(v6 + 52); i != -4; i = *(_DWORD *)(i + 32) )
  {
    result = i;
    if ( *(_DWORD *)(i + 80) )
      LOBYTE(result) = CGuild::Broadcast(*(_DWORD *)(i + 80), ebx0, a3, a4, a2, 0);
  }
  return result;
}

//----- (0041A170) --------------------------------------------------------
int __userpurge CCastle::WarMsg<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a2)
{
  int v6; // ST04_4@1

  v6 = (int)this;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  CCastle::_WarMsg(v6, ebx0, a3, a4, a2);
  return sub_47E080((volatile LONG *)&unk_4E09D4, ebx0, a3, a4);
}

//----- (0041A1A0) --------------------------------------------------------
int __usercall CCastle::WarList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@9
  char v8; // [sp+0h] [bp-14h]@2
  char v9; // [sp+4h] [bp-10h]@14
  int j; // [sp+8h] [bp-Ch]@11
  int i; // [sp+Ch] [bp-8h]@5
  char v12; // [sp+10h] [bp-4h]@1

  *(_DWORD *)a4 = 0;
  sub_40F070((int)&unk_4E09C8, &v12);
  while ( 1 )
  {
    v5 = sub_430C20((int)&unk_4E09C8, &v8);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v12) + 4) + 48) )
    {
      sub_47DE70((volatile LONG *)&unk_4E09B0);
      if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v12) + 4) + 48) + 396) )
      {
        for ( i = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v12) + 4) + 48) + 396);
              i != -5;
              i = *(_DWORD *)(i + 32) )
        {
          a5 = sub_44F9B0(a5, *(_DWORD *)(i + 36));
          ++*(_DWORD *)a4;
        }
      }
      else
      {
        v6 = sub_420250((int *)&v12);
        a5 = sub_44F9B0(a5, *(_DWORD *)(*(_DWORD *)(v6 + 4) + 32));
        ++*(_DWORD *)a4;
      }
      sub_47E080((volatile LONG *)&unk_4E09B0, a1, a2, a3);
    }
    for ( j = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v12) + 4) + 52); j != -4; j = *(_DWORD *)(j + 32) )
    {
      a5 = sub_44F9B0(a5, *(_DWORD *)(j + 40));
      ++*(_DWORD *)a4;
    }
    sub_446090((int *)&v12, (int)&v9, 0);
  }
  return a5;
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041A300) --------------------------------------------------------
int __usercall CCastle::OnDelete<eax>(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = (int)this;
  CCastle::SetGuild((int)this, a2, a3, a4, 0);
  if ( *(_DWORD *)(v5 + 56) )
    CIOObject::Release(*(_DWORD *)(v5 + 56), a2, a3, a4);
  *(_DWORD *)(v5 + 56) = 0;
  *(_DWORD *)(v5 + 60) = 0;
  if ( *(_DWORD *)(v5 + 52) != -4 )
  {
    CWar::Clear(*(_DWORD *)(v5 + 52));
    *(_DWORD *)(v5 + 52) = -4;
  }
  return CBase::OnDelete(v5, a2, a3, a4);
}
// 41C6B0: using guessed type int __thiscall CWar::Clear(_DWORD);

//----- (0041A370) --------------------------------------------------------
int __userpurge CCastle::SetGuild<eax>(int this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a2)
{
  int result; // eax@5
  int v6; // [sp+0h] [bp-4h]@1

  v6 = this;
  if ( *(_DWORD *)(this + 48) )
    CIOObject::Release(*(_DWORD *)(this + 48), ebx0, a3, a4);
  if ( a2 )
    CIOObject::AddRef(a2, ebx0, a3, a4);
  result = a2;
  *(_DWORD *)(v6 + 48) = a2;
  return result;
}

//----- (0041A3B0) --------------------------------------------------------
int __cdecl CCastle::GetCastle(char a1)
{
  void *v1; // eax@1
  int result; // eax@2
  char v3; // [sp+0h] [bp-8h]@1
  char v4; // [sp+4h] [bp-4h]@1

  sub_44AE20((int)&unk_4E09C8, (int)&v4, (int)&a1);
  v1 = sub_430C20((int)&unk_4E09C8, &v3);
  if ( (unsigned __int8)sub_47D070(v1) )
    result = *(_DWORD *)(sub_420250((int *)&v4) + 4);
  else
    result = 0;
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041A400) --------------------------------------------------------
int __cdecl CCastle::GetMonsterTile2CID(int a1, int a2, int a3)
{
  int *v4; // [sp+0h] [bp-Ch]@10
  _DWORD *v5; // [sp+4h] [bp-8h]@3
  signed int i; // [sp+8h] [bp-4h]@1
  signed int j; // [sp+8h] [bp-4h]@8

  for ( i = 0; i < 1; ++i )
  {
    v5 = &dword_4D5998[7 * i];
    if ( dword_4D5998[7 * i + 2] == a1 && v5[3] == a2 && v5[4] == a3 )
      return *v5;
  }
  for ( j = 0; j < 5; ++j )
  {
    v4 = &dword_4D59B8[7 * j];
    if ( dword_4D59B8[7 * j + 2] == a1 && v4[3] == a2 && v4[4] == a3 )
      return *v4;
  }
  return 0;
}
// 4D59B8: using guessed type int dword_4D59B8[];

//----- (0041A4B0) --------------------------------------------------------
signed int __userpurge CCastle::SubGateState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v7; // eax@6
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@6
  char v10; // [sp+8h] [bp-Ch]@6
  int i; // [sp+Ch] [bp-8h]@1
  char v12; // [sp+10h] [bp-4h]@1

  v8 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  sub_430C20(v8 + 88, &v12);
  for ( i = 0; ; ++i )
  {
    if ( i < 5 )
    {
      if ( dword_4D59B8[7 * i] != a5 )
        continue;
      if ( a6 == *(_DWORD *)sub_420010() )
      {
        *(_DWORD *)sub_420010() = 0;
        sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
        return i;
      }
      sub_420030(&v12, (int)&v10, 0);
      v7 = sub_445B40(v8 + 88, &v9);
      if ( !(unsigned __int8)unknown_libname_8(v7) )
        continue;
    }
    break;
  }
  sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return -1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D59B8: using guessed type int dword_4D59B8[];

//----- (0041A570) --------------------------------------------------------
bool __userpurge CCastle::IsLord<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST00_4@1
  bool v7; // ST04_4@1

  v6 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v7 = *(_DWORD *)(v6 + 32) == a5;
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v7;
}

//----- (0041A5B0) --------------------------------------------------------
bool __userpurge CCastle::IsAlliance<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  bool v6; // [sp+0h] [bp-Ch]@3
  int v7; // [sp+4h] [bp-8h]@1

  v7 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v6 = *(_DWORD *)(v7 + 48) && *(_DWORD *)(*(_DWORD *)(v7 + 48) + 392) == a5;
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v6;
}

//----- (0041A610) --------------------------------------------------------
signed int __userpurge CCastle::IsAlreadyDeclare<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST00_4@1
  int i; // [sp+4h] [bp-8h]@1
  signed int v8; // [sp+8h] [bp-4h]@1

  v5 = a1;
  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  for ( i = *(_DWORD *)(v5 + 52); i != -4; i = *(_DWORD *)(i + 32) )
  {
    if ( *(_DWORD *)(i + 40) == a5 )
    {
      v8 = 1;
      break;
    }
  }
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v8;
}

//----- (0041A670) --------------------------------------------------------
signed int __usercall CCastle::IsAllCastleWarRelation<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@2
  char v6; // [sp+0h] [bp-14h]@2
  char v7; // [sp+4h] [bp-10h]@15
  int i; // [sp+8h] [bp-Ch]@9
  int v9; // [sp+Ch] [bp-8h]@3
  char v10; // [sp+10h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E09D4);
  sub_40F070((int)&unk_4E09C8, &v10);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E09C8, &v6);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v9 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
    if ( *(_DWORD *)(v9 + 32) )
    {
      if ( *(_DWORD *)(v9 + 48) == a4 )
      {
        sub_47E080((volatile LONG *)&unk_4E09D4, a1, a2, a3);
        return 1;
      }
      if ( *(_DWORD *)(*(_DWORD *)(v9 + 48) + 392) && *(_DWORD *)(*(_DWORD *)(v9 + 48) + 392) == *(_DWORD *)(a4 + 392) )
      {
        sub_47E080((volatile LONG *)&unk_4E09D4, a1, a2, a3);
        return 1;
      }
    }
    for ( i = *(_DWORD *)(v9 + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 80) && *(_DWORD *)(i + 80) == a4 )
      {
        sub_47E080((volatile LONG *)&unk_4E09D4, a1, a2, a3);
        return 1;
      }
    }
    sub_446090((int *)&v10, (int)&v7, 0);
  }
  sub_47E080((volatile LONG *)&unk_4E09D4, a1, a2, a3);
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041A790) --------------------------------------------------------
int __usercall CCastle::Login<eax>(DWORD a1<ebx>, DWORD a2<esi>, int a3, int a4)
{
  void *v4; // eax@3
  int v5; // ST14_4@8
  int v7; // ST14_4@13
  int v8; // ST14_4@19
  int v9; // ST20_4@21
  int v10; // ST1C_4@21
  int v11; // ST18_4@21
  int v12; // eax@21
  char v13; // [sp+4h] [bp-1034h]@3
  char v14; // [sp+8h] [bp-1030h]@2
  int v15; // [sp+Ch] [bp-102Ch]@22
  int v16; // [sp+10h] [bp-1028h]@22
  int v17; // [sp+14h] [bp-1024h]@22
  int j; // [sp+18h] [bp-1020h]@16
  int i; // [sp+1Ch] [bp-101Ch]@10
  int v20; // [sp+20h] [bp-1018h]@21
  char v21; // [sp+24h] [bp-1014h]@1
  char v22; // [sp+28h] [bp-1010h]@1
  char v23; // [sp+29h] [bp-100Fh]@1
  __int16 v24; // [sp+1025h] [bp-13h]@1
  char v25; // [sp+1027h] [bp-11h]@1
  char v26; // [sp+1028h] [bp-10h]@1
  int v27; // [sp+102Ch] [bp-Ch]@1
  int v28; // [sp+1030h] [bp-8h]@1
  int v29; // [sp+1034h] [bp-4h]@1

  v27 = dword_4D9830;
  v22 = 0;
  memset(&v23, 0, 0xFFCu);
  v24 = 0;
  v25 = 0;
  v28 = (int)&v22;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v28 = CCastle::WarList(a1, (DWORD)&v26, a2, (int)&v29, v28);
  sub_40F070((int)&unk_4E09C8, &v21);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E09C8, &v13);
    if ( !(unsigned __int8)sub_47D070(v4) )
      return sub_47E080((volatile LONG *)&unk_4E09D4, a1, (DWORD)&v26, a2);
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 52) != -4 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 48) )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 32) == a4 )
        {
          v5 = *(_DWORD *)sub_420250((int *)&v21);
          CPlayer::Write(a1, (DWORD)&v26, a2, a3, 94, (unsigned int)"bbddm");
          return sub_47E080((volatile LONG *)&unk_4E09D4, a1, (DWORD)&v26, a2);
        }
        if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 48) + 396) )
        {
          sub_47DE70((volatile LONG *)&unk_4E09B0);
          for ( i = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 48) + 396);
                i != -5;
                i = *(_DWORD *)(i + 32) )
          {
            if ( *(_DWORD *)(i + 36) == a4 )
            {
              v7 = *(_DWORD *)sub_420250((int *)&v21);
              CPlayer::Write(a1, (DWORD)&v26, a2, a3, 94, (unsigned int)"bbddm");
              sub_47E080((volatile LONG *)&unk_4E09B0, a1, (DWORD)&v26, a2);
              return sub_47E080((volatile LONG *)&unk_4E09D4, a1, (DWORD)&v26, a2);
            }
          }
          sub_47E080((volatile LONG *)&unk_4E09B0, a1, (DWORD)&v26, a2);
        }
      }
      for ( j = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v21) + 4) + 52); j != -4; j = *(_DWORD *)(j + 32) )
      {
        if ( *(_DWORD *)(j + 40) == a4 )
        {
          v8 = *(_DWORD *)sub_420250((int *)&v21);
          CPlayer::Write(a1, (DWORD)&v26, a2, a3, 94, (unsigned int)"bbddm");
          break;
        }
      }
      v9 = *(_DWORD *)(a3 + 336);
      v10 = *(_DWORD *)(a3 + 332);
      v11 = *(_DWORD *)(a3 + 316);
      v12 = sub_420250((int *)&v21);
      v20 = CCastle::WarPortal(*(_DWORD *)v12, v11, v10, v9);
      if ( v20 >= 0 )
      {
        v15 = (int)&dword_4D77C8[7 * v20];
        v16 = sub_406E10(dword_4D77C8[7 * v20 + 1] - 32, dword_4D77C8[7 * v20 + 1] + 32);
        v17 = sub_406E10(*(_DWORD *)(v15 + 8) - 32, *(_DWORD *)(v15 + 8) + 32);
        *(_DWORD *)(a3 + 316) = *(_DWORD *)v15;
        *(_DWORD *)(a3 + 332) = v16;
        *(_DWORD *)(a3 + 336) = v17;
        *(_DWORD *)(a3 + 340) = 0;
      }
    }
    sub_446090((int *)&v21, (int)&v14, 0);
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0041AB10) --------------------------------------------------------
__int32 __userpurge CCastle::WarAllianceADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, __int32 a8)
{
  unsigned int v8; // eax@1
  int v10; // [sp+0h] [bp-18h]@4
  int v11; // [sp+4h] [bp-14h]@1
  int v12; // [sp+8h] [bp-10h]@3
  __int32 i; // [sp+Ch] [bp-Ch]@1
  void *v14; // [sp+14h] [bp-4h]@1

  v11 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  sub_47E0D0((volatile LONG *)&unk_4E09B0);
  v8 = CGuild::GetWarEndTime();
  CAlliance::Postpone(a8, a2, a3, a4, a6, v8);
  v14 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbds");
  for ( i = a8; i != -5; i = *(_DWORD *)(i + 32) )
  {
    v12 = (int)sub_401000(0x54u);
    if ( v12 )
      v10 = CWar::CWar(v12);
    else
      v10 = 0;
    *(_DWORD *)(v10 + 36) = a6;
    *(_DWORD *)(v10 + 40) = *(_DWORD *)(i + 36);
    strcpy((char *)(v10 + 44), (const char *)(i + 40));
    strcpy((char *)(v10 + 61), (const char *)(i + 57));
    CWar::SetGuild(v10, a2, a3, a4, *(_DWORD *)(i + 80));
    if ( *(_DWORD *)(v11 + 52) == -4 )
      *(_DWORD *)(v11 + 52) = v10;
    else
      CWar::ADD(*(void **)(v11 + 52), v10);
    CDBSocket::Write(a2, a3, a4, 61, (unsigned int)"ddd");
    if ( *(_DWORD *)(i + 80) )
      CGuild::Broadcast(*(_DWORD *)(i + 80), a2, a3, a4, v14, 0);
  }
  CIOBuffer::Release((int)v14);
  sub_47E1C0((volatile LONG *)&unk_4E09B0, a2, a3, a4);
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
}

//----- (0041AC80) --------------------------------------------------------
__int32 __userpurge CCastle::WarADD<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, const char *a7, int a8)
{
  void *v9; // ST28_4@7
  int v10; // [sp+0h] [bp-14h]@2
  int v11; // [sp+4h] [bp-10h]@1
  int v12; // [sp+8h] [bp-Ch]@1

  v11 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  v12 = (int)sub_401000(0x54u);
  if ( v12 )
    v10 = CWar::CWar(v12);
  else
    v10 = 0;
  *(_DWORD *)(v10 + 36) = 0;
  *(_DWORD *)(v10 + 40) = a6;
  strcpy((char *)(v10 + 44), (const char *)(a8 + 44));
  strcpy((char *)(v10 + 61), a7);
  CWar::SetGuild(v10, a2, a3, a4, a8);
  if ( *(_DWORD *)(v11 + 52) == -4 )
    *(_DWORD *)(v11 + 52) = v10;
  else
    CWar::ADD(*(void **)(v11 + 52), v10);
  CDBSocket::Write(a2, a3, a4, 61, (unsigned int)"ddd");
  v9 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbds");
  CGuild::Broadcast(a8, a2, a3, a4, v9, 0);
  CIOBuffer::Release((int)v9);
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
}

//----- (0041AD90) --------------------------------------------------------
int __usercall CCastle::GetWarSize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST00_4@1
  int i; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v4 = a1;
  v7 = 0;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  for ( i = *(_DWORD *)(v4 + 52); i != -4; i = *(_DWORD *)(i + 32) )
    ++v7;
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v7;
}

//----- (0041ADE0) --------------------------------------------------------
int __userpurge CCastle::WarDelcareList<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>, int a4)
{
  int v4; // eax@7
  int v6; // [sp+4h] [bp-101Ch]@1
  int j; // [sp+8h] [bp-1018h]@9
  int i; // [sp+Ch] [bp-1014h]@3
  char v9; // [sp+10h] [bp-1010h]@1
  char v10; // [sp+11h] [bp-100Fh]@1
  __int16 v11; // [sp+100Dh] [bp-13h]@1
  char v12; // [sp+100Fh] [bp-11h]@1
  int v13; // [sp+1010h] [bp-10h]@1
  int v14; // [sp+1014h] [bp-Ch]@1
  int v15; // [sp+1018h] [bp-8h]@1
  int v16; // [sp+101Ch] [bp-4h]@1

  v13 = dword_4D9830;
  v6 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v9 = 0;
  memset(&v10, 0, 0xFFCu);
  v11 = 0;
  v12 = 0;
  v14 = (int)&v9;
  v16 = 0;
  v15 = 0;
  if ( *(_DWORD *)(v6 + 48) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v6 + 48) + 396) )
    {
      for ( i = *(_DWORD *)(*(_DWORD *)(v6 + 48) + 396); i != -5; i = *(_DWORD *)(i + 32) )
      {
        v14 = sub_497660(v14, i + 40);
        v14 = sub_497660(v14, i + 57);
        ++v15;
      }
    }
    else
    {
      v14 = sub_497660(v14, *(_DWORD *)(v6 + 48) + 44);
      v4 = (int)CGuild::GetLeaderName(*(void **)(v6 + 48));
      v14 = sub_497660(v14, v4);
      ++v15;
    }
  }
  if ( *(_DWORD *)(v6 + 52) != -4 )
  {
    for ( j = *(_DWORD *)(v6 + 52); j != -4; j = *(_DWORD *)(j + 32) )
    {
      if ( !*(_DWORD *)(v6 + 48)
        || *(_DWORD *)(v6 + 32) != *(_DWORD *)(j + 40) && *(_DWORD *)(v6 + 32) != *(_DWORD *)(j + 36) )
      {
        if ( *(_DWORD *)(j + 36) && *(_DWORD *)(j + 40) != *(_DWORD *)(j + 36) )
          v14 = sub_4189A0(v14, 0);
        else
          v14 = sub_4189A0(v14, 1);
        v14 = sub_44F9B0(v14, *(_DWORD *)(j + 36));
        v14 = sub_497660(v14, j + 44);
        v14 = sub_497660(v14, j + 61);
        ++v16;
      }
    }
  }
  CPlayer::Write(a2, (DWORD)&v13, a3, a4, 94, (unsigned int)"bbbm");
  return sub_47E080((volatile LONG *)&unk_4E09D4, a2, (DWORD)&v13, a3);
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0041B060) --------------------------------------------------------
bool __usercall CCastle::IsStandardAlive<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  bool v6; // ST04_4@1

  v5 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v6 = *(_DWORD *)(v5 + 60) == 0;
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v6;
}

//----- (0041B0A0) --------------------------------------------------------
int __usercall CCastle::GetStandardUnfurl<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  int v6; // ST04_4@1

  v5 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v6 = *(_DWORD *)(v5 + 64);
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v6;
}

//----- (0041B0D0) --------------------------------------------------------
__int32 __userpurge CCastle::SetStandardUnfurl<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST00_4@1

  v6 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  *(_DWORD *)(v6 + 64) = a5;
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
}

//----- (0041B100) --------------------------------------------------------
__int32 __userpurge CCastle::SetCurStandardGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  if ( *(_DWORD *)(v7 + 56) )
    CIOObject::Release(*(_DWORD *)(v7 + 56), a2, a3, a4);
  if ( a6 )
    CIOObject::AddRef(a6, a2, a3, a4);
  *(_DWORD *)(v7 + 56) = a6;
  *(_DWORD *)(v7 + 60) = a5;
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
}

//----- (0041B160) --------------------------------------------------------
void __usercall CCastle::UnfurlStandardCancel(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@5
  char v5; // [sp+0h] [bp-10h]@5
  char v6; // [sp+4h] [bp-Ch]@4
  int i; // [sp+8h] [bp-8h]@10
  char v8; // [sp+Ch] [bp-4h]@3

  if ( a4 )
  {
    sub_47E0D0((volatile LONG *)&unk_4E09D4);
    sub_40F070((int)&unk_4E09C8, &v8);
    while ( 1 )
    {
      v4 = sub_430C20((int)&unk_4E09C8, &v5);
      if ( !(unsigned __int8)sub_47D070(v4) )
        break;
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 52) != -4 )
      {
        if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 32) == a4 )
        {
          *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 64) = 0;
          break;
        }
        for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
        {
          if ( *(_DWORD *)(i + 40) == a4 )
          {
            *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 64) = 0;
            sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
            return;
          }
        }
      }
      sub_446090((int *)&v8, (int)&v6, 0);
    }
    sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
  }
  else
  {
    sub_4328C0("CCastle::UnfurlStandardCancel() gid error");
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041B270) --------------------------------------------------------
__int32 __userpurge CCastle::BrokenStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-8h]@1
  void *v7; // [sp+4h] [bp-4h]@2

  v6 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  if ( *(_DWORD *)(v6 + 56) )
  {
    v7 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbdsb");
    --*(_DWORD *)(*(_DWORD *)(v6 + 56) + 32);
    if ( !*(_DWORD *)(*(_DWORD *)(v6 + 56) + 32) )
      *(_DWORD *)(*(_DWORD *)(v6 + 56) + 356) = GetTickCount() + 600000;
  }
  else
  {
    v7 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbdsb");
  }
  CCastle::_WarMsg(v6, a2, a3, a4, v7);
  CIOBuffer::Release((int)v7);
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  CCastle::SetCurStandardGuild(v6, a2, a3, a4, 0, 0);
  return CCastle::SetLordDeclare(v6, a2, a3, a4, 0);
}

//----- (0041B360) --------------------------------------------------------
signed int __usercall CCastle::CreateStandard<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, const char *a6, int a7)
{
  _DWORD *v7; // ST1C_4@4
  signed int i; // [sp+4h] [bp-8h]@1
  signed int v10; // [sp+8h] [bp-4h]@1

  v10 = 0;
  for ( i = 0; i < 1; ++i )
  {
    if ( dword_4D5998[7 * i] == a4 )
    {
      v7 = &dword_4D5998[7 * i];
      if ( CMonsterGuildWar::Create(a1, a2, a3, v7[1], v7[2], (int)(v7 + 3), v7[6] + (v7[5] << 8), a5, a6, a7) )
        v10 = 1;
      return v10;
    }
  }
  return v10;
}

//----- (0041B3F0) --------------------------------------------------------
void __userpurge CCastle::CreateGate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, const char *a7)
{
  int v7; // [sp+0h] [bp-10h]@1
  int v8; // [sp+4h] [bp-Ch]@4
  int *v9; // [sp+8h] [bp-8h]@3
  int i; // [sp+Ch] [bp-4h]@1

  v7 = a1;
  for ( i = 0; i < 5; ++i )
  {
    v9 = &dword_4D59B8[7 * i];
    if ( dword_4D59B8[7 * i] == a5 )
    {
      v8 = CMonsterGuildWar::Create(a2, a3, a4, v9[1], v9[2], (int)(v9 + 3), v9[6] + (v9[5] << 8), a6, a7, 0);
      sub_41C840(v7 + 88, (int)&v8);
    }
  }
}
// 4D59B8: using guessed type int dword_4D59B8[];

//----- (0041B480) --------------------------------------------------------
void *__userpurge CCastle::CreateNoExistGate<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4<esi>, int a5, int a6, const char *a7)
{
  void *result; // eax@1
  void *v8; // eax@7
  int v9; // [sp+4h] [bp-1Ch]@1
  char v10; // [sp+8h] [bp-18h]@7
  char v11; // [sp+Ch] [bp-14h]@7
  int *v12; // [sp+10h] [bp-10h]@3
  int i; // [sp+14h] [bp-Ch]@1
  char v14; // [sp+18h] [bp-8h]@1
  int v15; // [sp+1Ch] [bp-4h]@4

  v9 = a1;
  result = sub_430C20(a1 + 88, &v14);
  for ( i = 0; ; ++i )
  {
    if ( i < 5 )
    {
      v12 = &dword_4D59B8[7 * i];
      result = &dword_4D59B8[7 * i];
      if ( *(_DWORD *)result != a5 )
        continue;
      v15 = *(_DWORD *)sub_420010();
      if ( v15 )
      {
        (*(void (__thiscall **)(int, int, const char *))(*(_DWORD *)v15 + 216))(v15, a6, a7);
      }
      else
      {
        a4 = CMonsterGuildWar::Create(a2, a3, a4, v12[1], v12[2], (int)(v12 + 3), v12[6] + (v12[5] << 8), a6, a7, 0);
        *(_DWORD *)sub_420010() = a4;
      }
      sub_420030(&v14, (int)&v11, 0);
      v8 = sub_445B40(v9 + 88, &v10);
      result = (void *)unknown_libname_8(v8);
      if ( !(_BYTE)result )
        continue;
    }
    break;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D59B8: using guessed type int dword_4D59B8[];

//----- (0041B580) --------------------------------------------------------
int __usercall CCastle::IsGateAlive<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5)
{
  void *v5; // eax@1
  char v7; // [sp+0h] [bp-10h]@1
  int v8; // [sp+4h] [bp-Ch]@2
  int v9; // [sp+8h] [bp-8h]@1
  char v10; // [sp+Ch] [bp-4h]@1

  v9 = 0;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  sub_44AE20((int)&unk_4E09C8, (int)&v10, (int)&a4);
  v5 = sub_430C20((int)&unk_4E09C8, &v7);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v8 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
    if ( *(_DWORD *)sub_41C800(v8 + 88, a5) )
      v9 = 1;
  }
  sub_47E080((volatile LONG *)&unk_4E09D4, a1, a2, a3);
  return v9;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041B610) --------------------------------------------------------
int __usercall CCastle::GetTaxRate<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  int v6; // ST04_4@1

  v5 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v6 = *(_DWORD *)(v5 + 40);
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v6;
}

//----- (0041B640) --------------------------------------------------------
__int32 __userpurge CCastle::SetTaxRate<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST10_4@1

  v7 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  *(_DWORD *)(v7 + 40) = a6;
  CDBSocket::Write(a2, a3, a4, 63, (unsigned int)"db");
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
}

//----- (0041B690) --------------------------------------------------------
bool __usercall CCastle::IsPayment<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  bool v6; // ST04_4@1

  v5 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v6 = *(_DWORD *)(v5 + 32) != 0;
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v6;
}

//----- (0041B6D0) --------------------------------------------------------
int __usercall CCastle::GetTax<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  int v6; // ST04_4@1

  v5 = a1;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  v6 = *(_DWORD *)(v5 + 36);
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v6;
}

//----- (0041B700) --------------------------------------------------------
__int32 __userpurge CCastle::AddTax<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-8h]@2
  int v7; // [sp+4h] [bp-4h]@1

  v7 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  if ( *(_DWORD *)(v7 + 36) + (a5 & ((a5 < 0) - 1)) <= 2000000000 )
    v6 = *(_DWORD *)(v7 + 36) + (a5 & ((a5 < 0) - 1));
  else
    v6 = 2000000000;
  *(_DWORD *)(v7 + 36) = v6;
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
}

//----- (0041B770) --------------------------------------------------------
int __userpurge CCastle::ResetTax<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST10_4@1
  int v7; // ST14_4@1

  v6 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  v7 = *(_DWORD *)(v6 + 36);
  *(_DWORD *)(v6 + 36) = 0;
  CDBSocket::Write(a2, a3, a4, 27, (unsigned int)"dd");
  sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v7;
}

//----- (0041B7C0) --------------------------------------------------------
int __usercall CCastle::TaxSave<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int result; // eax@1
  void *v4; // eax@3
  char v5; // [sp+0h] [bp-Ch]@3
  char v6; // [sp+4h] [bp-8h]@4
  char v7; // [sp+8h] [bp-4h]@2

  result = dword_4E099C++ + 1;
  if ( dword_4E099C > 5 )
  {
    dword_4E099C = 0;
    sub_40F070((int)&unk_4E09C8, &v7);
    while ( 1 )
    {
      v4 = sub_430C20((int)&unk_4E09C8, &v5);
      result = sub_47D070(v4);
      if ( !(_BYTE)result )
        break;
      sub_420250((int *)&v7);
      sub_420250((int *)&v7);
      CDBSocket::Write(a1, a2, a3, 27, (unsigned int)"dd");
      sub_446090((int *)&v7, (int)&v6, 0);
    }
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E099C: using guessed type int dword_4E099C;

//----- (0041B860) --------------------------------------------------------
signed int __userpurge CCastle::IsGateUse<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2
  int v6; // [sp+0h] [bp-Ch]@1
  int i; // [sp+4h] [bp-8h]@13
  signed int v8; // [sp+8h] [bp-4h]@1

  v6 = a1;
  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  if ( *(_DWORD *)(v6 + 44) == 2 )
  {
    sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
    result = 0;
  }
  else
  {
    if ( *(_DWORD *)(v6 + 44) )
    {
      if ( *(_DWORD *)(v6 + 44) == 1 )
      {
        if ( a5 && *(_DWORD *)(v6 + 48) )
        {
          if ( *(_DWORD *)(*(_DWORD *)(v6 + 48) + 396) )
          {
            sub_47DE70((volatile LONG *)&unk_4E09B0);
            for ( i = *(_DWORD *)(*(_DWORD *)(v6 + 48) + 396); i != -5 && *(_DWORD *)(i + 36) != a5; i = *(_DWORD *)(i + 32) )
              ;
            if ( i == -5 )
              v8 = 97;
            sub_47E080((volatile LONG *)&unk_4E09B0, a2, a3, a4);
          }
          else
          {
            if ( *(_DWORD *)(v6 + 32) != a5 )
              v8 = 97;
          }
        }
        else
        {
          v8 = 97;
        }
      }
    }
    else
    {
      if ( !a5 || *(_DWORD *)(v6 + 32) != a5 )
        v8 = 96;
    }
    sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
    result = v8;
  }
  return result;
}

//----- (0041B970) --------------------------------------------------------
signed int __userpurge CCastle::IsGateUseWarring<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-Ch]@1
  int i; // [sp+4h] [bp-8h]@5
  signed int v8; // [sp+8h] [bp-4h]@1

  v6 = a1;
  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E09D4);
  if ( a5 && *(_DWORD *)(v6 + 48) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v6 + 48) + 396) )
    {
      sub_47DE70((volatile LONG *)&unk_4E09B0);
      for ( i = *(_DWORD *)(*(_DWORD *)(v6 + 48) + 396); i != -5 && *(_DWORD *)(i + 36) != a5; i = *(_DWORD *)(i + 32) )
        ;
      if ( i == -5 )
        v8 = 97;
      sub_47E080((volatile LONG *)&unk_4E09B0, a2, a3, a4);
    }
    else
    {
      if ( *(_DWORD *)(v6 + 32) != a5 )
        v8 = 97;
    }
  }
  else
  {
    v8 = 97;
  }
  sub_47E080((volatile LONG *)&unk_4E09D4, a2, a3, a4);
  return v8;
}

//----- (0041BA30) --------------------------------------------------------
void __usercall CCastle::GateGoto(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 10; ++i )
  {
    if ( dword_4D5A48[7 * i + 1] == a5 )
    {
      CPlayer::Teleport(a4, a1, a2, a3, dword_4D5A48[7 * i + 2], (int)&dword_4D5A48[7 * i + 3], 0, 0);
      return;
    }
  }
}

//----- (0041BA90) --------------------------------------------------------
signed int __userpurge CCastle::SetGateLimit<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6)
{
  signed int result; // eax@3
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  if ( a5 >= 0 && a5 <= 2 )
  {
    sub_47E0D0((volatile LONG *)&unk_4E09D4);
    *(_DWORD *)(v7 + 44) = a5;
    sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
    CDBSocket::Write(a2, a3, a4, 65, (unsigned int)"db");
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0041BAF0) --------------------------------------------------------
__int32 __usercall CCastle::SetWarRemainSecondTime<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  dword_4E09A0 = a4;
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
}
// 4E09A0: using guessed type int dword_4E09A0;

//----- (0041BB20) --------------------------------------------------------
__int32 __usercall CCastle::ChangeLeaderName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5)
{
  void *v5; // eax@2
  char v7; // [sp+0h] [bp-10h]@2
  char v8; // [sp+4h] [bp-Ch]@8
  int i; // [sp+8h] [bp-8h]@3
  char v10; // [sp+Ch] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  sub_40F070((int)&unk_4E09C8, &v10);
  while ( 1 )
  {
    v5 = sub_430C20((int)&unk_4E09C8, &v7);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v10) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 40) == a4 )
      {
        strcpy((char *)(i + 61), a5);
        return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
      }
    }
    sub_446090((int *)&v10, (int)&v8, 0);
  }
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041BBD0) --------------------------------------------------------
__int32 __usercall CCastle::ChangeGuildName<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, const char *a5)
{
  void *v5; // eax@2
  char v7; // [sp+0h] [bp-10h]@2
  char v8; // [sp+4h] [bp-Ch]@8
  int i; // [sp+8h] [bp-8h]@3
  char v10; // [sp+Ch] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  sub_40F070((int)&unk_4E09C8, &v10);
  while ( 1 )
  {
    v5 = sub_430C20((int)&unk_4E09C8, &v7);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    for ( i = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v10) + 4) + 52); i != -4; i = *(_DWORD *)(i + 32) )
    {
      if ( *(_DWORD *)(i + 40) == a4 )
      {
        strcpy((char *)(i + 44), a5);
        return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
      }
    }
    sub_446090((int *)&v10, (int)&v8, 0);
  }
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041BC80) --------------------------------------------------------
__int32 __userpurge CCastle::SetLordDeclare<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  *(_DWORD *)(v6 + 80) = a5;
  if ( a5 )
    *(_DWORD *)(v6 + 84) = time(0) + 300;
  else
    *(_DWORD *)(v6 + 84) = 0;
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a2, a3, a4);
}

//----- (0041BCE0) --------------------------------------------------------
__int32 __usercall CCastle::SecondProcess<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@3
  char v5; // [sp+0h] [bp-24h]@3
  char v6; // [sp+4h] [bp-20h]@2
  void *v7; // [sp+8h] [bp-1Ch]@21
  void *v8; // [sp+Ch] [bp-18h]@11
  int v9; // [sp+10h] [bp-14h]@4
  __int32 v10; // [sp+14h] [bp-10h]@9
  char v11; // [sp+18h] [bp-Ch]@1
  time_t v12; // [sp+1Ch] [bp-8h]@1
  int v13; // [sp+20h] [bp-4h]@1

  v13 = 0;
  v12 = time(0);
  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  sub_40F070((int)&unk_4E09C8, &v11);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E09C8, &v5);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v9 = *(_DWORD *)(sub_420250((int *)&v11) + 4);
    if ( *(_DWORD *)(v9 + 52) != -4 )
    {
      if ( *(_DWORD *)(v9 + 76) )
      {
        v10 = *(_DWORD *)(v9 + 76) - v12;
        if ( dword_4DA9B0 == 1 )
          goto LABEL_33;
        if ( (unsigned int)v10 <= 0x258 )
        {
          if ( !(v10 % 60) || v10 <= 60 )
          {
            v8 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bbbb");
            CCastle::_WarMsg(v9, a1, a2, a3, v8);
            CIOBuffer::Release((int)v8);
          }
          if ( v10 <= 0 )
          {
            v13 = CCastle::IsWarEnd(v9, a1, a2, a3);
            if ( v13 )
LABEL_33:
              CCastle::WarEnd(v9, a1, a2, a3);
          }
        }
        if ( *(_DWORD *)(v9 + 80) )
        {
          v10 = *(_DWORD *)(v9 + 84) - v12;
          if ( v10 <= 300 )
          {
            if ( !(v10 % 60) || v10 < 60 && !(v10 % 10) || v10 <= 30 )
            {
              v7 = sub_44FCE0(a1, a2, a3, 94, (unsigned int)"bbsbb");
              CCastle::_WarMsg(v9, a1, a2, a3, v7);
              CIOBuffer::Release((int)v7);
            }
          }
          if ( v10 <= 0 )
          {
            CCastle::ChangeLord(v9, a1, a2, a3);
            *(_DWORD *)(v9 + 80) = 0;
            *(_DWORD *)(v9 + 84) = 0;
          }
        }
      }
    }
    sub_446090((int *)&v11, (int)&v6, 0);
  }
  if ( v13 )
    dword_4E0964 = 0;
  return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4DA9B0: using guessed type int dword_4DA9B0;
// 4E0964: using guessed type int dword_4E0964;

//----- (0041BEE0) --------------------------------------------------------
int __usercall CCastle::WarEnd<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v6; // [sp+4h] [bp-30h]@1
  char v7; // [sp+8h] [bp-2Ch]@2
  char v8; // [sp+Ch] [bp-28h]@3
  int v9; // [sp+10h] [bp-24h]@3
  int v10; // [sp+14h] [bp-20h]@3
  char v11; // [sp+18h] [bp-1Ch]@1
  int v12; // [sp+1Ch] [bp-18h]@1
  char v13; // [sp+20h] [bp-14h]@1
  int v14; // [sp+2Ch] [bp-8h]@4
  void *v15; // [sp+30h] [bp-4h]@1

  v6 = a1;
  CCastle::ChangeLord(a1, a2, a3, a4);
  v15 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbds");
  CCastle::_WarMsg(v6, a2, a3, a4, v15);
  CIOBuffer::Release((int)v15);
  sub_432890("CCastle::WarEnd ");
  sub_47D030(&v13);
  CMonster::GetMonsterList(a2, a3, a4, (int)&v13, 319);
  v12 = 0;
  sub_40EFA0((int)&v13, &v11);
  while ( 1 )
  {
    v4 = sub_430C20((int)&v13, &v7);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v12 = *(_DWORD *)sub_40F040((int *)&v11);
    v10 = 0;
    v9 = 0;
    (*(void (__thiscall **)(int, int, _DWORD, int *, int *))(*(_DWORD *)v12 + 236))(v12, v12, 0, &v10, &v9);
    CBase::Delete((void *)v12);
    sub_47D0A0((int *)&v11, (int)&v8, 0);
  }
  v14 = 0;
  if ( *(_DWORD *)(v6 + 48) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v6 + 48) + 392) )
      v14 = *(_DWORD *)(*(_DWORD *)(v6 + 48) + 392);
    else
      v14 = *(_DWORD *)(v6 + 32);
  }
  CPlayer::WarPortalAll(a2, a3, a4, *(_DWORD *)(v6 + 68), v14);
  if ( *(_DWORD *)(v6 + 52) != -4 )
  {
    CWar::Clear(*(_DWORD *)(v6 + 52));
    *(_DWORD *)(v6 + 52) = -4;
  }
  CNPC::WarRelationShow(a2, a3, a4, *(_DWORD *)(v6 + 68), 1);
  if ( *(_DWORD *)(v6 + 48) )
  {
    if ( !*(_DWORD *)(v6 + 56) )
      CCastle::CreateStandard(a2, a3, a4, *(_DWORD *)(v6 + 68), *(_DWORD *)(v6 + 32), (const char *)(*(_DWORD *)(v6 + 48) + 44), 0);
    CCastle::CreateNoExistGate(v6, a2, a3, a4, *(_DWORD *)(v6 + 68), *(_DWORD *)(v6 + 32), (const char *)(*(_DWORD *)(v6 + 48) + 44));
  }
  else
  {
    CCastle::CreateStandard(a2, a3, a4, *(_DWORD *)(v6 + 68), 0, &byte_4B437D, 0);
    CCastle::CreateNoExistGate(v6, a2, a3, a4, *(_DWORD *)(v6 + 68), 0, &byte_4B437D);
  }
  if ( *(_DWORD *)(v6 + 56) )
    CIOObject::Release(*(_DWORD *)(v6 + 56), a2, a3, a4);
  if ( *(_DWORD *)(v6 + 48) )
    CIOObject::AddRef(*(_DWORD *)(v6 + 48), a2, a3, a4);
  *(_DWORD *)(v6 + 56) = *(_DWORD *)(v6 + 48);
  *(_DWORD *)(v6 + 60) = *(_DWORD *)(v6 + 32);
  *(_DWORD *)(v6 + 64) = 0;
  *(_DWORD *)(v6 + 80) = 0;
  *(_DWORD *)(v6 + 84) = 0;
  *(_DWORD *)(v6 + 76) = 0;
  *(_DWORD *)(v6 + 72) = 0;
  CDBSocket::Write(a2, a3, a4, 62, (unsigned int)&byte_4B437D);
  return sub_472990((int)&v13);
}
// 41C6B0: using guessed type int __thiscall CWar::Clear(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041C180) --------------------------------------------------------
signed int __usercall CCastle::IsWarEnd<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  signed int result; // eax@4
  void *v5; // ST14_4@4
  int v6; // [sp+0h] [bp-8h]@1

  v6 = a1;
  if ( (*(_DWORD *)(a1 + 64) || *(_DWORD *)(a1 + 80)) && (++*(_DWORD *)(a1 + 72), *(_DWORD *)(a1 + 72) < 4) )
  {
    v5 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bb");
    CCastle::_WarMsg(v6, a2, a3, a4, v5);
    sub_432890("CCastle::IsWarEnd ");
    CIOBuffer::Release((int)v5);
    *(_DWORD *)(v6 + 76) += 600;
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (0041C210) --------------------------------------------------------
void __usercall CCastle::ChangeLord(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // ST20_4@6
  int v5; // [sp+4h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-4h]@1

  v5 = a1;
  v6 = 0;
  if ( *(_DWORD *)(a1 + 56) )
  {
    v6 = *(_DWORD *)(a1 + 56);
  }
  else
  {
    if ( *(_DWORD *)(a1 + 48) )
      v6 = *(_DWORD *)(a1 + 48);
  }
  if ( v6 != *(_DWORD *)(a1 + 48) )
  {
    *(_DWORD *)(a1 + 32) = *(_DWORD *)(a1 + 60);
    CCastle::SetGuild(a1, a2, a3, a4, *(_DWORD *)(a1 + 56));
    CDBSocket::Write(a2, a3, a4, 64, (unsigned int)"dd");
    v4 = sub_44FCE0(a2, a3, a4, 94, (unsigned int)"bbds");
    CCastle::_WarMsg(v5, a2, a3, a4, v4);
    CIOBuffer::Release((int)v4);
    *(_DWORD *)(v5 + 36) = 0;
    *(_DWORD *)(v5 + 40) = 100;
    CDBSocket::Write(a2, a3, a4, 63, (unsigned int)"db");
  }
}

//----- (0041C310) --------------------------------------------------------
signed int __cdecl CCastle::IsWarDeclared()
{
  void *v0; // eax@2
  char v2; // [sp+0h] [bp-Ch]@2
  char v3; // [sp+4h] [bp-8h]@5
  char v4; // [sp+8h] [bp-4h]@1

  sub_40F070((int)&unk_4E09C8, &v4);
  while ( 1 )
  {
    v0 = sub_430C20((int)&unk_4E09C8, &v2);
    if ( !(unsigned __int8)sub_47D070(v0) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v4) + 4) + 52) != -4 )
      return 1;
    sub_446090((int *)&v4, (int)&v3, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041C380) --------------------------------------------------------
int __thiscall CWar::CWar(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B58F0;
  *(_DWORD *)(v2 + 32) = -4;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  memset((void *)(v2 + 44), 0, 0x11u);
  memset((void *)(v2 + 61), 0, 0x11u);
  *(_DWORD *)(v2 + 80) = 0;
  return v2;
}
// 4B58F0: using guessed type int (__stdcall *off_4B58F0)(int);

//----- (0041C3F0) --------------------------------------------------------
int __userpurge CWar::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CWar::_CWar(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0041C420) --------------------------------------------------------
int __usercall CWar::_CWar<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B58F0;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B58F0: using guessed type int (__stdcall *off_4B58F0)(int);

//----- (0041C440) --------------------------------------------------------
BOOL __usercall CWar::Start<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  dword_4E0998 = CreateEventA(0, 1, 0, 0);
  CDBSocket::Write(a1, a2, a3, 58, (unsigned int)&byte_4B437D);
  WaitForSingleObject(dword_4E0998, 0xFFFFFFFFu);
  return CloseHandle(dword_4E0998);
}

//----- (0041C490) --------------------------------------------------------
__int32 __usercall CWar::Load<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  __int32 result; // eax@2
  int v6; // eax@8
  int v7; // eax@8
  int v8; // eax@8
  int v9; // eax@8
  void *v10; // eax@8
  int v11; // eax@13
  int v12; // ST04_4@14
  int v13; // eax@14
  int v14; // [sp+0h] [bp-20h]@6
  char v15; // [sp+4h] [bp-1Ch]@8
  char v16; // [sp+8h] [bp-18h]@8
  int v17; // [sp+Ch] [bp-14h]@5
  int v18; // [sp+10h] [bp-10h]@10
  int v19; // [sp+14h] [bp-Ch]@3
  int v20; // [sp+18h] [bp-8h]@8
  char v21[4]; // [sp+1Ch] [bp-4h]@8

  sub_47E0D0((volatile LONG *)&unk_4E09D4);
  if ( a4 )
  {
    std___String_base___String_base(&v19);
    while ( a4 > 0 )
    {
      v17 = (int)sub_401000(0x54u);
      if ( v17 )
        v14 = CWar::CWar(v17);
      else
        v14 = 0;
      v20 = v14;
      v6 = sub_47A240(a5, v21);
      v7 = sub_47A240(v6, v20 + 36);
      v8 = sub_47A240(v7, v20 + 40);
      v9 = sub_497620(v8, v20 + 44);
      a5 = sub_497620(v9, v20 + 61);
      v19 = *(_DWORD *)sub_44AE20((int)&unk_4E09C8, (int)&v16, (int)v21);
      v10 = sub_430C20((int)&unk_4E09C8, &v15);
      if ( (unsigned __int8)unknown_libname_8(v10) )
      {
        sub_4328C0("CWar::Load() not find castle (cid:%d)", *(_DWORD *)v21);
        CBase::Delete((void *)v20);
        return sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
      }
      v18 = *(_DWORD *)(sub_420250(&v19) + 4);
      if ( *(_DWORD *)(v20 + 40) == *(_DWORD *)(v18 + 32) )
        CWar::SetGuild(v20, a1, a2, a3, *(_DWORD *)(v18 + 48));
      if ( *(_DWORD *)(*(_DWORD *)(sub_420250(&v19) + 4) + 52) == -4 )
      {
        v11 = sub_420250(&v19);
        *(_DWORD *)(*(_DWORD *)(v11 + 4) + 52) = v20;
      }
      else
      {
        v12 = v20;
        v13 = sub_420250(&v19);
        CWar::ADD(*(void **)(*(_DWORD *)(v13 + 4) + 52), v12);
      }
      --a4;
    }
    result = sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
  }
  else
  {
    SetEvent(dword_4E0998);
    result = sub_47E1C0((volatile LONG *)&unk_4E09D4, a1, a2, a3);
  }
  return result;
}
// 41C8B0: using guessed type int __thiscall std___String_base___String_base(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (0041C650) --------------------------------------------------------
int __usercall CWar::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1

  v5 = a1;
  CWar::SetGuild(a1, a2, a3, a4, 0);
  return CBase::OnDelete(v5, a2, a3, a4);
}

//----- (0041C670) --------------------------------------------------------
void *__thiscall CWar::ADD(void *this, int a2)
{
  void *result; // eax@2
  void *i; // [sp+4h] [bp-4h]@1

  for ( i = this; ; i = (void *)*((_DWORD *)i + 8) )
  {
    result = i;
    if ( *((_DWORD *)i + 8) == -4 )
      break;
  }
  *((_DWORD *)i + 8) = a2;
  return result;
}

//----- (0041C6B0) --------------------------------------------------------
signed int __thiscall CWar::Clear(int this)
{
  int v1; // ST04_4@3
  int v3; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v3 = this;
  for ( i = *(_DWORD *)(this + 32); i != -4; i = v1 )
  {
    v1 = *(_DWORD *)(i + 32);
    *(_DWORD *)(i + 32) = -4;
    CBase::Delete((void *)i);
  }
  *(_DWORD *)(v3 + 32) = -4;
  return CBase::Delete((void *)v3);
}
// 41C6B0: using guessed type int __thiscall CWar::Clear(_DWORD);

//----- (0041C710) --------------------------------------------------------
int __thiscall sub_41C710(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_41C8D0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 41C8D0: using guessed type _DWORD __stdcall sub_41C8D0(_DWORD);

//----- (0041C770) --------------------------------------------------------
int __thiscall sub_41C770(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_41C950(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 41C770: using guessed type int __thiscall sub_41C770(_DWORD);
// 41C950: using guessed type _DWORD __stdcall sub_41C950(_DWORD);

//----- (0041C7D0) --------------------------------------------------------
int __thiscall sub_41C7D0(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  sub_44F6A0((int)v3, 0);
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0041C800) --------------------------------------------------------
int __thiscall sub_41C800(int this, int a2)
{
  void *v3; // eax@1
  char v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  v3 = sub_430C20(this, &v5);
  sub_44F7E0(v3, (int)&v4, a2);
  return sub_420010();
}

//----- (0041C840) --------------------------------------------------------
int __thiscall sub_41C840(int this, int a2)
{
  int v2; // esi@1
  int result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_418590(this);
  if ( v2 >= (unsigned int)sub_44F660(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = sub_41C9D0(v5, (int)&v6, *(const void **)v4, a2);
  }
  else
  {
    result = sub_41CA50(*(_DWORD *)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (0041C8D0) --------------------------------------------------------
int __stdcall sub_41C8D0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_41C8D0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 41C8D0: using guessed type _DWORD __stdcall sub_41C8D0(_DWORD);

//----- (0041C950) --------------------------------------------------------
int __stdcall sub_41C950(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_41C950(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 41C950: using guessed type _DWORD __stdcall sub_41C950(_DWORD);

//----- (0041C9D0) --------------------------------------------------------
int __thiscall sub_41C9D0(int this, int a2, const void *a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_418590(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_41CE80(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_41CB80(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_44F7E0(v7, a2, v6);
  return a2;
}

//----- (0041CA50) --------------------------------------------------------
int __stdcall sub_41CA50(int a1, int a2, int a3)
{
  sub_44FA50(a1, a2, a3);
  return a1 + 4 * a2;
}

//----- (0041CA80) --------------------------------------------------------
int __thiscall sub_41CA80(int this, int a2, int a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  *(_BYTE *)(this + 4) = *(_BYTE *)a3;
  return this;
}

//----- (0041CAB0) --------------------------------------------------------
int *__thiscall sub_41CAB0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_41CEB0(this);
  return v2;
}

//----- (0041CAD0) --------------------------------------------------------
int __thiscall sub_41CAD0(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(v3, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (0041CB60) --------------------------------------------------------
signed int __cdecl sub_41CB60()
{
  return sub_44B850();
}

//----- (0041CB80) --------------------------------------------------------
int __thiscall sub_41CB80(int this, const void *a2, int a3, int a4)
{
  int result; // eax@1
  signed int v5; // esi@3
  void *v6; // eax@11
  int v7; // eax@11
  int v8; // ST20_4@11
  int v9; // ST18_4@16
  int v10; // [sp+4h] [bp-1Ch]@7
  int v11; // [sp+8h] [bp-18h]@1
  int v12; // [sp+10h] [bp-10h]@11
  unsigned int v13; // [sp+18h] [bp-8h]@1
  int v14; // [sp+18h] [bp-8h]@9
  int v15; // [sp+1Ch] [bp-4h]@1
  int v16; // [sp+2Ch] [bp+Ch]@11

  v11 = this;
  v15 = *(_DWORD *)a4;
  result = sub_44F660(this);
  v13 = result;
  if ( a3 )
  {
    v5 = sub_41CB60();
    if ( v5 - sub_418590(v11) >= (unsigned int)a3 )
    {
      if ( v13 >= a3 + sub_418590(v11) )
      {
        if ( (*(_DWORD *)(v11 + 8) - (_DWORD)a2) >> 2 >= (unsigned int)a3 )
        {
          v9 = *(_DWORD *)(v11 + 8);
          *(_DWORD *)(v11 + 8) = sub_41CF30((const void *)(v9 - 4 * a3), v9, *(void **)(v11 + 8));
          sub_44FAC0(a2, v9 - 4 * a3, v9);
          result = sub_44FA90((int)a2, (int)((char *)a2 + 4 * a3), (int)&v15);
        }
        else
        {
          sub_41CF30(a2, *(_DWORD *)(v11 + 8), (char *)a2 + 4 * a3);
          sub_41CA50(*(_DWORD *)(v11 + 8), a3 - ((*(_DWORD *)(v11 + 8) - (_DWORD)a2) >> 2), (int)&v15);
          *(_DWORD *)(v11 + 8) += 4 * a3;
          result = sub_44FA90((int)a2, *(_DWORD *)(v11 + 8) - 4 * a3, (int)&v15);
        }
      }
      else
      {
        if ( sub_41CB60() - (v13 >> 1) >= v13 )
          v10 = v13 + (v13 >> 1);
        else
          v10 = 0;
        v14 = v10;
        if ( v10 < (unsigned int)(a3 + sub_418590(v11)) )
          v14 = a3 + sub_418590(v11);
        v6 = sub_41CE40(v14);
        v12 = (int)v6;
        v7 = (int)sub_41CF30(*(const void **)(v11 + 4), (int)a2, v6);
        v8 = sub_41CA50(v7, a3, (int)&v15);
        sub_41CF30(a2, *(_DWORD *)(v11 + 8), (void *)v8);
        v16 = a3 + sub_418590(v11);
        if ( *(_DWORD *)(v11 + 4) )
        {
          sub_44F720(*(_DWORD *)(v11 + 4), *(_DWORD *)(v11 + 8));
          sub_4338F0(*(_DWORD *)(v11 + 4), (*(_DWORD *)(v11 + 12) - *(_DWORD *)(v11 + 4)) >> 2);
        }
        *(_DWORD *)(v11 + 12) = v12 + 4 * v14;
        *(_DWORD *)(v11 + 8) = v12 + 4 * v16;
        result = v12;
        *(_DWORD *)(v11 + 4) = v12;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (0041CE40) --------------------------------------------------------
void *__stdcall sub_41CE40(int a1)
{
  return sub_44FB00(a1);
}

//----- (0041CE60) --------------------------------------------------------
void *__thiscall sub_41CE60(void *this, int a2)
{
  *(_DWORD *)this += 4 * a2;
  return this;
}

//----- (0041CE80) --------------------------------------------------------
int __thiscall sub_41CE80(void *this, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)this;
  return sub_41CEE0(&v3, a2);
}

//----- (0041CEB0) --------------------------------------------------------
int *__thiscall sub_41CEB0(int *this)
{
  int *v2; // ST04_4@1

  v2 = this;
  *this = *(_DWORD *)sub_474590(*this);
  return v2;
}

//----- (0041CEE0) --------------------------------------------------------
int __thiscall sub_41CEE0(void *this, int a2)
{
  return (*(_DWORD *)this - *(_DWORD *)a2) >> 2;
}

//----- (0041CF00) --------------------------------------------------------
int __thiscall sub_41CF00(int this, int a2)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 4);
  return this;
}

//----- (0041CF30) --------------------------------------------------------
char *__stdcall sub_41CF30(const void *a1, int a2, void *a3)
{
  return sub_44FB20(a1, a2, a3);
}

//----- (0041CF60) --------------------------------------------------------
int __cdecl sub_41CF60(int a1, int a2, int a3)
{
  return sub_44FB60(a1, a2, a3);
}

//----- (0041CF80) --------------------------------------------------------
void *__cdecl sub_41CF80(const void *a1, int a2, int a3)
{
  return memcpy_0((void *)(a3 - 4 * ((a2 - (_DWORD)a1) >> 2)), a1, 4 * ((a2 - (_DWORD)a1) >> 2));
}

//----- (0041CFC0) --------------------------------------------------------
char *__cdecl sub_41CFC0(const void *a1, int a2, void *a3)
{
  return (char *)memcpy_0(a3, a1, 4 * ((a2 - (_DWORD)a1) >> 2)) + 4 * ((a2 - (_DWORD)a1) >> 2);
}

//----- (0041D000) --------------------------------------------------------
void *__thiscall sub_41D000(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0041D030) --------------------------------------------------------
void *__thiscall sub_41D030(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0041D060) --------------------------------------------------------
int __thiscall sub_41D060(int this)
{
  return sub_41D080(this);
}

//----- (0041D080) --------------------------------------------------------
int __thiscall sub_41D080(int this)
{
  return sub_41D0A0(this);
}

//----- (0041D0A0) --------------------------------------------------------
int __thiscall sub_41D0A0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_41D150(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0041D150) --------------------------------------------------------
void *__thiscall sub_41D150(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_41C710(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041D1F0) --------------------------------------------------------
int __thiscall sub_41D1F0(int this)
{
  return sub_41D210(this);
}

//----- (0041D210) --------------------------------------------------------
int __thiscall sub_41D210(int this)
{
  return sub_41D230(this);
}

//----- (0041D230) --------------------------------------------------------
int __thiscall sub_41D230(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_41D2E0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0041D2E0) --------------------------------------------------------
void *__thiscall sub_41D2E0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_41C770(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 41C770: using guessed type int __thiscall sub_41C770(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041D380) --------------------------------------------------------
int __thiscall CInitItem::CInitItem(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B5978;
  sub_41FFC0((void *)(v2 + 120));
  memset((void *)(v2 + 32), 0, 0x1Fu);
  *(_DWORD *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 76) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  *(_DWORD *)(v2 + 84) = 0;
  *(_DWORD *)(v2 + 88) = 0;
  *(_DWORD *)(v2 + 92) = 0;
  *(_DWORD *)(v2 + 96) = -1;
  *(_DWORD *)(v2 + 100) = 0;
  *(_DWORD *)(v2 + 104) = 0;
  *(_DWORD *)(v2 + 108) = 0;
  *(_DWORD *)(v2 + 112) = 0;
  *(_DWORD *)(v2 + 116) = 0;
  *(_DWORD *)(v2 + 132) = 0;
  *(_DWORD *)(v2 + 136) = 0;
  *(_DWORD *)(v2 + 140) = 0;
  *(_DWORD *)(v2 + 144) = 0;
  *(_DWORD *)(v2 + 148) = 0;
  *(_DWORD *)(v2 + 152) = 0;
  *(_DWORD *)(v2 + 156) = 0;
  *(_DWORD *)(v2 + 160) = -1;
  *(_DWORD *)(v2 + 164) = 0;
  *(_DWORD *)(v2 + 168) = 0;
  *(_DWORD *)(v2 + 172) = 0;
  *(_DWORD *)(v2 + 176) = 0;
  *(_DWORD *)(v2 + 180) = 0;
  return v2;
}
// 4B5978: using guessed type int (__stdcall *off_4B5978)(int);

//----- (0041D500) --------------------------------------------------------
int __userpurge CInitItem::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CInitItem::_CInitItem(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0041D530) --------------------------------------------------------
int __usercall CInitItem::_CInitItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v5; // eax@3
  int v7; // [sp+0h] [bp-14h]@1
  char v8; // [sp+8h] [bp-Ch]@2
  char v9; // [sp+Ch] [bp-8h]@3
  char v10; // [sp+10h] [bp-4h]@1

  v7 = a1;
  *(_DWORD *)a1 = &off_4B5978;
  sub_40F070(a1 + 120, &v10);
  while ( 1 )
  {
    v4 = sub_430C20(v7 + 120, &v8);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v5 = sub_420250((int *)&v10);
    sub_401020(*(_DWORD *)(v5 + 4));
    sub_446090((int *)&v10, (int)&v9, 0);
  }
  sub_41D5C0(v7 + 120);
  return CBase::_CBase(v7, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4B5978: using guessed type int (__stdcall *off_4B5978)(int);

//----- (0041D5C0) --------------------------------------------------------
int __thiscall sub_41D5C0(int this)
{
  return sub_41FFF0(this);
}

//----- (0041D5E0) --------------------------------------------------------
int __cdecl CInitItem::Open()
{
  int result; // eax@5
  char v1; // [sp+0h] [bp-10h]@3
  char v2; // [sp+4h] [bp-Ch]@3
  char v3[4]; // [sp+8h] [bp-8h]@1
  int v4; // [sp+Ch] [bp-4h]@1

  v4 = 46;
  for ( *(_DWORD *)v3 = 0; *(_DWORD *)v3 < v4; ++*(_DWORD *)v3 )
  {
    sub_420060((int)&unk_4E09F0, (int)&v1, 8 * *(_DWORD *)v3 + 5114368);
    if ( !v2 )
      sub_4328C0("CInitItem::Open() Duplicate Key. (key:%d)", *(_DWORD *)v3);
    result = *(_DWORD *)v3 + 1;
  }
  return result;
}

//----- (0041D640) --------------------------------------------------------
signed int __cdecl CInitItem::FindKey(char a1)
{
  void *v1; // eax@1
  signed int result; // eax@2
  char v3; // [sp+0h] [bp-8h]@1
  char v4; // [sp+4h] [bp-4h]@1

  sub_44C970((int)&unk_4E09F0, (int)&v4, (int *)&a1);
  v1 = sub_430C20((int)&unk_4E09F0, &v3);
  if ( (unsigned __int8)unknown_libname_8(v1) )
    result = -1;
  else
    result = *(_DWORD *)(sub_420250((int *)&v4) + 4);
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041D690) --------------------------------------------------------
int __cdecl CInitItem::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0xB8u);
  if ( v2 )
    v1 = CInitItem::CInitItem(v2);
  else
    v1 = 0;
  return v1;
}

//----- (0041D6D0) --------------------------------------------------------
signed int __thiscall CInitItem::Set(void *this, int a2, char a3)
{
  void *v3; // eax@2
  int v4; // eax@2
  signed int result; // eax@5
  void *v6; // eax@7
  void *v7; // eax@8
  char v8; // al@8
  void *v9; // eax@8
  char v10; // al@8
  void *v11; // eax@9
  void *v12; // eax@9
  void *v13; // eax@9
  void *v14; // eax@9
  void *v15; // eax@10
  void *v16; // eax@11
  void *v17; // eax@12
  void *v18; // eax@13
  void *v19; // eax@14
  char v20; // al@14
  void *v21; // eax@14
  void *v22; // eax@15
  void *v23; // eax@16
  void *v24; // eax@17
  void *v25; // eax@18
  void *v26; // eax@22
  void *v27; // eax@22
  void *v28; // eax@23
  void *v29; // eax@24
  void *v30; // eax@25
  void *v31; // eax@26
  void *v32; // eax@26
  void *v33; // eax@27
  void *v34; // eax@28
  void *v35; // eax@30
  void *v36; // eax@32
  int v37; // [sp-4h] [bp-9Ch]@19
  int v38; // [sp+0h] [bp-98h]@1
  void *v39; // [sp+4h] [bp-94h]@1
  char v40; // [sp+Ch] [bp-8Ch]@32
  char v41; // [sp+10h] [bp-88h]@30
  char v42; // [sp+14h] [bp-84h]@28
  char v43; // [sp+18h] [bp-80h]@27
  char v44; // [sp+1Ch] [bp-7Ch]@26
  char v45; // [sp+20h] [bp-78h]@26
  char v46; // [sp+24h] [bp-74h]@25
  char v47; // [sp+28h] [bp-70h]@24
  char v48; // [sp+2Ch] [bp-6Ch]@23
  char v49; // [sp+30h] [bp-68h]@22
  char v50; // [sp+34h] [bp-64h]@22
  char v51; // [sp+3Ch] [bp-5Ch]@18
  char v52; // [sp+40h] [bp-58h]@17
  char v53; // [sp+44h] [bp-54h]@16
  char v54; // [sp+48h] [bp-50h]@15
  char v55; // [sp+4Ch] [bp-4Ch]@14
  char v56; // [sp+50h] [bp-48h]@14
  char v57; // [sp+54h] [bp-44h]@13
  char v58; // [sp+58h] [bp-40h]@12
  char v59; // [sp+5Ch] [bp-3Ch]@11
  char v60; // [sp+60h] [bp-38h]@10
  char v61; // [sp+64h] [bp-34h]@9
  char v62; // [sp+68h] [bp-30h]@9
  char v63; // [sp+6Ch] [bp-2Ch]@9
  char v64; // [sp+70h] [bp-28h]@9
  char v65; // [sp+74h] [bp-24h]@8
  char v66; // [sp+78h] [bp-20h]@8
  char v67; // [sp+7Ch] [bp-1Ch]@7
  char v68; // [sp+80h] [bp-18h]@2
  int v69; // [sp+84h] [bp-14h]@9
  int v70; // [sp+88h] [bp-10h]@9
  int v71; // [sp+8Ch] [bp-Ch]@9
  int v72; // [sp+90h] [bp-8h]@9
  char *v73; // [sp+94h] [bp-4h]@2

  v39 = this;
  v38 = a2 - 1;
  switch ( a2 )
  {
    case 1:
      v3 = sub_4023A0(&a3, &v68);
      v4 = sub_40C8D0(v3);
      v73 = (char *)sub_432EF0(v4);
      if ( v73 && strlen(v73) && strlen(v73) <= 0x1E )
      {
        strcpy((char *)v39 + 32, v73);
        goto LABEL_34;
      }
      sub_4328C0("CInitItem::Set() Invalid Name. (Name:%s)", v73);
      return 0;
    case 2:
      v6 = sub_4023A0(&a3, &v67);
      *((_DWORD *)v39 + 16) = sub_40C8D0(v6);
      goto LABEL_34;
    case 38:
      v7 = sub_4023A0(&a3, &v66);
      v8 = sub_402360(v7);
      *((_DWORD *)v39 + 17) = CInitItem::FindKey(v8);
      v9 = sub_4023A0(&a3, &v65);
      v10 = sub_402360(v9);
      *((_DWORD *)v39 + 18) = CInitItem::FindKey(v10);
      goto LABEL_34;
    case 101:
      v11 = sub_4023A0(&a3, &v64);
      v70 = sub_40C8D0(v11);
      v12 = sub_4023A0(&a3, &v63);
      v72 = sub_40C8D0(v12);
      v13 = sub_4023A0(&a3, &v62);
      v71 = sub_40C8D0(v13);
      v14 = sub_4023A0(&a3, &v61);
      v69 = sub_40C8D0(v14);
      *((_DWORD *)v39 + 19) = v69 | (v71 << 8) | (v72 << 16) | (v70 << 24);
      goto LABEL_34;
    case 7:
      v15 = sub_4023A0(&a3, &v60);
      *((_DWORD *)v39 + 20) = sub_40C8D0(v15);
      goto LABEL_34;
    case 47:
      v16 = sub_4023A0(&a3, &v59);
      *((_DWORD *)v39 + 21) = sub_40C8D0(v16);
      goto LABEL_34;
    case 48:
      v17 = sub_4023A0(&a3, &v58);
      *((_DWORD *)v39 + 22) = sub_40C8D0(v17);
      goto LABEL_34;
    case 49:
      v18 = sub_4023A0(&a3, &v57);
      *((_DWORD *)v39 + 23) = sub_40C8D0(v18);
      goto LABEL_34;
    case 39:
      v19 = sub_4023A0(&a3, &v56);
      v20 = sub_402360(v19);
      *((_DWORD *)v39 + 24) = CInitItem::FindKey(v20);
      v21 = sub_4023A0(&a3, &v55);
      *((_DWORD *)v39 + 25) = sub_40C8D0(v21);
      goto LABEL_34;
    case 34:
      v22 = sub_4023A0(&a3, &v54);
      *((_DWORD *)v39 + 26) = sub_40C8D0(v22);
      goto LABEL_34;
    case 40:
      v23 = sub_4023A0(&a3, &v53);
      *((_DWORD *)v39 + 27) = sub_40C8D0(v23);
      goto LABEL_34;
    case 58:
      v24 = sub_4023A0(&a3, &v52);
      *((_DWORD *)v39 + 28) = sub_40C8D0(v24);
      goto LABEL_34;
    case 41:
      v25 = sub_4023A0(&a3, &v51);
      *((_DWORD *)v39 + 29) = sub_40C8D0(v25);
      goto LABEL_34;
    case 42:
      v37 = a2 - 1;
      sub_402340(&v37, (int)&a3);
      if ( CInitItem::SetSpec(v39, v37) )
        goto LABEL_34;
      return 0;
    case 44:
    case 45:
    case 57:
    case 90:
    case 91:
      goto LABEL_34;
    case 80:
      v26 = sub_4023A0(&a3, &v50);
      *((_DWORD *)v39 + 33) = sub_40C8D0(v26);
      v27 = sub_4023A0(&a3, &v49);
      *((_DWORD *)v39 + 34) = sub_40C8D0(v27);
      *((_DWORD *)v39 + 36) = *((_DWORD *)v39 + 34);
      goto LABEL_34;
    case 86:
      v28 = sub_4023A0(&a3, &v48);
      *((_DWORD *)v39 + 37) = sub_40C8D0(v28);
      goto LABEL_34;
    case 8:
      v29 = sub_4023A0(&a3, &v47);
      *((_DWORD *)v39 + 38) = sub_40C8D0(v29);
      goto LABEL_34;
    case 98:
      v30 = sub_4023A0(&a3, &v46);
      *((_DWORD *)v39 + 39) = sub_40C8D0(v30);
      goto LABEL_34;
    case 102:
      v31 = sub_4023A0(&a3, &v45);
      *((_DWORD *)v39 + 40) = sub_40C8D0(v31);
      v32 = sub_4023A0(&a3, &v44);
      *((_DWORD *)v39 + 41) = sub_40C8D0(v32);
      goto LABEL_34;
    case 105:
      v33 = sub_4023A0(&a3, &v43);
      *((_DWORD *)v39 + 42) = sub_40C8D0(v33);
      goto LABEL_34;
    case 106:
      v34 = sub_4023A0(&a3, &v42);
      *((_DWORD *)v39 + 43) = sub_40C8D0(v34);
      goto LABEL_34;
    case 109:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v35 = sub_4023A0(&a3, &v41);
        *((_DWORD *)v39 + 44) |= 1 << sub_40C8D0(v35);
      }
      goto LABEL_34;
    case 96:
      v36 = sub_4023A0(&a3, &v40);
      *((_DWORD *)v39 + 45) = sub_40C8D0(v36);
LABEL_34:
      result = 1;
      break;
    default:
      v37 = a2 - 1;
      sub_402340(&v37, (int)&a3);
      result = CBase::Set(v39, a2, v37);
      break;
  }
  return result;
}

//----- (0041DCC0) --------------------------------------------------------
signed int __thiscall CInitItem::OnLoad(int this)
{
  if ( *(_DWORD *)(this + 68) == 1 )
  {
    if ( *(_DWORD *)(this + 80) >= 40 )
      *(_DWORD *)(this + 168) = 30;
  }
  return CItem::InsertInitItem(this);
}

//----- (0041DD00) --------------------------------------------------------
signed int __thiscall CInitItem::SetSpec(void *this, char a2)
{
  signed int result; // eax@3
  void *v3; // eax@4
  void *v4; // eax@8
  int v5; // eax@8
  void *v6; // eax@12
  void *v7; // eax@15
  int v8; // eax@15
  void *v9; // eax@19
  int v10; // eax@19
  void *v11; // eax@23
  int v12; // eax@23
  void *v13; // eax@27
  int v14; // eax@27
  void *v15; // eax@31
  int v16; // eax@31
  void *v17; // eax@35
  int v18; // eax@35
  void *v19; // eax@39
  int v20; // eax@39
  void *v21; // eax@43
  int v22; // eax@43
  void *v23; // eax@46
  void *v24; // eax@46
  void *v25; // eax@50
  void *v26; // eax@50
  void *v27; // eax@54
  void *v28; // eax@59
  int v29; // eax@59
  void *v30; // eax@63
  int v31; // eax@63
  void *v32; // eax@67
  int v33; // eax@67
  void *v34; // eax@71
  int v35; // eax@71
  void *v36; // eax@75
  int v37; // eax@75
  void *v38; // eax@79
  int v39; // eax@79
  void *v40; // eax@83
  int v41; // eax@83
  void *v42; // eax@87
  int v43; // eax@87
  void *v44; // eax@91
  char v45; // al@91
  void *v46; // eax@94
  void *v47; // eax@94
  void *v48; // eax@98
  char v49; // al@98
  void *v50; // eax@98
  void *v51; // eax@103
  char v52; // al@103
  int v53; // eax@103
  void *v54; // eax@110
  char v55; // al@110
  void *v56; // eax@110
  void *v57; // eax@110
  void *v58; // eax@110
  void *v59; // eax@110
  void *v60; // eax@114
  void *v61; // eax@114
  void *v62; // eax@114
  void *v63; // eax@123
  int v64; // eax@123
  int v65; // eax@127
  int v66; // [sp+0h] [bp-1F0h]@123
  int v67; // [sp+4h] [bp-1ECh]@119
  int v68; // [sp+8h] [bp-1E8h]@115
  int v69; // [sp+Ch] [bp-1E4h]@111
  int v70; // [sp+10h] [bp-1E0h]@107
  int v71; // [sp+14h] [bp-1DCh]@103
  int v72; // [sp+18h] [bp-1D8h]@99
  int v73; // [sp+1Ch] [bp-1D4h]@95
  int v74; // [sp+20h] [bp-1D0h]@91
  int v75; // [sp+24h] [bp-1CCh]@87
  int v76; // [sp+28h] [bp-1C8h]@83
  int v77; // [sp+2Ch] [bp-1C4h]@79
  int v78; // [sp+30h] [bp-1C0h]@75
  int v79; // [sp+34h] [bp-1BCh]@71
  int v80; // [sp+38h] [bp-1B8h]@67
  int v81; // [sp+3Ch] [bp-1B4h]@63
  int v82; // [sp+40h] [bp-1B0h]@59
  int v83; // [sp+44h] [bp-1ACh]@55
  int v84; // [sp+48h] [bp-1A8h]@51
  int v85; // [sp+4Ch] [bp-1A4h]@47
  int v86; // [sp+50h] [bp-1A0h]@43
  int v87; // [sp+54h] [bp-19Ch]@39
  int v88; // [sp+58h] [bp-198h]@35
  int v89; // [sp+5Ch] [bp-194h]@31
  int v90; // [sp+60h] [bp-190h]@27
  int v91; // [sp+64h] [bp-18Ch]@23
  int v92; // [sp+68h] [bp-188h]@19
  int v93; // [sp+6Ch] [bp-184h]@15
  int v94; // [sp+70h] [bp-180h]@8
  void *v95; // [sp+78h] [bp-178h]@1
  char v96; // [sp+7Ch] [bp-174h]@127
  char v97; // [sp+84h] [bp-16Ch]@123
  int v98; // [sp+88h] [bp-168h]@122
  int v99; // [sp+8Ch] [bp-164h]@118
  int v100; // [sp+90h] [bp-160h]@114
  char v101; // [sp+94h] [bp-15Ch]@114
  char v102; // [sp+98h] [bp-158h]@114
  char v103; // [sp+9Ch] [bp-154h]@114
  int v104; // [sp+A0h] [bp-150h]@110
  char v105; // [sp+A4h] [bp-14Ch]@110
  char v106; // [sp+A8h] [bp-148h]@110
  char v107; // [sp+ACh] [bp-144h]@110
  char v108; // [sp+B0h] [bp-140h]@110
  char v109; // [sp+B4h] [bp-13Ch]@110
  int v110; // [sp+B8h] [bp-138h]@106
  char v111; // [sp+BCh] [bp-134h]@103
  int v112; // [sp+C0h] [bp-130h]@102
  int v113; // [sp+C4h] [bp-12Ch]@98
  char v114; // [sp+C8h] [bp-128h]@98
  char v115; // [sp+CCh] [bp-124h]@98
  int v116; // [sp+D0h] [bp-120h]@94
  char v117; // [sp+D4h] [bp-11Ch]@94
  char v118; // [sp+D8h] [bp-118h]@94
  char v119; // [sp+DCh] [bp-114h]@91
  int v120; // [sp+E0h] [bp-110h]@90
  char v121; // [sp+E4h] [bp-10Ch]@87
  int v122; // [sp+E8h] [bp-108h]@86
  char v123; // [sp+ECh] [bp-104h]@83
  int v124; // [sp+F0h] [bp-100h]@82
  char v125; // [sp+F4h] [bp-FCh]@79
  int v126; // [sp+F8h] [bp-F8h]@78
  char v127; // [sp+FCh] [bp-F4h]@75
  int v128; // [sp+100h] [bp-F0h]@74
  char v129; // [sp+104h] [bp-ECh]@71
  int v130; // [sp+108h] [bp-E8h]@70
  char v131; // [sp+10Ch] [bp-E4h]@67
  int v132; // [sp+110h] [bp-E0h]@66
  char v133; // [sp+114h] [bp-DCh]@63
  int v134; // [sp+118h] [bp-D8h]@62
  char v135; // [sp+11Ch] [bp-D4h]@59
  int v136; // [sp+120h] [bp-D0h]@58
  int v137; // [sp+124h] [bp-CCh]@54
  char v138; // [sp+128h] [bp-C8h]@54
  int v139; // [sp+12Ch] [bp-C4h]@50
  char v140; // [sp+130h] [bp-C0h]@50
  char v141; // [sp+134h] [bp-BCh]@50
  int v142; // [sp+138h] [bp-B8h]@46
  char v143; // [sp+13Ch] [bp-B4h]@46
  char v144; // [sp+140h] [bp-B0h]@46
  char v145; // [sp+144h] [bp-ACh]@43
  int v146; // [sp+148h] [bp-A8h]@42
  char v147; // [sp+14Ch] [bp-A4h]@39
  int v148; // [sp+150h] [bp-A0h]@38
  char v149; // [sp+154h] [bp-9Ch]@35
  int v150; // [sp+158h] [bp-98h]@34
  char v151; // [sp+15Ch] [bp-94h]@31
  int v152; // [sp+160h] [bp-90h]@30
  char v153; // [sp+164h] [bp-8Ch]@27
  int v154; // [sp+168h] [bp-88h]@26
  char v155; // [sp+16Ch] [bp-84h]@23
  int v156; // [sp+170h] [bp-80h]@22
  char v157; // [sp+174h] [bp-7Ch]@19
  int v158; // [sp+178h] [bp-78h]@18
  char v159; // [sp+17Ch] [bp-74h]@15
  int v160; // [sp+180h] [bp-70h]@14
  char v161; // [sp+184h] [bp-6Ch]@12
  char v162; // [sp+188h] [bp-68h]@8
  int v163; // [sp+18Ch] [bp-64h]@7
  char v164; // [sp+190h] [bp-60h]@4
  int v165; // [sp+194h] [bp-5Ch]@114
  int v166; // [sp+198h] [bp-58h]@114
  int v167; // [sp+19Ch] [bp-54h]@114
  int v168; // [sp+1A0h] [bp-50h]@110
  int v169; // [sp+1A4h] [bp-4Ch]@110
  int v170; // [sp+1A8h] [bp-48h]@110
  int v171; // [sp+1ACh] [bp-44h]@110
  int v172; // [sp+1B0h] [bp-40h]@110
  int v173; // [sp+1B4h] [bp-3Ch]@98
  int v174; // [sp+1B8h] [bp-38h]@98
  int v175; // [sp+1BCh] [bp-34h]@94
  int v176; // [sp+1C0h] [bp-30h]@94
  int v177; // [sp+1C4h] [bp-2Ch]@54
  int v178; // [sp+1C8h] [bp-28h]@50
  int v179; // [sp+1CCh] [bp-24h]@50
  int v180; // [sp+1D0h] [bp-20h]@46
  int v181; // [sp+1D4h] [bp-1Ch]@46
  char v182; // [sp+1D8h] [bp-18h]@127
  char v183; // [sp+1DCh] [bp-14h]@127
  int v184; // [sp+1E0h] [bp-10h]@6
  char v185[4]; // [sp+1E4h] [bp-Ch]@4
  char v186; // [sp+1E8h] [bp-8h]@4
  char v187[4]; // [sp+1ECh] [bp-4h]@4

  v95 = this;
  while ( 2 )
  {
    if ( (unsigned __int8)sub_402380(&a2) )
    {
      result = 1;
    }
    else
    {
      sub_4023A0(&a2, &v186);
      v3 = sub_4023A0(&v186, &v164);
      *(_DWORD *)v185 = sub_402360(v3);
      *(_DWORD *)v187 = CObjectDB::FindSymbol(v185[0]);
      if ( *(_DWORD *)v187 )
      {
        v184 = 0;
        switch ( *(_DWORD *)v187 )
        {
          case 9:
            v163 = (int)sub_401000(0x14u);
            if ( v163 )
            {
              v4 = sub_4023A0(&v186, &v162);
              v5 = sub_40C8D0(v4);
              v94 = sub_41EAA0(v163, 0, v5);
            }
            else
            {
              v94 = 0;
            }
            v184 = v94;
            goto LABEL_11;
          case 0xA:
            v160 = (int)sub_401000(0x14u);
            if ( v160 )
            {
              v7 = sub_4023A0(&v186, &v159);
              v8 = sub_40C8D0(v7);
              v93 = sub_41EAA0(v160, 1, v8);
            }
            else
            {
              v93 = 0;
            }
            v184 = v93;
            goto LABEL_11;
          case 0xB:
            v158 = (int)sub_401000(0x14u);
            if ( v158 )
            {
              v9 = sub_4023A0(&v186, &v157);
              v10 = sub_40C8D0(v9);
              v92 = sub_41EAA0(v158, 2, v10);
            }
            else
            {
              v92 = 0;
            }
            v184 = v92;
            goto LABEL_11;
          case 0xC:
            v156 = (int)sub_401000(0x14u);
            if ( v156 )
            {
              v11 = sub_4023A0(&v186, &v155);
              v12 = sub_40C8D0(v11);
              v91 = sub_41EAA0(v156, 3, v12);
            }
            else
            {
              v91 = 0;
            }
            v184 = v91;
            goto LABEL_11;
          case 0xD:
            v154 = (int)sub_401000(0x14u);
            if ( v154 )
            {
              v13 = sub_4023A0(&v186, &v153);
              v14 = sub_40C8D0(v13);
              v90 = sub_41EAA0(v154, 4, v14);
            }
            else
            {
              v90 = 0;
            }
            v184 = v90;
            goto LABEL_11;
          case 0xE:
            v152 = (int)sub_401000(0x14u);
            if ( v152 )
            {
              v15 = sub_4023A0(&v186, &v151);
              v16 = sub_40C8D0(v15);
              v89 = sub_41EAA0(v152, 5, v16);
            }
            else
            {
              v89 = 0;
            }
            v184 = v89;
            goto LABEL_11;
          case 0xF:
            v150 = (int)sub_401000(0x14u);
            if ( v150 )
            {
              v17 = sub_4023A0(&v186, &v149);
              v18 = sub_40C8D0(v17);
              v88 = sub_41EAA0(v150, 6, v18);
            }
            else
            {
              v88 = 0;
            }
            v184 = v88;
            goto LABEL_11;
          case 0x10:
            v148 = (int)sub_401000(0x14u);
            if ( v148 )
            {
              v19 = sub_4023A0(&v186, &v147);
              v20 = sub_40C8D0(v19);
              v87 = sub_41EAA0(v148, 9, v20);
            }
            else
            {
              v87 = 0;
            }
            v184 = v87;
            goto LABEL_11;
          case 0x11:
            v146 = (int)sub_401000(0x14u);
            if ( v146 )
            {
              v21 = sub_4023A0(&v186, &v145);
              v22 = sub_40C8D0(v21);
              v86 = sub_41EAA0(v146, 10, v22);
            }
            else
            {
              v86 = 0;
            }
            v184 = v86;
            goto LABEL_11;
          case 0x12:
            v23 = sub_4023A0(&v186, &v144);
            v180 = sub_40C8D0(v23);
            v24 = sub_4023A0(&v186, &v143);
            v181 = sub_40C8D0(v24);
            v142 = (int)sub_401000(0x14u);
            if ( v142 )
              v85 = CSpecPrty::CSpecPrty(v142, 27, v180, v181);
            else
              v85 = 0;
            v184 = v85;
            goto LABEL_11;
          case 0x13:
            v25 = sub_4023A0(&v186, &v141);
            v178 = sub_40C8D0(v25);
            v26 = sub_4023A0(&v186, &v140);
            v179 = sub_40C8D0(v26);
            v139 = (int)sub_401000(0x14u);
            if ( v139 )
              v84 = CSpecPrty::CSpecPrty(v139, 28, v178, v179);
            else
              v84 = 0;
            v184 = v84;
            goto LABEL_11;
          case 0x14:
            v27 = sub_4023A0(&v186, &v138);
            v177 = sub_40C8D0(v27);
            v137 = (int)sub_401000(0x14u);
            if ( v137 )
              v83 = CSpecPrty::CSpecPrty(v137, 15, v177, v177);
            else
              v83 = 0;
            v184 = v83;
            goto LABEL_11;
          case 0x15:
            v136 = (int)sub_401000(0x14u);
            if ( v136 )
            {
              v28 = sub_4023A0(&v186, &v135);
              v29 = sub_40C8D0(v28);
              v82 = sub_41EAA0(v136, 16, v29);
            }
            else
            {
              v82 = 0;
            }
            v184 = v82;
            goto LABEL_11;
          case 0x19:
            v134 = (int)sub_401000(0x14u);
            if ( v134 )
            {
              v30 = sub_4023A0(&v186, &v133);
              v31 = sub_40C8D0(v30);
              v81 = sub_41EAA0(v134, 18, v31);
            }
            else
            {
              v81 = 0;
            }
            v184 = v81;
            goto LABEL_11;
          case 0x1A:
            v132 = (int)sub_401000(0x14u);
            if ( v132 )
            {
              v32 = sub_4023A0(&v186, &v131);
              v33 = sub_40C8D0(v32);
              v80 = sub_41EAA0(v132, 19, v33);
            }
            else
            {
              v80 = 0;
            }
            v184 = v80;
            goto LABEL_11;
          case 0x1B:
            v130 = (int)sub_401000(0x14u);
            if ( v130 )
            {
              v34 = sub_4023A0(&v186, &v129);
              v35 = sub_40C8D0(v34);
              v79 = sub_41EAA0(v130, 20, v35);
            }
            else
            {
              v79 = 0;
            }
            v184 = v79;
            goto LABEL_11;
          case 0x1C:
            v128 = (int)sub_401000(0x14u);
            if ( v128 )
            {
              v36 = sub_4023A0(&v186, &v127);
              v37 = sub_40C8D0(v36);
              v78 = sub_41EAA0(v128, 21, v37);
            }
            else
            {
              v78 = 0;
            }
            v184 = v78;
            goto LABEL_11;
          case 0x1D:
            v126 = (int)sub_401000(0x14u);
            if ( v126 )
            {
              v38 = sub_4023A0(&v186, &v125);
              v39 = sub_40C8D0(v38);
              v77 = sub_41EAA0(v126, 22, v39);
            }
            else
            {
              v77 = 0;
            }
            v184 = v77;
            goto LABEL_11;
          case 0x16:
            v124 = (int)sub_401000(0x14u);
            if ( v124 )
            {
              v40 = sub_4023A0(&v186, &v123);
              v41 = sub_40C8D0(v40);
              v76 = sub_41EAA0(v124, 17, v41);
            }
            else
            {
              v76 = 0;
            }
            v184 = v76;
            goto LABEL_11;
          case 0x17:
            v122 = (int)sub_401000(0x14u);
            if ( v122 )
            {
              v42 = sub_4023A0(&v186, &v121);
              v43 = sub_40C8D0(v42);
              v75 = sub_41EAA0(v122, 32, v43);
            }
            else
            {
              v75 = 0;
            }
            v184 = v75;
LABEL_11:
            if ( !(unsigned __int8)sub_402380(&v186) )
            {
              v6 = sub_4023A0(&v186, &v161);
              *(_DWORD *)(v184 + 12) = sub_40C8D0(v6);
            }
            goto LABEL_127;
          case 0x55:
            v120 = (int)sub_401000(0xCu);
            if ( v120 )
            {
              v44 = sub_4023A0(&v186, &v119);
              v45 = sub_40C8D0(v44);
              v74 = CSpecGState::CSpecGState(v120, 1 << v45);
            }
            else
            {
              v74 = 0;
            }
            v184 = v74;
            goto LABEL_127;
          case 0x2B:
            v46 = sub_4023A0(&v186, &v118);
            v175 = sub_40C8D0(v46);
            v47 = sub_4023A0(&v186, &v117);
            v176 = sub_40C8D0(v47);
            v116 = (int)sub_401000(0xCu);
            if ( v116 )
              v73 = CSpecTeleport::CSpecTeleport(v116, v175, v176);
            else
              v73 = 0;
            v184 = v73;
            goto LABEL_127;
          case 0x2E:
            v48 = sub_4023A0(&v186, &v115);
            v49 = sub_402360(v48);
            v173 = CInitItem::FindKey(v49);
            v50 = sub_4023A0(&v186, &v114);
            v174 = sub_40C8D0(v50);
            v113 = (int)sub_401000(0xCu);
            if ( v113 )
              v72 = CSpecRefresh::CSpecRefresh(v113, v173, v174);
            else
              v72 = 0;
            v184 = v72;
            goto LABEL_127;
          case 0x52:
            v112 = (int)sub_401000(0xCu);
            if ( v112 )
            {
              v51 = sub_4023A0(&v186, &v111);
              v52 = sub_402360(v51);
              v53 = CInitItem::FindKey(v52);
              v71 = CSpecCharming::CSpecCharming(v112, v53);
            }
            else
            {
              v71 = 0;
            }
            v184 = v71;
            goto LABEL_127;
          case 0x54:
            v110 = (int)sub_401000(0xCu);
            if ( v110 )
              v70 = CSpecRepair::CSpecRepair(v110, 0);
            else
              v70 = 0;
            v184 = v70;
            goto LABEL_127;
          case 0x58:
            v54 = sub_4023A0(&v186, &v109);
            v55 = sub_402360(v54);
            v168 = CInitItem::FindKey(v55);
            v56 = sub_4023A0(&v186, &v108);
            v170 = sub_40C8D0(v56);
            v57 = sub_4023A0(&v186, &v107);
            v171 = sub_40C8D0(v57);
            v58 = sub_4023A0(&v186, &v106);
            v169 = sub_40C8D0(v58);
            v59 = sub_4023A0(&v186, &v105);
            v172 = sub_40C8D0(v59);
            v104 = (int)sub_401000(0x1Cu);
            if ( v104 )
              v69 = CSpecChangePrefix::CSpecChangePrefix(v104, v168, v170, v171, v169, v172);
            else
              v69 = 0;
            v184 = v69;
            goto LABEL_127;
          case 0x59:
            v60 = sub_4023A0(&v186, &v103);
            v165 = sub_40C8D0(v60);
            v61 = sub_4023A0(&v186, &v102);
            v166 = sub_40C8D0(v61);
            v62 = sub_4023A0(&v186, &v101);
            v167 = sub_40C8D0(v62);
            v100 = (int)sub_401000(0x14u);
            if ( v100 )
              v68 = CSpecBuff::CSpecBuff(v100, v165, v166, v167);
            else
              v68 = 0;
            v184 = v68;
            goto LABEL_127;
          case 0x63:
            v99 = (int)sub_401000(0xCu);
            if ( v99 )
              v67 = CSpecProtect::CSpecProtect(v99);
            else
              v67 = 0;
            v184 = v67;
            goto LABEL_127;
          case 0x64:
            v98 = (int)sub_401000(0xCu);
            if ( v98 )
            {
              v63 = sub_4023A0(&v186, &v97);
              v64 = sub_40C8D0(v63);
              v66 = CSpecRevival::CSpecRevival(v98, v64);
            }
            else
            {
              v66 = 0;
            }
            v184 = v66;
LABEL_127:
            v65 = sub_420990((int)&v96, (int)v187, (int)&v184);
            sub_445DF0((int)((char *)v95 + 120), (int)&v182, v65);
            if ( v183 )
              continue;
            sub_4328C0("CInitItem::Set() Duplicate Specialty. (Symbol:%d)", *(_DWORD *)v187);
            result = 0;
            break;
          default:
            sub_4328C0("CInitItem::SetSpec() Invalid Specialty. (symbol:%d)", *(_DWORD *)v187);
            result = 0;
            break;
        }
      }
      else
      {
        sub_4328C0("CInitItem::SetSpec() Invalid symbol(%s)", *(_DWORD *)v185);
        result = 0;
      }
    }
    return result;
  }
}

//----- (0041EAA0) --------------------------------------------------------
int __thiscall sub_41EAA0(int this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = this;
  sub_41EAE0(this, a3);
  *(_DWORD *)v4 = off_4B5AA8;
  *(_DWORD *)(v4 + 12) = 1;
  *(_DWORD *)(v4 + 16) = a2;
  return v4;
}
// 4B5AA8: using guessed type int (__stdcall *off_4B5AA8[3])(int);

//----- (0041EAE0) --------------------------------------------------------
int __thiscall sub_41EAE0(int this, int a2)
{
  *(_DWORD *)this = off_4B5AB8;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = 0;
  return this;
}
// 4B5AB8: using guessed type int (__stdcall *off_4B5AB8[3])(int);

//----- (0041EB20) --------------------------------------------------------
int __thiscall CSpecPrty::CSpecPrty(int this, int a2, int a3, int a4)
{
  int v5; // ST08_4@1

  v5 = this;
  CSpec::CSpec(this, a3, a4);
  *(_DWORD *)v5 = off_4B5AA8;
  *(_DWORD *)(v5 + 12) = 1;
  *(_DWORD *)(v5 + 16) = a2;
  return v5;
}
// 4B5AA8: using guessed type int (__stdcall *off_4B5AA8[3])(int);

//----- (0041EB60) --------------------------------------------------------
int __thiscall CSpec::CSpec(int this, int a2, int a3)
{
  *(_DWORD *)this = off_4B5AB8;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = a3;
  return this;
}
// 4B5AB8: using guessed type int (__stdcall *off_4B5AB8[3])(int);

//----- (0041EB90) --------------------------------------------------------
int __thiscall CSpecGState::CSpecGState(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  sub_41EAE0(this, a2);
  *(_DWORD *)v3 = off_4B5AC8;
  return v3;
}
// 4B5AC8: using guessed type int (__stdcall *off_4B5AC8[3])(int);

//----- (0041EBC0) --------------------------------------------------------
int __thiscall CSpecTeleport::CSpecTeleport(int this, int a2, int a3)
{
  int v4; // ST08_4@1

  v4 = this;
  CSpec::CSpec(this, a2, a3);
  *(_DWORD *)v4 = off_4B5AD8;
  return v4;
}
// 4B5AD8: using guessed type int (__stdcall *off_4B5AD8[3])(int);

//----- (0041EBF0) --------------------------------------------------------
int __thiscall CSpecRefresh::CSpecRefresh(int this, int a2, int a3)
{
  int v4; // ST08_4@1

  v4 = this;
  CSpec::CSpec(this, a2, a3);
  *(_DWORD *)v4 = off_4B5AE8;
  return v4;
}
// 4B5AE8: using guessed type int (__stdcall *off_4B5AE8[3])(int);

//----- (0041EC20) --------------------------------------------------------
int __thiscall CSpecCharming::CSpecCharming(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  sub_41EAE0(this, a2);
  *(_DWORD *)v3 = off_4B5AF8;
  return v3;
}
// 4B5AF8: using guessed type int (__stdcall *off_4B5AF8[3])(int);

//----- (0041EC50) --------------------------------------------------------
int __thiscall CSpecRepair::CSpecRepair(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  sub_41EAE0(this, a2);
  *(_DWORD *)v3 = off_4B5B08;
  return v3;
}
// 4B5B08: using guessed type int (__stdcall *off_4B5B08[3])(int);

//----- (0041EC80) --------------------------------------------------------
int __thiscall CSpecChangePrefix::CSpecChangePrefix(int this, int a2, int a3, int a4, int a5, int a6)
{
  int v7; // ST04_4@1

  v7 = this;
  sub_41EAE0(this, a2);
  *(_DWORD *)v7 = off_4B5B18;
  *(_DWORD *)(v7 + 12) = a3;
  *(_DWORD *)(v7 + 20) = a4;
  *(_DWORD *)(v7 + 16) = a5;
  *(_DWORD *)(v7 + 24) = a6;
  return v7;
}
// 4B5B18: using guessed type int (__stdcall *off_4B5B18[3])(int);

//----- (0041ECD0) --------------------------------------------------------
int __thiscall CSpecProtect::CSpecProtect(int this)
{
  int v2; // ST04_4@1

  v2 = this;
  sub_41EAE0(this, 0);
  *(_DWORD *)v2 = off_4B5B28;
  return v2;
}
// 4B5B28: using guessed type int (__stdcall *off_4B5B28[3])(int);

//----- (0041ED00) --------------------------------------------------------
int __thiscall CSpecBuff::CSpecBuff(int this, int a2, int a3, int a4)
{
  int v5; // ST04_4@1

  v5 = this;
  sub_41EAE0(this, a2);
  *(_DWORD *)v5 = off_4B5B38;
  *(_DWORD *)(v5 + 12) = a3;
  *(_DWORD *)(v5 + 16) = a4;
  return v5;
}
// 4B5B38: using guessed type int (__stdcall *off_4B5B38[3])(int);

//----- (0041ED40) --------------------------------------------------------
int __thiscall CSpecRevival::CSpecRevival(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  sub_41EAE0(this, a2);
  *(_DWORD *)v3 = off_4B5B48;
  return v3;
}
// 4B5B48: using guessed type int (__stdcall *off_4B5B48[3])(int);

//----- (0041ED70) --------------------------------------------------------
char __thiscall CInitItem::ApplySpec(void *this, int a2)
{
  int v2; // eax@2
  void *v3; // eax@2
  int v4; // eax@3
  void *v6; // [sp+4h] [bp-10h]@1
  char v7; // [sp+8h] [bp-Ch]@2
  char v8; // [sp+Ch] [bp-8h]@3
  char v9; // [sp+10h] [bp-4h]@1

  v6 = this;
  sub_40F070((int)((char *)this + 120), &v9);
  while ( 1 )
  {
    v3 = sub_430C20((int)((char *)v6 + 120), &v7);
    v2 = (unsigned __int8)sub_47D070(v3);
    if ( !(_BYTE)v2 )
      break;
    v4 = sub_420250((int *)&v9);
    (***(void (__thiscall ****)(_DWORD, _DWORD))(v4 + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090((int *)&v9, (int)&v8, 0);
  }
  return v2;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041EDE0) --------------------------------------------------------
char __thiscall CInitItem::FreeSpec(void *this, int a2)
{
  int v2; // eax@2
  void *v3; // eax@2
  int v4; // eax@3
  void *v6; // [sp+4h] [bp-10h]@1
  char v7; // [sp+8h] [bp-Ch]@2
  char v8; // [sp+Ch] [bp-8h]@3
  char v9; // [sp+10h] [bp-4h]@1

  v6 = this;
  sub_40F070((int)((char *)this + 120), &v9);
  while ( 1 )
  {
    v3 = sub_430C20((int)((char *)v6 + 120), &v7);
    v2 = (unsigned __int8)sub_47D070(v3);
    if ( !(_BYTE)v2 )
      break;
    v4 = sub_420250((int *)&v9);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v4 + 4) + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090((int *)&v9, (int)&v8, 0);
  }
  return v2;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041EE50) --------------------------------------------------------
int __userpurge CInitItem::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  void *v6; // eax@6
  int v7; // eax@10
  int v8; // eax@12
  int v9; // [sp+8h] [bp-10h]@1
  char v10; // [sp+Ch] [bp-Ch]@6
  DWORD v11; // [sp+10h] [bp-8h]@9
  char v12; // [sp+14h] [bp-4h]@6

  v9 = a1;
  if ( *(_DWORD *)(a1 + 100) <= *(_DWORD *)(a5 + 60) )
  {
    if ( !*(_DWORD *)(a1 + 180) || CGuild::IsWarringPeriod() )
    {
      sub_40F070(v9 + 120, &v12);
      v6 = sub_430C20(v9 + 120, &v10);
      if ( (unsigned __int8)unknown_libname_8(v6) )
      {
        result = 0;
      }
      else
      {
        if ( *(_DWORD *)(v9 + 148) )
        {
          v11 = GetTickCount();
          if ( v11 < *(_DWORD *)(a5 + 1456) )
          {
            result = 0;
          }
          else
          {
            *(_DWORD *)(a5 + 1456) = *(_DWORD *)(v9 + 148) + v11;
            v7 = sub_420250((int *)&v12);
            result = (*(int (__thiscall **)(_DWORD, int))(**(_DWORD **)(v7 + 4) + 8))(*(_DWORD *)(v7 + 4), a5);
          }
        }
        else
        {
          v8 = sub_420250((int *)&v12);
          result = (*(int (__thiscall **)(_DWORD, int))(**(_DWORD **)(v8 + 4) + 8))(*(_DWORD *)(v8 + 4), a5);
        }
      }
    }
    else
    {
      CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bw");
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041EF60) --------------------------------------------------------
int __thiscall CInitItem::Enchant(void *this, int a2, int a3)
{
  void *v3; // ST0C_4@1
  void *v4; // eax@1
  int result; // eax@2
  int v6; // eax@3
  char v7; // [sp+8h] [bp-8h]@1
  char v8; // [sp+Ch] [bp-4h]@1

  v3 = this;
  sub_40F070((int)((char *)this + 120), &v8);
  v4 = sub_430C20((int)((char *)v3 + 120), &v7);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    result = 0;
  }
  else
  {
    v6 = sub_420250((int *)&v8);
    result = (*(int (__thiscall **)(_DWORD, int, int))(**(_DWORD **)(v6 + 4) + 12))(*(_DWORD *)(v6 + 4), a2, a3);
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041EFD0) --------------------------------------------------------
int __cdecl CInitItem::GetSpecValue(int a1, int a2, char a3)
{
  void *v3; // eax@1
  char v5; // [sp+8h] [bp-10h]@1
  int v6; // [sp+Ch] [bp-Ch]@1
  char *v7; // [sp+10h] [bp-8h]@1
  char v8; // [sp+14h] [bp-4h]@1

  v7 = &a3;
  v6 = 0;
  sub_44AE20(a1 + 120, (int)&v8, (int)&a2);
  v3 = sub_430C20(a1 + 120, &v5);
  if ( !(unsigned __int8)unknown_libname_8(v3) )
  {
    if ( a2 == 18 )
    {
      v7 += 4;
      **((_DWORD **)v7 - 1) = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 4);
      v7 += 4;
      **((_DWORD **)v7 - 1) = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 8);
    }
    else
    {
      if ( a2 != 19 )
        return v6;
      v7 += 4;
      **((_DWORD **)v7 - 1) = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 4);
      v7 += 4;
      **((_DWORD **)v7 - 1) = *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 8);
    }
    v6 = 1;
  }
  return v6;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0041F0D0) --------------------------------------------------------
int __thiscall CPrefix::CPrefix(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B5B58;
  sub_41FFC0((void *)(v2 + 44));
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  return v2;
}
// 4B5B58: using guessed type int (__stdcall *off_4B5B58)(int);

//----- (0041F120) --------------------------------------------------------
int __userpurge CPrefix::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CPrefix::_CPrefix(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0041F150) --------------------------------------------------------
int __usercall CPrefix::_CPrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v5; // eax@3
  int v7; // [sp+0h] [bp-14h]@1
  char v8; // [sp+8h] [bp-Ch]@2
  char v9; // [sp+Ch] [bp-8h]@3
  char v10; // [sp+10h] [bp-4h]@1

  v7 = a1;
  *(_DWORD *)a1 = &off_4B5B58;
  sub_40F070(a1 + 44, &v10);
  while ( 1 )
  {
    v4 = sub_430C20(v7 + 44, &v8);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v5 = sub_420250((int *)&v10);
    sub_401020(*(_DWORD *)(v5 + 4));
    sub_446090((int *)&v10, (int)&v9, 0);
  }
  sub_41D5C0(v7 + 44);
  return CBase::_CBase(v7, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4B5B58: using guessed type int (__stdcall *off_4B5B58)(int);

//----- (0041F1E0) --------------------------------------------------------
int __cdecl CPrefix::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0x38u);
  if ( v2 )
    v1 = CPrefix::CPrefix(v2);
  else
    v1 = 0;
  return v1;
}

//----- (0041F220) --------------------------------------------------------
signed int __thiscall CPrefix::Set(void *this, int a2, char a3)
{
  void *v3; // eax@2
  void *v4; // eax@3
  void *v5; // eax@4
  void *v6; // eax@6
  int v7; // eax@6
  void *v8; // eax@10
  int v9; // eax@10
  void *v10; // eax@14
  int v11; // eax@14
  void *v12; // eax@18
  int v13; // eax@18
  void *v14; // eax@22
  int v15; // eax@22
  void *v16; // eax@26
  int v17; // eax@26
  void *v18; // eax@30
  int v19; // eax@30
  void *v20; // eax@34
  int v21; // eax@34
  void *v22; // eax@38
  int v23; // eax@38
  void *v24; // eax@41
  void *v25; // eax@41
  void *v26; // eax@45
  void *v27; // eax@45
  void *v28; // eax@49
  void *v29; // eax@54
  int v30; // eax@54
  void *v31; // eax@58
  int v32; // eax@58
  void *v33; // eax@62
  int v34; // eax@62
  void *v35; // eax@66
  int v36; // eax@66
  void *v37; // eax@70
  int v38; // eax@70
  void *v39; // eax@74
  int v40; // eax@74
  signed int result; // eax@77
  int v42; // eax@80
  int v43; // [sp-4h] [bp-124h]@77
  int v44; // [sp+0h] [bp-120h]@74
  int v45; // [sp+4h] [bp-11Ch]@70
  int v46; // [sp+8h] [bp-118h]@66
  int v47; // [sp+Ch] [bp-114h]@62
  int v48; // [sp+10h] [bp-110h]@58
  int v49; // [sp+14h] [bp-10Ch]@54
  int v50; // [sp+18h] [bp-108h]@50
  int v51; // [sp+1Ch] [bp-104h]@46
  int v52; // [sp+20h] [bp-100h]@42
  int v53; // [sp+24h] [bp-FCh]@38
  int v54; // [sp+28h] [bp-F8h]@34
  int v55; // [sp+2Ch] [bp-F4h]@30
  int v56; // [sp+30h] [bp-F0h]@26
  int v57; // [sp+34h] [bp-ECh]@22
  int v58; // [sp+38h] [bp-E8h]@18
  int v59; // [sp+3Ch] [bp-E4h]@14
  int v60; // [sp+40h] [bp-E0h]@10
  int v61; // [sp+44h] [bp-DCh]@6
  int v62; // [sp+48h] [bp-D8h]@1
  void *v63; // [sp+4Ch] [bp-D4h]@1
  char v64; // [sp+50h] [bp-D0h]@80
  char v65; // [sp+5Ch] [bp-C4h]@74
  int v66; // [sp+60h] [bp-C0h]@73
  char v67; // [sp+64h] [bp-BCh]@70
  int v68; // [sp+68h] [bp-B8h]@69
  char v69; // [sp+6Ch] [bp-B4h]@66
  int v70; // [sp+70h] [bp-B0h]@65
  char v71; // [sp+74h] [bp-ACh]@62
  int v72; // [sp+78h] [bp-A8h]@61
  char v73; // [sp+7Ch] [bp-A4h]@58
  int v74; // [sp+80h] [bp-A0h]@57
  char v75; // [sp+84h] [bp-9Ch]@54
  int v76; // [sp+88h] [bp-98h]@53
  int v77; // [sp+8Ch] [bp-94h]@49
  char v78; // [sp+90h] [bp-90h]@49
  int v79; // [sp+94h] [bp-8Ch]@45
  char v80; // [sp+98h] [bp-88h]@45
  char v81; // [sp+9Ch] [bp-84h]@45
  int v82; // [sp+A0h] [bp-80h]@41
  char v83; // [sp+A4h] [bp-7Ch]@41
  char v84; // [sp+A8h] [bp-78h]@41
  char v85; // [sp+ACh] [bp-74h]@38
  int v86; // [sp+B0h] [bp-70h]@37
  char v87; // [sp+B4h] [bp-6Ch]@34
  int v88; // [sp+B8h] [bp-68h]@33
  char v89; // [sp+BCh] [bp-64h]@30
  int v90; // [sp+C0h] [bp-60h]@29
  char v91; // [sp+C4h] [bp-5Ch]@26
  int v92; // [sp+C8h] [bp-58h]@25
  char v93; // [sp+CCh] [bp-54h]@22
  int v94; // [sp+D0h] [bp-50h]@21
  char v95; // [sp+D4h] [bp-4Ch]@18
  int v96; // [sp+D8h] [bp-48h]@17
  char v97; // [sp+DCh] [bp-44h]@14
  int v98; // [sp+E0h] [bp-40h]@13
  char v99; // [sp+E4h] [bp-3Ch]@10
  int v100; // [sp+E8h] [bp-38h]@9
  char v101; // [sp+ECh] [bp-34h]@6
  int v102; // [sp+F0h] [bp-30h]@5
  char v103; // [sp+F4h] [bp-2Ch]@4
  char v104; // [sp+F8h] [bp-28h]@3
  char v105; // [sp+FCh] [bp-24h]@2
  int v106; // [sp+100h] [bp-20h]@49
  int v107; // [sp+104h] [bp-1Ch]@45
  int v108; // [sp+108h] [bp-18h]@45
  int v109; // [sp+10Ch] [bp-14h]@41
  int v110; // [sp+110h] [bp-10h]@41
  char v111; // [sp+114h] [bp-Ch]@80
  char v112; // [sp+118h] [bp-8h]@80
  int v113; // [sp+11Ch] [bp-4h]@1

  v63 = this;
  v113 = 0;
  v62 = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v3 = sub_4023A0(&a3, &v105);
      *((_DWORD *)v63 + 8) = sub_40C8D0(v3);
      goto LABEL_78;
    case 7:
      v4 = sub_4023A0(&a3, &v104);
      *((_DWORD *)v63 + 9) = sub_40C8D0(v4);
      goto LABEL_78;
    case 58:
      v5 = sub_4023A0(&a3, &v103);
      *((_DWORD *)v63 + 10) = sub_40C8D0(v5);
      goto LABEL_78;
    case 9:
      v102 = (int)sub_401000(0x14u);
      if ( v102 )
      {
        v6 = sub_4023A0(&a3, &v101);
        v7 = sub_40C8D0(v6);
        v61 = sub_41EAA0(v102, 0, v7);
      }
      else
      {
        v61 = 0;
      }
      v113 = v61;
      goto LABEL_78;
    case 10:
      v100 = (int)sub_401000(0x14u);
      if ( v100 )
      {
        v8 = sub_4023A0(&a3, &v99);
        v9 = sub_40C8D0(v8);
        v60 = sub_41EAA0(v100, 1, v9);
      }
      else
      {
        v60 = 0;
      }
      v113 = v60;
      goto LABEL_78;
    case 11:
      v98 = (int)sub_401000(0x14u);
      if ( v98 )
      {
        v10 = sub_4023A0(&a3, &v97);
        v11 = sub_40C8D0(v10);
        v59 = sub_41EAA0(v98, 2, v11);
      }
      else
      {
        v59 = 0;
      }
      v113 = v59;
      goto LABEL_78;
    case 12:
      v96 = (int)sub_401000(0x14u);
      if ( v96 )
      {
        v12 = sub_4023A0(&a3, &v95);
        v13 = sub_40C8D0(v12);
        v58 = sub_41EAA0(v96, 3, v13);
      }
      else
      {
        v58 = 0;
      }
      v113 = v58;
      goto LABEL_78;
    case 13:
      v94 = (int)sub_401000(0x14u);
      if ( v94 )
      {
        v14 = sub_4023A0(&a3, &v93);
        v15 = sub_40C8D0(v14);
        v57 = sub_41EAA0(v94, 4, v15);
      }
      else
      {
        v57 = 0;
      }
      v113 = v57;
      goto LABEL_78;
    case 14:
      v92 = (int)sub_401000(0x14u);
      if ( v92 )
      {
        v16 = sub_4023A0(&a3, &v91);
        v17 = sub_40C8D0(v16);
        v56 = sub_41EAA0(v92, 5, v17);
      }
      else
      {
        v56 = 0;
      }
      v113 = v56;
      goto LABEL_78;
    case 15:
      v90 = (int)sub_401000(0x14u);
      if ( v90 )
      {
        v18 = sub_4023A0(&a3, &v89);
        v19 = sub_40C8D0(v18);
        v55 = sub_41EAA0(v90, 6, v19);
      }
      else
      {
        v55 = 0;
      }
      v113 = v55;
      goto LABEL_78;
    case 16:
      v88 = (int)sub_401000(0x14u);
      if ( v88 )
      {
        v20 = sub_4023A0(&a3, &v87);
        v21 = sub_40C8D0(v20);
        v54 = sub_41EAA0(v88, 9, v21);
      }
      else
      {
        v54 = 0;
      }
      v113 = v54;
      goto LABEL_78;
    case 17:
      v86 = (int)sub_401000(0x14u);
      if ( v86 )
      {
        v22 = sub_4023A0(&a3, &v85);
        v23 = sub_40C8D0(v22);
        v53 = sub_41EAA0(v86, 10, v23);
      }
      else
      {
        v53 = 0;
      }
      v113 = v53;
      goto LABEL_78;
    case 18:
      v24 = sub_4023A0(&a3, &v84);
      v109 = sub_40C8D0(v24);
      v25 = sub_4023A0(&a3, &v83);
      v110 = sub_40C8D0(v25);
      v82 = (int)sub_401000(0x14u);
      if ( v82 )
        v52 = CSpecPrty::CSpecPrty(v82, 27, v109, v110);
      else
        v52 = 0;
      v113 = v52;
      goto LABEL_78;
    case 19:
      v26 = sub_4023A0(&a3, &v81);
      v107 = sub_40C8D0(v26);
      v27 = sub_4023A0(&a3, &v80);
      v108 = sub_40C8D0(v27);
      v79 = (int)sub_401000(0x14u);
      if ( v79 )
        v51 = CSpecPrty::CSpecPrty(v79, 28, v107, v108);
      else
        v51 = 0;
      v113 = v51;
      goto LABEL_78;
    case 20:
      v28 = sub_4023A0(&a3, &v78);
      v106 = sub_40C8D0(v28);
      v77 = (int)sub_401000(0x14u);
      if ( v77 )
        v50 = CSpecPrty::CSpecPrty(v77, 15, v106, v106);
      else
        v50 = 0;
      v113 = v50;
      goto LABEL_78;
    case 21:
      v76 = (int)sub_401000(0x14u);
      if ( v76 )
      {
        v29 = sub_4023A0(&a3, &v75);
        v30 = sub_40C8D0(v29);
        v49 = sub_41EAA0(v76, 16, v30);
      }
      else
      {
        v49 = 0;
      }
      v113 = v49;
      goto LABEL_78;
    case 25:
      v74 = (int)sub_401000(0x14u);
      if ( v74 )
      {
        v31 = sub_4023A0(&a3, &v73);
        v32 = sub_40C8D0(v31);
        v48 = sub_41EAA0(v74, 18, v32);
      }
      else
      {
        v48 = 0;
      }
      v113 = v48;
      goto LABEL_78;
    case 26:
      v72 = (int)sub_401000(0x14u);
      if ( v72 )
      {
        v33 = sub_4023A0(&a3, &v71);
        v34 = sub_40C8D0(v33);
        v47 = sub_41EAA0(v72, 19, v34);
      }
      else
      {
        v47 = 0;
      }
      v113 = v47;
      goto LABEL_78;
    case 27:
      v70 = (int)sub_401000(0x14u);
      if ( v70 )
      {
        v35 = sub_4023A0(&a3, &v69);
        v36 = sub_40C8D0(v35);
        v46 = sub_41EAA0(v70, 20, v36);
      }
      else
      {
        v46 = 0;
      }
      v113 = v46;
      goto LABEL_78;
    case 28:
      v68 = (int)sub_401000(0x14u);
      if ( v68 )
      {
        v37 = sub_4023A0(&a3, &v67);
        v38 = sub_40C8D0(v37);
        v45 = sub_41EAA0(v68, 21, v38);
      }
      else
      {
        v45 = 0;
      }
      v113 = v45;
      goto LABEL_78;
    case 29:
      v66 = (int)sub_401000(0x14u);
      if ( v66 )
      {
        v39 = sub_4023A0(&a3, &v65);
        v40 = sub_40C8D0(v39);
        v44 = sub_41EAA0(v66, 22, v40);
      }
      else
      {
        v44 = 0;
      }
      v113 = v44;
LABEL_78:
      if ( v113 )
      {
        v42 = sub_420990((int)&v64, (int)&a2, (int)&v113);
        sub_445DF0((int)((char *)v63 + 44), (int)&v111, v42);
        if ( v112 )
        {
          result = 1;
        }
        else
        {
          sub_4328C0("CPrefix::Set() Duplicate Specialty. (Symbol:%d)", a2);
          result = 0;
        }
      }
      else
      {
        result = 1;
      }
      break;
    default:
      v43 = a2 - 2;
      sub_402340(&v43, (int)&a3);
      result = CBase::Set(v63, a2, v43);
      break;
  }
  return result;
}

//----- (0041FA40) --------------------------------------------------------
signed int __thiscall CPrefix::OnLoad(int this)
{
  return CItem::InsertPrefix(this);
}

//----- (0041FA60) --------------------------------------------------------
char __thiscall CPrefix::ApplySpec(void *this, int a2)
{
  int v2; // eax@2
  void *v3; // eax@2
  int v4; // eax@3
  void *v6; // [sp+4h] [bp-10h]@1
  char v7; // [sp+8h] [bp-Ch]@2
  char v8; // [sp+Ch] [bp-8h]@3
  char v9; // [sp+10h] [bp-4h]@1

  v6 = this;
  sub_40F070((int)((char *)this + 44), &v9);
  while ( 1 )
  {
    v3 = sub_430C20((int)((char *)v6 + 44), &v7);
    v2 = (unsigned __int8)sub_47D070(v3);
    if ( !(_BYTE)v2 )
      break;
    v4 = sub_420250((int *)&v9);
    (***(void (__thiscall ****)(_DWORD, _DWORD))(v4 + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090((int *)&v9, (int)&v8, 0);
  }
  return v2;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041FAD0) --------------------------------------------------------
char __thiscall CPrefix::FreeSpec(void *this, int a2)
{
  int v2; // eax@2
  void *v3; // eax@2
  int v4; // eax@3
  void *v6; // [sp+4h] [bp-10h]@1
  char v7; // [sp+8h] [bp-Ch]@2
  char v8; // [sp+Ch] [bp-8h]@3
  char v9; // [sp+10h] [bp-4h]@1

  v6 = this;
  sub_40F070((int)((char *)this + 44), &v9);
  while ( 1 )
  {
    v3 = sub_430C20((int)((char *)v6 + 44), &v7);
    v2 = (unsigned __int8)sub_47D070(v3);
    if ( !(_BYTE)v2 )
      break;
    v4 = sub_420250((int *)&v9);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v4 + 4) + 4))(*(_DWORD *)(v4 + 4), a2);
    sub_446090((int *)&v9, (int)&v8, 0);
  }
  return v2;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041FB40) --------------------------------------------------------
int __thiscall CSpecPrty::ApplySpec(int this, int a2)
{
  int result; // eax@2

  if ( *(_DWORD *)(this + 12) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               *(_DWORD *)(this + 16),
               1,
               *(_DWORD *)(this + 4),
               *(_DWORD *)(this + 8));
  else
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
               a2,
               *(_DWORD *)(this + 16),
               1,
               *(_DWORD *)(this + 4),
               *(_DWORD *)(this + 8));
  return result;
}

//----- (0041FBB0) --------------------------------------------------------
int __thiscall CSpecPrty::FreeSpec(int this, int a2)
{
  int result; // eax@2

  if ( *(_DWORD *)(this + 12) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               *(_DWORD *)(this + 16),
               0,
               *(_DWORD *)(this + 4),
               *(_DWORD *)(this + 8));
  else
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(
               a2,
               *(_DWORD *)(this + 16),
               0,
               *(_DWORD *)(this + 4),
               *(_DWORD *)(this + 8));
  return result;
}

//----- (0041FC20) --------------------------------------------------------
LONG __thiscall CSpecGState::ApplySpec(int this, int a2)
{
  return CChar::AddGState(a2, *(_DWORD *)(this + 4));
}

//----- (0041FC40) --------------------------------------------------------
LONG __thiscall CSpecGState::FreeSpec(int this, int a2)
{
  return CChar::SubGState(a2, *(_DWORD *)(this + 4));
}

//----- (0041FC60) --------------------------------------------------------
signed int __userpurge CSpecTeleport::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-1Ch]@1
  int v7; // [sp+4h] [bp-18h]@6
  int v8; // [sp+Ch] [bp-10h]@12
  int v9; // [sp+10h] [bp-Ch]@12
  int v10; // [sp+14h] [bp-8h]@12
  int v11; // [sp+18h] [bp-4h]@12

  v6 = a1;
  if ( !CChar::IsNormal(a5) || CChar::IsGState(a5, 256) )
    return 0;
  if ( !*(_DWORD *)(v6 + 4) )
  {
    if ( *(_DWORD *)(a5 + 1016) )
    {
      v7 = CParty::FindParty(a2, a3, a4, *(_DWORD *)(a5 + 1016));
      if ( v7 )
      {
        if ( CParty::ExistOnPK(v7, a2, a3, a4) )
        {
          CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"b");
          return 0;
        }
        if ( CParty::Teleport(v7, a2, a3, a4, a5, *(_DWORD *)(v6 + 8)) )
        {
          CIOObject::Release(v7, a2, a3, a4);
          return 1;
        }
        CIOObject::Release(v7, a2, a3, a4);
      }
    }
  }
  v11 = dword_4D7900[4 * *(_DWORD *)(v6 + 8)];
  v10 = (int)((char *)&unk_4D7904 + 16 * *(_DWORD *)(v6 + 8));
  v8 = sub_406E10(*(_DWORD *)v10 - 64, *(_DWORD *)v10 + 64);
  v9 = sub_406E10(*(_DWORD *)(v10 + 4) - 64, *(_DWORD *)(v10 + 4) + 64);
  CPlayer::Teleport(a5, a2, a3, a4, v11, (int)&v8, 0, 0);
  return 1;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D7900: using guessed type int dword_4D7900[];

//----- (0041FDA0) --------------------------------------------------------
signed int __usercall CParty::ExistOnPK<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v6; // [sp+0h] [bp-14h]@1
  char v7; // [sp+4h] [bp-10h]@2
  char v8; // [sp+8h] [bp-Ch]@5
  int v9; // [sp+Ch] [bp-8h]@3
  char v10; // [sp+10h] [bp-4h]@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  sub_430C20(v6 + 32, &v10);
  while ( 1 )
  {
    v4 = sub_445B40(v6 + 32, &v7);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v9 = *(_DWORD *)sub_420010();
    if ( CChar::IsGState(v9, 256) )
    {
      CIOCriticalSection::Leave(v6 + 48, a2, a3, a4);
      return 1;
    }
    sub_420030(&v10, (int)&v8, 0);
  }
  CIOCriticalSection::Leave(v6 + 48, a2, a3, a4);
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0041FE40) --------------------------------------------------------
signed int __thiscall CSpecRefresh::Use(void *this, int a2)
{
  signed int result; // eax@2
  void *v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( CChar::IsNormal(a2) )
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
      a2,
      *((_DWORD *)v3 + 1),
      1,
      *((_DWORD *)v3 + 2));
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0041FE90) --------------------------------------------------------
int __thiscall CSpecCharming::Enchant(int this, int a2, int a3)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 176))(a3, a2, *(_DWORD *)(this + 4));
}

//----- (0041FEC0) --------------------------------------------------------
int __stdcall CSpecRepair::Enchant(int a1, int a2)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 184))(a2, a1);
}

//----- (0041FEE0) --------------------------------------------------------
int __thiscall CSpecChangePrefix::Enchant(int this, int a2, int a3)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 188))(
           a3,
           a2,
           *(_DWORD *)(this + 4),
           this + 12,
           this + 20);
}

//----- (0041FF20) --------------------------------------------------------
int __stdcall CSpecProtect::Enchant(int a1, int a2)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 192))(a2, a1);
}

//----- (0041FF40) --------------------------------------------------------
int __thiscall CSpecBuff::Use(void *this, int a2)
{
  int result; // eax@2
  void *v3; // ST10_4@3
  int v4; // [sp+0h] [bp-8h]@1

  v4 = (int)this;
  if ( CChar::IsNormal(a2) )
  {
    v3 = CBuff::CreateBuff(*(_DWORD *)(v4 + 4), *(_DWORD *)(v4 + 12), *(_DWORD *)(v4 + 16), v4);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v3);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0041FFA0) --------------------------------------------------------
signed int __userpurge CSpecRevival::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  return CPlayer::RevivalItem(a5, a2, a3, a4, *(_DWORD *)(a1 + 4));
}

//----- (0041FFC0) --------------------------------------------------------
void *__thiscall sub_41FFC0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0041FFF0) --------------------------------------------------------
int __thiscall sub_41FFF0(int this)
{
  return sub_4206B0(this);
}

//----- (00420010) --------------------------------------------------------
int __cdecl sub_420010()
{
  return unknown_libname_7();
}

//----- (00420030) --------------------------------------------------------
int __thiscall sub_420030(void *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *(_DWORD *)this;
  sub_420760(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (00420060) --------------------------------------------------------
int __thiscall sub_420060(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110(v21) )
  {
    v22 = v21;
    v3 = *(_DWORD *)sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_420220(*(_DWORD *)v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_420270(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_418880((int *)&v20);
  }
  v8 = *(_DWORD *)sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_420220(*(_DWORD *)v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_420270(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00420220) --------------------------------------------------------
char __stdcall sub_420220(int a1, int a2)
{
  return sub_497700(a1, a2) < 0;
}

//----- (00420250) --------------------------------------------------------
int __thiscall sub_420250(int *this)
{
  return sub_44F8B0(this);
}

//----- (00420270) --------------------------------------------------------
void *__thiscall sub_420270(int this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_47EA90() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_4319C0(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)sub_446F90(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)sub_446F90(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_44CBF0((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)sub_446F90(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)sub_446F90(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_44CAC0((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)sub_446F90(*(_DWORD *)v20) = 1;
        *(_BYTE *)sub_446F90(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)sub_446F90(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)sub_446F90(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_44CAC0((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)sub_446F90(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)sub_446F90(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_44CBF0((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)sub_446F90(*(_DWORD *)v34) = 1;
        *(_BYTE *)sub_446F90(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)sub_446F90(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)sub_446F90(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (004206B0) --------------------------------------------------------
int __thiscall sub_4206B0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_420780(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00420760) --------------------------------------------------------
void *__thiscall sub_420760(void *this)
{
  *(_DWORD *)this += 4;
  return this;
}

//----- (00420780) --------------------------------------------------------
void *__thiscall sub_420780(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_420820(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00420820) --------------------------------------------------------
int __thiscall sub_420820(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_420880(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 420880: using guessed type _DWORD __stdcall sub_420880(_DWORD);

//----- (00420880) --------------------------------------------------------
int __stdcall sub_420880(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_420880(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 420880: using guessed type _DWORD __stdcall sub_420880(_DWORD);

//----- (00420900) --------------------------------------------------------
void *__cdecl sub_420900(int a1)
{
  return sub_401000(24 * a1);
}

//----- (00420920) --------------------------------------------------------
void *__thiscall sub_420920(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v4 = 0;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00420950) --------------------------------------------------------
void *__thiscall sub_420950(void *this, int a2, char a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(&a3);
  sub_44FBC0(v4, a2, v5);
  std___Init_locks__operator_(&a3);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00420990) --------------------------------------------------------
int __thiscall sub_420990(int this, int a2, int a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  *(_DWORD *)(this + 4) = *(_DWORD *)a3;
  return this;
}

//----- (004209C0) --------------------------------------------------------
int __thiscall sub_4209C0(int this)
{
  return sub_4209E0(this);
}

//----- (004209E0) --------------------------------------------------------
int __thiscall sub_4209E0(int this)
{
  return sub_420A00(this);
}

//----- (00420A00) --------------------------------------------------------
int __thiscall sub_420A00(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_420AB0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00420AB0) --------------------------------------------------------
void *__thiscall sub_420AB0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_420B50(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00420B50) --------------------------------------------------------
int __thiscall sub_420B50(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_420BB0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 420BB0: using guessed type _DWORD __stdcall sub_420BB0(_DWORD);

//----- (00420BB0) --------------------------------------------------------
int __stdcall sub_420BB0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_420BB0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 420BB0: using guessed type _DWORD __stdcall sub_420BB0(_DWORD);

//----- (00420C30) --------------------------------------------------------
int __thiscall CInitMap::CInitMap(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B5D58;
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = -1;
  *(_DWORD *)(v2 + 44) = -1;
  memset((void *)(v2 + 48), 0, 0x81u);
  return v2;
}
// 4B5D58: using guessed type int (__stdcall *off_4B5D58)(int);

//----- (00420C90) --------------------------------------------------------
int __userpurge CInitMap::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CInitMap::_CInitMap(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00420CC0) --------------------------------------------------------
int __usercall CInitMap::_CInitMap<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B5D58;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B5D58: using guessed type int (__stdcall *off_4B5D58)(int);

//----- (00420CE0) --------------------------------------------------------
signed int __thiscall CInitMap::Set(void *this, int a2, char a3)
{
  void *v3; // eax@2
  void *v4; // eax@3
  void *v5; // eax@4
  void *v6; // eax@4
  int v7; // ST0C_4@4
  int v8; // eax@4
  signed int result; // eax@5
  int v10; // [sp-4h] [bp-20h]@4
  int v11; // [sp+0h] [bp-1Ch]@1
  void *v12; // [sp+4h] [bp-18h]@1
  char v13; // [sp+Ch] [bp-10h]@4
  char v14; // [sp+10h] [bp-Ch]@4
  char v15; // [sp+14h] [bp-8h]@3
  char v16; // [sp+18h] [bp-4h]@2

  v12 = this;
  v11 = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v3 = sub_4023A0(&a3, &v16);
      *((_DWORD *)v12 + 8) = sub_40C8D0(v3);
      goto LABEL_6;
    case 30:
      v4 = sub_4023A0(&a3, &v15);
      *((_DWORD *)v12 + 9) = sub_40C8D0(v4);
      goto LABEL_6;
    case 31:
      v5 = sub_4023A0(&a3, &v14);
      *((_DWORD *)v12 + 10) = sub_40C8D0(v5);
      v6 = sub_4023A0(&a3, &v13);
      *((_DWORD *)v12 + 11) = sub_40C8D0(v6);
      v10 = *((_DWORD *)v12 + 11);
      v7 = *((_DWORD *)v12 + 10);
      v8 = sub_4012D0(&unk_4E1194);
      sprintf((char *)v12 + 48, "%s\\n_%03d_%03d.ksm", v8, v7, v10);
      goto LABEL_6;
    case 32:
LABEL_6:
      result = 1;
      break;
    default:
      v10 = a2 - 2;
      sub_402340(&v10, (int)&a3);
      result = CBase::Set(v12, a2, v10);
      break;
  }
  return result;
}

//----- (00420E10) --------------------------------------------------------
signed int __usercall CInitMap::OnLoad<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return sub_490EA0(a2, a3, a4, a1);
}

//----- (00420E30) --------------------------------------------------------
signed int __usercall sub_420E30<eax>(DWORD a1<eax>, DWORD a2<edx>, DWORD a3<ecx>, DWORD a4<ebx>, DWORD a5<edi>, DWORD a6<esi>, void *lpContext)
{
  int v7; // eax@1
  void *v8; // ST08_4@1
  HANDLE v9; // eax@1
  int v10; // ST300_4@2
  signed int v12; // [sp+10h] [bp-2DCh]@2
  int v13; // [sp+A4h] [bp-248h]@1
  int v14; // [sp+A8h] [bp-244h]@1
  int v15; // [sp+ACh] [bp-240h]@1
  DWORD v16; // [sp+BCh] [bp-230h]@1
  DWORD v17; // [sp+C0h] [bp-22Ch]@1
  DWORD v18; // [sp+C4h] [bp-228h]@1
  int v19; // [sp+D0h] [bp-21Ch]@1
  int v20; // [sp+DCh] [bp-210h]@1
  void *v21; // [sp+2F0h] [bp+4h]@2

  v18 = a1;
  v17 = a3;
  v16 = a2;
  v7 = (unsigned __int16)__GS__;
  LOWORD(v7) = __FS__;
  v13 = v7;
  LOWORD(v7) = __ES__;
  v14 = v7;
  LOWORD(v7) = __DS__;
  v15 = v7;
  LOWORD(v7) = __CS__;
  v19 = v7;
  LOWORD(v7) = __SS__;
  v20 = v7;
  memset(lpContext, 0, 0x2CCu);
  *(_DWORD *)lpContext = 65599;
  v8 = lpContext;
  v9 = GetCurrentThread();
  if ( GetThreadContext(v9, (LPCONTEXT)v8) )
  {
    *((_DWORD *)lpContext + 44) = v18;
    *((_DWORD *)lpContext + 41) = a4;
    *((_DWORD *)lpContext + 43) = v17;
    *((_DWORD *)lpContext + 42) = v16;
    *((_DWORD *)lpContext + 39) = a5;
    *((_DWORD *)lpContext + 40) = a6;
    *((_DWORD *)lpContext + 35) = (unsigned __int16)__GS__;
    *((_DWORD *)lpContext + 36) = v13;
    *((_DWORD *)lpContext + 37) = v14;
    *((_DWORD *)lpContext + 38) = v15;
    *((_DWORD *)lpContext + 47) = v19;
    *((_DWORD *)lpContext + 50) = v20;
    *((_DWORD *)lpContext + 45) = v10;
    *((_DWORD *)lpContext + 46) = v21;
    v12 = 1;
  }
  else
  {
    v12 = 0;
  }
  return v12;
}

//----- (00420FF0) --------------------------------------------------------
void *__thiscall CIOException::CInit::CInit(void *this)
{
  void *v2; // ST0C_4@1
  CHAR *v3; // eax@1
  CHAR *v4; // ST10_4@1

  v2 = this;
  InitializeCriticalSection(&CriticalSection);
  GetModuleFileNameA(0, FileName, 0x104u);
  v3 = (CHAR *)sub_4210A0(FileName);
  lstrcpyA(v3, "Exception.txt");
  GetModuleFileNameA(0, byte_4E0B80, 0x104u);
  v4 = (CHAR *)sub_4210A0(byte_4E0B80);
  lstrcpyA(v4, "Exception.dmp");
  dword_4E0D8C = time(0);
  lpTopLevelExceptionFilter = SetUnhandledExceptionFilter((LPTOP_LEVEL_EXCEPTION_FILTER)TopLevelExceptionFilter);
  sub_4A0647((int)sub_4210E0);
  return v2;
}

//----- (004210A0) --------------------------------------------------------
const char *__cdecl sub_4210A0(const char *a1)
{
  char *v2; // [sp+0h] [bp-4h]@1
  const char *v3; // [sp+0h] [bp-4h]@2

  v2 = strrchr(a1, 92);
  if ( v2 )
    v3 = v2 + 1;
  else
    v3 = a1;
  return v3;
}

//----- (004210E0) --------------------------------------------------------
void __usercall sub_4210E0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  char v3; // ST04_1@1
  int v4; // eax@2

  sub_422B30("Buffer Overrun\n", v3);
  if ( dword_4D5B7C )
  {
    CIOException::Lock();
    sub_4218D0(v4, a1, a2, a3, 0);
    sub_421140();
    CIOException::Unlock();
  }
  ExitProcess(1u);
}

//----- (00421120) --------------------------------------------------------
void __cdecl CIOException::Lock()
{
  EnterCriticalSection(&CriticalSection);
}

//----- (00421130) --------------------------------------------------------
void __cdecl CIOException::Unlock()
{
  LeaveCriticalSection(&CriticalSection);
}

//----- (00421140) --------------------------------------------------------
BOOL __cdecl sub_421140()
{
  time_t v1; // [sp+0h] [bp-118h]@3
  LPSTR v2; // [sp+4h] [bp-114h]@3
  const CHAR NewFileName; // [sp+8h] [bp-110h]@3
  int v4; // [sp+110h] [bp-8h]@1
  struct tm *v5; // [sp+114h] [bp-4h]@3

  v4 = dword_4D9830;
  if ( dword_4E0DA8 )
    sub_4212B0(dword_4E0DA8, dword_4E0DAC, (char *)dword_4E0DB0, FileName);
  strcpy((char *)&NewFileName, FileName);
  v2 = (LPSTR)sub_4210A0(&NewFileName);
  time(&v1);
  v5 = localtime(&v1);
  wsprintfA(
    v2,
    "Exception\\%02d%02d%02d.%02d%02d%02d.dbg.txt",
    v5->tm_year % 100,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    v5->tm_min,
    v5->tm_sec);
  MoveFileExA(FileName, &NewFileName, 1u);
  wsprintfA(
    v2,
    "Exception\\%02d%02d%02d.%02d%02d%02d.dbg.dmp",
    v5->tm_year % 100,
    v5->tm_mon + 1,
    v5->tm_mday,
    v5->tm_hour,
    v5->tm_min,
    v5->tm_sec);
  MoveFileExA(byte_4E0B80, &NewFileName, 1u);
  DeleteFileA(FileName);
  return DeleteFileA(byte_4E0B80);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004212B0) --------------------------------------------------------
int __cdecl sub_4212B0(const char *cp, int a2, char *a3, LPCSTR lpFileName)
{
  int v5; // eax@17
  int v6; // eax@19
  int v7; // eax@24
  int v8; // eax@27
  int v9; // eax@29
  int v10; // eax@31
  int v11; // eax@35
  int v12; // eax@37
  int namelen; // [sp+0h] [bp-9D8h]@29
  size_t v14; // [sp+4h] [bp-9D4h]@24
  struct hostent *v15; // [sp+8h] [bp-9D0h]@12
  char *i; // [sp+Ch] [bp-9CCh]@17
  char optval[4]; // [sp+10h] [bp-9C8h]@5
  struct sockaddr name; // [sp+14h] [bp-9C4h]@9
  int v19; // [sp+24h] [bp-9B4h]@5
  SOCKET s; // [sp+28h] [bp-9B0h]@3
  int v21; // [sp+2Ch] [bp-9ACh]@1
  char buf; // [sp+30h] [bp-9A8h]@17
  struct WSAData WSAData; // [sp+830h] [bp-1A8h]@1
  char v24; // [sp+9C4h] [bp-14h]@29
  unsigned __int8 v25; // [sp+9C8h] [bp-10h]@31
  unsigned __int8 v26; // [sp+9C9h] [bp-Fh]@31
  unsigned __int8 v27; // [sp+9CAh] [bp-Eh]@31
  unsigned __int8 v28; // [sp+9CBh] [bp-Dh]@31
  int v29; // [sp+9D4h] [bp-4h]@1

  v29 = dword_4D9830;
  v21 = 0;
  if ( WSAStartup(0x202u, &WSAData) )
    return 0;
  s = socket(2, 1, 0);
  if ( s == -1 )
  {
    WSACleanup();
    return 0;
  }
  *(_DWORD *)optval = 5000;
  v19 = setsockopt(s, 65535, 4102, optval, 4);
  if ( v19 != -1 )
  {
    *(_DWORD *)optval = 5000;
    v19 = setsockopt(s, 65535, 4101, optval, 4);
    if ( v19 != -1 )
    {
      name.sa_family = 2;
      *(_DWORD *)&name.sa_data[2] = 0;
      *(_WORD *)&name.sa_data[0] = 0;
      if ( bind(s, &name, 16) != -1 )
      {
        name.sa_family = 2;
        *(_DWORD *)&name.sa_data[2] = inet_addr(cp);
        if ( *(_DWORD *)&name.sa_data[2] == -1 )
        {
          v15 = gethostbyname(cp);
          if ( !v15 )
            goto LABEL_40;
          memcpy(&name.sa_data[2], *(const void **)v15->h_addr_list, v15->h_length);
        }
        *(_WORD *)&name.sa_data[0] = htons(0x19u);
        if ( connect(s, &name, 16) != -1 )
        {
          recv(s, &buf, 2048, 0);
          i = "HELO www.inixsoft.com\r\n";
          v5 = strlen("HELO www.inixsoft.com\r\n");
          if ( send(s, "HELO www.inixsoft.com\r\n", v5, 0) > 0 )
          {
            recv(s, &buf, 2048, 0);
            sprintf(&buf, "MAIL From: <%s>\r\n", a2);
            v6 = strlen(&buf);
            if ( send(s, &buf, v6, 0) > 0 )
            {
              recv(s, &buf, 2048, 0);
              for ( i = a3; ; i += v14 )
              {
                i += strspn(i, " ,");
                if ( !*i )
                  break;
                v14 = strcspn(i, ",");
                sprintf(&buf, "RCPT To: <%.*s>\r\n", v14, i);
                v7 = strlen(&buf);
                if ( send(s, &buf, v7, 0) <= 0 )
                  goto LABEL_40;
                recv(s, &buf, 2048, 0);
              }
              i = "DATA\r\n";
              v8 = strlen("DATA\r\n");
              if ( send(s, "DATA\r\n", v8, 0) > 0 )
              {
                recv(s, &buf, 2048, 0);
                memset(&v24, 0, 0x10u);
                namelen = 16;
                getsockname(s, (struct sockaddr *)&v24, &namelen);
                sprintf(&buf, "From: <%s>\r\n", a2);
                v9 = strlen(&buf);
                if ( send(s, &buf, v9, 0) > 0 )
                {
                  sprintf(&buf, "Subject: Exception (%d.%d.%d.%d)\r\n\r\n\r\n", v25, v26, v27, v28);
                  v10 = strlen(&buf);
                  if ( send(s, &buf, v10, 0) > 0 )
                  {
                    if ( sub_421820(s, lpFileName) )
                    {
                      i = "\r\n.\r\n";
                      v11 = strlen("\r\n.\r\n");
                      if ( send(s, i, v11, 0) > 0 )
                      {
                        recv(s, &buf, 2048, 0);
                        i = "QUIT\r\n";
                        v12 = strlen("QUIT\r\n");
                        if ( send(s, i, v12, 0) > 0 )
                        {
                          recv(s, &buf, 2048, 0);
                          v21 = 1;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        goto LABEL_40;
      }
    }
  }
LABEL_40:
  closesocket(s);
  WSACleanup();
  return v21;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00421820) --------------------------------------------------------
signed int __cdecl sub_421820(SOCKET s, LPCSTR lpFileName)
{
  signed int result; // eax@2
  DWORD len; // [sp+0h] [bp-40Ch]@3
  char Buffer; // [sp+4h] [bp-408h]@3
  int v5; // [sp+404h] [bp-8h]@1
  HANDLE hObject; // [sp+408h] [bp-4h]@1

  v5 = dword_4D9830;
  hObject = CreateFileA(lpFileName, 0x80000000u, 1u, 0, 3u, 0, 0);
  if ( hObject == (HANDLE)-1 )
  {
    result = 1;
  }
  else
  {
    do
    {
      if ( !ReadFile(hObject, &Buffer, 0x400u, &len, 0) || !len )
      {
        CloseHandle(hObject);
        return 1;
      }
    }
    while ( send(s, &Buffer, len, 0) > 0 );
    result = 0;
  }
  return result;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004218D0) --------------------------------------------------------
void __usercall sub_4218D0(int a1<eax>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  DWORD v5; // eax@6
  DWORD v6; // ecx@6
  int v7; // ST24_4@6
  int v8; // ST20_4@6
  int v9; // ST1C_4@6
  int v10; // ST18_4@6
  int v11; // ST14_4@6
  int v12; // ST10_4@6
  int v13; // ST0C_4@6
  DWORD v14; // eax@6
  LPCVOID v15; // ST24_4@11
  int v16; // ST20_4@11
  int v17; // ST1C_4@11
  int v18; // eax@11
  HANDLE v19; // eax@19
  HANDLE v20; // eax@22
  DWORD v21; // [sp-Ch] [bp-B70h]@1
  DWORD v22; // [sp-8h] [bp-B6Ch]@1
  DWORD v23; // [sp-4h] [bp-B68h]@1
  char *v24; // [sp+0h] [bp-B64h]@4
  DWORD v25; // [sp+4h] [bp-B60h]@20
  int i; // [sp+8h] [bp-B5Ch]@16
  CHAR v27; // [sp+Ch] [bp-B58h]@15
  int v28; // [sp+3F8h] [bp-76Ch]@13
  CONTEXT Context; // [sp+3FCh] [bp-768h]@7
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+6CCh] [bp-498h]@8
  const char *v31; // [sp+6E8h] [bp-47Ch]@6
  char ContextRecord; // [sp+6ECh] [bp-478h]@8
  int v33; // [sp+778h] [bp-3ECh]@16
  int v34; // [sp+77Ch] [bp-3E8h]@16
  int v35; // [sp+780h] [bp-3E4h]@16
  int v36; // [sp+784h] [bp-3E0h]@16
  int v37; // [sp+788h] [bp-3DCh]@16
  int v38; // [sp+78Ch] [bp-3D8h]@16
  char v39[4]; // [sp+790h] [bp-3D4h]@16
  char v40[4]; // [sp+794h] [bp-3D0h]@16
  char v41[4]; // [sp+798h] [bp-3CCh]@16
  char v42[4]; // [sp+79Ch] [bp-3C8h]@16
  int v43; // [sp+7A0h] [bp-3C4h]@16
  LPCVOID lpAddress; // [sp+7A4h] [bp-3C0h]@8
  int v45; // [sp+7A8h] [bp-3BCh]@11
  int v46; // [sp+7ACh] [bp-3B8h]@16
  int v47; // [sp+7B0h] [bp-3B4h]@16
  int v48; // [sp+7B4h] [bp-3B0h]@16
  struct tm *v49; // [sp+9C0h] [bp-1A4h]@11
  struct _SYSTEMTIME SystemTime; // [sp+9C4h] [bp-1A0h]@3
  char v51; // [sp+9D4h] [bp-190h]@7
  DWORD v52; // [sp+9E0h] [bp-184h]@7
  LPCVOID v53; // [sp+A28h] [bp-13Ch]@16
  char *v54; // [sp+A2Ch] [bp-138h]@7
  CONTEXT *v55; // [sp+A30h] [bp-134h]@7
  int v56; // [sp+A34h] [bp-130h]@11
  HANDLE hFile; // [sp+A38h] [bp-12Ch]@1
  CHAR Filename; // [sp+A3Ch] [bp-128h]@9
  void *v59; // [sp+B48h] [bp-1Ch]@1
  DWORD *v60; // [sp+B4Ch] [bp-18h]@1
  int v61; // [sp+B54h] [bp-10h]@1
  int (__cdecl *v62)(int, PVOID, int); // [sp+B58h] [bp-Ch]@1
  _UNKNOWN *v63; // [sp+B5Ch] [bp-8h]@1
  int v64; // [sp+B60h] [bp-4h]@1

  v64 = -1;
  v63 = &unk_4B60D0;
  v62 = _except_handler3;
  v61 = a1;
  v59 = (void *)dword_4D9830;
  v23 = a2;
  v22 = a4;
  v21 = a3;
  v60 = &v21;
  hFile = CreateFileA(FileName, 0x40000000u, 1u, 0, 4u, 0x80000080u, 0);
  if ( hFile == (HANDLE)-1 )
  {
    OutputDebugStringA("Error creating exception report");
  }
  else
  {
    SetFilePointer(hFile, 0, 0, 2u);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    if ( dword_4D5B80 )
      v24 = "first excpetion";
    else
      v24 = &byte_4B437D;
    v7 = (int)v24;
    v8 = SystemTime.wSecond;
    v9 = SystemTime.wMinute;
    v10 = SystemTime.wHour;
    v11 = SystemTime.wDay;
    v12 = SystemTime.wMonth;
    v13 = SystemTime.wYear;
    v14 = GetCurrentThreadId();
    v5 = sub_421EC0(
           hFile,
           "[%x %04d/%02d/%02d %02d:%02d:%02d]: ======================= %s\r\n",
           v14,
           v13,
           v12,
           v11,
           v10,
           v9,
           v8,
           v7);
    v31 = "Unknown";
    if ( !a5 )
    {
      sub_420E30(v5, (DWORD)&Context, v6, a2, a3, a4, &Context);
      memset(&v51, 0, 0x50u);
      memset(&v54, 0, 8u);
      v52 = Context.Eip;
      v55 = &Context;
      v54 = &v51;
      a5 = (int)&v54;
    }
    memcpy(&ContextRecord, *(const void **)(a5 + 4), 0x2CCu);
    if ( VirtualQuery(lpAddress, &Buffer, 0x1Cu) )
    {
      if ( GetModuleFileNameA(Buffer.AllocationBase, &Filename, 0x104u) )
        v31 = sub_4210A0(&Filename);
    }
    v49 = localtime(&dword_4E0D8C);
    sub_421EC0(
      hFile,
      "start at %02d/%02d/%02d %02d:%02d:%02d\r\n",
      v49->tm_year % 100,
      v49->tm_mon + 1,
      v49->tm_mday,
      v49->tm_hour,
      v49->tm_min,
      v49->tm_sec);
    sub_422180(hFile);
    v56 = *(_DWORD *)a5;
    v15 = lpAddress;
    v16 = v45;
    v17 = (int)v31;
    v18 = sub_422280(*(_DWORD *)v56);
    sub_421EC0(hFile, "%s in module %s at %04x:%08x.\r\n", v18, v17, v16, v15);
    if ( *(_DWORD *)v56 == -1073741819 )
    {
      if ( *(_DWORD *)(v56 + 16) >= 2u )
      {
        v28 = (int)"Read from";
        if ( *(_DWORD *)(v56 + 20) )
          v28 = (int)"Write to";
        wsprintfA(&v27, "%s location %08x caused an access violation.\r\n", v28, *(_DWORD *)(v56 + 24));
        sub_421EC0(hFile, "%s", &v27);
      }
    }
    sub_421EC0(hFile, "\r\n");
    sub_421EC0(hFile, "Registers:\r\n");
    sub_421EC0(hFile, "EAX=%08x CS=%04x EIP=%08x EFLGS=%08x\r\n", *(_DWORD *)v42, v45, lpAddress, v46);
    sub_421EC0(hFile, "EBX=%08x SS=%04x ESP=%08x EBP=%08x\r\n", *(_DWORD *)v39, v48, v47, v43);
    sub_421EC0(hFile, "ECX=%08x DS=%04x ESI=%08x FS=%04x\r\n", *(_DWORD *)v41, v36, v38, v34);
    sub_421EC0(hFile, "EDX=%08x ES=%04x EDI=%08x GS=%04x\r\n", *(_DWORD *)v40, v35, v37, v33);
    sub_421EC0(hFile, "\r\nBytes at CS:EIP:\r\n");
    v53 = lpAddress;
    for ( i = 0; i < 16; ++i )
    {
      v64 = 0;
      sub_421EC0(hFile, "%02x ", *((_BYTE *)v53 + i));
      v64 = -1;
    }
    sub_421EC0(hFile, "\r\n\r\nStack dump:\r\n");
    *(_DWORD *)dword_4E0B74 = v47 & 0xFFFFFFE0;
    dword_4E0B70 = *MK_FP(__FS__, 4);
    dword_4E0B70 &= 0xFFFFFFE0u;
    sub_422460(*(int *)dword_4E0B74, hFile, *(unsigned int *)dword_4E0B74, *(_DWORD *)dword_4E0B74 + 160);
    sub_421EC0(hFile, "\r\n");
    v19 = GetCurrentProcess();
    if ( SymInitialize(v19, 0, 1) )
    {
      v25 = SymGetOptions();
      if ( (v25 & 0x16) != 20 )
        SymSetOptions(v25 & 0xFFFFFFFD | 0x14);
      sub_4225E0(hFile, &ContextRecord);
      v20 = GetCurrentProcess();
      SymCleanup(v20);
    }
    else
    {
      sub_4228C0(0, hFile, (int)&ContextRecord);
    }
    sub_421FE0(hFile);
    CloseHandle(hFile);
    sub_421F30(a5);
  }
  sub_49F65E(v59);
}
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (00421EC0) --------------------------------------------------------
BOOL sub_421EC0(HANDLE hFile, LPCSTR arg4, ...)
{
  int v3; // eax@1
  CHAR String; // [sp+0h] [bp-7E0h]@1
  int v5; // [sp+7D4h] [bp-Ch]@1
  DWORD NumberOfBytesWritten; // [sp+7D8h] [bp-8h]@1
  va_list arglist; // [sp+7DCh] [bp-4h]@1
  va_list va; // [sp+7F0h] [bp+10h]@1

  va_start(va, arg4);
  v5 = dword_4D9830;
  arglist = va;
  wvsprintfA(&String, arg4, va);
  arglist = 0;
  v3 = lstrlenA(&String);
  return WriteFile(hFile, &String, v3, &NumberOfBytesWritten, 0);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00421F30) --------------------------------------------------------
void *__cdecl sub_421F30(int a1)
{
  void *result; // eax@1
  HANDLE v2; // eax@3
  DWORD v3; // ST04_4@6
  HANDLE v4; // eax@6
  HANDLE v5; // eax@6
  struct _MINIDUMP_EXCEPTION_INFORMATION *v6; // [sp+0h] [bp-14h]@4
  void *v7; // [sp+4h] [bp-10h]@1
  DWORD v8; // [sp+8h] [bp-Ch]@4
  int v9; // [sp+Ch] [bp-8h]@4
  int v10; // [sp+10h] [bp-4h]@4

  result = CreateFileA(byte_4E0B80, 0x40000000u, 1u, 0, 2u, 0x80000080u, 0);
  v7 = result;
  if ( result != (void *)-1 )
  {
    v2 = GetCurrentThread();
    SetThreadPriority(v2, 2);
    if ( a1 )
    {
      v8 = GetCurrentThreadId();
      v10 = 1;
      v9 = a1;
      v6 = (struct _MINIDUMP_EXCEPTION_INFORMATION *)&v8;
    }
    else
    {
      v6 = 0;
    }
    v3 = GetCurrentProcessId();
    v4 = GetCurrentProcess();
    MiniDumpWriteDump(v4, v3, v7, 0, v6, 0, 0);
    v5 = GetCurrentThread();
    SetThreadPriority(v5, 0);
    result = (void *)CloseHandle(v7);
  }
  return result;
}

//----- (00421FE0) --------------------------------------------------------
int __cdecl sub_421FE0(HANDLE hFile)
{
  sub_421EC0(hFile, "Module list:\r\n");
  GetModuleHandleA(0);
  return _getdrive();
}

//----- (00422280) --------------------------------------------------------
int __cdecl sub_422280(int a1)
{
  unsigned int i; // [sp+0h] [bp-C4h]@1
  int v3; // [sp+4h] [bp-C0h]@1
  int v4; // [sp+8h] [bp-BCh]@1
  int v5; // [sp+Ch] [bp-B8h]@1
  int v6; // [sp+10h] [bp-B4h]@1
  int v7; // [sp+14h] [bp-B0h]@1
  int v8; // [sp+18h] [bp-ACh]@1
  int v9; // [sp+1Ch] [bp-A8h]@1
  int v10; // [sp+20h] [bp-A4h]@1
  int v11; // [sp+24h] [bp-A0h]@1
  int v12; // [sp+28h] [bp-9Ch]@1
  int v13; // [sp+2Ch] [bp-98h]@1
  int v14; // [sp+30h] [bp-94h]@1
  int v15; // [sp+34h] [bp-90h]@1
  int v16; // [sp+38h] [bp-8Ch]@1
  int v17; // [sp+3Ch] [bp-88h]@1
  int v18; // [sp+40h] [bp-84h]@1
  int v19; // [sp+44h] [bp-80h]@1
  int v20; // [sp+48h] [bp-7Ch]@1
  int v21; // [sp+4Ch] [bp-78h]@1
  int v22; // [sp+50h] [bp-74h]@1
  int v23; // [sp+54h] [bp-70h]@1
  int v24; // [sp+58h] [bp-6Ch]@1
  int v25; // [sp+5Ch] [bp-68h]@1
  int v26; // [sp+60h] [bp-64h]@1
  int v27; // [sp+64h] [bp-60h]@1
  int v28; // [sp+68h] [bp-5Ch]@1
  int v29; // [sp+6Ch] [bp-58h]@1
  int v30; // [sp+70h] [bp-54h]@1
  int v31; // [sp+74h] [bp-50h]@1
  int v32; // [sp+78h] [bp-4Ch]@1
  int v33; // [sp+7Ch] [bp-48h]@1
  int v34; // [sp+80h] [bp-44h]@1
  int v35; // [sp+84h] [bp-40h]@1
  int v36; // [sp+88h] [bp-3Ch]@1
  int v37; // [sp+8Ch] [bp-38h]@1
  int v38; // [sp+90h] [bp-34h]@1
  int v39; // [sp+94h] [bp-30h]@1
  int v40; // [sp+98h] [bp-2Ch]@1
  int v41; // [sp+9Ch] [bp-28h]@1
  int v42; // [sp+A0h] [bp-24h]@1
  int v43; // [sp+A4h] [bp-20h]@1
  int v44; // [sp+A8h] [bp-1Ch]@1
  int v45; // [sp+ACh] [bp-18h]@1
  int v46; // [sp+B0h] [bp-14h]@1
  int v47; // [sp+B4h] [bp-10h]@1
  int v48; // [sp+B8h] [bp-Ch]@1
  int v49; // [sp+BCh] [bp-8h]@1
  int v50; // [sp+C0h] [bp-4h]@1

  v3 = 1073807365;
  v4 = (int)"a Control-C";
  v5 = 1073807368;
  v6 = (int)"a Control-Break";
  v7 = -2147483646;
  v8 = (int)"a Datatype Misalignment";
  v9 = -2147483645;
  v10 = (int)"a Breakpoint";
  v11 = -1073741819;
  v12 = (int)"an Access Violation";
  v13 = -1073741818;
  v14 = (int)"an In Page Error";
  v15 = -1073741801;
  v16 = (int)"a No Memory";
  v17 = -1073741795;
  v18 = (int)"an Illegal Instruction";
  v19 = -1073741787;
  v20 = (int)"a Noncontinuable Exception";
  v21 = -1073741786;
  v22 = (int)"an Invalid Disposition";
  v23 = -1073741684;
  v24 = (int)"a Array Bounds Exceeded";
  v25 = -1073741683;
  v26 = (int)"a Float Denormal Operand";
  v27 = -1073741682;
  v28 = (int)"a Float Divide by Zero";
  v29 = -1073741681;
  v30 = (int)"a Float Inexact Result";
  v31 = -1073741680;
  v32 = (int)"a Float Invalid Operation";
  v33 = -1073741679;
  v34 = (int)"a Float Overflow";
  v35 = -1073741678;
  v36 = (int)"a Float Stack Check";
  v37 = -1073741677;
  v38 = (int)"a Float Underflow";
  v39 = -1073741676;
  v40 = (int)"an Integer Divide by Zero";
  v41 = -1073741675;
  v42 = (int)"an Integer Overflow";
  v43 = -1073741674;
  v44 = (int)"a Privileged Instruction";
  v45 = -1073741571;
  v46 = (int)"a Stack Overflow";
  v47 = -1073741502;
  v48 = (int)"a DLL Initialization Failed";
  v49 = -529697949;
  v50 = (int)"a Microsoft C++ Exception";
  for ( i = 0; i < 0x18; ++i )
  {
    if ( a1 == *(&v3 + 2 * i) )
      return *(&v4 + 2 * i);
  }
  return (int)"Unknown exception type";
}

//----- (00422460) --------------------------------------------------------
void __usercall sub_422460(int a1<eax>, HANDLE hFile, unsigned int a3, unsigned int a4)
{
  int v4; // eax@9
  int v5; // eax@10
  char v6; // [sp-Ch] [bp-8Ch]@1
  char v7; // [sp+0h] [bp-80h]@6
  char v8; // [sp+1h] [bp-7Fh]@6
  __int16 v9; // [sp+59h] [bp-27h]@6
  char v10; // [sp+5Bh] [bp-25h]@6
  void *v11; // [sp+60h] [bp-20h]@1
  LPSTR v12; // [sp+64h] [bp-1Ch]@6
  char *v13; // [sp+68h] [bp-18h]@1
  int v14; // [sp+70h] [bp-10h]@1
  int (__cdecl *v15)(int, PVOID, int); // [sp+74h] [bp-Ch]@1
  _UNKNOWN *v16; // [sp+78h] [bp-8h]@1
  int v17; // [sp+7Ch] [bp-4h]@1
  unsigned int v18; // [sp+90h] [bp+10h]@4

  v17 = -1;
  v16 = &unk_4B63F8;
  v15 = _except_handler3;
  v14 = a1;
  v11 = (void *)dword_4D9830;
  v13 = &v6;
  if ( *(_DWORD *)dword_4E0B74 < a3 )
    *(_DWORD *)dword_4E0B74 = a3 & 0xFFFFFFE0;
  if ( a4 <= dword_4E0B70 )
    v18 = (a4 + 31) & 0xFFFFFFE0;
  else
    v18 = dword_4E0B70;
  v17 = 0;
  v7 = byte_4B437D;
  memset(&v8, 0, 0x58u);
  v9 = 0;
  v10 = 0;
  v12 = &v7;
  while ( *(_DWORD *)dword_4E0B74 < v18 )
  {
    if ( !(dword_4E0B74[0] & 0x1F) )
    {
      v4 = wsprintfA(v12, "%08x:", *(_DWORD *)dword_4E0B74);
      v12 += v4;
    }
    v5 = wsprintfA(v12, " %08x", **(_DWORD **)dword_4E0B74);
    v12 += v5;
    *(_DWORD *)dword_4E0B74 += 4;
    if ( !(dword_4E0B74[0] & 0x1F) )
    {
      sub_421EC0(hFile, "%s\r\n", &v7);
      v7 = 0;
      v12 = &v7;
    }
  }
  v17 = -1;
  sub_49F65E(v11);
}
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (004225E0) --------------------------------------------------------
int __cdecl sub_4225E0(HANDLE hFile, PVOID ContextRecord)
{
  HANDLE v2; // ST08_4@2
  HANDLE v3; // eax@2
  DWORD v4; // ST14_4@6
  HANDLE v5; // eax@6
  DWORD v6; // ST14_4@7
  HANDLE v7; // eax@7
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+0h] [bp-65Ch]@9
  CHAR Filename; // [sp+1Ch] [bp-640h]@9
  DWORD pdwDisplacement; // [sp+128h] [bp-534h]@7
  struct _IMAGEHLP_LINE64 Line64; // [sp+12Ch] [bp-530h]@7
  PSYMBOL_INFO Symbol; // [sp+148h] [bp-514h]@6
  CHAR outputString; // [sp+14Ch] [bp-510h]@6
  struct _SYMBOL_INFO v15[6]; // [sp+34Ch] [bp-310h]@6
  int v16; // [sp+5A8h] [bp-B4h]@1
  unsigned __int64 Displacement; // [sp+5ACh] [bp-B0h]@6
  struct _tagSTACKFRAME StackFrame; // [sp+5B4h] [bp-A8h]@1

  v16 = dword_4D9830;
  sub_421EC0(hFile, "Call Stack Information:\r\n");
  memset(&StackFrame, 0, 0xA4u);
  StackFrame.AddrPC.Offset = *((_DWORD *)ContextRecord + 46);
  StackFrame.AddrPC.Mode = 3;
  StackFrame.AddrStack.Offset = *((_DWORD *)ContextRecord + 49);
  StackFrame.AddrStack.Mode = 3;
  StackFrame.AddrFrame.Offset = *((_DWORD *)ContextRecord + 45);
  StackFrame.AddrFrame.Mode = 3;
  while ( 1 )
  {
    v2 = GetCurrentThread();
    v3 = GetCurrentProcess();
    if ( !StackWalk(0x14Cu, v3, v2, &StackFrame, ContextRecord, 0, SymFunctionTableAccess, SymGetModuleBase, 0) )
      break;
    if ( !StackFrame.AddrFrame.Offset )
      break;
    sub_422460((int)hFile, hFile, StackFrame.AddrFrame.Offset - 32, StackFrame.AddrFrame.Offset + 12);
    sub_421EC0(hFile, "\r\n%08x  %08x ", StackFrame.AddrFrame.Offset, StackFrame.AddrPC.Offset);
    Symbol = v15;
    v15[0].SizeOfStruct = 600;
    v15[0].MaxNameLen = 512;
    Displacement = 0i64;
    outputString = 0;
    v4 = StackFrame.AddrPC.Offset;
    v5 = GetCurrentProcess();
    if ( SymFromAddr(v5, v4, &Displacement, v15)
      && (sub_421EC0(hFile, "%s +%x\r\n", Symbol->Name, Displacement),
          UnDecorateSymbolName(Symbol->Name, &outputString, 0x200u, 0),
          pdwDisplacement = 0,
          Line64.SizeOfStruct = 24,
          v6 = StackFrame.AddrPC.Offset,
          v7 = GetCurrentProcess(),
          SymGetLineFromAddr64(v7, v6, &pdwDisplacement, &Line64)) )
    {
      sub_421EC0(hFile, "%s %d %s\r\n", Line64.FileName, Line64.LineNumber, &outputString);
    }
    else
    {
      Filename = 0;
      if ( VirtualQuery((LPCVOID)StackFrame.AddrPC.Offset, &Buffer, 0x1Cu) )
        GetModuleFileNameA(Buffer.AllocationBase, &Filename, 0x104u);
      sub_421EC0(hFile, "%s %s\r\n", &Filename, &outputString);
    }
    sub_421EC0(
      hFile,
      "Params:   %08x %08x %08x %08x\r\n",
      *(_QWORD *)&StackFrame.Params[0],
      *(_QWORD *)&StackFrame.Params[2]);
  }
  return sub_421EC0(hFile, "\r\n");
}
// 4D9830: using guessed type int dword_4D9830;

//----- (004228C0) --------------------------------------------------------
void __usercall sub_4228C0(int a1<eax>, void *a2, int a3)
{
  char v3; // [sp-Ch] [bp-160h]@1
  int i; // [sp+0h] [bp-154h]@4
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+4h] [bp-150h]@2
  LPCVOID v6; // [sp+20h] [bp-134h]@4
  CHAR Filename; // [sp+24h] [bp-130h]@2
  void *v8; // [sp+12Ch] [bp-28h]@1
  LPCVOID lpAddress; // [sp+130h] [bp-24h]@1
  LPVOID lp; // [sp+134h] [bp-20h]@1
  LPVOID v11; // [sp+138h] [bp-1Ch]@7
  char *v12; // [sp+13Ch] [bp-18h]@1
  int v13; // [sp+144h] [bp-10h]@1
  int (__cdecl *v14)(int, PVOID, int); // [sp+148h] [bp-Ch]@1
  _UNKNOWN *v15; // [sp+14Ch] [bp-8h]@1
  int v16; // [sp+150h] [bp-4h]@1

  v16 = -1;
  v15 = &unk_4B64B8;
  v14 = _except_handler3;
  v13 = a1;
  v8 = (void *)dword_4D9830;
  v12 = &v3;
  sub_421EC0(a2, "Intel Call Stack Information:\r\n");
  lpAddress = *(LPCVOID *)(a3 + 184);
  lp = *(LPVOID *)(a3 + 180);
  do
  {
    sub_422460((int)((char *)lp - 32), a2, (unsigned int)((char *)lp - 32), (unsigned int)((char *)lp + 12));
    Filename = 0;
    if ( VirtualQuery(lpAddress, &Buffer, 0x1Cu) )
      GetModuleFileNameA(Buffer.AllocationBase, &Filename, 0x104u);
    sub_421EC0(a2, "\r\n%08x  %08x  %s\r\n", lp, lpAddress, &Filename);
    sub_421EC0(a2, "Bytes at CS:EIP: ");
    v6 = lpAddress;
    for ( i = 0; i < 16; ++i )
    {
      v16 = 0;
      sub_421EC0(a2, "%02x ", *((_BYTE *)v6 + i));
      v16 = -1;
    }
    sub_421EC0(a2, "\r\n");
    lpAddress = (LPCVOID)*((_DWORD *)lp + 1);
    v11 = lp;
    lp = *(LPVOID *)lp;
  }
  while ( !((_BYTE)lp & 3) && lp > v11 && !IsBadWritePtr(lp, 8u) );
  sub_49F65E(v8);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00422A90) --------------------------------------------------------
LONG __userpurge TopLevelExceptionFilter<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, struct _EXCEPTION_POINTERS *a4)
{
  int v4; // eax@3
  LONG result; // eax@7

  if ( dword_4D5B7C )
  {
    if ( a4->ExceptionRecord->ExceptionCode != -536870911 )
    {
      CIOException::Lock();
      if ( dword_4E0DB8 )
      {
        CIOException::Unlock();
      }
      else
      {
        dword_4E0DB8 = 1;
        sub_4218D0(v4, a1, a2, a3, (int)a4);
        sub_421140();
        CIOException::Unlock();
      }
    }
  }
  if ( lpTopLevelExceptionFilter )
    result = lpTopLevelExceptionFilter(a4);
  else
    result = 0;
  return result;
}
// 4E0DB8: using guessed type int dword_4E0DB8;

//----- (00422B00) --------------------------------------------------------
void __cdecl CIOException::CInit::_CInit()
{
  if ( lpTopLevelExceptionFilter )
    SetUnhandledExceptionFilter(lpTopLevelExceptionFilter);
  DeleteCriticalSection(&CriticalSection);
}

//----- (00422B30) --------------------------------------------------------
void __cdecl sub_422B30(const char *a1, char a2)
{
  int v2; // ST24_4@5
  int v3; // ST20_4@5
  int v4; // ST1C_4@5
  int v5; // ST18_4@5
  int v6; // ST14_4@5
  int v7; // ST10_4@5
  DWORD v8; // eax@5
  void *v9; // [sp+0h] [bp-430h]@11
  DWORD NumberOfBytesWritten; // [sp+4h] [bp-42Ch]@7
  unsigned int i; // [sp+8h] [bp-428h]@9
  struct _SYSTEMTIME SystemTime; // [sp+Ch] [bp-424h]@3
  HANDLE hObject; // [sp+1Ch] [bp-414h]@3
  char Buffer[1028]; // [sp+20h] [bp-410h]@5
  int v15; // [sp+424h] [bp-Ch]@1
  DWORD nNumberOfBytesToWrite; // [sp+428h] [bp-8h]@5
  va_list v17; // [sp+42Ch] [bp-4h]@3

  v15 = dword_4D9830;
  if ( dword_4D5B7C )
  {
    CIOException::Lock();
    v17 = &a2;
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    hObject = CreateFileA(FileName, 0xC0000000u, 1u, 0, 4u, 0x80u, 0);
    if ( hObject == (HANDLE)-1 )
    {
      CIOException::Unlock();
    }
    else
    {
      SetFilePointer(hObject, 0, 0, 2u);
      v2 = SystemTime.wSecond;
      v3 = SystemTime.wMinute;
      v4 = SystemTime.wHour;
      v5 = SystemTime.wDay;
      v6 = SystemTime.wMonth;
      v7 = SystemTime.wYear;
      v8 = GetCurrentThreadId();
      nNumberOfBytesToWrite = _snprintf(
                                Buffer,
                                0x400u,
                                "[%x %04d/%02d/%02d %02d:%02d:%02d]: ",
                                v8,
                                v7,
                                v6,
                                v5,
                                v4,
                                v3,
                                v2);
      if ( (signed int)nNumberOfBytesToWrite >= 0 )
      {
        WriteFile(hObject, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        nNumberOfBytesToWrite = _vsnprintf(Buffer, 0x400u, a1, v17);
        if ( (signed int)nNumberOfBytesToWrite >= 0 )
        {
          for ( i = 0; (signed int)i < (signed int)nNumberOfBytesToWrite; i += 2 )
          {
            v9 = memchr(&Buffer[i], 10, nNumberOfBytesToWrite - i);
            if ( !v9 )
              break;
            if ( nNumberOfBytesToWrite < 0x400 )
              ++nNumberOfBytesToWrite;
            i = v9 - Buffer;
            memcpy_0((char *)v9 + 1, v9, nNumberOfBytesToWrite - (v9 - Buffer) - 1);
            *(_BYTE *)v9 = 13;
          }
          WriteFile(hObject, Buffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0);
        }
      }
      v17 = 0;
      CloseHandle(hObject);
      CIOException::Unlock();
    }
  }
}
// 4D9830: using guessed type int dword_4D9830;
// 422B30: using guessed type char Buffer[1028];

//----- (00422D80) --------------------------------------------------------
int __usercall sub_422D80<eax>(int result<eax>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp-Ch] [bp-Ch]@3

  if ( dword_4D5B7C )
  {
    v4 = result;
    if ( InterlockedExchange(&dword_4D5B80, 0) )
    {
      if ( dword_4D5B7C )
        sub_422DC0(a2, a3, a4);
    }
    result = v4;
  }
  return result;
}

//----- (00422DC0) --------------------------------------------------------
void __usercall sub_422DC0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  char v3; // ST04_1@1
  int v4; // eax@1

  sub_422B30("EASSERT\n", v3);
  CIOException::Lock();
  sub_4218D0(v4, a1, a2, a3, 0);
  sub_421140();
  CIOException::Unlock();
}

//----- (00422DF0) --------------------------------------------------------
signed int __usercall CIOException::Filter<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v4; // eax@3

  if ( dword_4D5B7C )
  {
    if ( **(_DWORD **)a4 != -536870911 )
    {
      CIOException::Lock();
      sub_4218D0(v4, a1, a2, a3, a4);
      CIOException::Unlock();
    }
  }
  return 1;
}

//----- (00422E30) --------------------------------------------------------
void __cdecl CIOException::Open(char *a1, int a2, int a3)
{
  HANDLE v3; // [sp+0h] [bp-4h]@5

  if ( a1 && *a1 )
  {
    dword_4E0DA8 = a1;
    dword_4E0DAC = a2;
    dword_4E0DB0 = a3;
  }
  else
  {
    dword_4E0DA8 = 0;
    dword_4E0DAC = 0;
    dword_4E0DB0 = 0;
  }
  v3 = CreateFileA(FileName, 0x80000000u, 1u, 0, 3u, 0, 0);
  if ( v3 != (HANDLE)-1 )
  {
    CloseHandle(v3);
    CIOException::SendMail();
  }
}

//----- (00422EC0) --------------------------------------------------------
bool __cdecl CIOException::Enable()
{
  return InterlockedExchange(&dword_4D5B7C, 1) == 0;
}

//----- (00422EE0) --------------------------------------------------------
LONG __cdecl CIOException::Disable()
{
  return InterlockedExchange(&dword_4D5B7C, 0);
}

//----- (00422F00) --------------------------------------------------------
LONG __cdecl CIOException::IsEnable()
{
  return dword_4D5B7C;
}

//----- (00422F10) --------------------------------------------------------
void __cdecl CIOException::SendMail()
{
  CIOException::Lock();
  sub_421140();
  CIOException::Unlock();
}

//----- (00422F30) --------------------------------------------------------
LONG __cdecl CIOException::ToggleRaise()
{
  dword_4D5B80 = dword_4D5B80 == 0;
  return dword_4D5B80;
}

//----- (00422F50) --------------------------------------------------------
void __cdecl CIOException::DumpStack(int a1, int a2, int a3)
{
  HANDLE v3; // eax@1
  int v4; // ST20_4@3
  int v5; // ST1C_4@3
  int v6; // ST18_4@3
  int v7; // ST14_4@3
  int v8; // ST10_4@3
  int v9; // ST0C_4@3
  DWORD v10; // eax@3
  struct tm *v11; // ST2C_4@3
  HANDLE v12; // eax@3
  HANDLE v13; // eax@9
  HANDLE v14; // eax@10
  int i; // [sp+0h] [bp-20h]@6
  DWORD v16; // [sp+4h] [bp-1Ch]@4
  struct _SYSTEMTIME SystemTime; // [sp+Ch] [bp-14h]@3
  HANDLE hFile; // [sp+1Ch] [bp-4h]@1

  v3 = GetCurrentThread();
  SetThreadPriority(v3, 2);
  CIOException::Lock();
  hFile = CreateFileA(FileName, 0x40000000u, 1u, 0, 4u, 0x80000080u, 0);
  if ( hFile == (HANDLE)-1 )
  {
    CIOException::Unlock();
  }
  else
  {
    SetFilePointer(hFile, 0, 0, 2u);
    SystemTime.wYear = 0;
    *(_DWORD *)&SystemTime.wMonth = 0;
    *(_DWORD *)&SystemTime.wDay = 0;
    *(_DWORD *)&SystemTime.wMinute = 0;
    SystemTime.wMilliseconds = 0;
    GetLocalTime(&SystemTime);
    v4 = SystemTime.wSecond;
    v5 = SystemTime.wMinute;
    v6 = SystemTime.wHour;
    v7 = SystemTime.wDay;
    v8 = SystemTime.wMonth;
    v9 = SystemTime.wYear;
    v10 = GetCurrentThreadId();
    sub_421EC0(
      hFile,
      "[%x %04d/%02d/%02d %02d:%02d:%02d]: Dump Stack =======================\r\n",
      v10,
      v9,
      v8,
      v7,
      v6,
      v5,
      v4);
    v11 = localtime(&dword_4E0D8C);
    sub_421EC0(
      hFile,
      "start at %02d/%02d/%02d %02d:%02d:%02d\r\n",
      v11->tm_year % 100,
      v11->tm_mon + 1,
      v11->tm_mday,
      v11->tm_hour,
      v11->tm_min,
      v11->tm_sec);
    v12 = GetCurrentProcess();
    if ( SymInitialize(v12, 0, 1) )
    {
      v16 = SymGetOptions();
      if ( (v16 & 0x16) != 20 )
        SymSetOptions(v16 & 0xFFFFFFFD | 0x14);
      for ( i = 0; i < a1; ++i )
      {
        sub_421EC0(hFile, "Call Stack Information %d (%x):\r\n", i, *(_DWORD *)(a3 + 4 * i));
        sub_423130(hFile, *(HANDLE *)(a2 + 4 * i));
      }
      sub_421FE0(hFile);
      v13 = GetCurrentProcess();
      SymCleanup(v13);
    }
    CloseHandle(hFile);
    CIOException::Unlock();
    sub_421F30(0);
    v14 = GetCurrentThread();
    SetThreadPriority(v14, 0);
  }
}

//----- (00423130) --------------------------------------------------------
DWORD __cdecl sub_423130(HANDLE hFile, HANDLE hThread)
{
  HANDLE v2; // eax@2
  DWORD v3; // ST14_4@6
  HANDLE v4; // eax@6
  DWORD v5; // ST14_4@7
  HANDLE v6; // eax@7
  struct _MEMORY_BASIC_INFORMATION Buffer; // [sp+0h] [bp-92Ch]@9
  CHAR Filename; // [sp+1Ch] [bp-910h]@9
  DWORD pdwDisplacement; // [sp+128h] [bp-804h]@7
  struct _IMAGEHLP_LINE64 Line64; // [sp+12Ch] [bp-800h]@7
  PSYMBOL_INFO Symbol; // [sp+148h] [bp-7E4h]@6
  CHAR outputString; // [sp+14Ch] [bp-7E0h]@6
  struct _SYMBOL_INFO v14[6]; // [sp+34Ch] [bp-5E0h]@6
  unsigned __int64 Displacement; // [sp+5A4h] [bp-388h]@6
  CONTEXT Context; // [sp+5ACh] [bp-380h]@1
  int v17; // [sp+880h] [bp-ACh]@1
  struct _tagSTACKFRAME StackFrame; // [sp+884h] [bp-A8h]@1

  v17 = dword_4D9830;
  SuspendThread(hThread);
  memset(&Context, 0, 0x2CCu);
  Context.ContextFlags = 65543;
  GetThreadContext(hThread, &Context);
  sub_421EC0(hFile, "\r\nRegisters:\r\n");
  sub_421EC0(hFile, "EAX=%08x CS=%04x EIP=%08x EFLGS=%08x\r\n", Context.Eax, Context.SegCs, Context.Eip, Context.EFlags);
  sub_421EC0(hFile, "EBX=%08x SS=%04x ESP=%08x EBP=%08x\r\n", Context.Ebx, Context.SegSs, Context.Esp, Context.Ebp);
  sub_421EC0(hFile, "ECX=%08x DS=%04x ESI=%08x FS=%04x\r\n", Context.Ecx, Context.SegDs, Context.Esi, Context.SegFs);
  sub_421EC0(hFile, "EDX=%08x ES=%04x EDI=%08x GS=%04x\r\n", Context.Edx, Context.SegEs, Context.Edi, Context.SegGs);
  sub_421EC0(hFile, "\r\nStack dump:\r\n");
  *(_DWORD *)dword_4E0B74 = Context.Esp & 0xFFFFFFE0;
  dword_4E0B70 = -2147483648;
  sub_422460(*(_DWORD *)dword_4E0B74 + 160, hFile, *(unsigned int *)dword_4E0B74, *(_DWORD *)dword_4E0B74 + 160);
  sub_421EC0(hFile, "\r\nCall Stack:\r\n");
  memset(&StackFrame, 0, 0xA4u);
  StackFrame.AddrPC.Offset = Context.Eip;
  StackFrame.AddrPC.Mode = 3;
  StackFrame.AddrStack.Offset = Context.Esp;
  StackFrame.AddrStack.Mode = 3;
  StackFrame.AddrFrame.Offset = Context.Ebp;
  StackFrame.AddrFrame.Mode = 3;
  while ( 1 )
  {
    v2 = GetCurrentProcess();
    if ( !StackWalk(0x14Cu, v2, hThread, &StackFrame, &Context, 0, SymFunctionTableAccess, SymGetModuleBase, 0) )
      break;
    if ( !StackFrame.AddrFrame.Offset )
      break;
    sub_422460(
      StackFrame.AddrFrame.Offset - 16,
      hFile,
      StackFrame.AddrFrame.Offset - 16,
      StackFrame.AddrFrame.Offset + 12);
    sub_421EC0(hFile, "\r\n%08x  %08x ", StackFrame.AddrFrame.Offset, StackFrame.AddrPC.Offset);
    Symbol = v14;
    v14[0].SizeOfStruct = 600;
    v14[0].MaxNameLen = 512;
    outputString = 0;
    Displacement = 0i64;
    v3 = StackFrame.AddrPC.Offset;
    v4 = GetCurrentProcess();
    if ( SymFromAddr(v4, v3, &Displacement, v14)
      && (sub_421EC0(hFile, "%s +%x\r\n", Symbol->Name, Displacement),
          UnDecorateSymbolName(Symbol->Name, &outputString, 0x200u, 0),
          pdwDisplacement = 0,
          Line64.SizeOfStruct = 24,
          v5 = StackFrame.AddrPC.Offset,
          v6 = GetCurrentProcess(),
          SymGetLineFromAddr64(v6, v5, &pdwDisplacement, &Line64)) )
    {
      sub_421EC0(hFile, "%s %d %s\r\n", Line64.FileName, Line64.LineNumber, &outputString);
    }
    else
    {
      Filename = 0;
      if ( VirtualQuery((LPCVOID)StackFrame.AddrPC.Offset, &Buffer, 0x1Cu) )
        GetModuleFileNameA(Buffer.AllocationBase, &Filename, 0x104u);
      sub_421EC0(hFile, "%s %s\r\n", &Filename, &outputString);
    }
    sub_421EC0(
      hFile,
      "Params:   %08x %08x %08x %08x\r\n",
      *(_QWORD *)&StackFrame.Params[0],
      *(_QWORD *)&StackFrame.Params[2]);
  }
  sub_421EC0(hFile, "\r\n");
  return ResumeThread(hThread);
}
// 4D9830: using guessed type int dword_4D9830;
// 4E0B70: using guessed type int dword_4E0B70;

//----- (00423550) --------------------------------------------------------
LONG __thiscall CIOSpinLock::Wait(void *this)
{
  char v1; // sf@2
  LONG result; // eax@3
  char v3; // sf@7
  void *v4; // [sp+0h] [bp-8h]@1
  signed int v5; // [sp+4h] [bp-4h]@1
  signed int v6; // [sp+4h] [bp-4h]@6

  v4 = this;
  v5 = 4000;
  while ( 1 )
  {
    v1 = v5-- - 1 < 0;
    if ( v1 )
      break;
    result = InterlockedCompareExchange((volatile LONG *)v4, 1, 0);
    if ( !result )
      return result;
    __asm { pause }
  }
  v6 = 4000;
  while ( 1 )
  {
    v3 = v6-- - 1 < 0;
    if ( v3 )
      break;
    SwitchToThread();
    result = InterlockedCompareExchange((volatile LONG *)v4, 1, 0);
    if ( !result )
      return result;
  }
  do
  {
    Sleep(0x3E8u);
    result = InterlockedCompareExchange((volatile LONG *)v4, 1, 0);
  }
  while ( result );
  return result;
}

//----- (004235E0) --------------------------------------------------------
struct _RTL_CRITICAL_SECTION *__thiscall CIOCriticalSection::CIOCriticalSection(struct _RTL_CRITICAL_SECTION *this)
{
  struct _RTL_CRITICAL_SECTION *v2; // ST04_4@1

  v2 = this;
  InitializeCriticalSection(this);
  v2[1].LockCount = 0;
  v2[1].DebugInfo = 0;
  return v2;
}

//----- (00423610) --------------------------------------------------------
void __usercall CIOCriticalSection::_CIOCriticalSection(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  if ( *(_DWORD *)(a1 + 24) )
    sub_422D80(a1, a2, a3, a4);
  DeleteCriticalSection((LPCRITICAL_SECTION)v4);
}

//----- (00423640) --------------------------------------------------------
void *__usercall CIOCriticalSection::Enter<eax>(struct _RTL_CRITICAL_SECTION *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // eax@4
  void *result; // eax@5
  int v6; // ST18_4@5
  LONG v7; // ST14_4@5
  struct _RTL_CRITICAL_SECTION *v8; // [sp+0h] [bp-Ch]@1
  void *v9; // [sp+10h] [bp+4h]@5

  v8 = a1;
  if ( !TryEnterCriticalSection(a1) )
    EnterCriticalSection(v8);
  if ( v8[1].DebugInfo )
  {
    sub_422B30("CIOCriticalSection::Enter EIP(%p %p)\n", (char)v8[1].DebugInfo);
    sub_422D80(v4, a2, a3, a4);
  }
  v7 = *(_DWORD *)(v6 + 4);
  result = v9;
  v8[1].DebugInfo = (PRTL_CRITICAL_SECTION_DEBUG)v9;
  v8[1].LockCount = v7;
  return result;
}

//----- (004236D0) --------------------------------------------------------
void __usercall CIOCriticalSection::Leave(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  if ( !*(_DWORD *)(a1 + 24) )
    sub_422D80(a1, a2, a3, a4);
  *(_DWORD *)(v4 + 28) = 0;
  *(_DWORD *)(v4 + 24) = 0;
  LeaveCriticalSection((LPCRITICAL_SECTION)v4);
}

//----- (00423710) --------------------------------------------------------
int __cdecl CIOSocket::CInit::_CInit()
{
  CIOSocket::FreeIOThread();
  return CIOBuffer::FreeAll();
}

//----- (00423730) --------------------------------------------------------
signed int __usercall CIOSocket::CreateIOThread<eax>(char a1<cl>, int a2<edx>, DWORD a3<ebx>, DWORD a4<edi>, DWORD a5<esi>, int a6)
{
  HANDLE v6; // eax@1
  signed int result; // eax@2
  int i; // [sp+0h] [bp-4h]@3

  v6 = GetCurrentProcess();
  SetProcessPriorityBoost(v6, 1);
  dword_4E0FD8 = 0;
  hEvent = CreateEventA(0, 0, 0, 0);
  CompletionPort = CreateIoCompletionPort((HANDLE)0xFFFFFFFF, 0, 0, 0);
  CIOSocket::CIOTimerInstance::OnTimerCallback(&unk_4E1020, 0);
  sub_423980((int)&unk_4E1020, a3, a4, a5, &dword_4E1028);
  if ( CIOObject::RegisterWait((int)&unk_4E1020, a3, a4, a5, hEvent) )
  {
    dword_4E0DC8 = (int)CMemory::_malloc(4 * a6);
    dword_4E0DC4 = (int)CMemory::_malloc(4 * a6);
    dword_4E0DC0 = a6;
    for ( i = 0; i < a6; ++i )
      *(_DWORD *)(dword_4E0DC8 + 4 * i) = _beginthreadex(0, 0, (int)CIOSocket::IOThread, i, 0, (LPDWORD)(dword_4E0DC4 + 4 * i));
    result = 1;
  }
  else
  {
    sub_4328C0("RegisterWait error for timer");
    result = 0;
  }
  return result;
}

//----- (00423840) --------------------------------------------------------
DWORD __thiscall CIOSocket::AddIOThread(DWORD this)
{
  DWORD result; // eax@2
  DWORD ThreadId; // [sp+0h] [bp-4h]@1

  ThreadId = this;
  if ( CompletionPort )
  {
    dword_4E0DC8 = (int)CMemory::_realloc(dword_4E0DC8, 4 * dword_4E0DC0 + 4);
    dword_4E0DC4 = (int)CMemory::_realloc(dword_4E0DC4, 4 * dword_4E0DC0 + 4);
    *(_DWORD *)(dword_4E0DC8 + 4 * dword_4E0DC0) = _beginthreadex(0, 0, (int)CIOSocket::IOThread, dword_4E0DC0, 0, &ThreadId);
    *(_DWORD *)(dword_4E0DC4 + 4 * dword_4E0DC0++) = ThreadId;
    result = ThreadId;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004238F0) --------------------------------------------------------
signed int __cdecl CIOSocket::CloseIOThread()
{
  signed int result; // eax@2

  if ( InterlockedExchange(&dword_4E0FD8, 1) )
  {
    result = 0;
  }
  else
  {
    SetEvent(hEvent);
    result = 1;
  }
  return result;
}

//----- (00423920) --------------------------------------------------------
void __cdecl CIOSocket::FreeIOThread()
{
  CMemory::_free(dword_4E0DC8);
  CMemory::_free(dword_4E0DC4);
  dword_4E0DC8 = 0;
  dword_4E0DC4 = 0;
}

//----- (00423980) --------------------------------------------------------
LONG __userpurge sub_423980<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, volatile LONG *lpAddend)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( InterlockedIncrement((volatile LONG *)(a1 + 4)) == 1 )
  {
    sub_422D80(1, a2, a3, a4);
    *(_DWORD *)(v6 + 4) = 100;
  }
  return InterlockedIncrement(lpAddend);
}

//----- (004239C0) --------------------------------------------------------
int __userpurge sub_4239C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int lpAddend)
{
  int result; // eax@2
  int v6; // eax@2
  int v7; // eax@6
  int v8; // eax@8
  int v9; // [sp+0h] [bp-Ch]@1

  v9 = a1;
  if ( InterlockedDecrement((volatile LONG *)lpAddend) >= 0 )
  {
    result = InterlockedDecrement((volatile LONG *)(v9 + 4));
    if ( result <= 0 )
    {
      if ( result >= 0 )
      {
        if ( *(_DWORD *)lpAddend )
        {
          sub_422B30("CIOObject::Release %p %p %x %d\n", v9);
          sub_422D80(v8, a2, a3, a4);
          result = lpAddend;
          *(_DWORD *)lpAddend = 100;
          *(_DWORD *)(v9 + 4) = 100;
        }
        else
        {
          result = (*(int (__thiscall **)(int))(*(_DWORD *)v9 + 4))(v9);
        }
      }
      else
      {
        sub_422B30("CIOObject::Release %p %p %d\n", v9);
        result = sub_422D80(v7, a2, a3, a4);
        *(_DWORD *)(v9 + 4) = 100;
      }
    }
  }
  else
  {
    sub_422B30("CIOObject::Release %p %p %x %d\n", v9);
    sub_422D80(v6, a2, a3, a4);
    result = lpAddend;
    *(_DWORD *)lpAddend = 100;
    *(_DWORD *)(v9 + 4) = 100;
  }
  return result;
}

//----- (00423AC0) --------------------------------------------------------
signed int __userpurge CIOObject::RegisterWait<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  signed int result; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E0FE8, a2, a3, a4);
  if ( (signed int)nCount < 64 )
  {
    *(&Handles + nCount) = a5;
    dword_4E0DD0[nCount++] = v6;
    SetEvent(hEvent);
    CIOCriticalSection::Leave((int)&unk_4E0FE8, a2, a3, a4);
    result = 1;
  }
  else
  {
    CIOCriticalSection::Leave((int)&unk_4E0FE8, a2, a3, a4);
    result = 0;
  }
  return result;
}
// 4E0DD0: using guessed type int dword_4E0DD0[];

//----- (00423B40) --------------------------------------------------------
void __userpurge CIOObject::AddTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // ST0C_4@1
  int v7; // eax@1
  char v8; // [sp+4h] [bp-Ch]@1
  int v9; // [sp+18h] [bp+8h]@1

  v6 = a1;
  sub_423980(a1, a2, a3, a4, (volatile LONG *)(a1 + 8));
  v9 = a5 + GetTickCount();
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E0FE8, a2, a3, a4);
  v7 = CIOSocket::CIOTimer::CIOTimer((int)&v8, v6, v9, a6);
  sub_424D70((int)&unk_4E100C, v7);
  if ( dword_4E0FD0 - v9 <= 0 )
  {
    CIOCriticalSection::Leave((int)&unk_4E0FE8, a2, a3, a4);
  }
  else
  {
    dword_4E0FD0 = v9;
    CIOCriticalSection::Leave((int)&unk_4E0FE8, a2, a3, a4);
    SetEvent(hEvent);
  }
}
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423BD0) --------------------------------------------------------
int __thiscall CIOSocket::CIOTimer::CIOTimer(int this, int a2, int a3, int a4)
{
  *(_DWORD *)this = a3;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = a4;
  return this;
}

//----- (00423C00) --------------------------------------------------------
BOOL __userpurge CIOObject::OnTimerCallback<eax>(ULONG_PTR a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, DWORD dwNumberOfBytesTransferred)
{
  BOOL result; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  result = PostQueuedCompletionStatus(CompletionPort, dwNumberOfBytesTransferred, a1, 0);
  if ( !result )
  {
    sub_422D80(0, a2, a3, a4);
    result = CIOObject::Release(v6, a2, a3, a4);
  }
  return result;
}

//----- (00423C40) --------------------------------------------------------
int __userpurge CIOObject::OnIOCallback<eax>(int a1<eax>, int a2<ecx>, DWORD a3<ebx>, DWORD a4<edi>, DWORD a5<esi>, int a6, int a7, int a8)
{
  int v9; // [sp+0h] [bp-4h]@1

  v9 = a2;
  if ( a8 )
    sub_422D80(a1, a3, a4, a5);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 8))(v9, a7);
  return sub_4239C0(v9, a3, a4, a5, v9 + 8);
}

//----- (00423C80) --------------------------------------------------------
int __thiscall CIOSocket::CIOTimerInstance::OnTimerCallback(void *this, int a2)
{
  int result; // eax@1
  int v3; // ST0C_4@1
  DWORD v4; // eax@1
  int v5; // eax@1
  char v6; // [sp+4h] [bp-Ch]@1

  v3 = (int)this;
  v4 = GetTickCount();
  v5 = CIOSocket::CIOTimer::CIOTimer((int)&v6, v3, v4 + 86400000, a2);
  sub_424D70((int)&unk_4E100C, v5);
  result = sub_424D50((int)&unk_4E100C);
  dword_4E0FD0 = *(_DWORD *)result;
  return result;
}
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423CD0) --------------------------------------------------------
DWORD __stdcall CIOSocket::CIOTimerInstance::OnIOCallback(int a1, int a2, int a3)
{
  HANDLE v3; // eax@4

  if ( a2 )
    CIOObject::PostObject((ULONG_PTR)&unk_4E1020, a2 - 1);
  else
    SetEvent(hEvent);
  v3 = GetCurrentThread();
  return SuspendThread(v3);
}

//----- (00423D10) --------------------------------------------------------
int __userpurge CIOSocket::WaitThread<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v4; // eax@3
  int v6; // eax@10
  int v7; // [sp+4h] [bp-18h]@2
  int v8; // [sp+8h] [bp-14h]@2
  int i; // [sp+Ch] [bp-10h]@2
  DWORD v10; // [sp+10h] [bp-Ch]@1
  DWORD v11; // [sp+14h] [bp-8h]@1
  DWORD v12; // [sp+18h] [bp-4h]@6

  while ( 1 )
  {
    v11 = GetTickCount();
    v10 = dword_4E0FD0 - v11;
    if ( (signed int)(dword_4E0FD0 - v11) <= 0 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E0FE8, a1, a2, a3);
      v7 = sub_424D50((int)&unk_4E100C);
      v8 = *(_DWORD *)(v7 + 4);
      for ( i = *(_DWORD *)(v7 + 8); ; i = *(_DWORD *)(v7 + 8) )
      {
        sub_424DC0((int)&unk_4E100C);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v8 + 12))(v8, i);
        v4 = sub_424D50((int)&unk_4E100C);
        *(_DWORD *)v7 = *(_DWORD *)v4;
        *(_DWORD *)(v7 + 4) = *(_DWORD *)(v4 + 4);
        *(_DWORD *)(v7 + 8) = *(_DWORD *)(v4 + 8);
        v10 = *(_DWORD *)v7 - v11;
        if ( (signed int)v10 > 0 )
          break;
        v8 = *(_DWORD *)(v7 + 4);
      }
      dword_4E0FD0 = *(_DWORD *)v7;
      CIOCriticalSection::Leave((int)&unk_4E0FE8, a1, a2, a3);
    }
    v12 = WaitForMultipleObjects(nCount, &Handles, 0, v10);
    if ( dword_4E0FD8 )
      break;
    if ( v12 < nCount )
      (*(void (__thiscall **)(int))(*(_DWORD *)dword_4E0DD0[v12] + 16))(dword_4E0DD0[v12]);
  }
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E0FE8, a1, a2, a3);
  while ( !sub_424D30((int)&unk_4E100C) )
  {
    v6 = sub_424D50((int)&unk_4E100C);
    sub_4239C0(*(_DWORD *)(v6 + 4), a1, a2, a3, *(_DWORD *)(v6 + 4) + 8);
    sub_424DC0((int)&unk_4E100C);
  }
  CIOCriticalSection::Leave((int)&unk_4E0FE8, a1, a2, a3);
  CIOObject::PostObject((ULONG_PTR)&unk_4E1020, dword_4E0DC0 - 1);
  WaitForSingleObject(hEvent, 0xFFFFFFFFu);
  CloseHandle(hEvent);
  return 0;
}
// 4E0DD0: using guessed type int dword_4E0DD0[];
// 4E0FD0: using guessed type int dword_4E0FD0;

//----- (00423EC0) --------------------------------------------------------
void __cdecl CIOSocket::IOThread()
{
  HANDLE v0; // eax@1
  unsigned __int32 CompletionKey; // [sp+0h] [bp-10h]@2
  int v2; // [sp+4h] [bp-Ch]@2
  DWORD NumberOfBytesTransferred; // [sp+8h] [bp-8h]@2
  LPOVERLAPPED Overlapped; // [sp+Ch] [bp-4h]@2

  v0 = GetCurrentThread();
  SetThreadIdealProcessor(v0, 0x20u);
  while ( 1 )
  {
    v2 = GetQueuedCompletionStatus(CompletionPort, &NumberOfBytesTransferred, &CompletionKey, &Overlapped, 0xFFFFFFFFu);
    InterlockedIncrement(&dword_4E0FDC);
    (*(void (__thiscall **)(unsigned __int32, int, DWORD, LPOVERLAPPED))(*(_DWORD *)CompletionKey + 20))(
      CompletionKey,
      v2,
      NumberOfBytesTransferred,
      Overlapped);
    InterlockedDecrement(&dword_4E0FDC);
  }
}

//----- (00423F30) --------------------------------------------------------
void __cdecl CIOSocket::DumpStack()
{
  CIOException::DumpStack(dword_4E0DC0, dword_4E0DC8, dword_4E0DC4);
  CIOException::SendMail();
}

//----- (00423F60) --------------------------------------------------------
int __stdcall sub_423F60(int a1, int a2, int a3, void (__thiscall *a4)(_DWORD))
{
  int result; // eax@1
  char v5; // sf@1

  while ( 1 )
  {
    result = a3 - 1;
    v5 = a3-- - 1 < 0;
    if ( v5 )
      break;
    a4(a1);
    a1 += a2;
  }
  return result;
}

//----- (00423F90) --------------------------------------------------------
void *__cdecl CIOBuffer::Alloc()
{
  char v0; // al@1
  void *v2; // [sp+4h] [bp-8h]@1
  int v3; // [sp+8h] [bp-4h]@1

  v0 = InterlockedIncrement(&dword_4D5B84);
  v3 = 8 * (v0 & 0xF) + 5115952;
  CIOSpinLock::Enter((volatile LONG *)(8 * (v0 & 0xF) + 5115956));
  v2 = *(void **)v3;
  if ( *(_DWORD *)v3 )
  {
    *(_DWORD *)v3 = *((_DWORD *)v2 + 2002);
    CIOSpinLock::Leave((volatile LONG *)(v3 + 4));
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)(v3 + 4));
    v2 = sub_401000(0x1F4Cu);
  }
  *((_DWORD *)v2 + 2000) = 0;
  *((_DWORD *)v2 + 2001) = 1;
  *((_DWORD *)v2 + 2002) = 0;
  return v2;
}

//----- (00424040) --------------------------------------------------------
LONG __thiscall CIOBuffer::Free(void *this)
{
  void *v2; // ST04_4@1
  char v3; // al@1
  int v4; // ST08_4@1

  v2 = this;
  v3 = InterlockedDecrement(&dword_4E0FE4);
  v4 = 8 * (v3 & 0xF) + 5115952;
  CIOSpinLock::Enter((volatile LONG *)(8 * (v3 & 0xF) + 5115956));
  *((_DWORD *)v2 + 2002) = *(_DWORD *)v4;
  *(_DWORD *)v4 = v2;
  return CIOSpinLock::Leave((volatile LONG *)(v4 + 4));
}

//----- (004240A0) --------------------------------------------------------
int __cdecl CIOBuffer::FreeAll()
{
  int result; // eax@6
  int v1; // [sp+8h] [bp-8h]@4
  signed int i; // [sp+Ch] [bp-4h]@1

  for ( i = 0; i < 16; ++i )
  {
    CIOSpinLock::Enter((volatile LONG *)(8 * i + 5115956));
    while ( 1 )
    {
      v1 = dword_4E1030[2 * i];
      if ( !dword_4E1030[2 * i] )
        break;
      dword_4E1030[2 * i] = *(_DWORD *)(v1 + 8008);
      sub_401020(v1);
    }
    CIOSpinLock::Leave((volatile LONG *)(8 * i + 5115956));
    result = i + 1;
  }
  return result;
}

//----- (00424120) --------------------------------------------------------
int __userpurge CIOSocket::CIOSocket<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CIOObject::CIOObject(a1);
  *(_DWORD *)v6 = &off_4B6624;
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v6 + 20));
  *(_DWORD *)(v6 + 16) = a5;
  if ( *(_DWORD *)(v6 + 16) != -1 )
    CIOObject::AddRef(v6, a2, a3, a4);
  memset((void *)(v6 + 52), 0, 0x14u);
  memset((void *)(v6 + 72), 0, 0x14u);
  *(_DWORD *)(v6 + 92) = CIOBuffer::Alloc();
  *(_DWORD *)(v6 + 104) = 0;
  *(_DWORD *)(v6 + 100) = 0;
  *(_DWORD *)(v6 + 96) = 0;
  return v6;
}
// 4B6624: using guessed type int (__stdcall *off_4B6624)(int);

//----- (004241C0) --------------------------------------------------------
int __userpurge CIOSocket::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CIOSocket::_CIOSocket(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (004241F0) --------------------------------------------------------
int __usercall CIOSocket::_CIOSocket<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // ST04_4@3
  int v6; // [sp+0h] [bp-8h]@1

  v6 = a1;
  *(_DWORD *)a1 = &off_4B6624;
  CIOBuffer::Release(*(_DWORD *)(a1 + 92));
  while ( *(_DWORD *)(v6 + 96) )
  {
    v4 = *(void **)(v6 + 96);
    *(_DWORD *)(v6 + 96) = *(_DWORD *)(*(_DWORD *)(v6 + 96) + 8008);
    CIOBuffer::Free(v4);
  }
  CIOCriticalSection::_CIOCriticalSection(v6 + 20, a2, a3, a4);
  return std__locale__facet___facet(v6);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);
// 4B6624: using guessed type int (__stdcall *off_4B6624)(int);

//----- (00424260) --------------------------------------------------------
void __usercall CIOSocket::Close(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  char optval[2]; // [sp+4h] [bp-8h]@2
  __int16 v6; // [sp+6h] [bp-6h]@2
  SOCKET s; // [sp+8h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 20), a2, a3, a4);
  s = InterlockedExchange((volatile LONG *)(v4 + 16), -1);
  CIOCriticalSection::Leave(v4 + 20, a2, a3, a4);
  if ( s != -1 )
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 28))(v4);
    strcpy(optval, "\x01");
    v6 = 0;
    setsockopt(s, 65535, 128, optval, 4);
    closesocket(s);
    CIOObject::Release(v4, a2, a3, a4);
  }
}

//----- (004242E0) --------------------------------------------------------
void __usercall CIOSocket::GracefulClose(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  LONG v5; // [sp+4h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 20), a2, a3, a4);
  v5 = InterlockedExchange((volatile LONG *)(v4 + 16), -1);
  CIOCriticalSection::Leave(v4 + 20, a2, a3, a4);
  if ( v5 != -1 )
  {
    (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 28))(v4);
    closesocket(v5);
    CIOObject::Release(v4, a2, a3, a4);
  }
}

//----- (00424340) --------------------------------------------------------
int __userpurge CIOSocket::OnIOCallback<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@4
  int v8; // [sp+0h] [bp-4h]@1

  v8 = a1;
  if ( a5 )
  {
    if ( a7 == a1 + 72 )
    {
      CIOSocket::WriteCallback(a1, a2, a3, a4, a6);
      result = CIOObject::Release(v8, a2, a3, a4);
    }
    else
    {
      if ( a7 == a1 + 52 )
      {
        CIOSocket::ReadCallback(a1, a2, a3, a4, a6);
        result = CIOObject::Release(v8, a2, a3, a4);
      }
      else
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a1 + 8))(a1, a6);
        result = sub_4239C0(v8, a2, a3, a4, v8 + 8);
      }
    }
  }
  else
  {
    if ( a7 == a1 + 52 )
      CIOSocket::Close(a1, a2, a3, a4);
    result = CIOObject::Release(v8, a2, a3, a4);
  }
  return result;
}

//----- (004243D0) --------------------------------------------------------
void __usercall CIOSocket::OnCreate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  CIOSocket::Read(a1, a2, a3, a4, 0);
}

//----- (004243F0) --------------------------------------------------------
void __userpurge CIOSocket::ReadCallback(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  if ( a5 )
  {
    *(_DWORD *)(*(_DWORD *)(a1 + 92) + 8000) += a5;
    (*(void (__thiscall **)(_DWORD))(*(_DWORD *)a1 + 32))(a1);
  }
  else
  {
    CIOSocket::Close(a1, a2, a3, a4);
  }
}

//----- (00424440) --------------------------------------------------------
void __userpurge CIOSocket::Read(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, size_t a5)
{
  void *v5; // ST24_4@2
  int v6; // [sp+0h] [bp-1Ch]@1
  DWORD v7; // [sp+4h] [bp-18h]@6
  DWORD NumberOfBytesRecvd; // [sp+Ch] [bp-10h]@4
  struct _WSABUF Buffers; // [sp+10h] [bp-Ch]@4
  DWORD Flags; // [sp+18h] [bp-4h]@4

  v6 = a1;
  *(_DWORD *)(*(_DWORD *)(a1 + 92) + 8000) -= a5;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 92) + 8004) == 1 )
  {
    memcpy_0(*(void **)(a1 + 92), (const void *)(*(_DWORD *)(*(_DWORD *)(a1 + 92) + 8000) + *(_DWORD *)(a1 + 92)), a5);
  }
  else
  {
    v5 = CIOBuffer::Alloc();
    memcpy(v5, (const void *)(*(_DWORD *)(*(_DWORD *)(v6 + 92) + 8000) + *(_DWORD *)(v6 + 92)), a5);
    CIOBuffer::Release(*(_DWORD *)(v6 + 92));
    *(_DWORD *)(v6 + 92) = v5;
  }
  *(_DWORD *)(*(_DWORD *)(v6 + 92) + 8000) = a5;
  CIOObject::AddRef(v6, a2, a3, a4);
  Buffers.len = 8000 - *(_DWORD *)(*(_DWORD *)(v6 + 92) + 8000);
  Buffers.buf = (char *)(*(_DWORD *)(*(_DWORD *)(v6 + 92) + 8000) + *(_DWORD *)(v6 + 92));
  Flags = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v6 + 20), a2, a3, a4);
  if ( WSARecv(*(_DWORD *)(v6 + 16), &Buffers, 1u, &NumberOfBytesRecvd, &Flags, (LPWSAOVERLAPPED)(v6 + 52), 0)
    && GetLastError() != 997 )
  {
    v7 = GetLastError();
    CIOCriticalSection::Leave(v6 + 20, a2, a3, a4);
    if ( v7 != 10038 )
    {
      if ( v7 != 10054 )
      {
        if ( v7 != 10053 )
        {
          if ( v7 != 10058 )
            sub_4328C0("CIOSocket::Read %x(%x) err = %d", *(_DWORD *)(v6 + 16), v6, v7);
        }
      }
    }
    CIOSocket::Close(v6, a2, a3, a4);
    CIOObject::Release(v6, a2, a3, a4);
  }
  else
  {
    CIOCriticalSection::Leave(v6 + 20, a2, a3, a4);
  }
}

//----- (004245E0) --------------------------------------------------------
void __userpurge CIOSocket::WriteCallback(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-18h]@1
  DWORD v6; // [sp+4h] [bp-14h]@6
  struct _WSABUF Buffers; // [sp+8h] [bp-10h]@4
  DWORD NumberOfBytesSent; // [sp+10h] [bp-8h]@4
  void *v9; // [sp+14h] [bp-4h]@3

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 20), a2, a3, a4);
  if ( a5 == *(_DWORD *)(*(_DWORD *)(v5 + 96) + 8000) )
  {
    *(_DWORD *)(v5 + 104) -= *(_DWORD *)(*(_DWORD *)(v5 + 96) + 8000);
    v9 = *(void **)(v5 + 96);
    *(_DWORD *)(v5 + 96) = *(_DWORD *)(*(_DWORD *)(v5 + 96) + 8008);
    if ( *(_DWORD *)(v5 + 96) )
    {
      CIOObject::AddRef(v5, a2, a3, a4);
      Buffers.len = *(_DWORD *)(*(_DWORD *)(v5 + 96) + 8000);
      Buffers.buf = *(char **)(v5 + 96);
      if ( WSASend(*(_DWORD *)(v5 + 16), &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)(v5 + 72), 0)
        && GetLastError() != 997 )
      {
        v6 = GetLastError();
        CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
        if ( v6 != 10038 )
        {
          if ( v6 != 10054 )
          {
            if ( v6 != 10053 )
            {
              if ( v6 != 10058 )
                sub_4328C0("CIOSocket::WriteCallback %x(%x) err=%d", *(_DWORD *)(v5 + 16), v5, v6);
            }
          }
        }
        CIOObject::Release(v5, a2, a3, a4);
      }
      else
      {
        CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
      }
    }
    else
    {
      *(_DWORD *)(v5 + 100) = 0;
      CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
    }
    CIOBuffer::Free(v9);
  }
  else
  {
    sub_4328C0(
      "different write count %x(%x) %d != %d",
      *(_DWORD *)(v5 + 16),
      v5,
      a5,
      *(_DWORD *)(*(_DWORD *)(v5 + 96) + 8000));
    CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
  }
}

//----- (00424760) --------------------------------------------------------
void __userpurge CIOSocket::Write(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-14h]@1
  DWORD v6; // [sp+4h] [bp-10h]@8
  struct _WSABUF Buffers; // [sp+8h] [bp-Ch]@6
  DWORD NumberOfBytesSent; // [sp+10h] [bp-4h]@6

  v5 = a1;
  if ( *(_DWORD *)(a5 + 8000) )
  {
    if ( *(_DWORD *)(a5 + 8000) > 0x1F40u )
      sub_422D80(a5, a2, a3, a4);
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v5 + 20), a2, a3, a4);
    *(_DWORD *)(v5 + 104) += *(_DWORD *)(a5 + 8000);
    if ( *(_DWORD *)(v5 + 100) )
    {
      if ( *(_DWORD *)(v5 + 96) == *(_DWORD *)(v5 + 100)
        || (unsigned int)(*(_DWORD *)(a5 + 8000) + *(_DWORD *)(*(_DWORD *)(v5 + 100) + 8000)) > 0x1F40 )
      {
        *(_DWORD *)(*(_DWORD *)(v5 + 100) + 8008) = a5;
        *(_DWORD *)(v5 + 100) = a5;
        CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
      }
      else
      {
        memcpy(
          (void *)(*(_DWORD *)(*(_DWORD *)(v5 + 100) + 8000) + *(_DWORD *)(v5 + 100)),
          (const void *)a5,
          *(_DWORD *)(a5 + 8000));
        *(_DWORD *)(*(_DWORD *)(v5 + 100) + 8000) += *(_DWORD *)(a5 + 8000);
        CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
        CIOBuffer::Free((void *)a5);
      }
    }
    else
    {
      *(_DWORD *)(v5 + 100) = a5;
      *(_DWORD *)(v5 + 96) = a5;
      CIOObject::AddRef(v5, a2, a3, a4);
      Buffers.len = *(_DWORD *)(a5 + 8000);
      Buffers.buf = (char *)a5;
      if ( WSASend(*(_DWORD *)(v5 + 16), &Buffers, 1u, &NumberOfBytesSent, 0, (LPWSAOVERLAPPED)(v5 + 72), 0)
        && GetLastError() != 997 )
      {
        v6 = GetLastError();
        CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
        if ( v6 != 10038 )
        {
          if ( v6 != 10054 )
          {
            if ( v6 != 10053 )
            {
              if ( v6 != 10058 )
                sub_4328C0("CIOSocket::Write %x(%x) err=%d", *(_DWORD *)(v5 + 16), v5, v6);
            }
          }
        }
        CIOObject::Release(v5, a2, a3, a4);
      }
      else
      {
        CIOCriticalSection::Leave(v5 + 20, a2, a3, a4);
      }
    }
  }
  else
  {
    CIOBuffer::Free((void *)a5);
  }
}

//----- (00424950) --------------------------------------------------------
int __thiscall CIOServer::CIOServer(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B66D8;
  *(_DWORD *)(v2 + 16) = -1;
  *(_DWORD *)(v2 + 20) = 0;
  return v2;
}
// 4B66D8: using guessed type int (__stdcall *off_4B66D8)(int);

//----- (00424990) --------------------------------------------------------
int __thiscall CIOServer::_scalar_deleting_destructor_(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  CIOServer::_CIOServer(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (004249C0) --------------------------------------------------------
int __thiscall CIOServer::_CIOServer(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  *(_DWORD *)this = &off_4B66D8;
  CIOServer::Close((BOOL)this);
  return std__locale__facet___facet(v2);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);
// 4B66D8: using guessed type int (__stdcall *off_4B66D8)(int);

//----- (004249F0) --------------------------------------------------------
BOOL __thiscall CIOServer::Close(BOOL this)
{
  BOOL result; // eax@1
  BOOL v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  result = this;
  if ( *(_DWORD *)(this + 16) != -1 )
  {
    closesocket(*(_DWORD *)(this + 16));
    result = v2;
    *(_DWORD *)(v2 + 16) = -1;
  }
  if ( *(_DWORD *)(v2 + 20) )
  {
    result = WSACloseEvent(*(HANDLE *)(v2 + 20));
    *(_DWORD *)(v2 + 20) = 0;
  }
  return result;
}

//----- (00424A40) --------------------------------------------------------
signed int __userpurge CIOServer::Start<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int hostshort)
{
  int v5; // eax@2
  int v7; // eax@4
  int v8; // eax@6
  int v9; // [sp+0h] [bp-18h]@1
  struct sockaddr name; // [sp+4h] [bp-14h]@3
  int v11; // [sp+14h] [bp-4h]@1

  v11 = dword_4D9830;
  v9 = a1;
  *(_DWORD *)(a1 + 16) = socket(2, 1, 0);
  if ( *(_DWORD *)(v9 + 16) == -1 )
  {
    v5 = WSAGetLastError();
    sub_4328C0("socket error %d", v5);
    return 0;
  }
  name.sa_family = 2;
  *(_DWORD *)&name.sa_data[2] = htonl(0);
  *(_WORD *)&name.sa_data[0] = htons(hostshort);
  if ( bind(*(_DWORD *)(v9 + 16), &name, 16) )
  {
    v7 = WSAGetLastError();
    sub_4328C0("bind error %d", v7);
  }
  else
  {
    if ( listen(*(_DWORD *)(v9 + 16), 5) )
    {
      v8 = WSAGetLastError();
      sub_4328C0("listen error %d", v8);
    }
    else
    {
      *(_DWORD *)(v9 + 20) = WSACreateEvent();
      WSAEventSelect(*(_DWORD *)(v9 + 16), *(HANDLE *)(v9 + 20), 8);
      if ( CIOObject::RegisterWait(v9, a2, a3, a4, *(void **)(v9 + 20)) )
        return 1;
      sub_4328C0("RegisterWait error on port %d", hostshort);
    }
  }
  CIOServer::Close(v9);
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00424B70) --------------------------------------------------------
BOOL __thiscall CIOServer::OnWaitCallback(ULONG_PTR this)
{
  ULONG_PTR v2; // ST10_4@1

  v2 = this;
  WSAResetEvent(*(HANDLE *)(this + 20));
  return PostQueuedCompletionStatus(CompletionPort, 0, v2, 0);
}

//----- (00424BA0) --------------------------------------------------------
int __thiscall CIOServer::Stop(int this)
{
  SOCKET v2; // ST08_4@1

  v2 = *(_DWORD *)(this + 16);
  *(_DWORD *)(this + 16) = -1;
  return closesocket(v2);
}

//----- (00424BD0) --------------------------------------------------------
void __userpurge CIOServer::OnIOCallback(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // eax@5
  int v8; // [sp+0h] [bp-24h]@1
  struct sockaddr addr; // [sp+4h] [bp-20h]@1
  int v10; // [sp+14h] [bp-10h]@1
  int v11; // [sp+18h] [bp-Ch]@7
  int addrlen; // [sp+1Ch] [bp-8h]@1
  SOCKET s; // [sp+20h] [bp-4h]@1

  v10 = dword_4D9830;
  v8 = a1;
  addrlen = 16;
  s = accept(*(_DWORD *)(a1 + 16), &addr, &addrlen);
  if ( s == -1 )
  {
    if ( WSAGetLastError() != 10035 )
    {
      if ( *(_DWORD *)(v8 + 16) != -1 )
      {
        v7 = WSAGetLastError();
        sub_4328C0("accept error: %d", v7);
      }
    }
  }
  else
  {
    v11 = (*(int (__thiscall **)(int, SOCKET, struct sockaddr *))(*(_DWORD *)v8 + 24))(v8, s, &addr);
    if ( v11 )
    {
      CIOSocket::Initialize(v11, a2, a3, a4);
      CIOObject::Release(v11, a2, a3, a4);
    }
    else
    {
      closesocket(s);
    }
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00424C80) --------------------------------------------------------
void __usercall CIOSocket::Initialize(ULONG_PTR a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  char v4; // al@2
  int v5; // [sp+0h] [bp-8h]@1
  char optval[4]; // [sp+4h] [bp-4h]@3

  v5 = a1;
  if ( CreateIoCompletionPort(*(HANDLE *)(a1 + 16), CompletionPort, a1, 0) )
  {
    *(_DWORD *)optval = 0;
    setsockopt(*(_DWORD *)(v5 + 16), 65535, 4098, optval, 4);
    *(_DWORD *)optval = 0;
    setsockopt(*(_DWORD *)(v5 + 16), 65535, 4097, optval, 4);
    (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 24))(v5);
  }
  else
  {
    v4 = GetLastError();
    sub_422B30("CreateIoCompletionPort: %d %x %x\n", v4);
    CIOSocket::Close(v5, a2, a3, a4);
  }
}

//----- (00424D30) --------------------------------------------------------
bool __thiscall sub_424D30(int this)
{
  return sub_445B60(this);
}

//----- (00424D50) --------------------------------------------------------
int __thiscall sub_424D50(int this)
{
  return sub_424E10(this);
}

//----- (00424D70) --------------------------------------------------------
int __thiscall sub_424D70(int this, int a2)
{
  int v3; // ST0C_4@1
  int v4; // ST04_4@1
  void *v5; // eax@1
  char v6; // [sp+4h] [bp-8h]@1
  char v7; // [sp+8h] [bp-4h]@1

  v3 = this;
  sub_424E30(this, a2);
  v4 = *(_DWORD *)sub_445B40(v3, &v7);
  v5 = sub_430C20(v3, &v6);
  return sub_4252A0(*(_DWORD *)v5, v4);
}

//----- (00424DC0) --------------------------------------------------------
char __thiscall sub_424DC0(int this)
{
  int v2; // ST0C_4@1
  int v3; // ST04_4@1
  void *v4; // eax@1
  char v5; // [sp+4h] [bp-8h]@1
  char v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_445B40(this, &v6);
  v4 = sub_430C20(v2, &v5);
  sub_4252F0(*(_DWORD *)v4, v3);
  return sub_424EA0(v2);
}

//----- (00424E10) --------------------------------------------------------
int __thiscall sub_424E10(int this)
{
  char v2; // [sp+4h] [bp-4h]@1

  sub_430C20(this, &v2);
  return sub_420010();
}

//----- (00424E30) --------------------------------------------------------
char *__thiscall sub_424E30(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_4311A0(this);
  if ( v2 >= (unsigned int)sub_4461C0(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_424EF0(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_446280(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (00424EA0) --------------------------------------------------------
char __thiscall sub_424EA0(int this)
{
  bool v1; // eax@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  v1 = sub_445B60(this);
  if ( !v1 )
  {
    sub_424F70(*(_DWORD *)(v3 + 8) - 12, *(_DWORD *)(v3 + 8));
    v1 = *(_DWORD *)(v3 + 8) - 12;
    *(_DWORD *)(v3 + 8) = v1;
  }
  return v1;
}

//----- (00424EF0) --------------------------------------------------------
int __thiscall sub_424EF0(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_4311A0(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_431D50(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_424FA0(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_446FA0(v7, a2, v6);
  return a2;
}

//----- (00424F70) --------------------------------------------------------
int __stdcall sub_424F70(int a1, int a2)
{
  return sub_447470(a1, a2);
}

//----- (00424FA0) --------------------------------------------------------
int __thiscall sub_424FA0(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  signed int v5; // esi@3
  void *v6; // eax@11
  void *v7; // eax@11
  void *v8; // ST20_4@11
  int v9; // ST18_4@16
  int v10; // [sp+4h] [bp-24h]@7
  int v11; // [sp+8h] [bp-20h]@1
  int v12; // [sp+10h] [bp-18h]@11
  unsigned int v13; // [sp+18h] [bp-10h]@1
  int v14; // [sp+18h] [bp-10h]@9
  int v15; // [sp+1Ch] [bp-Ch]@1
  int v16; // [sp+20h] [bp-8h]@1
  int v17; // [sp+24h] [bp-4h]@1
  int v18; // [sp+34h] [bp+Ch]@11

  v11 = this;
  v15 = *(_DWORD *)a4;
  v16 = *(_DWORD *)(a4 + 4);
  v17 = *(_DWORD *)(a4 + 8);
  result = sub_4461C0(this);
  v13 = result;
  if ( a3 )
  {
    v5 = sub_446800();
    if ( v5 - sub_4311A0(v11) >= (unsigned int)a3 )
    {
      if ( v13 >= a3 + sub_4311A0(v11) )
      {
        if ( (*(_DWORD *)(v11 + 8) - a2) / 12 >= (unsigned int)a3 )
        {
          v9 = *(_DWORD *)(v11 + 8);
          *(_DWORD *)(v11 + 8) = sub_4474B0(v9 - 12 * a3, v9, *(void **)(v11 + 8));
          sub_4474E0(a2, v9 - 12 * a3, v9);
          result = sub_425370(a2, a2 + 12 * a3, (int)&v15);
        }
        else
        {
          sub_4474B0(a2, *(_DWORD *)(v11 + 8), (void *)(a2 + 12 * a3));
          sub_446280(*(void **)(v11 + 8), a3 - (*(_DWORD *)(v11 + 8) - a2) / 12, (int)&v15);
          *(_DWORD *)(v11 + 8) += 12 * a3;
          result = sub_425370(a2, *(_DWORD *)(v11 + 8) - 12 * a3, (int)&v15);
        }
      }
      else
      {
        if ( sub_446800() - (v13 >> 1) >= v13 )
          v10 = v13 + (v13 >> 1);
        else
          v10 = 0;
        v14 = v10;
        if ( v10 < (unsigned int)(a3 + sub_4311A0(v11)) )
          v14 = a3 + sub_4311A0(v11);
        v6 = sub_446B40(v14);
        v12 = (int)v6;
        v7 = sub_4474B0(*(_DWORD *)(v11 + 4), a2, v6);
        v8 = sub_446280(v7, a3, (int)&v15);
        sub_4474B0(a2, *(_DWORD *)(v11 + 8), v8);
        v18 = a3 + sub_4311A0(v11);
        if ( *(_DWORD *)(v11 + 4) )
        {
          sub_424F70(*(_DWORD *)(v11 + 4), *(_DWORD *)(v11 + 8));
          sub_4338F0(*(_DWORD *)(v11 + 4), (*(_DWORD *)(v11 + 12) - *(_DWORD *)(v11 + 4)) / 12);
        }
        *(_DWORD *)(v11 + 12) = v12 + 12 * v14;
        *(_DWORD *)(v11 + 8) = v12 + 12 * v18;
        result = v12;
        *(_DWORD *)(v11 + 4) = v12;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (00425280) --------------------------------------------------------
int __thiscall sub_425280(void *this, int a2)
{
  return (*(_DWORD *)this - *(_DWORD *)a2) / 12;
}

//----- (004252A0) --------------------------------------------------------
int __cdecl sub_4252A0(char a1, char a2)
{
  int result; // eax@1
  void *v3; // eax@2

  result = sub_47D070(&a2);
  if ( (_BYTE)result )
  {
    sub_4253C0();
    sub_4253C0();
    v3 = sub_4253A0(&a2);
    result = sub_4253D0(a1, *(_DWORD *)v3);
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004252F0) --------------------------------------------------------
int __cdecl sub_4252F0(char a1, char a2)
{
  int result; // eax@1

  result = sub_431D50(&a2, (int)&a1);
  if ( result > 1 )
  {
    sub_4253C0();
    result = sub_425440(a1, a2);
  }
  return result;
}

//----- (00425330) --------------------------------------------------------
void *__cdecl sub_425330(void *a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a1);
  return sub_431E90(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00425370) --------------------------------------------------------
int __cdecl sub_425370(int a1, int a2, int a3)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    *(_DWORD *)a1 = *(_DWORD *)a3;
    *(_DWORD *)(a1 + 4) = *(_DWORD *)(a3 + 4);
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(a3 + 8);
    result = a1 + 12;
    a1 += 12;
  }
  return result;
}

//----- (004253A0) --------------------------------------------------------
void *__thiscall sub_4253A0(void *this)
{
  *(_DWORD *)this -= 12;
  return this;
}

//----- (004253C0) --------------------------------------------------------
int __cdecl sub_4253C0()
{
  return 0;
}

//----- (004253D0) --------------------------------------------------------
int __cdecl sub_4253D0(char a1, char a2)
{
  int result; // eax@1
  int v3; // eax@2
  int v4; // [sp+Ch] [bp-4h]@1

  result = sub_431D50(&a2, (int)&a1);
  v4 = result;
  if ( result > 0 )
  {
    v3 = sub_420010();
    result = sub_425570(a1, v4, 0, *(_DWORD *)v3, *(_DWORD *)(v3 + 4), *(_DWORD *)(v3 + 8));
  }
  return result;
}

//----- (00425440) --------------------------------------------------------
int __cdecl sub_425440(char a1, char a2)
{
  int v3; // eax@1
  int v4; // ST0C_4@1
  int v5; // ST10_4@1
  int v6; // ST14_4@1
  int v7; // ST08_4@1
  int v8; // eax@1
  char v9; // [sp+0h] [bp-18h]@1
  char v10; // [sp+4h] [bp-14h]@1
  char v11; // [sp+8h] [bp-10h]@1
  int v12; // [sp+Ch] [bp-Ch]@1
  int v13; // [sp+10h] [bp-8h]@1
  int v14; // [sp+14h] [bp-4h]@1

  sub_425520(&a2, (int)&v11, 1);
  v3 = sub_420010();
  v12 = *(_DWORD *)v3;
  v13 = *(_DWORD *)(v3 + 4);
  v14 = *(_DWORD *)(v3 + 8);
  sub_4253C0();
  v4 = v12;
  v5 = v13;
  v6 = v14;
  v7 = *(_DWORD *)sub_425520(&a2, (int)&v10, 1);
  v8 = sub_425520(&a2, (int)&v9, 1);
  return sub_425640(a1, *(_DWORD *)v8, v7, v4, v5, v6);
}

//----- (004254E0) --------------------------------------------------------
int __cdecl sub_4254E0(int a1, int a2, int a3)
{
  while ( a1 != a2 )
  {
    a2 -= 12;
    a3 -= 12;
    *(_DWORD *)a3 = *(_DWORD *)a2;
    *(_DWORD *)(a3 + 4) = *(_DWORD *)(a2 + 4);
    *(_DWORD *)(a3 + 8) = *(_DWORD *)(a2 + 8);
  }
  return a3;
}

//----- (00425520) --------------------------------------------------------
int __thiscall sub_425520(void *this, int a2, int a3)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = *(_DWORD *)this;
  *(_DWORD *)a2 = *(_DWORD *)sub_425550(&v4, a3);
  return a2;
}

//----- (00425550) --------------------------------------------------------
void *__thiscall sub_425550(void *this, int a2)
{
  return sub_447350(this, -a2);
}

//----- (00425570) --------------------------------------------------------
int __cdecl sub_425570(char a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // eax@3
  int v7; // esi@4
  int v8; // eax@4
  int result; // eax@5
  char v10; // [sp+4h] [bp-14h]@5
  char v11; // [sp+8h] [bp-10h]@4
  char v12; // [sp+Ch] [bp-Ch]@4
  char v13; // [sp+10h] [bp-8h]@3
  int i; // [sp+14h] [bp-4h]@1

  for ( i = (a2 - 1) / 2; a3 < a2; i = (i - 1) / 2 )
  {
    sub_446FA0(&a1, (int)&v13, i);
    v6 = sub_420010();
    if ( !sub_4256A0((void *)v6, (int)&a4) )
      break;
    sub_446FA0(&a1, (int)&v11, i);
    v7 = sub_420010();
    sub_446FA0(&a1, (int)&v12, a2);
    v8 = sub_420010();
    *(_DWORD *)v8 = *(_DWORD *)v7;
    *(_DWORD *)(v8 + 4) = *(_DWORD *)(v7 + 4);
    *(_DWORD *)(v8 + 8) = *(_DWORD *)(v7 + 8);
    a2 = i;
  }
  sub_446FA0(&a1, (int)&v10, a2);
  result = sub_420010();
  *(_DWORD *)result = a4;
  *(_DWORD *)(result + 4) = a5;
  *(_DWORD *)(result + 8) = a6;
  return result;
}

//----- (00425640) --------------------------------------------------------
int __cdecl sub_425640(char a1, char a2, char a3, int a4, int a5, int a6)
{
  int v7; // esi@1
  int v8; // eax@1
  int v9; // ST0C_4@1
  int v10; // ST10_4@1
  int v11; // ST14_4@1
  int v12; // eax@1

  v7 = sub_420010();
  v8 = sub_420010();
  *(_DWORD *)v8 = *(_DWORD *)v7;
  *(_DWORD *)(v8 + 4) = *(_DWORD *)(v7 + 4);
  *(_DWORD *)(v8 + 8) = *(_DWORD *)(v7 + 8);
  v9 = a4;
  v10 = a5;
  v11 = a6;
  v12 = sub_431D50(&a2, (int)&a1);
  return sub_4256E0(a1, 0, v12, v9, v10, v11);
}

//----- (004256A0) --------------------------------------------------------
char __stdcall sub_4256A0(void *a1, int a2)
{
  return CIOSocket::CIOTimer::operator_(a1, a2);
}

//----- (004256C0) --------------------------------------------------------
char __thiscall CIOSocket::CIOTimer::operator_(void *this, int a2)
{
  return *(_DWORD *)this - *(_DWORD *)a2 > 0;
}

//----- (004256E0) --------------------------------------------------------
int __cdecl sub_4256E0(char a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // ST18_4@3
  int v7; // eax@3
  int v8; // esi@5
  int v9; // eax@5
  int v10; // esi@7
  int v11; // eax@7
  char v13; // [sp+4h] [bp-20h]@7
  char v14; // [sp+8h] [bp-1Ch]@7
  char v15; // [sp+Ch] [bp-18h]@5
  char v16; // [sp+10h] [bp-14h]@5
  char v17; // [sp+14h] [bp-10h]@3
  char v18; // [sp+18h] [bp-Ch]@3
  int i; // [sp+1Ch] [bp-8h]@1
  int v20; // [sp+20h] [bp-4h]@1

  v20 = a2;
  for ( i = 2 * a2 + 2; i < a3; i = 2 * i + 2 )
  {
    sub_446FA0(&a1, (int)&v18, i - 1);
    v6 = sub_420010();
    sub_446FA0(&a1, (int)&v17, i);
    v7 = sub_420010();
    if ( sub_4256A0((void *)v7, v6) )
      --i;
    sub_446FA0(&a1, (int)&v15, i);
    v8 = sub_420010();
    sub_446FA0(&a1, (int)&v16, a2);
    v9 = sub_420010();
    *(_DWORD *)v9 = *(_DWORD *)v8;
    *(_DWORD *)(v9 + 4) = *(_DWORD *)(v8 + 4);
    *(_DWORD *)(v9 + 8) = *(_DWORD *)(v8 + 8);
    a2 = i;
  }
  if ( i == a3 )
  {
    sub_446FA0(&a1, (int)&v13, a3 - 1);
    v10 = sub_420010();
    sub_446FA0(&a1, (int)&v14, a2);
    v11 = sub_420010();
    *(_DWORD *)v11 = *(_DWORD *)v10;
    *(_DWORD *)(v11 + 4) = *(_DWORD *)(v10 + 4);
    *(_DWORD *)(v11 + 8) = *(_DWORD *)(v10 + 8);
    a2 = a3 - 1;
  }
  return sub_425570(a1, a2, v20, a4, a5, a6);
}

//----- (00425830) --------------------------------------------------------
void *__thiscall sub_425830(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  sub_425850(this);
  return v2;
}

//----- (00425850) --------------------------------------------------------
int __thiscall sub_425850(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  sub_431260((int)v3, 0);
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00425880) --------------------------------------------------------
int __thiscall CIOSocket::CIOTimerInstance::CIOTimerInstance(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B677C;
  return v2;
}
// 4B677C: using guessed type int (__stdcall *off_4B677C)(int);

//----- (004258A0) --------------------------------------------------------
void *__thiscall CIOBuffer::CSlot::CSlot(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  *(_DWORD *)this = 0;
  std___Container_base___Container_base((char *)this + 4);
  return v2;
}
// 475860: using guessed type int __thiscall std___Container_base___Container_base(_DWORD);

//----- (004258D0) --------------------------------------------------------
int __thiscall sub_4258D0(int this)
{
  return sub_445B20(this);
}

//----- (004258F0) --------------------------------------------------------
int __thiscall CItem::CItem(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B6798;
  *(_DWORD *)(v2 + 24) = 4;
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  *(_DWORD *)(v2 + 44) = 0;
  *(_DWORD *)(v2 + 48) = 0;
  *(_DWORD *)(v2 + 52) = 0;
  *(_DWORD *)(v2 + 56) = 0;
  *(_DWORD *)(v2 + 64) = -1;
  *(_DWORD *)(v2 + 60) = -1;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 76) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  *(_DWORD *)(v2 + 84) = 0;
  *(_DWORD *)(v2 + 88) = 0;
  return v2;
}
// 4B6798: using guessed type int (__stdcall *off_4B6798)(int);

//----- (004259B0) --------------------------------------------------------
int __thiscall CItem::Use(int this, int a2)
{
  return *(_DWORD *)(this + 52);
}

//----- (004259D0) --------------------------------------------------------
int __thiscall CItem::Enchant(int this, int a2, int a3)
{
  return *(_DWORD *)(this + 52);
}

//----- (004259F0) --------------------------------------------------------
int __stdcall CItem::ChangePrefix(int a1, int a2, int a3, int a4)
{
  return 0;
}

//----- (00425A00) --------------------------------------------------------
int __userpurge CItem::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CItem::_CItem(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00425A30) --------------------------------------------------------
int __usercall CItem::_CItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B6798;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B6798: using guessed type int (__stdcall *off_4B6798)(int);

//----- (00425A50) --------------------------------------------------------
signed int __cdecl CItem::InsertInitItem(int a1)
{
  int v1; // eax@1
  signed int result; // eax@2
  char v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+8h] [bp-8h]@1
  char v5; // [sp+Ch] [bp-4h]@1

  v1 = sub_420990((int)&v3, a1 + 64, (int)&a1);
  sub_445DF0((int)&unk_4E10B4, (int)&v4, v1);
  if ( v5 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CItem::InsertInitItem() Duplicate InitItem. (Code:%d)", *(_DWORD *)(a1 + 64));
    result = 0;
  }
  return result;
}

//----- (00425AB0) --------------------------------------------------------
signed int __cdecl CItem::InsertPrefix(int a1)
{
  int v1; // eax@1
  signed int result; // eax@2
  char v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+8h] [bp-8h]@1
  char v5; // [sp+Ch] [bp-4h]@1

  v1 = sub_420990((int)&v3, a1 + 32, (int)&a1);
  sub_445DF0((int)&unk_4E10C0, (int)&v4, v1);
  if ( v5 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CItem::InsertPrefix() Duplicate Prefix. (Index:%d)", *(_DWORD *)(a1 + 32));
    result = 0;
  }
  return result;
}

//----- (00425B10) --------------------------------------------------------
signed int __cdecl CItem::InsertItemGroup(int a1)
{
  int v1; // eax@1
  signed int result; // eax@2
  char v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+8h] [bp-8h]@1
  char v5; // [sp+Ch] [bp-4h]@1

  v1 = sub_420990((int)&v3, a1 + 32, (int)&a1);
  sub_445DF0((int)&unk_4E10CC, (int)&v4, v1);
  if ( v5 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CItem::InsertItemGroup() Duplicate ItemGroup. (Index:%d)", *(_DWORD *)(a1 + 32));
    result = 0;
  }
  return result;
}

//----- (00425B70) --------------------------------------------------------
void __usercall CItem::ReloadItemGroup(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int v3; // edx@1
  char v4; // [sp+0h] [bp-220h]@3
  int v5; // [sp+21Ch] [bp-4h]@1

  v5 = dword_4D9830;
  if ( CObjectDB::CanReload() )
  {
    CObjectDB::CObjectDB((int)&v4, v3);
    sub_47E0D0((volatile LONG *)&unk_4E10D8);
    CItem::ClearItemGroup();
    if ( CObjectDB::Open((int)&v4, "Config\\ItemGroup.txt") )
    {
      sub_47E1C0((volatile LONG *)&unk_4E10D8, a1, a2, a3);
      sub_432890("<ItemGroup> reloading is completed.");
      CObjectDB::_CObjectDB((int)&v4);
    }
    else
    {
      CItem::ClearItemGroup();
      sub_47E1C0((volatile LONG *)&unk_4E10D8, a1, a2, a3);
      sub_4328C0("<ItemGroup> reloading is failed.");
      CObjectDB::_CObjectDB((int)&v4);
    }
  }
  else
  {
    sub_432890("invalid server state to reload <ItemGroup>. Try later.");
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00425C20) --------------------------------------------------------
int __fastcall CObjectDB::CObjectDB(int a1, int a2)
{
  int v3; // ST00_4@1

  v3 = a1;
  CConfig::CConfig(a1, a2);
  return v3;
}

//----- (00425C40) --------------------------------------------------------
void *__thiscall CObjectDB::_CObjectDB(int this)
{
  return CConfig::_CConfig(this);
}

//----- (00425C60) --------------------------------------------------------
int __cdecl CItem::FindInitItem(char a1)
{
  void *v1; // eax@1
  int result; // eax@2
  char v3; // [sp+0h] [bp-8h]@1
  char v4; // [sp+4h] [bp-4h]@1

  sub_44AE20((int)&unk_4E10B4, (int)&v4, (int)&a1);
  v1 = sub_430C20((int)&unk_4E10B4, &v3);
  if ( (unsigned __int8)sub_47D070(v1) )
    result = *(_DWORD *)(sub_420250((int *)&v4) + 4);
  else
    result = 0;
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00425CB0) --------------------------------------------------------
int __cdecl CItem::FindPrefix(char a1)
{
  void *v1; // eax@1
  int result; // eax@2
  char v3; // [sp+0h] [bp-8h]@1
  char v4; // [sp+4h] [bp-4h]@1

  sub_44AE20((int)&unk_4E10C0, (int)&v4, (int)&a1);
  v1 = sub_430C20((int)&unk_4E10C0, &v3);
  if ( (unsigned __int8)sub_47D070(v1) )
    result = *(_DWORD *)(sub_420250((int *)&v4) + 4);
  else
    result = 0;
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00425D00) --------------------------------------------------------
int __cdecl CItem::NewItem(int a1)
{
  int result; // eax@2
  int v2; // eax@22
  int v3; // [sp+0h] [bp-54h]@41
  int v4; // [sp+4h] [bp-50h]@37
  int v5; // [sp+8h] [bp-4Ch]@32
  int v6; // [sp+Ch] [bp-48h]@28
  int v7; // [sp+10h] [bp-44h]@24
  int v8; // [sp+14h] [bp-40h]@20
  int v9; // [sp+18h] [bp-3Ch]@17
  int v10; // [sp+1Ch] [bp-38h]@13
  int v11; // [sp+20h] [bp-34h]@9
  int v12; // [sp+24h] [bp-30h]@5
  int v13; // [sp+2Ch] [bp-28h]@40
  int v14; // [sp+30h] [bp-24h]@36
  int v15; // [sp+38h] [bp-1Ch]@27
  int v16; // [sp+3Ch] [bp-18h]@23
  int v17; // [sp+40h] [bp-14h]@16
  int v18; // [sp+44h] [bp-10h]@12
  int v19; // [sp+48h] [bp-Ch]@8
  int v20; // [sp+4Ch] [bp-8h]@4
  int v21; // [sp+50h] [bp-4h]@7

  if ( *(_DWORD *)(a1 + 176) & (1 << dword_4E35B8) )
  {
    switch ( *(_DWORD *)(a1 + 68) )
    {
      case 2:
        v20 = (int)sub_401000(0x5Cu);
        if ( v20 )
          v12 = CItemOrnament::CItemOrnament(v20, a1);
        else
          v12 = 0;
        v21 = v12;
        goto LABEL_45;
      case 3:
        v19 = (int)sub_401000(0x5Cu);
        if ( v19 )
          v11 = CItemGeneral::CItemGeneral(v19, a1);
        else
          v11 = 0;
        v21 = v11;
        goto LABEL_45;
      case 4:
        v18 = (int)sub_401000(0x5Cu);
        if ( v18 )
          v10 = CItemQuest::CItemQuest(v18, a1);
        else
          v10 = 0;
        v21 = v10;
        goto LABEL_45;
      case 0:
        v17 = (int)sub_401000(0x84u);
        if ( v17 )
          v9 = CItemWeapon::CItemWeapon(v17, a1);
        else
          v9 = 0;
        v21 = v9;
        goto LABEL_45;
      case 1:
        v8 = *(_DWORD *)(a1 + 72);
        if ( v8 == 20 )
        {
          v16 = (int)sub_401000(0x7Cu);
          if ( v16 )
            v7 = CItemMask::CItemMask(v16, a1);
          else
            v7 = 0;
          v21 = v7;
        }
        else
        {
          if ( v8 == 22 )
          {
            v15 = (int)sub_401000(0x84u);
            if ( v15 )
              v6 = CItemStandard::CItemStandard(v15, a1);
            else
              v6 = 0;
            v21 = v6;
          }
          else
          {
            v2 = (int)sub_401000(0x7Cu);
            if ( v2 )
              v5 = CItemDefense::CItemDefense(v2, a1);
            else
              v5 = 0;
            v21 = v5;
          }
        }
        goto LABEL_45;
      case 5:
        v14 = (int)sub_401000(0x5Cu);
        if ( v14 )
          v4 = CItemMoney::CItemMoney(v14, a1);
        else
          v4 = 0;
        v21 = v4;
        goto LABEL_45;
      case 6:
        v13 = (int)sub_401000(0x6Cu);
        if ( v13 )
          v3 = CItemTransform::CItemTransform(v13, a1);
        else
          v3 = 0;
        v21 = v3;
LABEL_45:
        result = v21;
        break;
      default:
        sub_4328C0("CItem::NewItem() Invalid Item Class(%d).", *(_DWORD *)(a1 + 68));
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00425F80) --------------------------------------------------------
int __thiscall CItemMask::CItemMask(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CItemDefense::CItemDefense(this, a2);
  *(_DWORD *)v3 = &off_4B69E0;
  return v3;
}
// 4B69E0: using guessed type int (__stdcall *off_4B69E0)(int);

//----- (00425FB0) --------------------------------------------------------
bool __thiscall CItemDefense::IsBroken(int this)
{
  return *(_DWORD *)(this + 96) <= 0;
}

//----- (00425FD0) --------------------------------------------------------
int __userpurge CItemMask::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CItemStandard::_CItemStandard(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00426000) --------------------------------------------------------
int __thiscall CItemStandard::CItemStandard(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CItemDefense::CItemDefense(this, a2);
  *(_DWORD *)v3 = &off_4B6AC0;
  *(_DWORD *)(v3 + 124) = 0;
  *(_DWORD *)(v3 + 128) = 0;
  return v3;
}
// 4B6AC0: using guessed type int (__stdcall *off_4B6AC0)(int);

//----- (00426040) --------------------------------------------------------
int __usercall CItemStandard::_CItemStandard<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CItemGeneral::_CItemGeneral(a1, a2, a3, a4);
}

//----- (00426060) --------------------------------------------------------
int __cdecl sub_426060(int a1, int *a2)
{
  int result; // eax@2
  int v3; // [sp+0h] [bp-Ch]@1
  char v4[4]; // [sp+4h] [bp-8h]@1
  int v5; // [sp+8h] [bp-4h]@3

  *(_DWORD *)v4 = 0;
  *a2 = sub_418980(*a2, (int)v4);
  v3 = CItem::FindInitItem(v4[0]);
  if ( v3 )
  {
    v5 = 0;
    v5 = CItem::NewItem(v3);
    if ( v5 )
      (*(void (__thiscall **)(int, int, int *))(*(_DWORD *)v5 + 80))(v5, a1, a2);
    else
      *a2 += 24;
    result = v5;
  }
  else
  {
    sub_4328C0("CItem::CreateItem() Invalid index(%d). PID(%d)", *(_DWORD *)v4, a1);
    *a2 += 24;
    result = 0;
  }
  return result;
}

//----- (00426110) --------------------------------------------------------
int __cdecl CItem::CreateItem(char a1, int a2, int a3, int a4)
{
  int result; // eax@2
  int v5; // [sp+0h] [bp-8h]@3
  int v6; // [sp+4h] [bp-4h]@3

  if ( a3 > 0 )
  {
    v6 = 0;
    v5 = CItem::FindInitItem(a1);
    if ( v5 )
    {
      v6 = CItem::NewItem(v5);
      if ( v6 )
        (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v6 + 76))(v6, a2, a3, a4);
    }
    result = v6;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00426170) --------------------------------------------------------
int __cdecl CItem::CreateCheatItem(char a1, int a2, int a3, int a4)
{
  int result; // eax@2
  int v5; // [sp+0h] [bp-8h]@3
  int v6; // [sp+4h] [bp-4h]@3

  if ( a3 > 0 )
  {
    v6 = 0;
    v5 = CItem::FindInitItem(a1);
    if ( v5 )
    {
      v6 = CItem::NewItem(v5);
      if ( v6 )
      {
        (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v6 + 76))(v6, a2, a3, a4);
        if ( !(dword_4E1174[0] & 2) )
          CItem::AddState(v6, 8);
      }
    }
    result = v6;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004261F0) --------------------------------------------------------
int __thiscall CItem::AddState(int this, int a2)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 48) |= a2;
  return result;
}

//----- (00426210) --------------------------------------------------------
int __cdecl CItem::CreateOwnItem(char a1, int a2, int a3, int a4)
{
  int result; // eax@2
  int v5; // [sp+0h] [bp-8h]@3
  int v6; // [sp+4h] [bp-4h]@3

  if ( a3 > 0 )
  {
    v6 = 0;
    v5 = CItem::FindInitItem(a1);
    if ( v5 )
    {
      v6 = CItem::NewItem(v5);
      if ( v6 )
      {
        (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v6 + 76))(v6, a2, a3, a4);
        if ( !(dword_4E1174[0] & 2) )
          CItem::AddState(v6, 128);
      }
    }
    result = v6;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00426290) --------------------------------------------------------
int __usercall CItem::CreateDropItem<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5)
{
  void *v5; // eax@1
  int v7; // eax@3
  char v8; // [sp+0h] [bp-1Ch]@1
  int v9; // [sp+4h] [bp-18h]@5
  int v10; // [sp+8h] [bp-14h]@3
  int v11; // [sp+Ch] [bp-10h]@3
  int v12; // [sp+10h] [bp-Ch]@5
  int v13; // [sp+14h] [bp-8h]@3
  char v14; // [sp+18h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E10D8);
  sub_44AE20((int)&unk_4E10CC, (int)&v14, (int)&a4);
  v5 = sub_430C20((int)&unk_4E10CC, &v8);
  if ( (unsigned __int8)unknown_libname_8(v5) )
  {
    sub_47E080((volatile LONG *)&unk_4E10D8, a1, a2, a3);
    return 0;
  }
  v10 = 0;
  v13 = 0;
  v11 = 0;
  v7 = sub_420250((int *)&v14);
  CItemGroup::GetItemInfo(*(void **)(v7 + 4), (int)&v10, (int)&v13, (int)&v11);
  sub_47E080((volatile LONG *)&unk_4E10D8, a1, a2, a3);
  if ( v11 <= 0 )
    return 0;
  v12 = 0;
  v9 = CItem::FindInitItem(v10);
  if ( v9 )
  {
    if ( (a5 & *(_DWORD *)(v9 + 76)) != a5 )
      return 0;
    v12 = CItem::NewItem(v9);
    if ( v12 )
      (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v12 + 76))(v12, v13, v11, 0);
  }
  return v12;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00426390) --------------------------------------------------------
int __usercall CItem::CreateQuestItem<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  int result; // eax@2
  int v6; // eax@3
  char v7; // [sp+0h] [bp-20h]@1
  int v8; // [sp+4h] [bp-1Ch]@7
  int v9; // [sp+8h] [bp-18h]@3
  int v10; // [sp+Ch] [bp-14h]@3
  int v11; // [sp+10h] [bp-10h]@3
  int v12; // [sp+14h] [bp-Ch]@7
  int v13; // [sp+18h] [bp-8h]@3
  char v14; // [sp+1Ch] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E10D8);
  sub_44AE20((int)&unk_4E10CC, (int)&v14, (int)&a4);
  v4 = sub_430C20((int)&unk_4E10CC, &v7);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    sub_47E080((volatile LONG *)&unk_4E10D8, a1, a2, a3);
    result = 0;
  }
  else
  {
    v9 = 0;
    v13 = 0;
    v10 = 0;
    v6 = sub_420250((int *)&v14);
    v11 = CItemGroup::GetFirstGroup(*(void **)(v6 + 4));
    if ( v11 )
      CGroup::GetItemInfo((void *)v11, (int)&v9, (int)&v13, (int)&v10);
    sub_47E080((volatile LONG *)&unk_4E10D8, a1, a2, a3);
    if ( v10 > 0 )
    {
      v12 = 0;
      v8 = CItem::FindInitItem(v9);
      if ( v8 )
      {
        v12 = CItem::NewItem(v8);
        if ( v12 )
          (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v12 + 76))(v12, v13, v10, 0);
      }
      result = v12;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00426490) --------------------------------------------------------
int __usercall CItem::Close<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  void *v4; // eax@7
  int v6; // [sp+Ch] [bp-24h]@8
  char v7; // [sp+10h] [bp-20h]@7
  char v8; // [sp+14h] [bp-1Ch]@10
  int v9; // [sp+18h] [bp-18h]@3
  int v10; // [sp+1Ch] [bp-14h]@3
  char v11; // [sp+20h] [bp-10h]@2
  char v12; // [sp+24h] [bp-Ch]@5
  char v13; // [sp+28h] [bp-8h]@6
  char v14; // [sp+2Ch] [bp-4h]@1

  sub_40F070((int)&unk_4E10B4, &v14);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E10B4, &v11);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v9 = *(_DWORD *)(sub_420250((int *)&v14) + 4);
    v10 = v9;
    if ( v9 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v10)(v10, 1);
    sub_446090((int *)&v14, (int)&v12, 0);
  }
  sub_42F590((int)&unk_4E10B4);
  sub_40F070((int)&unk_4E10C0, &v13);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E10C0, &v7);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v6 = *(_DWORD *)(sub_420250((int *)&v13) + 4);
    if ( v6 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v6)(v6, 1);
    sub_446090((int *)&v13, (int)&v8, 0);
  }
  sub_42F5F0((int)&unk_4E10C0);
  sub_47E0D0((volatile LONG *)&unk_4E10D8);
  CItem::ClearItemGroup();
  sub_47E1C0((volatile LONG *)&unk_4E10D8, a1, a2, a3);
  return CGoods::ClearGoods();
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004265B0) --------------------------------------------------------
int __cdecl CItem::ClearItemGroup()
{
  void *v0; // eax@2
  int v2; // [sp+8h] [bp-10h]@3
  char v3; // [sp+Ch] [bp-Ch]@2
  char v4; // [sp+10h] [bp-8h]@5
  char v5; // [sp+14h] [bp-4h]@1

  CItemGroup::ClearGroup();
  sub_40F070((int)&unk_4E10CC, &v5);
  while ( 1 )
  {
    v0 = sub_430C20((int)&unk_4E10CC, &v3);
    if ( !(unsigned __int8)sub_47D070(v0) )
      break;
    v2 = *(_DWORD *)(sub_420250((int *)&v5) + 4);
    if ( v2 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v2)(v2, 1);
    sub_446090((int *)&v5, (int)&v4, 0);
  }
  return sub_42F650((int)&unk_4E10CC);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00426640) --------------------------------------------------------
void __userpurge CItem::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST14_4@10
  int v6; // [sp+4h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-10h]@8
  int v8; // [sp+10h] [bp-Ch]@8
  int v9; // [sp+14h] [bp-8h]@4
  DWORD v10; // [sp+18h] [bp-4h]@4

  v6 = a1;
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      *(_DWORD *)(a1 + 72) = 0;
      *(_DWORD *)(a1 + 76) = 0;
      *(_DWORD *)(a1 + 80) = 0;
    }
  }
  else
  {
    v10 = *(_DWORD *)(a1 + 68);
    v9 = *(_DWORD *)(a1 + 56);
    if ( v10 )
    {
      if ( !CBase::IsDeleted(a1) )
      {
        if ( GetTickCount() < v10 )
        {
          CIOObject::AddTimer(v6, a2, a3, a4, 60000, 0);
        }
        else
        {
          v7 = *(_DWORD *)(v6 + 60) >> 5;
          v8 = *(_DWORD *)(v6 + 64) >> 5;
          if ( v9 )
          {
            if ( sub_4913E0((void *)v9, a2, a3, a4, v6, (int)&v7) )
            {
              v5 = (int)sub_44FCE0(a2, a3, a4, 59, (unsigned int)"d");
              sub_493440(v9, a2, a3, a4, (int)&v7, v5, 25);
              CIOBuffer::Release(v5);
              (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v6 + 92))(v6, 11);
            }
          }
        }
      }
    }
  }
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00426750) --------------------------------------------------------
int __thiscall CItem::PutInfo(int this, int *a2, int a3)
{
  int result; // eax@6
  int v4; // [sp+0h] [bp-8h]@4
  int v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  if ( !a3 )
    a3 = *(_DWORD *)(this + 52);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(this + 36));
  *a2 = sub_42F960(*a2, *(_WORD *)(*(_DWORD *)(v5 + 40) + 64));
  if ( *(_DWORD *)(v5 + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(v5 + 44) + 32);
  else
    LOBYTE(v4) = 0;
  *a2 = sub_4189A0(*a2, v4);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(v5 + 48));
  result = sub_44F9B0(*a2, a3);
  *a2 = result;
  return result;
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (00426810) --------------------------------------------------------
int __thiscall sub_426810(int this, int a2, int a3)
{
  int result; // eax@1
  int v4; // ST08_4@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = this;
  *(_DWORD *)(this + 32) = a2;
  v5 = 0;
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, this + 36);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, &v5);
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 48);
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 52);
  *(_DWORD *)a3 += 2;
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 84);
  *(_DWORD *)a3 += 8;
  result = CItem::FindPrefix(v5);
  *(_DWORD *)(v4 + 44) = result;
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (004268E0) --------------------------------------------------------
int __thiscall CItem::Init(int this, int a2, signed int a3, int a4)
{
  int result; // eax@4
  int v5; // [sp+0h] [bp-Ch]@7
  signed int v6; // [sp+4h] [bp-8h]@2

  if ( *(_DWORD *)(*(_DWORD *)(this + 40) + 92) )
    v6 = a3;
  else
    v6 = 1;
  result = this;
  *(_DWORD *)(this + 52) = v6;
  if ( dword_4E35B8 == 2 )
  {
    result = *(_DWORD *)(this + 40);
    if ( *(_DWORD *)(result + 156) )
    {
      if ( a4 < 0 )
        v5 = dword_4E1164;
      else
        v5 = a4;
      result = this;
      *(_DWORD *)(this + 84) = v5;
    }
  }
  return result;
}
// 4E1164: using guessed type int dword_4E1164;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00426950) --------------------------------------------------------
void __userpurge CItem::SendDelete(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CPlayer::Write(a1, a2, a3, a4, 59, (unsigned int)"d");
}

//----- (00426980) --------------------------------------------------------
void __userpurge CItem::SendCreate(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CPlayer::Write(a1, a2, a3, a4, 54, (unsigned int)"wdddd");
}

//----- (004269D0) --------------------------------------------------------
signed int __userpurge CItem::Trash<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v7; // ST28_4@1

  v7 = a1;
  CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
  CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
  CBase::Delete(v7);
  return 1;
}

//----- (00426A60) --------------------------------------------------------
signed int __userpurge CItem::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-8h]@1

  v6 = a1;
  if ( *(_DWORD *)(a1 + 36) )
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
  return CBase::Delete((void *)v6);
}

//----- (00426AD0) --------------------------------------------------------
void __userpurge sub_426AD0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  *(_DWORD *)(a1 + 32) = a5;
  *(_DWORD *)(a1 + 36) = a6;
  CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbbdbbdb");
}

//----- (00426B40) --------------------------------------------------------
void __userpurge CItem::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  *(_DWORD *)(a1 + 32) = *(_DWORD *)(a5 + 452);
  if ( a6 == 10 )
    *(_DWORD *)(a1 + 48) &= 0xFFFFFFFBu;
  CItem::SendItemInfo(a1, a2, a3, a4, (void *)a5, 7);
  if ( a7 )
    CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
  else
    CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
}

//----- (00426C10) --------------------------------------------------------
int __userpurge CItem::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@2
  int v8; // [sp+0h] [bp-8h]@1

  v8 = a1;
  if ( a7 + *(_DWORD *)(a1 + 52) <= 0 )
  {
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    if ( a6 == 50 )
      CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    else
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    *(_DWORD *)(v8 + 52) = 0;
    CBase::Delete((void *)v8);
    result = 0;
  }
  else
  {
    result = *(_DWORD *)(a1 + 52);
  }
  return result;
}

//----- (00426D00) --------------------------------------------------------
LONG __userpurge CItem::Drop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int v10; // edx@1
  int v12; // [sp+0h] [bp-24h]@1
  int v13; // [sp+4h] [bp-20h]@23
  int v14; // [sp+8h] [bp-1Ch]@23
  int v15; // [sp+Ch] [bp-18h]@23
  int v16; // [sp+10h] [bp-14h]@16
  int v17; // [sp+14h] [bp-10h]@16
  int v18; // [sp+18h] [bp-Ch]@16
  int v19; // [sp+1Ch] [bp-8h]@2
  int v20; // [sp+20h] [bp-4h]@24

  v12 = a1;
  *(_DWORD *)(a1 + 56) = *(_DWORD *)(a5 + 320);
  v10 = *(_DWORD *)(a6 + 4);
  *(_DWORD *)(a1 + 60) = *(_DWORD *)a6;
  *(_DWORD *)(a1 + 64) = v10;
  *(_DWORD *)(a1 + 68) = GetTickCount() + 180000;
  CIOObject::AddTimer(v12, a2, a3, a4, 60000, 0);
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 60))(a5) )
  {
    v19 = a5;
    if ( a8 )
    {
      CPlayer::Write(a2, a3, a4, v19, 8, (unsigned int)"db");
      CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    }
    else
    {
      *(_DWORD *)(v12 + 32) = *(_DWORD *)(v19 + 452);
    }
  }
  else
  {
    *(_DWORD *)(v12 + 72) = a9;
    *(_DWORD *)(v12 + 76) = a10;
    CIOObject::AddTimer(v12, a2, a3, a4, 120000, 1);
  }
  if ( *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) >= 665 && *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) <= 668
    || *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) >= 802 && *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) <= 825
    || *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) >= 856 && *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) <= 867
    || *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) == 688 )
  {
    if ( abs(*(_DWORD *)(v12 + 60) - 57367) < 1000 )
    {
      if ( abs(*(_DWORD *)(v12 + 64) - 9077) < 1001 )
      {
        v16 = 1792;
        v17 = 284;
        v18 = (int)sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bsw");
        sub_493440(*(_DWORD *)(v12 + 56), a2, a3, a4, (int)&v16, v18, 32);
        CIOBuffer::Release(v18);
      }
    }
  }
  if ( *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) >= 673 && *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) <= 687
    || *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) >= 826 && *(_DWORD *)(*(_DWORD *)(v12 + 40) + 64) <= 855 )
  {
    if ( abs(*(_DWORD *)(v12 + 60) - 20284) < 1160 )
    {
      if ( abs(*(_DWORD *)(v12 + 64) - 67480) < 1212 )
      {
        v13 = 634;
        v14 = 2109;
        v15 = (int)sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bsw");
        sub_493440(*(_DWORD *)(v12 + 56), a2, a3, a4, (int)&v13, v15, 38);
        CIOBuffer::Release(v15);
      }
    }
  }
  v20 = (int)sub_44FCE0(a2, a3, a4, 54, (unsigned int)"wdddd");
  sub_493440(*(_DWORD *)(a5 + 320), a2, a3, a4, a7, v20, 25);
  return CIOBuffer::Release(v20);
}

//----- (00427010) --------------------------------------------------------
int __userpurge CItem::Trade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v8; // [sp+0h] [bp-4h]@1

  v8 = a1;
  if ( *(_DWORD *)(a1 + 52) != a7 )
    sub_422D80(a1, a2, a3, a4);
  *(_DWORD *)(v8 + 32) = 0;
  *(_DWORD *)(v8 + 48) |= 4u;
  CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
  CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
  return v8;
}

//----- (004270B0) --------------------------------------------------------
bool __thiscall CItem::CanSell(int this, int a2)
{
  bool result; // eax@6
  bool v3; // [sp+0h] [bp-Ch]@10
  bool v4; // [sp+4h] [bp-8h]@4
  int v5; // [sp+8h] [bp-4h]@1

  v5 = this;
  if ( dword_4E1174[0] & 2 )
  {
    v4 = *(_DWORD *)(*(_DWORD *)(this + 40) + 112) > 0 && *(_DWORD *)(this + 52) >= a2;
    result = v4;
  }
  else
  {
    v3 = !CItem::IsState(this, 136) && *(_DWORD *)(*(_DWORD *)(v5 + 40) + 112) > 0 && *(_DWORD *)(v5 + 52) >= a2;
    result = v3;
  }
  return result;
}

//----- (00427130) --------------------------------------------------------
int __thiscall CItem::IsState(int this, int a2)
{
  return a2 & *(_DWORD *)(this + 48);
}

//----- (00427150) --------------------------------------------------------
char __thiscall CItem::CanTrade(int this, int a2, int a3, int a4)
{
  char result; // al@2
  char v5; // [sp+0h] [bp-Ch]@13
  char v6; // [sp+4h] [bp-8h]@8
  int v7; // [sp+8h] [bp-4h]@1

  v7 = this;
  if ( dword_4E1174[0] & 2 )
  {
    result = *(_DWORD *)(this + 52) >= a2;
  }
  else
  {
    if ( dword_4E35B8 == 2 && *(_DWORD *)(*(_DWORD *)(this + 40) + 156) )
    {
      v6 = *(_DWORD *)(a3 + 60) > dword_4D6068[*(_DWORD *)(this + 84)]
        && !CItem::IsState(this, 136)
        && *(_DWORD *)(v7 + 52) >= a2;
      result = v6;
    }
    else
    {
      v5 = !CItem::IsState(this, 136) && *(_DWORD *)(v7 + 52) >= a2;
      result = v5;
    }
  }
  return result;
}
// 4D6068: using guessed type int dword_4D6068[];
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00427210) --------------------------------------------------------
char __thiscall CItem::CanDrop(int this, int a2, int a3)
{
  char result; // al@2
  char v4; // [sp+0h] [bp-Ch]@13
  char v5; // [sp+4h] [bp-8h]@8
  int v6; // [sp+8h] [bp-4h]@1

  v6 = this;
  if ( dword_4E1174[0] & 2 )
  {
    result = *(_DWORD *)(this + 52) >= a2;
  }
  else
  {
    if ( dword_4E35B8 == 2 && *(_DWORD *)(*(_DWORD *)(this + 40) + 156) )
    {
      v5 = *(_DWORD *)(a3 + 60) > dword_4D6068[*(_DWORD *)(this + 84)]
        && !CItem::IsState(this, 136)
        && *(_DWORD *)(v6 + 52) >= a2;
      result = v5;
    }
    else
    {
      v4 = !CItem::IsState(this, 136) && *(_DWORD *)(v6 + 52) >= a2;
      result = v4;
    }
  }
  return result;
}
// 4D6068: using guessed type int dword_4D6068[];
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004272D0) --------------------------------------------------------
signed int __userpurge CItem::StorageOut<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6, int a7, int a8)
{
  int v9; // ST18_4@1

  v9 = a1;
  *(_DWORD *)(a1 + 48) &= 0xFFFFFFEFu;
  CItem::SendItemInfo(a1, a2, a3, a4, a5, 89);
  CPlayer::_StorageOut(a5, *(_DWORD *)(v9 + 36), 0);
  CDBSocket::Write(a2, a3, a4, 12, (unsigned int)"ddbd");
  return 1;
}

//----- (00427340) --------------------------------------------------------
void __userpurge CItem::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7)
{
  CItem::NewIID();
  CDBSocket::Write(a1, a2, a3, 35, (unsigned int)"bdwbddbbdds");
}

//----- (004273B0) --------------------------------------------------------
LONG __cdecl CItem::NewIID()
{
  LONG v1; // [sp+0h] [bp-4h]@1

  v1 = InterlockedIncrement(&dword_4E10B0);
  if ( !v1 )
    v1 = InterlockedIncrement(&dword_4E10B0);
  return v1;
}

//----- (004273E0) --------------------------------------------------------
int __thiscall CItem::GetSellMoney(int this, int a2)
{
  return a2 * *(_DWORD *)(*(_DWORD *)(this + 40) + 112);
}

//----- (00427400) --------------------------------------------------------
int __thiscall CItem::SetEtc(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(this + 80) = 0;
  result = *(_DWORD *)(a2 + 452);
  *(_DWORD *)(this + 32) = result;
  return result;
}

//----- (00427430) --------------------------------------------------------
LONG __userpurge CItem::SendItemInfo<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, char a6)
{
  int v7; // ST08_4@1
  void *v8; // eax@1
  void *v9; // ST0C_4@1
  char *v10; // [sp+8h] [bp-8h]@1
  void *v11; // [sp+Ch] [bp-4h]@1

  v7 = a1;
  v8 = CIOBuffer::Alloc();
  v11 = v8;
  v9 = v8;
  *((_BYTE *)v8 + 2) = a6;
  v10 = (char *)v8 + 3;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v7 + 72))(v7, &v10, 0);
  *(_WORD *)v9 = (_WORD)v10 - (_WORD)v9;
  *((_DWORD *)v11 + 2000) = *(_WORD *)v9;
  CPlayer::Send(a5, a2, a3, a4, v11);
  return CIOBuffer::Release((int)v11);
}

//----- (004274A0) --------------------------------------------------------
int __userpurge CItem::InsertItem<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int result; // eax@1
  int v10; // [sp+4h] [bp-4h]@1

  result = CItem::CreateItem(a6, a7, a8, -1);
  v10 = result;
  if ( result )
  {
    CIOObject::AddRef(result, a1, a2, a3);
    if ( CPlayer::_InsertItem((void *)a4, a1, a2, a3, a5, v10) != 1 )
    {
      sub_4328C0("CItem::InsertItem() (PID:%d, LogType:%d, Index:%d)", *(_DWORD *)(a4 + 452), a5, a6);
      CBase::Delete((void *)v10);
    }
    result = CIOObject::Release(v10, a1, a2, a3);
  }
  return result;
}

//----- (00427520) --------------------------------------------------------
int __thiscall CItemWeapon::CItemWeapon(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CItem::CItem(this);
  *(_DWORD *)v3 = &off_4B6C50;
  *(_DWORD *)(v3 + 40) = a2;
  *(_DWORD *)(v3 + 92) = 0;
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = 0;
  *(_DWORD *)(v3 + 104) = 0;
  *(_DWORD *)(v3 + 108) = 0;
  *(_DWORD *)(v3 + 112) = 0;
  *(_DWORD *)(v3 + 116) = 0;
  *(_DWORD *)(v3 + 120) = 0;
  *(_DWORD *)(v3 + 124) = 0;
  *(_DWORD *)(v3 + 128) = 0;
  return v3;
}
// 4B6C50: using guessed type int (__stdcall *off_4B6C50)(int);

//----- (004275C0) --------------------------------------------------------
int __usercall CItemGeneral::_CItemGeneral<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CItem::_CItem(a1, a2, a3, a4);
}

//----- (004275E0) --------------------------------------------------------
int __thiscall CItemWeapon::PutInfo(int this, int *a2, int a3)
{
  int result; // eax@6
  int v4; // [sp+0h] [bp-8h]@4
  int v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  if ( !a3 )
    a3 = *(_DWORD *)(this + 52);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(this + 36));
  *a2 = sub_42F960(*a2, *(_WORD *)(*(_DWORD *)(v5 + 40) + 64));
  if ( *(_DWORD *)(v5 + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(v5 + 44) + 32);
  else
    LOBYTE(v4) = 0;
  *a2 = sub_4189A0(*a2, v4);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(v5 + 48));
  *a2 = sub_44F9B0(*a2, a3);
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 92));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 96));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 84));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 100));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 104));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 108));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 112));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 116));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 120));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 124));
  result = sub_4189A0(*a2, *(_BYTE *)(v5 + 128));
  *a2 = result;
  return result;
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (004277C0) --------------------------------------------------------
int __thiscall sub_4277C0(int this, int a2, int a3)
{
  int result; // eax@11
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = this;
  *(_DWORD *)(this + 32) = a2;
  v5 = 0;
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, this + 36);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, &v5);
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 48);
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 52);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 92);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 96);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 84);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 100);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 104);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 108);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 112);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 116);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 120);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 124);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 128);
  if ( *(_DWORD *)(v4 + 100) > 20 )
  {
    *(_DWORD *)(v4 + 100) = 0;
    sub_4328C0("CItemWeapon::Init() Error (PID:%d m_nXAttack:%d)", a2, *(_DWORD *)(v4 + 100));
  }
  if ( *(_DWORD *)(v4 + 104) > 20 )
  {
    *(_DWORD *)(v4 + 104) = 0;
    sub_4328C0("CItemWeapon::Init() Error (PID:%d m_nXMagic:%d)", a2, *(_DWORD *)(v4 + 104));
  }
  if ( *(_DWORD *)(v4 + 112) > 20 )
  {
    *(_DWORD *)(v4 + 112) = 0;
    sub_4328C0("CItemWeapon::Init() Error (PID:%d m_nXHit:%d)", a2, *(_DWORD *)(v4 + 112));
  }
  if ( *(_DWORD *)(v4 + 108) > 10 )
  {
    *(_DWORD *)(v4 + 108) = 0;
    sub_4328C0("CItemWeapon::Init() Error (PID:%d m_nXDefense:%d)", a2, *(_DWORD *)(v4 + 108));
  }
  if ( *(_DWORD *)(v4 + 116) > 1 )
  {
    *(_DWORD *)(v4 + 116) = 0;
    sub_4328C0("CItemWeapon::Init() Error (PID:%d m_nXDodge:%d)", a2, *(_DWORD *)(v4 + 116));
  }
  result = CItem::FindPrefix(v5);
  *(_DWORD *)(v4 + 44) = result;
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (00427A50) --------------------------------------------------------
int __thiscall CItemWeapon::Init(int this, char a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // ST04_4@1

  v5 = this;
  *(_DWORD *)(this + 44) = CItem::FindPrefix(a2);
  *(_DWORD *)(v5 + 52) = 1;
  *(_DWORD *)(v5 + 96) = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 116);
  result = *(_DWORD *)(v5 + 96);
  *(_DWORD *)(v5 + 92) = result;
  return result;
}

//----- (00427AA0) --------------------------------------------------------
void __userpurge CItemWeapon::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v5 + 40) + 96) >= 0 && *(_DWORD *)(*(_DWORD *)(v5 + 40) + 96) != *(_DWORD *)(a5 + 460)
      || *(_DWORD *)(*(_DWORD *)(v5 + 40) + 100) > *(_DWORD *)(a5 + 60)
      || CPlayer::IsWState(a5, 0) )
      goto LABEL_14;
    if ( *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) == 21 )
    {
      if ( CPlayer::IsWState(a5, 1) )
      {
LABEL_14:
        CItem::SubState(v5, 1);
        CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
        return;
      }
      CPlayer::AddWState(a5, 12);
    }
    CPlayer::AddWState(a5, 0);
    *(_WORD *)(a5 + 1052) = *(_WORD *)(*(_DWORD *)(v5 + 40) + 64);
    *(_DWORD *)(a5 + 312) = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 104);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
  }
}

//----- (00427B90) --------------------------------------------------------
int __thiscall CItem::SubState(int this, int a2)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 48) & ~a2;
  *(_DWORD *)(this + 48) = result;
  return result;
}

//----- (00427BB0) --------------------------------------------------------
int __thiscall CPlayer::AddWState(int this, char a2)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 564) | (1 << a2);
  *(_DWORD *)(this + 564) = result;
  return result;
}

//----- (00427BE0) --------------------------------------------------------
int __thiscall CPlayer::IsWState(int this, char a2)
{
  return *(_DWORD *)(this + 564) & (1 << a2);
}

//----- (00427C00) --------------------------------------------------------
signed int __userpurge CItemWeapon::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+4h] [bp-10h]@1

  v7 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    CBase::Delete((void *)v7);
    result = 1;
  }
  return result;
}

//----- (00427D60) --------------------------------------------------------
signed int __userpurge CItemWeapon::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+4h] [bp-10h]@1

  v6 = a1;
  if ( *(_DWORD *)(a1 + 36) )
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
  return CBase::Delete((void *)v6);
}

//----- (00427E70) --------------------------------------------------------
int __thiscall CItemWeapon::ApplySpec(int this, int a2)
{
  int result; // eax@13
  int v3; // [sp+0h] [bp-10h]@1
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@8
  int v6; // [sp+Ch] [bp-4h]@1

  v3 = this;
  CInitItem::ApplySpec(*(void **)(this + 40), a2);
  v4 = 0;
  v6 = 0;
  if ( CInitItem::GetSpecValue(*(_DWORD *)(v3 + 40), 18, (unsigned int)&v4) )
  {
    *(_DWORD *)(a2 + 608) = v4;
    *(_DWORD *)(a2 + 612) = v6;
  }
  if ( CInitItem::GetSpecValue(*(_DWORD *)(v3 + 40), 19, (unsigned int)&v4) )
  {
    *(_DWORD *)(a2 + 616) = v4;
    *(_DWORD *)(a2 + 620) = v6;
  }
  if ( *(_DWORD *)(v3 + 44) )
    CPrefix::ApplySpec(*(void **)(v3 + 44), a2);
  if ( *(_DWORD *)(v3 + 100) )
  {
    v5 = *(_DWORD *)(v3 + 100) * (2 * *(_DWORD *)(v3 + 100) + 7) / 9;
    *(_DWORD *)(a2 + 600) = v5;
    (*(void (__cdecl **)(int, signed int, signed int, int, int))(*(_DWORD *)a2 + 92))(a2, 27, 1, v5, v5);
  }
  if ( *(_DWORD *)(v3 + 104) )
  {
    v5 = *(_DWORD *)(v3 + 104) * (2 * *(_DWORD *)(v3 + 104) + 7) / 9;
    *(_DWORD *)(a2 + 604) = v5;
    (*(void (__cdecl **)(int, signed int, signed int, int, int))(*(_DWORD *)a2 + 92))(a2, 28, 1, v5, v5);
  }
  if ( *(_DWORD *)(v3 + 112) )
    (*(void (__cdecl **)(int, signed int, signed int, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 1, *(_DWORD *)(v3 + 112));
  result = v3;
  if ( *(_DWORD *)(v3 + 124) )
  {
    result = *(_DWORD *)(v3 + 124);
    *(_DWORD *)(a2 + 596) = result;
  }
  return result;
}

//----- (00428000) --------------------------------------------------------
int __thiscall CItemWeapon::FreeSpec(int this, int a2)
{
  int result; // eax@3
  int v3; // ST18_4@4
  int v4; // ST18_4@6
  int v5; // [sp+0h] [bp-8h]@1

  v5 = this;
  CInitItem::FreeSpec(*(void **)(this + 40), a2);
  *(_DWORD *)(a2 + 608) = 0;
  *(_DWORD *)(a2 + 612) = 0;
  *(_DWORD *)(a2 + 616) = 0;
  *(_DWORD *)(a2 + 620) = 0;
  if ( *(_DWORD *)(v5 + 44) )
    CPrefix::FreeSpec(*(void **)(v5 + 44), a2);
  result = v5;
  if ( *(_DWORD *)(v5 + 100) )
  {
    v3 = *(_DWORD *)(v5 + 100) * (2 * *(_DWORD *)(v5 + 100) + 7) / 9;
    *(_DWORD *)(a2 + 600) = 0;
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 27, 0, v3, v3);
  }
  if ( *(_DWORD *)(v5 + 104) )
  {
    v4 = *(_DWORD *)(v5 + 104) * (2 * *(_DWORD *)(v5 + 104) + 7) / 9;
    *(_DWORD *)(a2 + 604) = 0;
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 28, 0, v4, v4);
  }
  if ( *(_DWORD *)(v5 + 112) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 0, *(_DWORD *)(v5 + 112));
  *(_DWORD *)(a2 + 596) = 0;
  return result;
}

//----- (00428140) --------------------------------------------------------
void __userpurge CItemWeapon::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // edx@13
  int v6; // ecx@14
  int v7; // edx@16
  int v8; // ecx@34
  int v9; // eax@36
  int v10; // ecx@39
  int v11; // eax@41
  int v12; // ecx@49
  int v13; // eax@51
  int v14; // ecx@54
  int v15; // eax@56
  int v16; // [sp+0h] [bp-8h]@16
  int v17; // [sp+4h] [bp-4h]@1

  v17 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 96) >= 0 && *(_DWORD *)(*(_DWORD *)(a1 + 40) + 96) != *(_DWORD *)(a5 + 460)
    || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 100) > *(_DWORD *)(a5 + 60) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    return;
  }
  if ( !CItem::IsState(a1, 1) )
  {
    if ( CPlayer::IsWState(a5, 0) )
    {
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      return;
    }
    if ( *(_DWORD *)(*(_DWORD *)(v17 + 40) + 72) == 21 )
    {
      if ( CPlayer::IsWState(a5, 1) )
        return;
      CPlayer::AddWState(a5, 12);
    }
    CPlayer::AddWState(a5, 0);
    *(_WORD *)(a5 + 1052) = *(_WORD *)(*(_DWORD *)(v17 + 40) + 64);
    *(_DWORD *)(a5 + 312) = *(_DWORD *)(*(_DWORD *)(v17 + 40) + 104);
    CItem::AddState(v17, 1);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)v17 + 104))(v17, a5);
    v5 = *(_DWORD *)(v17 + 48);
    if ( v5 & 0x7FF00 )
    {
      v6 = *(_DWORD *)(v17 + 48);
      if ( v6 & 0x100000 )
        (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 100))(a5, -2147483648);
      v7 = *(_DWORD *)(v17 + 48);
      v16 = v7 & 0x7FF00;
      if ( (v7 & 0x7FF00u) > 0x2000 )
      {
        if ( (unsigned int)v16 > 0x10000 )
        {
          if ( v16 == 131072 )
          {
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 100))(a5, 536870912);
            (*(void (__cdecl **)(int, signed int, signed int, signed int, signed int))(*(_DWORD *)a5 + 92))(
              a5,
              27,
              1,
              50,
              50);
            (*(void (__cdecl **)(int, signed int, signed int, signed int, signed int))(*(_DWORD *)a5 + 92))(
              a5,
              28,
              1,
              50,
              50);
          }
          else
          {
            if ( v16 == 262144 )
            {
              (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 1073741824);
              (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 92))(a5, 5, 1, 50);
              (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 92))(a5, 6, 1, 50);
              (*(void (__cdecl **)(int, _DWORD, signed int, signed int))(*(_DWORD *)a5 + 92))(a5, 0, 1, 6);
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 2, 1, 6);
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 4, 1, 6);
              (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 92))(a5, 3, 1, 10);
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 1, 1, 10);
            }
          }
        }
        else
        {
          switch ( v16 )
          {
            case 65536:
              (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 268435456);
              v14 = *(_DWORD *)(v17 + 48);
              if ( v14 & 0x80000 )
              {
                (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 5, 0, 5);
                (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 96))(a5, 6, 1, 10);
              }
              else
              {
                v15 = *(_DWORD *)(v17 + 48);
                if ( v15 & 0x100000 )
                {
                  (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 5, 0, 10);
                  (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 96))(a5, 6, 1, 20);
                }
              }
              break;
            case 16384:
              (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 67108864);
              break;
            case 32768:
              (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 134217728);
              v12 = *(_DWORD *)(v17 + 48);
              if ( v12 & 0x80000 )
              {
                (*(void (__cdecl **)(_DWORD, _DWORD, signed int, _DWORD))(*(_DWORD *)a5 + 96))(a5, 5, 1, 10);
                (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 6, 0, 5);
              }
              else
              {
                v13 = *(_DWORD *)(v17 + 48);
                if ( v13 & 0x100000 )
                {
                  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 5, 1, 20);
                  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 96))(a5, 6, 0, 10);
                }
              }
              break;
          }
        }
      }
      else
      {
        if ( v16 == 8192 )
        {
          (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 33554432);
        }
        else
        {
          if ( (unsigned int)v16 > 0x400 )
          {
            if ( v16 == 2048 )
            {
              (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 8388608);
            }
            else
            {
              if ( v16 == 4096 )
                (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 16777216);
            }
          }
          else
          {
            switch ( v16 )
            {
              case 1024:
                (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 4194304);
                break;
              case 256:
                (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 1048576);
                v8 = *(_DWORD *)(v17 + 48);
                if ( v8 & 0x80000 )
                {
                  (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 5, 1, 20);
                  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 0, 1, 2);
                  (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 92))(a5, 2, 1, 2);
                  (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 4, 1, 2);
                }
                else
                {
                  v9 = *(_DWORD *)(v17 + 48);
                  if ( v9 & 0x100000 )
                  {
                    (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 5, 1, 50);
                    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 0, 1, 3);
                    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 2, 1, 3);
                    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 4, 1, 3);
                  }
                }
                break;
              case 512:
                (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 100))(a5, 2097152);
                v10 = *(_DWORD *)(v17 + 48);
                if ( v10 & 0x80000 )
                {
                  (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 6, 1, 20);
                  (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 3, 1, 2);
                  (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 1, 1, 2);
                }
                else
                {
                  v11 = *(_DWORD *)(v17 + 48);
                  if ( v11 & 0x100000 )
                  {
                    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 6, 1, 50);
                    (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 3, 1, 5);
                    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 1, 1, 5);
                  }
                }
                break;
            }
          }
        }
      }
    }
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 5, (unsigned int)"ddw");
    CDBSocket::Write(a2, a3, a4, 4, (unsigned int)"d");
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00428770) --------------------------------------------------------
void __userpurge CItemWeapon::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // edx@7
  int v6; // ecx@33
  int v7; // edx@38
  int v8; // ecx@40
  int v9; // edx@42
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    if ( CPlayer::IsWState(a5, 0) )
    {
      CPlayer::SubWState(a5, 0);
      if ( *(_DWORD *)(*(_DWORD *)(v10 + 40) + 72) == 21 )
        CPlayer::SubWState(a5, 12);
      *(_WORD *)(a5 + 1052) = 0;
      *(_DWORD *)(a5 + 312) = 0;
      CItem::SubState(v10, 1);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v10 + 108))(v10, a5);
      v5 = *(_DWORD *)(v10 + 48);
      if ( v5 & 0x7FF00 )
      {
        if ( *(_DWORD *)(v10 + 48) & 0x100 )
        {
          (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 112))(a5, 1048576);
          if ( CChar::IsGState(a5, -2147483648) )
          {
            (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 5, 0, 50);
            (*(void (__cdecl **)(int, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 0, 0, 3);
            (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 2, 0, 3);
            (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 4, 0, 3);
          }
          else
          {
            (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 5, 0, 20);
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 0, 0, 2);
            (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 2, 0, 2);
            (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 4, 0, 2);
          }
        }
        else
        {
          if ( *(_DWORD *)(v10 + 48) & 0x200 )
          {
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 112))(a5, 2097152);
            if ( CChar::IsGState(a5, -2147483648) )
            {
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 6, 0, 50);
              (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 3, 0, 5);
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 1, 0, 5);
            }
            else
            {
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(a5, 6, 0, 20);
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 3, 0, 2);
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 1, 0, 2);
            }
          }
          else
          {
            if ( *(_DWORD *)(v10 + 48) & 0x400 )
            {
              (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 4194304);
            }
            else
            {
              if ( *(_DWORD *)(v10 + 48) & 0x800 )
              {
                (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 8388608);
              }
              else
              {
                if ( *(_DWORD *)(v10 + 48) & 0x1000 )
                {
                  (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 16777216);
                }
                else
                {
                  if ( *(_DWORD *)(v10 + 48) & 0x2000 )
                  {
                    (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 33554432);
                  }
                  else
                  {
                    if ( *(_DWORD *)(v10 + 48) & 0x4000 )
                    {
                      (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 67108864);
                    }
                    else
                    {
                      if ( *(_DWORD *)(v10 + 48) & 0x8000 )
                      {
                        (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 134217728);
                        if ( CChar::IsGState(a5, -2147483648) )
                        {
                          (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 5, 0, 20);
                          (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 96))(
                            a5,
                            6,
                            1,
                            10);
                        }
                        else
                        {
                          (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 5, 0, 10);
                          (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)a5 + 96))(
                            a5,
                            6,
                            1,
                            5);
                        }
                      }
                      else
                      {
                        v6 = *(_DWORD *)(v10 + 48);
                        if ( v6 & 0x10000 )
                        {
                          (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 268435456);
                          if ( CChar::IsGState(a5, -2147483648) )
                          {
                            (*(void (__cdecl **)(_DWORD, _DWORD, signed int, _DWORD))(*(_DWORD *)a5 + 96))(a5, 5, 1, 10);
                            (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 96))(
                              a5,
                              6,
                              0,
                              20);
                          }
                          else
                          {
                            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 96))(a5, 5, 1, 5);
                            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 96))(a5, 6, 0, 10);
                          }
                        }
                        else
                        {
                          v7 = *(_DWORD *)(v10 + 48);
                          if ( v7 & 0x20000 )
                          {
                            (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 536870912);
                            (*(void (__cdecl **)(int, signed int, _DWORD, signed int, signed int))(*(_DWORD *)a5 + 92))(
                              a5,
                              27,
                              0,
                              50,
                              50);
                            (*(void (__cdecl **)(int, signed int, _DWORD, signed int, signed int))(*(_DWORD *)a5 + 92))(
                              a5,
                              28,
                              0,
                              50,
                              50);
                          }
                          else
                          {
                            v8 = *(_DWORD *)(v10 + 48);
                            if ( v8 & 0x40000 )
                            {
                              (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, 1073741824);
                              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(
                                a5,
                                5,
                                0,
                                50);
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 6, 0, 50);
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(
                                a5,
                                0,
                                0,
                                6);
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(
                                a5,
                                2,
                                0,
                                6);
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, 4, 0, 6);
                              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)a5 + 92))(
                                a5,
                                3,
                                0,
                                10);
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)a5 + 92))(
                                a5,
                                1,
                                0,
                                10);
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        v9 = *(_DWORD *)(v10 + 48);
        if ( v9 & 0x100000 )
          (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)a5 + 112))(a5, -2147483648);
      }
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 6, (unsigned int)"ddw");
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00428CD0) --------------------------------------------------------
int __thiscall CPlayer::SubWState(int this, char a2)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 564) & ~(1 << a2);
  *(_DWORD *)(this + 564) = result;
  return result;
}

//----- (00428D00) --------------------------------------------------------
void __userpurge sub_428D00(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  *(_DWORD *)(a1 + 32) = a5;
  *(_DWORD *)(a1 + 36) = a6;
  CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
}

//----- (00428D70) --------------------------------------------------------
int __userpurge CItemWeapon::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@2
  int v8; // [sp+4h] [bp-10h]@1

  v8 = a1;
  if ( a7 + *(_DWORD *)(a1 + 52) <= 0 )
  {
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    if ( a6 == 50 )
      CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    else
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    *(_DWORD *)(v8 + 52) = 0;
    CBase::Delete((void *)v8);
    result = 0;
  }
  else
  {
    result = *(_DWORD *)(a1 + 52);
  }
  return result;
}

//----- (00428F00) --------------------------------------------------------
bool __thiscall CItemDefense::CanSell(int this, int a2)
{
  bool result; // eax@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( CItem::IsState(this, 1) )
    result = 0;
  else
    result = CItem::CanSell(v3, a2);
  return result;
}

//----- (00428F30) --------------------------------------------------------
signed int __userpurge CItemWeapon::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-24h]@4
  int v8; // [sp+4h] [bp-20h]@1
  __int16 v9; // [sp+8h] [bp-1Ch]@3
  int v10; // [sp+Ah] [bp-1Ah]@3
  char v11; // [sp+Eh] [bp-16h]@6
  int v12; // [sp+Fh] [bp-15h]@6
  int v13; // [sp+13h] [bp-11h]@6
  char v14; // [sp+17h] [bp-Dh]@6
  char v15; // [sp+18h] [bp-Ch]@6
  char v16; // [sp+19h] [bp-Bh]@6
  char v17; // [sp+1Ah] [bp-Ah]@6
  char v18; // [sp+1Bh] [bp-9h]@6
  char v19; // [sp+1Ch] [bp-8h]@6
  char v20; // [sp+1Dh] [bp-7h]@6
  char v21; // [sp+1Eh] [bp-6h]@6
  char v22; // [sp+1Fh] [bp-5h]@6
  char v23; // [sp+20h] [bp-4h]@6
  char v24; // [sp+21h] [bp-3h]@6

  v8 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    result = 0;
  }
  else
  {
    v9 = *(_WORD *)(*(_DWORD *)(v8 + 40) + 64);
    v10 = *(_DWORD *)(v8 + 36);
    if ( *(_DWORD *)(v8 + 44) )
      v7 = *(_DWORD *)(*(_DWORD *)(v8 + 44) + 32);
    else
      LOBYTE(v7) = 0;
    v11 = v7;
    v12 = *(_DWORD *)(v8 + 48);
    v13 = *(_DWORD *)(v8 + 52);
    v14 = *(_BYTE *)(v8 + 92);
    v15 = *(_BYTE *)(v8 + 96);
    v16 = *(_BYTE *)(v8 + 84);
    v17 = *(_BYTE *)(v8 + 100);
    v18 = *(_BYTE *)(v8 + 104);
    v19 = *(_BYTE *)(v8 + 108);
    v20 = *(_BYTE *)(v8 + 112);
    v21 = *(_BYTE *)(v8 + 116);
    v22 = *(_BYTE *)(v8 + 120);
    v23 = *(_BYTE *)(v8 + 124);
    v24 = *(_BYTE *)(v8 + 128);
    CPlayer::_StorageIn(a5, a2, a3, a4, (int)&v9, *(_DWORD *)(v8 + 36), 0);
    CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
    CBase::Delete((void *)v8);
    result = 1;
  }
  return result;
}

//----- (00429060) --------------------------------------------------------
void __userpurge CItemWeapon::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7)
{
  CItem::NewIID();
  CDBSocket::Write(a1, a2, a3, 35, (unsigned int)"bdwbddbbdds");
}

//----- (00429100) --------------------------------------------------------
signed int __userpurge CItemWeapon::Charming<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@3
  signed int v7; // [sp+4h] [bp-40h]@46
  signed int v8; // [sp+8h] [bp-3Ch]@44
  signed int v9; // [sp+Ch] [bp-38h]@42
  int v10; // [sp+10h] [bp-34h]@38
  int v11; // [sp+1Ch] [bp-28h]@1
  signed int v12; // [sp+38h] [bp-Ch]@28
  signed int v13; // [sp+3Ch] [bp-8h]@29
  int v14; // [sp+40h] [bp-4h]@4

  v11 = a1;
  if ( CItem::GetLevel(a1) < 40 || CItem::IsState(v11, 1) )
    return 0;
  v14 = CItem::IsState(v11, 64);
  if ( a6 == 9 )
  {
    if ( *(_DWORD *)(v11 + 112) < 20 )
    {
      a4 = *(_DWORD *)(v11 + 112);
      if ( dword_4D5C48[a4] >= sub_406E10(1, 10000000) )
      {
        ++*(_DWORD *)(v11 + 112);
        CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
        goto LABEL_22;
      }
    }
    goto LABEL_25;
  }
  if ( a6 == 27 )
  {
    if ( *(_DWORD *)(v11 + 100) < 20 )
    {
      a4 = *(_DWORD *)(v11 + 100);
      if ( dword_4D5B88[a4] >= sub_406E10(1, 10000000) )
      {
        ++*(_DWORD *)(v11 + 100);
        CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
        goto LABEL_22;
      }
    }
LABEL_25:
    if ( v14 )
    {
      CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbb");
      CItem::SubState(v11, 64);
      CItem::SendItemInfo(v11, a2, a3, a4, (void *)a5, 92);
      result = 1;
    }
    else
    {
      if ( sub_406E10(1, 100) > 90 )
      {
        *(_DWORD *)(v11 + 96) = 0;
      }
      else
      {
        v12 = sub_406E10(1, 100);
        if ( v12 <= 50 )
        {
          if ( v12 <= 20 )
            v13 = 3;
          else
            v13 = 2;
        }
        else
        {
          v13 = 1;
        }
        *(_DWORD *)(v11 + 96) -= v13;
      }
      if ( *(_DWORD *)(v11 + 96) <= 0 )
      {
        CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
        CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
        if ( CItem::GetLevel(v11) - 40 >= 20 )
          v10 = 20;
        else
          v10 = CItem::GetLevel(v11) - 40;
        if ( *(_DWORD *)(*(_DWORD *)(v11 + 40) + 72) == 1 )
        {
          if ( *(_DWORD *)(v11 + 104) >= 20 )
            v9 = 20;
          else
            v9 = *(_DWORD *)(v11 + 104);
          v8 = v9;
        }
        else
        {
          if ( *(_DWORD *)(v11 + 100) >= 20 )
            v7 = 20;
          else
            v7 = *(_DWORD *)(v11 + 100);
          v8 = v7;
        }
        CItem::InsertItem(a2, a3, a4, a5, 21, 517, 0, dword_4D5F90[v8] + dword_4D5F38[v10], -1);
        CBase::Delete((void *)v11);
      }
      else
      {
        CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
        CDBSocket::Write(a2, a3, a4, 18, (unsigned int)"ddb");
      }
      result = 1;
    }
    return result;
  }
  if ( a6 != 28 )
    return 0;
  if ( *(_DWORD *)(*(_DWORD *)(v11 + 40) + 72) != 1 )
    return 0;
  if ( *(_DWORD *)(v11 + 104) >= 20 || (a4 = *(_DWORD *)(v11 + 104), dword_4D5B88[a4] < sub_406E10(1, 10000000)) )
    goto LABEL_25;
  ++*(_DWORD *)(v11 + 104);
  CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
LABEL_22:
  if ( v14 )
    CItem::SubState(v11, 64);
  CItem::SendItemInfo(v11, a2, a3, a4, (void *)a5, 92);
  return 1;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D5B88: using guessed type int dword_4D5B88[];
// 4D5C48: using guessed type int dword_4D5C48[];
// 4D5F38: using guessed type int dword_4D5F38[];
// 4D5F90: using guessed type int dword_4D5F90[];

//----- (004295B0) --------------------------------------------------------
int __thiscall CItem::GetLevel(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 44) )
    v2 = *(_DWORD *)(*(_DWORD *)(this + 44) + 36);
  else
    v2 = 0;
  return v2 + *(_DWORD *)(*(_DWORD *)(this + 40) + 80);
}

//----- (004295F0) --------------------------------------------------------
signed int __userpurge CItemWeapon::CharmingCheat<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6, int a7)
{
  int v8; // [sp+4h] [bp-8h]@1

  v8 = a1;
  if ( CItem::GetLevel(a1) < 40 || CItem::IsState(v8, 1) )
    return 0;
  CItem::IsState(v8, 64);
  if ( a6 == 9 )
  {
    *(_DWORD *)(v8 + 112) = a7;
    CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
  }
  else
  {
    if ( a6 == 27 )
    {
      *(_DWORD *)(v8 + 100) = a7;
      CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
    }
    else
    {
      if ( a6 != 28 )
        return 0;
      if ( *(_DWORD *)(*(_DWORD *)(v8 + 40) + 72) != 1 )
        return 0;
      *(_DWORD *)(v8 + 104) = a7;
      CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
    }
  }
  CItem::SendItemInfo(v8, a2, a3, a4, a5, 92);
  return 1;
}

//----- (00429730) --------------------------------------------------------
signed int __userpurge CItemDefense::Repair<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2

  if ( *(_DWORD *)(a1 + 96) < *(_DWORD *)(a1 + 92) )
  {
    ++*(_DWORD *)(a1 + 96);
    CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
    CDBSocket::Write(a2, a3, a4, 18, (unsigned int)"ddb");
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004297B0) --------------------------------------------------------
signed int __userpurge CItemWeapon::ChangePrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  signed int v9; // [sp+0h] [bp-4Ch]@33
  signed int v10; // [sp+4h] [bp-48h]@31
  signed int v11; // [sp+8h] [bp-44h]@29
  int v12; // [sp+Ch] [bp-40h]@25
  int v13; // [sp+14h] [bp-38h]@6
  int v14; // [sp+18h] [bp-34h]@1
  int v15; // [sp+34h] [bp-18h]@14
  signed int i; // [sp+38h] [bp-14h]@8
  int v17; // [sp+3Ch] [bp-10h]@8
  int v18; // [sp+40h] [bp-Ch]@8
  int v19; // [sp+48h] [bp-4h]@8

  v14 = a1;
  if ( CItem::IsState(a1, 1) || a6 >= 0 && a6 )
    return 0;
  if ( *(_DWORD *)(v14 + 44) )
    v13 = *(_DWORD *)(*(_DWORD *)(v14 + 44) + 32);
  else
    v13 = 0;
  v17 = v13;
  v18 = sub_406E10(1, 100);
  v19 = CItem::IsState(v14, 64);
  for ( i = 0; i < 2; ++i )
  {
    if ( v18 <= *(_DWORD *)(a7 + 4 * i) )
    {
      v17 = *(_DWORD *)(a8 + 4 * i);
      break;
    }
  }
  if ( v13 == v17 )
  {
    if ( v19 )
    {
      CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbb");
      CItem::SubState(v14, 64);
      CItem::SendItemInfo(v14, a2, a3, a4, (void *)a5, 92);
      return 1;
    }
    *(_DWORD *)(v14 + 96) -= 5;
    if ( *(_DWORD *)(v14 + 96) <= 0 )
    {
      CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
      if ( CItem::GetLevel(v14) >= 40 )
      {
        if ( CItem::GetLevel(v14) - 40 >= 20 )
          v12 = 20;
        else
          v12 = CItem::GetLevel(v14) - 40;
        if ( *(_DWORD *)(*(_DWORD *)(v14 + 40) + 72) == 1 )
        {
          if ( *(_DWORD *)(v14 + 104) >= 20 )
            v11 = 20;
          else
            v11 = *(_DWORD *)(v14 + 104);
          v10 = v11;
        }
        else
        {
          if ( *(_DWORD *)(v14 + 100) >= 20 )
            v9 = 20;
          else
            v9 = *(_DWORD *)(v14 + 100);
          v10 = v9;
        }
        CItem::InsertItem(a2, a3, a4, a5, 27, 517, 0, dword_4D5F90[v10] + dword_4D5F38[v12], -1);
      }
      CBase::Delete((void *)v14);
    }
    else
    {
      CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
      CDBSocket::Write(a2, a3, a4, 18, (unsigned int)"ddb");
    }
  }
  else
  {
    v15 = CItem::FindPrefix(v17);
    if ( !v15 )
      return 0;
    *(_DWORD *)(v14 + 44) = v15;
    CDBSocket::Write(a2, a3, a4, 19, (unsigned int)"ddbb");
    if ( v19 )
      CItem::SubState(v14, 64);
    CItem::SendItemInfo(v14, a2, a3, a4, (void *)a5, 92);
  }
  return 1;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D5F38: using guessed type int dword_4D5F38[];
// 4D5F90: using guessed type int dword_4D5F90[];

//----- (00429B60) --------------------------------------------------------
signed int __userpurge CItemWeapon::Protect<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  signed int result; // eax@5
  int v6; // [sp+4h] [bp-Ch]@1

  v6 = a1;
  if ( CItem::GetLevel(a1) < 40
    || dword_4E35B8 != 2 && *(_DWORD *)(v6 + 120) >= *(_DWORD *)(*(_DWORD *)(v6 + 40) + 168)
    || CItem::IsState(v6, 65) )
  {
    result = 0;
  }
  else
  {
    ++*(_DWORD *)(v6 + 120);
    CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbwddb");
    CItem::AddState(v6, 64);
    CItem::SendItemInfo(v6, a2, a3, a4, a5, 92);
    result = 1;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00429C90) --------------------------------------------------------
int __thiscall CItemWeapon::GetSellMoney(int this, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)(*(_DWORD *)(this + 40) + 112);
  if ( *(_DWORD *)(this + 44) )
    v3 += *(_DWORD *)(*(_DWORD *)(this + 44) + 40) * v3 / 100;
  if ( *(_DWORD *)(this + 100) )
    v3 += 100 * *(_DWORD *)(this + 100) * *(_DWORD *)(this + 100) * *(_DWORD *)(this + 100);
  if ( *(_DWORD *)(this + 104) )
    v3 += 100 * *(_DWORD *)(this + 104) * *(_DWORD *)(this + 104) * *(_DWORD *)(this + 104);
  if ( *(_DWORD *)(this + 112) )
    v3 += 200 * *(_DWORD *)(this + 112) * *(_DWORD *)(this + 112) * *(_DWORD *)(this + 112);
  return v3;
}

//----- (00429D50) --------------------------------------------------------
void __userpurge CItemWeapon::UpgradeDestroy(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int v5; // [sp+0h] [bp-20h]@14
  signed int v6; // [sp+4h] [bp-1Ch]@12
  signed int v7; // [sp+8h] [bp-18h]@10
  int v8; // [sp+Ch] [bp-14h]@6
  int v9; // [sp+10h] [bp-10h]@1

  v9 = a1;
  if ( CItem::GetLevel(a1) >= 40 )
  {
    if ( !CItem::IsState(v9, 1) )
    {
      if ( (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 88))(v9, a5, 45) )
      {
        if ( CItem::GetLevel(v9) - 40 >= 20 )
          v8 = 20;
        else
          v8 = CItem::GetLevel(v9) - 40;
        if ( *(_DWORD *)(*(_DWORD *)(v9 + 40) + 72) == 1 )
        {
          if ( *(_DWORD *)(v9 + 104) >= 20 )
            v7 = 20;
          else
            v7 = *(_DWORD *)(v9 + 104);
          v6 = v7;
        }
        else
        {
          if ( *(_DWORD *)(v9 + 100) >= 20 )
            v5 = 20;
          else
            v5 = *(_DWORD *)(v9 + 100);
          v6 = v5;
        }
        CItem::InsertItem(a2, a3, a4, a5, 45, 517, 0, dword_4D5F90[v6] + dword_4D5F38[v8], -1);
        CPlayer::_OutofInven(a5, a2, a3, a4, v9);
      }
    }
  }
}
// 4D5F38: using guessed type int dword_4D5F38[];
// 4D5F90: using guessed type int dword_4D5F90[];

//----- (00429E60) --------------------------------------------------------
signed int __userpurge CItemWeapon::UpgradeRateUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@1
  signed int v6; // [sp+0h] [bp-18h]@13
  signed int v7; // [sp+4h] [bp-14h]@8
  signed int v8; // [sp+8h] [bp-10h]@5
  int v9; // [sp+Ch] [bp-Ch]@1
  int v10; // [sp+10h] [bp-8h]@15
  int v11; // [sp+14h] [bp-4h]@15

  v9 = a1;
  result = CItem::GetLevel(a1);
  if ( result >= 40 )
  {
    result = CItem::IsState(v9, 1);
    if ( !result )
    {
      if ( *(_DWORD *)(v9 + 124) >= 19 )
        v8 = 19;
      else
        v8 = *(_DWORD *)(v9 + 124);
      if ( *(_DWORD *)(v9 + 124) >= 19 )
        v7 = 19;
      else
        v7 = *(_DWORD *)(v9 + 124);
      result = v8;
      if ( dword_4D5E40[v8] + *(_DWORD *)(v9 + 128) * dword_4D5E90[v7] < 100 )
      {
        if ( *(_DWORD *)(v9 + 124) >= 19 )
          v6 = 19;
        else
          v6 = *(_DWORD *)(v9 + 124);
        v10 = dword_4D5EE8[v6];
        result = CPlayer::_FindItem((void *)a5, 517, v10);
        v11 = result;
        if ( result )
        {
          if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)result + 120))(result, a5, 46, -v10) )
            CPlayer::_OutofInven(a5, a2, a3, a4, v11);
          ++*(_DWORD *)(v9 + 128);
          CDBSocket::Write(a2, a3, a4, 28, (unsigned int)"ddbb");
          result = CItem::SendItemInfo(v9, a2, a3, a4, (void *)a5, 92);
        }
      }
    }
  }
  return result;
}
// 4D5E40: using guessed type int dword_4D5E40[];
// 4D5E90: using guessed type int dword_4D5E90[];
// 4D5EE8: using guessed type int dword_4D5EE8[];

//----- (00429FB0) --------------------------------------------------------
void __userpurge CItemWeapon::UpgradeLevel(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4)
{
  DWORD v4; // esi@17
  signed int v5; // [sp+Ch] [bp-28h]@15
  signed int v6; // [sp+10h] [bp-24h]@12
  int v7; // [sp+14h] [bp-20h]@5
  int v8; // [sp+18h] [bp-1Ch]@1
  signed int v9; // [sp+28h] [bp-Ch]@21
  int v10; // [sp+2Ch] [bp-8h]@9
  int v11; // [sp+30h] [bp-4h]@9

  v8 = a1;
  if ( CItem::GetLevel(a1) >= 40 )
  {
    if ( !CItem::IsState(v8, 1) )
    {
      if ( *(_DWORD *)(*(_DWORD *)(v8 + 40) + 72) == 1 )
        v7 = *(_DWORD *)(v8 + 104);
      else
        v7 = *(_DWORD *)(v8 + 100);
      if ( *(_DWORD *)(v8 + 124) < v7 )
      {
        v10 = 1500 * (*(_DWORD *)(v8 + 124) + 1);
        v11 = CPlayer::_FindItem((void *)a4, 31, v10);
        if ( v11 )
        {
          if ( *(_DWORD *)(v8 + 124) >= 19 )
            v6 = 19;
          else
            v6 = *(_DWORD *)(v8 + 124);
          if ( *(_DWORD *)(v8 + 124) >= 19 )
            v5 = 19;
          else
            v5 = *(_DWORD *)(v8 + 124);
          v4 = dword_4D5E40[v6] + *(_DWORD *)(v8 + 128) * dword_4D5E90[v5];
          if ( (signed int)v4 < sub_406E10(1, 100) )
          {
            v9 = sub_406E10(1, 100);
            if ( v9 > 60 )
            {
              if ( v9 > 90 )
              {
                CPlayer::Write(a2, a3, v4, a4, 68, (unsigned int)"bd");
                CDBSocket::Write(a2, a3, v4, 3, (unsigned int)"ddwdbddd");
                CPlayer::_OutofInven(a4, a2, a3, v4, v8);
                CBase::Delete((void *)v8);
              }
              else
              {
                *(_DWORD *)(v8 + 128) = 0;
                if ( *(_DWORD *)(v8 + 124) > 0 )
                  --*(_DWORD *)(v8 + 124);
                CDBSocket::Write(a2, a3, v4, 28, (unsigned int)"ddbb");
                CItem::SendItemInfo(v8, a2, a3, v4, (void *)a4, 92);
              }
            }
            else
            {
              if ( !(*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v11 + 120))(v11, a4, 47, -v10) )
                CPlayer::_OutofInven(a4, a2, a3, v4, v11);
              CPlayer::Write(a2, a3, v4, a4, 67, (unsigned int)"b");
            }
          }
          else
          {
            if ( !(*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v11 + 120))(v11, a4, 47, -v10) )
              CPlayer::_OutofInven(a4, a2, a3, v4, v11);
            *(_DWORD *)(v8 + 128) = 0;
            ++*(_DWORD *)(v8 + 124);
            CDBSocket::Write(a2, a3, v4, 28, (unsigned int)"ddbb");
            CItem::SendItemInfo(v8, a2, a3, v4, (void *)a4, 92);
          }
        }
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D5E40: using guessed type int dword_4D5E40[];
// 4D5E90: using guessed type int dword_4D5E90[];

//----- (0042A310) --------------------------------------------------------
int __thiscall CItemDefense::CItemDefense(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CItem::CItem(this);
  *(_DWORD *)v3 = &off_4B6E58;
  *(_DWORD *)(v3 + 40) = a2;
  *(_DWORD *)(v3 + 92) = 0;
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = 0;
  *(_DWORD *)(v3 + 104) = 0;
  *(_DWORD *)(v3 + 108) = 0;
  *(_DWORD *)(v3 + 112) = 0;
  *(_DWORD *)(v3 + 116) = 0;
  *(_DWORD *)(v3 + 120) = 0;
  return v3;
}
// 4B6E58: using guessed type int (__stdcall *off_4B6E58)(int);

//----- (0042A390) --------------------------------------------------------
int __userpurge CItemGeneral::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CItemGeneral::_CItemGeneral(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0042A3C0) --------------------------------------------------------
int *__thiscall CItemDefense::PutInfo(int this, int *a2, int a3)
{
  int *result; // eax@6
  int v4; // [sp+0h] [bp-8h]@4
  int v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  if ( !a3 )
    a3 = *(_DWORD *)(this + 52);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(this + 36));
  *a2 = sub_42F960(*a2, *(_WORD *)(*(_DWORD *)(v5 + 40) + 64));
  if ( *(_DWORD *)(v5 + 44) )
    v4 = *(_DWORD *)(*(_DWORD *)(v5 + 44) + 32);
  else
    LOBYTE(v4) = 0;
  *a2 = sub_4189A0(*a2, v4);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(v5 + 48));
  *a2 = sub_44F9B0(*a2, a3);
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 92));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 96));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 84));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 100));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 104));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 108));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 112));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 116));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v5 + 120));
  memset((void *)*a2, 0, 2u);
  result = a2;
  *a2 += 2;
  return result;
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0042A590) --------------------------------------------------------
int __thiscall sub_42A590(int this, int a2, int a3)
{
  int result; // eax@11
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = this;
  *(_DWORD *)(this + 32) = a2;
  v5 = 0;
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, this + 36);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, &v5);
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 48);
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 52);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 92);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 96);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 84);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 100);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 104);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 108);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 112);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 116);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 120);
  *(_DWORD *)a3 += 2;
  if ( *(_DWORD *)(v4 + 100) > 20 )
  {
    *(_DWORD *)(v4 + 100) = 0;
    sub_4328C0("CItemDefense::Init() Error (PID:%d m_nXAttack:%d)", a2, *(_DWORD *)(v4 + 100));
  }
  if ( *(_DWORD *)(v4 + 104) > 20 )
  {
    *(_DWORD *)(v4 + 104) = 0;
    sub_4328C0("CItemDefense::Init() Error (PID:%d m_nXMagic:%d)", a2, *(_DWORD *)(v4 + 104));
  }
  if ( *(_DWORD *)(v4 + 108) > 10 )
  {
    *(_DWORD *)(v4 + 108) = 0;
    sub_4328C0("CItemDefense::Init() Error (PID:%d m_nXDefense:%d)", a2, *(_DWORD *)(v4 + 108));
  }
  if ( *(_DWORD *)(v4 + 112) > 20 )
  {
    *(_DWORD *)(v4 + 112) = 0;
    sub_4328C0("CItemDefense::Init() Error (PID:%d m_nXHit:%d)", a2, *(_DWORD *)(v4 + 112));
  }
  if ( *(_DWORD *)(v4 + 116) > 1 )
  {
    *(_DWORD *)(v4 + 116) = 0;
    sub_4328C0("CItemDefense::Init() Error (PID:%d m_nXDodge:%d)", a2, *(_DWORD *)(v4 + 116));
  }
  result = CItem::FindPrefix(v5);
  *(_DWORD *)(v4 + 44) = result;
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (0042A800) --------------------------------------------------------
void __userpurge CItemDefense::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@6

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v5 + 40) + 96) >= 0 && *(_DWORD *)(*(_DWORD *)(v5 + 40) + 96) != *(_DWORD *)(a5 + 460)
      || *(_DWORD *)(*(_DWORD *)(v5 + 40) + 100) > *(_DWORD *)(a5 + 60)
      || (v6 = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) - 2, CPlayer::IsWState(a5, v6))
      || *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) == 3 && CPlayer::IsWState(a5, 12) )
    {
      CItem::SubState(v5, 1);
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
    else
    {
      CPlayer::AddWState(a5, v6);
      *(_WORD *)(a5 + 2 * v6 + 1052) = *(_WORD *)(*(_DWORD *)(v5 + 40) + 64);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
    }
  }
}

//----- (0042A8F0) --------------------------------------------------------
signed int __userpurge CItemDefense::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+4h] [bp-10h]@1

  v7 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    CBase::Delete((void *)v7);
    result = 1;
  }
  return result;
}

//----- (0042AA10) --------------------------------------------------------
signed int __userpurge CItemDefense::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+4h] [bp-10h]@1

  v6 = a1;
  if ( *(_DWORD *)(a1 + 36) )
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
  return CBase::Delete((void *)v6);
}

//----- (0042AAF0) --------------------------------------------------------
char __thiscall CItemDefense::ApplySpec(int this, int a2)
{
  char result; // al@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  result = CInitItem::ApplySpec(*(void **)(this + 40), a2);
  if ( *(_DWORD *)(v3 + 44) )
    result = CPrefix::ApplySpec(*(void **)(v3 + 44), a2);
  if ( *(_DWORD *)(v3 + 108) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               15,
               1,
               *(_DWORD *)(v3 + 108),
               *(_DWORD *)(v3 + 108));
  if ( *(_DWORD *)(v3 + 116) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 10, 1, *(_DWORD *)(v3 + 116));
  return result;
}

//----- (0042AB80) --------------------------------------------------------
char __thiscall CItemDefense::FreeSpec(int this, int a2)
{
  char result; // al@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  result = CInitItem::FreeSpec(*(void **)(this + 40), a2);
  if ( *(_DWORD *)(v3 + 44) )
    result = CPrefix::FreeSpec(*(void **)(v3 + 44), a2);
  if ( *(_DWORD *)(v3 + 108) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               15,
               0,
               *(_DWORD *)(v3 + 108),
               *(_DWORD *)(v3 + 108));
  if ( *(_DWORD *)(v3 + 116) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 10, 0, *(_DWORD *)(v3 + 116));
  return result;
}

//----- (0042AC10) --------------------------------------------------------
void __userpurge CItemDefense::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@7

  v5 = a1;
  if ( (*(_DWORD *)(*(_DWORD *)(a1 + 40) + 96) < 0 || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 96) == *(_DWORD *)(a5 + 460))
    && *(_DWORD *)(*(_DWORD *)(a1 + 40) + 100) <= *(_DWORD *)(a5 + 60) )
  {
    if ( !CItem::IsState(a1, 1) )
    {
      v6 = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) - 2;
      if ( CPlayer::IsWState(a5, v6) )
      {
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      }
      else
      {
        if ( *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) != 3 || !CPlayer::IsWState(a5, 12) )
        {
          CPlayer::AddWState(a5, v6);
          *(_WORD *)(a5 + 2 * v6 + 1052) = *(_WORD *)(*(_DWORD *)(v5 + 40) + 64);
          CItem::AddState(v5, 1);
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          CChar::WriteInSight(a2, a3, a4, a5, 5, (unsigned int)"ddw");
          CDBSocket::Write(a2, a3, a4, 4, (unsigned int)"d");
        }
      }
    }
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042AD60) --------------------------------------------------------
void __userpurge CItemDefense::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@3

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    v6 = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) - 2;
    if ( CPlayer::IsWState(a5, v6) )
    {
      CPlayer::SubWState(a5, v6);
      *(_WORD *)(a5 + 2 * v6 + 1052) = 0;
      CItem::SubState(v5, 1);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 108))(v5, a5);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 6, (unsigned int)"ddw");
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042AE20) --------------------------------------------------------
void __userpurge sub_42AE20(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  *(_DWORD *)(a1 + 32) = a5;
  *(_DWORD *)(a1 + 36) = a6;
  CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbbdbbdb");
}

//----- (0042AE90) --------------------------------------------------------
void __userpurge CItemDefense::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  *(_DWORD *)(a1 + 32) = *(_DWORD *)(a5 + 452);
  if ( a6 == 10 )
    *(_DWORD *)(a1 + 48) &= 0xFFFFFFFBu;
  CItem::SendItemInfo(a1, a2, a3, a4, (void *)a5, 7);
  if ( a7 )
    CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
  else
    CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
}

//----- (0042AF90) --------------------------------------------------------
int __userpurge CItemDefense::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@2
  int v8; // [sp+4h] [bp-10h]@1

  v8 = a1;
  if ( a7 + *(_DWORD *)(a1 + 52) <= 0 )
  {
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    if ( a6 == 50 )
      CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    else
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    *(_DWORD *)(v8 + 52) = 0;
    CBase::Delete((void *)v8);
    result = 0;
  }
  else
  {
    result = *(_DWORD *)(a1 + 52);
  }
  return result;
}

//----- (0042B0F0) --------------------------------------------------------
signed int __userpurge CItemDefense::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-24h]@4
  int v8; // [sp+4h] [bp-20h]@1
  __int16 v9; // [sp+8h] [bp-1Ch]@3
  int v10; // [sp+Ah] [bp-1Ah]@3
  char v11; // [sp+Eh] [bp-16h]@6
  int v12; // [sp+Fh] [bp-15h]@6
  int v13; // [sp+13h] [bp-11h]@6
  char v14; // [sp+17h] [bp-Dh]@6
  char v15; // [sp+18h] [bp-Ch]@6
  char v16; // [sp+19h] [bp-Bh]@6
  char v17; // [sp+1Ah] [bp-Ah]@6
  char v18; // [sp+1Bh] [bp-9h]@6
  char v19; // [sp+1Ch] [bp-8h]@6
  char v20; // [sp+1Dh] [bp-7h]@6
  char v21; // [sp+1Eh] [bp-6h]@6
  char v22; // [sp+1Fh] [bp-5h]@6
  char v23; // [sp+20h] [bp-4h]@6
  char v24; // [sp+21h] [bp-3h]@6

  v8 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    result = 0;
  }
  else
  {
    v9 = *(_WORD *)(*(_DWORD *)(v8 + 40) + 64);
    v10 = *(_DWORD *)(v8 + 36);
    if ( *(_DWORD *)(v8 + 44) )
      v7 = *(_DWORD *)(*(_DWORD *)(v8 + 44) + 32);
    else
      LOBYTE(v7) = 0;
    v11 = v7;
    v12 = *(_DWORD *)(v8 + 48);
    v13 = *(_DWORD *)(v8 + 52);
    v14 = *(_BYTE *)(v8 + 92);
    v15 = *(_BYTE *)(v8 + 96);
    v16 = *(_BYTE *)(v8 + 84);
    v17 = *(_BYTE *)(v8 + 100);
    v18 = *(_BYTE *)(v8 + 104);
    v19 = *(_BYTE *)(v8 + 108);
    v20 = *(_BYTE *)(v8 + 112);
    v21 = *(_BYTE *)(v8 + 116);
    v22 = *(_BYTE *)(v8 + 120);
    v23 = 0;
    v24 = 0;
    CPlayer::_StorageIn(a5, a2, a3, a4, (int)&v9, *(_DWORD *)(v8 + 36), 0);
    CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
    CBase::Delete((void *)v8);
    result = 1;
  }
  return result;
}

//----- (0042B210) --------------------------------------------------------
signed int __userpurge CItemDefense::Charming<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@3
  signed int v7; // [sp+4h] [bp-34h]@41
  signed int v8; // [sp+8h] [bp-30h]@36
  int v9; // [sp+Ch] [bp-2Ch]@33
  int v10; // [sp+18h] [bp-20h]@1
  int v11; // [sp+24h] [bp-14h]@30
  signed int v12; // [sp+2Ch] [bp-Ch]@21
  signed int v13; // [sp+30h] [bp-8h]@22
  int v14; // [sp+34h] [bp-4h]@4

  v10 = a1;
  if ( CItem::GetLevel(a1) < 40 || CItem::IsState(v10, 1) )
    return 0;
  v14 = CItem::IsState(v10, 64);
  if ( a6 == 10 )
  {
    if ( *(_DWORD *)(v10 + 116) >= 1 || (a4 = *(_DWORD *)(v10 + 116), dword_4D5C48[a4] < sub_406E10(1, 10000000)) )
    {
LABEL_18:
      if ( v14 )
      {
        CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbb");
        CItem::SubState(v10, 64);
        CItem::SendItemInfo(v10, a2, a3, a4, (void *)a5, 92);
        result = 1;
      }
      else
      {
        if ( sub_406E10(1, 100) > 90 )
        {
          *(_DWORD *)(v10 + 96) = 0;
        }
        else
        {
          v12 = sub_406E10(1, 100);
          if ( v12 <= 50 )
          {
            if ( v12 <= 20 )
              v13 = 3;
            else
              v13 = 2;
          }
          else
          {
            v13 = 1;
          }
          *(_DWORD *)(v10 + 96) -= v13;
        }
        if ( *(_DWORD *)(v10 + 96) <= 0 )
        {
          CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
          CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
          v11 = 0;
          if ( *(_DWORD *)(*(_DWORD *)(v10 + 40) + 72) == 3 )
          {
            if ( CItem::GetLevel(v10) >= 44 )
            {
              if ( CItem::GetLevel(v10) - 40 >= 20 )
                v9 = 20;
              else
                v9 = CItem::GetLevel(v10) - 40;
              if ( *(_DWORD *)(v10 + 108) >= 10 )
                v8 = 10;
              else
                v8 = *(_DWORD *)(v10 + 108);
              v11 = dword_4D603C[v8] + dword_4D5FE8[v9];
            }
          }
          else
          {
            if ( *(_DWORD *)(v10 + 108) >= 10 )
              v7 = 10;
            else
              v7 = *(_DWORD *)(v10 + 108);
            v11 = dword_4D603C[v7] + (*(_DWORD *)(*(_DWORD *)(v10 + 40) + 112) + 1000) / 10000;
          }
          if ( v11 > 0 )
            CItem::InsertItem(a2, a3, a4, a5, 21, 517, 0, v11, -1);
          CBase::Delete((void *)v10);
        }
        else
        {
          CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
          CDBSocket::Write(a2, a3, a4, 18, (unsigned int)"ddb");
        }
        result = 1;
      }
      return result;
    }
    ++*(_DWORD *)(v10 + 116);
    CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
  }
  else
  {
    if ( a6 != 15 )
      return 0;
    if ( *(_DWORD *)(v10 + 108) >= 10 || (a4 = *(_DWORD *)(v10 + 108), dword_4D5BE8[a4] < sub_406E10(1, 10000000)) )
      goto LABEL_18;
    ++*(_DWORD *)(v10 + 108);
    CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
  }
  if ( v14 )
    CItem::SubState(v10, 64);
  CItem::SendItemInfo(v10, a2, a3, a4, (void *)a5, 92);
  return 1;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D5BE8: using guessed type int dword_4D5BE8[];
// 4D5C48: using guessed type int dword_4D5C48[];
// 4D5FE8: using guessed type int dword_4D5FE8[];
// 4D603C: using guessed type int dword_4D603C[];

//----- (0042B630) --------------------------------------------------------
signed int __userpurge CItemDefense::CharmingCheat<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6, int a7)
{
  int v8; // [sp+4h] [bp-8h]@1

  v8 = a1;
  if ( CItem::GetLevel(a1) < 40 || CItem::IsState(v8, 1) )
    return 0;
  CItem::IsState(v8, 64);
  if ( a6 == 10 )
  {
    *(_DWORD *)(v8 + 116) = a7;
    CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
  }
  else
  {
    if ( a6 != 15 )
      return 0;
    *(_DWORD *)(v8 + 108) = a7;
    CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
  }
  CItem::SendItemInfo(v8, a2, a3, a4, a5, 92);
  return 1;
}

//----- (0042B710) --------------------------------------------------------
signed int __userpurge CItemDefense::ChangePrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  signed int v9; // [sp+0h] [bp-40h]@35
  signed int v10; // [sp+4h] [bp-3Ch]@30
  int v11; // [sp+8h] [bp-38h]@27
  int v12; // [sp+10h] [bp-30h]@6
  int v13; // [sp+14h] [bp-2Ch]@1
  int v14; // [sp+18h] [bp-28h]@24
  int v15; // [sp+28h] [bp-18h]@14
  signed int i; // [sp+2Ch] [bp-14h]@8
  int v17; // [sp+30h] [bp-10h]@8
  int v18; // [sp+34h] [bp-Ch]@8
  int v19; // [sp+3Ch] [bp-4h]@8

  v13 = a1;
  if ( CItem::IsState(a1, 1) || a6 >= 0 && a6 != 1 )
    return 0;
  if ( *(_DWORD *)(v13 + 44) )
    v12 = *(_DWORD *)(*(_DWORD *)(v13 + 44) + 32);
  else
    v12 = 0;
  v17 = v12;
  v18 = sub_406E10(1, 100);
  v19 = CItem::IsState(v13, 64);
  for ( i = 0; i < 2; ++i )
  {
    if ( v18 <= *(_DWORD *)(a7 + 4 * i) )
    {
      v17 = *(_DWORD *)(a8 + 4 * i);
      break;
    }
  }
  if ( v12 == v17 )
  {
    if ( v19 )
    {
      CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbb");
      CItem::SubState(v13, 64);
      CItem::SendItemInfo(v13, a2, a3, a4, (void *)a5, 92);
      return 1;
    }
    *(_DWORD *)(v13 + 96) -= 5;
    if ( *(_DWORD *)(v13 + 96) <= 0 )
    {
      CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
      if ( CItem::GetLevel(v13) >= 40 )
      {
        v14 = 0;
        if ( *(_DWORD *)(*(_DWORD *)(v13 + 40) + 72) == 3 )
        {
          if ( CItem::GetLevel(v13) >= 44 )
          {
            if ( CItem::GetLevel(v13) - 40 >= 20 )
              v11 = 20;
            else
              v11 = CItem::GetLevel(v13) - 40;
            if ( *(_DWORD *)(v13 + 108) >= 10 )
              v10 = 10;
            else
              v10 = *(_DWORD *)(v13 + 108);
            v14 = dword_4D603C[v10] + dword_4D5FE8[v11];
          }
        }
        else
        {
          if ( *(_DWORD *)(v13 + 108) >= 10 )
            v9 = 10;
          else
            v9 = *(_DWORD *)(v13 + 108);
          v14 = dword_4D603C[v9] + (*(_DWORD *)(*(_DWORD *)(v13 + 40) + 112) + 1000) / 10000;
        }
        if ( v14 > 0 )
          CItem::InsertItem(a2, a3, a4, a5, 21, 517, 0, v14, -1);
      }
      CBase::Delete((void *)v13);
    }
    else
    {
      CPlayer::Write(a2, a3, a4, a5, 91, (unsigned int)"db");
      CDBSocket::Write(a2, a3, a4, 18, (unsigned int)"ddb");
    }
  }
  else
  {
    v15 = CItem::FindPrefix(v17);
    if ( !v15 )
      return 0;
    *(_DWORD *)(v13 + 44) = v15;
    CDBSocket::Write(a2, a3, a4, 19, (unsigned int)"ddbb");
    if ( v19 )
      CItem::SubState(v13, 64);
    CItem::SendItemInfo(v13, a2, a3, a4, (void *)a5, 92);
  }
  return 1;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D5FE8: using guessed type int dword_4D5FE8[];
// 4D603C: using guessed type int dword_4D603C[];

//----- (0042BAB0) --------------------------------------------------------
signed int __userpurge CItemDefense::Protect<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  signed int result; // eax@5
  int v6; // [sp+4h] [bp-Ch]@1

  v6 = a1;
  if ( CItem::GetLevel(a1) < 40
    || dword_4E35B8 != 2 && *(_DWORD *)(v6 + 120) >= *(_DWORD *)(*(_DWORD *)(v6 + 40) + 168)
    || CItem::IsState(v6, 65) )
  {
    result = 0;
  }
  else
  {
    ++*(_DWORD *)(v6 + 120);
    CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbwddb");
    CItem::AddState(v6, 64);
    CItem::SendItemInfo(v6, a2, a3, a4, a5, 92);
    result = 1;
  }
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0042BBD0) --------------------------------------------------------
int __thiscall CItemDefense::GetSellMoney(int this, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)(*(_DWORD *)(this + 40) + 112);
  if ( *(_DWORD *)(this + 44) )
    v3 += *(_DWORD *)(*(_DWORD *)(this + 44) + 40) * v3 / 100;
  if ( *(_DWORD *)(this + 108) )
    v3 += 100 * *(_DWORD *)(this + 108) * *(_DWORD *)(this + 108) * *(_DWORD *)(this + 108);
  if ( *(_DWORD *)(this + 116) )
    v3 += 200 * *(_DWORD *)(this + 116) * *(_DWORD *)(this + 116) * *(_DWORD *)(this + 116);
  return v3;
}

//----- (0042BC70) --------------------------------------------------------
void __userpurge CItemDefense::UpgradeDestroy(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int v5; // [sp+0h] [bp-18h]@19
  signed int v6; // [sp+4h] [bp-14h]@14
  int v7; // [sp+8h] [bp-10h]@11
  bool v8; // [sp+Ch] [bp-Ch]@2
  int v9; // [sp+10h] [bp-8h]@1
  int v10; // [sp+14h] [bp-4h]@8

  v9 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 3 )
    v8 = CItem::GetLevel(a1) < 44;
  else
    v8 = CItem::GetLevel(a1) < 40;
  if ( !v8 )
  {
    if ( !CItem::IsState(v9, 1) )
    {
      if ( (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 88))(v9, a5, 45) )
      {
        v10 = 0;
        if ( *(_DWORD *)(*(_DWORD *)(v9 + 40) + 72) == 3 )
        {
          if ( CItem::GetLevel(v9) >= 44 )
          {
            if ( CItem::GetLevel(v9) - 40 >= 20 )
              v7 = 20;
            else
              v7 = CItem::GetLevel(v9) - 40;
            if ( *(_DWORD *)(v9 + 108) >= 10 )
              v6 = 10;
            else
              v6 = *(_DWORD *)(v9 + 108);
            v10 = dword_4D603C[v6] + dword_4D5FE8[v7];
          }
        }
        else
        {
          if ( *(_DWORD *)(v9 + 108) >= 10 )
            v5 = 10;
          else
            v5 = *(_DWORD *)(v9 + 108);
          v10 = dword_4D603C[v5] + (*(_DWORD *)(*(_DWORD *)(v9 + 40) + 112) + 1000) / 10000;
        }
        if ( v10 > 0 )
          CItem::InsertItem(a2, a3, a4, a5, 21, 517, 0, v10, -1);
        CPlayer::_OutofInven(a5, a2, a3, a4, v9);
      }
    }
  }
}
// 4D5FE8: using guessed type int dword_4D5FE8[];
// 4D603C: using guessed type int dword_4D603C[];

//----- (0042BDD0) --------------------------------------------------------
void __userpurge CItemMask::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    CItem::SubState(v5, 1);
    CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
  }
}

//----- (0042BE10) --------------------------------------------------------
void __userpurge CItemMask::PutOn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  CPlayer::Write(a1, a2, a3, a4, 67, (unsigned int)"b");
}

//----- (0042BE40) --------------------------------------------------------
int __thiscall CItemMask::Init(int this, int a2, int a3, int a4)
{
  int result; // eax@1

  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 52) = 1;
  *(_DWORD *)(this + 96) = 1;
  result = this;
  *(_DWORD *)(this + 92) = 1;
  return result;
}

//----- (0042BE80) --------------------------------------------------------
void __userpurge CItemStandard::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( *(_DWORD *)(a5 + 480) || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 160) < 0 )
  {
    if ( CItem::IsState(a1, 1) )
    {
      CItem::SubState(v5, 1);
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
  }
  else
  {
    CItemStandard::Broken(a1, a2, a3, a4, a5, 0);
  }
}

//----- (0042BEF0) --------------------------------------------------------
int __thiscall CItemStandard::ApplySpec(int this, int a2)
{
  int result; // eax@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  result = this;
  if ( !*(_DWORD *)(this + 124) )
  {
    CInitItem::ApplySpec(*(void **)(this + 40), a2);
    result = v3;
    *(_DWORD *)(v3 + 124) = 1;
  }
  return result;
}

//----- (0042BF30) --------------------------------------------------------
int __thiscall CItemStandard::FreeSpec(int this, int a2)
{
  int result; // eax@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  result = this;
  if ( *(_DWORD *)(this + 124) )
  {
    CInitItem::FreeSpec(*(void **)(this + 40), a2);
    result = v3;
    *(_DWORD *)(v3 + 124) = 0;
  }
  return result;
}

//----- (0042BF70) --------------------------------------------------------
void __userpurge CItemStandard::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+18h] [bp-4h]@1

  v5 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 160) < 0 )
  {
    if ( CItem::IsState(a1, 1) || !CChar::IsNormal(a5) || CChar::IsGState(a5, 512) )
      return;
    if ( CPlayer::IsWState(a5, 13) )
    {
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      return;
    }
LABEL_25:
    *(_DWORD *)(v5 + 128) = GetTickCount() + 10000;
    CPlayer::AddWState(a5, 13);
    *(_DWORD *)(a5 + 512) = *(_DWORD *)(a5 + 512) & 0xFFFF | (*(_DWORD *)(*(_DWORD *)(v5 + 40) + 64) << 16);
    *(_DWORD *)(a5 + 1116) = v5;
    *(_DWORD *)(a5 + 1120) = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 160);
    CItem::AddState(v5, 1);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 5, (unsigned int)"ddw");
    CDBSocket::Write(a2, a3, a4, 4, (unsigned int)"d");
    return;
  }
  if ( !*(_DWORD *)(a5 + 480) )
  {
    CItemStandard::Broken(a1, a2, a3, a4, a5, 1);
    return;
  }
  if ( !CItem::IsState(a1, 1)
    && CChar::IsNormal(a5)
    && !CChar::IsGState(a5, 512)
    && *(_DWORD *)(a5 + 488) >= 3
    && *(_DWORD *)(a5 + 516) <= 5 )
  {
    if ( CPlayer::IsWState(a5, 13) )
    {
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      return;
    }
    if ( CChar::IsMState(a5, 8192i64) )
      CChar::CancelBuff(a5, a2, a3, a4, 12);
    if ( CChar::IsMState(a5, 68719476736i64) )
      CChar::CancelBuff(a5, a2, a3, a4, 40);
    if ( CChar::IsMState(a5, 1i64) )
      (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 124))(a5, 1, 0);
    goto LABEL_25;
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042C1B0) --------------------------------------------------------
void __userpurge CItemStandard::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    if ( CPlayer::IsWState(a5, 13) )
    {
      if ( *(_DWORD *)(v5 + 128) <= GetTickCount() )
      {
        CPlayer::SubWState(a5, 13);
        *(_DWORD *)(a5 + 512) &= 0xFFFFu;
        *(_DWORD *)(a5 + 1116) = 0;
        *(_DWORD *)(a5 + 1120) = -1;
        CItem::SubState(v5, 1);
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 108))(v5, a5);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 6, (unsigned int)"ddw");
        CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
      }
      else
      {
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042C2B0) --------------------------------------------------------
int __userpurge CItemStandard::CanDrop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CPlayer::Write(a1, a2, a3, a5, 67, (unsigned int)"b");
  return 0;
}

//----- (0042C2E0) --------------------------------------------------------
char __thiscall CItemStandard::CanTrade(int this, int a2, int a3, int a4)
{
  char result; // al@5
  int v5; // [sp+0h] [bp-4h]@1

  v5 = this;
  if ( !CItem::IsState(this, 1) && a4 && *(_DWORD *)(a3 + 480) == *(_DWORD *)(a4 + 480) && *(_DWORD *)(a4 + 516) < 6 )
    result = CItem::CanTrade(v5, a2, a3, a4);
  else
    result = 0;
  return result;
}

//----- (0042C340) --------------------------------------------------------
int __userpurge CItemStandard::Broken<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  if ( a6 )
  {
    if ( CItem::IsState(a1, 1) )
    {
      if ( CPlayer::IsWState(a5, 13) )
        CPlayer::SubWState(a5, 13);
      *(_DWORD *)(a5 + 512) &= 0xFFFFu;
      *(_DWORD *)(a5 + 1116) = 0;
      *(_DWORD *)(a5 + 1120) = -1;
      CItem::SubState(v7, 1);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 108))(v7, a5);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 6, (unsigned int)"ddw");
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
  }
  CPlayer::_OutofInven(a5, a2, a3, a4, v7);
  CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 92))(v7, 4);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042C450) --------------------------------------------------------
int __thiscall CItemOrnament::CItemOrnament(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CItem::CItem(this);
  *(_DWORD *)v3 = &off_4B7038;
  *(_DWORD *)(v3 + 40) = a2;
  return v3;
}
// 4B7038: using guessed type int (__stdcall *off_4B7038)(int);

//----- (0042C480) --------------------------------------------------------
int __thiscall CItemOrnament::Init(void *this, char a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // ST04_4@1

  v5 = this;
  result = CItem::FindPrefix(a2);
  *((_DWORD *)v5 + 11) = result;
  *((_DWORD *)v5 + 13) = 1;
  return result;
}

//----- (0042C4B0) --------------------------------------------------------
void __userpurge CItemOrnament::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@6

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v5 + 40) + 96) >= 0 && *(_DWORD *)(*(_DWORD *)(v5 + 40) + 96) != *(_DWORD *)(a5 + 460)
      || *(_DWORD *)(*(_DWORD *)(v5 + 40) + 100) > *(_DWORD *)(a5 + 60)
      || (v6 = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) - 2, CPlayer::IsWState(a5, v6)) )
    {
      CItem::SubState(v5, 1);
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
    else
    {
      CPlayer::AddWState(a5, v6);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
    }
  }
}

//----- (0042C560) --------------------------------------------------------
signed int __userpurge CItemOrnament::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+4h] [bp-8h]@1

  v7 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    CBase::Delete((void *)v7);
    result = 1;
  }
  return result;
}

//----- (0042C640) --------------------------------------------------------
signed int __userpurge CItemOrnament::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+4h] [bp-8h]@1

  v6 = a1;
  if ( *(_DWORD *)(a1 + 36) )
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
  return CBase::Delete((void *)v6);
}

//----- (0042C6E0) --------------------------------------------------------
char __thiscall CItemOrnament::ApplySpec(int this, int a2)
{
  char result; // al@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  result = CInitItem::ApplySpec(*(void **)(this + 40), a2);
  if ( *(_DWORD *)(v3 + 44) )
    result = CPrefix::ApplySpec(*(void **)(v3 + 44), a2);
  return result;
}

//----- (0042C720) --------------------------------------------------------
char __thiscall CItemOrnament::FreeSpec(int this, int a2)
{
  char result; // al@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  result = CInitItem::FreeSpec(*(void **)(this + 40), a2);
  if ( *(_DWORD *)(v3 + 44) )
    result = CPrefix::FreeSpec(*(void **)(v3 + 44), a2);
  return result;
}

//----- (0042C760) --------------------------------------------------------
void __userpurge CItemOrnament::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@7

  v5 = a1;
  if ( (*(_DWORD *)(*(_DWORD *)(a1 + 40) + 96) < 0 || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 96) == *(_DWORD *)(a5 + 460))
    && *(_DWORD *)(*(_DWORD *)(a1 + 40) + 100) <= *(_DWORD *)(a5 + 60) )
  {
    if ( !CItem::IsState(a1, 1) )
    {
      v6 = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) - 2;
      if ( CPlayer::IsWState(a5, v6) )
      {
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      }
      else
      {
        CPlayer::AddWState(a5, v6);
        CItem::AddState(v5, 1);
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CPlayer::Write(a2, a3, a4, a5, 5, (unsigned int)"ddw");
        CDBSocket::Write(a2, a3, a4, 4, (unsigned int)"d");
      }
    }
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042C870) --------------------------------------------------------
void __userpurge CItemOrnament::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@3

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    v6 = *(_DWORD *)(*(_DWORD *)(v5 + 40) + 72) - 2;
    if ( CPlayer::IsWState(a5, v6) )
    {
      CPlayer::SubWState(a5, v6);
      CItem::SubState(v5, 1);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 108))(v5, a5);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 6, (unsigned int)"ddw");
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042C920) --------------------------------------------------------
void __userpurge CItemOrnament::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  *(_DWORD *)(a1 + 32) = *(_DWORD *)(a5 + 452);
  if ( a6 == 10 )
    *(_DWORD *)(a1 + 48) &= 0xFFFFFFFBu;
  CItem::SendItemInfo(a1, a2, a3, a4, (void *)a5, 7);
  if ( a7 )
    CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
  else
    CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
}

//----- (0042CA20) --------------------------------------------------------
int __userpurge CItemOrnament::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@2
  int v8; // [sp+4h] [bp-8h]@1

  v8 = a1;
  if ( a7 + *(_DWORD *)(a1 + 52) <= 0 )
  {
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    if ( a6 == 50 )
      CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    else
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    *(_DWORD *)(v8 + 52) = 0;
    CBase::Delete((void *)v8);
    result = 0;
  }
  else
  {
    result = *(_DWORD *)(a1 + 52);
  }
  return result;
}

//----- (0042CB30) --------------------------------------------------------
char __userpurge CItemTransform::CanDrop<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  char result; // al@2
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    CPlayer::Write(a2, a3, a4, a6, 67, (unsigned int)"b");
    result = 0;
  }
  else
  {
    result = CItem::CanDrop(v7, a5, a6);
  }
  return result;
}

//----- (0042CB80) --------------------------------------------------------
signed int __userpurge CItemOrnament::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-24h]@4
  int v8; // [sp+4h] [bp-20h]@1
  __int16 v9; // [sp+8h] [bp-1Ch]@3
  int v10; // [sp+Ah] [bp-1Ah]@3
  char v11; // [sp+Eh] [bp-16h]@6
  int v12; // [sp+Fh] [bp-15h]@6
  int v13; // [sp+13h] [bp-11h]@6
  char v14; // [sp+17h] [bp-Dh]@6
  char v15; // [sp+18h] [bp-Ch]@6
  char v16; // [sp+19h] [bp-Bh]@6
  char v17; // [sp+1Ah] [bp-Ah]@6
  char v18; // [sp+1Bh] [bp-9h]@6
  char v19; // [sp+1Ch] [bp-8h]@6
  char v20; // [sp+1Dh] [bp-7h]@6
  char v21; // [sp+1Eh] [bp-6h]@6
  char v22; // [sp+1Fh] [bp-5h]@6
  char v23; // [sp+20h] [bp-4h]@6
  char v24; // [sp+21h] [bp-3h]@6

  v8 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    result = 0;
  }
  else
  {
    v9 = *(_WORD *)(*(_DWORD *)(v8 + 40) + 64);
    v10 = *(_DWORD *)(v8 + 36);
    if ( *(_DWORD *)(v8 + 44) )
      v7 = *(_DWORD *)(*(_DWORD *)(v8 + 44) + 32);
    else
      LOBYTE(v7) = 0;
    v11 = v7;
    v12 = *(_DWORD *)(v8 + 48);
    v13 = *(_DWORD *)(v8 + 52);
    v14 = 0;
    v15 = 0;
    v16 = *(_BYTE *)(v8 + 84);
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    CPlayer::_StorageIn(a5, a2, a3, a4, (int)&v9, *(_DWORD *)(v8 + 36), 0);
    CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
    CBase::Delete((void *)v8);
    result = 1;
  }
  return result;
}

//----- (0042CC80) --------------------------------------------------------
void __userpurge CItemOrnament::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7)
{
  CItem::NewIID();
  CDBSocket::Write(a1, a2, a3, 35, (unsigned int)"bdwbddbbdds");
}

//----- (0042CD20) --------------------------------------------------------
signed int __userpurge CItemOrnament::ChangePrefix<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v9; // [sp+0h] [bp-1Ch]@6
  int v10; // [sp+4h] [bp-18h]@1
  int v11; // [sp+8h] [bp-14h]@14
  signed int i; // [sp+Ch] [bp-10h]@8
  int v13; // [sp+10h] [bp-Ch]@8
  int v14; // [sp+14h] [bp-8h]@8

  v10 = a1;
  if ( CItem::IsState(a1, 1) || a6 >= 0 && a6 != 2 )
    return 0;
  if ( *(_DWORD *)(v10 + 44) )
    v9 = *(_DWORD *)(*(_DWORD *)(v10 + 44) + 32);
  else
    v9 = 0;
  v13 = v9;
  v14 = sub_406E10(1, 100);
  for ( i = 0; i < 2; ++i )
  {
    if ( v14 <= *(_DWORD *)(a7 + 4 * i) )
    {
      v13 = *(_DWORD *)(a8 + 4 * i);
      break;
    }
  }
  if ( v9 == v13 )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
  }
  else
  {
    v11 = CItem::FindPrefix(v13);
    if ( !v11 )
      return 0;
    *(_DWORD *)(v10 + 44) = v11;
    CDBSocket::Write(a2, a3, a4, 19, (unsigned int)"ddbb");
    CItem::SendItemInfo(v10, a2, a3, a4, (void *)a5, 92);
  }
  return 1;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0042CE40) --------------------------------------------------------
int __thiscall CItemOrnament::GetSellMoney(int this, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)(*(_DWORD *)(this + 40) + 112);
  if ( *(_DWORD *)(this + 44) )
    v3 += *(_DWORD *)(*(_DWORD *)(this + 44) + 40) * v3 / 100;
  return v3;
}

//----- (0042CE90) --------------------------------------------------------
void __userpurge CItemOrnament::UpgradeDestroy(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1

  v5 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 64) != 596 )
  {
    if ( !CItem::IsState(a1, 1) )
    {
      if ( (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 88))(v5, a5, 45) )
      {
        CItem::InsertItem(a2, a3, a4, a5, 45, 517, 0, 1, -1);
        CPlayer::_OutofInven(a5, a2, a3, a4, v5);
      }
    }
  }
}

//----- (0042CF10) --------------------------------------------------------
int __thiscall CItemGeneral::CItemGeneral(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CItem::CItem(this);
  *(_DWORD *)v3 = &off_4B7118;
  *(_DWORD *)(v3 + 40) = a2;
  return v3;
}
// 4B7118: using guessed type int (__stdcall *off_4B7118)(int);

//----- (0042CF40) --------------------------------------------------------
int __thiscall CItem::Sum(int this, int a2)
{
  int result; // eax@3

  if ( a2 <= 0 || (unsigned int)(a2 + *(_DWORD *)(this + 52)) <= 0x7FFFFFFF )
  {
    result = a2 + *(_DWORD *)(this + 52);
  }
  else
  {
    sub_4328C0(
      "Excess of Item Num : PID(%d), Index(%d), IID(%d), Num(%d), AddNum(%d)",
      *(_DWORD *)(this + 32),
      *(_DWORD *)(*(_DWORD *)(this + 40) + 64),
      *(_DWORD *)(this + 36),
      *(_DWORD *)(this + 52),
      a2);
    result = 2147483647;
  }
  return result;
}

//----- (0042CFB0) --------------------------------------------------------
int __userpurge CItemGeneral::Use<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( CInitItem::Use(*(_DWORD *)(a1 + 40), a2, a3, a4, a5) )
  {
    (*(void (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v6 + 120))(
      v6,
      a5,
      *(_DWORD *)(*(_DWORD *)(v6 + 40) + 156) != 0 ? 43 : 9,
      -1);
    if ( *(_DWORD *)(*(_DWORD *)(v6 + 40) + 172) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInRect(a2, a3, a4, a5, 73, 15, (unsigned int)"db");
    }
  }
  return *(_DWORD *)(v6 + 52);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042D040) --------------------------------------------------------
int __userpurge CItemGeneral::Trade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v8; // [sp+0h] [bp-8h]@1
  int v9; // [sp+4h] [bp-4h]@4

  v8 = a1;
  if ( *(_DWORD *)(a1 + 52) < a7 )
    sub_422D80(a1, a2, a3, a4);
  if ( *(_DWORD *)(v8 + 52) <= a7 )
  {
    *(_DWORD *)(v8 + 32) = 0;
    *(_DWORD *)(v8 + 48) |= 4u;
    CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
    CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    v9 = v8;
  }
  else
  {
    *(_DWORD *)(v8 + 52) -= a7;
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
    v9 = CItem::CreateItem(*(_DWORD *)(*(_DWORD *)(v8 + 40) + 64), 0, a7, *(_DWORD *)(v8 + 84));
  }
  return v9;
}

//----- (0042D180) --------------------------------------------------------
signed int __userpurge CItemGeneral::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // [sp+0h] [bp-2Ch]@2
  int v8; // [sp+4h] [bp-28h]@1
  LONG v9; // [sp+Ch] [bp-20h]@5
  __int16 v10; // [sp+10h] [bp-1Ch]@4
  LONG v11; // [sp+12h] [bp-1Ah]@4
  int v12; // [sp+16h] [bp-16h]@4
  int v13; // [sp+1Ah] [bp-12h]@4
  int v14; // [sp+1Eh] [bp-Eh]@4
  int v15; // [sp+22h] [bp-Ah]@4
  int v16; // [sp+26h] [bp-6h]@4
  int v17; // [sp+38h] [bp+Ch]@4

  v8 = a1;
  if ( *(_DWORD *)(a1 + 52) >= a6 )
    v7 = a6;
  else
    v7 = *(_DWORD *)(a1 + 52);
  v17 = v7;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  *(int *)((char *)&v12 + 1) = *(_DWORD *)(a1 + 48) & 0x88;
  *(int *)((char *)&v14 + 3) = *(_BYTE *)(a1 + 84);
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 92) )
  {
    *(_DWORD *)(a1 + 52) -= v17;
    if ( CPlayer::_FindStorageItem(
           (void *)a5,
           *(_DWORD *)(*(_DWORD *)(a1 + 40) + 64),
           (int)&v9,
           *(_DWORD *)(a1 + 48) & 0x88,
           *(_DWORD *)(a1 + 84)) )
    {
      v11 = v9;
      *(int *)((char *)&v13 + 1) = v17;
      CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
      if ( *(_DWORD *)(v8 + 52) <= 0 )
        CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
      else
        CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
    }
    else
    {
      v10 = *(_WORD *)(*(_DWORD *)(v8 + 40) + 64);
      *(int *)((char *)&v13 + 1) = v17;
      if ( *(_DWORD *)(v8 + 52) <= 0 )
      {
        v11 = *(_DWORD *)(v8 + 36);
        CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
      }
      else
      {
        v11 = CItem::NewIID();
        CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
        CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
      }
    }
    CPlayer::_StorageIn(a5, a2, a3, a4, (int)&v10, *(_DWORD *)(v8 + 36), *(_DWORD *)(v8 + 52));
    if ( *(_DWORD *)(v8 + 52) > 0 )
      return 0;
  }
  else
  {
    v11 = *(_DWORD *)(a1 + 36);
    v10 = *(_WORD *)(*(_DWORD *)(a1 + 40) + 64);
    *(int *)((char *)&v13 + 1) = *(_DWORD *)(a1 + 52);
    CPlayer::_StorageIn(a5, a2, a3, a4, (int)&v10, *(_DWORD *)(a1 + 36), 0);
    CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
  }
  CBase::Delete((void *)v8);
  return 1;
}

//----- (0042D460) --------------------------------------------------------
signed int __userpurge CItemGeneral::StorageOut<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int *a8)
{
  signed int result; // eax@6
  int v9; // [sp+0h] [bp-10h]@3
  int v10; // [sp+4h] [bp-Ch]@1
  int v11; // [sp+Ch] [bp-4h]@5
  int v12; // [sp+1Ch] [bp+Ch]@5

  v10 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 92) )
  {
    if ( *(_DWORD *)(a1 + 52) >= a6 )
      v9 = a6;
    else
      v9 = *(_DWORD *)(a1 + 52);
    v12 = v9;
    *(_DWORD *)(a1 + 52) -= v9;
    v11 = CPlayer::_FindMergeItem((void *)a5, a1);
    if ( v11 )
    {
      *(_DWORD *)(v11 + 52) = CItem::Sum(v11, v12);
      CPlayer::Write(a2, a3, a4, a5, 90, (unsigned int)"dd");
      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
      *a8 = *(_DWORD *)(v10 + 52);
      CPlayer::_StorageOut((void *)a5, *(_DWORD *)(v10 + 36), *a8);
      CDBSocket::Write(a2, a3, a4, 12, (unsigned int)"ddbd");
      CBase::Delete((void *)v10);
      result = 0;
    }
    else
    {
      if ( *(_DWORD *)(v10 + 52) <= 0 )
      {
        *(_DWORD *)(v10 + 52) = v12;
        result = CItem::StorageOut(v10, a2, a3, a4, (void *)a5, v12, a7, (int)a8);
      }
      else
      {
        *(_DWORD *)(v10 + 36) = CItem::NewIID();
        *a8 = *(_DWORD *)(v10 + 52);
        *(_DWORD *)(v10 + 52) = v12;
        CItem::SendItemInfo(v10, a2, a3, a4, (void *)a5, 89);
        CDBSocket::Write(a2, a3, a4, 12, (unsigned int)"ddbd");
        CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
        result = 1;
      }
    }
  }
  else
  {
    result = CItem::StorageOut(a1, a2, a3, a4, (void *)a5, a6, a7, (int)a8);
  }
  return result;
}

//----- (0042D670) --------------------------------------------------------
int __thiscall CItemGeneral::Enchant(int this, int a2, int a3)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = this;
  if ( CInitItem::Enchant(*(void **)(this + 40), a2, a3) )
    (*(void (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v4 + 120))(v4, a2, 21, -1);
  return *(_DWORD *)(v4 + 52);
}

//----- (0042D6B0) --------------------------------------------------------
int __thiscall CItemQuest::CItemQuest(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CItem::CItem(this);
  *(_DWORD *)v3 = &off_4B7248;
  *(_DWORD *)(v3 + 40) = a2;
  return v3;
}
// 4B7248: using guessed type int (__stdcall *off_4B7248)(int);

//----- (0042D6E0) --------------------------------------------------------
int __userpurge CItemGeneral::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v8; // [sp+0h] [bp-Ch]@1
  int v9; // [sp+1Ch] [bp+10h]@3

  v8 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 92) )
  {
    *(_DWORD *)(a1 + 52) = CItem::Sum(a1, a7);
    if ( *(_DWORD *)(v8 + 52) <= 0 )
    {
      CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
      if ( a6 == 50 )
        CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
      else
        CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
      v9 = 0;
      CBase::Delete((void *)v8);
    }
    else
    {
      CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
      v9 = *(_DWORD *)(v8 + 52);
    }
  }
  else
  {
    v9 = CItem::UpdateNum(a1, a2, a3, a4, a5, a6, a7);
  }
  return v9;
}

//----- (0042D860) --------------------------------------------------------
bool __thiscall CItemQuest::CanMerge(int this, int a2)
{
  int v2; // esi@2
  int v5; // [sp+8h] [bp-4h]@1

  v5 = this;
  return *(_DWORD *)(this + 40) == *(_DWORD *)(a2 + 40)
      && (v2 = CItem::IsState(this, 136), v2 == CItem::IsState(a2, 136))
      && (dword_4E35B8 != 2 || *(_DWORD *)(v5 + 84) == *(_DWORD *)(a2 + 84));
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0042D8D0) --------------------------------------------------------
int __thiscall CItemMoney::CItemMoney(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CItem::CItem(this);
  *(_DWORD *)v3 = &off_4B7328;
  *(_DWORD *)(v3 + 40) = a2;
  return v3;
}
// 4B7328: using guessed type int (__stdcall *off_4B7328)(int);

//----- (0042D900) --------------------------------------------------------
bool __thiscall CItemMoney::CanMerge(int this, int a2)
{
  return *(_DWORD *)(this + 40) == *(_DWORD *)(a2 + 40);
}

//----- (0042D920) --------------------------------------------------------
signed int __userpurge CItemMoney::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST28_4@1

  v7 = a1;
  InterlockedExchangeAdd(&dword_4E2014, -*(_DWORD *)(a1 + 52));
  *(_DWORD *)(a5 + 1096) = 0;
  CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
  CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
  CBase::Delete((void *)v7);
  return 1;
}

//----- (0042D9C0) --------------------------------------------------------
void __userpurge CItemMoney::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // [sp+0h] [bp-8h]@1

  v7 = a1;
  if ( a6 != 10 )
    InterlockedExchangeAdd(&dword_4E2014, *(_DWORD *)(a1 + 52));
  if ( *(_DWORD *)(v7 + 80) )
  {
    if ( *(_DWORD *)(v7 + 80) == 1 )
    {
      *(_DWORD *)(a5 + 1340) += *(_DWORD *)(v7 + 52);
    }
    else
    {
      if ( *(_DWORD *)(v7 + 80) == 2 )
        *(_DWORD *)(a5 + 1344) += *(_DWORD *)(v7 + 52);
    }
  }
  *(_DWORD *)(a5 + 1096) = v7;
  *(_DWORD *)(v7 + 32) = *(_DWORD *)(a5 + 452);
  if ( a6 == 10 )
    *(_DWORD *)(v7 + 48) &= 0xFFFFFFFBu;
  CItem::SendItemInfo(v7, a2, a3, a4, (void *)a5, 7);
  if ( a7 )
    CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
  else
    CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
}

//----- (0042DB00) --------------------------------------------------------
signed int __userpurge CItemMoney::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, LONG Value)
{
  signed int result; // eax@9
  int v8; // [sp+0h] [bp-8h]@1
  int v9; // [sp+4h] [bp-4h]@8

  v8 = a1;
  if ( a6 != 10 )
  {
    if ( a6 != 26 )
    {
      if ( a6 != 50 )
      {
        if ( a6 != 51 )
        {
          if ( a6 != 15 || Value < 0 )
            InterlockedExchangeAdd(&dword_4E2014, Value);
        }
      }
    }
  }
  v9 = *(_DWORD *)(v8 + 52);
  if ( v9 >= 0 )
  {
    *(_DWORD *)(v8 + 52) = CItem::Sum(v8, Value);
    if ( *(_DWORD *)(v8 + 52) <= 0 )
    {
      *(_DWORD *)(a5 + 1096) = 0;
      CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
      if ( a6 != 50 && a6 != 51 )
        CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
      else
        CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
      *(_DWORD *)(v8 + 52) = 0;
      CBase::Delete((void *)v8);
    }
    else
    {
      CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
    }
    result = *(_DWORD *)(v8 + 52);
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
    sub_4328C0(
      "nOldNum<0 :  UID(%d) PID(%d) IID(%d) Num(%d) ",
      *(_DWORD *)(a5 + 448),
      *(_DWORD *)(v8 + 32),
      *(_DWORD *)(v8 + 36),
      v9);
    result = 1;
  }
  return result;
}

//----- (0042DD20) --------------------------------------------------------
LONG __userpurge CItemMoney::Drop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int v10; // edx@1
  int v12; // ST40_4@16
  int v13; // [sp+10h] [bp-14h]@1
  signed int v14; // [sp+14h] [bp-10h]@8
  int v15; // [sp+18h] [bp-Ch]@7

  v13 = a1;
  *(_DWORD *)(a1 + 56) = *(_DWORD *)(a5 + 320);
  v10 = *(_DWORD *)(a6 + 4);
  *(_DWORD *)(a1 + 60) = *(_DWORD *)a6;
  *(_DWORD *)(a1 + 64) = v10;
  *(_DWORD *)(a1 + 68) = GetTickCount() + 180000;
  CIOObject::AddTimer(v13, a2, a3, a4, 60000, 0);
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 60))(a5) )
  {
    if ( a8 )
    {
      InterlockedExchangeAdd(&dword_4E2014, -*(_DWORD *)(v13 + 52));
      *(_DWORD *)(a5 + 1096) = 0;
      CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
      CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    }
    else
    {
      *(_DWORD *)(v13 + 32) = *(_DWORD *)(a5 + 452);
    }
  }
  else
  {
    if ( !a9 )
    {
      v15 = sub_450810(a2, a3, a4, a10);
      if ( v15 )
      {
        v14 = 0;
        if ( CChar::IsBState(v15, 4i64) )
        {
          v14 = 20;
        }
        else
        {
          if ( CChar::IsBState(v15, 1i64) )
            v14 = 20;
        }
        if ( v14 )
          *(_DWORD *)(v13 + 52) += v14 * *(_DWORD *)(v13 + 52) / 100;
        sub_4239C0(v15, a2, a3, a4, v15 + 352);
      }
    }
    *(_DWORD *)(v13 + 72) = a9;
    *(_DWORD *)(v13 + 76) = a10;
    CIOObject::AddTimer(v13, a2, a3, a4, 120000, 1);
  }
  v12 = (int)sub_44FCE0(a2, a3, a4, 54, (unsigned int)"wdddd");
  sub_493440(*(_DWORD *)(a5 + 320), a2, a3, a4, a7, v12, 25);
  return CIOBuffer::Release(v12);
}

//----- (0042DF30) --------------------------------------------------------
int __userpurge CItemMoney::Trade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v8; // [sp+0h] [bp-8h]@1
  int v9; // [sp+4h] [bp-4h]@4

  v8 = a1;
  if ( *(_DWORD *)(a1 + 52) < a7 )
    sub_422D80(a1, a2, a3, a4);
  if ( *(_DWORD *)(v8 + 52) <= a7 )
  {
    *(_DWORD *)(v8 + 32) = 0;
    *(_DWORD *)(v8 + 48) |= 4u;
    *(_DWORD *)(a5 + 1096) = 0;
    CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
    CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    v9 = v8;
  }
  else
  {
    *(_DWORD *)(v8 + 52) -= a7;
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
    v9 = CItem::CreateItem(*(_DWORD *)(*(_DWORD *)(v8 + 40) + 64), 0, a7, -1);
  }
  return v9;
}

//----- (0042E080) --------------------------------------------------------
signed int __userpurge CItemMoney::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@13
  int v7; // [sp+0h] [bp-28h]@2
  int v8; // [sp+4h] [bp-24h]@1
  __int16 v9; // [sp+8h] [bp-20h]@4
  LONG v10; // [sp+Ah] [bp-1Eh]@4
  int v11; // [sp+Eh] [bp-1Ah]@4
  int v12; // [sp+12h] [bp-16h]@4
  int v13; // [sp+16h] [bp-12h]@4
  int v14; // [sp+1Ah] [bp-Eh]@4
  int v15; // [sp+1Eh] [bp-Ah]@4
  LONG v16; // [sp+24h] [bp-4h]@4
  int v17; // [sp+34h] [bp+Ch]@4

  v8 = a1;
  if ( *(_DWORD *)(a1 + 52) >= a6 )
    v7 = a6;
  else
    v7 = *(_DWORD *)(a1 + 52);
  v17 = v7;
  *(_DWORD *)(a1 + 52) -= v7;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  *(int *)((char *)&v11 + 1) = *(_DWORD *)(a1 + 48) & 0x88;
  if ( CPlayer::_FindStorageItem((void *)a5, *(_DWORD *)(*(_DWORD *)(a1 + 40) + 64), (int)&v16, *(_DWORD *)(a1 + 48) & 0x88, 0) )
  {
    v10 = v16;
    *(int *)((char *)&v12 + 1) = v17;
    CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
    if ( *(_DWORD *)(v8 + 52) <= 0 )
    {
      *(_DWORD *)(a5 + 1096) = 0;
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    }
    else
    {
      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
    }
  }
  else
  {
    v9 = *(_WORD *)(*(_DWORD *)(v8 + 40) + 64);
    *(int *)((char *)&v12 + 1) = v17;
    if ( *(_DWORD *)(v8 + 52) <= 0 )
    {
      *(_DWORD *)(a5 + 1096) = 0;
      v10 = *(_DWORD *)(v8 + 36);
      CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
    }
    else
    {
      v10 = CItem::NewIID();
      CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
    }
  }
  CPlayer::_StorageIn(a5, a2, a3, a4, (int)&v9, *(_DWORD *)(v8 + 36), *(_DWORD *)(v8 + 52));
  if ( *(_DWORD *)(v8 + 52) <= 0 )
  {
    CBase::Delete((void *)v8);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0042E2E0) --------------------------------------------------------
signed int __userpurge CItemMoney::StorageOut<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int *a8)
{
  signed int result; // eax@6
  int v9; // [sp+0h] [bp-10h]@2
  int v10; // [sp+4h] [bp-Ch]@1
  int v11; // [sp+Ch] [bp-4h]@4
  int v12; // [sp+1Ch] [bp+Ch]@4

  v10 = a1;
  if ( *(_DWORD *)(a1 + 52) >= a6 )
    v9 = a6;
  else
    v9 = *(_DWORD *)(a1 + 52);
  v12 = v9;
  *(_DWORD *)(a1 + 52) -= v9;
  v11 = CPlayer::_FindMergeItem((void *)a5, a1);
  if ( v11 )
  {
    if ( *(_DWORD *)(v11 + 52) >= 0 )
    {
      *(_DWORD *)(v11 + 52) = CItem::Sum(v11, v12);
      CPlayer::Write(a2, a3, a4, a5, 90, (unsigned int)"dd");
      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
      *a8 = *(_DWORD *)(v10 + 52);
      CPlayer::_StorageOut((void *)a5, *(_DWORD *)(v10 + 36), *a8);
      CDBSocket::Write(a2, a3, a4, 12, (unsigned int)"ddbd");
      CBase::Delete((void *)v10);
      result = 0;
    }
    else
    {
      CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
      sub_4328C0(
        "nOldNum<0 :  UID(%d) PID(%d) IID(%d) Num(%d) LogType(%d)",
        *(_DWORD *)(a5 + 448),
        *(_DWORD *)(v10 + 32),
        *(_DWORD *)(v11 + 36),
        *(_DWORD *)(v11 + 52),
        15);
      result = 1;
    }
  }
  else
  {
    *(_DWORD *)(a5 + 1096) = v10;
    if ( *(_DWORD *)(v10 + 52) <= 0 )
    {
      *(_DWORD *)(v10 + 52) = v12;
      result = CItem::StorageOut(v10, a2, a3, a4, (void *)a5, v12, a7, (int)a8);
    }
    else
    {
      *(_DWORD *)(v10 + 36) = CItem::NewIID();
      *a8 = *(_DWORD *)(v10 + 52);
      *(_DWORD *)(v10 + 52) = v12;
      CItem::SendItemInfo(v10, a2, a3, a4, (void *)a5, 89);
      CDBSocket::Write(a2, a3, a4, 12, (unsigned int)"ddbd");
      CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
      result = 1;
    }
  }
  return result;
}

//----- (0042E570) --------------------------------------------------------
int __thiscall CItemMoney::SetEtc(int this, int a2)
{
  if ( *(_DWORD *)(this + 80) )
  {
    if ( *(_DWORD *)(this + 80) == 1 )
    {
      *(_DWORD *)(a2 + 1340) += *(_DWORD *)(this + 52);
    }
    else
    {
      if ( *(_DWORD *)(this + 80) == 2 )
        *(_DWORD *)(a2 + 1344) += *(_DWORD *)(this + 52);
    }
  }
  return CItem::SetEtc(this, a2);
}

//----- (0042E5E0) --------------------------------------------------------
int __thiscall CItemTransform::CItemTransform(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CItem::CItem(this);
  *(_DWORD *)v3 = &off_4B7470;
  *(_DWORD *)(v3 + 40) = a2;
  *(_DWORD *)(v3 + 92) = 0;
  *(_DWORD *)(v3 + 96) = 0;
  *(_DWORD *)(v3 + 100) = 0;
  *(_DWORD *)(v3 + 104) = 0;
  return v3;
}
// 4B7470: using guessed type int (__stdcall *off_4B7470)(int);

//----- (0042E640) --------------------------------------------------------
int *__thiscall CItemTransform::PutInfo(int this, int *a2, int a3)
{
  int *result; // eax@1
  int v4; // ST0C_4@1

  v4 = this;
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(this + 36));
  *a2 = sub_42F960(*a2, *(_WORD *)(*(_DWORD *)(v4 + 40) + 64));
  *a2 = sub_4189A0(*a2, 0);
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(v4 + 48));
  *a2 = sub_44F9B0(*a2, *(_DWORD *)(v4 + 96));
  *a2 = sub_4189A0(*a2, *(_BYTE *)(v4 + 92));
  memset((void *)*a2, 0, 0xAu);
  result = a2;
  *a2 += 10;
  return result;
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0042E710) --------------------------------------------------------
int __thiscall sub_42E710(int this, int a2, int a3)
{
  int result; // eax@1
  int v4; // ST08_4@1

  v4 = this;
  *(_DWORD *)(this + 32) = a2;
  *(_DWORD *)(this + 52) = 1;
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, this + 36);
  ++*(_DWORD *)a3;
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 48);
  *(_DWORD *)a3 = sub_47A240(*(_DWORD *)a3, v4 + 96);
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 92);
  ++*(_DWORD *)a3;
  *(_DWORD *)a3 = sub_418960(*(_DWORD *)a3, v4 + 84);
  *(_DWORD *)a3 += 8;
  result = *(_DWORD *)(v4 + 48) | 0x20;
  *(_DWORD *)(v4 + 48) = result;
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (0042E7F0) --------------------------------------------------------
int __thiscall CItemTransform::Init(int this, int a2, int a3, int a4)
{
  int result; // eax@1

  *(_DWORD *)(this + 48) |= 0x20u;
  result = this;
  *(_DWORD *)(this + 52) = 1;
  *(_DWORD *)(this + 92) = 1;
  return result;
}

//----- (0042E820) --------------------------------------------------------
void __userpurge CItemTransform::SetWearState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    if ( *(_DWORD *)(a5 + 60) < *(_DWORD *)(v5 + 92) || CPlayer::IsWState(a5, 10) )
    {
      CItem::SubState(v5, 1);
      CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
    }
    else
    {
      CPlayer::AddWState(a5, 10);
      *(_DWORD *)(a5 + 1108) = v5;
      *(_DWORD *)(a5 + 1112) = 16 * *(_DWORD *)(*(_DWORD *)(v5 + 40) + 152);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
    }
  }
}

//----- (0042E8C0) --------------------------------------------------------
signed int __userpurge CItemTransform::Trash<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-8h]@1

  v7 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    result = 0;
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 8, (unsigned int)"db");
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    CBase::Delete((void *)v7);
    result = 1;
  }
  return result;
}

//----- (0042E980) --------------------------------------------------------
signed int __userpurge CItemTransform::Erase<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-8h]@1

  v6 = a1;
  if ( *(_DWORD *)(a1 + 36) )
    CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
  return CBase::Delete((void *)v6);
}

//----- (0042EA00) --------------------------------------------------------
int __thiscall CItemTransform::ApplySpec(void *this, int a2)
{
  int result; // eax@5
  void *v3; // [sp+0h] [bp-Ch]@1
  signed int i; // [sp+4h] [bp-8h]@1
  signed int v5; // [sp+8h] [bp-4h]@3

  v3 = this;
  for ( i = 0; i <= 4; ++i )
  {
    v5 = *(int *)((char *)&dword_4D6090[11 * *(_DWORD *)(*((_DWORD *)v3 + 10) + 152)] + 4 * i);
    if ( v5 )
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
        a2,
        i,
        1,
        *((_DWORD *)v3 + 23) / v5 + 1);
    result = i + 1;
  }
  return result;
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042EA70) --------------------------------------------------------
int __thiscall CItemTransform::FreeSpec(void *this, int a2)
{
  int result; // eax@5
  void *v3; // [sp+0h] [bp-Ch]@1
  signed int i; // [sp+4h] [bp-8h]@1
  signed int v5; // [sp+8h] [bp-4h]@3

  v3 = this;
  for ( i = 0; i <= 4; ++i )
  {
    v5 = *(int *)((char *)&dword_4D6090[11 * *(_DWORD *)(*((_DWORD *)v3 + 10) + 152)] + 4 * i);
    if ( v5 )
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
        a2,
        i,
        0,
        *((_DWORD *)v3 + 23) / v5 + 1);
    result = i + 1;
  }
  return result;
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042EAE0) --------------------------------------------------------
void __userpurge CItemTransform::PutOn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( *(_DWORD *)(a5 + 60) >= *(_DWORD *)(a1 + 92) )
  {
    if ( !CItem::IsState(a1, 1) )
    {
      if ( CPlayer::IsWState(a5, 10) )
      {
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      }
      else
      {
        CPlayer::AddWState(a5, 10);
        *(_DWORD *)(a5 + 1108) = v5;
        *(_DWORD *)(a5 + 1112) = 16 * *(_DWORD *)(*(_DWORD *)(v5 + 40) + 152);
        CItem::AddState(v5, 1);
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 104))(v5, a5);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CPlayer::Write(a2, a3, a4, a5, 5, (unsigned int)"ddw");
        CDBSocket::Write(a2, a3, a4, 4, (unsigned int)"d");
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042EBD0) --------------------------------------------------------
void __userpurge CItemTransform::PutOff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    if ( CPlayer::IsWState(a5, 10) )
    {
      if ( !CChar::IsGState(a5, 512) )
      {
        CPlayer::SubWState(a5, 10);
        *(_DWORD *)(a5 + 1108) = 0;
        *(_DWORD *)(a5 + 1112) = 0;
        *(_DWORD *)(v5 + 100) = 0;
        CItem::SubState(v5, 1);
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 108))(v5, a5);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CPlayer::Write(a2, a3, a4, a5, 6, (unsigned int)"ddw");
        CDBSocket::Write(a2, a3, a4, 5, (unsigned int)"d");
        CItemTransform::SaveInfo(a2, a3, a4, 0);
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0042ECB0) --------------------------------------------------------
void __userpurge CItemTransform::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  *(_DWORD *)(a1 + 32) = *(_DWORD *)(a5 + 452);
  if ( a6 == 10 )
    *(_DWORD *)(a1 + 48) &= 0xFFFFFFFBu;
  CItem::SendItemInfo(a1, a2, a3, a4, (void *)a5, 7);
  if ( a7 )
    CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
  else
    CDBSocket::Write(a2, a3, a4, 6, (unsigned int)"dwbddbbdb");
}

//----- (0042ED90) --------------------------------------------------------
int __userpurge CItemTransform::UpdateNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@2
  int v8; // [sp+0h] [bp-8h]@1

  v8 = a1;
  if ( a7 + *(_DWORD *)(a1 + 52) <= 0 )
  {
    CPlayer::Write(a2, a3, a4, a5, 9, (unsigned int)"ddb");
    if ( a6 == 50 )
      CDBSocket::Write(a2, a3, a4, 7, (unsigned int)"dddwbd");
    else
      CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
    *(_DWORD *)(v8 + 52) = 0;
    CBase::Delete((void *)v8);
    result = 0;
  }
  else
  {
    result = *(_DWORD *)(a1 + 52);
  }
  return result;
}

//----- (0042EE90) --------------------------------------------------------
char __thiscall CItemTransform::CanTrade(int this, int a2, int a3, int a4)
{
  char result; // al@2
  int v5; // [sp+0h] [bp-4h]@1

  v5 = this;
  if ( CItem::IsState(this, 1) )
    result = 0;
  else
    result = CItem::CanTrade(v5, a2, a3, a4);
  return result;
}

//----- (0042EED0) --------------------------------------------------------
signed int __userpurge CItemTransform::StorageIn<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-20h]@1
  __int16 v8; // [sp+4h] [bp-1Ch]@3
  int v9; // [sp+6h] [bp-1Ah]@3
  char v10; // [sp+Ah] [bp-16h]@3
  int v11; // [sp+Bh] [bp-15h]@3
  int v12; // [sp+Fh] [bp-11h]@3
  char v13; // [sp+13h] [bp-Dh]@3
  char v14; // [sp+14h] [bp-Ch]@3
  char v15; // [sp+15h] [bp-Bh]@3
  char v16; // [sp+16h] [bp-Ah]@3
  char v17; // [sp+17h] [bp-9h]@3
  char v18; // [sp+18h] [bp-8h]@3
  char v19; // [sp+19h] [bp-7h]@3
  char v20; // [sp+1Ah] [bp-6h]@3
  char v21; // [sp+1Bh] [bp-5h]@3
  char v22; // [sp+1Ch] [bp-4h]@3
  char v23; // [sp+1Dh] [bp-3h]@3

  v7 = a1;
  if ( CItem::IsState(a1, 1) )
  {
    result = 0;
  }
  else
  {
    v8 = *(_WORD *)(*(_DWORD *)(v7 + 40) + 64);
    v9 = *(_DWORD *)(v7 + 36);
    v10 = 0;
    v11 = *(_DWORD *)(v7 + 48);
    v12 = *(_DWORD *)(v7 + 96);
    v13 = *(_BYTE *)(v7 + 92);
    v14 = 0;
    v15 = *(_BYTE *)(v7 + 84);
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = 0;
    CPlayer::_StorageIn(a5, a2, a3, a4, (int)&v8, *(_DWORD *)(v7 + 36), 0);
    CDBSocket::Write(a2, a3, a4, 11, (unsigned int)"dddbd");
    CBase::Delete((void *)v7);
    result = 1;
  }
  return result;
}

//----- (0042EFB0) --------------------------------------------------------
void __userpurge CItemTransform::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7)
{
  CItem::NewIID();
  CDBSocket::Write(a1, a2, a3, 35, (unsigned int)"bdwbbdbbdds");
}

//----- (0042F030) --------------------------------------------------------
void *__userpurge CItemTransform::UpdateExp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, int a6)
{
  void *result; // eax@1
  int v7; // [sp+0h] [bp-1Ch]@1
  int v8; // [sp+4h] [bp-18h]@18
  int v9; // [sp+8h] [bp-14h]@18
  signed int i; // [sp+Ch] [bp-10h]@15
  signed int v11; // [sp+10h] [bp-Ch]@15
  signed int v12; // [sp+14h] [bp-8h]@17
  int v13; // [sp+18h] [bp-4h]@5

  v7 = a1;
  result = a5;
  if ( *((_DWORD *)a5 + 113) != *(_DWORD *)(a1 + 32)
    || (result = (void *)CItem::IsState(a1, 1), !result)
    || (result = (void *)v7, *(_DWORD *)(v7 + 92) >= 100) )
  {
    *(_DWORD *)(v7 + 100) = 0;
    return result;
  }
  v13 = 1;
  if ( a6 )
  {
    result = (void *)(*(_DWORD *)(v7 + 100) + 1);
    *(_DWORD *)(v7 + 100) = result;
    if ( *(_DWORD *)(v7 + 100) < 0xB4u )
      return result;
    *(_DWORD *)(v7 + 100) -= 180;
    v13 = 10;
    *(_DWORD *)(v7 + 96) += 10;
  }
  else
  {
    if ( *((_DWORD *)a5 + 15) > 20 )
      v13 = (*((_DWORD *)a5 + 15) - 11) / 10 + 1;
    *(_DWORD *)(v7 + 96) += v13;
  }
  if ( *(_DWORD *)(v7 + 96) >= dword_4D5CA8[*(_DWORD *)(v7 + 92)] )
  {
    if ( *((_DWORD *)a5 + 15) <= *(_DWORD *)(v7 + 92) )
    {
      result = (void *)v7;
      *(_DWORD *)(v7 + 96) -= v13;
      return result;
    }
    *(_DWORD *)(v7 + 96) -= dword_4D5CA8[*(_DWORD *)(v7 + 92)];
    v11 = *(_DWORD *)(v7 + 92)++;
    for ( i = 0; i <= 4; ++i )
    {
      v12 = *(int *)((char *)&dword_4D6090[11 * *(_DWORD *)(*(_DWORD *)(v7 + 40) + 152)] + 4 * i);
      if ( v12 )
      {
        v8 = v11 / v12 + 1;
        v9 = *(_DWORD *)(v7 + 92) / v12 + 1;
        if ( v9 > v8 )
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, i, 1, v9 - v8);
      }
    }
    CItemTransform::SaveInfo(a2, a3, a4, 1);
  }
  return (void *)CItem::SendItemInfo(v7, a2, a3, a4, a5, 92);
}
// 4D5CA8: using guessed type int dword_4D5CA8[];
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042F200) --------------------------------------------------------
LONG __userpurge CItemTransform::CheatLevelUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, signed int a6)
{
  LONG result; // eax@10
  int v7; // [sp+0h] [bp-18h]@1
  int v8; // [sp+8h] [bp-10h]@7
  signed int i; // [sp+Ch] [bp-Ch]@4
  signed int v10; // [sp+10h] [bp-8h]@4
  signed int v11; // [sp+14h] [bp-4h]@6

  v7 = a1;
  if ( a6 >= 1 )
  {
    if ( a6 <= 40 )
    {
      v10 = *(_DWORD *)(a1 + 92);
      *(_DWORD *)(a1 + 92) = a6;
      for ( i = 0; i <= 4; ++i )
      {
        v11 = *(int *)((char *)&dword_4D6090[11 * *(_DWORD *)(*(_DWORD *)(v7 + 40) + 152)] + 4 * i);
        if ( v11 )
        {
          v8 = *(_DWORD *)(v7 + 92) / v11 + 1;
          if ( v10 / v11 + 1 != v8 )
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 92))(a5, i, 1, v8 - (v10 / v11 + 1));
        }
      }
      result = CItem::SendItemInfo(v7, a2, a3, a4, a5, 92);
    }
  }
  return result;
}
// 4D6090: using guessed type int dword_4D6090[];

//----- (0042F2C0) --------------------------------------------------------
void __userpurge CItemTransform::SaveInfo(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  CDBSocket::Write(a1, a2, a3, 20, (unsigned int)"dddbb");
}

//----- (0042F300) --------------------------------------------------------
signed int __userpurge CItemTransform::ApplyTransform<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, signed int a6)
{
  signed int result; // eax@1
  int v7; // [sp+4h] [bp-8h]@3

  result = (*(_DWORD *)(a1 + 92) - 1) / 10;
  if ( a6 <= result )
  {
    *(_DWORD *)(a1 + 104) = a6;
    v7 = *(_DWORD *)(*(_DWORD *)(a1 + 40) + 152);
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 96))(a5, 32, 1, dword_4D60A4[11 * v7]);
    if ( a6 >= 2 )
    {
      (*(void (__cdecl **)(int, signed int, signed int, int, int))(*(_DWORD *)a5 + 92))(
        a5,
        15,
        1,
        dword_4D60B0[11 * v7],
        dword_4D60B4[11 * v7]);
      (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 96))(a5, 29, 1, dword_4D60B8[11 * v7]);
      if ( a6 >= 3 )
      {
        (*(void (__cdecl **)(int, signed int, signed int, int, int))(*(_DWORD *)a5 + 96))(
          a5,
          27,
          1,
          dword_4D60A8[11 * v7],
          dword_4D60A8[11 * v7]);
        (*(void (__cdecl **)(int, signed int, signed int, int, int))(*(_DWORD *)a5 + 96))(
          a5,
          28,
          1,
          dword_4D60AC[11 * v7],
          dword_4D60AC[11 * v7]);
      }
    }
    *(_DWORD *)(a5 + 1112) |= a6;
    CChar::AddGState(a5, 512);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"dbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4D60A4: using guessed type int dword_4D60A4[];
// 4D60A8: using guessed type int dword_4D60A8[];
// 4D60AC: using guessed type int dword_4D60AC[];
// 4D60B0: using guessed type int dword_4D60B0[];
// 4D60B4: using guessed type int dword_4D60B4[];
// 4D60B8: using guessed type int dword_4D60B8[];

//----- (0042F460) --------------------------------------------------------
int __thiscall CItemTransform::FreeTransform(int this, int a2)
{
  signed int v3; // [sp+4h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-8h]@1

  v3 = *(_DWORD *)(this + 104);
  *(_DWORD *)(this + 104) = 0;
  v4 = *(_DWORD *)(*(_DWORD *)(this + 40) + 152);
  (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 32, 0, dword_4D60A4[11 * v4]);
  if ( v3 >= 2 )
  {
    (*(void (__cdecl **)(int, signed int, _DWORD, int, int))(*(_DWORD *)a2 + 92))(
      a2,
      15,
      0,
      dword_4D60B0[11 * v4],
      dword_4D60B4[11 * v4]);
    (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a2 + 96))(a2, 29, 0, dword_4D60B8[11 * v4]);
    if ( v3 >= 3 )
    {
      (*(void (__cdecl **)(int, signed int, _DWORD, int, int))(*(_DWORD *)a2 + 96))(
        a2,
        27,
        0,
        dword_4D60A8[11 * v4],
        dword_4D60A8[11 * v4]);
      (*(void (__cdecl **)(int, signed int, _DWORD, int, int))(*(_DWORD *)a2 + 96))(
        a2,
        28,
        0,
        dword_4D60AC[11 * v4],
        dword_4D60AC[11 * v4]);
    }
  }
  *(_DWORD *)(a2 + 1112) &= ~v3;
  return (*(int (__thiscall **)(int, signed int))(*(_DWORD *)a2 + 112))(a2, 512);
}
// 4D60A4: using guessed type int dword_4D60A4[];
// 4D60A8: using guessed type int dword_4D60A8[];
// 4D60AC: using guessed type int dword_4D60AC[];
// 4D60B0: using guessed type int dword_4D60B0[];
// 4D60B4: using guessed type int dword_4D60B4[];
// 4D60B8: using guessed type int dword_4D60B8[];

//----- (0042F590) --------------------------------------------------------
int __thiscall sub_42F590(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_42F6B0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 42F6B0: using guessed type _DWORD __stdcall sub_42F6B0(_DWORD);

//----- (0042F5F0) --------------------------------------------------------
int __thiscall sub_42F5F0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_42F730(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 42F730: using guessed type _DWORD __stdcall sub_42F730(_DWORD);

//----- (0042F650) --------------------------------------------------------
int __thiscall sub_42F650(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_42F7B0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 42F7B0: using guessed type _DWORD __stdcall sub_42F7B0(_DWORD);

//----- (0042F6B0) --------------------------------------------------------
int __stdcall sub_42F6B0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_42F6B0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 42F6B0: using guessed type _DWORD __stdcall sub_42F6B0(_DWORD);

//----- (0042F730) --------------------------------------------------------
int __stdcall sub_42F730(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_42F730(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 42F730: using guessed type _DWORD __stdcall sub_42F730(_DWORD);

//----- (0042F7B0) --------------------------------------------------------
int __stdcall sub_42F7B0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_42F7B0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 42F7B0: using guessed type _DWORD __stdcall sub_42F7B0(_DWORD);

//----- (0042F840) --------------------------------------------------------
int __thiscall sub_42F840(int *this)
{
  int result; // eax@2
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  if ( *(_BYTE *)sub_431110(*this) )
  {
    result = *(_DWORD *)sub_430F90(*v5);
    *v5 = result;
  }
  else
  {
    v2 = sub_474590(*v5);
    if ( *(_BYTE *)sub_431110(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        if ( *(_BYTE *)sub_431110(*v4) )
          break;
        if ( *v5 != *(_DWORD *)sub_474590(v6) )
          break;
        *v5 = v6;
      }
      result = *(_BYTE *)sub_431110(v6);
      if ( !result )
        *v5 = v6;
    }
    else
    {
      v3 = sub_474590(*v5);
      result = sub_4470E0(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (0042F920) --------------------------------------------------------
int __cdecl sub_42F920(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_474590(a1);
    if ( *(_BYTE *)sub_431110(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (0042F960) --------------------------------------------------------
int __cdecl sub_42F960(int a1, __int16 a2)
{
  *(_WORD *)a1 = a2;
  return a1 + 2;
}

//----- (0042F980) --------------------------------------------------------
void *__thiscall sub_42F980(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0042F9B0) --------------------------------------------------------
void *__stdcall sub_42F9B0(void *a1, void **a2)
{
  return sub_44CDC0(a1, a2);
}

//----- (0042F9D0) --------------------------------------------------------
void *__thiscall sub_42F9D0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0042FA10) --------------------------------------------------------
void *__thiscall sub_42FA10(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0042FA40) --------------------------------------------------------
int __thiscall sub_42FA40(int this)
{
  return sub_42FA60(this);
}

//----- (0042FA60) --------------------------------------------------------
int __thiscall sub_42FA60(int this)
{
  return sub_42FA80(this);
}

//----- (0042FA80) --------------------------------------------------------
int __thiscall sub_42FA80(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_42FB30(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0042FB30) --------------------------------------------------------
void *__thiscall sub_42FB30(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_42F590(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0042FBD0) --------------------------------------------------------
int __thiscall sub_42FBD0(int this)
{
  return sub_42FBF0(this);
}

//----- (0042FBF0) --------------------------------------------------------
int __thiscall sub_42FBF0(int this)
{
  return sub_42FC10(this);
}

//----- (0042FC10) --------------------------------------------------------
int __thiscall sub_42FC10(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_42FCC0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0042FCC0) --------------------------------------------------------
void *__thiscall sub_42FCC0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_42F5F0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0042FD60) --------------------------------------------------------
int __thiscall sub_42FD60(int this)
{
  return sub_42FD80(this);
}

//----- (0042FD80) --------------------------------------------------------
int __thiscall sub_42FD80(int this)
{
  return sub_42FDA0(this);
}

//----- (0042FDA0) --------------------------------------------------------
int __thiscall sub_42FDA0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_42FE50(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0042FE50) --------------------------------------------------------
void *__thiscall sub_42FE50(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_42F650(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0042FEF0) --------------------------------------------------------
int __cdecl CGroup::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0x34u);
  if ( v2 )
    v1 = CGroup::CGroup(v2);
  else
    v1 = 0;
  return v1;
}

//----- (0042FF30) --------------------------------------------------------
int __thiscall CGroup::CGroup(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B7558;
  sub_47CF60((void *)(v2 + 36));
  return v2;
}
// 4B7558: using guessed type int (__stdcall *off_4B7558)(int);

//----- (0042FF60) --------------------------------------------------------
int __userpurge CGroup::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CGroup::_CGroup(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0042FF90) --------------------------------------------------------
int __usercall CGroup::_CGroup<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  sub_430B90(a1 + 36);
  return CBase::_CBase(v5, a2, a3, a4);
}

//----- (0042FFB0) --------------------------------------------------------
signed int __thiscall CGroup::Set(void *this, int a2, char a3)
{
  void *v4; // eax@5
  void *v5; // eax@7
  void *v6; // eax@8
  void *v7; // eax@9
  void *v8; // eax@13
  void *v9; // eax@13
  void *v10; // eax@13
  void *v11; // eax@14
  void *v12; // [sp-4h] [bp-5Ch]@4
  int v13; // [sp+0h] [bp-58h]@8
  int v14; // [sp+4h] [bp-54h]@1
  void *v15; // [sp+8h] [bp-50h]@1
  char v16; // [sp+10h] [bp-48h]@14
  char v17; // [sp+14h] [bp-44h]@13
  char v18; // [sp+18h] [bp-40h]@13
  char v19; // [sp+1Ch] [bp-3Ch]@13
  char v20; // [sp+20h] [bp-38h]@9
  char v21; // [sp+24h] [bp-34h]@8
  char v22; // [sp+28h] [bp-30h]@7
  char v23; // [sp+2Ch] [bp-2Ch]@5
  int v24; // [sp+30h] [bp-28h]@13
  int v25; // [sp+34h] [bp-24h]@13
  int v26; // [sp+38h] [bp-20h]@13
  int v27; // [sp+3Ch] [bp-1Ch]@14
  char v28; // [sp+40h] [bp-18h]@13
  int v29; // [sp+44h] [bp-14h]@7
  int v30; // [sp+50h] [bp-8h]@10
  char v31; // [sp+54h] [bp-4h]@7

  v15 = this;
  v14 = a2;
  if ( a2 == 2 )
  {
    v4 = sub_4023A0(&a3, &v23);
    *((_DWORD *)v15 + 8) = sub_40C8D0(v4);
  }
  else
  {
    if ( v14 == 50 )
    {
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        sub_4023A0(&a3, &v28);
        sub_430160((int)&v24);
        v8 = sub_4023A0(&v28, &v19);
        v24 = sub_40C8D0(v8);
        v9 = sub_4023A0(&v28, &v18);
        v25 = sub_40C8D0(v9);
        v10 = sub_4023A0(&v28, &v17);
        v26 = sub_40C8D0(v10);
        if ( !(unsigned __int8)sub_402380(&v28) )
        {
          v11 = sub_4023A0(&v28, &v16);
          v27 = sub_40C8D0(v11);
        }
        sub_430BB0((int)((char *)v15 + 36), (int)&v24);
      }
    }
    else
    {
      if ( v14 != 52 )
      {
        v12 = this;
        sub_402340(&v12, (int)&a3);
        return CBase::Set(v15, a2, (char)v12);
      }
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        sub_4023A0(&a3, &v31);
        sub_4301A0((int)&v29, 31);
        v5 = sub_4023A0(&v31, &v22);
        v29 = sub_40C8D0(v5);
        if ( *(_WORD *)dword_4E1174 & 0x100 )
        {
          v6 = sub_4023A0(&v31, &v21);
          v13 = 5 * sub_40C8D0(v6);
        }
        else
        {
          v7 = sub_4023A0(&v31, &v20);
          v13 = sub_40C8D0(v7);
        }
        v30 = v13;
        sub_430BB0((int)((char *)v15 + 36), (int)&v29);
      }
    }
  }
  return 1;
}

//----- (00430160) --------------------------------------------------------
int __thiscall sub_430160(int this)
{
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 1;
  return this;
}

//----- (004301A0) --------------------------------------------------------
int __thiscall sub_4301A0(int this, int a2)
{
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 1;
  return this;
}

//----- (004301E0) --------------------------------------------------------
signed int __thiscall CGroup::OnLoad(int this)
{
  return CItemGroup::InsertGroup(this);
}

//----- (00430200) --------------------------------------------------------
void __thiscall CGroup::GetItemInfo(void *this, int a2, int a3, int a4)
{
  void *v4; // eax@4
  void *v5; // [sp+0h] [bp-14h]@1
  char v6; // [sp+4h] [bp-10h]@4
  char v7; // [sp+8h] [bp-Ch]@7
  char v8; // [sp+Ch] [bp-8h]@3
  int v9; // [sp+10h] [bp-4h]@3

  v5 = this;
  if ( this )
  {
    v9 = sub_406E10(1, 1000);
    sub_430C20((int)((char *)v5 + 36), &v8);
    while ( 1 )
    {
      v4 = sub_445B40((int)((char *)v5 + 36), &v6);
      if ( !(unsigned __int8)sub_47D070(v4) )
        break;
      if ( v9 <= *(_DWORD *)sub_430DE0() )
      {
        *(_DWORD *)a2 = *(_DWORD *)(sub_430DE0() + 4);
        *(_DWORD *)a3 = *(_DWORD *)(sub_430DE0() + 8);
        *(_DWORD *)a4 = *(_DWORD *)(sub_430DE0() + 12);
        return;
      }
      sub_430E00(&v8, (int)&v7, 0);
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004302B0) --------------------------------------------------------
signed int __cdecl CItemGroup::InsertGroup(int a1)
{
  int v1; // eax@1
  signed int result; // eax@2
  char v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+8h] [bp-8h]@1
  char v5; // [sp+Ch] [bp-4h]@1

  v1 = sub_420990((int)&v3, a1 + 32, (int)&a1);
  sub_445DF0((int)&unk_4E10F0, (int)&v4, v1);
  if ( v5 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CItemGroup::InsertGroup() Duplicate Group. (GroupID:%d)", *(_DWORD *)(a1 + 32));
    result = 0;
  }
  return result;
}

//----- (00430310) --------------------------------------------------------
int __cdecl CItemGroup::ClearGroup()
{
  void *v0; // eax@2
  int v2; // [sp+8h] [bp-10h]@3
  char v3; // [sp+Ch] [bp-Ch]@2
  char v4; // [sp+10h] [bp-8h]@5
  char v5; // [sp+14h] [bp-4h]@1

  sub_40F070((int)&unk_4E10F0, &v5);
  while ( 1 )
  {
    v0 = sub_430C20((int)&unk_4E10F0, &v3);
    if ( !(unsigned __int8)sub_47D070(v0) )
      break;
    v2 = *(_DWORD *)(sub_420250((int *)&v5) + 4);
    if ( v2 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v2)(v2, 1);
    sub_446090((int *)&v5, (int)&v4, 0);
  }
  return sub_430C40((int)&unk_4E10F0);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004303A0) --------------------------------------------------------
int __cdecl CItemGroup::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0x34u);
  if ( v2 )
    v1 = CItemGroup::CItemGroup(v2);
  else
    v1 = 0;
  return v1;
}

//----- (004303E0) --------------------------------------------------------
int __thiscall CItemGroup::CItemGroup(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B75D8;
  sub_4707A0((void *)(v2 + 36));
  return v2;
}
// 4B75D8: using guessed type int (__stdcall *off_4B75D8)(int);

//----- (00430410) --------------------------------------------------------
int __userpurge CItemGroup::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CItemGroup::_CItemGroup(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00430440) --------------------------------------------------------
int __usercall CItemGroup::_CItemGroup<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  sub_445BF0(a1 + 36);
  return CBase::_CBase(v5, a2, a3, a4);
}

//----- (00430460) --------------------------------------------------------
signed int __thiscall CItemGroup::Set(void *this, int a2, char a3)
{
  void *v4; // eax@4
  void *v5; // eax@6
  void *v6; // eax@6
  char v7; // al@6
  void *v8; // [sp-4h] [bp-28h]@3
  int v9; // [sp+0h] [bp-24h]@1
  void *v10; // [sp+4h] [bp-20h]@1
  char v11; // [sp+Ch] [bp-18h]@6
  char v12; // [sp+10h] [bp-14h]@6
  char v13; // [sp+14h] [bp-10h]@4
  int v14; // [sp+18h] [bp-Ch]@6
  int v15; // [sp+1Ch] [bp-8h]@6
  char v16; // [sp+20h] [bp-4h]@6

  v10 = this;
  v9 = a2;
  if ( a2 == 2 )
  {
    v4 = sub_4023A0(&a3, &v13);
    *((_DWORD *)v10 + 8) = sub_40C8D0(v4);
  }
  else
  {
    if ( v9 != 51 )
    {
      v8 = this;
      sub_402340(&v8, (int)&a3);
      return CBase::Set(v10, a2, (char)v8);
    }
    while ( !(unsigned __int8)sub_402380(&a3) )
    {
      sub_4023A0(&a3, &v16);
      v5 = sub_4023A0(&v16, &v12);
      v14 = sub_40C8D0(v5);
      v6 = sub_4023A0(&v16, &v11);
      v7 = sub_40C8D0(v6);
      v15 = CItemGroup::FindGroup(v7);
      sub_430CA0((int)((char *)v10 + 36), (int)&v14);
    }
  }
  return 1;
}

//----- (00430520) --------------------------------------------------------
signed int __thiscall CItemGroup::OnLoad(int this)
{
  return CItem::InsertItemGroup(this);
}

//----- (00430540) --------------------------------------------------------
int __stdcall CItemGroup::FindGroup(char a1)
{
  void *v1; // eax@1
  char v3; // [sp+4h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-8h]@1
  char v5; // [sp+Ch] [bp-4h]@1

  v4 = 0;
  sub_44AE20((int)&unk_4E10F0, (int)&v5, (int)&a1);
  v1 = sub_430C20((int)&unk_4E10F0, &v3);
  if ( (unsigned __int8)sub_47D070(v1) )
    v4 = *(_DWORD *)(sub_420250((int *)&v5) + 4);
  return v4;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004305A0) --------------------------------------------------------
void __thiscall CItemGroup::GetItemInfo(void *this, int a2, int a3, int a4)
{
  void *v4; // eax@2
  int v5; // eax@4
  void *v6; // [sp+0h] [bp-14h]@1
  char v7; // [sp+4h] [bp-10h]@2
  char v8; // [sp+8h] [bp-Ch]@5
  char v9; // [sp+Ch] [bp-8h]@1
  int v10; // [sp+10h] [bp-4h]@1

  v6 = this;
  v10 = sub_406E10(1, 1000);
  sub_430C20((int)((char *)v6 + 36), &v9);
  while ( 1 )
  {
    v4 = sub_445B40((int)((char *)v6 + 36), &v7);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    if ( v10 <= *(_DWORD *)sub_430DE0() )
    {
      v5 = sub_430DE0();
      CGroup::GetItemInfo(*(void **)(v5 + 4), a2, a3, a4);
      return;
    }
    sub_430E30(&v9, (int)&v8, 0);
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00430630) --------------------------------------------------------
int __thiscall CItemGroup::GetFirstGroup(void *this)
{
  void *v1; // ST04_4@1
  void *v2; // eax@1
  int result; // eax@2
  char v4; // [sp+4h] [bp-8h]@1
  char v5; // [sp+8h] [bp-4h]@1

  v1 = this;
  sub_430C20((int)((char *)this + 36), &v5);
  v2 = sub_445B40((int)((char *)v1 + 36), &v4);
  if ( (unsigned __int8)sub_47D070(v2) )
    result = *(_DWORD *)(sub_430DE0() + 4);
  else
    result = 0;
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00430680) --------------------------------------------------------
void __usercall CGoods::ForcedStorageIn(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, void *a6)
{
  void *v6; // eax@6
  void *v7; // eax@9
  char v8; // [sp+0h] [bp-48h]@9
  char v9; // [sp+4h] [bp-44h]@8
  char v10; // [sp+8h] [bp-40h]@6
  int v11; // [sp+Ch] [bp-3Ch]@6
  int v12; // [sp+10h] [bp-38h]@10
  int v13; // [sp+14h] [bp-34h]@10
  int v14; // [sp+18h] [bp-30h]@10
  int v15; // [sp+1Ch] [bp-2Ch]@10
  char v16; // [sp+20h] [bp-28h]@7
  int v17; // [sp+24h] [bp-24h]@7
  char v18; // [sp+2Bh] [bp-1Dh]@12
  int v19; // [sp+2Ch] [bp-1Ch]@11
  unsigned __int16 v20; // [sp+30h] [bp-18h]@6
  char v21; // [sp+37h] [bp-11h]@3
  int v22; // [sp+38h] [bp-10h]@3
  unsigned __int16 v23; // [sp+3Ch] [bp-Ch]@10
  char v24; // [sp+40h] [bp-8h]@6
  int i; // [sp+44h] [bp-4h]@1

  for ( i = 0; i < a5; ++i )
  {
    v22 = 0;
    v21 = 0;
    if ( dword_4E35B8 )
      a6 = sub_497220(a1, a2, a3, (char *)a6, (unsigned int)"dwwbb");
    else
      a6 = sub_497220(a1, a2, a3, (char *)a6, (unsigned int)"dwwb");
    v11 = v20;
    sub_44AE20((int)&unk_4E10FC, (int)&v24, (int)&v11);
    v6 = sub_430C20((int)&unk_4E10FC, &v10);
    if ( (unsigned __int8)sub_47D070(v6) )
    {
      v17 = *(_DWORD *)(sub_420250((int *)&v24) + 4);
      sub_430C20(v17 + 36, &v16);
      while ( 1 )
      {
        v7 = sub_445B40(v17 + 36, &v8);
        if ( !(unsigned __int8)sub_47D070(v7) )
          break;
        v12 = *(_DWORD *)sub_420010();
        v14 = *(_DWORD *)(sub_420010() + 4);
        v15 = *(_DWORD *)(sub_420010() + 8) * v23;
        v13 = CItem::CreateItem(v12, v14, v15, -1);
        if ( v13 )
        {
          if ( v18 || v21 )
            CItem::AddState(v13, 128);
          if ( *(_DWORD *)(*(_DWORD *)(v13 + 40) + 92) )
          {
            (*(void (__thiscall **)(int, signed int, int, char *, int))(*(_DWORD *)v13 + 160))(
              v13,
              42,
              a4,
              &byte_4B437D,
              v19);
            CBase::Delete((void *)v13);
          }
          else
          {
            while ( 1 )
            {
              (*(void (__thiscall **)(int, signed int, int, char *, int))(*(_DWORD *)v13 + 160))(
                v13,
                42,
                a4,
                &byte_4B437D,
                v19);
              CBase::Delete((void *)v13);
              --v15;
              if ( v15 <= 0 )
                break;
              v13 = CItem::CreateItem(v12, 0, 1, -1);
              if ( v18 || v21 )
                CItem::AddState(v13, 128);
            }
          }
        }
        else
        {
          sub_4328C0("CGoods::ForcedStorageIn() Can't create goods. (%d<%d> : %d %d %d)", v20, v19, v12, v14, v15);
        }
        sub_446060(&v16, (int)&v9, 0);
      }
      v22 = 2;
    }
    CAuthSocket::Write(a1, a2, a3, 14, (unsigned int)"db");
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004308F0) --------------------------------------------------------
int __cdecl CGoods::ClearGoods()
{
  void *v0; // eax@2
  int v2; // [sp+8h] [bp-10h]@3
  char v3; // [sp+Ch] [bp-Ch]@2
  char v4; // [sp+10h] [bp-8h]@5
  char v5; // [sp+14h] [bp-4h]@1

  sub_40F070((int)&unk_4E10FC, &v5);
  while ( 1 )
  {
    v0 = sub_430C20((int)&unk_4E10FC, &v3);
    if ( !(unsigned __int8)sub_47D070(v0) )
      break;
    v2 = *(_DWORD *)(sub_420250((int *)&v5) + 4);
    if ( v2 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v2)(v2, 1);
    sub_446090((int *)&v5, (int)&v4, 0);
  }
  return sub_430D10((int)&unk_4E10FC);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00430980) --------------------------------------------------------
int __cdecl CGoods::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0x34u);
  if ( v2 )
    v1 = CGoods::CGoods(v2);
  else
    v1 = 0;
  return v1;
}

//----- (004309C0) --------------------------------------------------------
int __thiscall CGoods::CGoods(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B7678;
  *(_DWORD *)(v2 + 32) = 0;
  sub_425850((void *)(v2 + 36));
  return v2;
}
// 4B7678: using guessed type int (__stdcall *off_4B7678)(int);

//----- (00430A00) --------------------------------------------------------
int __userpurge CGoods::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CGoods::_CGoods(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00430A30) --------------------------------------------------------
int __usercall CGoods::_CGoods<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  sub_445B20(a1 + 36);
  return CBase::_CBase(v5, a2, a3, a4);
}

//----- (00430A50) --------------------------------------------------------
signed int __thiscall CGoods::Set(void *this, int a2, char a3)
{
  void *v4; // eax@4
  void *v5; // eax@6
  void *v6; // eax@6
  void *v7; // eax@6
  void *v8; // [sp-4h] [bp-30h]@3
  int v9; // [sp+0h] [bp-2Ch]@1
  void *v10; // [sp+4h] [bp-28h]@1
  char v11; // [sp+Ch] [bp-20h]@6
  char v12; // [sp+10h] [bp-1Ch]@6
  char v13; // [sp+14h] [bp-18h]@6
  char v14; // [sp+18h] [bp-14h]@4
  int v15; // [sp+1Ch] [bp-10h]@6
  int v16; // [sp+20h] [bp-Ch]@6
  int v17; // [sp+24h] [bp-8h]@6
  char v18; // [sp+28h] [bp-4h]@6

  v10 = this;
  v9 = a2;
  if ( a2 == 2 )
  {
    v4 = sub_4023A0(&a3, &v14);
    *((_DWORD *)v10 + 8) = sub_40C8D0(v4);
  }
  else
  {
    if ( v9 != 50 )
    {
      v8 = this;
      sub_402340(&v8, (int)&a3);
      return CBase::Set(v10, a2, (char)v8);
    }
    while ( !(unsigned __int8)sub_402380(&a3) )
    {
      sub_4023A0(&a3, &v18);
      v5 = sub_4023A0(&v18, &v13);
      v15 = sub_40C8D0(v5);
      v6 = sub_4023A0(&v18, &v12);
      v16 = sub_40C8D0(v6);
      v7 = sub_4023A0(&v18, &v11);
      v17 = sub_40C8D0(v7);
      sub_430D70((int)((char *)v10 + 36), (int)&v15);
    }
  }
  return 1;
}

//----- (00430B30) --------------------------------------------------------
signed int __thiscall CGoods::OnLoad(void *this)
{
  int v1; // eax@1
  signed int result; // eax@2
  void *v3; // [sp+0h] [bp-18h]@1
  void *v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+10h] [bp-8h]@1
  char v7; // [sp+14h] [bp-4h]@1

  v3 = this;
  v4 = this;
  v1 = sub_420990((int)&v5, (int)((char *)this + 32), (int)&v4);
  sub_445DF0((int)&unk_4E10FC, (int)&v6, v1);
  if ( v7 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CGoods::OnLoad() Duplicate Index. (Index:%d)", *((_DWORD *)v3 + 8));
    result = 0;
  }
  return result;
}

//----- (00430B90) --------------------------------------------------------
int __thiscall sub_430B90(int this)
{
  return sub_430F20(this);
}

//----- (00430BB0) --------------------------------------------------------
char *__thiscall sub_430BB0(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_430E60(this);
  if ( v2 >= (unsigned int)sub_47D0D0(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_430EA0(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_47D210(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (00430C20) --------------------------------------------------------
void *__thiscall sub_430C20(int this, void *a2)
{
  sub_446700(a2, *(_DWORD *)(this + 4));
  return a2;
}

//----- (00430C40) --------------------------------------------------------
int __thiscall sub_430C40(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_430FA0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 430FA0: using guessed type _DWORD __stdcall sub_430FA0(_DWORD);

//----- (00430CA0) --------------------------------------------------------
char *__thiscall sub_430CA0(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_472D60(this);
  if ( v2 >= (unsigned int)sub_472D20(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_431020(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_472EA0(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (00430D10) --------------------------------------------------------
int __thiscall sub_430D10(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_431120(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 431120: using guessed type _DWORD __stdcall sub_431120(_DWORD);

//----- (00430D70) --------------------------------------------------------
char *__thiscall sub_430D70(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_4311A0(this);
  if ( v2 >= (unsigned int)sub_4461C0(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_4311E0(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_446280(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (00430DE0) --------------------------------------------------------
int __cdecl sub_430DE0()
{
  return sub_420010();
}

//----- (00430E00) --------------------------------------------------------
int __thiscall sub_430E00(void *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *(_DWORD *)this;
  sub_431350(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (00430E30) --------------------------------------------------------
int __thiscall sub_430E30(void *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *(_DWORD *)this;
  sub_48DA00(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (00430E60) --------------------------------------------------------
int __thiscall sub_430E60(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) >> 4;
  else
    v2 = 0;
  return v2;
}

//----- (00430EA0) --------------------------------------------------------
int __thiscall sub_430EA0(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_430E60(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_47D7D0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_4313E0(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_431D20(v7, a2, v6);
  return a2;
}

//----- (00430F20) --------------------------------------------------------
int __thiscall sub_430F20(int this)
{
  int result; // eax@3
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  if ( *(_DWORD *)(this + 4) )
  {
    sub_4313B0(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
    sub_4338F0(*(_DWORD *)(v2 + 4), (*(_DWORD *)(v2 + 12) - *(_DWORD *)(v2 + 4)) >> 4);
  }
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  result = v2;
  *(_DWORD *)(v2 + 12) = 0;
  return result;
}

//----- (00430F90) --------------------------------------------------------
int __cdecl sub_430F90(int a1)
{
  return a1 + 8;
}

//----- (00430FA0) --------------------------------------------------------
int __stdcall sub_430FA0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_430FA0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 430FA0: using guessed type _DWORD __stdcall sub_430FA0(_DWORD);

//----- (00431020) --------------------------------------------------------
int __thiscall sub_431020(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_472D60(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_4470B0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_4316F0(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_478710(v7, a2, v6);
  return a2;
}

//----- (004310A0) --------------------------------------------------------
int __thiscall sub_4310A0(int this)
{
  int result; // eax@3
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  if ( *(_DWORD *)(this + 4) )
  {
    sub_4316C0(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
    sub_4338F0(*(_DWORD *)(v2 + 4), (*(_DWORD *)(v2 + 12) - *(_DWORD *)(v2 + 4)) >> 3);
  }
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  result = v2;
  *(_DWORD *)(v2 + 12) = 0;
  return result;
}

//----- (00431110) --------------------------------------------------------
int __cdecl sub_431110(int a1)
{
  return a1 + 21;
}

//----- (00431120) --------------------------------------------------------
int __stdcall sub_431120(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_431120(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 431120: using guessed type _DWORD __stdcall sub_431120(_DWORD);

//----- (004311A0) --------------------------------------------------------
int __thiscall sub_4311A0(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 12;
  else
    v2 = 0;
  return v2;
}

//----- (004311E0) --------------------------------------------------------
int __thiscall sub_4311E0(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_4311A0(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_431D50(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_431A40(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_446FA0(v7, a2, v6);
  return a2;
}

//----- (00431260) --------------------------------------------------------
char __thiscall sub_431260(int this, int a2)
{
  char result; // al@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  if ( a2 )
  {
    if ( sub_446800() >= (unsigned int)a2 )
    {
      *(_DWORD *)(v3 + 4) = sub_446B40(a2);
      *(_DWORD *)(v3 + 8) = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v3 + 12) = *(_DWORD *)(v3 + 4) + 12 * a2;
    }
    else
    {
      sub_446B00();
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004312E0) --------------------------------------------------------
int __thiscall sub_4312E0(int this)
{
  int result; // eax@3
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  if ( *(_DWORD *)(this + 4) )
  {
    sub_424F70(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
    sub_4338F0(*(_DWORD *)(v2 + 4), (*(_DWORD *)(v2 + 12) - *(_DWORD *)(v2 + 4)) / 12);
  }
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  result = v2;
  *(_DWORD *)(v2 + 12) = 0;
  return result;
}

//----- (00431350) --------------------------------------------------------
void *__thiscall sub_431350(void *this)
{
  *(_DWORD *)this += 16;
  return this;
}

//----- (00431390) --------------------------------------------------------
void *__thiscall sub_431390(void *this)
{
  *(_DWORD *)this += 12;
  return this;
}

//----- (004313B0) --------------------------------------------------------
int __stdcall sub_4313B0(int a1, int a2)
{
  return sub_47D860(a1, a2);
}

//----- (004313E0) --------------------------------------------------------
int __thiscall sub_4313E0(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  signed int v5; // esi@3
  void *v6; // eax@11
  void *v7; // eax@11
  void *v8; // ST20_4@11
  int v9; // ST18_4@16
  int v10; // [sp+4h] [bp-28h]@7
  int v11; // [sp+8h] [bp-24h]@1
  void *v12; // [sp+10h] [bp-1Ch]@11
  unsigned int v13; // [sp+18h] [bp-14h]@1
  int v14; // [sp+18h] [bp-14h]@9
  int v15; // [sp+1Ch] [bp-10h]@1
  int v16; // [sp+20h] [bp-Ch]@1
  int v17; // [sp+24h] [bp-8h]@1
  int v18; // [sp+28h] [bp-4h]@1
  int v19; // [sp+38h] [bp+Ch]@11

  v11 = this;
  v15 = *(_DWORD *)a4;
  v16 = *(_DWORD *)(a4 + 4);
  v17 = *(_DWORD *)(a4 + 8);
  v18 = *(_DWORD *)(a4 + 12);
  result = sub_47D0D0(this);
  v13 = result;
  if ( a3 )
  {
    v5 = sub_47D3D0();
    if ( v5 - sub_430E60(v11) >= (unsigned int)a3 )
    {
      if ( v13 >= a3 + sub_430E60(v11) )
      {
        if ( (*(_DWORD *)(v11 + 8) - a2) >> 4 >= (unsigned int)a3 )
        {
          v9 = *(_DWORD *)(v11 + 8);
          *(_DWORD *)(v11 + 8) = sub_431E30(v9 - 16 * a3, v9, *(void **)(v11 + 8));
          sub_47D8E0(a2, v9 - 16 * a3, v9);
          result = sub_47D8A0(a2, a2 + 16 * a3, (int)&v15);
        }
        else
        {
          sub_431E30(a2, *(_DWORD *)(v11 + 8), (void *)(a2 + 16 * a3));
          sub_47D210(*(void **)(v11 + 8), a3 - ((*(_DWORD *)(v11 + 8) - a2) >> 4), (int)&v15);
          *(_DWORD *)(v11 + 8) += 16 * a3;
          result = sub_47D8A0(a2, *(_DWORD *)(v11 + 8) - 16 * a3, (int)&v15);
        }
      }
      else
      {
        if ( sub_47D3D0() - (v13 >> 1) >= v13 )
          v10 = v13 + (v13 >> 1);
        else
          v10 = 0;
        v14 = v10;
        if ( v10 < (unsigned int)(a3 + sub_430E60(v11)) )
          v14 = a3 + sub_430E60(v11);
        v6 = sub_47D6D0(v14);
        v12 = v6;
        v7 = sub_431E30(*(_DWORD *)(v11 + 4), a2, v6);
        v8 = sub_47D210(v7, a3, (int)&v15);
        sub_431E30(a2, *(_DWORD *)(v11 + 8), v8);
        v19 = a3 + sub_430E60(v11);
        if ( *(_DWORD *)(v11 + 4) )
        {
          sub_4313B0(*(_DWORD *)(v11 + 4), *(_DWORD *)(v11 + 8));
          sub_4338F0(*(_DWORD *)(v11 + 4), (*(_DWORD *)(v11 + 12) - *(_DWORD *)(v11 + 4)) >> 4);
        }
        *(_DWORD *)(v11 + 12) = (char *)v12 + 16 * v14;
        *(_DWORD *)(v11 + 8) = (char *)v12 + 16 * v19;
        result = v11;
        *(_DWORD *)(v11 + 4) = v12;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (004316C0) --------------------------------------------------------
int __stdcall sub_4316C0(int a1, int a2)
{
  return sub_47A3B0(a1, a2);
}

//----- (004316F0) --------------------------------------------------------
int __thiscall sub_4316F0(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // edx@1
  signed int v6; // esi@3
  void *v7; // eax@11
  void *v8; // eax@11
  void *v9; // ST20_4@11
  int v10; // ST18_4@16
  int v11; // [sp+4h] [bp-20h]@7
  int v12; // [sp+8h] [bp-1Ch]@1
  void *v13; // [sp+10h] [bp-14h]@11
  unsigned int v14; // [sp+18h] [bp-Ch]@1
  int v15; // [sp+18h] [bp-Ch]@9
  int v16; // [sp+1Ch] [bp-8h]@1
  int v17; // [sp+20h] [bp-4h]@1
  int v18; // [sp+30h] [bp+Ch]@11

  v12 = this;
  v5 = *(_DWORD *)(a4 + 4);
  v16 = *(_DWORD *)a4;
  v17 = v5;
  result = sub_472D20(this);
  v14 = result;
  if ( a3 )
  {
    v6 = sub_446B60();
    if ( v6 - sub_472D60(v12) >= (unsigned int)a3 )
    {
      if ( v14 >= a3 + sub_472D60(v12) )
      {
        if ( (*(_DWORD *)(v12 + 8) - a2) >> 3 >= (unsigned int)a3 )
        {
          v10 = *(_DWORD *)(v12 + 8);
          *(_DWORD *)(v12 + 8) = sub_431E60(v10 - 8 * a3, v10, *(void **)(v12 + 8));
          sub_47A3F0(a2, v10 - 8 * a3, v10);
          result = sub_447520(a2, a2 + 8 * a3, (int)&v16);
        }
        else
        {
          sub_431E60(a2, *(_DWORD *)(v12 + 8), (void *)(a2 + 8 * a3));
          sub_472EA0(*(void **)(v12 + 8), a3 - ((*(_DWORD *)(v12 + 8) - a2) >> 3), (int)&v16);
          *(_DWORD *)(v12 + 8) += 8 * a3;
          result = sub_447520(a2, *(_DWORD *)(v12 + 8) - 8 * a3, (int)&v16);
        }
      }
      else
      {
        if ( sub_446B60() - (v14 >> 1) >= v14 )
          v11 = v14 + (v14 >> 1);
        else
          v11 = 0;
        v15 = v11;
        if ( v11 < (unsigned int)(a3 + sub_472D60(v12)) )
          v15 = a3 + sub_472D60(v12);
        v7 = sub_446E50(v15);
        v13 = v7;
        v8 = sub_431E60(*(_DWORD *)(v12 + 4), a2, v7);
        v9 = sub_472EA0(v8, a3, (int)&v16);
        sub_431E60(a2, *(_DWORD *)(v12 + 8), v9);
        v18 = a3 + sub_472D60(v12);
        if ( *(_DWORD *)(v12 + 4) )
        {
          sub_4316C0(*(_DWORD *)(v12 + 4), *(_DWORD *)(v12 + 8));
          sub_4338F0(*(_DWORD *)(v12 + 4), (*(_DWORD *)(v12 + 12) - *(_DWORD *)(v12 + 4)) >> 3);
        }
        *(_DWORD *)(v12 + 12) = (char *)v13 + 8 * v15;
        result = v12;
        *(_DWORD *)(v12 + 8) = (char *)v13 + 8 * v18;
        *(_DWORD *)(v12 + 4) = v13;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (004319C0) --------------------------------------------------------
void *__stdcall sub_4319C0(int a1, int a2, int a3, int a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_44CD20(1);
  v6 = (int)operator new(0x18u, v7);
  if ( v6 )
    sub_48DBE0(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00431A40) --------------------------------------------------------
int __thiscall sub_431A40(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  signed int v5; // esi@3
  void *v6; // eax@11
  void *v7; // eax@11
  void *v8; // ST20_4@11
  int v9; // ST18_4@16
  int v10; // [sp+4h] [bp-24h]@7
  int v11; // [sp+8h] [bp-20h]@1
  int v12; // [sp+10h] [bp-18h]@11
  unsigned int v13; // [sp+18h] [bp-10h]@1
  int v14; // [sp+18h] [bp-10h]@9
  int v15; // [sp+1Ch] [bp-Ch]@1
  int v16; // [sp+20h] [bp-8h]@1
  int v17; // [sp+24h] [bp-4h]@1
  int v18; // [sp+34h] [bp+Ch]@11

  v11 = this;
  v15 = *(_DWORD *)a4;
  v16 = *(_DWORD *)(a4 + 4);
  v17 = *(_DWORD *)(a4 + 8);
  result = sub_4461C0(this);
  v13 = result;
  if ( a3 )
  {
    v5 = sub_446800();
    if ( v5 - sub_4311A0(v11) >= (unsigned int)a3 )
    {
      if ( v13 >= a3 + sub_4311A0(v11) )
      {
        if ( (*(_DWORD *)(v11 + 8) - a2) / 12 >= (unsigned int)a3 )
        {
          v9 = *(_DWORD *)(v11 + 8);
          *(_DWORD *)(v11 + 8) = sub_4474B0(v9 - 12 * a3, v9, *(void **)(v11 + 8));
          sub_4474E0(a2, v9 - 12 * a3, v9);
          result = sub_425370(a2, a2 + 12 * a3, (int)&v15);
        }
        else
        {
          sub_4474B0(a2, *(_DWORD *)(v11 + 8), (void *)(a2 + 12 * a3));
          sub_446280(*(void **)(v11 + 8), a3 - (*(_DWORD *)(v11 + 8) - a2) / 12, (int)&v15);
          *(_DWORD *)(v11 + 8) += 12 * a3;
          result = sub_425370(a2, *(_DWORD *)(v11 + 8) - 12 * a3, (int)&v15);
        }
      }
      else
      {
        if ( sub_446800() - (v13 >> 1) >= v13 )
          v10 = v13 + (v13 >> 1);
        else
          v10 = 0;
        v14 = v10;
        if ( v10 < (unsigned int)(a3 + sub_4311A0(v11)) )
          v14 = a3 + sub_4311A0(v11);
        v6 = sub_446B40(v14);
        v12 = (int)v6;
        v7 = sub_4474B0(*(_DWORD *)(v11 + 4), a2, v6);
        v8 = sub_446280(v7, a3, (int)&v15);
        sub_4474B0(a2, *(_DWORD *)(v11 + 8), v8);
        v18 = a3 + sub_4311A0(v11);
        if ( *(_DWORD *)(v11 + 4) )
        {
          sub_424F70(*(_DWORD *)(v11 + 4), *(_DWORD *)(v11 + 8));
          sub_4338F0(*(_DWORD *)(v11 + 4), (*(_DWORD *)(v11 + 12) - *(_DWORD *)(v11 + 4)) / 12);
        }
        *(_DWORD *)(v11 + 12) = v12 + 12 * v14;
        *(_DWORD *)(v11 + 8) = v12 + 12 * v18;
        result = v12;
        *(_DWORD *)(v11 + 4) = v12;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (00431D20) --------------------------------------------------------
int __thiscall sub_431D20(void *this, int a2, int a3)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = *(_DWORD *)this;
  *(_DWORD *)a2 = *(_DWORD *)sub_47D800(&v4, a3);
  return a2;
}

//----- (00431D50) --------------------------------------------------------
int __thiscall sub_431D50(void *this, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)this;
  return sub_425280(&v3, a2);
}

//----- (00431D80) --------------------------------------------------------
signed int __cdecl sub_431D80()
{
  return 268435455;
}

//----- (00431DB0) --------------------------------------------------------
int __thiscall sub_431DB0(void *this, int a2)
{
  return (*(_DWORD *)this - *(_DWORD *)a2) >> 4;
}

//----- (00431DD0) --------------------------------------------------------
int __thiscall sub_431DD0(void *this, int a2)
{
  return (*(_DWORD *)this - *(_DWORD *)a2) >> 3;
}

//----- (00431DF0) --------------------------------------------------------
void *__cdecl sub_431DF0(void *a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a1);
  return sub_447570(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00431E30) --------------------------------------------------------
void *__stdcall sub_431E30(int a1, int a2, void *a3)
{
  return sub_47D9D0(a1, a2, a3);
}

//----- (00431E60) --------------------------------------------------------
void *__stdcall sub_431E60(int a1, int a2, void *a3)
{
  return sub_47A690(a1, a2, a3);
}

//----- (00431E90) --------------------------------------------------------
void *__cdecl sub_431E90(void *a1, int a2, int a3)
{
  void *result; // eax@1

  result = a1;
  while ( a2 )
  {
    result = sub_4475D0(a1, a3);
    --a2;
    a1 = (char *)a1 + 12;
  }
  return result;
}

//----- (00431EF0) --------------------------------------------------------
int __cdecl sub_431EF0(int a1, int a2, int a3)
{
  while ( a1 != a2 )
  {
    a2 -= 16;
    a3 -= 16;
    *(_DWORD *)a3 = *(_DWORD *)a2;
    *(_DWORD *)(a3 + 4) = *(_DWORD *)(a2 + 4);
    *(_DWORD *)(a3 + 8) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a3 + 12) = *(_DWORD *)(a2 + 12);
  }
  return a3;
}

//----- (00431F30) --------------------------------------------------------
int __cdecl sub_431F30(int a1, int a2, int a3)
{
  int v3; // edx@2

  while ( a1 != a2 )
  {
    a2 -= 8;
    a3 -= 8;
    v3 = *(_DWORD *)(a2 + 4);
    *(_DWORD *)a3 = *(_DWORD *)a2;
    *(_DWORD *)(a3 + 4) = v3;
  }
  return a3;
}

//----- (00431F70) --------------------------------------------------------
int __cdecl sub_431F70(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 12;
    a1 += 12;
  }
  return result;
}

//----- (00431FA0) --------------------------------------------------------
void *__cdecl sub_431FA0(int a1, int a2, void *a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a3);
  return sub_4475F0(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00431FE0) --------------------------------------------------------
void *__cdecl sub_431FE0(void *a1, int a2)
{
  void *result; // eax@1
  void *v3; // [sp+4h] [bp-4h]@1

  result = operator new(0x10u, a1);
  v3 = result;
  if ( result )
  {
    *(_DWORD *)result = *(_DWORD *)a2;
    *((_DWORD *)result + 1) = *(_DWORD *)(a2 + 4);
    result = *(void **)(a2 + 8);
    *((_DWORD *)v3 + 2) = result;
    *((_DWORD *)v3 + 3) = *(_DWORD *)(a2 + 12);
  }
  return result;
}

//----- (00432030) --------------------------------------------------------
void *__thiscall sub_432030(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00432060) --------------------------------------------------------
void *__thiscall sub_432060(void *this, int a2, char a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(&a3);
  sub_420950(v4, a2, v5);
  std___Init_locks__operator_(&a3);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (004320A0) --------------------------------------------------------
void *__thiscall sub_4320A0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004320D0) --------------------------------------------------------
int __thiscall sub_4320D0(int this)
{
  return sub_4320F0(this);
}

//----- (004320F0) --------------------------------------------------------
int __thiscall sub_4320F0(int this)
{
  return sub_432110(this);
}

//----- (00432110) --------------------------------------------------------
int __thiscall sub_432110(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4321C0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (004321C0) --------------------------------------------------------
void *__thiscall sub_4321C0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_430C40(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00432260) --------------------------------------------------------
int __thiscall sub_432260(int this)
{
  return sub_432280(this);
}

//----- (00432280) --------------------------------------------------------
int __thiscall sub_432280(int this)
{
  return sub_4322A0(this);
}

//----- (004322A0) --------------------------------------------------------
int __thiscall sub_4322A0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_432350(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00432350) --------------------------------------------------------
void *__thiscall sub_432350(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_430D10(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004323F0) --------------------------------------------------------
void *__thiscall sub_4323F0(void *this, int a2)
{
  void *result; // eax@3

  if ( this != &unk_4E1108 )
  {
    result = this;
    *(_DWORD *)this = a2;
  }
  return result;
}

//----- (00432410) --------------------------------------------------------
__int32 __thiscall sub_432410(int this)
{
  return strtol(*(const char **)(this + 4), 0, 0);
}

//----- (00432430) --------------------------------------------------------
unsigned __int32 __thiscall sub_432430(int this)
{
  return strtoul(*(const char **)(this + 4), 0, 0);
}

//----- (00432450) --------------------------------------------------------
int __thiscall sub_432450(void *this)
{
  int v2; // eax@4
  int v3; // ecx@4
  int v4; // [sp-4h] [bp-14h]@4
  void *v5; // [sp+0h] [bp-10h]@1
  int v6; // [sp+8h] [bp-8h]@1
  char v7; // [sp+Ch] [bp-4h]@1

  v5 = this;
  v6 = 0;
  sub_402340(&v7, (int)((char *)this + 8));
  while ( 1 )
  {
    ++v6;
    if ( !(unsigned __int8)sub_40BCE0(&v7) )
      break;
    v2 = sub_40BCC0(&v7);
    v4 = v3;
    sub_402340(&v4, v2);
    sub_4323F0(&v7, v4);
  }
  return v6;
}

//----- (004324B0) --------------------------------------------------------
void *__thiscall sub_4324B0(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  std__ios_base__ios_base();
  *(_DWORD *)v2 = off_4B76F0;
  return v2;
}
// 40C340: using guessed type int std__ios_base__ios_base(void);
// 4B76F0: using guessed type int (*off_4B76F0[10])();

//----- (004324E0) --------------------------------------------------------
int __cdecl CLog::CInit::_CInit()
{
  int result; // eax@5
  unsigned int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 3; ++i )
  {
    if ( *(&dword_4E111C + i) )
      fclose(*(&dword_4E111C + i));
    result = i + 1;
  }
  return result;
}

//----- (00432530) --------------------------------------------------------
void __usercall CLog::AddV(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, signed int a1, const char *a2, va_list a3)
{
  struct tm *v6; // edi@8
  char v7; // [sp+8h] [bp-93Ch]@8
  char v8; // [sp+2Ch] [bp-918h]@6
  time_t v9; // [sp+130h] [bp-814h]@2
  struct tm *v10; // [sp+134h] [bp-810h]@2
  size_t v11; // [sp+138h] [bp-80Ch]@9
  char v12; // [sp+13Ch] [bp-808h]@1
  char v13; // [sp+53Ch] [bp-408h]@9
  int v14; // [sp+940h] [bp-4h]@1

  v14 = dword_4D9830;
  vsprintf(&v12, a2, a3);
  CSocket::Lock((int)&unk_4E1128, ebx0, edi0, esi0);
  sub_47E3D0((int)&unk_4E1128, *(&dword_4D62A0 + a1), &v12);
  if ( a1 >= 1 )
  {
    time(&v9);
    v10 = localtime(&v9);
    if ( v9 >= (unsigned int)dword_4E1110[a1] )
    {
      if ( *(&dword_4E111C + a1) )
        fclose(*(&dword_4E111C + a1));
      if ( a1 == 1 )
        sprintf(&v8, "Log\\%02d%02d%02d.log", v10->tm_year % 100, v10->tm_mon + 1, v10->tm_mday);
      else
        sprintf(&v8, "Log\\%02d%02d%02d.err.log", v10->tm_year % 100, v10->tm_mon + 1, v10->tm_mday);
      memcpy(&v7, v10, 0x24u);
      v10->tm_sec = 0;
      v10->tm_min = 0;
      v10->tm_hour = 0;
      dword_4E1110[a1] = mktime(v10) + 86400;
      *(&dword_4E111C + a1) = fopen(&v8, "ab");
      v6 = v10;
      memcpy(v10, &v7, 0x24u);
      esi0 = (DWORD)&v8;
      edi0 = (DWORD)&v6[1];
    }
    v11 = sprintf(
            &v13,
            "%02d/%02d/%02d %02d:%02d:%02d %s\r\n",
            v10->tm_year % 100,
            v10->tm_mon + 1,
            v10->tm_mday,
            v10->tm_hour,
            v10->tm_min,
            v10->tm_sec,
            &v12);
    if ( *(&dword_4E111C + a1) )
      sub_4A0FE3(&v13, 1u, v11, *(&dword_4E111C + a1));
  }
  CSocket::Unlock((int)&unk_4E1128, ebx0, edi0, esi0);
  if ( (_UNKNOWN *)dword_4E2130 == &unk_4E1128 )
    InvalidateRect(hWnd, 0, 1);
}
// 4D9830: using guessed type int dword_4D9830;
// 4E1110: using guessed type int dword_4E1110[];
// 4E2130: using guessed type int dword_4E2130;

//----- (004327C0) --------------------------------------------------------
void *__usercall CSocket::Lock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 20), a2, a3, a4);
}

//----- (004327E0) --------------------------------------------------------
void __usercall CSocket::Unlock(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  CIOCriticalSection::Leave(a1 + 20, a2, a3, a4);
}

//----- (00432800) --------------------------------------------------------
void __usercall CLog::Flush(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  unsigned int i; // [sp+0h] [bp-4h]@1

  CSocket::Lock((int)&unk_4E1128, a1, a2, a3);
  for ( i = 0; i < 3; ++i )
  {
    if ( *(&dword_4E111C + i) )
      fflush(*(&dword_4E111C + i));
  }
  CSocket::Unlock((int)&unk_4E1128, a1, a2, a3);
}

//----- (00432860) --------------------------------------------------------
void sub_432860(char *arg0, ...)
{
  DWORD ebx0; // ebx@0
  DWORD edi0; // edi@0
  DWORD esi0; // esi@0
  va_list va; // [sp+10h] [bp+Ch]@1

  va_start(va, arg0);
  CLog::AddV(ebx0, edi0, esi0, 0, arg0, va);
}
// 432860: erroneously detected ellipsis type has been ignored
// 432860: can not handle register arguments in vararg function, discarded them

//----- (00432890) --------------------------------------------------------
void sub_432890(const char *a1, ...)
{
  DWORD ebx0; // ebx@0
  DWORD edi0; // edi@0
  DWORD esi0; // esi@0
  va_list va; // [sp+10h] [bp+Ch]@1

  va_start(va, a1);
  CLog::AddV(ebx0, edi0, esi0, 1, a1, va);
}
// 432890: erroneously detected ellipsis type has been ignored
// 432890: can not handle register arguments in vararg function, discarded them

//----- (004328C0) --------------------------------------------------------
void sub_4328C0(const char *a1, ...)
{
  DWORD ebx0; // ebx@0
  DWORD edi0; // edi@0
  DWORD esi0; // esi@0
  va_list va; // [sp+10h] [bp+Ch]@1

  va_start(va, a1);
  CLog::AddV(ebx0, edi0, esi0, 2, a1, va);
}
// 4328C0: erroneously detected ellipsis type has been ignored
// 4328C0: can not handle register arguments in vararg function, discarded them

//----- (004328F0) --------------------------------------------------------
signed int __fastcall CMainConfig::Open(int a1, int a2)
{
  signed int result; // eax@2
  int v3; // eax@3
  int v4; // eax@3
  int v5; // eax@3
  int v6; // eax@3
  int v7; // eax@3
  int v8; // eax@3
  int v9; // eax@3
  int v10; // eax@3
  size_t v11; // eax@6
  size_t v12; // eax@8
  size_t v13; // eax@9
  FILE *v14; // eax@10
  size_t v15; // eax@11
  int v16; // eax@10
  int v17; // eax@13
  int v18; // ST0C_4@18
  int v19; // eax@18
  int v20; // eax@19
  char v21; // [sp+8h] [bp-2E8h]@19
  char v22; // [sp+24h] [bp-2CCh]@19
  int v23; // [sp+44h] [bp-2ACh]@18
  char v24; // [sp+50h] [bp-2A0h]@19
  char v25; // [sp+54h] [bp-29Ch]@19
  const CHAR String; // [sp+58h] [bp-298h]@4
  char *i; // [sp+78h] [bp-278h]@3
  char v28[4]; // [sp+7Ch] [bp-274h]@15
  struct _SYSTEM_INFO SystemInfo; // [sp+80h] [bp-270h]@3
  char v30; // [sp+A4h] [bp-24Ch]@15
  FILE *v31; // [sp+D4h] [bp-21Ch]@12
  char v32; // [sp+D8h] [bp-218h]@1
  int v33; // [sp+2E8h] [bp-8h]@1
  int v34; // [sp+2ECh] [bp-4h]@10

  v33 = dword_4D9830;
  CConfig::CConfig((int)&v32, a2);
  if ( CConfig::Open((int)&v32, "MainConfig.txt") )
  {
    GetSystemInfo(&SystemInfo);
    *(_DWORD *)dword_4E1190 = CConfig::GetInt(&v32, "NumberOfThreads", 2 * SystemInfo.dwNumberOfProcessors);
    dword_4E118C = CConfig::GetInt(&v32, "MaxUser", 1000);
    dword_4E1188 = sub_40C970(&v32, "ServerId");
    dword_4E1184 = CConfig::GetInt(&v32, "AgeLimit", 18);
    v3 = CConfig::Get(&v32, "Map", (int)".\\Map");
    sub_433B70(&unk_4E1194, (char *)v3);
    v4 = CConfig::Get(&v32, "DBServer", (int)"127.0.0.1");
    sub_433B70(&unk_4E11B0, (char *)v4);
    v5 = CConfig::Get(&v32, "AuthServer", (int)"127.0.0.1");
    sub_433B70(&unk_4E11CC, (char *)v5);
    v6 = sub_40C8F0(&v32, "MailServer");
    sub_433B70(&unk_4E1204, (char *)v6);
    v7 = sub_40C8F0(&v32, "MailFrom");
    sub_433B70(&unk_4E1220, (char *)v7);
    v8 = sub_40C8F0(&v32, "MailTo");
    sub_433B70(&unk_4E123C, (char *)v8);
    dword_4E117C = CConfig::GetTimeStamp();
    *(_DWORD *)&dword_4E1170 = CConfig::GetInt(&v32, "Port", 30001);
    *(_DWORD *)&dword_4E116C = CConfig::GetInt(&v32, "DBPort", 40001);
    *(_DWORD *)&hostshort = CConfig::GetInt(&v32, "AuthPort", 50001);
    v9 = CConfig::Get(&v32, "ODBC", (int)&off_4B7858);
    sub_433B70(&unk_4E11E8, (char *)v9);
    dword_4E1164 = CConfig::GetInt(&v32, "ItemVer", 1);
    dword_4E35B8 = CConfig::GetInt(&v32, "Country", 0);
    v10 = CConfig::Get(&v32, "Language", (int)"LanguageM_kr.txt");
    sub_433B70(&unk_4E1264, (char *)v10);
    dword_4E1180 = CConfig::GetInt(&v32, "MailLimitLv", 0);
    *(_DWORD *)dword_4E1160 = CConfig::GetInt(&v32, "Seed", 0);
    i = (char *)sub_40C8F0(&v32, "Title");
    if ( *i )
    {
      sprintf((char *)&String, "%s on port %d", i, *(_DWORD *)&dword_4E1170);
      SetWindowTextA(hWnd, &String);
    }
    for ( i = (char *)CConfig::Get(&v32, "Event", (int)&byte_4B437D); ; i += v12 )
    {
      v11 = strspn(i, " ,");
      i += v11;
      if ( !*i )
        break;
      dword_4E1178 |= 1 << j__atol(i);
      v12 = strcspn(i, " ,");
    }
    for ( i = (char *)CConfig::Get(&v32, "System", (int)&byte_4B437D); ; i += v15 )
    {
      v13 = strspn(i, " ,");
      i += v13;
      if ( !*i )
        break;
      *(_DWORD *)dword_4E1174 |= 1 << j__atol(i);
      v15 = strcspn(i, " ,");
    }
    v34 = 0;
    v16 = sub_4012D0(&unk_4E1264);
    v14 = fopen((const char *)v16, "rt");
    v31 = v14;
    if ( v14 )
    {
      while ( !(v31->_flag & 0x10) )
      {
        ++v34;
        if ( fscanf(v31, "%d %[^\n]", v28, &v30) < 2 )
        {
          if ( !(v31->_flag & 0x10) )
          {
            v18 = v34;
            v19 = sub_4012D0(&unk_4E1264);
            sub_4328C0("Can't read '%s'. (line:%d)", v19, v18);
            fclose(v31);
            v23 = 0;
            CConfig::_CConfig((int)&v32);
            return v23;
          }
          break;
        }
        sub_40FD10(&v21, &v30);
        v20 = sub_433200((int)&v22, (int)v28, (int)&v21);
        sub_432F60((int)&unk_4E1258, (int)&v24, v20);
        sub_432EC0(&v22);
        sub_40F780((int)&v21);
        if ( !v25 )
        {
          sub_4328C0("Can't insert into LanguageMap.(index:%d, string:%s)", *(_DWORD *)v28, &v30);
          fclose(v31);
          CConfig::_CConfig((int)&v32);
          return 0;
        }
      }
      fclose(v31);
      CConfig::_CConfig((int)&v32);
      result = 1;
    }
    else
    {
      v17 = sub_4012D0(&unk_4E1264);
      sub_4328C0("Can't open '%s'", v17);
      CConfig::_CConfig((int)&v32);
      result = 0;
    }
  }
  else
  {
    CConfig::_CConfig((int)&v32);
    result = 0;
  }
  return result;
}
// 4B7858: using guessed type void *off_4B7858;
// 4D9830: using guessed type int dword_4D9830;
// 4E1164: using guessed type int dword_4E1164;
// 4E1178: using guessed type int dword_4E1178;
// 4E117C: using guessed type int dword_4E117C;
// 4E1180: using guessed type int dword_4E1180;
// 4E1184: using guessed type int dword_4E1184;
// 4E1188: using guessed type int dword_4E1188;
// 4E118C: using guessed type int dword_4E118C;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00432EC0) --------------------------------------------------------
int __thiscall sub_432EC0(void *this)
{
  return sub_40F780((int)((char *)this + 4));
}

//----- (00432EE0) --------------------------------------------------------
int __cdecl CMainConfig::Close()
{
  return sub_433110((int)&unk_4E1258);
}

//----- (00432EF0) --------------------------------------------------------
int __cdecl sub_432EF0(int a1)
{
  void *v1; // eax@1
  int result; // eax@2
  int v3; // eax@3
  char v4; // [sp+0h] [bp-8h]@1
  char v5; // [sp+4h] [bp-4h]@1

  sub_433170((int)&unk_4E1258, (int)&v5, (int)&a1);
  v1 = sub_430C20((int)&unk_4E1258, &v4);
  if ( (unsigned __int8)unknown_libname_8(v1) )
  {
    sub_4328C0("Can't find words in LanguageMap. (index:%d)", a1);
    result = (int)&byte_4B437D;
  }
  else
  {
    v3 = sub_420250((int *)&v5);
    result = sub_4012D0((void *)(v3 + 4));
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00432F60) --------------------------------------------------------
int __thiscall sub_432F60(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_433230(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_4186F0(v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_4332F0(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_475900((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_4186F0(v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_4332F0(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00433110) --------------------------------------------------------
int __thiscall sub_433110(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_433270(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 433270: using guessed type _DWORD __stdcall sub_433270(_DWORD);

//----- (00433170) --------------------------------------------------------
int __thiscall sub_433170(int this, int a2, int a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_433240(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), (unsigned __int8)sub_4186F0(a3, v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00433200) --------------------------------------------------------
int __thiscall sub_433200(int this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = this;
  *(_DWORD *)this = *(_DWORD *)a2;
  sub_40F730((void *)(this + 4), a3);
  return v4;
}

//----- (00433230) --------------------------------------------------------
int __cdecl sub_433230(int a1)
{
  return a1 + 45;
}

//----- (00433240) --------------------------------------------------------
void *__thiscall sub_433240(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_476660(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00433270) --------------------------------------------------------
int __stdcall sub_433270(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_433230(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_433270(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_433910((void *)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 433270: using guessed type _DWORD __stdcall sub_433270(_DWORD);

//----- (004332F0) --------------------------------------------------------
void *__thiscall sub_4332F0(int this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_477640() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_433870(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)sub_433730(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)sub_433730(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_4766F0((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)sub_433730(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_433740((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v20) = 1;
        *(_BYTE *)sub_433730(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)sub_433730(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)sub_433730(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_433740((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)sub_433730(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_4766F0((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v34) = 1;
        *(_BYTE *)sub_433730(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)sub_433730(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)sub_433730(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (00433730) --------------------------------------------------------
int __cdecl sub_433730(int a1)
{
  return a1 + 44;
}

//----- (00433740) --------------------------------------------------------
int __thiscall sub_433740(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_474590(a2);
  v2 = sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *(_DWORD *)v2;
  v3 = sub_430F90(v11);
  if ( !*(_BYTE *)sub_433230(*(_DWORD *)v3) )
  {
    v4 = sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00433870) --------------------------------------------------------
void *__stdcall sub_433870(int a1, int a2, int a3, int a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_4793B0(1);
  v6 = (int)operator new(0x30u, v7);
  if ( v6 )
    sub_433A30(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (004338F0) --------------------------------------------------------
void __stdcall sub_4338F0(int a1, int a2)
{
  sub_401020(a1);
}

//----- (00433910) --------------------------------------------------------
int __stdcall sub_433910(void *a1)
{
  return sub_433AF0(a1);
}

//----- (00433930) --------------------------------------------------------
int __thiscall sub_433930(int *this)
{
  return sub_447000(*this);
}

//----- (00433950) --------------------------------------------------------
int __thiscall sub_433950(int *this)
{
  int result; // eax@2
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  if ( *(_BYTE *)sub_433230(*this) )
  {
    result = *(_DWORD *)sub_430F90(*v5);
    *v5 = result;
  }
  else
  {
    v2 = sub_474590(*v5);
    if ( *(_BYTE *)sub_433230(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        if ( *(_BYTE *)sub_433230(*v4) )
          break;
        if ( *v5 != *(_DWORD *)sub_474590(v6) )
          break;
        *v5 = v6;
      }
      result = *(_BYTE *)sub_433230(v6);
      if ( !result )
        *v5 = v6;
    }
    else
    {
      v3 = sub_474590(*v5);
      result = sub_433AB0(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00433A30) --------------------------------------------------------
int __thiscall sub_433A30(int this, int a2, int a3, int a4, int a5, char a6)
{
  int v7; // ST04_4@1

  v7 = this;
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  sub_433A80(this + 12, a5);
  *(_BYTE *)(v7 + 44) = a6;
  *(_BYTE *)(v7 + 45) = 0;
  return v7;
}

//----- (00433A80) --------------------------------------------------------
int __thiscall sub_433A80(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  *(_DWORD *)this = *(_DWORD *)a2;
  sub_40F730((void *)(this + 4), a2 + 4);
  return v3;
}

//----- (00433AB0) --------------------------------------------------------
int __cdecl sub_433AB0(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_430F90(a1);
    if ( *(_BYTE *)sub_433230(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00433AF0) --------------------------------------------------------
int __cdecl sub_433AF0(void *a1)
{
  return sub_433B20(a1, 0);
}

//----- (00433B00) --------------------------------------------------------
void *__cdecl sub_433B00(int a1)
{
  return sub_401000(48 * a1);
}

//----- (00433B20) --------------------------------------------------------
int __thiscall sub_433B20(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_433B50();
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}
// 433B50: using guessed type int sub_433B50(void);

//----- (00433B70) --------------------------------------------------------
void *__thiscall sub_433B70(void *this, char *a2)
{
  return sub_40FD50(this, a2);
}

//----- (00433B90) --------------------------------------------------------
int __thiscall sub_433B90(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  sub_40F8A0((int)v3, 0, 0);
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00433BC0) --------------------------------------------------------
void *__thiscall sub_433BC0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_472ED0(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00433BF0) --------------------------------------------------------
int __thiscall sub_433BF0(int this)
{
  return sub_433C10(this);
}

//----- (00433C10) --------------------------------------------------------
int __thiscall sub_433C10(int this)
{
  return sub_433C30(this);
}

//----- (00433C30) --------------------------------------------------------
int __thiscall sub_433C30(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_433CE0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00433CE0) --------------------------------------------------------
void *__thiscall sub_433CE0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_433110(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_434510(&a3, (int)&v10, 0);
      sub_433D80((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00433D80) --------------------------------------------------------
int __thiscall sub_433D80(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_433230(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_475880(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_433230(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_433230(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_433230(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_433230(v57) )
        v51 = v55;
      else
        v51 = sub_479190(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_433230(v57) )
        v50 = v55;
      else
        v50 = sub_433AB0(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_433230(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = sub_433730(v58);
    v34 = sub_433730(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)sub_433730(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)sub_433730(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)sub_433730(v56) )
        {
          *(_BYTE *)sub_433730(v56) = 1;
          *(_BYTE *)sub_433730(v55) = 0;
          sub_4766F0((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_433230(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)sub_433730(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)sub_433730(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)sub_433730(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)sub_433730(*(_DWORD *)v40) = 1;
              *(_BYTE *)sub_433730(v56) = 0;
              sub_433740((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = sub_433730(v55);
            *(_BYTE *)sub_433730(v56) = *(_BYTE *)v41;
            *(_BYTE *)sub_433730(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)sub_433730(*(_DWORD *)v42) = 1;
            sub_4766F0((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_433730(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)sub_433730(v56) )
        {
          *(_BYTE *)sub_433730(v56) = 1;
          *(_BYTE *)sub_433730(v55) = 0;
          sub_433740((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_433230(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)sub_433730(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)sub_433730(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)sub_433730(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)sub_433730(*(_DWORD *)v46) = 1;
              *(_BYTE *)sub_433730(v56) = 0;
              sub_4766F0((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = sub_433730(v55);
            *(_BYTE *)sub_433730(v56) = *(_BYTE *)v47;
            *(_BYTE *)sub_433730(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)sub_433730(*(_DWORD *)v48) = 1;
            sub_433740((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_433730(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)sub_433730(v57) = 1;
  }
  sub_433910((void *)v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (00434510) --------------------------------------------------------
int __thiscall sub_434510(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_475880(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (00434540) --------------------------------------------------------
int __thiscall sub_434540(int *this)
{
  int result; // eax@1
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  result = sub_433230(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = sub_430F90(*v5);
    if ( *(_BYTE *)sub_433230(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        result = *(_BYTE *)sub_433230(*v4);
        if ( result )
          break;
        result = sub_430F90(v6);
        if ( *v5 != *(_DWORD *)result )
          break;
        *v5 = v6;
      }
      *v5 = v6;
    }
    else
    {
      v3 = sub_430F90(*v5);
      result = sub_479190(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00434600) --------------------------------------------------------
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
  int result; // eax@2
  DWORD v5; // ebx@8
  DWORD v6; // edi@8
  DWORD v7; // esi@8
  DWORD ThreadId; // [sp+0h] [bp-24h]@3
  struct tagMSG Msg; // [sp+4h] [bp-20h]@4
  HACCEL hAccTable; // [sp+20h] [bp-4h]@3

  LoadStringA(hInstance, 0x67u, WindowName, 100);
  LoadStringA(hInstance, 0x6Du, ClassName, 100);
  sub_434710(hInstance);
  sub_47E2A0((int)&unk_4E1128, 200, 50);
  sub_47E2A0((int)&unk_4E2EDC, 80, 20);
  dword_4E2130 = (int)&unk_4E1128;
  if ( sub_434790(hInstance, nShowCmd) )
  {
    hAccTable = LoadAcceleratorsA(hInstance, (LPCSTR)0x6D);
    dword_4E1280 = (HANDLE)_beginthreadex(0, 0, (int)sub_4351C0, 0, 0, &ThreadId);
    while ( GetMessageA(&Msg, 0, 0, 0) )
    {
      if ( !TranslateAcceleratorA(Msg.hwnd, hAccTable, &Msg) )
      {
        TranslateMessage(&Msg);
        DispatchMessageA(&Msg);
      }
    }
    CLog::Flush(v5, v6, v7);
    if ( CIOException::Disable() )
      ExitProcess(0);
    result = Msg.wParam;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4E2130: using guessed type int dword_4E2130;

//----- (00434710) --------------------------------------------------------
ATOM __cdecl sub_434710(HINSTANCE hInstance)
{
  WNDCLASSEXA v2; // [sp+0h] [bp-30h]@1

  v2.cbSize = 48;
  v2.style = 3;
  v2.lpfnWndProc = (WNDPROC)sub_4348E0;
  v2.cbClsExtra = 0;
  v2.cbWndExtra = 0;
  v2.hInstance = hInstance;
  v2.hIcon = LoadIconA(hInstance, (LPCSTR)0x6B);
  v2.hCursor = LoadCursorA(0, (LPCSTR)0x7F00);
  v2.hbrBackground = (HBRUSH)6;
  v2.lpszMenuName = (LPCSTR)109;
  v2.lpszClassName = ClassName;
  v2.hIconSm = LoadIconA(hInstance, (LPCSTR)0x6C);
  return RegisterClassExA(&v2);
}

//----- (00434790) --------------------------------------------------------
signed int __cdecl sub_434790(HINSTANCE hInstance, int nCmdShow)
{
  signed int result; // eax@2
  HMENU v3; // eax@3
  HMENU v4; // eax@3
  HWND v5; // [sp+0h] [bp-4h]@1

  ::hInstance = hInstance;
  v5 = CreateWindowExA(0x300u, ClassName, WindowName, 0xCF0000u, -2147483648, 0, -2147483648, 0, 0, 0, hInstance, 0);
  if ( v5 )
  {
    v3 = GetMenu(v5);
    EnableMenuItem(v3, 0x8011u, 1u);
    v4 = GetMenu(v5);
    EnableMenuItem(v4, 0x8015u, 1u);
    hWnd = v5;
    ShowWindow(v5, nCmdShow);
    UpdateWindow(v5);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00434840) --------------------------------------------------------
int __usercall sub_434840<eax>(int a1<eax>, char a2<dil>)
{
  int result; // eax@1
  char v3; // [sp-Ch] [bp-28h]@1
  char *v4; // [sp+4h] [bp-18h]@1
  int v5; // [sp+Ch] [bp-10h]@1
  int (__cdecl *v6)(int, PVOID, int); // [sp+10h] [bp-Ch]@1
  _UNKNOWN *v7; // [sp+14h] [bp-8h]@1
  int v8; // [sp+18h] [bp-4h]@1

  v8 = -1;
  v7 = &unk_4B7988;
  v6 = _except_handler3;
  v5 = a1;
  v4 = &v3;
  sub_422B30("Exception Test\n", a2);
  result = 0;
  v0 = 0;
  return result;
}

//----- (004348E0) --------------------------------------------------------
LRESULT __userpurge sub_4348E0<eax>(DWORD a1<ebx>, char a2<dil>, DWORD a3<esi>, HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  void *v7; // ST38_4@26
  int v8; // eax@29
  int v10; // [sp+Ch] [bp-24h]@62
  int v11; // [sp+10h] [bp-20h]@50
  int v12; // [sp+14h] [bp-1Ch]@50
  DWORD v13; // [sp+1Ch] [bp-14h]@32
  DWORD ThreadId; // [sp+24h] [bp-Ch]@26
  WPARAM v15; // [sp+28h] [bp-8h]@9
  int v16; // [sp+2Ch] [bp-4h]@9

  if ( Msg > 0x10 )
  {
    if ( Msg == 273 )
    {
      v16 = (unsigned __int16)wParam;
      v15 = wParam >> 16;
      if ( (signed int)(unsigned __int16)wParam > 32782 )
      {
        switch ( (unsigned __int16)wParam )
        {
          case 0x8012u:
            goto LABEL_27;
          case 0x8013u:
            KillTimer(hWnd, 1u);
            dword_4E2130 = (int)&unk_4E2EDC;
            sub_4961B0(a1, a2, a3);
            SetTimer(hWnd, 1u, 0xBB8u, 0);
            return 0;
          case 0x8011u:
          case 0x8015u:
            return 0;
          case 0x8019u:
            CItem::ReloadItemGroup(a1, a2, a3);
            return 0;
          case 0x801Bu:
            DialogBoxParamA(hInstance, (LPCSTR)0x83, hWnd, (DLGPROC)sub_435130, 0);
            return 0;
          case 0x8017u:
            DialogBoxParamA(hInstance, (LPCSTR)0x82, hWnd, (DLGPROC)sub_434ED0, 0);
            return 0;
          default:
            return DefWindowProcA(hWnd, Msg, wParam, lParam);
        }
      }
      else
      {
        if ( (unsigned __int16)wParam == 32782 )
        {
          KillTimer(hWnd, 1u);
          dword_4E2130 = (int)&unk_4E1128;
          if ( CIOException::ToggleRaise() )
            sub_432860("ASSERT enabled");
          else
            sub_432860("ASSERT disabled");
          return 0;
        }
        if ( (signed int)(unsigned __int16)wParam > 32778 )
        {
          if ( (unsigned __int16)wParam == 32779 )
          {
            KillTimer(hWnd, 1u);
            dword_4E2130 = (int)&unk_4E1128;
            sub_432860("Stack dump started");
            UpdateWindow(hWnd);
            CIOSocket::DumpStack();
            sub_432860("Stack dump completed");
            return 0;
          }
          if ( (unsigned __int16)wParam == 32780 )
          {
            KillTimer(hWnd, 1u);
            dword_4E2130 = (int)&unk_4E1128;
            CLog::Flush(a1, a2, a3);
            sub_432860("Log Flushed");
            return 0;
          }
          if ( (unsigned __int16)wParam == 32781 )
          {
            v13 = CIOSocket::AddIOThread(wParam >> 16);
            if ( v13 )
              ++*(_DWORD *)dword_4E1190;
            KillTimer(hWnd, 1u);
            dword_4E2130 = (int)&unk_4E1128;
            sub_4328C0("Add thread count(%d) thread id(%x)", *(_DWORD *)dword_4E1190, v13);
            return 0;
          }
        }
        else
        {
          if ( (unsigned __int16)wParam == 32778 )
          {
            KillTimer(hWnd, 1u);
            dword_4E2130 = (int)&unk_4E1128;
            sub_432860("Exception test started");
            v8 = UpdateWindow(hWnd);
            sub_434840(v8, a2);
            sub_432860("Exception test completed");
            return 0;
          }
          if ( (unsigned __int16)wParam == 104 )
          {
            DialogBoxParamA(hInstance, (LPCSTR)0x67, hWnd, (DLGPROC)DialogFunc, 0);
            return 0;
          }
          if ( (unsigned __int16)wParam == 105 )
          {
            PostMessageA(hWnd, 0x10u, 0, 0);
            return 0;
          }
          if ( (unsigned __int16)wParam == 32777 )
          {
            if ( CIOException::Disable() )
            {
              v7 = (void *)_beginthreadex(0, 0, (int)sub_435500, lParam, 0, &ThreadId);
              CloseHandle(v7);
LABEL_27:
              KillTimer(hWnd, 1u);
              dword_4E2130 = (int)&unk_4E1128;
              InvalidateRect(hWnd, 0, 1);
            }
            return 0;
          }
        }
      }
      return DefWindowProcA(hWnd, Msg, wParam, lParam);
    }
    if ( Msg != 275 )
      return DefWindowProcA(hWnd, Msg, wParam, lParam);
    switch ( wParam )
    {
      case 1u:
        sub_4961B0(a1, a2, a3);
        break;
      case 2u:
        dword_4E17B8 -= 10000;
        if ( dword_4E17B8 <= 0 )
        {
          KillTimer(hWnd, 2u);
          SetTimer(hWnd, 3u, 0x7D0u, 0);
          CPlayer::WriteAll(a1, a2, a3, 67, (unsigned int)"b");
          sub_432860("[Shutdown] Server is closed right now!");
          dword_4E17B8 = 0;
        }
        else
        {
          v12 = dword_4E17B8 / 60000;
          v11 = dword_4E17B8 % 60000 / 1000;
          if ( dword_4E17B8 / 60000 <= 0 )
          {
            CPlayer::WriteAll(a1, a2, a3, 68, (unsigned int)"bb");
            sub_432860("[Shutdown] Server will be closed after %d sec", v11);
          }
          else
          {
            if ( !v11 )
            {
              CPlayer::WriteAll(a1, a2, a3, 68, (unsigned int)"bb");
              sub_432860("[Shutdown] Server will be closed after %d min", v12);
            }
          }
        }
        break;
      case 3u:
        KillTimer(hWnd, 3u);
        PostMessageA(hWnd, 0x111u, 0x8009u, 0);
        break;
    }
  }
  else
  {
    if ( Msg == 16 )
    {
      if ( CIOException::IsEnable() )
      {
        v10 = MessageBoxA(hWnd, "Really shutdown the System?", "MainSvr", 3u);
        if ( v10 == 6 )
        {
          PostMessageA(hWnd, 0x111u, 0x8009u, 1);
          return 0;
        }
        if ( v10 == 2 )
          return 0;
      }
      DestroyWindow(hWnd);
      return 0;
    }
    if ( Msg == 2 )
    {
      PostQuitMessage(0);
    }
    else
    {
      if ( Msg != 15 )
        return DefWindowProcA(hWnd, Msg, wParam, lParam);
      sub_47E4A0(dword_4E2130, a1, a2, a3);
    }
  }
  return 0;
}
// 4E17B8: using guessed type int dword_4E17B8;
// 4E2130: using guessed type int dword_4E2130;

//----- (00434E60) --------------------------------------------------------
signed int __stdcall DialogFunc(HWND hDlg, int a2, unsigned __int16 a3, int a4)
{
  signed int result; // eax@4

  if ( a2 == 272 )
  {
    result = 1;
  }
  else
  {
    if ( a2 != 273 || a3 != 1 && a3 != 2 )
    {
      result = 0;
    }
    else
    {
      EndDialog(hDlg, a3);
      result = 1;
    }
  }
  return result;
}

//----- (00434ED0) --------------------------------------------------------
signed int __userpurge sub_434ED0<eax>(DWORD a1<ebx>, DWORD a2<esi>, HWND hDlg, int a4, unsigned int a5, int a6)
{
  BOOL v7; // ST0C_4@25
  HWND v8; // eax@25
  UINT v9; // [sp+Ch] [bp-214h]@10
  CHAR String; // [sp+10h] [bp-210h]@9
  char v11; // [sp+11h] [bp-20Fh]@9
  __int16 v12; // [sp+20Dh] [bp-13h]@9
  char v13; // [sp+20Fh] [bp-11h]@9
  char v14; // [sp+210h] [bp-10h]@20
  int v15; // [sp+214h] [bp-Ch]@1
  unsigned int v16; // [sp+218h] [bp-8h]@5
  int v17; // [sp+21Ch] [bp-4h]@5

  v15 = dword_4D9830;
  if ( a4 == 272 )
    return 1;
  if ( a4 != 273 )
    return 0;
  v17 = (unsigned __int16)a5;
  v16 = a5 >> 16;
  if ( (unsigned __int16)a5 == 1 )
  {
    String = 0;
    memset(&v11, 0, 0x1FCu);
    v12 = 0;
    v13 = 0;
    GetDlgItemTextA(hDlg, 1001, &String, 511);
    if ( IsDlgButtonChecked(hDlg, 1003) )
    {
      v9 = GetDlgItemInt(hDlg, 1002, 0, 0);
      if ( (signed int)v9 > 60 )
      {
        MessageBoxA(hDlg, "Shutdown Time Setting Error. (Max 60)", "Shutdown Error", 0);
        return 1;
      }
      if ( (signed int)v9 <= 0 )
      {
        if ( dword_4E17B8 )
        {
          KillTimer(hWnd, 2u);
          dword_4E17B8 = 0;
          sub_432890("Shutdown's canceled.");
        }
        goto LABEL_22;
      }
      if ( dword_4E17B8 )
      {
        sub_432860("[Shutdown] Shutdown's already started. (%d min. remains)", dword_4E17B8 / 60000);
LABEL_22:
        EndDialog(hDlg, 1);
        return 1;
      }
      dword_4E17B8 = 60000 * v9;
      SetTimer(hWnd, 2u, 0x2710u, 0);
      sub_432890("Shutdown's started. (%d min. remains)", v9);
    }
    if ( String )
    {
      CPlayer::WriteAll(a1, (DWORD)&v14, a2, 15, (unsigned int)"s");
      if ( dword_4E35B8 == 1 )
        sub_432890("[GM Command] Notice from Main : %s", &String);
    }
    goto LABEL_22;
  }
  if ( (unsigned __int16)a5 == 2 )
  {
    EndDialog(hDlg, 0);
    return 1;
  }
  if ( (unsigned __int16)a5 == 1003 )
  {
    if ( !v16 )
    {
      v7 = IsDlgButtonChecked(hDlg, 1003);
      v8 = GetDlgItem(hDlg, 1002);
      EnableWindow(v8, v7);
    }
  }
  return 0;
}
// 4D9830: using guessed type int dword_4D9830;
// 4E17B8: using guessed type int dword_4E17B8;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00435130) --------------------------------------------------------
signed int __stdcall sub_435130(HWND hDlg, int a2, unsigned __int16 a3, int a4)
{
  signed int result; // eax@4

  if ( a2 == 272 )
  {
    SetDlgItemInt(hDlg, 1004, uValue, 1);
    result = 1;
  }
  else
  {
    if ( a2 == 273 && a3 == 1 )
    {
      uValue = GetDlgItemInt(hDlg, 1004, 0, 0);
      EndDialog(hDlg, 1);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (004351C0) --------------------------------------------------------
int __userpurge sub_4351C0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v4; // ST1C_4@1
  int v5; // eax@1
  int v6; // eax@1
  int v7; // eax@1
  int v9; // edx@3
  int v10; // ecx@3
  int v11; // ST1C_4@7
  int v12; // ST18_4@7
  int v13; // eax@7
  int v14; // edx@7
  char v15; // cl@7
  char v16; // [sp+0h] [bp-1F8h]@1
  char v17; // [sp+1Ch] [bp-1DCh]@1
  int i; // [sp+38h] [bp-1C0h]@18
  char v19[4]; // [sp+3Ch] [bp-1BCh]@21
  char v20[16]; // [sp+40h] [bp-1B8h]@20
  char v21[4]; // [sp+50h] [bp-1A8h]@14
  char v22[4]; // [sp+54h] [bp-1A4h]@3
  struct tm *v23; // [sp+58h] [bp-1A0h]@27
  time_t v24; // [sp+5Ch] [bp-19Ch]@27
  struct WSAData WSAData; // [sp+60h] [bp-198h]@3
  int v26; // [sp+1F4h] [bp-4h]@1

  v26 = dword_4D9830;
  CIOException::Disable();
  v4 = (int)sub_497C20(&v16);
  v5 = sub_40FD10(&v17, "Global\\");
  v6 = sub_4355E0((void *)v5, v4);
  v7 = sub_4012D0((void *)v6);
  CreateMutexA(0, 0, (LPCSTR)v7);
  sub_40F780((int)&v17);
  sub_40F780((int)&v16);
  if ( GetLastError() )
  {
    sub_432860("Another Server is running");
    return 0;
  }
  sub_432890("Server started");
  *(_DWORD *)v22 = WSAStartup(0x202u, &WSAData);
  if ( *(_DWORD *)v22 )
  {
    sub_4328C0("WSAStartup error 0x%x", *(_DWORD *)v22);
    return 0;
  }
  if ( !CMainConfig::Open(v10, v9) )
    return 0;
  sub_496BE0();
  v11 = sub_4012D0(&unk_4E123C);
  v12 = sub_4012D0(&unk_4E1220);
  v13 = sub_4012D0(&unk_4E1204);
  CIOException::Open((char *)v13, v12, v11);
  CIOSocket::CreateIOThread(v15, v14, a1, a2, a3, *(int *)dword_4E1190);
  if ( !CDBSocket::Start(a1, a2, a3) )
    return 0;
  if ( !CAuthSocket::Start(a1, a2, a3) )
    return 0;
  if ( !sub_44BEF0() )
    return 0;
  CCalendar::Start(a1, a2, a3);
  sub_47E5F0(a1, a2, a3);
  CPlayer::Start(a1, a2, a3);
  CMonster::Start(a1, a2, a3);
  CNPC::Start(a1, a2, a3);
  CCastle::Start(a1, a2, a3);
  CWar::Start(a1, a2, a3);
  if ( *(_WORD *)dword_4E1174 & 0x2000 )
  {
    *(_DWORD *)v21 = AntiCpSvr_Initialize(*(_WORD *)dword_4E1174 & 0x2000, "Config\\HackShield.crc");
    if ( *(_DWORD *)v21 )
    {
      sub_4328C0("_AntiCpSvr_Initialize() is Failed.  ErrorType(%d)", *(_DWORD *)v21);
      return 0;
    }
    sub_432860(" HackShield Initialized");
  }
  if ( *(_WORD *)dword_4E1174 & 0x4000 )
  {
    for ( i = 0; i < 16; ++i )
      v20[i] = sub_406E10(0, 63);
    memcpy(&unk_4E1358, v20, 0x10u);
    *(_DWORD *)v19 = sub_497CE0((int)&unk_4E1358);
    if ( *(_DWORD *)v19 )
    {
      sub_4328C0("_HsCrypt_InitCrypt() is Failed.  ErrorType(%d)", *(_DWORD *)v19);
      return 0;
    }
    sub_432860(" InitCrypt is done");
  }
  if ( *(_DWORD *)dword_4E1160 )
  {
    uValue = *(_DWORD *)dword_4E1160;
    sub_432890("Seed is %d", *(_DWORD *)dword_4E1160);
  }
  else
  {
    uValue = 3793;
  }
  v24 = dword_4E117C + 32400;
  v23 = gmtime(&v24);
  sub_432890(
    "Server is ready on port %d (time stamp: %02d/%02d/%02d %02d:%02d:%02d (KR))",
    *(_DWORD *)&dword_4E1170,
    v23->tm_year % 100,
    v23->tm_mon + 1,
    v23->tm_mday,
    v23->tm_hour,
    v23->tm_min,
    v23->tm_sec);
  CLog::Flush(a1, a2, a3);
  CIOException::Enable();
  CIOSocket::WaitThread(a1, a2, a3, 0);
  return 0;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4B4014: using guessed type int __thiscall AntiCpSvr_Initialize(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;
// 4E117C: using guessed type int dword_4E117C;
// 4351C0: using guessed type char var_1B8[16];

//----- (00435500) --------------------------------------------------------
int __userpurge sub_435500<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  sub_432890("Shutdown started");
  CAlliance::Stop(a1, a2, a3);
  CCastle::Stop(a1, a2, a3);
  CGuild::Stop(a1, a2, a3);
  CLog::Flush(a1, a2, a3);
  CNPC::Stop(a1, a2, a3);
  CMonster::Stop(a1, a2, a3);
  _initp_misc_winxfltr();
  sub_47E720(a1, a2, a3);
  while ( sub_47E700() )
    Sleep(0x1Eu);
  Sleep(0x3E8u);
  __setargv();
  CObjectDB::Close(a1, a2, a3);
  sub_491040(a1, a2, a3);
  CAuthSocket::Stop(a1, a2, a3);
  CDBSocket::Stop(a1, a2, a3);
  CIOSocket::CloseIOThread();
  WaitForSingleObject(dword_4E1280, 0xFFFFFFFFu);
  CMainConfig::Close();
  if ( *(_WORD *)dword_4E1174 & 0x2000 )
  {
    AntiCpSvr_Finalize(*(_WORD *)dword_4E1174 & 0x2000);
    sub_432860(" HackShield Finalized");
  }
  sub_432890("Shutdown completed");
  if ( a4 )
    PostMessageA(hWnd, 0x10u, 0, 0);
  return 0;
}
// 40A720: using guessed type int __setargv(void);
// 4B4010: using guessed type int __thiscall AntiCpSvr_Finalize(_DWORD);

//----- (004355E0) --------------------------------------------------------
int __thiscall sub_4355E0(void *this, int a2)
{
  return sub_435600(this, a2, 0, -1);
}

//----- (00435600) --------------------------------------------------------
int __thiscall sub_435600(void *this, int a2, unsigned int a3, int a4)
{
  int v4; // eax@9
  int v5; // eax@9
  void *v6; // ST04_4@9
  size_t v7; // ST08_4@9
  int v9; // [sp+0h] [bp-8h]@1
  int v10; // [sp+4h] [bp-4h]@3
  int v11; // [sp+4h] [bp-4h]@8

  v9 = (int)this;
  if ( unknown_libname_4(a2) < a3 )
    sub_49F1EE();
  v10 = unknown_libname_4(a2) - a3;
  if ( v10 < (unsigned int)a4 )
    a4 = v10;
  if ( -1 - *(_DWORD *)(v9 + 20) <= (unsigned int)a4 )
    sub_49F289();
  if ( a4 )
  {
    v11 = a4 + *(_DWORD *)(v9 + 20);
    if ( sub_40FA20((void *)v9, v11, 0) )
    {
      v4 = unknown_libname_1(a4);
      v5 = unknown_libname_1(a3 + v4);
      std__char_traits_char___copy((void *)(*(_DWORD *)(v9 + 20) + v5), v6, v7);
      sub_40F9D0(v9, v11);
    }
  }
  return v9;
}
// 4012F0: using guessed type int __cdecl unknown_libname_1(_DWORD);
// 40F880: using guessed type int __thiscall unknown_libname_4(_DWORD);

//----- (004356C0) --------------------------------------------------------
void *__thiscall CMemory::CInit::CInit(void *this)
{
  int v2; // [sp+0h] [bp-10h]@4
  void *v3; // [sp+4h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-8h]@3
  signed int i; // [sp+Ch] [bp-4h]@1

  v3 = this;
  for ( i = 0; i < 16; ++i )
  {
    v4 = (int)CNoMemoryObject::operator_new(0x38u);
    if ( v4 )
      v2 = CMemory::CMemory(v4);
    else
      v2 = 0;
    dword_4E17C8[i] = v2;
  }
  return v3;
}
// 4E17C8: using guessed type int dword_4E17C8[];

//----- (00435720) --------------------------------------------------------
int __thiscall CMemory::CMemory(int this)
{
  int v2; // ST04_4@1

  v2 = this;
  InitializeCriticalSection((LPCRITICAL_SECTION)(this + 32));
  *(_DWORD *)(v2 + 28) = 0;
  CMemory::_heap_init((void *)v2);
  return v2;
}

//----- (00435750) --------------------------------------------------------
signed int __thiscall CMemory::_heap_init(void *this)
{
  signed int result; // eax@2
  void *v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  *(_DWORD *)this = HeapCreate(1u, 0x10000u, 0);
  if ( *(_DWORD *)v2 )
  {
    if ( CMemory::::sbh_heap_init((int)v2, 1016) )
    {
      result = 1;
    }
    else
    {
      HeapDestroy(*(HANDLE *)v2);
      *(_DWORD *)v2 = 0;
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004357B0) --------------------------------------------------------
signed int __thiscall CMemory::::sbh_heap_init(int this, int a2)
{
  signed int result; // eax@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 8) = HeapAlloc(*(HANDLE *)this, 0, 0x140u);
  if ( *(_DWORD *)(v3 + 8) )
  {
    *(_DWORD *)(v3 + 4) = a2;
    *(_DWORD *)(v3 + 12) = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 24) = 0;
    *(_DWORD *)(v3 + 20) = 0;
    *(_DWORD *)(v3 + 16) = 16;
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00435820) --------------------------------------------------------
void *__cdecl CMemory::_malloc(size_t a1)
{
  int v2; // [sp+0h] [bp-8h]@1
  void *v3; // [sp+4h] [bp-4h]@1

  v2 = dword_4E17C8[InterlockedIncrement(&dword_4E17C0) & 0xF];
  v3 = CMemory::_heap_alloc_base(v2, a1 + 4);
  if ( v3 )
  {
    *(_DWORD *)v3 = v2;
    v3 = (char *)v3 + 4;
    memset(v3, 252, a1);
  }
  return v3;
}
// 4E17C8: using guessed type int dword_4E17C8[];

//----- (00435890) --------------------------------------------------------
void *__thiscall CMemory::_heap_alloc_base(int this, int dwBytes)
{
  void *result; // eax@3
  LPVOID v3; // ST10_4@4
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@2

  v4 = this;
  if ( (unsigned int)dwBytes <= *(_DWORD *)(this + 4)
    && (CMemory::_mlock(this), v5 = CMemory::::sbh_alloc_block(v4, dwBytes), CMemory::_munlock(v4), v5) )
  {
    result = (void *)v5;
  }
  else
  {
    CMemory::_mlock(v4);
    v3 = HeapAlloc(*(HANDLE *)v4, 0, (dwBytes + 15) & 0xFFFFFFF0);
    CMemory::_munlock(v4);
    result = v3;
  }
  return result;
}

//----- (00435910) --------------------------------------------------------
int __thiscall CMemory::::sbh_alloc_block(int this, int a2)
{
  int result; // eax@28
  int v3; // ST24_4@51
  int v4; // eax@53
  int v5; // eax@56
  int v6; // eax@61
  int v7; // [sp+4h] [bp-3Ch]@1
  int v8; // [sp+8h] [bp-38h]@1
  int v9; // [sp+Ch] [bp-34h]@1
  signed int v10; // [sp+Ch] [bp-34h]@36
  unsigned int v11; // [sp+10h] [bp-30h]@2
  signed int v12; // [sp+14h] [bp-2Ch]@40
  int v13; // [sp+18h] [bp-28h]@31
  int v14; // [sp+1Ch] [bp-24h]@36
  int i; // [sp+24h] [bp-1Ch]@4
  unsigned int v16; // [sp+28h] [bp-18h]@2
  int j; // [sp+2Ch] [bp-14h]@31
  int v18; // [sp+30h] [bp-10h]@40
  int v19; // [sp+34h] [bp-Ch]@1
  int v20; // [sp+38h] [bp-8h]@40
  int v21; // [sp+38h] [bp-8h]@61
  int v22; // [sp+3Ch] [bp-4h]@36

  v7 = this;
  v19 = *(_DWORD *)(this + 8) + 20 * *(_DWORD *)(this + 20);
  v8 = (a2 + 23) & 0xFFFFFFF0;
  v9 = (((a2 + 23) & 0xFFFFFFF0) >> 4) - 1;
  if ( v9 >= 32 )
  {
    v16 = 0;
    v11 = 0xFFFFFFFFu >> (v9 - 32);
  }
  else
  {
    v16 = 0xFFFFFFFFu >> v9;
    v11 = -1;
  }
  for ( i = *(_DWORD *)(this + 12); i < (unsigned int)v19 && !(*(_DWORD *)(i + 4) & v11 | *(_DWORD *)i & v16); i += 20 )
    ;
  if ( i != v19 )
    goto LABEL_68;
  for ( i = *(_DWORD *)(this + 8);
        (unsigned int)i < *(_DWORD *)(this + 12) && !(*(_DWORD *)(i + 4) & v11 | *(_DWORD *)i & v16);
        i += 20 )
    ;
  if ( i != *(_DWORD *)(this + 12) )
    goto LABEL_68;
  while ( i < (unsigned int)v19 && !*(_DWORD *)(i + 8) )
    i += 20;
  if ( i == v19 )
  {
    for ( i = *(_DWORD *)(this + 8); (unsigned int)i < *(_DWORD *)(this + 12) && !*(_DWORD *)(i + 8); i += 20 )
      ;
    if ( i == *(_DWORD *)(this + 12) )
    {
      i = CMemory::::sbh_alloc_new_region(this);
      if ( !i )
        return 0;
    }
  }
  **(_DWORD **)(i + 16) = CMemory::::sbh_alloc_new_group(i);
  if ( **(_DWORD **)(i + 16) != -1 )
  {
LABEL_68:
    *(_DWORD *)(v7 + 12) = i;
    v13 = *(_DWORD *)(i + 16);
    j = *(_DWORD *)v13;
    if ( *(_DWORD *)v13 == -1 || !(*(_DWORD *)(v13 + 4 * j + 196) & v11 | *(_DWORD *)(v13 + 4 * j + 68) & v16) )
    {
      for ( j = 0; !(*(_DWORD *)(v13 + 4 * j + 196) & v11 | *(_DWORD *)(v13 + 4 * j + 68) & v16); ++j )
        ;
    }
    v14 = v13 + 516 * j + 324;
    v10 = 0;
    v22 = *(_DWORD *)(v13 + 4 * j + 68) & v16;
    if ( !(*(_DWORD *)(v13 + 4 * j + 68) & v16) )
    {
      v10 = 32;
      v22 = *(_DWORD *)(v13 + 4 * j + 196) & v11;
    }
    while ( v22 >= 0 )
    {
      v22 *= 2;
      ++v10;
    }
    v20 = *(_DWORD *)(v14 + 8 * v10 + 4);
    v12 = *(_DWORD *)v20 - v8;
    v18 = (v12 >> 4) - 1;
    if ( v18 > 63 )
      v18 = 63;
    if ( v18 != v10 )
    {
      if ( *(_DWORD *)(v20 + 4) == *(_DWORD *)(v20 + 8) )
      {
        if ( v10 >= 32 )
        {
          *(_DWORD *)(v13 + 4 * j + 196) &= ~(0x80000000u >> (v10 - 32));
          --*(_BYTE *)(v10 + v13 + 4);
          if ( !*(_BYTE *)(v10 + v13 + 4) )
            *(_DWORD *)(i + 4) &= ~(0x80000000u >> (v10 - 32));
        }
        else
        {
          *(_DWORD *)(v13 + 4 * j + 68) &= ~(0x80000000u >> v10);
          --*(_BYTE *)(v10 + v13 + 4);
          if ( !*(_BYTE *)(v10 + v13 + 4) )
            *(_DWORD *)i &= ~(0x80000000u >> v10);
        }
      }
      *(_DWORD *)(*(_DWORD *)(v20 + 8) + 4) = *(_DWORD *)(v20 + 4);
      *(_DWORD *)(*(_DWORD *)(v20 + 4) + 8) = *(_DWORD *)(v20 + 8);
      if ( v12 )
      {
        v3 = v14 + 8 * v18;
        *(_DWORD *)(v20 + 4) = *(_DWORD *)(v14 + 8 * v18 + 4);
        *(_DWORD *)(v20 + 8) = v3;
        *(_DWORD *)(v3 + 4) = v20;
        *(_DWORD *)(*(_DWORD *)(v20 + 4) + 8) = v20;
        if ( *(_DWORD *)(v20 + 4) == *(_DWORD *)(v20 + 8) )
        {
          if ( v18 >= 32 )
          {
            v5 = *(_BYTE *)(v18 + v13 + 4)++;
            if ( !v5 )
              *(_DWORD *)(i + 4) |= 0x80000000u >> (v18 - 32);
            *(_DWORD *)(v13 + 4 * j + 196) |= 0x80000000u >> (v18 - 32);
          }
          else
          {
            v4 = *(_BYTE *)(v18 + v13 + 4)++;
            if ( !v4 )
              *(_DWORD *)i |= 0x80000000u >> v18;
            *(_DWORD *)(v13 + 4 * j + 68) |= 0x80000000u >> v18;
          }
        }
      }
    }
    if ( v12 )
    {
      *(_DWORD *)v20 = v12;
      *(_DWORD *)(v12 + v20 - 4) = v12;
    }
    v21 = v12 + v20;
    *(_DWORD *)v21 = v8 + 1;
    *(_DWORD *)(v8 + v21 - 4) = v8 + 1;
    v6 = *(_DWORD *)v14++;
    if ( !v6 )
    {
      if ( i == *(_DWORD *)(v7 + 24) )
      {
        if ( j == *(_DWORD *)(v7 + 28) )
          *(_DWORD *)(v7 + 24) = 0;
      }
    }
    *(_DWORD *)v13 = j;
    result = v21 + 4;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00435E40) --------------------------------------------------------
int __thiscall CMemory::::sbh_alloc_new_region(int this)
{
  int result; // eax@3
  int v2; // [sp+0h] [bp-8h]@1
  LPVOID v3; // [sp+4h] [bp-4h]@2
  int v4; // [sp+4h] [bp-4h]@5

  v2 = this;
  if ( *(_DWORD *)(this + 20) == *(_DWORD *)(this + 16) )
  {
    v3 = HeapReAlloc(*(HANDLE *)this, 0, *(LPVOID *)(this + 8), 20 * (*(_DWORD *)(this + 16) + 16));
    if ( !v3 )
      return 0;
    *(_DWORD *)(v2 + 8) = v3;
    *(_DWORD *)(v2 + 16) += 16;
  }
  v4 = *(_DWORD *)(v2 + 8) + 20 * *(_DWORD *)(v2 + 20);
  *(_DWORD *)(v4 + 16) = HeapAlloc(*(HANDLE *)v2, 8u, 0x41C4u);
  if ( *(_DWORD *)(v4 + 16) )
  {
    *(_DWORD *)(v4 + 12) = VirtualAlloc(0, 0x1000000u, 0x2000u, 4u);
    if ( *(_DWORD *)(v4 + 12) )
    {
      *(_DWORD *)v4 = 0;
      *(_DWORD *)(v4 + 4) = 0;
      *(_DWORD *)(v4 + 8) = -1;
      ++*(_DWORD *)(v2 + 20);
      **(_DWORD **)(v4 + 16) = -1;
      result = v4;
    }
    else
    {
      HeapFree(*(HANDLE *)v2, 0, *(LPVOID *)(v4 + 16));
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00435F60) --------------------------------------------------------
signed int __stdcall CMemory::::sbh_alloc_new_group(int a1)
{
  signed int result; // eax@8
  int v2; // ecx@12
  int v3; // [sp+4h] [bp-2Ch]@1
  signed int v4; // [sp+8h] [bp-28h]@1
  int v5; // [sp+10h] [bp-20h]@1
  int v6; // [sp+14h] [bp-1Ch]@4
  signed int i; // [sp+1Ch] [bp-14h]@4
  unsigned int j; // [sp+20h] [bp-10h]@9
  int v9; // [sp+24h] [bp-Ch]@7

  v5 = *(_DWORD *)(a1 + 16);
  v3 = *(_DWORD *)(a1 + 8);
  v4 = 0;
  while ( v3 >= 0 )
  {
    v3 *= 2;
    ++v4;
  }
  v6 = v5 + 516 * v4 + 324;
  for ( i = 0; i < 63; ++i )
  {
    *(_DWORD *)(v6 + 8 * i + 8) = v6 + 8 * i;
    *(_DWORD *)(v6 + 8 * i + 4) = v6 + 8 * i;
  }
  v9 = *(_DWORD *)(a1 + 12) + (v4 << 19);
  if ( VirtualAlloc((LPVOID)(*(_DWORD *)(a1 + 12) + (v4 << 19)), 0x80000u, 0x1000u, 4u) )
  {
    for ( j = v9; j <= v9 + 458752; j += 65536 )
    {
      *(_DWORD *)(j + 8) = -1;
      *(_DWORD *)(j + 65532) = -1;
      *(_DWORD *)(j + 12) = 65520;
      *(_DWORD *)(j + 16) = j + 65548;
      *(_DWORD *)(j + 20) = j - 65524;
      *(_DWORD *)(j + 65528) = 65520;
    }
    *(_DWORD *)(v5 + 516 * v4 + 832) = v9 + 12;
    *(_DWORD *)(*(_DWORD *)(v5 + 516 * v4 + 832) + 8) = v5 + 516 * v4 + 828;
    *(_DWORD *)(v5 + 516 * v4 + 836) = v9 + 458764;
    *(_DWORD *)(*(_DWORD *)(v5 + 516 * v4 + 836) + 4) = v5 + 516 * v4 + 828;
    *(_DWORD *)(v5 + 4 * v4 + 68) = 0;
    *(_DWORD *)(v5 + 4 * v4 + 196) = 1;
    v2 = *(_BYTE *)(v5 + 67)++;
    if ( !v2 )
      *(_DWORD *)(a1 + 4) |= 1u;
    *(_DWORD *)(a1 + 8) &= ~(0x80000000u >> v4);
    result = v4;
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (00436150) --------------------------------------------------------
void __cdecl CMemory::_free(int a1)
{
  int v1; // ST04_4@3

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 - 4);
    *(_DWORD *)(a1 - 4) = 0;
    CMemory::_free_base(v1, (void *)(a1 - 4));
  }
}

//----- (00436190) --------------------------------------------------------
void __thiscall CMemory::_free_base(int this, void *lpMem)
{
  SIZE_T v2; // ST10_4@3
  int v3; // [sp+0h] [bp-10h]@1
  unsigned int v4; // [sp+Ch] [bp-4h]@1

  v3 = this;
  CMemory::_mlock(this);
  v4 = CMemory::::sbh_find_block(v3, (int)lpMem);
  if ( v4 )
  {
    memset(lpMem, 253, *((_DWORD *)lpMem - 1) - 9);
    CMemory::::sbh_free_block(v3, v4, (int)lpMem);
  }
  else
  {
    v2 = HeapSize(*(HANDLE *)v3, 0, lpMem);
    memset(lpMem, 253, v2);
    HeapFree(*(HANDLE *)v3, 0, lpMem);
  }
  CMemory::_munlock(v3);
}

//----- (00436240) --------------------------------------------------------
unsigned int __thiscall CMemory::::sbh_find_block(int this, int a2)
{
  unsigned int i; // [sp+8h] [bp-8h]@1

  for ( i = *(_DWORD *)(this + 8); i < *(_DWORD *)(this + 8) + 20 * *(_DWORD *)(this + 20); i += 20 )
  {
    if ( (unsigned int)(a2 - *(_DWORD *)(i + 12)) < 0x1000000 )
      return i;
  }
  return 0;
}

//----- (004362A0) --------------------------------------------------------
int __thiscall CMemory::::sbh_free_block(int this, unsigned int a2, int a3)
{
  int result; // eax@1
  int v4; // ST2C_4@33
  int v5; // eax@35
  int v6; // eax@38
  int v7; // [sp+4h] [bp-40h]@1
  signed int v8; // [sp+8h] [bp-3Ch]@1
  int v9; // [sp+Ch] [bp-38h]@14
  signed int v10; // [sp+10h] [bp-34h]@3
  int v11; // [sp+14h] [bp-30h]@32
  int v12; // [sp+18h] [bp-2Ch]@1
  int v13; // [sp+1Ch] [bp-28h]@1
  signed int v14; // [sp+28h] [bp-1Ch]@3
  int v15; // [sp+2Ch] [bp-18h]@1
  unsigned int v16; // [sp+30h] [bp-14h]@1
  int v17; // [sp+34h] [bp-10h]@4
  int v18; // [sp+38h] [bp-Ch]@17
  int v19; // [sp+3Ch] [bp-8h]@3

  v7 = this;
  v12 = *(_DWORD *)(a2 + 16);
  v16 = (unsigned int)(a3 - *(_DWORD *)(a2 + 12)) >> 19;
  v13 = v12 + 516 * v16 + 324;
  v15 = a3 - 4;
  result = a3 - 4;
  v8 = *(_DWORD *)(a3 - 4) - 1;
  if ( !(v8 & 1) )
  {
    v19 = v8 + v15;
    v10 = *(_DWORD *)(v8 + v15);
    v14 = *(_DWORD *)(a3 - 8);
    if ( !(v10 & 1) )
    {
      v17 = (v10 >> 4) - 1;
      if ( (unsigned int)v17 > 0x3F )
        v17 = 63;
      if ( *(_DWORD *)(v19 + 4) == *(_DWORD *)(v19 + 8) )
      {
        if ( (unsigned int)v17 >= 0x20 )
        {
          *(_DWORD *)(v12 + 4 * v16 + 196) &= ~(0x80000000u >> (v17 - 32));
          --*(_BYTE *)(v17 + v12 + 4);
          if ( !*(_BYTE *)(v17 + v12 + 4) )
            *(_DWORD *)(a2 + 4) &= ~(0x80000000u >> (v17 - 32));
        }
        else
        {
          *(_DWORD *)(v12 + 4 * v16 + 68) &= ~(0x80000000u >> v17);
          --*(_BYTE *)(v17 + v12 + 4);
          if ( !*(_BYTE *)(v17 + v12 + 4) )
            *(_DWORD *)a2 &= ~(0x80000000u >> v17);
        }
      }
      *(_DWORD *)(*(_DWORD *)(v19 + 8) + 4) = *(_DWORD *)(v19 + 4);
      *(_DWORD *)(*(_DWORD *)(v19 + 4) + 8) = *(_DWORD *)(v19 + 8);
      v8 += v10;
    }
    v9 = (v8 >> 4) - 1;
    if ( (unsigned int)v9 > 0x3F )
      v9 = 63;
    if ( !(v14 & 1) )
    {
      v18 = v15 - v14;
      v11 = (v14 >> 4) - 1;
      if ( (unsigned int)v11 > 0x3F )
        v11 = 63;
      v8 += v14;
      v9 = (v8 >> 4) - 1;
      if ( (unsigned int)v9 > 0x3F )
        v9 = 63;
      if ( v11 != v9 )
      {
        if ( *(_DWORD *)(v18 + 4) == *(_DWORD *)(v18 + 8) )
        {
          if ( (unsigned int)v11 >= 0x20 )
          {
            *(_DWORD *)(v12 + 4 * v16 + 196) &= ~(0x80000000u >> (v11 - 32));
            --*(_BYTE *)(v11 + v12 + 4);
            if ( !*(_BYTE *)(v11 + v12 + 4) )
              *(_DWORD *)(a2 + 4) &= ~(0x80000000u >> (v11 - 32));
          }
          else
          {
            *(_DWORD *)(v12 + 4 * v16 + 68) &= ~(0x80000000u >> v11);
            --*(_BYTE *)(v11 + v12 + 4);
            if ( !*(_BYTE *)(v11 + v12 + 4) )
              *(_DWORD *)a2 &= ~(0x80000000u >> v11);
          }
        }
        *(_DWORD *)(*(_DWORD *)(v18 + 8) + 4) = *(_DWORD *)(v18 + 4);
        *(_DWORD *)(*(_DWORD *)(v18 + 4) + 8) = *(_DWORD *)(v18 + 8);
      }
      v15 -= v14;
    }
    if ( v14 & 1 || v11 != v9 )
    {
      v4 = v13 + 8 * v9;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v13 + 8 * v9 + 4);
      *(_DWORD *)(v15 + 8) = v4;
      *(_DWORD *)(v4 + 4) = v15;
      *(_DWORD *)(*(_DWORD *)(v15 + 4) + 8) = v15;
      if ( *(_DWORD *)(v15 + 4) == *(_DWORD *)(v15 + 8) )
      {
        if ( (unsigned int)v9 >= 0x20 )
        {
          v6 = *(_BYTE *)(v9 + v12 + 4)++;
          if ( !v6 )
            *(_DWORD *)(a2 + 4) |= 0x80000000u >> (v9 - 32);
          *(_DWORD *)(v12 + 4 * v16 + 196) |= 0x80000000u >> (v9 - 32);
        }
        else
        {
          v5 = *(_BYTE *)(v9 + v12 + 4)++;
          if ( !v5 )
            *(_DWORD *)a2 |= 0x80000000u >> v9;
          *(_DWORD *)(v12 + 4 * v16 + 68) |= 0x80000000u >> v9;
        }
      }
    }
    *(_DWORD *)v15 = v8;
    *(_DWORD *)(v8 + v15 - 4) = v8;
    --*(_DWORD *)v13;
    result = v12 + 516 * v16 + 324;
    if ( !*(_DWORD *)v13 )
    {
      if ( *(_DWORD *)(this + 24) )
      {
        VirtualFree(
          (LPVOID)(*(_DWORD *)(*(_DWORD *)(this + 24) + 12) + (*(_DWORD *)(this + 28) << 19)),
          0x80000u,
          0x4000u);
        *(_DWORD *)(*(_DWORD *)(v7 + 24) + 8) |= 0x80000000u >> *(_DWORD *)(v7 + 28);
        *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v7 + 24) + 16) + 4 * *(_DWORD *)(v7 + 28) + 196) = 0;
        --*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v7 + 24) + 16) + 67);
        if ( !*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v7 + 24) + 16) + 67) )
          *(_DWORD *)(*(_DWORD *)(v7 + 24) + 4) &= 0xFFFFFFFEu;
        if ( *(_DWORD *)(*(_DWORD *)(v7 + 24) + 8) == -1 )
        {
          VirtualFree(*(LPVOID *)(*(_DWORD *)(v7 + 24) + 12), 0, 0x8000u);
          HeapFree(*(HANDLE *)v7, 0, *(LPVOID *)(*(_DWORD *)(v7 + 24) + 16));
          memcpy_0(
            *(void **)(v7 + 24),
            (const void *)(*(_DWORD *)(v7 + 24) + 20),
            20 * *(_DWORD *)(v7 + 20)-- + *(_DWORD *)(v7 + 8) - (*(_DWORD *)(v7 + 24) + 20));
          if ( a2 > *(_DWORD *)(v7 + 24) )
            a2 -= 20;
          *(_DWORD *)(v7 + 12) = *(_DWORD *)(v7 + 8);
        }
      }
      *(_DWORD *)(v7 + 24) = a2;
      result = v16;
      *(_DWORD *)(v7 + 28) = v16;
    }
  }
  return result;
}

//----- (00436870) --------------------------------------------------------
void *__cdecl CMemory::_realloc(int a1, size_t a2)
{
  void *result; // eax@2
  int v3; // [sp+0h] [bp-8h]@5
  LPVOID v4; // [sp+4h] [bp-4h]@5

  if ( a1 )
  {
    if ( a2 )
    {
      v3 = *(_DWORD *)(a1 - 4);
      *(_DWORD *)(a1 - 4) = 0;
      v4 = CMemory::_realloc_base(v3, a1 - 4, a2 + 4);
      if ( v4 )
      {
        *(_DWORD *)v4 = v3;
        v4 = (char *)v4 + 4;
      }
      result = v4;
    }
    else
    {
      CMemory::_free(a1);
      result = 0;
    }
  }
  else
  {
    result = CMemory::_malloc(a2);
  }
  return result;
}

//----- (00436900) --------------------------------------------------------
void *__thiscall CMemory::_realloc_base(int this, int lpMem, int dwBytes)
{
  void *result; // eax@24
  int v4; // [sp+0h] [bp-18h]@16
  int v5; // [sp+4h] [bp-14h]@8
  int v6; // [sp+8h] [bp-10h]@1
  unsigned int v7; // [sp+Ch] [bp-Ch]@2
  void *v8; // [sp+14h] [bp-4h]@1

  v6 = this;
  v8 = 0;
  if ( (unsigned int)dwBytes <= 0xFFFFFFE0 )
  {
    CMemory::_mlock(this);
    v7 = CMemory::::sbh_find_block(v6, lpMem);
    if ( v7 )
    {
      if ( (unsigned int)dwBytes <= *(_DWORD *)(v6 + 4) )
      {
        if ( CMemory::::sbh_resize_block(v7, lpMem, dwBytes) )
        {
          v8 = (void *)lpMem;
        }
        else
        {
          v8 = (void *)CMemory::::sbh_alloc_block(v6, dwBytes);
          if ( v8 )
          {
            if ( *(_DWORD *)(lpMem - 4) - 9 >= (unsigned int)dwBytes )
              v5 = dwBytes;
            else
              v5 = *(_DWORD *)(lpMem - 4) - 9;
            memcpy(v8, (const void *)lpMem, v5);
            v7 = CMemory::::sbh_find_block(v6, lpMem);
            CMemory::::sbh_free_block(v6, v7, lpMem);
          }
        }
      }
      if ( !v8 )
      {
        if ( !dwBytes )
          dwBytes = 1;
        dwBytes = (dwBytes + 15) & 0xFFFFFFF0;
        v8 = HeapAlloc(*(HANDLE *)v6, 0, dwBytes);
        if ( v8 )
        {
          if ( *(_DWORD *)(lpMem - 4) - 9 >= (unsigned int)dwBytes )
            v4 = dwBytes;
          else
            v4 = *(_DWORD *)(lpMem - 4) - 9;
          memcpy(v8, (const void *)lpMem, v4);
          CMemory::::sbh_free_block(v6, v7, lpMem);
        }
      }
    }
    CMemory::_munlock(v6);
    if ( !v7 )
    {
      if ( !dwBytes )
        dwBytes = 1;
      v8 = HeapReAlloc(*(HANDLE *)v6, 0, (LPVOID)lpMem, (dwBytes + 15) & 0xFFFFFFF0);
    }
  }
  if ( v8 )
    result = v8;
  else
    result = 0;
  return result;
}

//----- (00436AB0) --------------------------------------------------------
signed int __stdcall CMemory::::sbh_resize_block(int a1, int a2, int a3)
{
  int v4; // ST1C_4@17
  int v5; // eax@19
  int v6; // eax@22
  int v7; // ST1C_4@42
  int v8; // edx@44
  int v9; // eax@47
  int v10; // [sp+4h] [bp-30h]@1
  signed int v11; // [sp+4h] [bp-30h]@28
  int v12; // [sp+8h] [bp-2Ch]@28
  signed int v13; // [sp+Ch] [bp-28h]@1
  signed int v14; // [sp+Ch] [bp-28h]@14
  int v15; // [sp+10h] [bp-24h]@1
  int v16; // [sp+14h] [bp-20h]@1
  int v17; // [sp+18h] [bp-1Ch]@1
  int v18; // [sp+24h] [bp-10h]@1
  int v19; // [sp+24h] [bp-10h]@28
  unsigned int v20; // [sp+28h] [bp-Ch]@1
  int v21; // [sp+2Ch] [bp-8h]@5
  int v22; // [sp+2Ch] [bp-8h]@15
  int v23; // [sp+2Ch] [bp-8h]@31
  int v24; // [sp+30h] [bp-4h]@1
  int v25; // [sp+30h] [bp-4h]@15

  v17 = (a3 + 23) & 0xFFFFFFF0;
  v15 = *(_DWORD *)(a1 + 16);
  v20 = (unsigned int)(a2 - *(_DWORD *)(a1 + 12)) >> 19;
  v16 = v15 + 516 * v20 + 324;
  v18 = a2 - 4;
  v10 = *(_DWORD *)(a2 - 4) - 1;
  v24 = v10 + a2 - 4;
  v13 = *(_DWORD *)(v10 + a2 - 4);
  if ( ((a3 + 23) & 0xFFFFFFF0) <= v10 )
  {
    if ( v17 < v10 )
    {
      *(_DWORD *)v18 = v17 + 1;
      *(_DWORD *)(v17 + v18 - 4) = v17 + 1;
      v19 = v17 + v18;
      v11 = v10 - v17;
      v12 = (v11 >> 4) - 1;
      if ( (unsigned int)v12 > 0x3F )
        v12 = 63;
      if ( !(v13 & 1) )
      {
        v23 = (v13 >> 4) - 1;
        if ( (unsigned int)v23 > 0x3F )
          v23 = 63;
        if ( *(_DWORD *)(v24 + 4) == *(_DWORD *)(v24 + 8) )
        {
          if ( (unsigned int)v23 >= 0x20 )
          {
            *(_DWORD *)(v15 + 4 * v20 + 196) &= ~(0x80000000u >> (v23 - 32));
            --*(_BYTE *)(v23 + v15 + 4);
            if ( !*(_BYTE *)(v23 + v15 + 4) )
              *(_DWORD *)(a1 + 4) &= ~(0x80000000u >> (v23 - 32));
          }
          else
          {
            *(_DWORD *)(v15 + 4 * v20 + 68) &= ~(0x80000000u >> v23);
            --*(_BYTE *)(v23 + v15 + 4);
            if ( !*(_BYTE *)(v23 + v15 + 4) )
              *(_DWORD *)a1 &= ~(0x80000000u >> v23);
          }
        }
        *(_DWORD *)(*(_DWORD *)(v24 + 8) + 4) = *(_DWORD *)(v24 + 4);
        *(_DWORD *)(*(_DWORD *)(v24 + 4) + 8) = *(_DWORD *)(v24 + 8);
        v11 += v13;
        v12 = (v11 >> 4) - 1;
        if ( (unsigned int)v12 > 0x3F )
          v12 = 63;
      }
      v7 = v16 + 8 * v12;
      *(_DWORD *)(v19 + 4) = *(_DWORD *)(v16 + 8 * v12 + 4);
      *(_DWORD *)(v19 + 8) = v7;
      *(_DWORD *)(v7 + 4) = v19;
      *(_DWORD *)(*(_DWORD *)(v19 + 4) + 8) = v19;
      if ( *(_DWORD *)(v19 + 4) == *(_DWORD *)(v19 + 8) )
      {
        if ( (unsigned int)v12 >= 0x20 )
        {
          v9 = *(_BYTE *)(v12 + v15 + 4)++;
          if ( !v9 )
            *(_DWORD *)(a1 + 4) |= 0x80000000u >> (v12 - 32);
          *(_DWORD *)(v15 + 4 * v20 + 196) |= 0x80000000u >> (v12 - 32);
        }
        else
        {
          v8 = *(_BYTE *)(v12 + v15 + 4)++;
          if ( !v8 )
            *(_DWORD *)a1 |= 0x80000000u >> v12;
          *(_DWORD *)(v15 + 4 * v20 + 68) |= 0x80000000u >> v12;
        }
      }
      *(_DWORD *)v19 = v11;
      *(_DWORD *)(v11 + v19 - 4) = v11;
    }
  }
  else
  {
    if ( v13 & 1 || v17 > v13 + v10 )
      return 0;
    v21 = (v13 >> 4) - 1;
    if ( (unsigned int)v21 > 0x3F )
      v21 = 63;
    if ( *(_DWORD *)(v24 + 4) == *(_DWORD *)(v24 + 8) )
    {
      if ( (unsigned int)v21 >= 0x20 )
      {
        *(_DWORD *)(v15 + 4 * v20 + 196) &= ~(0x80000000u >> (v21 - 32));
        --*(_BYTE *)(v21 + v15 + 4);
        if ( !*(_BYTE *)(v21 + v15 + 4) )
          *(_DWORD *)(a1 + 4) &= ~(0x80000000u >> (v21 - 32));
      }
      else
      {
        *(_DWORD *)(v15 + 4 * v20 + 68) &= ~(0x80000000u >> v21);
        --*(_BYTE *)(v21 + v15 + 4);
        if ( !*(_BYTE *)(v21 + v15 + 4) )
          *(_DWORD *)a1 &= ~(0x80000000u >> v21);
      }
    }
    *(_DWORD *)(*(_DWORD *)(v24 + 8) + 4) = *(_DWORD *)(v24 + 4);
    *(_DWORD *)(*(_DWORD *)(v24 + 4) + 8) = *(_DWORD *)(v24 + 8);
    v14 = v13 + v10 - v17;
    if ( v14 > 0 )
    {
      v25 = v17 + v18;
      v22 = (v14 >> 4) - 1;
      if ( (unsigned int)v22 > 0x3F )
        v22 = 63;
      v4 = v16 + 8 * v22;
      *(_DWORD *)(v25 + 4) = *(_DWORD *)(v16 + 8 * v22 + 4);
      *(_DWORD *)(v25 + 8) = v4;
      *(_DWORD *)(v4 + 4) = v25;
      *(_DWORD *)(*(_DWORD *)(v25 + 4) + 8) = v25;
      if ( *(_DWORD *)(v25 + 4) == *(_DWORD *)(v25 + 8) )
      {
        if ( (unsigned int)v22 >= 0x20 )
        {
          v6 = *(_BYTE *)(v22 + v15 + 4)++;
          if ( !v6 )
            *(_DWORD *)(a1 + 4) |= 0x80000000u >> (v22 - 32);
          *(_DWORD *)(v15 + 4 * v20 + 196) |= 0x80000000u >> (v22 - 32);
        }
        else
        {
          v5 = *(_BYTE *)(v22 + v15 + 4)++;
          if ( !v5 )
            *(_DWORD *)a1 |= 0x80000000u >> v22;
          *(_DWORD *)(v15 + 4 * v20 + 68) |= 0x80000000u >> v22;
        }
      }
      *(_DWORD *)v25 = v14;
      *(_DWORD *)(v14 + v25 - 4) = v14;
    }
    *(_DWORD *)v18 = v17 + 1;
    *(_DWORD *)(v17 + v18 - 4) = v17 + 1;
  }
  return 1;
}

//----- (00437080) --------------------------------------------------------
void *__cdecl CNoMemoryObject::operator_new(size_t a1)
{
  return malloc(a1);
}

//----- (004370A0) --------------------------------------------------------
void __thiscall CMemory::_mlock(int this)
{
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 32));
}

//----- (004370C0) --------------------------------------------------------
void __thiscall CMemory::_munlock(int this)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(this + 32));
}

//----- (004370E0) --------------------------------------------------------
int __stdcall sub_4370E0(int a1, int a2, int a3, int (__thiscall *a4)(_DWORD))
{
  int result; // eax@1
  char v5; // sf@2
  int i; // [sp+8h] [bp+8h]@1

  result = a1 + a3 * a2;
  for ( i = a1 + a3 * a2; ; result = a4(i) )
  {
    v5 = a3-- - 1 < 0;
    if ( v5 )
      break;
    i -= a2;
  }
  return result;
}

//----- (00437110) --------------------------------------------------------
int __thiscall CInitMonster::CInitMonster(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B7CE0;
  sub_425850((void *)(v2 + 272));
  sub_4707A0((void *)(v2 + 288));
  memset((void *)(v2 + 32), 0, 0x19u);
  *(_DWORD *)(v2 + 60) = 0;
  *(_DWORD *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  memset((void *)(v2 + 76), 0, 0x1Cu);
  memset((void *)(v2 + 96), 0, 0x60u);
  *(_DWORD *)(v2 + 116) = 0;
  *(_DWORD *)(v2 + 120) = 0;
  *(_DWORD *)(v2 + 128) = 0;
  *(_DWORD *)(v2 + 124) = 0;
  *(_DWORD *)(v2 + 132) = 0;
  memset((void *)(v2 + 136), 0, 0x1Cu);
  memset((void *)(v2 + 164), 0, 0x60u);
  *(_DWORD *)(v2 + 264) = 0;
  *(_DWORD *)(v2 + 260) = 0;
  *(_DWORD *)(v2 + 268) = 0;
  *(_DWORD *)(v2 + 312) = 0;
  *(_DWORD *)(v2 + 308) = 0;
  return v2;
}
// 4B7CE0: using guessed type int (__stdcall *off_4B7CE0)(int);

//----- (00437260) --------------------------------------------------------
int __userpurge CInitMonster::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CInitMonster::_CInitMonster(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00437290) --------------------------------------------------------
int __usercall CInitMonster::_CInitMonster<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4B7CE0;
  sub_445BF0(a1 + 288);
  sub_445B20(v5 + 272);
  return CBase::_CBase(v5, a2, a3, a4);
}
// 4B7CE0: using guessed type int (__stdcall *off_4B7CE0)(int);

//----- (004372D0) --------------------------------------------------------
int __cdecl CInitMonster::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0x14Cu);
  if ( v2 )
    v1 = CInitMonster::CInitMonster(v2);
  else
    v1 = 0;
  return v1;
}

//----- (00437310) --------------------------------------------------------
signed int __thiscall CInitMonster::Set(void *this, int a2, char a3)
{
  void *v3; // eax@2
  int v4; // eax@2
  signed int result; // eax@5
  void *v6; // eax@7
  void *v7; // eax@8
  void *v8; // eax@9
  void *v9; // eax@10
  void *v10; // eax@13
  void *v11; // eax@13
  void *v12; // eax@14
  void *v13; // eax@15
  void *v14; // eax@15
  void *v15; // eax@16
  void *v16; // eax@17
  void *v17; // eax@18
  void *v18; // eax@19
  void *v19; // eax@20
  void *v20; // eax@21
  void *v21; // eax@22
  void *v22; // eax@23
  void *v23; // eax@24
  void *v24; // eax@25
  void *v25; // eax@26
  void *v26; // eax@26
  void *v27; // eax@26
  void *v28; // eax@27
  void *v29; // eax@27
  void *v30; // eax@28
  void *v31; // eax@28
  void *v32; // eax@29
  void *v33; // eax@30
  void *v34; // eax@31
  void *v35; // eax@31
  void *v36; // eax@34
  int v37; // eax@34
  void *v38; // eax@37
  void *v39; // eax@37
  int v40; // eax@37
  void *v41; // eax@37
  void *v42; // eax@37
  void *v43; // eax@40
  void *v44; // eax@40
  void *v45; // eax@43
  void *v46; // eax@45
  void *v47; // eax@45
  void *v48; // eax@46
  void *v49; // eax@46
  void *v50; // eax@46
  void *v51; // eax@46
  int v52; // [sp-4h] [bp-ECh]@47
  int v53; // [sp+4h] [bp-E4h]@1
  void *v54; // [sp+8h] [bp-E0h]@1
  char v55; // [sp+10h] [bp-D8h]@46
  char v56; // [sp+14h] [bp-D4h]@46
  char v57; // [sp+18h] [bp-D0h]@46
  char v58; // [sp+1Ch] [bp-CCh]@46
  char v59; // [sp+20h] [bp-C8h]@45
  char v60; // [sp+24h] [bp-C4h]@45
  char v61; // [sp+28h] [bp-C0h]@43
  char v62; // [sp+2Ch] [bp-BCh]@40
  char v63; // [sp+30h] [bp-B8h]@40
  char v64; // [sp+34h] [bp-B4h]@37
  char v65; // [sp+38h] [bp-B0h]@37
  char v66; // [sp+3Ch] [bp-ACh]@37
  char v67; // [sp+40h] [bp-A8h]@37
  char v68; // [sp+44h] [bp-A4h]@34
  char v69; // [sp+48h] [bp-A0h]@31
  char v70; // [sp+4Ch] [bp-9Ch]@31
  char v71; // [sp+50h] [bp-98h]@30
  char v72; // [sp+54h] [bp-94h]@29
  char v73; // [sp+58h] [bp-90h]@28
  char v74; // [sp+5Ch] [bp-8Ch]@28
  char v75; // [sp+60h] [bp-88h]@27
  char v76; // [sp+64h] [bp-84h]@27
  char v77; // [sp+68h] [bp-80h]@26
  char v78; // [sp+6Ch] [bp-7Ch]@26
  char v79; // [sp+70h] [bp-78h]@26
  char v80; // [sp+74h] [bp-74h]@25
  char v81; // [sp+78h] [bp-70h]@24
  char v82; // [sp+7Ch] [bp-6Ch]@23
  char v83; // [sp+80h] [bp-68h]@22
  char v84; // [sp+84h] [bp-64h]@21
  char v85; // [sp+88h] [bp-60h]@20
  char v86; // [sp+8Ch] [bp-5Ch]@19
  char v87; // [sp+90h] [bp-58h]@18
  char v88; // [sp+94h] [bp-54h]@17
  char v89; // [sp+98h] [bp-50h]@16
  char v90; // [sp+9Ch] [bp-4Ch]@15
  char v91; // [sp+A0h] [bp-48h]@15
  char v92; // [sp+A4h] [bp-44h]@14
  char v93; // [sp+A8h] [bp-40h]@13
  char v94; // [sp+ACh] [bp-3Ch]@13
  char v95; // [sp+B0h] [bp-38h]@10
  char v96; // [sp+B4h] [bp-34h]@9
  char v97; // [sp+B8h] [bp-30h]@8
  char v98; // [sp+BCh] [bp-2Ch]@7
  char v99; // [sp+C0h] [bp-28h]@2
  int v100; // [sp+C4h] [bp-24h]@40
  int v101; // [sp+C8h] [bp-20h]@40
  char v102; // [sp+CCh] [bp-1Ch]@40
  int v103; // [sp+D0h] [bp-18h]@37
  int v104; // [sp+D4h] [bp-14h]@37
  int v105; // [sp+D8h] [bp-10h]@37
  char v106; // [sp+DCh] [bp-Ch]@37
  int v107; // [sp+E0h] [bp-8h]@32
  char *v108; // [sp+E4h] [bp-4h]@2

  v54 = this;
  v53 = a2 - 1;
  switch ( a2 )
  {
    case 1:
      v3 = sub_4023A0(&a3, &v99);
      v4 = sub_40C8D0(v3);
      v108 = (char *)sub_432EF0(v4);
      if ( v108 && strlen(v108) && strlen(v108) <= 0x18 )
      {
        strcpy((char *)v54 + 32, v108);
        goto LABEL_48;
      }
      sub_4328C0("CMonster::Set() Invalid Name. (Name:%s)", v108);
      return 0;
    case 2:
      v6 = sub_4023A0(&a3, &v98);
      *((_DWORD *)v54 + 15) = sub_40C8D0(v6);
      goto LABEL_48;
    case 8:
      v7 = sub_4023A0(&a3, &v97);
      *((_DWORD *)v54 + 16) = sub_40C8D0(v7);
      goto LABEL_48;
    case 7:
      v8 = sub_4023A0(&a3, &v96);
      *((_DWORD *)v54 + 17) = sub_40C8D0(v8);
      goto LABEL_48;
    case 33:
      v9 = sub_4023A0(&a3, &v95);
      *((_DWORD *)v54 + 18) = sub_40C8D0(v9);
      goto LABEL_48;
    case 37:
      if ( *((_DWORD *)v54 + 29) <= 5 )
      {
        v10 = sub_4023A0(&a3, &v94);
        *((_DWORD *)v54 + *((_DWORD *)v54 + 29) + 19) = sub_40C8D0(v10);
        v11 = sub_4023A0(&a3, &v93);
        *((_DWORD *)v54 + *((_DWORD *)v54 + 29)++ + 24) = sub_40C8D0(v11);
      }
      goto LABEL_48;
    case 34:
      v12 = sub_4023A0(&a3, &v92);
      *((_DWORD *)v54 + 30) = sub_40C8D0(v12);
      goto LABEL_48;
    case 35:
      v13 = sub_4023A0(&a3, &v91);
      *((_DWORD *)v54 + 31) = sub_40C8D0(v13);
      v14 = sub_4023A0(&a3, &v90);
      *((_DWORD *)v54 + 32) = sub_40C8D0(v14);
      goto LABEL_48;
    case 36:
      v15 = sub_4023A0(&a3, &v89);
      *((_DWORD *)v54 + 33) = sub_40C8D0(v15);
      goto LABEL_48;
    case 9:
      v16 = sub_4023A0(&a3, &v88);
      *((_DWORD *)v54 + 34) = sub_40C8D0(v16);
      goto LABEL_48;
    case 10:
      v17 = sub_4023A0(&a3, &v87);
      *((_DWORD *)v54 + 35) = sub_40C8D0(v17);
      goto LABEL_48;
    case 11:
      v18 = sub_4023A0(&a3, &v86);
      *((_DWORD *)v54 + 36) = sub_40C8D0(v18);
      goto LABEL_48;
    case 12:
      v19 = sub_4023A0(&a3, &v85);
      *((_DWORD *)v54 + 37) = sub_40C8D0(v19);
      goto LABEL_48;
    case 13:
      v20 = sub_4023A0(&a3, &v84);
      *((_DWORD *)v54 + 38) = sub_40C8D0(v20);
      goto LABEL_48;
    case 14:
      v21 = sub_4023A0(&a3, &v83);
      *((_DWORD *)v54 + 39) = sub_40C8D0(v21);
      goto LABEL_48;
    case 15:
      v22 = sub_4023A0(&a3, &v82);
      *((_DWORD *)v54 + 40) = sub_40C8D0(v22);
      goto LABEL_48;
    case 16:
      v23 = sub_4023A0(&a3, &v81);
      *((_DWORD *)v54 + 48) = sub_40C8D0(v23);
      goto LABEL_48;
    case 17:
      v24 = sub_4023A0(&a3, &v80);
      *((_DWORD *)v54 + 49) = sub_40C8D0(v24);
      goto LABEL_48;
    case 18:
      v25 = sub_4023A0(&a3, &v79);
      *((_DWORD *)v54 + 67) = sub_40C8D0(v25);
      v26 = sub_4023A0(&a3, &v78);
      *((_DWORD *)v54 + 50) = sub_40C8D0(v26);
      v27 = sub_4023A0(&a3, &v77);
      *((_DWORD *)v54 + 51) = sub_40C8D0(v27);
      goto LABEL_48;
    case 19:
      v28 = sub_4023A0(&a3, &v76);
      *((_DWORD *)v54 + 52) = sub_40C8D0(v28);
      v29 = sub_4023A0(&a3, &v75);
      *((_DWORD *)v54 + 53) = sub_40C8D0(v29);
      goto LABEL_48;
    case 20:
      v30 = sub_4023A0(&a3, &v74);
      *((_DWORD *)v54 + 54) = sub_40C8D0(v30);
      v31 = sub_4023A0(&a3, &v73);
      *((_DWORD *)v54 + 55) = sub_40C8D0(v31);
      goto LABEL_48;
    case 21:
      v32 = sub_4023A0(&a3, &v72);
      *((_DWORD *)v54 + 56) = sub_40C8D0(v32);
      goto LABEL_48;
    case 22:
      v33 = sub_4023A0(&a3, &v71);
      *((_DWORD *)v54 + 57) = sub_40C8D0(v33);
      goto LABEL_48;
    case 23:
      v34 = sub_4023A0(&a3, &v70);
      *((_DWORD *)v54 + 65) = sub_40C8D0(v34);
      v35 = sub_4023A0(&a3, &v69);
      *((_DWORD *)v54 + 66) = sub_40C8D0(v35);
      goto LABEL_48;
    case 24:
      v107 = 0;
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v36 = sub_4023A0(&a3, &v68);
        v37 = sub_40C8D0(v36);
        *((_DWORD *)v54 + v107++ + 58) = 10 * v37;
      }
      goto LABEL_48;
    case 70:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        sub_4023A0(&a3, &v106);
        v38 = sub_4023A0(&v106, &v67);
        v103 = sub_40C8D0(v38) << 16;
        v39 = sub_4023A0(&v106, &v66);
        v40 = sub_40C8D0(v39);
        v103 |= v40;
        v41 = sub_4023A0(&v106, &v65);
        v104 = sub_40C8D0(v41);
        v42 = sub_4023A0(&v106, &v64);
        v105 = sub_40C8D0(v42);
        sub_445B80((int)((char *)v54 + 272), (int)&v103);
      }
      goto LABEL_48;
    case 107:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        sub_4023A0(&a3, &v102);
        v43 = sub_4023A0(&v102, &v63);
        v100 = sub_40C8D0(v43);
        v44 = sub_4023A0(&v102, &v62);
        v101 = sub_40C8D0(v44);
        sub_445C10((int)((char *)v54 + 288), (int)&v100);
      }
      goto LABEL_48;
    case 109:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v45 = sub_4023A0(&a3, &v61);
        *((_DWORD *)v54 + 76) |= 1 << sub_40C8D0(v45);
      }
      goto LABEL_48;
    case 111:
      v46 = sub_4023A0(&a3, &v60);
      *((_DWORD *)v54 + 77) = sub_40C8D0(v46);
      v47 = sub_4023A0(&a3, &v59);
      *((_DWORD *)v54 + 78) = sub_40C8D0(v47);
      goto LABEL_48;
    case 112:
      v48 = sub_4023A0(&a3, &v58);
      *((_DWORD *)v54 + 79) = sub_40C8D0(v48);
      v49 = sub_4023A0(&a3, &v57);
      *((_DWORD *)v54 + 80) = sub_40C8D0(v49);
      v50 = sub_4023A0(&a3, &v56);
      *((float *)v54 + 81) = (double)sub_40C8D0(v50);
      v51 = sub_4023A0(&a3, &v55);
      *((_DWORD *)v54 + 82) = sub_40C8D0(v51);
LABEL_48:
      result = 1;
      break;
    default:
      v52 = a2 - 1;
      sub_402340(&v52, (int)&a3);
      result = CBase::Set(v54, a2, v52);
      break;
  }
  return result;
}

//----- (00437BD0) --------------------------------------------------------
signed int __thiscall CInitMonster::OnLoad(void *this)
{
  int v1; // eax@1
  signed int result; // eax@2
  void *v3; // [sp+0h] [bp-18h]@1
  void *v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+10h] [bp-8h]@1
  char v7; // [sp+14h] [bp-4h]@1

  v3 = this;
  v4 = this;
  v1 = sub_420990((int)&v5, (int)((char *)this + 60), (int)&v4);
  sub_445DF0((int)&unk_4E1820, (int)&v6, v1);
  if ( v7 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CInitMonster::Onload() Duplicate Monster Data. (Index:%d)", *((_DWORD *)v3 + 15));
    result = 0;
  }
  return result;
}

//----- (00437C30) --------------------------------------------------------
void __userpurge CInitMonster::DropItemEx(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, char a6, int a7, int a8, int a9, int a10)
{
  int v10; // [sp+4h] [bp-28h]@7
  int v11; // [sp+14h] [bp-18h]@10
  int v12; // [sp+18h] [bp-14h]@10
  int v13; // [sp+1Ch] [bp-10h]@10
  int v14; // [sp+20h] [bp-Ch]@10
  int v15; // [sp+24h] [bp-8h]@3
  int i; // [sp+28h] [bp-4h]@1

  for ( i = 0; i < a5; ++i )
  {
    v15 = CItem::CreateDropItem(a1, a2, a3, a6, a10);
    if ( v15 )
    {
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)v15 + 164))(v15) )
      {
        if ( *(_DWORD *)a9 > 0 )
        {
          if ( *(_DWORD *)a9 < 5 )
            v10 = dword_4D62D8[*(_DWORD *)a9];
          else
            v10 = 1;
          *(_DWORD *)(v15 + 52) *= v10;
          *(_DWORD *)a9 = -1;
        }
      }
      CChar::GetDropPt(a4, (int)&v11);
      v13 = v11 >> 5;
      v14 = v12 >> 5;
      if ( sub_491360(*(void **)(a4 + 320), a1, a2, a3, v15, (int)&v13) )
      {
        *(_DWORD *)(v15 + 80) = 1;
        (*(void (__thiscall **)(int, int, int *, int *, signed int, int, int))(*(_DWORD *)v15 + 124))(
          v15,
          a4,
          &v11,
          &v13,
          1,
          a7,
          a8);
      }
      else
      {
        if ( v15 )
          (**(void (__thiscall ***)(_DWORD, _DWORD))v15)(v15, 1);
      }
    }
  }
}
// 4D62D8: using guessed type int dword_4D62D8[];

//----- (00437D70) --------------------------------------------------------
char __userpurge CInitMonster::DropItem<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // eax@28
  int v10; // eax@40
  void *v11; // eax@49
  int v12; // eax@50
  int v14; // [sp+18h] [bp-40h]@12
  int v15; // [sp+1Ch] [bp-3Ch]@1
  char v16; // [sp+20h] [bp-38h]@49
  char v17; // [sp+24h] [bp-34h]@52
  int v18; // [sp+28h] [bp-30h]@50
  int v19; // [sp+2Ch] [bp-2Ch]@50
  int v20; // [sp+30h] [bp-28h]@50
  char v21; // [sp+34h] [bp-24h]@48
  void *v22; // [sp+38h] [bp-20h]@36
  int v23; // [sp+3Ch] [bp-1Ch]@16
  int i; // [sp+40h] [bp-18h]@8
  int v25; // [sp+44h] [bp-14h]@1
  int v26; // [sp+48h] [bp-10h]@1
  int v27; // [sp+4Ch] [bp-Ch]@1
  int v28; // [sp+50h] [bp-8h]@1
  int v29; // [sp+54h] [bp-4h]@1

  v15 = a1;
  v26 = 0;
  v29 = 0;
  v27 = 0;
  v28 = 0;
  v25 = 0;
  if ( a6 )
  {
    v29 = CParty::FindParty(a2, a3, a4, a7);
    if ( v29 )
      v26 = CParty::GetRandomPlayer(v29, a2, a3, a4);
  }
  else
  {
    v26 = sub_450810(a2, a3, a4, a7);
  }
  if ( v26 )
  {
    for ( i = 0; i < *(_DWORD *)(v15 + 116); ++i )
    {
      v27 = 0;
      if ( dword_4E1178 & 1 || *(_WORD *)dword_4E1174 & 0x100 )
        v14 = 2 * *(_DWORD *)(v15 + 4 * i + 96);
      else
        v14 = *(_DWORD *)(v15 + 4 * i + 96);
      v28 = v14;
      if ( *(_DWORD *)(v15 + 64) == 4 )
      {
        if ( v29 )
        {
          v9 = CParty::GetLuckySize(v29, a2, a3, a4, 0);
          v28 += v9;
        }
        else
        {
          if ( CChar::IsBState(v26, 33554432i64) )
            ++v28;
        }
      }
      else
      {
        if ( CChar::IsBState(v26, 201326592i64) )
        {
          v23 = sub_406E10(1, 10000);
          if ( v23 <= 481 )
          {
            if ( v23 <= 81 )
            {
              if ( v23 <= 21 )
              {
                if ( v23 <= 1 )
                {
                  if ( CChar::IsBState(v26, 134217728i64) )
                    v27 = 4;
                }
                else
                {
                  v27 = 3;
                }
              }
              else
              {
                v27 = 2;
              }
            }
            else
            {
              v27 = 1;
            }
          }
        }
      }
      v25 = v27;
      CInitMonster::DropItemEx(a2, a3, a4, a5, v28, *(_DWORD *)(v15 + 4 * i + 76), a6, a7, (int)&v27, 0);
      if ( a9 )
      {
        if ( sub_406E10(1, 100) > 50 )
          CInitMonster::DropItemEx(a2, a3, a4, a5, v28, *(_DWORD *)(v15 + 4 * i + 76), a6, a7, (int)&v27, a9);
      }
      if ( v27 < 0 )
      {
        if ( v29 )
        {
          v22 = sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bb");
          CParty::Broadcast(v29, a2, a3, a4, v22, 0);
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v26, 68, (unsigned int)"bb");
        }
      }
    }
    sub_4239C0(v26, a2, a3, a4, v26 + 352);
  }
  v10 = sub_445B60(v15 + 272);
  if ( !(_BYTE)v10 )
  {
    v26 = 0;
    if ( v29 )
    {
      v10 = CParty::GetRandomPlayer(v29, a2, a3, a4);
      v26 = v10;
    }
    else
    {
      a7 = a8;
      v10 = sub_450810(a2, a3, a4, a8);
      v26 = v10;
    }
    if ( v26 )
    {
      if ( CSMap::IsValidTile(*(void **)(v26 + 320), v26 + 332, 131072) )
      {
        sub_430C20(v15 + 272, &v21);
        while ( 1 )
        {
          v11 = sub_445B40(v15 + 272, &v16);
          if ( !(unsigned __int8)sub_47D070(v11) )
            break;
          v12 = sub_420010();
          v18 = *(_DWORD *)v12;
          v19 = *(_DWORD *)(v12 + 4);
          v20 = *(_DWORD *)(v12 + 8);
          if ( CPlayer::CheckQuestFlag(v26, a2, a3, a4, v18) )
          {
            v27 = 0;
            CInitMonster::DropItemEx(a2, a3, a4, a5, v20, v19, a6, a7, (int)&v27, 0);
          }
          sub_446060(&v21, (int)&v17, 0);
        }
      }
      LOBYTE(v10) = sub_4239C0(v26, a2, a3, a4, v26 + 352);
    }
  }
  if ( v29 )
    LOBYTE(v10) = CIOObject::Release(v29, a2, a3, a4);
  return v10;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E1178: using guessed type int dword_4E1178;

//----- (00438130) --------------------------------------------------------
bool __thiscall CSMap::IsValidTile(void *this, int a2, int a3)
{
  bool result; // eax@5
  int v4; // ST0C_4@6
  int v5; // eax@6
  int v6; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v6 = *(_DWORD *)a2 >> 5;
  v7 = *(_DWORD *)(a2 + 4) >> 5;
  if ( v6 >= 0 && v6 >> 8 < 64 && v7 >= 0 && v7 >> 8 < 64 )
  {
    v4 = ((*(_DWORD *)a2 >> 3) & 3) + 4 * ((*(_DWORD *)(a2 + 4) >> 3) & 3);
    v5 = CSMap::_GetCellMap(this, (int)&v6);
    result = CCellMap::IsValidTile(v5, (int)&v6, a3, v4);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004381C0) --------------------------------------------------------
bool __thiscall CCellMap::IsValidTile(int this, int a2, int a3, char a4)
{
  bool result; // eax@2
  int v5; // [sp+4h] [bp-8h]@3
  int v6; // [sp+8h] [bp-4h]@3

  if ( this )
  {
    v5 = *(_DWORD *)a2 & 0xFF;
    v6 = *(_DWORD *)(a2 + 4) & 0xFF;
    result = (*(_DWORD *)(CCellMap::GetTile(this, (int)&v5) + 4) & (a3 | (1 << a4))) == 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00438220) --------------------------------------------------------
int __thiscall CCellMap::GetTile(int this, int a2)
{
  return *(_DWORD *)(this + 8) + 8 * ((*(_DWORD *)(a2 + 4) << 8) + *(_DWORD *)a2);
}

//----- (00438250) --------------------------------------------------------
int __thiscall CSMap::_GetCellMap(void *this, int a2)
{
  int result; // eax@3
  int v3; // [sp+4h] [bp-4h]@1

  v3 = (*(_DWORD *)(a2 + 4) >> 8 << 6) + (*(_DWORD *)a2 >> 8);
  if ( v3 >= 0 && v3 <= 4095 )
  {
    result = *((_DWORD *)this + v3 + 2);
  }
  else
  {
    sub_4328C0("CSellMap::_GetCellMap PT2ARRY(%d) ptT.x(%d) ptT.y(%d) \n", v3, *(_DWORD *)a2, *(_DWORD *)(a2 + 4));
    sub_422B30("CSellMap::_GetCellMap PT2ARRY(%d) ptT.x(%d) ptT.y(%d) \n", v3);
    result = 0;
  }
  return result;
}

//----- (004382D0) --------------------------------------------------------
int __thiscall sub_4382D0(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B7DC8;
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  *(_DWORD *)(v2 + 44) = 0;
  *(_DWORD *)(v2 + 48) = 0;
  *(_DWORD *)(v2 + 52) = 0;
  memset((void *)(v2 + 56), 0, 0x10u);
  *(_DWORD *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 76) = GetTickCount();
  *(_DWORD *)(v2 + 80) = 1000;
  *(_DWORD *)(v2 + 84) = 0;
  return v2;
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (00438370) --------------------------------------------------------
int __userpurge CGenMonster::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CGenMonster::_CGenMonster(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (004383A0) --------------------------------------------------------
int __usercall CGenMonster::_CGenMonster<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B7DC8;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (004383C0) --------------------------------------------------------
int __thiscall CGenMonster::CGenMonster(int this, int a2, int a3, int a4, int a5)
{
  int v6; // ST00_4@1

  v6 = this;
  CBase::CBase(this);
  *(_DWORD *)v6 = &off_4B7DC8;
  *(_DWORD *)(v6 + 32) = a3;
  *(_DWORD *)(v6 + 36) = *(_DWORD *)(a2 + 316);
  *(_DWORD *)(v6 + 40) = 0;
  *(_DWORD *)(v6 + 44) = a5;
  *(_DWORD *)(v6 + 48) = 0;
  *(_DWORD *)(v6 + 52) = a4;
  *(_DWORD *)(v6 + 56) = *(_DWORD *)(a2 + 332) - 32 * a4;
  *(_DWORD *)(v6 + 60) = *(_DWORD *)(a2 + 336) - 32 * a4;
  *(_DWORD *)(v6 + 64) = *(_DWORD *)(a2 + 332) + 32 * a4;
  *(_DWORD *)(v6 + 68) = *(_DWORD *)(a2 + 336) + 32 * a4;
  *(_DWORD *)(v6 + 72) = *(_DWORD *)(a2 + 320);
  *(_DWORD *)(v6 + 76) = GetTickCount();
  *(_DWORD *)(v6 + 80) = 1000;
  *(_DWORD *)(v6 + 84) = 0;
  return v6;
}
// 4B7DC8: using guessed type int (__stdcall *off_4B7DC8)(int);

//----- (004384B0) --------------------------------------------------------
int __cdecl CGenMonster::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0x58u);
  if ( v2 )
    v1 = sub_4382D0(v2);
  else
    v1 = 0;
  return v1;
}

//----- (004384F0) --------------------------------------------------------
signed int __thiscall CGenMonster::Set(void *this, int a2, char a3)
{
  void *v3; // eax@2
  void *v4; // eax@3
  signed int result; // eax@4
  void *v6; // eax@6
  void *v7; // eax@7
  void *v8; // eax@8
  void *v9; // eax@9
  void *v10; // eax@9
  void *v11; // eax@9
  void *v12; // eax@9
  int v13; // [sp-4h] [bp-34h]@10
  int v14; // [sp+0h] [bp-30h]@1
  void *v15; // [sp+4h] [bp-2Ch]@1
  char v16; // [sp+Ch] [bp-24h]@9
  char v17; // [sp+10h] [bp-20h]@9
  char v18; // [sp+14h] [bp-1Ch]@9
  char v19; // [sp+18h] [bp-18h]@9
  char v20; // [sp+1Ch] [bp-14h]@8
  char v21; // [sp+20h] [bp-10h]@7
  char v22; // [sp+24h] [bp-Ch]@6
  char v23; // [sp+28h] [bp-8h]@3
  char v24; // [sp+2Ch] [bp-4h]@2

  v15 = this;
  v14 = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v3 = sub_4023A0(&a3, &v24);
      *((_DWORD *)v15 + 8) = sub_40C8D0(v3);
      goto LABEL_11;
    case 3:
      v4 = sub_4023A0(&a3, &v23);
      *((_DWORD *)v15 + 9) = sub_40C8D0(v4);
      *((_DWORD *)v15 + 18) = sub_491080(*((_DWORD *)v15 + 9));
      if ( *((_DWORD *)v15 + 18) )
        goto LABEL_11;
      sub_4328C0("CGenMonster::Set() Can't find the Map. (index:%d)", *((_DWORD *)v15 + 9));
      return 0;
    case 4:
      v6 = sub_4023A0(&a3, &v22);
      *((_DWORD *)v15 + 10) = sub_40C8D0(v6);
      goto LABEL_11;
    case 5:
      v7 = sub_4023A0(&a3, &v21);
      *((_DWORD *)v15 + 11) = sub_40C8D0(v7);
      goto LABEL_11;
    case 87:
      v8 = sub_4023A0(&a3, &v20);
      *((_DWORD *)v15 + 20) = 1000 * sub_40C8D0(v8);
      goto LABEL_11;
    case 6:
      v9 = sub_4023A0(&a3, &v19);
      *((_DWORD *)v15 + 14) = 32 * sub_40C8D0(v9);
      v10 = sub_4023A0(&a3, &v18);
      *((_DWORD *)v15 + 15) = 32 * sub_40C8D0(v10);
      v11 = sub_4023A0(&a3, &v17);
      *((_DWORD *)v15 + 16) = 32 * sub_40C8D0(v11);
      v12 = sub_4023A0(&a3, &v16);
      *((_DWORD *)v15 + 17) = 32 * sub_40C8D0(v12);
LABEL_11:
      result = 1;
      break;
    default:
      v13 = a2 - 2;
      sub_402340(&v13, (int)&a3);
      result = CBase::Set(v15, a2, v13);
      break;
  }
  return result;
}

//----- (00438710) --------------------------------------------------------
signed int __thiscall CGenMonster::OnLoad(void *this)
{
  int v1; // eax@1
  signed int result; // eax@2
  void *v3; // [sp+0h] [bp-18h]@1
  void *v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+10h] [bp-8h]@1
  char v7; // [sp+14h] [bp-4h]@1

  v3 = this;
  v4 = this;
  v1 = sub_420990((int)&v5, (int)((char *)this + 40), (int)&v4);
  sub_445DF0((int)&unk_4E1870, (int)&v6, v1);
  if ( v7 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CGenMosnter::Onload() Duplicate GenArea. (area:%d)", *((_DWORD *)v3 + 10));
    result = 0;
  }
  return result;
}

//----- (00438770) --------------------------------------------------------
void __userpurge CGenMonster::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@4
  int v6; // [sp+0h] [bp-1Ch]@1
  char v7; // [sp+4h] [bp-18h]@4
  char v8; // [sp+8h] [bp-14h]@15
  int v9; // [sp+Ch] [bp-10h]@7
  int v10; // [sp+10h] [bp-Ch]@5
  DWORD v11; // [sp+14h] [bp-8h]@5
  char v12; // [sp+18h] [bp-4h]@3

  v6 = a1;
  if ( !dword_4E1814 )
  {
    sub_47DE70((volatile LONG *)&unk_4E187C);
    sub_40F070((int)&unk_4E1870, &v12);
    while ( 1 )
    {
      v5 = sub_430C20((int)&unk_4E1870, &v7);
      if ( !(unsigned __int8)sub_47D070(v5) )
        break;
      v10 = *(_DWORD *)(sub_420250((int *)&v12) + 4);
      v11 = GetTickCount();
      if ( *(_DWORD *)(v10 + 80) == 1000 || (signed int)(*(_DWORD *)(v10 + 76) - v11) <= 0 )
      {
        v9 = 0;
        while ( *(_DWORD *)(v10 + 48) < *(_DWORD *)(v10 + 44) )
        {
          if ( CMonster::Create(a2, a3, a4, v10, 0) )
          {
            InterlockedIncrement((volatile LONG *)(v10 + 48));
          }
          else
          {
            ++v9;
            if ( v9 >= 3 )
              goto LABEL_15;
          }
        }
        *(_DWORD *)(v10 + 76) = *(_DWORD *)(v10 + 80) + v11;
      }
LABEL_15:
      sub_446090((int *)&v12, (int)&v8, 0);
    }
    sub_47E080((volatile LONG *)&unk_4E187C, a2, a3, a4);
    CIOObject::AddTimer(v6, a2, a3, a4, 1000, 0);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E1814: using guessed type int dword_4E1814;

//----- (00438880) --------------------------------------------------------
int __thiscall CGenMonster::GetGenTile(int this, int a2, int a3)
{
  int v4; // ST0C_4@4
  int v5; // eax@4
  int v6; // [sp+0h] [bp-Ch]@1

  v6 = this;
  if ( a3 )
  {
    if ( *(_DWORD *)(this + 52) )
    {
      *(_DWORD *)(this + 56) = *(_DWORD *)(a3 + 332) - 32 * *(_DWORD *)(this + 52);
      *(_DWORD *)(this + 60) = *(_DWORD *)(a3 + 336) - 32 * *(_DWORD *)(this + 52);
      *(_DWORD *)(this + 64) = *(_DWORD *)(a3 + 332) + 32 * *(_DWORD *)(this + 52);
      *(_DWORD *)(this + 68) = *(_DWORD *)(a3 + 336) + 32 * *(_DWORD *)(this + 52);
    }
  }
  v4 = sub_406E10(*(_DWORD *)(this + 56), *(_DWORD *)(this + 64));
  v5 = sub_406E10(*(_DWORD *)(v6 + 60), *(_DWORD *)(v6 + 68));
  *(_DWORD *)a2 = v4;
  *(_DWORD *)(a2 + 4) = v5;
  return a2;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (00438950) --------------------------------------------------------
__int32 __usercall CGenMonster::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v5; // [sp+Ch] [bp-10h]@3
  char v6; // [sp+10h] [bp-Ch]@2
  char v7; // [sp+14h] [bp-8h]@5
  char v8; // [sp+18h] [bp-4h]@1

  dword_4E1814 = 1;
  sub_47E0D0((volatile LONG *)&unk_4E187C);
  sub_40F070((int)&unk_4E1870, &v8);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E1870, &v6);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v5 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
    if ( v5 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v5)(v5, 1);
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  sub_446000((int)&unk_4E1870);
  return sub_47E1C0((volatile LONG *)&unk_4E187C, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E1814: using guessed type int dword_4E1814;

//----- (00438A00) --------------------------------------------------------
int __thiscall CMonsterObject::CMonsterObject(int this)
{
  int v2; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B7E78;
  sub_423F60(v2 + 16, 32, 2, (void (__thiscall *)(_DWORD))CIOCriticalSection::CIOCriticalSection);
  for ( i = 0; i < 2; ++i )
    CLink::Initialize((void *)(v2 + 8 * i + 80));
  return v2;
}
// 4B7E78: using guessed type int (__stdcall *off_4B7E78)(int);

//----- (00438A60) --------------------------------------------------------
void *__thiscall CLink::Initialize(void *this)
{
  void *result; // eax@1

  *(_DWORD *)this = this;
  result = this;
  *((_DWORD *)result + 1) = result;
  return result;
}

//----- (00438A80) --------------------------------------------------------
int __thiscall CMonsterObject::_scalar_deleting_destructor_(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  CNPCObject::_CNPCObject(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (00438AB0) --------------------------------------------------------
void __userpurge CMonsterObject::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST18_4@9
  int v6; // ST10_4@15
  int v7; // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+Ch] [bp-14h]@13
  int v9; // [sp+14h] [bp-Ch]@7
  int v10; // [sp+18h] [bp-8h]@7
  DWORD v11; // [sp+1Ch] [bp-4h]@6

  v7 = a1;
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 16), a2, a3, a4);
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 48), a2, a3, a4);
      CLink::MoveTo((void *)(v7 + 88), v7 + 80);
      CIOCriticalSection::Leave(v7 + 48, a2, a3, a4);
      v8 = *(_DWORD *)(v7 + 80);
      while ( v8 != v7 + 80 )
      {
        v6 = v8 - 428;
        v8 = *(_DWORD *)v8;
        (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 208))(v6);
      }
      CIOCriticalSection::Leave(v7 + 16, a2, a3, a4);
      CIOObject::AddTimer(v7, a2, a3, a4, 1000, 1);
    }
  }
  else
  {
    if ( !*(_DWORD *)(a1 + 96) )
    {
      CMonsterBigBirdMother::Create(a2, a3, a4);
      *(_DWORD *)(v7 + 96) = 1;
    }
    v11 = GetTickCount();
    do
    {
      v10 = v11 + 30;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 16), a2, a3, a4);
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 48), a2, a3, a4);
      CLink::MoveTo((void *)(v7 + 88), v7 + 80);
      CIOCriticalSection::Leave(v7 + 48, a2, a3, a4);
      v9 = *(_DWORD *)(v7 + 80);
      while ( v9 != v7 + 80 )
      {
        v5 = v9 - 428;
        v9 = *(_DWORD *)v9;
        (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 204))(v5);
      }
      CIOCriticalSection::Leave(v7 + 16, a2, a3, a4);
      v11 = GetTickCount();
    }
    while ( v10 <= v11 );
    CIOObject::AddTimer(v7, a2, a3, a4, v10 - v11, 0);
  }
}

//----- (00438C40) --------------------------------------------------------
void *__thiscall CLink::MoveTo(void *this, int a2)
{
  void *result; // eax@1

  result = this;
  if ( *(void **)this != this )
  {
    **(_DWORD **)(a2 + 4) = *(_DWORD *)this;
    *(_DWORD *)(*(_DWORD *)this + 4) = *(_DWORD *)(a2 + 4);
    *(_DWORD *)(a2 + 4) = *((_DWORD *)this + 1);
    **((_DWORD **)this + 1) = a2;
    *(_DWORD *)this = this;
    result = this;
    *((_DWORD *)this + 1) = this;
  }
  return result;
}

//----- (00438CA0) --------------------------------------------------------
void __userpurge CMonsterObject::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST04_4@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  CLink::Insert(a5, v5 + 88);
  CIOCriticalSection::Leave(v5 + 48, a2, a3, a4);
}

//----- (00438CE0) --------------------------------------------------------
int __thiscall CLink::Insert(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 4);
  *(_DWORD *)this = a2;
  **(_DWORD **)(a2 + 4) = this;
  result = this;
  *(_DWORD *)(a2 + 4) = this;
  return result;
}

//----- (00438D20) --------------------------------------------------------
int __usercall CMonsterObject::Stop<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // ST04_4@5
  int result; // eax@6
  int v6; // [sp+0h] [bp-10h]@1
  int v7; // [sp+8h] [bp-8h]@3
  signed int i; // [sp+Ch] [bp-4h]@1

  v6 = a1;
  for ( i = 0; i < 2; ++i )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v6 + 32 * i + 16), a2, a3, a4);
    v7 = *(_DWORD *)(v6 + 8 * i + 80);
    while ( v7 != v6 + 8 * i + 80 )
    {
      v4 = (void *)(v7 - 428);
      v7 = *(_DWORD *)v7;
      CBase::Delete(v4);
    }
    CIOCriticalSection::Leave(v6 + 32 * i + 16, a2, a3, a4);
    result = i + 1;
  }
  return result;
}

//----- (00438DB0) --------------------------------------------------------
int __thiscall sub_438DB0(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  CChar::CChar(this);
  *(_DWORD *)v2 = &off_4B7E90;
  sub_480830(v2 + 488);
  *(_DWORD *)(v2 + 24) = 2;
  *(_DWORD *)(v2 + 440) = 0;
  *(_DWORD *)(v2 + 444) = 0;
  memset((void *)(v2 + 448), 0, 0x10u);
  *(_DWORD *)(v2 + 464) = 0;
  *(_DWORD *)(v2 + 468) = GetTickCount();
  *(_DWORD *)(v2 + 472) = *(_DWORD *)(v2 + 468);
  *(_DWORD *)(v2 + 476) = 0;
  *(_DWORD *)(v2 + 480) = 0;
  *(_DWORD *)(v2 + 484) = 0;
  *(_DWORD *)(v2 + 524) = 0;
  *(_DWORD *)(v2 + 528) = 0;
  return v2;
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (00438E90) --------------------------------------------------------
int __thiscall CMonster::GetGID(int this)
{
  return *(_DWORD *)(this + 524);
}

//----- (00438EB0) --------------------------------------------------------
char *__cdecl CMonster::GetGuildName()
{
  return off_4D62AC;
}
// 4D62AC: using guessed type char *off_4D62AC;

//----- (00438EC0) --------------------------------------------------------
void __stdcall CMonster::Summon(int a1, int a2, int a3, int a4)
{
  ;
}

//----- (00438ED0) --------------------------------------------------------
int __userpurge CMonster::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonster::_CMonster(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00438F00) --------------------------------------------------------
int __usercall CMonster::_CMonster<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4B7E90;
  sub_480870((void *)(a1 + 488));
  return CChar::_CChar(v5, a2, a3, a4);
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (00438F30) --------------------------------------------------------
int __thiscall CChar::GetDefense(void *this, int a2)
{
  return *((_DWORD *)this + a2 + 36) + *((_DWORD *)this + a2 + 60) * *((_DWORD *)this + a2 + 36) / 100;
}

//----- (00438F70) --------------------------------------------------------
int __thiscall CChar::GetAbsorb(int this)
{
  return *(_DWORD *)(this + 152) + *(_DWORD *)(this + 248) * *(_DWORD *)(this + 152) / 100;
}

//----- (00438FA0) --------------------------------------------------------
int __thiscall CChar::GetResist(void *this, int a2)
{
  return *((_DWORD *)this + a2 + 40);
}

//----- (00438FC0) --------------------------------------------------------
int __thiscall CMonster::CMonster(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CChar::CChar(this);
  *(_DWORD *)v3 = &off_4B7E90;
  sub_480830(v3 + 488);
  *(_DWORD *)(v3 + 24) = 2;
  *(_DWORD *)(v3 + 316) = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(v3 + 320) = *(_DWORD *)(a2 + 72);
  *(_DWORD *)(v3 + 444) = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(v3 + 448) = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(v3 + 452) = *(_DWORD *)(a2 + 60);
  *(_DWORD *)(v3 + 456) = *(_DWORD *)(a2 + 64);
  *(_DWORD *)(v3 + 460) = *(_DWORD *)(a2 + 68);
  *(_DWORD *)(v3 + 464) = 0;
  *(_DWORD *)(v3 + 468) = GetTickCount();
  *(_DWORD *)(v3 + 472) = *(_DWORD *)(v3 + 468);
  *(_DWORD *)(v3 + 476) = 0;
  *(_DWORD *)(v3 + 480) = 0;
  *(_DWORD *)(v3 + 484) = 0;
  *(_DWORD *)(v3 + 524) = 0;
  *(_DWORD *)(v3 + 528) = 0;
  return v3;
}
// 4B7E90: using guessed type int (__stdcall *off_4B7E90)(int);

//----- (004390C0) --------------------------------------------------------
void __usercall CMonster::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  dword_4E1810 = 0;
  CIOObject::AddTimer((int)&unk_4E1898, a1, a2, a3, 1000, 0);
  CIOObject::AddTimer((int)&unk_4E1930, a1, a2, a3, 30, 0);
  CIOObject::AddTimer((int)&unk_4E1930, a1, a2, a3, 1000, 1);
  CIOObject::AddTimer((int)&unk_4E1998, a1, a2, a3, 1000, 1);
  CIOObject::AddTimer((int)&unk_4E1A00, a1, a2, a3, 1000, 1);
}

//----- (00439130) --------------------------------------------------------
void __usercall CMonster::Stop(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v4; // [sp+8h] [bp-10h]@3
  char v5; // [sp+Ch] [bp-Ch]@2
  char v6; // [sp+10h] [bp-8h]@5
  char v7; // [sp+14h] [bp-4h]@1

  CGenMonster::Stop(a1, a2, a3);
  CMonsterObject::Stop((int)&unk_4E1930, a1, a2, a3);
  CMonsterObject::Stop((int)&unk_4E1998, a1, a2, a3);
  CMonsterObject::Stop((int)&unk_4E1A00, a1, a2, a3);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
  sub_40F070((int)&unk_4E1820, &v7);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E1820, &v5);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = *(_DWORD *)(sub_420250((int *)&v7) + 4);
    if ( v4 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v4)(v4, 1);
    sub_446090((int *)&v7, (int)&v6, 0);
  }
  sub_445D90((int)&unk_4E1820);
  CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004391F0) --------------------------------------------------------
LONG __cdecl CMonster::Size()
{
  return dword_4E1810;
}

//----- (00439200) --------------------------------------------------------
int __usercall CMonster::NewMonster<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  int v6; // [sp+0h] [bp-ACh]@83
  int v7; // [sp+4h] [bp-A8h]@79
  int v8; // [sp+8h] [bp-A4h]@75
  int v9; // [sp+Ch] [bp-A0h]@70
  int v10; // [sp+10h] [bp-9Ch]@67
  int v11; // [sp+14h] [bp-98h]@63
  int v12; // [sp+18h] [bp-94h]@59
  int v13; // [sp+1Ch] [bp-90h]@55
  int v14; // [sp+20h] [bp-8Ch]@51
  int v15; // [sp+24h] [bp-88h]@47
  int v16; // [sp+28h] [bp-84h]@43
  int v17; // [sp+2Ch] [bp-80h]@38
  int v18; // [sp+30h] [bp-7Ch]@34
  int v19; // [sp+34h] [bp-78h]@30
  int v20; // [sp+38h] [bp-74h]@26
  int v21; // [sp+3Ch] [bp-70h]@22
  int v22; // [sp+44h] [bp-68h]@16
  int v23; // [sp+48h] [bp-64h]@12
  int v24; // [sp+4Ch] [bp-60h]@8
  int v25; // [sp+50h] [bp-5Ch]@4
  int v26; // [sp+5Ch] [bp-50h]@82
  int v27; // [sp+60h] [bp-4Ch]@78
  int v28; // [sp+64h] [bp-48h]@74
  int v29; // [sp+68h] [bp-44h]@66
  int v30; // [sp+6Ch] [bp-40h]@62
  int v31; // [sp+70h] [bp-3Ch]@58
  int v32; // [sp+74h] [bp-38h]@54
  int v33; // [sp+78h] [bp-34h]@50
  int v34; // [sp+7Ch] [bp-30h]@46
  int v35; // [sp+80h] [bp-2Ch]@42
  int v36; // [sp+84h] [bp-28h]@37
  int v37; // [sp+88h] [bp-24h]@33
  int v38; // [sp+8Ch] [bp-20h]@29
  int v39; // [sp+90h] [bp-1Ch]@25
  int v40; // [sp+94h] [bp-18h]@21
  int v41; // [sp+98h] [bp-14h]@15
  int v42; // [sp+9Ch] [bp-10h]@11
  int v43; // [sp+A0h] [bp-Ch]@7
  int v44; // [sp+A4h] [bp-8h]@3
  int v45; // [sp+A8h] [bp-4h]@1

  v45 = 0;
  switch ( *(_DWORD *)(a4 + 64) )
  {
    case 0:
      switch ( *(_DWORD *)(a4 + 72) )
      {
        case 1:
        case 2:
          v44 = (int)sub_401000(0x298u);
          if ( v44 )
            v25 = CMonsterMaguni::CMonsterMaguni(v44, a5);
          else
            v25 = 0;
          v45 = v25;
          *(_DWORD *)(v25 + 476) = *(_DWORD *)(a4 + 72) - 1;
          break;
        case 3:
          v43 = (int)sub_401000(0x2B0u);
          if ( v43 )
            v24 = sub_439D20(v43, a5);
          else
            v24 = 0;
          v45 = v24;
          *(_DWORD *)(v24 + 476) = *(_DWORD *)(a4 + 72) - 2;
          break;
        case 4:
          v42 = (int)sub_401000(0x298u);
          if ( v42 )
            v23 = CMonsterMaguniWithSkillOnly::CMonsterMaguniWithSkillOnly(v42, a5);
          else
            v23 = 0;
          v45 = v23;
          *(_DWORD *)(v23 + 476) = 1;
          break;
        case 5:
          v41 = (int)sub_401000(0x2A0u);
          if ( v41 )
            v22 = CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(v41, a5);
          else
            v22 = 0;
          v45 = v22;
          *(_DWORD *)(v22 + 476) = 1;
          break;
        default:
          return v45;
      }
      return v45;
    case 1:
      switch ( *(_DWORD *)(a4 + 72) )
      {
        case 1:
        case 2:
          v40 = (int)sub_401000(0x298u);
          if ( v40 )
            v21 = CMonsterReal::CMonsterReal(v40, a5);
          else
            v21 = 0;
          v45 = v21;
          *(_DWORD *)(v21 + 476) = *(_DWORD *)(a4 + 72) - 1;
          break;
        case 3:
          v39 = (int)sub_401000(0x2B8u);
          if ( v39 )
            v20 = sub_440070(v39);
          else
            v20 = 0;
          v45 = v20;
          break;
        case 4:
          v38 = (int)sub_401000(0x2A0u);
          if ( v38 )
            v19 = CMonsterBlackBug::CMonsterBlackBug(v38, a5);
          else
            v19 = 0;
          v45 = v19;
          *(_DWORD *)(v19 + 476) = 1;
          break;
        case 5:
          v37 = (int)sub_401000(0x298u);
          if ( v37 )
            v18 = CMonsterWithSkillOnly::CMonsterWithSkillOnly(v37, a5);
          else
            v18 = 0;
          v45 = v18;
          *(_DWORD *)(v18 + 476) = 1;
          break;
        case 6:
          v36 = (int)sub_401000(0x2B8u);
          if ( v36 )
            v17 = CMonsterInvaderBoss::CMonsterInvaderBoss(v36, a5);
          else
            v17 = 0;
          v45 = v17;
          *(_DWORD *)(v17 + 476) = 1;
          break;
        default:
          return v45;
      }
      return v45;
    case 2:
    case 3:
      v35 = (int)sub_401000(0x238u);
      if ( v35 )
        v16 = sub_439AD0(v35);
      else
        v16 = 0;
      v45 = v16;
      break;
    case 4:
      v34 = (int)sub_401000(0x218u);
      if ( v34 )
        v15 = CMonsterItem::CMonsterItem(v34, a5);
      else
        v15 = 0;
      v45 = v15;
      break;
    case 5:
      v33 = (int)sub_401000(0x218u);
      if ( v33 )
        v14 = sub_439BD0(v33, a5);
      else
        v14 = 0;
      v45 = v14;
      break;
    case 6:
      v32 = (int)sub_401000(0x218u);
      if ( v32 )
        v13 = CMonsterInactive::CMonsterInactive(v32, a5);
      else
        v13 = 0;
      v45 = v13;
      break;
    case 7:
      v31 = (int)sub_401000(0x2A0u);
      if ( v31 )
        v12 = CMonsterEgg::CMonsterEgg(v31, a1, a2, a3, a5);
      else
        v12 = 0;
      v45 = v12;
      break;
    case 8:
      v30 = (int)sub_401000(0x2A0u);
      if ( v30 )
        v11 = CMonsterCocoon::CMonsterCocoon(v30, a5);
      else
        v11 = 0;
      v45 = v11;
      *(_DWORD *)(v11 + 476) = 1;
      break;
    case 9:
      v29 = (int)sub_401000(0x2A8u);
      if ( v29 )
        v10 = CMonsterFireFlower::CMonsterFireFlower(v29, a1, a2, a3, a5);
      else
        v10 = 0;
      v45 = v10;
      *(_DWORD *)(v10 + 476) = 0;
      break;
    case 0xA:
      v9 = *(_DWORD *)(a4 + 72);
      switch ( v9 )
      {
        case 1:
          v28 = (int)sub_401000(0x2D0u);
          if ( v28 )
            v8 = sub_439DE0(v28);
          else
            v8 = 0;
          v45 = v8;
          *(_DWORD *)(v8 + 476) = 0;
          break;
        case 2:
          v27 = (int)sub_401000(0x2A8u);
          if ( v27 )
            v7 = sub_439EA0(v27);
          else
            v7 = 0;
          v45 = v7;
          *(_DWORD *)(v7 + 476) = 0;
          break;
        case 3:
          v26 = (int)sub_401000(0x2A8u);
          if ( v26 )
            v6 = CMonsterSiegeGunRuins::CMonsterSiegeGunRuins(v26);
          else
            v6 = 0;
          v45 = v6;
          break;
      }
      break;
    default:
      return v45;
  }
  return v45;
}

//----- (00439830) --------------------------------------------------------
int __thiscall CMonsterMaguni::CMonsterMaguni(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CMonsterReal::CMonsterReal(this, a2);
  *(_DWORD *)v3 = &off_4B7F88;
  return v3;
}
// 4B7F88: using guessed type int (__stdcall *off_4B7F88)(int);

//----- (00439860) --------------------------------------------------------
int __thiscall CMonsterReal::GetAttackType(int this)
{
  return *(_DWORD *)(*(_DWORD *)(this + 440) + 268);
}

//----- (00439880) --------------------------------------------------------
int __thiscall CMonsterReal::ResetNextMove(int this, int a2, int a3)
{
  int result; // eax@1

  *(_DWORD *)(this + 556) = a2;
  result = a3;
  *(_DWORD *)(this + 652) = a3;
  return result;
}

//----- (004398B0) --------------------------------------------------------
int __usercall CMonsterReal::_CMonsterReal<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  CFindPath::_CFindPath((void *)(a1 + 612));
  CIOCriticalSection::_CIOCriticalSection(v5 + 572, a2, a3, a4);
  sub_4398F0(v5 + 560);
  return CMonster::_CMonster(v5, a2, a3, a4);
}

//----- (004398F0) --------------------------------------------------------
int __thiscall sub_4398F0(int this)
{
  return sub_445CB0(this);
}

//----- (00439910) --------------------------------------------------------
int __thiscall CMonsterMaguniWithSkillOnly::CMonsterMaguniWithSkillOnly(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CMonsterMaguni::CMonsterMaguni(this, a2);
  *(_DWORD *)v3 = &off_4B8090;
  return v3;
}
// 4B8090: using guessed type int (__stdcall *off_4B8090)(int);

//----- (00439940) --------------------------------------------------------
int __userpurge CMonsterMaguniWithSkillOnly::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonsterMaguniWithSkillOnly::_CMonsterMaguniWithSkillOnly(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00439970) --------------------------------------------------------
int __usercall CMonsterMaguniWithSkillOnly::_CMonsterMaguniWithSkillOnly<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CMonsterFireFlower::_CMonsterFireFlower(a1, a2, a3, a4);
}

//----- (00439990) --------------------------------------------------------
int __thiscall CMonsterMaguniWithSkill::CMonsterMaguniWithSkill(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CMonsterMaguni::CMonsterMaguni(this, a2);
  *(_DWORD *)v3 = &off_4B8198;
  *(_DWORD *)(v3 + 664) = 0;
  return v3;
}
// 4B8198: using guessed type int (__stdcall *off_4B8198)(int);

//----- (004399D0) --------------------------------------------------------
int __thiscall CMonsterInactive::CMonsterInactive(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  sub_439A00(this, a2);
  *(_DWORD *)v3 = &off_4B82A0;
  return v3;
}
// 4B82A0: using guessed type int (__stdcall *off_4B82A0)(int);

//----- (00439A00) --------------------------------------------------------
int __thiscall sub_439A00(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CMonster::CMonster(this, a2);
  *(_DWORD *)v3 = &off_4B8398;
  return v3;
}
// 4B8398: using guessed type int (__stdcall *off_4B8398)(int);

//----- (00439A30) --------------------------------------------------------
int __userpurge CMonsterNotReal::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonsterNotReal::_CMonsterNotReal(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00439A60) --------------------------------------------------------
int __usercall CMonsterNotReal::_CMonsterNotReal<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CMonster::_CMonster(a1, a2, a3, a4);
}

//----- (00439A80) --------------------------------------------------------
int __userpurge CMonsterMagic::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonsterInactive::_CMonsterInactive(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00439AB0) --------------------------------------------------------
int __usercall CMonsterInactive::_CMonsterInactive<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CMonsterNotReal::_CMonsterNotReal(a1, a2, a3, a4);
}

//----- (00439AD0) --------------------------------------------------------
int __thiscall sub_439AD0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CMonsterNotReal::CMonsterNotReal(this);
  *(_DWORD *)v2 = &off_4B8490;
  return v2;
}
// 4B8490: using guessed type int (__stdcall *off_4B8490)(int);

//----- (00439AF0) --------------------------------------------------------
int __thiscall CMonsterNotReal::CMonsterNotReal(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_438DB0(this);
  *(_DWORD *)v2 = &off_4B8398;
  return v2;
}
// 4B8398: using guessed type int (__stdcall *off_4B8398)(int);

//----- (00439B10) --------------------------------------------------------
int __thiscall CMonsterGuildWar::GetGID(int this)
{
  return *(_DWORD *)(this + 536);
}

//----- (00439B30) --------------------------------------------------------
char *__thiscall CMonsterGuildWar::GetGuildName(void *this)
{
  return (char *)this + 540;
}

//----- (00439B50) --------------------------------------------------------
int __thiscall CMonsterItem::CMonsterItem(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  sub_439A00(this, a2);
  *(_DWORD *)v3 = &off_4B8588;
  return v3;
}
// 4B8588: using guessed type int (__stdcall *off_4B8588)(int);

//----- (00439B80) --------------------------------------------------------
int __userpurge CMonsterItem::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonsterItem::_CMonsterItem(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00439BB0) --------------------------------------------------------
int __usercall CMonsterItem::_CMonsterItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B8588;
  return CMonsterNotReal::_CMonsterNotReal(a1, a2, a3, a4);
}
// 4B8588: using guessed type int (__stdcall *off_4B8588)(int);

//----- (00439BD0) --------------------------------------------------------
int __thiscall sub_439BD0(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  sub_439A00(this, a2);
  *(_DWORD *)v3 = &off_4B8680;
  return v3;
}
// 4B8680: using guessed type int (__stdcall *off_4B8680)(int);

//----- (00439C00) --------------------------------------------------------
int __thiscall CMonsterBlackBug::CMonsterBlackBug(int this, int a2)
{
  int v3; // ST0C_4@1

  v3 = this;
  CMonsterReal::CMonsterReal(this, a2);
  *(_DWORD *)v3 = &off_4B8778;
  memset((void *)(v3 + 664), 0, 4u);
  *(_DWORD *)(v3 + 664) = 0;
  *(_DWORD *)(v3 + 668) = a2;
  return v3;
}
// 4B8778: using guessed type int (__stdcall *off_4B8778)(int);

//----- (00439C60) --------------------------------------------------------
int __userpurge CMonsterEgg::CMonsterEgg<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  CMonsterReal::CMonsterReal(a1, a5);
  *(_DWORD *)v6 = &off_4B8880;
  *(_DWORD *)(v6 + 668) = a5;
  *(_DWORD *)(v6 + 468) = GetTickCount() + 140000;
  CMonsterReal::AddGState(v6, a2, a3, a4, 8192);
  return v6;
}
// 4B8880: using guessed type int (__stdcall *off_4B8880)(int);

//----- (00439CC0) --------------------------------------------------------
int __thiscall CMonsterCocoon::CMonsterCocoon(int this, int a2)
{
  int v3; // ST0C_4@1

  v3 = this;
  CMonsterReal::CMonsterReal(this, a2);
  *(_DWORD *)v3 = &off_4B8988;
  memset((void *)(v3 + 664), 0, 4u);
  *(_DWORD *)(v3 + 664) = GetTickCount() + 120000;
  *(_DWORD *)(v3 + 668) = a2;
  return v3;
}
// 4B8988: using guessed type int (__stdcall *off_4B8988)(int);

//----- (00439D20) --------------------------------------------------------
int __thiscall sub_439D20(int this, int a2)
{
  int v3; // ST0C_4@1

  v3 = this;
  CMonsterReal::CMonsterReal(this, a2);
  *(_DWORD *)v3 = &off_4B8A90;
  memset((void *)(v3 + 668), 0, 0x14u);
  *(_DWORD *)(v3 + 556) = GetTickCount();
  *(_DWORD *)(v3 + 660) = *(_DWORD *)(v3 + 556);
  return v3;
}
// 4B8A90: using guessed type int (__stdcall *off_4B8A90)(int);

//----- (00439D80) --------------------------------------------------------
int __userpurge CMonsterFireFlower::CMonsterFireFlower<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST0C_4@1

  v6 = a1;
  CMonsterReal::CMonsterReal(a1, a5);
  *(_DWORD *)v6 = &off_4B8B98;
  memset((void *)(v6 + 664), 0, 8u);
  *(_DWORD *)(v6 + 664) = GetTickCount() + 12000;
  CMonsterReal::AddGState(v6, a2, a3, a4, 8192);
  return v6;
}
// 4B8B98: using guessed type int (__stdcall *off_4B8B98)(int);

//----- (00439DE0) --------------------------------------------------------
int __thiscall sub_439DE0(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  sub_43A7D0(this);
  *(_DWORD *)v2 = &off_4B8CA0;
  *(_DWORD *)(v2 + 692) = 0;
  memset((void *)(v2 + 688), 0, 4u);
  *(_DWORD *)(v2 + 556) = GetTickCount();
  *(_DWORD *)(v2 + 660) = *(_DWORD *)(v2 + 556);
  *(_DWORD *)(v2 + 696) = 0;
  *(_DWORD *)(v2 + 700) = 0;
  *(_DWORD *)(v2 + 528) = 0;
  *(_DWORD *)(v2 + 708) = 0;
  return v2;
}
// 4B8CA0: using guessed type int (__stdcall *off_4B8CA0)(int);

//----- (00439E80) --------------------------------------------------------
char *__thiscall CMonsterSiegeGun::GetGuildName(void *this)
{
  return (char *)this + 664;
}

//----- (00439EA0) --------------------------------------------------------
int __thiscall sub_439EA0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_43A7D0(this);
  *(_DWORD *)v2 = &off_4B8DA8;
  return v2;
}
// 4B8DA8: using guessed type int (__stdcall *off_4B8DA8)(int);

//----- (00439EC0) --------------------------------------------------------
int __userpurge CMonsterSiegeGun::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonsterFireFlower::_CMonsterFireFlower(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00439EF0) --------------------------------------------------------
int __thiscall CMonsterSiegeGunRuins::CMonsterSiegeGunRuins(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_43A7D0(this);
  *(_DWORD *)v2 = &off_4B8EB0;
  return v2;
}
// 4B8EB0: using guessed type int (__stdcall *off_4B8EB0)(int);

//----- (00439F10) --------------------------------------------------------
int __thiscall CMonsterWithSkillOnly::CMonsterWithSkillOnly(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CMonsterReal::CMonsterReal(this, a2);
  *(_DWORD *)v3 = &off_4B8FB8;
  return v3;
}
// 4B8FB8: using guessed type int (__stdcall *off_4B8FB8)(int);

//----- (00439F40) --------------------------------------------------------
int __thiscall CMonsterInvaderBoss::CMonsterInvaderBoss(int this, int a2)
{
  int v3; // ST0C_4@1

  v3 = this;
  CMonsterReal::CMonsterReal(this, a2);
  *(_DWORD *)v3 = &off_4B90C0;
  memset((void *)(v3 + 668), 0, 0x14u);
  *(_DWORD *)(v3 + 556) = GetTickCount();
  *(_DWORD *)(v3 + 660) = *(_DWORD *)(v3 + 556);
  *(_DWORD *)(v3 + 688) = 0;
  return v3;
}
// 4B90C0: using guessed type int (__stdcall *off_4B90C0)(int);

//----- (00439FB0) --------------------------------------------------------
signed int __usercall CMonster::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  signed int result; // eax@2
  void *v6; // eax@3
  char v7; // [sp+Ch] [bp-20h]@3
  int v8; // [sp+10h] [bp-1Ch]@5
  int v9; // [sp+14h] [bp-18h]@1
  int v10; // [sp+18h] [bp-14h]@9
  int v11; // [sp+1Ch] [bp-10h]@9
  int v12; // [sp+20h] [bp-Ch]@9
  char v13; // [sp+24h] [bp-8h]@3
  int v14; // [sp+28h] [bp-4h]@7

  CGenMonster::GetGenTile(a4, (int)&v9, a5);
  if ( CSMap::IsValidTile(*(void **)(a4 + 72), (int)&v9, 131072) )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
    sub_44AE20((int)&unk_4E1820, (int)&v13, a4 + 32);
    v6 = sub_430C20((int)&unk_4E1820, &v7);
    if ( (unsigned __int8)unknown_libname_8(v6) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
      result = 0;
    }
    else
    {
      v8 = *(_DWORD *)(sub_420250((int *)&v13) + 4);
      if ( *(_DWORD *)(v8 + 304) & (1 << dword_4E35B8) )
      {
        v14 = CMonster::NewMonster(a1, a2, a3, v8, a4);
        if ( v14 )
        {
          CChar::SetXY(v14, (int)&v9);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 192))(v14, v8);
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          CChar::Lock(v14, a1, a2, a3);
          v11 = v9 >> 5;
          v12 = v10 >> 5;
          if ( sub_491360(*(void **)(v14 + 320), a1, a2, a3, v14, (int)&v11) )
          {
            (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 196))(v14, a5);
            (*(void (__thiscall **)(int))(*(_DWORD *)v14 + 240))(v14);
            (*(void (__thiscall **)(int))(*(_DWORD *)v14 + 224))(v14);
            CChar::GetMaxHP(v14);
            CChar::WriteInSight(a1, a2, a3, v14, 51, (unsigned int)"wdddwdddIsbds");
            CChar::Unlock(v14, a1, a2, a3);
            result = 1;
          }
          else
          {
            CChar::Unlock(v14, a1, a2, a3);
            if ( v14 )
              (**(void (__thiscall ***)(_DWORD, _DWORD))v14)(v14, 1);
            result = 0;
          }
        }
        else
        {
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          result = 0;
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        result = 1;
      }
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0043A200) --------------------------------------------------------
int __thiscall CChar::GetMaxHP(int this)
{
  return *(_DWORD *)(this + 112) + *(_DWORD *)(this + 84) + *(_DWORD *)(this + 208) * *(_DWORD *)(this + 84) / 100;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0043A240) --------------------------------------------------------
int __usercall CMonster::FindMonster<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v7 = 0;
  sub_47DE70((volatile LONG *)&unk_4E1858);
  sub_44AE20((int)&unk_4E184C, (int)&v8, (int)&a4);
  v4 = sub_430C20((int)&unk_4E184C, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v7 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
    sub_423980(v7, a1, a2, a3, (volatile LONG *)(v7 + 352));
  }
  sub_47E080((volatile LONG *)&unk_4E1858, a1, a2, a3);
  return v7;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0043A2C0) --------------------------------------------------------
int __usercall CMonster::GetMonsterList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  char v8; // [sp+0h] [bp-Ch]@2
  char v9; // [sp+4h] [bp-8h]@5
  char v10; // [sp+8h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E1858);
  sub_40F070((int)&unk_4E184C, &v10);
  while ( 1 )
  {
    v5 = sub_430C20((int)&unk_4E184C, &v8);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v10) + 4) + 440) + 60) == a5 )
    {
      v6 = sub_420250((int *)&v10);
      sub_47D000(a4, v6 + 4);
    }
    sub_446090((int *)&v10, (int)&v9, 0);
  }
  return sub_47E080((volatile LONG *)&unk_4E1858, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0043A350) --------------------------------------------------------
int __usercall CMonster::ScanMonster<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@2
  char v6; // [sp+0h] [bp-10h]@2
  char v7; // [sp+4h] [bp-Ch]@5
  char v8; // [sp+8h] [bp-8h]@1
  int v9; // [sp+Ch] [bp-4h]@1

  v9 = 0;
  sub_47DE70((volatile LONG *)&unk_4E1858);
  sub_40F070((int)&unk_4E184C, &v8);
  while ( 1 )
  {
    v4 = sub_430C20((int)&unk_4E184C, &v6);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v8) + 4) + 440) + 60) == a4 )
    {
      v9 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
      CIOObject::AddRef(v9, a1, a2, a3);
      break;
    }
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  sub_47E080((volatile LONG *)&unk_4E1858, a1, a2, a3);
  return v9;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0043A3F0) --------------------------------------------------------
int __usercall CMonster::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST0C_4@2
  int v6; // [sp+0h] [bp-8h]@1

  v6 = a1;
  CChar::Lock(a1, a2, a3, a4);
  (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v6 + 188))(v6, 0);
  (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 200))(v6);
  sub_4913E0(*(void **)(v6 + 320), a2, a3, a4, v6, v6 + 324);
  if ( *(_DWORD *)(v6 + 484) )
  {
    v4 = *(_DWORD *)(v6 + 484);
    *(_DWORD *)(v6 + 484) = 0;
    CChar::Unlock(v6, a2, a3, a4);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v4 + 172))(v4, *(_DWORD *)(*(_DWORD *)(v6 + 440) + 60));
  }
  else
  {
    CChar::Unlock(v6, a2, a3, a4);
  }
  return CBase::OnDelete(v6, a2, a3, a4);
}

//----- (0043A4A0) --------------------------------------------------------
void __userpurge CMonster::SendDelete(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CPlayer::Write(a1, a2, a3, a4, 56, (unsigned int)"d");
}

//----- (0043A4D0) --------------------------------------------------------
void __userpurge CMonster::SendCreate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // ST44_4@1

  v6 = a1;
  (*(void (**)(void))(*(_DWORD *)a1 + 240))();
  (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 224))(v6);
  CChar::GetMaxHP(v6);
  CPlayer::Write(a2, a3, a4, a5, 51, (unsigned int)"wdddwdddIsbds");
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0043A590) --------------------------------------------------------
int __userpurge CMonster::SetTarget<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  result = a1;
  if ( *(_DWORD *)(a1 + 464) )
    result = sub_4239C0(*(_DWORD *)(a1 + 464), a2, a3, a4, *(_DWORD *)(a1 + 464) + 356);
  *(_DWORD *)(v6 + 464) = a5;
  return result;
}

//----- (0043A5E0) --------------------------------------------------------
int __thiscall CMonster::SetProperty(int this, int a2)
{
  int result; // eax@1
  int v3; // ST08_4@1

  v3 = this;
  *(_DWORD *)(this + 440) = a2;
  strcpy((char *)(this + 32), (const char *)(a2 + 32));
  result = *(_DWORD *)(a2 + 68);
  *(_DWORD *)(v3 + 60) = result;
  return result;
}

//----- (0043A620) --------------------------------------------------------
signed int __usercall CMonster::AI<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CMonster::IsRemoved(a1, a2, a3, a4);
}

//----- (0043A640) --------------------------------------------------------
__int32 __userpurge CMonster::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST08_4@1
  int v7; // eax@1
  char v8; // [sp+4h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-10h]@1
  int v10; // [sp+10h] [bp-Ch]@1
  char v11; // [sp+14h] [bp-8h]@1

  v6 = a1;
  CIOObject::AddRef(a1, a2, a3, a4);
  CMonsterObject::Insert((int)&unk_4E1930, a2, a3, a4, v6 + 428);
  sub_47E0D0((volatile LONG *)&unk_4E1858);
  v10 = v6;
  v9 = *(_DWORD *)(v6 + 28);
  v7 = sub_420990((int)&v11, (int)&v9, (int)&v10);
  sub_445DF0((int)&unk_4E184C, (int)&v8, v7);
  return sub_47E1C0((volatile LONG *)&unk_4E1858, a2, a3, a4);
}

//----- (0043A6B0) --------------------------------------------------------
__int32 __usercall CMonster::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1
  int v6; // [sp+4h] [bp-4h]@1

  v5 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E1858);
  v6 = *(_DWORD *)(v5 + 28);
  sub_445FA0((int)&unk_4E184C, (int)&v6);
  return sub_47E1C0((volatile LONG *)&unk_4E1858, a2, a3, a4);
}

//----- (0043A6F0) --------------------------------------------------------
void *__thiscall CLink::Remove(void *this)
{
  void *result; // eax@1

  *(_DWORD *)(*(_DWORD *)this + 4) = *((_DWORD *)this + 1);
  result = this;
  **((_DWORD **)this + 1) = *(_DWORD *)this;
  return result;
}

//----- (0043A720) --------------------------------------------------------
int __usercall CMonster::GetOperatorName<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@2
  int v5; // eax@2
  int v6; // ST0C_4@2

  if ( *(_DWORD *)(a1 + 528) )
  {
    v5 = sub_450810(a2, a3, a4, *(_DWORD *)(a1 + 528));
    v6 = v5 + 32;
    sub_4239C0(v5, a2, a3, a4, v5 + 352);
    result = v6;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0043A770) --------------------------------------------------------
signed int __thiscall CMonster::CanAttack(int this, int a2, int a3)
{
  signed int result; // eax@3

  if ( a3 || !CChar::IsMState(this, 35184640524544i64) )
  {
    if ( CChar::IsMState(a2, 524288i64) )
      result = 0;
    else
      result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0043A7D0) --------------------------------------------------------
int __thiscall sub_43A7D0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_438DB0(this);
  *(_DWORD *)v2 = &off_4B91D8;
  sub_445C80((void *)(v2 + 560));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v2 + 572));
  CFindPath::CFindPath(v2 + 612);
  *(_DWORD *)(v2 + 548) = 0;
  *(_DWORD *)(v2 + 544) = 0;
  *(_DWORD *)(v2 + 552) = 0;
  *(_DWORD *)(v2 + 480) = 1;
  *(_DWORD *)(v2 + 540) = 0;
  *(_DWORD *)(v2 + 536) = 0;
  *(_DWORD *)(v2 + 556) = GetTickCount();
  *(_DWORD *)(v2 + 660) = *(_DWORD *)(v2 + 556);
  *(_DWORD *)(v2 + 604) = 0;
  *(_DWORD *)(v2 + 608) = 0;
  *(_DWORD *)(v2 + 652) = 0;
  *(_DWORD *)(v2 + 656) = 0;
  return v2;
}
// 4B91D8: using guessed type int (__stdcall *off_4B91D8)(int);

//----- (0043A8C0) --------------------------------------------------------
int __userpurge CMonsterReal::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonsterReal::_CMonsterReal(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0043A8F0) --------------------------------------------------------
int __thiscall CMonsterReal::CMonsterReal(int this, int a2)
{
  int v3; // ST04_4@1
  __int64 v4; // qax@1
  __int64 v5; // qax@1

  v3 = this;
  CMonster::CMonster(this, a2);
  *(_DWORD *)v3 = &off_4B91D8;
  sub_445C80((void *)(v3 + 560));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v3 + 572));
  CFindPath::CFindPath(v3 + 612);
  v4 = *(_DWORD *)(v3 + 456) + *(_DWORD *)(v3 + 448);
  *(_DWORD *)(v3 + 536) = ((_DWORD)v4 - HIDWORD(v4)) >> 1;
  v5 = *(_DWORD *)(v3 + 452) + *(_DWORD *)(v3 + 460);
  *(_DWORD *)(v3 + 540) = ((_DWORD)v5 - HIDWORD(v5)) >> 1;
  *(_DWORD *)(v3 + 552) = 0;
  *(_DWORD *)(v3 + 480) = 1;
  *(_DWORD *)(v3 + 556) = GetTickCount();
  *(_DWORD *)(v3 + 660) = *(_DWORD *)(v3 + 556);
  *(_DWORD *)(v3 + 604) = 0;
  *(_DWORD *)(v3 + 608) = 0;
  *(_DWORD *)(v3 + 652) = 0;
  *(_DWORD *)(v3 + 656) = 0;
  *(_DWORD *)(v3 + 512) = *(_DWORD *)(a2 + 32);
  return v3;
}
// 4B91D8: using guessed type int (__stdcall *off_4B91D8)(int);

//----- (0043AA00) --------------------------------------------------------
int __usercall CMonsterReal::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@2

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
  CMonsterReal::ResetHostility(v5, a2, a3, a4);
  (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 200))(v5);
  sub_4913E0(*(void **)(v5 + 320), a2, a3, a4, v5, v5 + 324);
  if ( *(_DWORD *)(v5 + 484) )
  {
    v6 = *(_DWORD *)(v5 + 484);
    *(_DWORD *)(v5 + 484) = 0;
    CChar::Unlock(v5, a2, a3, a4);
    if ( *(_DWORD *)(v5 + 512) != 331 )
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v6 + 172))(v6, *(_DWORD *)(*(_DWORD *)(v5 + 440) + 60));
  }
  else
  {
    CChar::Unlock(v5, a2, a3, a4);
  }
  return CBase::OnDelete(v5, a2, a3, a4);
}

//----- (0043AAC0) --------------------------------------------------------
void __userpurge CMonsterReal::SendCreate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // ST44_4@1

  v6 = a1;
  (*(void (**)(void))(*(_DWORD *)a1 + 240))();
  (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 224))(v6);
  CChar::GetMaxHP(v6);
  CPlayer::Write(a2, a3, a4, a5, 51, (unsigned int)"wdddwdddIsbds");
  if ( *(_DWORD *)(v6 + 260) )
    CPlayer::Write(a2, a3, a4, a5, 72, (unsigned int)"dbw");
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0043ABB0) --------------------------------------------------------
signed int __userpurge CMonsterReal::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@2
  int v11; // [sp+0h] [bp-20h]@11
  int v12; // [sp+4h] [bp-1Ch]@4
  int v13; // [sp+8h] [bp-18h]@1
  int v14; // [sp+Ch] [bp-14h]@14
  int v15; // [sp+10h] [bp-10h]@14
  int v16; // [sp+14h] [bp-Ch]@6
  int v17; // [sp+18h] [bp-8h]@10
  int v18; // [sp+1Ch] [bp-4h]@6

  v13 = a1;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 252))() )
  {
    result = 1;
  }
  else
  {
    if ( a10 )
      v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 52))(a10);
    else
      v12 = 1;
    v16 = v12;
    v18 = CChar::GetFinalDamage((void *)v13, a5, a6, v12);
    if ( v18 > 0 )
    {
      CMonsterReal::ManageBuff(v13, a2, a3, a4);
      CChar::Lock(v13, a2, a3, a4);
      if ( CMonsterReal::ApplyDamage(v13, a2, a3, a4, a5, a6, v18, a7, a8, a9, a10) )
      {
        v17 = *(_DWORD *)a9 + *(_DWORD *)a7;
        if ( a10 )
          v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 24))(a10);
        else
          v11 = 0;
        (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)v13 + 212))(v13, a5, v17, v11);
        if ( *(_DWORD *)(v13 + 272) > 0 )
        {
          (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v13 + 256))(v13, v17, v16);
          CChar::Unlock(v13, a2, a3, a4);
        }
        else
        {
          v15 = 0;
          v14 = 0;
          (*(void (__thiscall **)(int, int, _DWORD, int *, int *))(*(_DWORD *)v13 + 236))(
            v13,
            a5,
            *(_DWORD *)a8,
            &v15,
            &v14);
          CChar::Unlock(v13, a2, a3, a4);
          CMonsterReal::AllotTransformExp(v13, a2, a3, a4, v15, v14);
          CBase::Delete((void *)v13);
        }
        result = 1;
      }
      else
      {
        CChar::Unlock(v13, a2, a3, a4);
        result = 1;
      }
    }
    else
    {
      *(_DWORD *)a9 = 0;
      *(_DWORD *)a7 = 0;
      result = 0;
    }
  }
  return result;
}

//----- (0043AD50) --------------------------------------------------------
signed int __thiscall CChar::GetFinalDamage(void *this, int a2, int a3, int a4)
{
  int v5; // [sp+10h] [bp-10h]@5
  void *v6; // [sp+14h] [bp-Ch]@1
  int v7; // [sp+18h] [bp-8h]@1
  int v8; // [sp+1Ch] [bp-4h]@8
  signed int v9; // [sp+1Ch] [bp-4h]@10

  v6 = this;
  v7 = *(_DWORD *)(a2 + 60) - *((_DWORD *)this + 15);
  if ( a4 )
  {
    if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)this + 64))(this)
      || (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
    {
      if ( v7 < 0 )
        v5 = -dword_4D8398[abs(v7)];
      else
        v5 = dword_4D8398[v7];
      a3 += v5;
    }
    v8 = a3 - (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 136))(v6, a2);
    if ( v8 <= 0 )
      return 0;
    v9 = v8 - v8 * (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 140))(v6, a2) / 100;
  }
  else
  {
    v9 = a3 + v7 * abs(v7) / 4;
  }
  if ( CChar::IsBState(a2, 512i64) )
  {
    v9 += v9 / 10;
  }
  else
  {
    if ( CChar::IsBState(a2, 1073741824i64) )
      v9 += 7 * v9 / 100;
  }
  return v9;
}
// 4D8398: using guessed type int dword_4D8398[];

//----- (0043AEB0) --------------------------------------------------------
void __userpurge CMonsterReal::Defense(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  if ( !*(_DWORD *)(v5 + 464) )
  {
    sub_423980(a5, a2, a3, a4, (volatile LONG *)(a5 + 356));
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, a5);
  }
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0043AF00) --------------------------------------------------------
int __thiscall CMonsterReal::ReviseProperty(int this)
{
  int result; // eax@1
  int v2; // ST00_4@1
  int v3; // ST08_4@1

  v2 = this;
  CChar::ReviseProperty(this);
  v3 = *(_DWORD *)(v2 + 76);
  *(_DWORD *)(v2 + 84) += 2 * *(_DWORD *)(v2 + 68) * *(_DWORD *)(v2 + 68) / 10 + 115;
  *(_DWORD *)(v2 + 88) += v3 + 2 * v3 * v3 / 10;
  *(_DWORD *)(v2 + 272) = CChar::GetMaxHP(v2);
  result = CChar::GetMaxMP(v2);
  *(_DWORD *)(v2 + 276) = result;
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (0043AF90) --------------------------------------------------------
int __thiscall CChar::GetMaxMP(int this)
{
  return *(_DWORD *)(this + 116) + *(_DWORD *)(this + 88) + *(_DWORD *)(this + 212) * *(_DWORD *)(this + 88) / 100;
}
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (0043AFD0) --------------------------------------------------------
int __userpurge CMonsterReal::SetTarget<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonster::SetTarget(a1, a2, a3, a4, a5);
  result = sub_40F5F0(v6 + 488);
  if ( !result )
  {
    if ( a5 )
    {
      *(_DWORD *)(v6 + 480) = 4;
      *(_DWORD *)(v6 + 556) = 0;
    }
    else
    {
      result = v6;
      *(_DWORD *)(v6 + 480) = 1;
    }
  }
  return result;
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (0043B030) --------------------------------------------------------
__int32 __usercall CMonsterReal::UpdateProperty<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7)
{
  __int32 result; // eax@1
  int v8; // [sp+0h] [bp-14h]@9
  int v9; // [sp+4h] [bp-10h]@5

  result = (__int32)&a7;
  if ( a5 == 7 )
  {
    if ( a6 )
    {
      *(_DWORD *)(a4 + 272) += a7;
      if ( CChar::GetMaxHP(a4) >= *(_DWORD *)(a4 + 272) )
        v9 = *(_DWORD *)(a4 + 272);
      else
        v9 = CChar::GetMaxHP(a4);
      *(_DWORD *)(a4 + 272) = v9;
    }
    else
    {
      *(_DWORD *)(a4 + 272) -= a7;
      if ( *(_DWORD *)(a4 + 272) >= 0 )
        v8 = *(_DWORD *)(a4 + 272);
      else
        v8 = 0;
      *(_DWORD *)(a4 + 272) = v8;
    }
    result = CChar::WriteInSight(a1, a2, a3, a4, 72, (unsigned int)"dbd");
  }
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0043B130) --------------------------------------------------------
int __usercall CMonsterReal::UpdatePrtyPt<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8)
{
  int result; // eax@1
  int v9; // eax@3
  int v10; // eax@4
  signed int v11; // eax@7
  signed int v12; // eax@13
  signed int v13; // eax@20
  signed int v14; // eax@21
  signed int v15; // eax@24
  signed int v16; // eax@30
  signed int v17; // eax@37
  signed int v18; // eax@38
  int v19; // [sp+0h] [bp-50h]@32
  int v20; // [sp+4h] [bp-4Ch]@26
  int v21; // [sp+8h] [bp-48h]@15
  int v22; // [sp+Ch] [bp-44h]@9
  int v23; // [sp+18h] [bp-38h]@40
  signed int v24; // [sp+1Ch] [bp-34h]@36
  int v25; // [sp+20h] [bp-30h]@36
  int v26; // [sp+24h] [bp-2Ch]@24
  int v27; // [sp+24h] [bp-2Ch]@30
  int v28; // [sp+28h] [bp-28h]@23
  signed int v29; // [sp+2Ch] [bp-24h]@23
  signed int v30; // [sp+30h] [bp-20h]@19
  int v31; // [sp+34h] [bp-1Ch]@19
  int v32; // [sp+38h] [bp-18h]@7
  int v33; // [sp+38h] [bp-18h]@13
  signed int v34; // [sp+3Ch] [bp-14h]@6
  int v35; // [sp+40h] [bp-10h]@6
  int v36; // [sp+44h] [bp-Ch]@2
  int v37; // [sp+48h] [bp-8h]@2

  result = (int)&a7;
  switch ( a5 )
  {
    case 0:
      v37 = a7;
      v36 = CChar::GetStr(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 120) -= 15 * v36 / 54;
        *(_DWORD *)(a4 + 128) -= (11 * v36 - 80) / 30;
        *(_DWORD *)(a4 + 132) -= (8 * v36 - 25) / 15;
        *(_DWORD *)(a4 + 92) += v37;
        v9 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) += 15 * v9 / 54;
        *(_DWORD *)(a4 + 128) += (11 * v9 - 80) / 30;
        result = *(_DWORD *)(a4 + 132) + (8 * v9 - 25) / 15;
        *(_DWORD *)(a4 + 132) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 120) -= 15 * v36 / 54;
        *(_DWORD *)(a4 + 128) -= (11 * v36 - 80) / 30;
        *(_DWORD *)(a4 + 132) -= (8 * v36 - 25) / 15;
        *(_DWORD *)(a4 + 92) -= v37;
        v10 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) += 15 * v10 / 54;
        *(_DWORD *)(a4 + 128) += (11 * v10 - 80) / 30;
        result = *(_DWORD *)(a4 + 132) + (8 * v10 - 25) / 15;
        *(_DWORD *)(a4 + 132) = result;
      }
      break;
    case 1:
      v35 = a7;
      v34 = CChar::GetHth(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 84) -= 2 * v34 * v34 / 10 + 115;
        *(_DWORD *)(a4 + 176) -= v34 / 9;
        *(_DWORD *)(a4 + 96) += v35;
        v11 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) += 2 * v11 * v11 / 10 + 115;
        *(_DWORD *)(a4 + 176) += v11 / 9;
        v32 = CChar::GetMaxHP(a4);
        if ( v35 < 0 )
        {
          if ( *(_DWORD *)(a4 + 272) >= v32 )
            v22 = v32;
          else
            v22 = *(_DWORD *)(a4 + 272);
          *(_DWORD *)(a4 + 272) = v22;
        }
      }
      else
      {
        *(_DWORD *)(a4 + 84) -= 2 * v34 * v34 / 10 + 115;
        *(_DWORD *)(a4 + 176) -= v34 / 9;
        *(_DWORD *)(a4 + 96) -= v35;
        v12 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) += 2 * v12 * v12 / 10 + 115;
        *(_DWORD *)(a4 + 176) += v12 / 9;
        v33 = CChar::GetMaxHP(a4);
        if ( v35 > 0 )
        {
          if ( *(_DWORD *)(a4 + 272) >= v33 )
            v21 = v33;
          else
            v21 = *(_DWORD *)(a4 + 272);
          *(_DWORD *)(a4 + 272) = v21;
        }
      }
      result = CChar::WriteInSight(a1, a2, a3, a4, 72, (unsigned int)"dbd");
      break;
    case 2:
      v31 = a7;
      v30 = CChar::GetInt(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 136) -= (7 * v30 - 20) / 12;
        *(_DWORD *)(a4 + 140) -= 7 * v30 / 12;
        *(_DWORD *)(a4 + 160) -= v30 / 9;
        *(_DWORD *)(a4 + 164) -= v30 / 9;
        *(_DWORD *)(a4 + 168) -= v30 / 9;
        *(_DWORD *)(a4 + 100) += v31;
        v13 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) += (7 * v13 - 20) / 12;
        *(_DWORD *)(a4 + 140) += 7 * v13 / 12;
        *(_DWORD *)(a4 + 160) += v13 / 9;
        *(_DWORD *)(a4 + 164) += v13 / 9;
        result = *(_DWORD *)(a4 + 168) + v13 / 9;
        *(_DWORD *)(a4 + 168) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 136) -= (7 * v30 - 20) / 12;
        *(_DWORD *)(a4 + 140) -= 7 * v30 / 12;
        *(_DWORD *)(a4 + 160) -= v30 / 9;
        *(_DWORD *)(a4 + 164) -= v30 / 9;
        *(_DWORD *)(a4 + 168) -= v30 / 9;
        *(_DWORD *)(a4 + 100) -= v31;
        v14 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) += (7 * v14 - 20) / 12;
        *(_DWORD *)(a4 + 140) += 7 * v14 / 12;
        *(_DWORD *)(a4 + 160) += v14 / 9;
        *(_DWORD *)(a4 + 164) += v14 / 9;
        result = *(_DWORD *)(a4 + 168) + v14 / 9;
        *(_DWORD *)(a4 + 168) = result;
      }
      break;
    case 3:
      v28 = a7;
      v29 = CChar::GetWis(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 88) -= v29 + 2 * v29 * v29 / 10;
        *(_DWORD *)(a4 + 136) -= v29 / 7;
        *(_DWORD *)(a4 + 140) -= 14 * v29 / 45;
        *(_DWORD *)(a4 + 172) -= v29 / 9;
        *(_DWORD *)(a4 + 104) += v28;
        v15 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) += v15 + 2 * v15 * v15 / 10;
        *(_DWORD *)(a4 + 136) += v15 / 7;
        *(_DWORD *)(a4 + 140) += 14 * v15 / 45;
        *(_DWORD *)(a4 + 172) += v15 / 9;
        v26 = CChar::GetMaxMP(a4);
        if ( v28 < 0 )
        {
          if ( *(_DWORD *)(a4 + 276) >= v26 )
            v20 = v26;
          else
            v20 = *(_DWORD *)(a4 + 276);
          *(_DWORD *)(a4 + 276) = v20;
        }
      }
      else
      {
        *(_DWORD *)(a4 + 88) -= v29 + 2 * v29 * v29 / 10;
        *(_DWORD *)(a4 + 136) -= v29 / 7;
        *(_DWORD *)(a4 + 140) -= 14 * v29 / 45;
        *(_DWORD *)(a4 + 172) -= v29 / 9;
        *(_DWORD *)(a4 + 104) -= v28;
        v16 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) += v16 + 2 * v16 * v16 / 10;
        *(_DWORD *)(a4 + 136) += v16 / 7;
        *(_DWORD *)(a4 + 140) += 14 * v16 / 45;
        *(_DWORD *)(a4 + 172) += v16 / 9;
        v27 = CChar::GetMaxMP(a4);
        if ( v28 > 0 )
        {
          if ( *(_DWORD *)(a4 + 276) >= v27 )
            v19 = v27;
          else
            v19 = *(_DWORD *)(a4 + 276);
          *(_DWORD *)(a4 + 276) = v19;
        }
      }
      result = CChar::WriteInSight(a1, a2, a3, a4, 72, (unsigned int)"dbw");
      break;
    case 4:
      v25 = a7;
      v24 = CChar::GetDex(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 120) -= v24 / 8;
        *(_DWORD *)(a4 + 124) -= v24 / 3;
        *(_DWORD *)(a4 + 128) -= (v24 - 5) / 11;
        *(_DWORD *)(a4 + 132) -= 18 * v24 / 77;
        *(_DWORD *)(a4 + 108) += v25;
        v17 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) += v17 / 8;
        *(_DWORD *)(a4 + 124) += v17 / 3;
        *(_DWORD *)(a4 + 128) += (v17 - 5) / 11;
        result = *(_DWORD *)(a4 + 132) + 18 * v17 / 77;
        *(_DWORD *)(a4 + 132) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 120) -= v24 / 8;
        *(_DWORD *)(a4 + 124) -= v24 / 3;
        *(_DWORD *)(a4 + 128) -= (v24 - 5) / 11;
        *(_DWORD *)(a4 + 132) -= 18 * v24 / 77;
        *(_DWORD *)(a4 + 108) -= v25;
        v18 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) += v18 / 8;
        *(_DWORD *)(a4 + 124) += v18 / 3;
        *(_DWORD *)(a4 + 128) += (v18 - 5) / 11;
        result = *(_DWORD *)(a4 + 132) + 18 * v18 / 77;
        *(_DWORD *)(a4 + 132) = result;
      }
      break;
    case 15:
      v23 = a8;
      if ( a6 )
      {
        *(_DWORD *)(a4 + 144) += a7;
        result = v23 + *(_DWORD *)(a4 + 148);
        *(_DWORD *)(a4 + 148) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 144) -= a7;
        result = *(_DWORD *)(a4 + 148) - v23;
        *(_DWORD *)(a4 + 148) = result;
      }
      break;
    default:
      return result;
  }
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);

//----- (0043BE20) --------------------------------------------------------
int __thiscall CChar::GetStr(int this)
{
  int v2; // ST04_4@1

  v2 = *(_DWORD *)(this + 92) + *(_DWORD *)(this + 64);
  return v2 + *(_DWORD *)(this + 188) * v2 / 100;
}
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);

//----- (0043BE60) --------------------------------------------------------
int __thiscall CChar::GetHth(int this)
{
  int v2; // ST04_4@1

  v2 = *(_DWORD *)(this + 96) + *(_DWORD *)(this + 68);
  return v2 + *(_DWORD *)(this + 192) * v2 / 100;
}
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);

//----- (0043BEA0) --------------------------------------------------------
int __thiscall CChar::GetInt(int this)
{
  int v2; // ST04_4@1

  v2 = *(_DWORD *)(this + 100) + *(_DWORD *)(this + 72);
  return v2 + *(_DWORD *)(this + 196) * v2 / 100;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0043BEE0) --------------------------------------------------------
int __thiscall CChar::GetWis(int this)
{
  int v2; // ST04_4@1

  v2 = *(_DWORD *)(this + 104) + *(_DWORD *)(this + 76);
  return v2 + *(_DWORD *)(this + 200) * v2 / 100;
}
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);

//----- (0043BF20) --------------------------------------------------------
int __thiscall CChar::GetDex(int this)
{
  int v2; // ST04_4@1

  v2 = *(_DWORD *)(this + 108) + *(_DWORD *)(this + 80);
  return v2 + *(_DWORD *)(this + 204) * v2 / 100;
}
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);

//----- (0043BF60) --------------------------------------------------------
int __usercall CMonsterReal::UpdatePrtyPer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8)
{
  int result; // eax@1
  int v9; // eax@3
  int v10; // eax@4
  signed int v11; // eax@7
  signed int v12; // eax@13
  signed int v13; // eax@20
  signed int v14; // eax@21
  signed int v15; // eax@24
  signed int v16; // eax@30
  signed int v17; // eax@37
  signed int v18; // eax@38
  DWORD v19; // ST38_4@52
  int v20; // [sp+0h] [bp-68h]@32
  int v21; // [sp+4h] [bp-64h]@26
  int v22; // [sp+8h] [bp-60h]@15
  int v23; // [sp+Ch] [bp-5Ch]@9
  int v24; // [sp+18h] [bp-50h]@52
  unsigned int v25; // [sp+1Ch] [bp-4Ch]@52
  int v26; // [sp+30h] [bp-38h]@40
  signed int v27; // [sp+34h] [bp-34h]@36
  int v28; // [sp+38h] [bp-30h]@36
  int v29; // [sp+3Ch] [bp-2Ch]@24
  int v30; // [sp+3Ch] [bp-2Ch]@30
  int v31; // [sp+40h] [bp-28h]@23
  signed int v32; // [sp+44h] [bp-24h]@23
  signed int v33; // [sp+48h] [bp-20h]@19
  int v34; // [sp+4Ch] [bp-1Ch]@19
  int v35; // [sp+50h] [bp-18h]@7
  int v36; // [sp+50h] [bp-18h]@13
  signed int v37; // [sp+54h] [bp-14h]@6
  int v38; // [sp+58h] [bp-10h]@6
  int v39; // [sp+5Ch] [bp-Ch]@2
  int v40; // [sp+60h] [bp-8h]@2

  result = (int)&a7;
  switch ( a5 )
  {
    case 0:
      v40 = a7;
      v39 = CChar::GetStr(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 120) -= 15 * v39 / 54;
        *(_DWORD *)(a4 + 128) -= (11 * v39 - 80) / 30;
        *(_DWORD *)(a4 + 132) -= (8 * v39 - 25) / 15;
        *(_DWORD *)(a4 + 188) += v40;
        v9 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) += 15 * v9 / 54;
        *(_DWORD *)(a4 + 128) += (11 * v9 - 80) / 30;
        result = *(_DWORD *)(a4 + 132) + (8 * v9 - 25) / 15;
        *(_DWORD *)(a4 + 132) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 120) -= 15 * v39 / 54;
        *(_DWORD *)(a4 + 128) -= (11 * v39 - 80) / 30;
        *(_DWORD *)(a4 + 132) -= (8 * v39 - 25) / 15;
        *(_DWORD *)(a4 + 188) -= v40;
        v10 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) += 15 * v10 / 54;
        *(_DWORD *)(a4 + 128) += (11 * v10 - 80) / 30;
        result = *(_DWORD *)(a4 + 132) + (8 * v10 - 25) / 15;
        *(_DWORD *)(a4 + 132) = result;
      }
      break;
    case 1:
      v38 = a7;
      v37 = CChar::GetHth(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 84) -= 2 * v37 * v37 / 10 + 115;
        *(_DWORD *)(a4 + 176) -= v37 / 9;
        *(_DWORD *)(a4 + 192) += v38;
        v11 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) += 2 * v11 * v11 / 10 + 115;
        *(_DWORD *)(a4 + 176) += v11 / 9;
        v35 = CChar::GetMaxHP(a4);
        if ( v38 < 0 )
        {
          if ( *(_DWORD *)(a4 + 272) >= v35 )
            v23 = v35;
          else
            v23 = *(_DWORD *)(a4 + 272);
          *(_DWORD *)(a4 + 272) = v23;
        }
      }
      else
      {
        *(_DWORD *)(a4 + 84) -= 2 * v37 * v37 / 10 + 115;
        *(_DWORD *)(a4 + 176) -= v37 / 9;
        *(_DWORD *)(a4 + 192) -= v38;
        v12 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) += 2 * v12 * v12 / 10 + 115;
        *(_DWORD *)(a4 + 176) += v12 / 9;
        v36 = CChar::GetMaxHP(a4);
        if ( v38 > 0 )
        {
          if ( *(_DWORD *)(a4 + 272) >= v36 )
            v22 = v36;
          else
            v22 = *(_DWORD *)(a4 + 272);
          *(_DWORD *)(a4 + 272) = v22;
        }
      }
      result = CChar::WriteInSight(a1, a2, a3, a4, 72, (unsigned int)"dbd");
      break;
    case 2:
      v34 = a7;
      v33 = CChar::GetInt(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 136) -= (7 * v33 - 20) / 12;
        *(_DWORD *)(a4 + 140) -= 7 * v33 / 12;
        *(_DWORD *)(a4 + 160) -= v33 / 9;
        *(_DWORD *)(a4 + 164) -= v33 / 9;
        *(_DWORD *)(a4 + 168) -= v33 / 9;
        *(_DWORD *)(a4 + 196) += v34;
        v13 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) += (7 * v13 - 20) / 12;
        *(_DWORD *)(a4 + 140) += 7 * v13 / 12;
        *(_DWORD *)(a4 + 160) += v13 / 9;
        *(_DWORD *)(a4 + 164) += v13 / 9;
        result = *(_DWORD *)(a4 + 168) + v13 / 9;
        *(_DWORD *)(a4 + 168) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 136) -= (7 * v33 - 20) / 12;
        *(_DWORD *)(a4 + 140) -= 7 * v33 / 12;
        *(_DWORD *)(a4 + 160) -= v33 / 9;
        *(_DWORD *)(a4 + 164) -= v33 / 9;
        *(_DWORD *)(a4 + 168) -= v33 / 9;
        *(_DWORD *)(a4 + 196) -= v34;
        v14 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) += (7 * v14 - 20) / 12;
        *(_DWORD *)(a4 + 140) += 7 * v14 / 12;
        *(_DWORD *)(a4 + 160) += v14 / 9;
        *(_DWORD *)(a4 + 164) += v14 / 9;
        result = *(_DWORD *)(a4 + 168) + v14 / 9;
        *(_DWORD *)(a4 + 168) = result;
      }
      break;
    case 3:
      v31 = a7;
      v32 = CChar::GetWis(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 88) -= v32 + 2 * v32 * v32 / 10;
        *(_DWORD *)(a4 + 136) -= v32 / 7;
        *(_DWORD *)(a4 + 140) -= 14 * v32 / 45;
        *(_DWORD *)(a4 + 172) -= v32 / 9;
        *(_DWORD *)(a4 + 200) += v31;
        v15 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) += v15 + 2 * v15 * v15 / 10;
        *(_DWORD *)(a4 + 136) += v15 / 7;
        *(_DWORD *)(a4 + 140) += 14 * v15 / 45;
        *(_DWORD *)(a4 + 172) += v15 / 9;
        v29 = CChar::GetMaxMP(a4);
        if ( v31 < 0 )
        {
          if ( *(_DWORD *)(a4 + 276) >= v29 )
            v21 = v29;
          else
            v21 = *(_DWORD *)(a4 + 276);
          *(_DWORD *)(a4 + 276) = v21;
        }
      }
      else
      {
        *(_DWORD *)(a4 + 88) -= v32 + 2 * v32 * v32 / 10;
        *(_DWORD *)(a4 + 136) -= v32 / 7;
        *(_DWORD *)(a4 + 140) -= 14 * v32 / 45;
        *(_DWORD *)(a4 + 172) -= v32 / 9;
        *(_DWORD *)(a4 + 104) -= v31;
        v16 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) += v16 + 2 * v16 * v16 / 10;
        *(_DWORD *)(a4 + 136) += v16 / 7;
        *(_DWORD *)(a4 + 140) += 14 * v16 / 45;
        *(_DWORD *)(a4 + 172) += v16 / 9;
        v30 = CChar::GetMaxMP(a4);
        if ( v31 > 0 )
        {
          if ( *(_DWORD *)(a4 + 276) >= v30 )
            v20 = v30;
          else
            v20 = *(_DWORD *)(a4 + 276);
          *(_DWORD *)(a4 + 276) = v20;
        }
      }
      result = CChar::WriteInSight(a1, a2, a3, a4, 72, (unsigned int)"dbw");
      break;
    case 4:
      v28 = a7;
      v27 = CChar::GetDex(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 120) -= v27 / 8;
        *(_DWORD *)(a4 + 124) -= v27 / 3;
        *(_DWORD *)(a4 + 128) -= (v27 - 5) / 11;
        *(_DWORD *)(a4 + 132) -= 18 * v27 / 77;
        *(_DWORD *)(a4 + 204) += v28;
        v17 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) += v17 / 8;
        *(_DWORD *)(a4 + 124) += v17 / 3;
        *(_DWORD *)(a4 + 128) += (v17 - 5) / 11;
        result = *(_DWORD *)(a4 + 132) + 18 * v17 / 77;
        *(_DWORD *)(a4 + 132) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 120) -= v27 / 8;
        *(_DWORD *)(a4 + 124) -= v27 / 3;
        *(_DWORD *)(a4 + 128) -= (v27 - 5) / 11;
        *(_DWORD *)(a4 + 132) -= 18 * v27 / 77;
        *(_DWORD *)(a4 + 204) -= v28;
        v18 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) += v18 / 8;
        *(_DWORD *)(a4 + 124) += v18 / 3;
        *(_DWORD *)(a4 + 128) += (v18 - 5) / 11;
        result = *(_DWORD *)(a4 + 132) + 18 * v18 / 77;
        *(_DWORD *)(a4 + 132) = result;
      }
      break;
    case 15:
      v26 = a8;
      if ( a6 )
      {
        *(_DWORD *)(a4 + 240) += a7;
        result = v26 + *(_DWORD *)(a4 + 244);
        *(_DWORD *)(a4 + 244) = result;
      }
      else
      {
        *(_DWORD *)(a4 + 240) -= a7;
        result = *(_DWORD *)(a4 + 244) - v26;
        *(_DWORD *)(a4 + 244) = result;
      }
      break;
    case 9:
      if ( a6 )
      {
        result = a7 + *(_DWORD *)(a4 + 216);
        *(_DWORD *)(a4 + 216) = result;
      }
      else
      {
        result = *(_DWORD *)(a4 + 216) - a7;
        *(_DWORD *)(a4 + 216) = result;
      }
      break;
    case 32:
      if ( a6 )
        *(_DWORD *)(a4 + 260) += a7;
      else
        *(_DWORD *)(a4 + 260) -= a7;
      if ( !*(_DWORD *)(a4 + 260) )
      {
        v19 = GetTickCount();
        v25 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a4 + 152))(a4, 1);
        v24 = *(_DWORD *)(a4 + 556) - v19;
        if ( *(_DWORD *)(a4 + 556) != v19 )
        {
          if ( v24 < v25 )
            *(_DWORD *)(a4 + 556) -= v24 * v25 / v25;
        }
      }
      result = CChar::WriteInSight(a1, a2, a3, a4, 72, (unsigned int)"dbw");
      break;
    case 17:
      if ( a6 )
      {
        result = a4;
        *(_DWORD *)(a4 + 252) += a7;
      }
      else
      {
        result = a4;
        *(_DWORD *)(a4 + 252) -= a7;
      }
      break;
    default:
      return result;
  }
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);

//----- (0043CE00) --------------------------------------------------------
LONG __userpurge CPlayer::AddMState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST18_4@1

  v7 = a1;
  CChar::AddMState(a1, a5, a6);
  return CChar::WriteInSight(a2, a3, a4, v7, 71, (unsigned int)&unk_4B92DC);
}

//----- (0043CE50) --------------------------------------------------------
LONG __userpurge CPlayer::SubMState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST18_4@1

  v7 = a1;
  CChar::SubMState(a1, a5, a6);
  return CChar::WriteInSight(a2, a3, a4, v7, 71, (unsigned int)&unk_4B92DC);
}

//----- (0043CEA0) --------------------------------------------------------
int __thiscall CMonsterReal::SetProperty(int this, int a2)
{
  int v3; // ST0C_4@1

  v3 = this;
  CMonster::SetProperty(this, a2);
  memcpy((void *)(v3 + 64), (const void *)(a2 + 136), 0x1Cu);
  memcpy((void *)(v3 + 92), (const void *)(a2 + 164), 0x60u);
  *(_DWORD *)(v3 + 312) = *(_DWORD *)(a2 + 120);
  memcpy((void *)(v3 + 544), (const void *)(a2 + 124), 8u);
  (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 84))(v3);
  CFindPath::Init(v3 + 612, v3, *(_DWORD *)(v3 + 320), *(_DWORD *)(v3 + 312) * *(_DWORD *)(v3 + 312));
  return sub_480A80((void *)(v3 + 488), v3);
}

//----- (0043CF70) --------------------------------------------------------
int __thiscall CFindPath::Init(int this, int a2, int a3, int a4)
{
  int result; // eax@1

  *(_DWORD *)this = a2;
  result = a3;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 36) = a4;
  return result;
}

//----- (0043CFA0) --------------------------------------------------------
LONG __userpurge CMonsterReal::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  LONG result; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CMonster::Add(a1, a2, a3, a4, a5);
  result = InterlockedIncrement(&dword_4E1810);
  if ( a5 )
  {
    result = CIOObject::AddRef(a5, a2, a3, a4);
    *(_DWORD *)(v6 + 484) = a5;
  }
  return result;
}

//----- (0043CFE0) --------------------------------------------------------
int __usercall CMonsterReal::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST08_4@1
  void *v5; // eax@1
  int v6; // eax@2
  char v8; // [sp+4h] [bp-8h]@1
  char v9; // [sp+8h] [bp-4h]@1

  v4 = a1;
  CMonster::Remove(a1, a2, a3, a4);
  InterlockedDecrement(&dword_4E1810);
  sub_47DE70((volatile LONG *)&unk_4E187C);
  sub_44AE20((int)&unk_4E1870, (int)&v9, v4 + 444);
  v5 = sub_430C20((int)&unk_4E1870, &v8);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v6 = sub_420250((int *)&v9);
    InterlockedDecrement((volatile LONG *)(*(_DWORD *)(v6 + 4) + 48));
  }
  return sub_47E080((volatile LONG *)&unk_4E187C, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0043D060) --------------------------------------------------------
void __usercall CMonsterReal::AI(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = (int)this;
  if ( !CMonster::IsRemoved((int)this, a2, a3, a4) )
  {
    if ( !CChar::IsGState(v4, 1) )
    {
      CChar::Lock(v4, a2, a3, a4);
      if ( *(_DWORD *)(v4 + 464) )
      {
        if ( !CChar::IsNormal(*(_DWORD *)(v4 + 464)) )
        {
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 132))(v4, *(_DWORD *)(v4 + 464));
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 188))(v4, 0);
        }
      }
      switch ( *(_DWORD *)(v4 + 480) )
      {
        case 1:
        case 2:
        case 3:
        case 7:
          (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 248))(v4);
          break;
        case 4:
          (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 244))(v4);
          break;
        default:
          break;
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}

//----- (0043D140) --------------------------------------------------------
void __usercall CMonsterReal::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@6
  DWORD v6; // [sp+8h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v6 = GetTickCount();
    if ( CChar::IsGState(v4, 1) && v6 >= *(_DWORD *)(v4 + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v6 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0043D210) --------------------------------------------------------
int __userpurge CMonsterReal::AddHostility<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, int a3, signed int a4)
{
  int result; // eax@1
  void *v8; // eax@10
  int v9; // eax@11
  int v10; // eax@14
  signed int v11; // [sp+4h] [bp-30h]@7
  void *v12; // [sp+10h] [bp-24h]@1
  char v13; // [sp+14h] [bp-20h]@11
  char v14; // [sp+1Ch] [bp-18h]@10
  char v15; // [sp+20h] [bp-14h]@11
  char v16; // [sp+24h] [bp-10h]@11
  int v17; // [sp+28h] [bp-Ch]@3
  int v18; // [sp+2Ch] [bp-8h]@13
  char v19; // [sp+30h] [bp-4h]@10

  v12 = this;
  result = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2);
  if ( result )
  {
    v17 = a2;
    if ( CChar::IsMState(a2, 16384i64) )
      a4 += *(_DWORD *)(v17 + 268);
    if ( a4 )
    {
      if ( a4 <= -100 )
        v11 = -100;
      else
        v11 = a4;
      a3 += v11 * a3 / 100;
    }
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)((char *)v12 + 572), ebx0, edi0, esi0);
    *((_DWORD *)v12 + 151) += a3;
    sub_446130((int)((char *)v12 + 560), (int)&v19, (int)&v17);
    v8 = sub_430C20((int)((char *)v12 + 560), &v14);
    if ( (unsigned __int8)unknown_libname_8(v8) )
    {
      CIOObject::AddRef(v17, ebx0, edi0, esi0);
      v9 = sub_420990((int)&v13, (int)&v17, (int)&a3);
      sub_48D6D0((int)((char *)v12 + 560), (int)&v15, v9);
      if ( !v16 )
        CIOObject::Release(v17, ebx0, edi0, esi0);
      v18 = a3;
    }
    else
    {
      v10 = sub_420250((int *)&v19);
      *(_DWORD *)(v10 + 4) += a3;
      v18 = *(_DWORD *)(sub_420250((int *)&v19) + 4);
    }
    CIOCriticalSection::Leave((int)((char *)v12 + 572), ebx0, edi0, esi0);
    if ( *((_DWORD *)v12 + 116) )
    {
      result = *((_DWORD *)v12 + 116);
      if ( result == a2 )
      {
        result = (int)v12;
        *((_DWORD *)v12 + 152) = v18;
      }
      else
      {
        if ( *((_DWORD *)v12 + 152) < v18 )
        {
          sub_423980(a2, ebx0, edi0, esi0, (volatile LONG *)(a2 + 356));
          result = (*(int (__thiscall **)(void *, int))(*(_DWORD *)v12 + 188))(v12, a2);
          *((_DWORD *)v12 + 152) = v18;
        }
      }
    }
    else
    {
      sub_423980(a2, ebx0, edi0, esi0, (volatile LONG *)(a2 + 356));
      (*(void (__thiscall **)(void *, int))(*(_DWORD *)v12 + 188))(v12, a2);
      result = (int)v12;
      *((_DWORD *)v12 + 152) = v18;
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0043D410) --------------------------------------------------------
void __userpurge CMonsterReal::RemoveHostility(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@1

  v5 = a1;
  v6 = a5;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 572), a2, a3, a4);
  if ( sub_445CD0(v5 + 560, (int)&v6) )
  {
    if ( v6 == *(_DWORD *)(v5 + 464) )
      *(_DWORD *)(v5 + 608) = 0;
    CIOObject::Release(v6, a2, a3, a4);
  }
  CIOCriticalSection::Leave(v5 + 572, a2, a3, a4);
}

//----- (0043D480) --------------------------------------------------------
int __thiscall CMonsterReal::GetMSpeed(int this, int a2)
{
  int result; // eax@2
  int v3; // [sp+0h] [bp-Ch]@4
  int v4; // [sp+8h] [bp-4h]@1

  v4 = *(_DWORD *)(*(_DWORD *)(this + 440) + 4 * a2 + 260);
  if ( *(_DWORD *)(this + 260) )
  {
    if ( *(_DWORD *)(this + 260) <= 0 )
      v3 = v4 * (abs(*(_DWORD *)(this + 260)) + 100) / 100;
    else
      v3 = 100 * v4 / (*(_DWORD *)(this + 260) + 100);
    result = v3;
  }
  else
  {
    result = *(_DWORD *)(*(_DWORD *)(this + 440) + 4 * a2 + 260);
  }
  return result;
}

//----- (0043D510) --------------------------------------------------------
int __usercall CMonsterReal::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  __int64 v4; // qax@1
  int v5; // eax@20
  int v7; // [sp+0h] [bp-58h]@17
  int v8; // [sp+2Ch] [bp-2Ch]@1
  int v9; // [sp+30h] [bp-28h]@14
  int v10; // [sp+34h] [bp-24h]@14
  int v11; // [sp+38h] [bp-20h]@14
  int v12; // [sp+3Ch] [bp-1Ch]@14
  int v13; // [sp+40h] [bp-18h]@14
  int v14; // [sp+44h] [bp-14h]@14
  __int64 v15; // [sp+48h] [bp-10h]@5
  int v16; // [sp+54h] [bp-4h]@3

  v8 = a1;
  v4 = CChar::IsMState(a1, 268435712i64);
  LODWORD(v4) = HIDWORD(v4) | v4;
  if ( !(_DWORD)v4 )
  {
    LODWORD(v4) = GetTickCount();
    v16 = v4;
    if ( (_DWORD)v4 >= *(_DWORD *)(v8 + 468) )
    {
      v15 = sub_43D870(v8 + 332, *(_DWORD *)(v8 + 464) + 332);
      if ( *(_DWORD *)(v8 + 316) == *(_DWORD *)(*(_DWORD *)(v8 + 464) + 316)
        && v15 <= *(_DWORD *)(v8 + 548) * *(_DWORD *)(v8 + 548) )
      {
        if ( v15 <= *(_DWORD *)(v8 + 312) * *(_DWORD *)(v8 + 312) )
        {
          if ( *(_DWORD *)(v8 + 464) == *(_DWORD *)(v8 + 484) )
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
            LODWORD(v4) = v8;
            *(_DWORD *)(v8 + 480) = 1;
          }
          else
          {
            *(_DWORD *)(v8 + 468) = v16 + CChar::GetASpeed(v8);
            *(_DWORD *)(v8 + 556) = *(_DWORD *)(v8 + 468);
            CChar::SetDirection(
              (void *)v8,
              *(_DWORD *)(*(_DWORD *)(v8 + 464) + 332) - *(_DWORD *)(v8 + 332),
              *(_DWORD *)(*(_DWORD *)(v8 + 464) + 336) - *(_DWORD *)(v8 + 336));
            v12 = 0;
            v9 = 0;
            v14 = 0;
            v13 = 0;
            v11 = *(_DWORD *)(v8 + 464);
            sub_423980(v11, a2, a3, a4, (volatile LONG *)(v11 + 352));
            v10 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 168))(v8, v11);
            v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v11 + 148))(v11, v8);
            if ( !v13 )
            {
              if ( (*(int (__thiscall **)(int))(*(_DWORD *)v11 + 60))(v11) )
              {
                if ( CChar::IsBState(v11, 32768i64) )
                  v7 = -5;
                else
                  v7 = 0;
                if ( CChar::CheckHit((void *)v8, v11, v7) )
                {
                  CChar::Unlock(v8, a2, a3, a4);
                  v5 = CChar::GetAttack(v8);
                  v14 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, _DWORD))(*(_DWORD *)v11 + 72))(
                          v11,
                          v8,
                          v5,
                          &v12,
                          &v9,
                          &v10,
                          0);
                  CChar::Lock(v8, a2, a3, a4);
                }
              }
            }
            if ( !v14 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)v11 + 80))(v11, v8);
            std___Mpunct_wchar_t___do_frac_digits(v11);
            CChar::WriteInSight(a2, a3, a4, v8, 62, (unsigned int)"ddwwb");
            LODWORD(v4) = sub_4239C0(v11, a2, a3, a4, v11 + 352);
          }
        }
        else
        {
          v4 = CChar::IsMState(v8, 512i64);
          if ( !v4 )
          {
            *(_DWORD *)(v8 + 652) = 1;
            LODWORD(v4) = v8;
            *(_DWORD *)(v8 + 480) = 2;
          }
        }
      }
      else
      {
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
        LODWORD(v4) = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
      }
    }
  }
  return v4;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (0043D870) --------------------------------------------------------
__int64 __cdecl sub_43D870(int a1, int a2)
{
  __int64 v3; // ST00_8@1

  v3 = *(_DWORD *)(a1 + 4) - *(_DWORD *)(a2 + 4);
  return v3 * v3 + (*(_DWORD *)a1 - *(_DWORD *)a2) * (*(_DWORD *)a1 - *(_DWORD *)a2);
}

//----- (0043D8E0) --------------------------------------------------------
signed int __thiscall CChar::GetASpeed(int this)
{
  signed int result; // eax@2
  int v2; // [sp+0h] [bp-Ch]@6
  int v3; // [sp+8h] [bp-4h]@1

  v3 = *(_DWORD *)(this + 156);
  if ( v3 )
  {
    if ( *(_DWORD *)(this + 252) )
    {
      if ( *(_DWORD *)(this + 252) <= 0 )
        v2 = v3 * (abs(*(_DWORD *)(this + 252)) + 100) / 100;
      else
        v2 = 100 * v3 / (*(_DWORD *)(this + 252) + 100);
      result = v2;
    }
    else
    {
      result = *(_DWORD *)(this + 156);
    }
  }
  else
  {
    result = 2147483647;
  }
  return result;
}

//----- (0043D970) --------------------------------------------------------
int __thiscall CChar::GetAttack(int this)
{
  int v2; // ST08_4@1
  int v3; // ST04_4@1
  int v4; // eax@1

  v2 = this;
  v3 = CChar::GetMaxAttack(this);
  v4 = CChar::GetMinAttack(v2);
  return sub_406E10(v4, v3);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);

//----- (0043D9A0) --------------------------------------------------------
int __thiscall CChar::GetMinAttack(int this)
{
  return *(_DWORD *)(this + 128) + *(_DWORD *)(this + 224) * *(_DWORD *)(this + 128) / 100;
}
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);

//----- (0043D9D0) --------------------------------------------------------
int __thiscall CChar::GetMaxAttack(int this)
{
  return *(_DWORD *)(this + 132) + *(_DWORD *)(this + 228) * *(_DWORD *)(this + 132) / 100;
}

//----- (0043DA00) --------------------------------------------------------
bool __thiscall CChar::CheckHit(void *this, int a2, int a3)
{
  bool result; // eax@2
  int v4; // esi@6
  int v5; // [sp+4h] [bp-30h]@16
  int v6; // [sp+18h] [bp-1Ch]@4
  int v7; // [sp+24h] [bp-10h]@1
  int v8; // [sp+28h] [bp-Ch]@6
  int v9; // [sp+2Ch] [bp-8h]@3

  v7 = (int)this;
  if ( CChar::IsMState((int)this, 33554432i64) )
  {
    result = 1;
  }
  else
  {
    v9 = *(_DWORD *)(v7 + 60) - *(_DWORD *)(a2 + 60);
    if ( v9 < 0 )
      v6 = -dword_4D8130[abs(v9)];
    else
      v6 = dword_4D8130[v9];
    v4 = CChar::GetHit(v7);
    v8 = a3 + v6 + v4 - CChar::GetDodge(a2);
    if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
    {
      if ( CChar::IsBState(v7, 16384i64) )
      {
        v8 += 10;
      }
      else
      {
        if ( CChar::IsBState(v7, 536870912i64) )
          v8 += 5;
      }
    }
    if ( v8 <= 41 )
    {
      if ( v8 < -41 )
        v8 = -41;
    }
    else
    {
      v8 = 41;
    }
    if ( v8 < 0 )
      v5 = 100 - dword_4D82C8[abs(v8)];
    else
      v5 = dword_4D82C8[v8];
    result = v5 >= sub_406E10(1, 100);
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D8130: using guessed type int dword_4D8130[];
// 4D82C8: using guessed type int dword_4D82C8[];

//----- (0043DB60) --------------------------------------------------------
int __thiscall CChar::GetHit(int this)
{
  return *(_DWORD *)(this + 120) + *(_DWORD *)(this + 216) * *(_DWORD *)(this + 120) / 100;
}

//----- (0043DB90) --------------------------------------------------------
int __thiscall CChar::GetDodge(int this)
{
  return *(_DWORD *)(this + 124) + *(_DWORD *)(this + 220) * *(_DWORD *)(this + 124) / 100;
}

//----- (0043DBC0) --------------------------------------------------------
int __usercall CMonsterReal::Move<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  __int64 v5; // qax@1
  __int64 v6; // [sp+8h] [bp-64h]@28
  int v7; // [sp+18h] [bp-54h]@13
  int v8; // [sp+1Ch] [bp-50h]@3
  int v9; // [sp+28h] [bp-44h]@1
  int v10; // [sp+2Ch] [bp-40h]@42
  int v11; // [sp+30h] [bp-3Ch]@43
  __int64 v12; // [sp+34h] [bp-38h]@40
  int v13; // [sp+40h] [bp-2Ch]@42
  int v14; // [sp+44h] [bp-28h]@32
  int v15; // [sp+48h] [bp-24h]@33
  __int64 v16; // [sp+4Ch] [bp-20h]@25
  int v17; // [sp+58h] [bp-14h]@32
  int v18; // [sp+5Ch] [bp-10h]@18
  int v19; // [sp+60h] [bp-Ch]@9
  int v20; // [sp+64h] [bp-8h]@10
  unsigned int v21; // [sp+68h] [bp-4h]@3

  v9 = a1;
  v5 = CChar::IsMState(a1, 268436224i64);
  result = HIDWORD(v5) | v5;
  if ( !result )
  {
    result = GetTickCount();
    v21 = result;
    v8 = *(_DWORD *)(v9 + 480);
    switch ( v8 )
    {
      case 1:
        result = v9;
        if ( v21 >= *(_DWORD *)(v9 + 556) )
        {
          if ( CMonsterReal::GetRandomPt(v9, a2, a3, a4, (int)&v19)
            && (++*(_DWORD *)(v9 + 552),
                *(_DWORD *)(v9 + 656) = (*(_DWORD *)(v9 + 552) & 3) == 0,
                sub_4925C0(*(void **)(v9 + 320), a2, a3, a4, v9, v19, v20, *(_DWORD *)(v9 + 656), 0)) )
          {
            if ( *(_DWORD *)(v9 + 656) )
              v7 = 20000;
            else
              v7 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 152))(v9, 0);
            *(_DWORD *)(v9 + 556) = v7 + v21;
            result = v9;
            if ( *(_DWORD *)(v9 + 656) )
            {
              if ( *(_DWORD *)(v9 + 476) )
              {
                result = CMonsterReal::ScanSight(v9, a2, a3, a4);
                v18 = result;
                if ( result )
                {
                  *(_DWORD *)(v9 + 656) = 0;
                  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)v9 + 188))(v9, v18);
                }
              }
            }
          }
          else
          {
            *(_DWORD *)(v9 + 656) = 0;
            result = v9;
            --*(_DWORD *)(v9 + 552);
          }
        }
        break;
      case 2:
        if ( !dword_4E1A64 )
        {
          result = v21;
          dword_4E1A64 = v21;
        }
        if ( v21 >= *(_DWORD *)(v9 + 556) )
        {
          v16 = sub_43D870(v9 + 332, *(_DWORD *)(v9 + 464) + 332);
          if ( *(_DWORD *)(v9 + 316) == *(_DWORD *)(*(_DWORD *)(v9 + 464) + 316)
            && v16 <= *(_DWORD *)(v9 + 548) * *(_DWORD *)(v9 + 548) )
          {
            result = *(_DWORD *)(v9 + 312) * *(_DWORD *)(v9 + 312);
            v6 = *(_DWORD *)(v9 + 312) * *(_DWORD *)(v9 + 312);
            if ( HIDWORD(v16) > HIDWORD(v6) || HIDWORD(v16) >= HIDWORD(v6) && (result = v16, (_DWORD)v16 > (_DWORD)v6) )
            {
              v17 = (*(int (__thiscall **)(int, signed int))(*(_DWORD *)v9 + 152))(v9, 1);
              if ( CMonsterReal::GetChasePt(v9, a2, a3, a4, (int)&v14, (int)&v17)
                && sub_4925C0(*(void **)(v9 + 320), a2, a3, a4, v9, v14, v15, 0, 1) )
              {
                *(_DWORD *)(v9 + 556) = v17 + v21;
                result = v9;
                *(_DWORD *)(v9 + 468) = *(_DWORD *)(v9 + 556);
              }
              else
              {
                sub_4925C0(*(void **)(v9 + 320), a2, a3, a4, v9, 0, 0, 1, 0);
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 132))(v9, *(_DWORD *)(v9 + 464));
                result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 188))(v9, 0);
              }
            }
            else
            {
              *(_DWORD *)(v9 + 480) = 4;
              dword_4E1A64 = 0;
            }
          }
          else
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 132))(v9, *(_DWORD *)(v9 + 464));
            result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 188))(v9, 0);
            dword_4E1A64 = 0;
          }
        }
        break;
      case 7:
        if ( *(_DWORD *)(v9 + 512) == 290 )
        {
          if ( v21 >= *(_DWORD *)(v9 + 556) )
          {
            v12 = sub_43D870(v9 + 332, *(_DWORD *)(v9 + 484) + 332);
            if ( v12 > *(_DWORD *)(v9 + 312) * *(_DWORD *)(v9 + 312) )
            {
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 188))(v9, *(_DWORD *)(v9 + 484));
              v13 = (*(int (__thiscall **)(int, signed int))(*(_DWORD *)v9 + 152))(v9, 1);
              if ( !CMonsterReal::GetChasePt(v9, a2, a3, a4, (int)&v10, (int)&v13)
                || (result = sub_4925C0(*(void **)(v9 + 320), a2, a3, a4, v9, v10, v11, 0, 1), !result) )
              {
                (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 132))(v9, *(_DWORD *)(v9 + 464));
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 188))(v9, 0);
                result = v9;
                *(_DWORD *)(v9 + 480) = 1;
              }
            }
            else
            {
              (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 132))(v9, *(_DWORD *)(v9 + 464));
              (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 188))(v9, 0);
              result = v9;
              *(_DWORD *)(v9 + 480) = 1;
            }
          }
        }
        else
        {
          result = v9;
          *(_DWORD *)(v9 + 480) = 1;
        }
        break;
    }
  }
  return result;
}
// 4E1A64: using guessed type int dword_4E1A64;

//----- (0043E070) --------------------------------------------------------
bool __userpurge CMonsterReal::GetRandomPt<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ecx@8
  int v7; // [sp+0h] [bp-24h]@13
  int v8; // [sp+4h] [bp-20h]@10
  int v9; // [sp+8h] [bp-1Ch]@4
  int v10; // [sp+Ch] [bp-18h]@1
  int v11; // [sp+10h] [bp-14h]@3
  int v12; // [sp+18h] [bp-Ch]@3
  int v13; // [sp+1Ch] [bp-8h]@1
  int v14; // [sp+20h] [bp-4h]@1

  v10 = a1;
  v13 = sub_406E10(0, 64) - 32;
  v14 = sub_406E10(0, 64) - 32;
  return (v13 || v14)
      && ((v11 = abs(v13), v12 = abs(v14), v11 < v12) ? (v9 = 32 * v11 / v12) : (v9 = 32 * v12 / v11),
          v11 >= v12 ? (v5 = dword_4D6E64[2 * v9], *(_DWORD *)a5 = dword_4D6E60[2 * v9], *(_DWORD *)(a5 + 4) = v5) : (*(_DWORD *)a5 = dword_4D6E64[2 * v9], *(_DWORD *)(a5 + 4) = dword_4D6E60[2 * v9]),
          v13 < 0 ? (v8 = -*(_DWORD *)a5) : (v8 = *(_DWORD *)a5),
          (*(_DWORD *)a5 = v8, v14 < 0) ? (v7 = -*(_DWORD *)(a5 + 4)) : (v7 = *(_DWORD *)(a5 + 4)),
          *(_DWORD *)(a5 + 4) = v7,
          CSMap::IsMoveTile(*(void **)(v10 + 320), a2, a3, a4, v10, v10 + 332, *(_DWORD *)a5, *(_DWORD *)(a5 + 4), 131072));
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D6E60: using guessed type int dword_4D6E60[];
// 4D6E64: using guessed type int dword_4D6E64[];

//----- (0043E1C0) --------------------------------------------------------
signed int __userpurge CSMap::IsMoveTile<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9)
{
  int v10; // ST10_4@18
  int v11; // eax@18
  int v12; // [sp+0h] [bp-34h]@11
  int v13; // [sp+4h] [bp-30h]@8
  int v14; // [sp+8h] [bp-2Ch]@2
  void *v15; // [sp+Ch] [bp-28h]@1
  int v16; // [sp+10h] [bp-24h]@13
  int v17; // [sp+14h] [bp-20h]@13
  int i; // [sp+18h] [bp-1Ch]@4
  int v19; // [sp+1Ch] [bp-18h]@1
  int v20; // [sp+20h] [bp-14h]@10
  int v21; // [sp+24h] [bp-10h]@13
  int v22; // [sp+28h] [bp-Ch]@4
  bool v23; // [sp+2Ch] [bp-8h]@4
  int v24; // [sp+30h] [bp-4h]@1

  v15 = a1;
  v19 = abs(a7);
  v24 = abs(a8);
  if ( v19 < v24 )
    v14 = v24;
  else
    v14 = v19;
  v22 = v14;
  v23 = 1;
  for ( i = 8; v23 && i <= 32; i += 8 )
  {
    v23 = i < v22;
    if ( i < v22 )
      v13 = a7 * i / v22;
    else
      v13 = a7;
    v20 = v13 + *(_DWORD *)a6;
    if ( v23 )
      v12 = a8 * i / v22;
    else
      v12 = a8;
    v21 = v12 + *(_DWORD *)(a6 + 4);
    v16 = v20 >> 5;
    v17 = v21 >> 5;
    if ( v20 >> 5 < 0 || v16 >> 8 >= 64 || v17 < 0 || v17 >> 8 >= 64 )
      return 0;
    v10 = ((v20 >> 3) & 3) + 4 * ((v21 >> 3) & 3);
    v11 = CSMap::_GetCellMap(v15, (int)&v16);
    if ( !CCellMap::IsMoveTile(v11, a2, a3, a4, a5, (int)&v16, a9, v10) )
      return 0;
  }
  return 1;
}

//----- (0043E320) --------------------------------------------------------
signed int __userpurge CCellMap::IsMoveTile<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  signed int result; // eax@2
  int v9; // edx@5
  int v10; // eax@8
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+4h] [bp-14h]@5
  int v13; // [sp+8h] [bp-10h]@3
  int v14; // [sp+Ch] [bp-Ch]@3
  int v15; // [sp+10h] [bp-8h]@3
  char v16[4]; // [sp+14h] [bp-4h]@5

  v11 = a1;
  if ( a1 )
  {
    v13 = *(_DWORD *)a6 & 0xFF;
    v14 = *(_DWORD *)(a6 + 4) & 0xFF;
    v15 = CCellMap::GetTile(a1, (int)&v13);
    if ( *(_DWORD *)(v15 + 4) & (a7 | (1 << a8)) )
    {
      result = 0;
    }
    else
    {
      v12 = CCellMap::GetLock(v11, (int)&v13);
      sub_47DE70((volatile LONG *)v12);
      v9 = v15;
      for ( *(_DWORD *)v16 = *(_DWORD *)v15; *(_DWORD *)v16; *(_DWORD *)v16 = unknown_libname_9(*(_DWORD *)v16, v9) )
      {
        if ( *(_DWORD *)(*(_DWORD *)v16 + 16) == -6 )
        {
          *(_DWORD *)v15 = 0;
          sub_422B30("CSellMap::IsMoveTile %p %p\n", v16[0]);
          sub_422D80(v10, a2, a3, a4);
          return 0;
        }
        if ( a5 != *(_DWORD *)v16 && (*(int (__thiscall **)(_DWORD, int))(**(_DWORD **)v16 + 56))(*(_DWORD *)v16, a8) )
        {
          sub_47E080((volatile LONG *)v12, a2, a3, a4);
          return 0;
        }
      }
      sub_47E080((volatile LONG *)v12, a2, a3, a4);
      result = 1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (0043E440) --------------------------------------------------------
int __thiscall CCellMap::GetLock(int this, int a2)
{
  return *(_DWORD *)(this + 12) + 24 * (16 * (*(_DWORD *)(a2 + 4) >> 4) + (*(_DWORD *)a2 >> 4));
}

//----- (0043E470) --------------------------------------------------------
signed int __userpurge CMonsterReal::GetChasePt<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@10
  __int64 v7; // qax@13
  __int64 v8; // qax@13
  __int64 v9; // qax@14
  __int64 v10; // qax@14
  int v12; // eax@24
  int v13; // eax@30
  int v14; // [sp+4h] [bp-34h]@19
  int v15; // [sp+8h] [bp-30h]@16
  int v16; // [sp+Ch] [bp-2Ch]@5
  int v17; // [sp+10h] [bp-28h]@1
  int v18; // [sp+1Ch] [bp-1Ch]@4
  int v19; // [sp+20h] [bp-18h]@4
  int v20; // [sp+24h] [bp-14h]@4
  int v21; // [sp+28h] [bp-10h]@4
  int v22; // [sp+30h] [bp-8h]@4
  int v23; // [sp+34h] [bp-4h]@4

  v17 = a1;
  if ( *(_DWORD *)(a1 + 652) )
  {
    CFindPath::FreeNode((void *)(a1 + 612));
    *(_DWORD *)(v17 + 652) = 0;
  }
  if ( !CFindPath::IsGoal(v17 + 612) )
  {
    if ( CFindPath::SetNextPath(v17 + 612) )
    {
      v13 = CFindPath::GetPixel(v17 + 612);
      *(_DWORD *)a5 = *(_DWORD *)v13 - *(_DWORD *)(v17 + 332);
      *(_DWORD *)(a5 + 4) = *(_DWORD *)(v13 + 4) - *(_DWORD *)(v17 + 336);
      if ( *(_DWORD *)a5 )
      {
        if ( *(_DWORD *)(a5 + 4) )
          *(_DWORD *)a6 = 14 * *(_DWORD *)a6 / 0xAu;
      }
      return 1;
    }
    CFindPath::FreeNode((void *)(v17 + 612));
  }
  v20 = *(_DWORD *)a6;
  v21 = *(_DWORD *)(v17 + 312) + 32;
  v18 = *(_DWORD *)(*(_DWORD *)(v17 + 464) + 332) - *(_DWORD *)(v17 + 332);
  v19 = abs(*(_DWORD *)(*(_DWORD *)(v17 + 464) + 332) - *(_DWORD *)(v17 + 332));
  v22 = *(_DWORD *)(*(_DWORD *)(v17 + 464) + 336) - *(_DWORD *)(v17 + 336);
  v23 = abs(*(_DWORD *)(*(_DWORD *)(v17 + 464) + 336) - *(_DWORD *)(v17 + 336));
  if ( v19 < v23 )
    v16 = 32 * v19 / v23;
  else
    v16 = 32 * v23 / v19;
  if ( v22 * v22 + v18 * v18 <= v21 * v21 )
  {
    if ( v19 >= v23 )
    {
      v9 = *(_DWORD *)(v17 + 312) * dword_4D6E60[2 * v16];
      *(_DWORD *)a5 = v19 - (((BYTE4(v9) & 0x1F) + (_DWORD)v9) >> 5);
      v10 = *(_DWORD *)(v17 + 312) * dword_4D6E64[2 * v16];
      *(_DWORD *)(a5 + 4) = v23 - (((BYTE4(v10) & 0x1F) + (_DWORD)v10) >> 5);
      a4 = v16;
      *(_DWORD *)a6 = *(_DWORD *)a5 * v20 / (unsigned int)dword_4D6E60[2 * v16];
    }
    else
    {
      v7 = *(_DWORD *)(v17 + 312) * dword_4D6E64[2 * v16];
      *(_DWORD *)a5 = v19 - (((BYTE4(v7) & 0x1F) + (_DWORD)v7) >> 5);
      v8 = *(_DWORD *)(v17 + 312) * dword_4D6E60[2 * v16];
      *(_DWORD *)(a5 + 4) = v23 - (((BYTE4(v8) & 0x1F) + (_DWORD)v8) >> 5);
      a4 = v16;
      *(_DWORD *)a6 = *(_DWORD *)(a5 + 4) * v20 / (unsigned int)dword_4D6E60[2 * v16];
    }
  }
  else
  {
    if ( v19 >= v23 )
    {
      v6 = dword_4D6E64[2 * v16];
      *(_DWORD *)a5 = dword_4D6E60[2 * v16];
      *(_DWORD *)(a5 + 4) = v6;
    }
    else
    {
      *(_DWORD *)a5 = dword_4D6E64[2 * v16];
      *(_DWORD *)(a5 + 4) = dword_4D6E60[2 * v16];
    }
  }
  if ( v18 < 0 )
    v15 = -*(_DWORD *)a5;
  else
    v15 = *(_DWORD *)a5;
  *(_DWORD *)a5 = v15;
  if ( v22 < 0 )
    v14 = -*(_DWORD *)(a5 + 4);
  else
    v14 = *(_DWORD *)(a5 + 4);
  *(_DWORD *)(a5 + 4) = v14;
  if ( !CSMap::IsMoveTile(*(void **)(v17 + 320), a2, a3, a4, v17, v17 + 332, *(_DWORD *)a5, *(_DWORD *)(a5 + 4), 131072) )
  {
    if ( !CFindPath::FindPath((void *)(v17 + 612), a2, a3, a4, v17 + 332, *(_DWORD *)(v17 + 464) + 332) )
      return 0;
    v12 = CFindPath::GetPixel(v17 + 612);
    *(_DWORD *)a5 = *(_DWORD *)v12 - *(_DWORD *)(v17 + 332);
    *(_DWORD *)(a5 + 4) = *(_DWORD *)(v12 + 4) - *(_DWORD *)(v17 + 336);
    if ( *(_DWORD *)a5 )
    {
      if ( *(_DWORD *)(a5 + 4) )
        *(_DWORD *)a6 = 14 * v20 / 0xAu;
    }
  }
  return 1;
}
// 4D6E60: using guessed type int dword_4D6E60[];
// 4D6E64: using guessed type int dword_4D6E64[];

//----- (0043E840) --------------------------------------------------------
bool __thiscall CFindPath::IsGoal(int this)
{
  return *(_DWORD *)(this + 16) == (_DWORD)&unk_4E0908;
}

//----- (0043E860) --------------------------------------------------------
int __thiscall CFindPath::GetPixel(int this)
{
  return *(_DWORD *)(this + 16) + 20;
}

//----- (0043E880) --------------------------------------------------------
signed int __thiscall CFindPath::SetNextPath(int this)
{
  signed int result; // eax@2

  *(_DWORD *)(this + 16) = **(_DWORD **)(this + 16);
  if ( *(_DWORD *)(this + 16) )
  {
    result = 1;
  }
  else
  {
    *(_DWORD *)(this + 16) = &unk_4E0908;
    result = 0;
  }
  return result;
}

//----- (0043E8C0) --------------------------------------------------------
int __usercall CMonsterReal::ScanSight<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return sub_493650(*(_DWORD *)(a1 + 320), a2, a3, a4, a1 + 324, *(_DWORD *)(a1 + 544) >> 5);
}

//----- (0043E8F0) --------------------------------------------------------
void __usercall CMonsterReal::ManageBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+10h] [bp-4h]@1

  v4 = a1;
  if ( CChar::IsMState(a1, 512i64) )
    CChar::CancelBuff(v4, a2, a3, a4, 8);
  if ( CChar::IsMState(v4, 268435456i64) )
    CChar::CancelBuff(v4, a2, a3, a4, 26);
}

//----- (0043E950) --------------------------------------------------------
signed int __userpurge CMonsterReal::ApplyDamage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10, int a11)
{
  signed int result; // eax@2
  int v12; // [sp+0h] [bp-1Ch]@15
  int v13; // [sp+4h] [bp-18h]@10
  int v14; // [sp+10h] [bp-Ch]@4
  int v15; // [sp+14h] [bp-8h]@1

  v15 = a1;
  if ( CChar::IsNormal(a1) )
  {
    if ( a11 )
      v14 = (*(int (__thiscall **)(int))(*(_DWORD *)a11 + 28))(a11);
    else
      v14 = 0;
    if ( CChar::IsMState(v15, 16777216i64) )
      *(_DWORD *)a8 = a6;
    else
      *(_DWORD *)a8 = a7 + CChar::GetFatalDamage(a5, a7, a9, v14);
    if ( *(_DWORD *)a8 >= *(_DWORD *)(v15 + 272) )
      v13 = *(_DWORD *)(v15 + 272);
    else
      v13 = *(_DWORD *)a8;
    *(_DWORD *)a8 = v13;
    *(_DWORD *)(v15 + 272) -= *(_DWORD *)a8;
    if ( *(_DWORD *)a10 )
    {
      if ( *(_DWORD *)(v15 + 272) <= 0 )
      {
        *(_DWORD *)a10 = 0;
      }
      else
      {
        if ( *(_DWORD *)a10 >= *(_DWORD *)(v15 + 272) )
          v12 = *(_DWORD *)(v15 + 272);
        else
          v12 = *(_DWORD *)a10;
        *(_DWORD *)a10 = v12;
        *(_DWORD *)(v15 + 272) -= *(_DWORD *)a10;
      }
    }
    CMonsterReal::AfterDamage(v15, a2, a3, a4, a5, a7, *(_DWORD *)a10 + *(_DWORD *)a8);
    result = 1;
  }
  else
  {
    *(_DWORD *)a10 = 0;
    *(_DWORD *)a8 = 0;
    result = 0;
  }
  return result;
}

//----- (0043EAC0) --------------------------------------------------------
int __thiscall CChar::GetFatalDamage(int this, int a2, int a3, int a4)
{
  int result; // eax@3
  int v5; // [sp+Ch] [bp-4h]@1

  v5 = this;
  if ( a4 + *(_DWORD *)(this + 256) >= sub_406E10(1, 100) || CChar::IsMState(v5, 134217728i64) )
  {
    *(_DWORD *)a3 = 1;
    result = a2 * (2 * *(_DWORD *)(v5 + 180) + 50) / 100;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0043EB40) --------------------------------------------------------
int __userpurge CMonsterReal::AfterDamage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, signed int a7)
{
  __int64 v7; // qax@4
  int v9; // [sp+8h] [bp-4h]@1

  v9 = a1;
  CChar::SetReverseDirection(a1, *(_DWORD *)(a5 + 348));
  *(_DWORD *)(v9 + 472) = GetTickCount() + 20000;
  *(_DWORD *)(v9 + 656) = 0;
  if ( !CChar::IsGState(a5, 512) )
  {
    if ( sub_44FD40(*(_DWORD *)(v9 + 60), *(_DWORD *)(a5 + 60)) >= 3 )
      (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 88))(a5, 35, 1, a7 / 10);
  }
  v7 = CChar::IsBState(a5, 131072i64);
  if ( v7 )
  {
    LODWORD(v7) = sub_406E10(1, 100);
    if ( (_DWORD)v7 <= 10 )
    {
      CChar::UpdateBuff(a5, a2, a3, a4, 59);
      LODWORD(v7) = (*(int (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 88))(a5, 7, 1, a6);
    }
  }
  return v7;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0043EC20) --------------------------------------------------------
int __userpurge CMonsterReal::AllotTransformExp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int result; // eax@2
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+4h] [bp-8h]@5
  int v9; // [sp+8h] [bp-4h]@2

  v7 = a1;
  if ( a5 )
  {
    result = CParty::FindParty(a2, a3, a4, a6);
    v9 = result;
    if ( result )
    {
      CParty::AllotTransformExp(result, a2, a3, a4, *(_DWORD *)(v7 + 60), v7 + 332);
      result = CIOObject::Release(v9, a2, a3, a4);
    }
  }
  else
  {
    result = sub_450810(a2, a3, a4, a6);
    v8 = result;
    if ( result )
    {
      if ( sub_44FD40(*(_DWORD *)(v7 + 60), *(_DWORD *)(result + 60)) >= 3 )
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
      result = sub_4239C0(v8, a2, a3, a4, v8 + 352);
    }
  }
  return result;
}

//----- (0043ECC0) --------------------------------------------------------
int __userpurge CMonsterReal::AllotExp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  void *v7; // eax@2
  void *v8; // eax@6
  int v9; // eax@7
  int v10; // ST4C_4@8
  float v11; // ST48_4@10
  unsigned __int64 v12; // qax@30
  void *v13; // eax@36
  float v14; // ST14_4@37
  int v16; // [sp+2Ch] [bp-84h]@18
  int v17; // [sp+30h] [bp-80h]@14
  int v18; // [sp+3Ch] [bp-74h]@1
  char v19; // [sp+40h] [bp-70h]@36
  char v20; // [sp+44h] [bp-6Ch]@39
  char v21; // [sp+48h] [bp-68h]@7
  char v22; // [sp+50h] [bp-60h]@7
  char v23; // [sp+58h] [bp-58h]@6
  char v24; // [sp+5Ch] [bp-54h]@2
  char v25; // [sp+60h] [bp-50h]@33
  int v26; // [sp+64h] [bp-4Ch]@37
  int v27; // [sp+68h] [bp-48h]@37
  char v28; // [sp+6Ch] [bp-44h]@35
  int v29; // [sp+70h] [bp-40h]@22
  int v30; // [sp+74h] [bp-3Ch]@10
  int v31; // [sp+78h] [bp-38h]@6
  char v32; // [sp+7Ch] [bp-34h]@6
  int v33; // [sp+80h] [bp-30h]@3
  int v34; // [sp+84h] [bp-2Ch]@3
  int v35; // [sp+88h] [bp-28h]@3
  int v36; // [sp+8Ch] [bp-24h]@3
  char v37; // [sp+90h] [bp-20h]@1
  char v38; // [sp+94h] [bp-1Ch]@1
  int v39; // [sp+A0h] [bp-10h]@1
  int v40; // [sp+A4h] [bp-Ch]@1
  int v41; // [sp+A8h] [bp-8h]@1
  int v42; // [sp+ACh] [bp-4h]@1

  v18 = a1;
  v42 = 0;
  v41 = 0;
  v40 = *(_DWORD *)(*(_DWORD *)(a1 + 440) + 132);
  v39 = 0;
  sub_4460C0(&v38);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v18 + 572), a2, a3, a4);
  sub_40F070(v18 + 560, &v37);
  while ( 1 )
  {
    v7 = sub_430C20(v18 + 560, &v24);
    if ( !(unsigned __int8)sub_47D070(v7) )
      break;
    v35 = 0;
    v34 = *(_DWORD *)sub_420250((int *)&v37);
    v36 = 0;
    v33 = *(_DWORD *)(v34 + 1016);
    if ( v33 )
      v36 = CParty::FindParty(a2, a3, a4, v33);
    if ( v36 )
    {
      v31 = *(_DWORD *)(sub_420250((int *)&v37) + 4);
      sub_446130((int)&v38, (int)&v32, (int)&v36);
      v8 = sub_430C20((int)&v38, &v23);
      if ( (unsigned __int8)unknown_libname_8(v8) )
      {
        CIOObject::AddRef(v36, a2, a3, a4);
        v9 = sub_420990((int)&v22, (int)&v36, (int)&v31);
        sub_48D6D0((int)&v38, (int)&v21, v9);
      }
      else
      {
        v10 = sub_420250((int *)&v32) + 4;
        *(_DWORD *)v10 += v31;
      }
      CIOObject::Release(v36, a2, a3, a4);
    }
    else
    {
      v30 = *(_DWORD *)(v18 + 60) - *(_DWORD *)(v34 + 60);
      v11 = (double)v40;
      v35 = (unsigned __int64)((double)*(signed int *)(sub_420250((int *)&v37) + 4)
                             / (double)*(signed int *)(v18 + 604)
                             * v11);
      if ( v42 < v35 )
      {
        v42 = v35;
        *(_DWORD *)a7 = std___Mpunct_wchar_t___do_frac_digits(v34);
      }
      if ( v30 < 0 )
      {
        if ( abs(v30) >= 20 )
          v16 = 20;
        else
          v16 = abs(v30);
        v35 = (unsigned __int64)((double)v35
                               - (double)v35
                               * (double)*(int *)((char *)&dword_4D8870[21 * (*(_DWORD *)(v34 + 60) - 1) / 10] + 4 * v16)
                               / 100.0);
      }
      else
      {
        if ( v30 >= 20 )
          v17 = 20;
        else
          v17 = v30;
        v35 = (unsigned __int64)((double)v35
                               * (double)*(int *)((char *)&dword_4D8528[21 * (*(_DWORD *)(v34 + 60) - 1) / 10] + 4 * v17)
                               / 100.0
                               + (double)v35);
      }
      if ( v35 > 0 )
      {
        v29 = (dword_4E1178 & 1) != 0 ? 0x64 : 0;
        if ( CChar::IsBState(v34, 549755813888i64) || CChar::IsBState(v34, 1099511627776i64) || CChar::IsBState(v34, 2199023255552i64) )
          v29 += 10;
        if ( CChar::IsBState(v34, 2i64) )
        {
          v29 += 30;
        }
        else
        {
          if ( CChar::IsBState(v34, 1i64) )
            v29 += 30;
        }
        v12 = (unsigned __int64)((double)v35 + (double)v35 * (double)v29 / 100.0);
        (*(void (__cdecl **)(int, signed int, signed int, _DWORD, _DWORD))(*(_DWORD *)v34 + 88))(
          v34,
          25,
          1,
          v12,
          HIDWORD(v12));
        if ( v41 < v35 )
        {
          v41 = v35;
          *(_DWORD *)a6 = std___Mpunct_wchar_t___do_frac_digits(v34);
        }
        v39 += v35;
      }
    }
    CIOObject::Release(v34, a2, a3, a4);
    sub_446090((int *)&v37, (int)&v25, 0);
  }
  if ( !sub_446110() )
  {
    sub_40F070((int)&v38, &v28);
    while ( 1 )
    {
      v13 = sub_430C20((int)&v38, &v19);
      if ( !(unsigned __int8)sub_47D070(v13) )
        break;
      v27 = *(_DWORD *)sub_420250((int *)&v28);
      v14 = (double)v40;
      v26 = (unsigned __int64)((double)*(signed int *)(sub_420250((int *)&v28) + 4)
                             / (double)*(signed int *)(v18 + 604)
                             * v14);
      CParty::AllotExp(v27, a2, a3, a4, (int)&v26, *(_DWORD *)(v18 + 60), v18 + 332);
      if ( v41 < v26 )
      {
        v41 = v26;
        *(_DWORD *)a5 = 1;
        *(_DWORD *)a6 = *(_DWORD *)(v27 + 16);
      }
      v39 += v26;
      CIOObject::Release(v27, a2, a3, a4);
      sub_446090((int *)&v28, (int)&v20, 0);
    }
  }
  sub_445D30(v18 + 560);
  CIOCriticalSection::Leave(v18 + 572, a2, a3, a4);
  if ( 2 * v39 + 1 < v40 )
    *(_DWORD *)a6 = 0;
  return sub_43F1A0((int)&v38);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D8528: using guessed type int dword_4D8528[];
// 4D8870: using guessed type int dword_4D8870[];
// 4E1178: using guessed type int dword_4E1178;

//----- (0043F1A0) --------------------------------------------------------
int __thiscall sub_43F1A0(int this)
{
  return sub_4460F0(this);
}

//----- (0043F1C0) --------------------------------------------------------
void __usercall CMonsterReal::ResetHostility(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v5; // [sp+0h] [bp-14h]@1
  char v6; // [sp+4h] [bp-10h]@2
  char v7; // [sp+8h] [bp-Ch]@3
  int v8; // [sp+Ch] [bp-8h]@3
  char v9; // [sp+10h] [bp-4h]@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 572), a2, a3, a4);
  sub_40F070(v5 + 560, &v9);
  while ( 1 )
  {
    v4 = sub_430C20(v5 + 560, &v6);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v8 = *(_DWORD *)sub_420250((int *)&v9);
    CIOObject::Release(v8, a2, a3, a4);
    sub_446090((int *)&v9, (int)&v7, 0);
  }
  sub_445D30(v5 + 560);
  *(_DWORD *)(v5 + 604) = 0;
  CIOCriticalSection::Leave(v5 + 572, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0043F260) --------------------------------------------------------
signed int __userpurge CMonsterMaguni::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@5
  int v11; // [sp+0h] [bp-20h]@9
  int v12; // [sp+4h] [bp-1Ch]@2
  int v13; // [sp+8h] [bp-18h]@1
  int v14; // [sp+Ch] [bp-14h]@12
  int v15; // [sp+10h] [bp-10h]@12
  int v16; // [sp+14h] [bp-Ch]@4
  int v17; // [sp+18h] [bp-8h]@8
  int v18; // [sp+1Ch] [bp-4h]@4

  v13 = a1;
  if ( a10 )
    v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 52))(a10);
  else
    v12 = 1;
  v16 = v12;
  v18 = CChar::GetFinalDamage((void *)v13, a5, a6, v12);
  if ( v18 > 0 )
  {
    CMonsterReal::ManageBuff(v13, a2, a3, a4);
    CChar::Lock(v13, a2, a3, a4);
    if ( CMonsterReal::ApplyDamage(v13, a2, a3, a4, a5, a6, v18, a7, a8, a9, a10) )
    {
      v17 = *(_DWORD *)a9 + *(_DWORD *)a7;
      if ( a10 )
        v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 24))(a10);
      else
        v11 = 0;
      (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)v13 + 212))(v13, a5, v17, v11);
      if ( *(_DWORD *)(v13 + 272) > 0 )
      {
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v13 + 256))(v13, v17, v16);
        CChar::Unlock(v13, a2, a3, a4);
      }
      else
      {
        v15 = 0;
        v14 = 0;
        (*(void (__thiscall **)(int, int, _DWORD, int *, int *))(*(_DWORD *)v13 + 236))(
          v13,
          a5,
          *(_DWORD *)a8,
          &v15,
          &v14);
        CChar::Unlock(v13, a2, a3, a4);
        CMonsterReal::AllotTransformExp(v13, a2, a3, a4, v15, v14);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(v13, a2, a3, a4);
      result = 1;
    }
  }
  else
  {
    *(_DWORD *)a9 = 0;
    *(_DWORD *)a7 = 0;
    result = 0;
  }
  return result;
}

//----- (0043F3D0) --------------------------------------------------------
DWORD __userpurge CMonsterMaguni::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  DWORD result; // eax@1
  int v9; // ST14_4@1
  int v10; // eax@1
  int v11; // [sp+4h] [bp-4h]@1

  v9 = a1;
  *(_DWORD *)(a1 + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a5 + 76))(a5, *(_DWORD *)(a1 + 28), a6);
  v11 = 0;
  CMonsterReal::AllotExp(v9, a2, a3, a4, a7, a8, (int)&v11);
  v10 = (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 164))(a5);
  CInitMonster::DropItem(*(_DWORD *)(v9 + 440), a2, a3, a4, v9, *(_DWORD *)a7, *(_DWORD *)a8, v11, v10);
  CChar::CancelAllBuff(v9, a2, a3, a4);
  CChar::AddGState(v9, 1);
  CChar::WriteInSight(a2, a3, a4, v9, 61, (unsigned int)"db");
  result = GetTickCount() + 10000;
  *(_DWORD *)(v9 + 468) = result;
  return result;
}

//----- (0043F490) --------------------------------------------------------
int __userpurge CMonsterMaguniWithSkillOnly::SetTarget<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  result = CMonster::SetTarget(a1, a2, a3, a4, a5);
  if ( a5 )
  {
    *(_DWORD *)(v6 + 480) = 5;
    *(_DWORD *)(v6 + 556) = 0;
  }
  else
  {
    result = v6;
    *(_DWORD *)(v6 + 480) = 1;
  }
  return result;
}

//----- (0043F4E0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkillOnly::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  __int64 v4; // qax@14
  int v5; // [sp+1Ch] [bp-Ch]@1

  v5 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) && !CChar::IsGState(v5, 1) )
  {
    CChar::Lock(v5, a2, a3, a4);
    if ( *(_DWORD *)(v5 + 464) )
    {
      if ( !CChar::IsNormal(*(_DWORD *)(v5 + 464)) )
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
      }
    }
    switch ( *(_DWORD *)(v5 + 480) )
    {
      case 1:
      case 2:
      case 3:
      case 7:
        (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 248))(v5);
        goto LABEL_25;
      case 4:
        (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 244))(v5);
        *(_DWORD *)(v5 + 480) = 5;
        goto LABEL_25;
      case 5:
        if ( sub_480B70(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464)) )
          *(_DWORD *)(v5 + 480) = 6;
        goto LABEL_25;
      case 6:
        if ( *(_DWORD *)(v5 + 464) )
        {
          v4 = sub_43D870(v5 + 332, *(_DWORD *)(v5 + 464) + 332);
          if ( *(_DWORD *)(v5 + 316) != *(_DWORD *)(*(_DWORD *)(v5 + 464) + 316)
            || v4 > *(_DWORD *)(v5 + 548) * *(_DWORD *)(v5 + 548) )
          {
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
            CChar::Unlock(v5, a2, a3, a4);
            return;
          }
          if ( v4 > *(_DWORD *)(v5 + 312) * *(_DWORD *)(v5 + 312) )
          {
            if ( !CChar::IsMState(v5, 512i64) )
            {
              *(_DWORD *)(v5 + 652) = 1;
              *(_DWORD *)(v5 + 480) = 2;
            }
            CChar::Unlock(v5, a2, a3, a4);
            return;
          }
          if ( *(_DWORD *)(v5 + 464) == *(_DWORD *)(v5 + 484) )
          {
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
            *(_DWORD *)(v5 + 480) = 1;
            CChar::Unlock(v5, a2, a3, a4);
            return;
          }
          CChar::SetDirection(
            (void *)v5,
            *(_DWORD *)(*(_DWORD *)(v5 + 464) + 332) - *(_DWORD *)(v5 + 332),
            *(_DWORD *)(*(_DWORD *)(v5 + 464) + 336) - *(_DWORD *)(v5 + 336));
          sub_480CF0(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464));
          *(_DWORD *)(v5 + 480) = 5;
        }
        else
        {
          *(_DWORD *)(v5 + 480) = 1;
        }
LABEL_25:
        CChar::Unlock(v5, a2, a3, a4);
        return;
      default:
        goto LABEL_25;
    }
  }
}

//----- (0043F7F0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkillOnly::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@6
  DWORD v6; // [sp+8h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v6 = GetTickCount();
    if ( CChar::IsGState(v4, 1) && v6 >= *(_DWORD *)(v4 + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v6 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      if ( !sub_40F5F0(v4 + 488) )
        sub_480A00(v4 + 488);
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0043F8E0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkill::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  __int64 v4; // qax@16
  int v5; // [sp+1Ch] [bp-Ch]@1

  v5 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) && !CChar::IsGState(v5, 1) )
  {
    CChar::Lock(v5, a2, a3, a4);
    if ( *(_DWORD *)(v5 + 464) )
    {
      if ( !CChar::IsNormal(*(_DWORD *)(v5 + 464)) )
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
      }
    }
    switch ( *(_DWORD *)(v5 + 480) )
    {
      case 2:
        if ( *(_DWORD *)(v5 + 464) )
          goto LABEL_10;
        goto LABEL_27;
      case 1:
      case 3:
LABEL_10:
        (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 248))(v5);
        goto LABEL_27;
      case 4:
        (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 244))(v5);
        goto LABEL_27;
      case 5:
        if ( sub_480B70(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464)) )
          *(_DWORD *)(v5 + 480) = 6;
        goto LABEL_27;
      case 6:
        if ( *(_DWORD *)(v5 + 464) )
        {
          v4 = sub_43D870(v5 + 332, *(_DWORD *)(v5 + 464) + 332);
          if ( *(_DWORD *)(v5 + 316) != *(_DWORD *)(*(_DWORD *)(v5 + 464) + 316)
            || v4 > *(_DWORD *)(v5 + 548) * *(_DWORD *)(v5 + 548) )
          {
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
            CChar::Unlock(v5, a2, a3, a4);
            return;
          }
          if ( v4 > *(_DWORD *)(v5 + 312) * *(_DWORD *)(v5 + 312) )
          {
            if ( !CChar::IsMState(v5, 512i64) )
            {
              *(_DWORD *)(v5 + 652) = 1;
              *(_DWORD *)(v5 + 480) = 2;
            }
            CChar::Unlock(v5, a2, a3, a4);
            return;
          }
          if ( *(_DWORD *)(v5 + 464) == *(_DWORD *)(v5 + 484) )
          {
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
            *(_DWORD *)(v5 + 480) = 1;
            CChar::Unlock(v5, a2, a3, a4);
            return;
          }
          CChar::SetDirection(
            (void *)v5,
            *(_DWORD *)(*(_DWORD *)(v5 + 464) + 332) - *(_DWORD *)(v5 + 332),
            *(_DWORD *)(*(_DWORD *)(v5 + 464) + 336) - *(_DWORD *)(v5 + 336));
          sub_480CF0(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464));
          *(_DWORD *)(v5 + 480) = 4;
        }
        else
        {
          *(_DWORD *)(v5 + 480) = 1;
        }
LABEL_27:
        CChar::Unlock(v5, a2, a3, a4);
        return;
      default:
        goto LABEL_27;
    }
  }
}

//----- (0043FBF0) --------------------------------------------------------
void __usercall CMonsterMaguniWithSkill::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-Ch]@1
  int v5; // [sp+8h] [bp-8h]@6
  DWORD v6; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v6 = GetTickCount();
    if ( CChar::IsGState(v4, 1) && v6 >= *(_DWORD *)(v4 + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v6 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      if ( *(_DWORD *)(v4 + 664) <= v6 )
      {
        if ( *(_DWORD *)(v4 + 464) )
        {
          *(_DWORD *)(v4 + 664) = *(_DWORD *)(*(_DWORD *)(v4 + 440) + 328) + v6;
          if ( (double)(signed int)sub_406E10(1, 100) <= *(float *)(*(_DWORD *)(v4 + 440) + 324) )
          {
            if ( !sub_40F5F0(v4 + 488) )
              sub_480A00(v4 + 488);
            *(_DWORD *)(v4 + 480) = 5;
          }
        }
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0043FD50) --------------------------------------------------------
int __usercall CMonsterMaguniWithSkill::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  __int64 v4; // qax@1
  int v5; // eax@20
  int v7; // [sp+0h] [bp-58h]@17
  int v8; // [sp+2Ch] [bp-2Ch]@1
  int v9; // [sp+30h] [bp-28h]@14
  int v10; // [sp+34h] [bp-24h]@14
  int v11; // [sp+38h] [bp-20h]@14
  int v12; // [sp+3Ch] [bp-1Ch]@14
  int v13; // [sp+40h] [bp-18h]@14
  int v14; // [sp+44h] [bp-14h]@14
  __int64 v15; // [sp+48h] [bp-10h]@7
  int v16; // [sp+54h] [bp-4h]@3

  v8 = a1;
  v4 = CChar::IsMState(a1, 268435712i64);
  LODWORD(v4) = HIDWORD(v4) | v4;
  if ( !(_DWORD)v4 )
  {
    LODWORD(v4) = GetTickCount();
    v16 = v4;
    if ( (_DWORD)v4 >= *(_DWORD *)(v8 + 468) )
    {
      LODWORD(v4) = v8;
      if ( *(_DWORD *)(v8 + 464) )
      {
        v15 = sub_43D870(v8 + 332, *(_DWORD *)(v8 + 464) + 332);
        if ( *(_DWORD *)(v8 + 316) == *(_DWORD *)(*(_DWORD *)(v8 + 464) + 316)
          && v15 <= *(_DWORD *)(v8 + 548) * *(_DWORD *)(v8 + 548) )
        {
          if ( v15 <= *(_DWORD *)(v8 + 312) * *(_DWORD *)(v8 + 312) )
          {
            *(_DWORD *)(v8 + 468) = v16 + CChar::GetASpeed(v8);
            *(_DWORD *)(v8 + 556) = *(_DWORD *)(v8 + 468);
            CChar::SetDirection(
              (void *)v8,
              *(_DWORD *)(*(_DWORD *)(v8 + 464) + 332) - *(_DWORD *)(v8 + 332),
              *(_DWORD *)(*(_DWORD *)(v8 + 464) + 336) - *(_DWORD *)(v8 + 336));
            v12 = 0;
            v9 = 0;
            v14 = 0;
            v13 = 0;
            v11 = *(_DWORD *)(v8 + 464);
            sub_423980(v11, a2, a3, a4, (volatile LONG *)(v11 + 352));
            v10 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 168))(v8, v11);
            v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v11 + 148))(v11, v8);
            if ( !v13 )
            {
              if ( (*(int (__thiscall **)(int))(*(_DWORD *)v11 + 60))(v11) )
              {
                if ( CChar::IsBState(v11, 32768i64) )
                  v7 = -5;
                else
                  v7 = 0;
                if ( CChar::CheckHit((void *)v8, v11, v7) )
                {
                  CChar::Unlock(v8, a2, a3, a4);
                  v5 = CChar::GetAttack(v8);
                  v14 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, _DWORD))(*(_DWORD *)v11 + 72))(
                          v11,
                          v8,
                          v5,
                          &v12,
                          &v9,
                          &v10,
                          0);
                  CChar::Lock(v8, a2, a3, a4);
                }
              }
            }
            if ( !v14 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)v11 + 80))(v11, v8);
            std___Mpunct_wchar_t___do_frac_digits(v11);
            CChar::WriteInSight(a2, a3, a4, v8, 62, (unsigned int)"ddwwb");
            LODWORD(v4) = sub_4239C0(v11, a2, a3, a4, v11 + 352);
          }
          else
          {
            v4 = CChar::IsMState(v8, 512i64);
            if ( !v4 )
            {
              *(_DWORD *)(v8 + 652) = 1;
              LODWORD(v4) = v8;
              *(_DWORD *)(v8 + 480) = 2;
            }
          }
        }
        else
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
          LODWORD(v4) = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
        }
      }
    }
  }
  return v4;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00440070) --------------------------------------------------------
int __thiscall sub_440070(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  sub_43A7D0(this);
  *(_DWORD *)v2 = &off_4B9308;
  memset((void *)(v2 + 664), 0, 0x1Cu);
  *(_DWORD *)(v2 + 664) = GetTickCount();
  *(_DWORD *)(v2 + 692) = 0;
  return v2;
}
// 4B9308: using guessed type int (__stdcall *off_4B9308)(int);

//----- (004400D0) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::IsIgnore(int this)
{
  return CChar::IsGState(this, 73728);
}

//----- (004400F0) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::CMonsterTowerBoss(int this, int a2, int a3)
{
  int v4; // ST0C_4@1

  v4 = this;
  sub_43A7D0(this);
  *(_DWORD *)v4 = &off_4B9308;
  *(_DWORD *)(v4 + 316) = a2;
  *(_DWORD *)(v4 + 320) = a3;
  memset((void *)(v4 + 664), 0, 0x1Cu);
  *(_DWORD *)(v4 + 664) = GetTickCount() + 3600000;
  *(_DWORD *)(v4 + 468) = GetTickCount() + 10000;
  *(_DWORD *)(v4 + 556) = *(_DWORD *)(v4 + 468);
  *(_DWORD *)(v4 + 692) = 0;
  CChar::AddGState(v4, 8192);
  return v4;
}
// 4B9308: using guessed type int (__stdcall *off_4B9308)(int);

//----- (004401A0) --------------------------------------------------------
signed int __usercall CMonsterTowerBoss::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  signed int result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-38h]@8
  int v6; // [sp+10h] [bp-2Ch]@7
  char v7; // [sp+14h] [bp-28h]@3
  int v8; // [sp+18h] [bp-24h]@3
  int v9; // [sp+1Ch] [bp-20h]@5
  int v10; // [sp+20h] [bp-1Ch]@10
  int v11; // [sp+24h] [bp-18h]@10
  int v12; // [sp+28h] [bp-14h]@1
  int v13; // [sp+2Ch] [bp-10h]@7
  int v14; // [sp+30h] [bp-Ch]@7
  char v15; // [sp+34h] [bp-8h]@3
  int v16; // [sp+38h] [bp-4h]@10

  v12 = sub_491080(3);
  if ( v12 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
    v8 = 213;
    sub_44AE20((int)&unk_4E1820, (int)&v15, (int)&v8);
    v4 = sub_430C20((int)&unk_4E1820, &v7);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
      result = 0;
    }
    else
    {
      v9 = *(_DWORD *)(sub_420250((int *)&v15) + 4);
      if ( *(_DWORD *)(v9 + 304) & (1 << dword_4E35B8) )
      {
        v13 = 57367;
        v14 = 8931;
        v6 = (int)sub_401000(0x2B8u);
        if ( v6 )
          v5 = CMonsterTowerBoss::CMonsterTowerBoss(v6, 3, v12);
        else
          v5 = 0;
        v16 = v5;
        CChar::SetXY(v5, (int)&v13);
        CChar::SetDirection((void *)v16, 0, -1);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v16 + 192))(v16, v9);
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        CChar::Lock(v16, a1, a2, a3);
        v10 = v13 >> 5;
        v11 = v14 >> 5;
        if ( sub_491360(*(void **)(v16 + 320), a1, a2, a3, v16, (int)&v10) )
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v16 + 196))(v16, 0);
          (*(void (__thiscall **)(int))(*(_DWORD *)v16 + 240))(v16);
          (*(void (__thiscall **)(int))(*(_DWORD *)v16 + 224))(v16);
          CChar::GetMaxHP(v16);
          std___Mpunct_wchar_t___do_frac_digits(v16);
          CChar::WriteInSight(a1, a2, a3, v16, 51, (unsigned int)"wdddwdddIsbds");
          CChar::Unlock(v16, a1, a2, a3);
          CNPCScenario::MirrorGState(a1, a2, a3, 0, 3);
          CNPCScenario::ThroneGState(a1, a2, a3, 0, 12);
          CPlayer::WriteInMap(a1, a2, a3, 3, 22, (unsigned int)"bb");
          result = 1;
        }
        else
        {
          CChar::Unlock(v16, a1, a2, a3);
          if ( v16 )
            (**(void (__thiscall ***)(_DWORD, _DWORD))v16)(v16, 1);
          result = 0;
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        result = 1;
      }
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00440430) --------------------------------------------------------
int __usercall CMonsterTowerBoss::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+4h] [bp-14h]@1
  int i; // [sp+10h] [bp-8h]@1
  int v7; // [sp+14h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
  CMonsterReal::ResetHostility(v5, a2, a3, a4);
  v7 = v5 + 692;
  for ( i = *(_DWORD *)(v5 + 692); i; i = *(_DWORD *)v7 )
  {
    *(_DWORD *)v7 = *(_DWORD *)(i + 84);
    if ( i )
      (**(void (__thiscall ***)(_DWORD, _DWORD))i)(i, 1);
  }
  (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 200))(v5);
  sub_4913E0(*(void **)(v5 + 320), a2, a3, a4, v5, v5 + 324);
  CChar::Unlock(v5, a2, a3, a4);
  CNPCScenario::ResetBossTower(a2, a3, a4, 0);
  return CBase::OnDelete(v5, a2, a3, a4);
}

//----- (00440500) --------------------------------------------------------
void __userpurge CMonsterTowerBoss::Defense(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( !*(_DWORD *)(a1 + 476) )
    *(_DWORD *)(a1 + 476) = 1;
  *(_DWORD *)(a1 + 660) = GetTickCount();
  CMonsterReal::Defense(v5, a2, a3, a4, a5);
}

//----- (00440550) --------------------------------------------------------
void __usercall CMonsterMaguniMaster::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    if ( !(*(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 252))(v4) )
    {
      CChar::Lock(v4, a2, a3, a4);
      if ( *(_DWORD *)(v4 + 464) )
      {
        if ( !CChar::IsNormal(*(_DWORD *)(v4 + 464)) )
        {
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 132))(v4, *(_DWORD *)(v4 + 464));
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 188))(v4, 0);
        }
      }
      switch ( *(_DWORD *)(v4 + 480) )
      {
        case 1:
        case 2:
        case 3:
          (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 248))(v4);
          break;
        case 4:
          (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 244))(v4);
          break;
        case 5:
          if ( sub_480B70(v4 + 488, a2, a3, a4, *(_DWORD *)(v4 + 464)) )
            *(_DWORD *)(v4 + 480) = 6;
          break;
        case 6:
          sub_480C50(v4 + 488, a2, a3, a4, *(_DWORD *)(v4 + 464));
          *(_DWORD *)(v4 + 480) = *(_DWORD *)(v4 + 464) != 0 ? 4 : 1;
          break;
        default:
          break;
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}

//----- (004406A0) --------------------------------------------------------
void __usercall CMonsterTowerBoss::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  signed int v5; // [sp+4h] [bp-Ch]@9
  int v6; // [sp+8h] [bp-8h]@17
  DWORD v7; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v7 = GetTickCount();
    if ( CChar::IsGState(v4, 65536) && v7 >= *(_DWORD *)(v4 + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, v4, 56, (unsigned int)"d");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
    else
    {
      if ( CChar::IsGState(v4, 8192) && v7 >= *(_DWORD *)(v4 + 556) )
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 8192);
        CChar::Unlock(v4, a2, a3, a4);
      }
      else
      {
        v5 = CChar::GetMaxHP(v4);
        if ( *(_DWORD *)(v4 + 272) < v5 )
        {
          if ( v7 >= *(_DWORD *)(v4 + 472) )
          {
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
            CMonsterReal::ResetHostility(v4, a2, a3, a4);
          }
        }
        if ( !*(_DWORD *)(v4 + 476) || sub_40F5F0(v4 + 488) || sub_446110() || v7 - *(_DWORD *)(v4 + 660) > 0x2710 )
        {
          CChar::Unlock(v4, a2, a3, a4);
        }
        else
        {
          (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 232))(v4, 232, 5, 24, 6);
          CMonsterTowerBoss::OnSummon(v4, a2, a3, a4);
          v6 = -1;
          if ( *(_DWORD *)(v4 + 664) <= v7 )
            v6 = 8;
          if ( *(_DWORD *)(v4 + 272) <= 7 * v5 / 10 )
          {
            if ( *(_DWORD *)(v4 + 668) <= v7 )
            {
              *(_DWORD *)(v4 + 668) = v7 + 42000;
              if ( v6 < 0 )
                v6 = 5;
            }
          }
          if ( *(_DWORD *)(v4 + 272) <= v5 / 2 )
          {
            if ( *(_DWORD *)(v4 + 672) <= v7 )
            {
              *(_DWORD *)(v4 + 672) = v7 + 83000;
              if ( v6 < 0 )
              {
                if ( sub_406E10(1, 100) <= 90 )
                  v6 = 4;
              }
            }
          }
          if ( *(_DWORD *)(v4 + 272) <= 3 * v5 / 4 )
          {
            if ( *(_DWORD *)(v4 + 676) <= v7 )
            {
              *(_DWORD *)(v4 + 676) = v7 + 14000;
              if ( v6 < 0 )
              {
                if ( sub_406E10(1, 100) <= 80 )
                  v6 = 2;
              }
            }
          }
          if ( *(_DWORD *)(v4 + 680) <= v7 )
          {
            *(_DWORD *)(v4 + 680) = v7 + 32000;
            if ( v6 < 0 )
            {
              if ( sub_406E10(1, 100) <= 85 )
                v6 = 3;
            }
          }
          if ( *(_DWORD *)(v4 + 684) <= v7 )
          {
            *(_DWORD *)(v4 + 684) = v7 + 10000;
            if ( v6 < 0 )
            {
              if ( sub_406E10(1, 100) <= 75 )
                v6 = *(_DWORD *)(v4 + 272) <= v5 / 2;
            }
          }
          if ( *(_DWORD *)(v4 + 688) <= v7 )
          {
            *(_DWORD *)(v4 + 688) = v7 + 5000;
            if ( v6 < 0 )
            {
              if ( sub_406E10(1, 100) <= 50 )
                v6 = 13;
            }
          }
          if ( v6 >= 0 )
          {
            if ( sub_480970(v4 + 488, v6) )
              *(_DWORD *)(v4 + 480) = 5;
          }
          CChar::Unlock(v4, a2, a3, a4);
        }
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00440A30) --------------------------------------------------------
int __usercall CMonsterTowerBoss::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  __int64 v4; // qax@1
  int v5; // eax@19
  int v7; // [sp+0h] [bp-5Ch]@16
  int v8; // [sp+2Ch] [bp-30h]@1
  int v9; // [sp+30h] [bp-2Ch]@14
  int v10; // [sp+34h] [bp-28h]@14
  int v11; // [sp+38h] [bp-24h]@14
  int v12; // [sp+3Ch] [bp-20h]@14
  int v13; // [sp+40h] [bp-1Ch]@14
  int v14; // [sp+44h] [bp-18h]@14
  int i; // [sp+48h] [bp-14h]@12
  __int64 v16; // [sp+4Ch] [bp-10h]@5
  int v17; // [sp+54h] [bp-8h]@3
  int v18; // [sp+58h] [bp-4h]@12

  v8 = a1;
  v4 = CChar::IsMState(a1, 268435712i64);
  LODWORD(v4) = HIDWORD(v4) | v4;
  if ( !(_DWORD)v4 )
  {
    LODWORD(v4) = GetTickCount();
    v17 = v4;
    if ( (_DWORD)v4 >= *(_DWORD *)(v8 + 468) )
    {
      v16 = sub_43D870(v8 + 332, *(_DWORD *)(v8 + 464) + 332);
      if ( *(_DWORD *)(v8 + 316) == *(_DWORD *)(*(_DWORD *)(v8 + 464) + 316)
        && v16 <= *(_DWORD *)(v8 + 548) * *(_DWORD *)(v8 + 548) )
      {
        if ( v16 <= *(_DWORD *)(v8 + 312) * *(_DWORD *)(v8 + 312) )
        {
          *(_DWORD *)(v8 + 468) = v17 + CChar::GetASpeed(v8);
          *(_DWORD *)(v8 + 556) = *(_DWORD *)(v8 + 468);
          CChar::SetDirection(
            (void *)v8,
            *(_DWORD *)(*(_DWORD *)(v8 + 464) + 332) - *(_DWORD *)(v8 + 332),
            *(_DWORD *)(*(_DWORD *)(v8 + 464) + 336) - *(_DWORD *)(v8 + 336));
          v18 = *(_DWORD *)(v8 + 464);
          sub_423980(v18, a2, a3, a4, (volatile LONG *)(v18 + 352));
          for ( i = sub_4934F0(*(_DWORD *)(v18 + 320), a2, a3, a4, v18 + 324, 1); i; i = CBaseList::Pop(i, a2, a3, a4) )
          {
            v11 = unknown_libname_7();
            v12 = 0;
            v9 = 0;
            v14 = 0;
            v13 = 0;
            v10 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 168))(v8, v11);
            v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v11 + 148))(v11, v8);
            if ( !v13 )
            {
              if ( CChar::IsBState(v11, 32768i64) )
                v7 = -5;
              else
                v7 = 0;
              if ( CChar::CheckHit((void *)v8, v11, v7) )
              {
                CChar::Unlock(v8, a2, a3, a4);
                v5 = CChar::GetAttack(v8);
                v14 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, _DWORD))(*(_DWORD *)v11 + 72))(
                        v11,
                        v8,
                        v5,
                        &v12,
                        &v9,
                        &v10,
                        0);
                CChar::Lock(v8, a2, a3, a4);
              }
            }
            if ( v11 == v18 )
            {
              std___Mpunct_wchar_t___do_frac_digits(v11);
              CChar::WriteInSight(a2, a3, a4, v8, 62, (unsigned int)"ddwwb");
            }
            else
            {
              if ( v14 )
              {
                std___Mpunct_wchar_t___do_frac_digits(v11);
                CPlayer::Write(a2, a3, a4, v11, 73, (unsigned int)"dbw");
              }
            }
          }
          LODWORD(v4) = sub_4239C0(v18, a2, a3, a4, v18 + 352);
        }
        else
        {
          v4 = CChar::IsMState(v8, 512i64);
          if ( !v4 )
          {
            *(_DWORD *)(v8 + 652) = 1;
            LODWORD(v4) = v8;
            *(_DWORD *)(v8 + 480) = 2;
          }
        }
      }
      else
      {
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
        LODWORD(v4) = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
      }
    }
  }
  return v4;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00440D90) --------------------------------------------------------
int __userpurge CMonsterTowerBoss::UpdateChild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@2

  v6 = a1;
  if ( !CBase::IsDeleted(a1) )
  {
    CChar::Lock(v6, a2, a3, a4);
    for ( i = *(_DWORD *)(v6 + 692); i && *(_DWORD *)(i + 32) != a5; i = *(_DWORD *)(i + 84) )
      ;
    if ( i )
    {
      --*(_DWORD *)(i + 44);
      --*(_DWORD *)(i + 48);
    }
    CChar::Unlock(v6, a2, a3, a4);
  }
  return CChar::UpdateChild((void *)v6, a2, a3, a4, a5);
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00440E20) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::Summon(int this, int a2, int a3, int a4, int a5)
{
  int result; // eax@10
  int v6; // [sp+0h] [bp-14h]@8
  int v7; // [sp+4h] [bp-10h]@1
  int v8; // [sp+8h] [bp-Ch]@7
  int i; // [sp+10h] [bp-4h]@1

  v7 = this;
  for ( i = *(_DWORD *)(this + 692); i && *(_DWORD *)(i + 32) != a2; i = *(_DWORD *)(i + 84) )
    ;
  if ( i )
  {
    result = i;
    *(_DWORD *)(i + 44) += a5;
    if ( *(_DWORD *)(i + 44) > a4 )
    {
      result = i;
      *(_DWORD *)(i + 44) = a4;
    }
  }
  else
  {
    v8 = (int)sub_401000(0x58u);
    if ( v8 )
      v6 = CGenMonster::CGenMonster(v8, v7, a2, a3, a5);
    else
      v6 = 0;
    *(_DWORD *)(v6 + 84) = *(_DWORD *)(v7 + 692);
    result = v6;
    *(_DWORD *)(v7 + 692) = v6;
  }
  return result;
}

//----- (00440EE0) --------------------------------------------------------
int __thiscall CMonsterTowerBoss::Reaction(int this, signed int a2, int a3)
{
  int result; // eax@3
  int v4; // [sp+0h] [bp-4h]@1

  v4 = this;
  if ( !*(_DWORD *)(this + 476) )
    *(_DWORD *)(this + 476) = 1;
  result = GetTickCount();
  *(_DWORD *)(v4 + 660) = result;
  if ( a2 >= 100 )
  {
    result = sub_40F5F0(v4 + 488);
    if ( !result )
    {
      result = sub_406E10(1, 100);
      if ( result <= 80 )
      {
        result = sub_480970(v4 + 488, 7 - (a3 != 0));
        if ( result )
          *(_DWORD *)(v4 + 480) = 5;
      }
    }
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);

//----- (00440F70) --------------------------------------------------------
int __usercall CMonsterTowerBoss::OnSummon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  int v5; // [sp+0h] [bp-Ch]@1
  signed int j; // [sp+4h] [bp-8h]@3
  int i; // [sp+8h] [bp-4h]@1

  v5 = a1;
  result = a1;
  for ( i = *(_DWORD *)(a1 + 692); i; i = *(_DWORD *)(i + 84) )
  {
    for ( j = 0; j < 3 && *(_DWORD *)(i + 48) < *(_DWORD *)(i + 44) && CMonster::Create(a2, a3, a4, i, v5); ++j )
      InterlockedIncrement((volatile LONG *)(i + 48));
    result = *(_DWORD *)(i + 84);
  }
  return result;
}

//----- (00440FF0) --------------------------------------------------------
int __stdcall CMonsterNotReal::AddBuff(int a1)
{
  if ( a1 )
    std__locale__facet___scalar_deleting_destructor_(1);
  return 0;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (00441030) --------------------------------------------------------
signed int __userpurge CMonsterInactive::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@5
  int v11; // [sp+0h] [bp-1Ch]@12
  int v12; // [sp+4h] [bp-18h]@9
  int v13; // [sp+8h] [bp-14h]@2
  int v14; // [sp+Ch] [bp-10h]@1
  int v15; // [sp+14h] [bp-8h]@4

  v14 = a1;
  *(_DWORD *)a9 = 0;
  if ( a10 )
    v13 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 52))(a10);
  else
    v13 = 1;
  v15 = CChar::GetFinalDamage((void *)v14, a5, a6, v13);
  if ( v15 > 0 )
  {
    CChar::Lock(v14, a2, a3, a4);
    if ( CChar::IsNormal(v14) )
    {
      if ( a10 )
        v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 28))(a10);
      else
        v12 = 0;
      *(_DWORD *)a7 = v15 + CChar::GetFatalDamage(a5, v15, a8, v12);
      if ( *(_DWORD *)a7 >= *(_DWORD *)(v14 + 272) )
        v11 = *(_DWORD *)(v14 + 272);
      else
        v11 = *(_DWORD *)a7;
      *(_DWORD *)a7 = v11;
      *(_DWORD *)(v14 + 272) -= *(_DWORD *)a7;
      if ( *(_DWORD *)(v14 + 272) > 0 )
      {
        CChar::Unlock(v14, a2, a3, a4);
      }
      else
      {
        *(_DWORD *)(v14 + 272) = 0;
        CChar::WriteInSight(a2, a3, a4, v14, 61, (unsigned int)"db");
        CChar::Unlock(v14, a2, a3, a4);
        CBase::Delete((void *)v14);
      }
      result = 1;
    }
    else
    {
      CChar::Unlock(v14, a2, a3, a4);
      *(_DWORD *)a7 = 0;
      result = 0;
    }
  }
  else
  {
    *(_DWORD *)a7 = 0;
    result = 0;
  }
  return result;
}

//----- (004411A0) --------------------------------------------------------
int __thiscall CMonsterInactive::SetProperty(int this, int a2)
{
  int result; // eax@1
  int v3; // ST0C_4@1

  v3 = this;
  CMonster::SetProperty(this, a2);
  memcpy((void *)(v3 + 64), (const void *)(a2 + 136), 0x1Cu);
  result = CChar::GetMaxHP(v3);
  *(_DWORD *)(v3 + 272) = result;
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (004411F0) --------------------------------------------------------
__int32 __userpurge CMonsterInactive::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  __int32 result; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  result = CMonster::Add(a1, a2, a3, a4, a5);
  if ( a5 )
  {
    result = CIOObject::AddRef(a5, a2, a3, a4);
    *(_DWORD *)(v6 + 484) = a5;
  }
  return result;
}

//----- (00441230) --------------------------------------------------------
int __thiscall CMonsterGuildWar::CMonsterGuildWar(int this, int a2, int a3, int a4, int a5, const char *a6)
{
  int v7; // ST08_4@1

  v7 = this;
  CMonsterNotReal::CMonsterNotReal(this);
  *(_DWORD *)v7 = &off_4B8490;
  *(_DWORD *)(v7 + 316) = a2;
  *(_DWORD *)(v7 + 320) = a3;
  *(_DWORD *)(v7 + 348) = a4;
  *(_DWORD *)(v7 + 536) = a5;
  strcpy((char *)(v7 + 540), a6);
  *(_DWORD *)(v7 + 560) = 0;
  return v7;
}
// 4B8490: using guessed type int (__stdcall *off_4B8490)(int);

//----- (004412B0) --------------------------------------------------------
int __usercall CMonsterGuildWar::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, signed int a5, int a6, int a7, int a8, const char *a9, int a10)
{
  int result; // eax@2
  void *v11; // eax@5
  int v12; // [sp+4h] [bp-2Ch]@10
  int v13; // [sp+10h] [bp-20h]@9
  char v14; // [sp+14h] [bp-1Ch]@5
  int v15; // [sp+18h] [bp-18h]@7
  int v16; // [sp+1Ch] [bp-14h]@12
  int v17; // [sp+20h] [bp-10h]@12
  int v18; // [sp+24h] [bp-Ch]@1
  char v19; // [sp+28h] [bp-8h]@5
  int v20; // [sp+2Ch] [bp-4h]@12

  v18 = sub_491080(a5);
  if ( v18 )
  {
    if ( CSMap::IsValidTile((void *)v18, a6, 0) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
      sub_44AE20((int)&unk_4E1820, (int)&v19, (int)&a4);
      v11 = sub_430C20((int)&unk_4E1820, &v14);
      if ( (unsigned __int8)unknown_libname_8(v11) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        result = 0;
      }
      else
      {
        v15 = *(_DWORD *)(sub_420250((int *)&v19) + 4);
        if ( *(_DWORD *)(v15 + 304) & (1 << dword_4E35B8) )
        {
          v13 = (int)sub_401000(0x238u);
          if ( v13 )
            v12 = CMonsterGuildWar::CMonsterGuildWar(v13, a5, v18, a7, a8, a9);
          else
            v12 = 0;
          v20 = v12;
          CChar::SetXY(v12, a6);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v20 + 192))(v20, v15);
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          CChar::Lock(v20, a1, a2, a3);
          v16 = *(_DWORD *)a6 >> 5;
          v17 = *(_DWORD *)(a6 + 4) >> 5;
          if ( sub_491360(*(void **)(v20 + 320), a1, a2, a3, v20, (int)&v16) )
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v20 + 196))(v20, 0);
            (*(void (__thiscall **)(int))(*(_DWORD *)v20 + 240))(v20);
            (*(void (__thiscall **)(int))(*(_DWORD *)v20 + 224))(v20);
            CChar::GetMaxHP(v20);
            std___Mpunct_wchar_t___do_frac_digits(v20);
            CChar::WriteInSight(a1, a2, a3, v20, 51, (unsigned int)"wdddwdddIsbds");
            if ( a10 )
            {
              if ( CInitMonster::IsRace(v15, 2) )
              {
                if ( a8 )
                {
                  (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v20 + 100))(v20, 131072);
                  *(_DWORD *)(v20 + 560) = GetTickCount() + 300000;
                }
              }
            }
            CChar::Unlock(v20, a1, a2, a3);
            result = v20;
          }
          else
          {
            CChar::Unlock(v20, a1, a2, a3);
            if ( v20 )
              (**(void (__thiscall ***)(_DWORD, _DWORD))v20)(v20, 1);
            result = 0;
          }
        }
        else
        {
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    sub_4328C0("CMonsterGuildWar::Create() not find Map (map:%d)", a5);
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00441570) --------------------------------------------------------
bool __thiscall CInitMonster::IsRace(int this, int a2)
{
  return a2 == *(_DWORD *)(this + 64);
}

//----- (00441590) --------------------------------------------------------
signed int __userpurge CMonsterGuildWar::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@5
  int v11; // eax@15
  int v12; // eax@17
  int v13; // [sp+0h] [bp-14h]@11
  int v14; // [sp+4h] [bp-10h]@2
  int v15; // [sp+8h] [bp-Ch]@1
  int v16; // [sp+10h] [bp-4h]@6
  int v17; // [sp+10h] [bp-4h]@10

  v15 = a1;
  *(_DWORD *)a9 = 0;
  if ( a10 )
    v14 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a10 + 52))(a10);
  else
    v14 = 1;
  if ( v14 )
  {
    v16 = CChar::GetFinalDamage((void *)v15, a5, a6, v14);
    if ( v16 > 0 )
    {
      CChar::Lock(v15, a2, a3, a4);
      if ( CChar::IsNormal(v15) )
      {
        v17 = v16 + CChar::GetFatalDamage(a5, v16, a8, 0);
        if ( v17 >= *(_DWORD *)(v15 + 272) )
          v13 = *(_DWORD *)(v15 + 272);
        else
          v13 = v17;
        *(_DWORD *)a7 = v13;
        *(_DWORD *)(v15 + 272) -= *(_DWORD *)a7;
        *(_DWORD *)(v15 + 472) = GetTickCount() + 20000;
        if ( *(_DWORD *)(v15 + 272) > 0 )
        {
          CChar::Unlock(v15, a2, a3, a4);
        }
        else
        {
          *(_DWORD *)(v15 + 272) = 0;
          (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 76))(
            a5,
            *(_DWORD *)(v15 + 28),
            *(_DWORD *)a8);
          CChar::WriteInSight(a2, a3, a4, v15, 61, (unsigned int)"db");
          CChar::Unlock(v15, a2, a3, a4);
          if ( CInitMonster::IsRace(*(_DWORD *)(v15 + 440), 2) )
          {
            v11 = CCastle::GetMonsterTile2CID(*(_DWORD *)(v15 + 316), *(_DWORD *)(v15 + 332), *(_DWORD *)(v15 + 336));
            CGuild::BrokenStandard(a2, a3, a4, v11);
          }
          else
          {
            if ( CInitMonster::IsRace(*(_DWORD *)(v15 + 440), 3) )
            {
              v12 = CCastle::GetMonsterTile2CID(*(_DWORD *)(v15 + 316), *(_DWORD *)(v15 + 332), *(_DWORD *)(v15 + 336));
              CGuild::BrokenGate(a2, a3, a4, v12, v15);
            }
          }
          CBase::Delete((void *)v15);
        }
        result = 1;
      }
      else
      {
        CChar::Unlock(v15, a2, a3, a4);
        result = 1;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00441790) --------------------------------------------------------
int __thiscall CMonsterGuildWar::SetProperty(int this, int a2)
{
  int v3; // ST0C_4@1

  v3 = this;
  CMonster::SetProperty(this, a2);
  memcpy((void *)(v3 + 64), (const void *)(a2 + 136), 0x1Cu);
  memcpy((void *)(v3 + 92), (const void *)(a2 + 164), 0x60u);
  return (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 84))(v3);
}

//----- (004417F0) --------------------------------------------------------
void __usercall CMonsterGuildWar::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@8
  DWORD v6; // [sp+8h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    v6 = GetTickCount();
    if ( CChar::IsGState(v4, 131072) )
    {
      if ( *(_DWORD *)(v4 + 560) < v6 )
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 131072);
    }
    if ( !CGuild::IsWarringPeriod() )
    {
      CChar::Lock(v4, a2, a3, a4);
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v6 >= *(_DWORD *)(v4 + 472) )
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (004418A0) --------------------------------------------------------
void __userpurge CMonsterGuildWar::SetGuild(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6)
{
  int v6; // ST08_4@1

  v6 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v6 + 536) = a5;
  strcpy((char *)(v6 + 540), a6);
  CChar::Unlock(v6, a2, a3, a4);
}

//----- (004418E0) --------------------------------------------------------
LONG __userpurge CPlayer::SubGState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST14_4@1

  v6 = a1;
  CChar::SubGState(a1, a5);
  return CChar::WriteInSight(a2, a3, a4, v6, 46, (unsigned int)"dd");
}

//----- (00441920) --------------------------------------------------------
int __userpurge CMonsterItem::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int v11; // [sp+Ch] [bp-14h]@1
  int v12; // [sp+10h] [bp-10h]@11
  signed int v13; // [sp+14h] [bp-Ch]@10

  v11 = a1;
  if ( CBase::IsDeleted(a1) )
    return 0;
  CChar::Lock(v11, a2, a3, a4);
  if ( a6 )
  {
    if ( a6 == 1 )
    {
      if ( a5 == *(_DWORD *)(v11 + 464) )
      {
        if ( *(_DWORD *)(v11 + 468) > GetTickCount() )
        {
          *(_DWORD *)(v11 + 468) = GetTickCount();
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 188))(v11, 0);
          (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 112))(a5, 32768);
          CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
        }
      }
    }
LABEL_22:
    CChar::Unlock(v11, a2, a3, a4);
    return 0;
  }
  if ( !*(_DWORD *)(v11 + 464) )
  {
    sub_423980(a5, a2, a3, a4, (volatile LONG *)(a5 + 356));
    (*(void (__thiscall **)(int, int))(*(_DWORD *)v11 + 188))(v11, a5);
    v13 = 6;
    if ( *(_DWORD *)(a5 + 1016) )
    {
      v12 = CParty::FindParty(a2, a3, a4, *(_DWORD *)(a5 + 1016));
      if ( v12 )
      {
        if ( CParty::GetLuckySize(v12, a2, a3, a4, 1) )
          v13 = 2;
        CIOObject::Release(v12, a2, a3, a4);
      }
    }
    else
    {
      if ( CChar::IsBState(a5, 33554432i64) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInRect(a2, a3, a4, a5, 73, 15, (unsigned int)"db");
        v13 = 2;
      }
    }
    *(_DWORD *)(v11 + 468) = 1000 * v13 + GetTickCount();
    (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a5 + 100))(a5, 32768);
    CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bb");
    goto LABEL_22;
  }
  CChar::Unlock(v11, a2, a3, a4);
  if ( a5 != *(_DWORD *)(v11 + 464) )
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
  return 0;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00441B20) --------------------------------------------------------
void __usercall CMonsterItem::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // eax@9
  int v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@7
  int v7; // [sp+8h] [bp-4h]@7

  v5 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::Lock(v5, a2, a3, a4);
    if ( !*(_DWORD *)(v5 + 464) )
      goto LABEL_14;
    if ( !CChar::IsNormal(*(_DWORD *)(v5 + 464)) )
    {
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
      CChar::Unlock(v5, a2, a3, a4);
      return;
    }
    if ( *(_DWORD *)(v5 + 468) <= GetTickCount() )
    {
      v7 = *(_DWORD *)(v5 + 464);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 112))(*(_DWORD *)(v5 + 464), 32768);
      CPlayer::Write(a2, a3, a4, v7, 67, (unsigned int)"b");
      v6 = *(_DWORD *)(v7 + 1016);
      if ( v6 )
      {
        CInitMonster::DropItem(*(_DWORD *)(v5 + 440), a2, a3, a4, v5, 1, v6, 0, 0);
      }
      else
      {
        v4 = std___Mpunct_wchar_t___do_frac_digits(v7);
        CInitMonster::DropItem(*(_DWORD *)(v5 + 440), a2, a3, a4, v5, 0, v4, 0, 0);
      }
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
      CChar::WriteInSight(a2, a3, a4, v5, 61, (unsigned int)"db");
      CChar::Unlock(v5, a2, a3, a4);
      CBase::Delete((void *)v5);
    }
    else
    {
LABEL_14:
      CChar::Unlock(v5, a2, a3, a4);
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00441C70) --------------------------------------------------------
__int32 __userpurge CMonsterItem::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST08_4@1
  int v7; // eax@1
  char v8; // [sp+4h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-10h]@1
  int v10; // [sp+10h] [bp-Ch]@1
  char v11; // [sp+14h] [bp-8h]@1

  v6 = a1;
  CIOObject::AddRef(a1, a2, a3, a4);
  CMonsterObject::Insert((int)&unk_4E1998, a2, a3, a4, v6 + 428);
  sub_47E0D0((volatile LONG *)&unk_4E1858);
  v10 = v6;
  v9 = *(_DWORD *)(v6 + 28);
  v7 = sub_420990((int)&v11, (int)&v9, (int)&v10);
  sub_445DF0((int)&unk_4E184C, (int)&v8, v7);
  return sub_47E1C0((volatile LONG *)&unk_4E1858, a2, a3, a4);
}

//----- (00441CE0) --------------------------------------------------------
int __usercall CMonsterItem::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST08_4@1
  void *v5; // eax@1
  int v6; // eax@2
  char v8; // [sp+4h] [bp-8h]@1
  char v9; // [sp+8h] [bp-4h]@1

  v4 = a1;
  CMonster::Remove(a1, a2, a3, a4);
  sub_47DE70((volatile LONG *)&unk_4E187C);
  sub_44AE20((int)&unk_4E1870, (int)&v9, v4 + 444);
  v5 = sub_430C20((int)&unk_4E1870, &v8);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v6 = sub_420250((int *)&v9);
    InterlockedDecrement((volatile LONG *)(*(_DWORD *)(v6 + 4) + 48));
  }
  return sub_47E080((volatile LONG *)&unk_4E187C, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00441D60) --------------------------------------------------------
int __thiscall CMonsterMagic::CMonsterMagic(int this, int a2, int a3, int a4, int a5, int a6)
{
  int v7; // ST00_4@1

  v7 = this;
  CMonsterNotReal::CMonsterNotReal(this);
  *(_DWORD *)v7 = &off_4B8680;
  *(_DWORD *)(v7 + 316) = a2;
  *(_DWORD *)(v7 + 320) = a3;
  *(_DWORD *)(v7 + 348) = a4;
  *(_DWORD *)(v7 + 468) = a6 + GetTickCount();
  *(_DWORD *)(v7 + 136) = a5;
  *(_DWORD *)(v7 + 140) = a5;
  *(_DWORD *)(v7 + 532) = 0;
  return v7;
}
// 4B8680: using guessed type int (__stdcall *off_4B8680)(int);

//----- (00441DE0) --------------------------------------------------------
int __usercall CMonsterMagic::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, signed int a5, int a6, int a7, int a8, int a9, int a10)
{
  int result; // eax@2
  void *v11; // eax@5
  int v12; // eax@10
  int v13; // [sp+4h] [bp-28h]@8
  int v14; // [sp+10h] [bp-1Ch]@7
  char v15; // [sp+14h] [bp-18h]@5
  int v16; // [sp+18h] [bp-14h]@10
  int v17; // [sp+1Ch] [bp-10h]@10
  int v18; // [sp+20h] [bp-Ch]@1
  char v19; // [sp+24h] [bp-8h]@5
  int v20; // [sp+28h] [bp-4h]@10

  v18 = sub_491080(a5);
  if ( v18 )
  {
    if ( CSMap::IsValidTile((void *)v18, a6, 0) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
      sub_44AE20((int)&unk_4E1820, (int)&v19, (int)&a4);
      v11 = sub_430C20((int)&unk_4E1820, &v15);
      if ( (unsigned __int8)unknown_libname_8(v11) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        result = 0;
      }
      else
      {
        v14 = (int)sub_401000(0x218u);
        if ( v14 )
          v13 = CMonsterMagic::CMonsterMagic(v14, a5, v18, a7, a9, a10);
        else
          v13 = 0;
        v20 = v13;
        CChar::SetXY(v13, a6);
        v12 = sub_420250((int *)&v19);
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v20 + 192))(v20, *(_DWORD *)(v12 + 4));
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        CChar::Lock(v20, a1, a2, a3);
        v16 = *(_DWORD *)a6 >> 5;
        v17 = *(_DWORD *)(a6 + 4) >> 5;
        if ( sub_491360(*(void **)(v20 + 320), a1, a2, a3, v20, (int)&v16) )
        {
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v20 + 196))(v20, a8);
          (*(void (__thiscall **)(int))(*(_DWORD *)v20 + 240))(v20);
          (*(void (__thiscall **)(int))(*(_DWORD *)v20 + 224))(v20);
          CChar::GetMaxHP(v20);
          std___Mpunct_wchar_t___do_frac_digits(v20);
          CChar::WriteInSight(a1, a2, a3, v20, 51, (unsigned int)"wdddwdddIsbds");
          CChar::Unlock(v20, a1, a2, a3);
          result = v20;
        }
        else
        {
          CChar::Unlock(v20, a1, a2, a3);
          if ( v20 )
            (**(void (__thiscall ***)(_DWORD, _DWORD))v20)(v20, 1);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    sub_4328C0("CMonsterMagic::Create() not find Map (map:%d)", a5);
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00442030) --------------------------------------------------------
void __usercall CMonsterMagic::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::Lock(v4, a2, a3, a4);
    if ( *(_DWORD *)(v4 + 468) < GetTickCount() )
    {
      CChar::Unlock(v4, a2, a3, a4);
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CBase::Delete((void *)v4);
      return;
    }
    if ( *(_DWORD *)(v4 + 484) )
    {
      if ( CBase::IsDeleted(*(_DWORD *)(v4 + 484)) )
      {
        CChar::Unlock(v4, a2, a3, a4);
        CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
        CBase::Delete((void *)v4);
        return;
      }
      (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v4 + 492) + 72))(*(_DWORD *)(v4 + 492), v4, v4);
    }
    CChar::Unlock(v4, a2, a3, a4);
  }
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00442110) --------------------------------------------------------
signed int __thiscall CMonsterMagic::SetProperty(int this, int a2)
{
  int v3; // ST08_4@1

  v3 = this;
  *(_DWORD *)(this + 440) = a2;
  strcpy((char *)(this + 32), (const char *)(a2 + 32));
  sub_480A80((void *)(v3 + 488), v3);
  return sub_480A00(v3 + 488);
}

//----- (00442160) --------------------------------------------------------
__int32 __userpurge CMonsterMagic::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  __int32 result; // eax@1
  int v6; // eax@1
  int v7; // [sp+0h] [bp-1Ch]@1
  char v8; // [sp+4h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-10h]@1
  int v10; // [sp+10h] [bp-Ch]@1
  char v11; // [sp+14h] [bp-8h]@1

  v7 = a1;
  CIOObject::AddRef(a1, a2, a3, a4);
  CMonsterObject::Insert((int)&unk_4E1A00, a2, a3, a4, v7 + 428);
  sub_47E0D0((volatile LONG *)&unk_4E1858);
  v10 = v7;
  v9 = *(_DWORD *)(v7 + 28);
  v6 = sub_420990((int)&v11, (int)&v9, (int)&v10);
  sub_445DF0((int)&unk_4E184C, (int)&v8, v6);
  result = sub_47E1C0((volatile LONG *)&unk_4E1858, a2, a3, a4);
  if ( a5 )
  {
    result = CIOObject::AddRef(a5, a2, a3, a4);
    *(_DWORD *)(v7 + 484) = a5;
  }
  return result;
}

//----- (004421F0) --------------------------------------------------------
void __usercall CMonsterBlackBug::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  int v5; // [sp+4h] [bp-Ch]@6
  int v6; // [sp+8h] [bp-8h]@11
  DWORD v7; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v7 = GetTickCount();
    if ( CChar::IsGState(v4, 8192) && v7 >= *(_DWORD *)(v4 + 556) )
    {
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 8192);
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v7 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      if ( sub_40F5F0(v4 + 488) )
      {
        CChar::Unlock(v4, a2, a3, a4);
      }
      else
      {
        CMonsterEgg::OnSummon(v4, a2, a3, a4);
        v6 = -1;
        if ( !*(_DWORD *)(v4 + 664) )
          *(_DWORD *)(v4 + 664) = v7 + 12000;
        if ( *(_DWORD *)(v4 + 664) <= v7 )
        {
          *(_DWORD *)(v4 + 664) = v7 + 120000;
          if ( *(_DWORD *)(v4 + 480) != 4 )
            v6 = 16;
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970(v4 + 488, v6) )
            *(_DWORD *)(v4 + 480) = 5;
        }
        CChar::Unlock(v4, a2, a3, a4);
      }
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00442360) --------------------------------------------------------
LONG __userpurge CMonsterReal::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v9; // ST14_4@1
  int v10; // eax@1
  int v11; // [sp+4h] [bp-4h]@1

  v9 = a1;
  *(_DWORD *)(a1 + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a5 + 76))(a5, *(_DWORD *)(a1 + 28), a6);
  v11 = 0;
  CMonsterReal::AllotExp(v9, a2, a3, a4, a7, a8, (int)&v11);
  v10 = (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 164))(a5);
  CInitMonster::DropItem(*(_DWORD *)(v9 + 440), a2, a3, a4, v9, *(_DWORD *)a7, *(_DWORD *)a8, v11, v10);
  CChar::CancelAllBuff(v9, a2, a3, a4);
  return CChar::WriteInSight(a2, a3, a4, v9, 61, (unsigned int)"db");
}

//----- (00442410) --------------------------------------------------------
signed int __userpurge CMonsterBlackBug::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@2
  int v11; // [sp+0h] [bp-20h]@11
  int v12; // [sp+4h] [bp-1Ch]@4
  int v13; // [sp+8h] [bp-18h]@1
  int v14; // [sp+Ch] [bp-14h]@14
  int v15; // [sp+10h] [bp-10h]@14
  int v16; // [sp+14h] [bp-Ch]@6
  int v17; // [sp+18h] [bp-8h]@10
  int v18; // [sp+1Ch] [bp-4h]@6

  v13 = a1;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 252))() )
  {
    result = 1;
  }
  else
  {
    if ( a10 )
      v12 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 52))(a10);
    else
      v12 = 1;
    v16 = v12;
    v18 = CChar::GetFinalDamage((void *)v13, a5, a6, v12);
    if ( v18 > 0 )
    {
      CMonsterReal::ManageBuff(v13, a2, a3, a4);
      CChar::Lock(v13, a2, a3, a4);
      if ( CMonsterReal::ApplyDamage(v13, a2, a3, a4, a5, a6, v18, a7, a8, a9, a10) )
      {
        v17 = *(_DWORD *)a9 + *(_DWORD *)a7;
        if ( a10 )
          v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 24))(a10);
        else
          v11 = 0;
        (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)v13 + 212))(v13, a5, v17, v11);
        if ( *(_DWORD *)(v13 + 272) > 0 )
        {
          (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v13 + 256))(v13, v17, v16);
          CChar::Unlock(v13, a2, a3, a4);
        }
        else
        {
          v15 = 0;
          v14 = 0;
          if ( sub_406E10(1, 100) > 60 )
          {
            (*(void (__thiscall **)(int, signed int, _DWORD, signed int, signed int))(*(_DWORD *)v13 + 232))(
              v13,
              312,
              0,
              3,
              1);
            CMonsterEgg::OnSummon(v13, a2, a3, a4);
          }
          (*(void (__thiscall **)(int, int, _DWORD, int *, int *))(*(_DWORD *)v13 + 236))(
            v13,
            a5,
            *(_DWORD *)a8,
            &v15,
            &v14);
          CChar::Unlock(v13, a2, a3, a4);
          CMonsterReal::AllotTransformExp(v13, a2, a3, a4, v15, v14);
          CBase::Delete((void *)v13);
        }
        result = 1;
      }
      else
      {
        CChar::Unlock(v13, a2, a3, a4);
        result = 1;
      }
    }
    else
    {
      *(_DWORD *)a9 = 0;
      *(_DWORD *)a7 = 0;
      result = 0;
    }
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (004425E0) --------------------------------------------------------
int __userpurge CMonsterBlackBug::UpdateChild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@2

  v6 = a1;
  if ( !CBase::IsDeleted(a1) )
  {
    CChar::Lock(v6, a2, a3, a4);
    for ( i = *(_DWORD *)(v6 + 668); i && *(_DWORD *)(i + 32) != a5; i = *(_DWORD *)(i + 84) )
      ;
    if ( i )
    {
      --*(_DWORD *)(i + 44);
      --*(_DWORD *)(i + 48);
    }
    CChar::Unlock(v6, a2, a3, a4);
  }
  return CChar::UpdateChild((void *)v6, a2, a3, a4, a5);
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00442670) --------------------------------------------------------
int __thiscall CMonsterBlackBug::Summon(int this, int a2, int a3, int a4, int a5)
{
  int result; // eax@10
  int v6; // [sp+0h] [bp-14h]@8
  int v7; // [sp+4h] [bp-10h]@1
  int v8; // [sp+8h] [bp-Ch]@7
  int i; // [sp+10h] [bp-4h]@1

  v7 = this;
  for ( i = *(_DWORD *)(this + 668); i && *(_DWORD *)(i + 32) != a2; i = *(_DWORD *)(i + 84) )
    ;
  if ( i )
  {
    result = i;
    *(_DWORD *)(i + 44) += a5;
    if ( *(_DWORD *)(i + 44) > a4 )
    {
      result = i;
      *(_DWORD *)(i + 44) = a4;
    }
  }
  else
  {
    v8 = (int)sub_401000(0x58u);
    if ( v8 )
      v6 = CGenMonster::CGenMonster(v8, v7, a2, a3, a5);
    else
      v6 = 0;
    *(_DWORD *)(v6 + 84) = *(_DWORD *)(v7 + 668);
    result = v6;
    *(_DWORD *)(v7 + 668) = v6;
  }
  return result;
}

//----- (00442730) --------------------------------------------------------
void __usercall CMonsterSiegeGunRuins::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    if ( !(*(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 252))(v4) )
    {
      CChar::Lock(v4, a2, a3, a4);
      if ( *(_DWORD *)(v4 + 464) )
      {
        if ( !CChar::IsNormal(*(_DWORD *)(v4 + 464)) )
        {
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 132))(v4, *(_DWORD *)(v4 + 464));
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 188))(v4, 0);
        }
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}

//----- (004427C0) --------------------------------------------------------
void __usercall CMonsterEgg::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  int v5; // [sp+8h] [bp-8h]@5
  DWORD v6; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::Lock(v4, a2, a3, a4);
    v6 = GetTickCount();
    if ( *(_DWORD *)(v4 + 468) >= GetTickCount() )
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v6 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 76))(v4, *(_DWORD *)(v4 + 28), 0);
      (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 232))(v4, 313, 1, 3, 2);
      CMonsterEgg::OnSummon(v4, a2, a3, a4);
      CChar::CancelAllBuff(v4, a2, a3, a4);
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (004428D0) --------------------------------------------------------
int __userpurge CMonsterEgg::Summon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v9; // [sp+0h] [bp-14h]@8
  int v10; // [sp+4h] [bp-10h]@1
  int v11; // [sp+8h] [bp-Ch]@7
  int i; // [sp+10h] [bp-4h]@1

  v10 = a1;
  for ( i = *(_DWORD *)(a1 + 668); i && *(_DWORD *)(i + 32) != a5; i = *(_DWORD *)(i + 84) )
    ;
  if ( i )
  {
    *(_DWORD *)(i + 44) += a8;
    if ( *(_DWORD *)(i + 44) > a7 )
      *(_DWORD *)(i + 44) = a7;
  }
  else
  {
    v11 = (int)sub_401000(0x58u);
    if ( v11 )
      v9 = CGenMonster::CGenMonster(v11, v10, a5, a6, a8);
    else
      v9 = 0;
    *(_DWORD *)(v9 + 84) = *(_DWORD *)(v10 + 668);
    *(_DWORD *)(v10 + 668) = v9;
  }
  return CMonsterEgg::OnSummon(v10, a2, a3, a4);
}

//----- (004429A0) --------------------------------------------------------
int __usercall CMonsterEgg::OnSummon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  int v5; // [sp+0h] [bp-Ch]@1
  signed int j; // [sp+4h] [bp-8h]@3
  int i; // [sp+8h] [bp-4h]@1

  v5 = a1;
  result = a1;
  for ( i = *(_DWORD *)(a1 + 668); i; i = *(_DWORD *)(i + 84) )
  {
    for ( j = 0; j < 3 && *(_DWORD *)(i + 48) < *(_DWORD *)(i + 44) && CMonster::Create(a2, a3, a4, i, v5); ++j )
      InterlockedIncrement((volatile LONG *)(i + 48));
    result = *(_DWORD *)(i + 84);
  }
  return result;
}

//----- (00442A20) --------------------------------------------------------
void __usercall CMonsterCocoon::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@5
  DWORD v6; // [sp+8h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v6 = GetTickCount();
    if ( v6 < *(_DWORD *)(v4 + 664) )
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v6 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00442AF0) --------------------------------------------------------
void __usercall CMonsterMaguniMaster::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  void *v5; // eax@6
  int v6; // ecx@10
  int v7; // [sp+4h] [bp-38h]@4
  char v8; // [sp+10h] [bp-2Ch]@6
  int v9; // [sp+14h] [bp-28h]@6
  int v10; // [sp+18h] [bp-24h]@3
  int v11; // [sp+1Ch] [bp-20h]@8
  int v12; // [sp+20h] [bp-1Ch]@10
  int v13; // [sp+24h] [bp-18h]@10
  int v14; // [sp+28h] [bp-14h]@1
  int v15; // [sp+2Ch] [bp-10h]@10
  int v16; // [sp+30h] [bp-Ch]@10
  int v17; // [sp+34h] [bp-8h]@6
  char v18; // [sp+38h] [bp-4h]@6

  v14 = sub_491080(4);
  if ( v14 )
  {
    v10 = (int)sub_401000(0x2B0u);
    if ( v10 )
      v7 = CMonsterMaguniMaster::CMonsterMaguniMaster(v10);
    else
      v7 = 0;
    v17 = v7;
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
    v9 = 329;
    sub_44AE20((int)&unk_4E1820, (int)&v18, (int)&v9);
    v5 = sub_430C20((int)&unk_4E1820, &v8);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
    }
    else
    {
      v11 = *(_DWORD *)(sub_420250((int *)&v18) + 4);
      if ( *(_DWORD *)(v11 + 304) & (1 << dword_4E35B8) )
      {
        v6 = *(_DWORD *)(a4 + 336);
        v15 = *(_DWORD *)(a4 + 332);
        v16 = v6;
        v15 += sub_406E10(0, 16);
        v16 += sub_406E10(0, 16);
        *(_DWORD *)(v17 + 316) = 4;
        *(_DWORD *)(v17 + 320) = v14;
        CChar::SetXY(v17, (int)&v15);
        CChar::SetDirection(
          (void *)v17,
          *(_DWORD *)(a5 + 332) - *(_DWORD *)(a4 + 332),
          *(_DWORD *)(a5 + 336) - *(_DWORD *)(a4 + 336));
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v17 + 192))(v17, v11);
        *(_DWORD *)(v17 + 476) = 1;
        memset((void *)(v17 + 668), 0, 0x14u);
        *(_DWORD *)(v17 + 468) = GetTickCount() + 10000;
        *(_DWORD *)(v17 + 556) = *(_DWORD *)(v17 + 468);
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        CChar::Lock(v17, a1, a2, a3);
        v12 = v15 >> 5;
        v13 = v16 >> 5;
        if ( sub_491360(*(void **)(v17 + 320), a1, a2, a3, v17, (int)&v12) )
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v17 + 196))(v17, 0);
          (*(void (__thiscall **)(int))(*(_DWORD *)v17 + 240))(v17);
          (*(void (__thiscall **)(int))(*(_DWORD *)v17 + 224))(v17);
          CChar::GetMaxHP(v17);
          std___Mpunct_wchar_t___do_frac_digits(v17);
          CChar::WriteInSight(a1, a2, a3, v17, 51, (unsigned int)"wdddwdddIsbds");
          CChar::Unlock(v17, a1, a2, a3);
        }
        else
        {
          CChar::Unlock(v17, a1, a2, a3);
          if ( v17 )
            (**(void (__thiscall ***)(_DWORD, _DWORD))v17)(v17, 1);
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00442DF0) --------------------------------------------------------
int __thiscall CMonsterMaguniMaster::CMonsterMaguniMaster(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_43A7D0(this);
  *(_DWORD *)v2 = &off_4B8A90;
  return v2;
}
// 4B8A90: using guessed type int (__stdcall *off_4B8A90)(int);

//----- (00442E10) --------------------------------------------------------
void __usercall CMonsterMaguniMaster::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  int v5; // [sp+4h] [bp-Ch]@6
  int v6; // [sp+8h] [bp-8h]@13
  DWORD v7; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v7 = GetTickCount();
    if ( CChar::IsGState(v4, 8192) && v7 >= *(_DWORD *)(v4 + 556) )
    {
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 8192);
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v7 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      if ( !*(_DWORD *)(v4 + 476) || sub_40F5F0(v4 + 488) || sub_446110() )
      {
        CChar::Unlock(v4, a2, a3, a4);
      }
      else
      {
        v6 = -1;
        if ( !*(_DWORD *)(v4 + 668) )
          *(_DWORD *)(v4 + 668) = v7 + 120000;
        if ( *(_DWORD *)(v4 + 668) <= v7 )
        {
          *(_DWORD *)(v4 + 668) = v7 + 100000;
          if ( sub_406E10(1, 100) <= 90 )
            v6 = 17;
        }
        if ( *(_DWORD *)(v4 + 672) <= v7 )
        {
          *(_DWORD *)(v4 + 672) = v7 + 18000;
          if ( v6 < 0 )
          {
            if ( sub_406E10(1, 100) <= 70 )
              v6 = 19;
          }
        }
        if ( *(_DWORD *)(v4 + 676) <= v7 )
        {
          *(_DWORD *)(v4 + 676) = v7 + 47000;
          if ( v6 < 0 )
          {
            if ( sub_406E10(1, 100) <= 80 )
              v6 = 20;
          }
        }
        if ( *(_DWORD *)(v4 + 680) <= v7 )
        {
          *(_DWORD *)(v4 + 680) = v7 + 11000;
          if ( v6 < 0 )
          {
            if ( sub_406E10(1, 100) <= 80 )
              v6 = 18;
          }
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970(v4 + 488, v6) )
            *(_DWORD *)(v4 + 480) = 5;
        }
        CChar::Unlock(v4, a2, a3, a4);
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00443060) --------------------------------------------------------
int __thiscall CMonsterBigBirdMother::CMonsterBigBirdMother(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_43A7D0(this);
  *(_DWORD *)v2 = &off_4B9470;
  *(_DWORD *)(v2 + 676) = 0;
  return v2;
}
// 4B9470: using guessed type int (__stdcall *off_4B9470)(int);

//----- (00443090) --------------------------------------------------------
void __usercall CMonsterBigBirdMother::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@6
  int v4; // [sp+4h] [bp-38h]@4
  char v5; // [sp+10h] [bp-2Ch]@6
  int v6; // [sp+14h] [bp-28h]@6
  int v7; // [sp+18h] [bp-24h]@3
  int v8; // [sp+1Ch] [bp-20h]@8
  int v9; // [sp+20h] [bp-1Ch]@10
  int v10; // [sp+24h] [bp-18h]@10
  int v11; // [sp+28h] [bp-14h]@1
  int v12; // [sp+2Ch] [bp-10h]@10
  int v13; // [sp+30h] [bp-Ch]@10
  int v14; // [sp+34h] [bp-8h]@6
  char v15; // [sp+38h] [bp-4h]@6

  v11 = sub_491080(4);
  if ( v11 )
  {
    v7 = (int)sub_401000(0x2A8u);
    if ( v7 )
      v4 = CMonsterBigBirdMother::CMonsterBigBirdMother(v7);
    else
      v4 = 0;
    v14 = v4;
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
    v6 = 317;
    sub_44AE20((int)&unk_4E1820, (int)&v15, (int)&v6);
    v3 = sub_430C20((int)&unk_4E1820, &v5);
    if ( (unsigned __int8)unknown_libname_8(v3) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
    }
    else
    {
      v8 = *(_DWORD *)(sub_420250((int *)&v15) + 4);
      if ( *(_DWORD *)(v8 + 304) & (1 << dword_4E35B8) )
      {
        v12 = 20187;
        v13 = 66717;
        *(_DWORD *)(v14 + 316) = 4;
        *(_DWORD *)(v14 + 320) = v11;
        CChar::SetXY(v14, (int)&v12);
        CChar::SetDirection((void *)v14, -2, 3);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 192))(v14, v8);
        *(_DWORD *)(v14 + 476) = 1;
        memset((void *)(v14 + 664), 0, 0xCu);
        *(_DWORD *)(v14 + 468) = GetTickCount() + 10000;
        *(_DWORD *)(v14 + 556) = *(_DWORD *)(v14 + 468);
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        CChar::Lock(v14, a1, a2, a3);
        v9 = v12 >> 5;
        v10 = v13 >> 5;
        if ( sub_491360(*(void **)(v14 + 320), a1, a2, a3, v14, (int)&v9) )
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v14 + 196))(v14, 0);
          (*(void (__thiscall **)(int))(*(_DWORD *)v14 + 240))(v14);
          (*(void (__thiscall **)(int))(*(_DWORD *)v14 + 224))(v14);
          CChar::GetMaxHP(v14);
          std___Mpunct_wchar_t___do_frac_digits(v14);
          CChar::WriteInSight(a1, a2, a3, v14, 51, (unsigned int)"wdddwdddIsbds");
          CChar::Unlock(v14, a1, a2, a3);
        }
        else
        {
          CChar::Unlock(v14, a1, a2, a3);
          if ( v14 )
            (**(void (__thiscall ***)(_DWORD, _DWORD))v14)(v14, 1);
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00443340) --------------------------------------------------------
void __usercall CMonsterBigBirdMother::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  int v5; // [sp+4h] [bp-Ch]@3
  int v6; // [sp+8h] [bp-8h]@9
  DWORD v7; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v7 = GetTickCount();
    v5 = CChar::GetMaxHP(v4);
    if ( *(_DWORD *)(v4 + 272) < v5 )
    {
      if ( v7 >= *(_DWORD *)(v4 + 472) )
      {
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
        CMonsterReal::ResetHostility(v4, a2, a3, a4);
      }
    }
    if ( sub_40F5F0(v4 + 488) || sub_446110() )
    {
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 260))(v4);
      v6 = -1;
      if ( *(_DWORD *)(v4 + 664) <= v7 )
      {
        *(_DWORD *)(v4 + 664) = v7 + 30000;
        if ( sub_406E10(1, 100) <= 80 )
          v6 = 21;
      }
      if ( *(_DWORD *)(v4 + 668) <= v7 )
      {
        *(_DWORD *)(v4 + 668) = v7 + 37000;
        if ( v6 < 0 )
        {
          if ( sub_406E10(1, 100) <= 90 )
            v6 = 22;
        }
      }
      if ( *(_DWORD *)(v4 + 672) <= v7 )
      {
        *(_DWORD *)(v4 + 672) = v7 + 72000;
        if ( v6 < 0 )
        {
          if ( sub_406E10(1, 100) <= 80 )
            v6 = 23;
        }
      }
      if ( v6 >= 0 )
      {
        if ( sub_480970(v4 + 488, v6) )
          *(_DWORD *)(v4 + 480) = 5;
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (004434F0) --------------------------------------------------------
int __thiscall CMonsterBigBirdMother::Summon(int this, int a2, int a3, int a4, int a5)
{
  int result; // eax@10
  int v6; // [sp+0h] [bp-14h]@8
  int v7; // [sp+4h] [bp-10h]@1
  int v8; // [sp+8h] [bp-Ch]@7
  int i; // [sp+10h] [bp-4h]@1

  v7 = this;
  for ( i = *(_DWORD *)(this + 676); i && *(_DWORD *)(i + 32) != a2; i = *(_DWORD *)(i + 84) )
    ;
  if ( i )
  {
    result = i;
    *(_DWORD *)(i + 44) += a5;
    if ( *(_DWORD *)(i + 44) > a4 )
    {
      result = i;
      *(_DWORD *)(i + 44) = a4;
    }
  }
  else
  {
    v8 = (int)sub_401000(0x58u);
    if ( v8 )
      v6 = CGenMonster::CGenMonster(v8, v7, a2, a3, a5);
    else
      v6 = 0;
    *(_DWORD *)(v6 + 84) = *(_DWORD *)(v7 + 676);
    result = v6;
    *(_DWORD *)(v7 + 676) = v6;
  }
  return result;
}

//----- (004435B0) --------------------------------------------------------
int __usercall CMonsterBigBirdMother::OnSummon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  int v5; // [sp+0h] [bp-Ch]@1
  signed int j; // [sp+4h] [bp-8h]@3
  int i; // [sp+8h] [bp-4h]@1

  v5 = a1;
  result = a1;
  for ( i = *(_DWORD *)(a1 + 676); i; i = *(_DWORD *)(i + 84) )
  {
    for ( j = 0; j < 3 && *(_DWORD *)(i + 48) < *(_DWORD *)(i + 44) && CMonster::Create(a2, a3, a4, i, v5); ++j )
      InterlockedIncrement((volatile LONG *)(i + 48));
    result = *(_DWORD *)(i + 84);
  }
  return result;
}

//----- (00443630) --------------------------------------------------------
int __usercall CMonsterBigBirdMother::Move<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  __int64 v5; // qax@1
  __int64 v6; // [sp+8h] [bp-48h]@19
  int v7; // [sp+18h] [bp-38h]@3
  int v8; // [sp+24h] [bp-2Ch]@1
  int v9; // [sp+28h] [bp-28h]@30
  int v10; // [sp+2Ch] [bp-24h]@31
  __int64 v11; // [sp+30h] [bp-20h]@28
  int v12; // [sp+3Ch] [bp-14h]@30
  __int64 v13; // [sp+40h] [bp-10h]@16
  int v14; // [sp+48h] [bp-8h]@9
  unsigned int v15; // [sp+4Ch] [bp-4h]@3

  v8 = a1;
  v5 = CChar::IsMState(a1, 268436224i64);
  result = HIDWORD(v5) | v5;
  if ( !result )
  {
    result = GetTickCount();
    v15 = result;
    v7 = *(_DWORD *)(v8 + 480);
    switch ( v7 )
    {
      case 1:
        result = v8;
        if ( v15 >= *(_DWORD *)(v8 + 556) )
        {
          result = CMonsterReal::ScanSight(v8, a2, a3, a4);
          v14 = result;
          if ( result )
          {
            *(_DWORD *)(v8 + 656) = 0;
            result = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 188))(v8, v14);
          }
        }
        break;
      case 2:
        if ( !dword_4E1A68 )
        {
          result = v15;
          dword_4E1A68 = v15;
        }
        if ( v15 >= *(_DWORD *)(v8 + 556) )
        {
          v13 = sub_43D870(v8 + 332, *(_DWORD *)(v8 + 464) + 332);
          if ( *(_DWORD *)(v8 + 316) == *(_DWORD *)(*(_DWORD *)(v8 + 464) + 316)
            && v13 <= *(_DWORD *)(v8 + 548) * *(_DWORD *)(v8 + 548) )
          {
            result = *(_DWORD *)(v8 + 312) * *(_DWORD *)(v8 + 312);
            v6 = *(_DWORD *)(v8 + 312) * *(_DWORD *)(v8 + 312);
            if ( HIDWORD(v13) > HIDWORD(v6) || HIDWORD(v13) >= HIDWORD(v6) && (result = v13, (_DWORD)v13 > (_DWORD)v6) )
            {
              *(_DWORD *)(v8 + 480) = 1;
              *(_DWORD *)(v8 + 556) = v15;
              result = v15;
              *(_DWORD *)(v8 + 468) = v15;
            }
            else
            {
              *(_DWORD *)(v8 + 480) = 4;
              dword_4E1A68 = 0;
            }
          }
          else
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
            result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
            dword_4E1A68 = 0;
          }
        }
        break;
      case 7:
        if ( *(_DWORD *)(v8 + 512) == 290 )
        {
          result = v8;
          if ( v15 >= *(_DWORD *)(v8 + 556) )
          {
            v11 = sub_43D870(v8 + 332, *(_DWORD *)(v8 + 484) + 332);
            if ( v11 > *(_DWORD *)(v8 + 312) * *(_DWORD *)(v8 + 312) )
            {
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, *(_DWORD *)(v8 + 484));
              v12 = (*(int (__thiscall **)(int, signed int))(*(_DWORD *)v8 + 152))(v8, 1);
              if ( !CMonsterReal::GetChasePt(v8, a2, a3, a4, (int)&v9, (int)&v12)
                || (result = sub_4925C0(*(void **)(v8 + 320), a2, a3, a4, v8, v9, v10, 0, 1), !result) )
              {
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
                result = v8;
                *(_DWORD *)(v8 + 480) = 1;
              }
            }
            else
            {
              (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
              (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
              result = v8;
              *(_DWORD *)(v8 + 480) = 1;
            }
          }
        }
        else
        {
          *(_DWORD *)(v8 + 480) = 1;
        }
        break;
    }
  }
  return result;
}
// 4E1A68: using guessed type int dword_4E1A68;

//----- (00443970) --------------------------------------------------------
signed int __userpurge CMonsterBigBirdMother::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@2
  int v11; // [sp+0h] [bp-18h]@11
  int v12; // [sp+4h] [bp-14h]@4
  int v13; // [sp+8h] [bp-10h]@1
  int v14; // [sp+10h] [bp-8h]@10
  int v15; // [sp+14h] [bp-4h]@6

  v13 = a1;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 252))() )
  {
    result = 1;
  }
  else
  {
    if ( a10 )
      v12 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a10 + 52))(a10);
    else
      v12 = 1;
    v15 = CChar::GetFinalDamage((void *)v13, a5, a6, v12);
    if ( v15 > 0 )
    {
      CMonsterReal::ManageBuff(v13, a2, a3, a4);
      CChar::Lock(v13, a2, a3, a4);
      if ( CMonsterReal::ApplyDamage(v13, a2, a3, a4, a5, a6, v15, a7, a8, a9, a10) )
      {
        v14 = *(_DWORD *)a9 + *(_DWORD *)a7;
        if ( a10 )
          v11 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a10 + 24))(a10);
        else
          v11 = 0;
        (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v13 + 212))(v13, a5, v14, v11);
        if ( *(_DWORD *)(v13 + 272) > 0 )
        {
          (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v13 + 256))(v13, v14, v12);
          CChar::Unlock(v13, a2, a3, a4);
        }
        else
        {
          *(_DWORD *)(v13 + 272) = 0;
          (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 76))(
            a5,
            *(_DWORD *)(v13 + 28),
            *(_DWORD *)a8);
          CChar::CancelAllBuff(v13, a2, a3, a4);
          CChar::WriteInSight(a2, a3, a4, v13, 61, (unsigned int)"db");
          CChar::Unlock(v13, a2, a3, a4);
          CBase::Delete((void *)v13);
          Sleep(0x157Cu);
          CMonsterBigBirdMaster::Create(a2, a3, a4, *(_DWORD *)(v13 + 464));
        }
        result = 1;
      }
      else
      {
        CChar::Unlock(v13, a2, a3, a4);
        result = 1;
      }
    }
    else
    {
      *(_DWORD *)a9 = 0;
      *(_DWORD *)a7 = 0;
      result = 0;
    }
  }
  return result;
}

//----- (00443B30) --------------------------------------------------------
int __usercall CMonsterBigBirdMother::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  __int64 v5; // qax@1
  int v6; // eax@24
  int v7; // [sp+0h] [bp-60h]@21
  int v8; // [sp+2Ch] [bp-34h]@1
  int v9; // [sp+30h] [bp-30h]@18
  int v10; // [sp+34h] [bp-2Ch]@18
  int v11; // [sp+38h] [bp-28h]@16
  int v12; // [sp+3Ch] [bp-24h]@18
  int v13; // [sp+40h] [bp-20h]@18
  int v14; // [sp+44h] [bp-1Ch]@18
  int v15; // [sp+48h] [bp-18h]@12
  int v16; // [sp+4Ch] [bp-14h]@12
  __int64 v17; // [sp+50h] [bp-10h]@5
  int v18; // [sp+5Ch] [bp-4h]@3

  v8 = a1;
  v5 = CChar::IsMState(a1, 268435712i64);
  result = HIDWORD(v5) | v5;
  if ( !result )
  {
    result = GetTickCount();
    v18 = result;
    if ( (unsigned int)result >= *(_DWORD *)(v8 + 468) )
    {
      v17 = sub_43D870(v8 + 332, *(_DWORD *)(v8 + 464) + 332);
      if ( *(_DWORD *)(v8 + 316) == *(_DWORD *)(*(_DWORD *)(v8 + 464) + 316)
        && v17 <= *(_DWORD *)(v8 + 548) * *(_DWORD *)(v8 + 548) )
      {
        if ( v17 <= *(_DWORD *)(v8 + 312) * *(_DWORD *)(v8 + 312) )
        {
          if ( *(_DWORD *)(v8 + 464) == *(_DWORD *)(v8 + 484) )
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
            result = v8;
            *(_DWORD *)(v8 + 480) = 1;
          }
          else
          {
            *(_DWORD *)(v8 + 468) = v18 + CChar::GetASpeed(v8);
            *(_DWORD *)(v8 + 556) = *(_DWORD *)(v8 + 468);
            result = sub_4934F0(*(_DWORD *)(*(_DWORD *)(v8 + 464) + 320), a2, a3, a4, *(_DWORD *)(v8 + 464) + 324, 20);
            v16 = result;
            v15 = 0;
            while ( v16 )
            {
              result = v15++ + 1;
              if ( v15 >= 7 )
                break;
              v11 = unknown_libname_7();
              if ( !CChar::IsMState(v11, 524288i64) )
              {
                sub_423980(v11, a2, a3, a4, (volatile LONG *)(v11 + 352));
                v12 = 0;
                v9 = 0;
                v14 = 0;
                v13 = 0;
                v10 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 168))(v8, v11);
                v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v11 + 148))(v11, v8);
                if ( !v13 )
                {
                  if ( (*(int (__thiscall **)(int))(*(_DWORD *)v11 + 60))(v11) )
                  {
                    if ( CChar::IsBState(v11, 32768i64) )
                      v7 = -5;
                    else
                      v7 = 0;
                    if ( CChar::CheckHit((void *)v8, v11, v7) )
                    {
                      CChar::Unlock(v8, a2, a3, a4);
                      v6 = CChar::GetAttack(v8);
                      v14 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, _DWORD))(*(_DWORD *)v11 + 72))(
                              v11,
                              v8,
                              v6,
                              &v12,
                              &v9,
                              &v10,
                              0);
                      CChar::Lock(v8, a2, a3, a4);
                    }
                  }
                  if ( !v14 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)v11 + 80))(v11, v8);
                  if ( v14 )
                  {
                    std___Mpunct_wchar_t___do_frac_digits(v11);
                    CChar::WriteInSight(a2, a3, a4, v8, 62, (unsigned int)"ddwwb");
                  }
                  sub_4239C0(v11, a2, a3, a4, v11 + 352);
                }
              }
              result = CBaseList::Pop(v16, a2, a3, a4);
              v16 = result;
            }
          }
        }
        else
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
          result = v8;
          *(_DWORD *)(v8 + 480) = 1;
        }
      }
      else
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 132))(v8, *(_DWORD *)(v8 + 464));
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 188))(v8, 0);
        result = v8;
        *(_DWORD *)(v8 + 480) = 1;
      }
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00443EE0) --------------------------------------------------------
void __usercall CMonsterFireFlower::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@3
  DWORD v6; // [sp+8h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::Lock(v4, a2, a3, a4);
    v5 = -1;
    v6 = GetTickCount();
    if ( *(_DWORD *)(v4 + 664) <= v6 )
    {
      v5 = 34;
      *(_DWORD *)(v4 + 664) = v6 + 12000;
      *(_DWORD *)(v4 + 668) = v6 + 7000;
    }
    if ( *(_DWORD *)(v4 + 668) <= v6 && *(_DWORD *)(v4 + 668) )
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
    else
    {
      if ( v5 >= 0 )
      {
        if ( sub_480970(v4 + 488, v5) )
          *(_DWORD *)(v4 + 480) = 5;
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}

//----- (00443FD0) --------------------------------------------------------
void __usercall CMonsterBigBirdMaster::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@6
  int v5; // [sp+4h] [bp-38h]@4
  char v6; // [sp+10h] [bp-2Ch]@6
  int v7; // [sp+14h] [bp-28h]@6
  int v8; // [sp+18h] [bp-24h]@3
  int v9; // [sp+1Ch] [bp-20h]@8
  int v10; // [sp+20h] [bp-1Ch]@10
  int v11; // [sp+24h] [bp-18h]@10
  int v12; // [sp+28h] [bp-14h]@1
  int v13; // [sp+2Ch] [bp-10h]@10
  int v14; // [sp+30h] [bp-Ch]@10
  int v15; // [sp+34h] [bp-8h]@6
  char v16; // [sp+38h] [bp-4h]@6

  v12 = sub_491080(4);
  if ( v12 )
  {
    v8 = (int)sub_401000(0x2B0u);
    if ( v8 )
      v5 = CMonsterBigBirdMaster::CMonsterBigBirdMaster(v8);
    else
      v5 = 0;
    v15 = v5;
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
    v7 = 318;
    sub_44AE20((int)&unk_4E1820, (int)&v16, (int)&v7);
    v4 = sub_430C20((int)&unk_4E1820, &v6);
    if ( (unsigned __int8)unknown_libname_8(v4) )
    {
      CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
    }
    else
    {
      v9 = *(_DWORD *)(sub_420250((int *)&v16) + 4);
      if ( *(_DWORD *)(v9 + 304) & (1 << dword_4E35B8) )
      {
        v13 = 20187;
        v14 = 66717;
        *(_DWORD *)(v15 + 316) = 4;
        *(_DWORD *)(v15 + 320) = v12;
        CChar::SetXY(v15, (int)&v13);
        CChar::SetDirection((void *)v15, -2, 3);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v15 + 192))(v15, v9);
        *(_DWORD *)(v15 + 476) = 1;
        *(_DWORD *)(v15 + 464) = a4;
        memset((void *)(v15 + 668), 0, 0x10u);
        *(_DWORD *)(v15 + 468) = GetTickCount() + 10000;
        *(_DWORD *)(v15 + 556) = *(_DWORD *)(v15 + 468);
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        CChar::Lock(v15, a1, a2, a3);
        v10 = v13 >> 5;
        v11 = v14 >> 5;
        if ( sub_491360(*(void **)(v15 + 320), a1, a2, a3, v15, (int)&v10) )
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v15 + 196))(v15, 0);
          (*(void (__thiscall **)(int))(*(_DWORD *)v15 + 240))(v15);
          (*(void (__thiscall **)(int))(*(_DWORD *)v15 + 224))(v15);
          CChar::GetMaxHP(v15);
          std___Mpunct_wchar_t___do_frac_digits(v15);
          CChar::WriteInSight(a1, a2, a3, v15, 51, (unsigned int)"wdddwdddIsbds");
          CChar::Unlock(v15, a1, a2, a3);
        }
        else
        {
          CChar::Unlock(v15, a1, a2, a3);
          if ( v15 )
            (**(void (__thiscall ***)(_DWORD, _DWORD))v15)(v15, 1);
        }
      }
      else
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00444290) --------------------------------------------------------
int __thiscall CMonsterBigBirdMaster::CMonsterBigBirdMaster(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_43A7D0(this);
  *(_DWORD *)v2 = &off_4B9578;
  return v2;
}
// 4B9578: using guessed type int (__stdcall *off_4B9578)(int);

//----- (004442B0) --------------------------------------------------------
int __usercall CMonsterFireFlower::_CMonsterFireFlower<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CMonsterReal::_CMonsterReal(a1, a2, a3, a4);
}

//----- (004442D0) --------------------------------------------------------
void __usercall CMonsterBigBirdMaster::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  signed int v5; // [sp+4h] [bp-Ch]@6
  int v6; // [sp+8h] [bp-8h]@13
  DWORD v7; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v7 = GetTickCount();
    if ( CChar::IsGState(v4, 8192) && v7 >= *(_DWORD *)(v4 + 556) )
    {
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 8192);
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v7 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      if ( !*(_DWORD *)(v4 + 476) || sub_40F5F0(v4 + 488) || sub_446110() )
      {
        CChar::Unlock(v4, a2, a3, a4);
      }
      else
      {
        v6 = -1;
        if ( !*(_DWORD *)(v4 + 668) )
          *(_DWORD *)(v4 + 668) = v7;
        if ( *(_DWORD *)(v4 + 272) <= 7 * v5 / 10 && !*(_DWORD *)(v4 + 680)
          || *(_DWORD *)(v4 + 272) <= 4 * v5 / 10 && *(_DWORD *)(v4 + 680) == 1
          || *(_DWORD *)(v4 + 272) <= v5 / 10 && *(_DWORD *)(v4 + 680) == 2 )
        {
          if ( *(_DWORD *)(v4 + 272) > v5 / 10 )
          {
            if ( *(_DWORD *)(v4 + 272) > 4 * v5 / 10 )
              *(_DWORD *)(v4 + 680) = 1;
            else
              *(_DWORD *)(v4 + 680) = 2;
          }
          else
          {
            *(_DWORD *)(v4 + 680) = 3;
          }
          v6 = 28;
        }
        if ( *(_DWORD *)(v4 + 668) <= v7 )
        {
          if ( v6 < 0 )
            v6 = 25;
        }
        if ( *(_DWORD *)(v4 + 672) <= v7 )
          *(_DWORD *)(v4 + 672) = v7 + 18000;
        if ( *(_DWORD *)(v4 + 676) <= v7 )
        {
          *(_DWORD *)(v4 + 676) = v7 + 47000;
          if ( v6 < 0 )
          {
            if ( sub_406E10(1, 100) <= 80 )
              v6 = 27;
          }
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970(v4 + 488, v6) )
            *(_DWORD *)(v4 + 480) = 5;
        }
        CChar::Unlock(v4, a2, a3, a4);
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00444560) --------------------------------------------------------
LONG __userpurge CMonsterMaguniMaster::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v8; // eax@1
  int v10; // [sp+0h] [bp-1Ch]@1
  int v11; // [sp+4h] [bp-18h]@4
  int v12; // [sp+8h] [bp-14h]@4
  int v13; // [sp+Ch] [bp-10h]@4
  int v14; // [sp+10h] [bp-Ch]@4
  int v15; // [sp+14h] [bp-8h]@3
  int v16; // [sp+18h] [bp-4h]@1

  v10 = a1;
  *(_DWORD *)(a1 + 272) = 0;
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a5 + 76))(a5, *(_DWORD *)(a1 + 28), a6);
  v16 = 0;
  CMonsterReal::AllotExp(v10, a2, a3, a4, a7, a8, (int)&v16);
  v8 = (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 164))(a5);
  CInitMonster::DropItem(*(_DWORD *)(v10 + 440), a2, a3, a4, v10, *(_DWORD *)a7, *(_DWORD *)a8, v16, v8);
  if ( *(_DWORD *)(*(_DWORD *)(v10 + 440) + 308) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v10 + 440) + 312) )
    {
      v15 = CItem::CreateItem(*(_DWORD *)(*(_DWORD *)(v10 + 440) + 308), 0, *(_DWORD *)(*(_DWORD *)(v10 + 440) + 312), -1);
      if ( v15 )
      {
        CChar::GetDropPt(v10, (int)&v11);
        v13 = v11 >> 5;
        v14 = v12 >> 5;
        if ( sub_491360(*(void **)(v10 + 320), a2, a3, a4, v15, (int)&v13) )
        {
          *(_DWORD *)(v15 + 80) = 1;
          (*(void (__thiscall **)(int, int, int *, int *, signed int, _DWORD, _DWORD))(*(_DWORD *)v15 + 124))(
            v15,
            v10,
            &v11,
            &v13,
            1,
            *(_DWORD *)a7,
            *(_DWORD *)a8);
        }
      }
    }
  }
  CChar::CancelAllBuff(v10, a2, a3, a4);
  return CChar::WriteInSight(a2, a3, a4, v10, 61, (unsigned int)"db");
}

//----- (004446D0) --------------------------------------------------------
int __thiscall CMonsterSiegeGun::CMonsterSiegeGun(int this, int a2, int a3, int a4, const char *a5, int a6)
{
  int v7; // ST08_4@1

  v7 = this;
  sub_43A7D0(this);
  *(_DWORD *)v7 = &off_4B8CA0;
  *(_DWORD *)(v7 + 316) = a2;
  *(_DWORD *)(v7 + 320) = a3;
  *(_DWORD *)(v7 + 524) = a4;
  *(_DWORD *)(v7 + 280) = 0;
  *(_DWORD *)(v7 + 708) = a6;
  strcpy((char *)(v7 + 664), a5);
  *(_DWORD *)(v7 + 684) = 0;
  *(_DWORD *)(v7 + 712) = 1;
  return v7;
}
// 4B8CA0: using guessed type int (__stdcall *off_4B8CA0)(int);

//----- (00444760) --------------------------------------------------------
int __usercall CMonsterSiegeGun::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, signed int a5, int a6, int a7, int a8, const char *a9, int a10)
{
  int result; // eax@2
  void *v11; // eax@5
  int v12; // [sp+4h] [bp-2Ch]@10
  int v13; // [sp+10h] [bp-20h]@9
  char v14; // [sp+14h] [bp-1Ch]@5
  int v15; // [sp+18h] [bp-18h]@7
  int v16; // [sp+1Ch] [bp-14h]@12
  int v17; // [sp+20h] [bp-10h]@12
  int v18; // [sp+24h] [bp-Ch]@1
  char v19; // [sp+28h] [bp-8h]@5
  int v20; // [sp+2Ch] [bp-4h]@12

  v18 = sub_491080(a5);
  if ( v18 )
  {
    if ( CSMap::IsValidTile((void *)v18, a6, 0) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
      sub_44AE20((int)&unk_4E1820, (int)&v19, (int)&a4);
      v11 = sub_430C20((int)&unk_4E1820, &v14);
      if ( (unsigned __int8)unknown_libname_8(v11) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        result = 0;
      }
      else
      {
        v15 = *(_DWORD *)(sub_420250((int *)&v19) + 4);
        if ( *(_DWORD *)(v15 + 304) & (1 << dword_4E35B8) )
        {
          v13 = (int)sub_401000(0x2D0u);
          if ( v13 )
            v12 = CMonsterSiegeGun::CMonsterSiegeGun(v13, a5, v18, a8, a9, a10);
          else
            v12 = 0;
          v20 = v12;
          CChar::SetXY(v12, a6);
          CChar::SetDirection((void *)v20, *(_DWORD *)a7 - *(_DWORD *)a6, *(_DWORD *)(a7 + 4) - *(_DWORD *)(a6 + 4));
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v20 + 192))(v20, v15);
          *(_DWORD *)(v20 + 704) = *(_DWORD *)(v20 + 348);
          *(_DWORD *)(v20 + 512) = a4;
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          CChar::Lock(v20, a1, a2, a3);
          v16 = *(_DWORD *)a6 >> 5;
          v17 = *(_DWORD *)(a6 + 4) >> 5;
          if ( sub_491360(*(void **)(v20 + 320), a1, a2, a3, v20, (int)&v16) )
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v20 + 196))(v20, 0);
            (*(void (__thiscall **)(int))(*(_DWORD *)v20 + 240))(v20);
            CChar::GetMaxHP(v20);
            std___Mpunct_wchar_t___do_frac_digits(v20);
            CChar::WriteInSight(a1, a2, a3, v20, 51, (unsigned int)"wdddwdddIsbds");
            CChar::Unlock(v20, a1, a2, a3);
            result = v20;
          }
          else
          {
            CChar::Unlock(v20, a1, a2, a3);
            if ( v20 )
              (**(void (__thiscall ***)(_DWORD, _DWORD))v20)(v20, 1);
            result = 0;
          }
        }
        else
        {
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    sub_4328C0("CMonsterGuildWar::Create() not find Map (map:%d)", a5);
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00444A10) --------------------------------------------------------
void __usercall CMonsterSiegeGun::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@7
  int v5; // [sp+4h] [bp-4h]@1

  v5 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    if ( !(*(int (__thiscall **)(int))(*(_DWORD *)v5 + 252))(v5) )
    {
      CChar::Lock(v5, a2, a3, a4);
      if ( *(_DWORD *)(v5 + 464) )
      {
        if ( !CChar::IsNormal(*(_DWORD *)(v5 + 464)) )
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
        }
      }
      v4 = *(_DWORD *)(v5 + 480);
      if ( v4 == 5 )
      {
        if ( sub_480B70(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464)) )
          *(_DWORD *)(v5 + 480) = 6;
      }
      else
      {
        if ( v4 == 6 )
        {
          sub_480C50(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464));
          *(_DWORD *)(v5 + 480) = *(_DWORD *)(v5 + 464) != 0 ? 4 : 1;
        }
      }
      CChar::Unlock(v5, a2, a3, a4);
    }
  }
}

//----- (00444B10) --------------------------------------------------------
void __usercall CMonsterSiegeGun::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@3
  DWORD v6; // [sp+8h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::Lock(v4, a2, a3, a4);
    v6 = GetTickCount();
    v5 = CChar::GetMaxHP(v4);
    if ( *(_DWORD *)(v4 + 272) < v5 )
    {
      if ( v6 >= *(_DWORD *)(v4 + 472) )
      {
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
        CMonsterReal::ResetHostility(v4, a2, a3, a4);
      }
    }
    if ( sub_40F5F0(v4 + 488) )
    {
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      if ( *(_DWORD *)(v4 + 692) == 35 )
      {
        if ( sub_480970(v4 + 488, *(_DWORD *)(v4 + 692)) )
        {
          *(_DWORD *)(v4 + 480) = 5;
          *(_DWORD *)(v4 + 692) = -1;
          *(_DWORD *)(v4 + 688) = *(_DWORD *)(v4 + 156) + v6;
        }
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00444C00) --------------------------------------------------------
LONG __userpurge CMonsterSiegeGun::Die<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v9; // [sp+0h] [bp-Ch]@1
  int v10; // [sp+4h] [bp-8h]@3
  int v11; // [sp+8h] [bp-4h]@1

  v9 = a1;
  *(_DWORD *)(a1 + 272) = 0;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 76))(a5, *(_DWORD *)(a1 + 28), a6);
  v11 = sub_450810(a2, a3, a4, *(_DWORD *)(v9 + 528));
  if ( v11 )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 104))(v9, 256, 0);
    CPlayer::Write(a2, a3, a4, v11, 1, (unsigned int)"b");
    CPlayer::SiegeGunUnset(v11, a2, a3, a4, 1);
    sub_4239C0(v11, a2, a3, a4, v11 + 352);
  }
  else
  {
    v10 = CNPC::FindNPC(a2, a3, a4, *(_DWORD *)(v9 + 708));
    if ( v10 )
    {
      CChar::WriteInSight(a2, a3, a4, v9, 0, (unsigned int)&unk_4B967C);
      CNPCSiegeGunStone::SetOperator(v10, a2, a3, a4, 0);
      CNPCSiegeGunStone::SetSiegeGun(v10, a2, a3, a4, 0);
      CIOObject::Release(v10, a2, a3, a4);
    }
  }
  *(_DWORD *)(v9 + 528) = 0;
  CChar::CancelAllBuff(v9, a2, a3, a4);
  return CChar::WriteInSight(a2, a3, a4, v9, 61, (unsigned int)"db");
}

//----- (00444D30) --------------------------------------------------------
void __userpurge CMonsterSiegeGun::SetFire(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST00_4@1
  int v6; // eax@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v5 + 692) = 35;
  v6 = *(_DWORD *)(a5 + 4);
  *(_DWORD *)(v5 + 696) = *(_DWORD *)a5;
  *(_DWORD *)(v5 + 700) = v6;
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (00444D80) --------------------------------------------------------
int __userpurge CMonsterSiegeGun::Summon<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, int a7, int a8)
{
  return CMonsterSiegeGunBall::Create(a2, a3, a4, *(_BYTE *)(a1 + 512) + a5 - 63, *(_DWORD *)(a1 + 316), a1 + 696, a1);
}

//----- (00444DD0) --------------------------------------------------------
void __userpurge CMonsterSiegeGun::SetOperator(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v5 + 528) = a5;
  if ( a5 )
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 100))(v5, 262144);
  else
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 112))(v5, 262144);
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (00444E30) --------------------------------------------------------
signed int __userpurge CMonsterSiegeGun::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@2
  int v11; // [sp+0h] [bp-1Ch]@4
  int v12; // [sp+4h] [bp-18h]@1
  int v13; // [sp+8h] [bp-14h]@11
  int v14; // [sp+Ch] [bp-10h]@11
  int v15; // [sp+10h] [bp-Ch]@6
  int v16; // [sp+14h] [bp-8h]@10
  int v17; // [sp+18h] [bp-4h]@6

  v12 = a1;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 252))() )
  {
    result = 1;
  }
  else
  {
    if ( a10 )
      v11 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 52))(a10);
    else
      v11 = 1;
    v15 = v11;
    v17 = CChar::GetFinalDamage((void *)v12, a5, a6, v11);
    if ( v17 > 0 )
    {
      CMonsterReal::ManageBuff(v12, a2, a3, a4);
      CChar::Lock(v12, a2, a3, a4);
      if ( CMonsterReal::ApplyDamage(v12, a2, a3, a4, a5, a6, v17, a7, a8, a9, a10) )
      {
        v16 = *(_DWORD *)a9 + *(_DWORD *)a7;
        if ( *(_DWORD *)(v12 + 272) > 0 )
        {
          (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v12 + 256))(v12, v16, v15);
          CChar::Unlock(v12, a2, a3, a4);
        }
        else
        {
          v14 = 0;
          v13 = 0;
          (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v12 + 100))(v12, 524288);
          (*(void (__thiscall **)(int, int, _DWORD, int *, int *))(*(_DWORD *)v12 + 236))(
            v12,
            a5,
            *(_DWORD *)a8,
            &v14,
            &v13);
          CChar::Unlock(v12, a2, a3, a4);
          CBase::Delete((void *)v12);
        }
        result = 1;
      }
      else
      {
        CChar::Unlock(v12, a2, a3, a4);
        result = 1;
      }
    }
    else
    {
      *(_DWORD *)a9 = 0;
      *(_DWORD *)a7 = 0;
      result = 0;
    }
  }
  return result;
}

//----- (00444F90) --------------------------------------------------------
int __userpurge CMonsterSiegeGunBall::CMonsterSiegeGunBall<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v9; // ST0C_4@1

  v9 = a1;
  sub_43A7D0(a1);
  *(_DWORD *)v9 = &off_4B8DA8;
  *(_DWORD *)(v9 + 316) = a5;
  *(_DWORD *)(v9 + 320) = a6;
  *(_DWORD *)(v9 + 348) = 0;
  *(_DWORD *)(v9 + 524) = *(_DWORD *)(a7 + 524);
  memset((void *)(v9 + 664), 0, 8u);
  *(_DWORD *)(v9 + 664) = *(_DWORD *)(a8 + 228) + GetTickCount();
  *(_DWORD *)(v9 + 484) = a7;
  CMonsterReal::AddGState(v9, a2, a3, a4, 8192);
  return v9;
}
// 4B8DA8: using guessed type int (__stdcall *off_4B8DA8)(int);

//----- (00445030) --------------------------------------------------------
int __usercall CMonsterSiegeGunBall::Create<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, signed int a5, int a6, int a7)
{
  int result; // eax@2
  void *v8; // eax@5
  int v9; // [sp+4h] [bp-2Ch]@10
  int v10; // [sp+10h] [bp-20h]@9
  char v11; // [sp+14h] [bp-1Ch]@5
  int v12; // [sp+18h] [bp-18h]@7
  int v13; // [sp+1Ch] [bp-14h]@12
  int v14; // [sp+20h] [bp-10h]@12
  int v15; // [sp+24h] [bp-Ch]@1
  char v16; // [sp+28h] [bp-8h]@5
  int v17; // [sp+2Ch] [bp-4h]@12

  v15 = sub_491080(a5);
  if ( v15 )
  {
    if ( CSMap::IsValidTile((void *)v15, a6, 0) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E182C, a1, a2, a3);
      sub_44AE20((int)&unk_4E1820, (int)&v16, (int)&a4);
      v8 = sub_430C20((int)&unk_4E1820, &v11);
      if ( (unsigned __int8)unknown_libname_8(v8) )
      {
        CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
        result = 0;
      }
      else
      {
        v12 = *(_DWORD *)(sub_420250((int *)&v16) + 4);
        if ( *(_DWORD *)(v12 + 304) & (1 << dword_4E35B8) )
        {
          v10 = (int)sub_401000(0x2A8u);
          if ( v10 )
            v9 = CMonsterSiegeGunBall::CMonsterSiegeGunBall(v10, a1, a2, a3, a5, v15, a7, v12);
          else
            v9 = 0;
          v17 = v9;
          CChar::SetXY(v9, a6);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v17 + 192))(v17, v12);
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          CChar::Lock(v17, a1, a2, a3);
          v13 = *(_DWORD *)a6 >> 5;
          v14 = *(_DWORD *)(a6 + 4) >> 5;
          if ( sub_491360(*(void **)(v17 + 320), a1, a2, a3, v17, (int)&v13) )
          {
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v17 + 196))(v17, 0);
            (*(void (__thiscall **)(int))(*(_DWORD *)v17 + 240))(v17);
            (*(void (__thiscall **)(int))(*(_DWORD *)v17 + 224))(v17);
            CChar::GetMaxHP(v17);
            std___Mpunct_wchar_t___do_frac_digits(v17);
            CChar::WriteInSight(a1, a2, a3, v17, 51, (unsigned int)"wdddwdddIsbds");
            CChar::Unlock(v17, a1, a2, a3);
            result = v17;
          }
          else
          {
            CChar::Unlock(v17, a1, a2, a3);
            if ( v17 )
              (**(void (__thiscall ***)(_DWORD, _DWORD))v17)(v17, 1);
            result = 0;
          }
        }
        else
        {
          CIOCriticalSection::Leave((int)&unk_4E182C, a1, a2, a3);
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    sub_4328C0("CMonsterGuildWar::Create() not find Map (map:%d)", a5);
    result = 0;
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004452B0) --------------------------------------------------------
void __usercall CMonsterSiegeGunBall::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@3
  DWORD v6; // [sp+8h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::Lock(v4, a2, a3, a4);
    v5 = -1;
    v6 = GetTickCount();
    if ( *(_DWORD *)(v4 + 664) <= v6 )
    {
      v5 = 36;
      *(_DWORD *)(v4 + 664) = v6 + 12000;
      *(_DWORD *)(v4 + 668) = v6 + 7000;
    }
    if ( *(_DWORD *)(v4 + 668) <= v6 && *(_DWORD *)(v4 + 668) )
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      *(_DWORD *)(v4 + 484) = 0;
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
    else
    {
      if ( v5 >= 0 )
      {
        if ( sub_480970(v4 + 488, v5) )
          *(_DWORD *)(v4 + 480) = 5;
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}

//----- (004453B0) --------------------------------------------------------
void __usercall CMonsterSiegeGunBall::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@7
  int v5; // [sp+4h] [bp-4h]@1

  v5 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    if ( !(*(int (__thiscall **)(int))(*(_DWORD *)v5 + 252))(v5) )
    {
      CChar::Lock(v5, a2, a3, a4);
      if ( *(_DWORD *)(v5 + 464) )
      {
        if ( !CChar::IsNormal(*(_DWORD *)(v5 + 464)) )
        {
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 132))(v5, *(_DWORD *)(v5 + 464));
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 188))(v5, 0);
        }
      }
      v4 = *(_DWORD *)(v5 + 480);
      if ( v4 == 5 )
      {
        if ( sub_480B70(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464)) )
          *(_DWORD *)(v5 + 480) = 6;
      }
      else
      {
        if ( v4 == 6 )
        {
          sub_480C50(v5 + 488, a2, a3, a4, *(_DWORD *)(v5 + 464));
          *(_DWORD *)(v5 + 480) = 1;
        }
      }
      CChar::Unlock(v5, a2, a3, a4);
    }
  }
}

//----- (004454A0) --------------------------------------------------------
void __usercall CMonsterSiegeGunRuins::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::Lock(v4, a2, a3, a4);
    if ( *(_DWORD *)(v4 + 664) > GetTickCount() )
    {
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
  }
}

//----- (00445510) --------------------------------------------------------
void __usercall CMonsterWithSkillOnly::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  int v5; // [sp+4h] [bp-Ch]@6
  DWORD v6; // [sp+8h] [bp-8h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v6 = GetTickCount();
    if ( CChar::IsGState(v4, 1) && v6 >= *(_DWORD *)(v4 + 468) )
    {
      CChar::WriteInSight(a2, a3, a4, v4, 61, (unsigned int)"db");
      CChar::Unlock(v4, a2, a3, a4);
      CBase::Delete((void *)v4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v6 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      if ( !sub_40F5F0(v4 + 488) )
        sub_480A00(v4 + 488);
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00445610) --------------------------------------------------------
void __thiscall CMonsterWithSkillOnly::Attack(int this)
{
  int v1; // [sp+20h] [bp-14h]@1
  __int64 v2; // [sp+24h] [bp-10h]@5

  v1 = this;
  if ( !CChar::IsMState(this, 268435712i64) )
  {
    if ( GetTickCount() >= *(_DWORD *)(v1 + 468) )
    {
      v2 = sub_43D870(v1 + 332, *(_DWORD *)(v1 + 464) + 332);
      if ( *(_DWORD *)(v1 + 316) == *(_DWORD *)(*(_DWORD *)(v1 + 464) + 316)
        && v2 <= *(_DWORD *)(v1 + 548) * *(_DWORD *)(v1 + 548) )
      {
        if ( v2 <= *(_DWORD *)(v1 + 312) * *(_DWORD *)(v1 + 312) )
        {
          if ( *(_DWORD *)(v1 + 464) == *(_DWORD *)(v1 + 484) )
          {
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v1 + 132))(v1, *(_DWORD *)(v1 + 464));
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v1 + 188))(v1, 0);
            *(_DWORD *)(v1 + 480) = 1;
          }
          else
          {
            CChar::SetDirection(
              (void *)v1,
              *(_DWORD *)(*(_DWORD *)(v1 + 464) + 332) - *(_DWORD *)(v1 + 332),
              *(_DWORD *)(*(_DWORD *)(v1 + 464) + 336) - *(_DWORD *)(v1 + 336));
          }
        }
        else
        {
          if ( !CChar::IsMState(v1, 512i64) )
          {
            *(_DWORD *)(v1 + 652) = 1;
            *(_DWORD *)(v1 + 480) = 2;
          }
        }
      }
      else
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v1 + 132))(v1, *(_DWORD *)(v1 + 464));
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v1 + 188))(v1, 0);
      }
    }
  }
}

//----- (004457F0) --------------------------------------------------------
void __usercall CMonsterInvaderBoss::AI(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    if ( !(*(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 252))(v4) )
    {
      CChar::Lock(v4, a2, a3, a4);
      if ( *(_DWORD *)(v4 + 464) )
      {
        if ( !CChar::IsNormal(*(_DWORD *)(v4 + 464)) )
        {
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 132))(v4, *(_DWORD *)(v4 + 464));
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 188))(v4, 0);
        }
      }
      switch ( *(_DWORD *)(v4 + 480) )
      {
        case 1:
          *(_DWORD *)(v4 + 688) = 0;
          goto LABEL_9;
        case 2:
        case 3:
LABEL_9:
          (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 248))(v4);
          break;
        case 4:
          (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 244))(v4);
          break;
        case 5:
          if ( sub_480B70(v4 + 488, a2, a3, a4, *(_DWORD *)(v4 + 464)) )
            *(_DWORD *)(v4 + 480) = 6;
          break;
        case 6:
          sub_480C50(v4 + 488, a2, a3, a4, *(_DWORD *)(v4 + 464));
          *(_DWORD *)(v4 + 480) = *(_DWORD *)(v4 + 464) != 0 ? 4 : 1;
          break;
        default:
          break;
      }
      CChar::Unlock(v4, a2, a3, a4);
    }
  }
}

//----- (00445950) --------------------------------------------------------
void __usercall CMonsterInvaderBoss::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-10h]@1
  int v5; // [sp+4h] [bp-Ch]@6
  int v6; // [sp+8h] [bp-8h]@13
  DWORD v7; // [sp+Ch] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CChar::RefreshBuff(v4, a2, a3, a4);
    CChar::Lock(v4, a2, a3, a4);
    v7 = GetTickCount();
    if ( CChar::IsGState(v4, 8192) && v7 >= *(_DWORD *)(v4 + 556) )
    {
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 8192);
      CChar::Unlock(v4, a2, a3, a4);
    }
    else
    {
      v5 = CChar::GetMaxHP(v4);
      if ( *(_DWORD *)(v4 + 272) < v5 )
      {
        if ( v7 >= *(_DWORD *)(v4 + 472) )
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 7, 1, v5);
          CMonsterReal::ResetHostility(v4, a2, a3, a4);
        }
      }
      if ( !*(_DWORD *)(v4 + 476) || sub_40F5F0(v4 + 488) || sub_446110() )
      {
        CChar::Unlock(v4, a2, a3, a4);
      }
      else
      {
        v6 = -1;
        if ( !*(_DWORD *)(v4 + 668) )
          *(_DWORD *)(v4 + 668) = v7 + 10000;
        if ( *(_DWORD *)(v4 + 672) <= v7 )
        {
          *(_DWORD *)(v4 + 672) = v7 + 15000;
          if ( sub_406E10(1, 100) <= 50 )
            v6 = 38;
        }
        if ( *(_DWORD *)(v4 + 668) <= v7 )
        {
          *(_DWORD *)(v4 + 668) = v7 + 10000;
          if ( v6 < 0 )
          {
            if ( sub_406E10(1, 100) <= 80 )
              v6 = 39;
          }
        }
        if ( v6 >= 0 )
        {
          if ( sub_480970(v4 + 488, v6) )
            *(_DWORD *)(v4 + 480) = 5;
        }
        CChar::Unlock(v4, a2, a3, a4);
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40F5F0: using guessed type int __thiscall sub_40F5F0(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00445B20) --------------------------------------------------------
int __thiscall sub_445B20(int this)
{
  return sub_4312E0(this);
}

//----- (00445B40) --------------------------------------------------------
void *__thiscall sub_445B40(int this, void *a2)
{
  sub_446700(a2, *(_DWORD *)(this + 8));
  return a2;
}

//----- (00445B60) --------------------------------------------------------
bool __thiscall sub_445B60(int this)
{
  return sub_4311A0(this) == 0;
}

//----- (00445B80) --------------------------------------------------------
char *__thiscall sub_445B80(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_4311A0(this);
  if ( v2 >= (unsigned int)sub_4461C0(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_446200(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_446280(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (00445BF0) --------------------------------------------------------
int __thiscall sub_445BF0(int this)
{
  return sub_4310A0(this);
}

//----- (00445C10) --------------------------------------------------------
char *__thiscall sub_445C10(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_472D60(this);
  if ( v2 >= (unsigned int)sub_472D20(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_4462B0(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_472EA0(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (00445C80) --------------------------------------------------------
void *__thiscall sub_445C80(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00445CB0) --------------------------------------------------------
int __thiscall sub_445CB0(int this)
{
  return sub_4464B0(this);
}

//----- (00445CD0) --------------------------------------------------------
int __thiscall sub_445CD0(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_4463F0(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_446350(v3, &v4, v5, v6);
  return v7;
}

//----- (00445D30) --------------------------------------------------------
int __thiscall sub_445D30(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_446430(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 446430: using guessed type _DWORD __stdcall sub_446430(_DWORD);

//----- (00445D90) --------------------------------------------------------
int __thiscall sub_445D90(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_446560(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 446560: using guessed type _DWORD __stdcall sub_446560(_DWORD);

//----- (00445DF0) --------------------------------------------------------
int __thiscall sub_445DF0(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_4186F0(v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_420270(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_418880((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_4186F0(v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_420270(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00445FA0) --------------------------------------------------------
int __thiscall sub_445FA0(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472C30(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_4465E0(v3, &v4, v5, v6);
  return v7;
}

//----- (00446000) --------------------------------------------------------
int __thiscall sub_446000(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_446680(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 446680: using guessed type _DWORD __stdcall sub_446680(_DWORD);

//----- (00446060) --------------------------------------------------------
int __thiscall sub_446060(void *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *(_DWORD *)this;
  sub_431390(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (00446090) --------------------------------------------------------
int __thiscall sub_446090(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_418860(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (004460C0) --------------------------------------------------------
void *__thiscall sub_4460C0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004460F0) --------------------------------------------------------
int __thiscall sub_4460F0(int this)
{
  return sub_446750(this);
}

//----- (00446110) --------------------------------------------------------
bool __cdecl sub_446110()
{
  return unknown_libname_10() == 0;
}

//----- (00446130) --------------------------------------------------------
int __thiscall sub_446130(int this, int a2, int a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_446720(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), (unsigned __int8)sub_48D9E0(a3, v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004461C0) --------------------------------------------------------
int __thiscall sub_4461C0(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) / 12;
  else
    v2 = 0;
  return v2;
}

//----- (00446200) --------------------------------------------------------
int __thiscall sub_446200(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_4311A0(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_431D50(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_446820(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_446FA0(v7, a2, v6);
  return a2;
}

//----- (00446280) --------------------------------------------------------
char *__stdcall sub_446280(void *a1, int a2, int a3)
{
  sub_425330(a1, a2, a3);
  return (char *)a1 + 12 * a2;
}

//----- (004462B0) --------------------------------------------------------
int __thiscall sub_4462B0(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_472D60(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_4470B0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_446B80(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_478710(v7, a2, v6);
  return a2;
}

//----- (00446350) --------------------------------------------------------
void *__thiscall sub_446350(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_445D30(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004463F0) --------------------------------------------------------
int __thiscall sub_4463F0(int this, int a2, int a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_446E70(this, &v8, a3);
  v6 = (int)sub_446720(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00446430) --------------------------------------------------------
int __stdcall sub_446430(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_446430(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 446430: using guessed type _DWORD __stdcall sub_446430(_DWORD);

//----- (004464B0) --------------------------------------------------------
int __thiscall sub_4464B0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_446350(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00446560) --------------------------------------------------------
int __stdcall sub_446560(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_446560(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 446560: using guessed type _DWORD __stdcall sub_446560(_DWORD);

//----- (004465E0) --------------------------------------------------------
void *__thiscall sub_4465E0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_446F30(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00446680) --------------------------------------------------------
int __stdcall sub_446680(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_446680(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 446680: using guessed type _DWORD __stdcall sub_446680(_DWORD);

//----- (00446700) --------------------------------------------------------
void *__thiscall sub_446700(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  sub_446FD0(a2);
  return v3;
}
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (00446720) --------------------------------------------------------
void *__thiscall sub_446720(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_446EA0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00446750) --------------------------------------------------------
int __thiscall sub_446750(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_447010(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00446800) --------------------------------------------------------
signed int __cdecl sub_446800()
{
  return sub_4790C0();
}

//----- (00446820) --------------------------------------------------------
int __thiscall sub_446820(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  signed int v5; // esi@3
  void *v6; // eax@11
  void *v7; // eax@11
  void *v8; // ST20_4@11
  int v9; // ST18_4@16
  int v10; // [sp+4h] [bp-24h]@7
  int v11; // [sp+8h] [bp-20h]@1
  int v12; // [sp+10h] [bp-18h]@11
  unsigned int v13; // [sp+18h] [bp-10h]@1
  int v14; // [sp+18h] [bp-10h]@9
  int v15; // [sp+1Ch] [bp-Ch]@1
  int v16; // [sp+20h] [bp-8h]@1
  int v17; // [sp+24h] [bp-4h]@1
  int v18; // [sp+34h] [bp+Ch]@11

  v11 = this;
  v15 = *(_DWORD *)a4;
  v16 = *(_DWORD *)(a4 + 4);
  v17 = *(_DWORD *)(a4 + 8);
  result = sub_4461C0(this);
  v13 = result;
  if ( a3 )
  {
    v5 = sub_446800();
    if ( v5 - sub_4311A0(v11) >= (unsigned int)a3 )
    {
      if ( v13 >= a3 + sub_4311A0(v11) )
      {
        if ( (*(_DWORD *)(v11 + 8) - a2) / 12 >= (unsigned int)a3 )
        {
          v9 = *(_DWORD *)(v11 + 8);
          *(_DWORD *)(v11 + 8) = sub_4474B0(v9 - 12 * a3, v9, *(void **)(v11 + 8));
          sub_4474E0(a2, v9 - 12 * a3, v9);
          result = sub_425370(a2, a2 + 12 * a3, (int)&v15);
        }
        else
        {
          sub_4474B0(a2, *(_DWORD *)(v11 + 8), (void *)(a2 + 12 * a3));
          sub_446280(*(void **)(v11 + 8), a3 - (*(_DWORD *)(v11 + 8) - a2) / 12, (int)&v15);
          *(_DWORD *)(v11 + 8) += 12 * a3;
          result = sub_425370(a2, *(_DWORD *)(v11 + 8) - 12 * a3, (int)&v15);
        }
      }
      else
      {
        if ( sub_446800() - (v13 >> 1) >= v13 )
          v10 = v13 + (v13 >> 1);
        else
          v10 = 0;
        v14 = v10;
        if ( v10 < (unsigned int)(a3 + sub_4311A0(v11)) )
          v14 = a3 + sub_4311A0(v11);
        v6 = sub_446B40(v14);
        v12 = (int)v6;
        v7 = sub_4474B0(*(_DWORD *)(v11 + 4), a2, v6);
        v8 = sub_446280(v7, a3, (int)&v15);
        sub_4474B0(a2, *(_DWORD *)(v11 + 8), v8);
        v18 = a3 + sub_4311A0(v11);
        if ( *(_DWORD *)(v11 + 4) )
        {
          sub_424F70(*(_DWORD *)(v11 + 4), *(_DWORD *)(v11 + 8));
          sub_4338F0(*(_DWORD *)(v11 + 4), (*(_DWORD *)(v11 + 12) - *(_DWORD *)(v11 + 4)) / 12);
        }
        *(_DWORD *)(v11 + 12) = v12 + 12 * v14;
        *(_DWORD *)(v11 + 8) = v12 + 12 * v18;
        result = v12;
        *(_DWORD *)(v11 + 4) = v12;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (00446B00) --------------------------------------------------------
int __cdecl sub_446B00()
{
  void *v1; // eax@1
  char v2; // [sp+4h] [bp-40h]@1
  char v3; // [sp+20h] [bp-24h]@1

  sub_40FD10(&v2, "vector<T> too long");
  v1 = sub_40F550(&v3, (int)&v2);
  sub_40F510(v1);
  sub_40F6E0(&v3);
  return sub_40F780((int)&v2);
}

//----- (00446B40) --------------------------------------------------------
void *__stdcall sub_446B40(int a1)
{
  return sub_44CEC0(a1);
}

//----- (00446B60) --------------------------------------------------------
signed int __cdecl sub_446B60()
{
  return sub_478BE0();
}

//----- (00446B80) --------------------------------------------------------
int __thiscall sub_446B80(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // edx@1
  signed int v6; // esi@3
  void *v7; // eax@11
  void *v8; // eax@11
  void *v9; // ST20_4@11
  int v10; // ST18_4@16
  int v11; // [sp+4h] [bp-20h]@7
  int v12; // [sp+8h] [bp-1Ch]@1
  void *v13; // [sp+10h] [bp-14h]@11
  unsigned int v14; // [sp+18h] [bp-Ch]@1
  int v15; // [sp+18h] [bp-Ch]@9
  int v16; // [sp+1Ch] [bp-8h]@1
  int v17; // [sp+20h] [bp-4h]@1
  int v18; // [sp+30h] [bp+Ch]@11

  v12 = this;
  v5 = *(_DWORD *)(a4 + 4);
  v16 = *(_DWORD *)a4;
  v17 = v5;
  result = sub_472D20(this);
  v14 = result;
  if ( a3 )
  {
    v6 = sub_446B60();
    if ( v6 - sub_472D60(v12) >= (unsigned int)a3 )
    {
      if ( v14 >= a3 + sub_472D60(v12) )
      {
        if ( (*(_DWORD *)(v12 + 8) - a2) >> 3 >= (unsigned int)a3 )
        {
          v10 = *(_DWORD *)(v12 + 8);
          *(_DWORD *)(v12 + 8) = sub_431E60(v10 - 8 * a3, v10, *(void **)(v12 + 8));
          sub_47A3F0(a2, v10 - 8 * a3, v10);
          result = sub_447520(a2, a2 + 8 * a3, (int)&v16);
        }
        else
        {
          sub_431E60(a2, *(_DWORD *)(v12 + 8), (void *)(a2 + 8 * a3));
          sub_472EA0(*(void **)(v12 + 8), a3 - ((*(_DWORD *)(v12 + 8) - a2) >> 3), (int)&v16);
          *(_DWORD *)(v12 + 8) += 8 * a3;
          result = sub_447520(a2, *(_DWORD *)(v12 + 8) - 8 * a3, (int)&v16);
        }
      }
      else
      {
        if ( sub_446B60() - (v14 >> 1) >= v14 )
          v11 = v14 + (v14 >> 1);
        else
          v11 = 0;
        v15 = v11;
        if ( v11 < (unsigned int)(a3 + sub_472D60(v12)) )
          v15 = a3 + sub_472D60(v12);
        v7 = sub_446E50(v15);
        v13 = v7;
        v8 = sub_431E60(*(_DWORD *)(v12 + 4), a2, v7);
        v9 = sub_472EA0(v8, a3, (int)&v16);
        sub_431E60(a2, *(_DWORD *)(v12 + 8), v9);
        v18 = a3 + sub_472D60(v12);
        if ( *(_DWORD *)(v12 + 4) )
        {
          sub_4316C0(*(_DWORD *)(v12 + 4), *(_DWORD *)(v12 + 8));
          sub_4338F0(*(_DWORD *)(v12 + 4), (*(_DWORD *)(v12 + 12) - *(_DWORD *)(v12 + 4)) >> 3);
        }
        *(_DWORD *)(v12 + 12) = (char *)v13 + 8 * v15;
        result = v12;
        *(_DWORD *)(v12 + 8) = (char *)v13 + 8 * v18;
        *(_DWORD *)(v12 + 4) = v13;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (00446E50) --------------------------------------------------------
void *__stdcall sub_446E50(int a1)
{
  return sub_47A430(a1);
}

//----- (00446E70) --------------------------------------------------------
void *__thiscall sub_446E70(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_447120(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00446EA0) --------------------------------------------------------
int __thiscall sub_446EA0(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_48D9E0(v3, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (00446F30) --------------------------------------------------------
int __thiscall sub_446F30(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_4472D0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 4472D0: using guessed type _DWORD __stdcall sub_4472D0(_DWORD);

//----- (00446F90) --------------------------------------------------------
int __cdecl sub_446F90(int a1)
{
  return a1 + 20;
}

//----- (00446FA0) --------------------------------------------------------
int __thiscall sub_446FA0(void *this, int a2, int a3)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = *(_DWORD *)this;
  *(_DWORD *)a2 = *(_DWORD *)sub_447350(&v4, a3);
  return a2;
}

//----- (00446FF0) --------------------------------------------------------
int __cdecl sub_446FF0(int a1)
{
  return a1 + 4;
}

//----- (00447000) --------------------------------------------------------
int __cdecl sub_447000(int a1)
{
  return a1 + 12;
}

//----- (00447010) --------------------------------------------------------
void *__thiscall sub_447010(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_447370(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004470B0) --------------------------------------------------------
int __thiscall sub_4470B0(void *this, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)this;
  return sub_431DD0(&v3, a2);
}

//----- (004470E0) --------------------------------------------------------
int __cdecl sub_4470E0(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_430F90(a1);
    if ( *(_BYTE *)sub_431110(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00447120) --------------------------------------------------------
int __thiscall sub_447120(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_48D9E0(a2, v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (004471B0) --------------------------------------------------------
int __cdecl sub_4471B0()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-14h]@1
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  int v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v1 = (int)sub_44CD20(1);
  v8 = v1;
  v9 = 0;
  v7 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v7);
  ++v9;
  v6 = 0;
  v3 = sub_446FF0(v8);
  sub_42F9B0((void *)v3, (void **)&v6);
  ++v9;
  v5 = 0;
  v4 = sub_430F90(v8);
  sub_42F9B0((void *)v4, (void **)&v5);
  *(_BYTE *)sub_446F90(v8) = 1;
  *(_BYTE *)sub_431110(v8) = 0;
  return v8;
}

//----- (004472D0) --------------------------------------------------------
int __stdcall sub_4472D0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_4472D0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 4472D0: using guessed type _DWORD __stdcall sub_4472D0(_DWORD);

//----- (00447350) --------------------------------------------------------
void *__thiscall sub_447350(void *this, int a2)
{
  *(_DWORD *)this += 12 * a2;
  return this;
}

//----- (00447370) --------------------------------------------------------
int __thiscall sub_447370(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_4473F0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 4473F0: using guessed type _DWORD __stdcall sub_4473F0(_DWORD);

//----- (004473D0) --------------------------------------------------------
void *__thiscall sub_4473D0(void *this, int a2)
{
  *(_DWORD *)this += 8 * a2;
  return this;
}

//----- (004473F0) --------------------------------------------------------
int __stdcall sub_4473F0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_4473F0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 4473F0: using guessed type _DWORD __stdcall sub_4473F0(_DWORD);

//----- (00447470) --------------------------------------------------------
int __cdecl sub_447470(int a1, int a2)
{
  char v3; // al@1

  v3 = unknown_libname_6(&a1, &a2);
  return sub_431F70(a1, a2);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (004474B0) --------------------------------------------------------
void *__stdcall sub_4474B0(int a1, int a2, void *a3)
{
  return sub_431FA0(a1, a2, a3);
}

//----- (004474E0) --------------------------------------------------------
int __cdecl sub_4474E0(int a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a3);
  return sub_4254E0(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (00447520) --------------------------------------------------------
int __cdecl sub_447520(int a1, int a2, int a3)
{
  int result; // eax@2
  int v4; // ecx@2

  while ( a1 != a2 )
  {
    v4 = *(_DWORD *)(a3 + 4);
    *(_DWORD *)a1 = *(_DWORD *)a3;
    *(_DWORD *)(a1 + 4) = v4;
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (00447570) --------------------------------------------------------
void *__cdecl sub_447570(void *a1, int a2, int a3)
{
  void *result; // eax@1

  result = a1;
  while ( a2 )
  {
    result = sub_47A6D0(a1, a3);
    --a2;
    a1 = (char *)a1 + 8;
  }
  return result;
}

//----- (004475D0) --------------------------------------------------------
void *__stdcall sub_4475D0(void *a1, int a2)
{
  return sub_4476D0(a1, a2);
}

//----- (004475F0) --------------------------------------------------------
void *__cdecl sub_4475F0(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_4475D0(a3, a1);
    a3 = (char *)a3 + 12;
    a1 += 12;
  }
  return a3;
}

//----- (00447660) --------------------------------------------------------
void *__cdecl sub_447660(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_47A6D0(a3, a1);
    a3 = (char *)a3 + 8;
    a1 += 8;
  }
  return a3;
}

//----- (004476D0) --------------------------------------------------------
void *__cdecl sub_4476D0(void *a1, int a2)
{
  void *result; // eax@1
  void *v3; // [sp+4h] [bp-4h]@1

  result = operator new(0xCu, a1);
  v3 = result;
  if ( result )
  {
    *(_DWORD *)result = *(_DWORD *)a2;
    result = *(void **)(a2 + 4);
    *((_DWORD *)v3 + 1) = result;
    *((_DWORD *)v3 + 2) = *(_DWORD *)(a2 + 8);
  }
  return result;
}

//----- (00447720) --------------------------------------------------------
void *__cdecl sub_447720(void *a1, int a2)
{
  void *result; // eax@1
  void *v3; // [sp+4h] [bp-4h]@1

  result = operator new(8u, a1);
  v3 = result;
  if ( result )
  {
    result = *(void **)(a2 + 4);
    *(_DWORD *)v3 = *(_DWORD *)a2;
    *((_DWORD *)v3 + 1) = result;
  }
  return result;
}

//----- (00447760) --------------------------------------------------------
void *__thiscall sub_447760(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00447790) --------------------------------------------------------
void *__thiscall sub_447790(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004477C0) --------------------------------------------------------
void *__thiscall sub_4477C0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004477F0) --------------------------------------------------------
int __thiscall sub_4477F0(int this)
{
  return sub_447810(this);
}

//----- (00447810) --------------------------------------------------------
int __thiscall sub_447810(int this)
{
  return sub_447830(this);
}

//----- (00447830) --------------------------------------------------------
int __thiscall sub_447830(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4478E0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (004478E0) --------------------------------------------------------
void *__thiscall sub_4478E0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_445D90(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00447980) --------------------------------------------------------
int __thiscall sub_447980(int this)
{
  return sub_4479A0(this);
}

//----- (004479A0) --------------------------------------------------------
int __thiscall sub_4479A0(int this)
{
  return sub_4479C0(this);
}

//----- (004479C0) --------------------------------------------------------
int __thiscall sub_4479C0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4465E0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00447A70) --------------------------------------------------------
int __thiscall sub_447A70(int this)
{
  return sub_447A90(this);
}

//----- (00447A90) --------------------------------------------------------
int __thiscall sub_447A90(int this)
{
  return sub_447AB0(this);
}

//----- (00447AB0) --------------------------------------------------------
int __thiscall sub_447AB0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_447B60(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00447B60) --------------------------------------------------------
void *__thiscall sub_447B60(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_446000(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00447C00) --------------------------------------------------------
int __thiscall CInitNPC::CInitNPC(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B9680;
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  return v2;
}
// 4B9680: using guessed type int (__stdcall *off_4B9680)(int);

//----- (00447C40) --------------------------------------------------------
int __userpurge CInitNPC::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CInitNPC::_CInitNPC(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00447C70) --------------------------------------------------------
int __usercall CInitNPC::_CInitNPC<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B9680;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B9680: using guessed type int (__stdcall *off_4B9680)(int);

//----- (00447C90) --------------------------------------------------------
char __cdecl CInitNPC::Close()
{
  int v0; // eax@2
  void *v1; // eax@2
  int v3; // [sp+8h] [bp-10h]@3
  char v4; // [sp+Ch] [bp-Ch]@2
  char v5; // [sp+10h] [bp-8h]@5
  char v6; // [sp+14h] [bp-4h]@1

  sub_40F070((int)&unk_4E1A9C, &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)&unk_4E1A9C, &v4);
    v0 = (unsigned __int8)sub_47D070(v1);
    if ( !(_BYTE)v0 )
      break;
    v3 = *(_DWORD *)(sub_420250((int *)&v6) + 4);
    if ( v3 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v3)(v3, 1);
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  return v0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00447D10) --------------------------------------------------------
int __cdecl CInitNPC::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0x28u);
  if ( v2 )
    v1 = CInitNPC::CInitNPC(v2);
  else
    v1 = 0;
  return v1;
}

//----- (00447D50) --------------------------------------------------------
signed int __thiscall CInitNPC::Set(void *this, int a2, char a3)
{
  void *v4; // eax@4
  void *v5; // eax@5
  void *v6; // [sp-4h] [bp-18h]@3
  int v7; // [sp+0h] [bp-14h]@1
  void *v8; // [sp+4h] [bp-10h]@1
  char v9; // [sp+Ch] [bp-8h]@5
  char v10; // [sp+10h] [bp-4h]@4

  v8 = this;
  v7 = a2;
  if ( a2 == 30 )
  {
    v4 = sub_4023A0(&a3, &v10);
    *((_DWORD *)v8 + 8) = sub_40C8D0(v4);
  }
  else
  {
    if ( v7 != 53 )
    {
      v6 = this;
      sub_402340(&v6, (int)&a3);
      return CBase::Set(v8, a2, (char)v6);
    }
    v5 = sub_4023A0(&a3, &v9);
    *((_DWORD *)v8 + 9) = sub_40C8D0(v5);
  }
  return 1;
}

//----- (00447DD0) --------------------------------------------------------
signed int __thiscall CInitNPC::OnLoad(void *this)
{
  int v1; // eax@1
  signed int result; // eax@2
  void *v3; // [sp+0h] [bp-18h]@1
  void *v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+10h] [bp-8h]@1
  char v7; // [sp+14h] [bp-4h]@1

  v3 = this;
  v4 = this;
  v1 = sub_420990((int)&v5, (int)((char *)this + 32), (int)&v4);
  sub_445DF0((int)&unk_4E1A9C, (int)&v6, v1);
  if ( v7 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CInitNPC::OnLoad() Duplicated InitNPC.(Kind:%d)", *((_DWORD *)v3 + 8));
    result = 0;
  }
  return result;
}

//----- (00447E30) --------------------------------------------------------
int __thiscall CGenNPC::CGenNPC(int this)
{
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4B96F8;
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  *(_DWORD *)(v2 + 44) = 0;
  *(_DWORD *)(v2 + 48) = 0;
  *(_DWORD *)(v2 + 52) = 0;
  *(_DWORD *)(v2 + 56) = 0;
  *(_DWORD *)(v2 + 64) = -1;
  *(_DWORD *)(v2 + 60) = -1;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 76) = -1;
  *(_DWORD *)(v2 + 72) = -1;
  *(_DWORD *)(v2 + 80) = 0;
  *(_DWORD *)(v2 + 84) = 0;
  *(_DWORD *)(v2 + 88) = 0;
  *(_DWORD *)(v2 + 92) = 0;
  *(_DWORD *)(v2 + 96) = 0;
  for ( *(_DWORD *)(v2 + 100) = 0; *(_DWORD *)(v2 + 100) > 5; ++*(_DWORD *)(v2 + 100) )
  {
    *(_DWORD *)(v2 + 4 * *(_DWORD *)(v2 + 100) + 104) = 0;
    *(_DWORD *)(v2 + 8 * *(_DWORD *)(v2 + 100) + 128) = 0;
    *(_DWORD *)(v2 + 8 * *(_DWORD *)(v2 + 100) + 124) = 0;
  }
  *(_DWORD *)(v2 + 100) = 0;
  return v2;
}
// 4B96F8: using guessed type int (__stdcall *off_4B96F8)(int);

//----- (00447F60) --------------------------------------------------------
int __userpurge CGenNPC::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CGenNPC::_CGenNPC(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00447F90) --------------------------------------------------------
int __usercall CGenNPC::_CGenNPC<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B96F8;
  return CBase::_CBase(a1, a2, a3, a4);
}
// 4B96F8: using guessed type int (__stdcall *off_4B96F8)(int);

//----- (00447FB0) --------------------------------------------------------
char __cdecl CGenNPC::Close()
{
  int v0; // eax@2
  void *v1; // eax@2
  int v3; // [sp+8h] [bp-10h]@3
  char v4; // [sp+Ch] [bp-Ch]@2
  char v5; // [sp+10h] [bp-8h]@5
  char v6; // [sp+14h] [bp-4h]@1

  sub_40F070((int)&unk_4E1AA8, &v6);
  while ( 1 )
  {
    v1 = sub_430C20((int)&unk_4E1AA8, &v4);
    v0 = (unsigned __int8)sub_47D070(v1);
    if ( !(_BYTE)v0 )
      break;
    v3 = *(_DWORD *)(sub_420250((int *)&v6) + 4);
    if ( v3 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v3)(v3, 1);
    sub_446090((int *)&v6, (int)&v5, 0);
  }
  return v0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00448030) --------------------------------------------------------
int __cdecl CGenNPC::Copy()
{
  int v1; // [sp+0h] [bp-Ch]@2
  int v2; // [sp+8h] [bp-4h]@1

  v2 = (int)sub_401000(0xB4u);
  if ( v2 )
    v1 = CGenNPC::CGenNPC(v2);
  else
    v1 = 0;
  return v1;
}

//----- (00448070) --------------------------------------------------------
signed int __thiscall CGenNPC::Set(void *this, int a2, char a3)
{
  void *v3; // eax@2
  void *v4; // eax@3
  void *v5; // eax@4
  void *v6; // eax@5
  void *v7; // eax@6
  signed int result; // eax@7
  void *v9; // eax@9
  void *v10; // eax@9
  void *v11; // eax@9
  void *v12; // eax@10
  void *v13; // eax@10
  void *v14; // eax@11
  void *v15; // eax@11
  void *v16; // eax@12
  void *v17; // eax@13
  void *v18; // eax@14
  void *v19; // eax@14
  void *v20; // eax@16
  void *v21; // eax@20
  void *v22; // eax@20
  void *v23; // eax@20
  void *v24; // eax@21
  void *v25; // eax@21
  void *v26; // eax@22
  void *v27; // eax@22
  int v28; // [sp-4h] [bp-70h]@23
  int v29; // [sp+0h] [bp-6Ch]@1
  void *v30; // [sp+4h] [bp-68h]@1
  char v31; // [sp+Ch] [bp-60h]@22
  char v32; // [sp+10h] [bp-5Ch]@22
  char v33; // [sp+14h] [bp-58h]@21
  char v34; // [sp+18h] [bp-54h]@21
  char v35; // [sp+1Ch] [bp-50h]@20
  char v36; // [sp+20h] [bp-4Ch]@20
  char v37; // [sp+24h] [bp-48h]@20
  char v38; // [sp+28h] [bp-44h]@16
  char v39; // [sp+2Ch] [bp-40h]@14
  char v40; // [sp+30h] [bp-3Ch]@14
  char v41; // [sp+34h] [bp-38h]@13
  char v42; // [sp+38h] [bp-34h]@12
  char v43; // [sp+3Ch] [bp-30h]@11
  char v44; // [sp+40h] [bp-2Ch]@11
  char v45; // [sp+44h] [bp-28h]@10
  char v46; // [sp+48h] [bp-24h]@10
  char v47; // [sp+4Ch] [bp-20h]@9
  char v48; // [sp+50h] [bp-1Ch]@9
  char v49; // [sp+54h] [bp-18h]@9
  char v50; // [sp+58h] [bp-14h]@6
  char v51; // [sp+5Ch] [bp-10h]@5
  char v52; // [sp+60h] [bp-Ch]@4
  char v53; // [sp+64h] [bp-8h]@3
  char v54; // [sp+68h] [bp-4h]@2

  v30 = this;
  v29 = a2 - 2;
  switch ( a2 )
  {
    case 2:
      v3 = sub_4023A0(&a3, &v54);
      *((_DWORD *)v30 + 8) = sub_40C8D0(v3);
      goto LABEL_24;
    case 30:
      v4 = sub_4023A0(&a3, &v53);
      *((_DWORD *)v30 + 9) = sub_40C8D0(v4);
      goto LABEL_24;
    case 55:
      v5 = sub_4023A0(&a3, &v52);
      *((_DWORD *)v30 + 10) = sub_40C8D0(v5);
      goto LABEL_24;
    case 54:
      v6 = sub_4023A0(&a3, &v51);
      *((_DWORD *)v30 + 11) = sub_40C8D0(v6);
      goto LABEL_24;
    case 3:
      v7 = sub_4023A0(&a3, &v50);
      *((_DWORD *)v30 + 13) = sub_40C8D0(v7);
      *((_DWORD *)v30 + 14) = sub_491080(*((_DWORD *)v30 + 13));
      if ( *((_DWORD *)v30 + 14) )
        goto LABEL_24;
      sub_4328C0("CGenNPC::Set() Can't find the Map. (index:%d)", *((_DWORD *)v30 + 13));
      return 0;
    case 31:
      v9 = sub_4023A0(&a3, &v49);
      *((_DWORD *)v30 + 15) = sub_40C8D0(v9);
      v10 = sub_4023A0(&a3, &v48);
      *((_DWORD *)v30 + 16) = sub_40C8D0(v10);
      v11 = sub_4023A0(&a3, &v47);
      *((_DWORD *)v30 + 17) = sub_40C8D0(v11);
      goto LABEL_24;
    case 56:
      v12 = sub_4023A0(&a3, &v46);
      *((_DWORD *)v30 + 18) = sub_40C8D0(v12) - *((_DWORD *)v30 + 15);
      v13 = sub_4023A0(&a3, &v45);
      *((_DWORD *)v30 + 19) = sub_40C8D0(v13) - *((_DWORD *)v30 + 16);
      goto LABEL_24;
    case 70:
      v14 = sub_4023A0(&a3, &v44);
      *((_DWORD *)v30 + 12) |= sub_40C8D0(v14) << 16;
      v15 = sub_4023A0(&a3, &v43);
      *((_DWORD *)v30 + 12) |= sub_40C8D0(v15);
      goto LABEL_24;
    case 95:
      v16 = sub_4023A0(&a3, &v42);
      *((_DWORD *)v30 + 20) = sub_40C8D0(v16);
      goto LABEL_24;
    case 96:
      v17 = sub_4023A0(&a3, &v41);
      *((_DWORD *)v30 + 21) = sub_40C8D0(v17);
      goto LABEL_24;
    case 108:
      v18 = sub_4023A0(&a3, &v40);
      *((_DWORD *)v30 + 22) = sub_40C8D0(v18);
      v19 = sub_4023A0(&a3, &v39);
      *((_DWORD *)v30 + 23) = sub_40C8D0(v19);
      goto LABEL_24;
    case 109:
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v20 = sub_4023A0(&a3, &v38);
        *((_DWORD *)v30 + 24) |= 1 << sub_40C8D0(v20);
      }
      goto LABEL_24;
    case 43:
      if ( *((_DWORD *)v30 + 25) <= 5 )
      {
        v21 = sub_4023A0(&a3, &v37);
        *((_DWORD *)v30 + *((_DWORD *)v30 + 25) + 26) = sub_40C8D0(v21);
        v22 = sub_4023A0(&a3, &v36);
        *((_DWORD *)v30 + 2 * *((_DWORD *)v30 + 25) + 31) = sub_40C8D0(v22);
        v23 = sub_4023A0(&a3, &v35);
        *((_DWORD *)v30 + 2 * *((_DWORD *)v30 + 25)++ + 32) = sub_40C8D0(v23);
      }
      goto LABEL_24;
    case 113:
      v24 = sub_4023A0(&a3, &v34);
      *((_DWORD *)v30 + 41) = sub_40C8D0(v24);
      v25 = sub_4023A0(&a3, &v33);
      *((_DWORD *)v30 + 42) = sub_40C8D0(v25);
      goto LABEL_24;
    case 114:
      v26 = sub_4023A0(&a3, &v32);
      *((_DWORD *)v30 + 43) = sub_40C8D0(v26);
      v27 = sub_4023A0(&a3, &v31);
      *((_DWORD *)v30 + 44) = sub_40C8D0(v27);
LABEL_24:
      result = 1;
      break;
    default:
      v28 = a2 - 2;
      sub_402340(&v28, (int)&a3);
      result = CBase::Set(v30, a2, v28);
      break;
  }
  return result;
}

//----- (004484D0) --------------------------------------------------------
signed int __thiscall CGenNPC::OnLoad(void *this)
{
  int v1; // eax@1
  signed int result; // eax@2
  void *v3; // [sp+0h] [bp-18h]@1
  void *v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+10h] [bp-8h]@1
  char v7; // [sp+14h] [bp-4h]@1

  v3 = this;
  v4 = this;
  v1 = sub_420990((int)&v5, (int)((char *)this + 32), (int)&v4);
  sub_445DF0((int)&unk_4E1AA8, (int)&v6, v1);
  if ( v7 )
  {
    result = 1;
  }
  else
  {
    sub_4328C0("CGenNPC::OnLoad() Duplicated GenNPC.(Index:%d)", *((_DWORD *)v3 + 8));
    result = 0;
  }
  return result;
}

//----- (00448530) --------------------------------------------------------
int __thiscall CNPCObject::CNPCObject(int this)
{
  int v2; // [sp+0h] [bp-8h]@1
  signed int i; // [sp+4h] [bp-4h]@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4B97A0;
  sub_423F60(v2 + 16, 32, 2, (void (__thiscall *)(_DWORD))CIOCriticalSection::CIOCriticalSection);
  for ( i = 0; i < 2; ++i )
    CLink::Initialize((void *)(v2 + 8 * i + 80));
  return v2;
}
// 4B97A0: using guessed type int (__stdcall *off_4B97A0)(int);

//----- (00448590) --------------------------------------------------------
int __thiscall CNPCObject::_CNPCObject(void *this)
{
  void *v2; // ST10_4@1

  v2 = this;
  sub_4370E0((int)((char *)this + 16), 32, 2, (int (__thiscall *)(_DWORD))CIOCriticalSection::_CIOCriticalSection);
  return std__locale__facet___facet(v2);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (004485C0) --------------------------------------------------------
void __userpurge CNPCObject::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST18_4@7
  int v6; // ST10_4@13
  int v7; // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+Ch] [bp-14h]@11
  int v9; // [sp+14h] [bp-Ch]@5
  int v10; // [sp+18h] [bp-8h]@5
  DWORD v11; // [sp+1Ch] [bp-4h]@4

  v7 = a1;
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 16), a2, a3, a4);
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 48), a2, a3, a4);
      CLink::MoveTo((void *)(v7 + 88), v7 + 80);
      CIOCriticalSection::Leave(v7 + 48, a2, a3, a4);
      v8 = *(_DWORD *)(v7 + 80);
      while ( v8 != v7 + 80 )
      {
        v6 = v8 - 428;
        v8 = *(_DWORD *)v8;
        (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 204))(v6);
      }
      CIOCriticalSection::Leave(v7 + 16, a2, a3, a4);
      CIOObject::AddTimer(v7, a2, a3, a4, 1000, 1);
    }
  }
  else
  {
    v11 = GetTickCount();
    do
    {
      v10 = v11 + 30;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 16), a2, a3, a4);
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 48), a2, a3, a4);
      CLink::MoveTo((void *)(v7 + 88), v7 + 80);
      CIOCriticalSection::Leave(v7 + 48, a2, a3, a4);
      v9 = *(_DWORD *)(v7 + 80);
      while ( v9 != v7 + 80 )
      {
        v5 = v9 - 428;
        v9 = *(_DWORD *)v9;
        (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 200))(v5);
      }
      CIOCriticalSection::Leave(v7 + 16, a2, a3, a4);
      v11 = GetTickCount();
    }
    while ( v10 <= v11 );
    CIOObject::AddTimer(v7, a2, a3, a4, v10 - v11, 0);
  }
}

//----- (00448740) --------------------------------------------------------
void __userpurge CNPCObject::Insert(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST04_4@1

  v5 = a1;
  InterlockedIncrement(&dword_4E1A98);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v5 + 48), a2, a3, a4);
  CLink::Insert(a5, v5 + 88);
  CIOCriticalSection::Leave(v5 + 48, a2, a3, a4);
}

//----- (00448780) --------------------------------------------------------
int __thiscall CNPC::CNPC(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CChar::CChar(this);
  *(_DWORD *)v3 = &off_4B97B8;
  *(_DWORD *)(v3 + 24) = 3;
  *(_DWORD *)(v3 + 316) = *(_DWORD *)(a2 + 52);
  *(_DWORD *)(v3 + 320) = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(v3 + 440) = 0;
  *(_DWORD *)(v3 + 448) = *(_DWORD *)(a2 + 32);
  *(_DWORD *)(v3 + 452) = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(v3 + 456) = 0;
  *(_DWORD *)(v3 + 464) = *(_DWORD *)(a2 + 80);
  *(_DWORD *)(v3 + 468) = *(_DWORD *)(a2 + 84);
  return v3;
}
// 4B97B8: using guessed type int (__stdcall *off_4B97B8)(int);

//----- (00448820) --------------------------------------------------------
bool __thiscall sub_448820(void *this, int a2)
{
  void *v4; // [sp+4h] [bp-4h]@1

  v4 = this;
  return sub_448870((int)((char *)this + 332), a2) <= 64 && *((_DWORD *)v4 + 114) > 0;
}

//----- (00448870) --------------------------------------------------------
int __cdecl sub_448870(int a1, int a2)
{
  int v3; // [sp+0h] [bp-Ch]@2
  int v4; // [sp+4h] [bp-8h]@1
  int v5; // [sp+8h] [bp-4h]@1

  v4 = abs(*(_DWORD *)a1 - *(_DWORD *)a2);
  v5 = abs(*(_DWORD *)(a1 + 4) - *(_DWORD *)(a2 + 4));
  if ( v4 <= v5 )
    v3 = v5;
  else
    v3 = v4;
  return v3;
}

//----- (004488D0) --------------------------------------------------------
void __stdcall CGunnery::ExcutePassive(int a1, int a2, int a3)
{
  ;
}

//----- (004488E0) --------------------------------------------------------
int __userpurge CNPC::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CNPC::_CNPC(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00448910) --------------------------------------------------------
int __usercall CNPC::_CNPC<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4B97B8;
  return CChar::_CChar(a1, a2, a3, a4);
}
// 4B97B8: using guessed type int (__stdcall *off_4B97B8)(int);

//----- (00448930) --------------------------------------------------------
void __usercall CNPC::Create(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@1
  int v5; // [sp+0h] [bp-5Ch]@39
  int v6; // [sp+4h] [bp-58h]@35
  int v7; // [sp+8h] [bp-54h]@31
  int v8; // [sp+Ch] [bp-50h]@27
  int v9; // [sp+10h] [bp-4Ch]@23
  int v10; // [sp+14h] [bp-48h]@19
  int v11; // [sp+18h] [bp-44h]@15
  int v12; // [sp+1Ch] [bp-40h]@11
  int v13; // [sp+20h] [bp-3Ch]@7
  int v14; // [sp+28h] [bp-34h]@38
  int v15; // [sp+2Ch] [bp-30h]@34
  int v16; // [sp+30h] [bp-2Ch]@30
  int v17; // [sp+34h] [bp-28h]@26
  int v18; // [sp+38h] [bp-24h]@22
  int v19; // [sp+3Ch] [bp-20h]@18
  int v20; // [sp+40h] [bp-1Ch]@14
  int v21; // [sp+44h] [bp-18h]@10
  int v22; // [sp+48h] [bp-14h]@6
  char v23; // [sp+4Ch] [bp-10h]@1
  int v24; // [sp+50h] [bp-Ch]@3
  int v25; // [sp+54h] [bp-8h]@5
  char v26; // [sp+58h] [bp-4h]@1

  sub_44AE20((int)&unk_4E1A9C, (int)&v26, a4 + 36);
  v4 = sub_430C20((int)&unk_4E1A9C, &v23);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    sub_4328C0("CNPC::Create() Invalid InitNPC.(Index:%d)", *(_DWORD *)(a4 + 36));
  }
  else
  {
    v24 = *(_DWORD *)(sub_420250((int *)&v26) + 4);
    if ( *(_DWORD *)(a4 + 96) & (1 << dword_4E35B8) )
    {
      v25 = 0;
      switch ( *(_DWORD *)(v24 + 32) )
      {
        case 0:
          v22 = (int)sub_401000(0x1D8u);
          if ( v22 )
            v13 = CNPCMerchant::CNPCMerchant(v22, a4);
          else
            v13 = 0;
          v25 = v13;
          goto LABEL_43;
        case 1:
          v21 = (int)sub_401000(0x1D8u);
          if ( v21 )
            v12 = CNPCMerchant::CNPCMerchant(v21, a4);
          else
            v12 = 0;
          v25 = v12;
          goto LABEL_43;
        case 2:
          v20 = (int)sub_401000(0x1D8u);
          if ( v20 )
            v11 = CNPCMerchant::CNPCMerchant(v20, a4);
          else
            v11 = 0;
          v25 = v11;
          goto LABEL_43;
        case 3:
          v19 = (int)sub_401000(0x1D8u);
          if ( v19 )
            v10 = CNPCQuest::CNPCQuest(v19, a4);
          else
            v10 = 0;
          v25 = v10;
          goto LABEL_43;
        case 4:
          v18 = (int)sub_401000(0x1E8u);
          if ( v18 )
            v9 = CNPCScenario::CNPCScenario(v18, a4);
          else
            v9 = 0;
          v25 = v9;
          goto LABEL_43;
        case 5:
          v17 = (int)sub_401000(0x1E8u);
          if ( v17 )
            v8 = CNPCTeleport::CNPCTeleport(v17, a4);
          else
            v8 = 0;
          v25 = v8;
          goto LABEL_43;
        case 6:
          v16 = (int)sub_401000(0x1E8u);
          if ( v16 )
            v7 = CNPCDoor::CNPCDoor(v16, a4);
          else
            v7 = 0;
          v25 = v7;
          goto LABEL_43;
        case 7:
          v15 = (int)sub_401000(0x208u);
          if ( v15 )
            v6 = CNPCSiegeGunStone::CNPCSiegeGunStone(v15, a4);
          else
            v6 = 0;
          v25 = v6;
          goto LABEL_43;
        case 8:
          v14 = (int)sub_401000(0x1D8u);
          if ( v14 )
            v5 = CNPCMerchant::CNPCMerchant(v14, a4);
          else
            v5 = 0;
          v25 = v5;
LABEL_43:
          CChar::Lock(v25, a1, a2, a3);
          *(_DWORD *)(v25 + 444) = a4;
          CChar::SetXY(v25, a4 + 60);
          CNPC::SetProperty(v25, v24, a4);
          (*(void (__thiscall **)(int))(*(_DWORD *)v25 + 208))(v25);
          if ( *(_DWORD *)(v25 + 468) != 2 )
            sub_491360(*(void **)(v25 + 320), a1, a2, a3, v25, v25 + 324);
          CNPC::Add(v25, a1, a2, a3);
          CChar::Unlock(v25, a1, a2, a3);
          break;
        default:
          sub_4328C0("CNPC::Create() Invalid NPC kind. (Kind:%d)", *(_DWORD *)(v24 + 32));
          break;
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00448C80) --------------------------------------------------------
int __thiscall CNPCTeleport::CNPCTeleport(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CNPC::CNPC(this, a2);
  *(_DWORD *)v3 = &off_4B98F0;
  *(_DWORD *)(v3 + 476) = a2 + 104;
  *(_DWORD *)(v3 + 480) = a2 + 124;
  *(_DWORD *)(v3 + 472) = *(_DWORD *)(a2 + 100);
  return v3;
}
// 4B98F0: using guessed type int (__stdcall *off_4B98F0)(int);

//----- (00448CE0) --------------------------------------------------------
int __usercall CNPCScenario::_CNPCScenario<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CNPC::_CNPC(a1, a2, a3, a4);
}

//----- (00448D00) --------------------------------------------------------
int __thiscall CNPCMerchant::CNPCMerchant(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CNPC::CNPC(this, a2);
  *(_DWORD *)v3 = &off_4B99D0;
  return v3;
}
// 4B99D0: using guessed type int (__stdcall *off_4B99D0)(int);

//----- (00448D30) --------------------------------------------------------
int __userpurge CNPCInformant::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CNPCScenario::_CNPCScenario(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00448D60) --------------------------------------------------------
int __thiscall CNPCQuest::CNPCQuest(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CNPC::CNPC(this, a2);
  *(_DWORD *)v3 = &off_4B9AB0;
  return v3;
}
// 4B9AB0: using guessed type int (__stdcall *off_4B9AB0)(int);

//----- (00448D90) --------------------------------------------------------
bool __thiscall CNPCQuest::CanReply(void *this, int a2)
{
  return sub_448870((int)((char *)this + 332), a2) <= 64;
}

//----- (00448DC0) --------------------------------------------------------
int __thiscall CNPCScenario::CNPCScenario(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CNPC::CNPC(this, a2);
  *(_DWORD *)v3 = &off_4B9B90;
  *(_DWORD *)(v3 + 480) = 0;
  *(_DWORD *)(v3 + 472) = *(_DWORD *)(a2 + 88);
  *(_DWORD *)(v3 + 476) = *(_DWORD *)(a2 + 92);
  return v3;
}
// 4B9B90: using guessed type int (__stdcall *off_4B9B90)(int);

//----- (00448E10) --------------------------------------------------------
int __thiscall CNPCDoor::CNPCDoor(int this, int a2)
{
  int v3; // ST04_4@1

  v3 = this;
  CNPC::CNPC(this, a2);
  *(_DWORD *)v3 = &off_4B9C70;
  *(_DWORD *)(v3 + 480) = 0;
  *(_DWORD *)(v3 + 476) = *(_DWORD *)(a2 + 88);
  *(_DWORD *)(v3 + 472) = *(_DWORD *)(a2 + 92);
  return v3;
}
// 4B9C70: using guessed type int (__stdcall *off_4B9C70)(int);

//----- (00448E60) --------------------------------------------------------
int __thiscall CNPCSiegeGunStone::CNPCSiegeGunStone(int this, int a2)
{
  int v3; // ST04_4@1
  int v4; // ecx@1
  int v5; // edx@1

  v3 = this;
  CNPC::CNPC(this, a2);
  *(_DWORD *)v3 = &off_4B9D50;
  *(_DWORD *)(v3 + 496) = 0;
  *(_DWORD *)(v3 + 500) = 0;
  *(_DWORD *)(v3 + 504) = 0;
  v4 = *(_DWORD *)(a2 + 168);
  *(_DWORD *)(v3 + 480) = *(_DWORD *)(a2 + 164);
  *(_DWORD *)(v3 + 484) = v4;
  v5 = *(_DWORD *)(a2 + 176);
  *(_DWORD *)(v3 + 488) = *(_DWORD *)(a2 + 172);
  *(_DWORD *)(v3 + 492) = v5;
  *(_DWORD *)(v3 + 508) = 0;
  return v3;
}
// 4B9D50: using guessed type int (__stdcall *off_4B9D50)(int);

//----- (00448F00) --------------------------------------------------------
LONG __cdecl CNPC::Size()
{
  return dword_4E1A98;
}

//----- (00448F10) --------------------------------------------------------
void __usercall CNPC::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v4; // eax@3
  char v5; // [sp+0h] [bp-Ch]@2
  char v6; // [sp+4h] [bp-8h]@3
  char v7; // [sp+8h] [bp-4h]@1

  sub_40F070((int)&unk_4E1AA8, &v7);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E1AA8, &v5);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = sub_420250((int *)&v7);
    CNPC::Create(a1, a2, a3, *(_DWORD *)(v4 + 4));
    sub_446090((int *)&v7, (int)&v6, 0);
  }
  CIOObject::AddTimer((int)&unk_4E1AD8, a1, a2, a3, 1000, 1);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00448F80) --------------------------------------------------------
int __usercall CNPC::Stop<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CNPCScenario::ResetBossTower(a1, a2, a3, 1);
  return CMonsterObject::Stop((int)&unk_4E1AD8, a1, a2, a3);
}

//----- (00448FA0) --------------------------------------------------------
int __usercall CNPC::FindNPC<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v7 = 0;
  sub_47DE70((volatile LONG *)&unk_4E1AC0);
  sub_44AE20((int)&unk_4E1AB4, (int)&v8, (int)&a4);
  v4 = sub_430C20((int)&unk_4E1AB4, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v7 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
    CIOObject::AddRef(v7, a1, a2, a3);
  }
  sub_47E080((volatile LONG *)&unk_4E1AC0, a1, a2, a3);
  return v7;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00449010) --------------------------------------------------------
int __usercall CNPC::CanReply<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5)
{
  void *v5; // eax@1
  char v7; // [sp+0h] [bp-10h]@1
  int v8; // [sp+4h] [bp-Ch]@2
  int v9; // [sp+8h] [bp-8h]@1
  char v10; // [sp+Ch] [bp-4h]@1

  v9 = 0;
  sub_47DE70((volatile LONG *)&unk_4E1AC0);
  sub_44AE20((int)&unk_4E1AB4, (int)&v10, (int)&a4);
  v5 = sub_430C20((int)&unk_4E1AB4, &v7);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v8 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
    if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 188))(v8, a5) )
      v9 = 1;
  }
  sub_47E080((volatile LONG *)&unk_4E1AC0, a1, a2, a3);
  return v9;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004490A0) --------------------------------------------------------
int __usercall sub_4490A0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5)
{
  void *v5; // eax@1
  char v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+4h] [bp-8h]@2
  char v9; // [sp+8h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E1AC0);
  sub_44AE20((int)&unk_4E1AB4, (int)&v9, (int)&a4);
  v5 = sub_430C20((int)&unk_4E1AB4, &v7);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v8 = *(_DWORD *)(sub_420250((int *)&v9) + 4);
    if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 188))(v8, a5 + 332) )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v8 + 192))(v8, a5);
  }
  return sub_47E080((volatile LONG *)&unk_4E1AC0, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00449130) --------------------------------------------------------
int __usercall CNPC::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST08_4@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  CNPC::Remove(v5, a2, a3, a4);
  sub_4913E0(*(void **)(v5 + 320), a2, a3, a4, v5, v5 + 324);
  CChar::Unlock(v5, a2, a3, a4);
  return CBase::OnDelete(v5, a2, a3, a4);
}

//----- (00449180) --------------------------------------------------------
void __userpurge CNPC::SendDelete(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CPlayer::Write(a1, a2, a3, a4, 57, (unsigned int)"d");
}

//----- (004491B0) --------------------------------------------------------
void __userpurge CNPC::SendCreate(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CPlayer::Write(a1, a2, a3, a4, 52, (unsigned int)"dwbdddwdd");
}

//----- (00449220) --------------------------------------------------------
LONG __userpurge CMonsterReal::AddGState<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST14_4@1

  v6 = a1;
  CChar::AddGState(a1, a5);
  return CChar::WriteInSight(a2, a3, a4, v6, 46, (unsigned int)"dd");
}

//----- (00449260) --------------------------------------------------------
void __userpurge CNPC::Reply(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  if ( *(_DWORD *)(a1 + 456) > 0 )
    CPlayer::Write(a2, a3, a4, a5, 74, (unsigned int)"d");
}

//----- (004492A0) --------------------------------------------------------
int __usercall CNPC::WarRelationShow<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  void *v5; // eax@2
  int result; // eax@6
  char v7; // [sp+0h] [bp-14h]@2
  char v8; // [sp+4h] [bp-10h]@5
  char v9; // [sp+8h] [bp-Ch]@1
  void *v10; // [sp+Ch] [bp-8h]@1
  int v11; // [sp+10h] [bp-4h]@3

  v10 = 0;
  sub_47DE70((volatile LONG *)&unk_4E1AC0);
  sub_40F070((int)&unk_4E1AB4, &v9);
  while ( 1 )
  {
    v5 = sub_430C20((int)&unk_4E1AB4, &v7);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    v11 = *(_DWORD *)(sub_420250((int *)&v9) + 4);
    if ( *(_DWORD *)(v11 + 464) == a4 )
      v10 = CBaseList::Push((int)v10, a1, a2, a3, v11);
    sub_446090((int *)&v9, (int)&v8, 0);
  }
  result = sub_47E080((volatile LONG *)&unk_4E1AC0, a1, a2, a3);
  while ( v10 )
  {
    v11 = unknown_libname_7();
    if ( *(_DWORD *)(v11 + 468) == 1 )
    {
      CNPC::Show(v11, a1, a2, a3, a5);
    }
    else
    {
      if ( *(_DWORD *)(v11 + 468) == 2 )
        CNPC::Show(v11, a1, a2, a3, a5 == 0);
    }
    result = CBaseList::Pop((int)v10, a1, a2, a3);
    v10 = (void *)result;
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00449390) --------------------------------------------------------
__int32 __usercall CNPC::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-18h]@1
  int v8; // [sp+Ch] [bp-10h]@1
  int v9; // [sp+10h] [bp-Ch]@1
  char v10; // [sp+14h] [bp-8h]@1

  v5 = a1;
  CIOObject::AddRef(a1, a2, a3, a4);
  CNPCObject::Insert((int)&unk_4E1AD8, a2, a3, a4, v5 + 428);
  sub_47E0D0((volatile LONG *)&unk_4E1AC0);
  v9 = v5;
  v8 = *(_DWORD *)(v5 + 28);
  v6 = sub_420990((int)&v10, (int)&v8, (int)&v9);
  sub_445DF0((int)&unk_4E1AB4, (int)&v7, v6);
  return sub_47E1C0((volatile LONG *)&unk_4E1AC0, a2, a3, a4);
}

//----- (00449400) --------------------------------------------------------
LONG __usercall CNPC::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1
  int v6; // [sp+4h] [bp-4h]@1

  v5 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E1AC0);
  v6 = *(_DWORD *)(v5 + 28);
  sub_44ADC0((int)&unk_4E1AB4, (int)&v6);
  sub_47E1C0((volatile LONG *)&unk_4E1AC0, a2, a3, a4);
  return InterlockedDecrement(&dword_4E1A98);
}

//----- (00449450) --------------------------------------------------------
signed int __usercall CMonster::IsRemoved<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  signed int result; // eax@2
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( CBase::IsDeleted(a1) )
  {
    CLink::Remove((void *)(v5 + 428));
    CIOObject::Release(v5, a2, a3, a4);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00449490) --------------------------------------------------------
void __thiscall CNPC::SetProperty(int this, int a2, int a3)
{
  *(_DWORD *)(this + 440) = a2;
  *(_DWORD *)(this + 456) = *(_DWORD *)(a3 + 44);
  *(_DWORD *)(this + 460) = *(_DWORD *)(a3 + 48);
  *(_DWORD *)(this + 340) = *(_DWORD *)(a3 + 68);
  CChar::SetDirection((void *)this, *(_DWORD *)(a3 + 72), *(_DWORD *)(a3 + 76));
}

//----- (004494F0) --------------------------------------------------------
void __userpurge CNPC::Show(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  if ( a5 )
  {
    sub_491360(*(void **)(v5 + 320), a2, a3, a4, v5, v5 + 324);
    CChar::WriteInSight(a2, a3, a4, v5, 52, (unsigned int)"dwbdddwdd");
  }
  else
  {
    sub_4913E0(*(void **)(v5 + 320), a2, a3, a4, v5, v5 + 324);
    CChar::WriteInSight(a2, a3, a4, v5, 57, (unsigned int)"d");
  }
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (004495D0) --------------------------------------------------------
int __usercall CNPC::GetNPCList<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6)
{
  void *v6; // eax@2
  int v7; // eax@5
  char v9; // [sp+0h] [bp-Ch]@2
  char v10; // [sp+4h] [bp-8h]@6
  char v11; // [sp+8h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E1AC0);
  sub_40F070((int)&unk_4E1AB4, &v11);
  while ( 1 )
  {
    v6 = sub_430C20((int)&unk_4E1AB4, &v9);
    if ( !(unsigned __int8)sub_47D070(v6) )
      break;
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v11) + 4) + 440) + 32) == a5 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v11) + 4) + 444) + 52) == a6 )
      {
        v7 = sub_420250((int *)&v11);
        sub_47D000(a4, v7 + 4);
      }
    }
    sub_446090((int *)&v11, (int)&v10, 0);
  }
  return sub_47E080((volatile LONG *)&unk_4E1AC0, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00449680) --------------------------------------------------------
int __userpurge CNPCQuest::Reply<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  return sub_47CB40(a2, a3, a4, *(_DWORD *)(a1 + 460), a5);
}

//----- (004496B0) --------------------------------------------------------
void __usercall CNPCScenario::MirrorGState(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  signed int j; // [sp+0h] [bp-8h]@8
  signed int i; // [sp+4h] [bp-4h]@2

  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B38, a1, a2, a3);
  if ( a4 )
  {
    for ( i = 0; i < 8; ++i )
    {
      if ( dword_4E1A70[i] )
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)dword_4E1A70[i] + 100))(dword_4E1A70[i], a5);
    }
  }
  else
  {
    for ( j = 0; j < 8; ++j )
    {
      if ( dword_4E1A70[j] )
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)dword_4E1A70[j] + 112))(dword_4E1A70[j], a5);
    }
  }
  CIOCriticalSection::Leave((int)&unk_4E1B38, a1, a2, a3);
}
// 4E1A70: using guessed type int dword_4E1A70[];

//----- (00449770) --------------------------------------------------------
void __usercall CNPCScenario::ThroneGState(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B38, a1, a2, a3);
  if ( a4 )
  {
    if ( dword_4E1A90 )
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)dword_4E1A90 + 100))(dword_4E1A90, a5);
  }
  else
  {
    if ( dword_4E1A90 )
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)dword_4E1A90 + 112))(dword_4E1A90, a5);
  }
  CIOCriticalSection::Leave((int)&unk_4E1B38, a1, a2, a3);
}
// 4E1A90: using guessed type int dword_4E1A90;

//----- (004497D0) --------------------------------------------------------
void __usercall CNPCScenario::ResetBossTower(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  signed int i; // [sp+0h] [bp-4h]@2

  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B38, a1, a2, a3);
  if ( a4 )
  {
    for ( i = 0; i < 9; ++i )
      dword_4E1A70[i] = 0;
  }
  dword_4E1A94 = 0;
  CIOCriticalSection::Leave((int)&unk_4E1B38, a1, a2, a3);
}
// 4E1A70: using guessed type int dword_4E1A70[];
// 4E1A94: using guessed type int dword_4E1A94;

//----- (00449830) --------------------------------------------------------
void __usercall CNPCScenario::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  DWORD v5; // [sp+4h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B38, a2, a3, a4);
    v5 = GetTickCount();
    if ( dword_4E1A94 != 255 )
    {
      if ( CChar::IsGState(v4, 1) )
      {
        if ( v5 >= *(_DWORD *)(v4 + 480) )
        {
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 1);
          dword_4E1A94 &= ~(1 << *(_DWORD *)(v4 + 472));
          *(_DWORD *)(v4 + 480) = 0;
          CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v4 + 316), 68, (unsigned int)"bw");
        }
      }
    }
    CIOCriticalSection::Leave((int)&unk_4E1B38, a2, a3, a4);
  }
}
// 4E1A94: using guessed type int dword_4E1A94;

//----- (004498F0) --------------------------------------------------------
void __usercall CNPCScenario::InitScenario(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B38, a2, a3, a4);
  if ( *(_DWORD *)(v4 + 472) >= 0 )
  {
    if ( *(_DWORD *)(v4 + 472) < 9 )
      dword_4E1A70[*(_DWORD *)(v4 + 472)] = v4;
  }
  CIOCriticalSection::Leave((int)&unk_4E1B38, a2, a3, a4);
}
// 4E1A70: using guessed type int dword_4E1A70[];

//----- (00449940) --------------------------------------------------------
void __userpurge CNPCScenario::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // [sp+0h] [bp-8h]@1
  char v8; // [sp+7h] [bp-1h]@1

  v7 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
  if ( v8 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B38, a2, a3, a4);
    if ( *(_DWORD *)(v7 + 472) != 8 && dword_4E1A70[*(_DWORD *)(v7 + 472)] )
    {
      if ( dword_4E1A94 & (1 << *(_DWORD *)(v7 + 472)) )
      {
        CIOCriticalSection::Leave((int)&unk_4E1B38, a2, a3, a4);
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      }
      else
      {
        if ( CPlayer::RemoveItem(a5, a2, a3, a4, 9, *(_DWORD *)(v7 + 476), 1) )
        {
          (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v7 + 100))(v7, 1);
          *(_DWORD *)(v7 + 480) = GetTickCount() + 600000;
          CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v7 + 316), 68, (unsigned int)"bw");
          dword_4E1A94 |= 1 << *(_DWORD *)(v7 + 472);
          if ( dword_4E1A94 == 255 )
          {
            CIOCriticalSection::Leave((int)&unk_4E1B38, a2, a3, a4);
            sub_493E80((char *)&unk_4E2758 + 60 * *(_DWORD *)(v7 + 316), *(_DWORD *)(v7 + 316), 1);
          }
          else
          {
            CIOCriticalSection::Leave((int)&unk_4E1B38, a2, a3, a4);
          }
        }
        else
        {
          CIOCriticalSection::Leave((int)&unk_4E1B38, a2, a3, a4);
          CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bw");
        }
      }
    }
    else
    {
      CIOCriticalSection::Leave((int)&unk_4E1B38, a2, a3, a4);
    }
  }
}
// 4E1A70: using guessed type int dword_4E1A70[];
// 4E1A94: using guessed type int dword_4E1A94;

//----- (00449AE0) --------------------------------------------------------
void __userpurge CNPCTeleport::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // [sp+0h] [bp-14h]@1
  int v8; // [sp+4h] [bp-10h]@6
  int v9; // [sp+8h] [bp-Ch]@6
  int v10; // [sp+Ch] [bp-8h]@1
  char v11; // [sp+13h] [bp-1h]@1

  v7 = a1;
  v10 = 0;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
  if ( v11 )
  {
    v10 = sub_406E10(0, *(_DWORD *)(v7 + 472) - 1);
    if ( *(_DWORD *)(*(_DWORD *)(v7 + 480) + 8 * v10) >= 0 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(v7 + 480) + 8 * v10 + 4) >= 0 )
      {
        v8 = sub_406E10(
               *(_DWORD *)(*(_DWORD *)(v7 + 480) + 8 * v10) - 32,
               *(_DWORD *)(*(_DWORD *)(v7 + 480) + 8 * v10) + 32);
        v9 = sub_406E10(
               *(_DWORD *)(*(_DWORD *)(v7 + 480) + 8 * v10 + 4) - 32,
               *(_DWORD *)(*(_DWORD *)(v7 + 480) + 8 * v10 + 4) + 32);
        CPlayer::Teleport(a5, a2, a3, a4, *(_DWORD *)(*(_DWORD *)(v7 + 476) + 4 * v10), (int)&v8, 0, 0);
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (00449BF0) --------------------------------------------------------
void __usercall CNPCDoor::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  DWORD v5; // [sp+4h] [bp-4h]@3

  v4 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B58, a2, a3, a4);
    v5 = GetTickCount();
    if ( CChar::IsGState(v4, 16) )
    {
      if ( v5 >= *(_DWORD *)(v4 + 480) )
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 112))(v4, 16);
        *(_DWORD *)(v4 + 480) = 0;
        CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v4 + 316), 68, (unsigned int)"bw");
      }
    }
    CIOCriticalSection::Leave((int)&unk_4E1B58, a2, a3, a4);
  }
}

//----- (00449C80) --------------------------------------------------------
void __userpurge CNPCDoor::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // [sp+0h] [bp-8h]@1
  char v8; // [sp+7h] [bp-1h]@1

  v7 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
  if ( v8 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B58, a2, a3, a4);
    if ( CChar::IsGState(v7, 16) )
    {
      CIOCriticalSection::Leave((int)&unk_4E1B58, a2, a3, a4);
    }
    else
    {
      if ( CPlayer::RemoveItem(a5, a2, a3, a4, 9, *(_DWORD *)(v7 + 472), 1) )
      {
        (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v7 + 100))(v7, 16);
        *(_DWORD *)(v7 + 480) = 1000 * *(_DWORD *)(v7 + 476) + GetTickCount();
        CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v7 + 316), 68, (unsigned int)"bw");
        CIOCriticalSection::Leave((int)&unk_4E1B58, a2, a3, a4);
      }
      else
      {
        CIOCriticalSection::Leave((int)&unk_4E1B58, a2, a3, a4);
        CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bw");
      }
    }
  }
}

//----- (00449D80) --------------------------------------------------------
void __userpurge CNPCSiegeGunStone::Reply(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  if ( *(_DWORD *)(a1 + 456) > 0 )
    CPlayer::Write(a2, a3, a4, a5, 0, (unsigned int)&unk_4B967C);
}

//----- (00449DD0) --------------------------------------------------------
void __usercall CNPCSiegeGunStone::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // edx@38
  int v5; // edx@54
  int v6; // eax@57
  int v7; // [sp+0h] [bp-40h]@16
  int v8; // [sp+4h] [bp-3Ch]@1
  int v9; // [sp+8h] [bp-38h]@65
  int v10; // [sp+Ch] [bp-34h]@61
  int v11; // [sp+10h] [bp-30h]@63
  int v12; // [sp+14h] [bp-2Ch]@63
  int v13; // [sp+18h] [bp-28h]@53
  int j; // [sp+1Ch] [bp-24h]@42
  int v15; // [sp+20h] [bp-20h]@37
  int i; // [sp+24h] [bp-1Ch]@26
  int k; // [sp+28h] [bp-18h]@20
  int v18; // [sp+2Ch] [bp-14h]@57
  int v19; // [sp+30h] [bp-10h]@16
  int v20; // [sp+34h] [bp-Ch]@6
  int v21; // [sp+38h] [bp-8h]@5
  DWORD v22; // [sp+3Ch] [bp-4h]@9

  v8 = a1;
  if ( !CMonster::IsRemoved(a1, a2, a3, a4) && *(_DWORD *)(v8 + 500) )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B78, a2, a3, a4);
    v21 = sub_450810(a2, a3, a4, *(_DWORD *)(v8 + 500));
    if ( v21 )
    {
      v22 = GetTickCount();
      if ( CPlayer::IsEState(v21, 2048) )
      {
        if ( CChar::IsGState(v8, 32) )
        {
          if ( CChar::IsGState(v8, 64) && v22 >= *(_DWORD *)(v8 + 496) )
          {
            v10 = CMonster::FindMonster(a2, a3, a4, *(_DWORD *)(v8 + 504));
            if ( !v10 )
            {
              sub_4239C0(v21, a2, a3, a4, v21 + 352);
              CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
              return;
            }
            CPlayer::SubEState(v21, 2048);
            CMonster::ResetNextMove(*(_DWORD *)(v8 + 464), 0);
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v8 + 112))(v8, 64);
            *(_DWORD *)(v8 + 496) = 0;
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v8 + 112))(v8, 32);
            v12 = 0;
            v11 = 0;
            (*(void (__thiscall **)(int, int, _DWORD, int *, int *))(*(_DWORD *)v10 + 236))(v10, v21, 0, &v12, &v11);
            CChar::WriteInSight(a2, a3, a4, v21, 0, (unsigned int)&unk_4B967C);
            CBase::Delete((void *)v10);
            *(_DWORD *)(v8 + 508) = 0;
            *(_DWORD *)(v8 + 504) = 0;
          }
        }
        else
        {
          if ( CChar::IsGState(v8, 64) && v22 >= *(_DWORD *)(v8 + 496) )
          {
            if ( !(dword_4E1174[0] & 2) && !CGuild::IsWarringPeriod() )
            {
              CPlayer::SubEState(v21, 2048);
              (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v8 + 112))(v8, 64);
              *(_DWORD *)(v8 + 496) = 0;
              *(_DWORD *)(v8 + 500) = 0;
              CPlayer::Write(a2, a3, a4, v21, 67, (unsigned int)"b");
              sub_4239C0(v21, a2, a3, a4, v21 + 352);
              CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
              return;
            }
            v19 = 0;
            v7 = *(_DWORD *)(v8 + 512);
            if ( v7 )
            {
              if ( v7 == 1 )
              {
                for ( i = 0; i < 3 && dword_4D6310[i]; ++i )
                {
                  if ( CPlayer::FindItem(v21, a2, a3, a4, dword_4D6310[i], 1) )
                  {
                    v19 = dword_4D6310[i];
                    break;
                  }
                }
                if ( !v19 )
                {
                  CPlayer::Write(a2, a3, a4, v21, 67, (unsigned int)"b");
                  CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
                  sub_4239C0(v21, a2, a3, a4, v21 + 352);
                  return;
                }
                if ( v19 == 882 )
                {
                  CPlayer::RemoveItem(v21, a2, a3, a4, 9, 882, 1);
                }
                else
                {
                  CPlayer::RemoveItem(v21, a2, a3, a4, 9, v19, 1);
                  v15 = CItem::CreateItem(v19 + 1, 0, 1, 0);
                  if ( v15 )
                  {
                    CIOObject::AddRef(v15, a2, a3, a4);
                    if ( (CPlayer::InsertItem(v21, v4, a2, a3, a4, 2, v15) == 0) == 1 )
                      CBase::Delete((void *)v15);
                    CIOObject::Release(v15, a2, a3, a4);
                  }
                }
              }
              else
              {
                if ( v7 == 2 )
                {
                  for ( j = 0; j < 4 && dword_4D6330[j]; ++j )
                  {
                    if ( CPlayer::FindItem(v21, a2, a3, a4, dword_4D6330[j], 1) )
                    {
                      v19 = dword_4D6330[j];
                      break;
                    }
                  }
                  if ( !v19 )
                  {
                    CPlayer::Write(a2, a3, a4, v21, 67, (unsigned int)"b");
                    CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
                    sub_4239C0(v21, a2, a3, a4, v21 + 352);
                    return;
                  }
                  if ( v19 == 886 )
                  {
                    CPlayer::RemoveItem(v21, a2, a3, a4, 9, 886, 1);
                  }
                  else
                  {
                    CPlayer::RemoveItem(v21, a2, a3, a4, 9, v19, 1);
                    v13 = CItem::CreateItem(v19 + 1, 0, 1, 0);
                    if ( v13 )
                    {
                      CIOObject::AddRef(v13, a2, a3, a4);
                      if ( (CPlayer::InsertItem(v21, v5, a2, a3, a4, 2, v13) == 0) == 1 )
                        CBase::Delete((void *)v13);
                      CIOObject::Release(v13, a2, a3, a4);
                    }
                  }
                }
              }
            }
            else
            {
              for ( k = 0; k < 8; ++k )
              {
                if ( !CPlayer::FindItem(v21, a2, a3, a4, dword_4D62F0[k], 1) )
                {
                  CPlayer::Write(a2, a3, a4, v21, 67, (unsigned int)"b");
                  CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
                  sub_4239C0(v21, a2, a3, a4, v21 + 352);
                  return;
                }
                CPlayer::RemoveItem(v21, a2, a3, a4, 9, dword_4D62F0[k], 1);
              }
            }
            CPlayer::SubEState(v21, 2048);
            CMonster::ResetNextMove(*(_DWORD *)(v8 + 464), 1);
            (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 112))(v8, 64);
            *(_DWORD *)(v8 + 496) = 0;
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v8 + 100))(v8, 32);
            v6 = std___Mpunct_wchar_t___do_frac_digits(v8);
            v18 = CMonsterSiegeGun::Create(
                    a2,
                    a3,
                    a4,
                    *(_DWORD *)(v8 + 512) + 319,
                    *(_DWORD *)(v8 + 316),
                    v8 + 480,
                    v8 + 488,
                    *(_DWORD *)(v21 + 480),
                    (const char *)(v21 + 492),
                    v6);
            CChar::WriteInSight(a2, a3, a4, v21, 0, (unsigned int)"bddd");
            *(_DWORD *)(v8 + 508) = *(_DWORD *)(v21 + 512);
            *(_DWORD *)(v8 + 504) = std___Mpunct_wchar_t___do_frac_digits(v18);
            *(_DWORD *)(v8 + 500) = 0;
          }
        }
      }
      else
      {
        v9 = CMonster::FindMonster(a2, a3, a4, *(_DWORD *)(v8 + 504));
        if ( v9 )
        {
          sub_4239C0(v9, a2, a3, a4, v9 + 352);
        }
        else
        {
          *(_DWORD *)(v8 + 500) = 0;
          *(_DWORD *)(v8 + 504) = 0;
          *(_DWORD *)(v8 + 508) = 0;
          (*(void (__thiscall **)(_DWORD, signed int))(*(_DWORD *)v8 + 112))(v8, 32);
        }
      }
      sub_4239C0(v21, a2, a3, a4, v21 + 352);
      CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
    }
    else
    {
      *(_DWORD *)(v8 + 500) = 0;
      *(_DWORD *)(v8 + 496) = 0;
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 112))(v8, 64);
      v20 = CMonster::FindMonster(a2, a3, a4, *(_DWORD *)(v8 + 504));
      if ( v20 )
      {
        CMonsterSiegeGun::SetOperator(v20, a2, a3, a4, 0);
        sub_4239C0(v20, a2, a3, a4, v20 + 352);
      }
      CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4D62F0: using guessed type int dword_4D62F0[];
// 4D6310: using guessed type int dword_4D6310[];
// 4D6330: using guessed type int dword_4D6330[];

//----- (0044A4E0) --------------------------------------------------------
int __thiscall CPlayer::SubEState(int this, int a2)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 568) & ~a2;
  *(_DWORD *)(this + 568) = result;
  return result;
}

//----- (0044A510) --------------------------------------------------------
int __thiscall CPlayer::IsEState(int this, int a2)
{
  return a2 & *(_DWORD *)(this + 568);
}

//----- (0044A530) --------------------------------------------------------
void __userpurge CNPCSiegeGunStone::SiegeGunSet(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // [sp+Ch] [bp-18h]@1
  signed int j; // [sp+10h] [bp-14h]@35
  signed int i; // [sp+14h] [bp-10h]@25
  signed int k; // [sp+18h] [bp-Ch]@19
  signed int v11; // [sp+1Ch] [bp-8h]@46
  int v12; // [sp+20h] [bp-4h]@15

  v7 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B78, a2, a3, a4);
  if ( a6 )
  {
    if ( CChar::IsGState(v7, 64) )
    {
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
      return;
    }
    if ( CChar::IsGState(v7, 32) )
    {
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
      return;
    }
    if ( !(dword_4E1174[0] & 2) )
    {
      if ( !*(_DWORD *)(a5 + 484) )
      {
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
        CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
        return;
      }
      if ( !CCastle::IsAllCastleWarRelation(a2, a3, a4, *(_DWORD *)(a5 + 484)) )
      {
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
        CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
        return;
      }
    }
    if ( !CChar::IsBState(a5, 274877906944i64) && !CPlayerSkill::IsSkill((void *)(a5 + 624), 80) && !CPlayerSkill::IsSkill((void *)(a5 + 624), 81) )
    {
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
      return;
    }
    v12 = 0;
    if ( a7 )
    {
      if ( a7 == 1 )
      {
        for ( i = 0; i < 3 && dword_4D6310[i]; ++i )
        {
          if ( CPlayer::FindItem(a5, a2, a3, a4, dword_4D6310[i], 1) )
          {
            v12 = dword_4D6310[i];
            break;
          }
        }
        if ( !v12 )
        {
          CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
          CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
          return;
        }
      }
      else
      {
        if ( a7 == 2 )
        {
          for ( j = 0; j < 4 && dword_4D6330[j]; ++j )
          {
            if ( CPlayer::FindItem(a5, a2, a3, a4, dword_4D6330[j], 1) )
            {
              v12 = dword_4D6330[j];
              break;
            }
          }
          if ( !v12 )
          {
            CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
            CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
            return;
          }
        }
      }
    }
    else
    {
      for ( k = 0; k < 8; ++k )
      {
        if ( !CPlayer::FindItem(a5, a2, a3, a4, dword_4D62F0[k], 1) )
        {
          CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
          CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
          return;
        }
      }
    }
    if ( CRainforceDefense::CRainforceDefense(*(_DWORD *)(v7 + 464)) )
    {
      CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bs");
      CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
      return;
    }
    *(_DWORD *)(v7 + 512) = a7;
    *(_DWORD *)(v7 + 500) = std___Mpunct_wchar_t___do_frac_digits(a5);
    v11 = 30;
    if ( a7 == 2 )
      v11 = 20;
    *(_DWORD *)(v7 + 496) = 1000 * v11 + GetTickCount();
    CPlayer::AddEState(a5, 2048);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 100))(v7, 64);
    CPlayer::Write(a2, a3, a4, a5, 0, (unsigned int)"bb");
  }
  else
  {
    CPlayer::SubEState(a5, 2048);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 112))(v7, 64);
    *(_DWORD *)(v7 + 496) = 0;
    *(_DWORD *)(v7 + 500) = 0;
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
  }
  CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4D62F0: using guessed type int dword_4D62F0[];
// 4D6310: using guessed type int dword_4D6310[];
// 4D6330: using guessed type int dword_4D6330[];

//----- (0044A940) --------------------------------------------------------
int __thiscall CPlayerSkill::IsSkill(void *this, int a2)
{
  return *((_DWORD *)this + a2 + 2);
}

//----- (0044A960) --------------------------------------------------------
void __userpurge CNPCSiegeGunStone::SiegeGunUnSet(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@12
  int v8; // [sp+10h] [bp-8h]@10
  signed int v9; // [sp+14h] [bp-4h]@14

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1B78, a2, a3, a4);
  if ( !a6 )
  {
    CPlayer::SubEState(a5, 2048);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 112))(v6, 64);
    *(_DWORD *)(v6 + 496) = 0;
    *(_DWORD *)(v6 + 500) = 0;
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
LABEL_20:
    CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
    return;
  }
  if ( CChar::IsGState(v6, 64) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
    return;
  }
  if ( *(_DWORD *)(v6 + 500) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
    return;
  }
  if ( !CChar::IsBState(a5, 274877906944i64) && !CPlayerSkill::IsSkill((void *)(a5 + 624), 80) && !CPlayerSkill::IsSkill((void *)(a5 + 624), 81) )
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
    return;
  }
  v8 = CMonster::FindMonster(a2, a3, a4, *(_DWORD *)(v6 + 504));
  if ( v8 )
  {
    v7 = *(_DWORD *)(v8 + 512) - 319;
    if ( *(_DWORD *)(v8 + 524) != *(_DWORD *)(a5 + 480) )
    {
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      sub_4239C0(v8, a2, a3, a4, v8 + 352);
      CIOCriticalSection::Leave((int)&unk_4E1B78, a2, a3, a4);
      return;
    }
    sub_4239C0(v8, a2, a3, a4, v8 + 352);
    *(_DWORD *)(v6 + 500) = std___Mpunct_wchar_t___do_frac_digits(a5);
    v9 = 30;
    if ( v7 == 2 )
      v9 = 20;
    if ( dword_4E1174[0] & 2 )
      v9 = 5;
    *(_DWORD *)(v6 + 496) = 1000 * v9 + GetTickCount();
    CPlayer::AddEState(a5, 2048);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 100))(v6, 64);
    CPlayer::Write(a2, a3, a4, a5, 0, (unsigned int)"bb");
    goto LABEL_20;
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0044ABC0) --------------------------------------------------------
void __userpurge CNPCSiegeGunStone::Show(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  if ( a5 )
  {
    sub_491360(*(void **)(v5 + 320), a2, a3, a4, v5, v5 + 324);
    CChar::WriteInSight(a2, a3, a4, v5, 52, (unsigned int)"dwbdddwdd");
  }
  else
  {
    sub_4913E0(*(void **)(v5 + 320), a2, a3, a4, v5, v5 + 324);
    CChar::WriteInSight(a2, a3, a4, v5, 57, (unsigned int)"d");
  }
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0044ACB0) --------------------------------------------------------
void __userpurge CNPCSiegeGunStone::SendCreate(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CPlayer::Write(a1, a2, a3, a4, 52, (unsigned int)"dwbdddwdd");
}

//----- (0044AD30) --------------------------------------------------------
void __userpurge CNPCSiegeGunStone::SetOperator(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v5 + 500) = a5;
  if ( !a5 )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 112))(v5, 64);
    *(_DWORD *)(v5 + 496) = 0;
  }
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0044AD80) --------------------------------------------------------
void __userpurge CNPCSiegeGunStone::SetSiegeGun(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v5 + 504) = a5;
  if ( !a5 )
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v5 + 112))(v5, 32);
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0044ADC0) --------------------------------------------------------
int __thiscall sub_44ADC0(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472C30(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_44AEB0(v3, &v4, v5, v6);
  return v7;
}

//----- (0044AE20) --------------------------------------------------------
int __thiscall sub_44AE20(int this, int a2, int a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_472A50(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), (unsigned __int8)sub_4186F0(a3, v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044AEB0) --------------------------------------------------------
void *__thiscall sub_44AEB0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44B6E0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044AF50) --------------------------------------------------------
int __thiscall sub_44AF50(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_431110(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_418860(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_431110(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_431110(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_431110(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_431110(v57) )
        v51 = v55;
      else
        v51 = sub_42F920(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_431110(v57) )
        v50 = v55;
      else
        v50 = sub_4470E0(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_431110(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = sub_446F90(v58);
    v34 = sub_446F90(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)sub_446F90(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)sub_446F90(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)sub_446F90(v56) )
        {
          *(_BYTE *)sub_446F90(v56) = 1;
          *(_BYTE *)sub_446F90(v55) = 0;
          sub_44CBF0((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_431110(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)sub_446F90(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)sub_446F90(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)sub_446F90(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)sub_446F90(*(_DWORD *)v40) = 1;
              *(_BYTE *)sub_446F90(v56) = 0;
              sub_44CAC0((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = sub_446F90(v55);
            *(_BYTE *)sub_446F90(v56) = *(_BYTE *)v41;
            *(_BYTE *)sub_446F90(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)sub_446F90(*(_DWORD *)v42) = 1;
            sub_44CBF0((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_446F90(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)sub_446F90(v56) )
        {
          *(_BYTE *)sub_446F90(v56) = 1;
          *(_BYTE *)sub_446F90(v55) = 0;
          sub_44CAC0((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_431110(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)sub_446F90(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)sub_446F90(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)sub_446F90(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)sub_446F90(*(_DWORD *)v46) = 1;
              *(_BYTE *)sub_446F90(v56) = 0;
              sub_44CBF0((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = sub_446F90(v55);
            *(_BYTE *)sub_446F90(v56) = *(_BYTE *)v47;
            *(_BYTE *)sub_446F90(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)sub_446F90(*(_DWORD *)v48) = 1;
            sub_44CAC0((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_446F90(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)sub_446F90(v57) = 1;
  }
  sub_44CD70(v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (0044B6E0) --------------------------------------------------------
int __thiscall sub_44B6E0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_44B780(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 44B780: using guessed type _DWORD __stdcall sub_44B780(_DWORD);

//----- (0044B740) --------------------------------------------------------
int *__thiscall sub_44B740(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_48DB20(this);
  return v2;
}

//----- (0044B760) --------------------------------------------------------
int *__thiscall sub_44B760(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_42F840(this);
  return v2;
}

//----- (0044B780) --------------------------------------------------------
int __stdcall sub_44B780(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_44B780(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 44B780: using guessed type _DWORD __stdcall sub_44B780(_DWORD);

//----- (0044B800) --------------------------------------------------------
signed int __cdecl sub_44B800()
{
  return sub_44B850();
}

//----- (0044B820) --------------------------------------------------------
int __thiscall sub_44B820(int this, int a2, int a3, int a4)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = *(_DWORD *)a4;
  return this;
}

//----- (0044B850) --------------------------------------------------------
signed int __cdecl sub_44B850()
{
  return 1073741823;
}

//----- (0044B880) --------------------------------------------------------
void *__thiscall sub_44B880(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044B8B0) --------------------------------------------------------
void *__thiscall sub_44B8B0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044B8E0) --------------------------------------------------------
void *__thiscall sub_44B8E0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044B920) --------------------------------------------------------
int __thiscall sub_44B920(int this)
{
  return sub_44B940(this);
}

//----- (0044B940) --------------------------------------------------------
int __thiscall sub_44B940(int this)
{
  return sub_44B960(this);
}

//----- (0044B960) --------------------------------------------------------
int __thiscall sub_44B960(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_44BA10(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0044BA10) --------------------------------------------------------
void *__thiscall sub_44BA10(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44BAB0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044BAB0) --------------------------------------------------------
int __thiscall sub_44BAB0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_44BB10(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 44BB10: using guessed type _DWORD __stdcall sub_44BB10(_DWORD);

//----- (0044BB10) --------------------------------------------------------
int __stdcall sub_44BB10(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_44BB10(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 44BB10: using guessed type _DWORD __stdcall sub_44BB10(_DWORD);

//----- (0044BB90) --------------------------------------------------------
int __thiscall sub_44BB90(int this)
{
  return sub_44BBB0(this);
}

//----- (0044BBB0) --------------------------------------------------------
int __thiscall sub_44BBB0(int this)
{
  return sub_44BBD0(this);
}

//----- (0044BBD0) --------------------------------------------------------
int __thiscall sub_44BBD0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_44BC80(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0044BC80) --------------------------------------------------------
void *__thiscall sub_44BC80(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44BD20(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044BD20) --------------------------------------------------------
int __thiscall sub_44BD20(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_44BD80(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 44BD80: using guessed type _DWORD __stdcall sub_44BD80(_DWORD);

//----- (0044BD80) --------------------------------------------------------
int __stdcall sub_44BD80(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_44BD80(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 44BD80: using guessed type _DWORD __stdcall sub_44BD80(_DWORD);

//----- (0044BE00) --------------------------------------------------------
int __thiscall sub_44BE00(int this)
{
  return sub_44BE20(this);
}

//----- (0044BE20) --------------------------------------------------------
int __thiscall sub_44BE20(int this)
{
  return sub_44BE40(this);
}

//----- (0044BE40) --------------------------------------------------------
int __thiscall sub_44BE40(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_44AEB0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0044BEF0) --------------------------------------------------------
signed int __cdecl sub_44BEF0()
{
  int v0; // edx@11
  signed int result; // eax@12
  char v2; // [sp+30h] [bp-238h]@8
  char v3; // [sp+34h] [bp-234h]@8
  char v4; // [sp+38h] [bp-230h]@3
  char v5; // [sp+3Ch] [bp-22Ch]@3
  int v6; // [sp+40h] [bp-228h]@1
  char v7[4]; // [sp+44h] [bp-224h]@1
  char v8; // [sp+48h] [bp-220h]@11
  int v9; // [sp+264h] [bp-4h]@1

  v9 = dword_4D9830;
  v6 = 114;
  for ( *(_DWORD *)v7 = 0; *(_DWORD *)v7 < v6; ++*(_DWORD *)v7 )
  {
    sub_420060((int)&unk_4E1B9C, (int)&v4, 8 * *(_DWORD *)v7 + 5118888);
    if ( !v5 )
      sub_4328C0("CObjectDB::Open() Duplicate Key at Symbol Map %d", *(_DWORD *)v7);
  }
  v6 = 14;
  for ( *(_DWORD *)v7 = 0; *(_DWORD *)v7 < v6; ++*(_DWORD *)v7 )
  {
    sub_420060((int)&unk_4E1F38, (int)&v2, 8 * *(_DWORD *)v7 + 5119816);
    if ( !v3 )
      sub_4328C0("CObjectDB::Open() Duplicate Key at Class Map %d", *(_DWORD *)v7);
  }
  CInitItem::Open();
  sub_47F560();
  CPlayerSkill::UpperChanceStone();
  CObjectDB::CObjectDB((int)&v8, v0);
  sub_432860("Reading [Map] . . .");
  if ( CObjectDB::Open((int)&v8, "Config\\InitMap.txt") )
  {
    sub_432860("Reading [InitMonster] . . .");
    if ( CObjectDB::Open((int)&v8, "Config\\InitMonster.txt") )
    {
      sub_432860("Reading [GenMonster] . . .");
      if ( CObjectDB::Open((int)&v8, "Config\\GenMonster.txt") )
      {
        sub_432860("Reading [InitItem] . . .");
        if ( CObjectDB::Open((int)&v8, "Config\\InitItem.txt") )
        {
          sub_432860("Reading [Prefix] . . .");
          if ( CObjectDB::Open((int)&v8, "Config\\Prefix.txt") )
          {
            sub_432860("Reading [ItemGroup] . . .");
            if ( CObjectDB::Open((int)&v8, "Config\\ItemGroup.txt") )
            {
              sub_432860("Reading [Goods] . . .");
              if ( CObjectDB::Open((int)&v8, "Config\\Goods.txt") )
              {
                sub_432860("Reading [InitNPC] . . .");
                if ( CObjectDB::Open((int)&v8, "Config\\InitNPC.txt") )
                {
                  sub_432860("Reading [InitSkill] . . .");
                  if ( CObjectDB::Open((int)&v8, "Config\\InitSkill.txt") )
                  {
                    sub_432860("Reading [Quest] . . .");
                    if ( CObjectDB::Open((int)&v8, "Config\\Quest.txt") )
                    {
                      sub_432860("Reading [Etc] . . .");
                      if ( CObjectDB::Open((int)&v8, "Config\\Etc.txt") )
                      {
                        InterlockedExchange(&dword_4E1B98, 1);
                        CObjectDB::_CObjectDB((int)&v8);
                        result = 1;
                      }
                      else
                      {
                        CObjectDB::_CObjectDB((int)&v8);
                        result = 0;
                      }
                    }
                    else
                    {
                      CObjectDB::_CObjectDB((int)&v8);
                      result = 0;
                    }
                  }
                  else
                  {
                    CObjectDB::_CObjectDB((int)&v8);
                    result = 0;
                  }
                }
                else
                {
                  CObjectDB::_CObjectDB((int)&v8);
                  result = 0;
                }
              }
              else
              {
                CObjectDB::_CObjectDB((int)&v8);
                result = 0;
              }
            }
            else
            {
              CObjectDB::_CObjectDB((int)&v8);
              result = 0;
            }
          }
          else
          {
            CObjectDB::_CObjectDB((int)&v8);
            result = 0;
          }
        }
        else
        {
          CObjectDB::_CObjectDB((int)&v8);
          result = 0;
        }
      }
      else
      {
        CObjectDB::_CObjectDB((int)&v8);
        result = 0;
      }
    }
    else
    {
      CObjectDB::_CObjectDB((int)&v8);
      result = 0;
    }
  }
  else
  {
    CObjectDB::_CObjectDB((int)&v8);
    result = 0;
  }
  return result;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0044C300) --------------------------------------------------------
signed int __thiscall CObjectDB::Open(int this, const char *a2)
{
  void *v3; // eax@8
  int v4; // eax@10
  int v5; // edx@10
  int v6; // eax@11
  int v7; // [sp+8h] [bp-40h]@1
  char v8; // [sp+14h] [bp-34h]@8
  int v9; // [sp+18h] [bp-30h]@8
  int v10; // [sp+1Ch] [bp-2Ch]@10
  char v11; // [sp+20h] [bp-28h]@8
  char v12; // [sp+24h] [bp-24h]@3
  int v13; // [sp+40h] [bp-8h]@1
  int v14; // [sp+44h] [bp-4h]@4

  v13 = dword_4D9830;
  v7 = this;
  *(_DWORD *)(this + 512) = fopen(a2, "rb");
  if ( *(_DWORD *)(v7 + 512) )
  {
    sub_433B90(&v12);
    *(_DWORD *)(v7 + 516) = 1;
    *(_DWORD *)(v7 + 528) = a2;
    while ( 1 )
    {
      v14 = CConfig::GetToken((void *)v7);
      switch ( v14 )
      {
        case 0:
          fclose(*(FILE **)(v7 + 512));
          *(_DWORD *)(v7 + 512) = 0;
          sub_40F780((int)&v12);
          return 1;
        case 8:
          sub_4328C0("Unmatched close parenthesis at CObjectDB::Open, %s(%d)", a2, *(_DWORD *)(v7 + 516));
          continue;
        case 7:
          if ( CConfig::GetToken((void *)v7) != 1
            || (v9 = v7,
                sub_44C970((int)&unk_4E1F38, (int)&v11, &v9),
                v3 = sub_430C20((int)&unk_4E1F38, &v8),
                (unsigned __int8)unknown_libname_8(v3)) )
            goto LABEL_15;
          v4 = sub_420250((int *)&v11);
          v10 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v4 + 4) + 24))(*(_DWORD *)(v4 + 4));
          if ( CObjectDB::Load((void *)v7, v5, v10) )
            continue;
          v6 = sub_420250((int *)&v11);
          if ( v10 != *(_DWORD *)(v6 + 4) )
            (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 4))(v10);
          fclose(*(FILE **)(v7 + 512));
          *(_DWORD *)(v7 + 512) = 0;
          sub_4328C0("Invalid format %s(%d) at CObjectDB::Open(Load())", a2, *(_DWORD *)(v7 + 516));
          sub_40F780((int)&v12);
          return 0;
        case 3:
          continue;
        default:
LABEL_15:
          sub_4328C0("Invalid format %s(%d) at CObjectDB::Open", a2, *(_DWORD *)(v7 + 516));
          do
            v14 = CConfig::GetToken((void *)v7);
          while ( v14 != 3 && v14 );
          break;
      }
    }
  }
  sub_4328C0("'%s' File open failed at CObjectDB::Open", a2);
  return 0;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0044C550) --------------------------------------------------------
int __cdecl CObjectDB::FindSymbol(char a1)
{
  void *v1; // eax@1
  int result; // eax@2
  char v3; // [sp+0h] [bp-8h]@1
  char v4; // [sp+4h] [bp-4h]@1

  sub_44C970((int)&unk_4E1B9C, (int)&v4, (int *)&a1);
  v1 = sub_430C20((int)&unk_4E1B9C, &v3);
  if ( (unsigned __int8)unknown_libname_8(v1) )
    result = 0;
  else
    result = *(_DWORD *)(sub_420250((int *)&v4) + 4);
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044C5A0) --------------------------------------------------------
signed int __fastcall CObjectDB::Load(void *a1, int a2, int a3)
{
  int v3; // ecx@2
  int v4; // ecx@7
  void *v5; // esp@7
  int v6; // eax@10
  void *v7; // esp@13
  void *v8; // esp@13
  int v9; // ecx@16
  void *v10; // esp@16
  int v11; // eax@19
  signed int result; // eax@25
  int v13; // [sp-1Ch] [bp-7Ch]@17
  int v14; // [sp-18h] [bp-78h]@17
  int v15; // [sp-14h] [bp-74h]@8
  int v16; // [sp-10h] [bp-70h]@8
  char v17; // [sp-Ch] [bp-6Ch]@7
  int v18; // [sp-8h] [bp-68h]@4
  int v19; // [sp-4h] [bp-64h]@4
  void *v20; // [sp+0h] [bp-60h]@13
  void *v21; // [sp+4h] [bp-5Ch]@16
  void *v22; // [sp+8h] [bp-58h]@14
  void *v23; // [sp+Ch] [bp-54h]@13
  int *v24; // [sp+10h] [bp-50h]@13
  void *v25; // [sp+14h] [bp-4Ch]@8
  void *v26; // [sp+18h] [bp-48h]@7
  void *v27; // [sp+1Ch] [bp-44h]@1
  void *v28; // [sp+2Ch] [bp-34h]@16
  void *v29; // [sp+34h] [bp-2Ch]@13
  void *v30; // [sp+40h] [bp-20h]@7
  char v31; // [sp+48h] [bp-18h]@17
  size_t v32; // [sp+4Ch] [bp-14h]@13
  void *v33; // [sp+50h] [bp-10h]@13
  char v34; // [sp+54h] [bp-Ch]@1
  int v35; // [sp+58h] [bp-8h]@2
  int v36; // [sp+5Ch] [bp-4h]@1

  v27 = a1;
  std__ios_base__ios_base(&v34, a2);
  v36 = 0;
  do
  {
    while ( 1 )
    {
      while ( 1 )
      {
        while ( 1 )
        {
          v35 = CConfig::GetToken(v27);
          if ( v35 != 8 )
            break;
          if ( !v36 )
          {
            v19 = v3;
            sub_402340(&v19, (int)&v34);
            v18 = 0;
            if ( (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)a3 + 28))(a3, 0, v19)
              && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 32))(a3) )
            {
              result = 1;
            }
            else
            {
              v19 = *((_DWORD *)v27 + 129);
              v18 = *((_DWORD *)v27 + 132);
              sub_4328C0("Invalid format %s line(%d) at CObjectDB::Load", v18, v19);
              result = 0;
            }
            return result;
          }
          --v36;
        }
        if ( v35 != 7 )
          break;
        v5 = alloca(12);
        v26 = &v17;
        v30 = operator new(0xCu, &v17);
        if ( v30 )
        {
          v16 = v4;
          sub_402340(&v16, (int)&unk_4E1108);
          v15 = v4;
          sub_402340(&v15, (int)&unk_4E1108);
          v25 = sub_40C510(v30, v15, v16);
        }
        else
        {
          v25 = 0;
        }
        v16 = v4;
        sub_446FD0(v25);
        v6 = sub_44C860((int)&v34, v36);
        sub_4323F0((void *)v6, v16);
        ++v36;
      }
      if ( v35 != 1 && v35 != 2 )
        break;
      v32 = strlen((const char *)v27);
      v7 = alloca(v32 + 1);
      v24 = (int *)&v20;
      v33 = &v20;
      memcpy(&v20, v27, v32 + 1);
      v8 = alloca(8);
      v23 = &v18;
      v29 = operator new(8u, &v18);
      if ( v29 )
        v22 = sub_40C300(v29, (int)v33);
      else
        v22 = 0;
      sub_446FD0(v22);
      v10 = alloca(12);
      v21 = &v15;
      v28 = operator new(0xCu, &v15);
      if ( v28 )
      {
        v14 = v9;
        sub_402340(&v14, (int)&unk_4E1108);
        v13 = v9;
        sub_402340(&v13, (int)&v31);
        v20 = sub_40C510(v28, v13, v14);
      }
      else
      {
        v20 = 0;
      }
      v14 = v9;
      sub_446FD0(v20);
      v11 = sub_44C860((int)&v34, v36);
      sub_4323F0((void *)v11, v14);
    }
  }
  while ( v35 == 3 );
  v19 = v35;
  v18 = *((_DWORD *)v27 + 129);
  *(_DWORD *)&v17 = *((_DWORD *)v27 + 132);
  sub_4328C0("Invalid format %s line(%d) token(%d) at CObjectDB::Load", *(_DWORD *)&v17, v18, v35);
  while ( v36 >= 0 )
  {
    if ( !v35 )
    {
      sub_4328C0("Unmatched open parenthesis at CObjectDB::Load");
      return 0;
    }
    if ( v35 == 7 )
    {
      ++v36;
    }
    else
    {
      if ( v35 == 8 )
        --v36;
    }
    v35 = CConfig::GetToken(v27);
  }
  return 0;
}
// 40BB30: using guessed type int __fastcall std__ios_base__ios_base(_DWORD, _DWORD);
// 446FD0: using guessed type _DWORD __stdcall sub_446FD0(_DWORD);

//----- (0044C860) --------------------------------------------------------
int __stdcall sub_44C860(int a1, int a2)
{
  int i; // [sp+0h] [bp-8h]@1
  int v4; // [sp+4h] [bp-4h]@1

  v4 = a1;
  for ( i = a1; ; i = v4 )
  {
    while ( (unsigned __int8)sub_40BCE0((void *)v4) )
    {
      i = v4;
      v4 = sub_40BCC0((void *)v4);
    }
    if ( !a2 )
      break;
    --a2;
    v4 = sub_40BCA0((void *)i);
  }
  return v4;
}

//----- (0044C8D0) --------------------------------------------------------
__int32 __usercall CObjectDB::Close<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v4; // eax@3
  char v6; // [sp+0h] [bp-Ch]@2
  char v7; // [sp+4h] [bp-8h]@3
  char v8; // [sp+8h] [bp-4h]@1

  InterlockedExchange(&dword_4E1B98, 0);
  sub_40F070((int)&unk_4E1F38, &v8);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E1F38, &v6);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = sub_420250((int *)&v8);
    CBase::Delete(*(void **)(v4 + 4));
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  CItem::Close(a1, a2, a3);
  CInitNPC::Close();
  CGenNPC::Close();
  sub_47F5D0();
  sub_480910();
  return sub_47CA50(a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044C960) --------------------------------------------------------
LONG __cdecl CObjectDB::CanReload()
{
  return dword_4E1B98;
}

//----- (0044C970) --------------------------------------------------------
int __thiscall sub_44C970(int this, int a2, int *a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_44CA00(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), sub_420220(*a3, *(_DWORD *)v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044CA00) --------------------------------------------------------
void *__thiscall sub_44CA00(int this, void *a2, int *a3)
{
  int v4; // eax@1

  v4 = sub_44CA30(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (0044CA30) --------------------------------------------------------
int __thiscall sub_44CA30(int this, int *a2)
{
  int v2; // ST08_4@1
  int v3; // ST04_4@3
  int v4; // eax@3
  int v6; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_478AB0(this);
  v7 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_431110(v6) )
  {
    v3 = *a2;
    v4 = sub_473500(v6);
    if ( sub_420220(*(_DWORD *)v4, v3) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)sub_474590(v6);
    }
  }
  return v7;
}

//----- (0044CAC0) --------------------------------------------------------
int __thiscall sub_44CAC0(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_474590(a2);
  v2 = sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *(_DWORD *)v2;
  v3 = sub_430F90(v11);
  if ( !*(_BYTE *)sub_431110(*(_DWORD *)v3) )
  {
    v4 = sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (0044CBF0) --------------------------------------------------------
int __thiscall sub_44CBF0(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *(_DWORD *)v2;
  v3 = sub_474590(v11);
  if ( !*(_BYTE *)sub_431110(*(_DWORD *)v3) )
  {
    v4 = sub_474590(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (0044CD20) --------------------------------------------------------
void *__stdcall sub_44CD20(int a1)
{
  return sub_420900(a1);
}

//----- (0044CD40) --------------------------------------------------------
void *__thiscall sub_44CD40(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v4 = 0;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044CD70) --------------------------------------------------------
int __stdcall sub_44CD70(int a1)
{
  return _initp_misc_winxfltr();
}

//----- (0044CD90) --------------------------------------------------------
void *__thiscall sub_44CD90(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v4 = 0;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044CDC0) --------------------------------------------------------
void *__cdecl sub_44CDC0(void *a1, void **a2)
{
  void *result; // eax@1
  void *v3; // [sp+4h] [bp-4h]@1

  result = operator new(4u, a1);
  v3 = result;
  if ( result )
  {
    result = *a2;
    *(_DWORD *)v3 = *a2;
  }
  return result;
}

//----- (0044CE00) --------------------------------------------------------
int __thiscall CQuest::CQuest(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4BA5A0;
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  sub_47D030((void *)(v2 + 44));
  return v2;
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0044CE50) --------------------------------------------------------
int __userpurge CQuest::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_47C980(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0044CE80) --------------------------------------------------------
void *__thiscall sub_44CE80(void *this, char a2)
{
  void *v3; // ST08_4@1
  char v4; // ST04_1@1

  v3 = this;
  v4 = (char)this;
  std___Init_locks__operator_(&a2);
  sub_44F7C0(v3, v4);
  std___Init_locks__operator_(&a2);
  return v3;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0044CEC0) --------------------------------------------------------
void *__cdecl sub_44CEC0(int a1)
{
  return sub_401000(12 * a1);
}

//----- (0044CEE0) --------------------------------------------------------
int __thiscall sub_44CEE0(int this)
{
  return sub_44CF00(this);
}

//----- (0044CF00) --------------------------------------------------------
int __thiscall sub_44CF00(int this)
{
  return sub_44CF20(this);
}

//----- (0044CF20) --------------------------------------------------------
int __thiscall sub_44CF20(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_44CFD0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0044CFD0) --------------------------------------------------------
void *__thiscall sub_44CFD0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44D070(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044D070) --------------------------------------------------------
int __thiscall sub_44D070(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_44D0D0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 44D0D0: using guessed type _DWORD __stdcall sub_44D0D0(_DWORD);

//----- (0044D0D0) --------------------------------------------------------
int __stdcall sub_44D0D0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_44D0D0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 44D0D0: using guessed type _DWORD __stdcall sub_44D0D0(_DWORD);

//----- (0044D150) --------------------------------------------------------
int __thiscall sub_44D150(int this)
{
  return sub_44D170(this);
}

//----- (0044D170) --------------------------------------------------------
int __thiscall sub_44D170(int this)
{
  return sub_44D190(this);
}

//----- (0044D190) --------------------------------------------------------
int __thiscall sub_44D190(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_44D240(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0044D240) --------------------------------------------------------
void *__thiscall sub_44D240(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44D2E0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044D2E0) --------------------------------------------------------
int __thiscall sub_44D2E0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_44D340(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 44D340: using guessed type _DWORD __stdcall sub_44D340(_DWORD);

//----- (0044D340) --------------------------------------------------------
int __stdcall sub_44D340(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_44D340(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 44D340: using guessed type _DWORD __stdcall sub_44D340(_DWORD);

//----- (0044D3C0) --------------------------------------------------------
int __userpurge CParty::CParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST08_4@1

  v6 = a1;
  CIOObject::CIOObject(a1);
  *(_DWORD *)v6 = &off_4BA5E8;
  sub_41C7D0((void *)(v6 + 32));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v6 + 48));
  *(_DWORD *)(v6 + 16) = InterlockedIncrement(&dword_4E1FB8);
  *(_DWORD *)(v6 + 20) = a5;
  *(_DWORD *)(v6 + 24) = *(_DWORD *)(a5 + 60);
  *(_DWORD *)(v6 + 28) = 0;
  sub_423980(a5, a2, a3, a4, (volatile LONG *)(a5 + 444));
  *(_DWORD *)(a5 + 1016) = *(_DWORD *)(v6 + 16);
  sub_41C840(v6 + 32, (int)&a5);
  *(_DWORD *)(v6 + 80) = 0;
  CIOObject::AddTimer(v6, a2, a3, a4, 1000, 0);
  return v6;
}
// 4BA5E8: using guessed type int (__stdcall *off_4BA5E8)(int);

//----- (0044D470) --------------------------------------------------------
int __userpurge CParty::_scalar_deleting_destructor_<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CParty::_CParty(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0044D4A0) --------------------------------------------------------
int __usercall CParty::_CParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4BA5E8;
  CIOCriticalSection::_CIOCriticalSection(a1 + 48, a2, a3, a4);
  sub_44F580(v5 + 32);
  return std__locale__facet___facet(v5);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 4BA5E8: using guessed type int (__stdcall *off_4BA5E8)(int);

//----- (0044D4E0) --------------------------------------------------------
int __usercall CParty::FindParty<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v7 = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1FD0, a1, a2, a3);
  sub_44AE20((int)&unk_4E1FC4, (int)&v8, (int)&a4);
  v4 = sub_430C20((int)&unk_4E1FC4, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v7 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
    CIOObject::AddRef(v7, a1, a2, a3);
  }
  CIOCriticalSection::Leave((int)&unk_4E1FD0, a1, a2, a3);
  return v7;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044D550) --------------------------------------------------------
void __usercall CParty::Accept(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  int v5; // [sp+0h] [bp-Ch]@4
  int v6; // [sp+4h] [bp-8h]@3
  int v7; // [sp+8h] [bp-4h]@2

  sub_460490(a1, a2, a3, a4, a5);
  if ( *(_DWORD *)(a5 + 1016) )
  {
    CPlayer::Write(a1, a2, a3, a4, 68, (unsigned int)"bs");
  }
  else
  {
    v7 = CParty::FindParty(a1, a2, a3, *(_DWORD *)(a4 + 1016));
    if ( !v7 )
    {
      v6 = (int)sub_401000(0x54u);
      if ( v6 )
        v5 = CParty::CParty(v6, a1, a2, a3, a4);
      else
        v5 = 0;
      v7 = v5;
      CIOObject::AddRef(v5, a1, a2, a3);
      CParty::Add(v5, a1, a2, a3);
    }
    CParty::Join(v7, a1, a2, a3, a4, a5);
    CIOObject::Release(v7, a1, a2, a3);
  }
  sub_44D620(a1, a2, a3, a4, a5);
}

//----- (0044D620) --------------------------------------------------------
void __usercall sub_44D620(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CChar::Unlock(a4, a1, a2, a3);
  CChar::Unlock(a5, a1, a2, a3);
}

//----- (0044D640) --------------------------------------------------------
void *__usercall CParty::OnFree<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *result; // eax@2
  int v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( *(_DWORD *)(a1 + 28) )
  {
    result = CIOObject::OnFree((void *)a1);
  }
  else
  {
    sub_422B30("CParty::OnFree %p %d %d %d %d\n", a1);
    result = (void *)sub_422D80(v5, a2, a3, a4);
    *(_DWORD *)(v6 + 4) = 100;
  }
  return result;
}

//----- (0044D6A0) --------------------------------------------------------
void __userpurge CParty::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@4
  int v6; // eax@5
  int v7; // [sp+0h] [bp-20h]@1
  char v8; // [sp+4h] [bp-1Ch]@4
  char v9; // [sp+8h] [bp-18h]@5
  int v10; // [sp+Ch] [bp-14h]@5
  char v11; // [sp+10h] [bp-10h]@3
  void *v12; // [sp+14h] [bp-Ch]@3
  char *v13; // [sp+18h] [bp-8h]@3
  void *v14; // [sp+1Ch] [bp-4h]@3

  v7 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( *(_DWORD *)(v7 + 28) )
  {
    CIOCriticalSection::Leave(v7 + 48, a2, a3, a4);
  }
  else
  {
    v14 = CIOBuffer::Alloc();
    v12 = v14;
    *((_BYTE *)v14 + 2) = 83;
    v13 = (char *)v12 + 4;
    sub_430C20(v7 + 32, &v11);
    while ( 1 )
    {
      v5 = sub_445B40(v7 + 32, &v8);
      if ( !(unsigned __int8)sub_47D070(v5) )
        break;
      v10 = *(_DWORD *)sub_420010();
      v6 = std___Mpunct_wchar_t___do_frac_digits(v10);
      v13 = (char *)sub_44F9B0(v13, v6);
      v13 = (char *)sub_44F9B0(v13, *(_DWORD *)(v10 + 332));
      v13 = (char *)sub_44F9B0(v13, *(_DWORD *)(v10 + 336));
      sub_420030(&v11, (int)&v9, 0);
    }
    sub_418590(v7 + 32);
    sub_496F10(a2, a3, a4, (char *)v12 + 3, (unsigned int)"b");
    *(_WORD *)v12 = (_WORD)v13 - (_WORD)v12;
    *((_DWORD *)v14 + 2000) = *(_WORD *)v12;
    CParty::_Broadcast(v7, a2, a3, a4, v14, 0);
    CIOCriticalSection::Leave(v7 + 48, a2, a3, a4);
    CIOObject::AddTimer(v7, a2, a3, a4, 1000, 0);
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044D7F0) --------------------------------------------------------
void __usercall CParty::Add(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST08_4@1
  int v5; // eax@1
  char v6; // [sp+4h] [bp-14h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  char v8; // [sp+10h] [bp-8h]@1

  v4 = a1;
  CIOObject::AddRef(a1, a2, a3, a4);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1FD0, a2, a3, a4);
  v7 = v4;
  v5 = sub_420990((int)&v8, v4 + 16, (int)&v7);
  sub_445DF0((int)&unk_4E1FC4, (int)&v6, v5);
  CIOCriticalSection::Leave((int)&unk_4E1FD0, a2, a3, a4);
}

//----- (0044D850) --------------------------------------------------------
int __usercall CParty::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E1FD0, a2, a3, a4);
  sub_44F600((int)&unk_4E1FC4, v5 + 16);
  CIOCriticalSection::Leave((int)&unk_4E1FD0, a2, a3, a4);
  return CIOObject::Release(v5, a2, a3, a4);
}

//----- (0044D890) --------------------------------------------------------
signed int __userpurge CParty::IsHead<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-8h]@1
  signed int v7; // [sp+4h] [bp-4h]@1

  v6 = a1;
  v7 = 1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( *(_DWORD *)(v6 + 28) || *(_DWORD *)(v6 + 20) != a5 )
    v7 = 0;
  CIOCriticalSection::Leave(v6 + 48, a2, a3, a4);
  return v7;
}

//----- (0044D8E0) --------------------------------------------------------
signed int __thiscall CParty::IsMember(void *this, int a2)
{
  void *v2; // eax@2
  void *v4; // [sp+0h] [bp-10h]@1
  char v5; // [sp+4h] [bp-Ch]@2
  char v6; // [sp+8h] [bp-8h]@5
  char v7; // [sp+Ch] [bp-4h]@1

  v4 = this;
  sub_430C20((int)((char *)this + 32), &v7);
  while ( 1 )
  {
    v2 = sub_445B40((int)((char *)v4 + 32), &v5);
    if ( !(unsigned __int8)sub_47D070(v2) )
      break;
    if ( a2 == *(_DWORD *)sub_420010() )
      return 1;
    sub_420030(&v7, (int)&v6, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044D950) --------------------------------------------------------
int __thiscall CParty::FindTopLevel(void *this)
{
  void *v1; // eax@2
  void *v3; // [sp+0h] [bp-18h]@1
  char v4; // [sp+4h] [bp-14h]@2
  char v5; // [sp+8h] [bp-10h]@5
  int v6; // [sp+Ch] [bp-Ch]@3
  char v7; // [sp+10h] [bp-8h]@1
  int v8; // [sp+14h] [bp-4h]@1

  v3 = this;
  v8 = 0;
  sub_430C20((int)((char *)this + 32), &v7);
  while ( 1 )
  {
    v1 = sub_445B40((int)((char *)v3 + 32), &v4);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    v6 = *(_DWORD *)sub_420010();
    if ( *(_DWORD *)(v6 + 60) > v8 )
      v8 = *(_DWORD *)(v6 + 60);
    sub_420030(&v7, (int)&v5, 0);
  }
  return v8;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044D9D0) --------------------------------------------------------
void __userpurge CParty::Join(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // ST28_4@6
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+8h] [bp-4h]@3

  v7 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( !*(_DWORD *)(v7 + 28) )
  {
    if ( a5 == *(_DWORD *)(v7 + 20) )
    {
      v8 = sub_418590(v7 + 32);
      if ( v8 >= 6 )
      {
        CPlayer::Write(a2, a3, a4, a6, 67, (unsigned int)"b");
      }
      else
      {
        if ( v8 == 1 )
          CParty::SendPartyInfo(v7, a2, a3, a4, *(void **)(v7 + 20));
        sub_423980(a6, a2, a3, a4, (volatile LONG *)(a6 + 444));
        *(_DWORD *)(a6 + 1016) = *(_DWORD *)(v7 + 16);
        CPlayer::Write(a2, a3, a4, a6, 67, (unsigned int)"b");
        CChar::GetMaxHP(a6);
        std___Mpunct_wchar_t___do_frac_digits(a6);
        v6 = sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bdsbbww");
        CParty::_Broadcast(v7, a2, a3, a4, v6, 0);
        sub_41C840(v7 + 32, (int)&a6);
        CParty::SendPartyInfo(v7, a2, a3, a4, (void *)a6);
        if ( *(_DWORD *)(a6 + 60) > *(_DWORD *)(v7 + 24) )
          *(_DWORD *)(v7 + 24) = *(_DWORD *)(a6 + 60);
      }
    }
  }
  CIOCriticalSection::Leave(v7 + 48, a2, a3, a4);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0044DB20) --------------------------------------------------------
void __userpurge CParty::Leave(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@4
  int v6; // edx@18
  int v7; // ST0C_4@21
  int v8; // eax@21
  int v9; // [sp+0h] [bp-30h]@12
  int v10; // [sp+4h] [bp-2Ch]@1
  char v11; // [sp+8h] [bp-28h]@15
  int v12; // [sp+Ch] [bp-24h]@7
  char v13; // [sp+10h] [bp-20h]@4
  char v14; // [sp+14h] [bp-1Ch]@8
  int v15; // [sp+18h] [bp-18h]@18
  void *v16; // [sp+1Ch] [bp-14h]@3
  int v17; // [sp+20h] [bp-10h]@14
  int v18; // [sp+24h] [bp-Ch]@11
  int v19; // [sp+28h] [bp-8h]@14
  void *v20; // [sp+2Ch] [bp-4h]@7

  v10 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( *(_DWORD *)(v10 + 28) )
  {
    CIOCriticalSection::Leave(v10 + 48, a2, a3, a4);
  }
  else
  {
    sub_430C20(v10 + 32, &v16);
    while ( 1 )
    {
      v5 = sub_445B40(v10 + 32, &v13);
      if ( (unsigned __int8)unknown_libname_8(v5) )
      {
        CIOCriticalSection::Leave(v10 + 48, a2, a3, a4);
        sub_4328C0("CParty::Leave() Not this party member. (bit:%x)", *(_DWORD *)(a5 + 20));
        return;
      }
      if ( a5 == *(_DWORD *)sub_420010() )
        break;
      sub_420030(&v16, (int)&v14, 0);
    }
    sub_44F5A0(v10 + 32, (int)&v12, v16);
    *(_DWORD *)(a5 + 1016) = 0;
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    std___Mpunct_wchar_t___do_frac_digits(a5);
    v20 = sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bd");
    CParty::_Broadcast(v10, a2, a3, a4, v20, 0);
    if ( *(_DWORD *)(a5 + 60) >= *(_DWORD *)(v10 + 24) )
      *(_DWORD *)(v10 + 24) = CParty::FindTopLevel((void *)v10);
    v18 = *(_DWORD *)(a5 + 584);
    if ( v18 )
      v9 = CParty::_GetPlayerList(v10, a2, a3, a4);
    else
      v9 = 0;
    v19 = v9;
    v17 = sub_418590(v10 + 32);
    if ( a5 == *(_DWORD *)(v10 + 20) )
    {
      sub_430C20(v10 + 32, &v11);
      *(_DWORD *)(v10 + 20) = *(_DWORD *)sub_420010();
      if ( v17 > 1 )
        CPlayer::Write(a2, a3, a4, *(_DWORD *)(v10 + 20), 67, (unsigned int)"b");
    }
    if ( v17 == 1 )
    {
      v15 = *(_DWORD *)(v10 + 20);
      *(_DWORD *)(v10 + 20) = 0;
      CParty::Delete(v10, a2, a3, a4);
      CIOCriticalSection::Leave(v10 + 48, a2, a3, a4);
      CParty::Remove(v10, a2, a3, a4);
      *(_DWORD *)(v15 + 1016) = 0;
      CPlayer::Write(a2, a3, a4, v15, 67, (unsigned int)"b");
      v6 = v15;
      *(_DWORD *)(v15 + 584) = 0;
      CChar::CancelBuffPrty(v15, v6, a2, a3, a4, 24);
      sub_4239C0(v15, a2, a3, a4, v15 + 444);
    }
    else
    {
      CIOCriticalSection::Leave(v10 + 48, a2, a3, a4);
    }
    while ( v19 )
    {
      v7 = v18;
      v8 = unknown_libname_7();
      CChar::CancelBuff(v8, a2, a3, a4, v7);
      v19 = CBaseList::Pop(v19, a2, a3, a4);
    }
    *(_DWORD *)(a5 + 584) = 0;
    CChar::CancelBuffPrty(a5, a5, a2, a3, a4, 24);
    sub_4239C0(a5, a2, a3, a4, a5 + 444);
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044DDA0) --------------------------------------------------------
int __usercall CParty::Delete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)(a1 + 28) = 1;
  return CIOObject::Release(a1, a2, a3, a4);
}

//----- (0044DDC0) --------------------------------------------------------
void __userpurge CParty::Exile(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // eax@6
  int v7; // edx@17
  int v8; // ST0C_4@20
  int v9; // eax@20
  int v10; // [sp+0h] [bp-28h]@14
  int v11; // [sp+4h] [bp-24h]@1
  int v12; // [sp+8h] [bp-20h]@9
  char v13; // [sp+Ch] [bp-1Ch]@6
  char v14; // [sp+10h] [bp-18h]@10
  int v15; // [sp+14h] [bp-14h]@17
  void *v16; // [sp+18h] [bp-10h]@5
  int v17; // [sp+1Ch] [bp-Ch]@13
  int v18; // [sp+20h] [bp-8h]@16
  void *v19; // [sp+24h] [bp-4h]@9

  v11 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( *(_DWORD *)(v11 + 28) )
  {
    CIOCriticalSection::Leave(v11 + 48, a2, a3, a4);
  }
  else
  {
    if ( a5 == *(_DWORD *)(v11 + 20) )
    {
      sub_430C20(v11 + 32, &v16);
      while ( 1 )
      {
        v6 = sub_445B40(v11 + 32, &v13);
        if ( (unsigned __int8)unknown_libname_8(v6) )
        {
          CIOCriticalSection::Leave(v11 + 48, a2, a3, a4);
          sub_4328C0("CParty::Leave() Not this party member. (bit:%x)", *(_DWORD *)(a6 + 20));
          return;
        }
        if ( a6 == *(_DWORD *)sub_420010() )
          break;
        sub_420030(&v16, (int)&v14, 0);
      }
      sub_44F5A0(v11 + 32, (int)&v12, v16);
      *(_DWORD *)(a6 + 1016) = 0;
      CPlayer::Write(a2, a3, a4, a6, 67, (unsigned int)"b");
      std___Mpunct_wchar_t___do_frac_digits(a6);
      v19 = sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bd");
      CParty::_Broadcast(v11, a2, a3, a4, v19, 0);
      if ( *(_DWORD *)(a6 + 60) >= *(_DWORD *)(v11 + 24) )
        *(_DWORD *)(v11 + 24) = CParty::FindTopLevel((void *)v11);
      v17 = *(_DWORD *)(a6 + 584);
      if ( v17 )
        v10 = CParty::_GetPlayerList(v11, a2, a3, a4);
      else
        v10 = 0;
      v18 = v10;
      if ( sub_418590(v11 + 32) == 1 )
      {
        v15 = *(_DWORD *)(v11 + 20);
        *(_DWORD *)(v11 + 20) = 0;
        CParty::Delete(v11, a2, a3, a4);
        CIOCriticalSection::Leave(v11 + 48, a2, a3, a4);
        CParty::Remove(v11, a2, a3, a4);
        *(_DWORD *)(v15 + 1016) = 0;
        CPlayer::Write(a2, a3, a4, v15, 67, (unsigned int)"b");
        *(_DWORD *)(v15 + 584) = 0;
        CChar::CancelBuffPrty(v15, v7, a2, a3, a4, 24);
        sub_4239C0(v15, a2, a3, a4, v15 + 444);
      }
      else
      {
        CIOCriticalSection::Leave(v11 + 48, a2, a3, a4);
      }
      while ( v18 )
      {
        v8 = v17;
        v9 = unknown_libname_7();
        CChar::CancelBuff(v9, a2, a3, a4, v8);
        v18 = CBaseList::Pop(v18, a2, a3, a4);
      }
      *(_DWORD *)(a6 + 584) = 0;
      CChar::CancelBuffPrty(a6, v7, a2, a3, a4, 24);
      sub_4239C0(a6, a2, a3, a4, a6 + 444);
    }
    else
    {
      CIOCriticalSection::Leave(v11 + 48, a2, a3, a4);
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0044E020) --------------------------------------------------------
void __userpurge CParty::AllotExp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  char v7; // sf@1
  void *v8; // eax@13
  void *v9; // eax@23
  int v10; // eax@29
  void *v11; // eax@32
  int v12; // [sp+2Ch] [bp-78h]@7
  int v13; // [sp+30h] [bp-74h]@3
  int v14; // [sp+34h] [bp-70h]@1
  char v15; // [sp+38h] [bp-6Ch]@32
  char v16; // [sp+3Ch] [bp-68h]@41
  char v17; // [sp+40h] [bp-64h]@29
  char v18; // [sp+48h] [bp-5Ch]@29
  char v19; // [sp+50h] [bp-54h]@23
  char v20; // [sp+54h] [bp-50h]@30
  char v21; // [sp+58h] [bp-4Ch]@13
  char v22; // [sp+5Ch] [bp-48h]@19
  int v23; // [sp+60h] [bp-44h]@33
  char v24; // [sp+64h] [bp-40h]@31
  char v25; // [sp+68h] [bp-3Ch]@22
  char v26; // [sp+6Ch] [bp-38h]@12
  int v27; // [sp+70h] [bp-34h]@12
  int v28; // [sp+74h] [bp-30h]@1
  int v29; // [sp+78h] [bp-2Ch]@22
  int v30; // [sp+7Ch] [bp-28h]@14
  int v31; // [sp+80h] [bp-24h]@12
  char v32; // [sp+84h] [bp-20h]@12
  int v33; // [sp+94h] [bp-10h]@24
  char v34; // [sp+98h] [bp-Ch]@22

  v14 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  v7 = a6 - *(_DWORD *)(v14 + 24) < 0;
  v28 = a6 - *(_DWORD *)(v14 + 24);
  if ( v7 )
  {
    if ( abs(v28) >= 20 )
      v12 = 20;
    else
      v12 = abs(v28);
    *(_DWORD *)a5 = (unsigned __int64)((double)*(signed int *)a5
                                     - (double)*(signed int *)a5
                                     * (double)*(int *)((char *)&dword_4D8870[21 * (*(_DWORD *)(v14 + 24) - 1) / 10]
                                                      + 4 * v12)
                                     / 100.0);
  }
  else
  {
    if ( v28 >= 20 )
      v13 = 20;
    else
      v13 = v28;
    *(_DWORD *)a5 = (unsigned __int64)((double)*(signed int *)a5
                                     * (double)*(int *)((char *)&dword_4D8528[21 * (*(_DWORD *)(v14 + 24) - 1) / 10]
                                                      + 4 * v13)
                                     / 100.0
                                     + (double)*(signed int *)a5);
  }
  if ( *(_DWORD *)a5 > 0 )
  {
    sub_41C7D0(&v32);
    v31 = 0;
    v27 = 0;
    sub_430C20(v14 + 32, &v26);
    while ( 1 )
    {
      v8 = sub_445B40(v14 + 32, &v21);
      if ( !(unsigned __int8)sub_47D070(v8) )
        break;
      v30 = *(_DWORD *)sub_420010();
      if ( CChar::IsNormal(v30) )
      {
        if ( sub_448870(v30 + 332, a7) <= 640 )
        {
          if ( *(_DWORD *)(v14 + 24) - *(_DWORD *)(v30 + 60) <= 20 )
            ++v27;
          v31 += *(_DWORD *)(v30 + 60);
          sub_41C840((int)&v32, (int)&v30);
        }
      }
      sub_420030(&v26, (int)&v22, 0);
    }
    if ( v27 > 1 )
      *(_DWORD *)a5 = (unsigned __int64)((double)*(signed int *)a5 * (double)(v27 - 1) / 10.0 + (double)*(signed int *)a5);
    sub_445C80(&v34);
    v29 = *(_DWORD *)(v14 + 24);
    sub_430C20((int)&v32, &v25);
    while ( 1 )
    {
      v9 = sub_445B40((int)&v32, &v19);
      if ( !(unsigned __int8)sub_47D070(v9) )
        break;
      v30 = *(_DWORD *)sub_420010();
      v33 = (unsigned __int64)((double)*(signed int *)a5 * (double)*(signed int *)(v30 + 60) / (double)v31);
      v28 = v29 - *(_DWORD *)(v30 + 60);
      if ( v28 <= 28 )
      {
        if ( v28 > 0 )
          v33 = (unsigned __int64)((double)v33 - (double)v33 * (double)dword_4D8BB8[v28] / 100.0);
      }
      else
      {
        v33 = 0;
      }
      if ( v33 )
      {
        sub_423980(v30, a2, a3, a4, (volatile LONG *)(v30 + 352));
        v10 = sub_420990((int)&v18, (int)&v30, (int)&v33);
        sub_48D6D0((int)&v34, (int)&v17, v10);
      }
      sub_420030(&v25, (int)&v20, 0);
    }
    CIOCriticalSection::Leave(v14 + 48, a2, a3, a4);
    *(_DWORD *)a5 = 0;
    sub_40F070((int)&v34, &v24);
    while ( 1 )
    {
      v11 = sub_430C20((int)&v34, &v15);
      if ( !(unsigned __int8)sub_47D070(v11) )
        break;
      v30 = *(_DWORD *)sub_420250((int *)&v24);
      v33 = *(_DWORD *)(sub_420250((int *)&v24) + 4);
      *(_DWORD *)a5 += v33;
      v23 = (dword_4E1178 & 1) != 0 ? 0x64 : 0;
      if ( CChar::IsBState(v30, 549755813888i64) || CChar::IsBState(v30, 1099511627776i64) || CChar::IsBState(v30, 2199023255552i64) )
        v23 += 10;
      if ( CChar::IsBState(v30, 2i64) )
      {
        v23 += 30;
      }
      else
      {
        if ( CChar::IsBState(v30, 1i64) )
          v23 += 30;
      }
      (*(void (__cdecl **)(int, signed int, signed int, int, _DWORD))(*(_DWORD *)v30 + 88))(
        v30,
        25,
        1,
        v33 + v23 * v33 / 100,
        (unsigned __int64)(v33 + v23 * v33 / 100) >> 32);
      sub_4239C0(v30, a2, a3, a4, v30 + 352);
      sub_446090((int *)&v24, (int)&v16, 0);
    }
    sub_4398F0((int)&v34);
    sub_44F580(&v32);
  }
  else
  {
    CIOCriticalSection::Leave(v14 + 48, a2, a3, a4);
  }
}
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D8528: using guessed type int dword_4D8528[];
// 4D8870: using guessed type int dword_4D8870[];
// 4D8BB8: using guessed type int dword_4D8BB8[];
// 4E1178: using guessed type int dword_4E1178;

//----- (0044E4B0) --------------------------------------------------------
LONG __userpurge CParty::SendPartyInfo<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  void *v5; // eax@2
  int v6; // eax@3
  __int16 v7; // ax@3
  int v9; // [sp+0h] [bp-20h]@1
  char v10; // [sp+4h] [bp-1Ch]@2
  char v11; // [sp+8h] [bp-18h]@3
  int v12; // [sp+Ch] [bp-14h]@3
  char v13; // [sp+10h] [bp-10h]@1
  void *v14; // [sp+14h] [bp-Ch]@1
  int v15; // [sp+18h] [bp-8h]@1
  void *v16; // [sp+1Ch] [bp-4h]@1

  v9 = a1;
  v16 = CIOBuffer::Alloc();
  v14 = v16;
  *((_BYTE *)v16 + 2) = 84;
  v15 = (int)((char *)v14 + 4);
  sub_430C20(v9 + 32, &v13);
  while ( 1 )
  {
    v5 = sub_445B40(v9 + 32, &v10);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    v12 = *(_DWORD *)sub_420010();
    v6 = std___Mpunct_wchar_t___do_frac_digits(v12);
    v15 = sub_44F9B0(v15, v6);
    v15 = sub_497660(v15, v12 + 32);
    v15 = sub_4189A0(v15, *(_BYTE *)(v12 + 460));
    v15 = sub_4189A0(v15, *(_BYTE *)(v12 + 60));
    v15 = sub_42F960(v15, *(_WORD *)(v12 + 272));
    v7 = CChar::GetMaxHP(v12);
    v15 = sub_42F960(v15, v7);
    sub_420030(&v13, (int)&v11, 0);
  }
  sub_418590(v9 + 32);
  sub_496F10(a2, a3, a4, (char *)v14 + 3, (unsigned int)"b");
  *(_WORD *)v14 = v15 - (_WORD)v14;
  *((_DWORD *)v16 + 2000) = *(_WORD *)v14;
  CPlayer::Send(a5, a2, a3, a4, v16);
  return CIOBuffer::Release((int)v16);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044E610) --------------------------------------------------------
void __userpurge CParty::UpdateMemberHP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST18_4@1
  void *v6; // ST1C_4@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  CChar::GetMaxHP(a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  v6 = sub_44FCE0(a2, a3, a4, 85, (unsigned int)"dbdd");
  CParty::_Broadcast(v5, a2, a3, a4, v6, 0);
  CIOCriticalSection::Leave(v5 + 48, a2, a3, a4);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0044E680) --------------------------------------------------------
void __userpurge CParty::UpdateMemberLevel(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // ST18_4@2
  int v6; // [sp+0h] [bp-8h]@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( CParty::IsMember((void *)v6, a5) )
  {
    *(_DWORD *)(v6 + 24) = CParty::FindTopLevel((void *)v6);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    v5 = sub_44FCE0(a2, a3, a4, 85, (unsigned int)"dbd");
    CParty::_Broadcast(v6, a2, a3, a4, v5, 0);
  }
  CIOCriticalSection::Leave(v6 + 48, a2, a3, a4);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0044E700) --------------------------------------------------------
void __userpurge CParty::Broadcast(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6)
{
  int v6; // ST08_4@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  CParty::_Broadcast(v6, a2, a3, a4, a5, a6);
  CIOCriticalSection::Leave(v6 + 48, a2, a3, a4);
}

//----- (0044E740) --------------------------------------------------------
LONG __userpurge CParty::_Broadcast<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5, void *a6)
{
  void *v6; // eax@2
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@2
  char v10; // [sp+8h] [bp-Ch]@5
  void *v11; // [sp+Ch] [bp-8h]@3
  char v12; // [sp+10h] [bp-4h]@1

  v8 = a1;
  sub_430C20(a1 + 32, &v12);
  while ( 1 )
  {
    v6 = sub_445B40(v8 + 32, &v9);
    if ( !(unsigned __int8)sub_47D070(v6) )
      break;
    v11 = *(void **)sub_420010();
    if ( v11 != a6 )
      CPlayer::Send(v11, a2, a3, a4, a5);
    sub_420030(&v12, (int)&v10, 0);
  }
  return CIOBuffer::Release((int)a5);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044E7C0) --------------------------------------------------------
int __usercall CParty::GetRandomPlayer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST08_4@1
  int v6; // eax@1
  int v7; // ST10_4@1
  int v8; // ST0C_4@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  v6 = sub_418590(v5 + 32);
  v7 = sub_406E10(0, v6 - 1);
  v8 = *(_DWORD *)sub_41C800(v5 + 32, v7);
  sub_423980(v8, a2, a3, a4, (volatile LONG *)(v8 + 352));
  CIOCriticalSection::Leave(v5 + 48, a2, a3, a4);
  return v8;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0044E830) --------------------------------------------------------
signed int __userpurge CParty::Teleport<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  void *v7; // eax@5
  int v8; // [sp+0h] [bp-24h]@1
  char v9; // [sp+4h] [bp-20h]@5
  char v10; // [sp+8h] [bp-1Ch]@4
  int v11; // [sp+Ch] [bp-18h]@8
  int v12; // [sp+10h] [bp-14h]@8
  int v13; // [sp+14h] [bp-10h]@6
  char v14; // [sp+18h] [bp-Ch]@3
  int v15; // [sp+1Ch] [bp-8h]@3
  int v16; // [sp+20h] [bp-4h]@3

  v8 = a1;
  if ( CParty::IsHead(a1, a2, a3, a4, a5) )
  {
    v16 = dword_4D7900[4 * a6];
    v15 = (int)((char *)&unk_4D7904 + 16 * a6);
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v8 + 48), a2, a3, a4);
    sub_430C20(v8 + 32, &v14);
    while ( 1 )
    {
      v7 = sub_445B40(v8 + 32, &v9);
      if ( !(unsigned __int8)sub_47D070(v7) )
        break;
      v13 = *(_DWORD *)sub_420010();
      if ( CChar::IsNormal(v13) )
      {
        v11 = sub_406E10(*(_DWORD *)v15 - 64, *(_DWORD *)v15 + 64);
        v12 = sub_406E10(*(_DWORD *)(v15 + 4) - 64, *(_DWORD *)(v15 + 4) + 64);
        CPlayer::Teleport(v13, a2, a3, a4, v16, (int)&v11, 0, 0);
      }
      sub_420030(&v14, (int)&v10, 0);
    }
    CIOCriticalSection::Leave(v8 + 48, a2, a3, a4);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D7900: using guessed type int dword_4D7900[];

//----- (0044E940) --------------------------------------------------------
int __userpurge CParty::StoreItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int v6; // ST04_4@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  *(_DWORD *)(v6 + 80) = CBaseList::Push(*(_DWORD *)(v6 + 80), a2, a3, a4, a5);
  CIOCriticalSection::Leave(v6 + 48, a2, a3, a4);
  *(_DWORD *)(a5 + 72) = 0;
  *(_DWORD *)(a5 + 76) = 0;
  *(_DWORD *)(a5 + 68) = 0;
  result = a5;
  *(_DWORD *)(a5 + 56) = 0;
  return result;
}

//----- (0044E9A0) --------------------------------------------------------
int __userpurge CParty::DistributeItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@2
  void *v6; // eax@11
  int v7; // edx@12
  void *v8; // eax@27
  void *v9; // eax@41
  void *v10; // eax@53
  int v11; // eax@57
  int v13; // [sp+0h] [bp-90h]@1
  char v14; // [sp+4h] [bp-8Ch]@53
  char v15; // [sp+8h] [bp-88h]@54
  char v16; // [sp+Ch] [bp-84h]@41
  char v17; // [sp+10h] [bp-80h]@46
  char v18; // [sp+14h] [bp-7Ch]@27
  char v19; // [sp+18h] [bp-78h]@32
  char v20; // [sp+1Ch] [bp-74h]@11
  char v21; // [sp+20h] [bp-70h]@14
  char v22; // [sp+24h] [bp-6Ch]@2
  char v23; // [sp+28h] [bp-68h]@6
  char v24; // [sp+2Ch] [bp-64h]@52
  void *v25; // [sp+30h] [bp-60h]@48
  int v26; // [sp+34h] [bp-5Ch]@42
  char v27; // [sp+38h] [bp-58h]@40
  int v28; // [sp+3Ch] [bp-54h]@40
  int v29; // [sp+40h] [bp-50h]@40
  void *v30; // [sp+44h] [bp-4Ch]@40
  int v31; // [sp+48h] [bp-48h]@28
  char v32; // [sp+4Ch] [bp-44h]@26
  int v33; // [sp+50h] [bp-40h]@26
  int v34; // [sp+54h] [bp-3Ch]@26
  void *v35; // [sp+58h] [bp-38h]@26
  int v36; // [sp+5Ch] [bp-34h]@16
  int v37; // [sp+60h] [bp-30h]@12
  char v38; // [sp+64h] [bp-2Ch]@10
  int v39; // [sp+68h] [bp-28h]@10
  int v40; // [sp+6Ch] [bp-24h]@9
  char v41; // [sp+70h] [bp-20h]@1
  int v42; // [sp+74h] [bp-1Ch]@7
  int v43; // [sp+78h] [bp-18h]@3
  char v44; // [sp+7Ch] [bp-14h]@1
  int v45; // [sp+8Ch] [bp-4h]@7

  v13 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  sub_41C7D0(&v44);
  sub_430C20(v13 + 32, &v41);
  while ( 1 )
  {
    v5 = sub_445B40(v13 + 32, &v22);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    v43 = *(_DWORD *)sub_420010();
    if ( CChar::IsNormal(v43) )
    {
      if ( sub_448870(v43 + 332, a5) <= 640 )
      {
        sub_423980(v43, a2, a3, a4, (volatile LONG *)(v43 + 352));
        sub_41C840((int)&v44, (int)&v43);
      }
    }
    sub_420030(&v41, (int)&v23, 0);
  }
  v42 = *(_DWORD *)(v13 + 80);
  *(_DWORD *)(v13 + 80) = 0;
  CIOCriticalSection::Leave(v13 + 48, a2, a3, a4);
  v45 = sub_418590((int)&v44);
  if ( v45 <= 0 )
  {
    while ( v42 )
    {
      v11 = unknown_libname_7();
      CBase::Delete((void *)v11);
      v42 = CBaseList::Pop(v42, a2, a3, a4);
    }
  }
  else
  {
    while ( v42 )
    {
      v40 = unknown_libname_7();
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)v40 + 164))(v40) )
      {
        v39 = (*(_DWORD *)(v40 + 52) + v45 - 1) / v45;
        sub_430C20((int)&v44, &v38);
        while ( 1 )
        {
          v6 = sub_445B40((int)&v44, &v20);
          if ( !(unsigned __int8)sub_47D070(v6) )
            break;
          v43 = *(_DWORD *)sub_420010();
          v37 = CItem::CreateItem(31, 0, v39, -1);
          *(_DWORD *)(v37 + 80) = 1;
          if ( CPlayer::InsertItem(v43, v7, a2, a3, a4, 25, v37) != 1 )
            CBase::Delete((void *)v37);
          sub_420030(&v38, (int)&v21, 0);
        }
        CBase::Delete((void *)v40);
      }
      else
      {
        v36 = sub_406E10(0, v45 - 1);
        v43 = *(_DWORD *)sub_41C800((int)&v44, v36);
        if ( CPlayer::InsertItem(v43, v40, a2, a3, a4, 25, v40) == 1 )
        {
          if ( (*(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) < 665 || *(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) > 668)
            && (*(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) < 802 || *(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) > 825)
            && (*(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) < 856 || *(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) > 867)
            && *(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) != 688
            || abs(*(_DWORD *)(v43 + 332) - 57367) >= 1000
            || abs(*(_DWORD *)(v43 + 336) - 9077) >= 1001 )
          {
            if ( (*(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) < 673 || *(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) > 687)
              && (*(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) < 826 || *(_DWORD *)(*(_DWORD *)(v40 + 40) + 64) > 855)
              || abs(*(_DWORD *)(v43 + 332) - 20284) >= 1160
              || abs(*(_DWORD *)(v43 + 336) - 67480) >= 1212 )
            {
              v25 = sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bsw");
              CParty::Broadcast(v13, a2, a3, a4, v25, (void *)v43);
            }
            else
            {
              v28 = 634;
              v29 = 2109;
              v30 = sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bsw");
              sub_493440(*(_DWORD *)(v43 + 320), a2, a3, a4, (int)&v28, (int)v30, 38);
              CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v13 + 48), a2, a3, a4);
              sub_430C20(v13 + 32, &v27);
              while ( 1 )
              {
                v9 = sub_445B40(v13 + 32, &v16);
                if ( !(unsigned __int8)sub_47D070(v9) )
                  break;
                v26 = *(_DWORD *)sub_420010();
                if ( v26 != v43 )
                {
                  if ( abs(*(_DWORD *)(v26 + 332) - 20284) < 1160 || abs(*(_DWORD *)(v26 + 336) - 67480) < 1212 )
                    CPlayer::Send((void *)v26, a2, a3, a4, v30);
                }
                sub_420030(&v27, (int)&v17, 0);
              }
              CIOCriticalSection::Leave(v13 + 48, a2, a3, a4);
              CIOBuffer::Release((int)v30);
            }
          }
          else
          {
            v33 = 1793;
            v34 = 284;
            v35 = sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bsw");
            sub_493440(*(_DWORD *)(v43 + 320), a2, a3, a4, (int)&v33, (int)v35, 32);
            CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v13 + 48), a2, a3, a4);
            sub_430C20(v13 + 32, &v32);
            while ( 1 )
            {
              v8 = sub_445B40(v13 + 32, &v18);
              if ( !(unsigned __int8)sub_47D070(v8) )
                break;
              v31 = *(_DWORD *)sub_420010();
              if ( v31 != v43 )
              {
                if ( abs(*(_DWORD *)(v31 + 332) - 57376) > 1024 || abs(*(_DWORD *)(v31 + 336) - 9088) > 1024 )
                  CPlayer::Send((void *)v31, a2, a3, a4, v35);
              }
              sub_420030(&v32, (int)&v19, 0);
            }
            CIOCriticalSection::Leave(v13 + 48, a2, a3, a4);
            CIOBuffer::Release((int)v35);
          }
        }
        else
        {
          CBase::Delete((void *)v40);
        }
      }
      v42 = CBaseList::Pop(v42, a2, a3, a4);
    }
    sub_430C20((int)&v44, &v24);
    while ( 1 )
    {
      v10 = sub_445B40((int)&v44, &v14);
      if ( !(unsigned __int8)sub_47D070(v10) )
        break;
      v43 = *(_DWORD *)sub_420010();
      sub_4239C0(v43, a2, a3, a4, v43 + 352);
      sub_420030(&v24, (int)&v15, 0);
    }
  }
  return sub_44F580(&v44);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044F000) --------------------------------------------------------
void __userpurge CParty::AllotTransformExp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // eax@4
  int v7; // eax@11
  int v8; // [sp+4h] [bp-18h]@1
  char v9; // [sp+8h] [bp-14h]@4
  char v10; // [sp+Ch] [bp-10h]@8
  char v11; // [sp+10h] [bp-Ch]@3
  int v12; // [sp+14h] [bp-8h]@5
  void *v13; // [sp+18h] [bp-4h]@3

  v8 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( sub_44FD40(a5, *(_DWORD *)(v8 + 24)) >= 3 )
  {
    v13 = 0;
    sub_430C20(v8 + 32, &v11);
    while ( 1 )
    {
      v6 = sub_445B40(v8 + 32, &v9);
      if ( !(unsigned __int8)sub_47D070(v6) )
        break;
      v12 = *(_DWORD *)sub_420010();
      if ( CChar::IsNormal(v12) )
      {
        if ( sub_448870(v12 + 332, a6) <= 640 )
          v13 = CBaseList::Push((int)v13, a2, a3, a4, v12);
      }
      sub_420030(&v11, (int)&v10, 0);
    }
    CIOCriticalSection::Leave(v8 + 48, a2, a3, a4);
    while ( v13 )
    {
      v7 = unknown_libname_7();
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v7 + 188))(v7, 0);
      v13 = (void *)CBaseList::Pop((int)v13, a2, a3, a4);
    }
  }
  else
  {
    CIOCriticalSection::Leave(v8 + 48, a2, a3, a4);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044F110) --------------------------------------------------------
void __userpurge CParty::Healing(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9)
{
  void *v9; // eax@3
  int v10; // ST24_4@15
  int v11; // [sp+4h] [bp-1Ch]@12
  int v12; // [sp+8h] [bp-18h]@1
  char v13; // [sp+Ch] [bp-14h]@3
  char v14; // [sp+10h] [bp-10h]@2
  char v15; // [sp+14h] [bp-Ch]@1
  int v16; // [sp+18h] [bp-8h]@1
  void *v17; // [sp+1Ch] [bp-4h]@1

  v12 = a1;
  v17 = 0;
  v16 = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  sub_430C20(v12 + 32, &v15);
  while ( 1 )
  {
    v9 = sub_445B40(v12 + 32, &v13);
    if ( !(unsigned __int8)sub_47D070(v9) )
      break;
    v16 = *(_DWORD *)sub_420010();
    if ( CChar::IsNormal(v16) )
    {
      if ( sub_448870(a5 + 332, v16 + 332) <= 128 )
        v17 = CBaseList::Push((int)v17, a2, a3, a4, v16);
    }
    sub_420030(&v15, (int)&v14, 0);
  }
  CIOCriticalSection::Leave(v12 + 48, a2, a3, a4);
  while ( v17 )
  {
    v16 = unknown_libname_7();
    if ( a6 )
      v11 = a7 * CChar::GetMaxHP(v16) / 100;
    else
      v11 = a7;
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v16 + 88))(v16, 7, 1, v11);
    if ( a6 )
      v10 = a7 * CChar::GetMaxHP(v16) / 100;
    std___Mpunct_wchar_t___do_frac_digits(v16);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
    v17 = (void *)CBaseList::Pop((int)v17, a2, a3, a4);
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044F290) --------------------------------------------------------
int __userpurge CParty::Chant<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@12
  int result; // eax@13
  int v8; // [sp+4h] [bp-8h]@4
  int i; // [sp+8h] [bp-4h]@1

  for ( i = CParty::GetPlayerList(a1, a2, a3, a4); i; i = CBaseList::Pop(i, a2, a3, a4) )
  {
    v8 = unknown_libname_7();
    CChar::CancelBuff(v8, a2, a3, a4, *(_DWORD *)(a6 + 4));
    if ( v8 != a5 )
    {
      if ( *(_DWORD *)(v8 + 584) == *(_DWORD *)(a6 + 4) )
        *(_DWORD *)(v8 + 584) = 0;
    }
    if ( *(_DWORD *)(a5 + 584) )
      CChar::CancelBuff(v8, a2, a3, a4, *(_DWORD *)(a5 + 584));
    if ( CChar::IsNormal(v8) )
    {
      if ( sub_448870(a5 + 332, v8 + 332) <= 64 )
      {
        v6 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a6 + 20))(a6);
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 180))(v8, v6);
      }
    }
  }
  result = a5;
  *(_DWORD *)(a5 + 584) = *(_DWORD *)(a6 + 4);
  return result;
}

//----- (0044F390) --------------------------------------------------------
int __usercall CParty::GetPlayerList<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  int v6; // ST04_4@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  v6 = CParty::_GetPlayerList(v5, a2, a3, a4);
  CIOCriticalSection::Leave(v5 + 48, a2, a3, a4);
  return v6;
}

//----- (0044F3D0) --------------------------------------------------------
int __usercall CParty::_GetPlayerList<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v5; // eax@3
  int v7; // [sp+0h] [bp-14h]@1
  char v8; // [sp+4h] [bp-10h]@2
  char v9; // [sp+8h] [bp-Ch]@3
  char v10; // [sp+Ch] [bp-8h]@1
  int v11; // [sp+10h] [bp-4h]@1

  v7 = a1;
  v11 = 0;
  sub_430C20(a1 + 32, &v10);
  while ( 1 )
  {
    v4 = sub_445B40(v7 + 32, &v8);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v5 = sub_420010();
    v11 = (int)CBaseList::Push(v11, a2, a3, a4, *(_DWORD *)v5);
    sub_420030(&v10, (int)&v9, 0);
  }
  return v11;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044F440) --------------------------------------------------------
int __userpurge CParty::GetLuckySize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@3
  void *v6; // eax@9
  int v7; // eax@10
  int v9; // [sp+10h] [bp-24h]@1
  char v10; // [sp+14h] [bp-20h]@9
  char v11; // [sp+18h] [bp-1Ch]@12
  char v12; // [sp+1Ch] [bp-18h]@3
  char v13; // [sp+20h] [bp-14h]@6
  char v14; // [sp+24h] [bp-10h]@8
  char v15; // [sp+28h] [bp-Ch]@2
  int v16; // [sp+2Ch] [bp-8h]@4
  int v17; // [sp+30h] [bp-4h]@1

  v9 = a1;
  v17 = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 48), a2, a3, a4);
  if ( a5 )
  {
    sub_430C20(v9 + 32, &v15);
    while ( 1 )
    {
      v5 = sub_445B40(v9 + 32, &v12);
      if ( !(unsigned __int8)sub_47D070(v5) )
        break;
      v16 = *(_DWORD *)sub_420010();
      if ( CChar::IsBState(v16, 33554432i64) )
      {
        std___Mpunct_wchar_t___do_frac_digits(v16);
        CChar::WriteInRect(a2, a3, a4, v16, 73, 15, (unsigned int)"db");
        ++v17;
      }
      sub_420030(&v15, (int)&v13, 0);
    }
  }
  else
  {
    sub_430C20(v9 + 32, &v14);
    while ( 1 )
    {
      v6 = sub_445B40(v9 + 32, &v10);
      if ( !(unsigned __int8)sub_47D070(v6) )
        break;
      v7 = sub_420010();
      if ( CChar::IsBState(*(_DWORD *)v7, 33554432i64) )
        ++v17;
      sub_420030(&v14, (int)&v11, 0);
    }
  }
  CIOCriticalSection::Leave(v9 + 48, a2, a3, a4);
  return v17;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044F580) --------------------------------------------------------
int __thiscall sub_44F580(int this)
{
  return sub_44F750(this);
}
// 44F580: using guessed type int __thiscall sub_44F580(_DWORD);

//----- (0044F5A0) --------------------------------------------------------
int __thiscall sub_44F5A0(int this, int a2, void *a3)
{
  int v4; // ST0C_4@1

  v4 = this;
  sub_44F9D0((char *)a3 + 4, *(_DWORD *)(this + 8), a3);
  sub_44F720(*(_DWORD *)(v4 + 8) - 4, *(_DWORD *)(v4 + 8));
  *(_DWORD *)(v4 + 8) -= 4;
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (0044F600) --------------------------------------------------------
int __thiscall sub_44F600(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472C30(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_44F810(v3, &v4, v5, v6);
  return v7;
}

//----- (0044F660) --------------------------------------------------------
int __thiscall sub_44F660(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 2;
  else
    v2 = 0;
  return v2;
}

//----- (0044F6A0) --------------------------------------------------------
char __thiscall sub_44F6A0(int this, int a2)
{
  char result; // al@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  if ( a2 )
  {
    if ( sub_41CB60() >= (unsigned int)a2 )
    {
      *(_DWORD *)(v3 + 4) = sub_41CE40(a2);
      *(_DWORD *)(v3 + 8) = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v3 + 12) = *(_DWORD *)(v3 + 4) + 4 * a2;
    }
    else
    {
      sub_446B00();
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0044F720) --------------------------------------------------------
int __stdcall sub_44F720(int a1, int a2)
{
  return sub_44FA10(a1, a2);
}

//----- (0044F750) --------------------------------------------------------
int __thiscall sub_44F750(int this)
{
  int result; // eax@3
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  if ( *(_DWORD *)(this + 4) )
  {
    sub_44F720(*(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
    sub_4338F0(*(_DWORD *)(v2 + 4), (*(_DWORD *)(v2 + 12) - *(_DWORD *)(v2 + 4)) >> 2);
  }
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  result = v2;
  *(_DWORD *)(v2 + 12) = 0;
  return result;
}

//----- (0044F7C0) --------------------------------------------------------
void *__thiscall sub_44F7C0(void *this, char a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std___Init_locks__operator_(&a2);
  return v3;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0044F7E0) --------------------------------------------------------
int __thiscall sub_44F7E0(void *this, int a2, int a3)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = *(_DWORD *)this;
  *(_DWORD *)a2 = *(_DWORD *)sub_41CE60(&v4, a3);
  return a2;
}

//----- (0044F810) --------------------------------------------------------
void *__thiscall sub_44F810(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_44F8D0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0044F8B0) --------------------------------------------------------
int __thiscall sub_44F8B0(int *this)
{
  return sub_433930(this);
}

//----- (0044F8D0) --------------------------------------------------------
int __thiscall sub_44F8D0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_44F930(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 44F930: using guessed type _DWORD __stdcall sub_44F930(_DWORD);

//----- (0044F930) --------------------------------------------------------
int __stdcall sub_44F930(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_44F930(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 44F930: using guessed type _DWORD __stdcall sub_44F930(_DWORD);

//----- (0044F9B0) --------------------------------------------------------
int __cdecl sub_44F9B0(int a1, int a2)
{
  *(_DWORD *)a1 = a2;
  return a1 + 4;
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (0044F9D0) --------------------------------------------------------
char *__cdecl sub_44F9D0(const void *a1, int a2, void *a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(a1, a3);
  return sub_41CFC0(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FA10) --------------------------------------------------------
int __cdecl sub_44FA10(int a1, int a2)
{
  char v3; // al@1

  v3 = unknown_libname_6(a1, a2);
  return _initp_misc_winxfltr();
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FA50) --------------------------------------------------------
int __cdecl sub_44FA50(int a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(a1, a1);
  return sub_41CF60(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FA90) --------------------------------------------------------
int __cdecl sub_44FA90(int a1, int a2, int a3)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    *(_DWORD *)a1 = *(_DWORD *)a3;
    result = a1 + 4;
    a1 += 4;
  }
  return result;
}

//----- (0044FAC0) --------------------------------------------------------
void *__cdecl sub_44FAC0(const void *a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(a1, a3);
  return sub_41CF80(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FB00) --------------------------------------------------------
void *__cdecl sub_44FB00(int a1)
{
  return sub_401000(4 * a1);
}

//----- (0044FB20) --------------------------------------------------------
char *__cdecl sub_44FB20(const void *a1, int a2, void *a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(a1, a3);
  return sub_41CFC0(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0044FB60) --------------------------------------------------------
int __cdecl sub_44FB60(int a1, int a2, int a3)
{
  int result; // eax@2

  while ( a2 )
  {
    *(_DWORD *)a1 = *(_DWORD *)a3;
    result = a2-- - 1;
    a1 += 4;
  }
  return result;
}

//----- (0044FB90) --------------------------------------------------------
void *__thiscall sub_44FB90(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0044FBC0) --------------------------------------------------------
void *__thiscall sub_44FBC0(void *this, int a2, char a3)
{
  void *v4; // ST04_4@1

  v4 = this;
  LOBYTE(this) = *(_BYTE *)a2;
  std___Init_locks__operator_(this);
  std___Init_locks__operator_(&a3);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0044FBF0) --------------------------------------------------------
int __thiscall sub_44FBF0(int this)
{
  return sub_44FC10(this);
}

//----- (0044FC10) --------------------------------------------------------
int __thiscall sub_44FC10(int this)
{
  return sub_44FC30(this);
}

//----- (0044FC30) --------------------------------------------------------
int __thiscall sub_44FC30(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_44F810(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0044FCE0) --------------------------------------------------------
void *__usercall sub_44FCE0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5)
{
  void *v6; // eax@1
  void *v7; // ST14_4@1
  void *v8; // ST08_4@1

  v6 = CIOBuffer::Alloc();
  v7 = v6;
  v8 = v6;
  *((_BYTE *)v6 + 2) = a4;
  *(_WORD *)v8 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)v6 + 3, (int)&a5) - (_WORD)v8;
  *((_DWORD *)v7 + 2000) = *(_WORD *)v8;
  return v7;
}

//----- (0044FD40) --------------------------------------------------------
int __cdecl sub_44FD40(int a1, int a2)
{
  int result; // eax@5
  int v3; // [sp+0h] [bp-Ch]@7
  int v4; // [sp+4h] [bp-8h]@3
  int v5; // [sp+8h] [bp-4h]@1

  v5 = a1 - a2;
  if ( a1 - a2 < 0 )
  {
    if ( abs(v5) >= 20 )
      v3 = 20;
    else
      v3 = abs(v5);
    result = *(int *)((char *)&dword_4E2F18[21 * (a2 - 1) / 10] + 4 * v3);
  }
  else
  {
    if ( v5 >= 20 )
      v4 = 20;
    else
      v4 = a1 - a2;
    result = *(int *)((char *)&dword_4E3260[21 * (a2 - 1) / 10] + 4 * v4);
  }
  return result;
}
// 4E2F18: using guessed type int dword_4E2F18[];
// 4E3260: using guessed type int dword_4E3260[];

//----- (0044FDD0) --------------------------------------------------------
void __userpurge CPlayerObject::OnTimer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST18_4@7
  int v6; // ST10_4@13
  int v7; // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+Ch] [bp-14h]@11
  int v9; // [sp+14h] [bp-Ch]@5
  int v10; // [sp+18h] [bp-8h]@5
  DWORD v11; // [sp+1Ch] [bp-4h]@4

  v7 = a1;
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a2, a3, a4);
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a2, a3, a4);
      CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
      CIOCriticalSection::Leave((int)&unk_4E2098, a2, a3, a4);
      v8 = dword_4E2004;
      while ( (int *)v8 != &dword_4E2004 )
      {
        v6 = v8 - 428;
        v8 = *(_DWORD *)v8;
        CPlayer::Tick(v6, a2, a3, a4);
      }
      CIOCriticalSection::Leave((int)&unk_4E2078, a2, a3, a4);
      CIOObject::AddTimer(v7, a2, a3, a4, 1000, 1);
    }
  }
  else
  {
    v11 = GetTickCount();
    do
    {
      v10 = v11 + 30;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a2, a3, a4);
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a2, a3, a4);
      CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
      CIOCriticalSection::Leave((int)&unk_4E2098, a2, a3, a4);
      v9 = dword_4E2004;
      while ( (int *)v9 != &dword_4E2004 )
      {
        v5 = v9 - 428;
        v9 = *(_DWORD *)v9;
        CPlayer::AI(v5, a2, a3, a4);
      }
      CIOCriticalSection::Leave((int)&unk_4E2078, a2, a3, a4);
      v11 = GetTickCount();
    }
    while ( v10 <= v11 );
    CIOObject::AddTimer(v7, a2, a3, a4, v10 - v11, 0);
  }
}
// 4E2004: using guessed type int dword_4E2004;

//----- (0044FF20) --------------------------------------------------------
int __userpurge CPlayer::CPlayer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v8; // ST0C_4@1

  v8 = a1;
  CChar::CChar(a1);
  *(_DWORD *)v8 = &off_4BA660;
  sub_47F450(v8 + 624);
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v8 + 1020));
  sub_4706F0((void *)(v8 + 1068));
  sub_4707A0((void *)(v8 + 1080));
  sub_470840((void *)(v8 + 1128));
  sub_470AA0((void *)(v8 + 1140));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v8 + 1224));
  sub_471580((void *)(v8 + 1256));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v8 + 1308));
  sub_4718D0((void *)(v8 + 1352));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v8 + 1364));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v8 + 1396));
  sub_471980((void *)(v8 + 1428));
  sub_471CD0((void *)(v8 + 1500));
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v8 + 1644));
  *(_DWORD *)(v8 + 440) = 0;
  *(_DWORD *)(v8 + 444) = 0;
  *(_DWORD *)(v8 + 24) = 1;
  CIOObject::AddRef(a5, a2, a3, a4);
  *(_DWORD *)(v8 + 1676) = a5;
  *(_DWORD *)(v8 + 448) = a6;
  *(_DWORD *)(v8 + 452) = a7;
  *(_DWORD *)(v8 + 456) = 0;
  *(_DWORD *)(v8 + 460) = 0;
  *(_DWORD *)(v8 + 464) = 0;
  *(_DWORD *)(v8 + 468) = 0;
  *(_DWORD *)(v8 + 472) = 0;
  *(_DWORD *)(v8 + 476) = 0;
  *(_DWORD *)(v8 + 480) = 0;
  *(_DWORD *)(v8 + 484) = 0;
  *(_DWORD *)(v8 + 488) = 0;
  memset((void *)(v8 + 492), 0, 0x11u);
  *(_DWORD *)(v8 + 512) = 0;
  *(_DWORD *)(v8 + 516) = 0;
  memset((void *)(v8 + 520), 0, 0xFu);
  *(_DWORD *)(v8 + 536) = 0;
  *(_DWORD *)(v8 + 540) = 0;
  *(_DWORD *)(v8 + 544) = 0;
  *(_DWORD *)(v8 + 548) = 0;
  *(_DWORD *)(v8 + 552) = 0;
  *(_DWORD *)(v8 + 556) = 0;
  *(_DWORD *)(v8 + 560) = 0;
  *(_DWORD *)(v8 + 564) = 0;
  *(_DWORD *)(v8 + 568) = 0;
  *(_DWORD *)(v8 + 572) = 0;
  *(_DWORD *)(v8 + 576) = 0;
  *(_DWORD *)(v8 + 580) = 0;
  *(_DWORD *)(v8 + 584) = 0;
  *(_DWORD *)(v8 + 588) = 0;
  *(_DWORD *)(v8 + 592) = 0;
  *(_DWORD *)(v8 + 596) = 0;
  *(_DWORD *)(v8 + 600) = 0;
  *(_DWORD *)(v8 + 604) = 0;
  *(_DWORD *)(v8 + 608) = 0;
  *(_DWORD *)(v8 + 612) = 0;
  *(_DWORD *)(v8 + 616) = 0;
  *(_DWORD *)(v8 + 620) = 0;
  *(_DWORD *)(v8 + 1016) = 0;
  memset((void *)(v8 + 1052), 0, 0xEu);
  *(_DWORD *)(v8 + 1096) = 0;
  *(_DWORD *)(v8 + 1100) = 0;
  *(_DWORD *)(v8 + 1104) = 0;
  *(_DWORD *)(v8 + 1108) = 0;
  *(_DWORD *)(v8 + 1112) = 0;
  *(_DWORD *)(v8 + 1116) = 0;
  *(_DWORD *)(v8 + 1120) = -1;
  *(_DWORD *)(v8 + 1124) = 0;
  memset((void *)(v8 + 1152), 0, 0x41u);
  *(_DWORD *)(v8 + 1220) = 0;
  *(_DWORD *)(v8 + 1440) = 0;
  *(_DWORD *)(v8 + 1476) = GetTickCount();
  *(_DWORD *)(v8 + 1472) = *(_DWORD *)(v8 + 1476);
  *(_DWORD *)(v8 + 1448) = *(_DWORD *)(v8 + 1472);
  *(_DWORD *)(v8 + 1444) = *(_DWORD *)(v8 + 1448);
  *(_DWORD *)(v8 + 1456) = *(_DWORD *)(v8 + 1444);
  *(_DWORD *)(v8 + 1460) = *(_DWORD *)(v8 + 1456);
  *(_DWORD *)(v8 + 1480) = *(_DWORD *)(v8 + 1460);
  *(_DWORD *)(v8 + 1464) = 0;
  *(_DWORD *)(v8 + 1468) = 0;
  *(_DWORD *)(v8 + 1484) = GetTickCount() + 1800000;
  *(_DWORD *)(v8 + 1488) = 0;
  *(_DWORD *)(v8 + 1496) = -1;
  *(_DWORD *)(v8 + 1492) = -1;
  *(_DWORD *)(v8 + 1512) = 0;
  *(_DWORD *)(v8 + 1516) = 0;
  *(_DWORD *)(v8 + 1520) = 0;
  *(_DWORD *)(v8 + 1268) = 0;
  *(_DWORD *)(v8 + 1300) = 0;
  *(_DWORD *)(v8 + 1304) = 0;
  *(_DWORD *)(v8 + 1340) = 0;
  *(_DWORD *)(v8 + 1344) = 0;
  *(_DWORD *)(v8 + 1348) = 0;
  *(_DWORD *)(v8 + 1636) = 0;
  *(_DWORD *)(v8 + 1640) = 0;
  CPlayer::InitGambleInfo(v8);
  return v8;
}
// 4BA660: using guessed type int (__stdcall *off_4BA660)(int);

//----- (00450460) --------------------------------------------------------
void __userpurge CPlayer::SendPacket(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  CPlayer::Send(a1, a2, a3, a4, a5);
}

//----- (00450480) --------------------------------------------------------
void __userpurge CPlayer::SendMove(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, void *a2, void *a3)
{
  if ( this != a2 )
    CPlayer::Send(this, ebx0, edi0, a4, a3);
}

//----- (004504B0) --------------------------------------------------------
int __thiscall CPlayer::InitGambleInfo(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1

  v2 = this;
  memset((void *)(this + 1524), -1, 0x60u);
  *(_DWORD *)(v2 + 1620) = 0;
  memset((void *)(v2 + 1624), -1, 8u);
  result = v2;
  *(_DWORD *)(v2 + 1632) = 0;
  return result;
}

//----- (00450500) --------------------------------------------------------
int __userpurge CPlayer::_scalar_deleting_destructor_<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)a1;
  CPlayer::_CPlayer(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00450530) --------------------------------------------------------
int __usercall CPlayer::_CPlayer<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = (int)a1;
  *(_DWORD *)a1 = &off_4BA660;
  CPlayer::EventRemoveAll(a1);
  CPlayer::MLMDeleteAll(v5, a2, a3, a4);
  if ( *(_DWORD *)(v5 + 1676) )
    CIOObject::Release(*(_DWORD *)(v5 + 1676), a2, a3, a4);
  CIOCriticalSection::_CIOCriticalSection(v5 + 1644, a2, a3, a4);
  sub_450710(v5 + 1500);
  sub_4506F0(v5 + 1428);
  CIOCriticalSection::_CIOCriticalSection(v5 + 1396, a2, a3, a4);
  CIOCriticalSection::_CIOCriticalSection(v5 + 1364, a2, a3, a4);
  sub_4506D0(v5 + 1352);
  CIOCriticalSection::_CIOCriticalSection(v5 + 1308, a2, a3, a4);
  sub_4506B0(v5 + 1256);
  CIOCriticalSection::_CIOCriticalSection(v5 + 1224, a2, a3, a4);
  sub_450690(v5 + 1140);
  sub_450670(v5 + 1128);
  sub_445BF0(v5 + 1080);
  sub_450650(v5 + 1068);
  CIOCriticalSection::_CIOCriticalSection(v5 + 1020, a2, a3, a4);
  sub_47F4D0((void *)(v5 + 624));
  return CChar::_CChar(v5, a2, a3, a4);
}
// 4BA660: using guessed type int (__stdcall *off_4BA660)(int);

//----- (00450650) --------------------------------------------------------
int __thiscall sub_450650(int this)
{
  return sub_470720(this);
}

//----- (00450670) --------------------------------------------------------
int __thiscall sub_450670(int this)
{
  return sub_470870(this);
}

//----- (00450690) --------------------------------------------------------
int __thiscall sub_450690(int this)
{
  return sub_470AD0(this);
}

//----- (004506B0) --------------------------------------------------------
int __thiscall sub_4506B0(int this)
{
  return sub_4715B0(this);
}

//----- (004506D0) --------------------------------------------------------
int __thiscall sub_4506D0(int this)
{
  return sub_471900(this);
}

//----- (004506F0) --------------------------------------------------------
int __thiscall sub_4506F0(int this)
{
  return sub_4719B0(this);
}

//----- (00450710) --------------------------------------------------------
int __thiscall sub_450710(int this)
{
  return sub_471D00(this);
}

//----- (00450730) --------------------------------------------------------
void __usercall CPlayer::Start(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  signed int i; // [sp+0h] [bp-4h]@1

  for ( i = 0; i < 2; ++i )
    CLink::Initialize((void *)(8 * i + 5120004));
  dword_4E2000 = 0;
  dword_4E1FF0 = 60;
  CIOObject::AddTimer((int)&unk_4E20F4, a1, a2, a3, 1000, 1);
}
// 4E1FF0: using guessed type int dword_4E1FF0;

//----- (00450790) --------------------------------------------------------
int __usercall CPlayer::ScanPlayer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v7 = 0;
  sub_47DE70((volatile LONG *)&unk_4E202C);
  sub_44AE20((int)&unk_4E2068, (int)&v8, (int)&a4);
  v4 = sub_430C20((int)&unk_4E2068, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v7 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
    sub_423980(v7, a1, a2, a3, (volatile LONG *)(v7 + 352));
  }
  sub_47E080((volatile LONG *)&unk_4E202C, a1, a2, a3);
  return v7;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00450810) --------------------------------------------------------
int __usercall sub_450810<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-10h]@1
  int v7; // [sp+4h] [bp-Ch]@1
  int v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E202C);
  v7 = a4;
  sub_44AE20((int)&unk_4E2020, (int)&v9, (int)&v7);
  v4 = sub_430C20((int)&unk_4E2020, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v8 = *(_DWORD *)(sub_420250((int *)&v9) + 4);
    sub_423980(v8, a1, a2, a3, (volatile LONG *)(v8 + 352));
  }
  sub_47E080((volatile LONG *)&unk_4E202C, a1, a2, a3);
  return v8;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00450890) --------------------------------------------------------
int __usercall CPlayer::FindPlayer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v7 = 0;
  sub_47DE70((volatile LONG *)&unk_4E2050);
  sub_470660((int)&unk_4E2044, (int)&v8, (const char **)&a4);
  v4 = sub_430C20((int)&unk_4E2044, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v7 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
    sub_423980(v7, a1, a2, a3, (volatile LONG *)(v7 + 352));
  }
  sub_47E080((volatile LONG *)&unk_4E2050, a1, a2, a3);
  return v7;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00450910) --------------------------------------------------------
LONG __usercall CPlayer::WriteAll<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, char a5)
{
  int i; // [sp+4h] [bp-14h]@1
  int v7; // [sp+14h] [bp-4h]@1

  v7 = (int)CIOBuffer::Alloc();
  *(_BYTE *)(v7 + 2) = a4;
  *(_WORD *)v7 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)(v7 + 3), (int)&a5) - v7;
  *(_DWORD *)(v7 + 8000) = *(_WORD *)v7;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a1, a2, a3);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a1, a2, a3);
  CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((int)&unk_4E2098, a1, a2, a3);
  for ( i = dword_4E2004; (int *)i != &dword_4E2004; i = *(_DWORD *)i )
    CPlayer::Send((void *)(i - 428), a1, a2, a3, (void *)v7);
  CIOCriticalSection::Leave((int)&unk_4E2078, a1, a2, a3);
  return CIOBuffer::Release(v7);
}
// 4E2004: using guessed type int dword_4E2004;

//----- (004509F0) --------------------------------------------------------
LONG __usercall CPlayer::WriteInMap<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6)
{
  int i; // [sp+4h] [bp-14h]@1
  int v8; // [sp+14h] [bp-4h]@1

  v8 = (int)CIOBuffer::Alloc();
  *(_BYTE *)(v8 + 2) = a5;
  *(_WORD *)v8 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)(v8 + 3), (int)&a6) - v8;
  *(_DWORD *)(v8 + 8000) = *(_WORD *)v8;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a1, a2, a3);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a1, a2, a3);
  CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((int)&unk_4E2098, a1, a2, a3);
  for ( i = dword_4E2004; (int *)i != &dword_4E2004; i = *(_DWORD *)i )
  {
    if ( *(_DWORD *)(i - 428 + 316) == a4 )
      CPlayer::Send((void *)(i - 428), a1, a2, a3, (void *)v8);
  }
  CIOCriticalSection::Leave((int)&unk_4E2078, a1, a2, a3);
  return CIOBuffer::Release(v8);
}
// 4E2004: using guessed type int dword_4E2004;

//----- (00450AD0) --------------------------------------------------------
void __usercall CPlayer::LogPlayerStatistic(DWORD a1<ebx>, DWORD a2<esi>)
{
  signed int j; // [sp+4h] [bp-118h]@9
  int v3; // [sp+8h] [bp-114h]@4
  int v4; // [sp+Ch] [bp-110h]@3
  int i; // [sp+10h] [bp-10Ch]@1
  int v6; // [sp+14h] [bp-108h]@1
  int v7; // [sp+18h] [bp-104h]@1
  int v8; // [sp+1Ch] [bp-100h]@11
  int v9; // [sp+20h] [bp-FCh]@4
  int v10; // [sp+24h] [bp-F8h]@5
  int v11[55]; // [sp+28h] [bp-F4h]@7
  char v12[4]; // [sp+104h] [bp-18h]@11
  int v13; // [sp+108h] [bp-14h]@11
  int v14; // [sp+10Ch] [bp-10h]@11
  int v15; // [sp+110h] [bp-Ch]@11
  char v16[4]; // [sp+114h] [bp-8h]@11
  int v17; // [sp+118h] [bp-4h]@11
  _DWORD v18; // [sp+11Ch] [bp+0h]@1

  v6 = 0;
  memset(&v7, 0, 0x104u);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a1, (DWORD)&v18, a2);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a1, (DWORD)&v18, a2);
  CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((int)&unk_4E2098, a1, (DWORD)&v18, a2);
  for ( i = dword_4E2004; (int *)i != &dword_4E2004; i = *(_DWORD *)i )
  {
    v4 = i - 428;
    if ( *(_DWORD *)(i - 428 + 60) <= 100 )
    {
      v3 = (*(_DWORD *)(v4 + 60) - 1) / 10;
      ++*(int *)((char *)&v6 + 6 * v3 + 4 * *(_DWORD *)(v4 + 460));
      ++*(&v9 + 6 * v3);
      if ( CChar::IsGState(v4, 32) )
        ++*(&v10 + 6 * v3);
      if ( CChar::IsGState(v4, 16) )
        ++v11[6 * v3];
    }
  }
  CIOCriticalSection::Leave((int)&unk_4E2078, a1, (DWORD)&v18, a2);
  for ( j = 0; j < 10; ++j )
  {
    sub_432890(
      "##%02d ~ %02d : %d %d %d : %d",
      10 * j + 1,
      10 * j + 10,
      *(&v6 + 6 * j),
      *(&v7 + 6 * j),
      *(&v8 + 6 * j),
      *(&v9 + 6 * j));
    sub_432890("@@%02d ~ %02d : %d %d", 10 * j + 1, 10 * j + 10, *(&v10 + 6 * j), v11[6 * j]);
    *(_DWORD *)v12 += *(&v6 + 6 * j);
    v13 += *(&v7 + 6 * j);
    v14 += *(&v8 + 6 * j);
    v15 += *(&v9 + 6 * j);
    *(_DWORD *)v16 += *(&v10 + 6 * j);
    v17 += v11[6 * j];
  }
  sub_432890("##Total Sum : %d %d %d : %d", *(_DWORD *)v12, v13, v14, v15);
  sub_432890("@@Total Sum : %d %d", *(_DWORD *)v16, v17);
  sub_432890("$$Currency Increment : %d", dword_4E2014);
  CDBSocket::Write(a1, (DWORD)&v18, a2, 74, (unsigned int)"ddddddd");
}
// 450AD0: too many cbuild loops
// 4E2004: using guessed type int dword_4E2004;
// 450AD0: using guessed type int var_F4[55];

//----- (00450E40) --------------------------------------------------------
int __usercall CPlayer::OnFree<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CBase::OnFree(a1, a2, a3, a4);
}

//----- (00450E60) --------------------------------------------------------
int __usercall CPlayer::OnDelete<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  const void *v4; // esi@16
  const void *v5; // esi@18
  const void *v6; // esi@21
  const void *v7; // esi@25
  void *v8; // eax@28
  void *v9; // eax@29
  void *v10; // eax@31
  void *v11; // eax@33
  void *v12; // eax@35
  int v13; // eax@36
  int v15; // [sp+0h] [bp-4Ch]@28
  int v16; // [sp+4h] [bp-48h]@28
  int v17; // [sp+8h] [bp-44h]@1
  char v18; // [sp+Ch] [bp-40h]@36
  char v19; // [sp+10h] [bp-3Ch]@35
  char v20; // [sp+14h] [bp-38h]@34
  int v21; // [sp+18h] [bp-34h]@16
  int v22; // [sp+1Ch] [bp-30h]@27
  int v23; // [sp+20h] [bp-2Ch]@27
  int v24; // [sp+24h] [bp-28h]@27
  int v25; // [sp+28h] [bp-24h]@19
  int v26; // [sp+2Ch] [bp-20h]@16
  int v27; // [sp+30h] [bp-1Ch]@21
  int v28; // [sp+34h] [bp-18h]@10
  int v29; // [sp+38h] [bp-14h]@7
  int v30; // [sp+3Ch] [bp-10h]@6
  int v31; // [sp+40h] [bp-Ch]@4
  int v32; // [sp+44h] [bp-8h]@36
  int v33; // [sp+48h] [bp-4h]@2

  v17 = a1;
  CChar::Lock(a1, a2, a3, a4);
  if ( CPlayer::IsPBit(v17, 3) )
  {
    v33 = *(_DWORD *)(v17 + 1100);
    if ( v33 )
    {
      CIOObject::AddRef(v33, a2, a3, a4);
      CChar::Unlock(v17, a2, a3, a4);
      CBase::Delete((void *)v33);
      CIOObject::Release(v33, a2, a3, a4);
      CChar::Lock(v17, a2, a3, a4);
    }
    v31 = *(_DWORD *)(v17 + 484);
    if ( v31 )
    {
      sub_423980(v31, a2, a3, a4, (volatile LONG *)(v31 + 40));
      CChar::Unlock(v17, a2, a3, a4);
      CGuild::Logout(v31, a2, a3, a4, v17);
      sub_4239C0(v31, a2, a3, a4, v31 + 40);
      CChar::Lock(v17, a2, a3, a4);
    }
    v30 = *(_DWORD *)(v17 + 1016);
    if ( v30 )
    {
      *(_DWORD *)(v17 + 1016) = 0;
      v29 = CParty::FindParty(a2, a3, a4, v30);
      if ( v29 )
      {
        CParty::Leave(v29, a2, a3, a4, v17);
        CIOObject::Release(v29, a2, a3, a4);
      }
    }
    if ( CChar::IsGState(v17, 128) )
    {
      v28 = *(_DWORD *)(v17 + 1516);
      if ( !v28 )
        sub_422D80(v17, a2, a3, a4);
      CPlayer::EndPvP(v17, a2, a3, a4, v28, 3, 2, 6);
    }
    else
    {
      if ( !CPlayer::IsEState(v17, 16) )
      {
        if ( CChar::IsGState(v17, 2) )
        {
          if ( CPlayer::IsEState(v17, 256) )
          {
            *(_DWORD *)(v17 + 272) = CChar::GetMaxHP(v17);
            v4 = &dword_4D77C8[7 * *(_DWORD *)(v17 + 572)];
            memcpy(&v21, v4, 0x1Cu);
            a4 = (DWORD)((char *)v4 + 28);
            a3 = (DWORD)&v28;
            if ( v26 )
            {
              CChar::Unlock(v17, a2, (DWORD)&v28, a4);
              if ( CGuild::IsWarringPeriod() )
              {
                if ( !CCastle::IsGateAlive(a2, (DWORD)&v28, a4, v25, v26) )
                {
                  if ( CPlayer::IsDefenseSide(v17, a2, (DWORD)&v28, a4, v25) )
                  {
                    *(_DWORD *)(v17 + 572) = v27;
                    v6 = &dword_4D77C8[7 * *(_DWORD *)(v17 + 572)];
                    memcpy(&v21, v6, 0x1Cu);
                    a4 = (DWORD)((char *)v6 + 28);
                    a3 = (DWORD)&v28;
                  }
                }
              }
              else
              {
                *(_DWORD *)(v17 + 572) = 0;
                v5 = &dword_4D77C8[7 * *(_DWORD *)(v17 + 572)];
                memcpy(&v21, v5, 0x1Cu);
                a4 = (DWORD)((char *)v5 + 28);
                a3 = (DWORD)&v28;
              }
              CChar::Lock(v17, a2, a3, a4);
            }
            else
            {
              if ( v25 )
              {
                CChar::Unlock(v17, a2, (DWORD)&v28, a4);
                if ( !CPlayer::IsDefenseSide(v17, a2, (DWORD)&v28, a4, v25) )
                {
                  *(_DWORD *)(v17 + 572) = 0;
                  v7 = &dword_4D77C8[7 * *(_DWORD *)(v17 + 572)];
                  memcpy(&v21, v7, 0x1Cu);
                  a4 = (DWORD)((char *)v7 + 28);
                  a3 = (DWORD)&v28;
                }
                CChar::Lock(v17, a2, a3, a4);
              }
            }
            *(_DWORD *)(v17 + 316) = v21;
            *(_DWORD *)(v17 + 332) = v22;
            *(_DWORD *)(v17 + 336) = v23;
            *(_DWORD *)(v17 + 340) = v24;
            CPlayer::SubEState(v17, 256);
          }
          else
          {
            v8 = CBuff::CreateBuff(65, 600, v15, v16);
            (*(void (__thiscall **)(int, void *))(*(_DWORD *)v17 + 180))(v17, v8);
            if ( CPlayer::IsEState(v17, 32) )
            {
              v9 = CBuff::CreateBuff(66, 600, v15, v16);
              (*(void (__thiscall **)(int, void *))(*(_DWORD *)v17 + 180))(v17, v9);
            }
            else
            {
              if ( CPlayer::IsEState(v17, 64) )
              {
                v10 = CBuff::CreateBuff(67, 600, v15, v16);
                (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v17 + 180))(v17, v10);
              }
            }
            if ( CPlayer::IsEState(v17, 128) )
            {
              v11 = CBuff::CreateBuff(68, 600, v15, v16);
              (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v17 + 180))(v17, v11);
            }
          }
        }
      }
    }
    CPlayer::SaveAllProperty(v17, a2, a3, a4, 0);
    CPlayer::EventSaveDB(v17, a2, a4);
    CChar::SaveAllBuff(v17, a2, a3, a4);
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v17 + 1020), a2, a3, a4);
    sub_40F070(v17 + 1068, &v20);
    while ( 1 )
    {
      v12 = sub_430C20(v17 + 1068, &v19);
      if ( !(unsigned __int8)sub_47D070(v12) )
        break;
      v13 = sub_446090((int *)&v20, (int)&v18, 0);
      v32 = *(_DWORD *)(sub_420250((int *)v13) + 4);
      CPlayer::_OutofInven(v17, a2, a3, a4, v32);
      CBase::Delete((void *)v32);
    }
    *(_DWORD *)(v17 + 1096) = 0;
    CIOCriticalSection::Leave(v17 + 1020, a2, a3, a4);
    if ( !sub_4913E0(*(void **)(v17 + 320), a2, a3, a4, v17, v17 + 324) )
    {
      CIOObject::AddRef(v17, a2, a3, a4);
      sub_4328C0(
        "CPlayer::OnDelete() Removal of point from Map is failed. (%d %d) (PID: %d, UID: %d)",
        *(_DWORD *)(v17 + 324),
        *(_DWORD *)(v17 + 328),
        *(_DWORD *)(v17 + 452),
        *(_DWORD *)(v17 + 448));
    }
    CChar::WriteInSight(a2, a3, a4, v17, 55, (unsigned int)"d");
  }
  if ( CPlayer::IsPBit(v17, 2) )
    CPlayer::Remove(v17, a2, a3, a4);
  sub_496CD0();
  CChar::Unlock(v17, a2, a3, a4);
  return CBase::OnDelete(v17, a2, a3, a4);
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00451330) --------------------------------------------------------
int __thiscall CPlayer::IsPBit(int this, char a2)
{
  return *(_DWORD *)(this + 20) & (1 << a2);
}

//----- (00451350) --------------------------------------------------------
void __userpurge CPlayer::SendDelete(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, void *a6)
{
  CPlayer::Send(a1, a2, a3, a4, a6);
  CPlayer::Write(a2, a3, a4, a5, 55, (unsigned int)"d");
}

//----- (00451390) --------------------------------------------------------
void __userpurge CPlayer::SendCreate(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, void *a6)
{
  int v6; // [sp+0h] [bp-8h]@1

  v6 = (int)a1;
  if ( a1 != (void *)a5 )
  {
    CPlayer::Send(a1, a2, a3, a4, a6);
    if ( *(_DWORD *)(a5 + 260) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CPlayer::Write(a2, a3, a4, v6, 72, (unsigned int)"dbw");
    }
    CPlayer::GetGuildName(v6);
    CPlayer::GetGuildClassTitle(v6);
    CPlayer::Write(a2, a3, a4, a5, 50, (unsigned int)"dsbdddwdmbbIssdbd");
    if ( *(_DWORD *)(v6 + 260) )
      CPlayer::Write(a2, a3, a4, a5, 72, (unsigned int)"dbw");
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004514F0) --------------------------------------------------------
int __usercall CPlayer::AI<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  result = CBase::IsDeleted(a1);
  if ( result )
  {
    CLink::Remove((void *)(v5 + 428));
    result = sub_4239C0(v5, a2, a3, a4, v5 + 8);
  }
  return result;
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00451530) --------------------------------------------------------
signed int __userpurge CPlayer::Damage<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  signed int result; // eax@2
  int v11; // eax@81
  int v12; // edx@87
  int v13; // [sp+18h] [bp-84h]@57
  int v14; // [sp+1Ch] [bp-80h]@52
  int v15; // [sp+30h] [bp-6Ch]@40
  int v16; // [sp+34h] [bp-68h]@38
  int v17; // [sp+38h] [bp-64h]@36
  int v18; // [sp+3Ch] [bp-60h]@30
  int v19; // [sp+68h] [bp-34h]@7
  int v20; // [sp+6Ch] [bp-30h]@4
  int v21; // [sp+78h] [bp-24h]@1
  int v22; // [sp+7Ch] [bp-20h]@69
  int v23; // [sp+80h] [bp-1Ch]@65
  int v24; // [sp+84h] [bp-18h]@82
  int v25; // [sp+88h] [bp-14h]@34
  signed int v26; // [sp+94h] [bp-8h]@9

  v21 = a1;
  if ( CChar::IsMState(a1, 67108864i64) )
  {
    *(_DWORD *)a9 = 0;
    *(_DWORD *)a7 = 0;
    result = 0;
  }
  else
  {
    if ( a10 )
      v20 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 52))(a10);
    else
      v20 = 1;
    if ( a10 )
      v19 = (*(int (__thiscall **)(int))(*(_DWORD *)a10 + 28))(a10);
    else
      v19 = 0;
    v26 = CChar::GetFinalDamage((void *)v21, a5, a6, v20);
    if ( v26 > 0 )
    {
      if ( CChar::IsMState(v21, 512i64) )
        CChar::CancelBuff(v21, a2, a3, a4, 8);
      if ( CChar::IsMState(v21, 268435456i64) )
        CChar::CancelBuff(v21, a2, a3, a4, 26);
      if ( CChar::IsMState(v21, 32768i64) && (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 156))(a5) == 1 )
      {
        CChar::CancelBuff(v21, a2, a3, a4, 14);
        *(_DWORD *)a9 = 0;
        *(_DWORD *)a7 = 0;
        result = 0;
      }
      else
      {
        if ( CChar::IsBState(v21, 65536i64) && sub_406E10(1, 100) <= 10 )
        {
          CChar::UpdateBuff(v21, a2, a3, a4, 58);
          *(_DWORD *)a9 = 0;
          *(_DWORD *)a7 = 0;
          result = 0;
        }
        else
        {
          CChar::Lock(v21, a2, a3, a4);
          if ( CChar::IsNormal(v21) )
          {
            *(_DWORD *)(v21 + 1464) = GetTickCount();
            if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 60))(a5) )
            {
              if ( CChar::IsGState(a5, 256) )
              {
                if ( *(_DWORD *)(a5 + 536) < 3 )
                  *(_DWORD *)(a5 + 536) = 3;
              }
            }
            if ( CChar::IsMState(v21, 16777216i64) )
            {
              *(_DWORD *)a7 = a6;
            }
            else
            {
              if ( a10 && v20 )
                v18 = v26 >> 1;
              else
                v18 = v26;
              *(_DWORD *)a7 = v26 + CChar::GetFatalDamage(a5, v18, a8, v19);
              if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 60))(a5) )
              {
                if ( !*(_DWORD *)(a5 + 460) )
                {
                  *(_DWORD *)a7 += 30 * *(_DWORD *)a7 / 100;
                  v25 = *(_DWORD *)(a5 + 60) - *(_DWORD *)(v21 + 60);
                  if ( v25 < 0 )
                  {
                    if ( -v25 <= 10 )
                      v15 = -v25;
                    else
                      v15 = 10;
                    v16 = -dword_4D91A4[v15];
                  }
                  else
                  {
                    if ( v25 <= 10 )
                      v17 = *(_DWORD *)(a5 + 60) - *(_DWORD *)(v21 + 60);
                    else
                      v17 = 10;
                    v16 = dword_4D91A4[v17];
                  }
                  *(_DWORD *)a7 += v16 * *(_DWORD *)a7 / 100;
                }
              }
            }
            if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 64))(a5) )
            {
              if ( CChar::IsBState(v21, 1024i64) )
              {
                *(_DWORD *)a7 -= *(_DWORD *)a7 / 10;
              }
              else
              {
                if ( CChar::IsBState(v21, 2147483648i64) )
                  *(_DWORD *)a7 -= 7 * *(_DWORD *)a7 / 100;
              }
            }
            if ( *(_DWORD *)a7 >= *(_DWORD *)(v21 + 272) )
              v14 = *(_DWORD *)(v21 + 272);
            else
              v14 = *(_DWORD *)a7;
            *(_DWORD *)a7 = v14;
            *(_DWORD *)(v21 + 272) -= *(_DWORD *)a7;
            if ( *(_DWORD *)a9 )
            {
              if ( *(_DWORD *)(v21 + 272) <= 0 )
              {
                *(_DWORD *)a9 = 0;
              }
              else
              {
                if ( *(_DWORD *)a9 >= *(_DWORD *)(v21 + 272) )
                  v13 = *(_DWORD *)(v21 + 272);
                else
                  v13 = *(_DWORD *)a9;
                *(_DWORD *)a9 = v13;
                *(_DWORD *)(v21 + 272) -= *(_DWORD *)a9;
              }
            }
            if ( *(_DWORD *)(v21 + 272) > 0 )
            {
              CChar::Unlock(v21, a2, a3, a4);
              CPlayer::Rest(v21, a2, a3, a4, 0);
            }
            else
            {
              *(_DWORD *)(v21 + 272) = 0;
              if ( CChar::IsGState(v21, 32768) )
                CPlayer::Write(a2, a3, a4, v21, 67, (unsigned int)"b");
              CChar::SubGState(v21, 32772);
              CChar::SubMState(v21, 1, 0);
              CChar::AddGState(v21, 2);
              if ( CPlayer::IsEState(v21, 2048) )
              {
                CPlayer::SubEState(v21, 2048);
                v23 = CNPC::FindNPC(a2, a3, a4, *(_DWORD *)(v21 + 1640));
                if ( v23 )
                  CNPCSiegeGunStone::SetOperator(v23, a2, a3, a4, 0);
                CPlayer::Write(a2, a3, a4, v21, 67, (unsigned int)"b");
              }
              if ( CChar::IsGState(v21, 128) )
              {
                v22 = *(_DWORD *)(v21 + 1516);
                if ( !v22 )
                  sub_422D80(*(_DWORD *)(v21 + 1516), a2, a3, a4);
                if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a5 + 60))(a5) && a5 == v22 )
                {
                  CPlayer::AddEState(v21, 16);
                }
                else
                {
                  if ( !CChar::IsBState(v21, 256i64) )
                    ++*(_DWORD *)(v21 + 552);
                }
                CPlayer::EndPvP(v21, a2, a3, a4, v22, 3, 2, 6);
              }
              else
              {
                if ( (*(int (__thiscall **)(int))(*(_DWORD *)a5 + 64))(a5) )
                {
                  if ( !CChar::IsBState(v21, 256i64) )
                    ++*(_DWORD *)(v21 + 552);
                }
              }
              if ( CChar::IsGState(v21, 1024) )
              {
                (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v21 + 112))(v21, 1024);
                CChar::Unlock(v21, a2, a3, a4);
                v11 = CPlayer::GetGID(v21, a2, a3, a4);
                CCastle::UnfurlStandardCancel(a2, a3, a4, v11);
                CChar::Lock(v21, a2, a3, a4);
              }
              v24 = *(_DWORD *)(v21 + 1100);
              if ( v24 )
              {
                CIOObject::AddRef(v24, a2, a3, a4);
                CChar::Unlock(v21, a2, a3, a4);
                CBase::Delete((void *)v24);
                CIOObject::Release(v24, a2, a3, a4);
              }
              else
              {
                CChar::Unlock(v21, a2, a3, a4);
              }
              if ( CChar::IsBState(v21, 128i64) )
                CPlayer::AddEState(v21, 128);
              (*(void (__thiscall **)(int, int))(*(_DWORD *)a5 + 160))(a5, v21);
              CChar::CancelBuffPrty(v21, v12, a2, a3, a4, -161);
              if ( CChar::IsGState(v21, 16) )
                CPlayer::SwitchStall(v21, a2, a3, a4, 0);
              if ( CChar::IsGState(v21, 512) )
                CPlayer::FreeTransform(v21, a2, a3, a4);
              CPlayer::BreakStandard(v21, a2, a3, a4);
              CChar::WriteInSight(a2, a3, a4, v21, 61, (unsigned int)"db");
              *(_DWORD *)(v21 + 1452) = GetTickCount() + 600000;
              *(_DWORD *)(v21 + 1448) = GetTickCount() + 600000;
              (*(void (__thiscall **)(int, int))(*(_DWORD *)a5 + 132))(a5, v21);
            }
            CPlayer::UpdatePartyMember(v21, a2, a3, a4, 7);
            result = 1;
          }
          else
          {
            CChar::Unlock(v21, a2, a3, a4);
            *(_DWORD *)a9 = 0;
            *(_DWORD *)a7 = 0;
            result = 1;
          }
        }
      }
    }
    else
    {
      *(_DWORD *)a9 = 0;
      *(_DWORD *)a7 = 0;
      result = 0;
    }
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D91A4: using guessed type int dword_4D91A4[];

//----- (00451CF0) --------------------------------------------------------
void __userpurge CPlayer::InfoDie(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  CPlayer::Write(a2, a3, a4, a1, 64, (unsigned int)"db");
}

//----- (00451D20) --------------------------------------------------------
int __thiscall CPlayer::ReviseProperty(int this)
{
  int result; // eax@1
  int v2; // ST00_4@1
  int v3; // ST08_4@1

  v2 = this;
  CChar::ReviseProperty(this);
  v3 = *(_DWORD *)(v2 + 76);
  *(_DWORD *)(v2 + 84) += 2 * *(_DWORD *)(v2 + 68) * *(_DWORD *)(v2 + 68) / dword_4D6A10[*(_DWORD *)(v2 + 460)] + 115;
  result = *(_DWORD *)(v2 + 88) + v3 + 2 * v3 * v3 / dword_4D6A1C[*(_DWORD *)(v2 + 460)];
  *(_DWORD *)(v2 + 88) = result;
  return result;
}
// 4D6A10: using guessed type int dword_4D6A10[];
// 4D6A1C: using guessed type int dword_4D6A1C[];

//----- (00451DA0) --------------------------------------------------------
void __userpurge CPlayer::AddMStateEx(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST10_4@1

  v5 = a1;
  CChar::AddMStateEx(a1, a5);
  CPlayer::Write(a2, a3, a4, v5, 21, (unsigned int)"d");
}

//----- (00451DE0) --------------------------------------------------------
void __userpurge CPlayer::AddBState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // ST1C_4@1
  int v8; // ST20_4@1
  int v9; // ecx@1
  LONG v10; // eax@1

  v7 = a1;
  v8 = a1 + 304;
  InterlockedExchange((volatile LONG *)(a1 + 304), a5 | *(_DWORD *)(a1 + 304));
  LOBYTE(v9) = 32;
  v10 = unknown_libname_15(v9, a6 | *(_DWORD *)(v7 + 308));
  InterlockedExchange((volatile LONG *)(v8 + 4), v10);
  CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bId");
}
// 4A14E0: using guessed type int __fastcall unknown_libname_15(_DWORD, _DWORD);

//----- (00451E70) --------------------------------------------------------
void __userpurge CPlayer::SubMStateEx(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST10_4@1

  v5 = a1;
  CChar::SubMStateEx(a1, a5);
  CPlayer::Write(a2, a3, a4, v5, 21, (unsigned int)"d");
}

//----- (00451EB0) --------------------------------------------------------
void __userpurge CPlayer::SubBState(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // ST18_4@1
  int v7; // ST1C_4@1
  int v8; // ecx@1
  LONG v9; // eax@1

  v6 = a1;
  v7 = a1 + 304;
  InterlockedExchange((volatile LONG *)(a1 + 304), *(_DWORD *)(a1 + 304) & ~a5);
  v8 = v6;
  LOBYTE(v8) = 32;
  v9 = unknown_libname_15(v8, *(_DWORD *)(v6 + 308) & ~a6);
  InterlockedExchange((volatile LONG *)(v7 + 4), v9);
  CPlayer::Write(a2, a3, a4, v6, 68, (unsigned int)"bI");
}
// 4A14E0: using guessed type int __fastcall unknown_libname_15(_DWORD, _DWORD);

//----- (00451F40) --------------------------------------------------------
int __thiscall CPlayer::GetFinalDefense(void *this, int a2)
{
  int result; // eax@2
  int v3; // eax@2
  int v4; // eax@3
  void *v5; // [sp+8h] [bp-8h]@1

  v5 = this;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
  {
    v3 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 156))(a2);
    result = CChar::GetDefense(v5, v3);
  }
  else
  {
    v4 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 156))(a2);
    result = CChar::GetDefense(v5, v4)
           + *((_DWORD *)v5 + 15) / *(int *)((char *)&dword_4D9180[3 * v4] + 4 * *((_DWORD *)v5 + 115));
  }
  return result;
}
// 4D9180: using guessed type int dword_4D9180[];

//----- (00451FC0) --------------------------------------------------------
int __thiscall CPlayer::GetFinalAbsorb(void *this, int a2)
{
  int result; // eax@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
    result = CChar::GetAbsorb(v3);
  else
    result = CChar::GetAbsorb(v3) + 15;
  return result;
}

//----- (00452000) --------------------------------------------------------
int __thiscall CPlayer::GetFinalResist(void *this, int a2, int a3)
{
  int result; // eax@2
  void *v4; // [sp+4h] [bp-4h]@1

  v4 = this;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
    result = CChar::GetResist(v4, a3) / 10;
  else
    result = CChar::GetResist(v4, a3) / 10 + *((_DWORD *)v4 + 15) / dword_4D9198[*((_DWORD *)v4 + 115)] + 25;
  return result;
}
// 4D9198: using guessed type int dword_4D9198[];

//----- (00452070) --------------------------------------------------------
int __thiscall CPlayer::GetMSpeed(int this, int a2)
{
  int result; // eax@5
  int v3; // [sp+0h] [bp-18h]@7
  signed int v4; // [sp+4h] [bp-14h]@2
  int v5; // [sp+10h] [bp-8h]@1

  v5 = this;
  if ( CChar::IsMState(this, 1i64) )
    v4 = 533;
  else
    v4 = 800;
  if ( *(_DWORD *)(v5 + 260) )
  {
    if ( *(_DWORD *)(v5 + 260) <= 0 )
      v3 = v4 * (abs(*(_DWORD *)(v5 + 260)) + 100) / 100;
    else
      v3 = 100 * v4 / (*(_DWORD *)(v5 + 260) + 100);
    result = v3;
  }
  else
  {
    result = v4;
  }
  return result;
}

//----- (00452110) --------------------------------------------------------
bool __thiscall CPlayer::GetAttackType(int this)
{
  return *(_DWORD *)(this + 460) == 2;
}

//----- (00452130) --------------------------------------------------------
bool __thiscall CPlayer::CheckBlock(int this, int a2)
{
  int v3; // [sp+4h] [bp-14h]@15
  int v4; // [sp+8h] [bp-10h]@1
  bool v5; // [sp+Ch] [bp-Ch]@13
  int v6; // [sp+10h] [bp-8h]@1
  int v7; // [sp+14h] [bp-4h]@4

  v4 = this;
  v6 = *(_DWORD *)(this + 264);
  if ( !v6 || *(_DWORD *)(this + 460) == 1 )
    return 0;
  v7 = sub_44FD40(*(_DWORD *)(a2 + 60), *(_DWORD *)(this + 60));
  if ( *(_DWORD *)(v4 + 460) )
  {
    if ( *(_DWORD *)(v4 + 460) == 2 )
    {
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
        return dword_4D9248[v7] + v6 >= sub_406E10(1, 100);
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
        return v6 >= sub_406E10(1, 100);
    }
    return 0;
  }
  if ( !CPlayer::IsWState(v4, 1) )
  {
    if ( !(*(_DWORD *)(v4 + 464) & 4) )
      return 0;
    if ( !CPlayer::IsWState(v4, 12) || !CPlayerSkill::IsSkill((void *)(v4 + 624), 20) )
      return 0;
  }
  if ( !(*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2) )
  {
    if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 60))(a2) )
      return v6 + *(_DWORD *)(v4 + 60) / 3 > sub_406E10(1, 100);
    return 0;
  }
  v5 = CPlayer::IsWState(v4, 12) != 0;
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 156))(a2) == 1 )
  {
    if ( v5 )
      v3 = (v6 + 3) / 3;
    else
      v3 = v6 + 3;
    v6 = v3;
  }
  return *(int *)((char *)&dword_4D9210[7 * v5] + 4 * v7) + v6 >= sub_406E10(1, 100);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D9210: using guessed type int dword_4D9210[];
// 4D9248: using guessed type int dword_4D9248[];

//----- (00452310) --------------------------------------------------------
void __userpurge CPlayer::UpdateTransformExp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  if ( *(_DWORD *)(v5 + 1108) )
    CItemTransform::UpdateExp(*(_DWORD *)(v5 + 1108), a2, a3, a4, (void *)v5, a5);
  CIOCriticalSection::Leave(v5 + 1020, a2, a3, a4);
}

//----- (00452360) --------------------------------------------------------
signed int __usercall CPlayer::Add<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // eax@1
  signed int result; // eax@3
  int v6; // ST14_4@4
  int v7; // ST10_4@4
  char *v8; // ST0C_4@4
  char *v9; // eax@4
  int v10; // eax@5
  int v11; // eax@5
  int v12; // [sp+0h] [bp-54h]@1
  char v13; // [sp+4h] [bp-50h]@5
  int v14; // [sp+Ch] [bp-48h]@5
  int v15; // [sp+10h] [bp-44h]@5
  char v16; // [sp+14h] [bp-40h]@5
  char v17; // [sp+1Ch] [bp-38h]@5
  int v18; // [sp+24h] [bp-30h]@5
  int v19; // [sp+28h] [bp-2Ch]@5
  char v20; // [sp+2Ch] [bp-28h]@5
  int v21; // [sp+34h] [bp-20h]@1
  char v22; // [sp+38h] [bp-1Ch]@1
  struct in_addr v23; // [sp+40h] [bp-14h]@4
  int v24; // [sp+44h] [bp-10h]@2
  struct in_addr in; // [sp+48h] [bp-Ch]@4
  char v26; // [sp+4Ch] [bp-8h]@1
  char v27; // [sp+50h] [bp-4h]@1

  v12 = a1;
  CIOObject::AddRef(a1, a2, a3, a4);
  sub_47E0D0((volatile LONG *)&unk_4E202C);
  v21 = v12;
  v4 = sub_420990((int)&v22, v12 + 452, (int)&v21);
  sub_445DF0((int)&unk_4E2068, (int)&v26, v4);
  if ( v27 )
  {
    v19 = v12;
    v18 = *(_DWORD *)(v12 + 28);
    v10 = sub_420990((int)&v20, (int)&v18, (int)&v19);
    sub_445DF0((int)&unk_4E2020, (int)&v17, v10);
    sub_47E1C0((volatile LONG *)&unk_4E202C, a2, a3, a4);
    sub_47E0D0((volatile LONG *)&unk_4E2050);
    v15 = v12;
    v14 = v12 + 32;
    v11 = sub_420990((int)&v16, (int)&v14, (int)&v15);
    sub_470440((int)&unk_4E2044, (int)&v13, v11);
    sub_47E1C0((volatile LONG *)&unk_4E2050, a2, a3, a4);
    sub_423980(v12, a2, a3, a4, (volatile LONG *)(v12 + 8));
    InterlockedIncrement(&dword_4E2000);
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a2, a3, a4);
    CLink::Insert(v12 + 428, (int)&unk_4E200C);
    CIOCriticalSection::Leave((int)&unk_4E2098, a2, a3, a4);
    result = 1;
  }
  else
  {
    CIOObject::Release(v12, a2, a3, a4);
    v24 = *(_DWORD *)(sub_420250((int *)&v26) + 4);
    if ( v12 == v24 )
    {
      sub_422D80(v12, a2, a3, a4);
      CIOObject::AddRef(v12, a2, a3, a4);
      sub_47E1C0((volatile LONG *)&unk_4E202C, a2, a3, a4);
      result = 0;
    }
    else
    {
      v23 = *(struct in_addr *)(*(_DWORD *)(v12 + 1676) + 140);
      in = *(struct in_addr *)(*(_DWORD *)(v24 + 1676) + 140);
      v6 = *(_DWORD *)(*(_DWORD *)(v24 + 1676) + 136);
      v7 = *(_DWORD *)(*(_DWORD *)(v12 + 1676) + 136);
      v8 = inet_ntoa(in);
      v9 = inet_ntoa(v23);
      sub_432890("Same player on game : name(%s) addr(%s, %s) port(%d, %d)", v12 + 32, v9, v8, v7, v6);
      CPlayer::Write(a2, a3, a4, v12, 67, (unsigned int)"b");
      sub_423980(v24, a2, a3, a4, (volatile LONG *)(v24 + 352));
      sub_47E1C0((volatile LONG *)&unk_4E202C, a2, a3, a4);
      CPlayer::Write(a2, a3, a4, v24, 45, (unsigned int)"b");
      sub_495B20(*(_DWORD *)(v24 + 1676), a2, a3, a4, 2);
      sub_4239C0(v24, a2, a3, a4, v24 + 352);
      result = 0;
    }
  }
  return result;
}

//----- (00452590) --------------------------------------------------------
LONG __usercall CPlayer::Remove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST04_4@1
  int v6; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v5 = a1;
  sub_47E0D0((volatile LONG *)&unk_4E202C);
  v7 = *(_DWORD *)(v5 + 28);
  sub_4703E0((int)&unk_4E2020, (int)&v7);
  sub_4703E0((int)&unk_4E2068, v5 + 452);
  sub_47E1C0((volatile LONG *)&unk_4E202C, a2, a3, a4);
  sub_47E0D0((volatile LONG *)&unk_4E2050);
  v6 = v5 + 32;
  sub_470600((int)&unk_4E2044, (const char **)&v6);
  sub_47E1C0((volatile LONG *)&unk_4E2050, a2, a3, a4);
  CIOObject::Release(v5, a2, a3, a4);
  return InterlockedDecrement(&dword_4E2000);
}

//----- (00452620) --------------------------------------------------------
void __usercall CPlayer::Tick(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // eax@29
  int v5; // eax@31
  int v6; // edx@48
  int v7; // edx@77
  int v8; // [sp+18h] [bp-2Ch]@22
  int v9; // [sp+1Ch] [bp-28h]@15
  int v10; // [sp+20h] [bp-24h]@1
  int v11; // [sp+24h] [bp-20h]@77
  int v12; // [sp+28h] [bp-1Ch]@72
  signed int v13; // [sp+30h] [bp-14h]@51
  char v14; // [sp+34h] [bp-10h]@40
  int v15; // [sp+38h] [bp-Ch]@48
  signed int v16; // [sp+3Ch] [bp-8h]@39
  DWORD v17; // [sp+40h] [bp-4h]@3

  v10 = a1;
  if ( CBase::IsDeleted(a1) )
  {
    CLink::Remove((void *)(v10 + 428));
    sub_4239C0(v10, a2, a3, a4, v10 + 8);
  }
  else
  {
    CChar::RefreshBuff(v10, a2, a3, a4);
    CPlayer::RefreshStandardBuff(v10, a2, a3, a4);
    v17 = GetTickCount();
    CChar::Lock(v10, a2, a3, a4);
    ++*(_DWORD *)(v10 + 1440);
    if ( *(_DWORD *)(v10 + 1440) >= 0x258u )
      CPlayer::SaveAllProperty(v10, a2, a3, a4, 0);
    if ( CChar::IsGState(v10, 8192) )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1448) )
      {
        CChar::SubGState(v10, 8192);
        *(_DWORD *)(v10 + 1448) = v17;
      }
    }
    if ( CChar::IsGState(v10, 2) )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1452) )
        CPlayer::Revival(v10, a2, a3, a4);
    }
    else
    {
      if ( v17 >= *(_DWORD *)(v10 + 1472) )
      {
        if ( *(_DWORD *)(v10 + 272) < CChar::GetMaxHP(v10) )
        {
          if ( CChar::GetMaxHP(v10) / 100 >= 40 )
            v9 = 40;
          else
            v9 = CChar::GetMaxHP(v10) / 100;
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 88))(v10, 7, 1, v9);
        }
        *(_DWORD *)(v10 + 1472) = v17 + 6000;
      }
      if ( v17 >= *(_DWORD *)(v10 + 1476) )
      {
        if ( *(_DWORD *)(v10 + 276) < CChar::GetMaxMP(v10) )
        {
          if ( CChar::GetMaxMP(v10) / 100 >= 20 )
            v8 = 20;
          else
            v8 = CChar::GetMaxMP(v10) / 100;
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 88))(v10, 8, 1, v8);
        }
        *(_DWORD *)(v10 + 1476) = v17 + 12000;
      }
    }
    if ( CChar::IsGState(v10, 4) )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1444) )
      {
        if ( *(_DWORD *)(v10 + 272) < CChar::GetMaxHP(v10) )
        {
          v4 = CPlayer::GetAutoRefreshHP(v10);
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 88))(v10, 7, 1, v4);
        }
        if ( *(_DWORD *)(v10 + 276) < CChar::GetMaxMP(v10) )
        {
          v5 = CPlayer::GetAutoRefreshMP(v10);
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 88))(v10, 8, 1, v5);
        }
        *(_DWORD *)(v10 + 1444) = v17 + 4000;
      }
    }
    if ( CChar::IsMState(v10, 1i64) )
    {
      if ( *(_DWORD *)(v10 + 276) < 6 )
        (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 124))(v10, 1, 0);
      else
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 88))(v10, 8, 0, 6);
    }
    if ( CChar::IsGState(v10, 32) )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1468) )
      {
        v16 = sub_406E10(1, 1000);
        if ( v16 > 5 )
        {
          if ( v16 > 15 )
          {
            if ( v16 > 40 )
            {
              if ( v16 > 360 )
                v14 = -19;
              else
                v14 = -17;
            }
            else
            {
              v14 = -16;
            }
          }
          else
          {
            v14 = -68;
          }
        }
        else
        {
          v14 = -15;
        }
        v15 = CItem::CreateItem(v14, 0, 1, -1);
        if ( v15 )
        {
          if ( CPlayer::InsertItem(v10, v6, a2, a3, a4, 2, v15) != 1 )
            CBase::Delete((void *)v15);
        }
        v13 = 600000;
        if ( CChar::IsBState(v10, 8i64) )
        {
          v13 = 300000;
        }
        else
        {
          if ( CChar::IsBState(v10, 1i64) )
            v13 = 300000;
        }
        *(_DWORD *)(v10 + 1468) = v13 + v17;
        CPlayer::Write(a2, a3, a4, v10, 67, (unsigned int)"b");
      }
    }
    if ( CChar::IsGState(v10, 64) )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1468) )
      {
        --*(_DWORD *)(v10 + 1268);
        if ( !CPlayer::Cooking(v10, a2, a3, a4, *(_DWORD *)(v10 + 1268)) )
          CPlayer::Write(a2, a3, a4, v10, 68, (unsigned int)"bb");
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v10 + 112))(v10, 64);
      }
    }
    if ( CChar::IsGState(v10, 128) )
      CPlayer::OnPvP(v10, a2, a3, a4);
    if ( CChar::IsGState(v10, 512) )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1480) )
      {
        if ( *(_DWORD *)(v10 + 580) <= 0 )
        {
          CPlayer::FreeTransform(v10, a2, a3, a4);
        }
        else
        {
          if ( (*(_DWORD *)(v10 + 1112) & 0xF) > 0 )
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 88))(
              v10,
              35,
              0,
              dword_4D66AC[*(_DWORD *)(v10 + 1112) & 0xF]);
          *(_DWORD *)(v10 + 1480) = v17 + (((*(_DWORD *)(v10 + 580) <= 0) - 1) & 0xFFFF2928) + 60000;
        }
      }
    }
    if ( CChar::IsGState(v10, 1024) )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1468) )
      {
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v10 + 112))(v10, 1024);
        CChar::Unlock(v10, a2, a3, a4);
        v12 = CPlayer::GetGuild(v10, a2, a3, a4);
        if ( v12 )
        {
          CGuild::UnfurlStandard(v12, a2, a3, a4, v10, *(_DWORD *)(v10 + 1268));
          sub_4239C0(v12, a2, a3, a4, v12 + 40);
        }
        CChar::Lock(v10, a2, a3, a4);
      }
    }
    if ( dword_4E1178 & 2 )
    {
      if ( v17 >= *(_DWORD *)(v10 + 1484) )
      {
        *(_DWORD *)(v10 + 1484) = v17 + 1800000;
        v11 = CItem::CreateItem(-119, 0, 1, -1);
        if ( v11 )
        {
          if ( CPlayer::InsertItem(v10, v7, a2, a3, a4, 16, v11) != 1 )
            CBase::Delete((void *)v11);
        }
      }
    }
    CChar::Unlock(v10, a2, a3, a4);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v10 + 188))(v10, 1);
    CPlayer::MLMPayMoney(v10, a2, a3, a4, 0);
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 4D66AC: using guessed type int dword_4D66AC[];
// 4E1178: using guessed type int dword_4E1178;

//----- (00452C10) --------------------------------------------------------
int __thiscall CPlayer::GetAutoRefreshHP(int this)
{
  return 7 * *(_DWORD *)(this + 576) + sub_406E10(0, 2 * *(_DWORD *)(this + 576)) + 25;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (00452C50) --------------------------------------------------------
int __thiscall CPlayer::GetAutoRefreshMP(int this)
{
  return 6 * *(_DWORD *)(this + 576) + sub_406E10(0, 2 * *(_DWORD *)(this + 576)) + 20;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (00452C90) --------------------------------------------------------
void __usercall CPlayer::WarPortalAll(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  signed int *v5; // [sp+0h] [bp-18h]@11
  int v6; // [sp+4h] [bp-14h]@11
  int v7; // [sp+8h] [bp-10h]@11
  int v8; // [sp+Ch] [bp-Ch]@4
  int i; // [sp+10h] [bp-8h]@1
  int v10; // [sp+14h] [bp-4h]@9

  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a1, a2, a3);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a1, a2, a3);
  CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((int)&unk_4E2098, a1, a2, a3);
  for ( i = dword_4E2004; (int *)i != &dword_4E2004; i = *(_DWORD *)i )
  {
    v8 = i - 428;
    if ( !*(_DWORD *)(i - 428 + 484)
      || *(_DWORD *)(v8 + 480) != a5
      && (!*(_DWORD *)(*(_DWORD *)(v8 + 484) + 392) || *(_DWORD *)(*(_DWORD *)(v8 + 484) + 392) != a5) )
    {
      v10 = CCastle::WarPortal(a4, *(_DWORD *)(v8 + 316), *(_DWORD *)(v8 + 332), *(_DWORD *)(v8 + 336));
      if ( v10 >= 0 )
      {
        v5 = &dword_4D77C8[7 * v10];
        v6 = sub_406E10(dword_4D77C8[7 * v10 + 1] - 32, dword_4D77C8[7 * v10 + 1] + 32);
        v7 = sub_406E10(v5[2] - 32, v5[2] + 32);
        if ( CChar::IsGState(v8, 2) )
          CChar::AddGState(v8, 8);
        CPlayer::Teleport(v8, a1, a2, a3, *v5, (int)&v6, v5[3], 0);
      }
    }
  }
  CIOCriticalSection::Leave((int)&unk_4E2078, a1, a2, a3);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4E2004: using guessed type int dword_4E2004;

//----- (00452E00) --------------------------------------------------------
void __userpurge CPlayer::Send(void *this<ecx>, DWORD ebx0<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a2)
{
  void *v5; // ST0C_4@1
  int v6; // ST10_4@1

  v5 = this;
  v6 = (int)CIOBuffer::Alloc();
  memcpy((void *)v6, a2, *((_DWORD *)a2 + 2000));
  *(_DWORD *)(v6 + 8000) = *((_DWORD *)a2 + 2000);
  CSocket::_CSocket(*((_DWORD *)v5 + 419), ebx0, a3, a4, v6);
}

//----- (00452E60) --------------------------------------------------------
void __usercall CPlayer::Write(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6)
{
  int v6; // ST08_4@1

  v6 = (int)CIOBuffer::Alloc();
  *(_BYTE *)(v6 + 2) = a5;
  *(_WORD *)v6 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)(v6 + 3), (int)&a6) - v6;
  *(_DWORD *)(v6 + 8000) = *(_WORD *)v6;
  CSocket::_CSocket(*(_DWORD *)(a4 + 1676), a1, a2, a3, v6);
}

//----- (00452ED0) --------------------------------------------------------
void __userpurge CPlayer::Process(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // eax@346
  char *v8; // eax@477
  int v9; // ST20_4@3
  char *v10; // eax@3
  int v11; // [sp+1Ch] [bp-2B8h]@1
  int v12; // [sp+24h] [bp-2B0h]@520
  int v13; // [sp+28h] [bp-2ACh]@520
  int v14; // [sp+2Ch] [bp-2A8h]@520
  int v15; // [sp+30h] [bp-2A4h]@520
  int v16; // [sp+34h] [bp-2A0h]@520
  int v17; // [sp+38h] [bp-29Ch]@519
  int v18; // [sp+3Ch] [bp-298h]@519
  int v19; // [sp+40h] [bp-294h]@519
  int v20; // [sp+44h] [bp-290h]@519
  int v21; // [sp+48h] [bp-28Ch]@519
  int v22; // [sp+4Ch] [bp-288h]@518
  int v23; // [sp+50h] [bp-284h]@518
  int v24; // [sp+54h] [bp-280h]@518
  int v25; // [sp+58h] [bp-27Ch]@518
  char v26; // [sp+5Fh] [bp-275h]@514
  char v27[4]; // [sp+60h] [bp-274h]@509
  int v28; // [sp+64h] [bp-270h]@506
  int v29; // [sp+68h] [bp-26Ch]@506
  int v30; // [sp+6Ch] [bp-268h]@501
  int v31; // [sp+70h] [bp-264h]@501
  int v32; // [sp+74h] [bp-260h]@501
  int v33; // [sp+78h] [bp-25Ch]@495
  unsigned __int8 v34; // [sp+7Fh] [bp-255h]@490
  int v35; // [sp+80h] [bp-254h]@485
  unsigned __int8 v36; // [sp+87h] [bp-24Dh]@480
  unsigned __int8 v37; // [sp+8Fh] [bp-245h]@451
  char *v38; // [sp+90h] [bp-244h]@444
  char *v39; // [sp+94h] [bp-240h]@441
  char v40; // [sp+98h] [bp-23Ch]@437
  int v41; // [sp+9Ch] [bp-238h]@436
  int v42; // [sp+A0h] [bp-234h]@436
  char v43; // [sp+A4h] [bp-230h]@432
  int v44; // [sp+A8h] [bp-22Ch]@431
  int v45; // [sp+ACh] [bp-228h]@431
  unsigned __int8 v46; // [sp+B0h] [bp-224h]@420
  unsigned __int8 v47; // [sp+B1h] [bp-223h]@411
  unsigned __int8 v48; // [sp+B2h] [bp-222h]@407
  unsigned __int8 v49; // [sp+B3h] [bp-221h]@404
  char v50; // [sp+B4h] [bp-220h]@395
  unsigned __int8 v51; // [sp+B5h] [bp-21Fh]@392
  unsigned __int8 v52; // [sp+B6h] [bp-21Eh]@389
  unsigned __int8 v53; // [sp+B7h] [bp-21Dh]@389
  int v54; // [sp+B8h] [bp-21Ch]@377
  int v55; // [sp+BCh] [bp-218h]@378
  int v56; // [sp+C0h] [bp-214h]@371
  int v57; // [sp+C4h] [bp-210h]@372
  int v58; // [sp+C8h] [bp-20Ch]@367
  int v59; // [sp+CCh] [bp-208h]@367
  int v60; // [sp+D0h] [bp-204h]@366
  unsigned __int8 v61; // [sp+D7h] [bp-1FDh]@368
  int v62; // [sp+D8h] [bp-1FCh]@363
  int v63; // [sp+DCh] [bp-1F8h]@363
  int v64; // [sp+E0h] [bp-1F4h]@359
  int v65; // [sp+E4h] [bp-1F0h]@359
  int v66; // [sp+E8h] [bp-1ECh]@358
  int v67; // [sp+ECh] [bp-1E8h]@354
  int v68; // [sp+F0h] [bp-1E4h]@354
  int v69; // [sp+F4h] [bp-1E0h]@353
  unsigned __int8 v70; // [sp+FBh] [bp-1D9h]@355
  int v71; // [sp+FCh] [bp-1D8h]@349
  int v72; // [sp+100h] [bp-1D4h]@349
  int v73; // [sp+104h] [bp-1D0h]@348
  int v74; // [sp+108h] [bp-1CCh]@338
  int v75; // [sp+10Ch] [bp-1C8h]@338
  int v76; // [sp+110h] [bp-1C4h]@337
  int v77; // [sp+114h] [bp-1C0h]@334
  int v78; // [sp+118h] [bp-1BCh]@334
  int v79; // [sp+11Ch] [bp-1B8h]@327
  int v80; // [sp+120h] [bp-1B4h]@326
  int v81; // [sp+124h] [bp-1B0h]@327
  int v82; // [sp+128h] [bp-1ACh]@322
  int v83; // [sp+12Ch] [bp-1A8h]@321
  time_t v84; // [sp+130h] [bp-1A4h]@322
  unsigned __int8 v85; // [sp+137h] [bp-19Dh]@322
  int v86; // [sp+138h] [bp-19Ch]@317
  int v87; // [sp+13Ch] [bp-198h]@316
  int v88; // [sp+140h] [bp-194h]@316
  unsigned __int8 v89; // [sp+147h] [bp-18Dh]@316
  int v90; // [sp+148h] [bp-18Ch]@313
  int v91; // [sp+14Ch] [bp-188h]@312
  int v92; // [sp+150h] [bp-184h]@313
  int v93; // [sp+154h] [bp-180h]@313
  int v94; // [sp+158h] [bp-17Ch]@313
  int v95; // [sp+15Ch] [bp-178h]@313
  int v96; // [sp+160h] [bp-174h]@308
  unsigned __int8 v97; // [sp+167h] [bp-16Dh]@309
  char *v98; // [sp+168h] [bp-16Ch]@305
  int v99; // [sp+16Ch] [bp-168h]@304
  int v100; // [sp+170h] [bp-164h]@300
  int v101; // [sp+174h] [bp-160h]@296
  int v102; // [sp+178h] [bp-15Ch]@292
  int v103; // [sp+17Ch] [bp-158h]@288
  char *v104; // [sp+180h] [bp-154h]@289
  int v105; // [sp+184h] [bp-150h]@284
  unsigned __int8 v106; // [sp+18Bh] [bp-149h]@285
  int v107; // [sp+18Ch] [bp-148h]@282
  char v108; // [sp+193h] [bp-141h]@282
  int v109; // [sp+194h] [bp-140h]@279
  unsigned __int8 v110; // [sp+19Bh] [bp-139h]@279
  int v111; // [sp+19Ch] [bp-138h]@276
  unsigned __int8 v112; // [sp+1A3h] [bp-131h]@250
  int v113; // [sp+1A4h] [bp-130h]@250
  unsigned int v114; // [sp+1A8h] [bp-12Ch]@250
  unsigned __int8 v115; // [sp+1AEh] [bp-126h]@240
  unsigned __int8 v116; // [sp+1AFh] [bp-125h]@235
  unsigned __int8 v117; // [sp+1B7h] [bp-11Dh]@232
  int v118; // [sp+1B8h] [bp-11Ch]@229
  int v119; // [sp+1BCh] [bp-118h]@223
  unsigned __int8 v120; // [sp+1C3h] [bp-111h]@223
  int v121; // [sp+1C4h] [bp-110h]@220
  int v122; // [sp+1C8h] [bp-10Ch]@217
  unsigned __int8 v123; // [sp+1CEh] [bp-106h]@217
  unsigned __int8 v124; // [sp+1CFh] [bp-105h]@211
  int v125; // [sp+1D0h] [bp-104h]@204
  unsigned __int8 v126; // [sp+1D6h] [bp-FEh]@202
  int v127; // [sp+1D8h] [bp-FCh]@192
  unsigned __int8 v128; // [sp+1DFh] [bp-F5h]@193
  int v129; // [sp+1E0h] [bp-F4h]@194
  int v130; // [sp+1E4h] [bp-F0h]@192
  unsigned __int8 v131; // [sp+1EBh] [bp-E9h]@189
  int v132; // [sp+1ECh] [bp-E8h]@182
  int v133; // [sp+1F0h] [bp-E4h]@181
  unsigned __int8 v134; // [sp+1F5h] [bp-DFh]@183
  unsigned __int8 v135; // [sp+1F6h] [bp-DEh]@178
  unsigned __int8 v136; // [sp+1F7h] [bp-DDh]@175
  int v137; // [sp+1F8h] [bp-DCh]@175
  unsigned __int8 v138; // [sp+1FFh] [bp-D5h]@172
  int v139; // [sp+200h] [bp-D4h]@172
  unsigned __int8 v140; // [sp+207h] [bp-CDh]@163
  int v141; // [sp+208h] [bp-CCh]@157
  unsigned __int8 v142; // [sp+20Fh] [bp-C5h]@157
  int v143; // [sp+210h] [bp-C4h]@154
  unsigned __int8 v144; // [sp+217h] [bp-BDh]@151
  int v145; // [sp+218h] [bp-BCh]@151
  int v146; // [sp+21Ch] [bp-B8h]@148
  int v147; // [sp+220h] [bp-B4h]@148
  int v148; // [sp+224h] [bp-B0h]@145
  int v149; // [sp+228h] [bp-ACh]@142
  int v150; // [sp+22Ch] [bp-A8h]@139
  int v151; // [sp+230h] [bp-A4h]@136
  int v152; // [sp+234h] [bp-A0h]@133
  char v153; // [sp+238h] [bp-9Ch]@133
  int v154; // [sp+240h] [bp-94h]@130
  int v155; // [sp+244h] [bp-90h]@130
  unsigned __int8 v156; // [sp+24Bh] [bp-89h]@127
  int v157; // [sp+24Ch] [bp-88h]@127
  unsigned __int8 v158; // [sp+253h] [bp-81h]@124
  int v159; // [sp+254h] [bp-80h]@124
  unsigned __int8 v160; // [sp+25Bh] [bp-79h]@124
  int v161; // [sp+25Ch] [bp-78h]@118
  int v162; // [sp+260h] [bp-74h]@118
  int v163; // [sp+264h] [bp-70h]@117
  int v164; // [sp+268h] [bp-6Ch]@117
  int v165; // [sp+26Ch] [bp-68h]@114
  unsigned __int8 v166; // [sp+273h] [bp-61h]@114
  int v167; // [sp+274h] [bp-60h]@113
  unsigned __int16 v168; // [sp+278h] [bp-5Ch]@101
  unsigned __int16 v169; // [sp+27Ch] [bp-58h]@101
  unsigned __int8 v170; // [sp+283h] [bp-51h]@101
  unsigned __int16 v171; // [sp+284h] [bp-50h]@101
  unsigned __int16 v172; // [sp+288h] [bp-4Ch]@101
  unsigned __int16 v173; // [sp+28Ch] [bp-48h]@101
  unsigned __int16 v174; // [sp+290h] [bp-44h]@101
  unsigned __int16 v175; // [sp+294h] [bp-40h]@101
  int v176; // [sp+298h] [bp-3Ch]@92
  int v177; // [sp+29Ch] [bp-38h]@88
  unsigned __int8 v178; // [sp+2A3h] [bp-31h]@88
  char *v179; // [sp+2A4h] [bp-30h]@85
  unsigned __int8 v180; // [sp+2AAh] [bp-2Ah]@82
  unsigned __int8 v181; // [sp+2ABh] [bp-29h]@82
  int v182; // [sp+2ACh] [bp-28h]@73
  unsigned __int8 v183; // [sp+2B3h] [bp-21h]@71
  unsigned __int8 v184; // [sp+2B4h] [bp-20h]@67
  unsigned __int8 v185; // [sp+2B5h] [bp-1Fh]@62
  unsigned __int8 v186; // [sp+2B6h] [bp-1Eh]@58
  unsigned __int8 v187; // [sp+2B7h] [bp-1Dh]@55
  int v188; // [sp+2B8h] [bp-1Ch]@48
  unsigned __int8 v189; // [sp+2BFh] [bp-15h]@46
  int v190; // [sp+2C0h] [bp-14h]@41
  unsigned __int8 v191; // [sp+2C7h] [bp-Dh]@41
  char v192; // [sp+2C8h] [bp-Ch]@35
  char v193; // [sp+2C9h] [bp-Bh]@35
  char v194; // [sp+2CAh] [bp-Ah]@35
  char v195; // [sp+2CBh] [bp-9h]@30
  char v196; // [sp+2CCh] [bp-8h]@30
  char v197; // [sp+2CDh] [bp-7h]@30
  char v198; // [sp+2CEh] [bp-6h]@12
  unsigned __int8 v199; // [sp+2CFh] [bp-5h]@4
  int v200; // [sp+2D0h] [bp-4h]@6
  int v201; // [sp+2E0h] [bp+Ch]@53
  int v202; // [sp+2E0h] [bp+Ch]@58
  char *v203; // [sp+2E0h] [bp+Ch]@101
  int v204; // [sp+2E0h] [bp+Ch]@114
  char *v205; // [sp+2E0h] [bp+Ch]@124
  char *v206; // [sp+2E0h] [bp+Ch]@127
  char *v207; // [sp+2E0h] [bp+Ch]@163
  char *v208; // [sp+2E0h] [bp+Ch]@172
  char *v209; // [sp+2E0h] [bp+Ch]@175
  char *v210; // [sp+2E0h] [bp+Ch]@178
  char *v211; // [sp+2E0h] [bp+Ch]@192
  char *v212; // [sp+2E0h] [bp+Ch]@235
  char *v213; // [sp+2E0h] [bp+Ch]@240
  char *v214; // [sp+2E0h] [bp+Ch]@282
  char *v215; // [sp+2E0h] [bp+Ch]@392
  char *v216; // [sp+2E0h] [bp+Ch]@404
  char *v217; // [sp+2E0h] [bp+Ch]@407
  char *v218; // [sp+2E0h] [bp+Ch]@410
  char *v219; // [sp+2E0h] [bp+Ch]@419
  char *v220; // [sp+2E0h] [bp+Ch]@501
  char *v221; // [sp+2E0h] [bp+Ch]@509
  char *v222; // [sp+2E0h] [bp+Ch]@514

  v11 = a1;
  switch ( a5 )
  {
    case 11:
      if ( (*(_DWORD *)(a1 + 20) & 0xB) == 2 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        if ( v199 == 1 )
        {
          if ( !*(_DWORD *)(v11 + 340) )
            *(_DWORD *)(v11 + 340) = v200;
          CPlayer::GameStart(v11, a2, a3, a4);
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v11, 45, (unsigned int)"b");
          sub_495B20(*(_DWORD *)(v11 + 1676), a2, a3, a4, 0);
        }
      }
      else
      {
        v9 = *(_DWORD *)(*(_DWORD *)(a1 + 1676) + 136);
        v10 = inet_ntoa(*(struct in_addr *)(*(_DWORD *)(a1 + 1676) + 140));
        sub_432890(
          "Invalid state at CPlayer::Process() Type(%d) UID(%d) Bit(%x) Addr(%s) Port(%d) Player(%p)",
          a5,
          *(_DWORD *)(v11 + 448),
          *(_DWORD *)(v11 + 20),
          v10,
          v9,
          v11);
      }
      break;
    case 19:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( v198 )
        {
          if ( GetTickCount() - *(_DWORD *)(v11 + 1464) < 0x2710 || CChar::IsMState(v11, 32i64) )
            CPlayer::Write(a2, a3, a4, v11, 29, (unsigned int)"b");
          else
            CPlayer::Write(a2, a3, a4, v11, 29, (unsigned int)"b");
        }
        else
        {
          CPlayer::GameRestart((void *)v11, a2, a3, a4);
        }
      }
      break;
    case 27:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        if ( GetTickCount() - *(_DWORD *)(a1 + 1464) < 0x2710 || CChar::IsMState(v11, 32i64) )
          CPlayer::Write(a2, a3, a4, v11, 93, (unsigned int)"b");
        else
          CPlayer::Write(a2, a3, a4, v11, 93, (unsigned int)"b");
      }
      break;
    case 20:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bbb");
        CChar::Lock(v11, a2, a3, a4);
        if ( CPlayer::CanMove(v11, a2, a3, a4) )
          CSMap::ReadLock(*(void **)(v11 + 320), a2, a3, a4, v11, v195, v197, v196, 0, 0);
        CChar::Unlock(v11, a2, a3, a4);
      }
      break;
    case 21:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bbb");
        CChar::Lock(v11, a2, a3, a4);
        if ( CPlayer::CanMove(v11, a2, a3, a4) )
          CSMap::ReadLock(*(void **)(v11 + 320), a2, a3, a4, v11, v192, v194, v193, 1, 0);
        CChar::Unlock(v11, a2, a3, a4);
      }
      break;
    case 15:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        if ( CChar::IsGState(v11, 8192) )
        {
          CChar::SubGState(v11, 8192);
          *(_DWORD *)(v11 + 1448) = GetTickCount();
        }
        CPlayer::Attack(v11, a2, a3, a4, v191, v190);
      }
      break;
    case 43:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        if ( CChar::IsGState(v11, 8192) )
        {
          CChar::SubGState(v11, 8192);
          *(_DWORD *)(v11 + 1448) = GetTickCount();
        }
        if ( (signed int)v189 < 93 )
        {
          if ( sub_480390((void *)(v11 + 624), v189, v188) )
            CChar::WriteInSight(a2, a3, a4, v11, 61, (unsigned int)"dbbd");
        }
      }
      break;
    case 16:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v201 = (int)sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( CChar::IsGState(v11, 8192) )
        {
          CChar::SubGState(v11, 8192);
          *(_DWORD *)(v11 + 1448) = GetTickCount();
        }
        sub_47FBB0((void *)(v11 + 624), v187, v201, a7);
      }
      break;
    case 84:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v202 = (int)sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        sub_47FC90((int *)(v11 + 624), v186, v202, a7);
      }
      break;
    case 41:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( *(_DWORD *)(v11 + 548) > 0 )
          sub_47F7A0((void *)(v11 + 624), a2, a3, a4, v185);
      }
      break;
    case 42:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( *(_DWORD *)(v11 + 548) > 0 )
          sub_47F970((void *)(v11 + 624), a2, a3, a4, v184);
      }
      break;
    case 75:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( v183 == 4 )
        {
          v182 = *(_DWORD *)(v11 + 4 * v183 + 632);
          if ( v182 )
          {
            if ( CPlayer::RemoveItem(v11, a2, a3, a4, 9, 362, 1) )
            {
              if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v182 + 48))(v182, v11) )
                sub_401020(v182);
            }
          }
        }
        else
        {
          sub_480240((int *)(v11 + 624), a2, a3, a4, v183);
        }
      }
      break;
    case 83:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bb");
        CPlayer::Bless(v11, a2, a3, a4, v181, v180);
      }
      break;
    case 17:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
        CPlayer::ProcessMsg(v11, a2, a3, a4, v179);
      }
      break;
    case 18:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        CPlayer::OnTeleport(v11, a2, a3, a4, v178, v177);
      }
      break;
    case 51:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        if ( CChar::IsGState(v11, 256) && v176 && v176 == 393281539 )
          CPlayer::Write(a2, a3, a4, v11, 95, (unsigned int)"b");
        else
          sub_47CB40(a2, a3, a4, v176, v11);
      }
      break;
    case 69:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
        (*(void (__thiscall **)(int, signed int))(*(_DWORD *)a1 + 112))(a1, 96);
      break;
    case 73:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v171 = 0;
        v172 = 0;
        v174 = 0;
        v168 = 0;
        v169 = 0;
        v173 = 0;
        v175 = 0;
        v203 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( v170 )
        {
          if ( v170 == 1 )
          {
            sub_4975F0(a2, a3, a4, v203, a7, (unsigned int)"www");
          }
          else
          {
            sub_4328C0("Wrong Packet at C2S_COOKING PID :%d , UID :%d", *(_DWORD *)(v11 + 452), *(_DWORD *)(v11 + 448));
            CPlayer::Write(a2, a3, a4, v11, 45, (unsigned int)"b");
            sub_495B20(*(_DWORD *)(v11 + 1676), a2, a3, a4, 1);
          }
        }
        else
        {
          sub_4975F0(a2, a3, a4, v203, a7, (unsigned int)"wwwwwww");
        }
        *(_DWORD *)(v11 + 1272) = v171;
        *(_DWORD *)(v11 + 1276) = v172;
        *(_DWORD *)(v11 + 1280) = v174;
        *(_DWORD *)(v11 + 1284) = v168;
        *(_DWORD *)(v11 + 1288) = v169;
        *(_DWORD *)(v11 + 1292) = v173;
        *(_DWORD *)(v11 + 1296) = v175;
        if ( CChar::IsGState(v11, 64) || !CPlayer::IsCooking(v11, a2, a3, a4, v170) )
        {
          CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
        }
        else
        {
          *(_DWORD *)(v11 + 1268) = v170 + 1;
          *(_DWORD *)(v11 + 1468) = GetTickCount() + 10000;
          (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v11 + 100))(v11, 64);
          CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
        }
      }
      break;
    case 22:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        sub_4490A0(a2, a3, a4, v167, v11);
      }
      break;
    case 97:
      v204 = (int)sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"db");
      CPlayer::NPCProcess(v11, a2, a3, a4, v165, v166, v204, a7);
      break;
    case 23:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        v164 = CNPC::FindNPC(a2, a3, a4, v163);
        if ( v164 )
        {
          v161 = 100;
          v162 = CCastle::GetCastle(*(_DWORD *)(v164 + 464));
          if ( v162 )
            v161 = CCastle::GetTaxRate(v162, a2, a3, a4);
          CIOObject::Release(v164, a2, a3, a4);
          CPlayer::Write(a2, a3, a4, v11, 76, (unsigned int)"b");
        }
      }
      break;
    case 24:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v205 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"dbb");
        CPlayer::BuyItemEx(v11, a2, a3, a4, v159, v160, v158, v205, a7);
      }
      break;
    case 25:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v206 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"db");
        CPlayer::SellItem(v11, a2, a3, a4, v157, v156, v206, a7);
      }
      break;
    case 26:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"dd");
        CPlayer::DropItem(v11, a2, a3, a4, v155, v154);
      }
      break;
    case 32:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"ddd");
        sub_4938A0(*(void **)(v11 + 320), a2, a3, a4, v11, v152, (int)&v153);
      }
      break;
    case 63:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::TrashItem(v11, a2, a3, a4, v151);
      }
      break;
    case 65:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::PutOnItem(v11, a2, a3, a4, v150);
      }
      break;
    case 66:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::PutOffItem(v11, a2, a3, a4, v149);
      }
      break;
    case 33:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::UseItem(v11, a2, a3, a4, v148);
      }
      break;
    case 57:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"dd");
        CPlayer::EnchantItem(v11, a2, a3, a4, v146, v147);
      }
      break;
    case 91:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        CPlayer::UpgradeItem(v11, a2, a3, a4, v144, v145);
      }
      break;
    case 34:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::AskTrade(v11, a2, a3, a4, v143);
      }
      break;
    case 35:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        CPlayer::OnAskTrade(v11, a2, a3, a4, v142, v141);
      }
      break;
    case 36:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
        CPlayer::CancelTrade(a1, a2, a3, a4);
      break;
    case 28:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v207 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::ShowOffItem(v11, a2, a3, a4, v140, v207, a7);
      }
      break;
    case 62:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
        CPlayer::TradeAgreed(a1, a2, a3, a4);
      break;
    case 52:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
        CPlayer::StorageInfo(a1, a2, a3, a4);
      break;
    case 49:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v208 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"db");
        CPlayer::PutInStorage(v11, a2, a3, a4, v139, v138, v208, a7);
      }
      break;
    case 50:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v209 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"db");
        CPlayer::PutOutStorage(v11, a2, a3, a4, v137, v136, v209, a7);
      }
      break;
    case 58:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v210 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::SetStallInfo(v11, a2, a3, a4, v135, v210, a7);
      }
      break;
    case 70:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        if ( *(_DWORD *)(v11 + 28) == v133 )
        {
          CPlayer::GetStallInfo(v11, a2, a3, a4, v134, v11);
        }
        else
        {
          v132 = sub_450810(a2, a3, a4, v133);
          if ( v132 )
          {
            CPlayer::GetStallInfo(v132, a2, a3, a4, v134, v11);
            sub_4239C0(v132, a2, a3, a4, v132 + 352);
          }
        }
      }
      break;
    case 67:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::SwitchStall(v11, a2, a3, a4, v131);
      }
      break;
    case 71:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v211 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"ddb");
        v130 = sub_450810(a2, a3, a4, v127);
        if ( v130 )
        {
          if ( (signed int)v128 > 0 )
            CPlayer::BuyItemAtStall(v130, a2, a3, a4, v11, v129, v128, v211, a7);
          sub_4239C0(v130, a2, a3, a4, v130 + 352);
        }
      }
      break;
    case 29:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CChar::WriteInSight(a2, a3, a4, v11, 61, (unsigned int)"db");
      }
      break;
    case 30:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( (signed int)v126 <= 4 )
        {
          v125 = CPlayer::GetNeedPoint(v11, v126);
          if ( v125 <= 0 || *(_DWORD *)(v11 + 544) < v125 )
          {
            CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
          }
          else
          {
            (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)v11 + 88))(v11, 23, 0, v125);
            (*(void (__cdecl **)(int, _DWORD, signed int, signed int))(*(_DWORD *)v11 + 88))(v11, v126, 1, 1);
            CDBSocket::Write(a2, a3, a4, 16, (unsigned int)"dbwbb");
          }
        }
      }
      break;
    case 31:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::Rest(v11, a2, a3, a4, v124);
      }
      break;
    case 37:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        CChar::Lock(a1, a2, a3, a4);
        CPlayer::Revival(v11, a2, a3, a4);
        *(_DWORD *)(v11 + 1448) = GetTickCount();
        CChar::Unlock(v11, a2, a3, a4);
      }
      break;
    case 74:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        CPlayer::RevivalSkill(v11, a2, a3, a4, v123, v122);
      }
      break;
    case 44:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::AskParty(v11, a2, a3, a4, v121);
      }
      break;
    case 45:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        CPlayer::OnAskParty(v11, a2, a3, a4, v120, v119);
      }
      break;
    case 47:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
        CPlayer::LeaveParty(a1, a2, a3, a4);
      break;
    case 48:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::ExileParty(v11, a2, a3, a4, v118);
      }
      break;
    case 56:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        CPlayer::SaveRevivalPt(v11, a2, a3, a4, v117, 0);
      }
      break;
    case 68:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v212 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::ProcessEvent(v11, a2, a3, a4, v116, v212, a7);
      }
      break;
    case 72:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        if ( dword_4E1178 & 4 )
        {
          v213 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
          if ( v115 == 3 )
          {
            if ( *(_DWORD *)(v11 + 60) >= 5 )
            {
              if ( CPlayer::EventIsMoraTime(v11) )
                CPlayer::Write(a2, a3, a4, v11, 14, (unsigned int)"b");
              else
                CPlayer::Write(a2, a3, a4, v11, 14, (unsigned int)"b");
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v11, 14, (unsigned int)"b");
            }
          }
          else
          {
            if ( v115 == 4 )
            {
              if ( CPlayer::EventIsMoraTime(v11) )
              {
                sub_4975F0(a2, a3, a4, v213, a7, (unsigned int)"b");
                v113 = sub_406E10(0, 2);
                v114 = 0;
                if ( v112 )
                {
                  if ( v112 == 1 )
                  {
                    if ( v113 )
                    {
                      if ( v113 == 2 )
                        v114 = CPlayer::EventSetMora(v11, a2, a3, a4, 3);
                    }
                    else
                    {
                      v114 = CPlayer::EventSetMora(v11, a2, a3, a4, 1);
                    }
                  }
                  else
                  {
                    if ( v112 == 2 )
                    {
                      if ( v113 == 1 )
                      {
                        v114 = CPlayer::EventSetMora(v11, a2, a3, a4, 1);
                      }
                      else
                      {
                        if ( !v113 )
                          v114 = CPlayer::EventSetMora(v11, a2, a3, a4, 3);
                      }
                    }
                    else
                    {
                      v114 = CPlayer::EventSetMora(v11, a2, a3, a4, 2);
                    }
                  }
                }
                else
                {
                  if ( v113 == 2 )
                  {
                    v114 = CPlayer::EventSetMora(v11, a2, a3, a4, 1);
                  }
                  else
                  {
                    if ( v113 == 1 )
                      v114 = CPlayer::EventSetMora(v11, a2, a3, a4, 3);
                  }
                }
                CPlayer::Write(a2, a3, a4, v11, 14, (unsigned int)"bbbb");
              }
            }
          }
        }
      }
      break;
    case 78:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
        CPlayer::InitStat(a1, a2, a3, a4);
      break;
    case 80:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        CPlayer::AskPvP(v11, a2, a3, a4, v111);
      }
      break;
    case 81:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
        CPlayer::OnAskPvP(v11, a2, a3, a4, v110, v109);
      }
      break;
    case 46:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v214 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        v107 = 0;
        switch ( v108 )
        {
          case 1:
            v107 = CGuild::CreateTrial(a2, a3, a4, v11);
            break;
          case 3:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"b");
            v105 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v105 )
            {
              v107 = CGuild::CreateConsent(v105, a2, a3, a4, v11, v106);
              sub_4239C0(v105, a2, a3, a4, v105 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 5:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"s");
            v103 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v103 )
            {
              v107 = CGuild::CreateGuildName(a2, a3, a4, v11, v104);
              sub_4239C0(v103, a2, a3, a4, v103 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 7:
            v102 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v102 )
            {
              v107 = CGuild::AdminInfo(a2, a3, a4, v11);
              sub_4239C0(v102, a2, a3, a4, v102 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 8:
            v101 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v101 )
            {
              v107 = CGuild::BasicInfo(a2, a3, a4, v11);
              sub_4239C0(v101, a2, a3, a4, v101 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 0xA:
            v100 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v100 )
            {
              v107 = CGuild::Secession(v100, a2, a3, a4, v11);
              sub_4239C0(v100, a2, a3, a4, v100 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 0xB:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"s");
            v99 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v99 )
            {
              v107 = CGuild::SetTodayMessage(v99, a2, a3, a4, v11, v98);
              sub_4239C0(v99, a2, a3, a4, v99 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 0xC:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"b");
            v96 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v96 )
            {
              v107 = CGuild::SetExpADD(v96, a2, a3, a4, v11, v97);
              sub_4239C0(v96, a2, a3, a4, v96 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 0xD:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"ddddd");
            v91 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v91 )
            {
              v107 = CGuild::SetSkillAble(v91, a2, a3, a4, v11, v93, v94, v95, v90, v92);
              sub_4239C0(v91, a2, a3, a4, v91 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 0xF:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"ddb");
            v107 = CGuild::ConfluxAnswer(a2, a3, a4, v11, v87, v88, v89);
            break;
          case 0x10:
            v86 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v86 )
            {
              v107 = CGuild::Dissolution(v86, a2, a3, a4, v11);
              sub_4239C0(v86, a2, a3, a4, v86 + 40);
            }
            else
            {
              v107 = 1;
            }
            break;
          case 0x12:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"ddb");
            v83 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v83 )
            {
              v107 = CGuild::AllianceOfferAnswer(v83, a2, a3, a4, v11, v82, v84, v85);
              sub_4239C0(v83, a2, a3, a4, v83 + 40);
            }
            break;
          case 0x13:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            if ( dword_4E35B8 && dword_4E35B8 != 2 )
            {
              v107 = 70;
            }
            else
            {
              v80 = CPlayer::GetGuild(v11, a2, a3, a4);
              if ( v80 )
              {
                v79 = CNPC::FindNPC(a2, a3, a4, v81);
                if ( v79 )
                {
                  v107 = CGuild::WarDeclare(v80, a2, a3, a4, v11, *(_DWORD *)(v79 + 464));
                  CIOObject::Release(v79, a2, a3, a4);
                }
                sub_4239C0(v80, a2, a3, a4, v80 + 40);
              }
              else
              {
                v107 = 22;
              }
            }
            break;
          case 0x14:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            v78 = CNPC::FindNPC(a2, a3, a4, v77);
            if ( v78 )
            {
              CGuild::WarDelcareList(a2, a3, a4, v11, *(_DWORD *)(v78 + 464));
              CIOObject::Release(v78, a2, a3, a4);
            }
            break;
          case 0x15:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            v76 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v76 )
            {
              v74 = CNPC::FindNPC(a2, a3, a4, v75);
              if ( v74 )
              {
                if ( *(_DWORD *)(v74 + 452) == 16 )
                {
                  if ( sub_448870(v11 + 332, v74 + 332) <= 64 )
                    v107 = CGuild::TrialUnfurlStandard(v76, a2, a3, a4, v11, *(_DWORD *)(v74 + 464));
                }
                CIOObject::Release(v74, a2, a3, a4);
              }
              sub_4239C0(v76, a2, a3, a4, v76 + 40);
            }
            break;
          case 0x16:
            if ( CChar::IsGState(v11, 1024) )
            {
              (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v11 + 112))(v11, 1024);
              v7 = CPlayer::GetGID(v11, a2, a3, a4);
              CCastle::UnfurlStandardCancel(a2, a3, a4, v7);
            }
            break;
          case 0x17:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            v73 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v73 )
            {
              v71 = CNPC::FindNPC(a2, a3, a4, v72);
              if ( v71 )
              {
                v107 = CGuild::CastleInfo(a2, a3, a4, v11, *(_DWORD *)(v71 + 464));
                CIOObject::Release(v71, a2, a3, a4);
              }
              sub_4239C0(v73, a2, a3, a4, v73 + 40);
            }
            break;
          case 0x18:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"db");
            v69 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v69 )
            {
              v67 = CNPC::FindNPC(a2, a3, a4, v68);
              if ( v67 )
              {
                v107 = CGuild::TaxRateControl(a2, a3, a4, v11, *(_DWORD *)(v67 + 464), v70);
                CIOObject::Release(v67, a2, a3, a4);
              }
              sub_4239C0(v69, a2, a3, a4, v69 + 40);
            }
            break;
          case 0x1B:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            v66 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v66 )
            {
              v64 = CNPC::FindNPC(a2, a3, a4, v65);
              if ( v64 )
              {
                v107 = CGuild::TaxLevy(v66, a2, a3, a4, v11, *(_DWORD *)(v64 + 464));
                CIOObject::Release(v64, a2, a3, a4);
              }
              sub_4239C0(v66, a2, a3, a4, v66 + 40);
            }
            break;
          case 0x19:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            v63 = CNPC::FindNPC(a2, a3, a4, v62);
            if ( v63 )
            {
              v107 = CGuild::CastleGateNPC(a2, a3, a4, v11, *(_DWORD *)(v63 + 464), *(_DWORD *)(v63 + 448));
              CIOObject::Release(v63, a2, a3, a4);
            }
            break;
          case 0x1A:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"db");
            v60 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v60 )
            {
              v58 = CNPC::FindNPC(a2, a3, a4, v59);
              if ( v58 )
              {
                v107 = CGuild::CastleSetGateLmit(a2, a3, a4, v11, *(_DWORD *)(v58 + 464), v61);
                CIOObject::Release(v58, a2, a3, a4);
              }
              sub_4239C0(v60, a2, a3, a4, v60 + 40);
            }
            break;
          case 0x1C:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            v56 = CPlayer::GetGuild(v11, a2, a3, a4);
            if ( v56 )
            {
              v107 = CGuild::CheckStandard(v56, a2, a3, a4, v11, v57);
              sub_4239C0(v56, a2, a3, a4, v56 + 40);
            }
            break;
          case 0x1D:
            sub_4975F0(a2, a3, a4, v214, a7, (unsigned int)"d");
            CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v11 + 1020), a2, a3, a4);
            if ( *(_DWORD *)(v11 + 1096) && *(_DWORD *)(*(_DWORD *)(v11 + 1096) + 52) >= 500000 )
            {
              CIOCriticalSection::Leave(v11 + 1020, a2, a3, a4);
              v54 = CPlayer::GetGuild(v11, a2, a3, a4);
              if ( v54 )
              {
                v107 = CGuild::SetStandard(v54, a2, a3, a4, v11, v55);
                sub_4239C0(v54, a2, a3, a4, v54 + 40);
              }
            }
            else
            {
              CIOCriticalSection::Leave(v11 + 1020, a2, a3, a4);
            }
            break;
          default:
            break;
        }
        if ( v107 )
          CPlayer::Write(a2, a3, a4, v11, 94, (unsigned int)"bb");
      }
      break;
    case 79:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        if ( dword_4E1174[0] & 1 )
          CPlayer::PKBulletinInfoSend(a1, a2, a3, a4);
      }
      break;
    case 82:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bb");
        CPlayer::Transform(v11, a2, a3, a4, v52, v53);
      }
      break;
    case 85:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v215 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::MLMProcess(v11, a2, a3, a4, v51, v215, a7);
      }
      break;
    case 88:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( v50 )
        {
          if ( !CChar::IsGState(v11, 2048) )
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v11 + 100))(v11, 2048);
        }
        else
        {
          if ( CChar::IsGState(v11, 2048) )
            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v11 + 112))(v11, 2048);
        }
      }
      break;
    case 89:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v216 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::Shortcut(a2, a3, a4, v49, v216, a7);
      }
      break;
    case 90:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v217 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        CPlayer::SetMyTelPt(v11, a2, a3, a4, v48, v217, a7);
      }
      break;
    case 64:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v218 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( dword_4E1174[0] & 0x40 )
        {
          if ( v47 && v47 != 1 && v47 != 4 )
            sub_4328C0(
              "C2S_FRD wrong Type    PID(%d) Char(%s) UID(%d) Type(%d)",
              *(_DWORD *)(v11 + 452),
              v11 + 32,
              *(_DWORD *)(v11 + 448),
              v47);
          else
            CPlayer::FRDProcess(v11, a2, a3, a4, v47, v218, a7);
        }
      }
      break;
    case 92:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v219 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( *(_WORD *)dword_4E1174 & 0x400 )
        {
          if ( v46 && v46 != 2 && v46 != 6 && v46 != 8 && v46 != 9 && v46 != 10 )
            sub_4328C0(
              "C2S_MAIL wrong Type    PID(%d) Char(%s) UID(%d) Type(%d)",
              *(_DWORD *)(v11 + 452),
              v11 + 32,
              *(_DWORD *)(v11 + 448),
              v46);
          else
            CPlayer::MAILProcess(v11, a2, a3, a4, v46, v219, a7);
        }
      }
      break;
    case 94:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        v45 = CMonster::FindMonster(a2, a3, a4, v44);
        if ( v45 )
        {
          (*(void (__thiscall **)(int, int, _DWORD, char *, char *, char *, _DWORD))(*(_DWORD *)v45 + 72))(
            v45,
            v11,
            0,
            &v43,
            &v43,
            &v43,
            0);
          sub_4239C0(v45, a2, a3, a4, v45 + 352);
        }
      }
      break;
    case 93:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        v42 = CMonster::FindMonster(a2, a3, a4, v41);
        if ( v42 )
        {
          (*(void (__thiscall **)(int, int, signed int, char *, char *, char *, _DWORD))(*(_DWORD *)v42 + 72))(
            v42,
            v11,
            1,
            &v40,
            &v40,
            &v40,
            0);
          sub_4239C0(v42, a2, a3, a4, v42 + 352);
        }
      }
      break;
    case 96:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
        CPlayer::ChangePlayerName(v11, a2, a3, a4, v39);
      }
      break;
    case 95:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
        CPlayer::ChangeGuildName(v11, a2, a3, a4, v38);
      }
      break;
    case 53:
    case 12:
    case 13:
    case 14:
      return;
    case 59:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( *(_DWORD *)(v11 + 60) >= 50
          && *(_DWORD *)(v11 + 464) >= 7u
          && CPlayer::FindItem(v11, a2, a3, a4, 657, 1)
          && (*(_DWORD *)(v11 + 460) || (signed int)v37 <= 1)
          && (*(_DWORD *)(v11 + 460) != 1 || (signed int)v37 >= 4)
          && (*(_DWORD *)(v11 + 460) != 2 || v37 == 2 || v37 == 3) )
        {
          CChar::Lock(v11, a2, a3, a4);
          if ( CPlayer::RemoveItem(v11, a2, a3, a4, 9, 657, 1) )
          {
            v37 %= 2;
            if ( v37 )
              *(_DWORD *)(v11 + 464) = 11;
            else
              *(_DWORD *)(v11 + 464) = 7;
            sub_4803E0(v11 + 624, a2, a3, a4);
            CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
            CDBSocket::Write(a2, a3, a4, 15, (unsigned int)"db");
            CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
            CChar::WriteInSight(a2, a3, a4, v11, 73, (unsigned int)"db");
          }
          else
          {
            CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
          }
          CChar::Unlock(v11, a2, a3, a4);
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
        }
      }
      break;
    case 60:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        if ( CPlayer::FindItem(a1, a2, a3, a4, 661, 1) )
        {
          CChar::Lock(v11, a2, a3, a4);
          if ( CPlayer::RemoveItem(v11, a2, a3, a4, 9, 661, 1) )
          {
            sub_480540(v11 + 624, a2, a3, a4);
            CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
            CChar::WriteInSight(a2, a3, a4, v11, 73, (unsigned int)"db");
          }
          else
          {
            CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
          }
          CChar::Unlock(v11, a2, a3, a4);
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bb");
        }
      }
      break;
    case 61:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v8 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
        sub_4975F0(a2, a3, a4, v8, a7, (unsigned int)"b");
        CChar::WriteInSight(a2, a3, a4, v11, 24, (unsigned int)"db");
      }
      break;
    case 76:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( v36 == 2 )
        {
          CPlayer::AddEState(v11, 512);
        }
        else
        {
          if ( CPlayer::IsEState(v11, 512) )
          {
            CPlayer::SubEState(v11, 512);
            if ( CPlayer::GetInvenSize((void *)v11) < 60 )
            {
              v35 = CPlayer::_FindItem((void *)v11, (v36 != 0) + 663, 1);
              if ( v35 )
                CPlayer::ExchangeBoddariToItem(v11, a2, a3, a4, v36, v35);
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
              CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
            }
          }
        }
      }
      break;
    case 77:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( v34 == 2 )
        {
          CPlayer::AddEState(v11, 1024);
        }
        else
        {
          if ( CPlayer::IsEState(v11, 1024) )
          {
            CPlayer::SubEState(v11, 1024);
            if ( CPlayer::GetInvenSize((void *)v11) < 60 )
            {
              v33 = CPlayer::_FindItem((void *)v11, (v34 != 0) + 689, 1);
              if ( v33 )
                CPlayer::ExchangeDanjiToItem(v11, a2, a3, a4, v34, v33);
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
              CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
            }
          }
        }
      }
      break;
    case 54:
      if ( dword_4E1178 & 0x100 )
      {
        CAuthSocket::Write(a2, a3, a4, 16, (unsigned int)"dd");
        CDBSocket::Write(a2, a3, a4, 77, (unsigned int)"dd");
      }
      break;
    case 38:
      v30 = 0;
      v32 = 0;
      v31 = 0;
      v220 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"db");
      if ( v32 == 1 )
        sub_4975F0(a2, a3, a4, v220, a7, (unsigned int)"b");
      if ( *(_WORD *)dword_4E1174 & 0x1000 )
        CPlayer::SiegeGunProcess(v11, a2, a3, a4, 0, v30, v32, v31);
      break;
    case 39:
      v28 = 0;
      v29 = 0;
      sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"db");
      if ( *(_WORD *)dword_4E1174 & 0x1000 )
        CPlayer::SiegeGunProcess(v11, a2, a3, a4, 1, v28, v29, 0);
      break;
    case 40:
      *(_DWORD *)v27 = 0;
      v221 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
      if ( *(_WORD *)dword_4E1174 & 0x1000 )
        CPlayer::SiegeGunControl(v11, a2, a3, a4, *(int *)v27, v221, a7);
      break;
    case 98:
      if ( (*(_DWORD *)(a1 + 20) & 9) == 8 )
      {
        v222 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        if ( v26 )
        {
          if ( v26 == 1 )
          {
            sub_4975F0(a2, a3, a4, v222, a7, (unsigned int)"ddddd");
            sub_46F350(v11, a2, a3, a4, v18, v21, v19, v17, v20);
          }
          else
          {
            if ( v26 == 2 )
            {
              sub_4975F0(a2, a3, a4, v222, a7, (unsigned int)"ddddd");
              CPlayer::EnforceItem(v11, a2, a3, a4, 1, v13, v16, v14, v12, v15);
            }
          }
        }
        else
        {
          sub_4975F0(a2, a3, a4, v222, a7, (unsigned int)"dddd");
          CPlayer::EnforceItem(v11, a2, a3, a4, 0, v23, v25, v24, v22, 0);
        }
      }
      break;
    default:
      sub_4328C0(
        "Invalid packet type at CPlayer::Process() Type(%d) UID(%d) bit(%x)",
        a5,
        *(_DWORD *)(a1 + 448),
        *(_DWORD *)(a1 + 20));
      break;
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4E1178: using guessed type int dword_4E1178;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00456720) --------------------------------------------------------
int __thiscall CPlayer::GetInvenSize(void *this)
{
  return unknown_libname_10() - *((_DWORD *)this + 276);
}

//----- (00456750) --------------------------------------------------------
void __userpurge CPlayer::ExchangeBoddariToItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-8h]@1
  signed int v7; // [sp+4h] [bp-4h]@1

  v6 = a1;
  v7 = sub_406E10(1, 100000);
  if ( v7 <= 94450 )
  {
    if ( v7 <= 74450 )
    {
      if ( v7 <= 39450 )
      {
        if ( v7 <= 24450 )
        {
          if ( v7 <= 19450 )
          {
            if ( v7 <= 4450 )
            {
              if ( v7 <= 450 )
              {
                if ( v7 <= 400 )
                {
                  if ( v7 <= 300 )
                  {
                    if ( v7 <= 200 )
                    {
                      if ( v7 <= 120 )
                      {
                        if ( v7 <= 50 )
                        {
                          if ( a5 )
                            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 332, 1);
                          else
                            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 523, 1);
                        }
                        else
                        {
                          if ( a5 )
                            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 221, 1);
                          else
                            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 332, 1);
                        }
                      }
                      else
                      {
                        CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 329, 1);
                      }
                    }
                    else
                    {
                      CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 331, 1);
                    }
                  }
                  else
                  {
                    CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 327, 1);
                  }
                }
                else
                {
                  if ( a5 )
                    CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 220, 1);
                  else
                    CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 221, 1);
                }
              }
              else
              {
                if ( a5 )
                  CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 241, 1);
                else
                  CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 638, 1);
              }
            }
            else
            {
              if ( a5 )
                CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 447, 1);
              else
                CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 517, 1);
            }
          }
          else
          {
            if ( a5 )
              CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 207, 1);
            else
              CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 241, 1);
          }
        }
        else
        {
          if ( a5 )
            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 206, 1);
          else
            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 447, 1);
        }
      }
      else
      {
        if ( a5 )
          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 31, 1000);
        else
          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 31, 2000);
      }
    }
    else
    {
      if ( a5 )
        CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 48, 10);
      else
        CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 48, 20);
    }
  }
  else
  {
    if ( a5 )
      CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 31, 10000);
    else
      CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 31, 20000);
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (00456AD0) --------------------------------------------------------
void __userpurge CPlayer::ExchahgeItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // [sp+0h] [bp-Ch]@1
  int v10; // [sp+4h] [bp-8h]@5
  signed int i; // [sp+8h] [bp-4h]@3

  v9 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 120))(a5, v9, 9, -a6) )
    CPlayer::_OutofInven(v9, a2, a3, a4, a5);
  for ( i = 0; i < 5; ++i )
  {
    v10 = CItem::CreateItem(a8, 0, a9, -1);
    if ( v10 )
    {
      if ( CPlayer::_InsertItem((void *)v9, a2, a3, a4, a7, v10) != 1 )
      {
        CBase::Delete((void *)v10);
        sub_4328C0(
          "INSERT_FAIL at CPlayer::ExchahgeItem() While Creating Item PID(%d) NewItemIndex(%d) NewItemNum(%d) ",
          *(_DWORD *)(v9 + 452),
          a8,
          a9);
      }
      break;
    }
    sub_4328C0(
      "Create Item Fail at CPlayer::ExchahgeItem() PID(%d) NewItemIndex(%d) NewItemNum(%d) ",
      *(_DWORD *)(v9 + 452),
      a8,
      a9);
  }
  CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
}

//----- (00456BC0) --------------------------------------------------------
int __thiscall CPlayer::GetNeedPoint(int this, int a2)
{
  int result; // eax@2
  signed int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)(this + 4 * a2 + 64);
  if ( v3 < 250 )
  {
    if ( (*(_DWORD *)(this + 460) || a2)
      && (*(_DWORD *)(this + 460) != 1 || a2 != 2)
      && (*(_DWORD *)(this + 460) != 2 || a2 != 4) )
      result = dword_4D7960[v3];
    else
      result = dword_4D7D48[v3];
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4D7960: using guessed type int dword_4D7960[];
// 4D7D48: using guessed type int dword_4D7D48[];

//----- (00456C40) --------------------------------------------------------
signed int __userpurge CPlayer::OnLoadPlayer<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  signed int result; // eax@2
  int v6; // eax@5
  int v7; // eax@5
  int v8; // eax@5
  int v9; // eax@5
  int v10; // eax@5
  int v11; // eax@5
  int v12; // eax@5
  int v13; // eax@5
  int v14; // eax@5
  int v15; // eax@5
  int v16; // eax@5
  int v17; // eax@5
  int v18; // eax@5
  int v19; // eax@5
  int v20; // eax@5
  int v21; // eax@5
  int v22; // eax@5
  int v23; // eax@5
  int v24; // eax@6
  int v25; // eax@18
  int v26; // edx@19
  int v27; // ecx@21
  int v28; // eax@39
  int v29; // edx@41
  int v30; // ecx@44
  int v31; // eax@46
  int v32; // edx@54
  int v33; // ecx@56
  int v34; // eax@59
  int v35; // edx@61
  int v36; // eax@83
  int v37; // eax@88
  int v38; // ecx@112
  int v39; // eax@120
  int v40; // [sp+0h] [bp-B0h]@104
  int v41; // [sp+4h] [bp-ACh]@97
  int v42; // [sp+8h] [bp-A8h]@21
  int v43; // [sp+Ch] [bp-A4h]@1
  int v44; // [sp+10h] [bp-A0h]@103
  int v45; // [sp+14h] [bp-9Ch]@96
  char v46; // [sp+18h] [bp-98h]@88
  char v47; // [sp+24h] [bp-8Ch]@83
  char v48; // [sp+2Ch] [bp-84h]@83
  int v49; // [sp+4Ch] [bp-64h]@110
  int v50; // [sp+50h] [bp-60h]@110
  int ii; // [sp+54h] [bp-5Ch]@108
  int v52; // [sp+58h] [bp-58h]@106
  int n; // [sp+5Ch] [bp-54h]@101
  int v54; // [sp+60h] [bp-50h]@99
  int m; // [sp+64h] [bp-4Ch]@94
  char v56; // [sp+68h] [bp-48h]@88
  char v57; // [sp+6Ch] [bp-44h]@88
  int v58; // [sp+70h] [bp-40h]@88
  int v59; // [sp+74h] [bp-3Ch]@88
  int v60; // [sp+78h] [bp-38h]@88
  int l; // [sp+7Ch] [bp-34h]@86
  int v62; // [sp+80h] [bp-30h]@83
  int k; // [sp+84h] [bp-2Ch]@81
  int v64; // [sp+88h] [bp-28h]@16
  int j; // [sp+8Ch] [bp-24h]@13
  int i; // [sp+90h] [bp-20h]@8
  unsigned __int8 v67; // [sp+96h] [bp-1Ah]@10
  unsigned __int8 v68; // [sp+97h] [bp-19h]@10
  int v69; // [sp+98h] [bp-18h]@5
  int v70; // [sp+9Ch] [bp-14h]@7
  int v71; // [sp+A0h] [bp-10h]@3
  int v72; // [sp+A4h] [bp-Ch]@7
  int v73; // [sp+A8h] [bp-8h]@7
  int v74; // [sp+ACh] [bp-4h]@113

  v43 = a1;
  CChar::Lock(a1, a2, a3, a4);
  if ( CPlayer::IsPBit(v43, 4) )
  {
    CChar::Unlock(v43, a2, a3, a4);
    result = 0;
  }
  else
  {
    v71 = sub_418960(a5, v43 + 456);
    if ( *(_DWORD *)(v43 + 456) == 1 )
    {
      CPlayer::Write(a2, a3, a4, v43, 67, (unsigned int)"b");
      CChar::Unlock(v43, a2, a3, a4);
      result = 0;
    }
    else
    {
      v6 = sub_497620(v71, v43 + 32);
      v7 = sub_418960(v6, v43 + 460);
      v8 = sub_418960(v7, v43 + 464);
      v9 = sub_418960(v8, v43 + 60);
      v10 = sub_418980(v9, v43 + 468);
      v11 = sub_47A220(v10, v43 + 472);
      v12 = sub_47A240(v11, v43 + 480);
      v13 = sub_418960(v12, v43 + 536);
      v14 = sub_418960(v13, v43 + 64);
      v15 = sub_418960(v14, v43 + 68);
      v16 = sub_418960(v15, v43 + 72);
      v17 = sub_418960(v16, v43 + 76);
      v18 = sub_418960(v17, v43 + 80);
      v19 = sub_418980(v18, v43 + 272);
      v20 = sub_418980(v19, v43 + 276);
      v21 = sub_418980(v20, v43 + 544);
      v22 = sub_418980(v21, v43 + 548);
      v23 = sub_418960(v22, v43 + 552);
      v71 = sub_418960(v23, v43 + 316);
      v71 = sub_47A240(v71, &v69);
      if ( v69 >= 0 )
      {
        v71 = sub_47A240(v71, &v70);
        v71 = sub_47A240(v71, v43 + 340);
        v71 = sub_418960(v71, v43 + 556);
        v71 = sub_418960(v71, v43 + 560);
        v71 = sub_418960(v71, v43 + 572);
        v71 = sub_47A240(v71, v43 + 580);
        CChar::SetXY(v43, (int)&v69);
        (*(void (__thiscall **)(int))(*(_DWORD *)v43 + 84))(v43);
        sub_47F680(v43 + 624, v43);
        v73 = 0;
        v72 = v71;
        v71 = sub_418960(v71, &v73);
        if ( v73 )
        {
          for ( i = 0; i < v73; ++i )
          {
            v71 = sub_418960(v71, &v68);
            v71 = sub_418960(v71, &v67);
            sub_47F6B0(v43 + 624, v68, v67);
          }
          sub_47FC00((void *)(v43 + 624));
          CPlayer::Write(a2, a3, a4, v43, 16, (unsigned int)"m");
        }
        v71 = sub_418960(v71, &v73);
        if ( v73 )
        {
          CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1020), a2, a3, a4);
          for ( j = 0; j < v73; ++j )
          {
            v64 = sub_426060(*(_DWORD *)(v43 + 452), &v71);
            if ( v64 )
            {
              if ( CItem::IsState(v64, 1) )
              {
                v25 = *(_DWORD *)(v64 + 48);
                if ( v25 & 0x7FF00 )
                {
                  v26 = *(_DWORD *)(v64 + 48);
                  if ( v26 & 0x100000 )
                    CChar::AddGState(v43, -2147483648);
                  v27 = *(_DWORD *)(v64 + 48);
                  v42 = v27 & 0x7FF00;
                  if ( (v27 & 0x7FF00u) > 0x2000 )
                  {
                    if ( (unsigned int)v42 > 0x10000 )
                    {
                      if ( v42 == 131072 )
                      {
                        CChar::AddGState(v43, 536870912);
                        (*(void (__cdecl **)(int, signed int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(
                          v43,
                          27,
                          1,
                          50,
                          50);
                        (*(void (__cdecl **)(int, signed int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(
                          v43,
                          28,
                          1,
                          50,
                          50);
                      }
                      else
                      {
                        if ( v42 == 262144 )
                        {
                          CChar::AddGState(v43, 1073741824);
                          (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(
                            v43,
                            5,
                            1,
                            50);
                          (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(
                            v43,
                            6,
                            1,
                            50);
                          (*(void (__cdecl **)(int, _DWORD, signed int, signed int))(*(_DWORD *)v43 + 92))(v43, 0, 1, 6);
                          (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                            v43,
                            2,
                            1,
                            6);
                          (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(v43, 4, 1, 6);
                          (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(
                            v43,
                            3,
                            1,
                            10);
                          (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                            v43,
                            1,
                            1,
                            10);
                        }
                      }
                    }
                    else
                    {
                      switch ( v42 )
                      {
                        case 65536:
                          CChar::AddGState(v43, 268435456);
                          v34 = *(_DWORD *)(v64 + 48);
                          if ( v34 & 0x80000 )
                          {
                            (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 96))(
                              v43,
                              5,
                              0,
                              5);
                            (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 96))(
                              v43,
                              6,
                              1,
                              10);
                          }
                          else
                          {
                            v35 = *(_DWORD *)(v64 + 48);
                            if ( v35 & 0x100000 )
                            {
                              (*(void (__cdecl **)(int, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 96))(
                                v43,
                                5,
                                0,
                                10);
                              (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 96))(
                                v43,
                                6,
                                1,
                                20);
                            }
                          }
                          break;
                        case 16384:
                          CChar::AddGState(v43, 67108864);
                          break;
                        case 32768:
                          CChar::AddGState(v43, 134217728);
                          v32 = *(_DWORD *)(v64 + 48);
                          if ( v32 & 0x80000 )
                          {
                            (*(void (__cdecl **)(_DWORD, _DWORD, signed int, _DWORD))(*(_DWORD *)v43 + 96))(
                              v43,
                              5,
                              1,
                              10);
                            (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 96))(
                              v43,
                              6,
                              0,
                              5);
                          }
                          else
                          {
                            v33 = *(_DWORD *)(v64 + 48);
                            if ( v33 & 0x100000 )
                            {
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v43 + 96))(
                                v43,
                                5,
                                1,
                                20);
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v43 + 96))(v43, 6, 0, 10);
                            }
                          }
                          break;
                      }
                    }
                  }
                  else
                  {
                    if ( v42 == 8192 )
                    {
                      CChar::AddGState(v43, 33554432);
                    }
                    else
                    {
                      if ( (unsigned int)v42 > 0x400 )
                      {
                        if ( v42 == 2048 )
                        {
                          CChar::AddGState(v43, 8388608);
                        }
                        else
                        {
                          if ( v42 == 4096 )
                            CChar::AddGState(v43, 16777216);
                        }
                      }
                      else
                      {
                        switch ( v42 )
                        {
                          case 1024:
                            CChar::AddGState(v43, 4194304);
                            break;
                          case 256:
                            CChar::AddGState(v43, 1048576);
                            v28 = *(_DWORD *)(v64 + 48);
                            if ( v28 & 0x80000 )
                            {
                              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                v43,
                                5,
                                1,
                                20);
                              (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                v43,
                                0,
                                1,
                                2);
                              (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(
                                v43,
                                2,
                                1,
                                2);
                              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(
                                v43,
                                4,
                                1,
                                2);
                            }
                            else
                            {
                              v29 = *(_DWORD *)(v64 + 48);
                              if ( v29 & 0x100000 )
                              {
                                (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                  v43,
                                  5,
                                  1,
                                  50);
                                (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                  v43,
                                  0,
                                  1,
                                  3);
                                (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                  v43,
                                  2,
                                  1,
                                  3);
                                (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(
                                  v43,
                                  4,
                                  1,
                                  3);
                              }
                            }
                            break;
                          case 512:
                            CChar::AddGState(v43, 2097152);
                            v30 = *(_DWORD *)(v64 + 48);
                            if ( v30 & 0x80000 )
                            {
                              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                v43,
                                6,
                                1,
                                20);
                              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(
                                v43,
                                3,
                                1,
                                2);
                              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(
                                v43,
                                1,
                                1,
                                2);
                            }
                            else
                            {
                              v31 = *(_DWORD *)(v64 + 48);
                              if ( v31 & 0x100000 )
                              {
                                (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(
                                  v43,
                                  6,
                                  1,
                                  50);
                                (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                  v43,
                                  3,
                                  1,
                                  5);
                                (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v43 + 92))(
                                  v43,
                                  1,
                                  1,
                                  5);
                              }
                            }
                            break;
                        }
                      }
                    }
                  }
                }
              }
              if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v64 + 148))(v64, v64) || *(_DWORD *)(v64 + 52) <= 1 )
              {
                if ( CPlayer::_IntoInven(v43, a2, a3, a4, v64) )
                {
                  if ( (*(int (__thiscall **)(int))(*(_DWORD *)v64 + 164))(v64) )
                  {
                    *(_DWORD *)(v43 + 1096) = v64;
                    if ( *(_DWORD *)(*(_DWORD *)(v43 + 1096) + 52) < 0 )
                    {
                      sub_4328C0(
                        "m_pMoney->m_nNum <0 :  UID(%d) PID(%d) IID(%d) Num(%d) ",
                        *(_DWORD *)(v43 + 448),
                        *(_DWORD *)(v43 + 452),
                        *(_DWORD *)(v64 + 36),
                        *(_DWORD *)(*(_DWORD *)(v43 + 1096) + 52));
                      CDBSocket::Write(a2, a3, a4, 8, (unsigned int)"ddwdb");
                      *(_DWORD *)(*(_DWORD *)(v43 + 1096) + 52) = 1;
                    }
                  }
                  else
                  {
                    if ( (*(int (__thiscall **)(int))(*(_DWORD *)v64 + 196))(v64) )
                      ++*(_DWORD *)(v43 + 1104);
                  }
                }
                else
                {
                  sub_4328C0("CPlayer::OnLoadPlayer() Item insert error. (IID:%d)", *(_DWORD *)(v64 + 36));
                  CBase::Delete((void *)v64);
                }
              }
              else
              {
                sub_4328C0(
                  "CPlayer::OnLoadPlayer() ",
                  v43 + 32,
                  *(_DWORD *)(v43 + 452),
                  *(_DWORD *)(v43 + 448),
                  *(_DWORD *)(*(_DWORD *)(v64 + 40) + 64),
                  *(_DWORD *)(v64 + 52));
                CBase::Delete((void *)v64);
              }
            }
          }
          CIOCriticalSection::Leave(v43 + 1020, a2, a3, a4);
        }
        v71 = sub_418960(v71, &v73);
        if ( v73 )
        {
          CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1020), a2, a3, a4);
          for ( k = 0; k < v73; ++k )
          {
            v62 = v71;
            v36 = sub_472830((int)&v48, v71 + 2, (const void *)v71);
            sub_470890(v43 + 1128, (int)&v47, v36);
            v71 += 26;
          }
          CIOCriticalSection::Leave(v43 + 1020, a2, a3, a4);
        }
        v72 = v71;
        v71 = sub_418960(v71, &v73);
        if ( v73 )
        {
          for ( l = 0; l < v73; ++l )
          {
            v58 = 0;
            v59 = 0;
            v60 = 0;
            v71 = sub_418980(v71, (int)&v58);
            v71 = sub_418960(v71, &v59);
            v71 = sub_418960(v71, &v60);
            v37 = sub_472860((int)&v46, (int)&v58, (int)&v59);
            sub_4715D0(v43 + 1256, (int)&v56, v37);
            if ( !v57 )
              sub_4328C0("CPlayer::OnLoadPlayer() Duplicate Quest. (PID:%d, Quest:%d)", *(_DWORD *)(v43 + 452), v58);
          }
          CPlayer::Write(a2, a3, a4, v43, 87, (unsigned int)"m");
        }
        if ( dword_4E1178 & 4 )
        {
          v71 = sub_418960(v71, &v73);
          if ( v73 )
          {
            for ( m = 0; m < v73; ++m )
            {
              v45 = (int)sub_401000(0x10u);
              if ( v45 )
                v41 = sub_457E30(v45);
              else
                v41 = 0;
              v54 = v41;
              v71 = sub_418960(v71, v41 + 4);
              v71 = sub_47A240(v71, v54 + 8);
              CPlayer::EventInsert(v43, v54);
            }
          }
        }
        v71 = sub_418960(v71, &v73);
        if ( v73 )
        {
          for ( n = 0; n < v73; ++n )
          {
            v44 = (int)sub_401000(0x30u);
            if ( v44 )
              v40 = sub_457E60(v44);
            else
              v40 = 0;
            v52 = v40;
            v71 = sub_418960(v71, v40);
            v71 = sub_497620(v71, v52 + 8);
            v71 = sub_47A240(v71, v52 + 4);
            v71 = sub_47A240(v71, v52 + 40);
            v71 = sub_418960(v71, v52 + 28);
            v71 = sub_418960(v71, v52 + 32);
            CPlayer::MLMLoad(v43, a2, a3, a4, v52);
          }
        }
        v71 = sub_418960(v71, &v73);
        if ( v73 )
        {
          for ( ii = 0; ii < v73; ++ii )
          {
            v50 = 0;
            v49 = 0;
            v71 = sub_418960(v71, &v50);
            v71 = sub_47A240(v71, &v49);
            CChar::SetBuff(v43, a2, a3, a4, v50, v49);
          }
        }
        if ( CPlayer::IsPCBang(v43) )
        {
          v38 = *(_DWORD *)(v43 + 308);
          *(_DWORD *)(v43 + 304) |= 1u;
          *(_DWORD *)(v43 + 308) = v38;
        }
        v71 = sub_47A240(v71, &v74);
        if ( v74
          && (CChar::Unlock(v43, a2, a3, a4),
              CGuild::Load(a2, a3, a4, v74, v71, 0),
              CChar::Lock(v43, a2, a3, a4),
              CPlayer::IsPBit(v43, 4)) )
        {
          CChar::Unlock(v43, a2, a3, a4);
          result = 0;
        }
        else
        {
          if ( *(_DWORD *)(v43 + 480)
            && (CChar::Unlock(v43, a2, a3, a4), CGuild::Login(a2, a3, a4, v43),
                                             CChar::Lock(v43, a2, a3, a4),
                                             CPlayer::IsPBit(v43, 4)) )
          {
            CChar::Unlock(v43, a2, a3, a4);
            result = 0;
          }
          else
          {
            if ( CGuild::IsWarringPeriod()
              && (CChar::Unlock(v43, a2, a3, a4),
                  v39 = CPlayer::GetGID(v43, a2, a3, a4),
                  CGuild::LoginCastle(a2, a3, a4, v43, v39),
                  CChar::Lock(v43, a2, a3, a4),
                  CPlayer::IsPBit(v43, 4)) )
            {
              CChar::Unlock(v43, a2, a3, a4);
              result = 0;
            }
            else
            {
              sub_496CD0();
              if ( CPlayer::_Create(v43, a2, a3, a4) )
              {
                CChar::Unlock(v43, a2, a3, a4);
                result = 1;
              }
              else
              {
                CChar::Unlock(v43, a2, a3, a4);
                result = 0;
              }
            }
          }
        }
      }
      else
      {
        CChar::Unlock(v43, a2, a3, a4);
        sub_422B30("CPlayer::OnLoadPlayer PID(%d) X(%d) Y(%d) \n", *(_DWORD *)(v43 + 452));
        sub_422D80(v24, a2, a3, a4);
        result = 0;
      }
    }
  }
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 4E1178: using guessed type int dword_4E1178;

//----- (00457E30) --------------------------------------------------------
int __thiscall sub_457E30(int this)
{
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (00457E60) --------------------------------------------------------
int __thiscall sub_457E60(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  memset((void *)(this + 8), 0, 0x11u);
  *(_DWORD *)(v2 + 44) = 0;
  return v2;
}

//----- (00457ED0) --------------------------------------------------------
signed int __usercall CPlayer::_Create<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@6
  int v5; // eax@7
  __int16 v7; // ax@10
  int v8; // [sp+0h] [bp-20h]@1
  char v9; // [sp+4h] [bp-1Ch]@7
  char v10; // [sp+8h] [bp-18h]@6
  int v11; // [sp+Ch] [bp-14h]@7
  char v12; // [sp+10h] [bp-10h]@5
  void *v13; // [sp+14h] [bp-Ch]@5
  char *v14; // [sp+18h] [bp-8h]@5
  void *v15; // [sp+1Ch] [bp-4h]@5

  v8 = a1;
  *(_DWORD *)(a1 + 320) = sub_491080(*(_DWORD *)(a1 + 316));
  if ( !*(_DWORD *)(v8 + 320) )
  {
    sub_4328C0("CPlayer::_Create() Invalid Map or Tile. (map:%d)", *(_DWORD *)(v8 + 316));
LABEL_11:
    sub_496CE0();
    return 0;
  }
  if ( !CPlayer::Add(v8, a2, a3, a4) )
    goto LABEL_11;
  v15 = CIOBuffer::Alloc();
  v13 = v15;
  *((_BYTE *)v15 + 2) = 4;
  v14 = (char *)v13 + 4;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v8 + 1020), a2, a3, a4);
  sub_40F070(v8 + 1068, &v12);
  while ( 1 )
  {
    v4 = sub_430C20(v8 + 1068, &v10);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v5 = sub_446090((int *)&v12, (int)&v9, 0);
    v11 = *(_DWORD *)(sub_420250((int *)v5) + 4);
    CIOObject::AddRef(v11, a2, a3, a4);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)v11 + 84))(v11, v8);
    if ( !CBase::IsDeleted(v11) )
      (*(void (__thiscall **)(int, char **, _DWORD))(*(_DWORD *)v11 + 72))(v11, &v14, 0);
    CIOObject::Release(v11, a2, a3, a4);
  }
  CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
  unknown_libname_10();
  sub_496F10(a2, a3, a4, (char *)v13 + 3, (unsigned int)"b");
  *(_WORD *)v13 = (_WORD)v14 - (_WORD)v13;
  *((_DWORD *)v15 + 2000) = *(_WORD *)v13;
  CSocket::_CSocket(*(_DWORD *)(v8 + 1676), a2, a3, a4, (int)v15);
  CChar::GetResist((void *)v8, 4);
  CChar::GetResist((void *)v8, 3);
  CChar::GetResist((void *)v8, 2);
  CChar::GetResist((void *)v8, 1);
  CChar::GetResist((void *)v8, 0);
  CChar::GetMaxMagic(v8);
  CChar::GetMinMagic(v8);
  CChar::GetMaxAttack(v8);
  CChar::GetMinAttack(v8);
  CChar::GetAbsorb(v8);
  CChar::GetDefense((void *)v8, 0);
  CChar::GetDodge(v8);
  CChar::GetHit(v8);
  CChar::GetMaxMP(v8);
  CChar::GetMaxHP(v8);
  CChar::GetDex(v8);
  CChar::GetWis(v8);
  CChar::GetInt(v8);
  CChar::GetHth(v8);
  CChar::GetStr(v8);
  CPlayer::Write(a2, a3, a4, v8, 66, (unsigned int)"bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd");
  sub_496CD0();
  v7 = CCalendar::GetTime();
  CPlayer::Write(a2, a3, a4, v8, 27, (unsigned int)"wdd");
  sub_493EB0((int)((char *)&unk_4E2758 + 60 * *(_DWORD *)(v8 + 316)), a2, a3, a4);
  CPlayer::Write(a2, a3, a4, v8, 22, (unsigned int)"bb");
  return 1;
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00458210) --------------------------------------------------------
int __thiscall CChar::GetMinMagic(int this)
{
  return *(_DWORD *)(this + 136) + *(_DWORD *)(this + 232) * *(_DWORD *)(this + 136) / 100;
}
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);

//----- (00458240) --------------------------------------------------------
int __thiscall CChar::GetMaxMagic(int this)
{
  return *(_DWORD *)(this + 140) + *(_DWORD *)(this + 236) * *(_DWORD *)(this + 140) / 100;
}

//----- (00458270) --------------------------------------------------------
void __usercall CPlayer::GameStart(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST5C_4@1
  time_t v5; // eax@5
  void *v6; // eax@5
  int v7; // [sp+0h] [bp-8h]@1

  v7 = a1;
  CChar::Lock(a1, a2, a3, a4);
  sub_491360(*(void **)(v7 + 320), a2, a3, a4, v7, v7 + 324);
  CPlayer::GetGuildName(v7);
  CPlayer::GetGuildClassTitle(v7);
  CPlayer::Write(a2, a3, a4, v7, 50, (unsigned int)"dsbdddwdmbbIssdbd");
  CPlayer::GetGuildName(v7);
  CPlayer::GetGuildClassTitle(v7);
  v4 = (int)sub_44FCE0(a2, a3, a4, 50, (unsigned int)"dsbdddwdmbbIssdbd");
  sub_493390(*(_DWORD *)(v7 + 320), a2, a3, a4, v7, v7 + 324, v4);
  CIOBuffer::Release(v4);
  sub_496CD0();
  CPlayer::IsPCBang(v7);
  CPlayer::Write(a2, a3, a4, v7, 28, (unsigned int)"b");
  CChar::Unlock(v7, a2, a3, a4);
  if ( !CChar::IsGState(v7, 2) )
  {
    CChar::AddGState(v7, 8192);
    *(_DWORD *)(v7 + 1448) = GetTickCount() + 10000;
  }
  if ( dword_4E1178 & 0x40 )
  {
    if ( dword_4E1FF4 > time(0) )
    {
      v5 = time(0);
      v6 = CBuff::CreateBuff(dword_4E1FF8, dword_4E1FF4 - v5, 0, v7);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v7 + 180))(v7, v6);
    }
  }
  CDBSocket::Write(a2, a3, a4, 70, (unsigned int)"dd");
  if ( dword_4E1174[0] & 0x40 )
    CDBSocket::Write(a2, a3, a4, 29, (unsigned int)"db");
  if ( *(_WORD *)dword_4E1174 & 0x400 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 1396), a2, a3, a4);
    sub_471BE0(v7 + 1428);
    CIOCriticalSection::Leave(v7 + 1396, a2, a3, a4);
    CDBSocket::Write(a2, a3, a4, 30, (unsigned int)"dbd");
  }
}
// 4E1178: using guessed type int dword_4E1178;
// 4E1FF4: using guessed type int dword_4E1FF4;
// 4E1FF8: using guessed type int dword_4E1FF8;

//----- (004585B0) --------------------------------------------------------
int __usercall CPlayer::GameRestart<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)a1;
  CBase::Delete(a1);
  CSocket::Lock(*(_DWORD *)(v6 + 1676), a2, a3, a4);
  v4 = *(_DWORD *)(*(_DWORD *)(v6 + 1676) + 120);
  if ( v4 != v6 )
    sub_422D80(v4, a2, a3, a4);
  *(_DWORD *)(*(_DWORD *)(v6 + 1676) + 120) = 0;
  CSocket::Unlock(*(_DWORD *)(v6 + 1676), a2, a3, a4);
  sub_496CE0();
  sub_496CE0();
  CSocket::Id(*(_DWORD *)(v6 + 1676));
  CDBSocket::Write(a2, a3, a4, 33, (unsigned int)"dd");
  return sub_4239C0(v6, a2, a3, a4, v6 + 440);
}
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);

//----- (00458680) --------------------------------------------------------
int __thiscall CSocket::Id(int this)
{
  return *(_DWORD *)(this + 280);
}
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);

//----- (004586A0) --------------------------------------------------------
void __userpurge CPlayer::SaveAllProperty(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@4

  v5 = a1;
  *(_DWORD *)(a1 + 1440) = 0;
  CDBSocket::Write(a2, a3, a4, 2, (unsigned int)"dbbwIbbbbbbwwwwbbddddb");
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v5 + 1020), a2, a3, a4);
  if ( !a5 )
  {
    if ( *(_DWORD *)(v5 + 1108) )
      CItemTransform::SaveInfo(a2, a3, a4, 0);
  }
  v6 = *(_DWORD *)(v5 + 1344);
  *(_DWORD *)(v5 + 1344) = 0;
  CIOCriticalSection::Leave(v5 + 1020, a2, a3, a4);
  if ( v6 )
    CPlayer::MLMAccumFee(v5, a2, a3, a4, v6);
}

//----- (00458800) --------------------------------------------------------
void __usercall CPlayer::UpdateProperty(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, signed __int64 a7)
{
  int v7; // eax@3
  int v8; // STB4_4@3
  signed int v9; // STA4_4@6
  signed int v10; // eax@6
  int v11; // STAC_4@6
  signed int v12; // STA8_4@6
  signed int v13; // eax@9
  signed int v14; // ST98_4@9
  signed int v15; // ST8C_4@12
  signed int v16; // eax@12
  signed int v17; // ST90_4@12
  signed int v18; // eax@15
  signed int v19; // ST84_4@15
  int v20; // ecx@48
  int v21; // edx@49
  int v22; // ecx@49
  int v23; // ecx@52
  unsigned __int64 v24; // qax@52
  int v25; // ecx@54
  int v26; // ecx@58
  int v27; // [sp+0h] [bp-98h]@77
  int v28; // [sp+4h] [bp-94h]@73
  int v29; // [sp+14h] [bp-84h]@33
  int v30; // [sp+18h] [bp-80h]@29
  int v31; // [sp+1Ch] [bp-7Ch]@23
  int v32; // [sp+20h] [bp-78h]@19
  int v33; // [sp+30h] [bp-68h]@68
  int v34; // [sp+34h] [bp-64h]@65
  int v35; // [sp+38h] [bp-60h]@62
  int v36; // [sp+3Ch] [bp-5Ch]@61
  signed __int64 v37; // [sp+40h] [bp-58h]@45
  int v38; // [sp+60h] [bp-38h]@14
  int v39; // [sp+6Ch] [bp-2Ch]@11
  int v40; // [sp+74h] [bp-24h]@8
  int v41; // [sp+88h] [bp-10h]@5
  int v42; // [sp+90h] [bp-8h]@2

  switch ( a5 )
  {
    case 0:
      v42 = a7;
      if ( a6 )
      {
        v7 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) -= 15 * v7 / 54;
        *(_DWORD *)(a4 + 128) -= (11 * v7 - 80) / 30;
        *(_DWORD *)(a4 + 132) -= (8 * v7 - 25) / 15;
        *(_DWORD *)(a4 + 64) += v42;
        v8 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) += 15 * v8 / 54;
        *(_DWORD *)(a4 + 128) += (11 * v8 - 80) / 30;
        *(_DWORD *)(a4 + 132) += (8 * v8 - 25) / 15;
        CChar::GetMaxAttack(a4);
        CChar::GetMinAttack(a4);
        CChar::GetHit(a4);
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwww");
      }
      break;
    case 1:
      v41 = a7;
      if ( a6 )
      {
        v9 = dword_4D6A10[*(_DWORD *)(a4 + 460)];
        v10 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) -= 2 * v10 * v10 / v9;
        *(_DWORD *)(a4 + 176) -= v10 / 9;
        v11 = *(_DWORD *)(a4 + 68);
        *(_DWORD *)(a4 + 68) += v41;
        v12 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) += 2 * v12 * v12 / v9;
        *(_DWORD *)(a4 + 176) += v12 / 9;
        sub_47FC50(a4 + 624, 30, 2 * v11 * v11 / v9);
        CChar::GetResist((void *)a4, 4);
        CChar::GetMaxHP(a4);
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwww");
        CPlayer::UpdatePartyMember(a4, a1, a2, a3, 7);
      }
      break;
    case 2:
      v40 = a7;
      if ( a6 )
      {
        v13 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) -= (7 * v13 - 20) / 12;
        *(_DWORD *)(a4 + 140) -= 7 * v13 / 12;
        *(_DWORD *)(a4 + 160) -= v13 / 9;
        *(_DWORD *)(a4 + 164) -= v13 / 9;
        *(_DWORD *)(a4 + 168) -= v13 / 9;
        *(_DWORD *)(a4 + 72) += v40;
        v14 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) += (7 * v14 - 20) / 12;
        *(_DWORD *)(a4 + 140) += 7 * v14 / 12;
        *(_DWORD *)(a4 + 160) += v14 / 9;
        *(_DWORD *)(a4 + 164) += v14 / 9;
        *(_DWORD *)(a4 + 168) += v14 / 9;
        CChar::GetResist((void *)a4, 2);
        CChar::GetResist((void *)a4, 1);
        CChar::GetResist((void *)a4, 0);
        CChar::GetMaxMagic(a4);
        CChar::GetMinMagic(a4);
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwwwww");
      }
      break;
    case 3:
      v39 = a7;
      if ( a6 )
      {
        v15 = dword_4D6A1C[*(_DWORD *)(a4 + 460)];
        v16 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) -= v16 + 2 * v16 * v16 / v15;
        *(_DWORD *)(a4 + 136) -= v16 / 7;
        *(_DWORD *)(a4 + 140) -= 14 * v16 / 45;
        *(_DWORD *)(a4 + 172) -= v16 / 9;
        *(_DWORD *)(a4 + 76) += v39;
        v17 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) += v17 + 2 * v17 * v17 / v15;
        *(_DWORD *)(a4 + 136) += v17 / 7;
        *(_DWORD *)(a4 + 140) += 14 * v17 / 45;
        *(_DWORD *)(a4 + 172) += v17 / 9;
        CChar::GetResist((void *)a4, 3);
        CChar::GetMaxMP(a4);
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwww");
      }
      break;
    case 4:
      v38 = a7;
      if ( a6 )
      {
        v18 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) -= v18 / 8;
        *(_DWORD *)(a4 + 124) -= v18 / 3;
        *(_DWORD *)(a4 + 128) -= (v18 - 5) / 11;
        *(_DWORD *)(a4 + 132) -= 18 * v18 / 77;
        *(_DWORD *)(a4 + 80) += v38;
        v19 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) += v19 / 8;
        *(_DWORD *)(a4 + 124) += v19 / 3;
        *(_DWORD *)(a4 + 128) += (v19 - 5) / 11;
        *(_DWORD *)(a4 + 132) += 18 * v19 / 77;
        CChar::GetMaxAttack(a4);
        CChar::GetMinAttack(a4);
        CChar::GetDodge(a4);
        CChar::GetHit(a4);
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwwww");
      }
      break;
    case 7:
      if ( a6 )
      {
        *(_DWORD *)(a4 + 272) += a7;
        if ( CChar::GetMaxHP(a4) >= *(_DWORD *)(a4 + 272) )
          v32 = *(_DWORD *)(a4 + 272);
        else
          v32 = CChar::GetMaxHP(a4);
        *(_DWORD *)(a4 + 272) = v32;
      }
      else
      {
        *(_DWORD *)(a4 + 272) -= a7;
        if ( *(_DWORD *)(a4 + 272) >= 0 )
          v31 = *(_DWORD *)(a4 + 272);
        else
          v31 = 0;
        *(_DWORD *)(a4 + 272) = v31;
      }
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      CPlayer::UpdatePartyMember(a4, a1, a2, a3, 7);
      break;
    case 8:
      if ( a6 )
      {
        *(_DWORD *)(a4 + 276) += a7;
        if ( CChar::GetMaxMP(a4) >= *(_DWORD *)(a4 + 276) )
          v30 = *(_DWORD *)(a4 + 276);
        else
          v30 = CChar::GetMaxMP(a4);
        *(_DWORD *)(a4 + 276) = v30;
      }
      else
      {
        *(_DWORD *)(a4 + 276) -= a7;
        if ( *(_DWORD *)(a4 + 276) >= 0 )
          v29 = *(_DWORD *)(a4 + 276);
        else
          v29 = 0;
        *(_DWORD *)(a4 + 276) = v29;
      }
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 23:
      if ( a6 )
        *(_DWORD *)(a4 + 544) += a7;
      else
        *(_DWORD *)(a4 + 544) -= a7;
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 24:
      if ( a6 )
        *(_DWORD *)(a4 + 548) += a7;
      else
        *(_DWORD *)(a4 + 548) -= a7;
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 25:
      v37 = a7;
      if ( a6 )
      {
        if ( *(_WORD *)dword_4E1174 & 0x100 )
          v37 = 2 * a7;
        v20 = (unsigned __int64)(v37 + *(_QWORD *)(a4 + 472)) >> 32;
        *(_DWORD *)(a4 + 472) += v37;
        *(_DWORD *)(a4 + 476) = v20;
        while ( 1 )
        {
          v22 = *(_DWORD *)(a4 + 60);
          v21 = *(_DWORD *)(a4 + 476);
          if ( v21 < dword_4D66F4[2 * v22] )
            break;
          if ( v21 <= dword_4D66F4[2 * v22] && *(_DWORD *)(a4 + 472) < (unsigned int)dword_4D66F0[2 * v22] )
            break;
          v23 = *(_DWORD *)(a4 + 60);
          v24 = *(_QWORD *)(a4 + 472) - __PAIR__(dword_4D66F4[2 * v23], dword_4D66F0[2 * v23]);
          *(_DWORD *)(a4 + 472) = v24 - dword_4D66F0[2 * v23];
          *(_DWORD *)(a4 + 476) = HIDWORD(v24);
          CPlayer::LevelUp((void *)a4, a1, a2, a3);
        }
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)&off_4BAC50);
      }
      else
      {
        v25 = *(_DWORD *)(a4 + 476);
        if ( v25 > HIDWORD(a7) || v25 >= HIDWORD(a7) && *(_DWORD *)(a4 + 472) >= (_DWORD)a7 )
        {
          v26 = (unsigned __int64)(*(_QWORD *)(a4 + 472) - a7) >> 32;
          *(_DWORD *)(a4 + 472) -= a7;
          *(_DWORD *)(a4 + 476) = v26;
        }
        else
        {
          *(_DWORD *)(a4 + 472) -= *(_QWORD *)(a4 + 472);
          *(_DWORD *)(a4 + 476) = 0;
        }
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)&off_4BAC50);
      }
      break;
    case 26:
      v36 = a7;
      if ( a6 )
      {
        *(_DWORD *)(a4 + 84) -= 52 * *(_DWORD *)(a4 + 60) / 3;
        *(_DWORD *)(a4 + 88) -= 8 * *(_DWORD *)(a4 + 60) + 140;
        *(_DWORD *)(a4 + 128) -= 7 * *(_DWORD *)(a4 + 60) / 10;
        *(_DWORD *)(a4 + 132) -= *(_DWORD *)(a4 + 60);
        *(_DWORD *)(a4 + 60) += v36;
        *(_DWORD *)(a4 + 84) += 52 * *(_DWORD *)(a4 + 60) / 3;
        *(_DWORD *)(a4 + 88) += 8 * *(_DWORD *)(a4 + 60) + 140;
        *(_DWORD *)(a4 + 128) += 7 * *(_DWORD *)(a4 + 60) / 10;
        *(_DWORD *)(a4 + 132) += *(_DWORD *)(a4 + 60);
        *(_DWORD *)(a4 + 272) = CChar::GetMaxHP(a4);
        *(_DWORD *)(a4 + 276) = CChar::GetMaxMP(a4);
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bb");
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bww");
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bww");
        CChar::GetMaxAttack(a4);
        CChar::GetMinAttack(a4);
        CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bww");
        CChar::WriteInSight(a1, a2, a3, a4, 73, (unsigned int)"db");
        CPlayer::UpdatePartyMember(a4, a1, a2, a3, 7);
        CPlayer::UpdatePartyMember(a4, a1, a2, a3, 26);
        v35 = CPlayer::GetGuild(a4, a1, a2, a3);
        if ( v35 )
        {
          CGuild::SetMemberLelvelUp(v35, a1, a2, a3, a4 + 32, *(_DWORD *)(a4 + 60));
          sub_4239C0(v35, a1, a2, a3, v35 + 40);
        }
      }
      break;
    case 30:
      v34 = a7;
      if ( a6 )
        *(_DWORD *)(a4 + 468) += a7;
      else
        *(_DWORD *)(a4 + 468) -= a7;
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      v33 = CPlayer::GetGuild(a4, a1, a2, a3);
      if ( v33 )
      {
        CGuild::SetPointADD(v33, a1, a2, a3, a4, v34, a6);
        sub_4239C0(v33, a1, a2, a3, v33 + 40);
      }
      break;
    case 35:
      if ( a6 )
      {
        *(_DWORD *)(a4 + 580) += a7;
        if ( *(_DWORD *)(a4 + 580) >= dword_4D66AC[0] )
          v28 = dword_4D66AC[0];
        else
          v28 = *(_DWORD *)(a4 + 580);
        *(_DWORD *)(a4 + 580) = v28;
      }
      else
      {
        *(_DWORD *)(a4 + 580) -= a7;
        if ( *(_DWORD *)(a4 + 580) <= 0 )
          v27 = 0;
        else
          v27 = *(_DWORD *)(a4 + 580);
        *(_DWORD *)(a4 + 580) = v27;
      }
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bd");
      break;
    case 38:
      if ( a6 )
        *(_DWORD *)(a4 + 312) += a7;
      else
        *(_DWORD *)(a4 + 312) -= a7;
      break;
    default:
      return;
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);
// 4BAC50: using guessed type int (__stdcall *off_4BAC50)(int);
// 4D66AC: using guessed type int dword_4D66AC[];
// 4D66F0: using guessed type int dword_4D66F0[];
// 4D66F4: using guessed type int dword_4D66F4[];
// 4D6A10: using guessed type int dword_4D6A10[];
// 4D6A1C: using guessed type int dword_4D6A1C[];

//----- (00459840) --------------------------------------------------------
void __usercall CPlayer::UpdatePrtyPt(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a1, int a2, int a3, int a4, int a5)
{
  int v8; // STDC_4@3
  int v9; // STDC_4@4
  signed int v10; // STD4_4@7
  signed int v11; // STD4_4@13
  signed int v12; // STC4_4@20
  signed int v13; // STC4_4@21
  signed int v14; // STC0_4@24
  signed int v15; // STC0_4@30
  signed int v16; // STAC_4@37
  signed int v17; // STAC_4@38
  int v18; // [sp+0h] [bp-C0h]@50
  int v19; // [sp+4h] [bp-BCh]@43
  int v20; // [sp+8h] [bp-B8h]@32
  int v21; // [sp+Ch] [bp-B4h]@26
  int v22; // [sp+10h] [bp-B0h]@15
  int v23; // [sp+14h] [bp-ACh]@9
  int v24; // [sp+24h] [bp-9Ch]@118
  int v25; // [sp+48h] [bp-78h]@86
  int v26; // [sp+50h] [bp-70h]@82
  int v27; // [sp+60h] [bp-60h]@70
  int v28; // [sp+74h] [bp-4Ch]@49
  int v29; // [sp+7Ch] [bp-44h]@42
  signed int v30; // [sp+84h] [bp-3Ch]@36
  int v31; // [sp+88h] [bp-38h]@36
  signed int v32; // [sp+8Ch] [bp-34h]@23
  int v33; // [sp+90h] [bp-30h]@24
  int v34; // [sp+90h] [bp-30h]@30
  int v35; // [sp+94h] [bp-2Ch]@23
  signed int v36; // [sp+98h] [bp-28h]@23
  signed int v37; // [sp+9Ch] [bp-24h]@19
  int v38; // [sp+A0h] [bp-20h]@19
  int v39; // [sp+A4h] [bp-1Ch]@7
  int v40; // [sp+A4h] [bp-1Ch]@13
  signed int v41; // [sp+A8h] [bp-18h]@6
  signed int v42; // [sp+ACh] [bp-14h]@6
  int v43; // [sp+B0h] [bp-10h]@6
  int v44; // [sp+B4h] [bp-Ch]@2
  int v45; // [sp+B8h] [bp-8h]@2

  switch ( a2 )
  {
    case 0:
      v45 = a4;
      v44 = CChar::GetStr(a1);
      if ( a3 )
      {
        *(_DWORD *)(a1 + 120) -= 15 * v44 / 54;
        *(_DWORD *)(a1 + 128) -= (11 * v44 - 80) / 30;
        *(_DWORD *)(a1 + 132) -= (8 * v44 - 25) / 15;
        *(_DWORD *)(a1 + 92) += v45;
        v8 = CChar::GetStr(a1);
        *(_DWORD *)(a1 + 120) += 15 * v8 / 54;
        *(_DWORD *)(a1 + 128) += (11 * v8 - 80) / 30;
        *(_DWORD *)(a1 + 132) += (8 * v8 - 25) / 15;
      }
      else
      {
        *(_DWORD *)(a1 + 120) -= 15 * v44 / 54;
        *(_DWORD *)(a1 + 128) -= (11 * v44 - 80) / 30;
        *(_DWORD *)(a1 + 132) -= (8 * v44 - 25) / 15;
        *(_DWORD *)(a1 + 92) -= v45;
        v9 = CChar::GetStr(a1);
        *(_DWORD *)(a1 + 120) += 15 * v9 / 54;
        *(_DWORD *)(a1 + 128) += (11 * v9 - 80) / 30;
        *(_DWORD *)(a1 + 132) += (8 * v9 - 25) / 15;
      }
      CChar::GetMaxAttack(a1);
      CChar::GetMinAttack(a1);
      CChar::GetHit(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bbwww");
      break;
    case 1:
      v43 = a4;
      v42 = CChar::GetHth(a1);
      v41 = dword_4D6A10[*(_DWORD *)(a1 + 460)];
      if ( a3 )
      {
        *(_DWORD *)(a1 + 84) -= 2 * v42 * v42 / v41;
        *(_DWORD *)(a1 + 176) -= v42 / 9;
        *(_DWORD *)(a1 + 96) += v43;
        v10 = CChar::GetHth(a1);
        *(_DWORD *)(a1 + 84) += 2 * v10 * v10 / v41;
        *(_DWORD *)(a1 + 176) += v10 / 9;
        v39 = CChar::GetMaxHP(a1);
        if ( v43 < 0 )
        {
          if ( *(_DWORD *)(a1 + 272) >= v39 )
            v23 = v39;
          else
            v23 = *(_DWORD *)(a1 + 272);
          *(_DWORD *)(a1 + 272) = v23;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 84) -= 2 * v42 * v42 / v41;
        *(_DWORD *)(a1 + 176) -= v42 / 9;
        *(_DWORD *)(a1 + 96) -= v43;
        v11 = CChar::GetHth(a1);
        *(_DWORD *)(a1 + 84) += 2 * v11 * v11 / v41;
        *(_DWORD *)(a1 + 176) += v11 / 9;
        v40 = CChar::GetMaxHP(a1);
        if ( v43 > 0 )
        {
          if ( *(_DWORD *)(a1 + 272) >= v40 )
            v22 = v40;
          else
            v22 = *(_DWORD *)(a1 + 272);
          *(_DWORD *)(a1 + 272) = v22;
        }
      }
      CChar::GetResist((void *)a1, 4);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bbwww");
      CPlayer::UpdatePartyMember(a1, ebx0, edi0, esi0, 7);
      break;
    case 2:
      v38 = a4;
      v37 = CChar::GetInt(a1);
      if ( a3 )
      {
        *(_DWORD *)(a1 + 136) -= (7 * v37 - 20) / 12;
        *(_DWORD *)(a1 + 140) -= 7 * v37 / 12;
        *(_DWORD *)(a1 + 160) -= v37 / 9;
        *(_DWORD *)(a1 + 164) -= v37 / 9;
        *(_DWORD *)(a1 + 168) -= v37 / 9;
        *(_DWORD *)(a1 + 100) += v38;
        v12 = CChar::GetInt(a1);
        *(_DWORD *)(a1 + 136) += (7 * v12 - 20) / 12;
        *(_DWORD *)(a1 + 140) += 7 * v12 / 12;
        *(_DWORD *)(a1 + 160) += v12 / 9;
        *(_DWORD *)(a1 + 164) += v12 / 9;
        *(_DWORD *)(a1 + 168) += v12 / 9;
      }
      else
      {
        *(_DWORD *)(a1 + 136) -= (7 * v37 - 20) / 12;
        *(_DWORD *)(a1 + 140) -= 7 * v37 / 12;
        *(_DWORD *)(a1 + 160) -= v37 / 9;
        *(_DWORD *)(a1 + 164) -= v37 / 9;
        *(_DWORD *)(a1 + 168) -= v37 / 9;
        *(_DWORD *)(a1 + 100) -= v38;
        v13 = CChar::GetInt(a1);
        *(_DWORD *)(a1 + 136) += (7 * v13 - 20) / 12;
        *(_DWORD *)(a1 + 140) += 7 * v13 / 12;
        *(_DWORD *)(a1 + 160) += v13 / 9;
        *(_DWORD *)(a1 + 164) += v13 / 9;
        *(_DWORD *)(a1 + 168) += v13 / 9;
      }
      CChar::GetResist((void *)a1, 2);
      CChar::GetResist((void *)a1, 1);
      CChar::GetResist((void *)a1, 0);
      CChar::GetMaxMagic(a1);
      CChar::GetMinMagic(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bbwwwww");
      break;
    case 3:
      v35 = a4;
      v36 = CChar::GetWis(a1);
      v32 = dword_4D6A1C[*(_DWORD *)(a1 + 460)];
      if ( a3 )
      {
        *(_DWORD *)(a1 + 88) -= v36 + 2 * v36 * v36 / v32;
        *(_DWORD *)(a1 + 136) -= v36 / 7;
        *(_DWORD *)(a1 + 140) -= 14 * v36 / 45;
        *(_DWORD *)(a1 + 172) -= v36 / 9;
        *(_DWORD *)(a1 + 104) += v35;
        v14 = CChar::GetWis(a1);
        *(_DWORD *)(a1 + 88) += v14 + 2 * v14 * v14 / v32;
        *(_DWORD *)(a1 + 136) += v14 / 7;
        *(_DWORD *)(a1 + 140) += 14 * v14 / 45;
        *(_DWORD *)(a1 + 172) += v14 / 9;
        v33 = CChar::GetMaxMP(a1);
        if ( v35 < 0 )
        {
          if ( *(_DWORD *)(a1 + 276) >= v33 )
            v21 = v33;
          else
            v21 = *(_DWORD *)(a1 + 276);
          *(_DWORD *)(a1 + 276) = v21;
        }
      }
      else
      {
        *(_DWORD *)(a1 + 88) -= v36 + 2 * v36 * v36 / v32;
        *(_DWORD *)(a1 + 136) -= v36 / 7;
        *(_DWORD *)(a1 + 140) -= 14 * v36 / 45;
        *(_DWORD *)(a1 + 172) -= v36 / 9;
        *(_DWORD *)(a1 + 104) -= v35;
        v15 = CChar::GetWis(a1);
        *(_DWORD *)(a1 + 88) += v15 + 2 * v15 * v15 / v32;
        *(_DWORD *)(a1 + 136) += v15 / 7;
        *(_DWORD *)(a1 + 140) += 14 * v15 / 45;
        *(_DWORD *)(a1 + 172) += v15 / 9;
        v34 = CChar::GetMaxMP(a1);
        if ( v35 > 0 )
        {
          if ( *(_DWORD *)(a1 + 276) >= v34 )
            v20 = v34;
          else
            v20 = *(_DWORD *)(a1 + 276);
          *(_DWORD *)(a1 + 276) = v20;
        }
      }
      CChar::GetResist((void *)a1, 3);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bbwww");
      break;
    case 4:
      v31 = a4;
      v30 = CChar::GetDex(a1);
      if ( a3 )
      {
        *(_DWORD *)(a1 + 120) -= v30 / 8;
        *(_DWORD *)(a1 + 124) -= v30 / 3;
        *(_DWORD *)(a1 + 128) -= (v30 - 5) / 11;
        *(_DWORD *)(a1 + 132) -= 18 * v30 / 77;
        *(_DWORD *)(a1 + 108) += v31;
        v16 = CChar::GetDex(a1);
        *(_DWORD *)(a1 + 120) += v16 / 8;
        *(_DWORD *)(a1 + 124) += v16 / 3;
        *(_DWORD *)(a1 + 128) += (v16 - 5) / 11;
        *(_DWORD *)(a1 + 132) += 18 * v16 / 77;
      }
      else
      {
        *(_DWORD *)(a1 + 120) -= v30 / 8;
        *(_DWORD *)(a1 + 124) -= v30 / 3;
        *(_DWORD *)(a1 + 128) -= (v30 - 5) / 11;
        *(_DWORD *)(a1 + 132) -= 18 * v30 / 77;
        *(_DWORD *)(a1 + 108) -= v31;
        v17 = CChar::GetDex(a1);
        *(_DWORD *)(a1 + 120) += v17 / 8;
        *(_DWORD *)(a1 + 124) += v17 / 3;
        *(_DWORD *)(a1 + 128) += (v17 - 5) / 11;
        *(_DWORD *)(a1 + 132) += 18 * v17 / 77;
      }
      CChar::GetMaxAttack(a1);
      CChar::GetMinAttack(a1);
      CChar::GetDodge(a1);
      CChar::GetHit(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bbwwww");
      break;
    case 5:
      if ( a3 )
      {
        *(_DWORD *)(a1 + 112) += a4;
        CChar::GetMaxHP(a1);
      }
      else
      {
        *(_DWORD *)(a1 + 112) -= a4;
        v29 = CChar::GetMaxHP(a1);
        if ( *(_DWORD *)(a1 + 272) >= v29 )
          v19 = v29;
        else
          v19 = *(_DWORD *)(a1 + 272);
        *(_DWORD *)(a1 + 272) = v19;
      }
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bww");
      CPlayer::UpdatePartyMember(a1, ebx0, edi0, esi0, 7);
      break;
    case 6:
      if ( a3 )
      {
        *(_DWORD *)(a1 + 116) += a4;
        CChar::GetMaxMP(a1);
      }
      else
      {
        *(_DWORD *)(a1 + 116) -= a4;
        v28 = CChar::GetMaxMP(a1);
        if ( *(_DWORD *)(a1 + 276) >= v28 )
          v18 = v28;
        else
          v18 = *(_DWORD *)(a1 + 276);
        *(_DWORD *)(a1 + 276) = v18;
      }
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bww");
      break;
    case 9:
      if ( a3 )
        *(_DWORD *)(a1 + 120) += a4;
      else
        *(_DWORD *)(a1 + 120) -= a4;
      CChar::GetHit(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 10:
      if ( a3 )
        *(_DWORD *)(a1 + 124) += a4;
      else
        *(_DWORD *)(a1 + 124) -= a4;
      CChar::GetDodge(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 11:
      if ( a3 )
        *(_DWORD *)(a1 + 128) += a4;
      else
        *(_DWORD *)(a1 + 128) -= a4;
      CChar::GetMinAttack(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 12:
      if ( a3 )
        *(_DWORD *)(a1 + 132) += a4;
      else
        *(_DWORD *)(a1 + 132) -= a4;
      CChar::GetMaxAttack(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 27:
      v27 = a5;
      if ( a3 )
      {
        *(_DWORD *)(a1 + 128) += a4;
        *(_DWORD *)(a1 + 132) += v27;
      }
      else
      {
        *(_DWORD *)(a1 + 128) -= a4;
        *(_DWORD *)(a1 + 132) -= v27;
      }
      CChar::GetMaxAttack(a1);
      CChar::GetMinAttack(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bww");
      break;
    case 13:
      if ( a3 )
        *(_DWORD *)(a1 + 136) += a4;
      else
        *(_DWORD *)(a1 + 136) -= a4;
      CChar::GetMinMagic(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 14:
      if ( a3 )
        *(_DWORD *)(a1 + 140) += a4;
      else
        *(_DWORD *)(a1 + 140) -= a4;
      CChar::GetMinMagic(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 28:
      v26 = a5;
      if ( a3 )
      {
        *(_DWORD *)(a1 + 136) += a4;
        *(_DWORD *)(a1 + 140) += v26;
      }
      else
      {
        *(_DWORD *)(a1 + 136) -= a4;
        *(_DWORD *)(a1 + 140) -= v26;
      }
      CChar::GetMaxMagic(a1);
      CChar::GetMinMagic(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bww");
      break;
    case 15:
      v25 = a5;
      if ( a3 )
      {
        *(_DWORD *)(a1 + 144) += a4;
        *(_DWORD *)(a1 + 148) += v25;
      }
      else
      {
        *(_DWORD *)(a1 + 144) -= a4;
        *(_DWORD *)(a1 + 148) -= v25;
      }
      CChar::GetDefense((void *)a1, 0);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 16:
      if ( a3 )
        *(_DWORD *)(a1 + 152) += a4;
      else
        *(_DWORD *)(a1 + 152) -= a4;
      CChar::GetAbsorb(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 17:
      if ( a3 )
        *(_DWORD *)(a1 + 156) += a4;
      else
        *(_DWORD *)(a1 + 156) -= a4;
      CChar::GetASpeed(a1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 18:
      if ( a3 )
        *(_DWORD *)(a1 + 160) += a4;
      else
        *(_DWORD *)(a1 + 160) -= a4;
      CChar::GetResist((void *)a1, 0);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 19:
      if ( a3 )
        *(_DWORD *)(a1 + 164) += a4;
      else
        *(_DWORD *)(a1 + 164) -= a4;
      CChar::GetResist((void *)a1, 1);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 20:
      if ( a3 )
        *(_DWORD *)(a1 + 168) += a4;
      else
        *(_DWORD *)(a1 + 168) -= a4;
      CChar::GetResist((void *)a1, 2);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 21:
      if ( a3 )
        *(_DWORD *)(a1 + 172) += a4;
      else
        *(_DWORD *)(a1 + 172) -= a4;
      CChar::GetResist((void *)a1, 3);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 22:
      if ( a3 )
        *(_DWORD *)(a1 + 176) += a4;
      else
        *(_DWORD *)(a1 + 176) -= a4;
      CChar::GetResist((void *)a1, 4);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    case 29:
      v24 = a4;
      if ( a3 )
      {
        *(_DWORD *)(a1 + 160) += a4;
        *(_DWORD *)(a1 + 164) += v24;
        *(_DWORD *)(a1 + 168) += v24;
        *(_DWORD *)(a1 + 172) += v24;
        *(_DWORD *)(a1 + 176) += v24;
      }
      else
      {
        *(_DWORD *)(a1 + 160) -= a4;
        *(_DWORD *)(a1 + 164) -= v24;
        *(_DWORD *)(a1 + 168) -= v24;
        *(_DWORD *)(a1 + 172) -= v24;
        *(_DWORD *)(a1 + 176) -= v24;
      }
      CChar::GetResist((void *)a1, 4);
      CChar::GetResist((void *)a1, 3);
      CChar::GetResist((void *)a1, 2);
      CChar::GetResist((void *)a1, 1);
      CChar::GetResist((void *)a1, 0);
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bwwwww");
      break;
    case 31:
      if ( a3 )
        *(_DWORD *)(a1 + 180) += a4;
      else
        *(_DWORD *)(a1 + 180) -= a4;
      break;
    case 36:
      if ( a3 )
        *(_DWORD *)(a1 + 184) += a4;
      else
        *(_DWORD *)(a1 + 184) -= a4;
      CPlayer::Write(ebx0, edi0, esi0, a1, 69, (unsigned int)"bw");
      break;
    default:
      return;
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);
// 4D6A10: using guessed type int dword_4D6A10[];
// 4D6A1C: using guessed type int dword_4D6A1C[];

//----- (0045B100) --------------------------------------------------------
void __usercall CPlayer::UpdatePrtyPer(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // STCC_4@3
  int v9; // STCC_4@4
  signed int v10; // STC4_4@7
  signed int v11; // STC4_4@13
  signed int v12; // STB4_4@20
  signed int v13; // STB4_4@21
  signed int v14; // STB0_4@24
  signed int v15; // STB0_4@30
  signed int v16; // ST9C_4@37
  signed int v17; // ST9C_4@38
  int v18; // [sp+0h] [bp-B0h]@50
  int v19; // [sp+4h] [bp-ACh]@43
  int v20; // [sp+8h] [bp-A8h]@32
  int v21; // [sp+Ch] [bp-A4h]@26
  int v22; // [sp+10h] [bp-A0h]@15
  int v23; // [sp+14h] [bp-9Ch]@9
  int v24; // [sp+38h] [bp-78h]@86
  int v25; // [sp+40h] [bp-70h]@82
  int v26; // [sp+50h] [bp-60h]@70
  int v27; // [sp+64h] [bp-4Ch]@49
  int v28; // [sp+6Ch] [bp-44h]@42
  signed int v29; // [sp+74h] [bp-3Ch]@36
  int v30; // [sp+78h] [bp-38h]@36
  signed int v31; // [sp+7Ch] [bp-34h]@23
  int v32; // [sp+80h] [bp-30h]@24
  int v33; // [sp+80h] [bp-30h]@30
  int v34; // [sp+84h] [bp-2Ch]@23
  signed int v35; // [sp+88h] [bp-28h]@23
  signed int v36; // [sp+8Ch] [bp-24h]@19
  int v37; // [sp+90h] [bp-20h]@19
  int v38; // [sp+94h] [bp-1Ch]@7
  int v39; // [sp+94h] [bp-1Ch]@13
  signed int v40; // [sp+98h] [bp-18h]@6
  signed int v41; // [sp+9Ch] [bp-14h]@6
  int v42; // [sp+A0h] [bp-10h]@6
  int v43; // [sp+A4h] [bp-Ch]@2
  int v44; // [sp+A8h] [bp-8h]@2

  switch ( a5 )
  {
    case 0:
      v44 = a7;
      v43 = CChar::GetStr(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 120) -= 15 * v43 / 54;
        *(_DWORD *)(a4 + 128) -= (11 * v43 - 80) / 30;
        *(_DWORD *)(a4 + 132) -= (8 * v43 - 25) / 15;
        *(_DWORD *)(a4 + 188) += v44;
        v8 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) += 15 * v8 / 54;
        *(_DWORD *)(a4 + 128) += (11 * v8 - 80) / 30;
        *(_DWORD *)(a4 + 132) += (8 * v8 - 25) / 15;
      }
      else
      {
        *(_DWORD *)(a4 + 120) -= 15 * v43 / 54;
        *(_DWORD *)(a4 + 128) -= (11 * v43 - 80) / 30;
        *(_DWORD *)(a4 + 132) -= (8 * v43 - 25) / 15;
        *(_DWORD *)(a4 + 188) -= v44;
        v9 = CChar::GetStr(a4);
        *(_DWORD *)(a4 + 120) += 15 * v9 / 54;
        *(_DWORD *)(a4 + 128) += (11 * v9 - 80) / 30;
        *(_DWORD *)(a4 + 132) += (8 * v9 - 25) / 15;
      }
      CChar::GetMaxAttack(a4);
      CChar::GetMinAttack(a4);
      CChar::GetHit(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwww");
      break;
    case 1:
      v42 = a7;
      v41 = CChar::GetHth(a4);
      v40 = dword_4D6A10[*(_DWORD *)(a4 + 460)];
      if ( a6 )
      {
        *(_DWORD *)(a4 + 84) -= 2 * v41 * v41 / v40;
        *(_DWORD *)(a4 + 176) -= v41 / 9;
        *(_DWORD *)(a4 + 192) += v42;
        v10 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) += 2 * v10 * v10 / v40;
        *(_DWORD *)(a4 + 176) += v10 / 9;
        v38 = CChar::GetMaxHP(a4);
        if ( v42 < 0 )
        {
          if ( *(_DWORD *)(a4 + 272) >= v38 )
            v23 = v38;
          else
            v23 = *(_DWORD *)(a4 + 272);
          *(_DWORD *)(a4 + 272) = v23;
        }
      }
      else
      {
        *(_DWORD *)(a4 + 84) -= 2 * v41 * v41 / v40;
        *(_DWORD *)(a4 + 176) -= v41 / 9;
        *(_DWORD *)(a4 + 192) -= v42;
        v11 = CChar::GetHth(a4);
        *(_DWORD *)(a4 + 84) += 2 * v11 * v11 / v40;
        *(_DWORD *)(a4 + 176) += v11 / 9;
        v39 = CChar::GetMaxHP(a4);
        if ( v42 > 0 )
        {
          if ( *(_DWORD *)(a4 + 272) >= v39 )
            v22 = v39;
          else
            v22 = *(_DWORD *)(a4 + 272);
          *(_DWORD *)(a4 + 272) = v22;
        }
      }
      CChar::GetResist((void *)a4, 4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwww");
      CPlayer::UpdatePartyMember(a4, a1, a2, a3, 7);
      break;
    case 2:
      v37 = a7;
      v36 = CChar::GetInt(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 136) -= (7 * v36 - 20) / 12;
        *(_DWORD *)(a4 + 140) -= 7 * v36 / 12;
        *(_DWORD *)(a4 + 160) -= v36 / 9;
        *(_DWORD *)(a4 + 164) -= v36 / 9;
        *(_DWORD *)(a4 + 168) -= v36 / 9;
        *(_DWORD *)(a4 + 196) += v37;
        v12 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) += (7 * v12 - 20) / 12;
        *(_DWORD *)(a4 + 140) += 7 * v12 / 12;
        *(_DWORD *)(a4 + 160) += v12 / 9;
        *(_DWORD *)(a4 + 164) += v12 / 9;
        *(_DWORD *)(a4 + 168) += v12 / 9;
      }
      else
      {
        *(_DWORD *)(a4 + 136) -= (7 * v36 - 20) / 12;
        *(_DWORD *)(a4 + 140) -= 7 * v36 / 12;
        *(_DWORD *)(a4 + 160) -= v36 / 9;
        *(_DWORD *)(a4 + 164) -= v36 / 9;
        *(_DWORD *)(a4 + 168) -= v36 / 9;
        *(_DWORD *)(a4 + 196) -= v37;
        v13 = CChar::GetInt(a4);
        *(_DWORD *)(a4 + 136) += (7 * v13 - 20) / 12;
        *(_DWORD *)(a4 + 140) += 7 * v13 / 12;
        *(_DWORD *)(a4 + 160) += v13 / 9;
        *(_DWORD *)(a4 + 164) += v13 / 9;
        *(_DWORD *)(a4 + 168) += v13 / 9;
      }
      CChar::GetResist((void *)a4, 2);
      CChar::GetResist((void *)a4, 1);
      CChar::GetResist((void *)a4, 0);
      CChar::GetMaxMagic(a4);
      CChar::GetMinMagic(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwwwww");
      break;
    case 3:
      v34 = a7;
      v35 = CChar::GetWis(a4);
      v31 = dword_4D6A1C[*(_DWORD *)(a4 + 460)];
      if ( a6 )
      {
        *(_DWORD *)(a4 + 88) -= v35 + 2 * v35 * v35 / v31;
        *(_DWORD *)(a4 + 136) -= v35 / 7;
        *(_DWORD *)(a4 + 140) -= 14 * v35 / 45;
        *(_DWORD *)(a4 + 172) -= v35 / 9;
        *(_DWORD *)(a4 + 200) += v34;
        v14 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) += v14 + 2 * v14 * v14 / v31;
        *(_DWORD *)(a4 + 136) += v14 / 7;
        *(_DWORD *)(a4 + 140) += 14 * v14 / 45;
        *(_DWORD *)(a4 + 172) += v14 / 9;
        v32 = CChar::GetMaxMP(a4);
        if ( v34 < 0 )
        {
          if ( *(_DWORD *)(a4 + 276) >= v32 )
            v21 = v32;
          else
            v21 = *(_DWORD *)(a4 + 276);
          *(_DWORD *)(a4 + 276) = v21;
        }
      }
      else
      {
        *(_DWORD *)(a4 + 88) -= v35 + 2 * v35 * v35 / v31;
        *(_DWORD *)(a4 + 136) -= v35 / 7;
        *(_DWORD *)(a4 + 140) -= 14 * v35 / 45;
        *(_DWORD *)(a4 + 172) -= v35 / 9;
        *(_DWORD *)(a4 + 200) -= v34;
        v15 = CChar::GetWis(a4);
        *(_DWORD *)(a4 + 88) += v15 + 2 * v15 * v15 / v31;
        *(_DWORD *)(a4 + 136) += v15 / 7;
        *(_DWORD *)(a4 + 140) += 14 * v15 / 45;
        *(_DWORD *)(a4 + 172) += v15 / 9;
        v33 = CChar::GetMaxMP(a4);
        if ( v34 > 0 )
        {
          if ( *(_DWORD *)(a4 + 276) >= v33 )
            v20 = v33;
          else
            v20 = *(_DWORD *)(a4 + 276);
          *(_DWORD *)(a4 + 276) = v20;
        }
      }
      CChar::GetResist((void *)a4, 3);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwww");
      break;
    case 4:
      v30 = a7;
      v29 = CChar::GetDex(a4);
      if ( a6 )
      {
        *(_DWORD *)(a4 + 120) -= v29 / 8;
        *(_DWORD *)(a4 + 124) -= v29 / 3;
        *(_DWORD *)(a4 + 128) -= (v29 - 5) / 11;
        *(_DWORD *)(a4 + 132) -= 18 * v29 / 77;
        *(_DWORD *)(a4 + 204) += v30;
        v16 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) += v16 / 8;
        *(_DWORD *)(a4 + 124) += v16 / 3;
        *(_DWORD *)(a4 + 128) += (v16 - 5) / 11;
        *(_DWORD *)(a4 + 132) += 18 * v16 / 77;
      }
      else
      {
        *(_DWORD *)(a4 + 120) -= v29 / 8;
        *(_DWORD *)(a4 + 124) -= v29 / 3;
        *(_DWORD *)(a4 + 128) -= (v29 - 5) / 11;
        *(_DWORD *)(a4 + 132) -= 18 * v29 / 77;
        *(_DWORD *)(a4 + 204) -= v30;
        v17 = CChar::GetDex(a4);
        *(_DWORD *)(a4 + 120) += v17 / 8;
        *(_DWORD *)(a4 + 124) += v17 / 3;
        *(_DWORD *)(a4 + 128) += (v17 - 5) / 11;
        *(_DWORD *)(a4 + 132) += 18 * v17 / 77;
      }
      CChar::GetMaxAttack(a4);
      CChar::GetMinAttack(a4);
      CChar::GetDodge(a4);
      CChar::GetHit(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bbwwww");
      break;
    case 5:
      if ( a6 )
      {
        *(_DWORD *)(a4 + 208) += a7;
        CChar::GetMaxHP(a4);
      }
      else
      {
        *(_DWORD *)(a4 + 208) -= a7;
        v28 = CChar::GetMaxHP(a4);
        if ( *(_DWORD *)(a4 + 272) >= v28 )
          v19 = v28;
        else
          v19 = *(_DWORD *)(a4 + 272);
        *(_DWORD *)(a4 + 272) = v19;
      }
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bww");
      CPlayer::UpdatePartyMember(a4, a1, a2, a3, 7);
      break;
    case 6:
      if ( a6 )
      {
        *(_DWORD *)(a4 + 212) += a7;
        CChar::GetMaxMP(a4);
      }
      else
      {
        *(_DWORD *)(a4 + 212) -= a7;
        v27 = CChar::GetMaxMP(a4);
        if ( *(_DWORD *)(a4 + 276) >= v27 )
          v18 = v27;
        else
          v18 = *(_DWORD *)(a4 + 276);
        *(_DWORD *)(a4 + 276) = v18;
      }
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bww");
      CPlayer::UpdatePartyMember(a4, a1, a2, a3, 8);
      break;
    case 9:
      if ( a6 )
        *(_DWORD *)(a4 + 216) += a7;
      else
        *(_DWORD *)(a4 + 216) -= a7;
      CChar::GetHit(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 10:
      if ( a6 )
        *(_DWORD *)(a4 + 220) += a7;
      else
        *(_DWORD *)(a4 + 220) -= a7;
      CChar::GetDodge(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 11:
      if ( a6 )
        *(_DWORD *)(a4 + 224) += a7;
      else
        *(_DWORD *)(a4 + 224) -= a7;
      CChar::GetMinAttack(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 12:
      if ( a6 )
        *(_DWORD *)(a4 + 228) += a7;
      else
        *(_DWORD *)(a4 + 228) -= a7;
      CChar::GetMaxAttack(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 27:
      v26 = a8;
      if ( a6 )
      {
        *(_DWORD *)(a4 + 224) += a7;
        *(_DWORD *)(a4 + 228) += v26;
      }
      else
      {
        *(_DWORD *)(a4 + 224) -= a7;
        *(_DWORD *)(a4 + 228) -= v26;
      }
      CChar::GetMaxAttack(a4);
      CChar::GetMinAttack(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bww");
      break;
    case 13:
      if ( a6 )
        *(_DWORD *)(a4 + 232) += a7;
      else
        *(_DWORD *)(a4 + 232) -= a7;
      CChar::GetMinMagic(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 14:
      if ( a6 )
        *(_DWORD *)(a4 + 236) += a7;
      else
        *(_DWORD *)(a4 + 236) -= a7;
      CChar::GetMaxMagic(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 28:
      v25 = a8;
      if ( a6 )
      {
        *(_DWORD *)(a4 + 232) += a7;
        *(_DWORD *)(a4 + 236) += v25;
      }
      else
      {
        *(_DWORD *)(a4 + 232) -= a7;
        *(_DWORD *)(a4 + 236) -= v25;
      }
      CChar::GetMaxMagic(a4);
      CChar::GetMinMagic(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bww");
      break;
    case 15:
      v24 = a8;
      if ( a6 )
      {
        *(_DWORD *)(a4 + 240) += a7;
        *(_DWORD *)(a4 + 244) += v24;
      }
      else
      {
        *(_DWORD *)(a4 + 240) -= a7;
        *(_DWORD *)(a4 + 244) -= v24;
      }
      CChar::GetDefense((void *)a4, 0);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 16:
      if ( a6 )
        *(_DWORD *)(a4 + 248) += a7;
      else
        *(_DWORD *)(a4 + 248) -= a7;
      CChar::GetAbsorb(a4);
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 17:
      if ( a6 )
        *(_DWORD *)(a4 + 252) += a7;
      else
        *(_DWORD *)(a4 + 252) -= a7;
      CPlayer::Write(a1, a2, a3, a4, 69, (unsigned int)"bw");
      break;
    case 31:
      if ( a6 )
        *(_DWORD *)(a4 + 256) += a7;
      else
        *(_DWORD *)(a4 + 256) -= a7;
      break;
    case 32:
      if ( a6 )
        *(_DWORD *)(a4 + 260) += a7;
      else
        *(_DWORD *)(a4 + 260) -= a7;
      CChar::WriteInSight(a1, a2, a3, a4, 72, (unsigned int)"dbw");
      break;
    case 33:
      if ( a6 )
        *(_DWORD *)(a4 + 264) += a7;
      else
        *(_DWORD *)(a4 + 264) -= a7;
      break;
    case 37:
      if ( a6 )
        *(_DWORD *)(a4 + 268) += a7;
      else
        *(_DWORD *)(a4 + 268) -= a7;
      break;
    default:
      return;
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);
// 4D6A10: using guessed type int dword_4D6A10[];
// 4D6A1C: using guessed type int dword_4D6A1C[];

//----- (0045C740) --------------------------------------------------------
int __userpurge CPlayer::Attack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int result; // eax@1
  int v7; // eax@23
  void *v8; // eax@35
  void *v9; // eax@36
  void *v10; // eax@36
  int v11; // ST20_4@36
  void *v12; // eax@37
  void *v13; // eax@37
  void *v14; // eax@38
  void *v15; // eax@39
  int v16; // ST20_4@39
  int v17; // [sp+4h] [bp-34h]@27
  unsigned int v18; // [sp+8h] [bp-30h]@21
  int v19; // [sp+10h] [bp-28h]@1
  int v20; // [sp+14h] [bp-24h]@18
  unsigned int v21; // [sp+18h] [bp-20h]@18
  int v22; // [sp+1Ch] [bp-1Ch]@18
  int v23; // [sp+20h] [bp-18h]@18
  int v24; // [sp+24h] [bp-14h]@18
  int v25; // [sp+28h] [bp-10h]@14
  DWORD v26; // [sp+2Ch] [bp-Ch]@14
  int v27; // [sp+30h] [bp-8h]@5
  int v28; // [sp+34h] [bp-4h]@14

  v19 = a1;
  result = CChar::IsNormal(a1);
  if ( result )
  {
    result = CChar::IsGState(v19, 4);
    if ( !result )
    {
      result = CPlayer::IsWState(v19, 0);
      if ( result )
      {
        v27 = 0;
        result = a5;
        if ( a5 )
        {
          if ( a5 == 1 )
          {
            result = CMonster::FindMonster(a2, a3, a4, a6);
            v27 = result;
          }
        }
        else
        {
          result = sub_450810(a2, a3, a4, a6);
          v27 = result;
        }
        if ( v27 )
        {
          if ( (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v19 + 176))(v19, v27, 0) )
          {
            v25 = CChar::GetASpeed(v19);
            v28 = v25;
            v26 = GetTickCount();
            if ( v26 < *(_DWORD *)(v19 + 1448) )
              v28 -= *(_DWORD *)(v19 + 1448) - v26;
            if ( *(_DWORD *)(v19 + 316) == *(_DWORD *)(v27 + 316) )
            {
              if ( CChar::IsNormal(v27) )
              {
                *(_DWORD *)(v19 + 1448) = v25 + v26;
                CChar::SetDirection(
                  (void *)v19,
                  *(_DWORD *)(v27 + 332) - *(_DWORD *)(v19 + 332),
                  *(_DWORD *)(v27 + 336) - *(_DWORD *)(v19 + 336));
                v22 = 0;
                v21 = 0;
                v20 = 0;
                v24 = 0;
                v23 = 0;
                v23 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v27 + 148))(v27, v19);
                if ( !v23 )
                {
                  if ( CChar::CheckHit((void *)v19, v27, 0) )
                  {
                    if ( *(_DWORD *)(v19 + 460) == 1 )
                      v18 = 0;
                    else
                      v18 = v28 * (*(int (__thiscall **)(int, int))(*(_DWORD *)v19 + 168))(v19, v27) / (unsigned int)v25;
                    v21 = v18;
                    v7 = CChar::GetAttack(v19);
                    v24 = (*(int (__thiscall **)(int, int, unsigned int, int *, int *, unsigned int *, _DWORD))(*(_DWORD *)v27 + 72))(
                            v27,
                            v19,
                            v28 * v7 / (unsigned int)v25,
                            &v22,
                            &v20,
                            &v21,
                            0);
                    if ( v24 )
                    {
                      if ( *(_DWORD *)(v19 + 280) & 0x7FF00000 )
                      {
                        a4 = (*(_DWORD *)(v19 + 280) & 0x80000000) != 0 ? 10 : 5;
                        if ( (signed int)a4 > sub_406E10(0, 99) )
                        {
                          v17 = *(_DWORD *)(v19 + 280) & 0x7FF00000;
                          if ( v17 > 16777216 )
                          {
                            if ( v17 == 33554432 )
                            {
                              v14 = CBuff::CreateBuff(116, 1, 5, v22 / 10);
                              (*(void (__thiscall **)(int, void *))(*(_DWORD *)v27 + 180))(v27, v14);
                              CChar::WriteInSight(a2, a3, a4, v19, 73, (unsigned int)"db");
                            }
                            else
                            {
                              if ( v17 == 67108864 )
                              {
                                v15 = CBuff::CreateBuff(7, 2, v16, 67108864);
                                (*(void (__thiscall **)(int, void *))(*(_DWORD *)v27 + 180))(v27, v15);
                                CChar::WriteInSight(a2, a3, a4, v19, 73, (unsigned int)"db");
                              }
                            }
                          }
                          else
                          {
                            switch ( v17 )
                            {
                              case 16777216:
                                v12 = CBuff::CreateBuff(116, 1, 5, 7 * v22 / 100);
                                (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v27 + 180))(v27, v12);
                                v13 = CBuff::CreateBuff(117, 5, -10, -10);
                                (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v27 + 180))(v27, v13);
                                CChar::WriteInSight(a2, a3, a4, v19, 73, (unsigned int)"db");
                                break;
                              case 4194304:
                                v8 = CBuff::CreateBuff(116, 1, 5, v22 / 10);
                                (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v27 + 180))(v27, v8);
                                CChar::WriteInSight(a2, a3, a4, v19, 73, (unsigned int)"db");
                                break;
                              case 8388608:
                                v9 = CBuff::CreateBuff(116, 1, 5, 7 * v22 / 100);
                                (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v27 + 180))(v27, v9);
                                v10 = CBuff::CreateBuff(118, 5, -50, v11);
                                (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v27 + 180))(v27, v10);
                                CChar::WriteInSight(a2, a3, a4, v19, 73, (unsigned int)"db");
                                break;
                            }
                          }
                        }
                      }
                    }
                    else
                    {
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)v27 + 80))(v27, v19);
                    }
                  }
                  else
                  {
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)v27 + 80))(v27, v19);
                  }
                }
                std___Mpunct_wchar_t___do_frac_digits(v27);
                CChar::WriteInSight(a2, a3, a4, v19, 62, (unsigned int)"ddwwb");
              }
            }
            result = sub_4239C0(v27, a2, a3, a4, v27 + 352);
          }
          else
          {
            result = sub_4239C0(v27, a2, a3, a4, v27 + 352);
          }
        }
      }
    }
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (0045CC00) --------------------------------------------------------
void __usercall CPlayer::LevelUp(void *this<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST10_4@1

  v4 = (int)this;
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 88))(this, 26, 1, 1);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 23, 1, 5);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 88))(v4, 24, 1, 1);
  *(_DWORD *)(v4 + 552) = 0;
  CPlayer::SaveAllProperty(v4, a2, a3, a4, 1);
  sub_47FF00((void *)(v4 + 624), a2, a3, a4, 0);
  CPlayer::MLMPayMoney(v4, a2, a3, a4, 2);
  CPlayer::MLMLevelUp(v4, a2, a3, a4);
}

//----- (0045CC90) --------------------------------------------------------
void __userpurge CPlayer::Teleport(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6, int a7, int a8)
{
  int v8; // ecx@6
  int v9; // [sp+0h] [bp-8h]@1
  int v10; // [sp+4h] [bp-4h]@3

  v9 = a1;
  if ( a5 == -1 )
  {
    sub_4328C0("Map# Is -1. (PID:%d  UID :%d)", *(_DWORD *)(a1 + 452), *(_DWORD *)(a1 + 448));
  }
  else
  {
    v10 = sub_491080(a5);
    if ( v10 )
    {
      if ( CSMap::IsOnTile((void *)v10, a6, 0) )
      {
        CChar::SubMState(v9, 1, 0);
        *(_DWORD *)(v9 + 1488) = a5;
        v8 = *(_DWORD *)(a6 + 4);
        *(_DWORD *)(v9 + 1492) = *(_DWORD *)a6;
        *(_DWORD *)(v9 + 1496) = v8;
        CPlayer::Write(a2, a3, a4, v9, 70, (unsigned int)"bdddb");
        sub_493EB0((int)((char *)&unk_4E2758 + 60 * a5), a2, a3, a4);
        CPlayer::Write(a2, a3, a4, v9, 22, (unsigned int)"bb");
      }
    }
  }
}

//----- (0045CD80) --------------------------------------------------------
int __thiscall CSMap::IsOnTile(void *this, int a2, int a3)
{
  int result; // eax@5
  int v4; // eax@6
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v5 = *(_DWORD *)a2 >> 5;
  v6 = *(_DWORD *)(a2 + 4) >> 5;
  if ( v5 >= 0 && v5 >> 8 < 64 && v6 >= 0 && v6 >> 8 < 64 )
  {
    v4 = CSMap::_GetCellMap(this, (int)&v5);
    result = CCellMap::IsOnTile(v4, (int)&v5, a3);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0045CDF0) --------------------------------------------------------
int __thiscall CCellMap::IsOnTile(int this, int a2, int a3)
{
  int result; // eax@2
  int v4; // [sp+4h] [bp-8h]@5
  int v5; // [sp+8h] [bp-4h]@5

  if ( this )
  {
    if ( a3 )
    {
      v4 = *(_DWORD *)a2 & 0xFF;
      v5 = *(_DWORD *)(a2 + 4) & 0xFF;
      result = a3 & *(_DWORD *)(CCellMap::GetTile(this, (int)&v4) + 4);
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0045CE50) --------------------------------------------------------
void __userpurge CPlayer::OnTeleport(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // ST5C_4@11
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+4h] [bp-8h]@3

  v7 = a1;
  if ( a5 )
  {
    CChar::Lock(a1, a2, a3, a4);
    v8 = sub_491080(*(_DWORD *)(v7 + 1488));
    if ( v8 )
    {
      if ( sub_4913E0(*(void **)(v7 + 320), a2, a3, a4, v7, v7 + 324) )
      {
        CChar::WriteInSight(a2, a3, a4, v7, 55, (unsigned int)"d");
        if ( CChar::IsGState(v7, 8) )
        {
          CChar::SubGState(v7, 10);
          CPlayer::Write(a2, a3, a4, v7, 46, (unsigned int)"dd");
          CPlayer::SubEState(v7, 8);
        }
        if ( CChar::IsGState(v7, 4096) )
          CChar::SubGState(v7, 4096);
        *(_DWORD *)(v7 + 316) = *(_DWORD *)(v7 + 1488);
        *(_DWORD *)(v7 + 320) = v8;
        CChar::SetXY(v7, v7 + 1492);
        *(_DWORD *)(v7 + 340) = a6;
        sub_491360(*(void **)(v7 + 320), a2, a3, a4, v7, v7 + 324);
        CPlayer::GetGuildName(v7);
        CPlayer::GetGuildClassTitle(v7);
        v6 = (int)sub_44FCE0(a2, a3, a4, 50, (unsigned int)"dsbdddwdmbbIssdbd");
        sub_493390(*(_DWORD *)(v7 + 320), a2, a3, a4, v7, v7 + 324, v6);
        CIOBuffer::Release(v6);
        CChar::Unlock(v7, a2, a3, a4);
      }
      else
      {
        CChar::Unlock(v7, a2, a3, a4);
        sub_4328C0(
          "CPlayer::OnTeleport() Can't remove player pointer. (%d, %d, %d) (PID:%d, UID: %d) ",
          *(_DWORD *)(v7 + 316),
          *(_DWORD *)(v7 + 324),
          *(_DWORD *)(v7 + 328),
          *(_DWORD *)(v7 + 452),
          *(_DWORD *)(v7 + 448));
      }
    }
    else
    {
      CChar::Unlock(v7, a2, a3, a4);
    }
  }
}

//----- (0045D0D0) --------------------------------------------------------
signed int __userpurge CPlayer::_IntoInven<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST08_4@1
  int v6; // eax@1
  signed int result; // eax@2
  char v8; // [sp+4h] [bp-10h]@1
  char v9; // [sp+Ch] [bp-8h]@1
  char v10; // [sp+10h] [bp-4h]@1

  v5 = a1;
  sub_423980(a5, a2, a3, a4, (volatile LONG *)(a5 + 88));
  v6 = sub_420990((int)&v8, a5 + 36, (int)&a5);
  sub_445DF0(v5 + 1068, (int)&v9, v6);
  if ( v10 )
  {
    result = 1;
  }
  else
  {
    sub_4239C0(a5, a2, a3, a4, a5 + 88);
    result = 0;
  }
  return result;
}

//----- (0045D140) --------------------------------------------------------
void __userpurge CPlayer::_OutofInven(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  if ( sub_470740(a1 + 1068, a5 + 36) )
    sub_4239C0(a5, a2, a3, a4, a5 + 88);
  else
    sub_422B30("CPlayer()::_OutofInven() Not in ItemMap. (IID:%d)", *(_DWORD *)(a5 + 36));
}

//----- (0045D190) --------------------------------------------------------
int __userpurge CPlayer::FindItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST08_4@1
  int v8; // ST0C_4@1

  v7 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  v8 = CPlayer::_FindItem((void *)v7, a5, a6);
  CIOCriticalSection::Leave(v7 + 1020, a2, a3, a4);
  return v8;
}

//----- (0045D1E0) --------------------------------------------------------
int __thiscall CPlayer::_FindItem(void *this, int a2, int a3)
{
  void *v3; // eax@2
  void *v5; // [sp+0h] [bp-14h]@1
  char v6; // [sp+4h] [bp-10h]@2
  char v7; // [sp+8h] [bp-Ch]@6
  char v8; // [sp+Ch] [bp-8h]@1
  int v9; // [sp+10h] [bp-4h]@3

  v5 = this;
  sub_40F070((int)((char *)this + 1068), &v8);
  while ( 1 )
  {
    v3 = sub_430C20((int)((char *)v5 + 1068), &v6);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v9 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
    if ( a2 == *(_DWORD *)(*(_DWORD *)(v9 + 40) + 64) && *(_DWORD *)(v9 + 52) >= a3 )
      return v9;
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045D270) --------------------------------------------------------
int __thiscall CPlayer::_FindMergeItem(void *this, int a2)
{
  void *v2; // eax@2
  void *v4; // [sp+0h] [bp-14h]@1
  char v5; // [sp+4h] [bp-10h]@2
  char v6; // [sp+8h] [bp-Ch]@5
  char v7; // [sp+Ch] [bp-8h]@1
  int v8; // [sp+10h] [bp-4h]@3

  v4 = this;
  sub_40F070((int)((char *)this + 1068), &v7);
  while ( 1 )
  {
    v2 = sub_430C20((int)((char *)v4 + 1068), &v5);
    if ( !(unsigned __int8)sub_47D070(v2) )
      break;
    v8 = *(_DWORD *)(sub_420250((int *)&v7) + 4);
    if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 148))(v8, a2) )
      return v8;
    sub_446090((int *)&v7, (int)&v6, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045D2F0) --------------------------------------------------------
void __userpurge CPlayer::BuyItemEx(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, int a7, char *a8, unsigned int a9)
{
  int v9; // [sp+0h] [bp-40h]@1
  int v10; // [sp+4h] [bp-3Ch]@23
  signed int v11; // [sp+8h] [bp-38h]@22
  int v12; // [sp+Ch] [bp-34h]@18
  int v13; // [sp+10h] [bp-30h]@17
  int i; // [sp+14h] [bp-2Ch]@11
  int v15; // [sp+18h] [bp-28h]@7
  int v16; // [sp+1Ch] [bp-24h]@15
  unsigned __int16 v17; // [sp+20h] [bp-20h]@15
  bool v18; // [sp+24h] [bp-1Ch]@7
  int v19; // [sp+28h] [bp-18h]@26
  int v20; // [sp+2Ch] [bp-14h]@15
  int v21; // [sp+30h] [bp-10h]@7
  int v22; // [sp+34h] [bp-Ch]@1
  int v23; // [sp+38h] [bp-8h]@3
  unsigned __int16 v24; // [sp+3Ch] [bp-4h]@15

  v9 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v22 = *(_DWORD *)(v9 + 1100);
  CChar::Unlock(v9, a2, a3, a4);
  if ( !v22 )
  {
    v23 = CNPC::FindNPC(a2, a3, a4, a5);
    if ( v23 )
    {
      if ( !(*(int (__thiscall **)(int, int))(*(_DWORD *)v23 + 188))(v23, v9 + 332) )
      {
        CIOObject::Release(v23, a2, a3, a4);
        return;
      }
      v18 = 0;
      v15 = 100;
      v21 = CCastle::GetCastle(*(_DWORD *)(v23 + 464));
      CIOObject::Release(v23, a2, a3, a4);
      if ( v21 )
      {
        v15 = CCastle::GetTaxRate(v21, a2, a3, a4);
        if ( a6 != v15 )
        {
          CPlayer::Write(a2, a3, a4, v9, 68, (unsigned int)"bb");
          return;
        }
        v18 = CCastle::IsPayment(v21, a2, a3, a4);
      }
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v9 + 1020), a2, a3, a4);
      for ( i = 0; *(_DWORD *)(v9 + 1096) && i < a7; ++i )
      {
        a8 = sub_4975F0(a2, a3, a4, a8, a9, (unsigned int)&unk_4BADB4);
        v16 = v17;
        v20 = v24;
        if ( (signed int)v24 > 0 )
        {
          v13 = CItem::CreateItem(v16, 0, v20, -1);
          if ( v13 )
          {
            v12 = v20 * v15 * *(_DWORD *)(*(_DWORD *)(v13 + 40) + 108) / 100;
            if ( v12 <= 0 )
            {
              CBase::Delete((void *)v13);
              if ( !v12 )
              {
                CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
                sub_4328C0("", *(_DWORD *)(v9 + 452), *(_DWORD *)(v9 + 448), v16);
                sub_432890(
                  "[Kickout] At BuyItemEx() '%s' (PID:%d) %p %x %x %x",
                  v9 + 32,
                  *(_DWORD *)(v9 + 452),
                  *(_DWORD *)(*(_DWORD *)(v9 + 1676) + 120),
                  *(_DWORD *)(v9 + 20),
                  *(_DWORD *)(*(_DWORD *)(v9 + 1676) + 108));
                CPlayer::Write(a2, a3, a4, v9, 45, (unsigned int)"b");
                sub_495B20(*(_DWORD *)(v9 + 1676), a2, a3, a4, 1);
                return;
              }
            }
            else
            {
              if ( *(_DWORD *)(v9 + 1096) && *(_DWORD *)(*(_DWORD *)(v9 + 1096) + 52) < v12 )
              {
                CBase::Delete((void *)v13);
                break;
              }
              CIOObject::AddRef(v13, a2, a3, a4);
              v11 = CPlayer::_InsertItem((void *)v9, a2, a3, a4, 7, v13);
              if ( v11 == 1 )
              {
                v10 = *(_DWORD *)(v9 + 1096);
                if ( !(*(int (__thiscall **)(_DWORD, int, signed int, int))(*(_DWORD *)v10 + 120))(
                        *(_DWORD *)(v9 + 1096),
                        v9,
                        7,
                        -v12) )
                  CPlayer::_OutofInven(v9, a2, a3, a4, v10);
                if ( v18 )
                {
                  v19 = 3 * (v12 - v20 * 85 * *(_DWORD *)(*(_DWORD *)(v13 + 40) + 108) / 100) / 10;
                  CCastle::AddTax(v21, a2, a3, a4, v19);
                }
              }
              else
              {
                CBase::Delete((void *)v13);
              }
              CIOObject::Release(v13, a2, a3, a4);
              if ( v11 == 2 )
                break;
            }
          }
        }
      }
      CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
    }
  }
}

//----- (0045D630) --------------------------------------------------------
void __userpurge CPlayer::SellItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, char *a7, unsigned int a8)
{
  void *v8; // eax@10
  int v9; // [sp+0h] [bp-2Ch]@1
  char v10; // [sp+4h] [bp-28h]@10
  int v11; // [sp+8h] [bp-24h]@15
  char v12[4]; // [sp+Ch] [bp-20h]@13
  int v13; // [sp+10h] [bp-1Ch]@12
  char v14; // [sp+14h] [bp-18h]@10
  int i; // [sp+18h] [bp-14h]@5
  int v16; // [sp+1Ch] [bp-10h]@8
  int v17; // [sp+20h] [bp-Ch]@1
  unsigned __int16 v18; // [sp+24h] [bp-8h]@8
  char v19; // [sp+28h] [bp-4h]@10

  v9 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v17 = *(_DWORD *)(v9 + 1100);
  CChar::Unlock(v9, a2, a3, a4);
  if ( !v17 )
  {
    if ( CNPC::CanReply(a2, a3, a4, a5, v9 + 332) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v9 + 1020), a2, a3, a4);
      for ( i = 0; i < a6; ++i )
      {
        a7 = sub_4975F0(a2, a3, a4, a7, a8, (unsigned int)"dw");
        v16 = v18;
        if ( (signed int)v18 > 0 )
        {
          sub_44AE20(v9 + 1068, (int)&v14, (int)&v19);
          v8 = sub_430C20(v9 + 1068, &v10);
          if ( !(unsigned __int8)unknown_libname_8(v8) )
          {
            v13 = *(_DWORD *)(sub_420250((int *)&v14) + 4);
            if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v13 + 136))(v13, v16) )
            {
              *(_DWORD *)v12 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v13 + 200))(v13, v16);
              if ( !(*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v13 + 120))(v13, v9, 8, -v16) )
                CPlayer::_OutofInven(v9, a2, a3, a4, v13);
              v11 = CItem::CreateItem(31, 0, *(int *)v12, -1);
              if ( v11 )
              {
                if ( !CPlayer::_InsertItem((void *)v9, a2, a3, a4, 8, v11) )
                {
                  sub_4328C0("CPlayer::SellItem() Fail to insert money(%d).", *(_DWORD *)v12);
                  CBase::Delete((void *)v11);
                }
              }
            }
          }
        }
      }
      CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045D7E0) --------------------------------------------------------
void __userpurge CPlayer::DropItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6)
{
  void *v6; // eax@4
  int v7; // [sp+4h] [bp-30h]@1
  char v8; // [sp+10h] [bp-24h]@4
  int v9; // [sp+14h] [bp-20h]@7
  int v10; // [sp+18h] [bp-1Ch]@6
  int v11; // [sp+1Ch] [bp-18h]@6
  int v12; // [sp+20h] [bp-14h]@6
  int v13; // [sp+24h] [bp-10h]@6
  int v14; // [sp+28h] [bp-Ch]@5
  int v15; // [sp+2Ch] [bp-8h]@1
  char v16; // [sp+30h] [bp-4h]@4

  v7 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v15 = *(_DWORD *)(v7 + 1100);
  CChar::Unlock(v7, a2, a3, a4);
  if ( !v15 )
  {
    if ( a6 > 0 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 1020), a2, a3, a4);
      sub_44AE20(v7 + 1068, (int)&v16, (int)&a5);
      v6 = sub_430C20(v7 + 1068, &v8);
      if ( (unsigned __int8)sub_47D070(v6) )
      {
        v14 = *(_DWORD *)(sub_420250((int *)&v16) + 4);
        if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v14 + 144))(v14, a6, v7) )
        {
          CChar::GetDropPt(v7, (int)&v10);
          v12 = v10 >> 5;
          v13 = v11 >> 5;
          if ( *(_DWORD *)(v14 + 52) <= a6 )
          {
            if ( sub_491360(*(void **)(v7 + 320), a2, a3, a4, v14, (int)&v12) )
            {
              (*(void (__thiscall **)(int, int, int *, int *, signed int, _DWORD, _DWORD))(*(_DWORD *)v14 + 124))(
                v14,
                v7,
                &v10,
                &v12,
                1,
                0,
                0);
              CPlayer::_OutofInven(v7, a2, a3, a4, v14);
            }
          }
          else
          {
            v9 = CItem::CreateItem(*(_DWORD *)(*(_DWORD *)(v14 + 40) + 64), 0, a6, *(_DWORD *)(v14 + 84));
            if ( v9 )
            {
              if ( sub_491360(*(void **)(v7 + 320), a2, a3, a4, v9, (int)&v12) )
              {
                (*(void (__thiscall **)(int, int, int *, int *, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 124))(
                  v9,
                  v7,
                  &v10,
                  &v12,
                  0,
                  0,
                  0);
                (*(void (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v14 + 120))(v14, v7, 11, -a6);
              }
              else
              {
                if ( v9 )
                  (**(void (__thiscall ***)(_DWORD, _DWORD))v9)(v9, 1);
              }
            }
          }
        }
      }
      CIOCriticalSection::Leave(v7 + 1020, a2, a3, a4);
    }
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045D9C0) --------------------------------------------------------
void __userpurge CPlayer::TrashItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  void *v5; // eax@3
  int v6; // [sp+0h] [bp-14h]@1
  char v7; // [sp+4h] [bp-10h]@3
  int v8; // [sp+8h] [bp-Ch]@4
  int v9; // [sp+Ch] [bp-8h]@1
  char v10; // [sp+10h] [bp-4h]@3

  v6 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v9 = *(_DWORD *)(v6 + 1100);
  CChar::Unlock(v6, a2, a3, a4);
  if ( !v9 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v6 + 1020), a2, a3, a4);
    sub_44AE20(v6 + 1068, (int)&v10, (int)&a5);
    v5 = sub_430C20(v6 + 1068, &v7);
    if ( (unsigned __int8)sub_47D070(v5) )
    {
      v8 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
      if ( !*(_DWORD *)(*(_DWORD *)(v8 + 40) + 156) )
      {
        if ( (*(int (__thiscall **)(int, int, signed int))(*(_DWORD *)v8 + 88))(v8, v6, 4) )
          CPlayer::_OutofInven(v6, a2, a3, a4, v8);
      }
    }
    CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045DA90) --------------------------------------------------------
signed int __userpurge CPlayer::RemoveItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  signed int result; // eax@2
  int v8; // [sp+0h] [bp-8h]@1
  int v9; // [sp+4h] [bp-4h]@1

  v8 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  v9 = CPlayer::_FindItem((void *)v8, a6, a7);
  if ( v9 )
  {
    if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 120))(v9, v8, a5, -a7) )
    {
      if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v9 + 196))(v9) )
        --*(_DWORD *)(v8 + 1104);
      CPlayer::_OutofInven(v8, a2, a3, a4, v9);
    }
    CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
    result = 1;
  }
  else
  {
    CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
    result = 0;
  }
  return result;
}

//----- (0045DB40) --------------------------------------------------------
void __userpurge CPlayer::PutOnItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  void *v5; // ST0C_4@3
  void *v6; // eax@5
  int v7; // eax@6
  int v8; // [sp+4h] [bp-18h]@1
  char v9; // [sp+8h] [bp-14h]@5
  char v10; // [sp+Ch] [bp-10h]@3
  char v11; // [sp+10h] [bp-Ch]@3
  int v12; // [sp+14h] [bp-8h]@1
  char v13; // [sp+18h] [bp-4h]@5

  v8 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v12 = *(_DWORD *)(v8 + 1100);
  CChar::Unlock(v8, a2, a3, a4);
  if ( !v12 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v8 + 1020), a2, a3, a4);
    v5 = sub_430C20(v8 + 1140, &v10);
    sub_4714F0(v8 + 1140, (int)&v11, (int)&a5);
    if ( (unsigned __int8)sub_47D070(v5) )
    {
      CPlayer::Write(a2, a3, a4, v8, 67, (unsigned int)"b");
      CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
    }
    else
    {
      sub_44AE20(v8 + 1068, (int)&v13, (int)&a5);
      v6 = sub_430C20(v8 + 1068, &v9);
      if ( (unsigned __int8)sub_47D070(v6) )
      {
        v7 = sub_420250((int *)&v13);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v7 + 4) + 96))(*(_DWORD *)(v7 + 4), v8);
      }
      CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
    }
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045DC50) --------------------------------------------------------
void __userpurge CPlayer::PutOffItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  void *v5; // eax@3
  int v6; // eax@4
  int v7; // [sp+4h] [bp-10h]@1
  char v8; // [sp+8h] [bp-Ch]@3
  int v9; // [sp+Ch] [bp-8h]@1
  char v10; // [sp+10h] [bp-4h]@3

  v7 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v9 = *(_DWORD *)(v7 + 1100);
  CChar::Unlock(v7, a2, a3, a4);
  if ( !v9 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 1020), a2, a3, a4);
    sub_44AE20(v7 + 1068, (int)&v10, (int)&a5);
    v5 = sub_430C20(v7 + 1068, &v8);
    if ( (unsigned __int8)sub_47D070(v5) )
    {
      v6 = sub_420250((int *)&v10);
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(v6 + 4) + 100))(*(_DWORD *)(v6 + 4), v7);
    }
    CIOCriticalSection::Leave(v7 + 1020, a2, a3, a4);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045DD00) --------------------------------------------------------
void __userpurge CPlayer::UseItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  void *v5; // eax@3
  int v6; // [sp+0h] [bp-14h]@1
  char v7; // [sp+4h] [bp-10h]@3
  int v8; // [sp+8h] [bp-Ch]@4
  int v9; // [sp+Ch] [bp-8h]@1
  char v10; // [sp+10h] [bp-4h]@3

  v6 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v9 = *(_DWORD *)(v6 + 1100);
  CChar::Unlock(v6, a2, a3, a4);
  if ( !v9 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v6 + 1020), a2, a3, a4);
    sub_44AE20(v6 + 1068, (int)&v10, (int)&a5);
    v5 = sub_430C20(v6 + 1068, &v7);
    if ( (unsigned __int8)sub_47D070(v5) )
    {
      v8 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
      if ( !(*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 128))(v8, v6) )
        CPlayer::_OutofInven(v6, a2, a3, a4, v8);
    }
    CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045DDC0) --------------------------------------------------------
signed int __userpurge CPlayer::InsertItem<eax>(int a1<ecx>, int a2<edx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a5<esi>, int a3, int a4)
{
  int v8; // ST08_4@1
  signed int v9; // ST0C_4@1

  v8 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), ebx0, edi0, a5);
  v9 = CPlayer::_InsertItem((void *)v8, ebx0, edi0, a5, a3, a4);
  CIOCriticalSection::Leave(v8 + 1020, ebx0, edi0, a5);
  return v9;
}

//----- (0045DE10) --------------------------------------------------------
signed int __userpurge CPlayer::_InsertItem<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+4h] [bp-8h]@15
  int v9; // [sp+8h] [bp-4h]@2

  v7 = (int)a1;
  if ( *(_DWORD *)(*(_DWORD *)(a6 + 40) + 92) && (v9 = CPlayer::_FindMergeItem(a1, a6)) != 0 )
  {
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v9 + 120))(v9, v7, a5, *(_DWORD *)(a6 + 52));
    (*(void (__thiscall **)(int, int))(*(_DWORD *)a6 + 204))(a6, v7);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)a6 + 92))(a6, a5);
  }
  else
  {
    if ( CPlayer::GetInvenSize((void *)v7) >= 60
      && a5 != 10
      && a5 != 8
      && a5 != 25
      && a5 != 16
      && a5 != 24
      && a5 != 2
      && a5 != 45
      && a5 != 21
      && a5 != 27 )
    {
      CPlayer::Write(a2, a3, a4, v7, 67, (unsigned int)"b");
      return 2;
    }
    v8 = *(_DWORD *)(a6 + 36);
    if ( !*(_DWORD *)(a6 + 36) )
      *(_DWORD *)(a6 + 36) = CItem::NewIID();
    if ( !*(_DWORD *)(*(_DWORD *)(a6 + 40) + 92) && *(_DWORD *)(a6 + 52) > 1 )
    {
      sub_4328C0(
        "_InsertItem() ",
        v7 + 32,
        *(_DWORD *)(v7 + 452),
        *(_DWORD *)(v7 + 448),
        *(_DWORD *)(*(_DWORD *)(a6 + 40) + 64),
        *(_DWORD *)(a6 + 52),
        a5);
      return 0;
    }
    if ( !CPlayer::_IntoInven(v7, a2, a3, a4, a6) )
      return 0;
    (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)a6 + 112))(a6, v7, a5, v8);
    *(_DWORD *)(a6 + 80) = 0;
  }
  return 1;
}

//----- (0045DF90) --------------------------------------------------------
void __userpurge CPlayer::EnchantItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // eax@3
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-1Ch]@1
  char v9; // [sp+4h] [bp-18h]@4
  char v10; // [sp+8h] [bp-14h]@3
  int v11; // [sp+Ch] [bp-10h]@5
  int v12; // [sp+10h] [bp-Ch]@4
  char v13; // [sp+14h] [bp-8h]@4
  char v14; // [sp+18h] [bp-4h]@3

  v8 = a1;
  if ( a5 != a6 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
    sub_44AE20(v8 + 1068, (int)&v14, (int)&a5);
    v6 = sub_430C20(v8 + 1068, &v10);
    if ( (unsigned __int8)sub_47D070(v6) )
    {
      v12 = *(_DWORD *)(sub_420250((int *)&v14) + 4);
      sub_44AE20(v8 + 1068, (int)&v13, (int)&a6);
      v7 = sub_430C20(v8 + 1068, &v9);
      if ( (unsigned __int8)sub_47D070(v7) )
      {
        v11 = *(_DWORD *)(sub_420250((int *)&v13) + 4);
        if ( !(*(int (__thiscall **)(int, int, int))(*(_DWORD *)v12 + 172))(v12, v8, v11) )
          CPlayer::_OutofInven(v8, a2, a3, a4, v12);
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)v11 + 168))(v11) )
          CPlayer::_OutofInven(v8, a2, a3, a4, v11);
      }
    }
    CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045E0A0) --------------------------------------------------------
void __userpurge CPlayer::UpgradeItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6)
{
  void *v6; // eax@1
  int v7; // [sp+4h] [bp-10h]@1
  char v8; // [sp+8h] [bp-Ch]@1
  int v9; // [sp+Ch] [bp-8h]@2
  char v10; // [sp+10h] [bp-4h]@1

  v7 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  sub_44AE20(v7 + 1068, (int)&v10, (int)&a6);
  v6 = sub_430C20(v7 + 1068, &v8);
  if ( (unsigned __int8)sub_47D070(v6) )
  {
    v9 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
    if ( a5 )
    {
      if ( a5 == 1 )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 212))(v9, v7);
      }
      else
      {
        if ( a5 == 2 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 216))(v9, v7);
      }
    }
    else
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 208))(v9, v7);
    }
  }
  CIOCriticalSection::Leave(v7 + 1020, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045E170) --------------------------------------------------------
void __userpurge CPlayer::AskTrade(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = a1;
  if ( *(_DWORD *)(a1 + 28) != a5 )
  {
    if ( CChar::IsGState(a1, 256) )
    {
      CPlayer::Write(a2, a3, a4, v5, 95, (unsigned int)"b");
    }
    else
    {
      v6 = sub_450810(a2, a3, a4, a5);
      if ( v6 )
      {
        if ( CChar::IsGState(v6, 256) )
        {
          CPlayer::Write(a2, a3, a4, v5, 95, (unsigned int)"b");
        }
        else
        {
          if ( !CBase::IsDeleted(v5) )
          {
            if ( !CChar::IsGState(v5, 176) )
            {
              if ( !CBase::IsDeleted(v6) )
              {
                if ( !CChar::IsGState(v6, 176) )
                {
                  if ( sub_448870(v5 + 332, v6 + 332) <= 64 )
                  {
                    CChar::Lock(v6, a2, a3, a4);
                    if ( *(_DWORD *)(v6 + 1100) || CPlayer::IsEState(v6, 1) )
                    {
                      CPlayer::Write(a2, a3, a4, v5, 67, (unsigned int)"b");
                    }
                    else
                    {
                      CPlayer::AddEState(v6, 1);
                      CPlayer::Write(a2, a3, a4, v6, 75, (unsigned int)"d");
                    }
                    CChar::Unlock(v6, a2, a3, a4);
                  }
                }
              }
            }
          }
        }
        sub_4239C0(v6, a2, a3, a4, v6 + 352);
      }
    }
  }
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (0045E2F0) --------------------------------------------------------
int __userpurge CPlayer::OnAskTrade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int result; // eax@1
  int v7; // [sp+0h] [bp-8h]@1
  int v8; // [sp+4h] [bp-4h]@4

  v7 = a1;
  result = a1;
  if ( *(_DWORD *)(a1 + 28) != a6 )
  {
    if ( !CChar::IsGState(a1, 176) )
    {
      v8 = sub_450810(a2, a3, a4, a6);
      if ( v8 )
      {
        if ( CChar::IsGState(v8, 176) )
        {
          CPlayer::Write(a2, a3, a4, v7, 67, (unsigned int)"b");
        }
        else
        {
          if ( a5 )
            sub_496700(a2, a3, a4, v8, v7);
          else
            CPlayer::Write(a2, a3, a4, v8, 77, (unsigned int)"bd");
        }
        sub_4239C0(v8, a2, a3, a4, v8 + 352);
      }
    }
    result = CPlayer::SubEState(v7, 1);
  }
  return result;
}

//----- (0045E3B0) --------------------------------------------------------
void __usercall CPlayer::CancelTrade(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v5 = *(_DWORD *)(v4 + 1100);
  if ( v5 )
  {
    CIOObject::AddRef(v5, a2, a3, a4);
    CChar::Unlock(v4, a2, a3, a4);
    sub_4968F0(v5, a2, a3, a4, v4);
    CIOObject::Release(v5, a2, a3, a4);
  }
  else
  {
    CChar::Unlock(v4, a2, a3, a4);
  }
}

//----- (0045E410) --------------------------------------------------------
int __userpurge CPlayer::_EndTrade<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST10_4@1

  v6 = a1;
  CPlayer::Write(a2, a3, a4, a1, 78, (unsigned int)"b");
  sub_445BF0(v6 + 1080);
  *(_DWORD *)(v6 + 1100) = 0;
  return CPlayer::SubEState(v6, 6);
}

//----- (0045E460) --------------------------------------------------------
void __userpurge CPlayer::ShowOffItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  void *v7; // eax@13
  int v8; // [sp+0h] [bp-2Ch]@1
  char v9; // [sp+4h] [bp-28h]@13
  int v10; // [sp+8h] [bp-24h]@15
  char v11; // [sp+Ch] [bp-20h]@13
  int i; // [sp+10h] [bp-1Ch]@8
  void *v13; // [sp+14h] [bp-18h]@8
  char *v14; // [sp+18h] [bp-14h]@8
  int v15; // [sp+1Ch] [bp-10h]@6
  int v16; // [sp+20h] [bp-Ch]@10
  int v17; // [sp+24h] [bp-8h]@11
  void *v18; // [sp+28h] [bp-4h]@8

  v8 = a1;
  if ( a5 > 0 )
  {
    CChar::Lock(a1, a2, a3, a4);
    if ( *(_DWORD *)(v8 + 1100) && !CTrade::IsEnd(*(_DWORD *)(v8 + 1100)) && !CPlayer::IsEState(v8, 6) )
    {
      v15 = CTrade::GetOther(*(_DWORD *)(v8 + 1100), v8);
      if ( a5 + CPlayer::GetInvenSize((void *)v15) > 60 )
      {
        CPlayer::Write(a2, a3, a4, v8, 67, (unsigned int)"b");
        CChar::Unlock(v8, a2, a3, a4);
        return;
      }
      v18 = CIOBuffer::Alloc();
      v13 = v18;
      *((_BYTE *)v18 + 2) = 79;
      v14 = (char *)v13 + 4;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v8 + 1020), a2, a3, a4);
      for ( i = 0; ; ++i )
      {
        if ( i >= a5 )
        {
          CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
          sub_496F10(a2, a3, a4, (char *)v13 + 3, (unsigned int)"b");
          *(_WORD *)v13 = (_WORD)v14 - (_WORD)v13;
          *((_DWORD *)v18 + 2000) = *(_WORD *)v13;
          CSocket::_CSocket(*(_DWORD *)(v15 + 1676), a2, a3, a4, (int)v18);
          CChar::Unlock(v8, a2, a3, a4);
          return;
        }
        a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"dd");
        if ( !v16 )
          break;
        if ( v17 <= 0 )
          break;
        sub_44AE20(v8 + 1068, (int)&v11, (int)&v16);
        v7 = sub_430C20(v8 + 1068, &v9);
        if ( (unsigned __int8)unknown_libname_8(v7) )
          break;
        v10 = *(_DWORD *)(sub_420250((int *)&v11) + 4);
        if ( !(*(int (__thiscall **)(int, int, int, int))(*(_DWORD *)v10 + 140))(v10, v17, v8, v15) )
          break;
        (*(void (__thiscall **)(int, char **, int))(*(_DWORD *)v10 + 72))(v10, &v14, v17);
        sub_4707D0(v8 + 1080, (int)&v16);
      }
      sub_445BF0(v8 + 1080);
      CIOCriticalSection::Leave(v8 + 1020, a2, a3, a4);
      CPlayer::Write(a2, a3, a4, v8, 67, (unsigned int)"b");
      CIOBuffer::Release((int)v18);
    }
    CChar::Unlock(v8, a2, a3, a4);
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045E6C0) --------------------------------------------------------
int __thiscall CTrade::IsEnd(int this)
{
  return *(_DWORD *)(this + 20) & 0x10;
}

//----- (0045E6E0) --------------------------------------------------------
int __thiscall CTrade::GetOther(int this, int a2)
{
  int v3; // [sp+0h] [bp-8h]@2

  if ( a2 == *(_DWORD *)(this + 32) )
    v3 = *(_DWORD *)(this + 36);
  else
    v3 = *(_DWORD *)(this + 32);
  return v3;
}

//----- (0045E720) --------------------------------------------------------
void __usercall CPlayer::TradeAgreed(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v5 = *(_DWORD *)(v4 + 1100);
  if ( v5 )
  {
    CIOObject::AddRef(v5, a2, a3, a4);
    CChar::Unlock(v4, a2, a3, a4);
    sub_496990(v5, a2, a3, a4, v4);
    CIOObject::Release(v5, a2, a3, a4);
  }
  else
  {
    CChar::Unlock(v4, a2, a3, a4);
  }
}

//----- (0045E780) --------------------------------------------------------
signed int __thiscall CPlayer::_CheckTrade(int this)
{
  signed int result; // eax@3
  void *v2; // eax@5
  int v3; // eax@6
  int v4; // edx@6
  void *v5; // eax@8
  int v6; // eax@9
  int v7; // [sp+0h] [bp-20h]@1
  char v8; // [sp+4h] [bp-1Ch]@8
  char v9; // [sp+8h] [bp-18h]@5
  char v10; // [sp+Ch] [bp-14h]@11
  int v11; // [sp+10h] [bp-10h]@6
  int v12; // [sp+14h] [bp-Ch]@6
  char v13; // [sp+18h] [bp-8h]@6
  char v14; // [sp+1Ch] [bp-4h]@4

  v7 = this;
  if ( *(_DWORD *)(this + 1100) && !CBase::IsDeleted(*(_DWORD *)(this + 1100)) )
  {
    sub_430C20(v7 + 1080, &v14);
    while ( 1 )
    {
      v2 = sub_445B40(v7 + 1080, &v9);
      if ( !(unsigned __int8)sub_47D070(v2) )
        break;
      v3 = sub_420010();
      v4 = *(_DWORD *)(v3 + 4);
      v11 = *(_DWORD *)v3;
      v12 = v4;
      sub_44AE20(v7 + 1068, (int)&v13, (int)&v11);
      if ( v12 < 0 )
      {
        sub_4328C0(" ", *(_DWORD *)(v7 + 452), v11, v12);
        return 0;
      }
      v5 = sub_430C20(v7 + 1068, &v8);
      if ( (unsigned __int8)unknown_libname_8(v5)
        || (v6 = sub_420250((int *)&v13), *(_DWORD *)(*(_DWORD *)(v6 + 4) + 52) < v12) )
        return 0;
      sub_430E30(&v14, (int)&v10, 0);
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045E890) --------------------------------------------------------
char __userpurge CPlayer::_TradeItem<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, void *a5)
{
  int v5; // eax@3
  void *v6; // eax@3
  int v7; // eax@4
  int v8; // edx@4
  void *v9; // eax@4
  int v11; // [sp+0h] [bp-30h]@11
  int v12; // [sp+4h] [bp-2Ch]@1
  char v13; // [sp+8h] [bp-28h]@4
  char v14; // [sp+Ch] [bp-24h]@3
  char v15; // [sp+10h] [bp-20h]@2
  int v16; // [sp+14h] [bp-1Ch]@13
  int v17; // [sp+18h] [bp-18h]@4
  int v18; // [sp+1Ch] [bp-14h]@4
  int v19; // [sp+20h] [bp-10h]@4
  int v20; // [sp+24h] [bp-Ch]@6
  char v21; // [sp+28h] [bp-8h]@4
  char v22; // [sp+2Ch] [bp-4h]@1

  v12 = a1;
  sub_430C20(a1 + 1080, &v22);
  while ( 1 )
  {
    v6 = sub_445B40(v12 + 1080, &v14);
    v5 = (unsigned __int8)sub_47D070(v6);
    if ( !(_BYTE)v5 )
      break;
    v7 = sub_420010();
    v8 = *(_DWORD *)(v7 + 4);
    v17 = *(_DWORD *)v7;
    v18 = v8;
    v19 = 0;
    sub_44AE20(v12 + 1068, (int)&v21, (int)&v17);
    v9 = sub_430C20(v12 + 1068, &v13);
    if ( !(unsigned __int8)unknown_libname_8(v9) )
    {
      v20 = *(_DWORD *)(sub_420250((int *)&v21) + 4);
      v19 = (*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v20 + 132))(v20, v12, 10, v18);
      if ( v19 == v20 )
        CPlayer::_OutofInven(v12, a2, a3, a4, v20);
      if ( v19 )
      {
        CIOObject::AddRef(v19, a2, a3, a4);
        if ( CPlayer::_InsertItem(a5, a2, a3, a4, 10, v19) != 1 )
        {
          if ( *(_DWORD *)(v19 + 44) )
            v11 = *(_DWORD *)(*(_DWORD *)(v19 + 44) + 32);
          else
            v11 = 0;
          v16 = v11;
          sub_4328C0(
            "Fail to insert trade item.(iid:%d, index:%d, prefix:%d, num:%d)",
            *(_DWORD *)(v19 + 36),
            *(_DWORD *)(*(_DWORD *)(v19 + 40) + 64),
            v11,
            *(_DWORD *)(v19 + 52));
          CBase::Delete((void *)v19);
        }
        CIOObject::Release(v19, a2, a3, a4);
      }
    }
    sub_430E30(&v22, (int)&v15, 0);
  }
  return v5;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045EA00) --------------------------------------------------------
void __userpurge CPlayer::_StorageIn(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  void *v7; // eax@1
  int v8; // eax@2
  int v9; // eax@3
  int v10; // [sp+4h] [bp-34h]@1
  char v11; // [sp+8h] [bp-30h]@2
  char v12; // [sp+10h] [bp-28h]@2
  char v13; // [sp+30h] [bp-8h]@1
  char v14; // [sp+34h] [bp-4h]@1

  v10 = a1;
  sub_433170(a1 + 1128, (int)&v14, a5 + 2);
  v7 = sub_430C20(v10 + 1128, &v13);
  if ( (unsigned __int8)unknown_libname_8(v7) )
  {
    v8 = sub_472830((int)&v12, a5 + 2, (const void *)a5);
    sub_470890(v10 + 1128, (int)&v11, v8);
  }
  else
  {
    v9 = sub_420250((int *)&v14);
    *(_DWORD *)(v9 + 15) += *(_DWORD *)(a5 + 11);
  }
  CPlayer::Write(a2, a3, a4, v10, 9, (unsigned int)"ddb");
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045EAB0) --------------------------------------------------------
int __thiscall CPlayer::_StorageOut(void *this, char a2, int a3)
{
  int result; // eax@2

  if ( !a3 )
    result = sub_470A40((int)((char *)this + 1128), (int)&a2);
  return result;
}

//----- (0045EAE0) --------------------------------------------------------
signed int __thiscall CPlayer::_FindStorageItem(void *this, int a2, int a3, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@3
  void *v8; // [sp+8h] [bp-2Ch]@1
  char v9; // [sp+Ch] [bp-28h]@2
  char v10; // [sp+10h] [bp-24h]@8
  unsigned __int16 v11; // [sp+14h] [bp-20h]@3
  int v12; // [sp+16h] [bp-1Eh]@7
  int v13; // [sp+1Bh] [bp-19h]@4
  unsigned __int8 v14; // [sp+25h] [bp-Fh]@6
  __int16 v15; // [sp+2Ch] [bp-8h]@3
  char v16; // [sp+30h] [bp-4h]@1

  v8 = this;
  sub_40F070((int)((char *)this + 1128), &v16);
  while ( 1 )
  {
    v5 = sub_430C20((int)((char *)v8 + 1128), &v9);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    v6 = sub_420250((int *)&v16) + 4;
    memcpy(&v11, (const void *)v6, 0x18u);
    v15 = *(_WORD *)(v6 + 24);
    if ( a2 == v11 && a4 == (unsigned __int8)(v13 & 0x88) && (dword_4E35B8 != 2 || a5 == v14) )
    {
      *(_DWORD *)a3 = v12;
      return 1;
    }
    sub_434510((int *)&v16, (int)&v10, 0);
  }
  return 0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0045EB90) --------------------------------------------------------
void __usercall CPlayer::StorageInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@3
  int v5; // eax@4
  int v6; // edi@4
  int v7; // [sp+8h] [bp-20h]@1
  char v8; // [sp+Ch] [bp-1Ch]@3
  char v9; // [sp+10h] [bp-18h]@4
  char v10; // [sp+14h] [bp-14h]@2
  void *v11; // [sp+18h] [bp-10h]@1
  int v12; // [sp+1Ch] [bp-Ch]@1
  void *v13; // [sp+20h] [bp-8h]@1
  void *v14; // [sp+24h] [bp-4h]@1

  v7 = a1;
  v14 = CIOBuffer::Alloc();
  v11 = v14;
  *((_BYTE *)v14 + 2) = 88;
  v13 = (char *)v11 + 4;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 1020), a2, a3, a4);
  v12 = unknown_libname_10();
  if ( v12 > 0 )
  {
    sub_40F070(v7 + 1128, &v10);
    while ( 1 )
    {
      v4 = sub_430C20(v7 + 1128, &v8);
      if ( !(unsigned __int8)sub_47D070(v4) )
        break;
      v5 = sub_420250((int *)&v10) + 4;
      v6 = (int)v13;
      memcpy(v13, (const void *)v5, 0x18u);
      v6 += 24;
      *(_WORD *)v6 = *(_WORD *)(v5 + 24);
      a4 = v5 + 26;
      a3 = v6 + 2;
      v13 = (char *)v13 + 26;
      sub_434510((int *)&v10, (int)&v9, 0);
    }
  }
  CIOCriticalSection::Leave(v7 + 1020, a2, a3, a4);
  sub_496F10(a2, a3, a4, (char *)v11 + 3, (unsigned int)"b");
  *(_WORD *)v11 = (_WORD)v13 - (_WORD)v11;
  *((_DWORD *)v14 + 2000) = *(_WORD *)v11;
  CSocket::_CSocket(*(_DWORD *)(v7 + 1676), a2, a3, a4, (int)v14);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045ECA0) --------------------------------------------------------
void __userpurge CPlayer::PutInStorage(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, char *a7, unsigned int a8)
{
  void *v8; // eax@20
  int v9; // [sp+0h] [bp-28h]@1
  char v10; // [sp+4h] [bp-24h]@20
  int v11; // [sp+8h] [bp-20h]@22
  char v12; // [sp+Ch] [bp-1Ch]@20
  int i; // [sp+10h] [bp-18h]@15
  int v14; // [sp+14h] [bp-14h]@8
  int v15; // [sp+18h] [bp-10h]@9
  int v16; // [sp+1Ch] [bp-Ch]@6
  char *v17; // [sp+20h] [bp-8h]@8
  int v18; // [sp+24h] [bp-4h]@8
  char *v19; // [sp+38h] [bp+10h]@8

  v9 = a1;
  if ( a6 > 0 )
  {
    if ( CNPC::CanReply(a2, a3, a4, a5, a1 + 332) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v9 + 1020), a2, a3, a4);
      if ( (unsigned int)(a6 + unknown_libname_10()) <= 0x64 )
      {
        v16 = *(_DWORD *)(v9 + 1096);
        if ( v16 )
        {
          v17 = a7;
          v19 = sub_4975F0(a2, a3, a4, a7, a8, (unsigned int)"dd");
          v14 = 0;
          if ( v18 )
          {
            if ( v15 <= 0 || *(_DWORD *)(v16 + 36) != v18 )
            {
              --a6;
            }
            else
            {
              v14 += v15;
              v19 = v17;
            }
          }
          v14 += 60 * a6;
          if ( *(_DWORD *)(v16 + 52) >= v14 )
          {
            v14 = 0;
            for ( i = 0; i < a6; ++i )
            {
              v19 = sub_4975F0(a2, a3, a4, v19, a8, (unsigned int)"dd");
              if ( v15 > 0 )
              {
                sub_44AE20(v9 + 1068, (int)&v12, (int)&v18);
                v8 = sub_430C20(v9 + 1068, &v10);
                if ( !(unsigned __int8)unknown_libname_8(v8) )
                {
                  v11 = *(_DWORD *)(sub_420250((int *)&v12) + 4);
                  if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 152))(v11, v9, v15) )
                    CPlayer::_OutofInven(v9, a2, a3, a4, v11);
                  v14 += 60;
                }
              }
            }
            if ( !CBase::IsDeleted(v16) )
            {
              if ( !(*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v16 + 120))(v16, v9, 15, -v14) )
                CPlayer::_OutofInven(v9, a2, a3, a4, v16);
            }
          }
        }
        CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
      }
      else
      {
        CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
        CPlayer::Write(a2, a3, a4, v9, 67, (unsigned int)"b");
      }
    }
  }
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045EEC0) --------------------------------------------------------
void __userpurge CPlayer::PutOutStorage(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, char *a7, unsigned int a8)
{
  void *v8; // eax@11
  int v9; // eax@13
  int v10; // [sp+0h] [bp-24h]@1
  char v11; // [sp+4h] [bp-20h]@11
  int v12; // [sp+8h] [bp-1Ch]@13
  int v13; // [sp+Ch] [bp-18h]@13
  int v14; // [sp+10h] [bp-14h]@13
  char v15; // [sp+14h] [bp-10h]@11
  int i; // [sp+18h] [bp-Ch]@6
  int v17; // [sp+1Ch] [bp-8h]@9
  char v18; // [sp+20h] [bp-4h]@11

  v10 = a1;
  if ( a6 > 0 )
  {
    if ( CNPC::CanReply(a2, a3, a4, a5, a1 + 332) )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v10 + 1020), a2, a3, a4);
      if ( a6 + CPlayer::GetInvenSize((void *)v10) <= 60 )
      {
        for ( i = 0; i < a6; ++i )
        {
          a7 = sub_4975F0(a2, a3, a4, a7, a8, (unsigned int)"dd");
          if ( v17 > 0 )
          {
            sub_433170(v10 + 1128, (int)&v15, (int)&v18);
            v8 = sub_430C20(v10 + 1128, &v11);
            if ( !(unsigned __int8)unknown_libname_8(v8) )
            {
              v9 = sub_420250((int *)&v15);
              v12 = v9 + 4;
              v14 = v9 + 4;
              v13 = sub_426060(*(_DWORD *)(v10 + 452), &v14);
              if ( v13 )
              {
                if ( (*(int (__thiscall **)(int, int, int, _DWORD, int))(*(_DWORD *)v13 + 156))(
                       v13,
                       v10,
                       v17,
                       *(_WORD *)v12,
                       v12 + 11) )
                  CPlayer::_IntoInven(v10, a2, a3, a4, v13);
              }
            }
          }
        }
        CIOCriticalSection::Leave(v10 + 1020, a2, a3, a4);
      }
      else
      {
        CIOCriticalSection::Leave(v10 + 1020, a2, a3, a4);
        CPlayer::Write(a2, a3, a4, v10, 67, (unsigned int)"b");
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045F040) --------------------------------------------------------
void __userpurge CPlayer::SetStallInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  void *v7; // eax@15
  int v8; // eax@18
  int v9; // [sp+4h] [bp-74h]@1
  char v10; // [sp+8h] [bp-70h]@18
  char v11; // [sp+10h] [bp-68h]@18
  char v12; // [sp+34h] [bp-44h]@15
  char *v13; // [sp+38h] [bp-40h]@23
  char v14; // [sp+3Ch] [bp-3Ch]@22
  char *v15; // [sp+40h] [bp-38h]@18
  int v16; // [sp+44h] [bp-34h]@16
  char v17; // [sp+48h] [bp-30h]@18
  char v18; // [sp+68h] [bp-10h]@15
  int v19; // [sp+6Ch] [bp-Ch]@9
  int v20; // [sp+70h] [bp-8h]@10
  char v21; // [sp+74h] [bp-4h]@15

  v9 = a1;
  if ( CChar::IsGState(a1, 256) )
  {
    CPlayer::Write(a2, a3, a4, v9, 95, (unsigned int)"b");
    return;
  }
  if ( CSMap::IsOnTile(*(void **)(v9 + 320), v9 + 332, 1048576) )
  {
    CPlayer::Write(a2, a3, a4, v9, 67, (unsigned int)"b");
    return;
  }
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
      if ( CChar::IsGState(v9, 16) )
        InterlockedIncrement((volatile LONG *)(v9 + 1220));
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v9 + 1020), a2, a3, a4);
      sub_471430(v9 + 1140, (int)&v14);
      CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
    }
    else
    {
      if ( a5 == 2 )
      {
        sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
        strcpy((char *)(v9 + 1152), v13);
        if ( CChar::IsGState(v9, 16) )
          CChar::WriteInSight(a2, a3, a4, v9, 13, (unsigned int)"bds");
      }
    }
  }
  else
  {
    sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"ddd");
    if ( v19 > 0 && v20 > 0 )
    {
      if ( CChar::IsGState(v9, 16) )
        InterlockedIncrement((volatile LONG *)(v9 + 1220));
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v9 + 1020), a2, a3, a4);
      if ( (unsigned int)unknown_libname_10() < 0x10 )
      {
        sub_44AE20(v9 + 1068, (int)&v18, (int)&v21);
        v7 = sub_430C20(v9 + 1068, &v12);
        if ( (unsigned __int8)sub_47D070(v7) )
        {
          v16 = *(_DWORD *)(sub_420250((int *)&v18) + 4);
          if ( !(*(int (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v16 + 140))(v16, v19, v9, 0) )
          {
            CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
            CPlayer::GetStallInfo(v9, a2, a3, a4, 0, v9);
            return;
          }
          sub_45F300((int)&v17, v20);
          v15 = &v17;
          (*(void (__thiscall **)(int, char **, int))(*(_DWORD *)v16 + 72))(v16, &v15, v19);
          v8 = sub_4728C0((int)&v11, (int)&v21, &v17);
          sub_470AF0(v9 + 1140, (int)&v10, v8);
        }
      }
      CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
    }
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045F300) --------------------------------------------------------
int __thiscall sub_45F300(int this, int a2)
{
  *(_BYTE *)(this + 25) = 0;
  *(_BYTE *)(this + 24) = 0;
  *(_BYTE *)(this + 23) = 0;
  *(_BYTE *)(this + 22) = 0;
  *(_BYTE *)(this + 21) = 0;
  *(_BYTE *)(this + 20) = 0;
  *(_BYTE *)(this + 19) = 0;
  *(_BYTE *)(this + 18) = 0;
  *(_BYTE *)(this + 17) = 0;
  *(_BYTE *)(this + 16) = 0;
  *(_BYTE *)(this + 15) = 0;
  *(_DWORD *)(this + 11) = 0;
  *(_DWORD *)(this + 7) = 0;
  *(_BYTE *)(this + 6) = 0;
  *(_WORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 26) = a2;
  return this;
}

//----- (0045F3A0) --------------------------------------------------------
void __userpurge CPlayer::GetStallInfo(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // eax@8
  int v7; // eax@9
  int v8; // edi@9
  int v9; // [sp+Ch] [bp-20h]@1
  char v10; // [sp+10h] [bp-1Ch]@8
  char v11; // [sp+14h] [bp-18h]@9
  char v12; // [sp+18h] [bp-14h]@7
  void *v13; // [sp+1Ch] [bp-10h]@6
  int v14; // [sp+20h] [bp-Ch]@6
  void *v15; // [sp+24h] [bp-8h]@6
  void *v16; // [sp+28h] [bp-4h]@6

  v9 = a1;
  if ( CChar::IsGState(a1, 256) )
  {
    CPlayer::Write(a2, a3, a4, v9, 95, (unsigned int)"b");
  }
  else
  {
    if ( a5 )
    {
      if ( a5 == 1 )
        CPlayer::Write(a2, a3, a4, a6, 13, (unsigned int)"bds");
    }
    else
    {
      v16 = CIOBuffer::Alloc();
      v13 = v16;
      *((_BYTE *)v16 + 2) = 13;
      v15 = (char *)v13 + 13;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v9 + 1020), a2, a3, a4);
      v14 = unknown_libname_10();
      if ( v14 > 0 )
      {
        sub_40F070(v9 + 1140, &v12);
        while ( 1 )
        {
          v6 = sub_430C20(v9 + 1140, &v10);
          if ( !(unsigned __int8)sub_47D070(v6) )
            break;
          v7 = sub_420250((int *)&v12) + 4;
          v8 = (int)v15;
          memcpy(v15, (const void *)v7, 0x1Cu);
          v8 += 28;
          *(_WORD *)v8 = *(_WORD *)(v7 + 28);
          a4 = v7 + 30;
          a3 = v8 + 2;
          v15 = (char *)v15 + 30;
          sub_472890((int *)&v12, (int)&v11, 0);
        }
      }
      CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
      sub_496F10(a2, a3, a4, (char *)v13 + 3, (unsigned int)"bddb");
      *(_WORD *)v13 = (_WORD)v15 - (_WORD)v13;
      *((_DWORD *)v16 + 2000) = *(_WORD *)v13;
      CPlayer::Send((void *)a6, a2, a3, a4, v16);
      CIOBuffer::Release((int)v16);
    }
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0045F540) --------------------------------------------------------
int __userpurge CPlayer::SwitchStall<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  int v6; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@2

  v6 = a1;
  if ( !a5 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
    sub_471490(v6 + 1140);
    CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
    result = CChar::IsGState(v6, 16);
    if ( !result )
      return result;
    CChar::SubGState(v6, 20);
    return CChar::WriteInSight(a2, a3, a4, v6, 61, (unsigned int)"dbbs");
  }
  CChar::Lock(a1, a2, a3, a4);
  v7 = *(_DWORD *)(v6 + 1100);
  CChar::Unlock(v6, a2, a3, a4);
  result = CChar::IsGStateExcept(v6, 2146443264);
  if ( !result )
  {
    if ( !*(_DWORD *)(v6 + 1016) )
    {
      if ( !v7 )
      {
        result = CPlayer::IsEState(v6, 7);
        if ( !result )
        {
          CChar::AddGState(v6, 20);
          return CChar::WriteInSight(a2, a3, a4, v6, 61, (unsigned int)"dbbs");
        }
      }
    }
  }
  return result;
}

//----- (0045F640) --------------------------------------------------------
int __thiscall CChar::IsGStateExcept(int this, int a2)
{
  return *(_DWORD *)(this + 280) & ~a2;
}

//----- (0045F660) --------------------------------------------------------
void __userpurge CPlayer::BuyItemAtStall(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, signed int a4<esi>, unsigned int a5, int a6, int a7, char *a8, unsigned int a9)
{
  void *v9; // eax@12
  int v10; // eax@14
  signed int v11; // eax@14
  void *v12; // eax@16
  int v13; // [sp+4h] [bp-40h]@1
  char v14; // [sp+8h] [bp-3Ch]@33
  char v15; // [sp+Ch] [bp-38h]@18
  char v16; // [sp+10h] [bp-34h]@16
  char v17; // [sp+14h] [bp-30h]@12
  int v18; // [sp+18h] [bp-2Ch]@19
  int v19; // [sp+1Ch] [bp-28h]@14
  int v20; // [sp+20h] [bp-24h]@24
  int v21; // [sp+24h] [bp-20h]@21
  int v22; // [sp+28h] [bp-1Ch]@10
  int v23; // [sp+2Ch] [bp-18h]@24
  char v24; // [sp+30h] [bp-14h]@16
  int v25; // [sp+34h] [bp-10h]@12
  int v26; // [sp+38h] [bp-Ch]@12
  int v27; // [sp+3Ch] [bp-8h]@28
  int i; // [sp+40h] [bp-4h]@7

  v13 = a1;
  if ( CChar::IsGState(a1, 16) )
  {
    if ( *(_DWORD *)(v13 + 1220) == a6 )
    {
      if ( a7 + CPlayer::GetInvenSize((void *)a5) <= 60 )
      {
        sub_45FA10(a2, a3, a4, v13, a5);
        for ( i = 0; i < a7; ++i )
        {
          a8 = sub_4975F0(a2, a3, a4, a8, a9, (unsigned int)"dd");
          if ( v22 > 0 )
          {
            sub_4714F0(v13 + 1140, (int)&v25, (int)&v26);
            v9 = sub_430C20(v13 + 1140, &v17);
            if ( (unsigned __int8)unknown_libname_8(v9) )
            {
              CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bd");
            }
            else
            {
              v10 = sub_420250(&v25);
              v19 = v10 + 4;
              v11 = sub_45F9A0(v10 + 4);
              if ( v22 <= v11 )
              {
                sub_44AE20(v13 + 1068, (int)&v24, (int)&v26);
                v12 = sub_430C20(v13 + 1068, &v16);
                if ( (unsigned __int8)unknown_libname_8(v12)
                  || (a4 = sub_45F9A0(v19), a4 > *(_DWORD *)(*(_DWORD *)(sub_420250((int *)&v24) + 4) + 52)) )
                {
                  CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
                  sub_470CA0((void *)(v13 + 1140), (int)&v15, v25);
                }
                else
                {
                  v18 = *(_DWORD *)(v19 + 26) * v22;
                  if ( v18 <= 0 || (v21 = *(_DWORD *)(a5 + 1096), !v21) || v18 > *(_DWORD *)(v21 + 52) )
                    break;
                  v23 = *(_DWORD *)(sub_420250((int *)&v24) + 4);
                  v20 = (*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v23 + 132))(v23, v13, 26, v22);
                  if ( v20 == v23 )
                    CPlayer::_OutofInven(v13, a2, a3, a4, v23);
                  if ( CPlayer::_InsertItem((void *)a5, a2, a3, a4, 26, v20) != 1 )
                    CBase::Delete((void *)v20);
                  v27 = (*(int (__thiscall **)(int, unsigned int, signed int, int))(*(_DWORD *)v21 + 132))(
                          v21,
                          a5,
                          26,
                          v18);
                  if ( v27 == v21 )
                    CPlayer::_OutofInven(a5, a2, a3, a4, v21);
                  if ( CPlayer::_InsertItem((void *)v13, a2, a3, a4, 26, v27) != 1 )
                    CBase::Delete((void *)v27);
                  if ( !sub_45F9D0(v19, v22) )
                    sub_470CA0((void *)(v13 + 1140), (int)&v14, v25);
                }
              }
              else
              {
                CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bd");
              }
            }
          }
        }
        sub_45FA60(a2, a3, a4, v13, a5);
        CPlayer::GetStallInfo(v13, a2, a3, a4, 0, a5);
        CPlayer::GetStallInfo(v13, a2, a3, a4, 0, v13);
      }
      else
      {
        CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
      }
    }
    else
    {
      CPlayer::GetStallInfo(v13, a2, a3, a4, 0, a5);
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    }
  }
  else
  {
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0045F9A0) --------------------------------------------------------
signed int __thiscall sub_45F9A0(int this)
{
  signed int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 7) & 0x20 )
    v2 = 1;
  else
    v2 = *(_DWORD *)(this + 11);
  return v2;
}

//----- (0045F9D0) --------------------------------------------------------
int __thiscall sub_45F9D0(int this, int a2)
{
  int result; // eax@2

  if ( *(_DWORD *)(this + 7) & 0x20 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)(this + 11) -= a2;
    result = *(_DWORD *)(this + 11);
  }
  return result;
}

//----- (0045FA10) --------------------------------------------------------
void *__usercall sub_45FA10<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, unsigned int a4, unsigned int a5)
{
  void *result; // eax@2

  if ( a4 >= a5 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1020), a1, a2, a3);
    result = CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a4 + 1020), a1, a2, a3);
  }
  else
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a4 + 1020), a1, a2, a3);
    result = CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1020), a1, a2, a3);
  }
  return result;
}

//----- (0045FA60) --------------------------------------------------------
void __usercall sub_45FA60(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CIOCriticalSection::Leave(a4 + 1020, a1, a2, a3);
  CIOCriticalSection::Leave(a5 + 1020, a1, a2, a3);
}

//----- (0045FA90) --------------------------------------------------------
void __userpurge CPlayer::AskParty(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-10h]@1
  int v6; // [sp+4h] [bp-Ch]@5
  int v7; // [sp+8h] [bp-8h]@4
  int v8; // [sp+Ch] [bp-4h]@11

  v5 = a1;
  if ( *(_DWORD *)(a1 + 28) != a5 && !CChar::IsGState(a1, 144) )
  {
    CChar::Lock(v5, a2, a3, a4);
    v7 = *(_DWORD *)(v5 + 1016);
    if ( v7 )
    {
      v6 = CParty::FindParty(a2, a3, a4, v7);
      if ( v6 )
      {
        if ( !CParty::IsHead(v6, a2, a3, a4, v5) )
        {
          CChar::Unlock(v5, a2, a3, a4);
          CPlayer::Write(a2, a3, a4, v5, 67, (unsigned int)"b");
          CIOObject::Release(v6, a2, a3, a4);
          return;
        }
        CIOObject::Release(v6, a2, a3, a4);
      }
    }
    CChar::Unlock(v5, a2, a3, a4);
    if ( CChar::IsGState(v5, 256) )
    {
      CPlayer::Write(a2, a3, a4, v5, 95, (unsigned int)"b");
    }
    else
    {
      v8 = sub_450810(a2, a3, a4, a5);
      if ( v8 )
      {
        if ( CChar::IsGState(v8, 256) )
        {
          CPlayer::Write(a2, a3, a4, v5, 95, (unsigned int)"b");
          sub_4239C0(v8, a2, a3, a4, v8 + 352);
        }
        else
        {
          if ( !CChar::IsGState(v8, 144) )
          {
            if ( *(_DWORD *)(v8 + 1016) )
            {
              CPlayer::Write(a2, a3, a4, v5, 68, (unsigned int)"bs");
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v8, 82, (unsigned int)"d");
              CPlayer::Write(a2, a3, a4, v5, 68, (unsigned int)"bs");
            }
          }
          sub_4239C0(v8, a2, a3, a4, v8 + 352);
        }
      }
      else
      {
        CPlayer::Write(a2, a3, a4, v5, 67, (unsigned int)"b");
      }
    }
  }
}

//----- (0045FC60) --------------------------------------------------------
void __userpurge CPlayer::OnAskParty(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-8h]@1
  int v7; // [sp+4h] [bp-4h]@4

  v6 = a1;
  if ( *(_DWORD *)(a1 + 28) != a6 )
  {
    if ( !CChar::IsGState(a1, 144) )
    {
      v7 = sub_450810(a2, a3, a4, a6);
      if ( v7 )
      {
        if ( CChar::IsGState(v7, 128) )
        {
          CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
        }
        else
        {
          if ( sub_448870(v7 + 332, v6 + 332) > 320 )
          {
            CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
          }
          else
          {
            if ( a5 )
              CParty::Accept(a2, a3, a4, v7, v6);
            else
              CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bs");
          }
        }
        sub_4239C0(v7, a2, a3, a4, v7 + 352);
      }
      else
      {
        CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
      }
    }
  }
}

//----- (0045FD70) --------------------------------------------------------
int __usercall CPlayer::LeaveParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  int v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@2
  int v7; // [sp+8h] [bp-4h]@1

  v5 = a1;
  result = a1;
  v7 = *(_DWORD *)(a1 + 1016);
  if ( v7 )
  {
    result = CParty::FindParty(a2, a3, a4, v7);
    v6 = result;
    if ( result )
    {
      CParty::Leave(result, a2, a3, a4, v5);
      result = CIOObject::Release(v6, a2, a3, a4);
    }
  }
  return result;
}

//----- (0045FDC0) --------------------------------------------------------
int __userpurge CPlayer::ExileParty<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int v6; // [sp+0h] [bp-10h]@1
  int v7; // [sp+4h] [bp-Ch]@5
  int v8; // [sp+8h] [bp-8h]@4
  int v9; // [sp+Ch] [bp-4h]@3

  v6 = a1;
  result = a1;
  if ( *(_DWORD *)(a1 + 28) != a5 )
  {
    result = *(_DWORD *)(a1 + 1016);
    v9 = *(_DWORD *)(a1 + 1016);
    if ( v9 )
    {
      result = CParty::FindParty(a2, a3, a4, v9);
      v8 = result;
      if ( result )
      {
        v7 = sub_450810(a2, a3, a4, a5);
        if ( v7 )
        {
          CParty::Exile(v8, a2, a3, a4, v6, v7);
          sub_4239C0(v7, a2, a3, a4, v7 + 352);
        }
        result = CIOObject::Release(v8, a2, a3, a4);
      }
    }
  }
  return result;
}

//----- (0045FE50) --------------------------------------------------------
int __usercall CPlayer::GetPartySize<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1
  int v7; // [sp+Ch] [bp-4h]@1

  v7 = 0;
  v6 = *(_DWORD *)(a1 + 1016);
  if ( v6 )
  {
    v5 = CParty::FindParty(a2, a3, a4, v6);
    if ( v5 )
    {
      v7 = CParty::GetSize((void *)v5);
      CIOObject::Release(v5, a2, a3, a4);
    }
  }
  return v7;
}

//----- (0045FEB0) --------------------------------------------------------
int __userpurge CPlayer::UpdatePartyMember<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int v6; // [sp+4h] [bp-Ch]@1
  int v7; // [sp+8h] [bp-8h]@2
  int v8; // [sp+Ch] [bp-4h]@1

  v6 = a1;
  result = a1;
  v8 = *(_DWORD *)(a1 + 1016);
  if ( v8 )
  {
    result = CParty::FindParty(a2, a3, a4, v8);
    v7 = result;
    if ( result )
    {
      if ( a5 == 7 )
      {
        CParty::UpdateMemberHP(result, a2, a3, a4, v6);
      }
      else
      {
        if ( a5 == 26 )
          CParty::UpdateMemberLevel(result, a2, a3, a4, v6);
      }
      result = CIOObject::Release(v7, a2, a3, a4);
    }
  }
  return result;
}

//----- (0045FF20) --------------------------------------------------------
void __userpurge CPlayer::SaveQuestFlag(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6)
{
  void *v6; // eax@1
  int v7; // eax@2
  int v8; // eax@3
  int v9; // eax@6
  int v10; // [sp+0h] [bp-30h]@1
  char v11; // [sp+4h] [bp-2Ch]@6
  char v12; // [sp+10h] [bp-20h]@1
  char v13; // [sp+14h] [bp-1Ch]@6
  char v14; // [sp+18h] [bp-18h]@6
  int v15; // [sp+1Ch] [bp-14h]@6
  int v16; // [sp+20h] [bp-10h]@6
  int v17; // [sp+24h] [bp-Ch]@1
  int v18; // [sp+28h] [bp-8h]@1
  char v19; // [sp+2Ch] [bp-4h]@1

  v10 = a1;
  v17 = a5 >> 16;
  v18 = (unsigned __int16)a5;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1224), a2, a3, a4);
  sub_471840(v10 + 1256, (int)&v19, (int)&v17);
  v6 = sub_430C20(v10 + 1256, &v12);
  if ( (unsigned __int8)sub_47D070(v6) )
  {
    v7 = sub_420250((int *)&v19);
    if ( v18 <= *(_DWORD *)(v7 + 4) )
    {
      sub_4328C0(
        "CPlayer::SaveQuestFlag() Already saved quest flag. (pid:%d, quest:%d, flag:%d)",
        *(_DWORD *)(v10 + 452),
        v17,
        v18);
    }
    else
    {
      v8 = sub_420250((int *)&v19);
      *(_DWORD *)(v8 + 4) = v18;
      *(_DWORD *)(sub_420250((int *)&v19) + 8) = a6;
      CPlayer::Write(a2, a3, a4, v10, 86, (unsigned int)"wbb");
      CDBSocket::Write(a2, a3, a4, 14, (unsigned int)"dwbb");
    }
  }
  else
  {
    v15 = v18;
    v16 = a6;
    v9 = sub_472860((int)&v11, (int)&v17, (int)&v15);
    sub_4715D0(v10 + 1256, (int)&v13, v9);
    if ( !v14 )
      sub_4328C0(
        "CPlayer::SaveQuestFlag() Failed to save quest flag. (pid:%d, quest:%d, flag:%d)",
        *(_DWORD *)(v10 + 452),
        v17,
        v18);
    CPlayer::Write(a2, a3, a4, v10, 86, (unsigned int)"wbb");
    CDBSocket::Write(a2, a3, a4, 13, (unsigned int)"dwbb");
  }
  CIOCriticalSection::Leave(v10 + 1224, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004600D0) --------------------------------------------------------
bool __userpurge CPlayer::CheckQuestFlag<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5)
{
  void *v5; // eax@1
  int v6; // eax@2
  int v7; // edx@2
  int v9; // [sp+0h] [bp-1Ch]@1
  char v10; // [sp+4h] [bp-18h]@1
  int v11; // [sp+8h] [bp-14h]@1
  int v12; // [sp+Ch] [bp-10h]@1
  int v13; // [sp+10h] [bp-Ch]@1
  int v14; // [sp+14h] [bp-8h]@1
  char v15; // [sp+18h] [bp-4h]@1

  v9 = a1;
  v11 = a5 >> 16;
  v14 = (unsigned __int16)a5;
  v12 = 0;
  v13 = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1224), a2, a3, a4);
  sub_471840(v9 + 1256, (int)&v15, (int)&v11);
  v5 = sub_430C20(v9 + 1256, &v10);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v6 = sub_420250((int *)&v15);
    v7 = *(_DWORD *)(v6 + 8);
    v12 = *(_DWORD *)(v6 + 4);
    v13 = v7;
  }
  CIOCriticalSection::Leave(v9 + 1224, a2, a3, a4);
  return v14 == v12;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00460180) --------------------------------------------------------
int __userpurge CPlayer::CheckQuestClear<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  void *v5; // eax@1
  int v6; // eax@2
  int v7; // edx@2
  int v9; // [sp+0h] [bp-14h]@1
  char v10; // [sp+4h] [bp-10h]@1
  int v11; // [sp+8h] [bp-Ch]@1
  int v12; // [sp+Ch] [bp-8h]@1
  char v13; // [sp+10h] [bp-4h]@1

  v9 = a1;
  v11 = 0;
  v12 = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1224), a2, a3, a4);
  sub_471840(v9 + 1256, (int)&v13, (int)&a5);
  v5 = sub_430C20(v9 + 1256, &v10);
  if ( (unsigned __int8)sub_47D070(v5) )
  {
    v6 = sub_420250((int *)&v13);
    v7 = *(_DWORD *)(v6 + 8);
    v11 = *(_DWORD *)(v6 + 4);
    v12 = v7;
  }
  CIOCriticalSection::Leave(v9 + 1224, a2, a3, a4);
  return v12;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00460210) --------------------------------------------------------
void __userpurge CPlayer::QuestGuide(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@5
  int v6; // [sp+0h] [bp-1Ch]@1
  char v7; // [sp+4h] [bp-18h]@5
  char v8; // [sp+8h] [bp-14h]@5
  int i; // [sp+Ch] [bp-10h]@1
  int v10; // [sp+10h] [bp-Ch]@3
  int v11; // [sp+14h] [bp-8h]@5
  int v12; // [sp+18h] [bp-4h]@1

  v6 = a1;
  v12 = 200046;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1224), a2, a3, a4);
  for ( i = 0; i < dword_4E1FF0; ++i )
  {
    v10 = dword_4D63D4[3 * i];
    if ( *(_DWORD *)(v6 + 60) < v10 )
    {
      v12 = 200035;
      break;
    }
    v11 = dword_4D63D0[3 * i];
    sub_471840(v6 + 1256, (int)&v8, (int)&v11);
    v5 = sub_430C20(v6 + 1256, &v7);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v12 = dword_4D63D8[3 * i];
      break;
    }
  }
  CIOCriticalSection::Leave(v6 + 1224, a2, a3, a4);
  CPlayer::Write(a2, a3, a4, v6, 74, (unsigned int)"d");
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4D63D0: using guessed type int dword_4D63D0[];
// 4D63D4: using guessed type int dword_4D63D4[];
// 4D63D8: using guessed type int dword_4D63D8[];
// 4E1FF0: using guessed type int dword_4E1FF0;

//----- (00460300) --------------------------------------------------------
void __userpurge CPlayer::AskPvP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@3

  v5 = a1;
  if ( *(_DWORD *)(a1 + 28) != a5 )
  {
    v6 = sub_450810(a2, a3, a4, a5);
    if ( v6 )
    {
      sub_460490(a2, a3, a4, v5, v6);
      if ( !CChar::IsNormal(v5)
        || CPlayer::IsEState(v5, 1)
        || *(_DWORD *)(v5 + 1100)
        || CChar::IsGState(v5, 144)
        || *(_DWORD *)(v5 + 1516) )
      {
        CPlayer::Write(a2, a3, a4, v5, 68, (unsigned int)"bb");
      }
      else
      {
        if ( !CChar::IsNormal(v6)
          || CPlayer::IsEState(v6, 1)
          || *(_DWORD *)(v6 + 1100)
          || CChar::IsGState(v6, 144)
          || *(_DWORD *)(v5 + 1516) )
        {
          CPlayer::Write(a2, a3, a4, v5, 68, (unsigned int)"bb");
        }
        else
        {
          if ( sub_448870(v5 + 332, v6 + 332) <= 160 )
            CPlayer::Write(a2, a3, a4, v6, 96, (unsigned int)"d");
          else
            CPlayer::Write(a2, a3, a4, v5, 67, (unsigned int)"b");
        }
      }
      sub_44D620(a2, a3, a4, v5, v6);
      sub_4239C0(v6, a2, a3, a4, v6 + 352);
    }
    else
    {
      CPlayer::Write(a2, a3, a4, v5, 67, (unsigned int)"b");
    }
  }
}

//----- (00460490) --------------------------------------------------------
void *__usercall sub_460490<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  void *result; // eax@2

  if ( a4 >= (unsigned int)a5 )
  {
    CChar::Lock(a5, a1, a2, a3);
    result = CChar::Lock(a4, a1, a2, a3);
  }
  else
  {
    CChar::Lock(a4, a1, a2, a3);
    result = CChar::Lock(a5, a1, a2, a3);
  }
  return result;
}

//----- (004604C0) --------------------------------------------------------
void __userpurge CPlayer::OnAskPvP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@22
  int v7; // [sp+0h] [bp-Ch]@1
  int i; // [sp+4h] [bp-8h]@20
  int v9; // [sp+8h] [bp-4h]@3

  v7 = a1;
  if ( *(_DWORD *)(a1 + 28) != a6 )
  {
    v9 = sub_450810(a2, a3, a4, a6);
    if ( v9 )
    {
      sub_460490(a2, a3, a4, v7, v9);
      if ( !CChar::IsNormal(v7)
        || CPlayer::IsEState(v7, 1)
        || *(_DWORD *)(v7 + 1100)
        || CChar::IsGState(v7, 144)
        || *(_DWORD *)(v7 + 1516) )
      {
        CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bb");
      }
      else
      {
        if ( !CChar::IsNormal(v9)
          || CPlayer::IsEState(v9, 1)
          || *(_DWORD *)(v9 + 1100)
          || CChar::IsGState(v9, 144)
          || *(_DWORD *)(v7 + 1516) )
        {
          CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bb");
        }
        else
        {
          if ( sub_448870(v7 + 332, v9 + 332) <= 160 )
          {
            if ( a5 )
            {
              CIOObject::AddRef(v7, a2, a3, a4);
              CChar::AddGState(v7, 128);
              CPlayer::Write(a2, a3, a4, v7, 46, (unsigned int)"dd");
              *(_DWORD *)(v7 + 1516) = v9;
              CIOObject::AddRef(v9, a2, a3, a4);
              CChar::AddGState(v9, 128);
              std___Mpunct_wchar_t___do_frac_digits(v9);
              CPlayer::Write(a2, a3, a4, v9, 46, (unsigned int)"dd");
              *(_DWORD *)(v9 + 1516) = v7;
              *(_DWORD *)(v9 + 1512) = InterlockedIncrement(&dword_4E1FFC);
              *(_DWORD *)(v7 + 1512) = *(_DWORD *)(v9 + 1512);
              for ( i = sub_4934F0(*(_DWORD *)(v7 + 320), a2, a3, a4, v7 + 324, 5); i; i = CBaseList::Pop(i, a2, a3, a4) )
              {
                v6 = unknown_libname_7();
                CPlayer::Write(a2, a3, a4, v6, 68, (unsigned int)"bbss");
              }
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v9, 68, (unsigned int)"bs");
            }
          }
          else
          {
            CPlayer::Write(a2, a3, a4, v7, 67, (unsigned int)"b");
          }
        }
      }
      sub_44D620(a2, a3, a4, v7, v9);
      sub_4239C0(v9, a2, a3, a4, v9 + 352);
    }
    else
    {
      CPlayer::Write(a2, a3, a4, v7, 67, (unsigned int)"b");
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00460770) --------------------------------------------------------
void __usercall CPlayer::OnPvP(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 1516);
  if ( !v5 )
    sub_422D80(a1, a2, a3, a4);
  if ( CChar::IsNormal(v5) && *(_DWORD *)(v4 + 1512) == *(_DWORD *)(v5 + 1512) )
  {
    if ( *(_DWORD *)(v4 + 1520) < 4u )
    {
      if ( *(_DWORD *)(v4 + 28) >= std___Mpunct_wchar_t___do_frac_digits(v5) )
      {
        ++*(_DWORD *)(v4 + 1520);
        if ( *(_DWORD *)(v4 + 1520) >= 4u )
        {
          std___Mpunct_wchar_t___do_frac_digits(v5);
          CPlayer::Write(a2, a3, a4, v4, 68, (unsigned int)"bbd");
          CPlayer::Write(a2, a3, a4, v5, 68, (unsigned int)"bbd");
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v4, 68, (unsigned int)"bbsb");
          CPlayer::Write(a2, a3, a4, v5, 68, (unsigned int)"bbsb");
        }
      }
    }
    else
    {
      ++*(_DWORD *)(v4 + 1520);
      if ( *(_DWORD *)(v4 + 1520) >= 0x258u )
        CPlayer::EndPvP(v4, a2, a3, a4, v5, 4, 4, 7);
    }
  }
  else
  {
    *(_DWORD *)(v4 + 1512) = 0;
    *(_DWORD *)(v4 + 1516) = 0;
    *(_DWORD *)(v4 + 1520) = 0;
    CChar::SubGState(v4, 128);
    CPlayer::Write(a2, a3, a4, v4, 46, (unsigned int)"dd");
    CIOObject::Release(v5, a2, a3, a4);
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00460940) --------------------------------------------------------
int __userpurge CPlayer::EndPvP<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v8; // eax@3
  int v10; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@1

  v10 = a1;
  CPlayer::Write(a2, a3, a4, a1, 68, (unsigned int)"bbs");
  CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bbs");
  for ( i = sub_4934F0(*(_DWORD *)(v10 + 320), a2, a3, a4, v10 + 324, 5); i; i = CBaseList::Pop(i, a2, a3, a4) )
  {
    v8 = unknown_libname_7();
    CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bbss");
  }
  *(_DWORD *)(v10 + 1512) = 0;
  *(_DWORD *)(v10 + 1516) = 0;
  *(_DWORD *)(v10 + 1520) = 0;
  CChar::SubGState(v10, 128);
  CPlayer::Write(a2, a3, a4, v10, 46, (unsigned int)"dd");
  return CIOObject::Release(a5, a2, a3, a4);
}

//----- (00460A50) --------------------------------------------------------
void __userpurge CPlayer::ProcessMsg(int a1<ecx>, DWORD a2<ebx>, char a3<dil>, DWORD a4<esi>, char *a5)
{
  int v5; // eax@11
  void *v6; // ST10_4@43
  int v7; // eax@43
  void *v8; // ST10_4@46
  int v9; // eax@46
  void *v10; // ST10_4@50
  int v11; // eax@50
  int v12; // eax@54
  int v13; // [sp+4h] [bp-68h]@1
  int j; // [sp+8h] [bp-64h]@52
  void *v15; // [sp+Ch] [bp-60h]@52
  int v16; // [sp+10h] [bp-5Ch]@48
  void *v17; // [sp+14h] [bp-58h]@48
  int v18; // [sp+18h] [bp-54h]@41
  void *v19; // [sp+1Ch] [bp-50h]@41
  void *v20; // [sp+20h] [bp-4Ch]@39
  int v21; // [sp+24h] [bp-48h]@38
  void *v22; // [sp+28h] [bp-44h]@36
  int v23; // [sp+2Ch] [bp-40h]@35
  void *v24; // [sp+30h] [bp-3Ch]@33
  int v25; // [sp+34h] [bp-38h]@32
  int v26; // [sp+38h] [bp-34h]@31
  void *v27; // [sp+3Ch] [bp-30h]@21
  char v28; // [sp+40h] [bp-2Ch]@21
  int v29; // [sp+41h] [bp-2Bh]@21
  int v30; // [sp+45h] [bp-27h]@21
  int v31; // [sp+49h] [bp-23h]@21
  int v32; // [sp+4Dh] [bp-1Fh]@21
  int v33; // [sp+54h] [bp-18h]@1
  int v34; // [sp+58h] [bp-14h]@25
  size_t v35; // [sp+5Ch] [bp-10h]@21
  int i; // [sp+60h] [bp-Ch]@9
  void *v37; // [sp+64h] [bp-8h]@9
  DWORD v38; // [sp+68h] [bp-4h]@1

  v33 = dword_4D9830;
  v13 = a1;
  v38 = GetTickCount();
  if ( *(_DWORD *)(v13 + 1460) <= v38 )
  {
    *(_DWORD *)(v13 + 1460) = v38 + 1000;
    switch ( *a5 )
    {
      case 47:
        if ( a5[1] != 121 || a5[2] != 32 )
        {
          if ( a5[1] != 115 || a5[2] != 32 )
          {
            CPlayer::ChatCommand(v13, a2, a3, a4, a5);
          }
          else
          {
            if ( CPlayer::RemoveItem(v13, a2, a3, a4, 9, 515, 1) || CPlayer::RemoveItem(v13, a2, a3, a4, 9, 516, 1) )
              CPlayer::WriteAll(a2, a3, a4, 60, (unsigned int)"ss");
          }
        }
        else
        {
          if ( CPlayer::RemoveItem(v13, a2, a3, a4, 9, 513, 1) || CPlayer::RemoveItem(v13, a2, a3, a4, 9, 514, 1) )
          {
            v37 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
            for ( i = sub_4934F0(*(_DWORD *)(v13 + 320), a2, a3, a4, v13 + 324, 50); i; i = CBaseList::Pop(i, a2, a3, a4) )
            {
              v5 = unknown_libname_7();
              CPlayer::Send((void *)v5, a2, a3, a4, v37);
            }
            CIOBuffer::Release((int)v37);
          }
        }
        break;
      case 64:
        v27 = a5 + 1;
        v28 = 0;
        v29 = 0;
        v30 = 0;
        v31 = 0;
        v32 = 0;
        v35 = strcspn(a5 + 1, " ");
        if ( (signed int)v35 <= 16 )
        {
          memcpy(&v28, v27, v35);
          if ( sub_497B80((int *)&v28) )
          {
            v34 = CPlayer::FindPlayer(a2, a3, a4, (unsigned int)&v28);
            if ( v34 )
            {
              if ( v34 != v13 )
              {
                CPlayer::Write(a2, a3, a4, v13, 60, (unsigned int)"ss");
                CPlayer::Write(a2, a3, a4, v34, 60, (unsigned int)"ss");
              }
              sub_4239C0(v34, a2, a3, a4, v34 + 352);
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v13, 67, (unsigned int)"b");
            }
          }
        }
        break;
      case 35:
        v26 = *(_DWORD *)(v13 + 1016);
        if ( v26 )
        {
          v25 = CParty::FindParty(a2, a3, a4, v26);
          if ( v25 )
          {
            v24 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
            CParty::Broadcast(v25, a2, a3, a4, v24, 0);
            CIOObject::Release(v25, a2, a3, a4);
          }
        }
        break;
      case 36:
        v23 = CPlayer::GetGuild(v13, a2, a3, a4);
        if ( v23 )
        {
          v22 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
          CGuild::BroadcastLock(v23, a2, a3, a4, v22, 0);
          CIOBuffer::Release((int)v22);
          sub_4239C0(v23, a2, a3, a4, v23 + 40);
        }
        break;
      case 126:
        v21 = CPlayer::GetGuild(v13, a2, a3, a4);
        if ( v21 )
        {
          v20 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
          CGuild::AllianceBroadcast(v21, a2, a3, a4, v20);
          CIOBuffer::Release((int)v20);
          sub_4239C0(v21, a2, a3, a4, v21 + 40);
        }
        break;
      case 38:
        CPlayer::Write(a2, a3, a4, v13, 60, (unsigned int)"ss");
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v13 + 1308), a2, a3, a4);
        v18 = 0;
        CPlayer::_MLMGet(v13, a2, a3, a4, &v18, 3);
        v19 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
        while ( v18 )
        {
          v6 = v19;
          v7 = unknown_libname_7();
          CPlayer::Send((void *)v7, a2, a3, a4, v6);
          v18 = CBaseList::Pop(v18, a2, a3, a4);
        }
        CIOBuffer::Release((int)v19);
        CPlayer::_MLMGet(v13, a2, a3, a4, &v18, 2);
        *a5 = 42;
        v19 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
        while ( v18 )
        {
          v8 = v19;
          v9 = unknown_libname_7();
          CPlayer::Send((void *)v9, a2, a3, a4, v8);
          v18 = CBaseList::Pop(v18, a2, a3, a4);
        }
        CIOBuffer::Release((int)v19);
        CIOCriticalSection::Leave(v13 + 1308, a2, a3, a4);
        break;
      case 42:
        CPlayer::Write(a2, a3, a4, v13, 60, (unsigned int)"ss");
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v13 + 1308), a2, a3, a4);
        v16 = 0;
        CPlayer::_MLMGet(v13, a2, a3, a4, &v16, 4);
        *a5 = 38;
        v17 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
        while ( v16 )
        {
          v10 = v17;
          v11 = unknown_libname_7();
          CPlayer::Send((void *)v11, a2, a3, a4, v10);
          v16 = CBaseList::Pop(v16, a2, a3, a4);
        }
        CIOBuffer::Release((int)v17);
        CIOCriticalSection::Leave(v13 + 1308, a2, a3, a4);
        break;
      default:
        v15 = sub_44FCE0(a2, a3, a4, 60, (unsigned int)"ss");
        for ( j = sub_4934F0(*(_DWORD *)(v13 + 320), a2, a3, a4, v13 + 324, 25); j; j = CBaseList::Pop(j, a2, a3, a4) )
        {
          v12 = unknown_libname_7();
          CPlayer::Send((void *)v12, a2, a3, a4, v15);
        }
        CIOBuffer::Release((int)v15);
        break;
    }
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00461080) --------------------------------------------------------
void __userpurge CPlayer::ChatCommand(int this<ecx>, DWORD ebx0<ebx>, char a3<dil>, DWORD a4<esi>, const char *a2)
{
  int v5; // eax@6
  int v6; // eax@11
  int v7; // eax@16
  int v8; // eax@23
  int v9; // eax@28
  int v10; // eax@38
  int v11; // eax@43
  int v12; // eax@48
  int v13; // eax@52
  int v14; // eax@59
  int v15; // eax@60
  int v16; // eax@65
  int v17; // eax@71
  int v18; // edx@74
  int v19; // eax@75
  int v20; // eax@81
  int v21; // eax@155
  int v22; // eax@160
  int v23; // edx@256
  void *v24; // eax@283
  __int32 v25; // eax@329
  int v26; // edx@347
  void *v27; // eax@351
  int v28; // eax@361
  int v29; // eax@366
  void *v30; // eax@374
  int v31; // eax@375
  int v32; // eax@376
  void *v33; // eax@382
  int v34; // eax@383
  int v35; // eax@426
  int v36; // ST88_4@443
  __int32 v37; // eax@451
  int v38; // edx@451
  __int32 v39; // eax@453
  signed int v40; // [sp+0h] [bp-4E0h]@324
  int v41; // [sp+4h] [bp-4DCh]@285
  const char v42; // [sp+Ch] [bp-4D4h]@97
  int v43; // [sp+10h] [bp-4D0h]@1
  char v44; // [sp+14h] [bp-4CCh]@383
  char v45; // [sp+1Ch] [bp-4C4h]@383
  char v46; // [sp+28h] [bp-4B8h]@382
  char v47; // [sp+2Ch] [bp-4B4h]@375
  char v48; // [sp+34h] [bp-4ACh]@375
  char v49; // [sp+40h] [bp-4A0h]@374
  char v50; // [sp+44h] [bp-49Ch]@351
  char v51; // [sp+48h] [bp-498h]@354
  char v52; // [sp+4Ch] [bp-494h]@283
  int v53; // [sp+50h] [bp-490h]@424
  int v54; // [sp+54h] [bp-48Ch]@424
  __int32 v55; // [sp+58h] [bp-488h]@418
  __int32 v56; // [sp+5Ch] [bp-484h]@402
  __int32 v57; // [sp+60h] [bp-480h]@400
  __int32 v58; // [sp+64h] [bp-47Ch]@398
  __int32 v59; // [sp+68h] [bp-478h]@394
  __int32 v60; // [sp+6Ch] [bp-474h]@392
  __int32 v61; // [sp+70h] [bp-470h]@388
  char v62; // [sp+74h] [bp-46Ch]@382
  __int32 i; // [sp+78h] [bp-468h]@380
  __int32 v64; // [sp+7Ch] [bp-464h]@380
  int v65; // [sp+80h] [bp-460h]@380
  int v66; // [sp+84h] [bp-45Ch]@380
  char v67; // [sp+88h] [bp-458h]@374
  char v68; // [sp+8Ch] [bp-454h]@373
  int v69; // [sp+90h] [bp-450h]@373
  int v70; // [sp+94h] [bp-44Ch]@373
  __int32 v71; // [sp+98h] [bp-448h]@369
  __int32 v72; // [sp+9Ch] [bp-444h]@364
  __int32 v73; // [sp+A0h] [bp-440h]@364
  __int32 v74; // [sp+A4h] [bp-43Ch]@359
  __int32 v75; // [sp+A8h] [bp-438h]@359
  int v76; // [sp+ACh] [bp-434h]@352
  char v77; // [sp+B0h] [bp-430h]@350
  __int32 v78; // [sp+B4h] [bp-42Ch]@350
  __int32 v79; // [sp+B8h] [bp-428h]@347
  __int32 v80; // [sp+BCh] [bp-424h]@338
  __int64 v81; // [sp+C0h] [bp-420h]@329
  __int32 v82; // [sp+C8h] [bp-418h]@322
  __int32 v83; // [sp+CCh] [bp-414h]@313
  int v84; // [sp+D0h] [bp-410h]@300
  int v85; // [sp+D4h] [bp-40Ch]@300
  int v86; // [sp+D8h] [bp-408h]@282
  char v87; // [sp+DCh] [bp-404h]@282
  int v88; // [sp+E0h] [bp-400h]@279
  int v89; // [sp+E4h] [bp-3FCh]@279
  int v90; // [sp+E8h] [bp-3F8h]@279
  int v91; // [sp+ECh] [bp-3F4h]@267
  int v92; // [sp+F0h] [bp-3F0h]@275
  char *v93; // [sp+F4h] [bp-3ECh]@264
  int v94; // [sp+F8h] [bp-3E8h]@267
  int v95; // [sp+FCh] [bp-3E4h]@267
  int v96; // [sp+100h] [bp-3E0h]@267
  int v97; // [sp+104h] [bp-3DCh]@267
  int v98; // [sp+108h] [bp-3D8h]@247
  int v99; // [sp+10Ch] [bp-3D4h]@255
  int v100; // [sp+110h] [bp-3D0h]@247
  int v101; // [sp+114h] [bp-3CCh]@247
  int v102; // [sp+118h] [bp-3C8h]@247
  int v103; // [sp+11Ch] [bp-3C4h]@247
  int v104; // [sp+120h] [bp-3C0h]@229
  int v105; // [sp+124h] [bp-3BCh]@237
  int v106; // [sp+128h] [bp-3B8h]@229
  int v107; // [sp+12Ch] [bp-3B4h]@229
  int v108; // [sp+130h] [bp-3B0h]@229
  int v109; // [sp+134h] [bp-3ACh]@229
  int v110; // [sp+138h] [bp-3A8h]@222
  int v111; // [sp+13Ch] [bp-3A4h]@222
  int v112; // [sp+140h] [bp-3A0h]@221
  int j; // [sp+144h] [bp-39Ch]@210
  char v114; // [sp+148h] [bp-398h]@213
  int v115; // [sp+1CCh] [bp-314h]@194
  char v116; // [sp+1D0h] [bp-310h]@206
  int v117; // [sp+250h] [bp-290h]@194
  int v118; // [sp+254h] [bp-28Ch]@194
  int v119; // [sp+258h] [bp-288h]@194
  int v120; // [sp+25Ch] [bp-284h]@189
  char v121; // [sp+260h] [bp-280h]@190
  int v122; // [sp+268h] [bp-278h]@190
  size_t v123; // [sp+26Ch] [bp-274h]@186
  int v124; // [sp+270h] [bp-270h]@188
  __int32 v125; // [sp+274h] [bp-26Ch]@173
  char v126; // [sp+278h] [bp-268h]@166
  __int32 v127; // [sp+2FCh] [bp-1E4h]@164
  int v128; // [sp+300h] [bp-1E0h]@157
  int v129; // [sp+304h] [bp-1DCh]@152
  char v130[128]; // [sp+308h] [bp-1D8h]@152
  int v131; // [sp+388h] [bp-158h]@152
  __int32 v132; // [sp+38Ch] [bp-154h]@148
  __int32 v133; // [sp+390h] [bp-150h]@146
  __int32 v134; // [sp+394h] [bp-14Ch]@144
  __int32 v135; // [sp+398h] [bp-148h]@142
  char *v136; // [sp+39Ch] [bp-144h]@138
  int v137; // [sp+3A0h] [bp-140h]@140
  __int32 v138; // [sp+3A4h] [bp-13Ch]@124
  int v139; // [sp+3A8h] [bp-138h]@121
  int v140; // [sp+3ACh] [bp-134h]@121
  __int32 v141; // [sp+3B0h] [bp-130h]@120
  int v142; // [sp+3B4h] [bp-12Ch]@120
  char v143; // [sp+3B8h] [bp-128h]@116
  int v144; // [sp+43Ch] [bp-A4h]@1
  int v145; // [sp+440h] [bp-A0h]@115
  int v146; // [sp+444h] [bp-9Ch]@111
  int v147; // [sp+448h] [bp-98h]@111
  int v148; // [sp+44Ch] [bp-94h]@111
  int v149; // [sp+450h] [bp-90h]@108
  int v150; // [sp+454h] [bp-8Ch]@106
  __int32 v151; // [sp+458h] [bp-88h]@104
  int v152; // [sp+45Ch] [bp-84h]@101
  char v153; // [sp+460h] [bp-80h]@102
  int v154; // [sp+468h] [bp-78h]@102
  int v155; // [sp+46Ch] [bp-74h]@92
  int v156; // [sp+470h] [bp-70h]@91
  __int32 v157; // [sp+474h] [bp-6Ch]@86
  int v158; // [sp+478h] [bp-68h]@71
  int v159; // [sp+47Ch] [bp-64h]@61
  int v160; // [sp+480h] [bp-60h]@56
  int v161; // [sp+484h] [bp-5Ch]@55
  int v162; // [sp+488h] [bp-58h]@55
  char *v163; // [sp+48Ch] [bp-54h]@53
  int v164; // [sp+490h] [bp-50h]@49
  int v165; // [sp+494h] [bp-4Ch]@45
  int v166; // [sp+498h] [bp-48h]@44
  int v167; // [sp+49Ch] [bp-44h]@40
  int v168; // [sp+4A0h] [bp-40h]@39
  int v169; // [sp+4A4h] [bp-3Ch]@35
  char *v170; // [sp+4A8h] [bp-38h]@31
  int v171; // [sp+4ACh] [bp-34h]@34
  char *v172; // [sp+4B0h] [bp-30h]@29
  int v173; // [sp+4B4h] [bp-2Ch]@25
  int v174; // [sp+4B8h] [bp-28h]@24
  int v175; // [sp+4BCh] [bp-24h]@20
  int v176; // [sp+4C0h] [bp-20h]@19
  int v177; // [sp+4C4h] [bp-1Ch]@19
  char *v178; // [sp+4C8h] [bp-18h]@17
  int v179; // [sp+4CCh] [bp-14h]@13
  int v180; // [sp+4D0h] [bp-10h]@12
  int v181; // [sp+4D4h] [bp-Ch]@8
  int v182; // [sp+4D8h] [bp-8h]@7
  unsigned int v183; // [sp+4DCh] [bp-4h]@4
  const char *v184; // [sp+4E8h] [bp+8h]@97
  const char *v185; // [sp+4E8h] [bp+8h]@186
  const char *v186; // [sp+4E8h] [bp+8h]@229
  const char *v187; // [sp+4E8h] [bp+8h]@247
  const char *v188; // [sp+4E8h] [bp+8h]@262
  const char *v189; // [sp+4E8h] [bp+8h]@267

  v144 = dword_4D9830;
  v43 = this;
  if ( dword_4E35B8 == 1 )
  {
    if ( *(_DWORD *)(this + 456) >= 3 )
      sub_432890(
        "[GM Command] %s(PID:%d, Admin:%d) : %s",
        this + 32,
        *(_DWORD *)(this + 452),
        *(_DWORD *)(this + 456),
        a2);
  }
  v183 = strcspn(a2, " ");
  if ( a2[v183] )
    a2[v183++] = 0;
  v5 = sub_432EF0(903);
  if ( strcmp(a2, (const char *)v5) )
  {
    v6 = sub_432EF0(904);
    if ( strcmp(a2, (const char *)v6) )
    {
      v7 = sub_432EF0(905);
      if ( strcmp(a2, (const char *)v7) )
      {
        v8 = sub_432EF0(906);
        if ( strcmp(a2, (const char *)v8) )
        {
          v9 = sub_432EF0(907);
          if ( strcmp(a2, (const char *)v9) )
          {
            v10 = sub_432EF0(908);
            if ( strcmp(a2, (const char *)v10) )
            {
              v11 = sub_432EF0(909);
              if ( strcmp(a2, (const char *)v11) )
              {
                v12 = sub_432EF0(910);
                if ( strcmp(a2, (const char *)v12) )
                {
                  v13 = sub_432EF0(918);
                  if ( strcmp(a2, (const char *)v13) )
                  {
                    v14 = sub_432EF0(911);
                    if ( strcmp(a2, (const char *)v14) )
                    {
                      v16 = sub_432EF0(900);
                      if ( strcmp(a2, (const char *)v16) )
                      {
                        v20 = sub_432EF0(902);
                        if ( strcmp(a2, (const char *)v20) )
                        {
                          if ( *(_DWORD *)(v43 + 456) >= 3 )
                          {
                            if ( strcmp(a2, "/hide") )
                            {
                              if ( strcmp(a2, "/kick") )
                              {
                                if ( strcmp(a2, "/move2") )
                                {
                                  if ( strcmp(a2, "/info") )
                                  {
                                    if ( strcmp(a2, "/move") )
                                    {
                                      if ( strcmp(a2, "/userall") )
                                      {
                                        if ( strcmp(a2, "/active") )
                                        {
                                          if ( strcmp(a2, "/money") )
                                          {
                                            if ( *(_DWORD *)(v43 + 456) >= 4 )
                                            {
                                              if ( strcmp(a2, "/guildexp") )
                                              {
                                                if ( strcmp(a2, "/syson") )
                                                {
                                                  if ( strcmp(a2, "/sysoff") )
                                                  {
                                                    if ( strcmp(a2, "/eventNN") )
                                                    {
                                                      if ( strcmp(a2, "/eventoff") )
                                                      {
                                                        if ( strcmp(a2, "/infosys") )
                                                        {
                                                          if ( strcmp(a2, "/maxuser") )
                                                          {
                                                            if ( strcmp(a2, "/shutdoNN") )
                                                            {
                                                              if ( strcmp(a2, "/shutdownoff") )
                                                              {
                                                                if ( strcmp(a2, "/location") )
                                                                {
                                                                  if ( strcmp(a2, "/dpadpfdpatpt") )
                                                                  {
                                                                    if ( strcmp(a2, "/dpadpfdpatmxpdlxjtm") )
                                                                    {
                                                                      if ( strcmp(a2, "/aNNsay") )
                                                                      {
                                                                        if ( strcmp(a2, "/portuser")
                                                                          && strcmp(a2, "/test") )
                                                                        {
                                                                          if ( strcmp(a2, "/block") )
                                                                          {
                                                                            strcmp(a2, "/unblock");
                                                                            if ( *(_DWORD *)(v43 + 456) >= 5 )
                                                                            {
                                                                              if ( strcmp(a2, "/aNN") )
                                                                              {
                                                                                if ( strcmp(a2, "/revertitem") )
                                                                                {
                                                                                  if ( strcmp(a2, "/aNNstore") )
                                                                                  {
                                                                                    if ( strcmp(a2, "/itemattribute") )
                                                                                    {
                                                                                      if ( strcmp(a2, "/skill") )
                                                                                      {
                                                                                        if ( strcmp(a2, "/skillredit") )
                                                                                        {
                                                                                          if ( strcmp(a2, "/pktime") )
                                                                                          {
                                                                                            if ( strcmp(a2, "/getexp") )
                                                                                            {
                                                                                              if ( strcmp(a2, "/snow") )
                                                                                              {
                                                                                                if ( strcmp(a2, "/levelup") )
                                                                                                {
                                                                                                  if ( strcmp(a2, "/resetlevel") )
                                                                                                  {
                                                                                                    if ( strcmp(a2, "/addhp") )
                                                                                                    {
                                                                                                      if ( strcmp(a2, "/addmp") )
                                                                                                      {
                                                                                                        if ( strcmp(a2, "/addcp") )
                                                                                                        {
                                                                                                          if ( strcmp(a2, "/addquest") )
                                                                                                          {
                                                                                                            if ( strcmp(a2, "/finishquest") )
                                                                                                            {
                                                                                                              if ( strcmp(a2, "/resetquest") )
                                                                                                              {
                                                                                                                if ( strcmp(a2, "/rageadd") )
                                                                                                                {
                                                                                                                  if ( strcmp(a2, "/rage") )
                                                                                                                  {
                                                                                                                    if ( strcmp(a2, "/egggrade") )
                                                                                                                    {
                                                                                                                      if ( strcmp(a2, "/addatk") )
                                                                                                                      {
                                                                                                                        if ( strcmp(a2, "/adddef") )
                                                                                                                        {
                                                                                                                          if ( strcmp(a2, "/gposition") )
                                                                                                                          {
                                                                                                                            if ( strcmp(a2, "/lord") )
                                                                                                                            {
                                                                                                                              if ( strcmp(a2, "/nest") )
                                                                                                                              {
                                                                                                                                if ( strcmp(a2, "/queen") )
                                                                                                                                {
                                                                                                                                  if ( strcmp(a2, "/event") )
                                                                                                                                  {
                                                                                                                                    if ( strcmp(a2, "/luxury") )
                                                                                                                                    {
                                                                                                                                      if ( strcmp(a2, "/return") )
                                                                                                                                      {
                                                                                                                                        if ( strcmp(a2, "/addotp") )
                                                                                                                                        {
                                                                                                                                          if ( strcmp(a2, "/addevasion") )
                                                                                                                                          {
                                                                                                                                            if ( strcmp(a2, "/addresist") )
                                                                                                                                            {
                                                                                                                                              if ( strcmp(a2, "/warbegin") )
                                                                                                                                              {
                                                                                                                                                if ( strcmp(a2, "/warend") )
                                                                                                                                                {
                                                                                                                                                  if ( strcmp(a2, "/declare") )
                                                                                                                                                  {
                                                                                                                                                    if ( strcmp(a2, "/buffoff") )
                                                                                                                                                    {
                                                                                                                                                      if ( strcmp(a2, "/jmp") )
                                                                                                                                                      {
                                                                                                                                                        if ( !strcmp(a2, "/addabsorb") )
                                                                                                                                                        {
                                                                                                                                                          v57 = j__atol(&a2[v183]);
                                                                                                                                                          (*(void (__stdcall **)(int, signed int, signed int, __int32, __int32))(*(_DWORD *)v43 + 92))(v43, 16, 1, v57, v57);
                                                                                                                                                        }
                                                                                                                                                      }
                                                                                                                                                      else
                                                                                                                                                      {
                                                                                                                                                        v39 = j__atol(&a2[v183]);
                                                                                                                                                        CPlayer::Teleport(v43, ebx0, a3, a4, 0, v43 + 332, v39 + *(_DWORD *)(v43 + 340), 0);
                                                                                                                                                      }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                      v37 = j__atol(&a2[v183]);
                                                                                                                                                      CChar::CancelBuffPrty(v43, v38, ebx0, a3, a4, v37 | 0xFFFFFF00);
                                                                                                                                                    }
                                                                                                                                                  }
                                                                                                                                                  else
                                                                                                                                                  {
                                                                                                                                                    j__atol(&a2[v183]);
                                                                                                                                                    dword_4E0964 = 1;
                                                                                                                                                    CPlayer::WriteAll(ebx0, a3, a4, 15, (unsigned int)"s");
                                                                                                                                                  }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                  j__atol(&a2[v183]);
                                                                                                                                                  dword_4DA9B0 = 1;
                                                                                                                                                }
                                                                                                                                              }
                                                                                                                                              else
                                                                                                                                              {
                                                                                                                                                j__atol(&a2[v183]);
                                                                                                                                                dword_4E0964 = 4;
                                                                                                                                                CCastle::WarBegin(a3, ebx0, a4, v36);
                                                                                                                                              }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                              v57 = j__atol(&a2[v183]);
                                                                                                                                              (*(void (__stdcall **)(int, signed int, signed int, __int32, __int32))(*(_DWORD *)v43 + 92))(v43, 29, 1, v57, v57);
                                                                                                                                            }
                                                                                                                                          }
                                                                                                                                          else
                                                                                                                                          {
                                                                                                                                            v57 = j__atol(&a2[v183]);
                                                                                                                                            (*(void (__stdcall **)(_DWORD, signed int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(v43, 10, 1, v57, v57);
                                                                                                                                          }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                          v57 = j__atol(&a2[v183]);
                                                                                                                                          (*(void (__cdecl **)(int, signed int, signed int, __int32, __int32))(*(_DWORD *)v43 + 92))(v43, 9, 1, v57, v57);
                                                                                                                                        }
                                                                                                                                      }
                                                                                                                                      else
                                                                                                                                      {
                                                                                                                                        CPlayer::ReturnToPoint(v43, ebx0, a3, a4, 8);
                                                                                                                                      }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                      if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                                                                                                      {
                                                                                                                                        (*(void (__cdecl **)(int, signed int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(v43, 27, 1, 30000, 30000);
                                                                                                                                        (*(void (__cdecl **)(int, signed int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(v43, 28, 1, 30000, 30000);
                                                                                                                                        (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(v43, 15, 1, 30000, 30000);
                                                                                                                                        v53 = 30000;
                                                                                                                                        v54 = CChar::GetMaxHP(v43) + 30000;
                                                                                                                                        if ( v54 >= 0 )
                                                                                                                                        {
                                                                                                                                          if ( v54 <= 32767 )
                                                                                                                                          {
                                                                                                                                            (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 92))(v43, 5, 1, 30000);
                                                                                                                                            v35 = CChar::GetMaxHP(v43);
                                                                                                                                            (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v43 + 88))(v43, 7, 1, v35);
                                                                                                                                          }
                                                                                                                                        }
                                                                                                                                      }
                                                                                                                                    }
                                                                                                                                  }
                                                                                                                                  else
                                                                                                                                  {
                                                                                                                                    v55 = j__atol(&a2[v183]);
                                                                                                                                    if ( dword_4E1178 & 0x100 )
                                                                                                                                      CDBSocket::Write(ebx0, a3, a4, 77, (unsigned int)"dd");
                                                                                                                                  }
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                  if ( dword_4E35B8 != 1 )
                                                                                                                                    CMonsterBigBirdMaster::Create(ebx0, a3, a4, 0);
                                                                                                                                }
                                                                                                                              }
                                                                                                                              else
                                                                                                                              {
                                                                                                                                if ( dword_4E35B8 != 1 )
                                                                                                                                  CMonsterBigBirdMother::Create(ebx0, a3, a4);
                                                                                                                              }
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                              CMonsterTowerBoss::Create(ebx0, a3, a4);
                                                                                                                            }
                                                                                                                          }
                                                                                                                          else
                                                                                                                          {
                                                                                                                            v56 = j__atol(&a2[v183]);
                                                                                                                            if ( v56 >= 0 )
                                                                                                                            {
                                                                                                                              if ( v56 <= 5 )
                                                                                                                              {
                                                                                                                                if ( !(*(_DWORD *)(v43 + 464) & (1 << v56)) )
                                                                                                                                {
                                                                                                                                  *(_DWORD *)(v43 + 464) |= 1 << v56;
                                                                                                                                  CPlayer::Write(ebx0, a3, a4, v43, 68, (unsigned int)"bb");
                                                                                                                                  CDBSocket::Write(ebx0, a3, a4, 15, (unsigned int)"db");
                                                                                                                                  sub_4800E0((void *)(v43 + 624), ebx0, a3, a4);
                                                                                                                                }
                                                                                                                              }
                                                                                                                            }
                                                                                                                          }
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                          v57 = j__atol(&a2[v183]);
                                                                                                                          (*(void (__cdecl **)(int, signed int, signed int, __int32, __int32))(*(_DWORD *)v43 + 92))(v43, 15, 1, v57, v57);
                                                                                                                        }
                                                                                                                      }
                                                                                                                      else
                                                                                                                      {
                                                                                                                        v58 = j__atol(&a2[v183]);
                                                                                                                        (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(v43, 27, 1, v58, v58);
                                                                                                                        (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v43 + 92))(v43, 28, 1, v58, v58);
                                                                                                                      }
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                      v59 = j__atol(&a2[v183]);
                                                                                                                      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1020), ebx0, a3, a4);
                                                                                                                      if ( *(_DWORD *)(v43 + 1108) )
                                                                                                                        CItemTransform::CheatLevelUp(*(_DWORD *)(v43 + 1108), ebx0, a3, a4, (void *)v43, v59);
                                                                                                                      CIOCriticalSection::Leave(v43 + 1020, ebx0, a3, a4);
                                                                                                                    }
                                                                                                                  }
                                                                                                                  else
                                                                                                                  {
                                                                                                                    v60 = j__atol(&a2[v183]);
                                                                                                                    (*(void (__cdecl **)(int, signed int, signed int, __int32))(*(_DWORD *)v43 + 88))(v43, 35, 1, v60);
                                                                                                                  }
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1224), ebx0, a3, a4);
                                                                                                                  sub_4717E0(v43 + 1256);
                                                                                                                  CIOCriticalSection::Leave(v43 + 1224, ebx0, a3, a4);
                                                                                                                }
                                                                                                              }
                                                                                                              else
                                                                                                              {
                                                                                                                v61 = j__atol(&a2[v183]);
                                                                                                                CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1224), ebx0, a3, a4);
                                                                                                                sub_471780(v43 + 1256, (int)&v61);
                                                                                                                CIOCriticalSection::Leave(v43 + 1224, ebx0, a3, a4);
                                                                                                              }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                              v64 = j__atol(&a2[v183]);
                                                                                                              v65 = 0;
                                                                                                              v66 = 1;
                                                                                                              CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1224), ebx0, a3, a4);
                                                                                                              for ( i = 1;
                                                                                                                    i <= v64;
                                                                                                                    ++i )
                                                                                                              {
                                                                                                                sub_471840(v43 + 1256, (int)&v62, (int)&i);
                                                                                                                v33 = sub_430C20(v43 + 1256, &v46);
                                                                                                                if ( (unsigned __int8)unknown_libname_8(v33) )
                                                                                                                {
                                                                                                                  v34 = sub_472860((int)&v45, (int)&i, (int)&v65);
                                                                                                                  sub_4715D0(v43 + 1256, (int)&v44, v34);
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                  *(_DWORD *)(sub_420250((int *)&v62) + 8) = 1;
                                                                                                                }
                                                                                                              }
                                                                                                              CIOCriticalSection::Leave(v43 + 1224, ebx0, a3, a4);
                                                                                                            }
                                                                                                          }
                                                                                                          else
                                                                                                          {
                                                                                                            if ( sscanf(&a2[v183], "%d %d %d", &v68, &v69, &v70) == 3 )
                                                                                                            {
                                                                                                              CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1224), ebx0, a3, a4);
                                                                                                              sub_471840(v43 + 1256, (int)&v67, (int)&v68);
                                                                                                              v30 = sub_430C20(v43 + 1256, &v49);
                                                                                                              if ( (unsigned __int8)unknown_libname_8(v30) )
                                                                                                              {
                                                                                                                v31 = sub_472860((int)&v48, (int)&v68, (int)&v69);
                                                                                                                sub_4715D0(v43 + 1256, (int)&v47, v31);
                                                                                                              }
                                                                                                              else
                                                                                                              {
                                                                                                                v32 = sub_420250((int *)&v67);
                                                                                                                *(_DWORD *)(v32 + 4) = v69;
                                                                                                                *(_DWORD *)(v32 + 8) = v70;
                                                                                                              }
                                                                                                              CIOCriticalSection::Leave(v43 + 1224, ebx0, a3, a4);
                                                                                                            }
                                                                                                          }
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                          v71 = j__atol(&a2[v183]);
                                                                                                          if ( v71 + *(_DWORD *)(v43 + 468) <= 32767 )
                                                                                                            (*(void (__cdecl **)(int, signed int, signed int, __int32))(*(_DWORD *)v43 + 88))(v43, 30, 1, v71);
                                                                                                        }
                                                                                                      }
                                                                                                      else
                                                                                                      {
                                                                                                        v72 = j__atol(&a2[v183]);
                                                                                                        v73 = v72 + CChar::GetMaxMP(v43);
                                                                                                        if ( v73 >= 0 )
                                                                                                        {
                                                                                                          if ( v73 <= 32767 )
                                                                                                          {
                                                                                                            (*(void (__cdecl **)(int, signed int, signed int, __int32))(*(_DWORD *)v43 + 92))(v43, 6, 1, v72);
                                                                                                            v29 = CChar::GetMaxMP(v43);
                                                                                                            (*(void (__cdecl **)(_DWORD, signed int, _DWORD, int))(*(_DWORD *)v43 + 88))(v43, 8, 1, v29);
                                                                                                          }
                                                                                                        }
                                                                                                      }
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                      v74 = j__atol(&a2[v183]);
                                                                                                      v75 = v74 + CChar::GetMaxHP(v43);
                                                                                                      if ( v75 >= 0 )
                                                                                                      {
                                                                                                        if ( v75 <= 32767 )
                                                                                                        {
                                                                                                          (*(void (__cdecl **)(int, signed int, signed int, __int32))(*(_DWORD *)v43 + 92))(v43, 5, 1, v74);
                                                                                                          v28 = CChar::GetMaxHP(v43);
                                                                                                          (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v43 + 88))(v43, 7, 1, v28);
                                                                                                        }
                                                                                                      }
                                                                                                    }
                                                                                                  }
                                                                                                  else
                                                                                                  {
                                                                                                    v79 = j__atol(&a2[v183]);
                                                                                                    if ( v79 >= 1 )
                                                                                                    {
                                                                                                      if ( v79 <= 100 )
                                                                                                      {
                                                                                                        CChar::CancelBuffPrty(v43, v26, ebx0, a3, a4, -225);
                                                                                                        v78 = v79 - 1;
                                                                                                        *(_DWORD *)(v43 + 60) = v79;
                                                                                                        *(_DWORD *)(v43 + 472) = 0;
                                                                                                        *(_DWORD *)(v43 + 476) = 0;
                                                                                                        memset((void *)(v43 + 64), 0, 0x1Cu);
                                                                                                        memset((void *)(v43 + 92), 0, 0x60u);
                                                                                                        memset((void *)(v43 + 188), 0, 0x54u);
                                                                                                        memcpy((void *)(v43 + 64), (char *)&unk_4D6A28 + 28 * *(_DWORD *)(v43 + 460), 0x14u);
                                                                                                        *(_DWORD *)(v43 + 548) = 0;
                                                                                                        *(_DWORD *)(v43 + 544) = 0;
                                                                                                        *(_DWORD *)(v43 + 552) = 0;
                                                                                                        *(_DWORD *)(v43 + 620) = 0;
                                                                                                        *(_DWORD *)(v43 + 616) = 0;
                                                                                                        *(_DWORD *)(v43 + 612) = 0;
                                                                                                        *(_DWORD *)(v43 + 608) = 0;
                                                                                                        *(_DWORD *)(v43 + 604) = 0;
                                                                                                        *(_DWORD *)(v43 + 600) = 0;
                                                                                                        *(_DWORD *)(v43 + 596) = 0;
                                                                                                        CChar::ResetAllBuff(v43, v43, ebx0, a3, a4);
                                                                                                        sub_47FF00((void *)(v43 + 624), ebx0, a3, a4, 0);
                                                                                                        (*(void (__thiscall **)(int))(*(_DWORD *)v43 + 84))(v43);
                                                                                                        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v43 + 1020), ebx0, a3, a4);
                                                                                                        sub_40F070(v43 + 1068, &v77);
                                                                                                        while ( 1 )
                                                                                                        {
                                                                                                          v27 = sub_430C20(v43 + 1068, &v50);
                                                                                                          if ( !(unsigned __int8)sub_47D070(v27) )
                                                                                                            break;
                                                                                                          v76 = *(_DWORD *)(sub_420250((int *)&v77) + 4);
                                                                                                          if ( CItem::IsState(v76, 1) )
                                                                                                            (*(void (__thiscall **)(int, int))(*(_DWORD *)v76 + 104))(v76, v43);
                                                                                                          sub_446090((int *)&v77, (int)&v51, 0);
                                                                                                        }
                                                                                                        CIOCriticalSection::Leave(v43 + 1020, ebx0, a3, a4);
                                                                                                        sub_47FC00((void *)(v43 + 624));
                                                                                                        CPlayer::Write(ebx0, a3, a4, v43, 69, (unsigned int)"bb");
                                                                                                        CChar::WriteInSight(ebx0, a3, a4, v43, 73, (unsigned int)"db");
                                                                                                        CPlayer::UpdatePartyMember(v43, ebx0, a3, a4, 26);
                                                                                                        (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v43 + 88))(v43, 23, 1, 5 * *(_DWORD *)(v43 + 60));
                                                                                                        if ( v78 > 0 )
                                                                                                          (*(void (__cdecl **)(_DWORD, signed int, _DWORD, _DWORD))(*(_DWORD *)v43 + 88))(v43, 24, 1, v78);
                                                                                                        *(_DWORD *)(v43 + 276) = CChar::GetMaxMP(v43);
                                                                                                        *(_DWORD *)(v43 + 272) = CChar::GetMaxHP(v43);
                                                                                                        CChar::GetResist((void *)v43, 4);
                                                                                                        CChar::GetResist((void *)v43, 3);
                                                                                                        CChar::GetResist((void *)v43, 2);
                                                                                                        CChar::GetResist((void *)v43, 1);
                                                                                                        CChar::GetResist((void *)v43, 0);
                                                                                                        CChar::GetMaxMagic(v43);
                                                                                                        CChar::GetMinMagic(v43);
                                                                                                        CChar::GetMaxAttack(v43);
                                                                                                        CChar::GetMinAttack(v43);
                                                                                                        CChar::GetAbsorb(v43);
                                                                                                        CChar::GetDefense((void *)v43, 0);
                                                                                                        CChar::GetDodge(v43);
                                                                                                        CChar::GetHit(v43);
                                                                                                        CChar::GetDex(v43);
                                                                                                        CChar::GetWis(v43);
                                                                                                        CChar::GetInt(v43);
                                                                                                        CChar::GetHth(v43);
                                                                                                        CChar::GetStr(v43);
                                                                                                        CPlayer::Write(ebx0, a3, a4, v43, 66, (unsigned int)"bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd");
                                                                                                      }
                                                                                                    }
                                                                                                  }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                  if ( *(_DWORD *)(v43 + 60) < 100 )
                                                                                                  {
                                                                                                    CPlayer::Write(ebx0, a3, a4, v43, 69, (unsigned int)&off_4BAC50);
                                                                                                    (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 88))(v43, 26, 1, 1);
                                                                                                    (*(void (__cdecl **)(int, signed int, signed int, signed int))(*(_DWORD *)v43 + 88))(v43, 23, 1, 5);
                                                                                                    (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(*(_DWORD *)v43 + 88))(v43, 24, 1, 1);
                                                                                                    *(_DWORD *)(v43 + 472) = 0;
                                                                                                    *(_DWORD *)(v43 + 476) = 0;
                                                                                                    *(_DWORD *)(v43 + 552) = 0;
                                                                                                    sub_47FF00((void *)(v43 + 624), ebx0, a3, a4, 0);
                                                                                                    CPlayer::MLMPayMoney(v43, ebx0, a3, a4, 2);
                                                                                                    CPlayer::MLMLevelUp(v43, ebx0, a3, a4);
                                                                                                  }
                                                                                                }
                                                                                              }
                                                                                              else
                                                                                              {
                                                                                                if ( dword_4E1178 & 0x40 )
                                                                                                {
                                                                                                  v80 = j__atol(&a2[v183]);
                                                                                                  if ( v80 >= 0 )
                                                                                                  {
                                                                                                    if ( v80 <= 4 )
                                                                                                      CPlayer::EventBuff(ebx0, a3, a4, v80);
                                                                                                  }
                                                                                                }
                                                                                              }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                              v25 = j__atol(&a2[v183]);
                                                                                              v81 = v25;
                                                                                              if ( (signed int)((unsigned __int64)v25 >> 32) >= 0 )
                                                                                              {
                                                                                                if ( (signed int)((unsigned __int64)v25 >> 32) > 0 || (_DWORD)v81 )
                                                                                                {
                                                                                                  if ( v81 < qword_4D6948 )
                                                                                                  {
                                                                                                    if ( *(_DWORD *)(v43 + 60) < 99 )
                                                                                                      (*(void (__cdecl **)(int, signed int, signed int, _DWORD, _DWORD))(*(_DWORD *)v43 + 88))(v43, 25, 1, v81, HIDWORD(v81));
                                                                                                  }
                                                                                                }
                                                                                              }
                                                                                            }
                                                                                          }
                                                                                          else
                                                                                          {
                                                                                            v82 = j__atol(&a2[v183]);
                                                                                            if ( CChar::IsGState(v43, 256) )
                                                                                            {
                                                                                              if ( v82 >= 180 )
                                                                                                v40 = 180;
                                                                                              else
                                                                                                v40 = v82;
                                                                                              *(_DWORD *)(v43 + 536) = v40;
                                                                                            }
                                                                                          }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                          if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                                                          {
                                                                                            if ( dword_4E35B8 != 1 )
                                                                                            {
                                                                                              v83 = j__atol(&a2[v183]);
                                                                                              switch ( v83 )
                                                                                              {
                                                                                                case 255:
                                                                                                  sub_4802D0((void *)(v43 + 624));
                                                                                                  break;
                                                                                                case 254:
                                                                                                  sub_4803E0(
                                                                                                    v43 + 624,
                                                                                                    ebx0,
                                                                                                    a3,
                                                                                                    a4);
                                                                                                  break;
                                                                                                case 253:
                                                                                                  sub_480540(
                                                                                                    v43 + 624,
                                                                                                    ebx0,
                                                                                                    a3,
                                                                                                    a4);
                                                                                                  break;
                                                                                                default:
                                                                                                  sub_480240(
                                                                                                    (int *)(v43 + 624),
                                                                                                    ebx0,
                                                                                                    a3,
                                                                                                    a4,
                                                                                                    v83);
                                                                                                  break;
                                                                                              }
                                                                                            }
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                      else
                                                                                      {
                                                                                        if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                                                        {
                                                                                          if ( dword_4E35B8 != 1 )
                                                                                          {
                                                                                            if ( sscanf(
                                                                                                   &a2[v183],
                                                                                                   "%d %d",
                                                                                                   &v85,
                                                                                                   &v84) == 2 )
                                                                                            {
                                                                                              if ( v85 > 0 && v85 < 63
                                                                                                || v85 == 80
                                                                                                || v85 == 81 )
                                                                                              {
                                                                                                if ( v84 > 0 )
                                                                                                {
                                                                                                  if ( v84 <= 20 )
                                                                                                    sub_47FA60(v43 + 624, ebx0, a3, a4, v85, v84);
                                                                                                }
                                                                                              }
                                                                                            }
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                      if ( sscanf(
                                                                                             &a2[v183],
                                                                                             "%d %d %d",
                                                                                             &v88,
                                                                                             &v90,
                                                                                             &v89) == 3
                                                                                        && v89 >= 0
                                                                                        && v89 <= 19 )
                                                                                      {
                                                                                        CIOCriticalSection::Enter(
                                                                                          (struct _RTL_CRITICAL_SECTION *)(v43 + 1020),
                                                                                          ebx0,
                                                                                          a3,
                                                                                          a4);
                                                                                        v86 = 0;
                                                                                        sub_40F070(v43 + 1068, &v87);
                                                                                        while ( 1 )
                                                                                        {
                                                                                          v24 = sub_430C20(
                                                                                                  v43 + 1068,
                                                                                                  &v52);
                                                                                          if ( !(unsigned __int8)sub_47D070(v24) )
                                                                                            break;
                                                                                          v86 = *(_DWORD *)(sub_420250((int *)&v87) + 4);
                                                                                          if ( dword_4E1174[0] & 2 )
                                                                                            v41 = 1;
                                                                                          else
                                                                                            v41 = CItem::IsState(v86, 8);
                                                                                          if ( v41
                                                                                            && CItem::IsState(v86, 1)
                                                                                            && *(_DWORD *)(*(_DWORD *)(v86 + 40) + 72) == v88 )
                                                                                          {
                                                                                            (*(void (__thiscall **)(int, int))(*(_DWORD *)v86 + 100))(
                                                                                              v86,
                                                                                              v43);
                                                                                            if ( (*(int (__thiscall **)(int, int, int, int))(*(_DWORD *)v86 + 180))(
                                                                                                   v86,
                                                                                                   v43,
                                                                                                   v90,
                                                                                                   v89) )
                                                                                              sub_432890(
                                                                                                "Charming Cheat Item. (%s, %s, %d, %d, %d)",
                                                                                                v43 + 32,
                                                                                                *(_DWORD *)(v86 + 40)
                                                                                              + 32,
                                                                                                *(_DWORD *)(v86 + 36),
                                                                                                v90,
                                                                                                v89);
                                                                                            (*(void (__thiscall **)(int, int))(*(_DWORD *)v86 + 96))(
                                                                                              v86,
                                                                                              v43);
                                                                                            break;
                                                                                          }
                                                                                          sub_418860((int *)&v87);
                                                                                        }
                                                                                        CIOCriticalSection::Leave(
                                                                                          v43 + 1020,
                                                                                          ebx0,
                                                                                          a3,
                                                                                          a4);
                                                                                      }
                                                                                    }
                                                                                  }
                                                                                  else
                                                                                  {
                                                                                    v188 = &a2[v183];
                                                                                    v183 = strcspn(v188, " ");
                                                                                    if ( v188[v183] )
                                                                                      v188[v183++] = 0;
                                                                                    v93 = (char *)v188;
                                                                                    if ( strlen(v188) <= 0x10 )
                                                                                    {
                                                                                      if ( sub_497B80((int *)v93) )
                                                                                      {
                                                                                        v189 = &v188[v183];
                                                                                        v94 = 0;
                                                                                        v95 = 0;
                                                                                        v96 = 1;
                                                                                        v97 = -1;
                                                                                        v91 = 0;
                                                                                        while ( *v189 )
                                                                                        {
                                                                                          v183 = strcspn(v189, " ");
                                                                                          if ( v189[v183] )
                                                                                            v189[v183++] = 0;
                                                                                          *(&v94 + v91) = j__atol(v189);
                                                                                          v189 += v183;
                                                                                          ++v91;
                                                                                        }
                                                                                        if ( dword_4E1174[0] & 2
                                                                                          || v94 != 31 )
                                                                                        {
                                                                                          v92 = CItem::CreateItem(
                                                                                                  v94,
                                                                                                  v95,
                                                                                                  v96,
                                                                                                  -1);
                                                                                          if ( v92 )
                                                                                          {
                                                                                            (*(void (__thiscall **)(int, signed int, _DWORD, char *, _DWORD))(*(_DWORD *)v92 + 160))(
                                                                                              v92,
                                                                                              40,
                                                                                              0,
                                                                                              v93,
                                                                                              0);
                                                                                            CBase::Delete((void *)v92);
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                    }
                                                                                  }
                                                                                }
                                                                                else
                                                                                {
                                                                                  if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                                                  {
                                                                                    if ( dword_4E35B8 != 1 )
                                                                                    {
                                                                                      v187 = &a2[v183];
                                                                                      v100 = 0;
                                                                                      v101 = 0;
                                                                                      v102 = 1;
                                                                                      v103 = -1;
                                                                                      v98 = 0;
                                                                                      while ( *v187 )
                                                                                      {
                                                                                        v183 = strcspn(v187, " ");
                                                                                        if ( v187[v183] )
                                                                                          v187[v183++] = 0;
                                                                                        *(&v100 + v98) = j__atol(v187);
                                                                                        v187 += v183;
                                                                                        ++v98;
                                                                                      }
                                                                                      if ( dword_4E1174[0] & 2
                                                                                        || v100 != 31 )
                                                                                      {
                                                                                        v99 = CItem::CreateOwnItem(
                                                                                                v100,
                                                                                                v101,
                                                                                                v102,
                                                                                                v103);
                                                                                        if ( v99 )
                                                                                        {
                                                                                          CIOObject::AddRef(v99, ebx0, a3, a4);
                                                                                          if ( CPlayer::InsertItem(
                                                                                                 v43,
                                                                                                 v23,
                                                                                                 ebx0,
                                                                                                 a3,
                                                                                                 a4,
                                                                                                 3,
                                                                                                 v99) == 1 )
                                                                                            sub_432890(
                                                                                              "Create Cheat Item. (%s, %s, %d)",
                                                                                              v43 + 32,
                                                                                              *(_DWORD *)(v99 + 40) + 32,
                                                                                              *(_DWORD *)(v99 + 52));
                                                                                          else
                                                                                            CBase::Delete((void *)v99);
                                                                                          CIOObject::Release(v99, ebx0, a3, a4);
                                                                                        }
                                                                                      }
                                                                                    }
                                                                                  }
                                                                                }
                                                                              }
                                                                              else
                                                                              {
                                                                                v186 = &a2[v183];
                                                                                v106 = 0;
                                                                                v107 = 0;
                                                                                v108 = 1;
                                                                                v109 = -1;
                                                                                v104 = 0;
                                                                                while ( *v186 )
                                                                                {
                                                                                  v183 = strcspn(v186, " ");
                                                                                  if ( v186[v183] )
                                                                                    v186[v183++] = 0;
                                                                                  *(&v106 + v104) = j__atol(v186);
                                                                                  v186 += v183;
                                                                                  ++v104;
                                                                                }
                                                                                if ( dword_4E1174[0] & 2 || v106 != 31 )
                                                                                {
                                                                                  v105 = CItem::CreateCheatItem(
                                                                                           v106,
                                                                                           v107,
                                                                                           v108,
                                                                                           v109);
                                                                                  if ( v105 )
                                                                                  {
                                                                                    CIOObject::AddRef(v105, ebx0, a3, a4);
                                                                                    if ( CPlayer::InsertItem(
                                                                                           v43,
                                                                                           v105,
                                                                                           ebx0,
                                                                                           a3,
                                                                                           a4,
                                                                                           3,
                                                                                           v105) == 1 )
                                                                                      sub_432890(
                                                                                        "Create Cheat Item. (%s, %s, %d)",
                                                                                        v43 + 32,
                                                                                        *(_DWORD *)(v105 + 40) + 32,
                                                                                        *(_DWORD *)(v105 + 52));
                                                                                    else
                                                                                      CBase::Delete((void *)v105);
                                                                                    CIOObject::Release(v105, ebx0, a3, a4);
                                                                                  }
                                                                                }
                                                                              }
                                                                            }
                                                                          }
                                                                        }
                                                                        else
                                                                        {
                                                                          v112 = CPlayer::FindPlayer(
                                                                                   ebx0,
                                                                                   a3,
                                                                                   a4,
                                                                                   v183 + (_BYTE)a2);
                                                                          if ( v112 )
                                                                          {
                                                                            v110 = *(_DWORD *)(v43 + 332) + 32;
                                                                            v111 = *(_DWORD *)(v43 + 336) + 32;
                                                                            CPlayer::Teleport(
                                                                              v112,
                                                                              ebx0,
                                                                              a3,
                                                                              a4,
                                                                              *(_DWORD *)(v43 + 316),
                                                                              (int)&v110,
                                                                              0,
                                                                              1);
                                                                            sub_4239C0(v112, ebx0, a3, a4, v112 + 352);
                                                                          }
                                                                        }
                                                                      }
                                                                      else
                                                                      {
                                                                        CPlayer::WriteAll(ebx0, a3, a4, 15, (unsigned int)"s");
                                                                      }
                                                                    }
                                                                    else
                                                                    {
                                                                      for ( j = 0; j < 4; ++j )
                                                                      {
                                                                        if ( j >= 3 )
                                                                          sprintf(
                                                                            &v114,
                                                                            "(%02d ~ ) (gm:%d, m:%d, max:%d)",
                                                                            10 * j + 1,
                                                                            dword_4D66BC[3 * j],
                                                                            dword_4D66C0[3 * j],
                                                                            dword_4D66C4[3 * j]);
                                                                        else
                                                                          sprintf(
                                                                            &v114,
                                                                            "(%02d ~ %02d) (gm:%d, m:%d, max:%d)",
                                                                            10 * j + 1,
                                                                            10 * (j + 1),
                                                                            dword_4D66BC[3 * j],
                                                                            dword_4D66C0[3 * j],
                                                                            dword_4D66C4[3 * j]);
                                                                        CPlayer::Write(
                                                                          ebx0,
                                                                          a3,
                                                                          a4,
                                                                          v43,
                                                                          15,
                                                                          (unsigned int)"s");
                                                                      }
                                                                    }
                                                                  }
                                                                  else
                                                                  {
                                                                    if ( sscanf(
                                                                           &a2[v183],
                                                                           "%d %d %d %d",
                                                                           &v117,
                                                                           &v118,
                                                                           &v115,
                                                                           &v119) == 4 )
                                                                    {
                                                                      if ( v117 >= 0 )
                                                                      {
                                                                        if ( v117 <= 3 )
                                                                        {
                                                                          if ( v118 >= 0 )
                                                                          {
                                                                            if ( v115 <= 100 )
                                                                            {
                                                                              if ( v118 >= 0 )
                                                                              {
                                                                                if ( v115 <= 100 )
                                                                                {
                                                                                  if ( v119 >= 0 )
                                                                                  {
                                                                                    if ( v119 <= 50 )
                                                                                    {
                                                                                      dword_4D66BC[3 * v117] = v118;
                                                                                      dword_4D66C0[3 * v117] = v115;
                                                                                      dword_4D66C4[3 * v117] = v119;
                                                                                      if ( v117 >= 3 )
                                                                                        sprintf(
                                                                                          &v116,
                                                                                          "Changed~! (%02d ~ ) (gm:%d, m:%d, max:%d)",
                                                                                          10 * v117 + 1,
                                                                                          v118,
                                                                                          v115,
                                                                                          v119);
                                                                                      else
                                                                                        sprintf(
                                                                                          &v116,
                                                                                          "Changed~! (%02d ~ %02d) (gm:%d, m:%d, max:%d)",
                                                                                          10 * v117 + 1,
                                                                                          10 * (v117 + 1),
                                                                                          v118,
                                                                                          v115,
                                                                                          v119);
                                                                                      CPlayer::Write(
                                                                                        ebx0,
                                                                                        a3,
                                                                                        a4,
                                                                                        v43,
                                                                                        15,
                                                                                        (unsigned int)"s");
                                                                                    }
                                                                                  }
                                                                                }
                                                                              }
                                                                            }
                                                                          }
                                                                        }
                                                                      }
                                                                    }
                                                                  }
                                                                }
                                                                else
                                                                {
                                                                  if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                                  {
                                                                    if ( dword_4E35B8 != 1 )
                                                                    {
                                                                      v185 = &a2[v183];
                                                                      v123 = strcspn(v185, " ");
                                                                      if ( v185[v123] )
                                                                        v185[v123++] = 0;
                                                                      v124 = CPlayer::FindPlayer(ebx0, a3, a4, (char)v185);
                                                                      if ( v124 )
                                                                      {
                                                                        if ( CGoto::FindGoto(v123 + (_BYTE)v185, &v120) )
                                                                          CPlayer::Teleport(
                                                                            v124,
                                                                            ebx0,
                                                                            a3,
                                                                            a4,
                                                                            v120,
                                                                            (int)&v121,
                                                                            v122,
                                                                            1);
                                                                        sub_4239C0(v124, ebx0, a3, a4, v124 + 352);
                                                                      }
                                                                    }
                                                                  }
                                                                }
                                                              }
                                                              else
                                                              {
                                                                if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                                {
                                                                  if ( dword_4E35B8 != 1 )
                                                                    CAuthSocket::Write(
                                                                      ebx0,
                                                                      a3,
                                                                      a4,
                                                                      7,
                                                                      (unsigned int)&byte_4B437D);
                                                                }
                                                              }
                                                            }
                                                            else
                                                            {
                                                              if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                              {
                                                                if ( dword_4E35B8 != 1 )
                                                                {
                                                                  v125 = j__atol(&a2[v183]);
                                                                  dword_4E17B8 = 60000 * v125;
                                                                  if ( dword_4E17B8 <= 0 )
                                                                  {
                                                                    KillTimer(hWnd, 2u);
                                                                    CPlayer::Write(ebx0, a3, a4, v43, 67, (unsigned int)"b");
                                                                    sub_432890(
                                                                      "Shutdown Canceled. (PID:%d)",
                                                                      *(_DWORD *)(v43 + 452));
                                                                  }
                                                                  else
                                                                  {
                                                                    SetTimer(hWnd, 2u, 0x2710u, 0);
                                                                    CPlayer::Write(
                                                                      ebx0,
                                                                      a3,
                                                                      a4,
                                                                      v43,
                                                                      68,
                                                                      (unsigned int)"bb");
                                                                    sub_432890(
                                                                      "Shutdown Started. (PID:%d, Min:%d)",
                                                                      *(_DWORD *)(v43 + 452),
                                                                      v125);
                                                                  }
                                                                }
                                                              }
                                                            }
                                                          }
                                                          else
                                                          {
                                                            v127 = j__atol(&a2[v183]);
                                                            if ( v127 > 1000 )
                                                            {
                                                              if ( v127 <= 20000 )
                                                              {
                                                                dword_4E118C = v127;
                                                                sprintf(&v126, "Max User : %d", v127);
                                                                CPlayer::Write(ebx0, a3, a4, v43, 15, (unsigned int)"s");
                                                                if ( dword_4E35B8 != 1 )
                                                                  sub_4328C0(
                                                                    "Reset maximum user number. (pid:%d, number:%d)",
                                                                    *(_DWORD *)(v43 + 452),
                                                                    v127);
                                                              }
                                                            }
                                                          }
                                                        }
                                                        else
                                                        {
                                                          if ( dword_4E35B8 != 1 )
                                                          {
                                                            v131 = *(_DWORD *)dword_4E1174;
                                                            v183 = sprintf(v130, "system : ");
                                                            v129 = 0;
                                                            while ( v131 > 0 )
                                                            {
                                                              if ( v131 & 1 )
                                                              {
                                                                v21 = sprintf(&v130[v183], "%d ", v129);
                                                                v183 += v21;
                                                              }
                                                              v131 >>= 1;
                                                              ++v129;
                                                            }
                                                            CPlayer::Write(ebx0, a3, a4, v43, 15, (unsigned int)"s");
                                                            v131 = dword_4E1178;
                                                            v183 = sprintf(v130, "event : ");
                                                            v128 = 0;
                                                            while ( v131 > 0 )
                                                            {
                                                              if ( v131 & 1 )
                                                              {
                                                                v22 = sprintf(&v130[v183], "%d ", v128);
                                                                v183 += v22;
                                                              }
                                                              v131 >>= 1;
                                                              ++v128;
                                                            }
                                                            CPlayer::Write(ebx0, a3, a4, v43, 15, (unsigned int)"s");
                                                          }
                                                        }
                                                      }
                                                      else
                                                      {
                                                        v132 = j__atol(&a2[v183]);
                                                        CPlayer::SetEventCode(ebx0, a3, a4, v132, 0);
                                                      }
                                                    }
                                                    else
                                                    {
                                                      v133 = j__atol(&a2[v183]);
                                                      CPlayer::SetEventCode(ebx0, a3, a4, v133, 1);
                                                    }
                                                  }
                                                  else
                                                  {
                                                    v134 = j__atol(&a2[v183]);
                                                    CPlayer::SetSystemCode(ebx0, a3, a4, v134, 0);
                                                  }
                                                }
                                                else
                                                {
                                                  v135 = j__atol(&a2[v183]);
                                                  CPlayer::SetSystemCode(ebx0, a3, a4, v135, 1);
                                                }
                                              }
                                              else
                                              {
                                                if ( *(_WORD *)dword_4E1174 & 0x100 )
                                                {
                                                  if ( dword_4E35B8 == 1 )
                                                  {
                                                    v136 = (char *)&a2[v183];
                                                    v183 = strcspn(&a2[v183], " ");
                                                    if ( v136[v183] )
                                                      v136[v183++] = 0;
                                                    v137 = j__atol(&v136[v183]);
                                                    CGuild::SetExp(ebx0, a3, a4, v136, v137);
                                                    CPlayer::Write(ebx0, a3, a4, v43, 60, (unsigned int)"ss");
                                                  }
                                                }
                                              }
                                            }
                                          }
                                          else
                                          {
                                            CPlayer::Write(ebx0, a3, a4, v43, 68, (unsigned int)"bd");
                                          }
                                        }
                                        else
                                        {
                                          CSocket::Id(*(_DWORD *)(v43 + 1676));
                                          CAuthSocket::Write(ebx0, a3, a4, 6, (unsigned int)"d");
                                        }
                                      }
                                      else
                                      {
                                        v138 = j__atol(&a2[v183]);
                                        if ( v138 )
                                        {
                                          CSocket::Id(*(_DWORD *)(v43 + 1676));
                                          CAuthSocket::Write(ebx0, a3, a4, 5, (unsigned int)"db");
                                        }
                                        else
                                        {
                                          sub_47E710();
                                          sub_47E700();
                                          CPlayer::Write(ebx0, a3, a4, v43, 68, (unsigned int)"bbww");
                                        }
                                      }
                                    }
                                    else
                                    {
                                      v141 = j__atol(&a2[v183]);
                                      v142 = CMonster::ScanMonster(ebx0, a3, a4, v141);
                                      if ( v142 )
                                      {
                                        v139 = *(_DWORD *)(v142 + 332) + 32;
                                        v140 = *(_DWORD *)(v142 + 336) + 32;
                                        CPlayer::Teleport(v43, ebx0, a3, a4, *(_DWORD *)(v142 + 316), (int)&v139, 0, 1);
                                        CIOObject::Release(v142, ebx0, a3, a4);
                                      }
                                    }
                                  }
                                  else
                                  {
                                    v145 = CPlayer::FindPlayer(ebx0, a3, a4, v183 + (_BYTE)a2);
                                    if ( v145 )
                                    {
                                      sprintf(
                                        &v143,
                                        "[%s] (uid:%d, pid:%d, class:%d, level:%d)",
                                        v145 + 32,
                                        *(_DWORD *)(v145 + 448),
                                        *(_DWORD *)(v145 + 452),
                                        *(_DWORD *)(v145 + 460),
                                        *(_DWORD *)(v145 + 60));
                                      sub_4239C0(v145, ebx0, a3, a4, v145 + 352);
                                    }
                                    else
                                    {
                                      sprintf(&v143, "[%s] isn't in player list", &a2[v183]);
                                    }
                                    CPlayer::Write(ebx0, a3, a4, v43, 15, (unsigned int)"s");
                                  }
                                }
                                else
                                {
                                  if ( !CChar::IsGStateExcept(v43, -1040384) )
                                  {
                                    v184 = &a2[v183];
                                    v42 = *v184;
                                    if ( *v184 == 35 )
                                    {
                                      v151 = j__atol(v184 + 1);
                                      if ( v151 >= 0 )
                                      {
                                        if ( v151 < dword_4E35AC )
                                        {
                                          v150 = (int)&dword_4D77C8[7 * v151];
                                          CPlayer::Teleport(
                                            v43,
                                            ebx0,
                                            a3,
                                            a4,
                                            dword_4D77C8[7 * v151],
                                            (int)&dword_4D77C8[7 * v151 + 1],
                                            dword_4D77C8[7 * v151 + 3],
                                            1);
                                        }
                                      }
                                    }
                                    else
                                    {
                                      if ( v42 == 36 )
                                      {
                                        v149 = CPlayer::FindPlayer(ebx0, a3, a4, (_BYTE)v184 + 1);
                                        if ( v149 )
                                        {
                                          CPlayer::Teleport(
                                            v43,
                                            ebx0,
                                            a3,
                                            a4,
                                            *(_DWORD *)(v149 + 316),
                                            v149 + 332,
                                            *(_DWORD *)(v149 + 340),
                                            1);
                                          sub_4239C0(v149, ebx0, a3, a4, v149 + 352);
                                        }
                                      }
                                      else
                                      {
                                        if ( v42 == 64 )
                                        {
                                          if ( CGoto::FindGoto((_BYTE)v184 + 1, &v152) )
                                            CPlayer::Teleport(v43, ebx0, a3, a4, v152, (int)&v153, v154, 1);
                                        }
                                        else
                                        {
                                          if ( sscanf(v184, "%d %d %d", &v148, &v146, &v147) == 3 )
                                          {
                                            v146 += 32;
                                            v147 += 32;
                                            CPlayer::Teleport(v43, ebx0, a3, a4, v148, (int)&v146, 0, 1);
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                              else
                              {
                                v156 = CPlayer::FindPlayer(ebx0, a3, a4, v183 + (_BYTE)a2);
                                if ( v156 )
                                {
                                  CPlayer::Write(ebx0, a3, a4, v156, 45, (unsigned int)"b");
                                  v155 = *(_DWORD *)(v156 + 20);
                                  sub_495B20(*(_DWORD *)(v156 + 1676), ebx0, a3, a4, 1);
                                  sub_432890(
                                    "[Kickout] At  '%s' (PID:%d) %p %p %x %x %x",
                                    v156 + 32,
                                    *(_DWORD *)(v156 + 452),
                                    v156,
                                    *(_DWORD *)(*(_DWORD *)(v156 + 1676) + 120),
                                    v155,
                                    *(_DWORD *)(v156 + 20),
                                    *(_DWORD *)(*(_DWORD *)(v156 + 1676) + 108));
                                  sub_4239C0(v156, ebx0, a3, a4, v156 + 352);
                                }
                              }
                            }
                            else
                            {
                              v157 = j__atol(&a2[v183]);
                              if ( v157 )
                                (*(void (__thiscall **)(int, signed int, _DWORD))(*(_DWORD *)v43 + 104))(v43, 524288, 0);
                              else
                                (*(void (__thiscall **)(int, signed int, _DWORD))(*(_DWORD *)v43 + 124))(v43, 524288, 0);
                            }
                          }
                        }
                        else
                        {
                          CPlayer::Write(ebx0, a3, a4, v43, 68, (unsigned int)"bb");
                        }
                      }
                      else
                      {
                        if ( CChar::IsGState(v43, 256) )
                        {
                          CPlayer::Write(ebx0, a3, a4, v43, 95, (unsigned int)"b");
                        }
                        else
                        {
                          CChar::Lock(v43, ebx0, a3, a4);
                          *(_DWORD *)(v43 + 272) = 0;
                          if ( CChar::IsGState(v43, 32768) )
                            CPlayer::Write(ebx0, a3, a4, v43, 67, (unsigned int)"b");
                          CChar::SubGState(v43, 32772);
                          CChar::SubMState(v43, 1, 0);
                          CChar::AddGState(v43, 2);
                          if ( CChar::IsGState(v43, 128) )
                          {
                            v17 = *(_DWORD *)(v43 + 1516);
                            v158 = *(_DWORD *)(v43 + 1516);
                            if ( !v158 )
                              sub_422D80(v17, ebx0, a3, a4);
                            CPlayer::EndPvP(v43, ebx0, a3, a4, v158, 3, 2, 6);
                            CPlayer::AddEState(v43, 16);
                          }
                          CChar::Unlock(v43, ebx0, a3, a4);
                          if ( CChar::IsGState(v43, 1024) )
                          {
                            (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v43 + 112))(v43, 1024);
                            v19 = CPlayer::GetGID(v43, ebx0, a3, a4);
                            CCastle::UnfurlStandardCancel(ebx0, a3, a4, v19);
                          }
                          CChar::CancelBuffPrty(v43, v18, ebx0, a3, a4, -161);
                          if ( CChar::IsGState(v43, 16) )
                            CPlayer::SwitchStall(v43, ebx0, a3, a4, 0);
                          if ( CChar::IsGState(v43, 512) )
                            CPlayer::FreeTransform(v43, ebx0, a3, a4);
                          CPlayer::BreakStandard(v43, ebx0, a3, a4);
                          CChar::WriteInSight(ebx0, a3, a4, v43, 61, (unsigned int)"db");
                          *(_DWORD *)(v43 + 1448) = GetTickCount() + 20000;
                          *(_DWORD *)(v43 + 1452) = GetTickCount() + 20000;
                          CPlayer::UpdatePartyMember(v43, ebx0, a3, a4, 7);
                        }
                      }
                    }
                    else
                    {
                      CChar::Lock(v43, ebx0, a3, a4);
                      v15 = CChar::IsGState(v43, 128);
                      if ( v15 )
                      {
                        v159 = *(_DWORD *)(v43 + 1516);
                        if ( !v159 )
                          sub_422D80(v15, ebx0, a3, a4);
                        CPlayer::EndPvP(v43, ebx0, a3, a4, v159, 3, 2, 6);
                      }
                      CChar::Unlock(v43, ebx0, a3, a4);
                    }
                  }
                  else
                  {
                    v163 = (char *)&a2[v183];
                    v183 = strcspn(&a2[v183], " ");
                    if ( v163[v183] )
                      v163[v183++] = 0;
                    v162 = j__atol(&v163[v183]);
                    v161 = CPlayer::GetGuild(v43, ebx0, a3, a4);
                    if ( v161 )
                    {
                      v160 = CGuild::AllianceOffer(v161, ebx0, a3, a4, v43, v163, v162);
                      sub_4239C0(v161, ebx0, a3, a4, v161 + 40);
                      if ( v160 )
                        CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
                    }
                  }
                }
                else
                {
                  v164 = CPlayer::GetGuild(v43, ebx0, a3, a4);
                  if ( v164 )
                  {
                    CGuild::GetTodayMessage(ebx0, a3, a4, v43);
                    sub_4239C0(v164, ebx0, a3, a4, v164 + 40);
                  }
                }
              }
              else
              {
                v166 = CPlayer::GetGuild(v43, ebx0, a3, a4);
                if ( v166 )
                {
                  v165 = CGuild::SetConnectTell(v166, ebx0, a3, a4, v43, 0);
                  sub_4239C0(v166, ebx0, a3, a4, v166 + 40);
                  if ( v165 )
                    CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
                }
              }
            }
            else
            {
              v168 = CPlayer::GetGuild(v43, ebx0, a3, a4);
              if ( v168 )
              {
                v167 = CGuild::SetConnectTell(v168, ebx0, a3, a4, v43, 1);
                sub_4239C0(v168, ebx0, a3, a4, v168 + 40);
                if ( v167 )
                  CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
              }
            }
          }
          else
          {
            v172 = (char *)&a2[v183];
            v183 = strcspn(&a2[v183], " ");
            if ( v172[v183] )
              v172[v183++] = 0;
            v170 = &v172[v183];
            if ( strlen(&v172[v183]) <= 0xE && sub_4979C0(v170) )
            {
              v171 = CPlayer::GetGuild(v43, ebx0, a3, a4);
              if ( v171 )
              {
                v169 = CGuild::TitleChange(v171, ebx0, a3, a4, v43, v172, v170);
                sub_4239C0(v171, ebx0, a3, a4, v171 + 40);
                if ( v169 )
                  CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
              }
            }
            else
            {
              CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
            }
          }
        }
        else
        {
          v174 = CPlayer::GetGuild(v43, ebx0, a3, a4);
          if ( v174 )
          {
            v173 = CGuild::Dissolution(v174, ebx0, a3, a4, v43);
            sub_4239C0(v174, ebx0, a3, a4, v174 + 40);
            if ( v173 )
              CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
          }
        }
      }
      else
      {
        v178 = (char *)&a2[v183];
        v183 = strcspn(&a2[v183], " ");
        if ( v178[v183] )
          v178[v183++] = 0;
        v177 = (int)&v178[v183];
        v176 = CPlayer::GetGuild(v43, ebx0, a3, a4);
        if ( v176 )
        {
          v175 = CGuild::Appointment(v176, ebx0, a3, a4, v43, v178, (const char *)v177);
          sub_4239C0(v176, ebx0, a3, a4, v176 + 40);
          if ( v175 )
            CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
        }
      }
    }
    else
    {
      v180 = CPlayer::GetGuild(v43, ebx0, a3, a4);
      if ( v180 )
      {
        v179 = CGuild::Banish(v180, ebx0, a3, a4, v43, &a2[v183]);
        sub_4239C0(v180, ebx0, a3, a4, v180 + 40);
        if ( v179 )
          CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
      }
    }
  }
  else
  {
    v182 = CPlayer::GetGuild(v43, ebx0, a3, a4);
    if ( v182 )
    {
      v181 = CGuild::Conflux(v182, ebx0, a3, a4, v43, v183 + (_BYTE)a2);
      sub_4239C0(v182, ebx0, a3, a4, v182 + 40);
      if ( v181 )
        CPlayer::Write(ebx0, a3, a4, v43, 94, (unsigned int)"bb");
    }
  }
}
// 40E860: using guessed type _DWORD __cdecl CGoto::FindGoto(char, _DWORD);
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);
// 4717E0: using guessed type int __thiscall sub_4717E0(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);
// 4BAC50: using guessed type int (__stdcall *off_4BAC50)(int);
// 4D66BC: using guessed type int dword_4D66BC[];
// 4D66C0: using guessed type int dword_4D66C0[];
// 4D66C4: using guessed type int dword_4D66C4[];
// 4D6948: using guessed type __int64 qword_4D6948;
// 4D9830: using guessed type int dword_4D9830;
// 4DA9B0: using guessed type int dword_4DA9B0;
// 4E0964: using guessed type int dword_4E0964;
// 4E1178: using guessed type int dword_4E1178;
// 4E118C: using guessed type int dword_4E118C;
// 4E17B8: using guessed type int dword_4E17B8;
// 4E35AC: using guessed type int dword_4E35AC;
// 4E35B8: using guessed type int dword_4E35B8;
// 461080: using guessed type char var_1D8[128];

//----- (004642B0) --------------------------------------------------------
int __userpurge CPlayer::Rest<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  int v6; // [sp+10h] [bp-4h]@1

  v6 = a1;
  if ( a5 )
  {
    result = CChar::IsGState(a1, 4);
    if ( result )
      return result;
    CChar::AddGState(v6, 4);
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v6 + 124))(v6, 1, 0);
    *(_DWORD *)(v6 + 1444) = GetTickCount() + 5000;
    return CChar::WriteInSight(a2, a3, a4, v6, 61, (unsigned int)"dbb");
  }
  result = CChar::IsGState(a1, 4);
  if ( result )
  {
    result = CChar::IsGState(v6, 16);
    if ( !result )
    {
      CChar::SubGState(v6, 4);
      if ( CChar::IsMState(v6, 1048576i64) )
        CChar::CancelBuff(v6, a2, a3, a4, 18);
      if ( CChar::IsMState(v6, 2097152i64) )
        CChar::CancelBuff(v6, a2, a3, a4, 19);
      return CChar::WriteInSight(a2, a3, a4, v6, 61, (unsigned int)"dbb");
    }
  }
  return result;
}

//----- (004643A0) --------------------------------------------------------
int __thiscall CPlayer::CutdownExp(int this, signed int a2)
{
  int result; // eax@1
  int v3; // ecx@6
  __int64 v4; // ST04_8@6
  signed __int64 v5; // qax@17
  int v6; // ett@17
  signed int v7; // [sp+4h] [bp-10h]@4
  int v8; // [sp+8h] [bp-Ch]@1
  signed __int64 v9; // [sp+Ch] [bp-8h]@6

  v8 = this;
  result = this;
  if ( *(_DWORD *)(this + 60) > 5 )
  {
    if ( CPlayer::IsEState(this, 256) )
    {
      result = CPlayer::SubEState(v8, 256);
    }
    else
    {
      if ( *(_DWORD *)(v8 + 552) >= 20 )
        v7 = 20;
      else
        v7 = *(_DWORD *)(v8 + 552);
      v3 = *(_DWORD *)(v8 + 60);
      HIDWORD(v4) = dword_4D66F4[2 * v3];
      LODWORD(v4) = dword_4D66F0[2 * v3];
      v9 = v4 * (v7 / 5 + 2) / 100;
      result = CSMap::IsOnTile(*(void **)(v8 + 320), v8 + 332, 1048576);
      if ( !result )
      {
        if ( CPlayer::IsEState(v8, 128) )
        {
          v9 >>= 1;
          CPlayer::SubEState(v8, 128);
        }
        if ( CPlayer::IsEState(v8, 32) )
        {
          v9 >>= 1;
          result = CPlayer::SubEState(v8, 32);
        }
        else
        {
          result = CPlayer::IsEState(v8, 64);
          if ( result )
          {
            v9 /= 10i64;
            result = CPlayer::SubEState(v8, 64);
          }
        }
        if ( a2 < 100 )
        {
          if ( a2 > 0 )
          {
            v5 = v9 * a2 / 100;
            v6 = ((_DWORD)v9 < (_DWORD)v5) + HIDWORD(v5);
            LODWORD(v9) = v9 - v5;
            HIDWORD(v9) -= v6;
          }
          result = (*(int (__cdecl **)(int, signed int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v8 + 88))(
                     v8,
                     25,
                     0,
                     v9,
                     HIDWORD(v9));
        }
      }
    }
  }
  return result;
}
// 4D66F0: using guessed type int dword_4D66F0[];
// 4D66F4: using guessed type int dword_4D66F4[];

//----- (00464550) --------------------------------------------------------
void __usercall CPlayer::Revival(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  DWORD v4; // edi@5
  DWORD v5; // esi@5
  int v6; // eax@5
  int v7; // eax@5
  int v8; // edx@5
  const void *v9; // esi@5
  const void *v10; // esi@19
  int v11; // [sp+8h] [bp-28h]@1
  int v12; // [sp+Ch] [bp-24h]@5
  int v13; // [sp+10h] [bp-20h]@20
  int v14; // [sp+14h] [bp-1Ch]@20
  int v15; // [sp+18h] [bp-18h]@20
  int v16; // [sp+1Ch] [bp-14h]@7
  int v17; // [sp+20h] [bp-10h]@5
  int v18; // [sp+24h] [bp-Ch]@11
  int v19; // [sp+28h] [bp-8h]@5
  int v20; // [sp+2Ch] [bp-4h]@20

  v11 = a1;
  if ( CPlayer::IsEState(a1, 16) )
  {
    (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v11 + 112))(v11, 2);
    CPlayer::SubEState(v11, 16);
    return;
  }
  if ( !CChar::IsGState(v11, 8) )
  {
    v6 = CChar::GetMaxHP(v11);
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v11 + 88))(v11, 7, 1, v6);
    v7 = CChar::GetMaxMP(v11);
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v11 + 88))(v11, 8, 1, v7);
    CChar::AddGState(v11, 8);
    CPlayer::CutdownExp(v11, 0);
    CChar::CancelBuffPrty(v11, v8, a2, a3, a4, 256);
    v9 = &dword_4D77C8[7 * *(_DWORD *)(v11 + 572)];
    memcpy(&v12, v9, 0x1Cu);
    v5 = (DWORD)((char *)v9 + 28);
    v4 = (DWORD)&v19;
    if ( v17 )
    {
      if ( CGuild::IsWarringPeriod() )
      {
        if ( CCastle::IsGateAlive(a2, (DWORD)&v19, v5, v16, v17) )
          goto LABEL_20;
        CChar::Unlock(v11, a2, (DWORD)&v19, v5);
        if ( !CPlayer::IsDefenseSide(v11, a2, (DWORD)&v19, v5, v16) )
        {
          CChar::Lock(v11, a2, (DWORD)&v19, v5);
LABEL_20:
          v19 = sub_406E10(v13 - 32, v13 + 32);
          v20 = sub_406E10(v14 - 32, v14 + 32);
          CPlayer::Teleport(v11, a2, v4, v5, v12, (int)&v19, v15, 0);
          return;
        }
        CChar::Lock(v11, a2, (DWORD)&v19, v5);
        *(_DWORD *)(v11 + 572) = v18;
      }
      else
      {
        *(_DWORD *)(v11 + 572) = 0;
      }
    }
    else
    {
      if ( !v16 )
        goto LABEL_20;
      CChar::Unlock(v11, a2, (DWORD)&v19, v5);
      if ( CPlayer::IsDefenseSide(v11, a2, (DWORD)&v19, v5, v16) )
      {
        CChar::Lock(v11, a2, (DWORD)&v19, v5);
        goto LABEL_20;
      }
      CChar::Lock(v11, a2, (DWORD)&v19, v5);
      *(_DWORD *)(v11 + 572) = 0;
    }
    CDBSocket::Write(a2, (DWORD)&v19, v5, 36, (unsigned int)"db");
    v10 = &dword_4D77C8[7 * *(_DWORD *)(v11 + 572)];
    memcpy(&v12, v10, 0x1Cu);
    v5 = (DWORD)((char *)v10 + 28);
    v4 = (DWORD)&v19;
    goto LABEL_20;
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (00464750) --------------------------------------------------------
void __userpurge CPlayer::RevivalSkill(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // edx@14
  void *v7; // eax@14
  int v8; // [sp+0h] [bp-8h]@1
  int v9; // [sp+0h] [bp-8h]@14
  int v10; // [sp+4h] [bp-4h]@9

  v8 = a1;
  if ( CPlayer::IsEState(a1, 8) )
  {
    CPlayer::SubEState(v8, 8);
    if ( CPlayer::IsEState(v8, 16) )
    {
      (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v8 + 112))(v8, 2);
      CPlayer::SubEState(v8, 16);
      return;
    }
    if ( !CChar::IsNormal(v8) && !CChar::IsGState(v8, 8) && a5 )
    {
      v10 = 0;
      if ( !a6 )
        goto LABEL_20;
      v10 = sub_450810(a2, a3, a4, a6);
      if ( !v10 )
      {
        CPlayer::Write(a2, a3, a4, v8, 67, (unsigned int)"b");
        return;
      }
      if ( sub_448870(v8 + 324, v10 + 324) > 10 )
      {
        CPlayer::Write(a2, a3, a4, v8, 67, (unsigned int)"b");
        sub_4239C0(v10, a2, a3, a4, v10 + 352);
      }
      else
      {
LABEL_20:
        CPlayer::CutdownExp(v8, 50);
        CChar::CancelBuffPrty(v8, v6, a2, a3, a4, 256);
        *(_DWORD *)(v8 + 276) = 0;
        (*(void (__cdecl **)(int, signed int, signed int, _DWORD))(*(_DWORD *)v8 + 88))(v8, 7, 1, *(_DWORD *)(v8 + 588));
        (*(void (__cdecl **)(int, signed int, signed int, _DWORD))(*(_DWORD *)v8 + 88))(v8, 8, 1, *(_DWORD *)(v8 + 592));
        v7 = CBuff::CreateBuff(4, 60, -50, v8);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v9 + 180))(v9, v7);
        if ( a6 )
        {
          CChar::AddGState(v9, 8);
          CPlayer::Teleport(v9, a2, a3, a4, *(_DWORD *)(v10 + 316), v10 + 332, *(_DWORD *)(v10 + 340), 0);
          sub_4239C0(v10, a2, a3, a4, v10 + 352);
        }
        else
        {
          (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v9 + 112))(v9, 2);
        }
        CChar::AddGState(v9, 8192);
        *(_DWORD *)(v9 + 1448) = GetTickCount() + 10000;
      }
    }
  }
}

//----- (00464950) --------------------------------------------------------
signed int __userpurge CPlayer::RevivalItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5)
{
  signed int result; // eax@4
  int v6; // edx@7
  int v7; // eax@7
  int v8; // eax@7
  int v9; // [sp+0h] [bp-4h]@1

  v9 = a1;
  if ( CChar::IsNormal(a1) || CPlayer::IsEState(v9, 16) || CChar::IsGState(v9, 8) )
  {
    result = 0;
  }
  else
  {
    if ( CPlayer::IsEState(v9, 8) )
      CPlayer::SubEState(v9, 8);
    CPlayer::CutdownExp(v9, a5);
    CChar::CancelBuffPrty(v9, v6, a2, a3, a4, 256);
    *(_DWORD *)(v9 + 276) = 0;
    v7 = CChar::GetMaxHP(v9);
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v9 + 88))(v9, 7, 1, 30 * v7 / 100);
    v8 = CChar::GetMaxMP(v9);
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v9 + 88))(v9, 8, 1, 30 * v8 / 100);
    (*(void (__thiscall **)(int, signed int))(*(_DWORD *)v9 + 112))(v9, 2);
    CChar::AddGState(v9, 8192);
    *(_DWORD *)(v9 + 1448) = GetTickCount() + 10000;
    result = 1;
  }
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (00464A50) --------------------------------------------------------
void __userpurge CPlayer::SaveRevivalPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-8h]@1
  _DWORD *v7; // [sp+4h] [bp-4h]@4

  v6 = a1;
  if ( a5 >= 0 && a5 <= dword_4E35AC )
  {
    v7 = &dword_4D77C8[7 * a5];
    if ( dword_4D77C8[7 * a5 + 5] )
    {
      if ( CGuild::IsWarringPeriod() && (CCastle::IsGateAlive(a2, a3, a4, v7[4], v7[5]) || !CPlayer::IsDefenseSide(v6, a2, a3, a4, v7[4])) )
      {
LABEL_16:
        *(_DWORD *)(v6 + 572) = a5;
        CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
        CDBSocket::Write(a2, a3, a4, 36, (unsigned int)"db");
        return;
      }
    }
    else
    {
      if ( !v7[4] || CPlayer::IsDefenseSide(a1, a2, a3, a4, v7[4]) )
        goto LABEL_16;
    }
    CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
  }
}
// 4E35AC: using guessed type int dword_4E35AC;

//----- (00464B40) --------------------------------------------------------
void __userpurge CPlayer::ProcessEvent(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // edx@39
  void *v8; // eax@47
  int v9; // ST20_4@47
  int v10; // eax@63
  int v11; // edx@67
  void *v12; // eax@71
  int v13; // [sp+4h] [bp-4Ch]@54
  int v14; // [sp+20h] [bp-30h]@1
  int v15; // [sp+24h] [bp-2Ch]@67
  int v16; // [sp+28h] [bp-28h]@63
  int v17; // [sp+2Ch] [bp-24h]@56
  unsigned __int8 v18; // [sp+32h] [bp-1Eh]@47
  unsigned __int8 v19; // [sp+33h] [bp-1Dh]@47
  int v20; // [sp+34h] [bp-1Ch]@25
  unsigned __int8 v21; // [sp+3Ah] [bp-16h]@20
  unsigned __int8 v22; // [sp+3Bh] [bp-15h]@21
  int v23; // [sp+3Ch] [bp-14h]@39
  int v24; // [sp+40h] [bp-10h]@25
  int v25; // [sp+44h] [bp-Ch]@25
  int *v26; // [sp+48h] [bp-8h]@7
  int v27; // [sp+4Ch] [bp-4h]@9

  v14 = a1;
  switch ( a5 )
  {
    case 3:
      if ( dword_4E1178 & 8 )
      {
        if ( *(_DWORD *)(a1 + 60) >= 5 )
        {
          if ( *(_DWORD *)(a1 + 448) >= 439941 )
          {
            sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
            if ( sub_497B80(v26) )
            {
              v27 = CPlayer::FindPlayer(a2, a3, a4, (char)v26);
              if ( v27 )
              {
                if ( v14 == v27 )
                  CPlayer::Write(a2, a3, a4, v14, 68, (unsigned int)"bbb");
                else
                  CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddd");
                sub_4239C0(v27, a2, a3, a4, v27 + 352);
              }
              else
              {
                CDBSocket::Write(a2, a3, a4, 38, (unsigned int)"dbs");
              }
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v14, 68, (unsigned int)"bbb");
            }
          }
          else
          {
            CPlayer::Write(a2, a3, a4, a1, 68, (unsigned int)"bbb");
          }
        }
      }
      break;
    case 1:
      if ( dword_4E1178 & 2 )
      {
        if ( *(_DWORD *)(a1 + 60) >= 10 )
        {
          sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bb");
          if ( (signed int)v21 <= 3 )
          {
            if ( (signed int)v22 <= 10 )
            {
              if ( CPlayer::RemoveItem(v14, a2, a3, a4, 9, 649, v22) )
              {
                v24 = sub_406E10(1, 6);
                v25 = sub_406E10(1, 6);
                v20 = v25 + v24;
                switch ( v21 )
                {
                  case 0u:
                    if ( v20 > 6 )
                      goto LABEL_38;
                    goto LABEL_39;
                  case 1u:
                    if ( v20 > 6 )
                      goto LABEL_39;
                    goto LABEL_38;
                  case 2u:
                    if ( v20 == 7 )
                      goto LABEL_39;
                    goto LABEL_38;
                  case 3u:
                    if ( v20 != 2 && v20 != 12 )
                      goto LABEL_38;
LABEL_39:
                    v23 = CItem::CreateItem(31, 0, dword_4D6A88[v21] * v22, -1);
                    if ( CPlayer::InsertItem(v14, v7, a2, a3, a4, 24, v23) != 1 )
                      CBase::Delete((void *)v23);
                    CPlayer::Write(a2, a3, a4, v14, 68, (unsigned int)"bbbbb");
                    break;
                  default:
LABEL_38:
                    CPlayer::Write(a2, a3, a4, v14, 68, (unsigned int)"bbbbb");
                    break;
                }
              }
              else
              {
                CPlayer::Write(a2, a3, a4, v14, 68, (unsigned int)"bb");
                sub_4328C0("ProcessEvent() RemoveItem Error (%d)", 649);
              }
            }
          }
        }
        else
        {
          CPlayer::Write(a2, a3, a4, a1, 68, (unsigned int)"bb");
        }
      }
      break;
    case 4:
      if ( dword_4E35B8 != 1 )
      {
        if ( dword_4E1178 & 0x10 )
        {
          if ( CChar::IsBState(a1, 268435456i64) )
          {
            CPlayer::Write(a2, a3, a4, v14, 67, (unsigned int)"b");
          }
          else
          {
            sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bb");
            *(_DWORD *)(v14 + 556) = v19;
            *(_DWORD *)(v14 + 560) = v18;
            v8 = CBuff::CreateBuff(102, 1814400, 0, v9);
            (*(void (__thiscall **)(int, void *))(*(_DWORD *)v14 + 180))(v14, v8);
            CChar::WriteInSight(a2, a3, a4, v14, 23, (unsigned int)"dbb");
            CDBSocket::Write(a2, a3, a4, 75, (unsigned int)"dbb");
          }
        }
      }
      break;
    case 7:
      if ( dword_4E35B8 == 1 )
      {
        if ( dword_4E1178 & 0x80 )
        {
          if ( CPlayer::FindItem(a1, a2, a3, a4, 653, 1) )
          {
            if ( CChar::IsBState(v14, 256i64) )
              v13 = 2;
            else
              v13 = 3;
            v17 = sub_406E10(1, v13);
            if ( v17 == 3 || CPlayer::GetInvenSize((void *)v14) < 60 )
            {
              switch ( v17 )
              {
                case 1:
                  v10 = sub_406E10(0, 2);
                  v16 = CItem::CreateItem(dword_4D6A7C[v10], 0, 1, -1);
                  if ( v16 )
                  {
                    if ( CPlayer::InsertItem(v14, v16, a2, a3, a4, 24, v16) != 1 )
                      CBase::Delete((void *)v16);
                  }
                  break;
                case 2:
                  v15 = CItem::CreateItem(31, 0, 500, -1);
                  if ( v15 )
                  {
                    if ( CPlayer::InsertItem(v14, v11, a2, a3, a4, 24, v15) != 1 )
                      CBase::Delete((void *)v15);
                  }
                  break;
                case 3:
                  v12 = CBuff::CreateBuff(17, 3600, 3, v13);
                  (*(void (__thiscall **)(int, void *))(*(_DWORD *)v14 + 180))(v14, v12);
                  break;
              }
              if ( !CPlayer::RemoveItem(v14, a2, a3, a4, 24, 653, 1) )
                sub_4328C0("CPlayer::ProcessEvent() Failed to remove item(%d) on Event(%d)", 653, 7);
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v14, 67, (unsigned int)"b");
            }
          }
          else
          {
            CPlayer::Write(a2, a3, a4, v14, 68, (unsigned int)"bwd");
          }
        }
      }
      break;
    default:
      return;
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D6A7C: using guessed type int dword_4D6A7C[];
// 4D6A88: using guessed type int dword_4D6A88[];
// 4E1178: using guessed type int dword_4E1178;
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00465120) --------------------------------------------------------
void __userpurge CPlayer::OnProcessEvent(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD a4<esi>, int a2, void *a3)
{
  int v6; // [sp+4h] [bp-10h]@1
  unsigned __int8 v7; // [sp+Bh] [bp-9h]@14
  int v8; // [sp+Ch] [bp-8h]@6
  char v9; // [sp+12h] [bp-2h]@4
  unsigned __int8 v10; // [sp+13h] [bp-1h]@5
  char *v11; // [sp+20h] [bp+Ch]@4
  char *v12; // [sp+20h] [bp+Ch]@14

  v6 = (int)this;
  if ( a2 == 3 )
  {
    v11 = sub_497220(ebx0, edi0, a4, (char *)a3, (unsigned int)"bb");
    if ( v9 )
    {
      CPlayer::Write(ebx0, edi0, a4, v6, 68, (unsigned int)"bbb");
    }
    else
    {
      sub_497220(ebx0, edi0, a4, v11, (unsigned int)"d");
      if ( v10 == 9 )
      {
        if ( *(_DWORD *)(v6 + 448) == v8 )
          CPlayer::Write(ebx0, edi0, a4, v6, 68, (unsigned int)"bbb");
        else
          CAuthSocket::Write(ebx0, edi0, a4, 11, (unsigned int)"bddd");
      }
      else
      {
        CPlayer::Write(ebx0, edi0, a4, v6, 68, (unsigned int)"bbb");
      }
    }
  }
  else
  {
    if ( a2 == 5 )
    {
      v12 = sub_497220(ebx0, edi0, a4, (char *)a3, (unsigned int)"b");
      CPlayer::MLMProcess(v6, ebx0, edi0, a4, v7, v12, (unsigned int)v12);
    }
  }
}

//----- (00465250) --------------------------------------------------------
void __usercall CPlayer::InitStat(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // edx@1
  void *v5; // eax@5
  int v6; // [sp+0h] [bp-14h]@1
  char v7; // [sp+4h] [bp-10h]@5
  char v8; // [sp+8h] [bp-Ch]@8
  int v9; // [sp+Ch] [bp-8h]@6
  char v10; // [sp+10h] [bp-4h]@4

  v6 = a1;
  if ( CPlayer::RemoveItem(a1, a2, a3, a4, 16, 361, 1) || CPlayer::RemoveItem(v6, a2, a3, a4, 16, 501, 1) )
  {
    CChar::CancelBuffPrty(v6, v4, a2, a3, a4, -225);
    memset((void *)(v6 + 64), 0, 0x1Cu);
    memset((void *)(v6 + 92), 0, 0x60u);
    memset((void *)(v6 + 188), 0, 0x54u);
    memcpy((void *)(v6 + 64), (char *)&unk_4D6A28 + 28 * *(_DWORD *)(v6 + 460), 0x14u);
    *(_DWORD *)(v6 + 544) = 0;
    *(_DWORD *)(v6 + 620) = 0;
    *(_DWORD *)(v6 + 616) = 0;
    *(_DWORD *)(v6 + 612) = 0;
    *(_DWORD *)(v6 + 608) = 0;
    *(_DWORD *)(v6 + 604) = 0;
    *(_DWORD *)(v6 + 600) = 0;
    *(_DWORD *)(v6 + 596) = 0;
    CChar::ResetAllBuff(v6, v6, a2, a3, a4);
    (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 84))(v6);
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v6 + 1020), a2, a3, a4);
    sub_40F070(v6 + 1068, &v10);
    while ( 1 )
    {
      v5 = sub_430C20(v6 + 1068, &v7);
      if ( !(unsigned __int8)sub_47D070(v5) )
        break;
      v9 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
      if ( CItem::IsState(v9, 1) )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 104))(v9, v6);
      sub_446090((int *)&v10, (int)&v8, 0);
    }
    CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
    sub_47FC00((void *)(v6 + 624));
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v6 + 88))(v6, 23, 1, 5 * *(_DWORD *)(v6 + 60));
    *(_DWORD *)(v6 + 276) = CChar::GetMaxMP(v6);
    *(_DWORD *)(v6 + 272) = CChar::GetMaxHP(v6);
    CChar::GetResist((void *)v6, 4);
    CChar::GetResist((void *)v6, 3);
    CChar::GetResist((void *)v6, 2);
    CChar::GetResist((void *)v6, 1);
    CChar::GetResist((void *)v6, 0);
    CChar::GetMaxMagic(v6);
    CChar::GetMinMagic(v6);
    CChar::GetMaxAttack(v6);
    CChar::GetMinAttack(v6);
    CChar::GetAbsorb(v6);
    CChar::GetDefense((void *)v6, 0);
    CChar::GetDodge(v6);
    CChar::GetHit(v6);
    CChar::GetDex(v6);
    CChar::GetWis(v6);
    CChar::GetInt(v6);
    CChar::GetHth(v6);
    CChar::GetStr(v6);
    CPlayer::Write(a2, a3, a4, v6, 66, (unsigned int)"bsbwbbbbbwwwwwwwbIwwwwwwbbbbbd");
    CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
    CPlayer::SaveAllProperty(v6, a2, a3, a4, 0);
  }
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BE60: using guessed type int __thiscall CChar::GetHth(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004655B0) --------------------------------------------------------
int __thiscall CPlayer::EventInsert(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(a2 + 12) = *(_DWORD *)(this + 1300);
  result = this;
  *(_DWORD *)(this + 1300) = a2;
  return result;
}

//----- (004655E0) --------------------------------------------------------
void *__thiscall CPlayer::EventRemoveAll(void *this)
{
  void *result; // eax@2
  int v2; // ST0C_4@3
  void *v3; // [sp+0h] [bp-Ch]@1

  v3 = this;
  while ( 1 )
  {
    result = v3;
    if ( !*((_DWORD *)v3 + 325) )
      break;
    v2 = *((_DWORD *)v3 + 325);
    *((_DWORD *)v3 + 325) = *(_DWORD *)(v2 + 12);
    sub_401020(v2);
  }
  return result;
}

//----- (00465630) --------------------------------------------------------
bool __thiscall CPlayer::EventIsMoraTime(int this)
{
  int v2; // [sp+0h] [bp-10h]@7
  int v3; // [sp+4h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-8h]@6
  int i; // [sp+Ch] [bp-4h]@1

  v3 = this;
  for ( i = *(_DWORD *)(this + 1300); i; i = *(_DWORD *)(i + 12) )
  {
    if ( !*(_DWORD *)(i + 4) )
      return GetTickCount() - *(_DWORD *)(i + 8) >= 0x36EE80;
  }
  v4 = (int)sub_401000(0x10u);
  if ( v4 )
    v2 = sub_457E30(v4);
  else
    v2 = 0;
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = GetTickCount() - 3600000;
  CPlayer::EventInsert(v3, v2);
  return 1;
}

//----- (004656E0) --------------------------------------------------------
unsigned int __userpurge CPlayer::EventSetMora<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // edx@21
  int v7; // [sp+4h] [bp-24h]@1
  int v8; // [sp+8h] [bp-20h]@21
  int v9; // [sp+Ch] [bp-1Ch]@17
  int v10; // [sp+10h] [bp-18h]@4
  signed int v11; // [sp+14h] [bp-14h]@4
  int v12; // [sp+18h] [bp-10h]@4
  signed int v13; // [sp+1Ch] [bp-Ch]@4
  int i; // [sp+20h] [bp-8h]@1
  unsigned int v15; // [sp+24h] [bp-4h]@15

  v7 = a1;
  for ( i = *(_DWORD *)(a1 + 1300); ; i = *(_DWORD *)(i + 12) )
  {
    if ( !i )
      return 0;
    if ( !*(_DWORD *)(i + 4) )
      break;
  }
  v10 = 0;
  v11 = 0;
  v13 = 0;
  v12 = 0;
  *(_DWORD *)i = a5 | *(_DWORD *)i & 0xFFFF0000;
  if ( a5 == 1 )
  {
    *(_DWORD *)i += 65536;
    if ( (*(_DWORD *)i & 0xFFFF0000u) >> 16 >= 5 )
    {
      v10 = 5000;
      v13 = 274;
      v11 = 1;
      v12 = 1;
    }
  }
  else
  {
    if ( a5 == 3 )
    {
      switch ( (*(_DWORD *)i & 0xFFFF0000u) >> 16 )
      {
        case 1u:
          v10 = 200;
          break;
        case 2u:
          v10 = 500;
          break;
        case 3u:
          v10 = 1000;
          break;
        case 4u:
          v10 = 2000;
          v13 = 273;
          v12 = 1;
          break;
        default:
          break;
      }
      v11 = 1;
    }
  }
  v15 = (*(_DWORD *)i & 0xFFFF0000u) >> 16;
  if ( v11 )
  {
    *(_DWORD *)(i + 8) = GetTickCount();
    *(_DWORD *)i = 0;
    if ( v10 )
    {
      v9 = CItem::CreateItem(31, 0, v10, -1);
      if ( v9 )
      {
        if ( !CPlayer::InsertItem(v7, v9, a2, a3, a4, 24, v9) )
        {
          sub_4328C0("CPlayer::EventSetMora() Fail to insert money(%d).", v10);
          CBase::Delete((void *)v9);
        }
      }
    }
    if ( v13 )
    {
      v8 = CItem::CreateItem(v13, 0, v12, -1);
      if ( v8 )
      {
        if ( CPlayer::InsertItem(v7, v5, a2, a3, a4, 2, v8) != 1 )
          CBase::Delete((void *)v8);
      }
    }
  }
  return v15;
}

//----- (004658E0) --------------------------------------------------------
void __usercall CPlayer::EventSaveDB(int a1<ecx>, DWORD a2<ebx>, DWORD a3<esi>)
{
  int v3; // eax@3
  int v4; // [sp+8h] [bp-1010h]@1
  int v5; // [sp+Ch] [bp-100Ch]@1
  char v6; // [sp+10h] [bp-1008h]@1
  char v7; // [sp+11h] [bp-1007h]@1
  __int16 v8; // [sp+100Dh] [bp-Bh]@1
  char v9; // [sp+100Fh] [bp-9h]@1
  int v10; // [sp+1010h] [bp-8h]@1
  int v11; // [sp+1014h] [bp-4h]@1

  v10 = dword_4D9830;
  v6 = 0;
  memset(&v7, 0, 0xFFCu);
  v8 = 0;
  v9 = 0;
  v5 = (int)&v6;
  v11 = 0;
  v4 = *(_DWORD *)(a1 + 1300);
  while ( v4 )
  {
    v3 = sub_4189A0(v5, *(_BYTE *)(v4 + 4));
    v5 = sub_44F9B0(v3, *(_DWORD *)(v4 + 8));
    v4 = *(_DWORD *)(v4 + 12);
    ++v11;
  }
  if ( v11 )
    CDBSocket::Write(a2, (DWORD)&v10, a3, 37, (unsigned int)"dbm");
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004659F0) --------------------------------------------------------
void __userpurge CPlayer::MLMProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // edx@62
  int v8; // ST24_4@83
  int v9; // eax@83
  int v10; // ST24_4@91
  int v11; // eax@91
  int v12; // eax@98
  int v13; // eax@98
  int v14; // [sp+0h] [bp-CCh]@116
  int v15; // [sp+4h] [bp-C8h]@56
  int v16; // [sp+8h] [bp-C4h]@51
  int v17; // [sp+Ch] [bp-C0h]@43
  int v18; // [sp+10h] [bp-BCh]@35
  int v19; // [sp+14h] [bp-B8h]@31
  int v20; // [sp+1Ch] [bp-B0h]@1
  int v21; // [sp+20h] [bp-ACh]@55
  int v22; // [sp+24h] [bp-A8h]@50
  int v23; // [sp+28h] [bp-A4h]@42
  int v24; // [sp+2Ch] [bp-A0h]@34
  int v25; // [sp+30h] [bp-9Ch]@30
  int v26; // [sp+3Ch] [bp-90h]@115
  char v27; // [sp+43h] [bp-89h]@114
  int v28; // [sp+44h] [bp-88h]@114
  int v29; // [sp+48h] [bp-84h]@110
  int v30; // [sp+4Ch] [bp-80h]@110
  int v31; // [sp+50h] [bp-7Ch]@101
  int v32; // [sp+54h] [bp-78h]@101
  unsigned __int8 v33; // [sp+5Ah] [bp-72h]@100
  char v34; // [sp+5Bh] [bp-71h]@105
  void *v35; // [sp+5Ch] [bp-70h]@96
  int v36; // [sp+60h] [bp-6Ch]@96
  int v37; // [sp+64h] [bp-68h]@96
  int v38; // [sp+68h] [bp-64h]@96
  void *v39; // [sp+6Ch] [bp-60h]@96
  int v40; // [sp+70h] [bp-5Ch]@92
  int v41; // [sp+74h] [bp-58h]@87
  int v42; // [sp+78h] [bp-54h]@89
  int v43; // [sp+7Ch] [bp-50h]@87
  int v44; // [sp+80h] [bp-4Ch]@84
  int v45; // [sp+84h] [bp-48h]@81
  int v46; // [sp+88h] [bp-44h]@73
  int k; // [sp+8Ch] [bp-40h]@69
  int v48; // [sp+90h] [bp-3Ch]@62
  int j; // [sp+94h] [bp-38h]@60
  int v50; // [sp+98h] [bp-34h]@55
  int v51; // [sp+9Ch] [bp-30h]@47
  int v52; // [sp+A0h] [bp-2Ch]@33
  int i; // [sp+A4h] [bp-28h]@29
  void *v54; // [sp+A8h] [bp-24h]@37
  int v55; // [sp+ACh] [bp-20h]@22
  unsigned __int8 v56; // [sp+B3h] [bp-19h]@23
  int v57; // [sp+B4h] [bp-18h]@22
  int v58; // [sp+B8h] [bp-14h]@16
  char v59; // [sp+BFh] [bp-Dh]@18
  int v60; // [sp+C0h] [bp-Ch]@16
  int v61; // [sp+C4h] [bp-8h]@6
  int v62; // [sp+C8h] [bp-4h]@6

  v20 = a1;
  switch ( a5 )
  {
    case 0:
      if ( *(_DWORD *)(a1 + 60) <= 15 )
      {
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
        if ( CPlayer::_MLMFind(v20, 2, 0) )
        {
          CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
          CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbb");
        }
        else
        {
          CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
          sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
          v61 = CPlayer::FindPlayer(a2, a3, a4, v62);
          if ( v61 )
          {
            if ( *(_DWORD *)(v61 + 60) < 16 )
            {
              CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbb");
            }
            else
            {
              if ( CPlayer::MLMPupilNum(v61, a2, a3, a4) < 20 )
              {
                std___Mpunct_wchar_t___do_frac_digits(v61);
                CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
              }
              else
              {
                CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbb");
              }
            }
            sub_4239C0(v61, a2, a3, a4, v61 + 352);
          }
          else
          {
            CPlayer::Write(a2, a3, a4, v20, 67, (unsigned int)"b");
          }
        }
      }
      else
      {
        CPlayer::Write(a2, a3, a4, a1, 68, (unsigned int)"bbb");
      }
      break;
    case 1:
      sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"db");
      v60 = sub_450810(a2, a3, a4, v58);
      if ( v60 )
      {
        if ( v59 )
        {
          std___Mpunct_wchar_t___do_frac_digits(v60);
          CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v60, 68, (unsigned int)"bbb");
        }
        sub_4239C0(v60, a2, a3, a4, v60 + 352);
      }
      break;
    case 2:
      sub_497220(a2, a3, a4, a6, (unsigned int)"bd");
      v57 = sub_450810(a2, a3, a4, v55);
      if ( v57 )
      {
        if ( v56 )
        {
          sub_466B20(a2, a3, a4, v20, v57);
          if ( CPlayer::_MLMFind(v20, 2, 0) )
          {
            sub_466B70(a2, a3, a4, v20, v57);
            CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
            return;
          }
          i = CPlayer::_MLMFind(v57, 2, 0);
          if ( i )
          {
            v25 = (int)sub_401000(0x30u);
            if ( v25 )
              v19 = sub_466AB0(
                      v25,
                      1,
                      *(_DWORD *)(i + 4),
                      (const void *)(i + 8),
                      *(_DWORD *)(i + 28),
                      *(_DWORD *)(i + 32),
                      0,
                      *(_DWORD *)(i + 40));
            else
              v19 = 0;
            v52 = v19;
            CPlayer::_MLMInsert((void *)v20, v19);
            CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbddbsbb");
          }
          v24 = (int)sub_401000(0x30u);
          if ( v24 )
            v18 = sub_466AB0(
                    v24,
                    2,
                    *(_DWORD *)(v57 + 452),
                    (const void *)(v57 + 32),
                    *(_DWORD *)(v57 + 460),
                    *(_DWORD *)(v57 + 60),
                    1,
                    *(_DWORD *)(v57 + 448));
          else
            v18 = 0;
          v52 = v18;
          CPlayer::_MLMInsert((void *)v20, v18);
          CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbddbsbb");
          v54 = 0;
          for ( i = CPlayer::_MLMFind(v57, 4, 0); i && *(_DWORD *)i == 4; i = *(_DWORD *)(i + 44) )
          {
            v23 = (int)sub_401000(0x30u);
            if ( v23 )
              v17 = sub_466AB0(
                      v23,
                      3,
                      *(_DWORD *)(i + 4),
                      (const void *)(i + 8),
                      *(_DWORD *)(i + 28),
                      *(_DWORD *)(i + 32),
                      *(_DWORD *)(i + 36),
                      *(_DWORD *)(i + 40));
            else
              v17 = 0;
            v52 = v17;
            CPlayer::_MLMInsert((void *)v20, v17);
            CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbddbsbb");
            CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbddbsbb");
            if ( *(_DWORD *)(i + 36) )
            {
              v51 = CPlayer::ScanPlayer(a2, a3, a4, *(_DWORD *)(i + 4));
              if ( v51 )
              {
                v54 = CBaseList::Push((int)v54, a2, a3, a4, v51);
                sub_4239C0(v51, a2, a3, a4, v51 + 352);
              }
            }
          }
          v22 = (int)sub_401000(0x30u);
          if ( v22 )
            v16 = sub_466AB0(
                    v22,
                    4,
                    *(_DWORD *)(v20 + 452),
                    (const void *)(v20 + 32),
                    *(_DWORD *)(v20 + 460),
                    *(_DWORD *)(v20 + 60),
                    1,
                    *(_DWORD *)(v20 + 448));
          else
            v16 = 0;
          v52 = v16;
          CPlayer::_MLMInsert((void *)v57, v16);
          CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbddbsbb");
          sub_466B70(a2, a3, a4, v20, v57);
          while ( v54 )
          {
            v50 = unknown_libname_7();
            v21 = (int)sub_401000(0x30u);
            if ( v21 )
              v15 = sub_466AB0(
                      v21,
                      3,
                      *(_DWORD *)(v20 + 452),
                      (const void *)(v20 + 32),
                      *(_DWORD *)(v20 + 460),
                      *(_DWORD *)(v20 + 60),
                      1,
                      *(_DWORD *)(v20 + 448));
            else
              v15 = 0;
            v52 = v15;
            CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v50 + 1308), a2, a3, a4);
            CPlayer::_MLMInsert((void *)v50, v15);
            CIOCriticalSection::Leave(v50 + 1308, a2, a3, a4);
            v54 = (void *)CBaseList::Pop((int)v54, a2, a3, a4);
          }
          if ( v56 == 1 )
          {
            for ( j = 0; j < 5; ++j )
            {
              v48 = CItem::CreateItem(*(int *)((char *)&dword_4D91D0[5 * *(_DWORD *)(v20 + 460)] + 4 * j), 0, 1, -1);
              if ( v48 )
              {
                if ( CPlayer::InsertItem(v20, v7, a2, a3, a4, 41, v48) != 1 )
                  CBase::Delete((void *)v48);
              }
            }
          }
          CPlayer::MLMPupilNum(v57, a2, a3, a4);
          CPlayer::Write(a2, a3, a4, v57, 68, (unsigned int)"bbbs");
          CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbbs");
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v57, 68, (unsigned int)"bbb");
          CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbb");
        }
        sub_4239C0(v57, a2, a3, a4, v57 + 352);
      }
      else
      {
        if ( v56 )
          CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
      }
      break;
    case 3:
      sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v20 + 1308), a2, a3, a4);
      for ( k = *(_DWORD *)(v20 + 1304);
            k && (*(_DWORD *)k != 2 && *(_DWORD *)k != 4 || *(_DWORD *)(k + 4) != v46);
            k = *(_DWORD *)(k + 44) )
        ;
      if ( k )
      {
        if ( *(_DWORD *)k == 2 )
        {
          if ( *(_DWORD *)(v20 + 60) >= 16 )
          {
            CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbbs");
            v45 = 0;
            CPlayer::_MLMGet(v20, a2, a3, a4, &v45, 3);
            CPlayer::_MLMDelete((void *)v20, 1, 0);
            CPlayer::_MLMDelete((void *)v20, 2, 0);
            CPlayer::_MLMDelete((void *)v20, 3, 0);
            CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
            while ( v45 )
            {
              v8 = *(_DWORD *)(v20 + 452);
              v9 = unknown_libname_7();
              CPlayer::MLMDelete(v9, a2, a3, a4, 3, v8);
              v45 = CBaseList::Pop(v45, a2, a3, a4);
            }
            CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"db");
            v44 = CPlayer::ScanPlayer(a2, a3, a4, v46);
            if ( v44 )
            {
              CPlayer::MLMDelete(v44, a2, a3, a4, 4, *(_DWORD *)(v20 + 452));
              CPlayer::Write(a2, a3, a4, v44, 68, (unsigned int)"bbbs");
              sub_4239C0(v44, a2, a3, a4, v44 + 352);
            }
            CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbd");
            CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
          }
          else
          {
            CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
            CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbb");
          }
        }
        else
        {
          v43 = 0;
          v41 = CPlayer::_MLMFind(v20, 4, v46);
          if ( v41 )
          {
            CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbbs");
            v43 = *(_DWORD *)(v41 + 40);
          }
          CPlayer::_MLMDelete((void *)v20, 4, v46);
          v42 = 0;
          CPlayer::_MLMGet(v20, a2, a3, a4, &v42, 4);
          CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
          CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbd");
          while ( v42 )
          {
            v10 = v46;
            v11 = unknown_libname_7();
            CPlayer::MLMDelete(v11, a2, a3, a4, 3, v10);
            v42 = CBaseList::Pop(v42, a2, a3, a4);
          }
          v40 = CPlayer::ScanPlayer(a2, a3, a4, v46);
          if ( v40 )
          {
            CPlayer::MLMDelete(v40, a2, a3, a4, 1, 0);
            CPlayer::MLMDelete(v40, a2, a3, a4, 2, 0);
            CPlayer::MLMDelete(v40, a2, a3, a4, 3, 0);
            CPlayer::Write(a2, a3, a4, v40, 68, (unsigned int)"bbbs");
            sub_4239C0(v40, a2, a3, a4, v40 + 352);
          }
          CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"db");
          CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
        }
      }
      else
      {
        CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
      }
      break;
    case 4:
      v39 = CIOBuffer::Alloc();
      v35 = v39;
      *((_BYTE *)v39 + 2) = 100;
      v36 = (int)((char *)v35 + 5);
      v38 = 0;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v20 + 1308), a2, a3, a4);
      v37 = *(_DWORD *)(v20 + 1304);
      while ( v37 )
      {
        v12 = sub_4189A0(v36, *(_BYTE *)v37);
        v36 = v12;
        v13 = sub_44F9B0(v12, *(_DWORD *)(v37 + 4));
        v36 = sub_497660(v13, v37 + 8);
        v36 = sub_4189A0(v36, *(_BYTE *)(v37 + 36));
        v36 = sub_4189A0(v36, *(_BYTE *)(v37 + 28));
        v36 = sub_4189A0(v36, *(_BYTE *)(v37 + 32));
        v37 = *(_DWORD *)(v37 + 44);
        ++v38;
      }
      CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
      sub_496F10(a2, a3, a4, (char *)v35 + 3, (unsigned int)"bb");
      *(_WORD *)v35 = v36 - (_WORD)v35;
      *((_DWORD *)v39 + 2000) = *(_WORD *)v35;
      CSocket::_CSocket(*(_DWORD *)(v20 + 1676), a2, a3, a4, (int)v39);
      break;
    case 5:
      sub_497220(a2, a3, a4, a6, (unsigned int)"bbd");
      if ( v33 == 1 )
      {
        v31 = sub_450810(a2, a3, a4, v32);
        if ( v31 )
        {
          CPlayer::Write(a2, a3, a4, v31, 100, (unsigned int)"bds");
          sub_4239C0(v31, a2, a3, a4, v31 + 352);
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v20, 67, (unsigned int)"b");
        }
      }
      else
      {
        if ( !(v34 & 4) )
          CPlayer::MLMPayMoney(v20, a2, a3, a4, 1);
      }
      break;
    case 6:
      sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
      if ( CPlayer::MLMPupilNum(v20, a2, a3, a4) > 0 )
      {
        v29 = 22;
        if ( sub_4977B0(v30) )
        {
          CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbs");
          v29 = 23;
        }
        CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bbb");
      }
      break;
    case 7:
      sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
      v28 = *(_DWORD *)(v20 + 452);
      if ( v27 )
      {
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v20 + 1308), a2, a3, a4);
        v26 = CPlayer::_MLMFind(v20, 2, 0);
        if ( v26 )
          v14 = *(_DWORD *)(v26 + 4);
        else
          v14 = 0;
        v28 = v14;
        CIOCriticalSection::Leave(v20 + 1308, a2, a3, a4);
      }
      if ( v28 )
        CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbbd");
      break;
    case 8:
      sub_497220(a2, a3, a4, a6, (unsigned int)"bs");
      CPlayer::Write(a2, a3, a4, v20, 100, (unsigned int)"bbs");
      break;
    default:
      return;
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 4D91D0: using guessed type int dword_4D91D0[];

//----- (00466AB0) --------------------------------------------------------
int __thiscall sub_466AB0(int this, int a2, int a3, const void *a4, int a5, int a6, int a7, int a8)
{
  int v9; // ST0C_4@1

  v9 = this;
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  memcpy((void *)(this + 8), a4, 0x11u);
  *(_DWORD *)(v9 + 28) = a5;
  *(_DWORD *)(v9 + 32) = a6;
  *(_DWORD *)(v9 + 36) = a7;
  *(_DWORD *)(v9 + 40) = a8;
  *(_DWORD *)(v9 + 44) = 0;
  return v9;
}

//----- (00466B20) --------------------------------------------------------
void *__usercall sub_466B20<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, unsigned int a4, unsigned int a5)
{
  void *result; // eax@2

  if ( a4 >= a5 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1308), a1, a2, a3);
    result = CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a4 + 1308), a1, a2, a3);
  }
  else
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a4 + 1308), a1, a2, a3);
    result = CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1308), a1, a2, a3);
  }
  return result;
}

//----- (00466B70) --------------------------------------------------------
void __usercall sub_466B70(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  CIOCriticalSection::Leave(a4 + 1308, a1, a2, a3);
  CIOCriticalSection::Leave(a5 + 1308, a1, a2, a3);
}

//----- (00466BA0) --------------------------------------------------------
void __userpurge CPlayer::MLMLoad(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@4

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
  CPlayer::_MLMInsert((void *)v5, a5);
  if ( *(_DWORD *)a5 != 2 && *(_DWORD *)a5 != 3 && *(_DWORD *)a5 != 4 )
  {
    if ( !*(_DWORD *)a5 )
    {
      if ( *(_DWORD *)(a5 + 4) > 20000000 )
        *(_DWORD *)(v5 + 1348) = 1;
    }
  }
  else
  {
    v6 = CPlayer::ScanPlayer(a2, a3, a4, *(_DWORD *)(a5 + 4));
    if ( v6 )
    {
      *(_DWORD *)(a5 + 36) = 1;
      CIOCriticalSection::Leave(v5 + 1308, a2, a3, a4);
      CPlayer::MLMUpdate(v6, a2, a3, a4, *(_DWORD *)(v5 + 452), 0, 1);
      sub_4239C0(v6, a2, a3, a4, v6 + 352);
      return;
    }
  }
  CIOCriticalSection::Leave(v5 + 1308, a2, a3, a4);
}

//----- (00466C70) --------------------------------------------------------
int __thiscall CPlayer::_MLMInsert(void *this, int a2)
{
  int result; // eax@4
  int i; // [sp+8h] [bp-8h]@1
  int v4; // [sp+Ch] [bp-4h]@2

  for ( i = (int)((char *)this + 1304); ; i = v4 + 44 )
  {
    v4 = *(_DWORD *)i;
    if ( !*(_DWORD *)i )
      break;
    if ( *(_DWORD *)v4 >= *(_DWORD *)a2 )
      break;
  }
  result = a2;
  *(_DWORD *)i = a2;
  *(_DWORD *)(a2 + 44) = v4;
  return result;
}

//----- (00466CD0) --------------------------------------------------------
void __userpurge CPlayer::MLMDelete(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // ST08_4@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
  CPlayer::_MLMDelete((void *)v6, a5, a6);
  CIOCriticalSection::Leave(v6 + 1308, a2, a3, a4);
}

//----- (00466D10) --------------------------------------------------------
void __thiscall CPlayer::_MLMDelete(void *this, int a2, int a3)
{
  int v3; // [sp+8h] [bp-8h]@3
  int v4; // [sp+Ch] [bp-4h]@4

  if ( a2 )
  {
    v3 = (int)((char *)this + 1304);
    while ( 1 )
    {
      v4 = *(_DWORD *)v3;
      if ( !*(_DWORD *)v3 )
        break;
      if ( *(_DWORD *)v4 != a2 || a3 && *(_DWORD *)(v4 + 4) != a3 )
      {
        v3 = v4 + 44;
      }
      else
      {
        *(_DWORD *)v3 = *(_DWORD *)(v4 + 44);
        sub_401020(v4);
        if ( a2 != 3 || a3 )
          return;
      }
    }
  }
}

//----- (00466DA0) --------------------------------------------------------
void __usercall CPlayer::MLMDeleteAll(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST1C_4@8
  int v5; // [sp+0h] [bp-14h]@1
  int v6; // [sp+8h] [bp-Ch]@6
  int v7; // [sp+Ch] [bp-8h]@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
  v7 = *(_DWORD *)(v5 + 1304);
  *(_DWORD *)(v5 + 1304) = 0;
  CIOCriticalSection::Leave(v5 + 1308, a2, a3, a4);
  while ( v7 )
  {
    if ( *(_DWORD *)v7 == 2 || *(_DWORD *)v7 == 3 || *(_DWORD *)v7 == 4 )
    {
      v6 = CPlayer::ScanPlayer(a2, a3, a4, *(_DWORD *)(v7 + 4));
      if ( v6 )
      {
        CPlayer::MLMUpdate(v6, a2, a3, a4, *(_DWORD *)(v5 + 452), 0, 0);
        sub_4239C0(v6, a2, a3, a4, v6 + 352);
      }
    }
    v4 = v7;
    v7 = *(_DWORD *)(v7 + 44);
    sub_401020(v4);
  }
}

//----- (00466E70) --------------------------------------------------------
void __userpurge CPlayer::MLMUpdate(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // [sp+0h] [bp-8h]@1
  int i; // [sp+4h] [bp-4h]@1

  v7 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
  for ( i = *(_DWORD *)(v7 + 1304); i && (!*(_DWORD *)i || *(_DWORD *)(i + 4) != a5); i = *(_DWORD *)(i + 44) )
    ;
  if ( i )
  {
    if ( a6 )
    {
      if ( a6 == 1 )
        *(_DWORD *)(i + 32) = a7;
    }
    else
    {
      *(_DWORD *)(i + 36) = a7;
      if ( a7 )
        CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bbs");
    }
  }
  CIOCriticalSection::Leave(v7 + 1308, a2, a3, a4);
}

//----- (00466F20) --------------------------------------------------------
int __thiscall CPlayer::_MLMFind(int this, int a2, int a3)
{
  int i; // [sp+4h] [bp-4h]@1

  for ( i = *(_DWORD *)(this + 1304); i && *(_DWORD *)i <= a2; i = *(_DWORD *)(i + 44) )
  {
    if ( *(_DWORD *)i == a2 && (!a3 || *(_DWORD *)(i + 4) == a3) )
      return i;
  }
  return 0;
}

//----- (00466F80) --------------------------------------------------------
int __userpurge CPlayer::_MLMGet<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int *a5, int a6)
{
  int result; // eax@1
  int v7; // [sp+4h] [bp-8h]@8
  int i; // [sp+8h] [bp-4h]@1

  result = CPlayer::_MLMFind(a1, a6, 0);
  for ( i = result; i; i = *(_DWORD *)(i + 44) )
  {
    result = i;
    if ( *(_DWORD *)i != a6 )
      break;
    if ( *(_DWORD *)(i + 36) )
    {
      result = CPlayer::ScanPlayer(a2, a3, a4, *(_DWORD *)(i + 4));
      v7 = result;
      if ( result )
      {
        *a5 = (int)CBaseList::Push(*a5, a2, a3, a4, result);
        result = sub_4239C0(v7, a2, a3, a4, v7 + 352);
      }
    }
  }
  return result;
}

//----- (00467010) --------------------------------------------------------
int __usercall CPlayer::MLMPupilNum<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-Ch]@1
  int i; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v5 = a1;
  v7 = 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
  for ( i = *(_DWORD *)(v5 + 1304); i; i = *(_DWORD *)(i + 44) )
  {
    if ( *(_DWORD *)i == 4 )
      ++v7;
  }
  CIOCriticalSection::Leave(v5 + 1308, a2, a3, a4);
  return v7;
}

//----- (00467080) --------------------------------------------------------
void __userpurge CPlayer::MLMPayMoney(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-44h]@22
  int v6; // [sp+4h] [bp-40h]@19
  int v7; // [sp+8h] [bp-3Ch]@1
  int v8; // [sp+Ch] [bp-38h]@32
  int v9; // [sp+10h] [bp-34h]@34
  int v10; // [sp+14h] [bp-30h]@32
  int v11; // [sp+18h] [bp-2Ch]@32
  int v12; // [sp+1Ch] [bp-28h]@31
  int v13; // [sp+24h] [bp-20h]@24
  int v14; // [sp+2Ch] [bp-18h]@15
  signed int j; // [sp+30h] [bp-14h]@10
  int i; // [sp+34h] [bp-10h]@4
  int v17; // [sp+38h] [bp-Ch]@3
  int v18; // [sp+3Ch] [bp-8h]@3
  int v19; // [sp+40h] [bp-4h]@3

  v7 = a1;
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
      v12 = CPlayer::_MLMFind(v7, 2, 0);
      if ( v12 )
      {
        v10 = *(_DWORD *)(v12 + 4);
        v11 = *(_DWORD *)(v12 + 40);
        CIOCriticalSection::Leave(v7 + 1308, a2, a3, a4);
        v8 = CItem::CreateItem(31, 0, (((*(_DWORD *)(v7 + 60) != 16) - 1) & 0xFFFF8AD0) + 50000, -1);
        if ( v8 )
        {
          (*(void (__thiscall **)(int, signed int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v8 + 160))(
            v8,
            40,
            *(_DWORD *)(v7 + 448),
            0,
            0);
          (*(void (__thiscall **)(int, signed int, int, _DWORD, _DWORD))(*(_DWORD *)v8 + 160))(v8, 40, v11, 0, 0);
          CBase::Delete((void *)v8);
        }
        CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bbb");
        v9 = CPlayer::ScanPlayer(a2, a3, a4, v10);
        if ( v9 )
        {
          CPlayer::Write(a2, a3, a4, v9, 68, (unsigned int)"bbbs");
          sub_4239C0(v9, a2, a3, a4, v9 + 352);
        }
      }
      else
      {
        CIOCriticalSection::Leave(v7 + 1308, a2, a3, a4);
      }
    }
    else
    {
      if ( *(_DWORD *)(a1 + 60) == 16 || *(_DWORD *)(a1 + 60) == 30 )
        CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
    }
  }
  else
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
    if ( *(_DWORD *)(v7 + 1340) < 100 )
    {
      CIOCriticalSection::Leave(v7 + 1020, a2, a3, a4);
    }
    else
    {
      v17 = *(_DWORD *)(v7 + 1340);
      *(_DWORD *)(v7 + 1340) = 0;
      CIOCriticalSection::Leave(v7 + 1020, a2, a3, a4);
      v18 = 0;
      v19 = 0;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v7 + 1308), a2, a3, a4);
      if ( *(_DWORD *)(v7 + 1304) )
      {
        for ( i = *(_DWORD *)(v7 + 1304); i && (*(_DWORD *)i == 1 || *(_DWORD *)i == 2); i = *(_DWORD *)(i + 44) )
          *(&v17 + *(_DWORD *)i) = *(_DWORD *)(i + 4);
      }
      CIOCriticalSection::Leave(v7 + 1308, a2, a3, a4);
      for ( j = 0; j < 2; ++j )
      {
        if ( *(&v18 + j) )
        {
          v14 = CPlayer::ScanPlayer(a2, a3, a4, *(&v18 + j));
          if ( v14 )
          {
            if ( !*(_DWORD *)(v14 + 1348) )
            {
              if ( (*(_DWORD *)(v7 + 60) - 1) / 10 <= 3 )
                v6 = (*(_DWORD *)(v7 + 60) - 1) / 10;
              else
                v6 = 3;
              if ( *(int *)((char *)&dword_4D66BC[3 * v6] + 4 * j) * v17 / 100 >= dword_4D66C4[3 * v6] )
                v5 = dword_4D66C4[3 * v6];
              else
                v5 = *(int *)((char *)&dword_4D66BC[3 * v6] + 4 * j) * v17 / 100;
              v13 = CItem::CreateItem(31, 0, v5, -1);
              *(_DWORD *)(v13 + 80) = 2;
              if ( CPlayer::InsertItem(v14, v13, a2, a3, a4, 41, v13) != 1 )
                CBase::Delete((void *)v13);
            }
            sub_4239C0(v14, a2, a3, a4, v14 + 352);
          }
        }
      }
    }
  }
}
// 4D66BC: using guessed type int dword_4D66BC[];
// 4D66C4: using guessed type int dword_4D66C4[];

//----- (00467400) --------------------------------------------------------
void __userpurge CPlayer::MLMAccumFee(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-10h]@6
  int v6; // [sp+4h] [bp-Ch]@1
  int v7; // [sp+8h] [bp-8h]@5
  int v8; // [sp+Ch] [bp-4h]@1

  v6 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
  v8 = CPlayer::_MLMFind(v6, 0, 0);
  if ( v8 )
  {
    *(_DWORD *)(v8 + 4) += a5;
    if ( *(_DWORD *)(v8 + 4) > 20000000 )
      *(_DWORD *)(v6 + 1348) = 1;
  }
  else
  {
    v7 = (int)sub_401000(0x30u);
    if ( v7 )
      v5 = sub_466AB0(v7, 0, a5, &byte_4B437D, 0, 0, 0, 0);
    else
      v5 = 0;
    CPlayer::_MLMInsert((void *)v6, v5);
  }
  CIOCriticalSection::Leave(v6 + 1308, a2, a3, a4);
  CDBSocket::Write(a2, a3, a4, 66, (unsigned int)"dbd");
}

//----- (004674D0) --------------------------------------------------------
void __usercall CPlayer::MLMLevelUp(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST08_4@11
  int v5; // ST00_4@11
  int v6; // eax@11
  int v7; // [sp+0h] [bp-10h]@1
  int v8; // [sp+4h] [bp-Ch]@6
  void *v9; // [sp+8h] [bp-8h]@1
  int i; // [sp+Ch] [bp-4h]@1

  v7 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1308), a2, a3, a4);
  v9 = 0;
  for ( i = *(_DWORD *)(v7 + 1304); i; i = *(_DWORD *)(i + 44) )
  {
    if ( *(_DWORD *)i == 2 || *(_DWORD *)i == 3 || *(_DWORD *)i == 4 )
    {
      v8 = CPlayer::ScanPlayer(a2, a3, a4, *(_DWORD *)(i + 4));
      if ( v8 )
      {
        v9 = CBaseList::Push((int)v9, a2, a3, a4, v8);
        sub_4239C0(v8, a2, a3, a4, v8 + 352);
      }
    }
  }
  CIOCriticalSection::Leave(v7 + 1308, a2, a3, a4);
  while ( v9 )
  {
    v4 = *(_DWORD *)(v7 + 60);
    v5 = *(_DWORD *)(v7 + 452);
    v6 = unknown_libname_7();
    CPlayer::MLMUpdate(v6, a2, a3, a4, v5, 1, v4);
    v9 = (void *)CBaseList::Pop((int)v9, a2, a3, a4);
  }
}

//----- (004675B0) --------------------------------------------------------
void __userpurge CPlayer::FRDProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  void *v7; // eax@8
  int v8; // eax@9
  void *v9; // eax@19
  void *v10; // eax@30
  int v11; // eax@31
  int v12; // eax@42
  int v13; // eax@43
  void *v14; // eax@51
  int v15; // eax@52
  int v16; // eax@54
  int v17; // eax@54
  int v18; // [sp+8h] [bp-564h]@1
  char v19; // [sp+Ch] [bp-560h]@51
  char v20; // [sp+10h] [bp-55Ch]@43
  char v21; // [sp+30h] [bp-53Ch]@31
  char v22; // [sp+38h] [bp-534h]@31
  char v23; // [sp+58h] [bp-514h]@30
  char v24; // [sp+5Ch] [bp-510h]@19
  char v25; // [sp+60h] [bp-50Ch]@9
  char v26; // [sp+68h] [bp-504h]@9
  char v27; // [sp+88h] [bp-4E4h]@8
  int v28; // [sp+8Ch] [bp-4E0h]@52
  void *v29; // [sp+90h] [bp-4DCh]@50
  int v30; // [sp+94h] [bp-4D8h]@50
  int v31; // [sp+98h] [bp-4D4h]@50
  void *v32; // [sp+9Ch] [bp-4D0h]@50
  char v33; // [sp+A0h] [bp-4CCh]@50
  char v34; // [sp+A4h] [bp-4C8h]@43
  char v35; // [sp+A8h] [bp-4C4h]@43
  char v36[4]; // [sp+ACh] [bp-4C0h]@42
  char v37; // [sp+B0h] [bp-4BCh]@42
  char v38; // [sp+C0h] [bp-4ACh]@42
  int j; // [sp+C8h] [bp-4A4h]@40
  char v40; // [sp+CCh] [bp-4A0h]@39
  void *v41; // [sp+E0h] [bp-48Ch]@40
  unsigned __int8 v42; // [sp+E7h] [bp-485h]@36
  int v43; // [sp+E8h] [bp-484h]@40
  void *v44; // [sp+ECh] [bp-480h]@40
  int v45; // [sp+F0h] [bp-47Ch]@31
  int v46; // [sp+F4h] [bp-478h]@31
  int v47; // [sp+10Ch] [bp-460h]@32
  void *v48; // [sp+110h] [bp-45Ch]@31
  int v49; // [sp+114h] [bp-458h]@26
  char v50; // [sp+118h] [bp-454h]@30
  char v51; // [sp+11Ch] [bp-450h]@19
  int i; // [sp+120h] [bp-44Ch]@17
  void *v53; // [sp+124h] [bp-448h]@17
  unsigned __int8 v54; // [sp+12Bh] [bp-441h]@17
  int v55; // [sp+12Ch] [bp-440h]@19
  unsigned __int8 v56; // [sp+133h] [bp-439h]@14
  char v57; // [sp+134h] [bp-438h]@17
  char v58; // [sp+135h] [bp-437h]@17
  __int16 v59; // [sp+531h] [bp-3Bh]@17
  char v60; // [sp+533h] [bp-39h]@17
  char *v61; // [sp+534h] [bp-38h]@17
  void *v62; // [sp+538h] [bp-34h]@17
  char *v63; // [sp+53Ch] [bp-30h]@17
  int v64; // [sp+540h] [bp-2Ch]@9
  int v65; // [sp+55Ch] [bp-10h]@1
  char v66; // [sp+560h] [bp-Ch]@8
  int v67; // [sp+564h] [bp-8h]@5
  char *v68; // [sp+568h] [bp-4h]@2
  char *v69; // [sp+578h] [bp+Ch]@14
  char *v70; // [sp+578h] [bp+Ch]@36

  v65 = dword_4D9830;
  v18 = a1;
  switch ( a5 )
  {
    case 0:
      sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
      if ( sub_497B80((int *)v68) )
      {
        if ( strcmp((const char *)(v18 + 32), v68) )
        {
          v67 = CPlayer::FindPlayer(a2, a3, a4, (char)v68);
          if ( v67 )
          {
            CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v18 + 1364), a2, a3, a4);
            if ( (unsigned int)unknown_libname_10() < 0x1E )
            {
              sub_433170(v18 + 1352, (int)&v66, v67 + 452);
              v7 = sub_430C20(v18 + 1352, &v27);
              if ( (unsigned __int8)unknown_libname_8(v7) )
              {
                sub_468240((int)&v64, *(_DWORD *)(v67 + 452), (const void *)(v67 + 32), 1);
                v8 = sub_4728F0((int)&v26, (int)&v64, &v64);
                sub_470890(v18 + 1352, (int)&v25, v8);
                CDBSocket::Write(a2, a3, a4, 29, (unsigned int)"dbds");
                CPlayer::Write(a2, a3, a4, v18, 18, (unsigned int)"bdsb");
              }
              else
              {
                CPlayer::Write(a2, a3, a4, v18, 68, (unsigned int)"bbs");
              }
              CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
              sub_4239C0(v67, a2, a3, a4, v67 + 352);
            }
            else
            {
              CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
              CPlayer::Write(a2, a3, a4, v18, 68, (unsigned int)"bbs");
              sub_4239C0(v67, a2, a3, a4, v67 + 352);
            }
          }
          else
          {
            CDBSocket::Write(a2, a3, a4, 29, (unsigned int)"dbs");
          }
        }
      }
      break;
    case 1:
      v69 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
      if ( v56 )
      {
        if ( (signed int)v56 <= 30 )
        {
          v62 = CIOBuffer::Alloc();
          v53 = v62;
          *((_BYTE *)v62 + 2) = 18;
          v61 = (char *)v53 + 5;
          v57 = 0;
          memset(&v58, 0, 0x3FCu);
          v59 = 0;
          v60 = 0;
          v63 = &v57;
          v54 = 0;
          CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v18 + 1364), a2, (DWORD)&v61, a4);
          for ( i = 0; i < v56; ++i )
          {
            v69 = sub_4975F0(a2, (DWORD)&v61, a4, v69, a7, (unsigned int)"d");
            sub_433170(v18 + 1352, (int)&v51, (int)&v55);
            v9 = sub_430C20(v18 + 1352, &v24);
            if ( (unsigned __int8)sub_47D070(v9) )
            {
              ++v54;
              v61 = (char *)sub_44F9B0(v61, v55);
              v63 = (char *)sub_44F9B0(v63, v55);
              sub_471920(v18 + 1352, (int)&v55);
            }
          }
          CIOCriticalSection::Leave(v18 + 1364, a2, (DWORD)&v61, a4);
          if ( (signed int)v54 <= 0 )
          {
            CIOBuffer::Release((int)v62);
          }
          else
          {
            CDBSocket::Write(a2, (DWORD)&v61, a4, 29, (unsigned int)"dbbm");
            sub_496F10(a2, (DWORD)&v61, a4, (char *)v53 + 3, (unsigned int)"bb");
            *(_WORD *)v53 = (_WORD)v61 - (_WORD)v53;
            *((_DWORD *)v62 + 2000) = *(_WORD *)v53;
            CSocket::_CSocket(*(_DWORD *)(v18 + 1676), a2, (DWORD)&v61, a4, (int)v62);
          }
        }
      }
      break;
    case 2:
      sub_497220(a2, a3, a4, a6, (unsigned int)"ds");
      if ( v49 )
      {
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v18 + 1364), a2, a3, a4);
        if ( (unsigned int)unknown_libname_10() < 0x1E )
        {
          sub_433170(v18 + 1352, (int)&v50, (int)&v49);
          v10 = sub_430C20(v18 + 1352, &v23);
          if ( (unsigned __int8)unknown_libname_8(v10) )
          {
            sub_468240((int)&v46, v49, v48, 0);
            v11 = sub_4728F0((int)&v22, (int)&v46, &v46);
            sub_470890(v18 + 1352, (int)&v21, v11);
            CDBSocket::Write(a2, a3, a4, 29, (unsigned int)"dbds");
            v45 = CPlayer::FindPlayer(a2, a3, a4, (char)v48);
            if ( v45 )
            {
              sub_4239C0(v45, a2, a3, a4, v45 + 352);
              v47 = 1;
            }
            CPlayer::Write(a2, a3, a4, v18, 18, (unsigned int)"bdsb");
          }
          else
          {
            CPlayer::Write(a2, a3, a4, v18, 68, (unsigned int)"bbs");
          }
          CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
        }
        else
        {
          CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
          CPlayer::Write(a2, a3, a4, v18, 68, (unsigned int)"bbs");
        }
      }
      else
      {
        CPlayer::Write(a2, a3, a4, v18, 68, (unsigned int)"bbs");
      }
      break;
    case 3:
      v70 = sub_497220(a2, a3, a4, a6, (unsigned int)"b");
      if ( (signed int)v42 > 0 )
      {
        if ( (signed int)v42 > 30 )
        {
          v70 = (char *)sub_497620((int)v70, (int)&v40);
          sub_4328C0(
            "byCount > MAX_FRD at FRD_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) Name(%s)",
            *(_DWORD *)(v18 + 452),
            v18 + 32,
            *(_DWORD *)(v18 + 448),
            v42,
            &v40);
        }
        v44 = CIOBuffer::Alloc();
        v41 = v44;
        *((_BYTE *)v44 + 2) = 18;
        v43 = (int)((char *)v41 + 5);
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v18 + 1364), a2, a3, a4);
        for ( j = 0; j < v42; ++j )
        {
          sub_468200((int)v36);
          v12 = sub_47A240(v70, v36);
          v70 = (char *)sub_497620(v12, (int)&v37);
          v38 = 0;
          v43 = sub_44F9B0(v43, *(_DWORD *)v36);
          v43 = sub_497660(v43, (int)&v37);
          if ( (unsigned int)unknown_libname_10() >= 0x1E )
          {
            CIOBuffer::Free(v44);
            CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
            sub_4328C0(
              "m_mapFrd.size() < MAX_FRD at FRD_M_LOAD  (%d, %s)  PID(%d) UID(%d)  ",
              *(_DWORD *)v36,
              &v37,
              *(_DWORD *)(v18 + 452),
              *(_DWORD *)(v18 + 448));
            CPlayer::Write(a2, a3, a4, v18, 45, (unsigned int)"b");
            sub_495B20(*(_DWORD *)(v18 + 1676), a2, a3, a4, 1);
            return;
          }
          v13 = sub_4728F0((int)&v20, (int)v36, v36);
          sub_470890(v18 + 1352, (int)&v34, v13);
          if ( !v35 )
          {
            CIOBuffer::Free(v44);
            CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
            sub_4328C0(
              "!r.second at FRD_M_LOAD  (%d, %s)  PID(%d) UID(%d)  ",
              *(_DWORD *)v36,
              &v37,
              *(_DWORD *)(v18 + 452),
              *(_DWORD *)(v18 + 448));
            CPlayer::Write(a2, a3, a4, v18, 45, (unsigned int)"b");
            sub_495B20(*(_DWORD *)(v18 + 1676), a2, a3, a4, 1);
            return;
          }
        }
        CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
        sub_496F10(a2, a3, a4, (char *)v41 + 3, (unsigned int)"bb");
        *(_WORD *)v41 = v43 - (_WORD)v41;
        *((_DWORD *)v44 + 2000) = *(_WORD *)v41;
        CSocket::_CSocket(*(_DWORD *)(v18 + 1676), a2, a3, a4, (int)v44);
      }
      else
      {
        sub_4328C0(
          "byCount <= 0 at FRD_M_LOAD  PID(%d) UID(%d) Count(%d) ",
          *(_DWORD *)(v18 + 452),
          *(_DWORD *)(v18 + 448),
          v42);
      }
      break;
    case 4:
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1364), a2, a3, a4);
      if ( unknown_libname_10() )
      {
        v32 = CIOBuffer::Alloc();
        v29 = v32;
        *((_BYTE *)v32 + 2) = 18;
        v30 = (int)((char *)v29 + 5);
        v31 = 0;
        sub_40F070(v18 + 1352, &v33);
        while ( 1 )
        {
          v14 = sub_430C20(v18 + 1352, &v19);
          if ( !(unsigned __int8)sub_47D070(v14) )
            break;
          v15 = sub_420250((int *)&v33);
          v28 = CPlayer::ScanPlayer(a2, a3, a4, *(_DWORD *)(v15 + 4));
          *(_DWORD *)(sub_420250((int *)&v33) + 28) = 0;
          if ( v28 )
          {
            *(_DWORD *)(sub_420250((int *)&v33) + 28) = 1;
            sub_4239C0(v28, a2, a3, a4, v28 + 352);
          }
          v16 = sub_420250((int *)&v33);
          v30 = sub_44F9B0(v30, *(_DWORD *)(v16 + 4));
          v17 = sub_420250((int *)&v33);
          v30 = sub_4189A0(v30, *(_BYTE *)(v17 + 28));
          sub_475880((int *)&v33);
          ++v31;
        }
        CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
        sub_496F10(a2, a3, a4, (char *)v29 + 3, (unsigned int)"bb");
        *(_WORD *)v29 = v30 - (_WORD)v29;
        *((_DWORD *)v32 + 2000) = *(_WORD *)v29;
        CSocket::_CSocket(*(_DWORD *)(v18 + 1676), a2, a3, a4, (int)v32);
      }
      else
      {
        CIOCriticalSection::Leave(v18 + 1364, a2, a3, a4);
      }
      break;
    default:
      return;
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00468200) --------------------------------------------------------
int __thiscall sub_468200(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  *(_DWORD *)this = 0;
  memset((void *)(this + 4), 0, 0x11u);
  *(_DWORD *)(v2 + 24) = 0;
  return v2;
}

//----- (00468240) --------------------------------------------------------
int __thiscall sub_468240(int this, int a2, const void *a3, int a4)
{
  int v5; // ST0C_4@1

  v5 = this;
  *(_DWORD *)this = a2;
  memcpy((void *)(this + 4), a3, 0x11u);
  *(_DWORD *)(v5 + 24) = a4;
  return v5;
}

//----- (00468280) --------------------------------------------------------
signed int __userpurge CPlayer::MailSend<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int *a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14)
{
  void *v15; // eax@18
  void *v16; // eax@20
  int v17; // [sp+0h] [bp-28h]@28
  int v18; // [sp+4h] [bp-24h]@23
  int v19; // [sp+Ch] [bp-1Ch]@1
  char v20; // [sp+10h] [bp-18h]@20
  char v21; // [sp+14h] [bp-14h]@18
  int v22; // [sp+18h] [bp-10h]@22
  char v23; // [sp+1Ch] [bp-Ch]@18
  char v24; // [sp+20h] [bp-8h]@20
  int v25; // [sp+24h] [bp-4h]@12

  v19 = a1;
  if ( !sub_497B80(a7) || !strcmp((const char *)(v19 + 32), (const char *)a7) )
    return 0;
  if ( a9 )
  {
    if ( a6 == 1 )
    {
      if ( a11 == 31 )
        a9 += a13;
    }
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v19 + 1020), a2, a3, a4);
    if ( !*(_DWORD *)(v19 + 1096) || *(_DWORD *)(*(_DWORD *)(v19 + 1096) + 52) < a9 )
    {
      CIOCriticalSection::Leave(v19 + 1020, a2, a3, a4);
      CPlayer::Write(a2, a3, a4, v19, 68, (unsigned int)"bbd");
      return 0;
    }
    CIOCriticalSection::Leave(v19 + 1020, a2, a3, a4);
  }
  v25 = 0;
  if ( a6 == 1 )
  {
    if ( a13 <= 0 )
      return 0;
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v19 + 1020), a2, a3, a4);
    if ( *(_DWORD *)(v19 + 1124) )
    {
      CIOCriticalSection::Leave(v19 + 1020, a2, a3, a4);
      CPlayer::Write(a2, a3, a4, v19, 68, (unsigned int)"bbd");
      return 0;
    }
    sub_4714F0(v19 + 1140, (int)&v23, (int)&a10);
    v15 = sub_430C20(v19 + 1140, &v21);
    if ( (unsigned __int8)sub_47D070(v15) )
    {
      CIOCriticalSection::Leave(v19 + 1020, a2, a3, a4);
      CPlayer::Write(a2, a3, a4, v19, 68, (unsigned int)"bbd");
      return 0;
    }
    sub_44AE20(v19 + 1068, (int)&v24, (int)&a10);
    v16 = sub_430C20(v19 + 1068, &v20);
    if ( (unsigned __int8)unknown_libname_8(v16) )
    {
      CIOCriticalSection::Leave(v19 + 1020, a2, a3, a4);
      return 0;
    }
    v22 = *(_DWORD *)(sub_420250((int *)&v24) + 4);
    if ( a11 == 31 )
      v18 = a9;
    else
      v18 = a13;
    if ( !(*(int (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v22 + 140))(v22, v18, v19, 0) )
    {
      CIOCriticalSection::Leave(v19 + 1020, a2, a3, a4);
      return 0;
    }
    *(_DWORD *)(v19 + 1124) = 1;
    if ( *(_DWORD *)(v22 + 52) <= a13 )
      v17 = 0;
    else
      v17 = *(_DWORD *)(*(_DWORD *)(v22 + 40) + 64);
    a11 = v17;
    v25 = *(_DWORD *)(v22 + 84);
    if ( *(_DWORD *)(v22 + 44) )
      a12 = *(_DWORD *)(*(_DWORD *)(v22 + 44) + 32);
    CIOCriticalSection::Leave(v19 + 1020, a2, a3, a4);
  }
  CDBSocket::Write(a2, a3, a4, 30, (unsigned int)"dbdbbssdbwbdds");
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00468570) --------------------------------------------------------
void __userpurge CPlayer::MailSendResult(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, signed int a7, char a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15)
{
  void *v15; // eax@13
  int v16; // eax@15
  int v17; // [sp+0h] [bp-18h]@1
  char v18; // [sp+4h] [bp-14h]@13
  int v19; // [sp+8h] [bp-10h]@31
  int v20; // [sp+Ch] [bp-Ch]@14
  char v21; // [sp+10h] [bp-8h]@13
  int v22; // [sp+14h] [bp-4h]@5

  v17 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  if ( a6 == 1 )
    *(_DWORD *)(v17 + 1124) = 0;
  CIOCriticalSection::Leave(v17 + 1020, a2, a3, a4);
  if ( !a7 )
  {
    if ( !a6 )
    {
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v17 + 1020), a2, a3, a4);
      v22 = *(_DWORD *)(v17 + 1096);
      if ( v22 && (*(int (__thiscall **)(int, signed int, int, _DWORD))(*(_DWORD *)v22 + 140))(v22, 5, v17, 0) )
      {
        if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v22 + 120))(v22, v17, 49, -5) )
          CPlayer::_OutofInven(v17, a2, a3, a4, v22);
      }
      else
      {
        a7 = 3;
        sub_432890("CPlayer::MailSendResult()  not enough money (PID:%d), (SRType:%d)", *(_DWORD *)(v17 + 452), 3);
      }
      CIOCriticalSection::Leave(v17 + 1020, a2, a3, a4);
      goto LABEL_29;
    }
    if ( a6 != 1 )
    {
LABEL_29:
      CDBSocket::Write(a2, a3, a4, 30, (unsigned int)"dbddbbddwdd");
      goto LABEL_30;
    }
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v17 + 1020), a2, a3, a4);
    sub_44AE20(v17 + 1068, (int)&v21, (int)&a10);
    v15 = sub_430C20(v17 + 1068, &v18);
    if ( (unsigned __int8)sub_47D070(v15) )
    {
      v22 = *(_DWORD *)(v17 + 1096);
      v20 = *(_DWORD *)(sub_420250((int *)&v21) + 4);
      if ( !v22
        || (v16 = (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v20 + 164))(v20, v17, 0),
            !(*(int (__thiscall **)(int, int))(*(_DWORD *)v22 + 140))(v22, v16 != 0 ? a14 + 100 : 100)) )
      {
        a7 = 3;
        sub_432890("CPlayer::MailSendResult()  not enough money (PID:%d), (SRType:%d)", *(_DWORD *)(v17 + 452), 3);
        goto LABEL_28;
      }
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)v20 + 164))(v20)
        || (*(int (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v20 + 140))(v20, a14, v17, 0) )
      {
        if ( (*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v20 + 120))(v20, v17, 50, -a14) )
          a12 = *(_DWORD *)(*(_DWORD *)(v20 + 40) + 64);
        else
          CPlayer::_OutofInven(v17, a2, a3, a4, v20);
        if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v22 + 120))(v22, v17, 49, -100) )
          CPlayer::_OutofInven(v17, a2, a3, a4, v22);
        goto LABEL_28;
      }
    }
    sub_432890("CPlayer::MailSendResult()  not exist item(PID:%d), (index:%d) ", *(_DWORD *)(v17 + 452), a12);
    a7 = 4;
LABEL_28:
    CIOCriticalSection::Leave(v17 + 1020, a2, a3, a4);
    goto LABEL_29;
  }
LABEL_30:
  CPlayer::Write(a2, a3, a4, v17, 19, (unsigned int)"bbs");
  if ( !a7 )
  {
    v19 = CPlayer::ScanPlayer(a2, a3, a4, a8);
    if ( v19 )
    {
      CPlayer::Write(a2, a3, a4, v19, 68, (unsigned int)"bbs");
      sub_4239C0(v19, a2, a3, a4, v19 + 352);
    }
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00468890) --------------------------------------------------------
void __userpurge CPlayer::MAILProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // eax@26
  void *v8; // eax@28
  void *v9; // eax@33
  void *v10; // eax@37
  void *v11; // eax@42
  const void *v12; // eax@43
  void *v13; // eax@46
  const void *v14; // eax@47
  void *v15; // eax@51
  DWORD v16; // esi@52
  const void *v17; // eax@52
  void *v18; // eax@66
  DWORD v19; // esi@67
  const void *v20; // eax@67
  void *v21; // eax@88
  int v22; // [sp+Ch] [bp-554h]@1
  char v23; // [sp+10h] [bp-550h]@88
  char v24; // [sp+14h] [bp-54Ch]@66
  char v25; // [sp+18h] [bp-548h]@51
  char v26; // [sp+1Ch] [bp-544h]@46
  char v27; // [sp+20h] [bp-540h]@42
  char v28; // [sp+24h] [bp-53Ch]@37
  char v29; // [sp+28h] [bp-538h]@33
  char v30; // [sp+2Ch] [bp-534h]@28
  char v31; // [sp+30h] [bp-530h]@26
  char v32; // [sp+38h] [bp-528h]@26
  char v33; // [sp+9Ch] [bp-4C4h]@88
  int v34; // [sp+A0h] [bp-4C0h]@76
  int v35; // [sp+A4h] [bp-4BCh]@72
  int v36; // [sp+A8h] [bp-4B8h]@66
  char v37; // [sp+BCh] [bp-4A4h]@87
  int v38; // [sp+F4h] [bp-46Ch]@74
  int v39; // [sp+F8h] [bp-468h]@74
  int v40; // [sp+FCh] [bp-464h]@74
  int v41; // [sp+100h] [bp-460h]@74
  int v42; // [sp+104h] [bp-45Ch]@70
  int v43; // [sp+108h] [bp-458h]@67
  int v44; // [sp+10Ch] [bp-454h]@66
  int v45; // [sp+110h] [bp-450h]@69
  int v46; // [sp+114h] [bp-44Ch]@67
  int v47; // [sp+118h] [bp-448h]@72
  char v48; // [sp+11Ch] [bp-444h]@66
  int v49; // [sp+120h] [bp-440h]@51
  int v50; // [sp+128h] [bp-438h]@54
  int v51; // [sp+17Ch] [bp-3E4h]@58
  char v52; // [sp+180h] [bp-3E0h]@51
  char v53; // [sp+184h] [bp-3DCh]@51
  int v54; // [sp+188h] [bp-3D8h]@47
  int v55; // [sp+190h] [bp-3D0h]@47
  char v56; // [sp+1E8h] [bp-378h]@46
  char v57; // [sp+1ECh] [bp-374h]@46
  int v58; // [sp+1F0h] [bp-370h]@43
  int v59; // [sp+1F8h] [bp-368h]@43
  char v60; // [sp+250h] [bp-310h]@43
  char v61; // [sp+254h] [bp-30Ch]@42
  char v62; // [sp+258h] [bp-308h]@42
  int v63; // [sp+260h] [bp-300h]@37
  char v64; // [sp+268h] [bp-2F8h]@37
  char v65; // [sp+269h] [bp-2F7h]@37
  char v66; // [sp+469h] [bp-F7h]@37
  int v67; // [sp+470h] [bp-F0h]@38
  char v68; // [sp+474h] [bp-ECh]@37
  char v69; // [sp+478h] [bp-E8h]@33
  unsigned __int8 v70; // [sp+47Fh] [bp-E1h]@31
  int v71; // [sp+480h] [bp-E0h]@33
  int v72; // [sp+484h] [bp-DCh]@29
  char v73; // [sp+488h] [bp-D8h]@28
  char v74; // [sp+48Ch] [bp-D4h]@28
  int v75; // [sp+490h] [bp-D0h]@23
  char v76; // [sp+494h] [bp-CCh]@23
  char v77; // [sp+498h] [bp-C8h]@23
  char v78; // [sp+49Ch] [bp-C4h]@23
  int v79; // [sp+4A0h] [bp-C0h]@23
  char v80; // [sp+4A4h] [bp-BCh]@23
  int v81; // [sp+4B8h] [bp-A8h]@23
  char v82; // [sp+4BCh] [bp-A4h]@23
  int v83; // [sp+4D0h] [bp-90h]@23
  int v84; // [sp+4D4h] [bp-8Ch]@23
  __int32 v85; // [sp+4D8h] [bp-88h]@23
  char v86; // [sp+4DCh] [bp-84h]@23
  __int16 v87; // [sp+4E0h] [bp-80h]@23
  char v88; // [sp+4E4h] [bp-7Ch]@23
  int v89; // [sp+4E8h] [bp-78h]@23
  int v90; // [sp+4ECh] [bp-74h]@23
  int v91; // [sp+4F4h] [bp-6Ch]@1
  int v92; // [sp+4F8h] [bp-68h]@21
  void *v93; // [sp+4FCh] [bp-64h]@21
  unsigned __int8 v94; // [sp+503h] [bp-5Dh]@17
  int v95; // [sp+504h] [bp-5Ch]@21
  void *v96; // [sp+508h] [bp-58h]@21
  unsigned __int16 v97; // [sp+50Ch] [bp-54h]@15
  int v98; // [sp+510h] [bp-50h]@15
  unsigned __int8 v99; // [sp+516h] [bp-4Ah]@15
  unsigned __int8 v100; // [sp+517h] [bp-49h]@15
  int v101; // [sp+518h] [bp-48h]@15
  int v102; // [sp+51Ch] [bp-44h]@15
  int v103; // [sp+520h] [bp-40h]@15
  int v104; // [sp+524h] [bp-3Ch]@15
  unsigned __int8 v105; // [sp+52Ah] [bp-36h]@15
  unsigned __int8 v106; // [sp+52Bh] [bp-35h]@15
  int v107; // [sp+52Ch] [bp-34h]@15
  int i; // [sp+530h] [bp-30h]@3
  int v109; // [sp+534h] [bp-2Ch]@3
  unsigned __int8 v110; // [sp+53Bh] [bp-25h]@3
  unsigned __int16 v111; // [sp+53Ch] [bp-24h]@12
  int v112; // [sp+540h] [bp-20h]@10
  unsigned __int8 v113; // [sp+547h] [bp-19h]@13
  int v114; // [sp+548h] [bp-18h]@2
  int v115; // [sp+54Ch] [bp-14h]@11
  char *v116; // [sp+550h] [bp-10h]@5
  unsigned __int8 v117; // [sp+557h] [bp-9h]@2
  int v118; // [sp+558h] [bp-8h]@5
  int v119; // [sp+55Ch] [bp-4h]@13

  v91 = dword_4D9830;
  v22 = a1;
  switch ( a5 )
  {
    case 0:
      v114 = 0;
      a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bs");
      if ( v117 )
      {
        if ( v117 == 1 )
        {
          a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"sdwbdd");
          if ( v112 >= 0 && v115 >= 0 )
          {
            CPlayer::MailSend(v22, a2, a3, a4, v114, v117, (int *)v116, v118, 100, v119, v111, v113, v112, v115);
          }
          else
          {
            sub_4328C0("", *(_DWORD *)(v22 + 448), v22 + 32, *(_DWORD *)(v22 + 452), v111, v112, v115);
            CPlayer::Write(a2, a3, a4, v22, 45, (unsigned int)"b");
            sub_495B20(*(_DWORD *)(v22 + 1676), a2, a3, a4, 1);
          }
        }
      }
      else
      {
        a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
        v109 = 5 * v110;
        for ( i = 0; ; ++i )
        {
          if ( i < v110 )
          {
            a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
            if ( CPlayer::MailSend(v22, a2, a3, a4, v114, v117, (int *)v116, v118, v109, 0, 0, 0, 0, 0) )
              continue;
          }
          break;
        }
      }
      return;
    case 1:
      a6 = sub_497220(a2, a3, a4, a6, (unsigned int)"dbbdsdbwbdd");
      CPlayer::MailSendResult(v22, a2, a3, a4, v101, v106, v99, v103, v102, v107, v105, v97, v100, v98, v104);
      return;
    case 2:
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1396), a2, a3, a4);
      sub_471BE0(v22 + 1428);
      CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
      CDBSocket::Write(a2, a3, a4, 30, (unsigned int)"dbd");
      return;
    case 3:
      a6 = sub_497220(a2, a3, a4, a6, (unsigned int)"b");
      if ( (signed int)v94 <= 0 )
        return;
      if ( (signed int)v94 > 50 )
        sub_4328C0(
          "byCount > MAIL_MAX_LOAD at FRD_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) ",
          *(_DWORD *)(v22 + 452),
          v22 + 32,
          *(_DWORD *)(v22 + 448),
          v94);
      v96 = CIOBuffer::Alloc();
      v93 = v96;
      *((_BYTE *)v96 + 2) = 19;
      v95 = (int)((char *)v93 + 5);
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, a3, a4);
      v92 = 0;
      while ( 2 )
      {
        if ( v92 >= v94 )
        {
          CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
          sub_496F10(a2, a3, a4, (char *)v93 + 3, (unsigned int)"bb");
          *(_WORD *)v93 = v95 - (_WORD)v93;
          *((_DWORD *)v96 + 2000) = *(_WORD *)v93;
          CSocket::_CSocket(*(_DWORD *)(v22 + 1676), a2, a3, a4, (int)v96);
        }
        else
        {
          sub_469C80((int)&v75);
          a6 = (char *)sub_47A240(a6, &v75);
          a6 = (char *)sub_418960(a6, &v76);
          a6 = (char *)sub_418960(a6, &v77);
          a6 = (char *)sub_418960(a6, &v78);
          a6 = (char *)sub_47A240(a6, &v79);
          a6 = (char *)sub_497620((int)a6, (int)&v80);
          a6 = (char *)sub_47A240(a6, &v81);
          a6 = (char *)sub_497620((int)a6, (int)&v82);
          a6 = (char *)sub_47A240(a6, &v83);
          a6 = (char *)sub_47A240(a6, &v84);
          a6 = (char *)sub_47A240(a6, &v85);
          a6 = (char *)sub_418960(a6, &v86);
          a6 = (char *)sub_418980((int)a6, (int)&v87);
          a6 = (char *)sub_418960(a6, &v88);
          a6 = (char *)sub_47A240(a6, &v89);
          a6 = (char *)sub_47A240(a6, &v90);
          if ( v85 <= dword_4E10B0 + 100 || !v85 )
          {
            v95 = sub_44F9B0(v95, v75);
            v95 = sub_4189A0(v95, v76);
            v95 = sub_4189A0(v95, v77);
            v95 = sub_4189A0(v95, v78);
            v95 = sub_44F9B0(v95, v79);
            v95 = sub_497660(v95, (int)&v80);
            v95 = sub_44F9B0(v95, v81);
            v95 = sub_497660(v95, (int)&v82);
            v95 = sub_44F9B0(v95, v83);
            v95 = sub_44F9B0(v95, v84);
            v95 = sub_44F9B0(v95, v85);
            v95 = sub_42F960(v95, v87);
            v95 = sub_4189A0(v95, v88);
            v95 = sub_44F9B0(v95, v89);
            v95 = sub_44F9B0(v95, v90);
            v7 = sub_472920((int)&v32, (int)&v75, &v75);
            sub_4719D0(v22 + 1428, (int)&v31, v7);
            ++v92;
            continue;
          }
          CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
          CIOBuffer::Free(v96);
          sub_4328C0(
            "CPlayer::MAILProcess()  :MAIL_M_LOAD  PID(%d) Char(%s) UID(%d) Count(%d) MID (%d) ",
            *(_DWORD *)(v22 + 452),
            v22 + 32,
            *(_DWORD *)(v22 + 448),
            v94,
            v75);
          sub_432890(
            "[Kickout] At MAIL_M_LOAD '%s' (PID:%d) %p %x %x %x",
            v22 + 32,
            *(_DWORD *)(v22 + 452),
            *(_DWORD *)(*(_DWORD *)(v22 + 1676) + 120),
            *(_DWORD *)(v22 + 20),
            *(_DWORD *)(*(_DWORD *)(v22 + 1676) + 108));
          CPlayer::Write(a2, a3, a4, v22, 45, (unsigned int)"b");
          sub_495B20(*(_DWORD *)(v22 + 1676), a2, a3, a4, 1);
        }
        break;
      }
      return;
    case 6:
      a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, a3, a4);
      sub_471C40(v22 + 1428, (int)&v74, (int)&v73);
      v8 = sub_430C20(v22 + 1428, &v30);
      if ( (unsigned __int8)sub_47D070(v8) )
      {
        v72 = sub_420250((int *)&v74) + 4;
        CDBSocket::Write(a2, a3, a4, 30, (unsigned int)"dbddbd");
      }
      CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
      return;
    case 5:
      a6 = sub_497220(a2, a3, a4, a6, (unsigned int)"db");
      if ( v70 == 1 )
      {
        CPlayer::Write(a2, a3, a4, v22, 68, (unsigned int)"bbd");
      }
      else
      {
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, a3, a4);
        sub_471C40(v22 + 1428, (int)&v69, (int)&v71);
        v9 = sub_430C20(v22 + 1428, &v29);
        if ( (unsigned __int8)sub_47D070(v9) )
          sub_471B80(v22 + 1428, (int)&v71);
        CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
        CPlayer::Write(a2, a3, a4, v22, 68, (unsigned int)"bbd");
      }
      return;
    case 7:
      v64 = 0;
      memset(&v65, 0, 0x200u);
      a6 = sub_497220(a2, (DWORD)&v66, a4, a6, (unsigned int)"dbdw");
      a6 = sub_497220(a2, (DWORD)&v66, a4, a6, (unsigned int)"m");
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, (DWORD)&v66, a4);
      sub_471C40(v22 + 1428, (int)&v68, (int)&v63);
      v10 = sub_430C20(v22 + 1428, &v28);
      if ( (unsigned __int8)sub_47D070(v10) )
      {
        if ( v67 )
          CPlayer::Write(a2, (DWORD)&v66, a4, v22, 19, (unsigned int)"bdbdwmm");
        else
          CPlayer::Write(a2, (DWORD)&v66, a4, v22, 19, (unsigned int)"bdbdwm");
      }
      CIOCriticalSection::Leave(v22 + 1396, a2, (DWORD)&v66, a4);
      return;
    case 8:
      a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, a3, a4);
      sub_471C40(v22 + 1428, (int)&v62, (int)&v61);
      v11 = sub_430C20(v22 + 1428, &v27);
      if ( (unsigned __int8)sub_47D070(v11) )
      {
        v12 = (const void *)(sub_420250((int *)&v62) + 4);
        memcpy(&v58, v12, 0x60u);
        a4 = (DWORD)((char *)v12 + 96);
        a3 = (DWORD)&v60;
        if ( v59 == 1 )
        {
          CDBSocket::Write(a2, (DWORD)&v60, a4, 30, (unsigned int)"dbdd");
          sub_471B80(v22 + 1428, (int)&v58);
          CPlayer::Write(a2, (DWORD)&v60, a4, v22, 68, (unsigned int)"bbd");
        }
      }
      CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
      return;
    case 9:
      a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, a3, a4);
      sub_471C40(v22 + 1428, (int)&v57, (int)&v56);
      v13 = sub_430C20(v22 + 1428, &v26);
      if ( (unsigned __int8)sub_47D070(v13) )
      {
        v14 = (const void *)(sub_420250((int *)&v57) + 4);
        memcpy(&v54, v14, 0x60u);
        a4 = (DWORD)((char *)v14 + 96);
        a3 = (DWORD)&v56;
        if ( !v55 || v55 == 4 )
        {
          sub_471B80(v22 + 1428, (int)&v54);
          CDBSocket::Write(a2, (DWORD)&v56, a4, 30, (unsigned int)"dbdd");
          CPlayer::Write(a2, (DWORD)&v56, a4, v22, 68, (unsigned int)"bbd");
        }
      }
      CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
      goto LABEL_51;
    case 10:
LABEL_51:
      a6 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"d");
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, a3, a4);
      sub_469C80((int)&v49);
      sub_471C40(v22 + 1428, (int)&v53, (int)&v52);
      v15 = sub_430C20(v22 + 1428, &v25);
      if ( !(unsigned __int8)sub_47D070(v15) )
      {
        CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
        return;
      }
      v17 = (const void *)(sub_420250((int *)&v53) + 4);
      memcpy(&v49, v17, 0x60u);
      v16 = (DWORD)((char *)v17 + 96);
      CIOCriticalSection::Leave(v22 + 1396, a2, (DWORD)&v52, (DWORD)((char *)v17 + 96));
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1020), a2, (DWORD)&v52, v16);
      if ( v50 != 1 && v50 != 2 && v50 != 3 )
        goto LABEL_65;
      if ( v50 != 1 || !v51 || *(_DWORD *)(v22 + 1096) && *(_DWORD *)(*(_DWORD *)(v22 + 1096) + 52) >= v51 )
      {
        if ( CPlayer::GetInvenSize((void *)v22) < 60 )
        {
          CDBSocket::Write(a2, (DWORD)&v52, v16, 30, (unsigned int)"dbddd");
LABEL_65:
          CIOCriticalSection::Leave(v22 + 1020, a2, (DWORD)&v52, v16);
        }
        else
        {
          CIOCriticalSection::Leave(v22 + 1020, a2, (DWORD)&v52, v16);
          CPlayer::Write(a2, (DWORD)&v52, v16, v22, 68, (unsigned int)"bbd");
        }
      }
      else
      {
        CIOCriticalSection::Leave(v22 + 1020, a2, (DWORD)&v52, v16);
        CPlayer::Write(a2, (DWORD)&v52, v16, v22, 68, (unsigned int)"bbd");
      }
      return;
    case 11:
      a6 = sub_497220(a2, a3, a4, a6, (unsigned int)"dd");
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, a3, a4);
      sub_469C80((int)&v36);
      sub_471C40(v22 + 1428, (int)&v48, (int)&v44);
      v18 = sub_430C20(v22 + 1428, &v24);
      if ( (unsigned __int8)sub_47D070(v18) )
      {
        v20 = (const void *)(sub_420250((int *)&v48) + 4);
        memcpy(&v36, v20, 0x60u);
        v19 = (DWORD)((char *)v20 + 96);
        CIOCriticalSection::Leave(v22 + 1396, a2, (DWORD)&v43, (DWORD)((char *)v20 + 96));
        v43 = 1;
        v46 = 0;
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1020), a2, (DWORD)&v43, v19);
        v45 = *(_DWORD *)(v22 + 1096);
        if ( (!v45 || *(_DWORD *)(v45 + 52) < v42) && v42 )
        {
          CPlayer::Write(a2, (DWORD)&v43, v19, v22, 68, (unsigned int)"bbd");
        }
        else
        {
          v35 = 0;
          if ( v47 )
            v35 = sub_426060(*(_DWORD *)(v22 + 452), (int *)&a6);
          else
            v35 = CItem::CreateItem(v39, v40, v41, v38);
          if ( v35 )
          {
            v34 = CPlayer::_InsertItem((void *)v22, a2, (DWORD)&v43, v19, 51, v35);
            if ( v34 == 1 )
            {
              if ( v42 )
              {
                if ( !(*(int (__thiscall **)(int, int, signed int, int))(*(_DWORD *)v45 + 120))(v45, v22, 51, -v42) )
                {
                  v46 = *(_DWORD *)(v45 + 36);
                  CPlayer::_OutofInven(v22, a2, (DWORD)&v43, v19, v45);
                }
              }
              v43 = 0;
            }
            else
            {
              CBase::Delete((void *)v35);
              if ( v34 == 2 )
                CPlayer::Write(a2, (DWORD)&v43, v19, v22, 68, (unsigned int)"bbd");
            }
          }
        }
        CIOCriticalSection::Leave(v22 + 1020, a2, (DWORD)&v43, v19);
        if ( !v43 )
        {
          CPlayer::Write(a2, (DWORD)&v43, v19, v22, 19, (unsigned int)"bdbb");
          if ( v42 > 0 )
            CPlayer::MailSend(
              v22,
              a2,
              (DWORD)&v43,
              v19,
              0,
              3,
              (int *)&v37,
              (int)&byte_4B437D,
              0,
              v46,
              ((v46 != 0) - 1) & 0x1F,
              0,
              v42,
              0);
          CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v22 + 1396), a2, (DWORD)&v43, v19);
          sub_471C40(v22 + 1428, (int)&v33, (int)&v36);
          v21 = sub_430C20(v22 + 1428, &v23);
          if ( (unsigned __int8)sub_47D070(v21) )
          {
            *(_DWORD *)(sub_420250((int *)&v33) + 12) = 0;
            *(_DWORD *)(sub_420250((int *)&v33) + 76) = 0;
            *(_DWORD *)(sub_420250((int *)&v33) + 84) = 0;
            *(_DWORD *)(sub_420250((int *)&v33) + 88) = 0;
            *(_DWORD *)(sub_420250((int *)&v33) + 92) = 0;
            *(_DWORD *)(sub_420250((int *)&v33) + 96) = 0;
          }
          CIOCriticalSection::Leave(v22 + 1396, a2, (DWORD)&v43, v19);
        }
        CDBSocket::Write(a2, (DWORD)&v43, v19, 30, (unsigned int)"dbddbbddwbd");
      }
      else
      {
        CDBSocket::Write(a2, a3, a4, 30, (unsigned int)"dbddb");
        CIOCriticalSection::Leave(v22 + 1396, a2, a3, a4);
      }
      return;
    default:
      return;
  }
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00469C80) --------------------------------------------------------
int __thiscall sub_469C80(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  memset((void *)(this + 20), 0, 0x11u);
  *(_DWORD *)(v2 + 40) = 0;
  memset((void *)(v2 + 44), 0, 0x11u);
  *(_DWORD *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 76) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  *(_DWORD *)(v2 + 84) = 0;
  *(_DWORD *)(v2 + 88) = 0;
  *(_DWORD *)(v2 + 92) = 0;
  return v2;
}

//----- (00469D40) --------------------------------------------------------
signed int __userpurge CPlayer::IsCooking<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-28h]@1
  int v7; // [sp+4h] [bp-24h]@15
  int v8; // [sp+8h] [bp-20h]@15
  int v9; // [sp+Ch] [bp-1Ch]@15
  int v10; // [sp+10h] [bp-18h]@17
  int v11; // [sp+10h] [bp-18h]@19
  int v12; // [sp+10h] [bp-18h]@21
  int v13; // [sp+10h] [bp-18h]@23
  int v14; // [sp+14h] [bp-14h]@15
  int v15; // [sp+18h] [bp-10h]@2
  int v16; // [sp+1Ch] [bp-Ch]@2
  int v17; // [sp+20h] [bp-8h]@2
  int v18; // [sp+24h] [bp-4h]@4
  int v19; // [sp+24h] [bp-4h]@6
  int v20; // [sp+24h] [bp-4h]@8

  v6 = a1;
  if ( a5 )
  {
    if ( a5 == 1 )
    {
      v7 = 4 * *(_DWORD *)(a1 + 1280) + 4 * *(_DWORD *)(a1 + 1272);
      v8 = *(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1272);
      v9 = *(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1272);
      v14 = *(_DWORD *)(a1 + 1276);
      if ( !(*(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1276) + *(_DWORD *)(a1 + 1272)) )
        return 0;
      CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
      v10 = CPlayer::_FindItem((void *)v6, 443, v7);
      if ( !v7 || v10 )
      {
        v11 = CPlayer::_FindItem((void *)v6, 444, v8);
        if ( !v8 || v11 )
        {
          v12 = CPlayer::_FindItem((void *)v6, 445, v9);
          if ( !v9 || v12 )
          {
            v13 = CPlayer::_FindItem((void *)v6, 446, v14);
            if ( !v14 || v13 )
            {
              if ( *(_DWORD *)(v6 + 1096)
                && *(_DWORD *)(*(_DWORD *)(v6 + 1096) + 52) >= 500 * *(_DWORD *)(v6 + 1280)
                                                             + 500 * *(_DWORD *)(v6 + 1276) )
              {
                CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
                return 1;
              }
            }
          }
        }
      }
      CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
    }
  }
  else
  {
    v16 = *(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1276) + *(_DWORD *)(a1 + 1272);
    v15 = *(_DWORD *)(a1 + 1288) + *(_DWORD *)(a1 + 1284);
    v17 = *(_DWORD *)(a1 + 1296) + *(_DWORD *)(a1 + 1292);
    if ( !(v17 + v15 + v16) )
      return 0;
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
    v18 = CPlayer::_FindItem((void *)v6, 239, v16);
    if ( !v16 || v18 )
    {
      v19 = CPlayer::_FindItem((void *)v6, 240, v15);
      if ( !v15 || v19 )
      {
        v20 = CPlayer::_FindItem((void *)v6, 241, v17);
        if ( !v17 || v20 )
        {
          if ( *(_DWORD *)(v6 + 1096)
            && *(_DWORD *)(*(_DWORD *)(v6 + 1096) + 52) >= 1000 * v17
                                                         + 200 * *(_DWORD *)(v6 + 1288)
                                                         + 100 * *(_DWORD *)(v6 + 1284)
                                                         + 10 * v16 )
          {
            CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
            return 1;
          }
        }
      }
    }
    CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
  }
  return 0;
}

//----- (0046A020) --------------------------------------------------------
signed int __userpurge CPlayer::Cooking<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-30h]@1
  int v7; // [sp+4h] [bp-2Ch]@74
  int v8; // [sp+8h] [bp-28h]@47
  int v9; // [sp+Ch] [bp-24h]@47
  int v10; // [sp+10h] [bp-20h]@47
  int v11; // [sp+14h] [bp-1Ch]@49
  int v12; // [sp+14h] [bp-1Ch]@51
  int v13; // [sp+14h] [bp-1Ch]@53
  int v14; // [sp+14h] [bp-1Ch]@55
  int v15; // [sp+14h] [bp-1Ch]@60
  int v16; // [sp+14h] [bp-1Ch]@64
  int v17; // [sp+14h] [bp-1Ch]@67
  int v18; // [sp+14h] [bp-1Ch]@71
  int v19; // [sp+14h] [bp-1Ch]@76
  int v20; // [sp+14h] [bp-1Ch]@79
  int v21; // [sp+18h] [bp-18h]@47
  int v22; // [sp+1Ch] [bp-14h]@21
  int v23; // [sp+20h] [bp-10h]@2
  int v24; // [sp+24h] [bp-Ch]@2
  int v25; // [sp+28h] [bp-8h]@2
  int v26; // [sp+2Ch] [bp-4h]@4
  int v27; // [sp+2Ch] [bp-4h]@6
  int v28; // [sp+2Ch] [bp-4h]@8
  int v29; // [sp+2Ch] [bp-4h]@13
  int v30; // [sp+2Ch] [bp-4h]@16
  int v31; // [sp+2Ch] [bp-4h]@19
  int v32; // [sp+2Ch] [bp-4h]@23
  int v33; // [sp+2Ch] [bp-4h]@26
  int v34; // [sp+2Ch] [bp-4h]@29
  int v35; // [sp+2Ch] [bp-4h]@32
  int v36; // [sp+2Ch] [bp-4h]@35
  int v37; // [sp+2Ch] [bp-4h]@38
  int v38; // [sp+2Ch] [bp-4h]@41

  v6 = a1;
  if ( !a5 )
  {
    v24 = *(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1276) + *(_DWORD *)(a1 + 1272);
    v23 = *(_DWORD *)(a1 + 1288) + *(_DWORD *)(a1 + 1284);
    v25 = *(_DWORD *)(a1 + 1296) + *(_DWORD *)(a1 + 1292);
    if ( !(v25 + v23 + v24) )
      return 0;
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
    v26 = CPlayer::_FindItem((void *)v6, 239, v24);
    if ( !v24 || v26 )
    {
      v27 = CPlayer::_FindItem((void *)v6, 240, v23);
      if ( !v23 || v27 )
      {
        v28 = CPlayer::_FindItem((void *)v6, 241, v25);
        if ( !v25 || v28 )
        {
          if ( *(_DWORD *)(v6 + 1096)
            && *(_DWORD *)(*(_DWORD *)(v6 + 1096) + 52) >= 1000 * v25
                                                         + 200 * *(_DWORD *)(v6 + 1288)
                                                         + 100 * *(_DWORD *)(v6 + 1284)
                                                         + 10 * v24 )
          {
            if ( v24 )
            {
              v29 = CPlayer::_FindItem((void *)v6, 239, v24);
              if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v29 + 120))(v29, v6, 16, -v24) )
                CPlayer::_OutofInven(v6, a2, a3, a4, v29);
            }
            if ( v23 )
            {
              v30 = CPlayer::_FindItem((void *)v6, 240, v23);
              if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v30 + 120))(v30, v6, 16, -v23) )
                CPlayer::_OutofInven(v6, a2, a3, a4, v30);
            }
            if ( v25 )
            {
              v31 = CPlayer::_FindItem((void *)v6, 241, v25);
              if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v31 + 120))(v31, v6, 16, -v25) )
                CPlayer::_OutofInven(v6, a2, a3, a4, v31);
            }
            v22 = *(_DWORD *)(v6 + 1096);
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v22 + 120))(
                    *(_DWORD *)(v6 + 1096),
                    v6,
                    16,
                    -(1000 * v25 + 200 * *(_DWORD *)(v6 + 1288) + 100 * *(_DWORD *)(v6 + 1284) + 10 * v24)) )
              CPlayer::_OutofInven(v6, a2, a3, a4, v22);
            v32 = CItem::CreateItem(10, 0, 5 * *(_DWORD *)(v6 + 1272), -1);
            if ( v32 )
            {
              if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v32) != 1 )
              {
                CBase::Delete((void *)v32);
                sub_4328C0(
                  "Cooking() item insert error (PID (%d), 11(%d), 2(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
                  *(_DWORD *)(v6 + 452),
                  *(_DWORD *)(v6 + 1272),
                  *(_DWORD *)(v6 + 1276),
                  *(_DWORD *)(v6 + 1280),
                  *(_DWORD *)(v6 + 1284),
                  *(_DWORD *)(v6 + 1288),
                  *(_DWORD *)(v6 + 1292),
                  *(_DWORD *)(v6 + 1296));
              }
            }
            v33 = CItem::CreateItem(11, 0, 2 * *(_DWORD *)(v6 + 1276), -1);
            if ( v33 )
            {
              if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v33) != 1 )
              {
                CBase::Delete((void *)v33);
                sub_4328C0(
                  "Cooking() item insert error (PID (%d), 1(%d), 22(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
                  *(_DWORD *)(v6 + 452),
                  *(_DWORD *)(v6 + 1272),
                  *(_DWORD *)(v6 + 1276),
                  *(_DWORD *)(v6 + 1280),
                  *(_DWORD *)(v6 + 1284),
                  *(_DWORD *)(v6 + 1288),
                  *(_DWORD *)(v6 + 1292),
                  *(_DWORD *)(v6 + 1296));
              }
            }
            v34 = CItem::CreateItem(12, 0, *(_DWORD *)(v6 + 1280), -1);
            if ( v34 )
            {
              if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v34) != 1 )
              {
                CBase::Delete((void *)v34);
                sub_4328C0(
                  "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 33(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
                  *(_DWORD *)(v6 + 452),
                  *(_DWORD *)(v6 + 1272),
                  *(_DWORD *)(v6 + 1276),
                  *(_DWORD *)(v6 + 1280),
                  *(_DWORD *)(v6 + 1284),
                  *(_DWORD *)(v6 + 1288),
                  *(_DWORD *)(v6 + 1292),
                  *(_DWORD *)(v6 + 1296));
              }
            }
            v35 = CItem::CreateItem(13, 0, *(_DWORD *)(v6 + 1284), -1);
            if ( v35 )
            {
              if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v35) != 1 )
              {
                CBase::Delete((void *)v35);
                sub_4328C0(
                  "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 44(%d), 5(%d), 6(%d), 7(%d)",
                  *(_DWORD *)(v6 + 452),
                  *(_DWORD *)(v6 + 1272),
                  *(_DWORD *)(v6 + 1276),
                  *(_DWORD *)(v6 + 1280),
                  *(_DWORD *)(v6 + 1284),
                  *(_DWORD *)(v6 + 1288),
                  *(_DWORD *)(v6 + 1292),
                  *(_DWORD *)(v6 + 1296));
              }
            }
            v36 = CItem::CreateItem(14, 0, *(_DWORD *)(v6 + 1288), -1);
            if ( v36 )
            {
              if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v36) != 1 )
              {
                CBase::Delete((void *)v36);
                sub_4328C0(
                  "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 55(%d), 6(%d), 7(%d)",
                  *(_DWORD *)(v6 + 452),
                  *(_DWORD *)(v6 + 1272),
                  *(_DWORD *)(v6 + 1276),
                  *(_DWORD *)(v6 + 1280),
                  *(_DWORD *)(v6 + 1284),
                  *(_DWORD *)(v6 + 1288),
                  *(_DWORD *)(v6 + 1292),
                  *(_DWORD *)(v6 + 1296));
              }
            }
            v37 = CItem::CreateItem(15, 0, *(_DWORD *)(v6 + 1292), -1);
            if ( v37 )
            {
              if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v37) != 1 )
              {
                CBase::Delete((void *)v37);
                sub_4328C0(
                  "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 5(%d), 66(%d), 77(%d)",
                  *(_DWORD *)(v6 + 452),
                  *(_DWORD *)(v6 + 1272),
                  *(_DWORD *)(v6 + 1276),
                  *(_DWORD *)(v6 + 1280),
                  *(_DWORD *)(v6 + 1284),
                  *(_DWORD *)(v6 + 1288),
                  *(_DWORD *)(v6 + 1292),
                  *(_DWORD *)(v6 + 1296));
              }
            }
            v38 = CItem::CreateItem(16, 0, *(_DWORD *)(v6 + 1296), -1);
            if ( v38 )
            {
              if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v38) != 1 )
              {
                CBase::Delete((void *)v38);
                sub_4328C0(
                  "Cooking() item insert error (PID (%d), 1(%d), 2(%d), 3(%d), 4(%d), 5(%d), 6(%d), 7(%d)",
                  *(_DWORD *)(v6 + 452),
                  *(_DWORD *)(v6 + 1272),
                  *(_DWORD *)(v6 + 1276),
                  *(_DWORD *)(v6 + 1280),
                  *(_DWORD *)(v6 + 1284),
                  *(_DWORD *)(v6 + 1288),
                  *(_DWORD *)(v6 + 1292),
                  *(_DWORD *)(v6 + 1296));
              }
            }
            CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
            return 1;
          }
        }
      }
    }
    CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
    return 0;
  }
  if ( a5 != 1 )
    return 0;
  v8 = 4 * *(_DWORD *)(a1 + 1280) + 4 * *(_DWORD *)(a1 + 1272);
  v9 = *(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1272);
  v10 = *(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1272);
  v21 = *(_DWORD *)(a1 + 1276);
  if ( !(*(_DWORD *)(a1 + 1280) + *(_DWORD *)(a1 + 1276) + *(_DWORD *)(a1 + 1272)) )
    return 0;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  v11 = CPlayer::_FindItem((void *)v6, 443, v8);
  if ( v8 && !v11
    || (v12 = CPlayer::_FindItem((void *)v6, 444, v9), v9) && !v12
    || (v13 = CPlayer::_FindItem((void *)v6, 445, v10), v10) && !v13
    || (v14 = CPlayer::_FindItem((void *)v6, 446, v21), v21) && !v14
    || !*(_DWORD *)(v6 + 1096)
    || *(_DWORD *)(*(_DWORD *)(v6 + 1096) + 52) < 500 * *(_DWORD *)(v6 + 1280) + 500 * *(_DWORD *)(v6 + 1276) )
  {
    CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
    return 0;
  }
  if ( v8 )
  {
    v15 = CPlayer::_FindItem((void *)v6, 443, v8);
    if ( !v15 || !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v15 + 120))(v15, v6, 16, -v8) )
      CPlayer::_OutofInven(v6, a2, a3, a4, v15);
  }
  if ( v9 )
  {
    v16 = CPlayer::_FindItem((void *)v6, 444, v9);
    if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v16 + 120))(v16, v6, 16, -v9) )
      CPlayer::_OutofInven(v6, a2, a3, a4, v16);
  }
  if ( v10 )
  {
    v17 = CPlayer::_FindItem((void *)v6, 445, v10);
    if ( !v17 || !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v17 + 120))(v17, v6, 16, -v10) )
      CPlayer::_OutofInven(v6, a2, a3, a4, v17);
  }
  if ( v21 )
  {
    v18 = CPlayer::_FindItem((void *)v6, 446, v21);
    if ( !v18 || !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v18 + 120))(v18, v6, 16, -v21) )
      CPlayer::_OutofInven(v6, a2, a3, a4, v18);
  }
  v7 = *(_DWORD *)(v6 + 1096);
  if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v7 + 120))(
          *(_DWORD *)(v6 + 1096),
          v6,
          16,
          -(500 * *(_DWORD *)(v6 + 1280) + 500 * *(_DWORD *)(v6 + 1276))) )
    CPlayer::_OutofInven(v6, a2, a3, a4, v7);
  v19 = CItem::CreateItem(-66, 0, *(_DWORD *)(v6 + 1272), -1);
  if ( v19 )
  {
    if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v19) != 1 )
    {
      CBase::Delete((void *)v19);
      sub_4328C0(
        "Cooking() item insert error (PID (%d), 11(%d), 2(%d)",
        *(_DWORD *)(v6 + 452),
        *(_DWORD *)(v6 + 1272),
        *(_DWORD *)(v6 + 1280) + *(_DWORD *)(v6 + 1276));
    }
  }
  v20 = CItem::CreateItem(-65, 0, *(_DWORD *)(v6 + 1280) + *(_DWORD *)(v6 + 1276), -1);
  if ( v20 )
  {
    if ( CPlayer::_InsertItem((void *)v6, a2, a3, a4, 2, v20) != 1 )
    {
      CBase::Delete((void *)v20);
      sub_4328C0(
        "Cooking() item insert error (PID (%d), 1(%d), 22(%d)",
        *(_DWORD *)(v6 + 452),
        *(_DWORD *)(v6 + 1272),
        *(_DWORD *)(v6 + 1280) + *(_DWORD *)(v6 + 1276));
    }
  }
  CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
  return 1;
}

//----- (0046AAD0) --------------------------------------------------------
int __usercall CPlayer::GetGuild<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v6 = *(_DWORD *)(v5 + 484);
  if ( v6 )
    sub_423980(v6, a2, a3, a4, (volatile LONG *)(v6 + 40));
  CChar::Unlock(v5, a2, a3, a4);
  return v6;
}

//----- (0046AB20) --------------------------------------------------------
void __userpurge CPlayer::SetGuild(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  if ( *(_DWORD *)(v5 + 484) )
    sub_4239C0(*(_DWORD *)(v5 + 484), a2, a3, a4, *(_DWORD *)(v5 + 484) + 36);
  if ( a5 )
    sub_423980(a5, a2, a3, a4, (volatile LONG *)(a5 + 36));
  *(_DWORD *)(v5 + 484) = a5;
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0046AB90) --------------------------------------------------------
int __usercall CPlayer::GetGID<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  int v6; // ST04_4@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  v6 = *(_DWORD *)(v5 + 480);
  CChar::Unlock(v5, a2, a3, a4);
  return v6;
}

//----- (0046ABC0) --------------------------------------------------------
void __userpurge CPlayer::SetGID(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST00_4@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v5 + 480) = a5;
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0046ABF0) --------------------------------------------------------
void __userpurge CPlayer::SetGuildLevel(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST00_4@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v5 + 488) = a5;
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0046AC20) --------------------------------------------------------
void __userpurge CPlayer::SetGuildName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, const char *a5)
{
  int v5; // ST08_4@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  strcpy((char *)(v5 + 492), a5);
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0046AC60) --------------------------------------------------------
void __userpurge CPlayer::SetGuildStandard(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST00_4@1

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v5 + 512) = a5;
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0046AC90) --------------------------------------------------------
void __userpurge CPlayer::SetGuildClass(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6)
{
  int v6; // ST08_4@1

  v6 = a1;
  CChar::Lock(a1, a2, a3, a4);
  *(_DWORD *)(v6 + 516) = a5;
  strcpy((char *)(v6 + 520), a6);
  CChar::Unlock(v6, a2, a3, a4);
}

//----- (0046ACD0) --------------------------------------------------------
int __thiscall CPlayer::GetGuildName(int this)
{
  int v2; // [sp+0h] [bp-8h]@3
  int v3; // [sp+4h] [bp-4h]@1

  v3 = this;
  if ( *(_DWORD *)(this + 516) < 6 && CGuild::GetGuildSkill(*(_DWORD *)(this + 488)) & 1 )
    v2 = v3 + 492;
  else
    v2 = 0;
  return v2;
}

//----- (0046AD20) --------------------------------------------------------
int __thiscall CPlayer::GetGuildStandard(int this)
{
  int v2; // [sp+0h] [bp-8h]@3
  int v3; // [sp+4h] [bp-4h]@1

  v3 = this;
  if ( *(_DWORD *)(this + 516) < 6 && CGuild::GetGuildSkill(*(_DWORD *)(this + 488)) & 2 )
    v2 = *(_DWORD *)(v3 + 512);
  else
    v2 = 0;
  return v2;
}

//----- (0046AD70) --------------------------------------------------------
int __thiscall CPlayer::GetGuildClassTitle(int this)
{
  int v2; // [sp+0h] [bp-8h]@3
  int v3; // [sp+4h] [bp-4h]@1

  v3 = this;
  if ( *(_DWORD *)(this + 516) < 6 && CGuild::GetGuildSkill(*(_DWORD *)(this + 488)) & 1 )
    v2 = v3 + 520;
  else
    v2 = 0;
  return v2;
}

//----- (0046ADC0) --------------------------------------------------------
signed int __userpurge CPlayer::IsDefenseSide<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  signed int result; // eax@2
  int v6; // eax@4
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+4h] [bp-8h]@1
  int v9; // [sp+8h] [bp-4h]@3

  v7 = a1;
  v8 = sub_416230(a2, a3, a4, *(_DWORD *)(a1 + 480));
  if ( v8 )
  {
    v9 = CCastle::GetCastle(a5);
    if ( v9 && ((v6 = CPlayer::GetGID(v7, a2, a3, a4), CCastle::IsLord(v9, a2, a3, a4, v6)) || CGuild::IsAlliancePeriod(v8, a2, a3, a4, v9)) )
    {
      sub_4239C0(v8, a2, a3, a4, v8 + 40);
      result = 1;
    }
    else
    {
      sub_4239C0(v8, a2, a3, a4, v8 + 40);
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0046AE50) --------------------------------------------------------
signed int __userpurge CPlayer::CanAttack<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@3
  DWORD v7; // esi@11
  char v8; // al@13
  int v9; // ST04_4@13
  int v10; // eax@13
  int v11; // eax@23
  int v12; // eax@24
  int v13; // ST04_4@28
  int v14; // eax@28
  int v15; // [sp+14h] [bp-10h]@1

  v15 = a1;
  if ( !a6 && CChar::IsMState(a1, 35184640524544i64) )
    return 0;
  if ( CChar::IsMState(a5, 524288i64) )
    return 0;
  if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a5 + 64))(a5) )
  {
    if ( CSMap::IsOnTile(*(void **)(a5 + 320), a5 + 332, 1048576) )
    {
      if ( CGuild::IsWarringPeriod()
        && CPlayer::GetGID(v15, a2, a3, a4)
        && (v7 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a5 + 220))(a5), v7 != CPlayer::GetGID(v15, a2, a3, v7)) )
      {
        v8 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a5 + 220))(a5);
        v9 = sub_416230(a2, a3, v7, v8);
        v10 = CPlayer::GetGuild(v15, a2, a3, v7);
        result = CGuild::CanAttack(a2, a3, v7, v10, v9);
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    if ( !(*(int (__thiscall **)(_DWORD))(*(_DWORD *)a5 + 60))(a5) )
      goto LABEL_33;
    if ( v15 == a5 )
      return 0;
    if ( CChar::IsGState(v15, 128) && CChar::IsGState(a5, 128) && *(_DWORD *)(v15 + 1512) == *(_DWORD *)(a5 + 1512) )
      return 1;
    if ( CChar::IsGState(v15, 256) || CChar::IsGState(a5, 256) )
    {
      v11 = CChar::IsGState(v15, 256);
      if ( !CSMap::IsOnTile(*(void **)(v15 + 320), v15 + 332, v11 != 0 ? 131072 : 393216) )
      {
        v12 = CChar::IsGState(a5, 256);
        if ( !CSMap::IsOnTile(*(void **)(a5 + 320), a5 + 332, v12 != 0 ? 131072 : 393216) )
          return 1;
      }
    }
    if ( CGuild::IsWarringPeriod()
      && CSMap::IsOnTile(*(void **)(a5 + 320), a5 + 332, 1048576)
      && (v13 = CPlayer::GetGuild(a5, a2, a3, a4), v14 = CPlayer::GetGuild(v15, a2, a3, a4), CGuild::CanAttack(a2, a3, a4, v14, v13)) )
      result = 1;
    else
LABEL_33:
      result = 0;
  }
  return result;
}

//----- (0046B0C0) --------------------------------------------------------
void __userpurge CPlayer::PKKill(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@7
  int v6; // [sp+0h] [bp-4Ch]@1
  char v7; // [sp+4h] [bp-48h]@7
  char v8; // [sp+8h] [bp-44h]@7
  int v9; // [sp+Ch] [bp-40h]@11
  int v10; // [sp+10h] [bp-3Ch]@11
  char v11; // [sp+14h] [bp-38h]@7
  char v12; // [sp+25h] [bp-27h]@7
  char v13; // [sp+36h] [bp-16h]@7
  int v14; // [sp+48h] [bp-4h]@1

  v14 = dword_4D9830;
  v6 = a1;
  if ( dword_4E1174[0] & 1 )
  {
    if ( !CPlayer::IsEState(a5, 16) )
    {
      if ( CChar::IsGState(a5, 256) )
      {
        CPlayer::AddEState(a5, 32);
        CPlayer::DropItemONPKDie(a5, a2, a3, a4);
        CPlayer::Write(a2, a3, a4, a5, 95, (unsigned int)"b");
        if ( !CChar::IsGState(v6, 256) )
        {
          std___Mpunct_wchar_t___do_frac_digits(a5);
          CPlayer::Write(a2, a3, a4, v6, 95, (unsigned int)"bd");
          sub_46B2C0(&v11);
          strncpy(&v11, (const char *)(v6 + 492), 0x11u);
          strncpy(&v12, (const char *)(v6 + 32), 0x11u);
          strncpy(&v13, (const char *)(a5 + 32), 0x11u);
          sub_47E0D0((volatile LONG *)&unk_4E20DC);
          v5 = sub_40EFA0((int)&unk_4E20D0, &v8);
          sub_472800(&unk_4E20D0, (int)&v7, *(_DWORD *)v5, &v11);
          if ( (unsigned int)unknown_libname_10() > 0x14 )
            sub_4727D0((int)&unk_4E20D0);
          sub_47E1C0((volatile LONG *)&unk_4E20DC, a2, a3, a4);
          CDBSocket::Write(a2, a3, a4, 55, (unsigned int)"sss");
        }
      }
      else
      {
        v9 = 0;
        v10 = CPlayer::GetGuild(a5, a2, a3, a4);
        if ( v10 )
        {
          v9 = CCastle::IsAllCastleWarRelation(a2, a3, a4, v10);
          sub_4239C0(v10, a2, a3, a4, v10 + 40);
        }
        if ( v9 )
        {
          CPlayer::AddEState(a5, 256);
        }
        else
        {
          if ( CChar::IsGState(v6, 256) )
          {
            CPlayer::AddEState(a5, 64);
            std___Mpunct_wchar_t___do_frac_digits(v6);
            CPlayer::Write(a2, a3, a4, a5, 95, (unsigned int)"bd");
          }
        }
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0046B2C0) --------------------------------------------------------
void *__thiscall sub_46B2C0(void *this)
{
  void *v2; // ST0C_4@1

  v2 = this;
  memset(this, 0, 0x11u);
  memset((char *)v2 + 17, 0, 0x11u);
  memset((char *)v2 + 34, 0, 0x11u);
  return v2;
}

//----- (0046B310) --------------------------------------------------------
signed int __thiscall CPlayer::GetDropItemMask(int this)
{
  signed int result; // eax@2
  int v2; // [sp+18h] [bp-4h]@1

  v2 = this;
  if ( CChar::IsBState(this, 16i64) )
  {
    result = 3328;
  }
  else
  {
    if ( CChar::IsBState(v2, 32i64) )
    {
      result = 3584;
    }
    else
    {
      if ( CChar::IsBState(v2, 64i64) )
        result = 3072;
      else
        result = 0;
    }
  }
  return result;
}

//----- (0046B390) --------------------------------------------------------
int __userpurge CPlayer::AddBuff<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  int v6; // [sp+Ch] [bp-Ch]@1

  v6 = a1;
  if ( a5 )
  {
    if ( CChar::IsMState(a1, 524288i64) || CChar::IsMStateEx(v6, 131072) && CBuff::IsPrty(a5, 4) )
    {
      if ( a5 )
        std__locale__facet___scalar_deleting_destructor_(1);
      result = 0;
    }
    else
    {
      result = CChar::AddBuff(v6, a2, a3, a4, a5);
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);

//----- (0046B420) --------------------------------------------------------
int __usercall CPlayer::PKBulletinInfoSend<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@3
  int v5; // eax@4
  char v7; // [sp-34h] [bp-54h]@4
  __int16 v8; // [sp-4h] [bp-24h]@4
  char v9; // [sp-2h] [bp-22h]@4
  char v10; // [sp-1h] [bp-21h]@4
  int v11; // [sp+8h] [bp-18h]@1
  char v12; // [sp+Ch] [bp-14h]@3
  char v13; // [sp+10h] [bp-10h]@2
  void *v14; // [sp+14h] [bp-Ch]@2
  char *v15; // [sp+18h] [bp-8h]@2
  void *v16; // [sp+1Ch] [bp-4h]@2

  v11 = a1;
  sub_47DE70((volatile LONG *)&unk_4E20DC);
  if ( !sub_472780((int)&unk_4E20D0) )
  {
    v16 = CIOBuffer::Alloc();
    v14 = v16;
    *((_BYTE *)v16 + 2) = 12;
    v15 = (char *)v14 + 4;
    sub_40EFA0((int)&unk_4E20D0, &v13);
    while ( 1 )
    {
      v4 = sub_430C20((int)&unk_4E20D0, &v12);
      if ( !(unsigned __int8)sub_47D070(v4) )
        break;
      v5 = sub_40F040((int *)&v13);
      memcpy(&v7, (const void *)v5, 0x30u);
      v8 = *(_WORD *)(v5 + 48);
      v9 = *(_BYTE *)(v5 + 50);
      a4 = v5 + 51;
      a3 = (DWORD)&v10;
      v15 = (char *)sub_47A260(v15, v7);
      sub_41CAB0((int *)&v13);
    }
    *(_DWORD *)&v8 = unknown_libname_10();
    sub_496F10(a2, a3, a4, (char *)v14 + 3, (unsigned int)"b");
    *(_WORD *)v14 = (_WORD)v15 - (_WORD)v14;
    *((_DWORD *)v16 + 2000) = *(_WORD *)v14;
    *(_DWORD *)&v8 = v16;
    CSocket::_CSocket(*(_DWORD *)(v11 + 1676), a2, a3, a4, (int)v16);
  }
  return sub_47E080((volatile LONG *)&unk_4E20DC, a2, a3, a4);
}
// 47A260: using guessed type _DWORD __cdecl sub_47A260(_DWORD, char);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0046B530) --------------------------------------------------------
__int32 __usercall CPlayer::PKBulletinLoad<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  __int32 result; // eax@1
  int v5; // eax@5
  int v6; // eax@5
  int i; // [sp+0h] [bp-44h]@3
  int v8; // [sp+4h] [bp-40h]@1
  char v9; // [sp+8h] [bp-3Ch]@3
  char v10; // [sp+19h] [bp-2Bh]@5
  char v11; // [sp+2Ah] [bp-1Ah]@5
  int v12; // [sp+3Ch] [bp-8h]@1
  int v13; // [sp+40h] [bp-4h]@1

  v12 = dword_4D9830;
  v13 = 0;
  result = sub_418960(a4, &v13);
  v8 = result;
  if ( v13 > 0 )
  {
    sub_46B2C0(&v9);
    sub_47E0D0((volatile LONG *)&unk_4E20DC);
    for ( i = 0; i < v13; ++i )
    {
      v5 = sub_497620(v8, (int)&v9);
      v6 = sub_497620(v5, (int)&v10);
      v8 = sub_497620(v6, (int)&v11);
      sub_4727A0((int)&unk_4E20D0, &v9);
    }
    result = sub_47E1C0((volatile LONG *)&unk_4E20DC, a1, a2, a3);
  }
  return result;
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0046B5F0) --------------------------------------------------------
void __usercall CPlayer::ScanONPKPlayer(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  signed int v3; // [sp+0h] [bp-14h]@9
  int v4; // [sp+4h] [bp-10h]@16
  int i; // [sp+8h] [bp-Ch]@13
  int v6; // [sp+Ch] [bp-8h]@5
  int v7; // [sp+10h] [bp-4h]@3

  if ( dword_4E1174[0] & 1 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a1, a2, a3);
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a1, a2, a3);
    CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
    CIOCriticalSection::Leave((int)&unk_4E2098, a1, a2, a3);
    v7 = dword_4E2004;
    while ( (int *)v7 != &dword_4E2004 )
    {
      v6 = v7 - 428;
      v7 = *(_DWORD *)v7;
      if ( CChar::IsGState(v6, 256) )
      {
        if ( *(_DWORD *)(v6 + 536) > 0 )
        {
          if ( CSMap::IsOnTile(*(void **)(v6 + 320), v6 + 332, 393216) )
          {
            --*(_DWORD *)(v6 + 536);
          }
          else
          {
            if ( *(_DWORD *)(v6 + 536) <= 3 )
              v3 = *(_DWORD *)(v6 + 536);
            else
              v3 = 3;
            *(_DWORD *)(v6 + 536) -= v3;
          }
        }
        for ( i = sub_4934F0(*(_DWORD *)(v6 + 320), a1, a2, a3, v6 + 324, 10); i; i = CBaseList::Pop(i, a1, a2, a3) )
        {
          v4 = unknown_libname_7();
          if ( !CChar::IsGState(v4, 48) )
          {
            if ( v6 != v4 )
              CPlayer::Write(a1, a2, a3, v4, 95, (unsigned int)"b");
          }
        }
      }
    }
    CIOCriticalSection::Leave((int)&unk_4E2078, a1, a2, a3);
  }
}
// 4E2004: using guessed type int dword_4E2004;

//----- (0046B770) --------------------------------------------------------
void __usercall CPlayer::EventBuff(DWORD ebx0<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a1)
{
  int v4; // edx@8
  void *v5; // eax@9
  int v6; // ST0C_4@9
  int v7; // [sp+0h] [bp-1Ch]@8
  int v8; // [sp+4h] [bp-18h]@6
  int v9; // [sp+8h] [bp-14h]@3
  time_t v10; // [sp+Ch] [bp-10h]@1
  int v11; // [sp+10h] [bp-Ch]@1
  int v12; // [sp+14h] [bp-8h]@1
  int v13; // [sp+18h] [bp-4h]@1

  v11 = 112;
  v12 = 113;
  v13 = 114;
  v10 = time(0);
  if ( a1 != 4 )
  {
    if ( a1 )
      v9 = a1 - 1;
    else
      v9 = sub_406E10(0, 2);
    dword_4E1FF8 = *(&v11 + v9);
    dword_4E1FF4 = v10 + ((dword_4E1174[0] & 2) != 0 ? 300 : 1800);
  }
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, ebx0, a2, a3);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, ebx0, a2, a3);
  CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((int)&unk_4E2098, ebx0, a2, a3);
  v8 = dword_4E2004;
  while ( (int *)v8 != &dword_4E2004 )
  {
    v4 = v8 - 428;
    v7 = v8 - 428;
    v8 = *(_DWORD *)v8;
    CChar::CancelBuffPrty(v7, v4, ebx0, a2, a3, 128);
    if ( a1 != 4 )
    {
      v5 = CBuff::CreateBuff(dword_4E1FF8, dword_4E1FF4 - v10, 0, v7);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)v6 + 180))(v6, v5);
    }
  }
  CIOCriticalSection::Leave((int)&unk_4E2078, ebx0, a2, a3);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4E1FF4: using guessed type int dword_4E1FF4;
// 4E1FF8: using guessed type int dword_4E1FF8;
// 4E2004: using guessed type int dword_4E2004;

//----- (0046B890) --------------------------------------------------------
void __usercall CPlayer::DropItemONPKDie(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // eax@5
  int v5; // [sp+0h] [bp-28h]@1
  char v6; // [sp+4h] [bp-24h]@7
  int v7; // [sp+8h] [bp-20h]@14
  int v8; // [sp+Ch] [bp-1Ch]@14
  int v9; // [sp+10h] [bp-18h]@14
  int v10; // [sp+14h] [bp-14h]@14
  int v11; // [sp+18h] [bp-10h]@5
  int v12; // [sp+1Ch] [bp-Ch]@5
  int v13; // [sp+20h] [bp-8h]@8
  char v14; // [sp+24h] [bp-4h]@5

  v5 = a1;
  if ( sub_406E10(1, 100) <= 10 )
  {
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v5 + 1020), a2, a3, a4);
    if ( sub_446110() )
    {
      CIOCriticalSection::Leave(v5 + 1020, a2, a3, a4);
    }
    else
    {
      v4 = unknown_libname_10();
      v12 = sub_406E10(0, v4 - 1);
      sub_40F070(v5 + 1068, &v14);
      v11 = 0;
      while ( v11 < v12 )
      {
        ++v11;
        sub_446090((int *)&v14, (int)&v6, 0);
      }
      v13 = *(_DWORD *)(sub_420250((int *)&v14) + 4);
      if ( *(_DWORD *)(*(_DWORD *)(v13 + 40) + 72) == 20 && CItem::IsState(v13, 1) )
      {
        CIOCriticalSection::Leave(v5 + 1020, a2, a3, a4);
      }
      else
      {
        if ( CItem::IsState(v13, 1) )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v13 + 100))(v13, v5);
        if ( (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v13 + 144))(v13, *(_DWORD *)(v13 + 52), v5) )
        {
          CChar::GetDropPt(v5, (int)&v7);
          v9 = v7 >> 5;
          v10 = v8 >> 5;
          if ( sub_491360(*(void **)(v5 + 320), a2, a3, a4, v13, (int)&v9) )
          {
            (*(void (__thiscall **)(int, int, int *, int *, signed int, _DWORD, _DWORD))(*(_DWORD *)v13 + 124))(
              v13,
              v5,
              &v7,
              &v9,
              1,
              0,
              0);
            CPlayer::_OutofInven(v5, a2, a3, a4, v13);
          }
        }
        CIOCriticalSection::Leave(v5 + 1020, a2, a3, a4);
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0046BA30) --------------------------------------------------------
void __userpurge CPlayer::Transform(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, signed int a6)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( a5 == 2 )
  {
    CPlayer::FreeTransform(a1, a2, a3, a4);
  }
  else
  {
    if ( a6 >= 1 )
    {
      if ( a6 <= 3 )
      {
        if ( !CChar::IsGState(a1, 48) )
        {
          if ( CSMap::IsOnTile(*(void **)(v6 + 320), v6 + 332, 131072) )
          {
            CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
          }
          else
          {
            if ( *(_DWORD *)(v6 + 580) >= dword_4D669C[a6] )
            {
              CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v6 + 1020), a2, a3, a4);
              if ( !CChar::IsGState(v6, 512) )
              {
                if ( a5 == 1 )
                {
                  if ( !*(_DWORD *)(v6 + 1116) )
                  {
                    if ( *(_DWORD *)(v6 + 1108) )
                      CItemTransform::ApplyTransform(*(_DWORD *)(v6 + 1108), a2, a3, a4, v6, a6);
                  }
                }
                else
                {
                  if ( !a5 )
                  {
                    if ( *(_DWORD *)(v6 + 1116) )
                      CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
                    else
                      CChar::WriteInSight(a2, a3, a4, v6, 61, (unsigned int)"dbb");
                  }
                }
              }
              CIOCriticalSection::Leave(v6 + 1020, a2, a3, a4);
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v6, 67, (unsigned int)"b");
            }
          }
        }
      }
    }
  }
}
// 4D669C: using guessed type int dword_4D669C[];

//----- (0046BB90) --------------------------------------------------------
void __usercall CPlayer::FreeTransform(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  if ( CChar::IsGState(v4, 512) )
  {
    if ( *(_DWORD *)(v4 + 1108) )
      CItemTransform::FreeTransform(*(_DWORD *)(v4 + 1108), v4);
  }
  CIOCriticalSection::Leave(v4 + 1020, a2, a3, a4);
}

//----- (0046BBF0) --------------------------------------------------------
void __usercall CPlayer::BreakStandard(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 1020), a2, a3, a4);
  if ( *(_DWORD *)(v4 + 1116) )
    CItemStandard::Broken(*(_DWORD *)(v4 + 1116), a2, a3, a4, v4, 1);
  CIOCriticalSection::Leave(v4 + 1020, a2, a3, a4);
}

//----- (0046BC40) --------------------------------------------------------
void __usercall CPlayer::RefreshStandardBuff(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@12
  int v5; // [sp+0h] [bp-18h]@1
  int v6; // [sp+4h] [bp-14h]@8
  int v7; // [sp+8h] [bp-10h]@6
  int v8; // [sp+Ch] [bp-Ch]@6
  int i; // [sp+10h] [bp-8h]@6
  int v10; // [sp+14h] [bp-4h]@5

  v5 = a1;
  if ( CPlayer::IsWearBuffStandard(a1) )
  {
    if ( CGuild::IsWarringPeriod() )
    {
      if ( CSMap::IsOnTile(*(void **)(v5 + 320), v5 + 332, 1048576) )
      {
        CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v5 + 1020), a2, a3, a4);
        v10 = *(_DWORD *)(v5 + 1116);
        if ( v10 )
        {
          v7 = *(_DWORD *)(*(_DWORD *)(v10 + 40) + 160);
          v8 = *(_DWORD *)(*(_DWORD *)(v10 + 40) + 164);
          CIOCriticalSection::Leave(v5 + 1020, a2, a3, a4);
          for ( i = sub_4934F0(*(_DWORD *)(v5 + 320), a2, a3, a4, v5 + 324, 10); i; i = CBaseList::Pop(i, a2, a3, a4) )
          {
            v6 = unknown_libname_7();
            if ( v6 != v5 )
            {
              if ( CChar::IsNormal(v6) )
              {
                if ( *(_DWORD *)(v5 + 480) == *(_DWORD *)(v6 + 480) )
                {
                  if ( !CPlayer::IsWearBuffStandard(v6) )
                  {
                    v4 = CBuff::CreateBuff(v7, 2, v8, v5);
                    (*(void (__thiscall **)(int, void *))(*(_DWORD *)v6 + 180))(v6, v4);
                  }
                }
              }
            }
          }
        }
        else
        {
          CIOCriticalSection::Leave(v5 + 1020, a2, a3, a4);
        }
      }
    }
  }
}

//----- (0046BD80) --------------------------------------------------------
bool __thiscall CPlayer::IsWearBuffStandard(int this)
{
  return *(_DWORD *)(this + 1120) >= 0 && CPlayer::IsWState(this, 13);
}

//----- (0046BDC0) --------------------------------------------------------
void __userpurge CPlayer::Bless(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, signed int a6)
{
  __int64 v6; // qax@13
  void *v7; // eax@22
  __int64 v8; // [sp+0h] [bp-1Ch]@22
  int v9; // [sp+10h] [bp-Ch]@1
  int v10; // [sp+14h] [bp-8h]@13
  int v11; // [sp+18h] [bp-4h]@20

  v9 = a1;
  if ( *(_DWORD *)(a1 + 60) >= 6 )
  {
    if ( a5 >= 0 )
    {
      if ( a5 <= 1 )
      {
        if ( a6 >= 1 )
        {
          if ( a6 <= 5 )
          {
            if ( a6 % 2 )
            {
              if ( a5 || !CChar::IsBState(a1, 128i64) )
              {
                if ( a5 != 1 || (v8 = CChar::IsBState(v9, 256i64), !v8) )
                {
                  v6 = (signed int)((a5 != 0 ? 6 : 11) * *(_DWORD *)(v9 + 60) * *(_DWORD *)(v9 + 60));
                  v10 = a6 * (((_DWORD)v6 - HIDWORD(v6)) >> 1);
                  if ( a6 == 3 )
                  {
                    v10 = 9 * v10 / 10;
                  }
                  else
                  {
                    if ( a6 == 5 )
                      v10 = 8 * v10 / 10;
                  }
                  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v9 + 1020), a2, a3, a4);
                  if ( *(_DWORD *)(v9 + 1096) && *(_DWORD *)(*(_DWORD *)(v9 + 1096) + 52) >= v10 )
                  {
                    v11 = *(_DWORD *)(v9 + 1096);
                    if ( !(*(int (__thiscall **)(_DWORD, int, signed int, int))(*(_DWORD *)v11 + 120))(
                            *(_DWORD *)(v9 + 1096),
                            v9,
                            39,
                            -v10) )
                      CPlayer::_OutofInven(v9, a2, a3, a4, v11);
                    CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
                    v7 = CBuff::CreateBuff((a5 != 0) + 16, 3600 * a6, v8, SHIDWORD(v8));
                    (*(void (__thiscall **)(int, void *))(*(_DWORD *)v9 + 180))(v9, v7);
                  }
                  else
                  {
                    CIOCriticalSection::Leave(v9 + 1020, a2, a3, a4);
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

//----- (0046BF60) --------------------------------------------------------
LONG __userpurge CPlayer::SetSystemCode<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, signed int a4, int a5)
{
  LONG result; // eax@7

  if ( a4 >= 0 )
  {
    if ( a4 < 15 )
    {
      if ( a5 )
        *(_DWORD *)dword_4E1174 |= 1 << a4;
      else
        *(_DWORD *)dword_4E1174 &= ~(1 << a4);
      result = CPlayer::WriteAll(a1, a2, a3, 68, (unsigned int)&unk_4B967C);
    }
  }
  return result;
}

//----- (0046BFD0) --------------------------------------------------------
LONG __userpurge CPlayer::SetEventCode<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, signed int a4, int a5)
{
  LONG result; // eax@7

  if ( a4 >= 0 )
  {
    if ( a4 < 9 )
    {
      if ( a5 )
        dword_4E1178 |= 1 << a4;
      else
        dword_4E1178 &= ~(1 << a4);
      result = CPlayer::WriteAll(a1, a2, a3, 68, (unsigned int)&unk_4B967C);
    }
  }
  return result;
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046C040) --------------------------------------------------------
int __thiscall CPlayer::IsPCBang(int this)
{
  int result; // eax@2

  if ( dword_4E35B8 )
    result = 0;
  else
    result = *(_DWORD *)(*(_DWORD *)(this + 1676) + 156) & 0x200;
  return result;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (0046C070) --------------------------------------------------------
void __userpurge CPlayer::Shortcut(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char *a5, unsigned int a6)
{
  int v6; // [sp+2Ch] [bp-4h]@1

  v6 = dword_4D9830;
  if ( a4 )
  {
    if ( sub_4975F0(a1, a2, a3, a5, a6, (unsigned int)"m") != a5 )
      CDBSocket::Write(a1, a2, a3, 67, (unsigned int)"bdm");
  }
  else
  {
    CDBSocket::Write(a1, a2, a3, 67, (unsigned int)&unk_4B967C);
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0046C100) --------------------------------------------------------
void __userpurge CPlayer::OnGetMyTelPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@3
  int v7; // eax@3
  int v8; // eax@3
  int v9; // eax@3
  int v10; // eax@3
  int v11; // [sp+0h] [bp-90h]@1
  char v12; // [sp+4h] [bp-8Ch]@3
  char v13; // [sp+Ch] [bp-84h]@3
  char v14; // [sp+28h] [bp-68h]@3
  int i; // [sp+54h] [bp-3Ch]@1
  void *v16; // [sp+58h] [bp-38h]@1
  char v17; // [sp+5Ch] [bp-34h]@3
  int v18; // [sp+74h] [bp-1Ch]@1
  int v19; // [sp+78h] [bp-18h]@1
  void *v20; // [sp+7Ch] [bp-14h]@1
  char v21; // [sp+80h] [bp-10h]@1
  char v22; // [sp+84h] [bp-Ch]@3
  char v23; // [sp+88h] [bp-8h]@3
  char v24; // [sp+8Ch] [bp-4h]@3

  v18 = dword_4D9830;
  v11 = a1;
  v20 = CIOBuffer::Alloc();
  v16 = v20;
  *((_BYTE *)v20 + 2) = 31;
  v19 = (int)((char *)v16 + 4);
  CChar::Lock(v11, a2, a3, a4);
  sub_46C290((int)&v21);
  for ( i = 0; i < a5; ++i )
  {
    v6 = sub_497620(a6, (int)&v17);
    v7 = sub_418960(v6, &v21);
    v8 = sub_47A240(v7, &v22);
    v9 = sub_47A240(v8, &v23);
    a6 = sub_47A240(v9, &v24);
    v19 = sub_497660(v19, (int)&v17);
    sub_40FD10(&v13, &v17);
    v10 = (int)sub_472950(&v14, (int)&v13, (int)&v21);
    sub_471D20(v11 + 1500, (int)&v12, v10);
    sub_46C2D0((int)&v14);
    sub_40F780((int)&v13);
  }
  CChar::Unlock(v11, a2, a3, a4);
  sub_496F10(a2, a3, a4, (char *)v16 + 3, (unsigned int)"b");
  *(_WORD *)v16 = v19 - (_WORD)v16;
  *((_DWORD *)v20 + 2000) = *(_WORD *)v16;
  CSocket::_CSocket(*(_DWORD *)(v11 + 1676), a2, a3, a4, (int)v20);
}
// 418960: using guessed type _DWORD __cdecl sub_418960(_DWORD, _DWORD);
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (0046C290) --------------------------------------------------------
int __thiscall sub_46C290(int this)
{
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  return this;
}

//----- (0046C2D0) --------------------------------------------------------
int __thiscall sub_46C2D0(int this)
{
  return sub_40F780(this);
}

//----- (0046C2F0) --------------------------------------------------------
void __userpurge CPlayer::SetMyTelPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  void *v7; // eax@10
  int v8; // eax@15
  void *v9; // eax@21
  void *v10; // eax@23
  int v11; // eax@25
  int v12; // eax@25
  void *v13; // eax@32
  int v14; // eax@37
  int v15; // [sp+4h] [bp-174h]@1
  char v16; // [sp+8h] [bp-170h]@32
  char v17; // [sp+Ch] [bp-16Ch]@32
  char v18; // [sp+28h] [bp-150h]@25
  char v19; // [sp+2Ch] [bp-14Ch]@25
  char v20; // [sp+34h] [bp-144h]@25
  char v21; // [sp+50h] [bp-128h]@25
  char v22; // [sp+7Ch] [bp-FCh]@23
  char v23; // [sp+80h] [bp-F8h]@23
  char v24; // [sp+84h] [bp-F4h]@23
  char v25; // [sp+A0h] [bp-D8h]@21
  char v26; // [sp+A4h] [bp-D4h]@21
  char v27; // [sp+C0h] [bp-B8h]@16
  char v28; // [sp+DFh] [bp-99h]@16
  char v29; // [sp+E0h] [bp-98h]@15
  char v30; // [sp+E8h] [bp-90h]@15
  char v31; // [sp+104h] [bp-74h]@15
  char v32; // [sp+130h] [bp-48h]@10
  char v33; // [sp+134h] [bp-44h]@10
  char v34; // [sp+150h] [bp-28h]@32
  int v35; // [sp+154h] [bp-24h]@37
  char *v36; // [sp+158h] [bp-20h]@19
  int v37; // [sp+15Ch] [bp-1Ch]@21
  char v38; // [sp+160h] [bp-18h]@10
  char v39; // [sp+164h] [bp-14h]@15
  char *v40; // [sp+174h] [bp-4h]@1
  char *v41; // [sp+184h] [bp+Ch]@1

  v15 = a1;
  v41 = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"s");
  if ( sub_4979C0(v40) )
  {
    CChar::Lock(v15, a2, a3, a4);
    switch ( a5 )
    {
      case 0:
        if ( CSMap::IsValidTile(*(void **)(v15 + 320), v15 + 332, 1179648)
          && (*(_DWORD *)(v15 + 332) <= 17000
           || *(_DWORD *)(v15 + 332) >= 23000
           || *(_DWORD *)(v15 + 336) <= 64000
           || *(_DWORD *)(v15 + 336) >= 70000) )
        {
          sub_40FD10(&v33, v40);
          sub_4726F0(v15 + 1500, (int)&v38, &v33);
          sub_40F780((int)&v33);
          v7 = sub_430C20(v15 + 1500, &v32);
          if ( (unsigned __int8)sub_47D070(v7) )
          {
            CPlayer::Write(a2, a3, a4, v15, 68, (unsigned int)"bb");
          }
          else
          {
            if ( CPlayer::RemoveItem(v15, a2, a3, a4, 9, 509, 1) || CPlayer::RemoveItem(v15, a2, a3, a4, 9, 510, 1) )
            {
              sub_46C920(&v39, *(_DWORD *)(v15 + 316), v15 + 332, *(_DWORD *)(v15 + 340));
              sub_40FD10(&v30, v40);
              v8 = (int)sub_472950(&v31, (int)&v30, (int)&v39);
              sub_471D20(v15 + 1500, (int)&v29, v8);
              sub_46C2D0((int)&v31);
              sub_40F780((int)&v30);
              CDBSocket::Write(a2, a3, a4, 71, (unsigned int)"dbsbddd");
            }
          }
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v15, 68, (unsigned int)"bb");
        }
        break;
      case 1:
        sub_40FD10(&v27, v40);
        v28 = sub_472690(v15 + 1500, &v27) == 0;
        sub_40F780((int)&v27);
        if ( !v28 )
          CDBSocket::Write(a2, a3, a4, 71, (unsigned int)"dbs");
        break;
      case 2:
        sub_4975F0(a2, a3, a4, v41, a7, (unsigned int)"s");
        if ( sub_4979C0(v36) )
        {
          sub_40FD10(&v26, v36);
          sub_4726F0(v15 + 1500, (int)&v37, &v26);
          sub_40F780((int)&v26);
          v9 = sub_430C20(v15 + 1500, &v25);
          if ( (unsigned __int8)sub_47D070(v9) )
          {
            CPlayer::Write(a2, a3, a4, v15, 68, (unsigned int)"bb");
          }
          else
          {
            sub_40FD10(&v24, v40);
            v37 = *(_DWORD *)sub_4726F0(v15 + 1500, (int)&v23, &v24);
            sub_40F780((int)&v24);
            v10 = sub_430C20(v15 + 1500, &v22);
            if ( !(unsigned __int8)unknown_libname_8(v10) )
            {
              sub_40FD10(&v20, v36);
              v11 = sub_420250(&v37);
              v12 = (int)sub_472950(&v21, (int)&v20, v11 + 28);
              sub_471D20(v15 + 1500, (int)&v19, v12);
              sub_46C2D0((int)&v21);
              sub_40F780((int)&v20);
              sub_471F00((void *)(v15 + 1500), (int)&v18, v37);
              CDBSocket::Write(a2, a3, a4, 71, (unsigned int)"dbss");
            }
          }
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v15, 68, (unsigned int)"bb");
        }
        break;
      case 3:
        if ( !CChar::IsGState(v15, 256) )
        {
          if ( *(_DWORD *)(v15 + 332) <= 17000
            || *(_DWORD *)(v15 + 332) >= 23000
            || *(_DWORD *)(v15 + 336) <= 64000
            || *(_DWORD *)(v15 + 336) >= 70000 )
          {
            sub_40FD10(&v17, v40);
            sub_4726F0(v15 + 1500, (int)&v34, &v17);
            sub_40F780((int)&v17);
            v13 = sub_430C20(v15 + 1500, &v16);
            if ( !(unsigned __int8)unknown_libname_8(v13) )
            {
              if ( CPlayer::RemoveItem(v15, a2, a3, a4, 9, 511, 1) || CPlayer::RemoveItem(v15, a2, a3, a4, 9, 512, 1) )
              {
                v14 = sub_420250((int *)&v34);
                v35 = v14 + 28;
                CPlayer::Teleport(v15, a2, a3, a4, *(_DWORD *)(v14 + 28), v14 + 32, *(_DWORD *)(v14 + 40), 0);
              }
            }
          }
        }
        break;
      default:
        break;
    }
    CChar::Unlock(v15, a2, a3, a4);
  }
  else
  {
    CPlayer::Write(a2, a3, a4, v15, 68, (unsigned int)"bb");
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);

//----- (0046C920) --------------------------------------------------------
void *__thiscall sub_46C920(void *this, int a2, int a3, int a4)
{
  void *v5; // ST00_4@1
  int v6; // ecx@1

  v5 = this;
  *(_DWORD *)this = a2;
  v6 = *(_DWORD *)(a3 + 4);
  *((_DWORD *)v5 + 1) = *(_DWORD *)a3;
  *((_DWORD *)v5 + 2) = v6;
  *((_DWORD *)v5 + 3) = a4;
  return v5;
}

//----- (0046C960) --------------------------------------------------------
void __userpurge CPlayer::OnSetMyTelPt(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6)
{
  int v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@4
  char v8; // [sp+Bh] [bp-1h]@2

  v6 = a1;
  if ( !a5 )
  {
    sub_497220(a2, a3, a4, a6, (unsigned int)"bs");
    if ( v8 )
    {
      CPlayer::Write(a2, a3, a4, v6, 32, (unsigned int)"bs");
    }
    else
    {
      CPlayer::Write(a2, a3, a4, v6, 68, (unsigned int)"bb");
      sub_4328C0("CPlayer::OnSetMyTelPt() save myteleport point error.(PID:%d, Lod:%s)", *(_DWORD *)(v6 + 452), v7);
    }
  }
}

//----- (0046C9F0) --------------------------------------------------------
int __thiscall CPlayer::GetPalsyDamage(int this, int a2)
{
  int result; // eax@2
  int v3; // [sp+0h] [bp-4Ch]@35
  int v4; // [sp+4h] [bp-48h]@32
  int v5; // [sp+20h] [bp-2Ch]@20
  signed int v6; // [sp+24h] [bp-28h]@16
  int v7; // [sp+28h] [bp-24h]@10
  signed int v8; // [sp+2Ch] [bp-20h]@6
  int v9; // [sp+30h] [bp-1Ch]@1
  int v10; // [sp+38h] [bp-14h]@8
  int v11; // [sp+3Ch] [bp-10h]@3
  int v12; // [sp+40h] [bp-Ch]@38
  int v13; // [sp+44h] [bp-8h]@34

  v9 = this;
  if ( *(_DWORD *)(this + 596) )
  {
    v11 = *(_DWORD *)(this + 60) - *(_DWORD *)(a2 + 60);
    if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 60))(a2) )
    {
      if ( v11 < 0 )
      {
        if ( abs(v11) >= 7 )
          v7 = 7;
        else
          v7 = abs(v11);
        v10 = dword_4D92DC[v7] * dword_4D9268[*(_DWORD *)(v9 + 596)] / 100;
      }
      else
      {
        if ( v11 >= 7 )
          v8 = 7;
        else
          v8 = v11;
        v10 = dword_4D92BC[v8] * dword_4D9268[*(_DWORD *)(v9 + 596)] / 100;
      }
    }
    else
    {
      if ( v11 < 0 )
      {
        if ( abs(v11) >= 30 )
          v5 = 30;
        else
          v5 = abs(v11);
        v10 = dword_4D9320[v5] * dword_4D9268[*(_DWORD *)(v9 + 596)] / 100;
      }
      else
      {
        if ( v11 >= 7 )
          v6 = 7;
        else
          v6 = v11;
        v10 = dword_4D92FC[v6] * dword_4D9268[*(_DWORD *)(v9 + 596)] / 100;
      }
      if ( CChar::IsBState(a2, 2048i64) )
      {
        v10 += 3;
      }
      else
      {
        if ( CChar::IsBState(a2, 4096i64) )
        {
          v10 += 5;
        }
        else
        {
          if ( CChar::IsBState(a2, 4294967296i64) )
            v10 += 3;
        }
      }
    }
    if ( v10 >= sub_406E10(1, 100) )
    {
      if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 64))(a2) )
        v4 = CChar::GetResist((void *)a2, 4) / 10;
      else
        v4 = CChar::GetResist((void *)a2, 4);
      v13 = v4 & ((v4 < 0) - 1);
      if ( v13 >= 100 )
        v3 = 0;
      else
        v3 = 100 - v13;
      if ( *(_DWORD *)(v9 + 460) == 1 )
        v12 = v3
            * (3 * *(_DWORD *)(v9 + 604)
             + sub_406E10(
                 *(_DWORD *)(v9 + 616) + *(_DWORD *)(v9 + 596) * *(_DWORD *)(v9 + 616) / 20,
                 *(_DWORD *)(v9 + 620) + *(_DWORD *)(v9 + 596) * *(_DWORD *)(v9 + 620) / 10))
            / 100;
      else
        v12 = v3
            * (3 * *(_DWORD *)(v9 + 600)
             + sub_406E10(
                 *(_DWORD *)(v9 + 608) + *(_DWORD *)(v9 + 596) * *(_DWORD *)(v9 + 608) / 20,
                 *(_DWORD *)(v9 + 612) + *(_DWORD *)(v9 + 596) * *(_DWORD *)(v9 + 612) / 10))
            / 100;
      result = v12;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D9268: using guessed type int dword_4D9268[];
// 4D92BC: using guessed type int dword_4D92BC[];
// 4D92DC: using guessed type int dword_4D92DC[];
// 4D92FC: using guessed type int dword_4D92FC[];
// 4D9320: using guessed type int dword_4D9320[];

//----- (0046CD70) --------------------------------------------------------
signed int __usercall CPlayer::CanMove<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  signed int result; // eax@2
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( CChar::IsGState(a1, 38) )
  {
    CPlayer::Write(a2, a3, a4, v5, 33, (unsigned int)"ddddw");
    result = 0;
  }
  else
  {
    if ( CChar::IsGState(v5, 4096) )
    {
      result = 0;
    }
    else
    {
      if ( CChar::IsGState(v5, 8192) )
      {
        CChar::SubGState(v5, 8192);
        *(_DWORD *)(v5 + 1448) = GetTickCount();
      }
      result = 1;
    }
  }
  return result;
}

//----- (0046CE20) --------------------------------------------------------
int __userpurge CPlayer::NPCProcess<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5, int a6, int a7, int a8)
{
  int result; // eax@1
  int v9; // [sp+4h] [bp-8h]@1
  int v10; // [sp+8h] [bp-4h]@1

  v9 = a1;
  result = CNPC::FindNPC(a2, a3, a4, a5);
  v10 = result;
  if ( result )
  {
    if ( (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)result + 188))(result, v9 + 332) )
    {
      if ( !a6 )
        (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 212))(v10, v9, a7, a8);
    }
    result = CIOObject::Release(v10, a2, a3, a4);
  }
  return result;
}

//----- (0046CEA0) --------------------------------------------------------
void __userpurge CPlayer::ChangePlayerName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, const char *a5)
{
  __int64 v5; // qax@1
  void *v6; // eax@9
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+8h] [bp-4h]@1

  v8 = a1;
  v5 = CChar::IsBState(a1, 8388608i64);
  v7 = v5;
  if ( v5 )
  {
    CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bb");
  }
  else
  {
    if ( sub_4979C0(a5) && strlen(a5) <= 0xE && strcmp((const char *)(v8 + 32), a5) )
    {
      if ( CPlayer::FindItem(v8, a2, a3, a4, 639, 1) )
      {
        v6 = CBuff::CreateBuff(97, 1814400, 0, v7);
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 180))(v8, v6);
        CDBSocket::Write(a2, a3, a4, 72, (unsigned int)"ddss");
      }
      else
      {
        CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bb");
      }
    }
    else
    {
      CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bbs");
    }
  }
}
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);

//----- (0046CFC0) --------------------------------------------------------
void __userpurge CPlayer::OnChangePlayerName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6)
{
  int v6; // eax@4
  int v7; // [sp+0h] [bp-28h]@1
  char v8; // [sp+4h] [bp-24h]@4
  int v9; // [sp+Ch] [bp-1Ch]@4
  int v10; // [sp+10h] [bp-18h]@4
  char v11; // [sp+14h] [bp-14h]@4
  int v12; // [sp+1Ch] [bp-Ch]@4
  int v13; // [sp+20h] [bp-8h]@5
  int v14; // [sp+24h] [bp-4h]@5

  v7 = a1;
  if ( a5 )
  {
    CChar::Lock(a1, a2, a3, a4);
    if ( !CBase::IsDeleted(v7) )
    {
      sub_47E0D0((volatile LONG *)&unk_4E2050);
      v12 = v7 + 32;
      sub_470600((int)&unk_4E2044, (const char **)&v12);
      strcpy((char *)(v7 + 32), a6);
      v10 = v7;
      v9 = v7 + 32;
      v6 = sub_420990((int)&v11, (int)&v9, (int)&v10);
      sub_470440((int)&unk_4E2044, (int)&v8, v6);
      sub_47E1C0((volatile LONG *)&unk_4E2050, a2, a3, a4);
    }
    v13 = *(_DWORD *)(v7 + 480);
    v14 = *(_DWORD *)(v7 + 452);
    CChar::Unlock(v7, a2, a3, a4);
    if ( !CPlayer::RemoveItem(v7, a2, a3, a4, 9, 639, 1) )
      sub_4328C0("OnChangePlayerName() RemoveItem Error (%d)", 639);
    CGuild::ChangePlayerName(a2, a3, a4, v13, v14, a6);
    CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bbs");
  }
  else
  {
    CChar::CancelBuff(a1, a2, a3, a4, 97);
    CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"bbs");
  }
}
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (0046D100) --------------------------------------------------------
void __userpurge CPlayer::ChangeGuildName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, const char *a5)
{
  __int64 v5; // qax@1
  void *v6; // eax@12
  int v7; // [sp+0h] [bp-10h]@1
  int v8; // [sp+8h] [bp-8h]@1
  int v9; // [sp+Ch] [bp-4h]@3

  v8 = a1;
  v5 = CChar::IsBState(a1, 16777216i64);
  v7 = v5;
  if ( v5 )
  {
    CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bb");
  }
  else
  {
    v9 = CPlayer::GetGID(v8, a2, a3, a4);
    if ( v9 && *(_DWORD *)(v8 + 452) == v9 )
    {
      if ( sub_4979C0(a5) && strlen(a5) <= 0xE && strcmp((const char *)(v8 + 492), a5) )
      {
        if ( CPlayer::FindItem(v8, a2, a3, a4, 640, 1) )
        {
          v6 = CBuff::CreateBuff(98, 1814400, 0, v7);
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 180))(v8, v6);
          CDBSocket::Write(a2, a3, a4, 73, (unsigned int)"ddss");
        }
        else
        {
          CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bb");
        }
      }
      else
      {
        CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bbs");
      }
    }
    else
    {
      CPlayer::Write(a2, a3, a4, v8, 68, (unsigned int)"bb");
    }
  }
}
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);

//----- (0046D260) --------------------------------------------------------
void __userpurge CPlayer::OnChangeGuildName(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, const char *a6)
{
  int v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@3
  int v8; // [sp+8h] [bp-4h]@3

  v6 = a1;
  if ( a5 )
  {
    CChar::Lock(a1, a2, a3, a4);
    strcpy((char *)(v6 + 492), a6);
    v7 = *(_DWORD *)(v6 + 480);
    v8 = *(_DWORD *)(v6 + 452);
    CChar::Unlock(v6, a2, a3, a4);
    if ( !CPlayer::RemoveItem(v6, a2, a3, a4, 9, 640, 1) )
      sub_4328C0("OnChangeGuildName() RemoveItem Error (%d)", 640);
    CGuild::ChangeGuildName(a2, a3, a4, v7, v8, a6);
    CPlayer::Write(a2, a3, a4, v6, 68, (unsigned int)"bbs");
  }
  else
  {
    CChar::CancelBuff(a1, a2, a3, a4, 98);
    CPlayer::Write(a2, a3, a4, v6, 68, (unsigned int)"bbs");
  }
}

//----- (0046D340) --------------------------------------------------------
void __userpurge CPlayer::EventProcessNPC(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, signed int a6, int a7)
{
  int v7; // [sp+0h] [bp-Ch]@1
  signed int v8; // [sp+8h] [bp-4h]@1

  v7 = a1;
  v8 = 0;
  if ( dword_4E1178 & 0x100 )
  {
    if ( CPlayer::IsState(a5, 1) && a6 > 0 )
    {
      if ( a6 < 650 )
      {
        if ( a6 < 600 )
        {
          if ( a6 < 150 )
          {
            if ( CPlayer::InsertOwnItem(v7, a2, a3, a4, 759, 1) != 1 )
              return;
          }
          else
          {
            if ( CPlayer::InsertOwnItem(v7, a2, a3, a4, 473, 1) != 1 )
              return;
          }
        }
        else
        {
          if ( CPlayer::InsertOwnItem(v7, a2, a3, a4, 362, 1) != 1 )
            return;
        }
      }
      else
      {
        if ( CPlayer::InsertOwnItem(v7, a2, a3, a4, 469, 1) != 1 )
          return;
      }
      v8 = 1;
      CPlayer::SubState((int)&a5, 1);
      CAuthSocket::Write(a2, a3, a4, 17, (unsigned int)"dddd");
    }
    else
    {
      a6 = 0;
    }
    if ( !v8 )
      CPlayer::Write(a2, a3, a4, v7, 68, (unsigned int)"b");
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (0046D490) --------------------------------------------------------
int __stdcall CPlayer::SubState(int a1, int a2)
{
  int result; // eax@1

  result = *(_DWORD *)a1 & ~a2;
  *(_DWORD *)a1 = result;
  return result;
}

//----- (0046D4B0) --------------------------------------------------------
int __stdcall CPlayer::IsState(int a1, int a2)
{
  return a2 & a1;
}

//----- (0046D4D0) --------------------------------------------------------
signed int __userpurge CPlayer::InsertOwnItem<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // edx@4
  int v8; // [sp+0h] [bp-18h]@1
  int v9; // [sp+4h] [bp-14h]@3

  v8 = a1;
  if ( a5 == 31 )
  {
    result = 0;
  }
  else
  {
    v9 = CItem::CreateOwnItem(a5, 0, a6, -1);
    if ( v9 )
    {
      CIOObject::AddRef(v9, a2, a3, a4);
      if ( (CPlayer::InsertItem(v8, v7, a2, a3, a4, 3, v9) == 0) == 1 )
      {
        CBase::Delete((void *)v9);
        result = 2;
      }
      else
      {
        CIOObject::Release(v9, a2, a3, a4);
        result = 1;
      }
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (0046D570) --------------------------------------------------------
void __userpurge CPlayer::ExchangeDanjiToItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-8h]@1
  signed int v7; // [sp+4h] [bp-4h]@1

  v6 = a1;
  v7 = sub_406E10(1, 1000);
  if ( v7 > 200 )
  {
    if ( v7 > 550 )
    {
      if ( v7 > 700 )
      {
        if ( v7 > 750 )
        {
          if ( v7 > 900 )
          {
            if ( v7 > 940 )
            {
              if ( v7 > 955 )
              {
                if ( v7 > 970 )
                {
                  if ( v7 > 980 )
                  {
                    if ( v7 > 990 )
                    {
                      if ( v7 > 995 )
                      {
                        if ( a5 )
                          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 523, 1);
                        else
                          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 221, 1);
                      }
                      else
                      {
                        if ( a5 )
                          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 332, 1);
                        else
                          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 523, 1);
                      }
                    }
                    else
                    {
                      if ( a5 )
                        CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 329, 1);
                      else
                        CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 332, 1);
                    }
                  }
                  else
                  {
                    if ( a5 )
                      CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 331, 1);
                    else
                      CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 329, 1);
                  }
                }
                else
                {
                  if ( a5 )
                    CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 327, 1);
                  else
                    CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 331, 1);
                }
              }
              else
              {
                if ( a5 )
                  CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 220, 1);
                else
                  CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 327, 1);
              }
            }
            else
            {
              if ( a5 )
                CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 241, 10);
              else
                CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 638, 1);
            }
          }
          else
          {
            if ( a5 )
              CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 447, 10);
            else
              CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 517, 10);
          }
        }
        else
        {
          if ( a5 )
            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 207, 1);
          else
            CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 241, 10);
        }
      }
      else
      {
        if ( a5 )
          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 206, 1);
        else
          CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 447, 10);
      }
    }
    else
    {
      if ( a5 )
        CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 31, 10000);
      else
        CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 31, 20000);
    }
  }
  else
  {
    if ( a5 )
      CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 48, 100);
    else
      CPlayer::ExchahgeItem(v6, a2, a3, a4, a6, 1, 2, 48, 150);
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0046D8B0) --------------------------------------------------------
void __userpurge CPlayer::SiegeGunProcess(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v8; // ST34_4@24
  int v9; // eax@29
  int v10; // eax@29
  int v11; // [sp+10h] [bp-10h]@1
  int v12; // [sp+18h] [bp-8h]@18
  int v13; // [sp+1Ch] [bp-4h]@1

  v11 = a1;
  v13 = CNPC::FindNPC(a2, a3, a4, a6);
  if ( v13 )
  {
    CChar::Lock(v11, a2, a3, a4);
    if ( (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v13 + 188))(v13, v11 + 332) )
    {
      if ( a5 )
      {
        if ( a7 )
        {
          if ( a7 == 1 )
          {
            *(_DWORD *)(v11 + 1640) = a6;
            (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v13 + 220))(v13, v11, 1);
          }
          else
          {
            if ( a7 == 2 )
            {
              *(_DWORD *)(v11 + 1640) = 0;
              (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v13 + 220))(v13, v11, 0);
            }
            else
            {
              sub_4328C0("SiegeGunProcess Unknown Sequence : ", a7);
            }
          }
        }
        else
        {
          v12 = CMonster::FindMonster(a2, a3, a4, *(_DWORD *)(v13 + 504));
          if ( v12 )
          {
            if ( CChar::IsBState(v11, 274877906944i64)
              || CPlayerSkill::IsSkill((void *)(v11 + 624), 80)
              || CPlayerSkill::IsSkill((void *)(v11 + 624), 81) )
            {
              if ( *(_DWORD *)(v12 + 528) )
              {
                v8 = sub_450810(a2, a3, a4, *(_DWORD *)(v12 + 528));
                CPlayer::Write(a2, a3, a4, v11, 68, (unsigned int)"bs");
                sub_4239C0(v12, a2, a3, a4, v12 + 352);
                sub_4239C0(v8, a2, a3, a4, v8 + 352);
              }
              else
              {
                if ( *(_DWORD *)(v12 + 524) == *(_DWORD *)(v11 + 480) )
                {
                  if ( CChar::IsGState(v13, 64) )
                  {
                    CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
                  }
                  else
                  {
                    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v11 + 104))(v11, 524288, 65536);
                    std___Mpunct_wchar_t___do_frac_digits(v12);
                    CPlayer::Write(a2, a3, a4, v11, 1, (unsigned int)"bdwws");
                    std___Mpunct_wchar_t___do_frac_digits(v12);
                    CChar::WriteInSight(a2, a3, a4, v11, 1, (unsigned int)"bds");
                    v9 = std___Mpunct_wchar_t___do_frac_digits(v11);
                    CNPCSiegeGunStone::SetOperator(v13, a2, a3, a4, v9);
                    *(_DWORD *)(v11 + 1636) = std___Mpunct_wchar_t___do_frac_digits(v12);
                    v10 = std___Mpunct_wchar_t___do_frac_digits(v11);
                    CMonsterSiegeGun::SetOperator(v12, a2, a3, a4, v10);
                    *(_DWORD *)(v11 + 1640) = a6;
                    sub_4239C0(v12, a2, a3, a4, v12 + 352);
                  }
                }
                else
                {
                  CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
                  sub_4239C0(v12, a2, a3, a4, v12 + 352);
                }
              }
            }
            else
            {
              CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
              sub_4239C0(v12, a2, a3, a4, v12 + 352);
            }
          }
        }
      }
      else
      {
        if ( a7 )
        {
          if ( a7 == 1 )
          {
            *(_DWORD *)(v11 + 1640) = a6;
            (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v13 + 216))(v13, v11, 1, a8);
          }
          else
          {
            if ( a7 == 2 )
            {
              *(_DWORD *)(v11 + 1640) = 0;
              (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v13 + 216))(v13, v11, 0, 0);
            }
            else
            {
              sub_4328C0("SiegeGunProcess Unknown Sequence : ", a7);
            }
          }
        }
        else
        {
          sub_4490A0(a2, a3, a4, a6, v11);
        }
      }
    }
    CIOObject::Release(v13, a2, a3, a4);
    CChar::Unlock(v11, a2, a3, a4);
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0046DC50) --------------------------------------------------------
int __userpurge CPlayer::SiegeGunControl<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, int a7)
{
  int result; // eax@1
  int v8; // [sp+4h] [bp-1Ch]@1
  int v9; // [sp+8h] [bp-18h]@4
  int v10; // [sp+Ch] [bp-14h]@3
  int v11; // [sp+10h] [bp-10h]@8
  int v12; // [sp+14h] [bp-Ch]@8
  int v13; // [sp+18h] [bp-8h]@1
  char v14; // [sp+1Fh] [bp-1h]@3

  v8 = a1;
  result = CMonster::FindMonster(a2, a3, a4, *(_DWORD *)(a1 + 1636));
  v13 = result;
  if ( result )
  {
    v14 = 0;
    v10 = 0;
    CChar::Lock(v8, a2, a3, a4);
    switch ( a5 )
    {
      case 0:
      case 1:
        sub_497220(a2, a3, a4, a6, (unsigned int)"d");
        v9 = CNPC::FindNPC(a2, a3, a4, *(_DWORD *)(v8 + 1640));
        if ( v9 )
        {
          CNPCSiegeGunStone::SetOperator(v9, a2, a3, a4, 0);
          CIOObject::Release(v9, a2, a3, a4);
        }
        CMonsterSiegeGun::SetOperator(v13, a2, a3, a4, 0);
        *(_DWORD *)(v8 + 1636) = 0;
        (*(void (__thiscall **)(int, signed int, signed int))(*(_DWORD *)v8 + 124))(v8, 524288, 65536);
        std___Mpunct_wchar_t___do_frac_digits(v13);
        CPlayer::Write(a2, a3, a4, v8, 1, (unsigned int)"bd");
        *(_DWORD *)(v8 + 1640) = 0;
        break;
      case 2:
        sub_497220(a2, a3, a4, a6, (unsigned int)"ddb");
        CChar::SetDirection((void *)v13, dword_4E2104 - *(_DWORD *)(v8 + 332), dword_4E2108 - *(_DWORD *)(v8 + 336));
        std___Mpunct_wchar_t___do_frac_digits(v13);
        CChar::WriteInSight(a2, a3, a4, v8, 1, (unsigned int)"bdddb");
        break;
      case 3:
        break;
      case 4:
        sub_497220(a2, a3, a4, a6, (unsigned int)"dd");
        v11 = dword_4E2104;
        v12 = dword_4E2108;
        CMonsterSiegeGun::SetFire(v13, a2, a3, a4, (int)&v11);
        break;
      default:
        sub_4328C0("SiegeGunControl Unknown Sequence : ", a5);
        break;
    }
    CChar::Unlock(v8, a2, a3, a4);
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4E2104: using guessed type int dword_4E2104;
// 4E2108: using guessed type int dword_4E2108;

//----- (0046DE50) --------------------------------------------------------
void __userpurge CPlayer::SiegeGunUnset(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@3

  v5 = a1;
  CChar::Lock(a1, a2, a3, a4);
  if ( a5 == 1 )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 124))(v5, 524288, 65536);
    CChar::WriteInSight(a2, a3, a4, v5, 0, (unsigned int)&unk_4B967C);
    *(_DWORD *)(v5 + 1636) = 0;
    v6 = CNPC::FindNPC(a2, a3, a4, *(_DWORD *)(v5 + 1640));
    if ( v6 )
    {
      CMonster::ResetNextMove(*(_DWORD *)(v6 + 464), 0);
      CNPCSiegeGunStone::SetOperator(v6, a2, a3, a4, 0);
      CNPCSiegeGunStone::SetSiegeGun(v6, a2, a3, a4, 0);
      *(_DWORD *)(v5 + 1640) = 0;
    }
    CIOObject::Release(v6, a2, a3, a4);
  }
  CChar::Unlock(v5, a2, a3, a4);
}

//----- (0046DF30) --------------------------------------------------------
int __userpurge CPlayer::ReturnToPoint<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@2
  __int64 v6; // qax@3
  __int64 v8; // [sp+0h] [bp-54h]@4
  int v9; // [sp+10h] [bp-44h]@1
  char v10; // [sp+14h] [bp-40h]@2
  char v11; // [sp+18h] [bp-3Ch]@8
  char v12; // [sp+1Ch] [bp-38h]@1
  char v13; // [sp+20h] [bp-34h]@1
  int v14; // [sp+2Ch] [bp-28h]@9
  int v15; // [sp+30h] [bp-24h]@9
  __int64 v16; // [sp+34h] [bp-20h]@3
  int v17; // [sp+40h] [bp-14h]@1
  __int64 v18; // [sp+44h] [bp-10h]@1
  int v19; // [sp+50h] [bp-4h]@1

  v9 = a1;
  sub_47D030(&v13);
  CNPC::GetNPCList(a2, a3, a4, (int)&v13, a5, *(_DWORD *)(v9 + 316));
  v19 = 0;
  v17 = 0;
  v18 = 9223372036854775807i64;
  sub_40EFA0((int)&v13, &v12);
  while ( 1 )
  {
    v5 = sub_430C20((int)&v13, &v10);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    v19 = *(_DWORD *)sub_40F040((int *)&v12);
    v16 = v18;
    v6 = sub_43D870(v9 + 332, v19 + 332);
    if ( v18 >= v6 )
      v8 = sub_43D870(v9 + 332, v19 + 332);
    else
      v8 = v18;
    v18 = v8;
    if ( v16 != v8 )
      v17 = v19;
    sub_47D0A0((int *)&v12, (int)&v11, 0);
  }
  v14 = sub_406E10(*(_DWORD *)(*(_DWORD *)(v17 + 444) + 60), *(_DWORD *)(*(_DWORD *)(v17 + 444) + 60) + 32);
  v15 = sub_406E10(*(_DWORD *)(*(_DWORD *)(v17 + 444) + 64), *(_DWORD *)(*(_DWORD *)(v17 + 444) + 64) + 32);
  CPlayer::Teleport(v9, a2, a3, a4, *(_DWORD *)(*(_DWORD *)(v17 + 444) + 52), (int)&v14, 0, 0);
  return sub_472990((int)&v13);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0046E0D0) --------------------------------------------------------
int __usercall CPlayer::CountWarrelationPlayer<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int i; // [sp+4h] [bp-10h]@3
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v7 = 0;
  v6 = 0;
  v5 = CCastle::GetCastle(1);
  if ( v5 )
    v6 = CCastle::GetWarSize(v5, a1, a2, a3);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2078, a1, a2, a3);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)&unk_4E2098, a1, a2, a3);
  CLink::MoveTo(&unk_4E200C, (int)&dword_4E2004);
  CIOCriticalSection::Leave((int)&unk_4E2098, a1, a2, a3);
  for ( i = dword_4E2004; (int *)i != &dword_4E2004; i = *(_DWORD *)i )
  {
    if ( *(_DWORD *)(i - 428 + 484) )
    {
      if ( CCastle::IsAllCastleWarRelation(a1, a2, a3, *(_DWORD *)(i - 428 + 484)) )
        ++v7;
    }
  }
  sub_432890("", v6, v7);
  CIOCriticalSection::Leave((int)&unk_4E2078, a1, a2, a3);
  return v7;
}
// 4E2004: using guessed type int dword_4E2004;

//----- (0046E1B0) --------------------------------------------------------
void __userpurge CPlayer::EnforceItem(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, char a10)
{
  void *v10; // eax@4
  char v11; // al@5
  void *v12; // eax@5
  void *v13; // eax@38
  char v14; // al@39
  void *v15; // eax@39
  void *v16; // eax@45
  int v17; // [sp+0h] [bp-78h]@145
  int v18; // [sp+4h] [bp-74h]@136
  int v19; // [sp+10h] [bp-68h]@76
  int v20; // [sp+1Ch] [bp-5Ch]@1
  char v21; // [sp+20h] [bp-58h]@45
  char v22; // [sp+24h] [bp-54h]@45
  char v23; // [sp+28h] [bp-50h]@39
  char v24; // [sp+2Ch] [bp-4Ch]@39
  char v25; // [sp+30h] [bp-48h]@38
  char v26; // [sp+34h] [bp-44h]@38
  char v27; // [sp+38h] [bp-40h]@5
  char v28; // [sp+3Ch] [bp-3Ch]@5
  char v29; // [sp+40h] [bp-38h]@4
  char v30; // [sp+44h] [bp-34h]@4
  int v31; // [sp+48h] [bp-30h]@147
  int v32; // [sp+4Ch] [bp-2Ch]@147
  int v33; // [sp+50h] [bp-28h]@147
  int v34; // [sp+54h] [bp-24h]@74
  int v35; // [sp+58h] [bp-20h]@138
  int v36; // [sp+5Ch] [bp-1Ch]@138
  int v37; // [sp+60h] [bp-18h]@5
  int v38; // [sp+64h] [bp-14h]@8
  int v39; // [sp+68h] [bp-10h]@42
  int v40; // [sp+6Ch] [bp-Ch]@39
  int v41; // [sp+70h] [bp-8h]@46
  int v42; // [sp+74h] [bp-4h]@1

  v20 = a1;
  std___String_base___String_base(&v42);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v20 + 1020), a2, a3, a4);
  if ( !*(_DWORD *)(v20 + 1096) || *(_DWORD *)(*(_DWORD *)(v20 + 1096) + 52) < 30000 )
  {
    sub_4328C0("EnforceItem() PID(%d) Not Enough Money ", *(_DWORD *)(v20 + 452));
LABEL_150:
    CIOCriticalSection::Leave(v20 + 1020, a2, a3, a4);
    CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bb");
    return;
  }
  v42 = *(_DWORD *)sub_44AE20(v20 + 1068, (int)&v30, (int)&a6);
  v10 = sub_430C20(v20 + 1068, &v29);
  if ( !(unsigned __int8)sub_47D070(v10) )
  {
    sub_4328C0("EnforceItem() PID(%d) ItemIndex(%d) ", *(_DWORD *)(v20 + 452), a6);
    goto LABEL_150;
  }
  v37 = *(_DWORD *)(sub_420250(&v42) + 4);
  v42 = *(_DWORD *)sub_44AE20(v20 + 1068, (int)&v28, (int)&a7);
  v12 = sub_430C20(v20 + 1068, &v27);
  v11 = sub_47D070(v12);
  if ( !v11 )
  {
    sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
    goto LABEL_150;
  }
  v38 = *(_DWORD *)(sub_420250(&v42) + 4);
  if ( *(_DWORD *)(*(_DWORD *)(v38 + 40) + 64) == 906 )
  {
    switch ( *(_DWORD *)(*(_DWORD *)(v37 + 40) + 80) )
    {
      case 0x28:
        if ( *(_DWORD *)(v38 + 52) >= 1 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x2D:
        if ( *(_DWORD *)(v38 + 52) >= 2 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x30:
        if ( *(_DWORD *)(v38 + 52) >= 4 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x32:
        if ( *(_DWORD *)(v38 + 52) >= 6 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x35:
        if ( *(_DWORD *)(v38 + 52) >= 6 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x38:
        if ( *(_DWORD *)(v38 + 52) >= 20 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x3B:
        if ( *(_DWORD *)(v38 + 52) >= 20 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x3E:
        if ( *(_DWORD *)(v38 + 52) >= 75 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      case 0x41:
        if ( *(_DWORD *)(v38 + 52) >= 450 )
          break;
        sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a7);
        goto LABEL_150;
      default:
        break;
    }
  }
  v42 = *(_DWORD *)sub_44AE20(v20 + 1068, (int)&v26, (int)&a8);
  v13 = sub_430C20(v20 + 1068, &v25);
  if ( !(unsigned __int8)sub_47D070(v13) )
  {
    sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a8);
    goto LABEL_150;
  }
  v40 = *(_DWORD *)(sub_420250(&v42) + 4);
  v42 = *(_DWORD *)sub_44AE20(v20 + 1068, (int)&v24, (int)&a9);
  v15 = sub_430C20(v20 + 1068, &v23);
  v14 = sub_47D070(v15);
  if ( !v14 )
  {
    sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a9);
    goto LABEL_150;
  }
  v39 = *(_DWORD *)(sub_420250(&v42) + 4);
  if ( a5 )
  {
    v42 = *(_DWORD *)sub_44AE20(v20 + 1068, (int)&v22, (int)&a10);
    v16 = sub_430C20(v20 + 1068, &v21);
    if ( !(unsigned __int8)sub_47D070(v16) )
    {
      sub_4328C0("EnforceItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v20 + 452), a9);
      goto LABEL_150;
    }
    v41 = *(_DWORD *)(sub_420250(&v42) + 4);
  }
  if ( !sub_46EF90(v37, v38, v40)
    || a5
    && sub_46EF70(v39) != 904
    && sub_46EF70(v39) != 905
    && sub_46EF70(v41) != 904
    && sub_46EF70(v41) != 905
    && !CItem::IsState(v37, 1048576) )
    goto LABEL_150;
  switch ( *(_DWORD *)(*(_DWORD *)(v37 + 40) + 80) )
  {
    case 0x28:
    case 0x2D:
      if ( sub_406E10(0, 99) <= 10 )
        goto LABEL_71;
      goto LABEL_139;
    case 0x30:
    case 0x32:
      if ( sub_406E10(0, 99) > 7 )
        goto LABEL_139;
      goto LABEL_71;
    case 0x35:
      if ( sub_406E10(0, 99) > 5 )
        goto LABEL_139;
      goto LABEL_71;
    case 0x38:
      if ( sub_406E10(0, 99) > 4 )
        goto LABEL_139;
      goto LABEL_71;
    case 0x3B:
    case 0x3E:
    case 0x41:
      if ( sub_406E10(0, 99) <= 3 )
        goto LABEL_71;
LABEL_139:
      if ( !(*(int (__thiscall **)(_DWORD, int, signed int, signed int))(**(_DWORD **)(v20 + 1096) + 120))(
              *(_DWORD *)(v20 + 1096),
              v20,
              9,
              -30000) )
        CPlayer::_OutofInven(v20, a2, a3, a4, *(_DWORD *)(v20 + 1096));
      sub_46F320(v20, a2, a3, a4, v39);
      if ( a5 )
        sub_46F320(v20, a2, a3, a4, v41);
      CPlayer::Write(a2, a3, a4, v20, 68, (unsigned int)"bb");
      *(_DWORD *)(v37 + 96) -= sub_406E10(5, 10);
      if ( *(_DWORD *)(v37 + 96) > 0 )
      {
        CPlayer::Write(a2, a3, a4, v20, 91, (unsigned int)"db");
        CDBSocket::Write(a2, a3, a4, 18, (unsigned int)"ddb");
      }
      else
      {
        CPlayer::Write(a2, a3, a4, v20, 91, (unsigned int)"db");
        if ( *(_DWORD *)(v37 + 44) )
          v17 = *(_DWORD *)(*(_DWORD *)(v37 + 44) + 32);
        else
          v17 = 0;
        v31 = *(_DWORD *)(v37 + 100) & 0xFF | ((*(_DWORD *)(v37 + 84) & 0xFF) << 8) | ((*(_DWORD *)(v37 + 92) & 0xFF) << 16) | (v17 << 24);
        v32 = ((*(_DWORD *)(v37 + 112) & 0xFF) << 8) | ((*(_DWORD *)(v37 + 104) & 0xFF) << 24);
        v33 = ((*(_DWORD *)(v37 + 128) & 0xFF) << 8) | ((*(_DWORD *)(v37 + 124) & 0xFF) << 16) | ((*(_DWORD *)(v37 + 120) & 0xFF) << 24);
        CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
        CBase::Delete((void *)v37);
      }
      CIOCriticalSection::Leave(v20 + 1020, a2, a3, a4);
      return;
    default:
LABEL_71:
      CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbb");
      CItem::SubState(v37, 524032);
      if ( a5 )
      {
        if ( sub_46EF70(v39) != 904 && sub_46EF70(v39) != 905 )
          v34 = v41;
        else
          v34 = v39;
        v19 = sub_46EF70(v34);
        if ( v19 == 904 )
        {
          if ( !CItem::IsState(v37, 1048576) )
          {
            sub_4328C0("Enforce item ", *(_DWORD *)(v20 + 452));
            goto LABEL_150;
          }
          CItem::AddState(v37, 131072);
        }
        else
        {
          if ( v19 == 905 )
          {
            if ( !CItem::IsState(v37, 1048576) )
            {
              sub_4328C0("Enforce item ", *(_DWORD *)(v20 + 452));
              goto LABEL_150;
            }
            CItem::AddState(v37, 262144);
          }
        }
      }
      else
      {
        switch ( *(_DWORD *)(*(_DWORD *)(v39 + 40) + 64) )
        {
          case 0x37F:
            CItem::AddState(v37, 256);
            break;
          case 0x380:
            CItem::AddState(v37, 512);
            break;
          case 0x381:
            CItem::AddState(v37, 1024);
            break;
          case 0x382:
            CItem::AddState(v37, 2048);
            break;
          case 0x383:
            CItem::AddState(v37, 4096);
            break;
          case 0x384:
            CItem::AddState(v37, 8192);
            break;
          case 0x385:
            CItem::AddState(v37, 16384);
            break;
          case 0x386:
            CItem::AddState(v37, 32768);
            break;
          case 0x387:
            CItem::AddState(v37, 65536);
            break;
          default:
            break;
        }
      }
      if ( CItem::IsState(v37, 524288) || CItem::IsState(v37, 1048576) )
      {
        if ( CItem::IsState(v37, 524288) )
        {
          CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbb");
          CItem::SubState(v37, 524288);
          CItem::AddState(v37, 1048576);
        }
      }
      else
      {
        CItem::AddState(v37, 524288);
      }
      if ( *(_DWORD *)(*(_DWORD *)(v38 + 40) + 64) == 906 )
      {
        switch ( *(_DWORD *)(*(_DWORD *)(v37 + 40) + 80) )
        {
          case 0x28:
            if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -1) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x2D:
            if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -2) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x30:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -4) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x32:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -6) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x35:
            if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -6) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x38:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -20) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x3B:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -20) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x3E:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -75) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          case 0x41:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v38 + 120))(v38, v20, 9, -450) )
              CPlayer::_OutofInven(v20, a2, a3, a4, v38);
            break;
          default:
            break;
        }
      }
      else
      {
        sub_46F320(v20, a2, a3, a4, v38);
      }
      sub_46F320(v20, a2, a3, a4, v40);
      if ( !(*(int (__thiscall **)(_DWORD, int, signed int, signed int))(**(_DWORD **)(v20 + 1096) + 120))(
              *(_DWORD *)(v20 + 1096),
              v20,
              9,
              -30000) )
        CPlayer::_OutofInven(v20, a2, a3, a4, *(_DWORD *)(v20 + 1096));
      sub_46F320(v20, a2, a3, a4, v39);
      if ( a5 )
        sub_46F320(v20, a2, a3, a4, v41);
      if ( *(_DWORD *)(v37 + 44) )
        v18 = *(_DWORD *)(*(_DWORD *)(v37 + 44) + 32);
      else
        v18 = 0;
      v35 = *(_DWORD *)(v37 + 100) & 0xFF | ((*(_DWORD *)(v37 + 84) & 0xFF) << 8) | ((*(_DWORD *)(v37 + 92) & 0xFF) << 16) | (v18 << 24);
      v36 = ((*(_DWORD *)(v37 + 112) & 0xFF) << 8) | ((*(_DWORD *)(v37 + 104) & 0xFF) << 24);
      CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbwddb");
      CItem::SendItemInfo(v37, a2, a3, a4, (void *)v20, 92);
      CIOCriticalSection::Leave(v20 + 1020, a2, a3, a4);
      break;
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 41C8B0: using guessed type int __thiscall std___String_base___String_base(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0046EF70) --------------------------------------------------------
int __thiscall sub_46EF70(int this)
{
  return *(_DWORD *)(*(_DWORD *)(this + 40) + 64);
}

//----- (0046EF90) --------------------------------------------------------
signed int __stdcall sub_46EF90(int a1, int a2, int a3)
{
  signed int result; // eax@7

  switch ( *(_DWORD *)(*(_DWORD *)(a1 + 40) + 80) )
  {
    case 0x28:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 40
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 1)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 42
        || !sub_46F2C0(a3) )
        goto LABEL_64;
      result = 1;
      break;
    case 0x2D:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 45
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 5)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 42
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
        goto LABEL_64;
      result = 1;
      break;
    case 0x30:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 48
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 10)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 46
        || !sub_46F2C0(a3) )
        goto LABEL_64;
      result = 1;
      break;
    case 0x32:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 50
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 15)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 46
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
        goto LABEL_64;
      result = 1;
      break;
    case 0x35:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 50
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 20)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || !sub_46F2C0(a3) )
        goto LABEL_64;
      result = 1;
      break;
    case 0x38:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 53
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 25)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || !sub_46F2C0(a3) )
        goto LABEL_64;
      result = 1;
      break;
    case 0x3B:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 53
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 30)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || !sub_46F2C0(a3) )
        goto LABEL_64;
      result = 1;
      break;
    case 0x3E:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 56
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 35)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
        goto LABEL_64;
      result = 1;
      break;
    case 0x41:
      if ( *(_DWORD *)(*(_DWORD *)(a2 + 40) + 80) != 59
        && (*(_DWORD *)(*(_DWORD *)(a2 + 40) + 64) != 906 || *(_DWORD *)(a2 + 52) < 40)
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 80) != 50
        || *(_DWORD *)(*(_DWORD *)(a3 + 40) + 72) != 5 )
        goto LABEL_64;
      result = 1;
      break;
    default:
LABEL_64:
      result = 0;
      break;
  }
  return result;
}

//----- (0046F2C0) --------------------------------------------------------
bool __stdcall sub_46F2C0(int a1)
{
  return *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 4
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 5
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 6
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 7
      || *(_DWORD *)(*(_DWORD *)(a1 + 40) + 72) == 8;
}

//----- (0046F320) --------------------------------------------------------
void __userpurge sub_46F320(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 120))(a5, a1, 9, -1) )
    CPlayer::_OutofInven(v5, a2, a3, a4, a5);
}

//----- (0046F350) --------------------------------------------------------
void __userpurge sub_46F350(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9)
{
  void *v9; // eax@6
  void *v10; // eax@12
  void *v11; // eax@43
  char v12; // al@44
  void *v13; // eax@44
  char v14; // al@47
  void *v15; // eax@47
  int v16; // [sp+0h] [bp-78h]@184
  int v17; // [sp+4h] [bp-74h]@176
  int v18; // [sp+18h] [bp-60h]@1
  char v19; // [sp+1Ch] [bp-5Ch]@47
  char v20; // [sp+20h] [bp-58h]@47
  char v21; // [sp+24h] [bp-54h]@44
  char v22; // [sp+28h] [bp-50h]@44
  char v23; // [sp+2Ch] [bp-4Ch]@43
  char v24; // [sp+30h] [bp-48h]@43
  char v25; // [sp+34h] [bp-44h]@12
  char v26; // [sp+38h] [bp-40h]@12
  char v27; // [sp+3Ch] [bp-3Ch]@6
  char v28; // [sp+40h] [bp-38h]@6
  int v29; // [sp+44h] [bp-34h]@186
  int v30; // [sp+48h] [bp-30h]@186
  int v31; // [sp+4Ch] [bp-2Ch]@186
  int v32; // [sp+50h] [bp-28h]@178
  int v33; // [sp+54h] [bp-24h]@178
  int v34; // [sp+58h] [bp-20h]@100
  int v35; // [sp+5Ch] [bp-1Ch]@100
  int v36; // [sp+60h] [bp-18h]@7
  int v37; // [sp+64h] [bp-14h]@13
  int v38; // [sp+68h] [bp-10h]@47
  int v39; // [sp+6Ch] [bp-Ch]@44
  int v40; // [sp+70h] [bp-8h]@50
  int v41; // [sp+74h] [bp-4h]@1

  v18 = a1;
  std___String_base___String_base(&v41);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(v18 + 1020), a2, a3, a4);
  if ( !*(_DWORD *)(v18 + 1096) || *(_DWORD *)(*(_DWORD *)(v18 + 1096) + 52) < 70000 )
  {
    sub_4328C0("MixItem() PID(%d) Not Enough Money ", *(_DWORD *)(v18 + 452));
LABEL_189:
    CPlayer::Write(a2, a3, a4, v18, 68, (unsigned int)"bb");
    CIOCriticalSection::Leave(v18 + 1020, a2, a3, a4);
    return;
  }
  if ( a8 == a9 )
    goto LABEL_189;
  v41 = *(_DWORD *)sub_44AE20(v18 + 1068, (int)&v28, (int)&a5);
  v9 = sub_430C20(v18 + 1068, &v27);
  if ( !(unsigned __int8)sub_47D070(v9) )
  {
    sub_4328C0("MixItem() PID(%d) ItemIndex(%d) ", *(_DWORD *)(v18 + 452), a5);
    goto LABEL_189;
  }
  v36 = *(_DWORD *)(sub_420250(&v41) + 4);
  if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 64) >= 769 && *(_DWORD *)(*(_DWORD *)(v36 + 40) + 64) <= 801 )
    goto LABEL_189;
  v41 = *(_DWORD *)sub_44AE20(v18 + 1068, (int)&v26, (int)&a6);
  v10 = sub_430C20(v18 + 1068, &v25);
  if ( !(unsigned __int8)sub_47D070(v10) )
  {
    sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
    goto LABEL_189;
  }
  v37 = *(_DWORD *)(sub_420250(&v41) + 4);
  if ( *(_DWORD *)(*(_DWORD *)(v37 + 40) + 64) == 906 )
  {
    switch ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 80) )
    {
      case 0x28:
        if ( *(_DWORD *)(v37 + 52) >= 1 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x2D:
        if ( *(_DWORD *)(v37 + 52) >= 2 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x30:
        if ( *(_DWORD *)(v37 + 52) >= 4 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x32:
        if ( *(_DWORD *)(v37 + 52) >= 6 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x35:
        if ( *(_DWORD *)(v37 + 52) >= 6 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x38:
        if ( *(_DWORD *)(v37 + 52) >= 20 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x3B:
        if ( *(_DWORD *)(v37 + 52) >= 20 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x3E:
        if ( *(_DWORD *)(v37 + 52) >= 75 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      case 0x41:
        if ( *(_DWORD *)(v37 + 52) >= 450 )
          break;
        sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a6);
        goto LABEL_189;
      default:
        break;
    }
  }
  v41 = *(_DWORD *)sub_44AE20(v18 + 1068, (int)&v24, (int)&a7);
  v11 = sub_430C20(v18 + 1068, &v23);
  if ( !(unsigned __int8)sub_47D070(v11) )
  {
    sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a7);
    goto LABEL_189;
  }
  v39 = *(_DWORD *)(sub_420250(&v41) + 4);
  v41 = *(_DWORD *)sub_44AE20(v18 + 1068, (int)&v22, (int)&a8);
  v13 = sub_430C20(v18 + 1068, &v21);
  v12 = sub_47D070(v13);
  if ( !v12 )
  {
    sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a8);
    goto LABEL_189;
  }
  v38 = *(_DWORD *)(sub_420250(&v41) + 4);
  v41 = *(_DWORD *)sub_44AE20(v18 + 1068, (int)&v20, (int)&a9);
  v15 = sub_430C20(v18 + 1068, &v19);
  v14 = sub_47D070(v15);
  if ( !v14 )
  {
    sub_4328C0("MixItem() PID(%d) ItemIID(%d) ", *(_DWORD *)(v18 + 452), a9);
    goto LABEL_189;
  }
  v40 = *(_DWORD *)(sub_420250(&v41) + 4);
  if ( !sub_46EF90(v36, v37, v39) )
    goto LABEL_189;
  switch ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 80) )
  {
    case 0x28:
    case 0x2D:
      if ( sub_406E10(0, 99) <= 10 )
        goto LABEL_68;
      goto LABEL_180;
    case 0x30:
    case 0x32:
      if ( sub_406E10(0, 99) > 7 )
        goto LABEL_180;
      goto LABEL_68;
    case 0x35:
      if ( sub_406E10(0, 99) > 5 )
        goto LABEL_180;
      goto LABEL_68;
    case 0x38:
      if ( sub_406E10(0, 99) > 4 )
        goto LABEL_180;
      goto LABEL_68;
    case 0x3B:
    case 0x3E:
    case 0x41:
      if ( sub_406E10(0, 99) <= 3 )
        goto LABEL_68;
LABEL_180:
      if ( !(*(int (__thiscall **)(_DWORD, int, signed int, signed int))(**(_DWORD **)(v18 + 1096) + 120))(
              *(_DWORD *)(v18 + 1096),
              v18,
              9,
              -70000) )
        CPlayer::_OutofInven(v18, a2, a3, a4, *(_DWORD *)(v18 + 1096));
      sub_46F320(v18, a2, a3, a4, v38);
      sub_46F320(v18, a2, a3, a4, v40);
      *(_DWORD *)(v36 + 96) -= sub_406E10(5, 10);
      if ( *(_DWORD *)(v36 + 96) > 0 )
      {
        CPlayer::Write(a2, a3, a4, v18, 91, (unsigned int)"db");
        CDBSocket::Write(a2, a3, a4, 18, (unsigned int)"ddb");
      }
      else
      {
        CPlayer::Write(a2, a3, a4, v18, 91, (unsigned int)"db");
        if ( *(_DWORD *)(v36 + 44) )
          v16 = *(_DWORD *)(*(_DWORD *)(v36 + 44) + 32);
        else
          v16 = 0;
        v29 = *(_DWORD *)(v36 + 100) & 0xFF | ((*(_DWORD *)(v36 + 84) & 0xFF) << 8) | ((*(_DWORD *)(v36 + 92) & 0xFF) << 16) | (v16 << 24);
        v30 = ((*(_DWORD *)(v36 + 112) & 0xFF) << 8) | ((*(_DWORD *)(v36 + 104) & 0xFF) << 24);
        v31 = ((*(_DWORD *)(v36 + 128) & 0xFF) << 8) | ((*(_DWORD *)(v36 + 124) & 0xFF) << 16) | ((*(_DWORD *)(v36 + 120) & 0xFF) << 24);
        CDBSocket::Write(a2, a3, a4, 3, (unsigned int)"ddwdbddd");
        CBase::Delete((void *)v36);
      }
      CIOCriticalSection::Leave(v18 + 1020, a2, a3, a4);
      CPlayer::Write(a2, a3, a4, v18, 68, (unsigned int)"bb");
      break;
    default:
LABEL_68:
      if ( *(_DWORD *)(*(_DWORD *)(v37 + 40) + 64) == 906 )
      {
        switch ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 80) )
        {
          case 0x28:
            if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -1) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x2D:
            if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -2) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x30:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -4) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x32:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -6) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x35:
            if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -6) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x38:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -20) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x3B:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -20) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x3E:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -75) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          case 0x41:
            if ( !(*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, signed int))(*(_DWORD *)v37 + 120))(v37, v18, 9, -450) )
              CPlayer::_OutofInven(v18, a2, a3, a4, v37);
            break;
          default:
            break;
        }
      }
      else
      {
        sub_46F320(v18, a2, a3, a4, v37);
      }
      sub_46F320(v18, a2, a3, a4, v39);
      sub_46F320(v18, a2, a3, a4, v38);
      sub_46F320(v18, a2, a3, a4, v40);
      if ( !(*(int (__thiscall **)(_DWORD, int, signed int, signed int))(**(_DWORD **)(v18 + 1096) + 120))(
              *(_DWORD *)(v18 + 1096),
              v18,
              9,
              -70000) )
        CPlayer::_OutofInven(v18, a2, a3, a4, *(_DWORD *)(v18 + 1096));
      v34 = 0;
      v35 = 0;
      switch ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 80) )
      {
        case 0x28:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 771;
            else
              v35 = 770;
          }
          else
          {
            v35 = 769;
          }
          break;
        case 0x2D:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 774;
            else
              v35 = 773;
          }
          else
          {
            v35 = 772;
          }
          break;
        case 0x30:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 777;
            else
              v35 = 776;
          }
          else
          {
            v35 = 775;
          }
          break;
        case 0x32:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 781;
            else
              v35 = 780;
          }
          else
          {
            v35 = (*(_DWORD *)(*(_DWORD *)(v36 + 40) + 72) != 0) + 778;
          }
          break;
        case 0x35:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 785;
            else
              v35 = 784;
          }
          else
          {
            v35 = (*(_DWORD *)(*(_DWORD *)(v36 + 40) + 72) != 0) + 782;
          }
          break;
        case 0x38:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 789;
            else
              v35 = 788;
          }
          else
          {
            v35 = (*(_DWORD *)(*(_DWORD *)(v36 + 40) + 72) != 0) + 786;
          }
          break;
        case 0x3B:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 793;
            else
              v35 = 792;
          }
          else
          {
            v35 = (*(_DWORD *)(*(_DWORD *)(v36 + 40) + 72) != 0) + 790;
          }
          break;
        case 0x3E:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 797;
            else
              v35 = 796;
          }
          else
          {
            v35 = (*(_DWORD *)(*(_DWORD *)(v36 + 40) + 72) != 0) + 794;
          }
          break;
        case 0x41:
          if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v36 + 40) + 96) == 1 )
              v35 = 801;
            else
              v35 = 800;
          }
          else
          {
            v35 = (*(_DWORD *)(*(_DWORD *)(v36 + 40) + 72) != 0) + 798;
          }
          break;
        default:
          break;
      }
      v34 = CItem::CreateItem(v35, 0, 1, -1);
      if ( v34 )
      {
        if ( *(_DWORD *)(v34 + 44) != *(_DWORD *)(v36 + 44) )
        {
          *(_DWORD *)(v34 + 44) = *(_DWORD *)(v36 + 44);
          CDBSocket::Write(a2, a3, a4, 19, (unsigned int)"ddbb");
        }
        if ( *(_DWORD *)(v34 + 124) != *(_DWORD *)(v36 + 124) )
        {
          *(_DWORD *)(v34 + 124) = *(_DWORD *)(v36 + 124);
          CDBSocket::Write(a2, a3, a4, 28, (unsigned int)"ddbb");
        }
        if ( *(_DWORD *)(v34 + 128) != *(_DWORD *)(v36 + 128) )
        {
          *(_DWORD *)(v34 + 128) = *(_DWORD *)(v36 + 128);
          CDBSocket::Write(a2, a3, a4, 28, (unsigned int)"ddbb");
        }
        if ( *(_DWORD *)(v34 + 100) != *(_DWORD *)(v36 + 100) )
        {
          *(_DWORD *)(v34 + 100) = *(_DWORD *)(v36 + 100);
          CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
        }
        if ( *(_DWORD *)(v34 + 108) != *(_DWORD *)(v36 + 108) )
        {
          *(_DWORD *)(v34 + 108) = *(_DWORD *)(v36 + 108);
          CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
        }
        if ( *(_DWORD *)(v34 + 112) != *(_DWORD *)(v36 + 112) )
        {
          *(_DWORD *)(v34 + 112) = *(_DWORD *)(v36 + 112);
          CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
        }
        if ( *(_DWORD *)(v34 + 104) != *(_DWORD *)(v36 + 104) )
        {
          *(_DWORD *)(v34 + 104) = *(_DWORD *)(v36 + 104);
          CDBSocket::Write(a2, a3, a4, 17, (unsigned int)"ddbbb");
        }
        if ( *(_DWORD *)(v34 + 48) != *(_DWORD *)(v36 + 48) )
          *(_DWORD *)(v34 + 48) = *(_DWORD *)(v36 + 48);
        if ( CPlayer::_InsertItem((void *)v18, a2, a3, a4, 2, v34) == 1 )
        {
          if ( *(_DWORD *)(v34 + 48) != *(_DWORD *)(v36 + 48) )
          {
            if ( *(_DWORD *)(v34 + 44) )
              v17 = *(_DWORD *)(*(_DWORD *)(v34 + 44) + 32);
            else
              v17 = 0;
            v32 = *(_DWORD *)(v34 + 100) & 0xFF | ((*(_DWORD *)(v34 + 84) & 0xFF) << 8) | ((*(_DWORD *)(v34 + 92) & 0xFF) << 16) | (v17 << 24);
            v33 = ((*(_DWORD *)(v34 + 112) & 0xFF) << 8) | ((*(_DWORD *)(v34 + 104) & 0xFF) << 24);
            CDBSocket::Write(a2, a3, a4, 21, (unsigned int)"dddbwddb");
          }
          sub_46F320(v18, a2, a3, a4, v36);
          CIOCriticalSection::Leave(v18 + 1020, a2, a3, a4);
        }
        else
        {
          sub_4328C0(
            "MixItem() item insert error [PID (%d)] [Index (%d)]",
            *(_DWORD *)(v18 + 452),
            *(_DWORD *)(*(_DWORD *)(v34 + 40) + 64));
          CBase::Delete((void *)v34);
          CIOCriticalSection::Leave(v18 + 1020, a2, a3, a4);
        }
      }
      else
      {
        CIOCriticalSection::Leave(v18 + 1020, a2, a3, a4);
        sub_4328C0("MixItem() insert item Null error [PID (%d)] ", *(_DWORD *)(v18 + 452));
      }
      break;
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 41C8B0: using guessed type int __thiscall std___String_base___String_base(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004703E0) --------------------------------------------------------
int __thiscall sub_4703E0(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472C30(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_4729B0(v3, &v4, v5, v6);
  return v7;
}

//----- (00470440) --------------------------------------------------------
int __thiscall sub_470440(int this, int a2, int a3)
{
  const char *v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  const char *v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110(v21) )
  {
    v22 = v21;
    v3 = *(const char **)sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_40EEE0(*(const char **)v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_420270(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_418880((int *)&v20);
  }
  v8 = *(const char **)sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_40EEE0(*(const char **)v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_420270(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00470600) --------------------------------------------------------
int __thiscall sub_470600(int this, const char **a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472B50(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_472A80(v3, &v4, v5, v6);
  return v7;
}

//----- (00470660) --------------------------------------------------------
int __thiscall sub_470660(int this, int a2, const char **a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_472B20(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), sub_40EEE0(*a3, *(const char **)v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004706F0) --------------------------------------------------------
void *__thiscall sub_4706F0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00470720) --------------------------------------------------------
int __thiscall sub_470720(int this)
{
  return sub_472C70(this);
}

//----- (00470740) --------------------------------------------------------
int __thiscall sub_470740(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472C30(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_472B90(v3, &v4, v5, v6);
  return v7;
}

//----- (004707A0) --------------------------------------------------------
int __thiscall sub_4707A0(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  sub_472E20((int)v3, 0);
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004707D0) --------------------------------------------------------
char *__thiscall sub_4707D0(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_472D60(this);
  if ( v2 >= (unsigned int)sub_472D20(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_472DA0(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_472EA0(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (00470840) --------------------------------------------------------
void *__thiscall sub_470840(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_472ED0(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00470870) --------------------------------------------------------
int __thiscall sub_470870(int this)
{
  return sub_473430(this);
}

//----- (00470890) --------------------------------------------------------
int __thiscall sub_470890(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_433230(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_4186F0(v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_472FF0(v13, &v17, 1, v22, (const void *)a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_475900((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_4186F0(v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_472FF0(v13, &v15, v23, v22, (const void *)a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00470A40) --------------------------------------------------------
int __thiscall sub_470A40(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472FB0(this, (int)&v5, a2);
  v7 = 0;
  sub_47A310(v5, v6, (int)&v7);
  sub_472F10(v3, &v4, v5, v6);
  return v7;
}

//----- (00470AA0) --------------------------------------------------------
void *__thiscall sub_470AA0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_473520(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00470AD0) --------------------------------------------------------
int __thiscall sub_470AD0(int this)
{
  return sub_473E10(this);
}

//----- (00470AF0) --------------------------------------------------------
int __thiscall sub_470AF0(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_4734F0(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_4186F0(v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_4736F0(v13, &v17, 1, v22, (const void *)a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_4758E0((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_4186F0(v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_4736F0(v13, &v15, v23, v22, (const void *)a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00470CA0) --------------------------------------------------------
int __thiscall sub_470CA0(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_4734F0(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_4758C0(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_4734F0(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_4734F0(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_4734F0(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_4734F0(v57) )
        v51 = v55;
      else
        v51 = sub_473CA0(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_4734F0(v57) )
        v50 = v55;
      else
        v50 = sub_473C60(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_4734F0(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = sub_4734E0(v58);
    v34 = sub_4734E0(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)sub_4734E0(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)sub_4734E0(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)sub_4734E0(v56) )
        {
          *(_BYTE *)sub_4734E0(v56) = 1;
          *(_BYTE *)sub_4734E0(v55) = 0;
          sub_473B30((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_4734F0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)sub_4734E0(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)sub_4734E0(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)sub_4734E0(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)sub_4734E0(*(_DWORD *)v40) = 1;
              *(_BYTE *)sub_4734E0(v56) = 0;
              sub_473CE0((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = sub_4734E0(v55);
            *(_BYTE *)sub_4734E0(v56) = *(_BYTE *)v41;
            *(_BYTE *)sub_4734E0(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)sub_4734E0(*(_DWORD *)v42) = 1;
            sub_473B30((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_4734E0(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)sub_4734E0(v56) )
        {
          *(_BYTE *)sub_4734E0(v56) = 1;
          *(_BYTE *)sub_4734E0(v55) = 0;
          sub_473CE0((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_4734F0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)sub_4734E0(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)sub_4734E0(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)sub_4734E0(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)sub_4734E0(*(_DWORD *)v46) = 1;
              *(_BYTE *)sub_4734E0(v56) = 0;
              sub_473B30((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = sub_4734E0(v55);
            *(_BYTE *)sub_4734E0(v56) = *(_BYTE *)v47;
            *(_BYTE *)sub_4734E0(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)sub_4734E0(*(_DWORD *)v48) = 1;
            sub_473CE0((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_4734E0(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)sub_4734E0(v57) = 1;
  }
  sub_44CD70(v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (00471430) --------------------------------------------------------
int __thiscall sub_471430(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_473630(this, (int)&v5, a2);
  v7 = 0;
  sub_47A2B0(v5, v6, (int)&v7);
  sub_473560(v3, &v4, v5, v6);
  return v7;
}

//----- (00471490) --------------------------------------------------------
int __thiscall sub_471490(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_473670(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 473670: using guessed type _DWORD __stdcall sub_473670(_DWORD);

//----- (004714F0) --------------------------------------------------------
int __thiscall sub_4714F0(int this, int a2, int a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_473600(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), (unsigned __int8)sub_4186F0(a3, v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471580) --------------------------------------------------------
void *__thiscall sub_471580(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_473ED0(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004715B0) --------------------------------------------------------
int __thiscall sub_4715B0(int this)
{
  return sub_4744E0(this);
}

//----- (004715D0) --------------------------------------------------------
int __thiscall sub_4715D0(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_473EC0(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_4186F0(v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_4740A0(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_4758A0((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_4186F0(v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_4740A0(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471780) --------------------------------------------------------
int __thiscall sub_471780(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_473FE0(this, (int)&v5, a2);
  v7 = 0;
  sub_47A2E0(v5, v6, (int)&v7);
  sub_473F10(v3, &v4, v5, v6);
  return v7;
}

//----- (004717E0) --------------------------------------------------------
int __thiscall sub_4717E0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_474020(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 4717E0: using guessed type int __thiscall sub_4717E0(_DWORD);
// 474020: using guessed type _DWORD __stdcall sub_474020(_DWORD);

//----- (00471840) --------------------------------------------------------
int __thiscall sub_471840(int this, int a2, int a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_473FB0(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), (unsigned __int8)sub_4186F0(a3, v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (004718D0) --------------------------------------------------------
void *__thiscall sub_4718D0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_472ED0(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00471900) --------------------------------------------------------
int __thiscall sub_471900(int this)
{
  return sub_474640(this);
}

//----- (00471920) --------------------------------------------------------
int __thiscall sub_471920(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472FB0(this, (int)&v5, a2);
  v7 = 0;
  sub_47A310(v5, v6, (int)&v7);
  sub_4745A0(v3, &v4, v5, v6);
  return v7;
}

//----- (00471980) --------------------------------------------------------
void *__thiscall sub_471980(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_474700(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (004719B0) --------------------------------------------------------
int __thiscall sub_4719B0(int this)
{
  return sub_474D10(this);
}

//----- (004719D0) --------------------------------------------------------
int __thiscall sub_4719D0(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_4746F0(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_4186F0(v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_4748D0(v13, &v17, 1, v22, (const void *)a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_475920((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_4186F0(v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_4748D0(v13, &v15, v23, v22, (const void *)a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471B80) --------------------------------------------------------
int __thiscall sub_471B80(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_474810(this, (int)&v5, a2);
  v7 = 0;
  sub_47A340(v5, v6, (int)&v7);
  sub_474740(v3, &v4, v5, v6);
  return v7;
}

//----- (00471BE0) --------------------------------------------------------
int __thiscall sub_471BE0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_474850(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 474850: using guessed type _DWORD __stdcall sub_474850(_DWORD);

//----- (00471C40) --------------------------------------------------------
int __thiscall sub_471C40(int this, int a2, int a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_4747E0(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), (unsigned __int8)sub_4186F0(a3, v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471CD0) --------------------------------------------------------
void *__thiscall sub_471CD0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v4 = 0;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_474DE0(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00471D00) --------------------------------------------------------
int __thiscall sub_471D00(int this)
{
  return sub_475650(this);
}

//----- (00471D20) --------------------------------------------------------
int __thiscall sub_471D20(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_474DD0(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_471ED0((void *)v4, (void *)v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_474F30(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_4759A0((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_471ED0((void *)v10, (void *)v8) )
  {
    v16 = 1;
    v11 = (int)sub_474F30(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00471ED0) --------------------------------------------------------
char __stdcall sub_471ED0(void *a1, void *a2)
{
  int v3; // ST04_4@1
  int v4; // eax@1

  v3 = sub_4012D0(a2);
  v4 = sub_4012D0(a1);
  return sub_497700(v4, v3) < 0;
}

//----- (00471F00) --------------------------------------------------------
int __thiscall sub_471F00(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_474DD0(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_475980(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_474DD0(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_474DD0(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_474DD0(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_474DD0(v57) )
        v51 = v55;
      else
        v51 = sub_4754E0(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_474DD0(v57) )
        v50 = v55;
      else
        v50 = sub_4754A0(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_474DD0(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = sub_474DC0(v58);
    v34 = sub_474DC0(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)sub_474DC0(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)sub_474DC0(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)sub_474DC0(v56) )
        {
          *(_BYTE *)sub_474DC0(v56) = 1;
          *(_BYTE *)sub_474DC0(v55) = 0;
          sub_475370((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_474DD0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)sub_474DC0(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)sub_474DC0(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)sub_474DC0(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)sub_474DC0(*(_DWORD *)v40) = 1;
              *(_BYTE *)sub_474DC0(v56) = 0;
              sub_475520((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = sub_474DC0(v55);
            *(_BYTE *)sub_474DC0(v56) = *(_BYTE *)v41;
            *(_BYTE *)sub_474DC0(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)sub_474DC0(*(_DWORD *)v42) = 1;
            sub_475370((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_474DC0(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)sub_474DC0(v56) )
        {
          *(_BYTE *)sub_474DC0(v56) = 1;
          *(_BYTE *)sub_474DC0(v55) = 0;
          sub_475520((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_474DD0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)sub_474DC0(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)sub_474DC0(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)sub_474DC0(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)sub_474DC0(*(_DWORD *)v46) = 1;
              *(_BYTE *)sub_474DC0(v56) = 0;
              sub_475370((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = sub_474DC0(v55);
            *(_BYTE *)sub_474DC0(v56) = *(_BYTE *)v47;
            *(_BYTE *)sub_474DC0(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)sub_474DC0(*(_DWORD *)v48) = 1;
            sub_475520((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_474DC0(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)sub_474DC0(v57) = 1;
  }
  sub_475700((void *)v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (00472690) --------------------------------------------------------
int __thiscall sub_472690(int this, void *a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_474EF0(this, (int)&v5, a2);
  v7 = 0;
  sub_47A370(v5, v6, (int)&v7);
  sub_474E20(v3, &v4, v5, v6);
  return v7;
}

//----- (004726F0) --------------------------------------------------------
int __thiscall sub_4726F0(int this, int a2, void *a3)
{
  void *v3; // eax@1
  int v4; // eax@2
  int v5; // eax@2
  void *v7; // [sp+0h] [bp-18h]@3
  int v8; // [sp+4h] [bp-14h]@1
  char v9; // [sp+8h] [bp-10h]@4
  char v10; // [sp+Ch] [bp-Ch]@1
  void *v11; // [sp+10h] [bp-8h]@5
  char v12; // [sp+14h] [bp-4h]@1

  v8 = this;
  sub_474EC0(this, &v12, a3);
  v3 = sub_430C20(v8, &v10);
  if ( (unsigned __int8)unknown_libname_8(v3)
    || (v4 = unknown_libname_7(), v5 = sub_473500(v4), sub_471ED0(a3, (void *)v5)) )
    v7 = sub_430C20(v8, &v9);
  else
    v7 = &v12;
  v11 = v7;
  *(_DWORD *)a2 = *(_DWORD *)v7;
  return a2;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00472780) --------------------------------------------------------
char __thiscall sub_472780(int this)
{
  return *(_DWORD *)(this + 8) == 0;
}

//----- (004727A0) --------------------------------------------------------
int __thiscall sub_4727A0(int this, const void *a2)
{
  int v3; // ST08_4@1
  void *v4; // eax@1
  char v5; // [sp+4h] [bp-4h]@1

  v3 = this;
  v4 = sub_430C20(this, &v5);
  return sub_475720((void *)v3, *(_DWORD *)v4, a2);
}

//----- (004727D0) --------------------------------------------------------
int __thiscall sub_4727D0(int this)
{
  int v2; // ST08_4@1
  void *v3; // eax@1
  int *v4; // eax@1
  char v5; // [sp+4h] [bp-8h]@1
  char v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v3 = sub_430C20(this, &v6);
  v4 = sub_475940((int *)v3);
  return sub_4757A0((void *)v2, (int)&v5, *v4);
}

//----- (00472800) --------------------------------------------------------
int __thiscall sub_472800(void *this, int a2, char a3, const void *a4)
{
  sub_475720(this, a3, a4);
  *(_DWORD *)a2 = *sub_475940((int *)&a3);
  return a2;
}

//----- (00472830) --------------------------------------------------------
int __thiscall sub_472830(int this, int a2, const void *a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  memcpy((void *)(this + 4), a3, 0x1Au);
  return this;
}

//----- (00472860) --------------------------------------------------------
int __thiscall sub_472860(int this, int a2, int a3)
{
  int v4; // edx@1

  *(_DWORD *)this = *(_DWORD *)a2;
  v4 = *(_DWORD *)(a3 + 4);
  *(_DWORD *)(this + 4) = *(_DWORD *)a3;
  *(_DWORD *)(this + 8) = v4;
  return this;
}

//----- (00472890) --------------------------------------------------------
int __thiscall sub_472890(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_4758C0(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (004728C0) --------------------------------------------------------
int __thiscall sub_4728C0(int this, int a2, const void *a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  memcpy((void *)(this + 4), a3, 0x1Eu);
  return this;
}

//----- (004728F0) --------------------------------------------------------
int __thiscall sub_4728F0(int this, int a2, const void *a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  memcpy((void *)(this + 4), a3, 0x1Cu);
  return this;
}

//----- (00472920) --------------------------------------------------------
int __thiscall sub_472920(int this, int a2, const void *a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  memcpy((void *)(this + 4), a3, 0x60u);
  return this;
}

//----- (00472950) --------------------------------------------------------
void *__thiscall sub_472950(void *this, int a2, int a3)
{
  void *v4; // ST04_4@1

  v4 = this;
  sub_40F730(this, a2);
  *((_DWORD *)v4 + 7) = *(_DWORD *)a3;
  *((_DWORD *)v4 + 8) = *(_DWORD *)(a3 + 4);
  *((_DWORD *)v4 + 9) = *(_DWORD *)(a3 + 8);
  *((_DWORD *)v4 + 10) = *(_DWORD *)(a3 + 12);
  return v4;
}

//----- (00472990) --------------------------------------------------------
int __thiscall sub_472990(int this)
{
  return sub_47D360(this);
}

//----- (004729B0) --------------------------------------------------------
void *__thiscall sub_4729B0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_4759C0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00472A50) --------------------------------------------------------
void *__thiscall sub_472A50(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_41CAD0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00472A80) --------------------------------------------------------
void *__thiscall sub_472A80(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_475A20(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00472B20) --------------------------------------------------------
void *__thiscall sub_472B20(int this, void *a2, const char **a3)
{
  int v4; // eax@1

  v4 = sub_475AB0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00472B50) --------------------------------------------------------
int __thiscall sub_472B50(int this, int a2, const char **a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_475A80(this, &v8, a3);
  v6 = (int)sub_472B20(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00472B90) --------------------------------------------------------
void *__thiscall sub_472B90(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_475B40(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00472C30) --------------------------------------------------------
int __thiscall sub_472C30(int this, int a2, int a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_47EB10(this, &v8, a3);
  v6 = (int)sub_472A50(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00472C70) --------------------------------------------------------
int __thiscall sub_472C70(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_472B90(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00472D20) --------------------------------------------------------
int __thiscall sub_472D20(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (00472D60) --------------------------------------------------------
int __thiscall sub_472D60(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) >> 3;
  else
    v2 = 0;
  return v2;
}

//----- (00472DA0) --------------------------------------------------------
int __thiscall sub_472DA0(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_472D60(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_4470B0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_475BA0(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_478710(v7, a2, v6);
  return a2;
}

//----- (00472E20) --------------------------------------------------------
char __thiscall sub_472E20(int this, int a2)
{
  char result; // al@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  if ( a2 )
  {
    if ( sub_446B60() >= (unsigned int)a2 )
    {
      *(_DWORD *)(v3 + 4) = sub_446E50(a2);
      *(_DWORD *)(v3 + 8) = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v3 + 12) = *(_DWORD *)(v3 + 4) + 8 * a2;
    }
    else
    {
      sub_446B00();
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00472EA0) --------------------------------------------------------
char *__stdcall sub_472EA0(void *a1, int a2, int a3)
{
  sub_431DF0(a1, a2, a3);
  return (char *)a1 + 8 * a2;
}

//----- (00472ED0) --------------------------------------------------------
void *__thiscall sub_472ED0(void *this, int a2, int a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(a3);
  sub_432060(v4, a2, v5);
  sub_4776F0((int)v4);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00472F10) --------------------------------------------------------
void *__thiscall sub_472F10(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_476600(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_434510(&a3, (int)&v10, 0);
      sub_475E70((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00472FB0) --------------------------------------------------------
int __thiscall sub_472FB0(int this, int a2, int a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_4776C0(this, &v8, a3);
  v6 = (int)sub_433240(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00472FF0) --------------------------------------------------------
void *__thiscall sub_472FF0(int this, void *a2, char a3, int a4, const void *a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_477640() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_476820(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)sub_433730(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)sub_433730(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_4766F0((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)sub_433730(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_433740((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v20) = 1;
        *(_BYTE *)sub_433730(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)sub_433730(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)sub_433730(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_433740((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)sub_433730(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_4766F0((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)sub_433730(*(_DWORD *)v34) = 1;
        *(_BYTE *)sub_433730(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)sub_433730(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)sub_433730(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (00473430) --------------------------------------------------------
int __thiscall sub_473430(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_472F10(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (004734E0) --------------------------------------------------------
int __cdecl sub_4734E0(int a1)
{
  return a1 + 48;
}

//----- (004734F0) --------------------------------------------------------
int __cdecl sub_4734F0(int a1)
{
  return a1 + 49;
}

//----- (00473500) --------------------------------------------------------
int __cdecl sub_473500(int a1)
{
  int v2; // eax@1

  v2 = sub_447000(a1);
  return sub_474590(v2);
}

//----- (00473520) --------------------------------------------------------
void *__thiscall sub_473520(void *this, int a2, int a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(a3);
  sub_432060(v4, a2, v5);
  sub_4768F0((int)v4);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00473560) --------------------------------------------------------
void *__thiscall sub_473560(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_471490(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_472890(&a3, (int)&v10, 0);
      sub_470CA0((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00473600) --------------------------------------------------------
void *__thiscall sub_473600(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_476960(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00473630) --------------------------------------------------------
int __thiscall sub_473630(int this, int a2, int a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_4768C0(this, &v8, a3);
  v6 = (int)sub_473600(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00473670) --------------------------------------------------------
int __stdcall sub_473670(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_4734F0(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_473670(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 473670: using guessed type _DWORD __stdcall sub_473670(_DWORD);

//----- (004736F0) --------------------------------------------------------
void *__thiscall sub_4736F0(int this, void *a2, char a3, int a4, const void *a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_4768A0() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_4769F0(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)sub_4734E0(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)sub_4734E0(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_473B30((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_473CE0((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v20) = 1;
        *(_BYTE *)sub_4734E0(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)sub_4734E0(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_473CE0((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_473B30((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v34) = 1;
        *(_BYTE *)sub_4734E0(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)sub_4734E0(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)sub_4734E0(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (00473B30) --------------------------------------------------------
int __thiscall sub_473B30(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *(_DWORD *)v2;
  v3 = sub_474590(v11);
  if ( !*(_BYTE *)sub_4734F0(*(_DWORD *)v3) )
  {
    v4 = sub_474590(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00473C60) --------------------------------------------------------
int __cdecl sub_473C60(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_430F90(a1);
    if ( *(_BYTE *)sub_4734F0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00473CA0) --------------------------------------------------------
int __cdecl sub_473CA0(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_474590(a1);
    if ( *(_BYTE *)sub_4734F0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00473CE0) --------------------------------------------------------
int __thiscall sub_473CE0(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_474590(a2);
  v2 = sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *(_DWORD *)v2;
  v3 = sub_430F90(v11);
  if ( !*(_BYTE *)sub_4734F0(*(_DWORD *)v3) )
  {
    v4 = sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00473E10) --------------------------------------------------------
int __thiscall sub_473E10(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_473560(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00473EC0) --------------------------------------------------------
int __cdecl sub_473EC0(int a1)
{
  return a1 + 25;
}

//----- (00473ED0) --------------------------------------------------------
void *__thiscall sub_473ED0(void *this, int a2, int a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(a3);
  sub_432060(v4, a2, v5);
  sub_477260((int)v4);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00473F10) --------------------------------------------------------
void *__thiscall sub_473F10(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_4717E0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_478680(&a3, (int)&v10, 0);
      sub_476AA0((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4717E0: using guessed type int __thiscall sub_4717E0(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00473FB0) --------------------------------------------------------
void *__thiscall sub_473FB0(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_4772D0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00473FE0) --------------------------------------------------------
int __thiscall sub_473FE0(int this, int a2, int a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_477230(this, &v8, a3);
  v6 = (int)sub_473FB0(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00474020) --------------------------------------------------------
int __stdcall sub_474020(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_473EC0(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_474020(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 474020: using guessed type _DWORD __stdcall sub_474020(_DWORD);

//----- (004740A0) --------------------------------------------------------
void *__thiscall sub_4740A0(int this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_476A80() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_4775C0(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)sub_476A70(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)sub_476A70(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_477360((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)sub_476A70(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)sub_476A70(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_477490((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)sub_476A70(*(_DWORD *)v20) = 1;
        *(_BYTE *)sub_476A70(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)sub_476A70(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)sub_476A70(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_477490((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)sub_476A70(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)sub_476A70(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_477360((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)sub_476A70(*(_DWORD *)v34) = 1;
        *(_BYTE *)sub_476A70(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)sub_476A70(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)sub_476A70(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (004744E0) --------------------------------------------------------
int __thiscall sub_4744E0(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_473F10(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00474590) --------------------------------------------------------
int __cdecl sub_474590(int a1)
{
  return a1;
}

//----- (004745A0) --------------------------------------------------------
void *__thiscall sub_4745A0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_477660(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_434510(&a3, (int)&v10, 0);
      sub_475E70((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00474640) --------------------------------------------------------
int __thiscall sub_474640(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4745A0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (004746F0) --------------------------------------------------------
int __cdecl sub_4746F0(int a1)
{
  return a1 + 113;
}

//----- (00474700) --------------------------------------------------------
void *__thiscall sub_474700(void *this, int a2, int a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(a3);
  sub_432060(v4, a2, v5);
  sub_477F50((int)v4);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00474740) --------------------------------------------------------
void *__thiscall sub_474740(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_471BE0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_478760(&a3, (int)&v10, 0);
      sub_477790((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004747E0) --------------------------------------------------------
void *__thiscall sub_4747E0(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_477FC0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00474810) --------------------------------------------------------
int __thiscall sub_474810(int this, int a2, int a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_477F20(this, &v8, a3);
  v6 = (int)sub_4747E0(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00474850) --------------------------------------------------------
int __stdcall sub_474850(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_4746F0(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_474850(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 474850: using guessed type _DWORD __stdcall sub_474850(_DWORD);

//----- (004748D0) --------------------------------------------------------
void *__thiscall sub_4748D0(int this, void *a2, char a3, int a4, const void *a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_477770() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_4782B0(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)sub_477760(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)sub_477760(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_478050((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)sub_477760(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)sub_477760(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_478180((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)sub_477760(*(_DWORD *)v20) = 1;
        *(_BYTE *)sub_477760(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)sub_477760(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)sub_477760(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_478180((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)sub_477760(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)sub_477760(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_478050((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)sub_477760(*(_DWORD *)v34) = 1;
        *(_BYTE *)sub_477760(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)sub_477760(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)sub_477760(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (00474D10) --------------------------------------------------------
int __thiscall sub_474D10(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_474740(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00474DC0) --------------------------------------------------------
int __cdecl sub_474DC0(int a1)
{
  return a1 + 56;
}

//----- (00474DD0) --------------------------------------------------------
int __cdecl sub_474DD0(int a1)
{
  return a1 + 57;
}

//----- (00474DE0) --------------------------------------------------------
void *__thiscall sub_474DE0(void *this, int a2, int a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(a3);
  sub_432060(v4, a2, v5);
  sub_4783E0((int)v4);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (00474E20) --------------------------------------------------------
void *__thiscall sub_474E20(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_478350(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_4787E0(&a3, (int)&v10, 0);
      sub_471F00((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00474EC0) --------------------------------------------------------
void *__thiscall sub_474EC0(int this, void *a2, void *a3)
{
  int v4; // eax@1

  v4 = sub_478450(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00474EF0) --------------------------------------------------------
int __thiscall sub_474EF0(int this, int a2, void *a3)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-8h]@1
  char v8; // [sp+8h] [bp-4h]@1

  v4 = this;
  v5 = (int)sub_4783B0(this, &v8, a3);
  v6 = (int)sub_474EC0(v4, &v7, a3);
  sub_4788F0(a2, v6, v5);
  return a2;
}

//----- (00474F30) --------------------------------------------------------
void *__thiscall sub_474F30(int this, void *a2, char a3, int a4, int a5)
{
  void *v5; // eax@2
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4
  int v9; // eax@6
  int v10; // eax@7
  int v11; // eax@9
  int v12; // eax@10
  int v13; // eax@12
  int v14; // esi@13
  int v15; // eax@13
  int v16; // eax@13
  int v17; // eax@14
  int v18; // eax@14
  int *v19; // eax@14
  int v20; // eax@15
  int v21; // eax@15
  int v22; // eax@15
  int v23; // eax@15
  int v24; // eax@16
  int v25; // eax@16
  int v26; // eax@18
  int v27; // eax@18
  int v28; // eax@18
  int v29; // eax@18
  int v30; // eax@18
  int v31; // eax@20
  int v32; // eax@20
  int *v33; // eax@20
  int v34; // eax@21
  int v35; // eax@21
  int v36; // eax@21
  int v37; // eax@21
  int v38; // eax@22
  int v39; // eax@22
  int v40; // eax@24
  int v41; // eax@24
  int v42; // eax@24
  int v43; // eax@24
  int v44; // eax@24
  int v46; // eax@26
  int v47; // [sp+4h] [bp-4Ch]@1
  char v48; // [sp+8h] [bp-48h]@2
  char v49; // [sp+24h] [bp-2Ch]@2
  int v50; // [sp+48h] [bp-8h]@11
  int v51; // [sp+4Ch] [bp-4h]@3
  int v52; // [sp+60h] [bp+10h]@14
  int v53; // [sp+60h] [bp+10h]@20

  v47 = this;
  if ( (unsigned int)(sub_478330() - 1) <= *(_DWORD *)(this + 8) )
  {
    sub_40FD10(&v48, "map/set<T> too long");
    v5 = sub_40F550(&v49, (int)&v48);
    sub_40F510(v5);
    sub_40F6E0(&v49);
    sub_40F780((int)&v48);
  }
  v51 = (int)sub_4784E0(*(_DWORD *)(v47 + 4), a4, *(_DWORD *)(v47 + 4), a5, 0);
  ++*(_DWORD *)(v47 + 8);
  if ( a4 == *(_DWORD *)(v47 + 4) )
  {
    v6 = sub_478AB0(v47);
    *(_DWORD *)v6 = v51;
    v7 = sub_418790(v47);
    *(_DWORD *)v7 = v51;
    v8 = CServer::SendAlive(v47);
    *(_DWORD *)v8 = v51;
  }
  else
  {
    if ( a3 )
    {
      v9 = sub_474590(a4);
      *(_DWORD *)v9 = v51;
      if ( a4 == *(_DWORD *)sub_418790(v47) )
      {
        v10 = sub_418790(v47);
        *(_DWORD *)v10 = v51;
      }
    }
    else
    {
      v11 = sub_430F90(a4);
      *(_DWORD *)v11 = v51;
      if ( a4 == *(_DWORD *)CServer::SendAlive(v47) )
      {
        v12 = CServer::SendAlive(v47);
        *(_DWORD *)v12 = v51;
      }
    }
  }
  v50 = v51;
  while ( 1 )
  {
    v13 = sub_446FF0(v50);
    if ( *(_BYTE *)sub_474DC0(*(_DWORD *)v13) )
      break;
    v14 = sub_446FF0(v50);
    v15 = sub_446FF0(v50);
    v16 = sub_446FF0(*(_DWORD *)v15);
    if ( *(_DWORD *)v14 == *(_DWORD *)sub_474590(*(_DWORD *)v16) )
    {
      v17 = sub_446FF0(v50);
      v18 = sub_446FF0(*(_DWORD *)v17);
      v19 = (int *)sub_430F90(*(_DWORD *)v18);
      v52 = *v19;
      if ( *(_BYTE *)sub_474DC0(*v19) )
      {
        v24 = sub_446FF0(v50);
        v25 = sub_430F90(*(_DWORD *)v24);
        if ( v50 == *(_DWORD *)v25 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_475370((void *)v47, v50);
        }
        v26 = sub_446FF0(v50);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v26) = 1;
        v27 = sub_446FF0(v50);
        v28 = sub_446FF0(*(_DWORD *)v27);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v28) = 0;
        v29 = sub_446FF0(v50);
        v30 = sub_446FF0(*(_DWORD *)v29);
        sub_475520((void *)v47, *(_DWORD *)v30);
      }
      else
      {
        v20 = sub_446FF0(v50);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v20) = 1;
        *(_BYTE *)sub_474DC0(v52) = 1;
        v21 = sub_446FF0(v50);
        v22 = sub_446FF0(*(_DWORD *)v21);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v22) = 0;
        v23 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v23);
      }
    }
    else
    {
      v31 = sub_446FF0(v50);
      v32 = sub_446FF0(*(_DWORD *)v31);
      v33 = (int *)sub_474590(*(_DWORD *)v32);
      v53 = *v33;
      if ( *(_BYTE *)sub_474DC0(*v33) )
      {
        v38 = sub_446FF0(v50);
        v39 = sub_474590(*(_DWORD *)v38);
        if ( v50 == *(_DWORD *)v39 )
        {
          v50 = *(_DWORD *)sub_446FF0(v50);
          sub_475520((void *)v47, v50);
        }
        v40 = sub_446FF0(v50);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v40) = 1;
        v41 = sub_446FF0(v50);
        v42 = sub_446FF0(*(_DWORD *)v41);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v42) = 0;
        v43 = sub_446FF0(v50);
        v44 = sub_446FF0(*(_DWORD *)v43);
        sub_475370((void *)v47, *(_DWORD *)v44);
      }
      else
      {
        v34 = sub_446FF0(v50);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v34) = 1;
        *(_BYTE *)sub_474DC0(v53) = 1;
        v35 = sub_446FF0(v50);
        v36 = sub_446FF0(*(_DWORD *)v35);
        *(_BYTE *)sub_474DC0(*(_DWORD *)v36) = 0;
        v37 = sub_446FF0(v50);
        v50 = *(_DWORD *)sub_446FF0(*(_DWORD *)v37);
      }
    }
  }
  v46 = sub_478AB0(v47);
  *(_BYTE *)sub_474DC0(*(_DWORD *)v46) = 1;
  sub_446700(a2, v51);
  return a2;
}

//----- (00475370) --------------------------------------------------------
int __thiscall sub_475370(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *(_DWORD *)v2;
  v3 = sub_474590(v11);
  if ( !*(_BYTE *)sub_474DD0(*(_DWORD *)v3) )
  {
    v4 = sub_474590(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (004754A0) --------------------------------------------------------
int __cdecl sub_4754A0(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_430F90(a1);
    if ( *(_BYTE *)sub_474DD0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (004754E0) --------------------------------------------------------
int __cdecl sub_4754E0(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_474590(a1);
    if ( *(_BYTE *)sub_474DD0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00475520) --------------------------------------------------------
int __thiscall sub_475520(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_474590(a2);
  v2 = sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *(_DWORD *)v2;
  v3 = sub_430F90(v11);
  if ( !*(_BYTE *)sub_474DD0(*(_DWORD *)v3) )
  {
    v4 = sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00475650) --------------------------------------------------------
int __thiscall sub_475650(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_474E20(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00475700) --------------------------------------------------------
int __stdcall sub_475700(void *a1)
{
  return sub_47A3A0(a1);
}

//----- (00475720) --------------------------------------------------------
int __thiscall sub_475720(void *this, char a2, const void *a3)
{
  int result; // eax@1
  int v4; // ST0C_4@1
  int v5; // eax@1
  int v6; // ST10_4@1
  int v7; // eax@1
  int v8; // ST14_4@1
  int v9; // eax@1

  v4 = (int)this;
  v5 = unknown_libname_7();
  v6 = v5;
  v7 = sub_446FF0(v5);
  v8 = (int)sub_478560(v6, *(_DWORD *)v7, a3);
  sub_4785D0(v4, 1u);
  *(_DWORD *)sub_446FF0(v6) = v8;
  v9 = sub_446FF0(v8);
  result = sub_474590(*(_DWORD *)v9);
  *(_DWORD *)result = v8;
  return result;
}

//----- (004757A0) --------------------------------------------------------
int __thiscall sub_4757A0(void *this, int a2, int a3)
{
  int v3; // esi@2
  int v4; // eax@2
  int v5; // esi@2
  int v6; // eax@2
  void *v8; // [sp+4h] [bp-Ch]@1
  char v9; // [sp+8h] [bp-8h]@1
  int v10; // [sp+Ch] [bp-4h]@1

  v8 = this;
  sub_47D0A0(&a3, (int)&v9, 0);
  v10 = unknown_libname_7();
  if ( v10 != *((_DWORD *)v8 + 1) )
  {
    v3 = sub_474590(v10);
    v4 = sub_446FF0(v10);
    *(_DWORD *)sub_474590(*(_DWORD *)v4) = *(_DWORD *)v3;
    v5 = sub_446FF0(v10);
    v6 = sub_474590(v10);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v6) = *(_DWORD *)v5;
    sub_44CD70(v10);
    sub_4338F0(v10, 1);
    --*((_DWORD *)v8 + 2);
  }
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (00475880) --------------------------------------------------------
int *__thiscall sub_475880(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_478660(this);
  return v2;
}

//----- (004758A0) --------------------------------------------------------
int *__thiscall sub_4758A0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4786B0(this);
  return v2;
}

//----- (004758C0) --------------------------------------------------------
int *__thiscall sub_4758C0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4786D0(this);
  return v2;
}

//----- (004758E0) --------------------------------------------------------
int *__thiscall sub_4758E0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4786F0(this);
  return v2;
}

//----- (00475900) --------------------------------------------------------
int *__thiscall sub_475900(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_478740(this);
  return v2;
}

//----- (00475920) --------------------------------------------------------
int *__thiscall sub_475920(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_478790(this);
  return v2;
}

//----- (00475940) --------------------------------------------------------
int *__thiscall sub_475940(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4787B0(this);
  return v2;
}

//----- (00475960) --------------------------------------------------------
int __thiscall sub_475960(int *this)
{
  return sub_430F90(*this);
}

//----- (00475980) --------------------------------------------------------
int *__thiscall sub_475980(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_478810(this);
  return v2;
}

//----- (004759A0) --------------------------------------------------------
int *__thiscall sub_4759A0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_478830(this);
  return v2;
}

//----- (004759C0) --------------------------------------------------------
int __thiscall sub_4759C0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_478920(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 478920: using guessed type _DWORD __stdcall sub_478920(_DWORD);

//----- (00475A20) --------------------------------------------------------
int __thiscall sub_475A20(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_478A30(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 478A30: using guessed type _DWORD __stdcall sub_478A30(_DWORD);

//----- (00475A80) --------------------------------------------------------
void *__thiscall sub_475A80(int this, void *a2, const char **a3)
{
  int v4; // eax@1

  v4 = sub_478AD0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00475AB0) --------------------------------------------------------
int __thiscall sub_475AB0(int this, const char **a2)
{
  int v2; // ST08_4@1
  const char *v3; // ST04_4@3
  int v4; // eax@3
  int v6; // [sp+4h] [bp-8h]@1
  int v7; // [sp+8h] [bp-4h]@1

  v2 = this;
  v6 = *(_DWORD *)sub_478AB0(this);
  v7 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_431110(v6) )
  {
    v3 = *a2;
    v4 = sub_473500(v6);
    if ( sub_40EEE0(*(const char **)v4, v3) )
    {
      v6 = *(_DWORD *)sub_430F90(v6);
    }
    else
    {
      v7 = v6;
      v6 = *(_DWORD *)sub_474590(v6);
    }
  }
  return v7;
}

//----- (00475B40) --------------------------------------------------------
int __thiscall sub_475B40(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_478B60(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 478B60: using guessed type _DWORD __stdcall sub_478B60(_DWORD);

//----- (00475BA0) --------------------------------------------------------
int __thiscall sub_475BA0(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // edx@1
  signed int v6; // esi@3
  void *v7; // eax@11
  void *v8; // eax@11
  void *v9; // ST20_4@11
  int v10; // ST18_4@16
  int v11; // [sp+4h] [bp-20h]@7
  int v12; // [sp+8h] [bp-1Ch]@1
  void *v13; // [sp+10h] [bp-14h]@11
  unsigned int v14; // [sp+18h] [bp-Ch]@1
  int v15; // [sp+18h] [bp-Ch]@9
  int v16; // [sp+1Ch] [bp-8h]@1
  int v17; // [sp+20h] [bp-4h]@1
  int v18; // [sp+30h] [bp+Ch]@11

  v12 = this;
  v5 = *(_DWORD *)(a4 + 4);
  v16 = *(_DWORD *)a4;
  v17 = v5;
  result = sub_472D20(this);
  v14 = result;
  if ( a3 )
  {
    v6 = sub_446B60();
    if ( v6 - sub_472D60(v12) >= (unsigned int)a3 )
    {
      if ( v14 >= a3 + sub_472D60(v12) )
      {
        if ( (*(_DWORD *)(v12 + 8) - a2) >> 3 >= (unsigned int)a3 )
        {
          v10 = *(_DWORD *)(v12 + 8);
          *(_DWORD *)(v12 + 8) = sub_431E60(v10 - 8 * a3, v10, *(void **)(v12 + 8));
          sub_47A3F0(a2, v10 - 8 * a3, v10);
          result = sub_447520(a2, a2 + 8 * a3, (int)&v16);
        }
        else
        {
          sub_431E60(a2, *(_DWORD *)(v12 + 8), (void *)(a2 + 8 * a3));
          sub_472EA0(*(void **)(v12 + 8), a3 - ((*(_DWORD *)(v12 + 8) - a2) >> 3), (int)&v16);
          *(_DWORD *)(v12 + 8) += 8 * a3;
          result = sub_447520(a2, *(_DWORD *)(v12 + 8) - 8 * a3, (int)&v16);
        }
      }
      else
      {
        if ( sub_446B60() - (v14 >> 1) >= v14 )
          v11 = v14 + (v14 >> 1);
        else
          v11 = 0;
        v15 = v11;
        if ( v11 < (unsigned int)(a3 + sub_472D60(v12)) )
          v15 = a3 + sub_472D60(v12);
        v7 = sub_446E50(v15);
        v13 = v7;
        v8 = sub_431E60(*(_DWORD *)(v12 + 4), a2, v7);
        v9 = sub_472EA0(v8, a3, (int)&v16);
        sub_431E60(a2, *(_DWORD *)(v12 + 8), v9);
        v18 = a3 + sub_472D60(v12);
        if ( *(_DWORD *)(v12 + 4) )
        {
          sub_4316C0(*(_DWORD *)(v12 + 4), *(_DWORD *)(v12 + 8));
          sub_4338F0(*(_DWORD *)(v12 + 4), (*(_DWORD *)(v12 + 12) - *(_DWORD *)(v12 + 4)) >> 3);
        }
        *(_DWORD *)(v12 + 12) = (char *)v13 + 8 * v15;
        result = v12;
        *(_DWORD *)(v12 + 8) = (char *)v13 + 8 * v18;
        *(_DWORD *)(v12 + 4) = v13;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (00475E70) --------------------------------------------------------
int __thiscall sub_475E70(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_433230(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_475880(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_433230(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_433230(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_433230(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_433230(v57) )
        v51 = v55;
      else
        v51 = sub_479190(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_433230(v57) )
        v50 = v55;
      else
        v50 = sub_433AB0(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_433230(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = sub_433730(v58);
    v34 = sub_433730(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)sub_433730(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)sub_433730(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)sub_433730(v56) )
        {
          *(_BYTE *)sub_433730(v56) = 1;
          *(_BYTE *)sub_433730(v55) = 0;
          sub_4766F0((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_433230(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)sub_433730(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)sub_433730(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)sub_433730(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)sub_433730(*(_DWORD *)v40) = 1;
              *(_BYTE *)sub_433730(v56) = 0;
              sub_433740((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = sub_433730(v55);
            *(_BYTE *)sub_433730(v56) = *(_BYTE *)v41;
            *(_BYTE *)sub_433730(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)sub_433730(*(_DWORD *)v42) = 1;
            sub_4766F0((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_433730(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)sub_433730(v56) )
        {
          *(_BYTE *)sub_433730(v56) = 1;
          *(_BYTE *)sub_433730(v55) = 0;
          sub_433740((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_433230(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)sub_433730(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)sub_433730(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)sub_433730(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)sub_433730(*(_DWORD *)v46) = 1;
              *(_BYTE *)sub_433730(v56) = 0;
              sub_4766F0((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = sub_433730(v55);
            *(_BYTE *)sub_433730(v56) = *(_BYTE *)v47;
            *(_BYTE *)sub_433730(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)sub_433730(*(_DWORD *)v48) = 1;
            sub_433740((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_433730(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)sub_433730(v57) = 1;
  }
  sub_44CD70(v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (00476600) --------------------------------------------------------
int __thiscall sub_476600(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_478C10(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 478C10: using guessed type _DWORD __stdcall sub_478C10(_DWORD);

//----- (00476660) --------------------------------------------------------
int __thiscall sub_476660(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_433230(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(v3, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (004766F0) --------------------------------------------------------
int __thiscall sub_4766F0(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *(_DWORD *)v2;
  v3 = sub_474590(v11);
  if ( !*(_BYTE *)sub_433230(*(_DWORD *)v3) )
  {
    v4 = sub_474590(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00476820) --------------------------------------------------------
void *__stdcall sub_476820(int a1, int a2, int a3, const void *a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_4793B0(1);
  v6 = (int)operator new(0x30u, v7);
  if ( v6 )
    sub_479E10(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (004768A0) --------------------------------------------------------
signed int __cdecl sub_4768A0()
{
  return sub_478E40();
}

//----- (004768C0) --------------------------------------------------------
void *__thiscall sub_4768C0(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_478C90(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (004768F0) --------------------------------------------------------
int __thiscall sub_4768F0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = sub_478D20();
  *(_BYTE *)sub_4734F0(*(_DWORD *)(v2 + 4)) = 1;
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)CServer::SendAlive(v2) = *(_DWORD *)(v2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00476960) --------------------------------------------------------
int __thiscall sub_476960(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_4734F0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(v3, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (004769F0) --------------------------------------------------------
void *__stdcall sub_4769F0(int a1, int a2, int a3, const void *a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_478E70(1);
  v6 = (int)operator new(0x34u, v7);
  if ( v6 )
    sub_479E60(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00476A70) --------------------------------------------------------
int __cdecl sub_476A70(int a1)
{
  return a1 + 24;
}

//----- (00476A80) --------------------------------------------------------
signed int __cdecl sub_476A80()
{
  return sub_4790C0();
}

//----- (00476AA0) --------------------------------------------------------
int __thiscall sub_476AA0(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_473EC0(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_4798D0(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_473EC0(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_473EC0(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_473EC0(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_473EC0(v57) )
        v51 = v55;
      else
        v51 = sub_478ED0(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_473EC0(v57) )
        v50 = v55;
      else
        v50 = sub_478E90(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_473EC0(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = sub_476A70(v58);
    v34 = sub_476A70(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)sub_476A70(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)sub_476A70(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)sub_476A70(v56) )
        {
          *(_BYTE *)sub_476A70(v56) = 1;
          *(_BYTE *)sub_476A70(v55) = 0;
          sub_477360((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_473EC0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)sub_476A70(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)sub_476A70(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)sub_476A70(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)sub_476A70(*(_DWORD *)v40) = 1;
              *(_BYTE *)sub_476A70(v56) = 0;
              sub_477490((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = sub_476A70(v55);
            *(_BYTE *)sub_476A70(v56) = *(_BYTE *)v41;
            *(_BYTE *)sub_476A70(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)sub_476A70(*(_DWORD *)v42) = 1;
            sub_477360((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_476A70(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)sub_476A70(v56) )
        {
          *(_BYTE *)sub_476A70(v56) = 1;
          *(_BYTE *)sub_476A70(v55) = 0;
          sub_477490((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_473EC0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)sub_476A70(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)sub_476A70(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)sub_476A70(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)sub_476A70(*(_DWORD *)v46) = 1;
              *(_BYTE *)sub_476A70(v56) = 0;
              sub_477360((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = sub_476A70(v55);
            *(_BYTE *)sub_476A70(v56) = *(_BYTE *)v47;
            *(_BYTE *)sub_476A70(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)sub_476A70(*(_DWORD *)v48) = 1;
            sub_477490((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_476A70(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)sub_476A70(v57) = 1;
  }
  sub_44CD70(v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (00477230) --------------------------------------------------------
void *__thiscall sub_477230(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_478F10(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00477260) --------------------------------------------------------
int __thiscall sub_477260(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = sub_478FA0();
  *(_BYTE *)sub_473EC0(*(_DWORD *)(v2 + 4)) = 1;
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)CServer::SendAlive(v2) = *(_DWORD *)(v2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (004772D0) --------------------------------------------------------
int __thiscall sub_4772D0(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_473EC0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(v3, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (00477360) --------------------------------------------------------
int __thiscall sub_477360(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *(_DWORD *)v2;
  v3 = sub_474590(v11);
  if ( !*(_BYTE *)sub_473EC0(*(_DWORD *)v3) )
  {
    v4 = sub_474590(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00477490) --------------------------------------------------------
int __thiscall sub_477490(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_474590(a2);
  v2 = sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *(_DWORD *)v2;
  v3 = sub_430F90(v11);
  if ( !*(_BYTE *)sub_473EC0(*(_DWORD *)v3) )
  {
    v4 = sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (004775C0) --------------------------------------------------------
void *__stdcall sub_4775C0(int a1, int a2, int a3, int a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_4790F0(1);
  v6 = (int)operator new(0x1Cu, v7);
  if ( v6 )
    sub_479EB0(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00477640) --------------------------------------------------------
signed int __cdecl sub_477640()
{
  return sub_479380();
}

//----- (00477660) --------------------------------------------------------
int __thiscall sub_477660(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_479110(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 479110: using guessed type _DWORD __stdcall sub_479110(_DWORD);

//----- (004776C0) --------------------------------------------------------
void *__thiscall sub_4776C0(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_4791D0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (004776F0) --------------------------------------------------------
int __thiscall sub_4776F0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = sub_479260();
  *(_BYTE *)sub_433230(*(_DWORD *)(v2 + 4)) = 1;
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)CServer::SendAlive(v2) = *(_DWORD *)(v2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00477760) --------------------------------------------------------
int __cdecl sub_477760(int a1)
{
  return a1 + 112;
}

//----- (00477770) --------------------------------------------------------
signed int __cdecl sub_477770()
{
  return sub_479600();
}

//----- (00477790) --------------------------------------------------------
int __thiscall sub_477790(void *this, int a2, int a3)
{
  int v3; // eax@1
  void *v4; // eax@2
  int v5; // eax@3
  int v6; // eax@5
  int v7; // eax@10
  int v8; // eax@11
  int v9; // eax@12
  int v10; // eax@13
  int v11; // eax@14
  int v12; // eax@15
  int v13; // eax@16
  int v14; // eax@21
  int v15; // eax@27
  int v16; // eax@27
  int v17; // esi@27
  int v18; // eax@27
  int v19; // eax@30
  int v20; // eax@31
  int v21; // esi@31
  int v22; // eax@31
  int v23; // eax@31
  int v24; // eax@32
  int v25; // eax@33
  int v26; // eax@34
  int v27; // eax@34
  int v28; // eax@35
  int v29; // eax@35
  int v30; // eax@36
  int v31; // eax@36
  int v32; // esi@37
  int v33; // ST04_4@37
  int v34; // eax@37
  int v35; // eax@39
  int v36; // eax@41
  int v37; // eax@46
  int v38; // eax@47
  int v39; // eax@49
  int v40; // eax@50
  int v41; // esi@51
  int v42; // eax@51
  int v43; // eax@57
  int v44; // eax@58
  int v45; // eax@60
  int v46; // eax@61
  int v47; // esi@62
  int v48; // eax@62
  int v50; // [sp+4h] [bp-5Ch]@23
  int v51; // [sp+8h] [bp-58h]@18
  int v52; // [sp+Ch] [bp-54h]@1
  char v53; // [sp+10h] [bp-50h]@2
  char v54; // [sp+2Ch] [bp-34h]@2
  int v55; // [sp+50h] [bp-10h]@9
  int v56; // [sp+54h] [bp-Ch]@3
  int v57; // [sp+58h] [bp-8h]@4
  int v58; // [sp+5Ch] [bp-4h]@3

  v52 = (int)this;
  v3 = unknown_libname_7();
  if ( *(_BYTE *)sub_4746F0(v3) )
  {
    sub_40FD10(&v53, "invalid map/set<T> iterator");
    v4 = sub_4111A0(&v54, (int)&v53);
    sub_40F510(v4);
    sub_4111D0(&v54);
    sub_40F780((int)&v53);
  }
  v58 = unknown_libname_7();
  sub_479B70(&a3);
  v56 = v58;
  v5 = sub_474590(v58);
  if ( *(_BYTE *)sub_4746F0(*(_DWORD *)v5) )
  {
    v57 = *(_DWORD *)sub_430F90(v56);
  }
  else
  {
    v6 = sub_430F90(v56);
    if ( *(_BYTE *)sub_4746F0(*(_DWORD *)v6) )
    {
      v57 = *(_DWORD *)sub_474590(v56);
    }
    else
    {
      v56 = unknown_libname_7();
      v57 = *(_DWORD *)sub_430F90(v56);
    }
  }
  if ( v56 == v58 )
  {
    v55 = *(_DWORD *)sub_446FF0(v58);
    if ( !*(_BYTE *)sub_4746F0(v57) )
    {
      v7 = sub_446FF0(v57);
      *(_DWORD *)v7 = v55;
    }
    v8 = sub_478AB0(v52);
    if ( *(_DWORD *)v8 == v58 )
    {
      v9 = sub_478AB0(v52);
      *(_DWORD *)v9 = v57;
    }
    else
    {
      v10 = sub_474590(v55);
      if ( *(_DWORD *)v10 == v58 )
      {
        v11 = sub_474590(v55);
        *(_DWORD *)v11 = v57;
      }
      else
      {
        v12 = sub_430F90(v55);
        *(_DWORD *)v12 = v57;
      }
    }
    v13 = sub_418790(v52);
    if ( *(_DWORD *)v13 == v58 )
    {
      if ( *(_BYTE *)sub_4746F0(v57) )
        v51 = v55;
      else
        v51 = sub_479410(v57);
      *(_DWORD *)sub_418790(v52) = v51;
    }
    v14 = CServer::SendAlive(v52);
    if ( *(_DWORD *)v14 == v58 )
    {
      if ( *(_BYTE *)sub_4746F0(v57) )
        v50 = v55;
      else
        v50 = sub_4793D0(v57);
      *(_DWORD *)CServer::SendAlive(v52) = v50;
    }
  }
  else
  {
    v15 = sub_474590(v58);
    v16 = sub_446FF0(*(_DWORD *)v15);
    *(_DWORD *)v16 = v56;
    v17 = sub_474590(v58);
    *(_DWORD *)sub_474590(v56) = *(_DWORD *)v17;
    v18 = sub_430F90(v58);
    if ( v56 == *(_DWORD *)v18 )
    {
      v55 = v56;
    }
    else
    {
      v55 = *(_DWORD *)sub_446FF0(v56);
      if ( !*(_BYTE *)sub_4746F0(v57) )
      {
        v19 = sub_446FF0(v57);
        *(_DWORD *)v19 = v55;
      }
      v20 = sub_474590(v55);
      *(_DWORD *)v20 = v57;
      v21 = sub_430F90(v58);
      *(_DWORD *)sub_430F90(v56) = *(_DWORD *)v21;
      v22 = sub_430F90(v58);
      v23 = sub_446FF0(*(_DWORD *)v22);
      *(_DWORD *)v23 = v56;
    }
    v24 = sub_478AB0(v52);
    if ( *(_DWORD *)v24 == v58 )
    {
      v25 = sub_478AB0(v52);
      *(_DWORD *)v25 = v56;
    }
    else
    {
      v26 = sub_446FF0(v58);
      v27 = sub_474590(*(_DWORD *)v26);
      if ( *(_DWORD *)v27 == v58 )
      {
        v28 = sub_446FF0(v58);
        v29 = sub_474590(*(_DWORD *)v28);
        *(_DWORD *)v29 = v56;
      }
      else
      {
        v30 = sub_446FF0(v58);
        v31 = sub_430F90(*(_DWORD *)v30);
        *(_DWORD *)v31 = v56;
      }
    }
    v32 = sub_446FF0(v58);
    *(_DWORD *)sub_446FF0(v56) = *(_DWORD *)v32;
    v33 = sub_477760(v58);
    v34 = sub_477760(v56);
    sub_411470(v34, v33);
  }
  if ( *(_BYTE *)sub_477760(v58) == 1 )
  {
    while ( 1 )
    {
      v35 = sub_478AB0(v52);
      if ( v57 == *(_DWORD *)v35 )
        break;
      if ( *(_BYTE *)sub_477760(v57) != 1 )
        break;
      v36 = sub_474590(v55);
      if ( v57 == *(_DWORD *)v36 )
      {
        v56 = *(_DWORD *)sub_430F90(v55);
        if ( !*(_BYTE *)sub_477760(v56) )
        {
          *(_BYTE *)sub_477760(v56) = 1;
          *(_BYTE *)sub_477760(v55) = 0;
          sub_478050((void *)v52, v55);
          v56 = *(_DWORD *)sub_430F90(v55);
        }
        if ( *(_BYTE *)sub_4746F0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v37 = sub_474590(v56);
          if ( *(_BYTE *)sub_477760(*(_DWORD *)v37) != 1
            || (v38 = sub_430F90(v56), *(_BYTE *)sub_477760(*(_DWORD *)v38) != 1) )
          {
            v39 = sub_430F90(v56);
            if ( *(_BYTE *)sub_477760(*(_DWORD *)v39) == 1 )
            {
              v40 = sub_474590(v56);
              *(_BYTE *)sub_477760(*(_DWORD *)v40) = 1;
              *(_BYTE *)sub_477760(v56) = 0;
              sub_478180((void *)v52, v56);
              v56 = *(_DWORD *)sub_430F90(v55);
            }
            v41 = sub_477760(v55);
            *(_BYTE *)sub_477760(v56) = *(_BYTE *)v41;
            *(_BYTE *)sub_477760(v55) = 1;
            v42 = sub_430F90(v56);
            *(_BYTE *)sub_477760(*(_DWORD *)v42) = 1;
            sub_478050((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_477760(v56) = 0;
          v57 = v55;
        }
      }
      else
      {
        v56 = *(_DWORD *)sub_474590(v55);
        if ( !*(_BYTE *)sub_477760(v56) )
        {
          *(_BYTE *)sub_477760(v56) = 1;
          *(_BYTE *)sub_477760(v55) = 0;
          sub_478180((void *)v52, v55);
          v56 = *(_DWORD *)sub_474590(v55);
        }
        if ( *(_BYTE *)sub_4746F0(v56) )
        {
          v57 = v55;
        }
        else
        {
          v43 = sub_430F90(v56);
          if ( *(_BYTE *)sub_477760(*(_DWORD *)v43) != 1
            || (v44 = sub_474590(v56), *(_BYTE *)sub_477760(*(_DWORD *)v44) != 1) )
          {
            v45 = sub_474590(v56);
            if ( *(_BYTE *)sub_477760(*(_DWORD *)v45) == 1 )
            {
              v46 = sub_430F90(v56);
              *(_BYTE *)sub_477760(*(_DWORD *)v46) = 1;
              *(_BYTE *)sub_477760(v56) = 0;
              sub_478050((void *)v52, v56);
              v56 = *(_DWORD *)sub_474590(v55);
            }
            v47 = sub_477760(v55);
            *(_BYTE *)sub_477760(v56) = *(_BYTE *)v47;
            *(_BYTE *)sub_477760(v55) = 1;
            v48 = sub_474590(v56);
            *(_BYTE *)sub_477760(*(_DWORD *)v48) = 1;
            sub_478180((void *)v52, v55);
            break;
          }
          *(_BYTE *)sub_477760(v56) = 0;
          v57 = v55;
        }
      }
      v55 = *(_DWORD *)sub_446FF0(v57);
    }
    *(_BYTE *)sub_477760(v57) = 1;
  }
  sub_44CD70(v58);
  sub_4338F0(v58, 1);
  if ( *(_DWORD *)(v52 + 8) )
    --*(_DWORD *)(v52 + 8);
  *(_DWORD *)a2 = a3;
  return a2;
}

//----- (00477F20) --------------------------------------------------------
void *__thiscall sub_477F20(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_479450(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (00477F50) --------------------------------------------------------
int __thiscall sub_477F50(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = sub_4794E0();
  *(_BYTE *)sub_4746F0(*(_DWORD *)(v2 + 4)) = 1;
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)CServer::SendAlive(v2) = *(_DWORD *)(v2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00477FC0) --------------------------------------------------------
int __thiscall sub_477FC0(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_4746F0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(v3, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (00478050) --------------------------------------------------------
int __thiscall sub_478050(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_430F90(a2);
  v2 = sub_474590(v11);
  *(_DWORD *)sub_430F90(a2) = *(_DWORD *)v2;
  v3 = sub_474590(v11);
  if ( !*(_BYTE *)sub_4746F0(*(_DWORD *)v3) )
  {
    v4 = sub_474590(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_474590(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_474590(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (00478180) --------------------------------------------------------
int __thiscall sub_478180(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  int v5; // esi@3
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@7
  int result; // eax@8
  int v10; // [sp+4h] [bp-8h]@1
  int v11; // [sp+8h] [bp-4h]@1

  v10 = (int)this;
  v11 = *(_DWORD *)sub_474590(a2);
  v2 = sub_430F90(v11);
  *(_DWORD *)sub_474590(a2) = *(_DWORD *)v2;
  v3 = sub_430F90(v11);
  if ( !*(_BYTE *)sub_4746F0(*(_DWORD *)v3) )
  {
    v4 = sub_430F90(v11);
    *(_DWORD *)sub_446FF0(*(_DWORD *)v4) = a2;
  }
  v5 = sub_446FF0(a2);
  *(_DWORD *)sub_446FF0(v11) = *(_DWORD *)v5;
  if ( a2 == *(_DWORD *)sub_478AB0(v10) )
  {
    *(_DWORD *)sub_478AB0(v10) = v11;
  }
  else
  {
    v6 = sub_446FF0(a2);
    if ( a2 == *(_DWORD *)sub_430F90(*(_DWORD *)v6) )
    {
      v7 = sub_446FF0(a2);
      *(_DWORD *)sub_430F90(*(_DWORD *)v7) = v11;
    }
    else
    {
      v8 = sub_446FF0(a2);
      *(_DWORD *)sub_474590(*(_DWORD *)v8) = v11;
    }
  }
  *(_DWORD *)sub_430F90(v11) = a2;
  result = sub_446FF0(a2);
  *(_DWORD *)result = v11;
  return result;
}

//----- (004782B0) --------------------------------------------------------
void *__stdcall sub_4782B0(int a1, int a2, int a3, const void *a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_479630(1);
  v6 = (int)operator new(0x74u, v7);
  if ( v6 )
    sub_479F10(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00478330) --------------------------------------------------------
signed int __cdecl sub_478330()
{
  return sub_479880();
}

//----- (00478350) --------------------------------------------------------
int __thiscall sub_478350(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_479650(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 479650: using guessed type _DWORD __stdcall sub_479650(_DWORD);

//----- (004783B0) --------------------------------------------------------
void *__thiscall sub_4783B0(int this, void *a2, void *a3)
{
  int v4; // eax@1

  v4 = sub_4796D0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (004783E0) --------------------------------------------------------
int __thiscall sub_4783E0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = sub_479760();
  *(_BYTE *)sub_474DD0(*(_DWORD *)(v2 + 4)) = 1;
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)CServer::SendAlive(v2) = *(_DWORD *)(v2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (00478450) --------------------------------------------------------
int __thiscall sub_478450(int this, void *a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_474DD0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_471ED0((void *)v3, a2) )
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
    else
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
  }
  return v6;
}

//----- (004784E0) --------------------------------------------------------
void *__stdcall sub_4784E0(int a1, int a2, int a3, int a4, char a5)
{
  int v6; // [sp+8h] [bp-8h]@1
  void *v7; // [sp+Ch] [bp-4h]@1

  v7 = sub_478640(1);
  v6 = (int)operator new(0x3Cu, v7);
  if ( v6 )
    sub_479F60(v6, a1, a2, a3, a4, a5);
  return v7;
}

//----- (00478560) --------------------------------------------------------
void *__stdcall sub_478560(int a1, int a2, const void *a3)
{
  int v4; // [sp+8h] [bp-8h]@1
  void *v5; // [sp+Ch] [bp-4h]@1

  v5 = sub_478640(1);
  v4 = (int)operator new(0x3Cu, v5);
  if ( v4 )
    sub_479FB0(v4, a1, a2, a3);
  return v5;
}

//----- (004785D0) --------------------------------------------------------
int __thiscall sub_4785D0(int this, unsigned int a2)
{
  void *v2; // eax@2
  int result; // eax@3
  int v4; // [sp+0h] [bp-44h]@1
  char v5; // [sp+4h] [bp-40h]@2
  char v6; // [sp+20h] [bp-24h]@2

  v4 = this;
  if ( sub_4798B0() - *(_DWORD *)(this + 8) < a2 )
  {
    sub_40FD10(&v5, "list<T> too long");
    v2 = sub_40F550(&v6, (int)&v5);
    sub_40F510(v2);
    sub_40F6E0(&v6);
    sub_40F780((int)&v5);
  }
  result = v4;
  *(_DWORD *)(v4 + 8) += a2;
  return result;
}

//----- (00478640) --------------------------------------------------------
void *__stdcall sub_478640(int a1)
{
  return sub_47A4B0(a1);
}

//----- (00478660) --------------------------------------------------------
int *__thiscall sub_478660(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_434540(this);
  return v2;
}

//----- (00478680) --------------------------------------------------------
int __thiscall sub_478680(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_4798D0(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (004786B0) --------------------------------------------------------
int *__thiscall sub_4786B0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4798F0(this);
  return v2;
}

//----- (004786D0) --------------------------------------------------------
int *__thiscall sub_4786D0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_479AB0(this);
  return v2;
}

//----- (004786F0) --------------------------------------------------------
int *__thiscall sub_4786F0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_4799D0(this);
  return v2;
}

//----- (00478710) --------------------------------------------------------
int __thiscall sub_478710(void *this, int a2, int a3)
{
  int v4; // [sp+4h] [bp-4h]@1

  v4 = *(_DWORD *)this;
  *(_DWORD *)a2 = *(_DWORD *)sub_4473D0(&v4, a3);
  return a2;
}

//----- (00478740) --------------------------------------------------------
int *__thiscall sub_478740(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_433950(this);
  return v2;
}

//----- (00478760) --------------------------------------------------------
int __thiscall sub_478760(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_479B70(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (00478790) --------------------------------------------------------
int *__thiscall sub_478790(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_479B90(this);
  return v2;
}

//----- (004787B0) --------------------------------------------------------
int *__thiscall sub_4787B0(int *this)
{
  int *v2; // ST04_4@1

  v2 = this;
  *this = *(_DWORD *)sub_446FF0(*this);
  return v2;
}

//----- (004787E0) --------------------------------------------------------
int __thiscall sub_4787E0(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_475980(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (00478810) --------------------------------------------------------
int *__thiscall sub_478810(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_479D50(this);
  return v2;
}

//----- (00478830) --------------------------------------------------------
int *__thiscall sub_478830(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_479C70(this);
  return v2;
}

//----- (00478850) --------------------------------------------------------
int __thiscall sub_478850(int this)
{
  int result; // eax@2
  int v2; // ST0C_4@3
  int v3; // [sp+0h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-4h]@1

  v3 = this;
  v4 = *(_DWORD *)sub_474590(*(_DWORD *)(this + 4));
  *(_DWORD *)sub_474590(*(_DWORD *)(v3 + 4)) = *(_DWORD *)(v3 + 4);
  *(_DWORD *)sub_446FF0(*(_DWORD *)(v3 + 4)) = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 8) = 0;
  while ( 1 )
  {
    result = v4;
    if ( v4 == *(_DWORD *)(v3 + 4) )
      break;
    v2 = *(_DWORD *)sub_474590(v4);
    sub_44CD70(v4);
    sub_4338F0(v4, 1);
    v4 = v2;
  }
  return result;
}

//----- (004788F0) --------------------------------------------------------
int __thiscall sub_4788F0(int this, int a2, int a3)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  *(_DWORD *)(this + 4) = *(_DWORD *)a3;
  return this;
}

//----- (00478920) --------------------------------------------------------
int __stdcall sub_478920(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_478920(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 478920: using guessed type _DWORD __stdcall sub_478920(_DWORD);

//----- (004789A0) --------------------------------------------------------
int __thiscall sub_4789A0(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(a2, v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478A30) --------------------------------------------------------
int __stdcall sub_478A30(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_478A30(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 478A30: using guessed type _DWORD __stdcall sub_478A30(_DWORD);

//----- (00478AB0) --------------------------------------------------------
int __thiscall sub_478AB0(int this)
{
  return sub_446FF0(*(_DWORD *)(this + 4));
}

//----- (00478AD0) --------------------------------------------------------
int __thiscall sub_478AD0(int this, const char **a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_431110(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_40EEE0(*a2, *(const char **)v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478B60) --------------------------------------------------------
int __stdcall sub_478B60(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_478B60(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 478B60: using guessed type _DWORD __stdcall sub_478B60(_DWORD);

//----- (00478BE0) --------------------------------------------------------
signed int __cdecl sub_478BE0()
{
  return 536870911;
}

//----- (00478C10) --------------------------------------------------------
int __stdcall sub_478C10(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_433230(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_478C10(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 478C10: using guessed type _DWORD __stdcall sub_478C10(_DWORD);

//----- (00478C90) --------------------------------------------------------
int __thiscall sub_478C90(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_4734F0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(a2, v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478D20) --------------------------------------------------------
int __cdecl sub_478D20()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-14h]@1
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  int v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v1 = (int)sub_478E70(1);
  v8 = v1;
  v9 = 0;
  v7 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v7);
  ++v9;
  v6 = 0;
  v3 = sub_446FF0(v8);
  sub_42F9B0((void *)v3, (void **)&v6);
  ++v9;
  v5 = 0;
  v4 = sub_430F90(v8);
  sub_42F9B0((void *)v4, (void **)&v5);
  *(_BYTE *)sub_4734E0(v8) = 1;
  *(_BYTE *)sub_4734F0(v8) = 0;
  return v8;
}

//----- (00478E40) --------------------------------------------------------
signed int __cdecl sub_478E40()
{
  return 119304647;
}

//----- (00478E70) --------------------------------------------------------
void *__stdcall sub_478E70(int a1)
{
  return sub_47A450(a1);
}

//----- (00478E90) --------------------------------------------------------
int __cdecl sub_478E90(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_430F90(a1);
    if ( *(_BYTE *)sub_473EC0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00478ED0) --------------------------------------------------------
int __cdecl sub_478ED0(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_474590(a1);
    if ( *(_BYTE *)sub_473EC0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00478F10) --------------------------------------------------------
int __thiscall sub_478F10(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_473EC0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(a2, v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00478FA0) --------------------------------------------------------
int __cdecl sub_478FA0()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-14h]@1
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  int v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v1 = (int)sub_4790F0(1);
  v8 = v1;
  v9 = 0;
  v7 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v7);
  ++v9;
  v6 = 0;
  v3 = sub_446FF0(v8);
  sub_42F9B0((void *)v3, (void **)&v6);
  ++v9;
  v5 = 0;
  v4 = sub_430F90(v8);
  sub_42F9B0((void *)v4, (void **)&v5);
  *(_BYTE *)sub_476A70(v8) = 1;
  *(_BYTE *)sub_473EC0(v8) = 0;
  return v8;
}

//----- (004790C0) --------------------------------------------------------
signed int __cdecl sub_4790C0()
{
  return 357913941;
}

//----- (004790F0) --------------------------------------------------------
void *__stdcall sub_4790F0(int a1)
{
  return sub_47A470(a1);
}

//----- (00479110) --------------------------------------------------------
int __stdcall sub_479110(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_433230(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_479110(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 479110: using guessed type _DWORD __stdcall sub_479110(_DWORD);

//----- (00479190) --------------------------------------------------------
int __cdecl sub_479190(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_474590(a1);
    if ( *(_BYTE *)sub_433230(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (004791D0) --------------------------------------------------------
int __thiscall sub_4791D0(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_433230(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(a2, v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00479260) --------------------------------------------------------
int __cdecl sub_479260()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-14h]@1
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  int v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v1 = (int)sub_4793B0(1);
  v8 = v1;
  v9 = 0;
  v7 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v7);
  ++v9;
  v6 = 0;
  v3 = sub_446FF0(v8);
  sub_42F9B0((void *)v3, (void **)&v6);
  ++v9;
  v5 = 0;
  v4 = sub_430F90(v8);
  sub_42F9B0((void *)v4, (void **)&v5);
  *(_BYTE *)sub_433730(v8) = 1;
  *(_BYTE *)sub_433230(v8) = 0;
  return v8;
}

//----- (00479380) --------------------------------------------------------
signed int __cdecl sub_479380()
{
  return 134217727;
}

//----- (004793B0) --------------------------------------------------------
void *__stdcall sub_4793B0(int a1)
{
  return sub_433B00(a1);
}

//----- (004793D0) --------------------------------------------------------
int __cdecl sub_4793D0(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_430F90(a1);
    if ( *(_BYTE *)sub_4746F0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_430F90(a1);
  }
  return a1;
}

//----- (00479410) --------------------------------------------------------
int __cdecl sub_479410(int a1)
{
  int v1; // eax@1

  while ( 1 )
  {
    v1 = sub_474590(a1);
    if ( *(_BYTE *)sub_4746F0(*(_DWORD *)v1) )
      break;
    a1 = *(_DWORD *)sub_474590(a1);
  }
  return a1;
}

//----- (00479450) --------------------------------------------------------
int __thiscall sub_479450(int this, int a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_4746F0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_4186F0(a2, v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (004794E0) --------------------------------------------------------
int __cdecl sub_4794E0()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-14h]@1
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  int v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v1 = (int)sub_479630(1);
  v8 = v1;
  v9 = 0;
  v7 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v7);
  ++v9;
  v6 = 0;
  v3 = sub_446FF0(v8);
  sub_42F9B0((void *)v3, (void **)&v6);
  ++v9;
  v5 = 0;
  v4 = sub_430F90(v8);
  sub_42F9B0((void *)v4, (void **)&v5);
  *(_BYTE *)sub_477760(v8) = 1;
  *(_BYTE *)sub_4746F0(v8) = 0;
  return v8;
}

//----- (00479600) --------------------------------------------------------
signed int __cdecl sub_479600()
{
  return 42949672;
}

//----- (00479630) --------------------------------------------------------
void *__stdcall sub_479630(int a1)
{
  return sub_47A490(a1);
}

//----- (00479650) --------------------------------------------------------
int __stdcall sub_479650(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_474DD0(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_479650(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_475700((void *)a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 479650: using guessed type _DWORD __stdcall sub_479650(_DWORD);

//----- (004796D0) --------------------------------------------------------
int __thiscall sub_4796D0(int this, void *a2)
{
  int v2; // ST08_4@1
  int v3; // eax@3
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = *(_DWORD *)sub_478AB0(this);
  v6 = *(_DWORD *)(v2 + 4);
  while ( !*(_BYTE *)sub_474DD0(v5) )
  {
    v3 = sub_473500(v5);
    if ( sub_471ED0(a2, (void *)v3) )
    {
      v6 = v5;
      v5 = *(_DWORD *)sub_474590(v5);
    }
    else
    {
      v5 = *(_DWORD *)sub_430F90(v5);
    }
  }
  return v6;
}

//----- (00479760) --------------------------------------------------------
int __cdecl sub_479760()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // eax@1
  int v5; // [sp+4h] [bp-14h]@1
  int v6; // [sp+8h] [bp-10h]@1
  int v7; // [sp+Ch] [bp-Ch]@1
  int v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v1 = (int)sub_478640(1);
  v8 = v1;
  v9 = 0;
  v7 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v7);
  ++v9;
  v6 = 0;
  v3 = sub_446FF0(v8);
  sub_42F9B0((void *)v3, (void **)&v6);
  ++v9;
  v5 = 0;
  v4 = sub_430F90(v8);
  sub_42F9B0((void *)v4, (void **)&v5);
  *(_BYTE *)sub_474DC0(v8) = 1;
  *(_BYTE *)sub_474DD0(v8) = 0;
  return v8;
}

//----- (00479880) --------------------------------------------------------
signed int __cdecl sub_479880()
{
  return 97612893;
}

//----- (004798B0) --------------------------------------------------------
signed int __cdecl sub_4798B0()
{
  return sub_47A030();
}

//----- (004798D0) --------------------------------------------------------
int *__thiscall sub_4798D0(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_47A060(this);
  return v2;
}

//----- (004798F0) --------------------------------------------------------
int __thiscall sub_4798F0(int *this)
{
  int result; // eax@2
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  if ( *(_BYTE *)sub_473EC0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*v5);
    *v5 = result;
  }
  else
  {
    v2 = sub_474590(*v5);
    if ( *(_BYTE *)sub_473EC0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        if ( *(_BYTE *)sub_473EC0(*v4) )
          break;
        if ( *v5 != *(_DWORD *)sub_474590(v6) )
          break;
        *v5 = v6;
      }
      result = *(_BYTE *)sub_473EC0(v6);
      if ( !result )
        *v5 = v6;
    }
    else
    {
      v3 = sub_474590(*v5);
      result = sub_478E90(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (004799D0) --------------------------------------------------------
int __thiscall sub_4799D0(int *this)
{
  int result; // eax@2
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  if ( *(_BYTE *)sub_4734F0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*v5);
    *v5 = result;
  }
  else
  {
    v2 = sub_474590(*v5);
    if ( *(_BYTE *)sub_4734F0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        if ( *(_BYTE *)sub_4734F0(*v4) )
          break;
        if ( *v5 != *(_DWORD *)sub_474590(v6) )
          break;
        *v5 = v6;
      }
      result = *(_BYTE *)sub_4734F0(v6);
      if ( !result )
        *v5 = v6;
    }
    else
    {
      v3 = sub_474590(*v5);
      result = sub_473C60(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00479AB0) --------------------------------------------------------
int __thiscall sub_479AB0(int *this)
{
  int result; // eax@1
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  result = sub_4734F0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = sub_430F90(*v5);
    if ( *(_BYTE *)sub_4734F0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        result = *(_BYTE *)sub_4734F0(*v4);
        if ( result )
          break;
        result = sub_430F90(v6);
        if ( *v5 != *(_DWORD *)result )
          break;
        *v5 = v6;
      }
      *v5 = v6;
    }
    else
    {
      v3 = sub_430F90(*v5);
      result = sub_473CA0(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00479B70) --------------------------------------------------------
int *__thiscall sub_479B70(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_47A080(this);
  return v2;
}

//----- (00479B90) --------------------------------------------------------
int __thiscall sub_479B90(int *this)
{
  int result; // eax@2
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  if ( *(_BYTE *)sub_4746F0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*v5);
    *v5 = result;
  }
  else
  {
    v2 = sub_474590(*v5);
    if ( *(_BYTE *)sub_4746F0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        if ( *(_BYTE *)sub_4746F0(*v4) )
          break;
        if ( *v5 != *(_DWORD *)sub_474590(v6) )
          break;
        *v5 = v6;
      }
      result = *(_BYTE *)sub_4746F0(v6);
      if ( !result )
        *v5 = v6;
    }
    else
    {
      v3 = sub_474590(*v5);
      result = sub_4793D0(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00479C70) --------------------------------------------------------
int __thiscall sub_479C70(int *this)
{
  int result; // eax@2
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  if ( *(_BYTE *)sub_474DD0(*this) )
  {
    result = *(_DWORD *)sub_430F90(*v5);
    *v5 = result;
  }
  else
  {
    v2 = sub_474590(*v5);
    if ( *(_BYTE *)sub_474DD0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        if ( *(_BYTE *)sub_474DD0(*v4) )
          break;
        if ( *v5 != *(_DWORD *)sub_474590(v6) )
          break;
        *v5 = v6;
      }
      result = *(_BYTE *)sub_474DD0(v6);
      if ( !result )
        *v5 = v6;
    }
    else
    {
      v3 = sub_474590(*v5);
      result = sub_4754A0(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00479D50) --------------------------------------------------------
int __thiscall sub_479D50(int *this)
{
  int result; // eax@1
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  result = sub_474DD0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = sub_430F90(*v5);
    if ( *(_BYTE *)sub_474DD0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        result = *(_BYTE *)sub_474DD0(*v4);
        if ( result )
          break;
        result = sub_430F90(v6);
        if ( *v5 != *(_DWORD *)result )
          break;
        *v5 = v6;
      }
      *v5 = v6;
    }
    else
    {
      v3 = sub_430F90(*v5);
      result = sub_4754E0(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (00479E10) --------------------------------------------------------
int __thiscall sub_479E10(int this, int a2, int a3, int a4, const void *a5, char a6)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  memcpy((void *)(this + 12), a5, 0x20u);
  *(_BYTE *)(this + 44) = a6;
  *(_BYTE *)(this + 45) = 0;
  return this;
}

//----- (00479E60) --------------------------------------------------------
int __thiscall sub_479E60(int this, int a2, int a3, int a4, const void *a5, char a6)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  memcpy((void *)(this + 12), a5, 0x24u);
  *(_BYTE *)(this + 48) = a6;
  *(_BYTE *)(this + 49) = 0;
  return this;
}

//----- (00479EB0) --------------------------------------------------------
int __thiscall sub_479EB0(int this, int a2, int a3, int a4, int a5, char a6)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  *(_DWORD *)(this + 12) = *(_DWORD *)a5;
  *(_DWORD *)(this + 16) = *(_DWORD *)(a5 + 4);
  *(_DWORD *)(this + 20) = *(_DWORD *)(a5 + 8);
  *(_BYTE *)(this + 24) = a6;
  *(_BYTE *)(this + 25) = 0;
  return this;
}

//----- (00479F10) --------------------------------------------------------
int __thiscall sub_479F10(int this, int a2, int a3, int a4, const void *a5, char a6)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  memcpy((void *)(this + 12), a5, 0x64u);
  *(_BYTE *)(this + 112) = a6;
  *(_BYTE *)(this + 113) = 0;
  return this;
}

//----- (00479F60) --------------------------------------------------------
int __thiscall sub_479F60(int this, int a2, int a3, int a4, int a5, char a6)
{
  int v7; // ST04_4@1

  v7 = this;
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  sub_479FF0((void *)(this + 12), a5);
  *(_BYTE *)(v7 + 56) = a6;
  *(_BYTE *)(v7 + 57) = 0;
  return v7;
}

//----- (00479FB0) --------------------------------------------------------
int __thiscall sub_479FB0(int this, int a2, int a3, const void *a4)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  memcpy((void *)(this + 8), a4, 0x33u);
  return this;
}

//----- (00479FF0) --------------------------------------------------------
void *__thiscall sub_479FF0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  sub_40F730(this, a2);
  *((_DWORD *)v3 + 7) = *(_DWORD *)(a2 + 28);
  *((_DWORD *)v3 + 8) = *(_DWORD *)(a2 + 32);
  *((_DWORD *)v3 + 9) = *(_DWORD *)(a2 + 36);
  *((_DWORD *)v3 + 10) = *(_DWORD *)(a2 + 40);
  return v3;
}

//----- (0047A030) --------------------------------------------------------
signed int __cdecl sub_47A030()
{
  return 84215045;
}

//----- (0047A060) --------------------------------------------------------
int *__thiscall sub_47A060(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_47A0A0(this);
  return v2;
}

//----- (0047A080) --------------------------------------------------------
int *__thiscall sub_47A080(int *this)
{
  int *v2; // ST00_4@1

  v2 = this;
  sub_47A160(this);
  return v2;
}

//----- (0047A0A0) --------------------------------------------------------
int __thiscall sub_47A0A0(int *this)
{
  int result; // eax@1
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  result = sub_473EC0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = sub_430F90(*v5);
    if ( *(_BYTE *)sub_473EC0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        result = *(_BYTE *)sub_473EC0(*v4);
        if ( result )
          break;
        result = sub_430F90(v6);
        if ( *v5 != *(_DWORD *)result )
          break;
        *v5 = v6;
      }
      *v5 = v6;
    }
    else
    {
      v3 = sub_430F90(*v5);
      result = sub_478ED0(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (0047A160) --------------------------------------------------------
int __thiscall sub_47A160(int *this)
{
  int result; // eax@1
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  result = sub_4746F0(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = sub_430F90(*v5);
    if ( *(_BYTE *)sub_4746F0(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        result = *(_BYTE *)sub_4746F0(*v4);
        if ( result )
          break;
        result = sub_430F90(v6);
        if ( *v5 != *(_DWORD *)result )
          break;
        *v5 = v6;
      }
      *v5 = v6;
    }
    else
    {
      v3 = sub_430F90(*v5);
      result = sub_479410(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (0047A220) --------------------------------------------------------
int __cdecl sub_47A220(int a1, int a2)
{
  *(_DWORD *)a2 = *(_DWORD *)a1;
  *(_DWORD *)(a2 + 4) = *(_DWORD *)(a1 + 4);
  return a1 + 8;
}

//----- (0047A240) --------------------------------------------------------
int __cdecl sub_47A240(int a1, int a2)
{
  *(_DWORD *)a2 = *(_DWORD *)a1;
  return a1 + 4;
}
// 47A240: using guessed type _DWORD __cdecl sub_47A240(_DWORD, _DWORD);

//----- (0047A260) --------------------------------------------------------
#error "FFFFFFFF: variables would overlap: ST14_1/1 and ST14_48/48 (funcsize=16)"

//----- (0047A280) --------------------------------------------------------
int __cdecl sub_47A280(char a1, char a2, int a3)
{
  char v4; // dl@1
  char v5; // [sp+1h] [bp-1h]@1

  v4 = *(_BYTE *)unknown_libname_11(&v5);
  return sub_4189C0(a1, a2, a3);
}
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A2B0) --------------------------------------------------------
int __cdecl sub_47A2B0(char a1, char a2, int a3)
{
  char v4; // dl@1
  char v5; // [sp+1h] [bp-1h]@1

  v4 = *(_BYTE *)unknown_libname_11(&v5);
  return sub_47A520(a1, a2, a3);
}
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A2E0) --------------------------------------------------------
int __cdecl sub_47A2E0(char a1, char a2, int a3)
{
  char v4; // dl@1
  char v5; // [sp+1h] [bp-1h]@1

  v4 = *(_BYTE *)unknown_libname_11(&v5);
  return sub_47A560(a1, a2, a3);
}
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A310) --------------------------------------------------------
int __cdecl sub_47A310(char a1, char a2, int a3)
{
  char v4; // dl@1
  char v5; // [sp+1h] [bp-1h]@1

  v4 = *(_BYTE *)unknown_libname_11(&v5);
  return sub_47A5A0(a1, a2, a3);
}
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A340) --------------------------------------------------------
int __cdecl sub_47A340(char a1, char a2, int a3)
{
  char v4; // dl@1
  char v5; // [sp+1h] [bp-1h]@1

  v4 = *(_BYTE *)unknown_libname_11(&v5);
  return sub_47A5E0(a1, a2, a3);
}
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A370) --------------------------------------------------------
int __cdecl sub_47A370(char a1, char a2, int a3)
{
  char v4; // dl@1
  char v5; // [sp+1h] [bp-1h]@1

  v4 = *(_BYTE *)unknown_libname_11(&v5);
  return sub_47A620(a1, a2, a3);
}
// 447560: using guessed type _DWORD __cdecl unknown_libname_11(_DWORD);

//----- (0047A3A0) --------------------------------------------------------
int __cdecl sub_47A3A0(void *a1)
{
  return sub_47A4D0(a1, 0);
}

//----- (0047A3B0) --------------------------------------------------------
int __cdecl sub_47A3B0(int a1, int a2)
{
  char v3; // al@1

  v3 = unknown_libname_6(&a1, &a2);
  return sub_47A660(a1, a2);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047A3F0) --------------------------------------------------------
int __cdecl sub_47A3F0(int a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a3);
  return sub_431F30(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047A430) --------------------------------------------------------
void *__cdecl sub_47A430(int a1)
{
  return sub_401000(8 * a1);
}

//----- (0047A450) --------------------------------------------------------
void *__cdecl sub_47A450(int a1)
{
  return sub_401000(52 * a1);
}

//----- (0047A470) --------------------------------------------------------
void *__cdecl sub_47A470(int a1)
{
  return sub_401000(28 * a1);
}

//----- (0047A490) --------------------------------------------------------
void *__cdecl sub_47A490(int a1)
{
  return sub_401000(116 * a1);
}

//----- (0047A4B0) --------------------------------------------------------
void *__cdecl sub_47A4B0(int a1)
{
  return sub_401000(60 * a1);
}

//----- (0047A4D0) --------------------------------------------------------
int __thiscall sub_47A4D0(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_47A500();
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}
// 47A500: using guessed type int sub_47A500(void);

//----- (0047A520) --------------------------------------------------------
int __cdecl sub_47A520(char a1, char a2, int a3)
{
  int result; // eax@1

  while ( 1 )
  {
    result = sub_47D070(&a2);
    if ( !(_BYTE)result )
      break;
    ++*(_DWORD *)a3;
    sub_4758C0((int *)&a1);
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047A560) --------------------------------------------------------
int __cdecl sub_47A560(char a1, char a2, int a3)
{
  int result; // eax@1

  while ( 1 )
  {
    result = sub_47D070(&a2);
    if ( !(_BYTE)result )
      break;
    ++*(_DWORD *)a3;
    sub_4798D0((int *)&a1);
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047A5A0) --------------------------------------------------------
int __cdecl sub_47A5A0(char a1, char a2, int a3)
{
  int result; // eax@1

  while ( 1 )
  {
    result = sub_47D070(&a2);
    if ( !(_BYTE)result )
      break;
    ++*(_DWORD *)a3;
    sub_475880((int *)&a1);
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047A5E0) --------------------------------------------------------
int __cdecl sub_47A5E0(char a1, char a2, int a3)
{
  int result; // eax@1

  while ( 1 )
  {
    result = sub_47D070(&a2);
    if ( !(_BYTE)result )
      break;
    ++*(_DWORD *)a3;
    sub_479B70((int *)&a1);
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047A620) --------------------------------------------------------
int __cdecl sub_47A620(char a1, char a2, int a3)
{
  int result; // eax@1

  while ( 1 )
  {
    result = sub_47D070(&a2);
    if ( !(_BYTE)result )
      break;
    ++*(_DWORD *)a3;
    sub_475980((int *)&a1);
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047A660) --------------------------------------------------------
int __cdecl sub_47A660(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 8;
    a1 += 8;
  }
  return result;
}

//----- (0047A690) --------------------------------------------------------
void *__cdecl sub_47A690(int a1, int a2, void *a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a3);
  return sub_447660(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047A6D0) --------------------------------------------------------
void *__stdcall sub_47A6D0(void *a1, int a2)
{
  return sub_447720(a1, a2);
}

//----- (0047A6F0) --------------------------------------------------------
void *__thiscall sub_47A6F0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047A720) --------------------------------------------------------
void *__thiscall sub_47A720(void *this, int a2, int a3)
{
  void *v4; // ST08_4@1
  char v5; // ST04_1@1

  v4 = this;
  v5 = (char)this;
  std___Init_locks__operator_(a3);
  sub_432060(v4, a2, v5);
  sub_47EC10((int)v4);
  return v4;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0047A760) --------------------------------------------------------
void *__thiscall sub_47A760(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v4 = 0;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047A790) --------------------------------------------------------
int __thiscall sub_47A790(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_47A870(v3, (char)v2);
  *((_DWORD *)v3 + 1) = sub_47A7D0();
  *((_DWORD *)v3 + 2) = 0;
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047A7D0) --------------------------------------------------------
int __cdecl sub_47A7D0()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // [sp+4h] [bp-8h]@1
  int v5; // [sp+8h] [bp-4h]@1

  v1 = (int)sub_478640(1);
  v4 = v1;
  v5 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v4);
  ++v5;
  v3 = sub_446FF0(v4);
  sub_42F9B0((void *)v3, (void **)&v4);
  return v4;
}

//----- (0047A870) --------------------------------------------------------
void *__thiscall sub_47A870(void *this, char a2)
{
  void *v3; // ST08_4@1
  char v4; // ST04_1@1

  v3 = this;
  v4 = (char)this;
  std___Init_locks__operator_(&a2);
  sub_44CE80(v3, v4);
  std___Init_locks__operator_(&a2);
  return v3;
}
// 447550: using guessed type _DWORD __stdcall std___Init_locks__operator_(_DWORD);

//----- (0047A8B0) --------------------------------------------------------
int __thiscall sub_47A8B0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4BBF54;
  return v2;
}
// 4BBF54: using guessed type int (__stdcall *off_4BBF54)(int);

//----- (0047A8D0) --------------------------------------------------------
int __thiscall sub_47A8D0(int this)
{
  return sub_47A8F0(this);
}

//----- (0047A8F0) --------------------------------------------------------
int __thiscall sub_47A8F0(int this)
{
  return sub_47A910(this);
}

//----- (0047A910) --------------------------------------------------------
int __thiscall sub_47A910(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4729B0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0047A9C0) --------------------------------------------------------
int __thiscall sub_47A9C0(int this)
{
  return sub_47A9E0(this);
}

//----- (0047A9E0) --------------------------------------------------------
int __thiscall sub_47A9E0(int this)
{
  return sub_47AA00(this);
}

//----- (0047AA00) --------------------------------------------------------
int __thiscall sub_47AA00(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_472A80(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0047AAB0) --------------------------------------------------------
bool __thiscall sub_47AAB0(int this, int a2)
{
  return *(_DWORD *)(a2 + 460) == *(_DWORD *)(this + 4);
}

//----- (0047AAE0) --------------------------------------------------------
char __thiscall sub_47AAE0(int this, int a2)
{
  return *(_DWORD *)(a2 + 60) >= *(_DWORD *)(this + 4);
}

//----- (0047AB00) --------------------------------------------------------
bool __thiscall sub_47AB00(int this, int a2)
{
  return *(_DWORD *)(a2 + 460) == *(_DWORD *)(this + 4) >> 16 && *(_DWORD *)(this + 4) & 0xFFFF & *(_DWORD *)(a2 + 464);
}

//----- (0047AB60) --------------------------------------------------------
char __thiscall sub_47AB60(int this, int a2)
{
  return *(_DWORD *)(a2 + 468) >= *(_DWORD *)(this + 4);
}

//----- (0047AB90) --------------------------------------------------------
signed int __userpurge sub_47AB90<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@2
  int v6; // eax@3
  int v8; // [sp+0h] [bp-20h]@1
  char v9; // [sp+4h] [bp-1Ch]@2
  char v10; // [sp+8h] [bp-18h]@5
  int v11; // [sp+Ch] [bp-14h]@3
  int v12; // [sp+10h] [bp-10h]@3
  int v13; // [sp+14h] [bp-Ch]@3
  int v14; // [sp+18h] [bp-8h]@3
  char v15; // [sp+1Ch] [bp-4h]@1

  v8 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1020), a2, a3, a4);
  sub_430C20(v8 + 8, &v15);
  while ( 1 )
  {
    v5 = sub_445B40(v8 + 8, &v9);
    if ( !(unsigned __int8)sub_47D070(v5) )
      break;
    v6 = sub_420010();
    v11 = *(_DWORD *)v6;
    v12 = *(_DWORD *)(v6 + 4);
    v13 = *(_DWORD *)(v6 + 8);
    v14 = *(_DWORD *)(v6 + 12);
    if ( !CPlayer::_FindItem((void *)a5, v11, v13) )
    {
      CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
      return 0;
    }
    sub_430E00(&v15, (int)&v10, 0);
  }
  CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
  return 1;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047AC50) --------------------------------------------------------
bool __userpurge sub_47AC50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  return CPlayer::GetPartySize(a5, a2, a3, a4) >= *(_DWORD *)(a1 + 4);
}

//----- (0047AC80) --------------------------------------------------------
bool __userpurge sub_47AC80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  return CPlayer::CheckQuestFlag(a5, a2, a3, a4, *(_DWORD *)(a1 + 4));
}

//----- (0047ACA0) --------------------------------------------------------
int __userpurge sub_47ACA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  return CPlayer::CheckQuestClear(a5, a2, a3, a4, *(_DWORD *)(a1 + 4));
}

//----- (0047ACC0) --------------------------------------------------------
bool __userpurge sub_47ACC0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  return CPlayer::CheckQuestClear(a5, a2, a3, a4, *(_DWORD *)(a1 + 4)) == 0;
}

//----- (0047ACF0) --------------------------------------------------------
int __thiscall sub_47ACF0(int this, int a2)
{
  int v3; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) & 0xFFFF )
    v3 = CChar::IsGState(a2, 1 << (*(_DWORD *)(this + 4) >> 16));
  else
    v3 = CChar::IsGState(a2, 1 << (*(_DWORD *)(this + 4) >> 16)) == 0;
  return v3;
}

//----- (0047AD50) --------------------------------------------------------
void __userpurge sub_47AD50(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  CPlayer::Write(a1, a2, a3, a4, 74, (unsigned int)"d");
}

//----- (0047AD80) --------------------------------------------------------
void __thiscall sub_47AD80(int this, int a2)
{
  sub_47CEC0(*(void **)(this + 4), a2);
}

//----- (0047ADA0) --------------------------------------------------------
void __userpurge sub_47ADA0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  *(_DWORD *)(a5 + 464) |= *(_DWORD *)(a1 + 4);
  CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bb");
  CDBSocket::Write(a2, a3, a4, 15, (unsigned int)"db");
  sub_4800E0((void *)(a5 + 624), a2, a3, a4);
}

//----- (0047AE20) --------------------------------------------------------
int __thiscall sub_47AE20(int this, int a2)
{
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(
           a2,
           25,
           1,
           *(_DWORD *)(this + 4),
           (unsigned __int64)*(_DWORD *)(this + 4) >> 32);
}

//----- (0047AE50) --------------------------------------------------------
char __userpurge sub_47AE50<al>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // eax@2
  void *v6; // eax@2
  int v7; // eax@3
  int v8; // edx@5
  int v10; // [sp+0h] [bp-24h]@1
  char v11; // [sp+4h] [bp-20h]@2
  char v12; // [sp+8h] [bp-1Ch]@14
  int v13; // [sp+Ch] [bp-18h]@4
  int v14; // [sp+10h] [bp-14h]@3
  int v15; // [sp+14h] [bp-10h]@3
  int v16; // [sp+18h] [bp-Ch]@3
  int v17; // [sp+1Ch] [bp-8h]@3
  char v18; // [sp+20h] [bp-4h]@1

  v10 = a1;
  sub_430C20(a1 + 8, &v18);
  while ( 1 )
  {
    v6 = sub_445B40(v10 + 8, &v11);
    v5 = (unsigned __int8)sub_47D070(v6);
    if ( !(_BYTE)v5 )
      break;
    v7 = sub_420010();
    v14 = *(_DWORD *)v7;
    v15 = *(_DWORD *)(v7 + 4);
    v16 = *(_DWORD *)(v7 + 8);
    v17 = *(_DWORD *)(v7 + 12);
    if ( v17 )
    {
      v13 = CItem::CreateItem(v14, v15, v16, -1);
      if ( v13 )
      {
        CIOObject::AddRef(v13, a2, a3, a4);
        if ( CPlayer::InsertItem(a5, v8, a2, a3, a4, 16, v13) == 1 )
        {
          if ( (*(int (__thiscall **)(int))(*(_DWORD *)v13 + 196))(v13) )
            ++*(_DWORD *)(a5 + 1104);
        }
        else
        {
          CBase::Delete((void *)v13);
        }
        CIOObject::Release(v13, a2, a3, a4);
      }
    }
    else
    {
      if ( !CPlayer::RemoveItem(a5, a2, a3, a4, 16, v14, v16) )
        sub_4328C0(
          "CActionItem::Action() Can't remove Quest Item. (pid:%d, index:%d, num:%d)",
          *(_DWORD *)(a5 + 452),
          v14,
          v16);
    }
    sub_430E00(&v18, (int)&v12, 0);
  }
  return v5;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047AF80) --------------------------------------------------------
int __userpurge sub_47AF80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@1
  int v6; // [sp+4h] [bp-4h]@1

  result = CItem::CreateQuestItem(a2, a3, a4, *(_DWORD *)(a1 + 4));
  v6 = result;
  if ( result )
  {
    CIOObject::AddRef(result, a2, a3, a4);
    if ( CPlayer::InsertItem(a5, v6, a2, a3, a4, 16, v6) == 1 )
    {
      if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 196))(v6) )
        ++*(_DWORD *)(a5 + 1104);
    }
    else
    {
      CBase::Delete((void *)v6);
    }
    result = CIOObject::Release(v6, a2, a3, a4);
  }
  return result;
}

//----- (0047B000) --------------------------------------------------------
void __userpurge sub_47B000(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 30, 1, *(_DWORD *)(a1 + 4));
  CDBSocket::Write(a2, a3, a4, 16, (unsigned int)"dbw");
}

//----- (0047B050) --------------------------------------------------------
void __userpurge sub_47B050(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 24, 1, *(_DWORD *)(a1 + 4));
  CDBSocket::Write(a2, a3, a4, 16, (unsigned int)"dbw");
}

//----- (0047B0A0) --------------------------------------------------------
void __userpurge sub_47B0A0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  CPlayer::SaveQuestFlag(a5, a2, a3, a4, *(_DWORD *)(a1 + 4), 0);
}

//----- (0047B0C0) --------------------------------------------------------
void __userpurge sub_47B0C0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  CPlayer::SaveQuestFlag(a5, a2, a3, a4, *(_DWORD *)(a1 + 4), 1);
}

//----- (0047B0E0) --------------------------------------------------------
int __userpurge sub_47B0E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@8
  signed int v6; // [sp+14h] [bp-8h]@3
  signed int v7; // [sp+18h] [bp-4h]@1

  v7 = 1 << (*(_DWORD *)(a1 + 4) >> 16);
  if ( *(_DWORD *)(a1 + 4) & 0xFFFF )
  {
    if ( v7 == 32 )
    {
      v6 = 600000;
      if ( CChar::IsBState(a5, 8i64) )
      {
        v6 = 300000;
      }
      else
      {
        if ( CChar::IsBState(a5, 1i64) )
          v6 = 300000;
      }
      *(_DWORD *)(a5 + 1468) = v6 + GetTickCount();
      CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    }
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 100))(a5, v7);
  }
  else
  {
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 112))(a5, v7);
  }
  return result;
}

//----- (0047B1B0) --------------------------------------------------------
void __userpurge sub_47B1B0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  CPlayer::QuestGuide(a5, a2, a3, a4, *(_DWORD *)(a1 + 4));
}

//----- (0047B1D0) --------------------------------------------------------
void __stdcall sub_47B1D0(int a1)
{
  sub_4802D0((void *)(a1 + 624));
}

//----- (0047B1F0) --------------------------------------------------------
void __userpurge sub_47B1F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+4h] [bp-8h]@1
  int v6; // [sp+8h] [bp-4h]@1

  v5 = *(_DWORD *)(a1 + 12) + 32;
  v6 = *(_DWORD *)(a1 + 16) + 32;
  CPlayer::Teleport(a5, a2, a3, a4, *(_DWORD *)(a1 + 8), (int)&v5, 0, 0);
}

//----- (0047B230) --------------------------------------------------------
int __thiscall sub_47B230(int this)
{
  void *v1; // eax@2
  void *v2; // eax@7
  int v4; // [sp+8h] [bp-2Ch]@1
  int v5; // [sp+10h] [bp-24h]@8
  char v6; // [sp+14h] [bp-20h]@7
  char v7; // [sp+18h] [bp-1Ch]@10
  int v8; // [sp+1Ch] [bp-18h]@3
  int v9; // [sp+20h] [bp-14h]@3
  char v10; // [sp+24h] [bp-10h]@2
  char v11; // [sp+28h] [bp-Ch]@5
  char v12; // [sp+2Ch] [bp-8h]@6
  char v13; // [sp+30h] [bp-4h]@1

  v4 = this;
  sub_40EFA0(this, &v13);
  while ( 1 )
  {
    v1 = sub_430C20(v4, &v10);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    v8 = *(_DWORD *)sub_40F040((int *)&v13);
    v9 = v8;
    if ( v8 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v9)(v9, 1);
    sub_47D0A0((int *)&v13, (int)&v11, 0);
  }
  sub_40EFA0(v4 + 12, &v12);
  while ( 1 )
  {
    v2 = sub_430C20(v4 + 12, &v6);
    if ( !(unsigned __int8)sub_47D070(v2) )
      break;
    v5 = *(_DWORD *)sub_40F040((int *)&v12);
    if ( v5 )
      (**(void (__thiscall ***)(_DWORD, _DWORD))v5)(v5, 1);
    sub_47D0A0((int *)&v12, (int)&v7, 0);
  }
  sub_472990(v4 + 12);
  return sub_472990(v4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047B330) --------------------------------------------------------
signed int __thiscall sub_47B330(void *this, char a2)
{
  signed int result; // eax@3
  void *v3; // eax@4
  void *v4; // eax@8
  int v5; // eax@8
  void *v6; // eax@12
  int v7; // eax@12
  void *v8; // eax@15
  void *v9; // eax@15
  void *v10; // eax@20
  int v11; // eax@20
  void *v12; // eax@29
  void *v13; // eax@29
  void *v14; // eax@31
  int v15; // eax@31
  void *v16; // eax@34
  void *v17; // eax@34
  void *v18; // eax@39
  int v19; // eax@39
  void *v20; // eax@43
  int v21; // eax@43
  void *v22; // eax@46
  void *v23; // eax@46
  void *v24; // [sp+0h] [bp-D4h]@47
  void *v25; // [sp+4h] [bp-D0h]@43
  void *v26; // [sp+8h] [bp-CCh]@39
  void *v27; // [sp+Ch] [bp-C8h]@35
  void *v28; // [sp+10h] [bp-C4h]@31
  int v29; // [sp+14h] [bp-C0h]@24
  void *v30; // [sp+18h] [bp-BCh]@20
  void *v31; // [sp+1Ch] [bp-B8h]@16
  void *v32; // [sp+20h] [bp-B4h]@12
  void *v33; // [sp+24h] [bp-B0h]@8
  int v34; // [sp+2Ch] [bp-A8h]@1
  void *v35; // [sp+30h] [bp-A4h]@46
  char v36; // [sp+34h] [bp-A0h]@46
  char v37; // [sp+38h] [bp-9Ch]@46
  char v38; // [sp+3Ch] [bp-98h]@43
  void *v39; // [sp+40h] [bp-94h]@42
  char v40; // [sp+44h] [bp-90h]@39
  void *v41; // [sp+48h] [bp-8Ch]@38
  void *v42; // [sp+4Ch] [bp-88h]@34
  char v43; // [sp+50h] [bp-84h]@34
  char v44; // [sp+54h] [bp-80h]@34
  char v45; // [sp+58h] [bp-7Ch]@31
  void *v46; // [sp+5Ch] [bp-78h]@30
  char v47; // [sp+60h] [bp-74h]@29
  char v48; // [sp+64h] [bp-70h]@29
  void *v49; // [sp+68h] [bp-6Ch]@23
  char v50; // [sp+6Ch] [bp-68h]@20
  void *v51; // [sp+70h] [bp-64h]@19
  void *v52; // [sp+74h] [bp-60h]@15
  char v53; // [sp+78h] [bp-5Ch]@15
  char v54; // [sp+7Ch] [bp-58h]@15
  char v55; // [sp+80h] [bp-54h]@12
  void *v56; // [sp+84h] [bp-50h]@11
  char v57; // [sp+88h] [bp-4Ch]@8
  void *v58; // [sp+8Ch] [bp-48h]@7
  char v59; // [sp+90h] [bp-44h]@4
  int v60; // [sp+94h] [bp-40h]@46
  int v61; // [sp+98h] [bp-3Ch]@46
  int v62; // [sp+9Ch] [bp-38h]@34
  int v63; // [sp+A0h] [bp-34h]@34
  int v64; // [sp+A4h] [bp-30h]@29
  int v65; // [sp+ACh] [bp-28h]@29
  char v66; // [sp+B4h] [bp-20h]@29
  int v67; // [sp+B8h] [bp-1Ch]@26
  int v68; // [sp+BCh] [bp-18h]@15
  int v69; // [sp+C0h] [bp-14h]@15
  char v70; // [sp+C4h] [bp-10h]@4
  char v71[4]; // [sp+C8h] [bp-Ch]@4
  void *v72; // [sp+CCh] [bp-8h]@6
  char v73[4]; // [sp+D0h] [bp-4h]@4

  v34 = (int)this;
  while ( 2 )
  {
    if ( (unsigned __int8)sub_402380(&a2) )
    {
      result = 1;
    }
    else
    {
      sub_4023A0(&a2, &v70);
      v3 = sub_4023A0(&v70, &v59);
      *(_DWORD *)v71 = sub_402360(v3);
      *(_DWORD *)v73 = CObjectDB::FindSymbol(v71[0]);
      if ( *(_DWORD *)v73 )
      {
        v72 = 0;
        switch ( *(_DWORD *)v73 )
        {
          case 0x26:
            v58 = sub_401000(8u);
            if ( v58 )
            {
              v4 = sub_4023A0(&v70, &v57);
              v5 = sub_40C8D0(v4);
              v33 = sub_47B8E0(v58, v5);
            }
            else
            {
              v33 = 0;
            }
            v72 = v33;
            goto LABEL_51;
          case 7:
            v56 = sub_401000(8u);
            if ( v56 )
            {
              v6 = sub_4023A0(&v70, &v55);
              v7 = sub_40C8D0(v6);
              v32 = sub_47B9B0(v56, v7);
            }
            else
            {
              v32 = 0;
            }
            v72 = v32;
            goto LABEL_51;
          case 0x2A:
            v8 = sub_4023A0(&v70, &v54);
            v68 = sub_40C8D0(v8);
            v9 = sub_4023A0(&v70, &v53);
            v69 = sub_40C8D0(v9);
            v52 = sub_401000(8u);
            if ( v52 )
              v31 = sub_47B9E0(v52, (1 << v69) | (v68 << 16));
            else
              v31 = 0;
            v72 = v31;
            goto LABEL_51;
          case 0x47:
            v51 = sub_401000(8u);
            if ( v51 )
            {
              v10 = sub_4023A0(&v70, &v50);
              v11 = sub_40C8D0(v10);
              v30 = sub_47BA10(v51, v11);
            }
            else
            {
              v30 = 0;
            }
            v72 = v30;
            goto LABEL_51;
          case 0x32:
            v49 = sub_401000(0x18u);
            if ( v49 )
              v29 = (int)sub_47BA40(v49, 0);
            else
              v29 = 0;
            v72 = (void *)v29;
            v67 = v29;
            while ( !(unsigned __int8)sub_402380(&v70) )
            {
              sub_4023A0(&v70, &v66);
              sub_47B8A0((int)&v64);
              v12 = sub_4023A0(&v66, &v48);
              v64 = sub_40C8D0(v12);
              v13 = sub_4023A0(&v66, &v47);
              v65 = sub_40C8D0(v13);
              sub_47CF90(v67 + 8, (int)&v64);
            }
            goto LABEL_51;
          case 0x45:
            v46 = sub_401000(8u);
            if ( v46 )
            {
              v14 = sub_4023A0(&v70, &v45);
              v15 = sub_40C8D0(v14);
              v28 = sub_47BAC0(v46, v15);
            }
            else
            {
              v28 = 0;
            }
            v72 = v28;
            goto LABEL_51;
          case 0x46:
            v16 = sub_4023A0(&v70, &v44);
            v62 = sub_40C8D0(v16);
            v17 = sub_4023A0(&v70, &v43);
            v63 = sub_40C8D0(v17);
            v42 = sub_401000(8u);
            if ( v42 )
              v27 = sub_47BAF0(v42, v63 | (v62 << 16));
            else
              v27 = 0;
            v72 = v27;
            goto LABEL_51;
          case 0x4A:
            v41 = sub_401000(8u);
            if ( v41 )
            {
              v18 = sub_4023A0(&v70, &v40);
              v19 = sub_40C8D0(v18);
              v26 = sub_47BB20(v41, v19);
            }
            else
            {
              v26 = 0;
            }
            v72 = v26;
            goto LABEL_51;
          case 0x4B:
            v39 = sub_401000(8u);
            if ( v39 )
            {
              v20 = sub_4023A0(&v70, &v38);
              v21 = sub_40C8D0(v20);
              v25 = sub_47BB50(v39, v21);
            }
            else
            {
              v25 = 0;
            }
            v72 = v25;
            goto LABEL_51;
          case 0x55:
            v22 = sub_4023A0(&v70, &v37);
            v60 = sub_40C8D0(v22);
            v23 = sub_4023A0(&v70, &v36);
            v61 = sub_40C8D0(v23);
            v35 = sub_401000(8u);
            if ( v35 )
              v24 = sub_47BB80(v35, v61 | (v60 << 16));
            else
              v24 = 0;
            v72 = v24;
LABEL_51:
            sub_47D000(v34, (int)&v72);
            continue;
          default:
            sub_4328C0("CCase::SetCondition() Invalid Condition. (symbol:%d)", *(_DWORD *)v73);
            result = 0;
            break;
        }
      }
      else
      {
        sub_4328C0("CCase::SetCondition() Invalid symbol(%s)", *(_DWORD *)v71);
        result = 0;
      }
    }
    return result;
  }
}

//----- (0047B8A0) --------------------------------------------------------
int __thiscall sub_47B8A0(int this)
{
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 12) = 1;
  return this;
}

//----- (0047B8E0) --------------------------------------------------------
void *__thiscall sub_47B8E0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC020;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC020: using guessed type int (__stdcall *off_4BC020[3])(int);

//----- (0047B940) --------------------------------------------------------
int __thiscall sub_47B940(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  std__locale__facet___facet(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}
// 47B970: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (0047B990) --------------------------------------------------------
int __thiscall sub_47B990(void *this)
{
  return std__locale__facet___facet(this);
}
// 47B970: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (0047B9B0) --------------------------------------------------------
void *__thiscall sub_47B9B0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC030;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC030: using guessed type int (__stdcall *off_4BC030[18])(int);

//----- (0047B9E0) --------------------------------------------------------
void *__thiscall sub_47B9E0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC038;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC038: using guessed type int (__stdcall *off_4BC038[16])(int);

//----- (0047BA10) --------------------------------------------------------
void *__thiscall sub_47BA10(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC040;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC040: using guessed type int (__stdcall *off_4BC040[14])(int);

//----- (0047BA40) --------------------------------------------------------
void *__thiscall sub_47BA40(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC048;
  sub_47CF60((char *)v3 + 8);
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC048: using guessed type int (__stdcall *off_4BC048[12])(int);

//----- (0047BA70) --------------------------------------------------------
int __thiscall sub_47BA70(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_47BAA0(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0047BAA0) --------------------------------------------------------
int __thiscall sub_47BAA0(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  sub_430B90((int)((char *)this + 8));
  return std__locale__facet___facet(v2);
}
// 47B970: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (0047BAC0) --------------------------------------------------------
void *__thiscall sub_47BAC0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC050;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC050: using guessed type int (__stdcall *off_4BC050[10])(int);

//----- (0047BAF0) --------------------------------------------------------
void *__thiscall sub_47BAF0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC058;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC058: using guessed type int (__stdcall *off_4BC058[8])(int);

//----- (0047BB20) --------------------------------------------------------
void *__thiscall sub_47BB20(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC060;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC060: using guessed type int (__stdcall *off_4BC060[6])(int);

//----- (0047BB50) --------------------------------------------------------
void *__thiscall sub_47BB50(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC068;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC068: using guessed type int (__stdcall *off_4BC068[4])(int);

//----- (0047BB80) --------------------------------------------------------
void *__thiscall sub_47BB80(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC070;
  return v3;
}
// 47B910: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC070: using guessed type int (__stdcall *off_4BC070[2])(int);

//----- (0047BBB0) --------------------------------------------------------
int __thiscall sub_47BBB0(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_47B990(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0047BBE0) --------------------------------------------------------
signed int __userpurge sub_47BBE0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, char a4)
{
  signed int result; // eax@3
  void *v5; // eax@4
  void *v6; // eax@8
  int v7; // eax@8
  void *v8; // eax@11
  int v9; // esi@11
  void *v10; // eax@11
  int v11; // eax@15
  void *v12; // eax@20
  void *v13; // eax@25
  int v14; // eax@25
  void *v15; // eax@34
  void *v16; // eax@37
  void *v17; // eax@37
  void *v18; // eax@37
  void *v19; // eax@38
  void *v20; // eax@38
  void *v21; // eax@41
  int v22; // eax@41
  void *v23; // eax@45
  int v24; // eax@45
  void *v25; // eax@49
  int v26; // eax@49
  void *v27; // eax@52
  void *v28; // eax@52
  void *v29; // eax@56
  void *v30; // eax@56
  void *v31; // eax@60
  void *v32; // eax@60
  void *v33; // eax@65
  int v34; // eax@65
  void *v35; // eax@75
  void *v36; // eax@75
  void *v37; // eax@75
  int v38; // [sp+4h] [bp-14Ch]@73
  void *v39; // [sp+8h] [bp-148h]@69
  void *v40; // [sp+Ch] [bp-144h]@65
  void *v41; // [sp+10h] [bp-140h]@61
  void *v42; // [sp+14h] [bp-13Ch]@57
  void *v43; // [sp+18h] [bp-138h]@53
  void *v44; // [sp+1Ch] [bp-134h]@49
  void *v45; // [sp+20h] [bp-130h]@45
  void *v46; // [sp+24h] [bp-12Ch]@41
  int v47; // [sp+2Ch] [bp-124h]@29
  void *v48; // [sp+30h] [bp-120h]@25
  void *v49; // [sp+34h] [bp-11Ch]@21
  void *v50; // [sp+38h] [bp-118h]@17
  int v51; // [sp+3Ch] [bp-114h]@13
  void *v52; // [sp+40h] [bp-110h]@8
  int v53; // [sp+48h] [bp-108h]@1
  char v54; // [sp+4Ch] [bp-104h]@75
  char v55; // [sp+50h] [bp-100h]@75
  char v56; // [sp+54h] [bp-FCh]@75
  void *v57; // [sp+58h] [bp-F8h]@72
  void *v58; // [sp+5Ch] [bp-F4h]@68
  char v59; // [sp+60h] [bp-F0h]@65
  void *v60; // [sp+64h] [bp-ECh]@64
  void *v61; // [sp+68h] [bp-E8h]@60
  char v62; // [sp+6Ch] [bp-E4h]@60
  char v63; // [sp+70h] [bp-E0h]@60
  void *v64; // [sp+74h] [bp-DCh]@56
  char v65; // [sp+78h] [bp-D8h]@56
  char v66; // [sp+7Ch] [bp-D4h]@56
  void *v67; // [sp+80h] [bp-D0h]@52
  char v68; // [sp+84h] [bp-CCh]@52
  char v69; // [sp+88h] [bp-C8h]@52
  char v70; // [sp+8Ch] [bp-C4h]@49
  void *v71; // [sp+90h] [bp-C0h]@48
  char v72; // [sp+94h] [bp-BCh]@45
  void *v73; // [sp+98h] [bp-B8h]@44
  char v74; // [sp+9Ch] [bp-B4h]@41
  void *v75; // [sp+A0h] [bp-B0h]@40
  char v76; // [sp+A4h] [bp-ACh]@38
  char v77; // [sp+A8h] [bp-A8h]@38
  char v78; // [sp+ACh] [bp-A4h]@37
  char v79; // [sp+B0h] [bp-A0h]@37
  char v80; // [sp+B4h] [bp-9Ch]@37
  char v81; // [sp+B8h] [bp-98h]@34
  void *v82; // [sp+BCh] [bp-94h]@28
  char v83; // [sp+C0h] [bp-90h]@25
  void *v84; // [sp+C4h] [bp-8Ch]@24
  void *v85; // [sp+C8h] [bp-88h]@20
  char v86; // [sp+CCh] [bp-84h]@20
  void *v87; // [sp+D0h] [bp-80h]@16
  char v88; // [sp+D4h] [bp-7Ch]@15
  int v89; // [sp+DCh] [bp-74h]@15
  char v90; // [sp+E0h] [bp-70h]@15
  int v91; // [sp+E8h] [bp-68h]@12
  char v92; // [sp+ECh] [bp-64h]@11
  char v93; // [sp+F0h] [bp-60h]@11
  char v94; // [sp+F4h] [bp-5Ch]@8
  void *v95; // [sp+F8h] [bp-58h]@7
  char v96; // [sp+FCh] [bp-54h]@4
  int v97; // [sp+100h] [bp-50h]@75
  int v98; // [sp+104h] [bp-4Ch]@60
  int v99; // [sp+108h] [bp-48h]@60
  int v100; // [sp+10Ch] [bp-44h]@56
  int v101; // [sp+110h] [bp-40h]@56
  int v102; // [sp+114h] [bp-3Ch]@52
  int v103; // [sp+118h] [bp-38h]@52
  int v104; // [sp+11Ch] [bp-34h]@34
  int v105; // [sp+120h] [bp-30h]@37
  int v106; // [sp+124h] [bp-2Ch]@37
  int v107; // [sp+128h] [bp-28h]@38
  char v108; // [sp+12Ch] [bp-24h]@34
  int v109; // [sp+130h] [bp-20h]@31
  int v110; // [sp+134h] [bp-1Ch]@20
  int v111; // [sp+138h] [bp-18h]@11
  int v112; // [sp+13Ch] [bp-14h]@11
  char v113; // [sp+140h] [bp-10h]@4
  char v114[4]; // [sp+144h] [bp-Ch]@4
  void *v115; // [sp+148h] [bp-8h]@6
  char v116[4]; // [sp+14Ch] [bp-4h]@4

  v53 = a1;
  while ( 2 )
  {
    if ( (unsigned __int8)sub_402380(&a4) )
    {
      result = 1;
    }
    else
    {
      sub_4023A0(&a4, &v113);
      v5 = sub_4023A0(&v113, &v96);
      *(_DWORD *)v114 = sub_402360(v5);
      *(_DWORD *)v116 = CObjectDB::FindSymbol(v114[0]);
      if ( *(_DWORD *)v116 )
      {
        v115 = 0;
        switch ( *(_DWORD *)v116 )
        {
          case 0x36:
            v95 = sub_401000(8u);
            if ( v95 )
            {
              v6 = sub_4023A0(&v113, &v94);
              v7 = sub_40C8D0(v6);
              v52 = sub_47C470(v95, v7);
            }
            else
            {
              v52 = 0;
            }
            v115 = v52;
            goto LABEL_77;
          case 0x4C:
            v8 = sub_4023A0(&v113, &v93);
            v9 = sub_40C8D0(v8) << 16;
            v10 = sub_4023A0(&v113, &v92);
            v112 = sub_40C8D0(v10) | v9;
            v111 = sub_47CAC0(a2, a3, v112, v112);
            if ( !v111 )
            {
              v91 = (int)sub_401000(0x38u);
              if ( v91 )
                v51 = sub_47C830(v91, v112);
              else
                v51 = 0;
              v111 = v51;
              v89 = v112;
              v11 = sub_420990((int)&v90, (int)&v89, (int)&v111);
              sub_445DF0((int)&unk_4E210C, (int)&v88, v11);
            }
            v87 = sub_401000(8u);
            if ( v87 )
              v50 = sub_47C510(v87, v111);
            else
              v50 = 0;
            v115 = v50;
            goto LABEL_77;
          case 0x2A:
            v12 = sub_4023A0(&v113, &v86);
            v110 = sub_40C8D0(v12);
            v85 = sub_401000(8u);
            if ( v85 )
              v49 = sub_47C570(v85, 1 << v110);
            else
              v49 = 0;
            v115 = v49;
            goto LABEL_77;
          case 0x24:
            v84 = sub_401000(8u);
            if ( v84 )
            {
              v13 = sub_4023A0(&v113, &v83);
              v14 = sub_40C8D0(v13);
              v48 = sub_47C5A0(v84, v14);
            }
            else
            {
              v48 = 0;
            }
            v115 = v48;
            goto LABEL_77;
          case 0x32:
            v82 = sub_401000(0x18u);
            if ( v82 )
              v47 = (int)sub_47C600(v82, 0);
            else
              v47 = 0;
            v115 = (void *)v47;
            v109 = v47;
            while ( !(unsigned __int8)sub_402380(&v113) )
            {
              sub_4023A0(&v113, &v108);
              v15 = sub_4023A0(&v108, &v81);
              *(_DWORD *)v114 = sub_402360(v15);
              *(_DWORD *)v116 = CObjectDB::FindSymbol(v114[0]);
              sub_47B8A0((int)&v104);
              if ( *(_DWORD *)v116 == 77 )
              {
                v16 = sub_4023A0(&v108, &v80);
                v104 = sub_40C8D0(v16);
                v17 = sub_4023A0(&v108, &v79);
                v105 = sub_40C8D0(v17);
                v18 = sub_4023A0(&v108, &v78);
                v106 = sub_40C8D0(v18);
              }
              else
              {
                if ( *(_DWORD *)v116 == 78 )
                {
                  v19 = sub_4023A0(&v108, &v77);
                  v104 = sub_40C8D0(v19);
                  v20 = sub_4023A0(&v108, &v76);
                  v106 = sub_40C8D0(v20);
                  v107 = 0;
                }
                else
                {
                  sub_4328C0("CCase::SetAction() Invalid symbol for ActionItem. (symbol:%d)", *(_DWORD *)v116);
                }
              }
              sub_47CF90(v109 + 8, (int)&v104);
            }
            goto LABEL_77;
          case 0x5C:
            v75 = sub_401000(8u);
            if ( v75 )
            {
              v21 = sub_4023A0(&v113, &v74);
              v22 = sub_40C8D0(v21);
              v46 = sub_47C680(v75, v22);
            }
            else
            {
              v46 = 0;
            }
            v115 = v46;
            goto LABEL_77;
          case 0x47:
            v73 = sub_401000(8u);
            if ( v73 )
            {
              v23 = sub_4023A0(&v113, &v72);
              v24 = sub_40C8D0(v23);
              v45 = sub_47C6B0(v73, v24);
            }
            else
            {
              v45 = 0;
            }
            v115 = v45;
            goto LABEL_77;
          case 0x48:
            v71 = sub_401000(8u);
            if ( v71 )
            {
              v25 = sub_4023A0(&v113, &v70);
              v26 = sub_40C8D0(v25);
              v44 = sub_47C6E0(v71, v26);
            }
            else
            {
              v44 = 0;
            }
            v115 = v44;
            goto LABEL_77;
          case 0x49:
            v27 = sub_4023A0(&v113, &v69);
            v102 = sub_40C8D0(v27);
            v28 = sub_4023A0(&v113, &v68);
            v103 = sub_40C8D0(v28);
            v67 = sub_401000(8u);
            if ( v67 )
              v43 = sub_47C710(v67, v103 | (v102 << 16));
            else
              v43 = 0;
            v115 = v43;
            goto LABEL_77;
          case 0x4A:
            v29 = sub_4023A0(&v113, &v66);
            v100 = sub_40C8D0(v29);
            v30 = sub_4023A0(&v113, &v65);
            v101 = sub_40C8D0(v30);
            v64 = sub_401000(8u);
            if ( v64 )
              v42 = sub_47C740(v64, v101 | (v100 << 16));
            else
              v42 = 0;
            v115 = v42;
            goto LABEL_77;
          case 0x55:
            v31 = sub_4023A0(&v113, &v63);
            v99 = sub_40C8D0(v31);
            v32 = sub_4023A0(&v113, &v62);
            v98 = sub_40C8D0(v32);
            v61 = sub_401000(8u);
            if ( v61 )
              v41 = sub_47C770(v61, v98 | (v99 << 16));
            else
              v41 = 0;
            v115 = v41;
            goto LABEL_77;
          case 0x5D:
            v60 = sub_401000(8u);
            if ( v60 )
            {
              v33 = sub_4023A0(&v113, &v59);
              v34 = sub_40C8D0(v33);
              v40 = sub_47C7A0(v60, v34);
            }
            else
            {
              v40 = 0;
            }
            v115 = v40;
            goto LABEL_77;
          case 0x5E:
            v58 = sub_401000(8u);
            if ( v58 )
              v39 = sub_47C7D0(v58, 0);
            else
              v39 = 0;
            v115 = v39;
            goto LABEL_77;
          case 0x2B:
            v57 = sub_401000(0x14u);
            if ( v57 )
              v38 = (int)sub_47C800(v57, 0);
            else
              v38 = 0;
            v115 = (void *)v38;
            v97 = v38;
            v35 = sub_4023A0(&v113, &v56);
            *(_DWORD *)(v97 + 8) = sub_40C8D0(v35);
            v36 = sub_4023A0(&v113, &v55);
            *(_DWORD *)(v97 + 12) = sub_40C8D0(v36);
            v37 = sub_4023A0(&v113, &v54);
            *(_DWORD *)(v97 + 16) = sub_40C8D0(v37);
LABEL_77:
            sub_47D000(v53 + 12, (int)&v115);
            continue;
          default:
            sub_4328C0("CQuest::SetAction() Invalid Reward. (symbol:%d)", *(_DWORD *)v116);
            result = 0;
            break;
        }
      }
      else
      {
        sub_4328C0("CCase::SetAction() Invalid symbol(%s)", *(_DWORD *)v114);
        result = 0;
      }
    }
    return result;
  }
}

//----- (0047C470) --------------------------------------------------------
void *__thiscall sub_47C470(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC110;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC110: using guessed type int (__stdcall *off_4BC110[3])(int);

//----- (0047C4A0) --------------------------------------------------------
int __thiscall sub_47C4A0(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  std__locale__facet___facet(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}
// 47C4D0: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (0047C4F0) --------------------------------------------------------
int __thiscall sub_47C4F0(void *this)
{
  return std__locale__facet___facet(this);
}
// 47C4D0: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (0047C510) --------------------------------------------------------
void *__thiscall sub_47C510(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC120;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC120: using guessed type int (__stdcall *off_4BC120[26])(int);

//----- (0047C570) --------------------------------------------------------
void *__thiscall sub_47C570(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC128;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC128: using guessed type int (__stdcall *off_4BC128[24])(int);

//----- (0047C5A0) --------------------------------------------------------
void *__thiscall sub_47C5A0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC130;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC130: using guessed type int (__stdcall *off_4BC130[22])(int);

//----- (0047C5D0) --------------------------------------------------------
int __thiscall sub_47C5D0(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_47C4F0(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0047C600) --------------------------------------------------------
void *__thiscall sub_47C600(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC138;
  sub_47CF60((char *)v3 + 8);
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC138: using guessed type int (__stdcall *off_4BC138[20])(int);

//----- (0047C630) --------------------------------------------------------
int __thiscall sub_47C630(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_47C660(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0047C660) --------------------------------------------------------
int __thiscall sub_47C660(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  sub_430B90((int)((char *)this + 8));
  return std__locale__facet___facet(v2);
}
// 47C4D0: using guessed type int __cdecl std__locale__facet___facet(_DWORD);

//----- (0047C680) --------------------------------------------------------
void *__thiscall sub_47C680(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC140;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC140: using guessed type int (__stdcall *off_4BC140[18])(int);

//----- (0047C6B0) --------------------------------------------------------
void *__thiscall sub_47C6B0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC148;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC148: using guessed type int (__stdcall *off_4BC148[16])(int);

//----- (0047C6E0) --------------------------------------------------------
void *__thiscall sub_47C6E0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC150;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC150: using guessed type int (__stdcall *off_4BC150[14])(int);

//----- (0047C710) --------------------------------------------------------
void *__thiscall sub_47C710(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC158;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC158: using guessed type int (__stdcall *off_4BC158[12])(int);

//----- (0047C740) --------------------------------------------------------
void *__thiscall sub_47C740(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC160;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC160: using guessed type int (__stdcall *off_4BC160[10])(int);

//----- (0047C770) --------------------------------------------------------
void *__thiscall sub_47C770(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC168;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC168: using guessed type int (__stdcall *off_4BC168[8])(int);

//----- (0047C7A0) --------------------------------------------------------
void *__thiscall sub_47C7A0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC170;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC170: using guessed type int (__stdcall *off_4BC170[6])(int);

//----- (0047C7D0) --------------------------------------------------------
void *__thiscall sub_47C7D0(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC178;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC178: using guessed type int (__stdcall *off_4BC178[4])(int);

//----- (0047C800) --------------------------------------------------------
void *__thiscall sub_47C800(void *this, int a2)
{
  void *v3; // ST04_4@1

  v3 = this;
  std__locale__facet__facet(a2);
  *(_DWORD *)v3 = off_4BC180;
  return v3;
}
// 47C540: using guessed type _DWORD __stdcall std__locale__facet__facet(_DWORD);
// 4BC180: using guessed type int (__stdcall *off_4BC180[2])(int);

//----- (0047C830) --------------------------------------------------------
int __thiscall sub_47C830(int this, int a2)
{
  int v3; // ST00_4@1

  v3 = this;
  CBase::CBase(this);
  *(_DWORD *)v3 = &off_4BA5A0;
  *(_DWORD *)(v3 + 32) = a2;
  *(_DWORD *)(v3 + 36) = 0;
  *(_DWORD *)(v3 + 40) = 0;
  sub_47D030((void *)(v3 + 44));
  return v3;
}
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0047C880) --------------------------------------------------------
signed int __thiscall sub_47C880(int this, int a2)
{
  signed int result; // eax@2
  void *v3; // eax@4
  int v4; // [sp+0h] [bp-14h]@1
  char v5; // [sp+4h] [bp-10h]@4
  char v6; // [sp+8h] [bp-Ch]@7
  int v7; // [sp+Ch] [bp-8h]@5
  char v8; // [sp+10h] [bp-4h]@3

  v4 = this;
  if ( sub_472780(this) )
  {
    result = 1;
  }
  else
  {
    sub_40EFA0(v4, &v8);
    while ( 1 )
    {
      v3 = sub_430C20(v4, &v5);
      if ( !(unsigned __int8)sub_47D070(v3) )
        break;
      v7 = *(_DWORD *)sub_40F040((int *)&v8);
      if ( !(*(int (__thiscall **)(int, int))(*(_DWORD *)v7 + 4))(v7, a2) )
        return 0;
      sub_47D0A0((int *)&v8, (int)&v6, 0);
    }
    result = 1;
  }
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047C910) --------------------------------------------------------
char __thiscall sub_47C910(void *this, int a2)
{
  int v2; // eax@2
  void *v3; // eax@2
  int v4; // eax@3
  void *v6; // [sp+4h] [bp-10h]@1
  char v7; // [sp+8h] [bp-Ch]@2
  char v8; // [sp+Ch] [bp-8h]@3
  char v9; // [sp+10h] [bp-4h]@1

  v6 = this;
  sub_40EFA0((int)((char *)this + 12), &v9);
  while ( 1 )
  {
    v3 = sub_430C20((int)((char *)v6 + 12), &v7);
    v2 = (unsigned __int8)sub_47D070(v3);
    if ( !(_BYTE)v2 )
      break;
    v4 = sub_40F040((int *)&v9);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)v4 + 4))(*(_DWORD *)v4, a2);
    sub_47D0A0((int *)&v9, (int)&v8, 0);
  }
  return v2;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047C980) --------------------------------------------------------
int __usercall sub_47C980<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@2
  int v6; // [sp+4h] [bp-18h]@1
  int v7; // [sp+Ch] [bp-10h]@3
  char v8; // [sp+10h] [bp-Ch]@2
  char v9; // [sp+14h] [bp-8h]@5
  char v10; // [sp+18h] [bp-4h]@1

  v6 = a1;
  *(_DWORD *)a1 = &off_4BA5A0;
  sub_40EFA0(a1 + 44, &v10);
  while ( 1 )
  {
    v4 = sub_430C20(v6 + 44, &v8);
    if ( !(unsigned __int8)sub_47D070(v4) )
      break;
    v7 = *(_DWORD *)sub_40F040((int *)&v10);
    if ( v7 )
      CActionItem::_CActionItem(v7, 1);
    sub_47D0A0((int *)&v10, (int)&v9, 0);
  }
  sub_472990(v6 + 44);
  return CBase::_CBase(v6, a2, a3, a4);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4BA5A0: using guessed type int (__stdcall *off_4BA5A0)(int);

//----- (0047CA20) --------------------------------------------------------
int __thiscall CActionItem::_CActionItem(int this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_47B230(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0047CA50) --------------------------------------------------------
__int32 __usercall sub_47CA50<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  void *v3; // eax@2
  int v4; // eax@3
  char v6; // [sp+0h] [bp-Ch]@2
  char v7; // [sp+4h] [bp-8h]@3
  char v8; // [sp+8h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E2118);
  sub_40F070((int)&unk_4E210C, &v8);
  while ( 1 )
  {
    v3 = sub_430C20((int)&unk_4E210C, &v6);
    if ( !(unsigned __int8)sub_47D070(v3) )
      break;
    v4 = sub_420250((int *)&v8);
    CBase::Delete(*(void **)(v4 + 4));
    sub_446090((int *)&v8, (int)&v7, 0);
  }
  return sub_47E1C0((volatile LONG *)&unk_4E2118, a1, a2, a3);
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047CAC0) --------------------------------------------------------
int __usercall sub_47CAC0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-10h]@1
  int v7; // [sp+4h] [bp-Ch]@1
  int v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E2118);
  v7 = a4;
  sub_44AE20((int)&unk_4E210C, (int)&v9, (int)&v7);
  v4 = sub_430C20((int)&unk_4E210C, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v8 = *(_DWORD *)(sub_420250((int *)&v9) + 4);
    CIOObject::AddRef(v8, a1, a2, a3);
  }
  sub_47E080((volatile LONG *)&unk_4E2118, a1, a2, a3);
  return v8;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047CB40) --------------------------------------------------------
int __usercall sub_47CB40<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  int result; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  result = sub_47CAC0(a1, a2, a3, a4);
  v6 = result;
  if ( result )
  {
    if ( !*(_DWORD *)(result + 40) )
      sub_47CEC0((void *)result, a5);
    result = CIOObject::Release(v6, a1, a2, a3);
  }
  return result;
}

//----- (0047CB80) --------------------------------------------------------
signed int __userpurge sub_47CB80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5)
{
  void *v6; // eax@5
  int v7; // ecx@6
  void *v8; // eax@14
  void *v9; // eax@14
  void *v10; // eax@14
  int v11; // [sp-4h] [bp-48h]@4
  int v12; // [sp+0h] [bp-44h]@16
  int v13; // [sp+4h] [bp-40h]@12
  void *v14; // [sp+8h] [bp-3Ch]@7
  int v15; // [sp+Ch] [bp-38h]@2
  int v16; // [sp+10h] [bp-34h]@1
  int v17; // [sp+18h] [bp-2Ch]@15
  char v18; // [sp+1Ch] [bp-28h]@14
  int v19; // [sp+20h] [bp-24h]@14
  char v20; // [sp+24h] [bp-20h]@14
  char v21; // [sp+28h] [bp-1Ch]@14
  void *v22; // [sp+34h] [bp-10h]@6
  char v23; // [sp+38h] [bp-Ch]@5
  char v24; // [sp+3Ch] [bp-8h]@14
  int v25; // [sp+40h] [bp-4h]@9

  v16 = a1;
  if ( *(_DWORD *)(a1 + 36) )
  {
    v15 = a4;
    if ( a4 == 64 )
    {
      v22 = sub_401000(0x18u);
      if ( v22 )
        v14 = CQuest::_CQuest(v22);
      else
        v14 = 0;
      v25 = (int)v14;
      v11 = v7;
      sub_402340(&v11, (int)&a5);
      if ( !sub_47CD70(*(_DWORD *)(v16 + 36), a2, a3, v25, v11) )
        return 0;
    }
    else
    {
      if ( v15 != 79 )
      {
        v11 = a4;
        sub_402340(&v11, (int)&a5);
        return CBase::Set((void *)v16, a4, v11);
      }
      v6 = sub_4023A0(&a5, &v23);
      *(_DWORD *)(*(_DWORD *)(v16 + 36) + 40) = sub_40C8D0(v6);
    }
  }
  else
  {
    v13 = a4;
    if ( a4 != 2 )
    {
      v11 = a4;
      sub_402340(&v11, (int)&a5);
      return CBase::Set((void *)v16, a4, v11);
    }
    v8 = sub_4023A0(&a5, &v21);
    *(_DWORD *)(v16 + 32) |= sub_40C8D0(v8) << 16;
    v9 = sub_4023A0(&a5, &v20);
    *(_DWORD *)(v16 + 32) |= sub_40C8D0(v9);
    v19 = *(_DWORD *)(v16 + 32);
    sub_44AE20((int)&unk_4E210C, (int)&v24, (int)&v19);
    v10 = sub_430C20((int)&unk_4E210C, &v18);
    if ( (unsigned __int8)unknown_libname_8(v10) )
    {
      v17 = (int)sub_401000(0x38u);
      if ( v17 )
        v12 = sub_47C830(v17, *(_DWORD *)(v16 + 32));
      else
        v12 = 0;
      *(_DWORD *)(v16 + 36) = v12;
    }
    else
    {
      *(_DWORD *)(v16 + 36) = *(_DWORD *)(sub_420250((int *)&v24) + 4);
    }
  }
  return 1;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0047CD40) --------------------------------------------------------
void *__thiscall CQuest::_CQuest(void *this)
{
  void *v2; // ST00_4@1

  v2 = this;
  sub_47D030(this);
  sub_47D030((char *)v2 + 12);
  return v2;
}

//----- (0047CD70) --------------------------------------------------------
signed int __userpurge sub_47CD70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5)
{
  int v6; // ecx@4
  void *v7; // eax@4
  int v8; // [sp-4h] [bp-24h]@5
  int v9; // [sp+0h] [bp-20h]@6
  int v10; // [sp+4h] [bp-1Ch]@1
  char v11; // [sp+10h] [bp-10h]@4
  char v12[4]; // [sp+14h] [bp-Ch]@4
  char v13; // [sp+18h] [bp-8h]@4
  char v14[4]; // [sp+1Ch] [bp-4h]@4

  v10 = a1;
  do
  {
    while ( 1 )
    {
      if ( (unsigned __int8)sub_402380(&a5) )
      {
        sub_47D000(v10 + 44, (int)&a4);
        return 1;
      }
      sub_4023A0(&a5, &v13);
      v7 = sub_4023A0(&v13, &v11);
      *(_DWORD *)v12 = sub_402360(v7);
      *(_DWORD *)v14 = CObjectDB::FindSymbol(v12[0]);
      if ( !*(_DWORD *)v14 )
      {
        v8 = *(_DWORD *)v12;
        sub_4328C0("CQuest::SetCase() Invalid symbol(%s)", *(_DWORD *)v12);
        return 0;
      }
      v9 = *(_DWORD *)v14;
      if ( *(_DWORD *)v14 != 65 )
        break;
      v8 = v6;
      sub_402340(&v8, (int)&v13);
      if ( !sub_47B330((void *)a4, v8) )
        return 0;
    }
    if ( v9 != 66 )
    {
      v8 = *(_DWORD *)v14;
      sub_4328C0("CQuest::SetCondition() Invalid Case. (symbol:%d)", *(_DWORD *)v14);
      return 0;
    }
    v8 = v6;
    sub_402340(&v8, (int)&v13);
  }
  while ( sub_47BBE0(a4, a2, a3, v8) );
  return 0;
}

//----- (0047CE60) --------------------------------------------------------
signed int __thiscall sub_47CE60(int this)
{
  int v2; // ST08_4@1
  int v3; // eax@1
  int v4; // [sp+4h] [bp-14h]@1
  char v5; // [sp+8h] [bp-10h]@1
  char v6; // [sp+10h] [bp-8h]@1

  v2 = this;
  v4 = *(_DWORD *)(this + 32);
  v3 = sub_420990((int)&v5, (int)&v4, this + 36);
  sub_445DF0((int)&unk_4E210C, (int)&v6, v3);
  *(_DWORD *)(v2 + 32) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  return 1;
}

//----- (0047CEC0) --------------------------------------------------------
void __thiscall sub_47CEC0(void *this, int a2)
{
  void *v2; // eax@2
  void *v3; // [sp+0h] [bp-14h]@1
  char v4; // [sp+4h] [bp-10h]@2
  char v5; // [sp+8h] [bp-Ch]@5
  int v6; // [sp+Ch] [bp-8h]@3
  char v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_40EFA0((int)((char *)this + 44), &v7);
  while ( 1 )
  {
    v2 = sub_430C20((int)((char *)v3 + 44), &v4);
    if ( !(unsigned __int8)sub_47D070(v2) )
      break;
    v6 = *(_DWORD *)sub_40F040((int *)&v7);
    if ( sub_47C880(v6, a2) )
    {
      sub_47C910((void *)v6, a2);
      return;
    }
    sub_47D0A0((int *)&v7, (int)&v5, 0);
  }
  sub_4328C0("CQuest::Proceed() No Meet Condition. (Quest:%x, PID:%d)", *((_DWORD *)v3 + 8), *(_DWORD *)(a2 + 452));
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047CF60) --------------------------------------------------------
int __thiscall sub_47CF60(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_44F7C0(v3, (char)v2);
  sub_47D190((int)v3, 0);
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047CF90) --------------------------------------------------------
char *__thiscall sub_47CF90(int this, int a2)
{
  int v2; // esi@1
  char *result; // eax@2
  void *v4; // eax@3
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@3

  v5 = this;
  v2 = sub_430E60(this);
  if ( v2 >= (unsigned int)sub_47D0D0(v5) )
  {
    v4 = sub_445B40(v5, &v7);
    result = (char *)sub_47D110(v5, (int)&v6, *(_DWORD *)v4, a2);
  }
  else
  {
    result = sub_47D210(*(void **)(v5 + 8), 1, a2);
    *(_DWORD *)(v5 + 8) = result;
  }
  return result;
}

//----- (0047D000) --------------------------------------------------------
int __thiscall sub_47D000(int this, int a2)
{
  int v3; // ST08_4@1
  void *v4; // eax@1
  char v5; // [sp+4h] [bp-4h]@1

  v3 = this;
  v4 = sub_430C20(this, &v5);
  return sub_47D240((void *)v3, *(_DWORD *)v4, a2);
}

//----- (0047D030) --------------------------------------------------------
int __thiscall sub_47D030(void *this)
{
  void *v2; // [sp-4h] [bp-Ch]@1
  void *v3; // [sp+0h] [bp-8h]@1

  v3 = this;
  v2 = this;
  _LocaleUpdate__GetLocaleT(&v2);
  sub_47A870(v3, (char)v2);
  *((_DWORD *)v3 + 1) = sub_47D2C0();
  *((_DWORD *)v3 + 2) = 0;
  return (int)v3;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047D070) --------------------------------------------------------
bool __stdcall sub_47D070(int a1)
{
  return (unsigned __int8)unknown_libname_8(a1) == 0;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047D0A0) --------------------------------------------------------
int __thiscall sub_47D0A0(int *this, int a2, int a3)
{
  int v4; // ST04_4@1

  v4 = *this;
  sub_41CAB0(this);
  *(_DWORD *)a2 = v4;
  return a2;
}

//----- (0047D0D0) --------------------------------------------------------
int __thiscall sub_47D0D0(int this)
{
  int v2; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 4) )
    v2 = (*(_DWORD *)(this + 12) - *(_DWORD *)(this + 4)) >> 4;
  else
    v2 = 0;
  return v2;
}

//----- (0047D110) --------------------------------------------------------
int __thiscall sub_47D110(int this, int a2, int a3, int a4)
{
  int v4; // eax@3
  int v6; // ST08_4@4
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@2
  int v9; // [sp+4h] [bp-10h]@1
  char v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Ch] [bp-8h]@3
  int v12; // [sp+10h] [bp-4h]@4

  v9 = this;
  if ( sub_430E60(this) )
  {
    v4 = (int)sub_430C20(v9, &v11);
    v8 = sub_47D7D0(&a3, v4);
  }
  else
  {
    v8 = 0;
  }
  v12 = v8;
  sub_47D3F0(v9, a3, 1, a4);
  v6 = v12;
  v7 = sub_430C20(v9, &v10);
  sub_431D20(v7, a2, v6);
  return a2;
}

//----- (0047D190) --------------------------------------------------------
char __thiscall sub_47D190(int this, int a2)
{
  char result; // al@2
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  if ( a2 )
  {
    if ( sub_47D3D0() >= (unsigned int)a2 )
    {
      *(_DWORD *)(v3 + 4) = sub_47D6D0(a2);
      *(_DWORD *)(v3 + 8) = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v3 + 12) = *(_DWORD *)(v3 + 4) + 16 * a2;
    }
    else
    {
      sub_446B00();
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0047D210) --------------------------------------------------------
char *__stdcall sub_47D210(void *a1, int a2, int a3)
{
  sub_47D820(a1, a2, a3);
  return (char *)a1 + 16 * a2;
}

//----- (0047D240) --------------------------------------------------------
int __thiscall sub_47D240(void *this, char a2, int a3)
{
  int result; // eax@1
  int v4; // ST0C_4@1
  int v5; // eax@1
  int v6; // ST10_4@1
  int v7; // eax@1
  int v8; // ST14_4@1
  int v9; // eax@1

  v4 = (int)this;
  v5 = unknown_libname_7();
  v6 = v5;
  v7 = sub_446FF0(v5);
  v8 = (int)sub_47D6F0(v6, *(_DWORD *)v7, a3);
  sub_47D760(v4, 1u);
  *(_DWORD *)sub_446FF0(v6) = v8;
  v9 = sub_446FF0(v8);
  result = sub_474590(*(_DWORD *)v9);
  *(_DWORD *)result = v8;
  return result;
}

//----- (0047D2C0) --------------------------------------------------------
int __cdecl sub_47D2C0()
{
  int v1; // eax@1
  int v2; // eax@1
  int v3; // eax@1
  int v4; // [sp+4h] [bp-8h]@1
  int v5; // [sp+8h] [bp-4h]@1

  v1 = (int)sub_446B40(1);
  v4 = v1;
  v5 = 0;
  v2 = sub_474590(v1);
  sub_42F9B0((void *)v2, (void **)&v4);
  ++v5;
  v3 = sub_446FF0(v4);
  sub_42F9B0((void *)v3, (void **)&v4);
  return v4;
}

//----- (0047D360) --------------------------------------------------------
int __thiscall sub_47D360(int this)
{
  int result; // eax@1
  int v2; // ST08_4@1
  int v3; // eax@1
  int v4; // eax@1

  v2 = this;
  sub_478850(this);
  v3 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v3);
  v4 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v4);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  result = v2;
  *(_DWORD *)(v2 + 4) = 0;
  return result;
}

//----- (0047D3D0) --------------------------------------------------------
signed int __cdecl sub_47D3D0()
{
  return sub_431D80();
}

//----- (0047D3F0) --------------------------------------------------------
int __thiscall sub_47D3F0(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  signed int v5; // esi@3
  void *v6; // eax@11
  void *v7; // eax@11
  void *v8; // ST20_4@11
  int v9; // ST18_4@16
  int v10; // [sp+4h] [bp-28h]@7
  int v11; // [sp+8h] [bp-24h]@1
  void *v12; // [sp+10h] [bp-1Ch]@11
  unsigned int v13; // [sp+18h] [bp-14h]@1
  int v14; // [sp+18h] [bp-14h]@9
  int v15; // [sp+1Ch] [bp-10h]@1
  int v16; // [sp+20h] [bp-Ch]@1
  int v17; // [sp+24h] [bp-8h]@1
  int v18; // [sp+28h] [bp-4h]@1
  int v19; // [sp+38h] [bp+Ch]@11

  v11 = this;
  v15 = *(_DWORD *)a4;
  v16 = *(_DWORD *)(a4 + 4);
  v17 = *(_DWORD *)(a4 + 8);
  v18 = *(_DWORD *)(a4 + 12);
  result = sub_47D0D0(this);
  v13 = result;
  if ( a3 )
  {
    v5 = sub_47D3D0();
    if ( v5 - sub_430E60(v11) >= (unsigned int)a3 )
    {
      if ( v13 >= a3 + sub_430E60(v11) )
      {
        if ( (*(_DWORD *)(v11 + 8) - a2) >> 4 >= (unsigned int)a3 )
        {
          v9 = *(_DWORD *)(v11 + 8);
          *(_DWORD *)(v11 + 8) = sub_431E30(v9 - 16 * a3, v9, *(void **)(v11 + 8));
          sub_47D8E0(a2, v9 - 16 * a3, v9);
          result = sub_47D8A0(a2, a2 + 16 * a3, (int)&v15);
        }
        else
        {
          sub_431E30(a2, *(_DWORD *)(v11 + 8), (void *)(a2 + 16 * a3));
          sub_47D210(*(void **)(v11 + 8), a3 - ((*(_DWORD *)(v11 + 8) - a2) >> 4), (int)&v15);
          *(_DWORD *)(v11 + 8) += 16 * a3;
          result = sub_47D8A0(a2, *(_DWORD *)(v11 + 8) - 16 * a3, (int)&v15);
        }
      }
      else
      {
        if ( sub_47D3D0() - (v13 >> 1) >= v13 )
          v10 = v13 + (v13 >> 1);
        else
          v10 = 0;
        v14 = v10;
        if ( v10 < (unsigned int)(a3 + sub_430E60(v11)) )
          v14 = a3 + sub_430E60(v11);
        v6 = sub_47D6D0(v14);
        v12 = v6;
        v7 = sub_431E30(*(_DWORD *)(v11 + 4), a2, v6);
        v8 = sub_47D210(v7, a3, (int)&v15);
        sub_431E30(a2, *(_DWORD *)(v11 + 8), v8);
        v19 = a3 + sub_430E60(v11);
        if ( *(_DWORD *)(v11 + 4) )
        {
          sub_4313B0(*(_DWORD *)(v11 + 4), *(_DWORD *)(v11 + 8));
          sub_4338F0(*(_DWORD *)(v11 + 4), (*(_DWORD *)(v11 + 12) - *(_DWORD *)(v11 + 4)) >> 4);
        }
        *(_DWORD *)(v11 + 12) = (char *)v12 + 16 * v14;
        *(_DWORD *)(v11 + 8) = (char *)v12 + 16 * v19;
        result = v11;
        *(_DWORD *)(v11 + 4) = v12;
      }
    }
    else
    {
      result = sub_446B00();
    }
  }
  return result;
}

//----- (0047D6D0) --------------------------------------------------------
void *__stdcall sub_47D6D0(int a1)
{
  return sub_47D920(a1);
}

//----- (0047D6F0) --------------------------------------------------------
void *__stdcall sub_47D6F0(int a1, int a2, int a3)
{
  int v4; // [sp+8h] [bp-8h]@1
  void *v5; // [sp+Ch] [bp-4h]@1

  v5 = sub_446B40(1);
  v4 = (int)operator new(0xCu, v5);
  if ( v4 )
    sub_44B820(v4, a1, a2, a3);
  return v5;
}

//----- (0047D760) --------------------------------------------------------
int __thiscall sub_47D760(int this, unsigned int a2)
{
  void *v2; // eax@2
  int result; // eax@3
  int v4; // [sp+0h] [bp-44h]@1
  char v5; // [sp+4h] [bp-40h]@2
  char v6; // [sp+20h] [bp-24h]@2

  v4 = this;
  if ( sub_44B800() - *(_DWORD *)(this + 8) < a2 )
  {
    sub_40FD10(&v5, "list<T> too long");
    v2 = sub_40F550(&v6, (int)&v5);
    sub_40F510(v2);
    sub_40F6E0(&v6);
    sub_40F780((int)&v5);
  }
  result = v4;
  *(_DWORD *)(v4 + 8) += a2;
  return result;
}

//----- (0047D7D0) --------------------------------------------------------
int __thiscall sub_47D7D0(void *this, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1

  v3 = *(_DWORD *)this;
  return sub_431DB0(&v3, a2);
}

//----- (0047D800) --------------------------------------------------------
void *__thiscall sub_47D800(void *this, int a2)
{
  *(_DWORD *)this += 16 * a2;
  return this;
}

//----- (0047D820) --------------------------------------------------------
void *__cdecl sub_47D820(void *a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a1);
  return sub_47D940(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047D860) --------------------------------------------------------
int __cdecl sub_47D860(int a1, int a2)
{
  char v3; // al@1

  v3 = unknown_libname_6(&a1, &a2);
  return sub_47D9A0(a1, a2);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047D8A0) --------------------------------------------------------
int __cdecl sub_47D8A0(int a1, int a2, int a3)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    *(_DWORD *)a1 = *(_DWORD *)a3;
    *(_DWORD *)(a1 + 4) = *(_DWORD *)(a3 + 4);
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(a3 + 8);
    *(_DWORD *)(a1 + 12) = *(_DWORD *)(a3 + 12);
    result = a1 + 16;
    a1 += 16;
  }
  return result;
}

//----- (0047D8E0) --------------------------------------------------------
int __cdecl sub_47D8E0(int a1, int a2, int a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a3);
  return sub_431EF0(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047D920) --------------------------------------------------------
void *__cdecl sub_47D920(int a1)
{
  return sub_401000(16 * a1);
}

//----- (0047D940) --------------------------------------------------------
void *__cdecl sub_47D940(void *a1, int a2, int a3)
{
  void *result; // eax@1

  result = a1;
  while ( a2 )
  {
    result = sub_47DA10(a1, a3);
    --a2;
    a1 = (char *)a1 + 16;
  }
  return result;
}

//----- (0047D9A0) --------------------------------------------------------
int __cdecl sub_47D9A0(int a1, int a2)
{
  int result; // eax@2

  while ( a1 != a2 )
  {
    sub_44CD70(a1);
    result = a1 + 16;
    a1 += 16;
  }
  return result;
}

//----- (0047D9D0) --------------------------------------------------------
void *__cdecl sub_47D9D0(int a1, int a2, void *a3)
{
  char v4; // al@1

  v4 = unknown_libname_6(&a1, &a3);
  return sub_47DA30(a1, a2, a3);
}
// 4254D0: using guessed type int __cdecl unknown_libname_6(_DWORD, _DWORD);

//----- (0047DA10) --------------------------------------------------------
void *__stdcall sub_47DA10(void *a1, int a2)
{
  return sub_431FE0(a1, a2);
}

//----- (0047DA30) --------------------------------------------------------
void *__cdecl sub_47DA30(int a1, int a2, void *a3)
{
  while ( a1 != a2 )
  {
    sub_47DA10(a3, a1);
    a3 = (char *)a3 + 16;
    a1 += 16;
  }
  return a3;
}

//----- (0047DAA0) --------------------------------------------------------
void *__thiscall sub_47DAA0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047DAD0) --------------------------------------------------------
int __thiscall sub_47DAD0(int this)
{
  return sub_47DAF0(this);
}

//----- (0047DAF0) --------------------------------------------------------
int __thiscall sub_47DAF0(int this)
{
  return sub_47DB10(this);
}

//----- (0047DB10) --------------------------------------------------------
int __thiscall sub_47DB10(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_47DBC0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0047DBC0) --------------------------------------------------------
void *__thiscall sub_47DBC0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_47DC60(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047DC60) --------------------------------------------------------
int __thiscall sub_47DC60(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_47DCC0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 47DCC0: using guessed type _DWORD __stdcall sub_47DCC0(_DWORD);

//----- (0047DCC0) --------------------------------------------------------
int __stdcall sub_47DCC0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_47DCC0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 47DCC0: using guessed type _DWORD __stdcall sub_47DCC0(_DWORD);

//----- (0047DD40) --------------------------------------------------------
int __thiscall sub_47DD40(int this)
{
  int v2; // ST10_4@1

  v2 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = CreateEventA(0, 0, 0, 0);
  *(_DWORD *)(v2 + 12) = CreateEventA(0, 0, 0, 0);
  *(_DWORD *)(v2 + 20) = 0;
  *(_DWORD *)(v2 + 16) = 0;
  return v2;
}

//----- (0047DDA0) --------------------------------------------------------
BOOL __usercall sub_47DDA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( *(_DWORD *)a1 )
    sub_422D80(a1, a2, a3, a4);
  CloseHandle(*(HANDLE *)(v5 + 8));
  return CloseHandle(*(HANDLE *)(v5 + 12));
}

//----- (0047DDE0) --------------------------------------------------------
LONG __thiscall sub_47DDE0(void *this)
{
  char v1; // sf@2
  LONG result; // eax@3
  char v3; // sf@7
  void *v4; // [sp+0h] [bp-8h]@1
  signed int v5; // [sp+4h] [bp-4h]@1
  signed int v6; // [sp+4h] [bp-4h]@6

  v4 = this;
  v5 = 4000;
  while ( 1 )
  {
    v1 = v5-- - 1 < 0;
    if ( v1 )
      break;
    result = InterlockedCompareExchange((volatile LONG *)v4 + 1, 1, 0);
    if ( !result )
      return result;
    __asm { pause }
  }
  v6 = 4000;
  while ( 1 )
  {
    v3 = v6-- - 1 < 0;
    if ( v3 )
      break;
    SwitchToThread();
    result = InterlockedCompareExchange((volatile LONG *)v4 + 1, 1, 0);
    if ( !result )
      return result;
  }
  do
  {
    Sleep(0x3E8u);
    result = InterlockedCompareExchange((volatile LONG *)v4 + 1, 1, 0);
  }
  while ( result );
  return result;
}

//----- (0047DE70) --------------------------------------------------------
__int32 __thiscall sub_47DE70(volatile LONG *this)
{
  __int32 result; // eax@1
  __int32 v2; // ecx@13
  int v3; // ST18_4@17
  int v4; // ST10_4@17
  int v5; // [sp+0h] [bp-10h]@1
  __int32 v6; // [sp+Ch] [bp-4h]@1
  __int32 v7; // [sp+14h] [bp+4h]@17

  v5 = (int)this;
  result = InterlockedIncrement(this);
  LOBYTE(v6) = result;
  if ( result & 0xFF00 )
  {
    sub_47E030(v5);
    v6 = *(_DWORD *)v5;
    do
    {
      if ( v6 < 0 )
      {
        if ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)v5, 65535) == 1 )
        {
          sub_47E060(v5);
          SetEvent(*(HANDLE *)(v5 + 12));
        }
        else
        {
          sub_47E060(v5);
        }
        WaitForSingleObject(*(HANDLE *)(v5 + 8), 0xFFFFFFFFu);
        sub_47E030(v5);
        v6 = InterlockedExchangeAdd((volatile LONG *)v5, -65535) - 65535;
      }
      else
      {
        if ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)v5, 2147483647) == 1 )
        {
          sub_47E060(v5);
          SetEvent(*(HANDLE *)(v5 + 12));
        }
        else
        {
          sub_47E060(v5);
        }
        WaitForSingleObject(*(HANDLE *)(v5 + 12), 0xFFFFFFFFu);
        sub_47E030(v5);
        v6 = InterlockedExchangeAdd((volatile LONG *)v5, -2147483647) - 2147483647;
      }
    }
    while ( v6 & 0xFF00 );
    v2 = v6;
    if ( v2 & 0xFF0000 )
    {
      sub_47E060(v5);
      result = SetEvent(*(HANDLE *)(v5 + 8));
    }
    else
    {
      result = sub_47E060(v5);
    }
  }
  if ( (char)v6 == 1 )
  {
    v4 = *(_DWORD *)(v3 + 4);
    result = v7;
    *(_DWORD *)(v5 + 16) = v7;
    *(_DWORD *)(v5 + 20) = v4;
  }
  return result;
}

//----- (0047E030) --------------------------------------------------------
LONG __thiscall sub_47E030(int this)
{
  LONG result; // eax@1
  int v2; // [sp+0h] [bp-4h]@1

  v2 = this;
  result = InterlockedCompareExchange((volatile LONG *)(this + 4), 1, 0);
  if ( result )
    result = sub_47DDE0((void *)v2);
  return result;
}

//----- (0047E060) --------------------------------------------------------
LONG __thiscall sub_47E060(int this)
{
  return InterlockedExchange((volatile LONG *)(this + 4), 0);
}

//----- (0047E080) --------------------------------------------------------
int __usercall sub_47E080<eax>(volatile LONG *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  volatile LONG *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@1

  v5 = a1;
  result = InterlockedDecrement(a1);
  v6 = result;
  if ( result & 0x8080 )
    result = sub_422D80(result, a2, a3, a4);
  if ( !(_WORD)v6 )
  {
    result = v6 & 0xFF000000;
    if ( v6 & 0xFF000000 )
      result = SetEvent((HANDLE)v5[3]);
  }
  return result;
}

//----- (0047E0D0) --------------------------------------------------------
int __thiscall sub_47E0D0(volatile LONG *this)
{
  int result; // eax@8
  int v2; // ST18_4@8
  int v3; // ST10_4@8
  int v4; // [sp+0h] [bp-10h]@1
  void *v5; // [sp+14h] [bp+4h]@8

  v4 = (int)this;
  if ( (unsigned __int16)InterlockedExchangeAdd(this, 256) )
  {
    sub_47E030(v4);
    do
    {
      if ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)v4, 16776960) == 256 )
      {
        sub_47E060(v4);
        SetEvent(*(HANDLE *)(v4 + 12));
      }
      else
      {
        sub_47E060(v4);
      }
      WaitForSingleObject(*(HANDLE *)(v4 + 12), 0xFFFFFFFFu);
      sub_47E030(v4);
    }
    while ( (unsigned __int16)InterlockedExchangeAdd((volatile LONG *)v4, -16776960) );
    sub_47E060(v4);
  }
  v3 = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v4 + 16) = v5;
  result = v4;
  *(_DWORD *)(v4 + 20) = v3;
  return result;
}

//----- (0047E1C0) --------------------------------------------------------
__int32 __usercall sub_47E1C0<eax>(volatile LONG *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  __int32 result; // eax@1
  volatile LONG *v5; // [sp+0h] [bp-8h]@1
  __int32 v6; // [sp+4h] [bp-4h]@1

  v5 = a1;
  result = InterlockedExchangeAdd(a1, -256) - 256;
  v6 = result;
  if ( result & 0x8080 )
    result = sub_422D80(result, a2, a3, a4);
  if ( !(_WORD)v6 )
  {
    result = v6 & 0xFF000000;
    if ( v6 & 0xFF000000 )
      result = SetEvent((HANDLE)v5[3]);
  }
  return result;
}

//----- (0047E220) --------------------------------------------------------
int __thiscall sub_47E220(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(this + 20));
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)(v2 + 16) = 0;
  *(_DWORD *)(v2 + 12) = 0;
  *(_DWORD *)v2 = 0;
  return v2;
}

//----- (0047E270) --------------------------------------------------------
void __usercall sub_47E270(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST04_4@1

  v4 = a1;
  sub_4A16B4(*(_DWORD *)a1);
  CIOCriticalSection::_CIOCriticalSection(v4 + 20, a2, a3, a4);
}
// 4A16B4: using guessed type _DWORD __cdecl sub_4A16B4(_DWORD);

//----- (0047E2A0) --------------------------------------------------------
void *__thiscall sub_47E2A0(int this, int a2, int a3)
{
  int v4; // ST0C_4@1

  v4 = this;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = a3;
  *(_DWORD *)(this + 16) = (a2 + 8) & 0xFFFFFFFC;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)this = loc_49F2E1(a3 * *(_DWORD *)(this + 16));
  return memset(*(void **)v4, 0, a3 * *(_DWORD *)(v4 + 16));
}

//----- (0047E320) --------------------------------------------------------
int sub_47E320(int a1, int a2, const char *a3, ...)
{
  int v4; // ST18_4@4
  int v5; // [sp+4h] [bp-8h]@2
  va_list va; // [sp+20h] [bp+14h]@1

  va_start(va, a3);
  if ( *(_DWORD *)(a1 + 12) == *(_DWORD *)(a1 + 8) )
  {
    v5 = *(_DWORD *)(a1 + 12) - 1;
    memcpy_0(*(void **)a1, (const void *)(*(_DWORD *)(a1 + 16) + *(_DWORD *)a1), *(_DWORD *)(a1 + 16) * v5);
  }
  else
  {
    v5 = *(_DWORD *)(a1 + 12)++;
  }
  v4 = *(_DWORD *)a1 + *(_DWORD *)(a1 + 16) * v5;
  *(_DWORD *)v4 = a2;
  return _vsnprintf((char *)(v4 + 4), *(_DWORD *)(a1 + 4), a3, va);
}

//----- (0047E3D0) --------------------------------------------------------
char *__thiscall sub_47E3D0(int this, int a2, const char *a3)
{
  int v4; // ST14_4@4
  int v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@2

  v5 = this;
  if ( *(_DWORD *)(this + 12) == *(_DWORD *)(this + 8) )
  {
    v6 = *(_DWORD *)(this + 12) - 1;
    memcpy_0(*(void **)this, (const void *)(*(_DWORD *)(this + 16) + *(_DWORD *)this), *(_DWORD *)(this + 16) * v6);
  }
  else
  {
    v6 = *(_DWORD *)(this + 12)++;
  }
  v4 = *(_DWORD *)v5 + *(_DWORD *)(v5 + 16) * v6;
  *(_DWORD *)v4 = a2;
  return strncpy((char *)(v4 + 4), a3, *(_DWORD *)(v5 + 4));
}

//----- (0047E480) --------------------------------------------------------
int __thiscall sub_47E480(int this)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 12) = 0;
  return result;
}

//----- (0047E4A0) --------------------------------------------------------
BOOL __usercall sub_47E4A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  char v4; // sf@4
  int v5; // eax@5
  int v7; // [sp+0h] [bp-A0h]@1
  HDC v8; // [sp+4h] [bp-9Ch]@1
  struct tagPAINTSTRUCT Paint; // [sp+8h] [bp-98h]@1
  int v10; // [sp+48h] [bp-58h]@1
  struct tagRECT Rect; // [sp+4Ch] [bp-54h]@1
  int y; // [sp+5Ch] [bp-44h]@1
  struct tagTEXTMETRICA tm; // [sp+60h] [bp-40h]@1
  __int32 v14; // [sp+98h] [bp-8h]@2
  __int32 v15; // [sp+9Ch] [bp-4h]@1

  v10 = dword_4D9830;
  v7 = a1;
  v8 = BeginPaint(hWnd, &Paint);
  CSocket::Lock(v7, a2, a3, a4);
  GetTextMetricsA(v8, &tm);
  GetClientRect(hWnd, &Rect);
  y = 0;
  v15 = Rect.bottom / tm.tmHeight;
  if ( *(_DWORD *)(v7 + 12) <= Rect.bottom / tm.tmHeight )
  {
    v14 = *(_DWORD *)v7;
    v15 = *(_DWORD *)(v7 + 12);
  }
  else
  {
    v14 = *(_DWORD *)v7 + *(_DWORD *)(v7 + 16) * (*(_DWORD *)(v7 + 12) - v15);
  }
  while ( 1 )
  {
    v4 = v15-- - 1 < 0;
    if ( v4 )
      break;
    SetTextColor(v8, *(_DWORD *)v14);
    v5 = strlen((const char *)(v14 + 4));
    TextOutA(v8, 0, y, (LPCSTR)(v14 + 4), v5);
    v14 += *(_DWORD *)(v7 + 16);
    y += tm.tmHeight;
  }
  CSocket::Unlock(v7, a2, a3, a4);
  return EndPaint(hWnd, &Paint);
}
// 4D9830: using guessed type int dword_4D9830;

//----- (0047E5F0) --------------------------------------------------------
signed int __usercall sub_47E5F0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  time(&dword_4E2148);
  CLink::Initialize(&dword_4E2140);
  return CIOServer::Start((int)&unk_4E2158, a1, a2, a3, *(int *)&dword_4E1170);
}
// 4E2140: using guessed type int dword_4E2140;

//----- (0047E620) --------------------------------------------------------
__int32 __usercall sub_47E620<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v4; // eax@1
  int v6; // [sp+0h] [bp-18h]@2
  char v7; // [sp+4h] [bp-14h]@1
  int v8; // [sp+Ch] [bp-Ch]@1
  char v9; // [sp+10h] [bp-8h]@1

  sub_47E0D0((volatile LONG *)&unk_4E2170);
  CLink::Insert(a4 + 112, (int)&dword_4E2140);
  v8 = CSocket::Id(a4);
  v4 = sub_420990((int)&v9, (int)&v8, (int)&a4);
  sub_445DF0((int)&unk_4E214C, (int)&v7, v4);
  ++dword_4E213C;
  if ( dword_4E2138 <= dword_4E213C )
    v6 = dword_4E213C;
  else
    v6 = dword_4E2138;
  dword_4E2138 = v6;
  return sub_47E1C0((volatile LONG *)&unk_4E2170, a1, a2, a3);
}
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);
// 4E2138: using guessed type int dword_4E2138;
// 4E213C: using guessed type int dword_4E213C;
// 4E2140: using guessed type int dword_4E2140;

//----- (0047E6B0) --------------------------------------------------------
__int32 __usercall sub_47E6B0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  int v5; // [sp+0h] [bp-4h]@1

  sub_47E0D0((volatile LONG *)&unk_4E2170);
  CLink::Remove((void *)(a4 + 112));
  --dword_4E213C;
  v5 = CSocket::Id(a4);
  sub_47E990((int)&unk_4E214C, (int)&v5);
  return sub_47E1C0((volatile LONG *)&unk_4E2170, a1, a2, a3);
}
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E700) --------------------------------------------------------
int __cdecl sub_47E700()
{
  return dword_4E213C;
}
// 4E213C: using guessed type int dword_4E213C;

//----- (0047E710) --------------------------------------------------------
int __cdecl sub_47E710()
{
  return dword_4E2138;
}
// 4E2138: using guessed type int dword_4E2138;

//----- (0047E720) --------------------------------------------------------
int __usercall sub_47E720<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int i; // [sp+4h] [bp-4h]@1

  CIOServer::Stop((int)&unk_4E2158);
  sub_47DE70((volatile LONG *)&unk_4E2170);
  for ( i = dword_4E2140; (int *)i != &dword_4E2140; i = *(_DWORD *)i )
    sub_494760(i - 112, a1, a2, a3);
  return sub_47E080((volatile LONG *)&unk_4E2170, a1, a2, a3);
}
// 4E2140: using guessed type int dword_4E2140;

//----- (0047E780) --------------------------------------------------------
int __usercall sub_47E780<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int v4; // [sp+0h] [bp-8h]@3
  int i; // [sp+4h] [bp-4h]@1

  sub_47DE70((volatile LONG *)&unk_4E2170);
  for ( i = dword_4E2140; (int *)i != &dword_4E2140; i = *(_DWORD *)i )
  {
    v4 = i - 112;
    sub_4948C0(a1, a2, a3, i - 112, 30, (unsigned int)&byte_4B437D);
    if ( InterlockedIncrement((volatile LONG *)(i - 112 + 172)) >= 5 )
    {
      sub_495B20(v4, a1, a2, a3, 0);
      CSocket::_scalar_deleting_destructor_(v4, a1, a2, a3);
    }
  }
  return sub_47E080((volatile LONG *)&unk_4E2170, a1, a2, a3);
}
// 4E2140: using guessed type int dword_4E2140;

//----- (0047E800) --------------------------------------------------------
int __usercall sub_47E800<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@1
  char v6; // [sp+0h] [bp-10h]@1
  int v7; // [sp+4h] [bp-Ch]@1
  int v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v8 = 0;
  sub_47DE70((volatile LONG *)&unk_4E2170);
  v7 = a4;
  sub_44AE20((int)&unk_4E214C, (int)&v9, (int)&v7);
  v4 = sub_430C20((int)&unk_4E214C, &v6);
  if ( (unsigned __int8)sub_47D070(v4) )
  {
    v8 = *(_DWORD *)(sub_420250((int *)&v9) + 4);
    CIOObject::AddRef(v8, a1, a2, a3);
  }
  sub_47E080((volatile LONG *)&unk_4E2170, a1, a2, a3);
  return v8;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047E880) --------------------------------------------------------
void __usercall sub_47E880(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int i; // [sp+8h] [bp-4h]@3

  if ( dword_4E2168 != -1 )
  {
    sub_47DE70((volatile LONG *)&unk_4E2170);
    for ( i = dword_4E2140; (int *)i != &dword_4E2140; i = *(_DWORD *)i )
    {
      if ( *(_DWORD *)(i - 112 + 152) )
      {
        CSocket::Id(i - 112);
        CAuthSocket::Write(a1, a2, a3, 3, (unsigned int)"dddwbdd");
      }
    }
    sub_47E080((volatile LONG *)&unk_4E2170, a1, a2, a3);
  }
}
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);
// 4E2140: using guessed type int dword_4E2140;
// 4E2168: using guessed type int dword_4E2168;

//----- (0047E940) --------------------------------------------------------
int __userpurge sub_47E940<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  int v6; // [sp+0h] [bp-10h]@2
  int v7; // [sp+8h] [bp-8h]@1

  v7 = (int)sub_401000(0x11Cu);
  if ( v7 )
    v6 = sub_4942C0(v7, a1, a2, a3, a4, a5);
  else
    v6 = 0;
  return v6;
}

//----- (0047E990) --------------------------------------------------------
int __thiscall sub_47E990(int this, int a2)
{
  int v3; // ST0C_4@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_472C30(this, (int)&v5, a2);
  v7 = 0;
  sub_47A280(v5, v6, (int)&v7);
  sub_47E9F0(v3, &v4, v5, v6);
  return v7;
}

//----- (0047E9F0) --------------------------------------------------------
void *__thiscall sub_47E9F0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_47EAB0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047EA90) --------------------------------------------------------
signed int __cdecl sub_47EA90()
{
  return sub_478BE0();
}

//----- (0047EAB0) --------------------------------------------------------
int __thiscall sub_47EAB0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_47EB60(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 47EB60: using guessed type _DWORD __stdcall sub_47EB60(_DWORD);

//----- (0047EB10) --------------------------------------------------------
void *__thiscall sub_47EB10(int this, void *a2, int a3)
{
  int v4; // eax@1

  v4 = sub_4789A0(this, a3);
  sub_446700(a2, v4);
  return a2;
}

//----- (0047EB40) --------------------------------------------------------
int __thiscall CServer::SendAlive(int this)
{
  return sub_430F90(*(_DWORD *)(this + 4));
}

//----- (0047EB60) --------------------------------------------------------
int __stdcall sub_47EB60(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_47EB60(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 47EB60: using guessed type _DWORD __stdcall sub_47EB60(_DWORD);

//----- (0047EBE0) --------------------------------------------------------
void *__thiscall sub_47EBE0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0047EC10) --------------------------------------------------------
int __thiscall sub_47EC10(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = sub_4471B0();
  *(_BYTE *)sub_431110(*(_DWORD *)(v2 + 4)) = 1;
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)CServer::SendAlive(v2) = *(_DWORD *)(v2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0047EC80) --------------------------------------------------------
int __thiscall sub_47EC80(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOServer::CIOServer(this);
  *(_DWORD *)v2 = &off_4BC224;
  return v2;
}
// 4BC224: using guessed type int (__stdcall *off_4BC224)(int);

//----- (0047ECA0) --------------------------------------------------------
int __thiscall sub_47ECA0(void *this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = (int)this;
  sub_47ECD0(this);
  if ( a2 & 1 )
    sub_401020(v3);
  return v3;
}

//----- (0047ECD0) --------------------------------------------------------
int __thiscall sub_47ECD0(void *this)
{
  return CIOServer::_CIOServer(this);
}

//----- (0047ECF0) --------------------------------------------------------
int __thiscall sub_47ECF0(int this)
{
  return sub_47ED10(this);
}

//----- (0047ED10) --------------------------------------------------------
int __thiscall sub_47ED10(int this)
{
  return sub_47ED30(this);
}

//----- (0047ED30) --------------------------------------------------------
int __thiscall sub_47ED30(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_47E9F0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0047EDE0) --------------------------------------------------------
int __thiscall sub_47EDE0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBase::CBase(this);
  *(_DWORD *)v2 = &off_4BC240;
  *(_DWORD *)(v2 + 92) = 0;
  *(_DWORD *)(v2 + 88) = 0;
  *(_DWORD *)(v2 + 84) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  *(_DWORD *)(v2 + 76) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 64) = 0;
  *(_DWORD *)(v2 + 60) = 0;
  *(_DWORD *)(v2 + 56) = 0;
  *(_DWORD *)(v2 + 52) = 0;
  *(_DWORD *)(v2 + 48) = 0;
  *(_DWORD *)(v2 + 44) = 0;
  *(_DWORD *)(v2 + 40) = 0;
  *(_DWORD *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 32) = 0;
  return v2;
}
// 4BC240: using guessed type int (__stdcall *off_4BC240)(int);

//----- (0047EEA0) --------------------------------------------------------
int __userpurge sub_47EEA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_47EED0(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (0047EED0) --------------------------------------------------------
int __usercall sub_47EED0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  return CBase::_CBase(a1, a2, a3, a4);
}

//----- (0047EEF0) --------------------------------------------------------
signed int __thiscall sub_47EEF0(void *this, int a2, char a3)
{
  void *v3; // eax@2
  void *v4; // eax@3
  void *v5; // eax@4
  void *v6; // eax@5
  void *v7; // eax@6
  void *v8; // eax@6
  void *v9; // eax@6
  void *v10; // eax@7
  void *v11; // eax@8
  int v12; // esi@10
  void *v13; // eax@10
  void *v14; // eax@12
  void *v15; // eax@12
  void *v16; // eax@12
  void *v17; // eax@12
  void *v18; // eax@13
  void *v19; // eax@14
  void *v20; // eax@15
  signed int result; // eax@16
  int v22; // [sp-4h] [bp-58h]@16
  int v23; // [sp+4h] [bp-50h]@1
  void *v24; // [sp+8h] [bp-4Ch]@1
  char v25; // [sp+10h] [bp-44h]@15
  char v26; // [sp+14h] [bp-40h]@14
  char v27; // [sp+18h] [bp-3Ch]@13
  char v28; // [sp+1Ch] [bp-38h]@12
  char v29; // [sp+20h] [bp-34h]@12
  char v30; // [sp+24h] [bp-30h]@12
  char v31; // [sp+28h] [bp-2Ch]@12
  char v32; // [sp+2Ch] [bp-28h]@10
  char v33; // [sp+30h] [bp-24h]@8
  char v34; // [sp+34h] [bp-20h]@7
  char v35; // [sp+38h] [bp-1Ch]@6
  char v36; // [sp+3Ch] [bp-18h]@6
  char v37; // [sp+40h] [bp-14h]@6
  char v38; // [sp+44h] [bp-10h]@5
  char v39; // [sp+48h] [bp-Ch]@4
  char v40; // [sp+4Ch] [bp-8h]@3
  char v41; // [sp+50h] [bp-4h]@2

  v24 = this;
  v23 = a2 - 2;
  switch ( a2 )
  {
    case 38:
      v3 = sub_4023A0(&a3, &v41);
      *((_DWORD *)v24 + 8) = sub_40C8D0(v3);
      goto LABEL_17;
    case 2:
      v4 = sub_4023A0(&a3, &v40);
      *((_DWORD *)v24 + 9) = sub_40C8D0(v4);
      goto LABEL_17;
    case 15:
      v5 = sub_4023A0(&a3, &v39);
      *((_DWORD *)v24 + 17) = sub_40C8D0(v5);
      goto LABEL_17;
    case 61:
      v6 = sub_4023A0(&a3, &v38);
      *((_DWORD *)v24 + 18) = sub_40C8D0(v6);
      goto LABEL_17;
    case 60:
      v7 = sub_4023A0(&a3, &v37);
      *((_DWORD *)v24 + 19) = sub_40C8D0(v7);
      v8 = sub_4023A0(&a3, &v36);
      *((_DWORD *)v24 + 20) = *((_DWORD *)v24 + 19) + sub_40C8D0(v8);
      v9 = sub_4023A0(&a3, &v35);
      *((_DWORD *)v24 + 21) = sub_40C8D0(v9);
      goto LABEL_17;
    case 62:
      v10 = sub_4023A0(&a3, &v34);
      *((_DWORD *)v24 + 22) = sub_40C8D0(v10);
      goto LABEL_17;
    case 63:
      v11 = sub_4023A0(&a3, &v33);
      *((_DWORD *)v24 + 23) = sub_40C8D0(v11);
      while ( !(unsigned __int8)sub_402380(&a3) )
      {
        v12 = *((_DWORD *)v24 + 23) << 8;
        v13 = sub_4023A0(&a3, &v32);
        *((_DWORD *)v24 + 23) = (unsigned __int8)sub_40C8D0(v13) | v12;
      }
      goto LABEL_17;
    case 39:
      v14 = sub_4023A0(&a3, &v31);
      *((_DWORD *)v24 + 10) = sub_40C8D0(v14);
      v15 = sub_4023A0(&a3, &v30);
      *((_DWORD *)v24 + 11) = 1 << sub_40C8D0(v15);
      v16 = sub_4023A0(&a3, &v29);
      *((_DWORD *)v24 + 12) = sub_40C8D0(v16);
      v17 = sub_4023A0(&a3, &v28);
      *((_DWORD *)v24 + 13) = sub_40C8D0(v17);
      goto LABEL_17;
    case 81:
      v18 = sub_4023A0(&a3, &v27);
      *((_DWORD *)v24 + 14) = sub_40C8D0(v18);
      goto LABEL_17;
    case 94:
      v19 = sub_4023A0(&a3, &v26);
      *((_DWORD *)v24 + 15) = sub_40C8D0(v19);
      goto LABEL_17;
    case 97:
      v20 = sub_4023A0(&a3, &v25);
      *((_DWORD *)v24 + 16) = sub_40C8D0(v20);
LABEL_17:
      result = 1;
      break;
    default:
      v22 = a2 - 2;
      sub_402340(&v22, (int)&a3);
      result = CBase::Set(v24, a2, v22);
      break;
  }
  return result;
}

//----- (0047F1E0) --------------------------------------------------------
signed int __thiscall sub_47F1E0(int this)
{
  void *v1; // eax@2
  signed int result; // eax@3
  int v3; // [sp+4h] [bp-14h]@1
  char v4; // [sp+8h] [bp-10h]@2
  int v5; // [sp+Ch] [bp-Ch]@2
  char v6; // [sp+10h] [bp-8h]@2
  int v7; // [sp+14h] [bp-4h]@4

  v3 = this;
  switch ( *(_DWORD *)(this + 32) + 2 )
  {
    case 2:
    case 3:
    case 4:
      v5 = *(_DWORD *)(this + 36) + (*(_DWORD *)(this + 32) << 16);
      sub_446130((int)&unk_4E218C, (int)&v6, (int)&v5);
      v1 = sub_430C20((int)&unk_4E218C, &v4);
      if ( !(unsigned __int8)unknown_libname_8(v1) )
      {
        v7 = *(_DWORD *)(sub_420250((int *)&v6) + 4);
        goto LABEL_10;
      }
      result = 0;
      break;
    case 1:
      v7 = dword_4E2568[*(_DWORD *)(this + 36)];
      goto LABEL_10;
    case 0:
      if ( *(_DWORD *)(this + 36) < dword_4E2188 )
      {
        v7 = dword_4E2690[*(_DWORD *)(this + 36)];
LABEL_10:
        *(_DWORD *)(v7 + 4) = *(_DWORD *)(v3 + 36);
        *(_DWORD *)(v7 + 12) = *(_DWORD *)(v3 + 40);
        *(_DWORD *)(v7 + 16) = *(_DWORD *)(v3 + 44);
        *(_DWORD *)(v7 + 20) = *(_DWORD *)(v3 + 48);
        *(_DWORD *)(v7 + 24) = *(_DWORD *)(v3 + 52);
        *(_DWORD *)(v7 + 28) = *(_DWORD *)(v3 + 56);
        *(_DWORD *)(v7 + 32) = *(_DWORD *)(v3 + 60);
        *(_DWORD *)(v7 + 68) = *(_DWORD *)(v3 + 64);
        *(_DWORD *)(v7 + 36) = *(_DWORD *)(v3 + 68);
        *(_DWORD *)(v7 + 52) = *(_DWORD *)(v3 + 72);
        *(_DWORD *)(v7 + 40) = *(_DWORD *)(v3 + 76);
        *(_DWORD *)(v7 + 44) = *(_DWORD *)(v3 + 80);
        *(_DWORD *)(v7 + 48) = *(_DWORD *)(v3 + 84);
        *(_DWORD *)(v7 + 56) = *(_DWORD *)(v3 + 88);
        *(_DWORD *)(v7 + 60) = *(_DWORD *)(v3 + 92);
        *(_DWORD *)(v3 + 92) = 0;
        *(_DWORD *)(v3 + 88) = 0;
        *(_DWORD *)(v3 + 84) = 0;
        *(_DWORD *)(v3 + 80) = 0;
        *(_DWORD *)(v3 + 76) = 0;
        *(_DWORD *)(v3 + 72) = 0;
        *(_DWORD *)(v3 + 68) = 0;
        *(_DWORD *)(v3 + 64) = 0;
        *(_DWORD *)(v3 + 60) = 0;
        *(_DWORD *)(v3 + 56) = 0;
        *(_DWORD *)(v3 + 52) = 0;
        *(_DWORD *)(v3 + 48) = 0;
        *(_DWORD *)(v3 + 44) = 0;
        *(_DWORD *)(v3 + 40) = 0;
        *(_DWORD *)(v3 + 36) = 0;
        *(_DWORD *)(v3 + 32) = 0;
        result = 1;
      }
      else
      {
        sub_4328C0("CInitSkill::OnLoad() Invalid Monster Skill Index (%d)", *(_DWORD *)(this + 36));
        result = 0;
      }
      break;
    default:
      sub_4328C0("CInitSkill::OnLoad() Invalid Skill Class (%d)", *(_DWORD *)(this + 32));
      result = 0;
      break;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 4E2188: using guessed type int dword_4E2188;
// 4E2568: using guessed type int dword_4E2568[];
// 4E2690: using guessed type int dword_4E2690[];

//----- (0047F450) --------------------------------------------------------
int __thiscall sub_47F450(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  memset((void *)(this + 8), 0, 0x150u);
  *(_DWORD *)(v2 + 344) = 0;
  *(_DWORD *)(v2 + 348) = 0;
  *(_DWORD *)(v2 + 352) = 0;
  memset((void *)(v2 + 356), 0, 0x24u);
  return v2;
}

//----- (0047F4D0) --------------------------------------------------------
LONG __thiscall sub_47F4D0(void *this)
{
  LONG result; // eax@5
  void *v2; // [sp+0h] [bp-14h]@1
  int v3; // [sp+4h] [bp-10h]@8
  signed int j; // [sp+8h] [bp-Ch]@6
  int v5; // [sp+Ch] [bp-8h]@3
  signed int i; // [sp+10h] [bp-4h]@1

  v2 = this;
  for ( i = 0; i < 84; ++i )
  {
    v5 = *((_DWORD *)v2 + i + 2);
    if ( v5 )
      sub_48D900(v5);
    result = i + 1;
  }
  for ( j = 0; j < 9; ++j )
  {
    result = j;
    v3 = *((_DWORD *)v2 + j + 89);
    if ( v3 )
      result = sub_48D900(v3);
  }
  return result;
}

//----- (0047F560) --------------------------------------------------------
int __cdecl sub_47F560()
{
  int result; // eax@5
  char v1; // [sp+0h] [bp-10h]@3
  char v2; // [sp+4h] [bp-Ch]@3
  int i; // [sp+8h] [bp-8h]@1
  int v4; // [sp+Ch] [bp-4h]@1

  v4 = 152;
  for ( i = 0; i < v4; ++i )
  {
    sub_48D6D0((int)&unk_4E218C, (int)&v1, 8 * i + 5120424);
    if ( !v2 )
      sub_4328C0("Duplicate key at Skill Map. (%x)", *(_DWORD *)&dword_4E21A8[8 * i]);
    result = i + 1;
  }
  return result;
}

//----- (0047F5D0) --------------------------------------------------------
char __cdecl sub_47F5D0()
{
  int v0; // eax@2
  void *v1; // eax@2
  int v2; // eax@3
  char v4; // [sp+8h] [bp-14h]@2
  char v5; // [sp+Ch] [bp-10h]@3
  int v6; // [sp+10h] [bp-Ch]@6
  int i; // [sp+14h] [bp-8h]@4
  char v8; // [sp+18h] [bp-4h]@1

  sub_40F070((int)&unk_4E218C, &v8);
  while ( 1 )
  {
    v1 = sub_430C20((int)&unk_4E218C, &v4);
    v0 = (unsigned __int8)sub_47D070(v1);
    if ( !(_BYTE)v0 )
      break;
    v2 = sub_420250((int *)&v8);
    sub_401020(*(_DWORD *)(v2 + 4));
    sub_446090((int *)&v8, (int)&v5, 0);
  }
  for ( i = 0; i < 9; ++i )
  {
    v6 = dword_4E2668[i];
    if ( v6 )
      sub_401020(v6);
    v0 = i + 1;
  }
  return v0;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E2668: using guessed type int dword_4E2668[];

//----- (0047F680) --------------------------------------------------------
int __thiscall sub_47F680(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)this = a2;
  result = a2;
  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 460);
  return result;
}

//----- (0047F6B0) --------------------------------------------------------
void __thiscall sub_47F6B0(int this, int a2, int a3)
{
  void *v3; // eax@2
  int v4; // eax@3
  int v5; // [sp+0h] [bp-14h]@1
  char v6; // [sp+4h] [bp-10h]@2
  int v7; // [sp+8h] [bp-Ch]@2
  int v8; // [sp+Ch] [bp-8h]@3
  char v9; // [sp+10h] [bp-4h]@2

  v5 = this;
  if ( a2 < 84 )
  {
    v7 = a2 + (*(_DWORD *)(this + 4) << 16);
    sub_446130((int)&unk_4E218C, (int)&v9, (int)&v7);
    v3 = sub_430C20((int)&unk_4E218C, &v6);
    if ( (unsigned __int8)sub_47D070(v3) )
    {
      v4 = sub_420250((int *)&v9);
      v8 = (int)sub_47F760(*(void **)(v4 + 4));
      sub_47F780(v8, a2, a3);
      *(_DWORD *)(v5 + 4 * a2 + 8) = v8;
    }
    else
    {
      sub_4328C0("CPlayerSkill::SetSkill() Can't find Skill(Class:%d, Skill:%d)", *(_DWORD *)(v5 + 4), a2);
    }
  }
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0047F760) --------------------------------------------------------
void *__thiscall sub_47F760(void *this)
{
  void *v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_48D880();
  return memcpy((void *)v3, v2, 0x4Cu);
}

//----- (0047F780) --------------------------------------------------------
int __thiscall sub_47F780(int this, int a2, int a3)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = a2;
  result = a3;
  *(_DWORD *)(this + 8) = a3;
  return result;
}

//----- (0047F7A0) --------------------------------------------------------
void __userpurge sub_47F7A0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@4
  void *v6; // [sp+0h] [bp-14h]@1
  char v7; // [sp+4h] [bp-10h]@4
  int v8; // [sp+8h] [bp-Ch]@4
  int v9; // [sp+Ch] [bp-8h]@6
  char v10; // [sp+10h] [bp-4h]@4

  v6 = a1;
  if ( a5 < 84 )
  {
    if ( !CPlayerSkill::IsSkill(a1, a5) )
    {
      v8 = a5 + (*((_DWORD *)v6 + 1) << 16);
      sub_446130((int)&unk_4E218C, (int)&v10, (int)&v8);
      v5 = sub_430C20((int)&unk_4E218C, &v7);
      if ( !(unsigned __int8)unknown_libname_8(v5) )
      {
        v9 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
        if ( (*(int (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)v9 + 60))(
               v9,
               *(_DWORD *)(*(_DWORD *)v6 + 60),
               *(_DWORD *)(*(_DWORD *)v6 + 464)) )
        {
          if ( sub_47F910(v6, *(_DWORD *)(v9 + 20), *(_DWORD *)(v9 + 24)) )
          {
            v9 = (int)sub_47F760((void *)v9);
            sub_47F780(v9, a5, 1);
            (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 8))(v9, *(_DWORD *)v6, 0, 0);
            *((_DWORD *)v6 + a5 + 2) = v9;
            if ( sub_47FD70(v6, a5) )
              (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(**(_DWORD **)v6 + 88))(
                *(_DWORD *)v6,
                24,
                0,
                1);
            CPlayer::Write(a2, a3, a4, *(_DWORD *)v6, 81, (unsigned int)"bb");
            CDBSocket::Write(a2, a3, a4, 9, (unsigned int)"dbw");
          }
        }
      }
    }
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0047F910) --------------------------------------------------------
signed int __thiscall sub_47F910(void *this, int a2, int a3)
{
  signed int result; // eax@2
  bool v4; // [sp+0h] [bp-Ch]@7
  int v5; // [sp+8h] [bp-4h]@3

  if ( a2 )
  {
    v5 = *((_DWORD *)this + a2 + 2);
    if ( a3 )
    {
      v4 = v5 && *(_DWORD *)(v5 + 8) >= a3;
      result = v4;
    }
    else
    {
      result = *((_DWORD *)this + a2 + 2);
    }
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (0047F970) --------------------------------------------------------
void __userpurge sub_47F970(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5)
{
  int v5; // ST1C_4@6
  void *v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+8h] [bp-4h]@3

  v6 = a1;
  if ( a5 < 84 )
  {
    v7 = *((_DWORD *)a1 + a5 + 2);
    if ( v7 )
    {
      if ( (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v7 + 44))(v7, *(_DWORD *)a1) )
      {
        v5 = *(_DWORD *)(v7 + 8) + 1;
        (*(void (__thiscall **)(int, _DWORD, int, signed int))(*(_DWORD *)v7 + 8))(
          v7,
          *(_DWORD *)v6,
          *(_DWORD *)(v7 + 8) + 1,
          1);
        *(_DWORD *)(v7 + 8) = v5;
        if ( sub_47FD70(v6, a5) )
          (*(void (__cdecl **)(_DWORD, signed int, _DWORD, signed int))(**(_DWORD **)v6 + 88))(*(_DWORD *)v6, 24, 0, 1);
        CPlayer::Write(a2, a3, a4, *(_DWORD *)v6, 81, (unsigned int)"bb");
        CDBSocket::Write(a2, a3, a4, 10, (unsigned int)"dbbw");
      }
    }
  }
}

//----- (0047FA60) --------------------------------------------------------
void __userpurge sub_47FA60(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *v6; // eax@2
  int v7; // eax@4
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@2
  int v10; // [sp+8h] [bp-Ch]@2
  char v11; // [sp+Ch] [bp-8h]@2
  int v12; // [sp+10h] [bp-4h]@1

  v8 = a1;
  v12 = *(_DWORD *)(a1 + 4 * a5 + 8);
  if ( v12 )
  {
    (*(void (__thiscall **)(int, _DWORD, int, signed int))(*(_DWORD *)v12 + 8))(v12, *(_DWORD *)a1, a6, 1);
    *(_DWORD *)(v12 + 8) = a6;
    goto LABEL_6;
  }
  v10 = a5 + (*(_DWORD *)(a1 + 4) << 16);
  sub_446130((int)&unk_4E218C, (int)&v11, (int)&v10);
  v6 = sub_430C20((int)&unk_4E218C, &v9);
  if ( !(unsigned __int8)unknown_libname_8(v6) )
  {
    v7 = sub_420250((int *)&v11);
    *(_DWORD *)(v8 + 4 * a5 + 8) = sub_47F760(*(void **)(v7 + 4));
    v12 = *(_DWORD *)(v8 + 4 * a5 + 8);
    sub_47F780(v12, a5, a6);
    (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v12 + 8))(v12, *(_DWORD *)v8, 0, 0);
LABEL_6:
    CPlayer::Write(a2, a3, a4, *(_DWORD *)v8, 81, (unsigned int)"bb");
    CDBSocket::Write(a2, a3, a4, 9, (unsigned int)"dbw");
    CDBSocket::Write(a2, a3, a4, 10, (unsigned int)"dbbw");
  }
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0047FBB0) --------------------------------------------------------
signed int __thiscall sub_47FBB0(void *this, signed int a2, int a3, int a4)
{
  signed int result; // eax@3
  int v5; // [sp+4h] [bp-4h]@3

  if ( a2 < 84 )
  {
    result = a2;
    v5 = *((_DWORD *)this + a2 + 2);
    if ( v5 )
      result = (*(int (__thiscall **)(int, _DWORD, int, int))(*(_DWORD *)v5 + 4))(v5, *(_DWORD *)this, a3, a4);
  }
  return result;
}

//----- (0047FC00) --------------------------------------------------------
int __thiscall sub_47FC00(void *this)
{
  int result; // eax@5
  void *v2; // [sp+0h] [bp-Ch]@1
  int v3; // [sp+4h] [bp-8h]@3
  signed int i; // [sp+8h] [bp-4h]@1

  v2 = this;
  for ( i = 0; i < 84; ++i )
  {
    v3 = *((_DWORD *)v2 + i + 2);
    if ( v3 )
      (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v3 + 8))(v3, *(_DWORD *)v2, 0, 0);
    result = i + 1;
  }
  return result;
}

//----- (0047FC50) --------------------------------------------------------
int __cdecl sub_47FC50(int a1, int a2, char a3)
{
  int result; // eax@1
  int v4; // [sp+4h] [bp-4h]@1

  result = a2;
  v4 = *(_DWORD *)(a1 + 4 * a2 + 8);
  if ( v4 )
    result = (*(int (__thiscall **)(int, _DWORD, char *))(*(_DWORD *)v4 + 12))(v4, *(_DWORD *)a1, &a3);
  return result;
}

//----- (0047FC90) --------------------------------------------------------
void __thiscall sub_47FC90(int *this, signed int a2, int a3, int a4)
{
  int *v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@6
  int v6; // [sp+10h] [bp+8h]@6

  v4 = this;
  if ( a2 >= 64 )
  {
    if ( a2 < 93 )
    {
      if ( *(_DWORD *)(*this + 1108) )
      {
        if ( CChar::IsGState(*this, 512) )
        {
          v6 = a2 - 64;
          v5 = v4[v6 + 89];
          if ( !v5 )
          {
            v4[v6 + 89] = (int)sub_47F760((void *)dword_4E2668[v6]);
            v5 = v4[v6 + 89];
          }
          if ( *(_DWORD *)(v5 + 56) == *(_DWORD *)(*v4 + 1112) >> 4 )
          {
            if ( (*(_DWORD *)(*v4 + 1112) & 0xF) >= *(_DWORD *)(v5 + 12) )
              (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 4))(v5, *v4, a3, a4);
          }
        }
      }
    }
  }
}
// 4E2668: using guessed type int dword_4E2668[];

//----- (0047FD70) --------------------------------------------------------
signed int __thiscall sub_47FD70(void *this, signed int a2)
{
  int v3; // [sp+0h] [bp-Ch]@36
  int v4; // [sp+4h] [bp-8h]@4

  if ( a2 == 11 )
    return 0;
  if ( *(_DWORD *)(*(_DWORD *)this + 464) > 3u )
  {
    if ( a2 == 30 )
      return 0;
    v3 = *(_DWORD *)(*(_DWORD *)this + 460);
    if ( v3 )
    {
      if ( v3 == 1 && *(_DWORD *)(*(_DWORD *)this + 464) & 8 && a2 == 61 )
        return 0;
    }
    else
    {
      if ( *(_DWORD *)(*(_DWORD *)this + 464) & 8 && (a2 == 18 || a2 == 14 || a2 == 35) )
        return 0;
    }
  }
  else
  {
    v4 = *(_DWORD *)(*(_DWORD *)this + 460);
    if ( v4 )
    {
      if ( v4 == 1 )
      {
        if ( a2 == 5 )
          return 0;
        if ( a2 >= 17 && a2 <= 21 )
          return 0;
      }
      else
      {
        if ( v4 == 2 )
        {
          if ( a2 == 7 )
            return 0;
          if ( a2 == 15 )
            return 0;
        }
      }
    }
    else
    {
      if ( a2 == 14 && *((_DWORD *)this + 16) && *(_DWORD *)(*((_DWORD *)this + a2 + 2) + 8) == 1 )
        return 0;
      if ( a2 == 4 && *((_DWORD *)this + 6) && *(_DWORD *)(*((_DWORD *)this + a2 + 2) + 8) == 1 )
        return 0;
      if ( a2 == 6 && *((_DWORD *)this + 8) && *(_DWORD *)(*((_DWORD *)this + a2 + 2) + 8) == 1 )
        return 0;
      if ( a2 == 15 )
        return 0;
    }
  }
  return 1;
}

//----- (0047FF00) --------------------------------------------------------
void __userpurge sub_47FF00(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-Ch]@39
  int v6; // [sp+4h] [bp-8h]@4
  void *v7; // [sp+8h] [bp-4h]@1

  v7 = a1;
  if ( !a5 )
    a5 = *(_DWORD *)(*(_DWORD *)a1 + 60);
  if ( *(_DWORD *)(*(_DWORD *)a1 + 464) > 3u )
  {
    if ( a5 == 55 || a5 == 60 || a5 == 65 || a5 == 70 )
      sub_47F970(a1, a2, a3, a4, 30);
    v5 = *(_DWORD *)(*(_DWORD *)v7 + 460);
    if ( v5 )
    {
      if ( v5 == 1 )
      {
        if ( *(_DWORD *)(*(_DWORD *)v7 + 464) & 8 )
        {
          if ( a5 == 59 )
            sub_47F7A0(v7, a2, a3, a4, 61);
        }
      }
    }
    else
    {
      if ( *(_DWORD *)(*(_DWORD *)v7 + 464) & 8 )
      {
        if ( a5 == 56 || a5 == 62 || a5 == 70 )
          sub_47F970(v7, a2, a3, a4, 18);
        if ( a5 == 53 || a5 == 62 )
          sub_47F970(v7, a2, a3, a4, 14);
        if ( a5 == 59 )
          sub_47F7A0(v7, a2, a3, a4, 35);
        if ( a5 == 69 )
          sub_47F970(v7, a2, a3, a4, 35);
      }
    }
  }
  else
  {
    v6 = *(_DWORD *)(*(_DWORD *)a1 + 460);
    if ( v6 )
    {
      if ( v6 == 1 )
      {
        if ( a5 == 25 )
          sub_47F7A0(a1, a2, a3, a4, 5);
        if ( a5 == 35 )
          sub_47F7A0(v7, a2, a3, a4, 18);
        if ( a5 == 40 )
          sub_47F7A0(v7, a2, a3, a4, 19);
        if ( a5 == 45 )
          sub_47F7A0(v7, a2, a3, a4, 20);
        if ( a5 == 50 )
          sub_47F7A0(v7, a2, a3, a4, 21);
      }
      else
      {
        if ( v6 == 2 )
        {
          if ( a5 == 25 )
            sub_47F7A0(a1, a2, a3, a4, 15);
          if ( a5 == 35 || a5 == 40 || a5 == 45 || a5 == 50 )
            sub_47F970(v7, a2, a3, a4, 7);
        }
      }
    }
    else
    {
      if ( a5 == 15 )
        sub_47F7A0(a1, a2, a3, a4, 14);
      if ( a5 == 18 )
        sub_47F7A0(v7, a2, a3, a4, 4);
      if ( a5 == 25 )
        sub_47F7A0(v7, a2, a3, a4, 15);
    }
  }
}

//----- (004800E0) --------------------------------------------------------
void __usercall sub_4800E0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-10h]@4
  void *v5; // [sp+8h] [bp-Ch]@1
  int j; // [sp+Ch] [bp-8h]@22
  int i; // [sp+10h] [bp-4h]@11

  v5 = a1;
  if ( *(_DWORD *)(*(_DWORD *)a1 + 464) == 3 )
  {
    if ( *(_DWORD *)(*(_DWORD *)a1 + 60) >= 30 )
    {
      sub_47F970(a1, a2, a3, a4, 11);
      v4 = *(_DWORD *)(*(_DWORD *)v5 + 460);
      if ( v4 )
      {
        if ( v4 == 1 )
        {
          sub_47F7A0(v5, a2, a3, a4, 17);
        }
        else
        {
          if ( v4 == 2 )
            sub_47F7A0(v5, a2, a3, a4, 7);
        }
      }
      else
      {
        sub_47F7A0(v5, a2, a3, a4, 6);
      }
      for ( i = 31; i <= 50; ++i )
        sub_47FF00(v5, a2, a3, a4, i);
    }
    else
    {
      sub_4328C0(
        "CPlayerSkill::ChangeOccupationAutoLearnSkill()  not enough Level(%d)",
        *(_DWORD *)(*(_DWORD *)a1 + 60));
    }
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)a1 + 464) > 3u )
    {
      if ( *(_DWORD *)(*(_DWORD *)a1 + 60) >= 50 )
      {
        sub_47F7A0(a1, a2, a3, a4, 30);
        if ( !*(_DWORD *)(*(_DWORD *)v5 + 460) )
        {
          if ( *(_DWORD *)(*(_DWORD *)v5 + 464) & 8 )
            sub_47F7A0(v5, a2, a3, a4, 18);
        }
        for ( j = 51; j <= *(_DWORD *)(*(_DWORD *)v5 + 60); ++j )
          sub_47FF00(v5, a2, a3, a4, j);
      }
      else
      {
        sub_4328C0(
          "CPlayerSkill::ChangeOccupationAutoLearnSkill()  not enough Level(%d)",
          *(_DWORD *)(*(_DWORD *)a1 + 60));
      }
    }
  }
}

//----- (00480240) --------------------------------------------------------
void __userpurge sub_480240(int *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5)
{
  int *v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+8h] [bp-4h]@3

  v5 = a1;
  if ( a5 < 84 )
  {
    v6 = a1[a5 + 2];
    if ( v6 )
    {
      if ( *(_DWORD *)(v6 + 32) )
      {
        if ( CPlayer::RemoveItem(*a1, a2, a3, a4, 9, 362, 1) || CPlayer::RemoveItem(*v5, a2, a3, a4, 9, 502, 1) )
        {
          if ( (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 48))(v6, *v5) )
            sub_401020(v6);
        }
      }
    }
  }
}

//----- (004802D0) --------------------------------------------------------
void __thiscall sub_4802D0(void *this)
{
  void *v1; // [sp+0h] [bp-10h]@1
  int v2; // [sp+8h] [bp-8h]@4
  signed int i; // [sp+Ch] [bp-4h]@1

  v1 = this;
  for ( i = 0; i < 84; ++i )
  {
    v2 = *((_DWORD *)v1 + i + 2);
    if ( v2 )
    {
      if ( *(_DWORD *)(v2 + 32) )
      {
        if ( (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 48))(v2, *(_DWORD *)v1) )
          sub_401020(v2);
      }
    }
  }
}

//----- (00480340) --------------------------------------------------------
void __thiscall sub_480340(void *this, int a2)
{
  int v2; // [sp+8h] [bp-4h]@1

  v2 = *((_DWORD *)this + a2 + 2);
  if ( v2 )
  {
    if ( (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 48))(v2, *(_DWORD *)this) )
      sub_401020(v2);
  }
}

//----- (00480390) --------------------------------------------------------
int __thiscall sub_480390(void *this, signed int a2, int a3)
{
  int result; // eax@2
  int v4; // [sp+4h] [bp-4h]@3

  if ( a2 < 64 )
  {
    v4 = *((_DWORD *)this + a2 + 2);
    if ( v4 )
      result = (*(int (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v4 + 64))(v4, *(_DWORD *)this, a3);
    else
      result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (004803E0) --------------------------------------------------------
void __usercall sub_4803E0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-28h]@1
  int v5; // [sp+14h] [bp-14h]@21
  int v6; // [sp+18h] [bp-10h]@12
  int v7; // [sp+1Ch] [bp-Ch]@15
  int v8; // [sp+20h] [bp-8h]@4
  signed int i; // [sp+24h] [bp-4h]@1

  v4 = a1;
  for ( i = 0; i < 84; ++i )
  {
    v8 = *(_DWORD *)(v4 + 4 * i + 8);
    if ( v8 )
    {
      if ( *(_DWORD *)(v8 + 32) )
      {
        if ( (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 48))(v8, *(_DWORD *)v4) )
          sub_401020(v8);
      }
    }
  }
  if ( *(_DWORD *)(*(_DWORD *)v4 + 460) )
  {
    if ( *(_DWORD *)(*(_DWORD *)v4 + 460) == 1 )
    {
      if ( *(_DWORD *)(*(_DWORD *)v4 + 464) & 4 )
      {
        v5 = *(_DWORD *)(v4 + 252);
        if ( v5 )
        {
          if ( sub_481150(v5, a2, a3, a4, *(_DWORD *)v4) )
            sub_401020(v5);
        }
      }
    }
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)v4 + 464) & 4 )
    {
      v6 = *(_DWORD *)(v4 + 80);
      if ( v6 )
      {
        if ( sub_481150(v6, a2, a3, a4, *(_DWORD *)v4) )
          sub_401020(v6);
      }
      v7 = *(_DWORD *)(v4 + 148);
      if ( v7 )
      {
        if ( sub_481150(v7, a2, a3, a4, *(_DWORD *)v4) )
          sub_401020(v7);
      }
    }
  }
  sub_4800E0((void *)v4, a2, a3, a4);
}

//----- (00480540) --------------------------------------------------------
void __usercall sub_480540(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  void *v4; // eax@29
  int v5; // [sp+0h] [bp-4Ch]@1
  char v6; // [sp+8h] [bp-44h]@29
  int v7; // [sp+Ch] [bp-40h]@29
  int v8; // [sp+10h] [bp-3Ch]@28
  int v9; // [sp+14h] [bp-38h]@23
  int v10; // [sp+18h] [bp-34h]@20
  int v11; // [sp+1Ch] [bp-30h]@17
  int v12; // [sp+20h] [bp-2Ch]@14
  int v13; // [sp+24h] [bp-28h]@8
  int v14; // [sp+28h] [bp-24h]@33
  int v15; // [sp+2Ch] [bp-20h]@26
  char v16; // [sp+30h] [bp-1Ch]@29
  int v17; // [sp+34h] [bp-18h]@21
  int v18; // [sp+38h] [bp-14h]@12
  int v19; // [sp+3Ch] [bp-10h]@15
  int v20; // [sp+40h] [bp-Ch]@18
  int v21; // [sp+44h] [bp-8h]@4
  int i; // [sp+48h] [bp-4h]@1

  v5 = a1;
  for ( i = 0; i < 84; ++i )
  {
    v21 = *(_DWORD *)(v5 + 4 * i + 8);
    if ( v21 )
    {
      if ( *(_DWORD *)(v21 + 32) )
      {
        if ( (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v21 + 48))(v21, *(_DWORD *)v5) )
        {
          v13 = v21;
          sub_401020(v21);
        }
      }
    }
  }
  if ( *(_DWORD *)(*(_DWORD *)v5 + 460) )
  {
    if ( *(_DWORD *)(*(_DWORD *)v5 + 460) == 1 )
    {
      v15 = *(_DWORD *)(v5 + 24);
      (*(void (__cdecl **)(_DWORD, signed int, signed int, int))(**(_DWORD **)v5 + 88))(
        *(_DWORD *)v5,
        24,
        1,
        *(_DWORD *)(v15 + 8) - 1);
      if ( v15 )
      {
        if ( sub_481150(v15, a2, a3, a4, *(_DWORD *)v5) )
        {
          v8 = v15;
          sub_401020(v15);
        }
      }
      v7 = (*(_DWORD *)(v5 + 4) << 16) + 4;
      sub_446130((int)&unk_4E218C, (int)&v16, (int)&v7);
      v4 = sub_430C20((int)&unk_4E218C, &v6);
      if ( !(unsigned __int8)unknown_libname_8(v4) )
      {
        v15 = *(_DWORD *)(sub_420250((int *)&v16) + 4);
        v15 = (int)sub_47F760((void *)v15);
        sub_47F780(v15, 4, 1);
        (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v15 + 8))(v15, *(_DWORD *)v5, 0, 0);
        *(_DWORD *)(v5 + 24) = v15;
        CPlayer::Write(a2, a3, a4, *(_DWORD *)v5, 81, (unsigned int)"bb");
        CDBSocket::Write(a2, a3, a4, 9, (unsigned int)"dbw");
      }
      if ( *(_DWORD *)(*(_DWORD *)v5 + 464) & 4 )
      {
        v14 = *(_DWORD *)(v5 + 252);
        if ( v14 )
        {
          if ( sub_481150(v14, a2, a3, a4, *(_DWORD *)v5) )
            sub_401020(v14);
        }
      }
    }
  }
  else
  {
    if ( *(_DWORD *)(*(_DWORD *)v5 + 464) & 4 )
    {
      v18 = *(_DWORD *)(v5 + 80);
      if ( v18 )
      {
        if ( sub_481150(v18, a2, a3, a4, *(_DWORD *)v5) )
        {
          v12 = v18;
          sub_401020(v18);
        }
      }
      v19 = *(_DWORD *)(v5 + 148);
      if ( v19 )
      {
        if ( sub_481150(v19, a2, a3, a4, *(_DWORD *)v5) )
        {
          v11 = v19;
          sub_401020(v19);
        }
      }
      v20 = *(_DWORD *)(v5 + 24);
      if ( v19 )
      {
        if ( sub_481150(v19, a2, a3, a4, *(_DWORD *)v5) )
        {
          v10 = v20;
          sub_401020(v20);
        }
      }
      v17 = *(_DWORD *)(v5 + 32);
      if ( v19 )
      {
        if ( sub_481150(v19, a2, a3, a4, *(_DWORD *)v5) )
        {
          v9 = v17;
          sub_401020(v17);
        }
      }
    }
  }
  sub_4800E0((void *)v5, a2, a3, a4);
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00480830) --------------------------------------------------------
int __thiscall sub_480830(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48D680((void *)(this + 8));
  *(_DWORD *)v2 = 0;
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 20) = 0;
  return v2;
}

//----- (00480870) --------------------------------------------------------
int __thiscall sub_480870(void *this)
{
  void *v1; // eax@2
  int v2; // eax@3
  void *v4; // [sp+0h] [bp-10h]@1
  char v5; // [sp+4h] [bp-Ch]@2
  char v6; // [sp+8h] [bp-8h]@3
  char v7; // [sp+Ch] [bp-4h]@1

  v4 = this;
  sub_40F070((int)((char *)this + 8), &v7);
  while ( 1 )
  {
    v1 = sub_430C20((int)((char *)v4 + 8), &v5);
    if ( !(unsigned __int8)sub_47D070(v1) )
      break;
    v2 = sub_420250((int *)&v7);
    sub_48D900(*(_DWORD *)(v2 + 4));
    sub_446090((int *)&v7, (int)&v6, 0);
  }
  return sub_4808E0((int)((char *)v4 + 8));
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (004808E0) --------------------------------------------------------
int __thiscall sub_4808E0(int this)
{
  return sub_48D6B0(this);
}

//----- (00480900) --------------------------------------------------------
void __cdecl CPlayerSkill::UpperChanceStone()
{
  dword_4E2188 = 41;
}
// 4E2188: using guessed type int dword_4E2188;

//----- (00480910) --------------------------------------------------------
int __cdecl sub_480910()
{
  int result; // eax@1
  int i; // [sp+4h] [bp-8h]@1
  int v2; // [sp+8h] [bp-4h]@1

  result = dword_4E2188;
  v2 = dword_4E2188;
  dword_4E2188 = 0;
  for ( i = 0; i < v2; ++i )
    sub_401020(dword_4E2690[i]);
  return result;
}
// 4E2188: using guessed type int dword_4E2188;
// 4E2690: using guessed type int dword_4E2690[];

//----- (00480970) --------------------------------------------------------
signed int __thiscall sub_480970(int this, int a2)
{
  signed int result; // eax@2
  void *v3; // eax@3
  int v4; // [sp+0h] [bp-14h]@1
  char v5; // [sp+4h] [bp-10h]@3
  int v6; // [sp+8h] [bp-Ch]@3
  int v7; // [sp+Ch] [bp-8h]@5
  char v8; // [sp+10h] [bp-4h]@3

  v4 = this;
  if ( *(_DWORD *)(this + 4) )
  {
    result = 0;
  }
  else
  {
    v6 = a2;
    sub_446130(this + 8, (int)&v8, (int)&v6);
    v3 = sub_430C20(v4 + 8, &v5);
    if ( (unsigned __int8)unknown_libname_8(v3) )
    {
      result = 0;
    }
    else
    {
      v7 = *(_DWORD *)(sub_420250((int *)&v8) + 4);
      if ( GetTickCount() >= *(_DWORD *)(v7 + 64) )
      {
        *(_DWORD *)(v4 + 4) = v7;
        result = 1;
      }
      else
      {
        result = 0;
      }
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00480A00) --------------------------------------------------------
signed int __thiscall sub_480A00(int this)
{
  signed int result; // eax@2
  void *v2; // eax@3
  int v3; // [sp+0h] [bp-10h]@1
  char v4; // [sp+4h] [bp-Ch]@3
  int v5; // [sp+8h] [bp-8h]@5
  char v6; // [sp+Ch] [bp-4h]@3

  v3 = this;
  if ( *(_DWORD *)(this + 4) )
  {
    result = 0;
  }
  else
  {
    sub_40F070(this + 8, &v6);
    v2 = sub_430C20(v3 + 8, &v4);
    if ( (unsigned __int8)unknown_libname_8(v2) )
    {
      result = 0;
    }
    else
    {
      v5 = *(_DWORD *)(sub_420250((int *)&v6) + 4);
      if ( GetTickCount() >= *(_DWORD *)(v5 + 64) )
      {
        *(_DWORD *)(v3 + 4) = v5;
        result = 1;
      }
      else
      {
        result = 0;
      }
    }
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00480A80) --------------------------------------------------------
int __thiscall sub_480A80(void *this, int a2)
{
  int result; // eax@3
  void *v3; // eax@3
  int v4; // eax@4
  int v5; // edx@4
  int v6; // eax@6
  void *v7; // [sp+0h] [bp-34h]@1
  int v8; // [sp+4h] [bp-30h]@6
  char v9; // [sp+8h] [bp-2Ch]@6
  char v10; // [sp+10h] [bp-24h]@3
  char v11; // [sp+14h] [bp-20h]@2
  char v12; // [sp+18h] [bp-1Ch]@6
  char v13; // [sp+1Ch] [bp-18h]@6
  int v14; // [sp+20h] [bp-14h]@6
  int v15; // [sp+24h] [bp-10h]@4
  int v16; // [sp+28h] [bp-Ch]@4
  char v17; // [sp+2Ch] [bp-8h]@1
  int v18; // [sp+30h] [bp-4h]@1

  v7 = this;
  v18 = *(_DWORD *)(a2 + 440) + 288;
  sub_430C20(v18, &v17);
  while ( 1 )
  {
    v3 = sub_445B40(v18, &v10);
    result = sub_47D070(v3);
    if ( !(_BYTE)result )
      break;
    v4 = sub_420010();
    v5 = *(_DWORD *)(v4 + 4);
    v15 = *(_DWORD *)v4;
    v16 = v5;
    if ( v15 < dword_4E2188 )
    {
      v14 = (int)sub_47F760((void *)dword_4E2690[v15]);
      sub_47F780(v14, v15, v16);
      v8 = v15;
      v6 = sub_420990((int)&v9, (int)&v8, (int)&v14);
      sub_48D6D0((int)((char *)v7 + 8), (int)&v12, v6);
      if ( !v13 )
        sub_48D900(v14);
    }
    sub_430E30(&v17, (int)&v11, 0);
  }
  *(_DWORD *)v7 = a2;
  return result;
}
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);
// 4E2188: using guessed type int dword_4E2188;
// 4E2690: using guessed type int dword_4E2690[];

//----- (00480B70) --------------------------------------------------------
signed int __userpurge sub_480B70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+4h] [bp-10h]@1
  DWORD v7; // [sp+10h] [bp-4h]@1

  v6 = a1;
  v7 = GetTickCount();
  if ( v7 < *(_DWORD *)(*(_DWORD *)v6 + 468) || !*(_DWORD *)(v6 + 4) )
    return 0;
  if ( *(_DWORD *)(v6 + 20) )
  {
    if ( v7 >= *(_DWORD *)(v6 + 20) )
      return 1;
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(v6 + 4) + 68))(*(_DWORD *)(v6 + 4), *(_DWORD *)v6);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(*(_DWORD *)v6);
    if ( a5 )
      std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, *(_DWORD *)v6, 61, (unsigned int)"dbbd");
    *(_DWORD *)(v6 + 20) = *(_DWORD *)(*(_DWORD *)(v6 + 4) + 40) + v7;
  }
  return 0;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00480C50) --------------------------------------------------------
int __userpurge sub_480C50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( a5 )
  {
    sub_423980(a5, a2, a3, a4, (volatile LONG *)(a5 + 352));
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v6 + 4) + 72))(
      *(_DWORD *)(v6 + 4),
      *(_DWORD *)v6,
      a5);
    sub_4239C0(a5, a2, a3, a4, a5 + 352);
  }
  else
  {
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(a1 + 4) + 72))(*(_DWORD *)(a1 + 4), *(_DWORD *)a1, 0);
  }
  return CMonsterSkill::Close(v6);
}

//----- (00480CD0) --------------------------------------------------------
int __thiscall CMonsterSkill::Close(int this)
{
  int result; // eax@1

  result = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 20) = 0;
  return result;
}

//----- (00480CF0) --------------------------------------------------------
int __userpurge sub_480CF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( a5 )
  {
    sub_423980(a5, a2, a3, a4, (volatile LONG *)(a5 + 352));
    (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v6 + 4) + 72))(
      *(_DWORD *)(v6 + 4),
      *(_DWORD *)v6,
      a5);
    result = sub_4239C0(a5, a2, a3, a4, a5 + 352);
  }
  return result;
}

//----- (00480D40) --------------------------------------------------------
int __thiscall sub_480D40(int this)
{
  *(_DWORD *)this = &off_4BDD60;
  *(_DWORD *)(this + 4) = -1;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 52) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 68) = 0;
  *(_DWORD *)(this + 72) = 0;
  return this;
}
// 4BDD60: using guessed type int (__stdcall *off_4BDD60)(int, int);

//----- (00480E10) --------------------------------------------------------
signed int __thiscall sub_480E10(int this, int a2)
{
  signed int v3; // [sp+0h] [bp-8h]@2

  if ( *(_DWORD *)(this + 44) )
    v3 = *(_DWORD *)(this + 44);
  else
    v3 = 1;
  return v3;
}

//----- (00480E40) --------------------------------------------------------
bool __thiscall CMonsterSkill::LoadSkill(int this, int a2, int a3)
{
  return a2 >= *(_DWORD *)(this + 12) && *(_DWORD *)(this + 16) & a3;
}

//----- (00480E80) --------------------------------------------------------
bool __thiscall sub_480E80(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0)
      && (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 176))(a2, a3, 0);
}

//----- (00480F20) --------------------------------------------------------
int __thiscall sub_480F20(void *this, int a2)
{
  void *v2; // ST08_4@1
  int v4; // [sp+0h] [bp-14h]@2
  DWORD v5; // [sp+8h] [bp-Ch]@1
  int v6; // [sp+Ch] [bp-8h]@1
  DWORD v7; // [sp+10h] [bp-4h]@1

  v2 = this;
  v6 = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)this + 36))(a2);
  v7 = GetTickCount();
  v5 = *((_DWORD *)v2 + 16);
  *((_DWORD *)v2 + 16) = v6 + v7;
  if ( v7 >= v5 )
    v4 = v6;
  else
    v4 = v7 + v6 - v5;
  return v4;
}

//----- (00480F80) --------------------------------------------------------
bool __stdcall sub_480F80(int a1, int a2)
{
  int v3; // [sp+4h] [bp-4h]@1
  int v4; // [sp+4h] [bp-4h]@4

  v3 = *(_DWORD *)(a1 + 60) - *(_DWORD *)(a2 + 60);
  if ( v3 <= 0 )
  {
    if ( v3 < -9 )
      v3 = -9;
    v4 = abs(v3);
  }
  else
  {
    if ( v3 > 3 )
      v3 = 3;
    v4 = v3 + 10;
  }
  return dword_4D8CAC[v4] >= sub_406E10(1, 100);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 4D8CAC: using guessed type int dword_4D8CAC[];

//----- (00481000) --------------------------------------------------------
bool __thiscall sub_481000(int this, int a2)
{
  bool result; // eax@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
    result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 12) + *(_DWORD *)(this + 8) - 1;
  else
    result = 0;
  return result;
}

//----- (00481040) --------------------------------------------------------
int __thiscall sub_481040(void *this, int a2)
{
  int v3; // eax@1

  v3 = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)this + 32))(0);
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 0, v3);
}

//----- (00481070) --------------------------------------------------------
signed int __userpurge sub_481070<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST1C_4@1
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-8h]@1

  v7 = a1;
  v5 = *(int *)((char *)&dword_4D8D00[96 * *(_DWORD *)(a5 + 460)] + 4 * *(_DWORD *)(a1 + 4));
  (*(void (__stdcall **)(int, _DWORD, signed int))(*(_DWORD *)a1 + 8))(
    a5,
    *(int *)((char *)&dword_4D8D00[96 * *(_DWORD *)(a5 + 460)] + 4 * *(_DWORD *)(a1 + 4)),
    1);
  (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 88))(a5, 24, 1, *(_DWORD *)(v7 + 8) - v5);
  *(_DWORD *)(v7 + 8) = v5;
  CPlayer::Write(a2, a3, a4, a5, 11, (unsigned int)"bb");
  CDBSocket::Write(a2, a3, a4, 22, (unsigned int)"dbbw");
  if ( v5 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)(a5 + 4 * *(_DWORD *)(v7 + 4) + 632) = 0;
    result = 1;
  }
  return result;
}
// 4D8D00: using guessed type int dword_4D8D00[];

//----- (00481150) --------------------------------------------------------
signed int __userpurge sub_481150<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST1C_4@1
  signed int result; // eax@2
  int v7; // [sp+0h] [bp-8h]@1

  v7 = a1;
  v5 = *(int *)((char *)&dword_4D8D00[96 * *(_DWORD *)(a5 + 460)] + 4 * *(_DWORD *)(a1 + 4));
  (*(void (__stdcall **)(int, _DWORD, signed int))(*(_DWORD *)a1 + 8))(
    a5,
    *(int *)((char *)&dword_4D8D00[96 * *(_DWORD *)(a5 + 460)] + 4 * *(_DWORD *)(a1 + 4)),
    1);
  *(_DWORD *)(v7 + 8) = v5;
  CPlayer::Write(a2, a3, a4, a5, 11, (unsigned int)"bb");
  CDBSocket::Write(a2, a3, a4, 22, (unsigned int)"dbbw");
  if ( v5 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)(a5 + 4 * *(_DWORD *)(v7 + 4) + 632) = 0;
    result = 1;
  }
  return result;
}
// 4D8D00: using guessed type int dword_4D8D00[];

//----- (00481210) --------------------------------------------------------
int __userpurge sub_481210<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int64 v7; // qax@2
  int v9; // [sp+20h] [bp-8h]@1
  char v10; // [sp+27h] [bp-1h]@1

  v9 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"b");
  if ( v10 )
  {
    v7 = CChar::IsMState(a5, 1i64);
    if ( !v7 )
    {
      LODWORD(v7) = v9;
      if ( *(_DWORD *)(a5 + 276) >= *(_DWORD *)(v9 + 36) )
      {
        LODWORD(v7) = CPlayer::IsWearBuffStandard(a5);
        if ( !(_DWORD)v7 )
        {
          if ( CChar::IsMState(a5, 8i64) )
            CChar::CancelBuff(a5, a2, a3, a4, 2);
          if ( CChar::IsMState(a5, 8192i64) )
            CChar::CancelBuff(a5, a2, a3, a4, 12);
          (*(void (__thiscall **)(int, signed int, _DWORD))(*(_DWORD *)a5 + 104))(a5, 1, 0);
          CPlayer::Rest(a5, a2, a3, a4, 0);
          LODWORD(v7) = (*(int (__cdecl **)(int, signed int, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(
                          a5,
                          8,
                          0,
                          *(_DWORD *)(v9 + 36));
        }
      }
    }
  }
  else
  {
    v7 = CChar::IsMState(a5, 1i64);
    if ( v7 )
      LODWORD(v7) = (*(int (__thiscall **)(int, signed int, _DWORD))(*(_DWORD *)a5 + 124))(a5, 1, 0);
  }
  return v7;
}

//----- (00481330) --------------------------------------------------------
bool __stdcall sub_481330(int a1, int a2)
{
  return CChar::IsNormal(a1)
      && *(_DWORD *)(a1 + 316) == *(_DWORD *)(a2 + 316)
      && CPlayer::IsWState(a1, 0)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 64))(a2)
      && CChar::IsGState(a2, 1);
}

//----- (004813A0) --------------------------------------------------------
int __userpurge sub_4813A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  signed int v8; // eax@4
  signed int v9; // eax@4
  int v10; // [sp+0h] [bp-10h]@1
  int v11; // [sp+4h] [bp-Ch]@1
  int v12; // [sp+Ch] [bp-4h]@1

  v10 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  result = CMonster::FindMonster(a2, a3, a4, v11);
  v12 = result;
  if ( result )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v10)(v10, a5, v12) )
    {
      v8 = CChar::GetMaxHP(a5);
      (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 88))(a5, 7, 1, v8 / 10);
      v9 = CChar::GetMaxMP(a5);
      (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 88))(a5, 8, 1, v9 / 10);
      CChar::SetDirection(
        (void *)a5,
        *(_DWORD *)(v12 + 332) - *(_DWORD *)(a5 + 332),
        *(_DWORD *)(v12 + 336) - *(_DWORD *)(a5 + 336));
      std___Mpunct_wchar_t___do_frac_digits(v12);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
      std___Mpunct_wchar_t___do_frac_digits(v12);
      CChar::WriteInSight(a2, a3, a4, v12, 61, (unsigned int)"db");
      CBase::Delete((void *)v12);
    }
    result = sub_4239C0(v12, a2, a3, a4, v12 + 352);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (004814F0) --------------------------------------------------------
int __thiscall sub_4814F0(int this, int a2, signed int a3, int a4)
{
  int result; // eax@2
  int v5; // [sp+0h] [bp-4h]@1

  v5 = this;
  if ( a4 )
  {
    *(_DWORD *)(a2 + 120) -= *(_DWORD *)(this + 8) / 2;
    *(_DWORD *)(a2 + 132) -= *(_DWORD *)(this + 8) / 2 + 1;
    *(_DWORD *)(a2 + 128) -= *(_DWORD *)(this + 8) / 2 + 1;
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 1, a3 / 2);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 12, 1, a3 / 2 + 1);
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 11, 1, a3 / 2 + 1);
  }
  else
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 1, *(_DWORD *)(this + 8) / 2);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 12, 1, *(_DWORD *)(v5 + 8) / 2 + 1);
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               11,
               1,
               *(_DWORD *)(v5 + 8) / 2 + 1);
  }
  return result;
}

//----- (00481630) --------------------------------------------------------
int __thiscall sub_481630(int this, int a2, signed int a3, int a4)
{
  int result; // eax@2
  int v5; // [sp+0h] [bp-4h]@1

  v5 = this;
  if ( a4 )
  {
    *(_DWORD *)(a2 + 132) -= *(_DWORD *)(this + 8);
    *(_DWORD *)(a2 + 128) -= *(_DWORD *)(this + 8) / 2;
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 12, 1, a3);
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 11, 1, a3 / 2);
  }
  else
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 12, 1, *(_DWORD *)(this + 8));
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               11,
               1,
               *(_DWORD *)(v5 + 8) / 2);
  }
  return result;
}

//----- (004816F0) --------------------------------------------------------
int __thiscall CBehead::CanExcute(int this, int a2, int a3, int a4)
{
  int result; // eax@2

  if ( a4 )
  {
    *(_DWORD *)(a2 + 120) -= 2 * *(_DWORD *)(this + 8);
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 9, 1, 2 * a3);
  }
  else
  {
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               9,
               1,
               2 * *(_DWORD *)(this + 8));
  }
  return result;
}

//----- (00481750) --------------------------------------------------------
int __userpurge sub_481750<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  DWORD v8; // esi@11
  int v9; // [sp+8h] [bp-28h]@1
  int v10; // [sp+Ch] [bp-24h]@11
  int v11; // [sp+10h] [bp-20h]@11
  int v12; // [sp+14h] [bp-1Ch]@11
  int v13; // [sp+18h] [bp-18h]@11
  int v14; // [sp+1Ch] [bp-14h]@11
  int v15; // [sp+20h] [bp-10h]@11
  int v16; // [sp+24h] [bp-Ch]@4
  char v17; // [sp+2Bh] [bp-5h]@1
  int v18; // [sp+2Ch] [bp-4h]@1

  v9 = a1;
  result = (int)sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v18 = 0;
  if ( v17 )
  {
    if ( v17 == 1 )
    {
      result = CMonster::FindMonster(a2, a3, a4, v16);
      v18 = result;
    }
  }
  else
  {
    result = sub_450810(a2, a3, a4, v16);
    v18 = result;
  }
  if ( v18 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v9)(v9, a5, v18) )
    {
      v15 = sub_480F20((void *)v9, a5);
      v8 = GetTickCount();
      a4 = CChar::GetASpeed(a5) + v8;
      *(_DWORD *)(a5 + 1448) = a4;
      CChar::SetDirection(
        (void *)a5,
        *(_DWORD *)(v18 + 332) - *(_DWORD *)(a5 + 332),
        *(_DWORD *)(v18 + 336) - *(_DWORD *)(a5 + 336));
      v12 = 0;
      v11 = 0;
      v10 = 0;
      v14 = 0;
      v13 = 0;
      v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v18 + 148))(v18, a5);
      if ( !v13 )
      {
        v14 = (*(int (__thiscall **)(int, int, int, int, int *, int *, int *))(*(_DWORD *)v9 + 80))(
                v9,
                a5,
                v18,
                v15,
                &v12,
                &v10,
                &v11);
        if ( !v14 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v18 + 80))(v18, a5);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 56))(v9, a5);
      std___Mpunct_wchar_t___do_frac_digits(v18);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
    }
    else
    {
      if ( *(_DWORD *)(v9 + 40) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
    }
    result = sub_4239C0(v18, a2, a3, a4, v18 + 352);
  }
  else
  {
    if ( *(_DWORD *)(v9 + 40) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00481970) --------------------------------------------------------
int __stdcall sub_481970(int a1)
{
  int result; // eax@1

  result = a1;
  if ( *(_DWORD *)(a1 + 184) < 5 )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 92))(a1, 36, 1, 1);
  return result;
}

//----- (004819A0) --------------------------------------------------------
bool __thiscall sub_4819A0(void *this, int a2, int a3)
{
  return sub_480E80(this, a2, a3) && CPlayer::IsWState(a2, 12);
}

//----- (004819F0) --------------------------------------------------------
int __userpurge CUpBow::ExcutePassive<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, unsigned int a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  DWORD v8; // esi@11
  int v9; // eax@35
  unsigned int v10; // ST34_4@35
  int v11; // [sp+4h] [bp-54h]@26
  int v12; // [sp+Ch] [bp-4Ch]@1
  int v13; // [sp+14h] [bp-44h]@34
  int v14; // [sp+18h] [bp-40h]@34
  int v15; // [sp+1Ch] [bp-3Ch]@34
  int v16; // [sp+20h] [bp-38h]@28
  int v17; // [sp+24h] [bp-34h]@11
  int v18; // [sp+28h] [bp-30h]@16
  int v19; // [sp+2Ch] [bp-2Ch]@16
  int v20; // [sp+30h] [bp-28h]@16
  int v21; // [sp+34h] [bp-24h]@16
  int v22; // [sp+38h] [bp-20h]@16
  int v23; // [sp+3Ch] [bp-1Ch]@11
  int v24; // [sp+40h] [bp-18h]@11
  int v25; // [sp+44h] [bp-14h]@11
  int v26; // [sp+48h] [bp-10h]@11
  int v27; // [sp+4Ch] [bp-Ch]@4
  char v28; // [sp+53h] [bp-5h]@1
  int v29; // [sp+54h] [bp-4h]@1

  v12 = a1;
  result = (int)sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v29 = 0;
  if ( v28 )
  {
    if ( v28 == 1 )
    {
      result = CMonster::FindMonster(a2, a3, a4, v27);
      v29 = result;
    }
  }
  else
  {
    result = sub_450810(a2, a3, a4, v27);
    v29 = result;
  }
  if ( v29 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v12)(v12, a5, v29) )
    {
      v26 = sub_480F20((void *)v12, a5);
      v8 = GetTickCount();
      a4 = CChar::GetASpeed(a5) + v8;
      *(_DWORD *)(a5 + 1448) = a4;
      CChar::SetDirection(
        (void *)a5,
        *(_DWORD *)(v29 + 332) - *(_DWORD *)(a5 + 332),
        *(_DWORD *)(v29 + 336) - *(_DWORD *)(a5 + 336));
      v24 = 0;
      v23 = 0;
      v17 = *(_DWORD *)(v29 + 332) - *(_DWORD *)(a5 + 332);
      v25 = *(_DWORD *)(v29 + 336) - *(_DWORD *)(a5 + 336);
      if ( v17 )
      {
        if ( v25 )
        {
          v23 = *(_DWORD *)(a5 + 336) + v17 * *(_DWORD *)(a5 + 332) / v25;
          v24 = v23 - v17 * *(_DWORD *)(v29 + 332) / v25 - *(_DWORD *)(v29 + 336);
        }
        else
        {
          v24 = *(_DWORD *)(v29 + 332) - *(_DWORD *)(a5 + 332);
        }
      }
      else
      {
        v24 = *(_DWORD *)(v29 + 336) - *(_DWORD *)(a5 + 336);
      }
      v19 = 0;
      v20 = sub_4935A0(*(_DWORD *)(a5 + 320), a2, a3, a4, v29 + 324, 1);
      v22 = 0;
      v18 = 0;
      v21 = 0;
      while ( v20 )
      {
        v19 = unknown_libname_7();
        if ( (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a5 + 176))(a5, v19, 0) )
        {
          if ( sub_448870(a5 + 332, v19 + 332) <= *(_DWORD *)(a5 + 312) )
          {
            if ( v17 && v25 )
            {
              v16 = v23 - v17 * *(_DWORD *)(v19 + 332) / v25 - *(_DWORD *)(v19 + 336);
            }
            else
            {
              if ( v17 )
                v11 = *(_DWORD *)(v19 + 332) - *(_DWORD *)(a5 + 332);
              else
                v11 = *(_DWORD *)(v19 + 336) - *(_DWORD *)(a5 + 336);
              v16 = v11;
            }
            if ( !((v16 ^ v24) >> 31) )
            {
              if ( CChar::IsNormal(v19) )
              {
                if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v19 + 316) )
                {
                  v13 = 0;
                  v15 = 0;
                  v14 = 0;
                  v14 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v29 + 148))(v29, a5);
                  if ( !v14 )
                  {
                    v9 = CChar::GetAttack(a5);
                    a4 = v26 * (v9 + *(_DWORD *)(v12 + 8) * 10 * v9 / 100);
                    v10 = a4 / (*(int (__thiscall **)(int, int))(*(_DWORD *)v12 + 36))(v12, a5);
                    v15 = (*(int (__thiscall **)(int, int, unsigned int, int *, int *, int *, int))(*(_DWORD *)v19 + 72))(
                            v19,
                            a5,
                            v10,
                            &v22,
                            &v13,
                            &v18,
                            v12);
                    if ( !v15 )
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)v19 + 80))(v19, a5);
                    if ( v22 > 0 )
                    {
                      v21 = 1;
                      std___Mpunct_wchar_t___do_frac_digits(v19);
                      std___Mpunct_wchar_t___do_frac_digits(a5);
                      CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
                    }
                  }
                }
              }
            }
          }
        }
        v20 = CBaseList::Pop(v20, a2, a3, a4);
      }
      if ( v21 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v12 + 88))(v12, a5);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v12 + 56))(v12, a5);
      std___Mpunct_wchar_t___do_frac_digits(v29);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      if ( *(_DWORD *)(v12 + 40) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
    }
    result = sub_4239C0(v29, a2, a3, a4, v29 + 352);
  }
  else
  {
    if ( *(_DWORD *)(v12 + 40) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00481E80) --------------------------------------------------------
char __thiscall sub_481E80(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 58;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 62;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 66;
        break;
      case 4:
        result = *(_DWORD *)(a2 + 60) >= 69;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00481F10) --------------------------------------------------------
int __thiscall sub_481F10(int this, int a2)
{
  return *(_DWORD *)(this + 44) + CChar::GetASpeed(a2);
}

//----- (00481F30) --------------------------------------------------------
signed int __userpurge sub_481F30<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 7);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00481F60) --------------------------------------------------------
int __thiscall sub_481F60(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+0h] [bp-Ch]@2
  int v6; // [sp+4h] [bp-8h]@1

  v6 = this;
  v3 = 7 * *(_DWORD *)(this + 8) * CChar::GetDex(a2);
  if ( (((BYTE4(v3) & 3) + (_DWORD)v3) >> 2) / 2 + 50 >= 70 * *(_DWORD *)(v6 + 8) + 200 )
    v5 = 70 * *(_DWORD *)(v6 + 8) + 200;
  else
    v5 = (((BYTE4(v3) & 3) + (_DWORD)v3) >> 2) / 2 + 50;
  return v5 + a3;
}
// 43BF20: using guessed type int __thiscall CChar::GetDex(_DWORD);

//----- (00481FD0) --------------------------------------------------------
signed int __userpurge sub_481FD0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 9);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00482000) --------------------------------------------------------
int __thiscall sub_482000(void *this, void *a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  int v8; // eax@1
  int result; // eax@2
  unsigned int v10; // esi@2
  unsigned int v11; // eax@2
  void *v12; // [sp+4h] [bp-8h]@1
  int v13; // [sp+8h] [bp-4h]@1

  v12 = this;
  v7 = CChar::GetAttack(a2);
  v13 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v12 + 16))(v12, a2, v7);
  v8 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v12 + 84))(v12);
  if ( CChar::CheckHit(a2, a3, v8) )
  {
    v10 = a4 * (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 168))(a2, a3);
    *(_DWORD *)a7 = v10 / (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v12 + 36))(v12, a2);
    v11 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v12 + 36))(
            v12,
            a2,
            a5,
            a6,
            a7,
            v12);
    result = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 72))(a3, a2, a4 * v13 / v11);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (004820C0) --------------------------------------------------------
signed int __userpurge sub_4820C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 14);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (004820F0) --------------------------------------------------------
int __thiscall sub_4820F0(int this, int a2)
{
  return *(_DWORD *)(this + 44) + CChar::GetASpeed(a2) - 100 * (*(_DWORD *)(this + 8) + 1) / 2;
}

//----- (00482130) --------------------------------------------------------
signed int __userpurge sub_482130<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 13);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00482160) --------------------------------------------------------
int __thiscall sub_482160(void *this, void *a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  int v8; // eax@1
  void *v9; // eax@3
  int v10; // ST14_4@3
  int result; // eax@4
  unsigned int v12; // esi@4
  unsigned int v13; // eax@4
  int v14; // [sp+4h] [bp-8h]@1
  int v15; // [sp+8h] [bp-4h]@1

  v14 = (int)this;
  v7 = CChar::GetAttack(a2);
  v15 = (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 16))(v14, a2, v7);
  v8 = (*(int (__thiscall **)(int))(*(_DWORD *)v14 + 84))(v14);
  if ( CChar::CheckHit(a2, a3, v8) )
  {
    if ( (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 40))(v14, a2, a3) )
    {
      v9 = CBuff::CreateBuff(7, *(_DWORD *)(v14 + 8), v10, v14);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v9);
    }
    v12 = a4 * (*(int (__thiscall **)(void *, int))(*(_DWORD *)a2 + 168))(a2, a3);
    *(_DWORD *)a7 = v12 / (*(int (__thiscall **)(int, void *))(*(_DWORD *)v14 + 36))(v14, a2);
    v13 = (*(int (__thiscall **)(int, void *, int, int, int, int))(*(_DWORD *)v14 + 36))(v14, a2, a5, a6, a7, v14);
    result = (*(int (__thiscall **)(int, void *, unsigned int))(*(_DWORD *)a3 + 72))(a3, a2, a4 * v15 / v13);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00482260) --------------------------------------------------------
int __thiscall sub_482260(void *this, void *a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  int v8; // eax@1
  unsigned int v9; // esi@2
  unsigned int v10; // eax@2
  int result; // eax@4
  void *v12; // [sp+4h] [bp-Ch]@1
  int v13; // [sp+8h] [bp-8h]@2
  int v14; // [sp+Ch] [bp-4h]@1

  v12 = this;
  v7 = CChar::GetAttack(a2);
  v14 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v12 + 16))(v12, a2, v7);
  v8 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v12 + 84))(v12);
  if ( CChar::CheckHit(a2, a3, v8) )
  {
    v9 = a4 * (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 168))(a2, a3);
    *(_DWORD *)a7 = v9 / (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v12 + 36))(v12, a2);
    v10 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v12 + 36))(
            v12,
            a2,
            a5,
            a6,
            a7,
            v12);
    v13 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 72))(a3, a2, a4 * v14 / v10);
    if ( *(_DWORD *)a5 )
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v12 + 88))(v12, a2);
    result = v13;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00482340) --------------------------------------------------------
int __thiscall sub_482340(int this, int a2, int a3)
{
  return a3 + a3 * (10 * *(_DWORD *)(this + 8) + 100) / 80;
}

//----- (00482370) --------------------------------------------------------
char __thiscall sub_482370(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 57;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 63;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 68;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004823E0) --------------------------------------------------------
bool __thiscall sub_4823E0(void *this, int a2, int a3)
{
  return sub_480E80(this, a2, a3) && *(_DWORD *)(a2 + 184) > 0;
}

//----- (00482430) --------------------------------------------------------
int __thiscall sub_482430(int this, int a2, int a3)
{
  return *(_DWORD *)(this + 8) * (5 * *(_DWORD *)(a2 + 184) + 25)
       + a3
       + 5 * *(_DWORD *)(a2 + 184)
       + 45
       + a3 * (20 * *(_DWORD *)(a2 + 184) + 2 * *(_DWORD *)(this + 8) + 8) / 50;
}

//----- (00482490) --------------------------------------------------------
int __thiscall sub_482490(void *this, int a2)
{
  int v3; // eax@1

  v3 = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)this + 32))(0);
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 8, 0, v3);
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 36, 0, *(_DWORD *)(a2 + 184));
}

//----- (004824E0) --------------------------------------------------------
char __thiscall sub_4824E0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 56;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 63;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 67;
        break;
      case 4:
        result = *(_DWORD *)(a2 + 60) >= 70;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00482570) --------------------------------------------------------
bool __thiscall sub_482570(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 1)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0)
      && (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 176))(a2, a3, 0);
}

//----- (00482610) --------------------------------------------------------
int __thiscall sub_482610(void *this, void *a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  int v8; // eax@1
  void *v9; // eax@3
  int v10; // ST14_4@3
  int result; // eax@4
  unsigned int v12; // esi@4
  unsigned int v13; // eax@4
  int v14; // [sp+4h] [bp-8h]@1
  int v15; // [sp+8h] [bp-4h]@1

  v14 = (int)this;
  v7 = CChar::GetAttack(a2);
  v15 = (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 16))(v14, a2, v7);
  v8 = (*(int (__thiscall **)(int))(*(_DWORD *)v14 + 84))(v14);
  if ( CChar::CheckHit(a2, a3, v8) )
  {
    if ( (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 40))(v14, a2, a3) )
    {
      v9 = CBuff::CreateBuff(7, 3 * *(_DWORD *)(v14 + 8), v10, v14);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v9);
    }
    v12 = a4 * (*(int (__thiscall **)(void *, int))(*(_DWORD *)a2 + 168))(a2, a3);
    *(_DWORD *)a7 = v12 / (*(int (__thiscall **)(int, void *))(*(_DWORD *)v14 + 36))(v14, a2);
    v13 = (*(int (__thiscall **)(int, void *, int, int, int, int))(*(_DWORD *)v14 + 36))(v14, a2, a5, a6, a7, v14);
    result = (*(int (__thiscall **)(int, void *, unsigned int))(*(_DWORD *)a3 + 72))(a3, a2, a4 * v15 / v13);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00482710) --------------------------------------------------------
int __thiscall sub_482710(int this, int a2, int a3)
{
  int v4; // [sp+0h] [bp-8h]@2

  if ( a3 * (10 * *(_DWORD *)(this + 8) + 60) / 100 >= 200 )
    v4 = 200;
  else
    v4 = a3 * (10 * *(_DWORD *)(this + 8) + 60) / 100;
  return v4 + a3;
}

//----- (00482770) --------------------------------------------------------
char __thiscall sub_482770(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 59;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 64;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 68;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004827E0) --------------------------------------------------------
bool __thiscall sub_4827E0(void *this, int a2, int a3)
{
  return sub_480E80(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 64))(a3);
}

//----- (00482830) --------------------------------------------------------
char *__userpurge sub_482830<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  char *result; // eax@1
  int v8; // ST28_4@9
  int v9; // eax@9
  int v10; // eax@9
  int v11; // [sp+4h] [bp-14h]@1
  int v12; // [sp+Ch] [bp-Ch]@4
  char v13; // [sp+13h] [bp-5h]@1
  int v14; // [sp+14h] [bp-4h]@1

  v11 = a1;
  result = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v14 = 0;
  if ( v13 )
  {
    if ( v13 == 1 )
    {
      result = (char *)CMonster::FindMonster(a2, a3, a4, v12);
      v14 = (int)result;
    }
  }
  else
  {
    result = (char *)sub_450810(a2, a3, a4, v12);
    v14 = (int)result;
  }
  if ( v14 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v14) )
    {
      CChar::Lock(v14, a2, a3, a4);
      v8 = v14;
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 24))(v11, 0);
      (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v8 + 212))(v8, a5, v9);
      CChar::Unlock(v14, a2, a3, a4);
      v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
      std___Mpunct_wchar_t___do_frac_digits(v14);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    result = (char *)sub_4239C0(v14, a2, a3, a4, v14 + 352);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00482960) --------------------------------------------------------
signed int __userpurge sub_482960<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 8);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00482990) --------------------------------------------------------
signed int __userpurge sub_482990<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  return sub_481070(a1, a2, a3, a4, a5);
}

//----- (004829B0) --------------------------------------------------------
int __thiscall sub_4829B0(int this, int a2, int a3)
{
  int result; // eax@2
  int v4; // [sp+4h] [bp-4h]@1

  v4 = *(_DWORD *)(a2 + 644);
  if ( v4 )
    result = 12 * *(_DWORD *)(this + 8) + a3 + (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v4 + 16))(v4, a2, 0);
  else
    result = 0;
  return result;
}

//----- (00482A00) --------------------------------------------------------
int __thiscall sub_482A00(void *this, void *a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  int v8; // eax@1
  unsigned int v9; // esi@2
  unsigned int v10; // eax@2
  void *v11; // eax@4
  int v12; // ST14_4@4
  int result; // eax@5
  int v14; // [sp+4h] [bp-Ch]@1
  int v15; // [sp+8h] [bp-8h]@2
  int v16; // [sp+Ch] [bp-4h]@1

  v14 = (int)this;
  v7 = CChar::GetAttack(a2);
  v16 = (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 16))(v14, a2, v7);
  v8 = (*(int (__thiscall **)(int))(*(_DWORD *)v14 + 84))(v14);
  if ( CChar::CheckHit(a2, a3, v8) )
  {
    v9 = a4 * (*(int (__thiscall **)(void *, int))(*(_DWORD *)a2 + 168))(a2, a3);
    *(_DWORD *)a7 = v9 / (*(int (__thiscall **)(int, void *))(*(_DWORD *)v14 + 36))(v14, a2);
    v10 = (*(int (__thiscall **)(int, void *, int, int, int, int))(*(_DWORD *)v14 + 36))(v14, a2, a5, a6, a7, v14);
    v15 = (*(int (__thiscall **)(int, void *, unsigned int))(*(_DWORD *)a3 + 72))(a3, a2, a4 * v16 / v10);
    if ( (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 40))(v14, a2, a3) )
    {
      if ( CChar::IsNormal(a3) )
      {
        v11 = CBuff::CreateBuff(7, *(_DWORD *)(v14 + 8) / 2 + 1, v12, v14);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v11);
      }
    }
    result = v15;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00482B20) --------------------------------------------------------
int __thiscall sub_482B20(int this, int a2, int a3)
{
  int result; // eax@2
  int v4; // [sp+4h] [bp-4h]@1

  v4 = *(_DWORD *)(a2 + 656);
  if ( v4 )
    result = 19 * *(_DWORD *)(this + 8) + a3 + (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v4 + 16))(v4, a2, 0);
  else
    result = 0;
  return result;
}

//----- (00482B70) --------------------------------------------------------
int __thiscall sub_482B70(int this, int a2, int a3)
{
  signed int v4; // [sp+0h] [bp-10h]@24
  int v5; // [sp+4h] [bp-Ch]@1
  DWORD v6; // [sp+8h] [bp-8h]@1
  int v7; // [sp+Ch] [bp-4h]@13

  v5 = this;
  v6 = GetTickCount() - *(_DWORD *)(this + 40);
  if ( v6 < 0x3E8 )
    return 0;
  if ( v6 >= 0x6A4 )
  {
    if ( v6 >= 0x8FC )
    {
      if ( v6 >= 0xA28 )
      {
        if ( v6 >= 0xB54 )
          *(_DWORD *)(v5 + 56) = 5;
        else
          *(_DWORD *)(v5 + 56) = 4;
      }
      else
      {
        *(_DWORD *)(v5 + 56) = 3;
      }
    }
    else
    {
      *(_DWORD *)(v5 + 56) = 2;
    }
  }
  else
  {
    *(_DWORD *)(v5 + 56) = 1;
  }
  switch ( *(_DWORD *)(v5 + 56) )
  {
    case 1:
      v7 = a3 * (50 * *(_DWORD *)(v5 + 56) + 25 * *(_DWORD *)(v5 + 8) + 50) / 90;
      break;
    case 2:
      v7 = a3 * (50 * *(_DWORD *)(v5 + 56) + 32 * *(_DWORD *)(v5 + 8) + 50) / 90;
      break;
    case 3:
      v7 = a3 * (50 * *(_DWORD *)(v5 + 56) + 40 * *(_DWORD *)(v5 + 8) + 50) / 90;
      break;
    case 4:
      v7 = a3 * (50 * *(_DWORD *)(v5 + 56) + 47 * *(_DWORD *)(v5 + 8) + 50) / 90;
      break;
    default:
      if ( *(_DWORD *)(v5 + 56) != 5 )
        return 0;
      v7 = a3 * (50 * *(_DWORD *)(v5 + 56) + 55 * *(_DWORD *)(v5 + 8) + 50) / 90;
      break;
  }
  if ( v7 >= 2000 )
    v4 = 2000;
  else
    v4 = v7;
  return v4 + a3;
}

//----- (00482D30) --------------------------------------------------------
int __thiscall sub_482D30(int this)
{
  return (*(_DWORD *)(this + 8) + 1) / 2 + 2 * *(_DWORD *)(this + 56) - 1;
}

//----- (00482D60) --------------------------------------------------------
char __thiscall sub_482D60(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 56;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 60;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 66;
        break;
      case 4:
        result = *(_DWORD *)(a2 + 60) >= 69;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00482DF0) --------------------------------------------------------
int __thiscall sub_482DF0(int this, int a2, int a3)
{
  return (*(_DWORD *)(this + 8) + 2) * 50 * a3 / 100;
}

//----- (00482E20) --------------------------------------------------------
int __thiscall sub_482E20(void *this, void *a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  unsigned int v8; // esi@2
  unsigned int v9; // eax@2
  void *v10; // eax@3
  int v11; // ST14_4@3
  int result; // eax@4
  void *v13; // [sp+4h] [bp-10h]@1
  int v14; // [sp+8h] [bp-Ch]@2
  int v15; // [sp+Ch] [bp-8h]@1
  int v16; // [sp+10h] [bp-4h]@1

  v13 = this;
  v15 = CChar::GetAttack(a2);
  v16 = (*(int (__thiscall **)(void *, void *, int))(*(_DWORD *)v13 + 16))(v13, a2, v15);
  v7 = (*(int (__thiscall **)(void *))(*(_DWORD *)v13 + 84))(v13);
  if ( CChar::CheckHit(a2, a3, v7) )
  {
    v8 = a4 * (*(int (__thiscall **)(void *, int))(*(_DWORD *)a2 + 168))(a2, a3);
    *(_DWORD *)a7 = v8 / (*(int (__thiscall **)(void *, void *))(*(_DWORD *)v13 + 36))(v13, a2);
    v9 = (*(int (__thiscall **)(void *, void *, int, int, int, void *))(*(_DWORD *)v13 + 36))(v13, a2, a5, a6, a7, v13);
    v14 = (*(int (__thiscall **)(int, void *, unsigned int))(*(_DWORD *)a3 + 72))(a3, a2, a4 * v16 / v9);
    if ( (*(int (__thiscall **)(void *, void *, int))(*(_DWORD *)v13 + 40))(v13, a2, a3) )
    {
      v10 = CBuff::CreateBuff(39, 5, 50 * v15 / 100 / 5, v11);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v10);
    }
    result = v14;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00482F40) --------------------------------------------------------
char __thiscall sub_482F40(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 67;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 70;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00482FA0) --------------------------------------------------------
int __userpurge sub_482FA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, unsigned int a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  DWORD v8; // esi@11
  unsigned int v9; // esi@11
  int v10; // eax@11
  unsigned int v11; // eax@11
  int v12; // [sp+8h] [bp-2Ch]@1
  int v13; // [sp+Ch] [bp-28h]@11
  unsigned int v14; // [sp+10h] [bp-24h]@11
  int v15; // [sp+14h] [bp-20h]@11
  int v16; // [sp+18h] [bp-1Ch]@11
  int v17; // [sp+1Ch] [bp-18h]@11
  int v18; // [sp+20h] [bp-14h]@11
  int v19; // [sp+24h] [bp-10h]@11
  int v20; // [sp+28h] [bp-Ch]@4
  char v21; // [sp+2Fh] [bp-5h]@1
  int v22; // [sp+30h] [bp-4h]@1

  v12 = a1;
  result = (int)sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v22 = 0;
  if ( v21 )
  {
    if ( v21 == 1 )
    {
      result = CMonster::FindMonster(a2, a3, a4, v20);
      v22 = result;
    }
  }
  else
  {
    result = sub_450810(a2, a3, a4, v20);
    v22 = result;
  }
  if ( v22 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v12)(v12, a5, v22) )
    {
      v18 = sub_480F20((void *)v12, a5);
      v8 = GetTickCount();
      *(_DWORD *)(a5 + 1448) = CChar::GetASpeed(a5) + v8;
      CChar::SetDirection(
        (void *)a5,
        *(_DWORD *)(v22 + 332) - *(_DWORD *)(a5 + 332),
        *(_DWORD *)(v22 + 336) - *(_DWORD *)(a5 + 336));
      v15 = 0;
      v9 = v18 * (*(int (__thiscall **)(int, int))(*(_DWORD *)a5 + 168))(a5, v22);
      v14 = v9 / (*(int (__thiscall **)(int, int))(*(_DWORD *)v12 + 36))(v12, a5);
      v19 = sub_4833D0((void *)v12, a5, v22);
      v13 = 0;
      v10 = sub_483230(a5);
      v17 = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v12 + 20))(v12, a5, v10);
      a4 = v18 * v19 * v17 / 100;
      v11 = (*(int (__thiscall **)(int, int, int *, int *, unsigned int *, int))(*(_DWORD *)v12 + 36))(
              v12,
              a5,
              &v15,
              &v13,
              &v14,
              v12);
      v16 = (*(int (__thiscall **)(int, int, unsigned int))(*(_DWORD *)v22 + 72))(v22, a5, a4 / v11);
      if ( !v16 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v22 + 80))(v22, a5);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v12 + 56))(v12, a5);
      std___Mpunct_wchar_t___do_frac_digits(v22);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
      (*(void (__thiscall **)(int, int, int, int, int, int))(*(_DWORD *)v12 + 84))(v12, a5, v22, v18, v19, v17);
    }
    else
    {
      if ( *(_DWORD *)(v12 + 40) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
    }
    result = sub_4239C0(v22, a2, a3, a4, v22 + 352);
  }
  else
  {
    if ( *(_DWORD *)(v12 + 40) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00483230) --------------------------------------------------------
int __thiscall sub_483230(int this)
{
  int v2; // ST08_4@1
  int v3; // ST04_4@1
  int v4; // eax@1

  v2 = this;
  v3 = CChar::GetMaxMagic(this);
  v4 = CChar::GetMinMagic(v2);
  return sub_406E10(v4, v3);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);

//----- (00483260) --------------------------------------------------------
int __thiscall sub_483260(void *this, int a2)
{
  int v3; // [sp+8h] [bp-4h]@1

  v3 = 0;
  if ( (*(int (**)(void))(*(_DWORD *)this + 80))() == 2 )
    v3 = 20 * *(_DWORD *)(a2 + 968);
  return v3;
}

//----- (004832A0) --------------------------------------------------------
int __thiscall sub_4832A0(void *this, int a2)
{
  int result; // eax@2
  void *v3; // [sp+4h] [bp-8h]@1
  int v4; // [sp+8h] [bp-4h]@3

  v3 = this;
  if ( a2 )
  {
    v4 = *((_DWORD *)this + 11);
    if ( !(*(int (__thiscall **)(void *))(*(_DWORD *)this + 80))(this) )
      v4 -= 5 * *(_DWORD *)(a2 + 976) * *((_DWORD *)v3 + 10) / 0x64u;
    result = v4;
  }
  else
  {
    result = *((_DWORD *)this + 11);
  }
  return result;
}

//----- (00483310) --------------------------------------------------------
int __thiscall sub_483310(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax@1
  void *v7; // [sp+4h] [bp-4h]@1

  v7 = this;
  result = (*(int (**)(void))(*(_DWORD *)this + 80))();
  if ( result == 1 )
    result = CMagic::Excute(v7, a2, a3, a4, a5, a6);
  return result;
}

//----- (00483360) --------------------------------------------------------
int __thiscall CMagic::Excute(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax@1
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-4h]@1

  v8 = (int)this;
  result = a2;
  if ( *(_DWORD *)(a2 + 972) )
  {
    result = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 40))(this, a2, a3);
    if ( result )
    {
      v7 = CBuff::CreateBuff(0, *(_DWORD *)(a2 + 972) + 2, -20 * *(_DWORD *)(a2 + 972), v8);
      result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v7);
    }
  }
  return result;
}

//----- (004833D0) --------------------------------------------------------
int __thiscall sub_4833D0(void *this, int a2, int a3)
{
  int v3; // ST14_4@1
  int v4; // eax@1
  int v5; // esi@1
  int v6; // esi@1
  int v8; // [sp+4h] [bp-10h]@2
  int v9; // [sp+10h] [bp-4h]@1

  v3 = *(_DWORD *)(a2 + 60) - *(_DWORD *)(a3 + 60);
  v4 = (*(int (**)(void))(*(_DWORD *)this + 80))();
  v5 = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a3 + 144))(a3, a2, v4);
  v6 = v5 - v3 * abs(v3) / 6;
  v9 = v6 & ((v6 < 0) - 1);
  if ( v9 >= 100 )
    v8 = 0;
  else
    v8 = 100 - v9;
  return v8;
}

//----- (00483460) --------------------------------------------------------
int __thiscall sub_483460(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1

  v6 = this;
  v3 = 9 * *(_DWORD *)(a2 + 60) / 2 + 5 * *(_DWORD *)(this + 8) * CChar::GetInt(a2);
  if ( ((_DWORD)v3 - HIDWORD(v3)) >> 1 >= 200 * *(_DWORD *)(v6 + 8) + 600 )
    v5 = 200 * *(_DWORD *)(v6 + 8) + 600;
  else
    v5 = ((_DWORD)v3 - HIDWORD(v3)) >> 1;
  return v5 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004834E0) --------------------------------------------------------
char __thiscall sub_4834E0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 63;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00483520) --------------------------------------------------------
int __thiscall sub_483520(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1

  v6 = this;
  v3 = 3 * *(_DWORD *)(a2 + 60) / 2 + 3 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 10;
  if ( ((_DWORD)v3 - HIDWORD(v3)) >> 1 >= 21 * *(_DWORD *)(v6 + 8) + 30 )
    v5 = 21 * *(_DWORD *)(v6 + 8) + 30;
  else
    v5 = ((_DWORD)v3 - HIDWORD(v3)) >> 1;
  return v5 + a3 + 2 * *(_DWORD *)(v6 + 8);
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004835A0) --------------------------------------------------------
signed int __userpurge sub_4835A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 25);
  sub_480340((void *)(a5 + 624), 33);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (004835E0) --------------------------------------------------------
int __thiscall sub_4835E0(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1

  v6 = this;
  v3 = 3 * *(_DWORD *)(a2 + 60) / 2 + 10 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 3;
  if ( (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 380 >= 150 * *(_DWORD *)(v6 + 8) + 500 )
    v5 = 150 * *(_DWORD *)(v6 + 8) + 500;
  else
    v5 = (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 380;
  return v5 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00483670) --------------------------------------------------------
char __thiscall sub_483670(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 59;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004836B0) --------------------------------------------------------
signed int __userpurge sub_4836B0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 46);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (004836E0) --------------------------------------------------------
int __thiscall sub_4836E0(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1

  v6 = this;
  v3 = 3 * *(_DWORD *)(a2 + 60) / 2 + 14 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 3;
  if ( (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 580 >= 300 * *(_DWORD *)(v6 + 8) + 600 )
    v5 = 300 * *(_DWORD *)(v6 + 8) + 600;
  else
    v5 = (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 580;
  return v5 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00483770) --------------------------------------------------------
int __thiscall sub_483770(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1

  v6 = this;
  v3 = 3 * *(_DWORD *)(a2 + 60) / 2 + 3 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 13;
  if ( ((_DWORD)v3 - HIDWORD(v3)) >> 1 >= 16 * *(_DWORD *)(v6 + 8) + 30 )
    v5 = 16 * *(_DWORD *)(v6 + 8) + 30;
  else
    v5 = ((_DWORD)v3 - HIDWORD(v3)) >> 1;
  return v5 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004837F0) --------------------------------------------------------
signed int __userpurge sub_4837F0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 24);
  sub_480340((void *)(a5 + 624), 32);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00483830) --------------------------------------------------------
int __thiscall sub_483830(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v4; // esi@1
  __int64 v5; // qax@1
  int v7; // [sp+4h] [bp-Ch]@2
  int v8; // [sp+8h] [bp-8h]@1

  v8 = this;
  v4 = 3 * *(_DWORD *)(a2 + 60) / 2;
  v5 = 10 * *(_DWORD *)(this + 8) * CChar::GetInt(a2);
  v3 = v4 + (((BYTE4(v5) & 3) + (_DWORD)v5) >> 2);
  if ( (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 240 >= 150 * *(_DWORD *)(v8 + 8) + 400 )
    v7 = 150 * *(_DWORD *)(v8 + 8) + 400;
  else
    v7 = (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 240;
  return v7 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004838C0) --------------------------------------------------------
char __thiscall sub_4838C0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 58;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 64;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 67;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00483930) --------------------------------------------------------
int __thiscall sub_483930(int this, int a2, int a3)
{
  int v3; // esi@1
  __int64 v4; // qax@1
  __int64 v5; // qax@1
  int v7; // [sp+4h] [bp-14h]@5
  int v8; // [sp+8h] [bp-10h]@2
  int v9; // [sp+Ch] [bp-Ch]@1
  int v10; // [sp+10h] [bp-8h]@1
  int v11; // [sp+14h] [bp-4h]@1

  v9 = this;
  v3 = 3 * *(_DWORD *)(a2 + 60) / 2;
  v4 = 2 * *(_DWORD *)(this + 8) * CChar::GetInt(a2);
  v5 = v3 + (((BYTE4(v4) & 0xF) + (_DWORD)v4) >> 4);
  v10 = ((_DWORD)v5 - HIDWORD(v5)) >> 1;
  v11 = v10 + sub_483260((void *)v9, a2);
  if ( v10 >= 12 * *(_DWORD *)(v9 + 8) + 30 )
    v8 = 12 * *(_DWORD *)(v9 + 8) + 30;
  else
    v8 = v10;
  if ( v11 >= 12 * *(_DWORD *)(v9 + 8) + 180 )
    v7 = 12 * *(_DWORD *)(v9 + 8) + 180;
  else
    v7 = v11;
  return a3 + sub_406E10(v8, v7);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00483A00) --------------------------------------------------------
signed int __userpurge sub_483A00<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  void *v4; // eax@4
  signed int result; // eax@5
  char v6; // [sp+4h] [bp-14h]@4
  int v7; // [sp+8h] [bp-10h]@4
  int v8; // [sp+Ch] [bp-Ch]@3
  int v9; // [sp+10h] [bp-8h]@1
  char v10; // [sp+14h] [bp-4h]@4

  v9 = *(_DWORD *)(a4 + 648);
  (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a4 + 88))(a4, 24, 1, *(_DWORD *)(v9 + 8) - 1);
  if ( v9 )
  {
    if ( sub_481150(v9, a1, a2, a3, a4) )
    {
      v8 = v9;
      sub_401020(v9);
    }
  }
  v7 = (*(_DWORD *)(a4 + 460) << 16) + 4;
  sub_446130((int)&unk_4E218C, (int)&v10, (int)&v7);
  v4 = sub_430C20((int)&unk_4E218C, &v6);
  if ( (unsigned __int8)unknown_libname_8(v4) )
  {
    result = 0;
  }
  else
  {
    v9 = *(_DWORD *)(sub_420250((int *)&v10) + 4);
    v9 = (int)sub_47F760((void *)v9);
    sub_47F780(v9, 4, 1);
    (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v9 + 8))(v9, a4, 0, 0);
    *(_DWORD *)(a4 + 648) = v9;
    CPlayer::Write(a1, a2, a3, a4, 81, (unsigned int)"bb");
    CDBSocket::Write(a1, a2, a3, 9, (unsigned int)"dbw");
    sub_480340((void *)(a4 + 624), 9);
    sub_480340((void *)(a4 + 624), 23);
    result = 1;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (00483B50) --------------------------------------------------------
int __thiscall sub_483B50(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v4; // esi@1
  int v5; // esi@1
  __int64 v6; // qax@1
  __int64 v7; // qax@1
  int v9; // [sp+8h] [bp-14h]@5
  int v10; // [sp+Ch] [bp-10h]@2
  int v11; // [sp+10h] [bp-Ch]@1
  int v12; // [sp+14h] [bp-8h]@1

  v11 = this;
  v5 = 5 * *(_DWORD *)(a2 + 60) / 3;
  v6 = 6 * *(_DWORD *)(this + 8) * CChar::GetInt(a2);
  v7 = v5 + (((BYTE4(v6) & 3) + (_DWORD)v6) >> 2);
  v12 = (((_DWORD)v7 - HIDWORD(v7)) >> 1) + 50;
  v4 = sub_483260((void *)v11, a2);
  v3 = 5 * *(_DWORD *)(a2 + 60) / 3 + 11 * *(_DWORD *)(v11 + 8) * CChar::GetInt(a2) / 3;
  if ( v12 >= 60 * *(_DWORD *)(v11 + 8) + 200 )
    v10 = 60 * *(_DWORD *)(v11 + 8) + 200;
  else
    v10 = v12;
  if ( v4 + (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 150 >= 200 * *(_DWORD *)(v11 + 8) + 200 )
    v9 = 200 * *(_DWORD *)(v11 + 8) + 200;
  else
    v9 = v4 + (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 150;
  return a3 + sub_406E10(v10, v9);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00483C70) --------------------------------------------------------
int __thiscall sub_483C70(int this, int a2, int a3)
{
  int result; // eax@2
  int v4; // esi@3
  __int64 v5; // qax@3
  int v6; // esi@3
  __int64 v7; // qax@3
  int v8; // esi@3
  int v9; // [sp+4h] [bp-18h]@7
  int v10; // [sp+8h] [bp-14h]@4
  int v11; // [sp+Ch] [bp-10h]@1
  int v12; // [sp+10h] [bp-Ch]@3
  int v13; // [sp+14h] [bp-8h]@1
  int v14; // [sp+18h] [bp-4h]@3

  v11 = this;
  v13 = *(_DWORD *)(a2 + 648);
  if ( v13 )
  {
    v4 = 3 * *(_DWORD *)(a2 + 60) / 2;
    v5 = 3 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 10;
    v12 = v4 + (((_DWORD)v5 - HIDWORD(v5)) >> 1) + 10;
    v6 = 3 * *(_DWORD *)(a2 + 60) / 2;
    v7 = 5 * *(_DWORD *)(v11 + 8) * CChar::GetInt(a2);
    v8 = v6 + (((BYTE4(v7) & 7) + (_DWORD)v7) >> 3) / 2 + 30 + sub_483260((void *)v11, a2);
    v14 = (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v13 + 20))(v13, a2, 0) + v8;
    if ( v12 >= 30 * *(_DWORD *)(v11 + 8) + 150 )
      v10 = 30 * *(_DWORD *)(v11 + 8) + 150;
    else
      v10 = v12;
    if ( v14 >= 40 * *(_DWORD *)(v11 + 8) + 200 )
      v9 = 40 * *(_DWORD *)(v11 + 8) + 200;
    else
      v9 = v14;
    result = a3 + sub_406E10(v10, v9);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00483DB0) --------------------------------------------------------
signed int __userpurge sub_483DB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 31);
  sub_480340((void *)(a5 + 624), 41);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00483DF0) --------------------------------------------------------
int __thiscall sub_483DF0(void *this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v4; // esi@1
  int v5; // esi@1
  __int64 v6; // qax@1
  int v8; // [sp+4h] [bp-14h]@5
  int v9; // [sp+8h] [bp-10h]@2
  void *v10; // [sp+Ch] [bp-Ch]@1
  int v11; // [sp+10h] [bp-8h]@1

  v10 = this;
  v5 = 3 * *(_DWORD *)(a2 + 60) / 2 + sub_483260(this, a2);
  v6 = 2 * *((_DWORD *)v10 + 2) * CChar::GetInt(a2) / 7;
  v11 = v5 + (((_DWORD)v6 - HIDWORD(v6)) >> 1) + 320;
  v4 = 3 * *(_DWORD *)(a2 + 60) / 2 + sub_483260(v10, a2);
  v3 = 10 * *((_DWORD *)v10 + 2) * CChar::GetInt(a2);
  if ( v11 >= *((_DWORD *)v10 + 2) + 450 )
    v9 = *((_DWORD *)v10 + 2) + 450;
  else
    v9 = v11;
  if ( v4 + (((_DWORD)v3 - HIDWORD(v3)) >> 1) / 2 + 320 >= 200 * *((_DWORD *)v10 + 2) + 700 )
    v8 = 200 * *((_DWORD *)v10 + 2) + 700;
  else
    v8 = v4 + (((_DWORD)v3 - HIDWORD(v3)) >> 1) / 2 + 320;
  return a3 + sub_406E10(v9, v8);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00483F10) --------------------------------------------------------
bool __thiscall CShock::GetMagic(int this, int a2)
{
  bool result; // eax@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
    result = *(_DWORD *)(a2 + 60) >= 4 * *(_DWORD *)(this + 8) + 53;
  else
    result = 0;
  return result;
}

//----- (00483F50) --------------------------------------------------------
signed int __userpurge sub_483F50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 42);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00483F80) --------------------------------------------------------
int __thiscall sub_483F80(void *this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v4; // esi@1
  int v5; // esi@1
  __int64 v6; // qax@1
  int v8; // [sp+4h] [bp-14h]@5
  int v9; // [sp+8h] [bp-10h]@2
  void *v10; // [sp+Ch] [bp-Ch]@1
  int v11; // [sp+10h] [bp-8h]@1

  v10 = this;
  v5 = 3 * *(_DWORD *)(a2 + 60) / 2 + sub_483260(this, a2);
  v6 = 5 * *((_DWORD *)v10 + 2) * 3 * CChar::GetInt(a2) / 2 / 3;
  v11 = v5 + (((_DWORD)v6 - HIDWORD(v6)) >> 1) + 360;
  v4 = 3 * *(_DWORD *)(a2 + 60) / 2 + sub_483260(v10, a2);
  v3 = 10 * *((_DWORD *)v10 + 2) * 3 * CChar::GetInt(a2) / 2;
  if ( v11 >= 154 * *((_DWORD *)v10 + 2) + 456 )
    v9 = 154 * *((_DWORD *)v10 + 2) + 456;
  else
    v9 = v11;
  if ( v4 + (((_DWORD)v3 - HIDWORD(v3)) >> 1) / 2 + 700 >= 300 * *((_DWORD *)v10 + 2) + 900 )
    v8 = 300 * *((_DWORD *)v10 + 2) + 900;
  else
    v8 = v4 + (((_DWORD)v3 - HIDWORD(v3)) >> 1) / 2 + 700;
  return a3 + sub_406E10(v9, v8);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004840C0) --------------------------------------------------------
char __thiscall sub_4840C0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
    result = *(_DWORD *)(a2 + 60) >= 3 * *(_DWORD *)(this + 8) + 63;
  else
    result = 0;
  return result;
}

//----- (00484100) --------------------------------------------------------
int __userpurge sub_484100<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, unsigned int a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  DWORD v8; // esi@11
  int v9; // eax@11
  int v10; // eax@18
  int v11; // eax@18
  unsigned int v12; // eax@19
  int v13; // [sp+8h] [bp-34h]@1
  int v14; // [sp+Ch] [bp-30h]@18
  unsigned int v15; // [sp+10h] [bp-2Ch]@18
  int v16; // [sp+14h] [bp-28h]@18
  int v17; // [sp+18h] [bp-24h]@19
  int v18; // [sp+1Ch] [bp-20h]@18
  int v19; // [sp+20h] [bp-1Ch]@18
  int v20; // [sp+24h] [bp-18h]@11
  int i; // [sp+28h] [bp-14h]@11
  int v22; // [sp+2Ch] [bp-10h]@11
  int v23; // [sp+30h] [bp-Ch]@4
  char v24; // [sp+37h] [bp-5h]@1
  int v25; // [sp+38h] [bp-4h]@1

  v13 = a1;
  result = (int)sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v25 = 0;
  if ( v24 )
  {
    if ( v24 == 1 )
    {
      result = CMonster::FindMonster(a2, a3, a4, v23);
      v25 = result;
    }
  }
  else
  {
    result = sub_450810(a2, a3, a4, v23);
    v25 = result;
  }
  if ( v25 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v13)(v13, a5, v25) )
    {
      v22 = sub_480F20((void *)v13, a5);
      v8 = GetTickCount();
      a4 = CChar::GetASpeed(a5) + v8;
      *(_DWORD *)(a5 + 1448) = a4;
      CChar::SetDirection(
        (void *)a5,
        *(_DWORD *)(v25 + 332) - *(_DWORD *)(a5 + 332),
        *(_DWORD *)(v25 + 336) - *(_DWORD *)(a5 + 336));
      v20 = 0;
      v9 = (*(int (__thiscall **)(int))(*(_DWORD *)v13 + 92))(v13);
      for ( i = sub_4935A0(*(_DWORD *)(a5 + 320), a2, a3, a4, v25 + 324, v9); i; i = CBaseList::Pop(i, a2, a3, a4) )
      {
        v20 = unknown_libname_7();
        if ( (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a5 + 176))(a5, v20, 0) )
        {
          if ( CChar::IsNormal(v20) )
          {
            if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v20 + 316) )
            {
              v16 = 0;
              v10 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a5 + 168))(a5, v25);
              a4 = v22 * v10;
              v15 = v22 * v10 / (unsigned int)(*(int (__thiscall **)(int, int))(*(_DWORD *)v13 + 36))(v13, a5);
              v19 = sub_4833D0((void *)v13, a5, v20);
              v14 = 0;
              v11 = sub_483230(a5);
              v18 = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v13 + 20))(v13, a5, v11);
              if ( (*(int (__thiscall **)(int))(*(_DWORD *)v13 + 100))(v13) )
              {
                a4 = v22 * v19 * v18 / 100;
                v12 = (*(int (__thiscall **)(int, int, int *, int *, unsigned int *, int))(*(_DWORD *)v13 + 36))(
                        v13,
                        a5,
                        &v16,
                        &v14,
                        &v15,
                        v13);
                v17 = (*(int (__thiscall **)(int, int, unsigned int))(*(_DWORD *)v20 + 72))(v20, a5, a4 / v12);
                if ( !v17 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)v20 + 80))(v20, a5);
                if ( v16 > 0 )
                {
                  std___Mpunct_wchar_t___do_frac_digits(v20);
                  std___Mpunct_wchar_t___do_frac_digits(a5);
                  (*(void (__thiscall **)(int))(*(_DWORD *)v13 + 96))(v13);
                  CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
                  (*(void (__thiscall **)(int, int, int, int, int, int))(*(_DWORD *)v13 + 84))(
                    v13,
                    a5,
                    v20,
                    v22,
                    v19,
                    v18);
                }
              }
              else
              {
                (*(void (__thiscall **)(int, int, int, int, int, int))(*(_DWORD *)v13 + 84))(
                  v13,
                  a5,
                  v20,
                  v22,
                  v19,
                  v18);
                (*(void (__thiscall **)(int, int))(*(_DWORD *)v20 + 80))(v20, a5);
              }
            }
          }
        }
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v13 + 56))(v13, a5);
      std___Mpunct_wchar_t___do_frac_digits(v25);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      if ( *(_DWORD *)(v13 + 40) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
    }
    result = sub_4239C0(v25, a2, a3, a4, v25 + 352);
  }
  else
  {
    if ( *(_DWORD *)(v13 + 40) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004844A0) --------------------------------------------------------
void __userpurge sub_4844A0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@3
  void *v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@7
  int v9; // [sp+8h] [bp-20h]@7
  int v10; // [sp+Ch] [bp-1Ch]@7
  int v11; // [sp+10h] [bp-18h]@8
  int v12; // [sp+14h] [bp-14h]@7
  int v13; // [sp+18h] [bp-10h]@7
  int v14; // [sp+1Ch] [bp-Ch]@3
  int v15; // [sp+20h] [bp-8h]@3
  DWORD v16; // [sp+24h] [bp-4h]@3

  v7 = a1;
  if ( a6 )
  {
    CChar::SetDirection((void *)a5, *(_DWORD *)(a6 + 332) - *(_DWORD *)(a5 + 332), *(_DWORD *)(a6 + 336) - *(_DWORD *)(a5 + 336));
    v14 = 0;
    v6 = (*(int (__thiscall **)(void *))(*(_DWORD *)v7 + 92))(v7);
    v15 = sub_4934F0(*(_DWORD *)(a5 + 320), a2, a3, a4, a6 + 324, v6);
    v16 = GetTickCount();
    *((_DWORD *)v7 + 16) = *((_DWORD *)v7 + 11) + v16 - *((_DWORD *)v7 + 10);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *((_DWORD *)v7 + 12) + v16, 1);
    *(_DWORD *)(a5 + 468) = *((_DWORD *)v7 + 12) + v16;
    CChar::Unlock(a5, a2, a3, a4);
    while ( v15 )
    {
      v14 = unknown_libname_7();
      if ( CChar::IsNormal(v14) )
      {
        if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v14 + 316) )
        {
          v10 = 0;
          v9 = 0;
          v13 = sub_4833D0(v7, a5, v14);
          v8 = 0;
          v12 = (*(int (__thiscall **)(void *, int))(*(_DWORD *)v7 + 88))(v7, a5);
          if ( (*(int (__thiscall **)(void *))(*(_DWORD *)v7 + 100))(v7) )
          {
            v11 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, void *))(*(_DWORD *)v14 + 72))(
                    v14,
                    a5,
                    v13 * v12 / 100,
                    &v10,
                    &v8,
                    &v9,
                    v7);
            if ( !v11 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
            if ( v10 > 0 )
            {
              std___Mpunct_wchar_t___do_frac_digits(v14);
              std___Mpunct_wchar_t___do_frac_digits(a5);
              (*(void (__thiscall **)(void *))(*(_DWORD *)v7 + 96))(v7);
              CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
              (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v7 + 104))(v7, a5, v14);
            }
          }
          else
          {
            (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v7 + 104))(v7, a5, v14);
            (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
          }
        }
      }
      v15 = CBaseList::Pop(v15, a2, a3, a4);
    }
    CChar::Lock(a5, a2, a3, a4);
    std___Mpunct_wchar_t___do_frac_digits(a6);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00484710) --------------------------------------------------------
LONG __userpurge sub_484710<eax>(LONG a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@2
  unsigned int v8; // esi@5
  int v9; // eax@5
  DWORD v10; // esi@5
  int v11; // eax@12
  int v12; // eax@12
  unsigned int v13; // eax@13
  LONG v14; // [sp+4h] [bp-28h]@1
  int v15; // [sp+8h] [bp-24h]@12
  unsigned int v16; // [sp+Ch] [bp-20h]@12
  int v17; // [sp+10h] [bp-1Ch]@12
  int v18; // [sp+14h] [bp-18h]@13
  int v19; // [sp+18h] [bp-14h]@12
  int v20; // [sp+1Ch] [bp-10h]@12
  int v21; // [sp+20h] [bp-Ch]@5
  int v22; // [sp+24h] [bp-8h]@5
  int v23; // [sp+28h] [bp-4h]@5

  v14 = a1;
  if ( (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0) )
  {
    v21 = 0;
    v9 = (*(int (__thiscall **)(LONG))(*(_DWORD *)v14 + 92))(v14);
    v22 = sub_4935A0(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, v9);
    v23 = sub_480F20((void *)v14, a5);
    v10 = GetTickCount();
    v8 = CChar::GetASpeed(a5) + v10;
    *(_DWORD *)(a5 + 1448) = v8;
    while ( v22 )
    {
      v21 = unknown_libname_7();
      if ( (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a5 + 176))(a5, v21, 0) )
      {
        if ( CChar::IsNormal(v21) )
        {
          if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v21 + 316) )
          {
            v17 = 0;
            v11 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a5 + 168))(a5, v21);
            v8 = v23 * v11;
            v16 = v23 * v11 / (unsigned int)(*(int (__thiscall **)(LONG, int))(*(_DWORD *)v14 + 36))(v14, a5);
            v20 = sub_4833D0((void *)v14, a5, v21);
            v15 = 0;
            v12 = sub_483230(a5);
            v19 = (*(int (__thiscall **)(LONG, int, int))(*(_DWORD *)v14 + 20))(v14, a5, v12);
            if ( (*(int (__thiscall **)(LONG))(*(_DWORD *)v14 + 100))(v14) )
            {
              v8 = v23 * v20 * v19 / 100;
              v13 = (*(int (__thiscall **)(LONG, int, int *, int *, unsigned int *, LONG))(*(_DWORD *)v14 + 36))(
                      v14,
                      a5,
                      &v17,
                      &v15,
                      &v16,
                      v14);
              v18 = (*(int (__thiscall **)(int, int, unsigned int))(*(_DWORD *)v21 + 72))(v21, a5, v8 / v13);
              if ( !v18 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)v21 + 80))(v21, a5);
              if ( v17 > 0 )
              {
                std___Mpunct_wchar_t___do_frac_digits(v21);
                std___Mpunct_wchar_t___do_frac_digits(a5);
                (*(void (__thiscall **)(LONG))(*(_DWORD *)v14 + 96))(v14);
                CChar::WriteInSight(a2, a3, v8, a5, 10, (unsigned int)"bbddww");
                (*(void (__thiscall **)(LONG, int, int, int, int, int))(*(_DWORD *)v14 + 84))(
                  v14,
                  a5,
                  v21,
                  v23,
                  v20,
                  v19);
              }
            }
            else
            {
              (*(void (__thiscall **)(LONG, int, int, int, int, int))(*(_DWORD *)v14 + 84))(v14, a5, v21, v23, v20, v19);
              (*(void (__thiscall **)(int, int))(*(_DWORD *)v21 + 80))(v21, a5);
            }
          }
        }
      }
      v22 = CBaseList::Pop(v22, a2, a3, v8);
    }
    (*(void (__thiscall **)(LONG, int))(*(_DWORD *)v14 + 56))(v14, a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, v8, a5, 63, (unsigned int)"bddbb");
  }
  else
  {
    result = v14;
    if ( *(_DWORD *)(v14 + 40) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004849E0) --------------------------------------------------------
LONG __userpurge sub_4849E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@1
  int v8; // [sp+0h] [bp-28h]@1
  int v9; // [sp+4h] [bp-24h]@5
  int v10; // [sp+8h] [bp-20h]@5
  int v11; // [sp+Ch] [bp-1Ch]@5
  int v12; // [sp+10h] [bp-18h]@5
  int v13; // [sp+14h] [bp-14h]@5
  int v14; // [sp+18h] [bp-10h]@5
  int v15; // [sp+1Ch] [bp-Ch]@1
  int v16; // [sp+20h] [bp-8h]@1
  DWORD v17; // [sp+24h] [bp-4h]@1

  v8 = a1;
  v15 = 0;
  v6 = (*(int (**)(void))(*(_DWORD *)a1 + 92))();
  v16 = sub_4934F0(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, v6);
  v17 = GetTickCount();
  *(_DWORD *)(v8 + 64) = *(_DWORD *)(v8 + 44) + v17 - *(_DWORD *)(v8 + 40);
  (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v8 + 48) + v17, 1);
  *(_DWORD *)(a5 + 468) = *(_DWORD *)(v8 + 48) + v17;
  CChar::Unlock(a5, a2, a3, a4);
  while ( v16 )
  {
    v15 = unknown_libname_7();
    if ( CChar::IsNormal(v15) )
    {
      if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v15 + 316) )
      {
        v11 = 0;
        v10 = 0;
        v14 = sub_4833D0((void *)v8, a5, v15);
        v9 = 0;
        v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 88))(v8, a5);
        v12 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)v15 + 72))(
                v15,
                a5,
                v14 * v13 / 100,
                &v11,
                &v9,
                &v10,
                v8);
        if ( !v12 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v15 + 80))(v15, a5);
        if ( v11 > 0 )
        {
          std___Mpunct_wchar_t___do_frac_digits(v15);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          (*(void (__thiscall **)(int))(*(_DWORD *)v8 + 96))(v8);
          CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
          (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v8 + 104))(v8, a5, v15);
        }
      }
    }
    v16 = CBaseList::Pop(v16, a2, a3, a4);
  }
  CChar::Lock(a5, a2, a3, a4);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  return CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00484BE0) --------------------------------------------------------
LONG __userpurge sub_484BE0<eax>(LONG a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  LONG result; // eax@2
  unsigned int v8; // esi@7
  int v9; // eax@7
  DWORD v10; // esi@7
  int v11; // eax@14
  int v12; // eax@14
  unsigned int v13; // eax@14
  LONG v14; // [sp+4h] [bp-34h]@1
  int v15; // [sp+8h] [bp-30h]@14
  unsigned int v16; // [sp+Ch] [bp-2Ch]@14
  int v17; // [sp+10h] [bp-28h]@14
  int v18; // [sp+14h] [bp-24h]@14
  int v19; // [sp+18h] [bp-20h]@14
  int v20; // [sp+1Ch] [bp-1Ch]@14
  int v21; // [sp+20h] [bp-18h]@7
  int v22; // [sp+24h] [bp-14h]@7
  int v23; // [sp+28h] [bp-10h]@1
  int v24; // [sp+2Ch] [bp-Ch]@1
  int v25; // [sp+30h] [bp-8h]@7
  int v26; // [sp+34h] [bp-4h]@7

  v14 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"dd");
  v23 = sub_491080(*(_DWORD *)(a5 + 316));
  if ( CSMap::IsValidTile((void *)v23, (int)&v24, 0) )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v14)(v14, a5, 0) )
    {
      v24 >>= 5;
      v25 >>= 5;
      v21 = 0;
      v9 = (*(int (__thiscall **)(LONG))(*(_DWORD *)v14 + 92))(v14);
      v22 = sub_4935A0(*(_DWORD *)(a5 + 320), a2, a3, a4, (int)&v24, v9);
      v26 = sub_480F20((void *)v14, a5);
      v10 = GetTickCount();
      v8 = CChar::GetASpeed(a5) + v10;
      *(_DWORD *)(a5 + 1448) = v8;
      while ( v22 )
      {
        v21 = unknown_libname_7();
        if ( (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a5 + 176))(a5, v21, 0) )
        {
          if ( CChar::IsNormal(v21) )
          {
            if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v21 + 316) )
            {
              v17 = 0;
              v11 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a5 + 168))(a5, v21);
              v16 = v26 * v11 / (unsigned int)(*(int (__thiscall **)(LONG, int))(*(_DWORD *)v14 + 36))(v14, a5);
              v20 = sub_4833D0((void *)v14, a5, v21);
              v15 = 0;
              v12 = sub_483230(a5);
              v19 = (*(int (__thiscall **)(LONG, int, int))(*(_DWORD *)v14 + 20))(v14, a5, v12);
              v8 = v26 * v20 * v19 / 100;
              v13 = (*(int (__thiscall **)(LONG, int, int *, int *, unsigned int *, LONG))(*(_DWORD *)v14 + 36))(
                      v14,
                      a5,
                      &v17,
                      &v15,
                      &v16,
                      v14);
              v18 = (*(int (__thiscall **)(int, int, unsigned int))(*(_DWORD *)v21 + 72))(v21, a5, v8 / v13);
              if ( !v18 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)v21 + 80))(v21, a5);
              if ( v17 > 0 )
              {
                std___Mpunct_wchar_t___do_frac_digits(v21);
                std___Mpunct_wchar_t___do_frac_digits(a5);
                (*(void (__thiscall **)(LONG))(*(_DWORD *)v14 + 96))(v14);
                CChar::WriteInSight(a2, a3, v8, a5, 10, (unsigned int)"bbddww");
                (*(void (__thiscall **)(LONG, int, int, int, int, int))(*(_DWORD *)v14 + 84))(
                  v14,
                  a5,
                  v21,
                  v26,
                  v20,
                  v19);
              }
            }
          }
        }
        v22 = CBaseList::Pop(v22, a2, a3, v8);
      }
      (*(void (__thiscall **)(LONG, int))(*(_DWORD *)v14 + 56))(v14, a5);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, v8, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      result = v14;
      if ( *(_DWORD *)(v14 + 40) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
    }
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00484EE0) --------------------------------------------------------
int __thiscall sub_484EE0(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1

  v6 = this;
  v3 = 5 * *(_DWORD *)(a2 + 60) / 3 + 5 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 7;
  if ( ((_DWORD)v3 - HIDWORD(v3)) >> 1 >= 40 * *(_DWORD *)(v6 + 8) + 120 )
    v5 = 40 * *(_DWORD *)(v6 + 8) + 120;
  else
    v5 = ((_DWORD)v3 - HIDWORD(v3)) >> 1;
  return v5 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00484F60) --------------------------------------------------------
signed int __userpurge sub_484F60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 27);
  sub_480340((void *)(a5 + 624), 44);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00484FA0) --------------------------------------------------------
int __thiscall CMagicWidePos::Excute(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+8h] [bp-8h]@1

  v6 = this;
  v3 = 5 * *(_DWORD *)(a2 + 60) / 3 + 6 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 5;
  if ( ((_DWORD)v3 - HIDWORD(v3)) >> 1 >= 70 * *(_DWORD *)(v6 + 8) + 150 )
    v5 = 70 * *(_DWORD *)(v6 + 8) + 150;
  else
    v5 = ((_DWORD)v3 - HIDWORD(v3)) >> 1;
  return v5 + a3 + 8 * *(_DWORD *)(v6 + 8);
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00485030) --------------------------------------------------------
signed int __userpurge sub_485030<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 47);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00485060) --------------------------------------------------------
int __thiscall sub_485060(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2

  v3 = 6 * *(_DWORD *)(a2 + 60) / 2 + 4 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 5;
  if ( (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 580 >= 900 )
    v5 = 900;
  else
    v5 = (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 580;
  return v5 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004850D0) --------------------------------------------------------
signed int __userpurge sub_4850D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 48);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00485100) --------------------------------------------------------
int __thiscall sub_485100(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax@1
  void *v7; // eax@4
  int v8; // [sp+0h] [bp-4h]@1

  v8 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    if ( *(_DWORD *)(v8 + 72) < 8 )
    {
      ++*(_DWORD *)(v8 + 72);
      v7 = CBuff::CreateBuff(26, 5 * *(_DWORD *)(v8 + 8) + 4, 0, v8);
      result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v7);
    }
  }
  return result;
}

//----- (00485170) --------------------------------------------------------
char __thiscall sub_485170(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 56;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 61;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 67;
        break;
      case 4:
        result = *(_DWORD *)(a2 + 60) >= 70;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00485200) --------------------------------------------------------
int __thiscall sub_485200(void *this, int a2)
{
  int result; // eax@1
  void *v3; // ST04_4@1

  v3 = this;
  result = sub_481040(this, a2);
  *((_DWORD *)v3 + 18) = 0;
  return result;
}

//----- (00485230) --------------------------------------------------------
int __thiscall sub_485230(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax@1
  void *v7; // eax@4
  int v8; // ST0C_4@4
  int v9; // [sp+0h] [bp-4h]@1

  v9 = (int)this;
  result = (*(int (__stdcall **)(int, int))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    if ( *(_DWORD *)(v9 + 72) < 5 )
    {
      ++*(_DWORD *)(v9 + 72);
      v7 = CBuff::CreateBuff(8, 2 * *(_DWORD *)(v9 + 8) + 6, v9, v8);
      result = (*(int (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v7);
    }
  }
  return result;
}

//----- (004852A0) --------------------------------------------------------
char __thiscall CMagicWideIce::GetMagic(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 58;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 63;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 68;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00485310) --------------------------------------------------------
int __thiscall sub_485310(void *this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v4; // esi@1
  void *v5; // ST14_4@1
  int v6; // esi@1
  __int64 v7; // qax@1
  int v9; // [sp+4h] [bp-14h]@5
  signed int v10; // [sp+8h] [bp-10h]@2
  int v11; // [sp+10h] [bp-8h]@1

  v5 = this;
  v6 = 3 * *(_DWORD *)(a2 + 60) / 2 + sub_483260(this, a2);
  v7 = 7 * *((_DWORD *)v5 + 2) * CChar::GetInt(a2) / 3;
  v11 = v6 + (((_DWORD)v7 - HIDWORD(v7)) >> 1) + 360;
  v4 = 3 * *(_DWORD *)(a2 + 60) / 2 + sub_483260(v5, a2);
  v3 = 10 * *((_DWORD *)v5 + 2) * CChar::GetInt(a2);
  if ( v11 >= 700 )
    v10 = 700;
  else
    v10 = v11;
  if ( v4 + (((BYTE4(v3) & 3) + (_DWORD)v3) >> 2) / 2 + 700 >= 1000 )
    v9 = 1000;
  else
    v9 = v4 + (((BYTE4(v3) & 3) + (_DWORD)v3) >> 2) / 2 + 700;
  return a3 + sub_406E10(v10, v9);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00485400) --------------------------------------------------------
signed int __userpurge sub_485400<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 43);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00485430) --------------------------------------------------------
int __thiscall sub_485430(int this, int a2, int a3)
{
  __int64 v3; // qax@1
  int v5; // [sp+4h] [bp-Ch]@2

  v3 = 3 * *(_DWORD *)(a2 + 60) / 2 + 2 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 6;
  if ( (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 480 >= 500 )
    v5 = 500;
  else
    v5 = (((_DWORD)v3 - HIDWORD(v3)) >> 1) + 480;
  return v5 + a3;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004854A0) --------------------------------------------------------
signed int __userpurge sub_4854A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 45);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (004854D0) --------------------------------------------------------
LONG __userpurge sub_4854D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int v7; // ST24_4@1
  LONG result; // eax@2
  int v9; // eax@5
  int v10; // [sp+0h] [bp-10h]@1
  int v11; // [sp+8h] [bp-8h]@1
  int v12; // [sp+Ch] [bp-4h]@3

  v10 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"dd");
  v7 = sub_491080(*(_DWORD *)(a5 + 316));
  if ( CSMap::IsValidTile((void *)v7, (int)&v11, 0) )
  {
    if ( (*(int (__thiscall **)(int, int, int, int))(*(_DWORD *)v10 + 100))(v10, a5, v11, v12) )
    {
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004855D0) --------------------------------------------------------
int __thiscall sub_4855D0(void *this, int a2, int a3)
{
  int result; // eax@3

  if ( a3 )
    result = (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 92))(
               this,
               a2,
               *(_DWORD *)(a3 + 332),
               *(_DWORD *)(a3 + 336));
  return result;
}

//----- (00485610) --------------------------------------------------------
LONG __userpurge sub_485610<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // ST24_4@1
  LONG result; // eax@2
  int v9; // [sp+0h] [bp-8h]@1

  v9 = a1;
  v7 = sub_491080(*(_DWORD *)(a5 + 316));
  if ( CSMap::IsValidTile((void *)v7, (int)&a6, 0) )
  {
    if ( (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 104))(v9, a5, a6, a7) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004856D0) --------------------------------------------------------
int __userpurge CChainLitning::GetMagic<eax>(void *a1<ecx>, DWORD a2<ebx>, int a3, char a4, int a5)
{
  void *v6; // ST24_4@1
  int v7; // esi@1
  __int64 v8; // qax@1
  int v9; // ST28_4@1
  int v10; // esi@1
  int v11; // edi@1
  __int64 v12; // qax@1
  int v13; // ST2C_4@1

  v6 = a1;
  v7 = sub_483260(a1, a3);
  v8 = 3 * *(_DWORD *)(a3 + 60) / 2 + 5 * *((_DWORD *)v6 + 2) * 3 * CChar::GetInt(a3) / 2 / 3;
  v9 = v7 + (((_DWORD)v8 - HIDWORD(v8)) >> 1) + 360;
  v10 = sub_483260(v6, a3);
  v11 = 3 * *(_DWORD *)(a3 + 60) / 2;
  v12 = 10 * *((_DWORD *)v6 + 2) * 3 * CChar::GetInt(a3) / 2;
  v13 = sub_406E10(v9, v10 + (v11 + (((_DWORD)v12 - HIDWORD(v12)) >> 1)) / 2 + 700);
  return CMonsterMagic::Create(a2, v11, v10, -28, *(_DWORD *)(a3 + 316), (int)&a4, 1, a3, v13, 16000);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004857C0) --------------------------------------------------------
int __userpurge CChainLitning::Redistribute<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5, int a6)
{
  int v7; // esi@1
  __int64 v8; // qax@1
  __int64 v9; // qax@1

  v7 = 3 * *(_DWORD *)(a4 + 60) / 2;
  v8 = 10 * *(_DWORD *)(a1 + 8) * CChar::GetInt(a4);
  v9 = v7 + (((BYTE4(v8) & 3) + (_DWORD)v8) >> 2);
  return CMonsterMagic::Create(
           a2,
           a3,
           v7,
           -27,
           *(_DWORD *)(a4 + 316),
           (int)&a5,
           1,
           a4,
           60 * ((((_DWORD)v9 - HIDWORD(v9)) >> 1) + 240) / 100,
           16000);
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (00485840) --------------------------------------------------------
int __userpurge sub_485840<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, int a4, char a5, int a6)
{
  int v7; // esi@1
  __int64 v8; // qax@1

  v7 = 3 * *(_DWORD *)(a4 + 60) / 2;
  v8 = v7 + 14 * *(_DWORD *)(a1 + 8) * CChar::GetInt(a4) / 3;
  return CMonsterMagic::Create(
           a2,
           a3,
           v7,
           -26,
           *(_DWORD *)(a4 + 316),
           (int)&a5,
           1,
           a4,
           60 * ((((_DWORD)v8 - HIDWORD(v8)) >> 1) + 380) / 100,
           16000);
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (004858C0) --------------------------------------------------------
int __userpurge sub_4858C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char a6, int a7)
{
  int v8; // ST1C_4@1
  int v9; // eax@1

  v8 = a1;
  v9 = CChar::GetAttack(a5);
  return CMonsterMagic::Create(
           a2,
           a3,
           a4,
           -25,
           *(_DWORD *)(a5 + 316),
           (int)&a6,
           1,
           a5,
           (200 * *(_DWORD *)(v8 + 8) + 50) * v9 / 100 / 10,
           12000);
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00485930) --------------------------------------------------------
char __thiscall sub_485930(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 70;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00485970) --------------------------------------------------------
LONG __userpurge sub_485970<eax>(int a1<ecx>, DWORD a2<ebx>, int a3, int a4, int a5)
{
  LONG result; // eax@1
  __int64 v6; // qax@3
  int v7; // edi@3
  DWORD v8; // esi@3
  int v9; // eax@6
  int v10; // [sp+8h] [bp-10h]@4
  int v11; // [sp+Ch] [bp-Ch]@1
  int v12; // [sp+10h] [bp-8h]@3

  v11 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a3, 0);
  if ( result )
  {
    v12 = sub_480F20((void *)v11, a3);
    v8 = sub_406E10(0, 2 * *(_DWORD *)(v11 + 8));
    v7 = 15 * *(_DWORD *)(a3 + 60) / 10;
    v6 = v7 + 5 * *(_DWORD *)(v11 + 8) * CChar::GetWis(a3) / 10;
    if ( (signed int)(v8 + (unsigned int)(v12 * (((_DWORD)v6 - HIDWORD(v6)) >> 1)) / *(_DWORD *)(v11 + 44) + 100) >= 50 * *(_DWORD *)(v11 + 8) + 50 )
      v10 = 50 * *(_DWORD *)(v11 + 8) + 50;
    else
      v10 = v8 + (unsigned int)(v12 * (((_DWORD)v6 - HIDWORD(v6)) >> 1)) / *(_DWORD *)(v11 + 44) + 100;
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a3 + 88))(a3, 7, 1, v10);
    v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
    (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a3 + 88))(a3, 8, 0, v9);
    std___Mpunct_wchar_t___do_frac_digits(a3);
    std___Mpunct_wchar_t___do_frac_digits(a3);
    result = CChar::WriteInSight(a2, v7, v8, a3, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);

//----- (00485AB0) --------------------------------------------------------
signed int __userpurge sub_485AB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 10);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00485AE0) --------------------------------------------------------
bool __thiscall sub_485AE0(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (00485B80) --------------------------------------------------------
int __userpurge sub_485B80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  int v8; // ST24_4@6
  int v9; // eax@6
  int v10; // eax@6
  int v11; // [sp+0h] [bp-18h]@1
  int v12; // [sp+Ch] [bp-Ch]@1
  int v13; // [sp+14h] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  result = sub_450810(a2, a3, a4, v12);
  v13 = result;
  if ( result )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v13) )
    {
      v8 = sub_480F20((void *)v11, a5);
      v9 = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 80))(v11, a5, v13);
      (*(void (__cdecl **)(int, signed int, signed int, unsigned int))(*(_DWORD *)v13 + 88))(
        v13,
        7,
        1,
        (unsigned int)(v8 * v9) / *(_DWORD *)(v11 + 44));
      v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
      std___Mpunct_wchar_t___do_frac_digits(v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      if ( *(_DWORD *)(v11 + 40) )
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  else
  {
    if ( *(_DWORD *)(v11 + 40) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00485CE0) --------------------------------------------------------
int __thiscall sub_485CE0(int this, int a2, int a3)
{
  int v3; // esi@1
  __int64 v4; // qax@1
  int v6; // [sp+8h] [bp-Ch]@2
  int v7; // [sp+Ch] [bp-8h]@1
  int v8; // [sp+10h] [bp-4h]@1

  v7 = this;
  v3 = 30 * *(_DWORD *)(this + 8);
  v4 = 7 * *(_DWORD *)(a2 + 60) / 11 + 3 * *(_DWORD *)(this + 8) * CChar::GetWis(a2) / 11;
  v8 = sub_406E10(0, 2 * *(_DWORD *)(v7 + 8)) + v3 + (((_DWORD)v4 - HIDWORD(v4)) >> 1) + 70;
  if ( v8 >= 40 * *(_DWORD *)(v7 + 8) + 100 )
    v6 = 40 * *(_DWORD *)(v7 + 8) + 100;
  else
    v6 = v8;
  return v6;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);

//----- (00485D80) --------------------------------------------------------
signed int __userpurge sub_485D80<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 16);
  sub_480340((void *)(a5 + 624), 22);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00485DC0) --------------------------------------------------------
int __thiscall sub_485DC0(int this, int a2, int a3)
{
  int v3; // esi@1
  __int64 v4; // qax@1
  int v6; // [sp+8h] [bp-Ch]@2
  int v7; // [sp+Ch] [bp-8h]@1
  int v8; // [sp+10h] [bp-4h]@1

  v7 = this;
  v3 = 50 * *(_DWORD *)(this + 8);
  v4 = 8 * *(_DWORD *)(a2 + 60) / 11 + 5 * *(_DWORD *)(this + 8) * CChar::GetWis(a2) / 9;
  v8 = sub_406E10(0, *(_DWORD *)(v7 + 8)) + v3 + (((_DWORD)v4 - HIDWORD(v4)) >> 1) + 500;
  if ( v8 >= 50 * *(_DWORD *)(v7 + 8) + 650 )
    v6 = 50 * *(_DWORD *)(v7 + 8) + 650;
  else
    v6 = v8;
  return v6;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);

//----- (00485E60) --------------------------------------------------------
signed int __userpurge sub_485E60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 28);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00485E90) --------------------------------------------------------
signed int __thiscall sub_485E90(int this, int a2, int a3)
{
  int v3; // esi@1
  signed int v5; // [sp+4h] [bp-Ch]@2
  int v6; // [sp+Ch] [bp-4h]@1

  v3 = 100 * *(_DWORD *)(this + 8) + 11 * CChar::GetWis(a2) / 3 + 750;
  v6 = sub_406E10(0, 100) + v3;
  if ( v6 >= 1600 )
    v5 = 1600;
  else
    v5 = v6;
  return v5;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);

//----- (00485EF0) --------------------------------------------------------
char __thiscall sub_485EF0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 60;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 66;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00485F50) --------------------------------------------------------
int __stdcall sub_485F50(int a1, int a2)
{
  return 25 * CChar::GetMaxHP(a2) / 100;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00485F70) --------------------------------------------------------
signed int __userpurge sub_485F70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 55);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00485FA0) --------------------------------------------------------
int __thiscall sub_485FA0(int this, int a2, int a3)
{
  return (20 * *(_DWORD *)(this + 8) + 15) * CChar::GetMaxHP(a3) / 100;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00485FD0) --------------------------------------------------------
char __thiscall sub_485FD0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 62;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 69;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00486030) --------------------------------------------------------
int __stdcall sub_486030(int a1, int a2)
{
  return CChar::GetMaxHP(a2);
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00486050) --------------------------------------------------------
int __thiscall sub_486050(int this, int a2, int a3, int a4)
{
  int result; // eax@2

  if ( a4 )
  {
    *(_DWORD *)(a2 + 576) -= *(_DWORD *)(this + 8);
    result = a2;
    *(_DWORD *)(a2 + 576) += a3;
  }
  else
  {
    result = this;
    *(_DWORD *)(a2 + 576) += *(_DWORD *)(this + 8);
  }
  return result;
}

//----- (004860B0) --------------------------------------------------------
bool __thiscall sub_4860B0(int this, int a2)
{
  return *(_DWORD *)(this + 8) == 1 && *(_DWORD *)(a2 + 464) & 2 && *(_DWORD *)(a2 + 60) >= 30;
}

//----- (004860F0) --------------------------------------------------------
int __thiscall sub_4860F0(int this, int a2, signed int a3, int a4)
{
  int result; // eax@8
  signed int v5; // [sp+0h] [bp-10h]@10
  signed int v6; // [sp+4h] [bp-Ch]@6
  signed int v7; // [sp+8h] [bp-8h]@3
  int v8; // [sp+Ch] [bp-4h]@1

  v8 = this;
  if ( a4 )
  {
    *(_DWORD *)(a2 + 180) -= *(_DWORD *)(this + 8);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 31, 1, a3);
    if ( *(_DWORD *)(v8 + 8) >= 10 )
      v7 = 10;
    else
      v7 = *(_DWORD *)(v8 + 8);
    *(_DWORD *)(a2 + 256) -= v7;
    if ( a3 >= 10 )
      v6 = 10;
    else
      v6 = a3;
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 31, 1, v6);
  }
  else
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(a2, 31, 1, *(_DWORD *)(this + 8));
    if ( *(_DWORD *)(v8 + 8) >= 10 )
      v5 = 10;
    else
      v5 = *(_DWORD *)(v8 + 8);
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 96))(a2, 31, 1, v5);
  }
  return result;
}

//----- (004861F0) --------------------------------------------------------
bool __thiscall sub_4861F0(int this, int a2)
{
  bool result; // eax@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) <= 0 || *(_DWORD *)(this + 8) >= 5 )
    {
      if ( *(_DWORD *)(this + 8) < 5 || *(_DWORD *)(this + 8) >= 10 )
      {
        if ( *(_DWORD *)(this + 8) < 10 || *(_DWORD *)(this + 8) >= 15 )
          result = 0;
        else
          result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 36;
      }
      else
      {
        result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 28;
      }
    }
    else
    {
      result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 9;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004862A0) --------------------------------------------------------
signed int __userpurge sub_4862A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( !*(_DWORD *)(a5 + 460) )
  {
    if ( *(_DWORD *)(a5 + 464) & 4 )
      sub_480340((void *)(a5 + 624), 36);
  }
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (004862F0) --------------------------------------------------------
int __stdcall sub_4862F0(int a1, int a2, int a3)
{
  int result; // eax@2

  if ( a3 )
  {
    *(_DWORD *)(a1 + 180) -= 80;
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 92))(a1, 31, 1, 80);
  }
  else
  {
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 92))(a1, 31, 1, 80);
  }
  return result;
}

//----- (00486350) --------------------------------------------------------
int __stdcall sub_486350(int a1, int a2, int a3)
{
  int result; // eax@2

  if ( a3 )
  {
    *(_DWORD *)(a1 + 180) -= 20;
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 92))(a1, 31, 1, 20);
  }
  else
  {
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a1 + 92))(a1, 31, 1, 20);
  }
  return result;
}

//----- (004863B0) --------------------------------------------------------
bool __thiscall sub_4863B0(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= *(_DWORD *)(a2 + 60) - 9 * *((_DWORD *)v5 + 2);
}

//----- (00486420) --------------------------------------------------------
LONG __userpurge sub_486420<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  __int64 v8; // qax@3
  void *v9; // eax@5
  int v10; // [sp+0h] [bp-Ch]@3
  int v11; // [sp+8h] [bp-4h]@1

  v11 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CChar::IsMState(a5, 1i64);
    v10 = v8;
    if ( v8 )
      (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 124))(a5, 1, 0);
    v9 = CBuff::CreateBuff(2, 10 * *(_DWORD *)(v11 + 8) + 720, *(_DWORD *)(v11 + 8), v10);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 180))(a5, v9);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(
      a5,
      8,
      0,
      *(_DWORD *)(a5 + 60) - 9 * *(_DWORD *)(v11 + 8));
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00486500) --------------------------------------------------------
int __thiscall sub_486500(int this, int a2, int a3, int a4)
{
  int result; // eax@2

  if ( a4 )
  {
    *(_DWORD *)(a2 + 968) -= *(_DWORD *)(this + 8);
    result = a2;
    *(_DWORD *)(a2 + 968) += a3;
  }
  else
  {
    result = this;
    *(_DWORD *)(a2 + 968) += *(_DWORD *)(this + 8);
  }
  return result;
}

//----- (00486560) --------------------------------------------------------
int __thiscall sub_486560(int this, int a2, int a3, int a4)
{
  int result; // eax@2

  if ( a4 )
  {
    *(_DWORD *)(a2 + 972) -= *(_DWORD *)(this + 8);
    result = a2;
    *(_DWORD *)(a2 + 972) += a3;
  }
  else
  {
    result = this;
    *(_DWORD *)(a2 + 972) += *(_DWORD *)(this + 8);
  }
  return result;
}

//----- (004865C0) --------------------------------------------------------
int __thiscall sub_4865C0(int this, int a2, int a3, int a4)
{
  int result; // eax@2

  if ( a4 )
  {
    *(_DWORD *)(a2 + 976) -= *(_DWORD *)(this + 8);
    result = a2;
    *(_DWORD *)(a2 + 976) += a3;
  }
  else
  {
    result = this;
    *(_DWORD *)(a2 + 976) += *(_DWORD *)(this + 8);
  }
  return result;
}

//----- (00486620) --------------------------------------------------------
LONG __userpurge sub_486620<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  void *v8; // eax@3
  int v9; // eax@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CBuff::CreateBuff(3, 900, 2 * *(_DWORD *)(v10 + 8) + 3, *(_DWORD *)(v10 + 8));
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 180))(a5, v8);
    v9 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004866D0) --------------------------------------------------------
char __thiscall sub_4866D0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 35;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 40;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 45;
        break;
      case 4:
        result = *(_DWORD *)(a2 + 60) >= 50;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00486760) --------------------------------------------------------
bool __thiscall sub_486760(int this, int a2)
{
  bool result; // eax@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) <= 0 || *(_DWORD *)(this + 8) >= 3 )
    {
      if ( *(_DWORD *)(this + 8) < 3 || *(_DWORD *)(this + 8) >= 6 )
      {
        if ( *(_DWORD *)(this + 8) < 6 || *(_DWORD *)(this + 8) >= 9 )
        {
          if ( *(_DWORD *)(this + 8) < 9 || *(_DWORD *)(this + 8) >= 12 )
          {
            if ( *(_DWORD *)(this + 8) < 12 || *(_DWORD *)(this + 8) >= 15 )
              result = 0;
            else
              result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 37;
          }
          else
          {
            result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 35;
          }
        }
        else
        {
          result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 33;
        }
      }
      else
      {
        result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 31;
      }
    }
    else
    {
      result = *(_DWORD *)(a2 + 60) > *(_DWORD *)(this + 8) + 29;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00486860) --------------------------------------------------------
bool __thiscall sub_486860(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && !CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3)
      && !CPlayer::IsEState(a3, 24);
}

//----- (00486910) --------------------------------------------------------
__int32 __userpurge sub_486910<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@2
  int v8; // eax@4
  int v9; // [sp+0h] [bp-10h]@1
  int v10; // [sp+4h] [bp-Ch]@1
  int v11; // [sp+Ch] [bp-4h]@1

  v9 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v11 = sub_450810(a2, a3, a4, v10);
  if ( v11 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v9)(v9, a5, v11) )
    {
      CPlayer::AddEState(v11, 8);
      (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v9 + 80))(v9, a5, v11);
      CPlayer::Write(a2, a3, a4, v11, 67, (unsigned int)"b");
      v8 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      std___Mpunct_wchar_t___do_frac_digits(v11);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v11, a2, a3, a4, v11 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00486A50) --------------------------------------------------------
int __stdcall sub_486A50(int a1, int a2)
{
  int result; // eax@1

  *(_DWORD *)(a2 + 588) = 13 * CChar::GetMaxHP(a2) / 100;
  result = 11 * CChar::GetMaxMP(a2) / 100;
  *(_DWORD *)(a2 + 592) = result;
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (00486AA0) --------------------------------------------------------
signed int __userpurge sub_486AA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 29);
  sub_480340((void *)(a5 + 624), 34);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00486AE0) --------------------------------------------------------
int __thiscall sub_486AE0(void *this, int a2, int a3)
{
  int result; // eax@1
  void *v4; // ST04_4@1
  signed int v5; // eax@1
  signed int v6; // eax@1
  int v7; // ecx@1

  v4 = this;
  v5 = CChar::GetMaxHP(a3);
  *(_DWORD *)(a3 + 588) = v5 / 10 + *((_DWORD *)v4 + 2) * v5 / 4;
  v6 = CChar::GetMaxMP(a3);
  v7 = *((_DWORD *)v4 + 2) * v6 / 10;
  result = v6 / 10;
  *(_DWORD *)(a3 + 592) = result + v7;
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (00486B60) --------------------------------------------------------
int __thiscall sub_486B60(void *this, int a2, int a3)
{
  int result; // eax@1
  void *v4; // ST04_4@1
  signed int v5; // eax@1
  signed int v6; // eax@1
  int v7; // ecx@1

  v4 = this;
  v5 = CChar::GetMaxHP(a3);
  *(_DWORD *)(a3 + 588) = v5 / 10 + v5 * (12 * *((_DWORD *)v4 + 2) - 9) / 100;
  v6 = CChar::GetMaxMP(a3);
  v7 = v6 * (4 * *((_DWORD *)v4 + 2) - 3) / 100;
  result = v6 / 10;
  *(_DWORD *)(a3 + 592) = result + v7;
  return result;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (00486BF0) --------------------------------------------------------
int __thiscall sub_486BF0(int this, int a2, int a3, int a4)
{
  int result; // eax@2

  if ( a4 )
  {
    *(_DWORD *)(a2 + 264) -= *(_DWORD *)(this + 8) + 7;
    result = a2;
    *(_DWORD *)(a2 + 264) += a3 + 7;
  }
  else
  {
    result = a2;
    *(_DWORD *)(a2 + 264) += *(_DWORD *)(this + 8) + 7;
  }
  return result;
}

//----- (00486C60) --------------------------------------------------------
signed int __userpurge sub_486C60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 20);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00486C90) --------------------------------------------------------
int __thiscall sub_486C90(int this, int a2, int a3, int a4)
{
  int result; // eax@2

  if ( a4 )
  {
    *(_DWORD *)(a2 + 264) -= *(_DWORD *)(this + 8);
    result = a2;
    *(_DWORD *)(a2 + 264) += a3;
  }
  else
  {
    result = this;
    *(_DWORD *)(a2 + 264) += *(_DWORD *)(this + 8);
  }
  return result;
}

//----- (00486CF0) --------------------------------------------------------
char __thiscall sub_486CF0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 62;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 68;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00486D50) --------------------------------------------------------
LONG __userpurge sub_486D50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@2
  void *v8; // eax@3
  int v9; // eax@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  if ( (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0) )
  {
    v8 = CBuff::CreateBuff(1, 900, *(_DWORD *)(v10 + 56), *(_DWORD *)(v10 + 60));
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 180))(a5, v8);
    v9 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00486E20) --------------------------------------------------------
bool __thiscall sub_486E20(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a3)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3)
      && !CPlayer::IsWearBuffStandard(a3)
      && CChar::IsNormal(a2)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0);
}

//----- (00486EC0) --------------------------------------------------------
__int32 __userpurge sub_486EC0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@2
  void *v8; // eax@4
  int v9; // ST20_4@4
  int v10; // eax@4
  int v11; // [sp+0h] [bp-10h]@1
  int v12; // [sp+4h] [bp-Ch]@1
  int v13; // [sp+Ch] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v13 = sub_450810(a2, a3, a4, v12);
  if ( v13 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v13) )
    {
      v8 = CBuff::CreateBuff(12, 600 * *(_DWORD *)(v11 + 8), 15 * *(_DWORD *)(v11 + 8), v11);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)v13 + 180))(v13, v8);
      v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
      std___Mpunct_wchar_t___do_frac_digits(v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00487000) --------------------------------------------------------
__int32 __userpurge sub_487000<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  void *v8; // eax@10
  int v9; // eax@11
  int v10; // [sp+0h] [bp-18h]@10
  int v11; // [sp+4h] [bp-14h]@1
  int v12; // [sp+Ch] [bp-Ch]@4
  char v13; // [sp+13h] [bp-5h]@1
  int v14; // [sp+14h] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v14 = 0;
  LOBYTE(v10) = v13;
  if ( v13 )
  {
    if ( v13 == 1 )
      v14 = CMonster::FindMonster(a2, a3, a4, v12);
  }
  else
  {
    v14 = sub_450810(a2, a3, a4, v12);
  }
  if ( v14 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v14) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 40))(v11, a5, v14) )
      {
        v8 = CBuff::CreateBuff(8, 8, v10, v11);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v14 + 180))(v14, v8);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v14);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v14, a2, a3, a4, v14 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00487190) --------------------------------------------------------
signed int __userpurge sub_487190<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 37);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (004871C0) --------------------------------------------------------
LONG __userpurge sub_4871C0<eax>(LONG a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@2
  int v8; // ST34_4@5
  int v9; // ST20_4@7
  int v10; // ST1C_4@7
  int v11; // eax@7
  int v12; // eax@13
  int v13; // [sp+0h] [bp-18h]@10
  LONG v14; // [sp+4h] [bp-14h]@1
  int v15; // [sp+8h] [bp-10h]@6
  int v16; // [sp+14h] [bp-4h]@5

  v14 = a1;
  if ( (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0) )
  {
    v8 = sub_480F20((void *)v14, a5);
    v16 = (unsigned int)(v8 * (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v14 + 84))(v14, a5))
        / *(_DWORD *)(v14 + 44);
    if ( *(_DWORD *)(a5 + 1016) )
    {
      v15 = CParty::FindParty(a2, a3, a4, *(_DWORD *)(a5 + 1016));
      if ( v15 )
      {
        v9 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v14 + 80))(v14);
        v10 = *(_DWORD *)(v14 + 4);
        v11 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v14 + 88))(v14);
        CParty::Healing(v15, a2, a3, a4, a5, v11, v16, v10, v9);
        CIOObject::Release(v15, a2, a3, a4);
      }
    }
    else
    {
      if ( (*(int (__thiscall **)(_DWORD))(*(_DWORD *)v14 + 88))(v14) )
        v13 = v16 * CChar::GetMaxHP(a5) / 100;
      else
        v13 = v16;
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 7, 1, v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      (*(void (__thiscall **)(_DWORD))(*(_DWORD *)v14 + 80))(v14);
      CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
    }
    v12 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v14 + 32))(v14, 0);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, v12);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  else
  {
    result = v14;
    if ( *(_DWORD *)(v14 + 40) )
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00487390) --------------------------------------------------------
int __thiscall sub_487390(int this, int a2)
{
  __int64 v2; // qax@1
  int v4; // [sp+4h] [bp-Ch]@2
  int v5; // [sp+8h] [bp-8h]@1
  int v6; // [sp+Ch] [bp-4h]@1

  v5 = this;
  v2 = *(_DWORD *)(a2 + 60) / 2 + 8 * *(_DWORD *)(this + 8) * CChar::GetWis(a2) / 7;
  v6 = 60 * *(_DWORD *)(v5 + 8) + (((_DWORD)v2 - HIDWORD(v2)) >> 1) + sub_406E10(0, 10 * *(_DWORD *)(v5 + 8)) + 100;
  if ( v6 >= 180 * *(_DWORD *)(v5 + 8) )
    v4 = 180 * *(_DWORD *)(v5 + 8);
  else
    v4 = v6;
  return v4;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEE0: using guessed type int __thiscall CChar::GetWis(_DWORD);

//----- (00487430) --------------------------------------------------------
signed int __userpurge sub_487430<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 57);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00487460) --------------------------------------------------------
signed int __userpurge sub_487460<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v6; // ST04_4@1

  v6 = a1;
  sub_480340((void *)(a5 + 624), 58);
  return sub_481070(v6, a2, a3, a4, a5);
}

//----- (00487490) --------------------------------------------------------
int __stdcall sub_487490(int a1)
{
  return 8 * *(_DWORD *)(a1 + 60) / 11 + sub_406E10(0, 100) + 550;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (004874D0) --------------------------------------------------------
char __thiscall sub_4874D0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 58;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00487510) --------------------------------------------------------
LONG __userpurge sub_487510<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  void *v8; // eax@3
  int v9; // ST20_4@3
  int v10; // eax@3
  int v11; // [sp+0h] [bp-4h]@1

  v11 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CBuff::CreateBuff(9, 900, 3, v11);
    (*(void (__thiscall **)(int, void *))(*(_DWORD *)a5 + 180))(a5, v8);
    v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
    (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004875B0) --------------------------------------------------------
__int32 __userpurge sub_4875B0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  void *v7; // eax@1
  __int32 result; // eax@8
  void *v9; // eax@18
  int v10; // eax@19
  int v11; // [sp+0h] [bp-30h]@18
  int v12; // [sp+4h] [bp-2Ch]@1
  char v13; // [sp+8h] [bp-28h]@1
  int v14; // [sp+Ch] [bp-24h]@18
  int v15; // [sp+10h] [bp-20h]@18
  int v16; // [sp+14h] [bp-1Ch]@17
  int v17; // [sp+18h] [bp-18h]@12
  char v18; // [sp+1Fh] [bp-11h]@9
  int v19; // [sp+20h] [bp-10h]@1
  char v20; // [sp+24h] [bp-Ch]@1
  int v21; // [sp+28h] [bp-8h]@9
  char v22; // [sp+2Ch] [bp-4h]@1

  v12 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)&unk_4B967C);
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1020), a2, a3, a4);
  v19 = 0;
  sub_44AE20(a5 + 1068, (int)&v22, (int)&v20);
  v7 = sub_430C20(a5 + 1068, &v13);
  if ( (unsigned __int8)sub_47D070(v7) )
  {
    v19 = *(_DWORD *)(sub_420250((int *)&v22) + 4);
    if ( *(_DWORD *)(*(_DWORD *)(v19 + 40) + 64) == 360 )
    {
      if ( !(*(int (__thiscall **)(int, int, signed int, signed int))(*(_DWORD *)v19 + 120))(v19, a5, 9, -1) )
        CPlayer::_OutofInven(a5, a2, a3, a4, v19);
    }
    else
    {
      v19 = 0;
    }
  }
  CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
  if ( v19 )
  {
    v21 = 0;
    LOBYTE(v11) = v18;
    if ( v18 )
    {
      if ( v18 == 1 )
        v21 = CMonster::FindMonster(a2, a3, a4, v17);
    }
    else
    {
      v21 = sub_450810(a2, a3, a4, v17);
    }
    if ( v21 )
    {
      if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v12)(v12, a5, v21) )
      {
        v16 = 0;
        if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v12 + 40))(v12, a5, v21) )
        {
          v16 = 1;
          v15 = (*(int (__thiscall **)(int, int, signed int))(*(_DWORD *)v21 + 144))(v21, a5, 4);
          v14 = *(_DWORD *)(a5 + 60) + 10 * *(_DWORD *)(v12 + 8);
          v14 -= v15 * v14 / 100;
          v9 = CBuff::CreateBuff(11, 10 * *(_DWORD *)(v12 + 8) + 10, v14, v11);
          (*(void (__thiscall **)(int, void *))(*(_DWORD *)v21 + 180))(v21, v9);
        }
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v21 + 80))(v21, a5);
        v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v12 + 32))(v12, 0);
        (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
        std___Mpunct_wchar_t___do_frac_digits(v21);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
      }
      else
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
      result = sub_4239C0(v21, a2, a3, a4, v21 + 352);
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00487860) --------------------------------------------------------
LONG __userpurge sub_487860<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  void *v8; // eax@3
  int v9; // ST20_4@3
  int v10; // eax@3
  int v11; // [sp+0h] [bp-4h]@1

  v11 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CBuff::CreateBuff(10, 900, 5, v11);
    (*(void (__thiscall **)(int, void *))(*(_DWORD *)a5 + 180))(a5, v8);
    v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
    (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00487900) --------------------------------------------------------
bool __thiscall sub_487900(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3)
      && *(_DWORD *)(a2 + 1016)
      && *(_DWORD *)(a2 + 1016) == *(_DWORD *)(a3 + 1016)
      && a2 != a3;
}

//----- (004879D0) --------------------------------------------------------
int __userpurge sub_4879D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  void *v8; // eax@4
  int v9; // ST20_4@4
  int v10; // eax@4
  int v11; // [sp+0h] [bp-10h]@1
  int v12; // [sp+4h] [bp-Ch]@1
  int v13; // [sp+Ch] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  result = sub_450810(a2, a3, a4, v12);
  v13 = result;
  if ( result )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v13) )
    {
      v8 = CBuff::CreateBuff(13, 300 * *(_DWORD *)(v11 + 8) + 300, -(10 * *(_DWORD *)(v11 + 8) + 40), v11);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)v13 + 180))(v13, v8);
      v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
      std___Mpunct_wchar_t___do_frac_digits(v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00487AE0) --------------------------------------------------------
char __thiscall sub_487AE0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 53;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 62;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00487B40) --------------------------------------------------------
bool __thiscall sub_487B40(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 1)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3)
      && (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 176))(a2, a3, 0);
}

//----- (00487BF0) --------------------------------------------------------
int __userpurge sub_487BF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  int result; // eax@1
  void *v8; // eax@5
  int v9; // eax@6
  int v10; // [sp+0h] [bp-10h]@1
  int v11; // [sp+4h] [bp-Ch]@1
  int v12; // [sp+Ch] [bp-4h]@1

  v10 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  result = sub_450810(a2, a3, a4, v11);
  v12 = result;
  if ( result )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v10)(v10, a5, v12) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v10 + 40))(v10, a5, v12) )
      {
        v8 = CBuff::CreateBuff(7, 3, v10, v11);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v12 + 180))(v12, v8);
      }
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v12);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    result = sub_4239C0(v12, a2, a3, a4, v12 + 352);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00487CF0) --------------------------------------------------------
bool __thiscall sub_487CF0(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3)
      && *(_DWORD *)(a3 + 460) == 1
      && (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 176))(a2, a3, 0);
}

//----- (00487DB0) --------------------------------------------------------
__int32 __userpurge sub_487DB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@2
  void *v8; // eax@5
  int v9; // eax@6
  int v10; // [sp+0h] [bp-10h]@1
  int v11; // [sp+4h] [bp-Ch]@1
  int v12; // [sp+Ch] [bp-4h]@1

  v10 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v12 = sub_450810(a2, a3, a4, v11);
  if ( v12 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v10)(v10, a5, v12) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v10 + 40))(v10, a5, v12) )
      {
        v8 = CBuff::CreateBuff(15, 8, v10, v11);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v12 + 180))(v12, v8);
      }
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v12);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v12, a2, a3, a4, v12 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00487EF0) --------------------------------------------------------
__int32 __userpurge sub_487EF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@2
  void *v8; // eax@4
  int v9; // ST20_4@4
  int v10; // eax@4
  int v11; // [sp+0h] [bp-10h]@1
  int v12; // [sp+4h] [bp-Ch]@1
  int v13; // [sp+Ch] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v13 = sub_450810(a2, a3, a4, v12);
  if ( v13 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v13) )
    {
      v8 = CBuff::CreateBuff(14, 300, v11, v12);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)v13 + 180))(v13, v8);
      v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
      std___Mpunct_wchar_t___do_frac_digits(v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00488010) --------------------------------------------------------
int __thiscall sub_488010(int this, int a2, int a3, int a4)
{
  int result; // eax@2
  int v5; // [sp+4h] [bp-4h]@1

  v5 = 2 * *(_DWORD *)(a2 + 68) * *(_DWORD *)(a2 + 68) / dword_4D6AB8[*(_DWORD *)(a2 + 460)];
  if ( a4 )
  {
    *(_DWORD *)(a2 + 112) -= v5 * (10 * *(_DWORD *)(this + 8) + 14) / 100;
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               5,
               1,
               v5 * (10 * a3 + 14) / 100);
  }
  else
  {
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 92))(
               a2,
               5,
               1,
               v5 * (10 * *(_DWORD *)(this + 8) + 14) / 100);
  }
  return result;
}
// 4D6AB8: using guessed type int dword_4D6AB8[];

//----- (004880D0) --------------------------------------------------------
int __thiscall sub_4880D0(int this, int a2, int a3)
{
  int result; // eax@1
  int v4; // ST08_4@1
  int v5; // [sp+18h] [bp+Ch]@1

  v5 = a3 + 4;
  v4 = *(_DWORD *)v5;
  *(_DWORD *)(a2 + 112) -= *(_DWORD *)(v5 - 4) * (10 * *(_DWORD *)(this + 8) + 14) / 100;
  result = *(_DWORD *)(a2 + 112) + v4 * (10 * *(_DWORD *)(this + 8) + 14) / 100;
  *(_DWORD *)(a2 + 112) = result;
  return result;
}

//----- (00488160) --------------------------------------------------------
char __thiscall sub_488160(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
    result = *(_DWORD *)(a2 + 60) >= 5 * *(_DWORD *)(this + 8) + 50;
  else
    result = 0;
  return result;
}

//----- (004881A0) --------------------------------------------------------
LONG __userpurge sub_4881A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  void *v8; // eax@3
  int v9; // eax@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CBuff::CreateBuff(27, 1200, 7 * *(_DWORD *)(v10 + 8) + 14, 3 * *(_DWORD *)(v10 + 8) + 14);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 180))(a5, v8);
    v9 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00488260) --------------------------------------------------------
char __thiscall sub_488260(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 56;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 62;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 70;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004882D0) --------------------------------------------------------
char __thiscall sub_4882D0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 58;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 67;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00488330) --------------------------------------------------------
char *__userpurge sub_488330<eax>(void *this<ecx>, DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, int a2, void *a3, int a4)
{
  char *result; // eax@1
  int v8; // eax@10
  int v9; // eax@15
  int v10; // [sp+0h] [bp-20h]@11
  void *v11; // [sp+8h] [bp-18h]@1
  int v12; // [sp+14h] [bp-Ch]@4
  char v13; // [sp+1Bh] [bp-5h]@1
  int v14; // [sp+1Ch] [bp-4h]@1

  v11 = this;
  result = sub_4975F0(ebx0, edi0, esi0, (char *)a3, a4, (unsigned int)"bd");
  v14 = 0;
  if ( v13 )
  {
    if ( v13 == 1 )
    {
      result = (char *)CMonster::FindMonster(ebx0, edi0, esi0, v12);
      v14 = (int)result;
    }
  }
  else
  {
    result = (char *)sub_450810(ebx0, edi0, esi0, v12);
    v14 = (int)result;
  }
  if ( v14 )
  {
    if ( (**(int (__thiscall ***)(void *, int, int))v11)(v11, a2, v14) )
    {
      if ( (*(int (__thiscall **)(void *, int, int))(*(_DWORD *)v11 + 40))(v11, a2, v14) )
      {
        v8 = CChar::GetAttack(a2);
        if ( (40 * *((_DWORD *)v11 + 2) + 50) * v8 / 50 >= *(_DWORD *)(v14 + 272) - 1 )
          v10 = *(_DWORD *)(v14 + 272) - 1;
        else
          v10 = (40 * *((_DWORD *)v11 + 2) + 50) * CChar::GetAttack(a2) / 50;
        if ( (*(int (__thiscall **)(int))(*(_DWORD *)v14 + 64))(v14) )
          *(_DWORD *)(v14 + 472) = GetTickCount() + 20000;
        (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)v14 + 88))(v14, 7, 0, v10);
        (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a2 + 88))(
          a2,
          7,
          1,
          v10 * (10 * *((_DWORD *)v11 + 2) + 20) / 50);
        v9 = (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
        (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a2 + 88))(a2, 8, 0, v9);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a2);
      std___Mpunct_wchar_t___do_frac_digits(v14);
      std___Mpunct_wchar_t___do_frac_digits(a2);
      CChar::WriteInSight(ebx0, edi0, esi0, a2, 63, (unsigned int)"bddbbwwb");
    }
    result = (char *)sub_4239C0(v14, ebx0, edi0, esi0, v14 + 352);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (00488540) --------------------------------------------------------
char __thiscall sub_488540(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 57;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 66;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004885A0) --------------------------------------------------------
__int32 __userpurge sub_4885A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  int v8; // ST3C_4@10
  int v9; // ST38_4@10
  void *v10; // eax@13
  int v11; // eax@14
  int v12; // [sp+0h] [bp-24h]@11
  int v13; // [sp+8h] [bp-1Ch]@1
  int v14; // [sp+Ch] [bp-18h]@10
  int v15; // [sp+18h] [bp-Ch]@4
  char v16; // [sp+1Fh] [bp-5h]@1
  int v17; // [sp+20h] [bp-4h]@1

  v13 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v17 = 0;
  if ( v16 )
  {
    if ( v16 == 1 )
      v17 = CMonster::FindMonster(a2, a3, a4, v15);
  }
  else
  {
    v17 = sub_450810(a2, a3, a4, v15);
  }
  if ( v17 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v13)(v13, a5, v17) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v13 + 40))(v13, a5, v17) )
      {
        v8 = (*(int (__thiscall **)(int, int, signed int))(*(_DWORD *)v17 + 144))(v17, a5, 3);
        v9 = (150 * *(_DWORD *)(v13 + 8) + 100) * CChar::GetAttack(a5) / 20;
        v14 = v9 - v8 * v9 / 100;
        if ( v14 >= 4500 )
          v12 = 4500;
        else
          v12 = v14;
        v10 = CBuff::CreateBuff(29, 30, v12 / 30, v12);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v17 + 180))(v17, v10);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v17 + 80))(v17, a5);
      v11 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v13 + 32))(v13, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v11);
      std___Mpunct_wchar_t___do_frac_digits(v17);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v17, a2, a3, a4, v17 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (004887B0) --------------------------------------------------------
char __thiscall sub_4887B0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 56;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 62;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 68;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00488820) --------------------------------------------------------
__int32 __userpurge sub_488820<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@2
  void *v8; // eax@4
  int v9; // ST20_4@4
  int v10; // eax@4
  int v11; // [sp+0h] [bp-10h]@1
  int v12; // [sp+4h] [bp-Ch]@1
  int v13; // [sp+Ch] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v13 = sub_450810(a2, a3, a4, v12);
  if ( v13 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v13) )
    {
      v8 = CBuff::CreateBuff(36, 900, 8 * *(_DWORD *)(v11 + 8) + 16, v11);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)v13 + 180))(v13, v8);
      v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v10);
      std___Mpunct_wchar_t___do_frac_digits(v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00488960) --------------------------------------------------------
char __thiscall CSuffering::Excute(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 57;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 62;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 66;
        break;
      case 4:
        result = *(_DWORD *)(a2 + 60) >= 69;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004889F0) --------------------------------------------------------
__int32 __userpurge sub_4889F0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@2
  void *v8; // eax@4
  int v9; // eax@4
  int v10; // [sp+0h] [bp-10h]@1
  int v11; // [sp+4h] [bp-Ch]@1
  int v12; // [sp+Ch] [bp-4h]@1

  v10 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v12 = sub_450810(a2, a3, a4, v11);
  if ( v12 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v10)(v10, a5, v12) )
    {
      v8 = CBuff::CreateBuff(37, 600, 30 * *(_DWORD *)(v10 + 8) + 5, 20 * *(_DWORD *)(v10 + 8) + 5);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)v12 + 180))(v12, v8);
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v12);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v12, a2, a3, a4, v12 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00488B30) --------------------------------------------------------
char __thiscall sub_488B30(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 62;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00488B70) --------------------------------------------------------
__int32 __userpurge sub_488B70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  void *v8; // eax@10
  int v9; // eax@11
  int v10; // [sp+0h] [bp-14h]@10
  int v11; // [sp+4h] [bp-10h]@1
  int v12; // [sp+8h] [bp-Ch]@4
  char v13; // [sp+Fh] [bp-5h]@1
  int v14; // [sp+10h] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v14 = 0;
  LOBYTE(v10) = v13;
  if ( v13 )
  {
    if ( v13 == 1 )
      v14 = CMonster::FindMonster(a2, a3, a4, v12);
  }
  else
  {
    v14 = sub_450810(a2, a3, a4, v12);
  }
  if ( v14 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v14) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 40))(v11, a5, v14) )
      {
        v8 = CBuff::CreateBuff(7, *(_DWORD *)(v11 + 8) + 1, v10, v11);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v14 + 180))(v14, v8);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v14);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v14, a2, a3, a4, v14 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00488CF0) --------------------------------------------------------
char *__userpurge sub_488CF0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  char *result; // eax@1
  void *v8; // eax@10
  int v9; // eax@11
  int v10; // [sp+0h] [bp-18h]@10
  int v11; // [sp+4h] [bp-14h]@1
  int v12; // [sp+Ch] [bp-Ch]@4
  char v13; // [sp+13h] [bp-5h]@1
  int v14; // [sp+14h] [bp-4h]@1

  v11 = a1;
  result = sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v14 = 0;
  LOBYTE(v10) = v13;
  if ( v13 )
  {
    if ( v13 == 1 )
    {
      result = (char *)CMonster::FindMonster(a2, a3, a4, v12);
      v14 = (int)result;
    }
  }
  else
  {
    result = (char *)sub_450810(a2, a3, a4, v12);
    v14 = (int)result;
  }
  if ( v14 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v14) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 40))(v11, a5, v14) )
      {
        v8 = CBuff::CreateBuff(20, 15, -30 * *(_DWORD *)(v11 + 8), v10);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v14 + 180))(v14, v8);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v14);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
    }
    result = (char *)sub_4239C0(v14, a2, a3, a4, v14 + 352);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00488E50) --------------------------------------------------------
char __thiscall sub_488E50(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 61;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00488E90) --------------------------------------------------------
__int32 __userpurge sub_488E90<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  void *v8; // eax@10
  int v9; // eax@11
  int v10; // [sp+0h] [bp-18h]@10
  int v11; // [sp+4h] [bp-14h]@1
  int v12; // [sp+Ch] [bp-Ch]@4
  char v13; // [sp+13h] [bp-5h]@1
  int v14; // [sp+14h] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v14 = 0;
  LOBYTE(v10) = v13;
  if ( v13 )
  {
    if ( v13 == 1 )
      v14 = CMonster::FindMonster(a2, a3, a4, v12);
  }
  else
  {
    v14 = sub_450810(a2, a3, a4, v12);
  }
  if ( v14 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v14) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 40))(v11, a5, v14) )
      {
        v8 = CBuff::CreateBuff(0, 8 * *(_DWORD *)(v11 + 8), -50, v10);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v14 + 180))(v14, v8);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v11 + 32))(v11, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v14);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v14, a2, a3, a4, v14 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00489030) --------------------------------------------------------
char __thiscall sub_489030(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 58;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 69;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00489090) --------------------------------------------------------
__int32 __userpurge sub_489090<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  int v8; // edx@8
  int v9; // eax@9
  int v10; // [sp+4h] [bp-10h]@1
  int v11; // [sp+8h] [bp-Ch]@4
  char v12; // [sp+Fh] [bp-5h]@1
  int v13; // [sp+10h] [bp-4h]@1

  v10 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v13 = 0;
  if ( v12 )
  {
    if ( v12 == 1 )
      v13 = CMonster::FindMonster(a2, a3, a4, v11);
  }
  else
  {
    v13 = sub_450810(a2, a3, a4, v11);
  }
  if ( v13 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v10)(v10, a5, v13) )
    {
      CChar::CancelBuffPrty(v13, v8, a2, a3, a4, 4);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v13 + 80))(v13, a5);
      v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v10 + 32))(v10, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004891E0) --------------------------------------------------------
__int32 __userpurge sub_4891E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  int v8; // eax@9
  int v9; // [sp+4h] [bp-10h]@1
  int v10; // [sp+8h] [bp-Ch]@4
  char v11; // [sp+Fh] [bp-5h]@1
  int v12; // [sp+10h] [bp-4h]@1

  v9 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v12 = 0;
  if ( v11 )
  {
    if ( v11 == 1 )
      v12 = CMonster::FindMonster(a2, a3, a4, v10);
  }
  else
  {
    v12 = sub_450810(a2, a3, a4, v10);
  }
  if ( v12 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v9)(v9, a5, v12) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v12 + 132))(v12, a5);
      v8 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      std___Mpunct_wchar_t___do_frac_digits(v12);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v12, a2, a3, a4, v12 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00489320) --------------------------------------------------------
bool __thiscall sub_489320(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 272) > (*(int (__thiscall **)(void *, int))(*(_DWORD *)v5 + 32))(v5, a2)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3)
      && a2 != a3;
}

//----- (004893C0) --------------------------------------------------------
int __thiscall sub_4893C0(int this, int a2)
{
  return (5 * *(_DWORD *)(this + 8) + 5) * CChar::GetMaxHP(a2) / 100;
}
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (004893F0) --------------------------------------------------------
__int32 __userpurge CDarknessVision::CanSkillUp<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@5
  int v8; // eax@7
  int v9; // eax@7
  int v10; // [sp+4h] [bp-10h]@1
  int v11; // [sp+8h] [bp-Ch]@3
  char v12; // [sp+Fh] [bp-5h]@1
  int v13; // [sp+10h] [bp-4h]@1

  v10 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v13 = 0;
  if ( !v12 )
    v13 = sub_450810(a2, a3, a4, v11);
  if ( v13 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v10)(v10, a5, v13) )
    {
      v8 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v10 + 32))(v10, a5);
      (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)v13 + 88))(
        v13,
        7,
        1,
        (25 * *(_DWORD *)(v10 + 8) + 50) * v8 / 100);
      v9 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v10 + 32))(v10, a5);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 7, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v13);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00489550) --------------------------------------------------------
bool __thiscall sub_489550(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, int))(*(_DWORD *)v5 + 32))(v5, a2);
}

//----- (004895C0) --------------------------------------------------------
int __stdcall sub_4895C0(int a1)
{
  return 10 * CChar::GetMaxMP(a1) / 100;
}
// 43AF90: using guessed type int __thiscall CChar::GetMaxMP(_DWORD);

//----- (004895E0) --------------------------------------------------------
LONG __userpurge sub_4895E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v8; // [sp+0h] [bp-4h]@1

  v8 = a1;
  if ( (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0)
    && *(_DWORD *)(a5 + 276) > (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 32))(v8, a5) )
  {
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(
      a5,
      7,
      1,
      *(_DWORD *)(v8 + 8) * 2 * *(_DWORD *)(a5 + 276));
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, *(_DWORD *)(a5 + 276));
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  std___Mpunct_wchar_t___do_frac_digits(a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  return CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004896C0) --------------------------------------------------------
LONG __userpurge sub_4896C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  int v8; // ST20_4@7
  void *v9; // eax@7
  void *v10; // eax@10
  int v11; // eax@11
  int v12; // [sp+4h] [bp-10h]@1
  int i; // [sp+8h] [bp-Ch]@5
  int v14; // [sp+Ch] [bp-8h]@4

  v12 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    if ( *(_DWORD *)(a5 + 1016) )
    {
      v14 = CParty::FindParty(a2, a3, a4, *(_DWORD *)(a5 + 1016));
      if ( v14 )
      {
        for ( i = CParty::GetPlayerList(v14, a2, a3, a4); i; i = CBaseList::Pop(i, a2, a3, a4) )
        {
          v8 = unknown_libname_7();
          v9 = CBuff::CreateBuff(75, 15, 350, 300);
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 180))(v8, v9);
        }
        CIOObject::Release(v14, a2, a3, a4);
      }
    }
    else
    {
      v10 = CBuff::CreateBuff(75, 15, 350, 300);
      (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 180))(a5, v10);
    }
    v11 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v12 + 32))(v12, 0);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, v11);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (004897F0) --------------------------------------------------------
bool __thiscall sub_4897F0(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 272) > (*(int (__thiscall **)(void *, int))(*(_DWORD *)v5 + 32))(v5, a2)
      && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (00489890) --------------------------------------------------------
__int32 __userpurge sub_489890<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  void *v8; // eax@10
  int v9; // eax@11
  int v10; // [sp+0h] [bp-14h]@10
  int v11; // [sp+4h] [bp-10h]@1
  int v12; // [sp+8h] [bp-Ch]@4
  char v13; // [sp+Fh] [bp-5h]@1
  int v14; // [sp+10h] [bp-4h]@1

  v11 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v14 = 0;
  LOBYTE(v10) = v13;
  if ( v13 )
  {
    if ( v13 == 1 )
      v14 = CMonster::FindMonster(a2, a3, a4, v12);
  }
  else
  {
    v14 = sub_450810(a2, a3, a4, v12);
  }
  if ( v14 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v11)(v11, a5, v14) )
    {
      if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 40))(v11, a5, v14) )
      {
        v8 = CBuff::CreateBuff(81, 10, 70 * *(_DWORD *)(v11 + 8) - 20, v10);
        (*(void (__thiscall **)(int, void *))(*(_DWORD *)v14 + 180))(v14, v8);
      }
      v9 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v11 + 32))(v11, a5);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 7, 0, v9);
      std___Mpunct_wchar_t___do_frac_digits(v14);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v14, a2, a3, a4, v14 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00489A10) --------------------------------------------------------
bool __thiscall sub_489A10(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0);
}

//----- (00489AA0) --------------------------------------------------------
signed int __userpurge sub_489AA0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+4h] [bp-8h]@2
  signed int v9; // [sp+8h] [bp-4h]@1

  v7 = a1;
  v9 = 1;
  if ( !(*(int (**)(void))(*(_DWORD *)a1 + 88))() )
  {
    v8 = sub_450810(a2, a3, a4, a6);
    if ( !v8 )
      return 0;
    if ( CChar::IsMStateEx(v8, *(_DWORD *)(v7 + 56)) )
    {
      CPlayer::Write(a2, a3, a4, a5, 68, (unsigned int)"bb");
      v9 = 0;
    }
    sub_4239C0(v8, a2, a3, a4, v8 + 352);
  }
  return v9;
}

//----- (00489B30) --------------------------------------------------------
__int32 __userpurge sub_489B30<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@7
  int v8; // eax@9
  int v9; // [sp+4h] [bp-14h]@1
  int v10; // [sp+8h] [bp-10h]@9
  int v11; // [sp+Ch] [bp-Ch]@4
  char v12; // [sp+13h] [bp-5h]@1
  int v13; // [sp+14h] [bp-4h]@1

  v9 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bd");
  v13 = 0;
  if ( v12 )
  {
    if ( v12 == 1 )
      v13 = CMonster::FindMonster(a2, a3, a4, v11);
  }
  else
  {
    v13 = sub_450810(a2, a3, a4, v11);
  }
  if ( v13 )
  {
    if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v9)(v9, a5, v13) )
    {
      v10 = 0;
      (*(void (__thiscall **)(int, int, int, int *))(*(_DWORD *)v9 + 80))(v9, a5, v13, &v10);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v13 + 80))(v13, a5);
      v8 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(int, signed int, _DWORD, int))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      if ( (*(int (__thiscall **)(int))(*(_DWORD *)v9 + 88))(v9) )
      {
        std___Mpunct_wchar_t___do_frac_digits(v13);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
      }
      else
      {
        std___Mpunct_wchar_t___do_frac_digits(v13);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
      }
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
    result = sub_4239C0(v13, a2, a3, a4, v13 + 352);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00489CE0) --------------------------------------------------------
LONG __userpurge sub_489CE0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST20_4@1
  DWORD v8; // eax@1
  DWORD v9; // ST24_4@1

  v7 = a1;
  v8 = GetTickCount();
  v9 = v8;
  *(_DWORD *)(v7 + 64) = *(_DWORD *)(v7 + 44) + v8 - *(_DWORD *)(v7 + 40);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v7 + 48) + v8, 1);
  *(_DWORD *)(a5 + 468) = *(_DWORD *)(v7 + 48) + v9;
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v7 + 84))(v7, a5, a6);
  std___Mpunct_wchar_t___do_frac_digits(a6);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  return CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (00489D90) --------------------------------------------------------
int __thiscall sub_489D90(int this, int a2, int a3, int a4)
{
  void *v5; // eax@1

  v5 = CBuff::CreateBuff(46, 1200, 6 * *(_DWORD *)(this + 8) + 2, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
}

//----- (00489DD0) --------------------------------------------------------
int __thiscall CSkillBuff::CanExcute(int this, int a2, int a3, int a4)
{
  void *v5; // eax@1

  v5 = CBuff::CreateBuff(47, 1200, 8 * *(_DWORD *)(this + 8) + 3, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
}

//----- (00489E10) --------------------------------------------------------
bool __thiscall sub_489E10(void *this, int a2, int a3)
{
  return sub_489A10(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (00489E60) --------------------------------------------------------
int __thiscall CSkillBuff::PreExcute(int this, int a2, int a3, int a4)
{
  void *v5; // eax@1

  v5 = CBuff::CreateBuff(48, 1200, 8 * *(_DWORD *)(this + 8) + 3, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
}

//----- (00489EA0) --------------------------------------------------------
char __thiscall sub_489EA0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 64;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00489EE0) --------------------------------------------------------
int __thiscall sub_489EE0(int this, int a2, int a3, int a4)
{
  void *v5; // eax@1

  v5 = CBuff::CreateBuff(49, 1200, 6 * *(_DWORD *)(this + 8) + 2, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
}

//----- (00489F20) --------------------------------------------------------
char __thiscall sub_489F20(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 65;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00489F60) --------------------------------------------------------
int __thiscall sub_489F60(int this, int a2, int a3, int a4)
{
  void *v5; // eax@1

  v5 = CBuff::CreateBuff(50, 900, 3 * *(_DWORD *)(this + 8) + 2, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
}

//----- (00489FA0) --------------------------------------------------------
bool __thiscall sub_489FA0(void *this, int a2, int a3)
{
  return sub_480E80(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 156))(a3) == 1;
}

//----- (00489FF0) --------------------------------------------------------
int __thiscall sub_489FF0(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(83, 15, 50 * *(_DWORD *)(a3 + 312) / -100, v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A050) --------------------------------------------------------
bool __thiscall sub_48A050(void *this, int a2, int a3)
{
  return sub_480E80(this, a2, a3);
}

//----- (0048A070) --------------------------------------------------------
int __thiscall sub_48A070(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(84, 10, (250 * *(_DWORD *)(v6 + 8) + 100) / 10, v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A0D0) --------------------------------------------------------
bool __thiscall sub_48A0D0(void *this, int a2, int a3)
{
  return sub_480E80(this, a2, a3) && (*(int (__thiscall **)(int))(*(_DWORD *)a3 + 60))(a3);
}

//----- (0048A120) --------------------------------------------------------
int __thiscall sub_48A120(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(
           85,
           20 * *(_DWORD *)(v6 + 8) + 50,
           *(_DWORD *)(a3 + 256) * (25 * *(_DWORD *)(v6 + 8) + 25) / -100,
           v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A1A0) --------------------------------------------------------
char __thiscall sub_48A1A0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 67;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0048A1E0) --------------------------------------------------------
int __thiscall sub_48A1E0(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(86, 20 * *(_DWORD *)(v6 + 8) + 50, -24 * *(_DWORD *)(v6 + 8), v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A240) --------------------------------------------------------
int __thiscall sub_48A240(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(87, 20 * *(_DWORD *)(v6 + 8) + 50, -12 * *(_DWORD *)(v6 + 8), v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A2A0) --------------------------------------------------------
int __thiscall CStrenUpInt::Apply(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(88, 20 * *(_DWORD *)(v6 + 8) + 50, -20 * *(_DWORD *)(v6 + 8), v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A300) --------------------------------------------------------
int __thiscall sub_48A300(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(89, 20 * *(_DWORD *)(v6 + 8) + 50, -24 * *(_DWORD *)(v6 + 8), v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A360) --------------------------------------------------------
int __thiscall CCloudSight::CanExcute(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(90, 20 * *(_DWORD *)(v6 + 8) + 50, -16 * *(_DWORD *)(v6 + 8), v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A3C0) --------------------------------------------------------
char __thiscall sub_48A3C0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
      result = *(_DWORD *)(a2 + 60) >= 66;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0048A400) --------------------------------------------------------
int __thiscall sub_48A400(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  void *v6; // [sp+0h] [bp-4h]@1

  v6 = this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(91, 10 * *((_DWORD *)v6 + 2) + 30, -(8 * *((_DWORD *)v6 + 2) + 4), -(6 * *((_DWORD *)v6 + 2) + 2));
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A480) --------------------------------------------------------
int __thiscall sub_48A480(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = (int)this;
  result = (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(93, 15, -50, v6);
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A4D0) --------------------------------------------------------
int __thiscall sub_48A4D0(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  void *v5; // eax@2
  int v6; // ST0C_4@2
  int v7; // [sp+0h] [bp-4h]@1

  v7 = (int)this;
  result = (*(int (__stdcall **)(int, int))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    *(_DWORD *)a4 = 1;
    v5 = CBuff::CreateBuff(94, 10, v7, v6);
    result = (*(int (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v5);
  }
  return result;
}

//----- (0048A520) --------------------------------------------------------
void __userpurge sub_48A520(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // edx@1

  if ( (*(int (__stdcall **)(_DWORD, _DWORD))(*(_DWORD *)a1 + 40))(a5, a6) )
  {
    *(_DWORD *)a7 = 1;
    CChar::CancelBuffPrty(a6, v7, a2, a3, a4, 2);
  }
}

//----- (0048A560) --------------------------------------------------------
bool __thiscall CMeshDefense::CanSkillUp(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && !CChar::IsGState(a2, 512)
      && CPlayer::IsWState(a2, 0)
      && *(_DWORD *)(a2 + 276) >= (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)v5 + 32))(v5, 0);
}

//----- (0048A5D0) --------------------------------------------------------
LONG __userpurge sub_48A5D0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@2
  int v8; // eax@2
  int v9; // [sp+0h] [bp-4h]@1

  v9 = a1;
  if ( (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0) )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 80))(v9, a5);
    v8 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048A680) --------------------------------------------------------
int __thiscall sub_48A680(int this, int a2)
{
  void *v3; // eax@1

  v3 = CBuff::CreateBuff(69, 60, 6 * *(_DWORD *)(this + 8) + 5, -(2 * *(_DWORD *)(this + 8) + 3));
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048A6D0) --------------------------------------------------------
char __thiscall sub_48A6D0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    switch ( *(_DWORD *)(this + 8) )
    {
      case 1:
        result = *(_DWORD *)(a2 + 60) >= 56;
        break;
      case 2:
        result = *(_DWORD *)(a2 + 60) >= 59;
        break;
      case 3:
        result = *(_DWORD *)(a2 + 60) >= 62;
        break;
      case 4:
        result = *(_DWORD *)(a2 + 60) >= 65;
        break;
      case 5:
        result = *(_DWORD *)(a2 + 60) >= 70;
        break;
      default:
        result = 0;
        break;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0048A770) --------------------------------------------------------
int __thiscall sub_48A770(int this, int a2)
{
  void *v3; // eax@1

  v3 = CBuff::CreateBuff(76, 900, 5 * *(_DWORD *)(this + 8) + 10, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048A7B0) --------------------------------------------------------
int __thiscall sub_48A7B0(int this, int a2)
{
  void *v3; // eax@1

  v3 = CBuff::CreateBuff(77, 900, 5 * *(_DWORD *)(this + 8) + 10, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048A7F0) --------------------------------------------------------
int __thiscall sub_48A7F0(int this, int a2)
{
  void *v3; // eax@1

  v3 = CBuff::CreateBuff(78, 900, 5 * *(_DWORD *)(this + 8) + 10, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048A830) --------------------------------------------------------
int __thiscall sub_48A830(int this, int a2)
{
  void *v3; // eax@1

  v3 = CBuff::CreateBuff(79, 900, 5 * *(_DWORD *)(this + 8) + 10, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048A870) --------------------------------------------------------
int __thiscall sub_48A870(int this, int a2)
{
  void *v3; // eax@1

  v3 = CBuff::CreateBuff(80, 900, 5 * *(_DWORD *)(this + 8) + 10, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v3);
}

//----- (0048A8B0) --------------------------------------------------------
void __userpurge sub_48A8B0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *v5; // eax@8
  int v6; // edx@8
  void *v7; // eax@11
  int v8; // edx@11
  int v9; // [sp+0h] [bp-14h]@1
  int v10; // [sp+4h] [bp-10h]@6
  int i; // [sp+8h] [bp-Ch]@3
  int v12; // [sp+Ch] [bp-8h]@2
  int v13; // [sp+10h] [bp-4h]@1

  v9 = a1;
  v13 = *(_DWORD *)(a5 + 1016);
  if ( v13 )
  {
    v12 = CParty::FindParty(a2, a3, a4, v13);
    if ( v12 )
    {
      for ( i = CParty::GetPlayerList(v12, a2, a3, a4); i; i = CBaseList::Pop(i, a2, a3, a4) )
      {
        v10 = unknown_libname_7();
        if ( sub_448870(a5 + 332, v10 + 332) <= 64 )
        {
          v5 = CBuff::CreateBuff(82, 38, 200, v9);
          (*(void (__thiscall **)(int, void *))(*(_DWORD *)v10 + 180))(v10, v5);
          CChar::CancelBuffPrty(v10, v6, a2, a3, a4, 4);
        }
      }
      CIOObject::Release(v12, a2, a3, a4);
    }
  }
  else
  {
    v7 = CBuff::CreateBuff(82, 38, 200, a1);
    (*(void (__thiscall **)(int, void *))(*(_DWORD *)a5 + 180))(a5, v7);
    CChar::CancelBuffPrty(a5, v8, a2, a3, a4, 4);
  }
}

//----- (0048A9A0) --------------------------------------------------------
LONG __userpurge sub_48A9A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  int v8; // eax@14
  int v9; // [sp+4h] [bp-18h]@1
  int v10; // [sp+10h] [bp-Ch]@6
  int v11; // [sp+18h] [bp-4h]@3

  v9 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    result = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 80))(v9, a5);
    v11 = result;
    if ( result )
    {
      if ( *(_DWORD *)(a5 + 1016) )
      {
        v10 = CParty::FindParty(a2, a3, a4, *(_DWORD *)(a5 + 1016));
        if ( v10 )
        {
          CParty::Chant(v10, a2, a3, a4, a5, v11);
          if ( v11 )
            std__locale__facet___scalar_deleting_destructor_(1);
          CIOObject::Release(v10, a2, a3, a4);
        }
      }
      else
      {
        if ( *(_DWORD *)(a5 + 584) )
          CChar::CancelBuff(a5, a2, a3, a4, *(_DWORD *)(a5 + 584));
        (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a5 + 180))(a5, v11);
        *(_DWORD *)(a5 + 584) = *(_DWORD *)(v11 + 4);
      }
      v8 = (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v9 + 32))(v9, 0);
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 88))(a5, 8, 0, v8);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    }
  }
  return result;
}
// 4025C0: using guessed type _DWORD __stdcall std__locale__facet___scalar deleting destructor_(_DWORD);
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048AAF0) --------------------------------------------------------
void *__thiscall sub_48AAF0(int this, int a2)
{
  return CBuff::CreateBuff(28, 0, 7 * *(_DWORD *)(this + 8) + 9, 3 * *(_DWORD *)(this + 8) + 9);
}

//----- (0048AB30) --------------------------------------------------------
char __thiscall sub_48AB30(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 57;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 63;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0048AB90) --------------------------------------------------------
void *__thiscall sub_48AB90(int this, int a2)
{
  return CBuff::CreateBuff(38, 0, 8 * *(_DWORD *)(this + 8) + 4, this);
}

//----- (0048ABC0) --------------------------------------------------------
char __thiscall sub_48ABC0(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 61;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 67;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0048AC20) --------------------------------------------------------
void *__thiscall sub_48AC20(int this, int a2)
{
  return CBuff::CreateBuff(70, 0, 3 * *(_DWORD *)(this + 8) + 2, this);
}

//----- (0048AC50) --------------------------------------------------------
char __thiscall sub_48AC50(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 57;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 64;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0048ACB0) --------------------------------------------------------
void *__thiscall sub_48ACB0(int this, int a2)
{
  return CBuff::CreateBuff(71, 0, 3 * *(_DWORD *)(this + 8) + 2, this);
}

//----- (0048ACE0) --------------------------------------------------------
void *__thiscall sub_48ACE0(int this, int a2)
{
  return CBuff::CreateBuff(72, 0, 3 * *(_DWORD *)(this + 8) + 2, this);
}

//----- (0048AD10) --------------------------------------------------------
void *__thiscall sub_48AD10(int this, int a2)
{
  return CBuff::CreateBuff(73, 0, 5 * *(_DWORD *)(this + 8) + 5, this);
}

//----- (0048AD40) --------------------------------------------------------
char __thiscall sub_48AD40(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)(this + 8) < *(_DWORD *)(this + 28) )
  {
    if ( *(_DWORD *)(this + 8) == 1 )
    {
      result = *(_DWORD *)(a2 + 60) >= 58;
    }
    else
    {
      if ( *(_DWORD *)(this + 8) == 2 )
        result = *(_DWORD *)(a2 + 60) >= 65;
      else
        result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0048ADA0) --------------------------------------------------------
void *__thiscall sub_48ADA0(int this, int a2)
{
  return CBuff::CreateBuff(74, 0, 25 * *(_DWORD *)(this + 8) + 25, this);
}

//----- (0048ADD0) --------------------------------------------------------
int __stdcall sub_48ADD0(int a1, signed int a2)
{
  return a2 + a2 / 5 + 2 * *(_DWORD *)(a1 + 72);
}

//----- (0048AE00) --------------------------------------------------------
bool __thiscall sub_48AE00(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2) && CPlayer::IsWState(a2, 0) && *(_DWORD *)(a2 + 580) >= *((_DWORD *)v5 + 17);
}

//----- (0048AE50) --------------------------------------------------------
int __stdcall sub_48AE50(int a1, signed int a2)
{
  return *(_DWORD *)(a1 + 72) + a2 / 2;
}

//----- (0048AE70) --------------------------------------------------------
int __thiscall sub_48AE70(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax@1
  void *v7; // eax@3
  void *v8; // eax@3
  int v9; // ST0C_4@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = (int)this;
  result = (*(int (__stdcall **)(int, int))(*(_DWORD *)this + 40))(a2, a3);
  if ( result )
  {
    v7 = CBuff::CreateBuff(0, 8, -50, v10);
    (*(void (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v7);
    v8 = CBuff::CreateBuff(20, 8, -50, v9);
    result = (*(int (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v8);
  }
  return result;
}

//----- (0048AED0) --------------------------------------------------------
LONG __userpurge sub_48AED0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  void *v8; // eax@3
  int v9; // ST20_4@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CBuff::CreateBuff(24, 15, 0, v10);
    (*(void (__thiscall **)(int, void *))(*(_DWORD *)a5 + 180))(a5, v8);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 56))(v9, a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048AF60) --------------------------------------------------------
int __stdcall sub_48AF60(int a1, int a2)
{
  return a2 + 20 * a2 / 100 + 2 * *(_DWORD *)(a1 + 64);
}

//----- (0048AF90) --------------------------------------------------------
int __thiscall sub_48AF90(int this, int a2)
{
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a2 + 88))(a2, 35, 0, *(_DWORD *)(this + 68));
}

//----- (0048AFC0) --------------------------------------------------------
int __stdcall sub_48AFC0(int a1, int a2)
{
  return a2 + 2 * *(_DWORD *)(a1 + 60);
}

//----- (0048AFE0) --------------------------------------------------------
int __thiscall CChantDefLightning::CreateBuff(void *this, void *a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  int v8; // eax@1
  void *v9; // eax@3
  int v10; // ST14_4@3
  int result; // eax@4
  unsigned int v12; // esi@4
  unsigned int v13; // eax@4
  int v14; // [sp+4h] [bp-8h]@1
  int v15; // [sp+8h] [bp-4h]@1

  v14 = (int)this;
  v7 = CChar::GetAttack(a2);
  v15 = (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 16))(v14, a2, v7);
  v8 = (*(int (__thiscall **)(int))(*(_DWORD *)v14 + 84))(v14);
  if ( CChar::CheckHit(a2, a3, v8) )
  {
    if ( (*(int (__thiscall **)(int, void *, int))(*(_DWORD *)v14 + 40))(v14, a2, a3) )
    {
      v9 = CBuff::CreateBuff(7, 5, v10, v14);
      (*(void (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v9);
    }
    v12 = a4 * (*(int (__thiscall **)(void *, int))(*(_DWORD *)a2 + 168))(a2, a3);
    *(_DWORD *)a7 = v12 / (*(int (__thiscall **)(int, void *))(*(_DWORD *)v14 + 36))(v14, a2);
    v13 = (*(int (__thiscall **)(int, void *, int, int, int, int))(*(_DWORD *)v14 + 36))(v14, a2, a5, a6, a7, v14);
    result = (*(int (__thiscall **)(int, void *, unsigned int))(*(_DWORD *)a3 + 72))(a3, a2, a4 * v15 / v13);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43D970: using guessed type int __thiscall CChar::GetAttack(_DWORD);

//----- (0048B0E0) --------------------------------------------------------
LONG __userpurge sub_48B0E0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  void *v8; // eax@3
  int v9; // ST20_4@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CBuff::CreateBuff(23, 15, 0, v10);
    (*(void (__thiscall **)(int, void *))(*(_DWORD *)a5 + 180))(a5, v8);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 56))(v9, a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048B170) --------------------------------------------------------
int __stdcall sub_48B170(int a1, int a2)
{
  return a2 + 20 * a2 / 100 + 2 * *(_DWORD *)(a1 + 80);
}

//----- (0048B1A0) --------------------------------------------------------
bool __thiscall sub_48B1A0(void *this, int a2, int a3)
{
  void *v5; // [sp+4h] [bp-4h]@1

  v5 = this;
  return CChar::IsNormal(a2)
      && CChar::IsNormal(a3)
      && *(_DWORD *)(a2 + 316) == *(_DWORD *)(a3 + 316)
      && CPlayer::IsWState(a2, 0)
      && (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)a2 + 176))(a2, a3, 0)
      && *(_DWORD *)(a2 + 580) >= *((_DWORD *)v5 + 17);
}

//----- (0048B230) --------------------------------------------------------
__int32 __userpurge sub_48B230<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, unsigned int a7)
{
  __int32 result; // eax@3
  void *v8; // eax@13
  void *v9; // eax@13
  int v10; // ST20_4@13
  int v11; // [sp+0h] [bp-14h]@13
  int v12; // [sp+4h] [bp-10h]@1
  int v13; // [sp+8h] [bp-Ch]@7
  char v14; // [sp+Ch] [bp-8h]@2
  char v15; // [sp+Dh] [bp-7h]@4
  char v16; // [sp+Eh] [bp-6h]@2
  char v17; // [sp+Fh] [bp-5h]@2
  int v18; // [sp+10h] [bp-4h]@4

  v12 = a1;
  sub_4975F0(a2, a3, a4, a6, a7, (unsigned int)"bdbbb");
  CChar::Lock(a5, a2, a3, a4);
  if ( CPlayer::CanMove(a5, a2, a3, a4) && CSMap::ReadLock(*(void **)(a5 + 320), a2, a3, a4, a5, v14, v17, v16, 1, 1) )
  {
    CChar::Unlock(a5, a2, a3, a4);
    v18 = 0;
    LOBYTE(v11) = v15;
    if ( v15 )
    {
      if ( v15 == 1 )
        v18 = CMonster::FindMonster(a2, a3, a4, v13);
    }
    else
    {
      v18 = sub_450810(a2, a3, a4, v13);
    }
    if ( v18 )
    {
      if ( (**(int (__thiscall ***)(_DWORD, _DWORD, _DWORD))v12)(v12, a5, v18) )
      {
        if ( (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v12 + 40))(v12, a5, v18) )
        {
          v8 = CBuff::CreateBuff(21, 10, -50, v11);
          (*(void (__thiscall **)(int, void *))(*(_DWORD *)v18 + 180))(v18, v8);
          v9 = CBuff::CreateBuff(22, 10, 0, v10);
          (*(void (__thiscall **)(int, void *))(*(_DWORD *)v18 + 180))(v18, v9);
        }
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v18 + 80))(v18, a5);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v12 + 56))(v12, a5);
        std___Mpunct_wchar_t___do_frac_digits(v18);
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
      }
      else
      {
        std___Mpunct_wchar_t___do_frac_digits(a5);
        CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
      }
      result = sub_4239C0(v18, a2, a3, a4, v18 + 352);
    }
    else
    {
      std___Mpunct_wchar_t___do_frac_digits(a5);
      result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
    }
  }
  else
  {
    CChar::Unlock(a5, a2, a3, a4);
    CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048B440) --------------------------------------------------------
LONG __userpurge sub_48B440<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  LONG result; // eax@1
  void *v8; // eax@3
  int v9; // ST20_4@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    v8 = CBuff::CreateBuff(25, 15, 0, v10);
    (*(void (__thiscall **)(int, void *))(*(_DWORD *)a5 + 180))(a5, v8);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)v9 + 56))(v9, a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    result = CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048B4D0) --------------------------------------------------------
int __stdcall sub_48B4D0(int a1)
{
  int v2; // esi@1

  v2 = sub_483230(a1);
  return 3 * *(_DWORD *)(a1 + 60) + 5 * CChar::GetInt(a1) / 2 + v2;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048B510) --------------------------------------------------------
int __stdcall sub_48B510(int a1)
{
  int v2; // esi@1

  v2 = sub_483230(a1);
  return 7 * CChar::GetInt(a1) / 2 + v2 + 4 * *(_DWORD *)(a1 + 60);
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048B550) --------------------------------------------------------
int __stdcall sub_48B550(int a1)
{
  return 6 * CChar::GetStr(a1) / 2 + 5 * *(_DWORD *)(a1 + 60) / 3;
}
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);

//----- (0048B590) --------------------------------------------------------
int __thiscall sub_48B590(int this, int a2, int a3)
{
  void *v4; // eax@1
  int v5; // ST0C_4@1

  v4 = CBuff::CreateBuff(7, 12, this, v5);
  return (*(int (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (0048B5C0) --------------------------------------------------------
int __thiscall sub_48B5C0(int this, int a2)
{
  int v2; // esi@3
  int v4; // [sp+4h] [bp-8h]@2

  if ( *(_DWORD *)(this + 56) )
  {
    v4 = 6 * *(_DWORD *)(a2 + 60) + 11 * CChar::GetStr(a2);
  }
  else
  {
    v2 = sub_483230(a2);
    v4 = 5 * CChar::GetInt(a2) / 4 + v2 + 2 * *(_DWORD *)(a2 + 60);
  }
  return v4;
}
// 43BE20: using guessed type int __thiscall CChar::GetStr(_DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048B630) --------------------------------------------------------
void *__userpurge sub_48B630<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  void *result; // eax@1
  int v6; // eax@7
  int v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@11
  int v9; // [sp+8h] [bp-20h]@11
  int v10; // [sp+Ch] [bp-1Ch]@11
  int v11; // [sp+10h] [bp-18h]@11
  int v12; // [sp+14h] [bp-14h]@11
  int v13; // [sp+18h] [bp-10h]@11
  int v14; // [sp+1Ch] [bp-Ch]@7
  int v15; // [sp+20h] [bp-8h]@7
  DWORD v16; // [sp+24h] [bp-4h]@1

  v7 = a1;
  v16 = GetTickCount();
  result = (void *)v7;
  if ( v16 >= *(_DWORD *)(v7 + 64) )
  {
    ++*(_DWORD *)(v7 + 72);
    if ( *(_DWORD *)(v7 + 72) <= 13 )
    {
      if ( *(_DWORD *)(v7 + 72) == 1 )
        CChar::AddGState(a5, 16384);
      *(_DWORD *)(v7 + 64) = v16 + 5000;
      v14 = 0;
      v6 = (*(int (__thiscall **)(int))(*(_DWORD *)v7 + 92))(v7);
      v15 = sub_4934F0(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, v6);
      CChar::Unlock(a5, a2, a3, a4);
      while ( v15 )
      {
        v14 = unknown_libname_7();
        if ( CChar::IsNormal(v14) )
        {
          if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v14 + 316) )
          {
            v10 = 0;
            v9 = 0;
            v13 = sub_4833D0((void *)v7, a5, v14);
            v8 = 0;
            v12 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v7 + 88))(v7, a5);
            v11 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)v14 + 72))(
                    v14,
                    a5,
                    v13 * v12 / 100,
                    &v10,
                    &v8,
                    &v9,
                    v7);
            if ( !v11 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
            if ( v10 > 0 )
            {
              std___Mpunct_wchar_t___do_frac_digits(v14);
              std___Mpunct_wchar_t___do_frac_digits(a5);
              (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 96))(v7);
              CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
            }
          }
        }
        v15 = CBaseList::Pop(v15, a2, a3, a4);
      }
      result = CChar::Lock(a5, a2, a3, a4);
    }
    else
    {
      result = (void *)v7;
      *(_DWORD *)(v7 + 56) = 1;
    }
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048B800) --------------------------------------------------------
LONG __userpurge CTDiamondClow::Excute<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@1
  int v8; // [sp+0h] [bp-24h]@1
  int v9; // [sp+4h] [bp-20h]@5
  int v10; // [sp+8h] [bp-1Ch]@5
  int v11; // [sp+Ch] [bp-18h]@5
  int v12; // [sp+10h] [bp-14h]@5
  int v13; // [sp+14h] [bp-10h]@5
  int v14; // [sp+18h] [bp-Ch]@5
  int v15; // [sp+1Ch] [bp-8h]@1
  int v16; // [sp+20h] [bp-4h]@1

  v8 = a1;
  v15 = 0;
  v6 = (*(int (**)(void))(*(_DWORD *)a1 + 92))();
  v16 = sub_4934F0(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, v6);
  *(_DWORD *)(a5 + 468) = *(_DWORD *)(v8 + 48) + GetTickCount();
  CChar::Unlock(a5, a2, a3, a4);
  while ( v16 )
  {
    v15 = unknown_libname_7();
    if ( CChar::IsNormal(v15) )
    {
      if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v15 + 316) )
      {
        v11 = 0;
        v10 = 0;
        v14 = sub_4833D0((void *)v8, a5, v15);
        v9 = 0;
        v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 88))(v8, a5);
        v12 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)v15 + 72))(
                v15,
                a5,
                v14 * v13 / 100,
                &v11,
                &v9,
                &v10,
                v8);
        if ( !v12 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v15 + 80))(v15, a5);
        if ( v11 > 0 )
        {
          std___Mpunct_wchar_t___do_frac_digits(v15);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          (*(void (__thiscall **)(int))(*(_DWORD *)v8 + 96))(v8);
          CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
        }
      }
    }
    v16 = CBaseList::Pop(v16, a2, a3, a4);
  }
  CChar::Lock(a5, a2, a3, a4);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  return CChar::AddGState(a5, 65536);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048B9C0) --------------------------------------------------------
void __userpurge sub_48B9C0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-2Ch]@1
  int v7; // [sp+4h] [bp-28h]@6
  int v8; // [sp+8h] [bp-24h]@6
  int v9; // [sp+Ch] [bp-20h]@6
  int v10; // [sp+10h] [bp-1Ch]@4
  int v11; // [sp+14h] [bp-18h]@4
  int i; // [sp+18h] [bp-14h]@4
  DWORD v13; // [sp+1Ch] [bp-10h]@4
  int v14; // [sp+20h] [bp-Ch]@4
  int v15; // [sp+24h] [bp-8h]@4
  int v16; // [sp+28h] [bp-4h]@4

  v6 = a1;
  if ( a6 )
  {
    if ( *(_DWORD *)(a6 + 316) == *(_DWORD *)(a5 + 316) )
    {
      v13 = GetTickCount();
      *(_DWORD *)(v6 + 64) = *(_DWORD *)(v6 + 44) + v13 - *(_DWORD *)(v6 + 40);
      (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v6 + 48) + v13, 1);
      *(_DWORD *)(a5 + 468) = *(_DWORD *)(v6 + 48) + v13;
      std___Mpunct_wchar_t___do_frac_digits(a6);
      std___Mpunct_wchar_t___do_frac_digits(a5);
      CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
      v16 = sub_406E10(0, 4);
      v14 = dword_4D62B0[2 * v16] - 96;
      v11 = dword_4D62B0[2 * v16] + 96;
      v10 = dword_4D62B4[2 * v16] - 96;
      v15 = dword_4D62B4[2 * v16] + 96;
      for ( i = sub_4934F0(*(_DWORD *)(a5 + 320), a2, a3, a4, a6 + 324, 2); i; i = CBaseList::Pop(i, a2, a3, a4) )
      {
        v8 = sub_406E10(v14, v11);
        v9 = sub_406E10(v10, v15);
        v7 = unknown_libname_7();
        if ( CChar::IsNormal(v7) )
          CPlayer::Teleport(v7, a2, a3, a4, *(_DWORD *)(a5 + 316), (int)&v8, 30000, 0);
      }
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4D62B0: using guessed type int dword_4D62B0[];
// 4D62B4: using guessed type int dword_4D62B4[];

//----- (0048BB50) --------------------------------------------------------
void *__userpurge sub_48BB50<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *result; // eax@1
  DWORD v7; // eax@3
  signed int v8; // eax@3
  int v9; // [sp+0h] [bp-10h]@1
  int v10; // [sp+4h] [bp-Ch]@3
  DWORD v11; // [sp+8h] [bp-8h]@3
  int v12; // [sp+Ch] [bp-4h]@1

  v9 = a1;
  result = (void *)sub_493770(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, *(_DWORD *)(a1 + 56), 5);
  v12 = (int)result;
  if ( result )
  {
    v7 = GetTickCount();
    v11 = v7;
    *(_DWORD *)(v9 + 64) = *(_DWORD *)(v9 + 44) + v7 - *(_DWORD *)(v9 + 40);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v9 + 48) + v11, 1);
    *(_DWORD *)(a5 + 468) = *(_DWORD *)(v9 + 48) + v11;
    v8 = CChar::GetMaxHP(a5);
    (*(void (__cdecl **)(int, signed int, signed int, int))(*(_DWORD *)a5 + 88))(a5, 7, 1, v8 / 20);
    std___Mpunct_wchar_t___do_frac_digits(v12);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
    CChar::Unlock(a5, a2, a3, a4);
    v10 = 0;
    (*(void (__thiscall **)(int, int, signed int, int *, int *, int *, _DWORD))(*(_DWORD *)v12 + 72))(
      v12,
      a5,
      65535,
      &v10,
      &v10,
      &v10,
      0);
    sub_4239C0(v12, a2, a3, a4, v12 + 352);
    result = CChar::Lock(a5, a2, a3, a4);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (0048BC80) --------------------------------------------------------
int __thiscall sub_48BC80(int this, int a2, int a3)
{
  void *v4; // eax@1

  v4 = CBuff::CreateBuff(95, 180, 50, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v4);
}

//----- (0048BCB0) --------------------------------------------------------
int __thiscall sub_48BCB0(int this, int a2, int a3)
{
  void *v4; // eax@1

  v4 = CBuff::CreateBuff(96, 180, 50, this);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 180))(a2, v4);
}

//----- (0048BCE0) --------------------------------------------------------
int __stdcall sub_48BCE0(int a1)
{
  return sub_406E10(3000, 4000);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0048BD00) --------------------------------------------------------
void *__userpurge sub_48BD00<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *result; // eax@1
  int v7; // eax@3
  void *v8; // [sp+0h] [bp-24h]@1
  int v9; // [sp+4h] [bp-20h]@10
  int v10; // [sp+8h] [bp-1Ch]@10
  int v11; // [sp+Ch] [bp-18h]@10
  int v12; // [sp+10h] [bp-14h]@11
  int v13; // [sp+14h] [bp-10h]@10
  int v14; // [sp+18h] [bp-Ch]@10
  int v15; // [sp+1Ch] [bp-8h]@3
  int v16; // [sp+20h] [bp-4h]@3

  v8 = a1;
  result = (void *)(*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)a1 + 76))(a5, 0);
  if ( result )
  {
    v15 = 0;
    v7 = (*(int (__thiscall **)(void *))(*(_DWORD *)v8 + 92))(v8);
    v16 = sub_4935A0(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, v7);
    CChar::Unlock(a5, a2, a3, a4);
    while ( v16 )
    {
      v15 = unknown_libname_7();
      if ( CChar::IsNormal(v15) )
      {
        if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v15 + 316) )
        {
          if ( (*(int (__thiscall **)(_DWORD, int, signed int))(**(_DWORD **)(a5 + 484) + 176))(
                 *(_DWORD *)(a5 + 484),
                 v15,
                 1) )
          {
            v11 = 0;
            v10 = 0;
            v14 = sub_4833D0(v8, *(_DWORD *)(a5 + 484), v15);
            v9 = 0;
            v13 = (*(int (__thiscall **)(void *, int))(*(_DWORD *)v8 + 88))(v8, a5);
            if ( (*(int (__thiscall **)(void *))(*(_DWORD *)v8 + 100))(v8) )
            {
              v12 = (*(int (__thiscall **)(int, _DWORD, int, int *, int *, int *, void *))(*(_DWORD *)v15 + 72))(
                      v15,
                      *(_DWORD *)(a5 + 484),
                      v14 * v13 / 100,
                      &v11,
                      &v9,
                      &v10,
                      v8);
              if ( !v12 )
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v15 + 80))(v15, *(_DWORD *)(a5 + 484));
              if ( v11 > 0 )
              {
                std___Mpunct_wchar_t___do_frac_digits(v15);
                std___Mpunct_wchar_t___do_frac_digits(a5);
                (*(void (__thiscall **)(void *))(*(_DWORD *)v8 + 96))(v8);
                CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
                (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v8 + 104))(v8, a5, v15);
              }
            }
            else
            {
              (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v8 + 104))(v8, a5, v15);
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v15 + 80))(v15, *(_DWORD *)(a5 + 484));
            }
          }
        }
      }
      v16 = CBaseList::Pop(v16, a2, a3, a4);
    }
    result = CChar::Lock(a5, a2, a3, a4);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048BF10) --------------------------------------------------------
int __stdcall CDoSpiritAbsorb::ExcuteM(int a1)
{
  return sub_483230(a1);
}

//----- (0048BF30) --------------------------------------------------------
int __thiscall sub_48BF30(void *this, int a2, int a3)
{
  return (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 84))(
           *(_DWORD *)(a2 + 484),
           a3,
           0,
           0,
           0);
}

//----- (0048BF60) --------------------------------------------------------
int __thiscall sub_48BF60(void *this, int a2, int a3)
{
  int v4; // ST0C_4@1
  int v5; // eax@1
  void *v6; // eax@1

  v4 = (int)this;
  v5 = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)this + 88))(a2);
  v6 = CBuff::CreateBuff(92, 60, v5, v4);
  return (*(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v6);
}

//----- (0048BFA0) --------------------------------------------------------
int __stdcall sub_48BFA0(int a1)
{
  signed int v2; // [sp+4h] [bp-14h]@5
  signed int v3; // [sp+8h] [bp-10h]@2
  int v4; // [sp+10h] [bp-8h]@1

  v4 = (3 * *(_DWORD *)(a1 + 60) / 2 + 20 * CChar::GetInt(a1) / 16) / 2;
  if ( v4 >= 150 )
    v3 = 150;
  else
    v3 = v4;
  if ( v4 >= 300 )
    v2 = 300;
  else
    v2 = v4;
  return sub_406E10(v3, v2);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048C040) --------------------------------------------------------
int __thiscall sub_48C040(int this, int a2)
{
  __int64 v2; // qax@1
  int v3; // esi@1
  int v4; // ST14_4@1
  int v5; // esi@1
  __int64 v6; // qax@1
  int v8; // [sp+4h] [bp-14h]@5
  signed int v9; // [sp+8h] [bp-10h]@2
  int v10; // [sp+10h] [bp-8h]@1

  v4 = this;
  v5 = 3 * *(_DWORD *)(a2 + 60) / 2;
  v6 = 3 * *(_DWORD *)(this + 8) * CChar::GetInt(a2) / 10;
  v10 = v5 + (((_DWORD)v6 - HIDWORD(v6)) >> 1) + 10;
  v3 = 3 * *(_DWORD *)(a2 + 60) / 2;
  v2 = 5 * *(_DWORD *)(v4 + 8) * CChar::GetInt(a2);
  if ( v10 >= 300 )
    v9 = 300;
  else
    v9 = v10;
  if ( v3 + (((BYTE4(v2) & 7) + (_DWORD)v2) >> 3) / 2 + 30 >= 400 )
    v8 = 400;
  else
    v8 = v3 + (((BYTE4(v2) & 7) + (_DWORD)v2) >> 3) / 2 + 30;
  return sub_406E10(v9, v8);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048C110) --------------------------------------------------------
void __userpurge sub_48C110(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-20h]@1
  int v7; // [sp+4h] [bp-1Ch]@6
  int v8; // [sp+8h] [bp-18h]@6
  int v9; // [sp+Ch] [bp-14h]@6
  int v10; // [sp+10h] [bp-10h]@6
  int v11; // [sp+14h] [bp-Ch]@6
  int v12; // [sp+18h] [bp-8h]@6
  DWORD v13; // [sp+1Ch] [bp-4h]@3

  v6 = a1;
  if ( a6 )
  {
    CChar::SetDirection((void *)a5, *(_DWORD *)(a6 + 332) - *(_DWORD *)(a5 + 332), *(_DWORD *)(a6 + 336) - *(_DWORD *)(a5 + 336));
    v13 = GetTickCount();
    *(_DWORD *)(v6 + 64) = *(_DWORD *)(v6 + 44) + v13 - *(_DWORD *)(v6 + 40);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v6 + 48) + v13, 1);
    *(_DWORD *)(a5 + 468) = *(_DWORD *)(v6 + 48) + v13;
    if ( CChar::IsNormal(a6) )
    {
      if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(a6 + 316) )
      {
        if ( sub_448870(a5 + 332, a6 + 332) < 170 )
        {
          v9 = 0;
          v8 = 0;
          v12 = sub_4833D0((void *)v6, a5, *(_DWORD *)(a5 + 464));
          v7 = 0;
          v11 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v6 + 88))(v6, a5);
          v10 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)a6 + 72))(
                  a6,
                  a5,
                  v12 * v11 / 100,
                  &v9,
                  &v7,
                  &v8,
                  v6);
          if ( !v10 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a6 + 80))(a6, a5);
          std___Mpunct_wchar_t___do_frac_digits(a6);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
          CPlayer::Write(a2, a3, a4, a6, 69, (unsigned int)"bw");
          CPlayer::UpdatePartyMember(a6, a2, a3, a4, 7);
        }
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048C2D0) --------------------------------------------------------
int __stdcall CMFireRain::GetMagicM(int a1)
{
  return 3 * *(_DWORD *)(a1 + 60) / 2 + 60 * CChar::GetInt(a1) / 10;
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048C310) --------------------------------------------------------
void __userpurge sub_48C310(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-20h]@1
  int v7; // [sp+4h] [bp-1Ch]@6
  int v8; // [sp+8h] [bp-18h]@6
  int v9; // [sp+Ch] [bp-14h]@6
  int v10; // [sp+10h] [bp-10h]@6
  int v11; // [sp+14h] [bp-Ch]@6
  int v12; // [sp+18h] [bp-8h]@6
  DWORD v13; // [sp+1Ch] [bp-4h]@3

  v6 = a1;
  if ( a6 )
  {
    CChar::SetDirection((void *)a5, *(_DWORD *)(a6 + 332) - *(_DWORD *)(a5 + 332), *(_DWORD *)(a6 + 336) - *(_DWORD *)(a5 + 336));
    v13 = GetTickCount();
    *(_DWORD *)(v6 + 64) = *(_DWORD *)(v6 + 44) + v13 - *(_DWORD *)(v6 + 40);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v6 + 48) + v13, 1);
    *(_DWORD *)(a5 + 468) = *(_DWORD *)(v6 + 48) + v13;
    if ( CChar::IsNormal(a6) )
    {
      if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(a6 + 316) )
      {
        if ( sub_448870(a5 + 332, a6 + 332) < 170 )
        {
          v9 = 0;
          v8 = 0;
          v12 = sub_4833D0((void *)v6, a5, *(_DWORD *)(a5 + 464));
          v7 = 0;
          v11 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v6 + 88))(v6, a5);
          v10 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)a6 + 72))(
                  a6,
                  a5,
                  v12 * v11 / 100,
                  &v9,
                  &v7,
                  &v8,
                  v6);
          if ( !v10 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a6 + 80))(a6, a5);
          std___Mpunct_wchar_t___do_frac_digits(a6);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
          CPlayer::Write(a2, a3, a4, a6, 69, (unsigned int)"bw");
          CPlayer::UpdatePartyMember(a6, a2, a3, a4, 7);
        }
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048C4D0) --------------------------------------------------------
int __stdcall CMSpark::ExcuteM(int a1)
{
  __int64 v1; // qax@1
  int v2; // esi@1
  __int64 v3; // qax@1
  __int64 v4; // qax@1
  int v6; // [sp+4h] [bp-14h]@5
  int v7; // [sp+8h] [bp-10h]@2
  int v8; // [sp+10h] [bp-8h]@1

  v2 = 5 * *(_DWORD *)(a1 + 60) / 3;
  v3 = 6 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) * CChar::GetInt(a1);
  v4 = v2 + (((BYTE4(v3) & 3) + (_DWORD)v3) >> 2);
  v8 = (((_DWORD)v4 - HIDWORD(v4)) >> 1) + 50;
  v1 = 5 * *(_DWORD *)(a1 + 60) / 3 + 11 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) * CChar::GetInt(a1) / 3;
  if ( v8 >= 60 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) + 200 )
    v7 = 60 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) + 200;
  else
    v7 = v8;
  if ( (((_DWORD)v1 - HIDWORD(v1)) >> 1) + 150 >= 200 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) + 200 )
    v6 = 200 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) + 200;
  else
    v6 = (((_DWORD)v1 - HIDWORD(v1)) >> 1) + 150;
  return sub_406E10(v7, v6);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048C610) --------------------------------------------------------
void __userpurge sub_48C610(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-20h]@1
  int v7; // [sp+4h] [bp-1Ch]@6
  int v8; // [sp+8h] [bp-18h]@6
  int v9; // [sp+Ch] [bp-14h]@6
  int v10; // [sp+10h] [bp-10h]@6
  int v11; // [sp+14h] [bp-Ch]@6
  int v12; // [sp+18h] [bp-8h]@6
  DWORD v13; // [sp+1Ch] [bp-4h]@3

  v6 = a1;
  if ( a6 )
  {
    CChar::SetDirection((void *)a5, *(_DWORD *)(a6 + 332) - *(_DWORD *)(a5 + 332), *(_DWORD *)(a6 + 336) - *(_DWORD *)(a5 + 336));
    v13 = GetTickCount();
    *(_DWORD *)(v6 + 64) = *(_DWORD *)(v6 + 44) + v13 - *(_DWORD *)(v6 + 40);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v6 + 48) + v13, 1);
    *(_DWORD *)(a5 + 468) = *(_DWORD *)(v6 + 48) + v13;
    if ( CChar::IsNormal(a6) )
    {
      if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(a6 + 316) )
      {
        if ( sub_448870(a5 + 332, a6 + 332) < 170 )
        {
          v9 = 0;
          v8 = 0;
          v12 = sub_4833D0((void *)v6, a5, *(_DWORD *)(a5 + 464));
          v7 = 0;
          v11 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v6 + 88))(v6, a5);
          v10 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)a6 + 72))(
                  a6,
                  a5,
                  v12 * v11 / 100,
                  &v9,
                  &v7,
                  &v8,
                  v6);
          if ( !v10 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a6 + 80))(a6, a5);
          std___Mpunct_wchar_t___do_frac_digits(a6);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
          CPlayer::Write(a2, a3, a4, a6, 69, (unsigned int)"bw");
          CPlayer::UpdatePartyMember(a6, a2, a3, a4, 7);
        }
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048C7D0) --------------------------------------------------------
int __stdcall sub_48C7D0(int a1)
{
  __int64 v1; // qax@1
  int v3; // [sp+4h] [bp-Ch]@2

  v1 = 5 * *(_DWORD *)(a1 + 60) / 3 + 6 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) * CChar::GetInt(a1) / 5;
  if ( ((_DWORD)v1 - HIDWORD(v1)) >> 1 >= 70 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) + 150 )
    v3 = 70 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320) + 150;
  else
    v3 = ((_DWORD)v1 - HIDWORD(v1)) >> 1;
  return v3 + 8 * *(_DWORD *)(*(_DWORD *)(a1 + 440) + 320);
}
// 43BEA0: using guessed type int __thiscall CChar::GetInt(_DWORD);

//----- (0048C880) --------------------------------------------------------
int __userpurge sub_48C880<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST20_4@1
  DWORD v8; // eax@1
  DWORD v9; // ST24_4@1

  v7 = a1;
  v8 = GetTickCount();
  v9 = v8;
  *(_DWORD *)(v7 + 64) = *(_DWORD *)(v7 + 44) + v8 - *(_DWORD *)(v7 + 40);
  (*(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v7 + 48) + v8, 1);
  *(_DWORD *)(a5 + 468) = *(_DWORD *)(v7 + 48) + v9;
  std___Mpunct_wchar_t___do_frac_digits(a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  return (*(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)a5 + 232))(
           a5,
           *(_DWORD *)(v7 + 56),
           *(_DWORD *)(v7 + 60) >> 16,
           (*(_DWORD *)(v7 + 60) >> 8) & 0xFF,
           *(_DWORD *)(v7 + 60) & 0xFF);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048C950) --------------------------------------------------------
void __userpurge sub_48C950(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-14h]@1
  int v7; // [sp+4h] [bp-10h]@3
  int v8; // [sp+8h] [bp-Ch]@3
  int v9; // [sp+Ch] [bp-8h]@3
  DWORD v10; // [sp+10h] [bp-4h]@3

  v6 = a1;
  if ( a6 )
  {
    v7 = 0;
    v8 = 0;
    v9 = 0;
    CChar::SetDirection((void *)a5, *(_DWORD *)(a6 + 332) - *(_DWORD *)(a5 + 332), *(_DWORD *)(a6 + 336) - *(_DWORD *)(a5 + 336));
    v10 = GetTickCount();
    *(_DWORD *)(v6 + 64) = *(_DWORD *)(v6 + 44) + v10 - *(_DWORD *)(v6 + 40);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v6 + 48) + v10, 1);
    *(_DWORD *)(a5 + 468) = *(_DWORD *)(v6 + 48) + v10;
    CChar::Unlock(a5, a2, a3, a4);
    (*(void (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)a6 + 72))(
      a6,
      a5,
      2 * *(_DWORD *)(a6 + 272),
      &v9,
      &v7,
      &v8,
      v6);
    CChar::Lock(a5, a2, a3, a4);
    std___Mpunct_wchar_t___do_frac_digits(a6);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbb");
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048CA70) --------------------------------------------------------
int __stdcall sub_48CA70(int a1)
{
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = CChar::GetMaxAttack(a1);
  v3 = CChar::GetMaxAttack(a1);
  return sub_406E10(v3, v2);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0048CAA0) --------------------------------------------------------
int __thiscall sub_48CAA0(int this, int a2, int a3)
{
  void *v4; // eax@1
  int v5; // ST0C_4@1

  v4 = CBuff::CreateBuff(7, 10, this, v5);
  return (*(int (__thiscall **)(int, void *))(*(_DWORD *)a3 + 180))(a3, v4);
}

//----- (0048CAD0) --------------------------------------------------------
void __thiscall sub_48CAD0(int this, int a2, int a3)
{
  void *v3; // eax@2

  if ( a3 )
  {
    v3 = CBuff::CreateBuff(105, 20000, 800, this);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a3 + 180))(a3, v3);
  }
}

//----- (0048CB10) --------------------------------------------------------
void __userpurge sub_48CB10(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@3
  void *v7; // [sp+0h] [bp-28h]@1
  int v8; // [sp+4h] [bp-24h]@7
  int v9; // [sp+8h] [bp-20h]@7
  int v10; // [sp+Ch] [bp-1Ch]@7
  int v11; // [sp+10h] [bp-18h]@8
  int v12; // [sp+14h] [bp-14h]@7
  int v13; // [sp+18h] [bp-10h]@7
  int v14; // [sp+1Ch] [bp-Ch]@3
  int v15; // [sp+20h] [bp-8h]@3
  DWORD v16; // [sp+24h] [bp-4h]@3

  v7 = a1;
  if ( a6 )
  {
    CChar::SetDirection((void *)a5, *(_DWORD *)(a6 + 332) - *(_DWORD *)(a5 + 332), *(_DWORD *)(a6 + 336) - *(_DWORD *)(a5 + 336));
    v14 = 0;
    v6 = (*(int (__thiscall **)(void *))(*(_DWORD *)v7 + 92))(v7);
    v15 = sub_4934F0(*(_DWORD *)(a5 + 320), a2, a3, a4, a6 + 324, v6);
    v16 = GetTickCount();
    *((_DWORD *)v7 + 16) = *((_DWORD *)v7 + 11) + v16 - *((_DWORD *)v7 + 10);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *((_DWORD *)v7 + 12) + v16, 1);
    *(_DWORD *)(a5 + 468) = *((_DWORD *)v7 + 12) + v16;
    CChar::Unlock(a5, a2, a3, a4);
    while ( v15 )
    {
      v14 = unknown_libname_7();
      if ( CChar::IsNormal(v14) )
      {
        if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v14 + 316) )
        {
          v10 = 0;
          v9 = 0;
          v13 = sub_4833D0(v7, a5, v14);
          v8 = 0;
          v12 = (*(int (__thiscall **)(void *, int))(*(_DWORD *)v7 + 88))(v7, a5);
          if ( (*(int (__thiscall **)(void *))(*(_DWORD *)v7 + 100))(v7) )
          {
            v11 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, void *))(*(_DWORD *)v14 + 72))(
                    v14,
                    a5,
                    v13 * v12 / 100,
                    &v10,
                    &v8,
                    &v9,
                    v7);
            if ( !v11 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
            if ( v10 > 0 )
            {
              std___Mpunct_wchar_t___do_frac_digits(v14);
              std___Mpunct_wchar_t___do_frac_digits(a5);
              (*(void (__thiscall **)(void *))(*(_DWORD *)v7 + 96))(v7);
              CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
              (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v7 + 104))(v7, a5, v14);
            }
          }
          else
          {
            (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v7 + 104))(v7, a5, v14);
            (*(void (__thiscall **)(int, int))(*(_DWORD *)v14 + 80))(v14, a5);
          }
        }
      }
      v15 = CBaseList::Pop(v15, a2, a3, a4);
    }
    CChar::Lock(a5, a2, a3, a4);
    std___Mpunct_wchar_t___do_frac_digits(a6);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
    CPlayer::Write(a2, a3, a4, a6, 69, (unsigned int)"bw");
    CPlayer::UpdatePartyMember(a6, a2, a3, a4, 7);
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048CDA0) --------------------------------------------------------
int __stdcall sub_48CDA0(int a1)
{
  return sub_406E10(2500, 3500);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0048CDC0) --------------------------------------------------------
int __stdcall sub_48CDC0(int a1)
{
  return sub_406E10(2000, 2500);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0048CDE0) --------------------------------------------------------
int __userpurge sub_48CDE0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, int a6)
{
  return CMonsterMagic::Create(a1, a2, a3, -26, *(_DWORD *)(a4 + 316), (int)&a5, 1, a4, 800, 60000);
}

//----- (0048CE20) --------------------------------------------------------
int __stdcall sub_48CE20(int a1)
{
  return sub_406E10(4000, 5000);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0048CE40) --------------------------------------------------------
void __userpurge sub_48CE40(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  if ( a5 )
  {
    CMonsterMaguniMaster::Create(a1, a2, a3, a4, a5);
    CMonsterMaguniMaster::Create(a1, a2, a3, a4, a5);
  }
  else
  {
    CMonsterMaguniMaster::Create(a1, a2, a3, a4, a4);
    CMonsterMaguniMaster::Create(a1, a2, a3, a4, a4);
    sub_4328C0("CDemonBeastSummon::ExcuteM pChar is Null");
  }
}

//----- (0048CEB0) --------------------------------------------------------
int __stdcall sub_48CEB0(int a1)
{
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = CChar::GetMaxAttack(a1);
  v3 = CChar::GetMinAttack(a1);
  return sub_406E10(v3, v2);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);

//----- (0048CEE0) --------------------------------------------------------
int __stdcall sub_48CEE0(int a1)
{
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = CChar::GetMaxAttack(*(_DWORD *)(a1 + 484));
  v3 = CChar::GetMinAttack(*(_DWORD *)(a1 + 484));
  return sub_406E10(v3, v2);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 43D9A0: using guessed type int __thiscall CChar::GetMinAttack(_DWORD);

//----- (0048CF20) --------------------------------------------------------
LONG __userpurge sub_48CF20<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@1
  int v8; // [sp+0h] [bp-28h]@1
  int v9; // [sp+4h] [bp-24h]@5
  int v10; // [sp+8h] [bp-20h]@5
  int v11; // [sp+Ch] [bp-1Ch]@5
  int v12; // [sp+10h] [bp-18h]@5
  int v13; // [sp+14h] [bp-14h]@5
  int v14; // [sp+18h] [bp-10h]@5
  int v15; // [sp+1Ch] [bp-Ch]@1
  int v16; // [sp+20h] [bp-8h]@1
  DWORD v17; // [sp+24h] [bp-4h]@1

  v8 = a1;
  v15 = 0;
  v6 = (*(int (**)(void))(*(_DWORD *)a1 + 92))();
  v16 = sub_4935A0(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, v6);
  v17 = GetTickCount();
  *(_DWORD *)(v8 + 64) = *(_DWORD *)(v8 + 44) + v17 - *(_DWORD *)(v8 + 40);
  (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v8 + 48) + v17, 1);
  *(_DWORD *)(a5 + 468) = *(_DWORD *)(v8 + 48) + v17;
  CChar::Unlock(a5, a2, a3, a4);
  while ( v16 )
  {
    v15 = unknown_libname_7();
    if ( CChar::IsNormal(v15) )
    {
      if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v15 + 316) )
      {
        v11 = 0;
        v10 = 0;
        v14 = sub_4833D0((void *)v8, a5, v15);
        v9 = 0;
        v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 88))(v8, a5);
        v12 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)v15 + 72))(
                v15,
                a5,
                v14 * v13 / 100,
                &v11,
                &v9,
                &v10,
                v8);
        if ( !v12 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v15 + 80))(v15, a5);
        if ( v11 > 0 )
        {
          std___Mpunct_wchar_t___do_frac_digits(v15);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          (*(void (__thiscall **)(int))(*(_DWORD *)v8 + 96))(v8);
          CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
          (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v8 + 104))(v8, a5, v15);
        }
      }
    }
    v16 = CBaseList::Pop(v16, a2, a3, a4);
  }
  CChar::Lock(a5, a2, a3, a4);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  return CChar::WriteInSight(a2, a3, a4, a5, 61, (unsigned int)"db");
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048D100) --------------------------------------------------------
signed int __stdcall sub_48D100(int a1, int a2)
{
  signed int result; // eax@2

  if ( CChar::IsBState(a1, 4398046511104i64) )
    result = 0;
  else
    result = 1;
  return result;
}

//----- (0048D140) --------------------------------------------------------
int __userpurge sub_48D140<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@1
  void *v8; // eax@3
  int v9; // ST0C_4@3
  int v10; // [sp+0h] [bp-4h]@1

  v10 = a1;
  result = (**(int (__stdcall ***)(_DWORD, _DWORD))a1)(a5, 0);
  if ( result )
  {
    CPlayer::ReturnToPoint(a5, a2, a3, a4, *(_DWORD *)(v10 + 56));
    v8 = CBuff::CreateBuff(115, *(_DWORD *)(v10 + 44) / 0x3E8u, v10, v9);
    result = (*(int (__thiscall **)(int, void *))(*(_DWORD *)a5 + 180))(a5, v8);
  }
  return result;
}

//----- (0048D1A0) --------------------------------------------------------
signed int __thiscall CPurgatorialFlame::AddMagicMonster(void *this, int a2, int a3)
{
  signed int result; // eax@2

  if ( (**(int (__stdcall ***)(_DWORD, _DWORD))this)(a2, 0) )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (0048D1D0) --------------------------------------------------------
void __userpurge sub_48D1D0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-20h]@1
  int v7; // [sp+4h] [bp-1Ch]@6
  int v8; // [sp+8h] [bp-18h]@6
  int v9; // [sp+Ch] [bp-14h]@6
  int v10; // [sp+10h] [bp-10h]@6
  int v11; // [sp+14h] [bp-Ch]@6
  int v12; // [sp+18h] [bp-8h]@6
  DWORD v13; // [sp+1Ch] [bp-4h]@3

  v6 = a1;
  if ( a6 )
  {
    CChar::SetDirection((void *)a5, *(_DWORD *)(a6 + 332) - *(_DWORD *)(a5 + 332), *(_DWORD *)(a6 + 336) - *(_DWORD *)(a5 + 336));
    v13 = GetTickCount();
    *(_DWORD *)(v6 + 64) = *(_DWORD *)(v6 + 44) + v13 - *(_DWORD *)(v6 + 40);
    (*(void (__thiscall **)(int, DWORD, signed int))(*(_DWORD *)a5 + 228))(a5, *(_DWORD *)(v6 + 48) + v13, 1);
    *(_DWORD *)(a5 + 468) = *(_DWORD *)(v6 + 48) + v13;
    if ( CChar::IsNormal(a6) )
    {
      if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(a6 + 316) )
      {
        if ( sub_448870(a5 + 332, a6 + 332) < 170 )
        {
          v9 = 0;
          v8 = 0;
          v12 = sub_4833D0((void *)v6, a5, *(_DWORD *)(a5 + 464));
          v7 = 0;
          v11 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v6 + 88))(v6, a5);
          v10 = (*(int (__thiscall **)(int, int, int, int *, int *, int *, int))(*(_DWORD *)a6 + 72))(
                  a6,
                  a5,
                  v12 * v11 / 100,
                  &v9,
                  &v7,
                  &v8,
                  v6);
          if ( !v10 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)a6 + 80))(a6, a5);
          std___Mpunct_wchar_t___do_frac_digits(a6);
          std___Mpunct_wchar_t___do_frac_digits(a5);
          CChar::WriteInSight(a2, a3, a4, a5, 63, (unsigned int)"bddbbwwb");
          CPlayer::Write(a2, a3, a4, a6, 69, (unsigned int)"bw");
          CPlayer::UpdatePartyMember(a6, a2, a3, a4, 7);
        }
      }
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048D390) --------------------------------------------------------
int __userpurge sub_48D390<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, int a6)
{
  int v7; // ST18_4@1
  int v8; // eax@1
  int v9; // ST20_4@1

  v7 = CChar::GetMaxMagic(a4);
  v8 = CChar::GetMinMagic(a4);
  v9 = sub_406E10(v8, v7);
  return CMonsterMagic::Create(a1, a2, a3, 82, *(_DWORD *)(a4 + 316), (int)&a5, 1, a4, v9, 5000);
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);

//----- (0048D3F0) --------------------------------------------------------
int __stdcall sub_48D3F0(int a1)
{
  int result; // eax@2
  int v2; // ST04_4@3
  int v3; // eax@3

  if ( *(_DWORD *)(a1 + 484) )
  {
    v2 = CChar::GetMaxMagic(*(_DWORD *)(a1 + 484));
    v3 = CChar::GetMinMagic(*(_DWORD *)(a1 + 484));
    result = sub_406E10(v3, v2);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 458210: using guessed type int __thiscall CChar::GetMinMagic(_DWORD);

//----- (0048D440) --------------------------------------------------------
void *__userpurge sub_48D440<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  void *result; // eax@1
  int v7; // eax@3
  void *v8; // [sp+0h] [bp-24h]@1
  int v9; // [sp+4h] [bp-20h]@10
  int v10; // [sp+8h] [bp-1Ch]@10
  int v11; // [sp+Ch] [bp-18h]@10
  int v12; // [sp+10h] [bp-14h]@13
  int v13; // [sp+14h] [bp-10h]@10
  int v14; // [sp+18h] [bp-Ch]@10
  int v15; // [sp+1Ch] [bp-8h]@3
  int v16; // [sp+20h] [bp-4h]@3

  v8 = a1;
  result = (void *)(*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)a1 + 76))(a5, 0);
  if ( result )
  {
    v15 = 0;
    v7 = (*(int (__thiscall **)(void *))(*(_DWORD *)v8 + 92))(v8);
    v16 = sub_4934F0(*(_DWORD *)(a5 + 320), a2, a3, a4, a5 + 324, v7);
    ++*(_DWORD *)(a5 + 532);
    CChar::Unlock(a5, a2, a3, a4);
    while ( v16 )
    {
      v15 = unknown_libname_7();
      if ( CChar::IsNormal(v15) )
      {
        if ( *(_DWORD *)(a5 + 316) == *(_DWORD *)(v15 + 316) )
        {
          if ( (*(int (__thiscall **)(_DWORD, int, signed int))(**(_DWORD **)(a5 + 484) + 176))(
                 *(_DWORD *)(a5 + 484),
                 v15,
                 1) )
          {
            v11 = 0;
            v10 = 0;
            v14 = sub_4833D0(v8, *(_DWORD *)(a5 + 484), v15);
            v9 = 0;
            v13 = (*(int (__thiscall **)(void *, int))(*(_DWORD *)v8 + 88))(v8, a5);
            if ( *(_DWORD *)(a5 + 532) > 2 )
              v13 *= *(_DWORD *)(a5 + 532) - 1;
            if ( (*(int (__thiscall **)(void *))(*(_DWORD *)v8 + 100))(v8) )
            {
              v12 = (*(int (__thiscall **)(int, _DWORD, int, int *, int *, int *, void *))(*(_DWORD *)v15 + 72))(
                      v15,
                      *(_DWORD *)(a5 + 484),
                      v14 * v13 / 100,
                      &v11,
                      &v9,
                      &v10,
                      v8);
              if ( !v12 )
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v15 + 80))(v15, *(_DWORD *)(a5 + 484));
              if ( v11 > 0 )
              {
                std___Mpunct_wchar_t___do_frac_digits(v15);
                std___Mpunct_wchar_t___do_frac_digits(a5);
                (*(void (__thiscall **)(void *))(*(_DWORD *)v8 + 96))(v8);
                CChar::WriteInSight(a2, a3, a4, a5, 10, (unsigned int)"bbddww");
                (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v8 + 104))(v8, a5, v15);
              }
            }
            else
            {
              (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)v8 + 104))(v8, a5, v15);
              (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v15 + 80))(v15, *(_DWORD *)(a5 + 484));
            }
          }
        }
      }
      v16 = CBaseList::Pop(v16, a2, a3, a4);
    }
    result = CChar::Lock(a5, a2, a3, a4);
  }
  return result;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);

//----- (0048D680) --------------------------------------------------------
void *__thiscall sub_48D680(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (0048D6B0) --------------------------------------------------------
int __thiscall sub_48D6B0(int this)
{
  return sub_48D930(this);
}

//----- (0048D6D0) --------------------------------------------------------
int __thiscall sub_48D6D0(int this, int a2, int a3)
{
  int v3; // ST10_4@3
  int v4; // eax@3
  void *v5; // eax@9
  int result; // eax@10
  int v7; // eax@10
  int v8; // ST10_4@12
  int v9; // eax@12
  int v10; // eax@12
  int v11; // eax@13
  int v12; // [sp+0h] [bp-38h]@4
  int v13; // [sp+4h] [bp-34h]@1
  char v14; // [sp+Bh] [bp-2Dh]@14
  char v15; // [sp+Ch] [bp-2Ch]@13
  char v16; // [sp+13h] [bp-25h]@13
  char v17; // [sp+14h] [bp-24h]@10
  char v18; // [sp+1Bh] [bp-1Dh]@10
  char v19; // [sp+1Ch] [bp-1Ch]@9
  char v20; // [sp+28h] [bp-10h]@7
  int v21; // [sp+2Ch] [bp-Ch]@1
  int v22; // [sp+30h] [bp-8h]@1
  char v23; // [sp+37h] [bp-1h]@1

  v13 = this;
  v21 = *(_DWORD *)sub_478AB0(this);
  v22 = *(_DWORD *)(v13 + 4);
  v23 = 1;
  while ( !*(_BYTE *)sub_431110(v21) )
  {
    v22 = v21;
    v3 = sub_473500(v21);
    v4 = sub_474590(a3);
    v23 = sub_48D9E0(v4, v3);
    if ( v23 )
      v12 = *(_DWORD *)sub_474590(v21);
    else
      v12 = *(_DWORD *)sub_430F90(v21);
    v21 = v12;
  }
  sub_446700(&v20, v22);
  if ( v23 )
  {
    v5 = sub_40F070(v13, &v19);
    if ( (unsigned __int8)unknown_libname_8(v5) )
    {
      v18 = 1;
      v7 = (int)sub_420270(v13, &v17, 1, v22, a3);
      sub_41CA80(a2, v7, (int)&v18);
      return a2;
    }
    sub_418880((int *)&v20);
  }
  v8 = sub_474590(a3);
  v9 = unknown_libname_7();
  v10 = sub_473500(v9);
  if ( sub_48D9E0(v10, v8) )
  {
    v16 = 1;
    v11 = (int)sub_420270(v13, &v15, v23, v22, a3);
    sub_41CA80(a2, v11, (int)&v16);
    result = a2;
  }
  else
  {
    v14 = 0;
    sub_41CA80(a2, (int)&v20, (int)&v14);
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);

//----- (0048D880) --------------------------------------------------------
int __cdecl sub_48D880()
{
  int result; // eax@2
  int v1; // [sp+0h] [bp-Ch]@4
  int v2; // [sp+4h] [bp-8h]@3
  int v3; // [sp+8h] [bp-4h]@1

  CIOSpinLock::Enter((volatile LONG *)&unk_4DA760);
  v3 = dword_4DA75C;
  if ( dword_4DA75C )
  {
    dword_4DA75C = *(_DWORD *)(dword_4DA75C + 4);
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA760);
    result = v3;
  }
  else
  {
    CIOSpinLock::Leave((volatile LONG *)&unk_4DA760);
    v2 = (int)sub_401000(0x4Cu);
    if ( v2 )
      v1 = sub_480D40(v2);
    else
      v1 = 0;
    result = v1;
  }
  return result;
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (0048D900) --------------------------------------------------------
LONG __cdecl sub_48D900(int a1)
{
  CIOSpinLock::Enter((volatile LONG *)&unk_4DA760);
  *(_DWORD *)(a1 + 4) = dword_4DA75C;
  dword_4DA75C = a1;
  return CIOSpinLock::Leave((volatile LONG *)&unk_4DA760);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (0048D930) --------------------------------------------------------
int __thiscall sub_48D930(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_48DA20(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (0048D9E0) --------------------------------------------------------
bool __stdcall sub_48D9E0(int a1, int a2)
{
  return *(_DWORD *)a1 < *(_DWORD *)a2;
}

//----- (0048DA00) --------------------------------------------------------
void *__thiscall sub_48DA00(void *this)
{
  *(_DWORD *)this += 8;
  return this;
}

//----- (0048DA20) --------------------------------------------------------
void *__thiscall sub_48DA20(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_48DAC0(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (0048DAC0) --------------------------------------------------------
int __thiscall sub_48DAC0(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_48DC30(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 48DC30: using guessed type _DWORD __stdcall sub_48DC30(_DWORD);

//----- (0048DB20) --------------------------------------------------------
int __thiscall sub_48DB20(int *this)
{
  int result; // eax@1
  int v2; // eax@3
  int v3; // eax@4
  int *v4; // eax@5
  int *v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@5

  v5 = this;
  result = sub_431110(*this);
  if ( !*(_BYTE *)result )
  {
    v2 = sub_430F90(*v5);
    if ( *(_BYTE *)sub_431110(*(_DWORD *)v2) )
    {
      while ( 1 )
      {
        v4 = (int *)sub_446FF0(*v5);
        v6 = *v4;
        result = *(_BYTE *)sub_431110(*v4);
        if ( result )
          break;
        result = sub_430F90(v6);
        if ( *v5 != *(_DWORD *)result )
          break;
        *v5 = v6;
      }
      *v5 = v6;
    }
    else
    {
      v3 = sub_430F90(*v5);
      result = sub_42F920(*(_DWORD *)v3);
      *v5 = result;
    }
  }
  return result;
}

//----- (0048DBE0) --------------------------------------------------------
int __thiscall sub_48DBE0(int this, int a2, int a3, int a4, int a5, char a6)
{
  int result; // eax@1
  int v7; // edx@1

  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = a4;
  v7 = *(_DWORD *)(a5 + 4);
  result = this;
  *(_DWORD *)(this + 12) = *(_DWORD *)a5;
  *(_DWORD *)(this + 16) = v7;
  *(_BYTE *)(this + 20) = a6;
  *(_BYTE *)(this + 21) = 0;
  return result;
}

//----- (0048DC30) --------------------------------------------------------
int __stdcall sub_48DC30(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_48DC30(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 48DC30: using guessed type _DWORD __stdcall sub_48DC30(_DWORD);

//----- (0048DCB0) --------------------------------------------------------
int __thiscall sub_48DCB0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC3F0;
  return v2;
}
// 4BC3F0: using guessed type int (__stdcall *off_4BC3F0)(int, int);

//----- (0048DCD0) --------------------------------------------------------
int __thiscall sub_48DCD0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC440;
  return v2;
}
// 4BC440: using guessed type int (__stdcall *off_4BC440)(int, int);

//----- (0048DCF0) --------------------------------------------------------
int __thiscall sub_48DCF0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC490;
  return v2;
}
// 4BC490: using guessed type int (__stdcall *off_4BC490)(int, int);

//----- (0048DD10) --------------------------------------------------------
int __thiscall sub_48DD10(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC4E0;
  return v2;
}
// 4BC4E0: using guessed type int (__stdcall *off_4BC4E0)(int, int);

//----- (0048DD30) --------------------------------------------------------
int __thiscall sub_48DD30(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC530;
  return v2;
}
// 4BC530: using guessed type int (__stdcall *off_4BC530)(int, int);

//----- (0048DD50) --------------------------------------------------------
int __thiscall sub_48DD50(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC580;
  return v2;
}
// 4BC580: using guessed type int (__stdcall *off_4BC580)(int, int);

//----- (0048DD70) --------------------------------------------------------
int __thiscall sub_48DD70(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC5D0;
  return v2;
}
// 4BC5D0: using guessed type int (__stdcall *off_4BC5D0)(int, int);

//----- (0048DD90) --------------------------------------------------------
int __thiscall sub_48DD90(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC630;
  return v2;
}
// 4BC630: using guessed type int (__stdcall *off_4BC630)(int, int);

//----- (0048DDB0) --------------------------------------------------------
int __thiscall sub_48DDB0(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 9 * *(_DWORD *)(this + 8);
}

//----- (0048DDD0) --------------------------------------------------------
int __thiscall sub_48DDD0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC690;
  return v2;
}
// 4BC690: using guessed type int (__stdcall *off_4BC690)(int, int);

//----- (0048DDF0) --------------------------------------------------------
int __thiscall sub_48DDF0(int this, int a2, int a3)
{
  return a3 + 8 * *(_DWORD *)(this + 8);
}

//----- (0048DE10) --------------------------------------------------------
int __thiscall sub_48DE10(int this)
{
  return *(_DWORD *)(this + 8) / 2;
}

//----- (0048DE30) --------------------------------------------------------
int __thiscall sub_48DE30(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC6F0;
  return v2;
}
// 4BC6F0: using guessed type int (__stdcall *off_4BC6F0)(int, int);

//----- (0048DE50) --------------------------------------------------------
signed int __cdecl sub_48DE50()
{
  return 100;
}

//----- (0048DE60) --------------------------------------------------------
int __thiscall sub_48DE60(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 3 * *(_DWORD *)(this + 8);
}

//----- (0048DE80) --------------------------------------------------------
int __thiscall sub_48DE80(int this, int a2)
{
  return *(_DWORD *)(this + 44) - 100 * *(_DWORD *)(this + 8);
}

//----- (0048DEA0) --------------------------------------------------------
int __thiscall sub_48DEA0(int this)
{
  return 2 * *(_DWORD *)(this + 8);
}

//----- (0048DEC0) --------------------------------------------------------
int __thiscall sub_48DEC0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BC750;
  return v2;
}
// 4BC750: using guessed type int (__stdcall *off_4BC750)(int, int);

//----- (0048DEE0) --------------------------------------------------------
int __thiscall sub_48DEE0(int this)
{
  return 150 * *(_DWORD *)(this + 8) + 50;
}

//----- (0048DF00) --------------------------------------------------------
int __thiscall sub_48DF00(int this, int a2)
{
  return *(_DWORD *)(this + 36) + *(_DWORD *)(this + 8);
}

//----- (0048DF20) --------------------------------------------------------
int __thiscall sub_48DF20(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DEC0(this);
  *(_DWORD *)v2 = &off_4BC7A0;
  return v2;
}
// 4BC7A0: using guessed type int (__stdcall *off_4BC7A0)(int, int);

//----- (0048DF40) --------------------------------------------------------
int __thiscall sub_48DF40(int this)
{
  return 200 * *(_DWORD *)(this + 8) + 800;
}

//----- (0048DF60) --------------------------------------------------------
int __thiscall sub_48DF60(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 4 * *(_DWORD *)(this + 8);
}

//----- (0048DF80) --------------------------------------------------------
int __thiscall sub_48DF80(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC7F0;
  return v2;
}
// 4BC7F0: using guessed type int (__stdcall *off_4BC7F0)(int, int);

//----- (0048DFA0) --------------------------------------------------------
int __stdcall sub_48DFA0(int a1, int a2)
{
  return a2;
}

//----- (0048DFB0) --------------------------------------------------------
int __thiscall sub_48DFB0(int this)
{
  return -6 * *(_DWORD *)(this + 8);
}

//----- (0048DFD0) --------------------------------------------------------
int __thiscall sub_48DFD0(int this, int a2)
{
  return 2 * *(_DWORD *)(this + 8);
}

//----- (0048DFF0) --------------------------------------------------------
int __thiscall sub_48DFF0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC850;
  return v2;
}
// 4BC850: using guessed type int (__stdcall *off_4BC850)(int, int);

//----- (0048E010) --------------------------------------------------------
int __thiscall sub_48E010(int this, int a2, int a3)
{
  return a3 + 12 * *(_DWORD *)(this + 8);
}

//----- (0048E030) --------------------------------------------------------
int __thiscall sub_48E030(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC8B0;
  return v2;
}
// 4BC8B0: using guessed type int (__stdcall *off_4BC8B0)(int, int);

//----- (0048E050) --------------------------------------------------------
int __thiscall sub_48E050(int this, int a2, int a3)
{
  return a3 + 50 * *(_DWORD *)(this + 8) + 150;
}

//----- (0048E070) --------------------------------------------------------
signed int __cdecl CReturn::CReturn()
{
  return 200;
}

//----- (0048E080) --------------------------------------------------------
int __thiscall sub_48E080(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC910;
  return v2;
}
// 4BC910: using guessed type int (__stdcall *off_4BC910)(int, int);

//----- (0048E0A0) --------------------------------------------------------
int __thiscall sub_48E0A0(int this, int a2, int a3)
{
  return a3 + 20 * *(_DWORD *)(this + 8) + 60 + sub_406E10(0, *(_DWORD *)(this + 8));
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0048E0E0) --------------------------------------------------------
signed int __cdecl sub_48E0E0()
{
  return 50;
}

//----- (0048E0F0) --------------------------------------------------------
int __thiscall CUpBow::CUpBow(int this)
{
  return *(_DWORD *)(this + 8) + *(_DWORD *)(this + 8) / 2;
}

//----- (0048E110) --------------------------------------------------------
int __thiscall CUpConCen::CUpConCen(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC970;
  return v2;
}
// 4BC970: using guessed type int (__stdcall *off_4BC970)(int, int);

//----- (0048E130) --------------------------------------------------------
int __thiscall CPullSwing::CPullSwing(int this, int a2, int a3)
{
  return a3 + 10 * *(_DWORD *)(this + 8) + 50;
}

//----- (0048E150) --------------------------------------------------------
int __thiscall CBlow::CBlow(int this)
{
  return *(_DWORD *)(this + 8) + 9;
}

//----- (0048E170) --------------------------------------------------------
int __thiscall CPullSwing::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BC9D0;
  return v2;
}
// 4BC9D0: using guessed type int (__stdcall *off_4BC9D0)(int, int);

//----- (0048E190) --------------------------------------------------------
int __thiscall sub_48E190(int this, int a2, int a3)
{
  return a3 + 24 * *(_DWORD *)(this + 8) + 80 + sub_406E10(0, *(_DWORD *)(this + 8));
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);

//----- (0048E1D0) --------------------------------------------------------
int __thiscall CThunder::GetHit(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BCA30;
  return v2;
}
// 4BCA30: using guessed type int (__stdcall *off_4BCA30)(int, int);

//----- (0048E1F0) --------------------------------------------------------
int __thiscall CShot::CShot(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BCA90;
  return v2;
}
// 4BCA90: using guessed type int (__stdcall *off_4BCA90)(int, int);

//----- (0048E210) --------------------------------------------------------
int __thiscall CShot::GetHostility(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BCAF0;
  return v2;
}
// 4BCAF0: using guessed type int (__stdcall *off_4BCAF0)(int, int);

//----- (0048E230) --------------------------------------------------------
int __thiscall sub_48E230(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BCB50;
  return v2;
}
// 4BCB50: using guessed type int (__stdcall *off_4BCB50)(int, int);

//----- (0048E250) --------------------------------------------------------
int __thiscall sub_48E250(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BCBB0;
  return v2;
}
// 4BCBB0: using guessed type int (__stdcall *off_4BCBB0)(int, int);

//----- (0048E270) --------------------------------------------------------
signed int __cdecl sub_48E270()
{
  return 75;
}

//----- (0048E280) --------------------------------------------------------
int __thiscall CMock::CMock(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 3 * *(_DWORD *)(this + 8) / 2;
}

//----- (0048E2B0) --------------------------------------------------------
int __thiscall sub_48E2B0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BCC10;
  return v2;
}
// 4BCC10: using guessed type int (__stdcall *off_4BCC10)(int, int);

//----- (0048E2D0) --------------------------------------------------------
int __thiscall sub_48E2D0(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 5 * *(_DWORD *)(this + 8);
}

//----- (0048E2F0) --------------------------------------------------------
int __thiscall sub_48E2F0(int this)
{
  return *(_DWORD *)(this + 8) + 5;
}

//----- (0048E310) --------------------------------------------------------
signed int __thiscall sub_48E310(int this, int a2, int a3)
{
  *(_DWORD *)(this + 40) = GetTickCount();
  return 1;
}

//----- (0048E330) --------------------------------------------------------
int __thiscall sub_48E330(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BCC70;
  return v2;
}
// 4BCC70: using guessed type int (__stdcall *off_4BCC70)(int, int);

//----- (0048E350) --------------------------------------------------------
int __thiscall sub_48E350(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4BCCD0;
  return v2;
}
// 4BCCD0: using guessed type int (__stdcall *off_4BCCD0)(int, int);

//----- (0048E370) --------------------------------------------------------
int __thiscall CNegative::GetHostility(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BCD30;
  return v2;
}
// 4BCD30: using guessed type int (__stdcall *off_4BCD30)(int, int);

//----- (0048E390) --------------------------------------------------------
int __thiscall CNegative::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4BCD90;
  return v2;
}
// 4BCD90: using guessed type int (__stdcall *off_4BCD90)(int, int);

//----- (0048E3B0) --------------------------------------------------------
int __thiscall CFlameArrow::CFlameArrow(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BCDF0;
  return v2;
}
// 4BCDF0: using guessed type int (__stdcall *off_4BCDF0)(int, int);

//----- (0048E3D0) --------------------------------------------------------
int __thiscall CFlameArrow::GetAttack(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BCE50;
  return v2;
}
// 4BCE50: using guessed type int (__stdcall *off_4BCE50)(int, int);

//----- (0048E3F0) --------------------------------------------------------
int __thiscall CTranscendental::CTranscendental(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4BCEB0;
  return v2;
}
// 4BCEB0: using guessed type int (__stdcall *off_4BCEB0)(int, int);

//----- (0048E410) --------------------------------------------------------
int __thiscall CTranscendental::GetAttack(int this, int a2)
{
  return *(_DWORD *)(this + 36) + *(_DWORD *)(this + 8) / 4;
}

//----- (0048E440) --------------------------------------------------------
int __thiscall CUpperSlash::CUpperSlash(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CTranscendental::CTranscendental(this);
  *(_DWORD *)v2 = &off_4BCF10;
  return v2;
}
// 4BCF10: using guessed type int (__stdcall *off_4BCF10)(int, int);

//----- (0048E460) --------------------------------------------------------
int __thiscall CUpperSlash::GetAttack(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4BCF70;
  return v2;
}
// 4BCF70: using guessed type int (__stdcall *off_4BCF70)(int, int);

//----- (0048E480) --------------------------------------------------------
int __thiscall sub_48E480(int this, int a2)
{
  return *(_DWORD *)(this + 36) + *(_DWORD *)(this + 8) / 2;
}

//----- (0048E4A0) --------------------------------------------------------
int __thiscall CUpperSlash::GetHostility(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CUpperSlash::GetAttack(this);
  *(_DWORD *)v2 = &off_4BCFD0;
  return v2;
}
// 4BCFD0: using guessed type int (__stdcall *off_4BCFD0)(int, int);

//----- (0048E4C0) --------------------------------------------------------
int __thiscall sub_48E4C0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CUpperSlash::GetAttack(this);
  *(_DWORD *)v2 = &off_4BD030;
  return v2;
}
// 4BD030: using guessed type int (__stdcall *off_4BD030)(int, int);

//----- (0048E4E0) --------------------------------------------------------
int __thiscall sub_48E4E0(int this, int a2)
{
  return *(_DWORD *)(this + 8) + *(_DWORD *)(this + 36);
}

//----- (0048E500) --------------------------------------------------------
int __thiscall sub_48E500(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CUpperSlash::GetAttack(this);
  *(_DWORD *)v2 = &off_4BD090;
  return v2;
}
// 4BD090: using guessed type int (__stdcall *off_4BD090)(int, int);

//----- (0048E520) --------------------------------------------------------
int __thiscall sub_48E520(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CUpperSlash::GetAttack(this);
  *(_DWORD *)v2 = &off_4BD0F0;
  return v2;
}
// 4BD0F0: using guessed type int (__stdcall *off_4BD0F0)(int, int);

//----- (0048E540) --------------------------------------------------------
int __thiscall sub_48E540(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E560(this);
  *(_DWORD *)v2 = &off_4BD150;
  return v2;
}
// 4BD150: using guessed type int (__stdcall *off_4BD150)(int, int);

//----- (0048E560) --------------------------------------------------------
int __thiscall sub_48E560(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BD1C0;
  return v2;
}
// 4BD1C0: using guessed type int (__stdcall *off_4BD1C0)(int, int);

//----- (0048E580) --------------------------------------------------------
int __thiscall sub_48E580(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4BD230;
  return v2;
}
// 4BD230: using guessed type int (__stdcall *off_4BD230)(int, int);

//----- (0048E5B0) --------------------------------------------------------
signed int __cdecl CInfernal::CInfernal()
{
  return 9;
}

//----- (0048E5C0) --------------------------------------------------------
int __thiscall sub_48E5C0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BD2A0;
  return v2;
}
// 4BD2A0: using guessed type int (__stdcall *off_4BD2A0)(int, int);

//----- (0048E5E0) --------------------------------------------------------
int __thiscall sub_48E5E0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BD310;
  return v2;
}
// 4BD310: using guessed type int (__stdcall *off_4BD310)(int, int);

//----- (0048E600) --------------------------------------------------------
int __thiscall sub_48E600(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BD380;
  return v2;
}
// 4BD380: using guessed type int (__stdcall *off_4BD380)(int, int);

//----- (0048E620) --------------------------------------------------------
int __thiscall sub_48E620(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BD3F0;
  return v2;
}
// 4BD3F0: using guessed type int (__stdcall *off_4BD3F0)(int, int);

//----- (0048E640) --------------------------------------------------------
signed int __cdecl CExplosion::GetSpendMP()
{
  return 7;
}

//----- (0048E650) --------------------------------------------------------
int __thiscall sub_48E650(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BD460;
  return v2;
}
// 4BD460: using guessed type int (__stdcall *off_4BD460)(int, int);

//----- (0048E670) --------------------------------------------------------
signed int __cdecl CGetherShot::CGetherShot()
{
  return 8;
}

//----- (0048E680) --------------------------------------------------------
int __thiscall sub_48E680(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BD4D0;
  return v2;
}
// 4BD4D0: using guessed type int (__stdcall *off_4BD4D0)(int, int);

//----- (0048E6A0) --------------------------------------------------------
int __thiscall sub_48E6A0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BD540;
  return v2;
}
// 4BD540: using guessed type int (__stdcall *off_4BD540)(int, int);

//----- (0048E6C0) --------------------------------------------------------
int __thiscall sub_48E6C0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6E0(this);
  *(_DWORD *)v2 = &off_4BD5B0;
  return v2;
}
// 4BD5B0: using guessed type int (__stdcall *off_4BD5B0)(int, int);

//----- (0048E6E0) --------------------------------------------------------
int __thiscall sub_48E6E0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4BD620;
  return v2;
}
// 4BD620: using guessed type int (__stdcall *off_4BD620)(int, int);

//----- (0048E700) --------------------------------------------------------
int __stdcall sub_48E700(int a1, int a2, int a3)
{
  return 0;
}

//----- (0048E710) --------------------------------------------------------
int __thiscall CSpiritBlast::CSpiritBlast(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6E0(this);
  *(_DWORD *)v2 = &off_4BD690;
  return v2;
}
// 4BD690: using guessed type int (__stdcall *off_4BD690)(int, int);

//----- (0048E730) --------------------------------------------------------
int __thiscall CMagic::CMagic(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6E0(this);
  *(_DWORD *)v2 = &off_4BD700;
  return v2;
}
// 4BD700: using guessed type int (__stdcall *off_4BD700)(int, int);

//----- (0048E750) --------------------------------------------------------
int __thiscall CFire::CFire(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6E0(this);
  *(_DWORD *)v2 = &off_4BD770;
  return v2;
}
// 4BD770: using guessed type int (__stdcall *off_4BD770)(int, int);

//----- (0048E770) --------------------------------------------------------
int __thiscall CFireExplosion::CFireExplosion(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 16 * *(_DWORD *)(this + 8);
}

//----- (0048E790) --------------------------------------------------------
int __thiscall CFireEruption::CFireEruption(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BD7E0;
  return v2;
}
// 4BD7E0: using guessed type int (__stdcall *off_4BD7E0)(int, int);

//----- (0048E7B0) --------------------------------------------------------
int __thiscall CIce::CIce(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 6 * *(_DWORD *)(this + 8);
}

//----- (0048E7D0) --------------------------------------------------------
int __thiscall CIce::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BD830;
  return v2;
}
// 4BD830: using guessed type int (__stdcall *off_4BD830)(int, int);

//----- (0048E7F0) --------------------------------------------------------
int __thiscall sub_48E7F0(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 2 * *(_DWORD *)(this + 8);
}

//----- (0048E810) --------------------------------------------------------
int __thiscall sub_48E810(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIce::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BD888;
  return v2;
}
// 4BD888: using guessed type int (__stdcall *off_4BD888)(int, int);

//----- (0048E830) --------------------------------------------------------
int __thiscall sub_48E830(int this)
{
  return *(_DWORD *)(this + 36) + 2 * *(_DWORD *)(this + 8);
}

//----- (0048E850) --------------------------------------------------------
int __thiscall sub_48E850(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIce::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BD8E0;
  return v2;
}
// 4BD8E0: using guessed type int (__stdcall *off_4BD8E0)(int, int);

//----- (0048E870) --------------------------------------------------------
int __thiscall sub_48E870(int this)
{
  return *(_DWORD *)(this + 36) + 4 * *(_DWORD *)(this + 8);
}

//----- (0048E890) --------------------------------------------------------
int __thiscall sub_48E890(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIce::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BD938;
  return v2;
}
// 4BD938: using guessed type int (__stdcall *off_4BD938)(int, int);

//----- (0048E8B0) --------------------------------------------------------
int __thiscall sub_48E8B0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIce::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BD990;
  return v2;
}
// 4BD990: using guessed type int (__stdcall *off_4BD990)(int, int);

//----- (0048E8D0) --------------------------------------------------------
int __thiscall sub_48E8D0(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 30 * *(_DWORD *)(this + 8);
}

//----- (0048E8F0) --------------------------------------------------------
int __thiscall sub_48E8F0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIce::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BD9E8;
  return v2;
}
// 4BD9E8: using guessed type int (__stdcall *off_4BD9E8)(int, int);

//----- (0048E910) --------------------------------------------------------
int __thiscall sub_48E910(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDA40;
  return v2;
}
// 4BDA40: using guessed type int (__stdcall *off_4BDA40)(int, int);

//----- (0048E930) --------------------------------------------------------
int __thiscall sub_48E930(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDA90;
  return v2;
}
// 4BDA90: using guessed type int (__stdcall *off_4BDA90)(int, int);

//----- (0048E950) --------------------------------------------------------
int __thiscall sub_48E950(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDAE0;
  return v2;
}
// 4BDAE0: using guessed type int (__stdcall *off_4BDAE0)(int, int);

//----- (0048E970) --------------------------------------------------------
int __thiscall CExplosiveBurst::GetAddValueType(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDB30;
  return v2;
}
// 4BDB30: using guessed type int (__stdcall *off_4BDB30)(int, int);

//----- (0048E990) --------------------------------------------------------
int __thiscall sub_48E990(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDB80;
  return v2;
}
// 4BDB80: using guessed type int (__stdcall *off_4BDB80)(int, int);

//----- (0048E9B0) --------------------------------------------------------
int __thiscall sub_48E9B0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDBD0;
  return v2;
}
// 4BDBD0: using guessed type int (__stdcall *off_4BDBD0)(int, int);

//----- (0048E9D0) --------------------------------------------------------
int __thiscall sub_48E9D0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDC20;
  return v2;
}
// 4BDC20: using guessed type int (__stdcall *off_4BDC20)(int, int);

//----- (0048E9F0) --------------------------------------------------------
int __thiscall sub_48E9F0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDC70;
  return v2;
}
// 4BDC70: using guessed type int (__stdcall *off_4BDC70)(int, int);

//----- (0048EA10) --------------------------------------------------------
int __thiscall CIceRequiem::CIceRequiem(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDCC0;
  return v2;
}
// 4BDCC0: using guessed type int (__stdcall *off_4BDCC0)(int, int);

//----- (0048EA30) --------------------------------------------------------
int __thiscall CIceRequiem::GetAddValueType(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDD10;
  return v2;
}
// 4BDD10: using guessed type int (__stdcall *off_4BDD10)(int, int);

//----- (0048EA50) --------------------------------------------------------
int __thiscall sub_48EA50(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDD60;
  return v2;
}
// 4BDD60: using guessed type int (__stdcall *off_4BDD60)(int, int);

//----- (0048EA70) --------------------------------------------------------
int __thiscall sub_48EA70(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDDB0;
  return v2;
}
// 4BDDB0: using guessed type int (__stdcall *off_4BDDB0)(int, int);

//----- (0048EA90) --------------------------------------------------------
int __thiscall sub_48EA90(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48EA70(this);
  *(_DWORD *)v2 = &off_4BDE08;
  return v2;
}
// 4BDE08: using guessed type int (__stdcall *off_4BDE08)(int, int);

//----- (0048EAB0) --------------------------------------------------------
int __thiscall sub_48EAB0(int this, int a2)
{
  return *(_DWORD *)(this + 36) - 30 * *(_DWORD *)(this + 8);
}

//----- (0048EAD0) --------------------------------------------------------
int __thiscall CIceStorm::CIceStorm(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48EA70(this);
  *(_DWORD *)v2 = &off_4BDE60;
  return v2;
}
// 4BDE60: using guessed type int (__stdcall *off_4BDE60)(int, int);

//----- (0048EAF0) --------------------------------------------------------
int __thiscall CFireRain::CFireRain(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 80 * *(_DWORD *)(this + 8);
}

//----- (0048EB10) --------------------------------------------------------
int __thiscall CPoisonCloud::CPoisonCloud(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDEB8;
  return v2;
}
// 4BDEB8: using guessed type int (__stdcall *off_4BDEB8)(int, int);

//----- (0048EB30) --------------------------------------------------------
int __thiscall CManaBurn::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDF08;
  return v2;
}
// 4BDF08: using guessed type int (__stdcall *off_4BDF08)(int, int);

//----- (0048EB50) --------------------------------------------------------
int __thiscall CHealing::CHealing(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDF58;
  return v2;
}
// 4BDF58: using guessed type int (__stdcall *off_4BDF58)(int, int);

//----- (0048EB70) --------------------------------------------------------
int __thiscall CMShock::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDFA8;
  return v2;
}
// 4BDFA8: using guessed type int (__stdcall *off_4BDFA8)(int, int);

//----- (0048EB90) --------------------------------------------------------
int __thiscall CHealingAny::CHealingAny(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BDFF8;
  return v2;
}
// 4BDFF8: using guessed type int (__stdcall *off_4BDFF8)(int, int);

//----- (0048EBB0) --------------------------------------------------------
int __thiscall CUpperSmash::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE048;
  return v2;
}
// 4BE048: using guessed type int (__stdcall *off_4BE048)(int, int);

//----- (0048EBD0) --------------------------------------------------------
signed int __cdecl CHealingAnyPlus::CHealingAnyPlus()
{
  return 4;
}

//----- (0048EBE0) --------------------------------------------------------
int __thiscall sub_48EBE0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CUpperSmash::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BE0A8;
  return v2;
}
// 4BE0A8: using guessed type int (__stdcall *off_4BE0A8)(int, int);

//----- (0048EC00) --------------------------------------------------------
int __thiscall sub_48EC00(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CUpperSmash::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BE108;
  return v2;
}
// 4BE108: using guessed type int (__stdcall *off_4BE108)(int, int);

//----- (0048EC20) --------------------------------------------------------
int __thiscall sub_48EC20(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 40 * *(_DWORD *)(this + 8);
}

//----- (0048EC40) --------------------------------------------------------
signed int __cdecl sub_48EC40()
{
  return 11;
}

//----- (0048EC50) --------------------------------------------------------
int __thiscall CHealingAnyQuick::CHealingAnyQuick(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE168;
  return v2;
}
// 4BE168: using guessed type int (__stdcall *off_4BE168)(int, int);

//----- (0048EC70) --------------------------------------------------------
int __thiscall CHealingInstance::CHealingInstance(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE1B8;
  return v2;
}
// 4BE1B8: using guessed type int (__stdcall *off_4BE1B8)(int, int);

//----- (0048EC90) --------------------------------------------------------
int __thiscall CHealingInstance::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE208;
  return v2;
}
// 4BE208: using guessed type int (__stdcall *off_4BE208)(int, int);

//----- (0048ECB0) --------------------------------------------------------
int __thiscall CHealingGreatRe::CHealingGreatRe(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE258;
  return v2;
}
// 4BE258: using guessed type int (__stdcall *off_4BE258)(int, int);

//----- (0048ECD0) --------------------------------------------------------
int __thiscall CRest::CRest(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 25 * *(_DWORD *)(this + 8);
}

//----- (0048ECF0) --------------------------------------------------------
int __thiscall CUpFatal::CUpFatal(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE2A8;
  return v2;
}
// 4BE2A8: using guessed type int (__stdcall *off_4BE2A8)(int, int);

//----- (0048ED10) --------------------------------------------------------
int __thiscall CUpFatal2::CUpFatal2(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE2F8;
  return v2;
}
// 4BE2F8: using guessed type int (__stdcall *off_4BE2F8)(int, int);

//----- (0048ED30) --------------------------------------------------------
int __thiscall CUpFatal3::CUpFatal3(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE348;
  return v2;
}
// 4BE348: using guessed type int (__stdcall *off_4BE348)(int, int);

//----- (0048ED50) --------------------------------------------------------
int __thiscall CMeditation::CMeditation(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE398;
  return v2;
}
// 4BE398: using guessed type int (__stdcall *off_4BE398)(int, int);

//----- (0048ED70) --------------------------------------------------------
bool __thiscall sub_48ED70(int this, int a2, unsigned int a3)
{
  return a2 >= *(_DWORD *)(this + 12) && a3 > 3;
}

//----- (0048EDB0) --------------------------------------------------------
int __thiscall CUpFire::CUpFire(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE3E8;
  return v2;
}
// 4BE3E8: using guessed type int (__stdcall *off_4BE3E8)(int, int);

//----- (0048EDD0) --------------------------------------------------------
int __thiscall CFatalChance::CFatalChance(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE438;
  return v2;
}
// 4BE438: using guessed type int (__stdcall *off_4BE438)(int, int);

//----- (0048EDF0) --------------------------------------------------------
int __thiscall CUpBlockShield::CUpBlockShield(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE488;
  return v2;
}
// 4BE488: using guessed type int (__stdcall *off_4BE488)(int, int);

//----- (0048EE10) --------------------------------------------------------
int __thiscall CGunnery::CGunnery(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 8 * *(_DWORD *)(this + 8);
}

//----- (0048EE30) --------------------------------------------------------
int __thiscall CRevival::CRevival(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE4D8;
  return v2;
}
// 4BE4D8: using guessed type int (__stdcall *off_4BE4D8)(int, int);

//----- (0048EE50) --------------------------------------------------------
int __thiscall CResurrection::CResurrection(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE528;
  return v2;
}
// 4BE528: using guessed type int (__stdcall *off_4BE528)(int, int);

//----- (0048EE70) --------------------------------------------------------
int __thiscall CResurrection::GetSpendMP(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 12 * *(_DWORD *)(this + 8);
}

//----- (0048EE90) --------------------------------------------------------
int __thiscall CReincarnate::CReincarnate(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE578;
  return v2;
}
// 4BE578: using guessed type int (__stdcall *off_4BE578)(int, int);

//----- (0048EEB0) --------------------------------------------------------
int __thiscall CReincarnate::GetSpendMP(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 31 * *(_DWORD *)(this + 8);
}

//----- (0048EED0) --------------------------------------------------------
int __thiscall CUpEvade::CUpEvade(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE5C8;
  return v2;
}
// 4BE5C8: using guessed type int (__stdcall *off_4BE5C8)(int, int);

//----- (0048EEF0) --------------------------------------------------------
int __thiscall CUpRFEvade::CUpRFEvade(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE618;
  return v2;
}
// 4BE618: using guessed type int (__stdcall *off_4BE618)(int, int);

//----- (0048EF10) --------------------------------------------------------
int __thiscall CStoneShield::CStoneShield(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE668;
  return v2;
}
// 4BE668: using guessed type int (__stdcall *off_4BE668)(int, int);

//----- (0048EF30) --------------------------------------------------------
int __thiscall CHaste::CHaste(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 11 * *(_DWORD *)(this + 8);
}

//----- (0048EF50) --------------------------------------------------------
int __thiscall CFrostBlast::CFrostBlast(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE6B8;
  return v2;
}
// 4BE6B8: using guessed type int (__stdcall *off_4BE6B8)(int, int);

//----- (0048EF70) --------------------------------------------------------
int __thiscall CHealingParty::CHealingParty(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE708;
  return v2;
}
// 4BE708: using guessed type int (__stdcall *off_4BE708)(int, int);

//----- (0048EF90) --------------------------------------------------------
int __thiscall CMPoisonCloud::GetResistNum(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE758;
  return v2;
}
// 4BE758: using guessed type int (__stdcall *off_4BE758)(int, int);

//----- (0048EFB0) --------------------------------------------------------
int __thiscall sub_48EFB0(int this, int a2)
{
  return *(_DWORD *)(this + 36);
}

//----- (0048EFD0) --------------------------------------------------------
int __thiscall sub_48EFD0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE7A8;
  return v2;
}
// 4BE7A8: using guessed type int (__stdcall *off_4BE7A8)(int, int);

//----- (0048EFF0) --------------------------------------------------------
int __thiscall sub_48EFF0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE7F8;
  return v2;
}
// 4BE7F8: using guessed type int (__stdcall *off_4BE7F8)(int, int);

//----- (0048F010) --------------------------------------------------------
int __thiscall CWildAccuracy::CWildAccuracy(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE848;
  return v2;
}
// 4BE848: using guessed type int (__stdcall *off_4BE848)(int, int);

//----- (0048F030) --------------------------------------------------------
int __thiscall CPoisonArrow::CPoisonArrow(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE898;
  return v2;
}
// 4BE898: using guessed type int (__stdcall *off_4BE898)(int, int);

//----- (0048F050) --------------------------------------------------------
int __thiscall CWildStrength::CWildStrength(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 20 * *(_DWORD *)(this + 8);
}

//----- (0048F070) --------------------------------------------------------
int __thiscall CProtect::CProtect(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BE8E8;
  return v2;
}
// 4BE8E8: using guessed type int (__stdcall *off_4BE8E8)(int, int);

//----- (0048F090) --------------------------------------------------------
int __thiscall CProtect::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BE948;
  return v2;
}
// 4BE948: using guessed type int (__stdcall *off_4BE948)(int, int);

//----- (0048F0B0) --------------------------------------------------------
int __thiscall CShieldSmash::CShieldSmash(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 32 * *(_DWORD *)(this + 8);
}

//----- (0048F0D0) --------------------------------------------------------
int __thiscall CSilenceArrow::CSilenceArrow(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BE9A8;
  return v2;
}
// 4BE9A8: using guessed type int (__stdcall *off_4BE9A8)(int, int);

//----- (0048F0F0) --------------------------------------------------------
int __thiscall CProtectRange::CProtectRange(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 27 * *(_DWORD *)(this + 8);
}

//----- (0048F110) --------------------------------------------------------
int __thiscall CUpReinforceVitality::CUpReinforceVitality(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEA08;
  return v2;
}
// 4BEA08: using guessed type int (__stdcall *off_4BEA08)(int, int);

//----- (0048F130) --------------------------------------------------------
int __thiscall CUpReinforceVitality::CanLearn(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 26 * *(_DWORD *)(this + 8);
}

//----- (0048F150) --------------------------------------------------------
int __thiscall sub_48F150(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEA68;
  return v2;
}
// 4BEA68: using guessed type int (__stdcall *off_4BEA68)(int, int);

//----- (0048F170) --------------------------------------------------------
int __thiscall CUpAttackRange::CUpAttackRange(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 36 * *(_DWORD *)(this + 8);
}

//----- (0048F190) --------------------------------------------------------
int __thiscall CVitalityDrain::CVitalityDrain(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEAC8;
  return v2;
}
// 4BEAC8: using guessed type int (__stdcall *off_4BEAC8)(int, int);

//----- (0048F1B0) --------------------------------------------------------
int __thiscall CSuffering::CSuffering(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 38 * *(_DWORD *)(this + 8);
}

//----- (0048F1D0) --------------------------------------------------------
int __thiscall CHaste::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEB28;
  return v2;
}
// 4BEB28: using guessed type int (__stdcall *off_4BEB28)(int, int);

//----- (0048F1F0) --------------------------------------------------------
int __stdcall CRainforceDefense::CRainforceDefense(int a1)
{
  return 0;
}

//----- (0048F200) --------------------------------------------------------
int __thiscall sub_48F200(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEB88;
  return v2;
}
// 4BEB88: using guessed type int (__stdcall *off_4BEB88)(int, int);

//----- (0048F220) --------------------------------------------------------
int __thiscall sub_48F220(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEBE8;
  return v2;
}
// 4BEBE8: using guessed type int (__stdcall *off_4BEBE8)(int, int);

//----- (0048F240) --------------------------------------------------------
int __thiscall sub_48F240(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEC48;
  return v2;
}
// 4BEC48: using guessed type int (__stdcall *off_4BEC48)(int, int);

//----- (0048F260) --------------------------------------------------------
int __thiscall sub_48F260(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BECA8;
  return v2;
}
// 4BECA8: using guessed type int (__stdcall *off_4BECA8)(int, int);

//----- (0048F280) --------------------------------------------------------
int __thiscall sub_48F280(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BED08;
  return v2;
}
// 4BED08: using guessed type int (__stdcall *off_4BED08)(int, int);

//----- (0048F2A0) --------------------------------------------------------
int __thiscall sub_48F2A0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BED68;
  return v2;
}
// 4BED68: using guessed type int (__stdcall *off_4BED68)(int, int);

//----- (0048F2C0) --------------------------------------------------------
int __thiscall sub_48F2C0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEDC8;
  return v2;
}
// 4BEDC8: using guessed type int (__stdcall *off_4BEDC8)(int, int);

//----- (0048F2E0) --------------------------------------------------------
int __thiscall sub_48F2E0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEE28;
  return v2;
}
// 4BEE28: using guessed type int (__stdcall *off_4BEE28)(int, int);

//----- (0048F300) --------------------------------------------------------
int __thiscall sub_48F300(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEE88;
  return v2;
}
// 4BEE88: using guessed type int (__stdcall *off_4BEE88)(int, int);

//----- (0048F320) --------------------------------------------------------
int __thiscall sub_48F320(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEEE8;
  return v2;
}
// 4BEEE8: using guessed type int (__stdcall *off_4BEEE8)(int, int);

//----- (0048F340) --------------------------------------------------------
int __thiscall sub_48F340(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BEF48;
  return v2;
}
// 4BEF48: using guessed type int (__stdcall *off_4BEF48)(int, int);

//----- (0048F360) --------------------------------------------------------
int __thiscall sub_48F360(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F380(this);
  *(_DWORD *)v2 = &off_4BEFA8;
  return v2;
}
// 4BEFA8: using guessed type int (__stdcall *off_4BEFA8)(int, int);

//----- (0048F380) --------------------------------------------------------
int __thiscall sub_48F380(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BF000;
  return v2;
}
// 4BF000: using guessed type int (__stdcall *off_4BF000)(int, int);

//----- (0048F3A0) --------------------------------------------------------
int __thiscall sub_48F3A0(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 15 * *(_DWORD *)(this + 8);
}

//----- (0048F3C0) --------------------------------------------------------
int __thiscall sub_48F3C0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F380(this);
  *(_DWORD *)v2 = &off_4BF058;
  return v2;
}
// 4BF058: using guessed type int (__stdcall *off_4BF058)(int, int);

//----- (0048F3E0) --------------------------------------------------------
int __thiscall sub_48F3E0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F380(this);
  *(_DWORD *)v2 = &off_4BF0B0;
  return v2;
}
// 4BF0B0: using guessed type int (__stdcall *off_4BF0B0)(int, int);

//----- (0048F400) --------------------------------------------------------
int __thiscall sub_48F400(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F380(this);
  *(_DWORD *)v2 = &off_4BF108;
  return v2;
}
// 4BF108: using guessed type int (__stdcall *off_4BF108)(int, int);

//----- (0048F420) --------------------------------------------------------
int __thiscall sub_48F420(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F380(this);
  *(_DWORD *)v2 = &off_4BF160;
  return v2;
}
// 4BF160: using guessed type int (__stdcall *off_4BF160)(int, int);

//----- (0048F440) --------------------------------------------------------
int __thiscall sub_48F440(int this, int a2)
{
  return *(_DWORD *)(this + 36) + 14 * *(_DWORD *)(this + 8);
}

//----- (0048F460) --------------------------------------------------------
int __thiscall sub_48F460(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F380(this);
  *(_DWORD *)v2 = &off_4BF1B8;
  return v2;
}
// 4BF1B8: using guessed type int (__stdcall *off_4BF1B8)(int, int);

//----- (0048F480) --------------------------------------------------------
int __thiscall sub_48F480(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F380(this);
  *(_DWORD *)v2 = &off_4BF210;
  return v2;
}
// 4BF210: using guessed type int (__stdcall *off_4BF210)(int, int);

//----- (0048F4A0) --------------------------------------------------------
int __thiscall sub_48F4A0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F4C0(this);
  *(_DWORD *)v2 = &off_4BF268;
  return v2;
}
// 4BF268: using guessed type int (__stdcall *off_4BF268)(int, int);

//----- (0048F4C0) --------------------------------------------------------
int __thiscall sub_48F4C0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BF2C0;
  return v2;
}
// 4BF2C0: using guessed type int (__stdcall *off_4BF2C0)(int, int);

//----- (0048F4E0) --------------------------------------------------------
int __thiscall sub_48F4E0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F4C0(this);
  *(_DWORD *)v2 = &off_4BF318;
  return v2;
}
// 4BF318: using guessed type int (__stdcall *off_4BF318)(int, int);

//----- (0048F500) --------------------------------------------------------
int __thiscall sub_48F500(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F4C0(this);
  *(_DWORD *)v2 = &off_4BF370;
  return v2;
}
// 4BF370: using guessed type int (__stdcall *off_4BF370)(int, int);

//----- (0048F520) --------------------------------------------------------
int __thiscall sub_48F520(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F4C0(this);
  *(_DWORD *)v2 = &off_4BF3C8;
  return v2;
}
// 4BF3C8: using guessed type int (__stdcall *off_4BF3C8)(int, int);

//----- (0048F540) --------------------------------------------------------
int __thiscall sub_48F540(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F4C0(this);
  *(_DWORD *)v2 = &off_4BF420;
  return v2;
}
// 4BF420: using guessed type int (__stdcall *off_4BF420)(int, int);

//----- (0048F560) --------------------------------------------------------
int __thiscall sub_48F560(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F4C0(this);
  *(_DWORD *)v2 = &off_4BF478;
  return v2;
}
// 4BF478: using guessed type int (__stdcall *off_4BF478)(int, int);

//----- (0048F580) --------------------------------------------------------
int __thiscall sub_48F580(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F4C0(this);
  *(_DWORD *)v2 = &off_4BF4D0;
  return v2;
}
// 4BF4D0: using guessed type int (__stdcall *off_4BF4D0)(int, int);

//----- (0048F5A0) --------------------------------------------------------
int __thiscall sub_48F5A0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4BF528;
  return v2;
}
// 4BF528: using guessed type int (__stdcall *off_4BF528)(int, int);

//----- (0048F5C0) --------------------------------------------------------
int __thiscall CManaBurn::CManaBurn(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BF588;
  return v2;
}
// 4BF588: using guessed type int (__stdcall *off_4BF588)(int, int);

//----- (0048F5E0) --------------------------------------------------------
int __thiscall CMeshChance::CMeshChance(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BF5F8;
  return v2;
}
// 4BF5F8: using guessed type int (__stdcall *off_4BF5F8)(int, int);

//----- (0048F600) --------------------------------------------------------
int __thiscall CMeshStr::CMeshStr(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BF648;
  return v2;
}
// 4BF648: using guessed type int (__stdcall *off_4BF648)(int, int);

//----- (0048F620) --------------------------------------------------------
int __thiscall CMeshHth::CMeshHth(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BF6A8;
  return v2;
}
// 4BF6A8: using guessed type int (__stdcall *off_4BF6A8)(int, int);

//----- (0048F640) --------------------------------------------------------
int __thiscall CMeshDex::CMeshDex(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BF708;
  return v2;
}
// 4BF708: using guessed type int (__stdcall *off_4BF708)(int, int);

//----- (0048F660) --------------------------------------------------------
int __thiscall CMeshInt::CMeshInt(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48DD90(this);
  *(_DWORD *)v2 = &off_4BF758;
  return v2;
}
// 4BF758: using guessed type int (__stdcall *off_4BF758)(int, int);

//----- (0048F680) --------------------------------------------------------
int __thiscall CMeshWis::CMeshWis(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BF7B8;
  return v2;
}
// 4BF7B8: using guessed type int (__stdcall *off_4BF7B8)(int, int);

//----- (0048F6A0) --------------------------------------------------------
int __thiscall CMeshDefense::CMeshDefense(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BF808;
  return v2;
}
// 4BF808: using guessed type int (__stdcall *off_4BF808)(int, int);

//----- (0048F6C0) --------------------------------------------------------
int __thiscall CVanishConfi::CVanishConfi(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BF858;
  return v2;
}
// 4BF858: using guessed type int (__stdcall *off_4BF858)(int, int);

//----- (0048F6E0) --------------------------------------------------------
signed int __cdecl CDestroySight::CDestroySight()
{
  return 14;
}

//----- (0048F6F0) --------------------------------------------------------
int __thiscall sub_48F6F0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BF8C8;
  return v2;
}
// 4BF8C8: using guessed type int (__stdcall *off_4BF8C8)(int, int);

//----- (0048F710) --------------------------------------------------------
signed int __cdecl sub_48F710()
{
  return 15;
}

//----- (0048F720) --------------------------------------------------------
int __thiscall CBerserk::CBerserk(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BF938;
  return v2;
}
// 4BF938: using guessed type int (__stdcall *off_4BF938)(int, int);

//----- (0048F740) --------------------------------------------------------
int __thiscall CSkillSelfBuff::CSkillSelfBuff(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BF9A8;
  return v2;
}
// 4BF9A8: using guessed type int (__stdcall *off_4BF9A8)(int, int);

//----- (0048F760) --------------------------------------------------------
signed int __thiscall CBerserk::GetSpendMP(int this)
{
  return *(_DWORD *)(this + 56) != 0 ? 40 : 10;
}

//----- (0048F780) --------------------------------------------------------
int __thiscall CResistLightning::CResistLightning(int this)
{
  return *(_DWORD *)(this + 56) != 0 ? 4 : 0;
}

//----- (0048F7A0) --------------------------------------------------------
int __thiscall CResistIce::CResistIce(int this)
{
  return (*(_DWORD *)(this + 56) != 0) + 17;
}

//----- (0048F7C0) --------------------------------------------------------
int __thiscall CResistFire::CResistFire(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BFA68;
  return v2;
}
// 4BFA68: using guessed type int (__stdcall *off_4BFA68)(int, int);

//----- (0048F7E0) --------------------------------------------------------
int __thiscall CResistCurse::CResistCurse(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BFAB8;
  return v2;
}
// 4BFAB8: using guessed type int (__stdcall *off_4BFAB8)(int, int);

//----- (0048F800) --------------------------------------------------------
int __thiscall CResistPalsy::GetSpendMP(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BFB08;
  return v2;
}
// 4BFB08: using guessed type int (__stdcall *off_4BFB08)(int, int);

//----- (0048F820) --------------------------------------------------------
int __thiscall CResistPalsy::CResistPalsy(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CProtect::GetSpendMP(this);
  *(_DWORD *)v2 = &off_4BFB68;
  return v2;
}
// 4BFB68: using guessed type int (__stdcall *off_4BFB68)(int, int);

//----- (0048F840) --------------------------------------------------------
int __thiscall CEmergencyEscape::CEmergencyEscape(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4BFBC8;
  return v2;
}
// 4BFBC8: using guessed type int (__stdcall *off_4BFBC8)(int, int);

//----- (0048F860) --------------------------------------------------------
signed int __cdecl CChantProtect::CChantProtect()
{
  return 22;
}

//----- (0048F870) --------------------------------------------------------
int __thiscall sub_48F870(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F890(this);
  *(_DWORD *)v2 = &off_4BFC38;
  return v2;
}
// 4BFC38: using guessed type int (__stdcall *off_4BFC38)(int, int);

//----- (0048F890) --------------------------------------------------------
int __thiscall sub_48F890(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BFCA8;
  return v2;
}
// 4BFCA8: using guessed type int (__stdcall *off_4BFCA8)(int, int);

//----- (0048F8B0) --------------------------------------------------------
signed int __thiscall sub_48F8B0(int this, int a2, int a3)
{
  unsigned int v3; // edx@1
  signed int v5; // [sp+0h] [bp-8h]@2

  v3 = *(_DWORD *)(this + 64)++ % 2u;
  if ( v3 )
    v5 = 0;
  else
    v5 = 1;
  return v5;
}

//----- (0048F900) --------------------------------------------------------
signed int __cdecl CChantDefFire::CChantDefFire()
{
  return 19;
}

//----- (0048F910) --------------------------------------------------------
int __thiscall sub_48F910(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F890(this);
  *(_DWORD *)v2 = &off_4BFD18;
  return v2;
}
// 4BFD18: using guessed type int (__stdcall *off_4BFD18)(int, int);

//----- (0048F930) --------------------------------------------------------
signed int __cdecl sub_48F930()
{
  return 20;
}

//----- (0048F940) --------------------------------------------------------
int __thiscall CChantBattle::CChantBattle(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F890(this);
  *(_DWORD *)v2 = &off_4BFD88;
  return v2;
}
// 4BFD88: using guessed type int (__stdcall *off_4BFD88)(int, int);

//----- (0048F960) --------------------------------------------------------
signed int __cdecl CTLitningBlast::CTLitningBlast()
{
  return 21;
}

//----- (0048F970) --------------------------------------------------------
int __thiscall sub_48F970(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F890(this);
  *(_DWORD *)v2 = &off_4BFDF8;
  return v2;
}
// 4BFDF8: using guessed type int (__stdcall *off_4BFDF8)(int, int);

//----- (0048F990) --------------------------------------------------------
int __thiscall sub_48F990(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BFA18;
  return v2;
}
// 4BFA18: using guessed type int (__stdcall *off_4BFA18)(int, int);

//----- (0048F9B0) --------------------------------------------------------
int __thiscall sub_48F9B0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4BFE68;
  return v2;
}
// 4BFE68: using guessed type int (__stdcall *off_4BFE68)(int, int);

//----- (0048F9D0) --------------------------------------------------------
int __thiscall sub_48F9D0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BFEB8;
  return v2;
}
// 4BFEB8: using guessed type int (__stdcall *off_4BFEB8)(int, int);

//----- (0048F9F0) --------------------------------------------------------
signed int __cdecl sub_48F9F0()
{
  return 23;
}

//----- (0048FA00) --------------------------------------------------------
int __thiscall CTFury::CTFury(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4BFF28;
  return v2;
}
// 4BFF28: using guessed type int (__stdcall *off_4BFF28)(int, int);

//----- (0048FA20) --------------------------------------------------------
signed int __cdecl CTGroundSplinter::CTGroundSplinter()
{
  return 24;
}

//----- (0048FA30) --------------------------------------------------------
int __thiscall sub_48FA30(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CBerserk::CBerserk(this);
  *(_DWORD *)v2 = &off_4BFF98;
  return v2;
}
// 4BFF98: using guessed type int (__stdcall *off_4BFF98)(int, int);

//----- (0048FA50) --------------------------------------------------------
signed int __cdecl sub_48FA50()
{
  return 6;
}

//----- (0048FA60) --------------------------------------------------------
signed int __cdecl CTDiamondClow::CTDiamondClow()
{
  return 25;
}

//----- (0048FA70) --------------------------------------------------------
int __thiscall sub_48FA70(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4C0008;
  return v2;
}
// 4C0008: using guessed type int (__stdcall *off_4C0008)(int, int);

//----- (0048FA90) --------------------------------------------------------
int __thiscall sub_48FA90(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4C0068;
  return v2;
}
// 4C0068: using guessed type int (__stdcall *off_4C0068)(int, int);

//----- (0048FAB0) --------------------------------------------------------
int __thiscall CDoFury::CDoFury(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4C00D8;
  return v2;
}
// 4C00D8: using guessed type int (__stdcall *off_4C00D8)(int, int);

//----- (0048FAD0) --------------------------------------------------------
signed int __cdecl CDoGroundFeal::GetAddValueType()
{
  return 10;
}

//----- (0048FAF0) --------------------------------------------------------
int __thiscall sub_48FAF0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6E0(this);
  *(_DWORD *)v2 = &off_4C0148;
  return v2;
}
// 4C0148: using guessed type int (__stdcall *off_4C0148)(int, int);

//----- (0048FB10) --------------------------------------------------------
int __thiscall sub_48FB10(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4C01B8;
  return v2;
}
// 4C01B8: using guessed type int (__stdcall *off_4C01B8)(int, int);

//----- (0048FB30) --------------------------------------------------------
int __thiscall sub_48FB30(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_480D40(this);
  *(_DWORD *)v2 = &off_4C0218;
  return v2;
}
// 4C0218: using guessed type int (__stdcall *off_4C0218)(int, int);

//----- (0048FB50) --------------------------------------------------------
int __thiscall sub_48FB50(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4C0268;
  return v2;
}
// 4C0268: using guessed type int (__stdcall *off_4C0268)(int, int);

//----- (0048FB70) --------------------------------------------------------
int __thiscall sub_48FB70(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48FB50(this);
  *(_DWORD *)v2 = &off_4C02C8;
  return v2;
}
// 4C02C8: using guessed type int (__stdcall *off_4C02C8)(int, int);

//----- (0048FB90) --------------------------------------------------------
int __thiscall sub_48FB90(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4C0328;
  return v2;
}
// 4C0328: using guessed type int (__stdcall *off_4C0328)(int, int);

//----- (0048FBB0) --------------------------------------------------------
int __thiscall sub_48FBB0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48FB50(this);
  *(_DWORD *)v2 = &off_4C0388;
  return v2;
}
// 4C0388: using guessed type int (__stdcall *off_4C0388)(int, int);

//----- (0048FBD0) --------------------------------------------------------
int __thiscall sub_48FBD0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E580(this);
  *(_DWORD *)v2 = &off_4C03E8;
  return v2;
}
// 4C03E8: using guessed type int (__stdcall *off_4C03E8)(int, int);

//----- (0048FBF0) --------------------------------------------------------
int __thiscall sub_48FBF0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4C0458;
  return v2;
}
// 4C0458: using guessed type int (__stdcall *off_4C0458)(int, int);

//----- (0048FC20) --------------------------------------------------------
int __thiscall CDoOverrun::GetAddValueType(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4C04C8;
  return v2;
}
// 4C04C8: using guessed type int (__stdcall *off_4C04C8)(int, int);

//----- (0048FC40) --------------------------------------------------------
signed int __cdecl sub_48FC40()
{
  return 3;
}

//----- (0048FC50) --------------------------------------------------------
signed int __cdecl CSkill_MonsterMagic::CSkill_MonsterMagic()
{
  return 26;
}

//----- (0048FC60) --------------------------------------------------------
int __thiscall sub_48FC60(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CNegative::GetHostility(this);
  *(_DWORD *)v2 = &off_4C0538;
  return v2;
}
// 4C0538: using guessed type int (__stdcall *off_4C0538)(int, int);

//----- (0048FC90) --------------------------------------------------------
int __thiscall sub_48FC90(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6E0(this);
  *(_DWORD *)v2 = &off_4C0598;
  return v2;
}
// 4C0598: using guessed type int (__stdcall *off_4C0598)(int, int);

//----- (0048FCB0) --------------------------------------------------------
int __thiscall sub_48FCB0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48E6A0(this);
  *(_DWORD *)v2 = &off_4C0608;
  return v2;
}
// 4C0608: using guessed type int (__stdcall *off_4C0608)(int, int);

//----- (0048FCD0) --------------------------------------------------------
signed int __cdecl CMIceStorm::CMIceStorm()
{
  return 28;
}

//----- (0048FCE0) --------------------------------------------------------
int __thiscall sub_48FCE0(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  sub_48F890(this);
  *(_DWORD *)v2 = &off_4C0678;
  *(_DWORD *)(v2 + 76) = 0;
  return v2;
}
// 4C0678: using guessed type int (__stdcall *off_4C0678)(int, int);

//----- (0048FD10) --------------------------------------------------------
signed int __cdecl sub_48FD10()
{
  return 29;
}

//----- (0048FD20) --------------------------------------------------------
int __thiscall sub_48FD20(int this, int a2, int a3)
{
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 4) = a3;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (0048FD60) --------------------------------------------------------
int __usercall sub_48FD60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int result; // eax@1
  int v5; // [sp+8h] [bp-14h]@1
  int v6; // [sp+10h] [bp-Ch]@5

  v5 = a1;
  result = a1;
  if ( *(_DWORD *)(a1 + 8) )
  {
    result = *(_DWORD *)(a1 + 8);
    if ( result )
      result = sub_48FDE0(result, 3);
  }
  if ( *(_DWORD *)(v5 + 12) )
  {
    result = *(_DWORD *)(v5 + 12);
    v6 = *(_DWORD *)(v5 + 12);
    if ( v6 )
      result = CCompleteFire::CCompleteFire(v6, a2, a3, a4, 3);
  }
  return result;
}

//----- (0048FDE0) --------------------------------------------------------
int __thiscall sub_48FDE0(int this, char a2)
{
  int result; // eax@4
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  if ( a2 & 2 )
  {
    sub_4370E0(this, 8, *(_DWORD *)(this - 4), (int (__thiscall *)(_DWORD))sub_4964E0);
    if ( a2 & 1 )
      sub_4A16B4(v3 - 4);
    result = v3 - 4;
  }
  else
  {
    sub_4964E0((void *)this);
    if ( a2 & 1 )
      sub_401020(v3);
    result = v3;
  }
  return result;
}
// 4A16B4: using guessed type _DWORD __cdecl sub_4A16B4(_DWORD);

//----- (0048FE50) --------------------------------------------------------
int __userpurge CCompleteFire::CCompleteFire<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int result; // eax@4
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( a5 & 2 )
  {
    sub_4370E0(a1, 24, *(_DWORD *)(a1 - 4), (int (__thiscall *)(_DWORD))sub_47DDA0);
    if ( a5 & 1 )
      sub_4A16B4(v6 - 4);
    result = v6 - 4;
  }
  else
  {
    sub_47DDA0(a1, a2, a3, a4);
    if ( a5 & 1 )
      sub_401020(v6);
    result = v6;
  }
  return result;
}
// 4A16B4: using guessed type _DWORD __cdecl sub_4A16B4(_DWORD);

//----- (0048FEC0) --------------------------------------------------------
signed int __thiscall sub_48FEC0(void *this)
{
  signed int result; // eax@3
  int v2; // [sp+0h] [bp-14h]@8
  int v3; // [sp+4h] [bp-10h]@5
  void *v4; // [sp+8h] [bp-Ch]@1
  int v5; // [sp+Ch] [bp-8h]@7
  int v6; // [sp+10h] [bp-4h]@4

  v4 = this;
  if ( *((_DWORD *)this + 2) || *((_DWORD *)this + 3) )
  {
    sub_4328C0("CCellMap::AllocTile() Can't allocate Tile. CellMap(%d,%d)", *(_DWORD *)this, *((_DWORD *)this + 1));
    result = 0;
  }
  else
  {
    v6 = loc_49F2E1(524292);
    if ( v6 )
    {
      *(_DWORD *)v6 = 65536;
      sub_423F60(v6 + 4, 8, 65536, (void (__thiscall *)(_DWORD))std___Iterator_base___Iterator_base);
      v3 = v6 + 4;
    }
    else
    {
      v3 = 0;
    }
    *((_DWORD *)v4 + 2) = v3;
    v5 = loc_49F2E1(6148);
    if ( v5 )
    {
      *(_DWORD *)v5 = 256;
      sub_423F60(v5 + 4, 24, 256, sub_47DD40);
      v2 = v5 + 4;
    }
    else
    {
      v2 = 0;
    }
    *((_DWORD *)v4 + 3) = v2;
    result = 1;
  }
  return result;
}
// 4964B0: using guessed type int std___Iterator_base___Iterator_base();

//----- (0048FFB0) --------------------------------------------------------
signed int __thiscall CMFireFlowerExplosion::CMFireFlowerExplosion(void *this, FILE *a2)
{
  signed int result; // eax@2
  void *v3; // [sp+0h] [bp-14h]@1
  signed int j; // [sp+4h] [bp-10h]@6
  signed int i; // [sp+8h] [bp-Ch]@4
  int v6; // [sp+Ch] [bp-8h]@4
  int v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  if ( (unsigned int)sub_4A17A2(&v7, 4u, 1u, a2) >= 1 )
  {
    if ( v7 == 1 )
    {
      v6 = *((_DWORD *)v3 + 2);
      for ( i = 0; i < 256; ++i )
      {
        for ( j = 0; j < 256; ++j )
        {
          if ( (unsigned int)sub_4A17A2((void *)(v6 + 4), 4u, 1u, a2) < 1 )
          {
            sub_4328C0("CCellMap::ReadTileAttr() Invalid Tile Attr. (Tile:%d,%d)", j, i);
            return 0;
          }
          v6 += 8;
        }
      }
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00490070) --------------------------------------------------------
int __thiscall sub_490070(int this, int a2)
{
  int result; // eax@3
  int v3; // [sp+0h] [bp-24h]@1
  int j; // [sp+4h] [bp-20h]@5
  int i; // [sp+8h] [bp-1Ch]@3
  volatile LONG *v6; // [sp+Ch] [bp-18h]@3
  int v7; // [sp+10h] [bp-14h]@3
  int v8; // [sp+14h] [bp-10h]@4
  int v9; // [sp+18h] [bp-Ch]@3
  int v10; // [sp+1Ch] [bp-8h]@3
  int v11; // [sp+20h] [bp-4h]@3

  v3 = this;
  if ( this )
  {
    CCellMap::_CCellMap(this, a2, (int)&v7);
    v6 = (volatile LONG *)(*(_DWORD *)(v3 + 12) + 24 * (v7 + 16 * v10));
    v11 = 16 - (v9 - v7);
    result = v10;
    for ( i = v10; i < v8; ++i )
    {
      result = v7;
      for ( j = v7; j < v9; ++j )
      {
        sub_47DE70(v6);
        result = (int)(v6 + 6);
        v6 += 6;
      }
      v6 += 6 * v11;
    }
  }
  return result;
}

//----- (00490120) --------------------------------------------------------
int __thiscall CCellMap::_CCellMap(int this, int a2, int a3)
{
  int result; // eax@13
  int v4; // [sp+0h] [bp-30h]@11
  int v5; // [sp+4h] [bp-2Ch]@8
  signed int v6; // [sp+8h] [bp-28h]@5
  int v7; // [sp+Ch] [bp-24h]@2
  int v8; // [sp+14h] [bp-1Ch]@1
  int v9; // [sp+18h] [bp-18h]@1
  int v10; // [sp+1Ch] [bp-14h]@1
  int v11; // [sp+28h] [bp-8h]@1
  int v12; // [sp+2Ch] [bp-4h]@1

  v11 = *(_DWORD *)(a2 + 12);
  v10 = *(_DWORD *)(a2 + 8);
  v8 = *(_DWORD *)(a2 + 4);
  v12 = *(_DWORD *)this << 8;
  v9 = *(_DWORD *)(this + 4) << 8;
  if ( *(_DWORD *)a2 <= v12 )
    v7 = 0;
  else
    v7 = (*(_DWORD *)a2 & 0xFF) >> 4;
  *(_DWORD *)a3 = v7;
  if ( v11 <= v9 )
    v6 = 0;
  else
    v6 = (signed int)(unsigned __int8)v11 >> 4;
  *(_DWORD *)(a3 + 12) = v6;
  if ( v10 >= v12 + 256 )
    v5 = 16;
  else
    v5 = (((unsigned __int8)v10 - 1) >> 4) + 1;
  *(_DWORD *)(a3 + 8) = v5;
  if ( v8 >= v9 + 256 )
    v4 = 16;
  else
    v4 = (((unsigned __int8)v8 - 1) >> 4) + 1;
  result = v4;
  *(_DWORD *)(a3 + 4) = v4;
  return result;
}

//----- (00490220) --------------------------------------------------------
int __userpurge sub_490220<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@3
  int v6; // [sp+0h] [bp-24h]@1
  int j; // [sp+4h] [bp-20h]@5
  int i; // [sp+8h] [bp-1Ch]@3
  volatile LONG *v9; // [sp+Ch] [bp-18h]@3
  int v10; // [sp+10h] [bp-14h]@3
  int v11; // [sp+14h] [bp-10h]@4
  int v12; // [sp+18h] [bp-Ch]@3
  int v13; // [sp+1Ch] [bp-8h]@3
  int v14; // [sp+20h] [bp-4h]@3

  v6 = a1;
  if ( a1 )
  {
    CCellMap::_CCellMap(a1, a5, (int)&v10);
    v9 = (volatile LONG *)(*(_DWORD *)(v6 + 12) + 24 * (v10 + 16 * v13));
    v14 = 16 - (v12 - v10);
    result = v13;
    for ( i = v13; i < v11; ++i )
    {
      result = v10;
      for ( j = v10; j < v12; ++j )
      {
        sub_47E080(v9, a2, a3, a4);
        result = (int)(v9 + 6);
        v9 += 6;
      }
      v9 += 6 * v14;
    }
  }
  return result;
}

//----- (004902D0) --------------------------------------------------------
int __thiscall sub_4902D0(int this, int a2, int a3)
{
  int result; // eax@9
  int v4; // [sp+0h] [bp-3Ch]@1
  int v5; // [sp+4h] [bp-38h]@19
  int v6; // [sp+8h] [bp-34h]@10
  int v7; // [sp+Ch] [bp-30h]@5
  int v8; // [sp+10h] [bp-2Ch]@3
  volatile LONG *v9; // [sp+14h] [bp-28h]@3
  int v10; // [sp+18h] [bp-24h]@3
  int v11; // [sp+1Ch] [bp-20h]@9
  int v12; // [sp+20h] [bp-1Ch]@13
  int v13; // [sp+24h] [bp-18h]@4
  int v14; // [sp+28h] [bp-14h]@3
  int v15; // [sp+2Ch] [bp-10h]@3
  int v16; // [sp+30h] [bp-Ch]@18
  int v17; // [sp+34h] [bp-8h]@3
  int v18; // [sp+38h] [bp-4h]@3

  v4 = this;
  if ( this )
  {
    sub_490470(this, a2, (int)&v15);
    sub_490470(v4, a3, (int)&v10);
    v9 = (volatile LONG *)(*(_DWORD *)(v4 + 12) + 24 * (v15 + 16 * v18));
    v14 = 16 - (v17 - v15);
    v8 = v18;
    while ( v8 < v13 )
    {
      v7 = v15;
      while ( v7 < v17 )
      {
        sub_47DE70(v9);
        ++v7;
        v9 += 6;
      }
      ++v8;
      v9 += 6 * v14;
    }
    while ( 1 )
    {
      result = v8;
      if ( v8 >= v11 )
        break;
      v6 = v15;
      while ( v6 < v10 )
      {
        sub_47DE70(v9);
        ++v6;
        v9 += 6;
      }
      while ( v6 < v12 )
      {
        sub_47E0D0(v9);
        ++v6;
        v9 += 6;
      }
      while ( v6 < v17 )
      {
        sub_47DE70(v9);
        ++v6;
        v9 += 6;
      }
      ++v8;
      v9 += 6 * v14;
    }
    while ( v8 < v16 )
    {
      v5 = v15;
      while ( v5 < v17 )
      {
        sub_47DE70(v9);
        ++v5;
        v9 += 6;
      }
      ++v8;
      result = (int)&v9[6 * v14];
      v9 += 6 * v14;
    }
  }
  return result;
}

//----- (00490470) --------------------------------------------------------
int __thiscall sub_490470(int this, int a2, int a3)
{
  int result; // eax@19
  int v4; // [sp+0h] [bp-40h]@22
  int v5; // [sp+4h] [bp-3Ch]@20
  int v6; // [sp+8h] [bp-38h]@16
  int v7; // [sp+Ch] [bp-34h]@14
  signed int v8; // [sp+10h] [bp-30h]@10
  signed int v9; // [sp+14h] [bp-2Ch]@8
  signed int v10; // [sp+18h] [bp-28h]@4
  signed int v11; // [sp+1Ch] [bp-24h]@2
  int v12; // [sp+24h] [bp-1Ch]@1
  int v13; // [sp+28h] [bp-18h]@1
  int v14; // [sp+2Ch] [bp-14h]@1
  int v15; // [sp+34h] [bp-Ch]@1
  int v16; // [sp+38h] [bp-8h]@1
  int v17; // [sp+3Ch] [bp-4h]@1

  v15 = *(_DWORD *)a2;
  v16 = *(_DWORD *)(a2 + 12);
  v14 = *(_DWORD *)(a2 + 8);
  v12 = *(_DWORD *)(a2 + 4);
  v17 = *(_DWORD *)this << 8;
  v13 = *(_DWORD *)(this + 4) << 8;
  if ( *(_DWORD *)a2 < v17 + 256 )
  {
    if ( v15 <= v17 )
      v10 = 0;
    else
      v10 = (signed int)(unsigned __int8)v15 >> 4;
    v11 = v10;
  }
  else
  {
    v11 = 16;
  }
  *(_DWORD *)a3 = v11;
  if ( v16 < v13 + 256 )
  {
    if ( v16 <= v13 )
      v8 = 0;
    else
      v8 = (signed int)(unsigned __int8)v16 >> 4;
    v9 = v8;
  }
  else
  {
    v9 = 16;
  }
  *(_DWORD *)(a3 + 12) = v9;
  if ( v14 > v17 )
  {
    if ( v14 >= v17 + 256 )
      v6 = 16;
    else
      v6 = (((unsigned __int8)v14 - 1) >> 4) + 1;
    v7 = v6;
  }
  else
  {
    v7 = 0;
  }
  *(_DWORD *)(a3 + 8) = v7;
  result = v12;
  if ( v12 > v13 )
  {
    if ( v12 >= v13 + 256 )
      v4 = 16;
    else
      v4 = (((unsigned __int8)v12 - 1) >> 4) + 1;
    result = v4;
    v5 = v4;
  }
  else
  {
    v5 = 0;
  }
  *(_DWORD *)(a3 + 4) = v5;
  return result;
}

//----- (004905E0) --------------------------------------------------------
int __userpurge CCellMap::ReadUnlock<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int result; // eax@9
  int v7; // [sp+0h] [bp-3Ch]@1
  int v8; // [sp+4h] [bp-38h]@19
  int v9; // [sp+8h] [bp-34h]@10
  int v10; // [sp+Ch] [bp-30h]@5
  int v11; // [sp+10h] [bp-2Ch]@3
  volatile LONG *v12; // [sp+14h] [bp-28h]@3
  int v13; // [sp+18h] [bp-24h]@3
  int v14; // [sp+1Ch] [bp-20h]@9
  int v15; // [sp+20h] [bp-1Ch]@13
  int v16; // [sp+24h] [bp-18h]@4
  int v17; // [sp+28h] [bp-14h]@3
  int v18; // [sp+2Ch] [bp-10h]@3
  int v19; // [sp+30h] [bp-Ch]@18
  int v20; // [sp+34h] [bp-8h]@3
  int v21; // [sp+38h] [bp-4h]@3

  v7 = a1;
  if ( a1 )
  {
    sub_490470(a1, a5, (int)&v18);
    sub_490470(v7, a6, (int)&v13);
    v12 = (volatile LONG *)(*(_DWORD *)(v7 + 12) + 24 * (v18 + 16 * v21));
    v17 = 16 - (v20 - v18);
    v11 = v21;
    while ( v11 < v16 )
    {
      v10 = v18;
      while ( v10 < v20 )
      {
        sub_47E080(v12, a2, a3, a4);
        ++v10;
        v12 += 6;
      }
      ++v11;
      v12 += 6 * v17;
    }
    while ( 1 )
    {
      result = v11;
      if ( v11 >= v14 )
        break;
      v9 = v18;
      while ( v9 < v13 )
      {
        sub_47E080(v12, a2, a3, a4);
        ++v9;
        v12 += 6;
      }
      while ( v9 < v15 )
      {
        sub_47E1C0(v12, a2, a3, a4);
        ++v9;
        v12 += 6;
      }
      while ( v9 < v20 )
      {
        sub_47E080(v12, a2, a3, a4);
        ++v9;
        v12 += 6;
      }
      ++v11;
      v12 += 6 * v17;
    }
    while ( v11 < v19 )
    {
      v8 = v18;
      while ( v8 < v20 )
      {
        sub_47E080(v12, a2, a3, a4);
        ++v8;
        v12 += 6;
      }
      ++v11;
      result = (int)&v12[6 * v17];
      v12 += 6 * v17;
    }
  }
  return result;
}

//----- (00490780) --------------------------------------------------------
void __userpurge sub_490780(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // edx@7
  int v8; // eax@6
  int v9; // [sp+4h] [bp-10h]@3
  int v10; // [sp+8h] [bp-Ch]@3
  int v11; // [sp+Ch] [bp-8h]@3
  char v12[4]; // [sp+10h] [bp-4h]@3

  if ( a1 )
  {
    v9 = *(_DWORD *)a6 & 0xFF;
    v10 = *(_DWORD *)(a6 + 4) & 0xFF;
    v11 = CCellMap::GetTile(a1, (int)&v9);
    for ( *(_DWORD *)v12 = *(_DWORD *)v11; *(_DWORD *)v12; *(_DWORD *)v12 = unknown_libname_9(*(_DWORD *)v12, v7) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v12 + 16) == -6 )
      {
        *(_DWORD *)v11 = 0;
        sub_422B30("CSellMap::SendDelete %p %p\n", v12[0]);
        sub_422D80(v8, a2, a3, a4);
        return;
      }
      (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)v12 + 44))(*(_DWORD *)v12, a5, a7);
    }
  }
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00490830) --------------------------------------------------------
void __userpurge CCellMap::GetRWLockRect(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // edx@7
  int v8; // eax@6
  int v9; // [sp+4h] [bp-10h]@3
  int v10; // [sp+8h] [bp-Ch]@3
  int v11; // [sp+Ch] [bp-8h]@3
  char v12[4]; // [sp+10h] [bp-4h]@3

  if ( a1 )
  {
    v9 = *(_DWORD *)a6 & 0xFF;
    v10 = *(_DWORD *)(a6 + 4) & 0xFF;
    v11 = CCellMap::GetTile(a1, (int)&v9);
    for ( *(_DWORD *)v12 = *(_DWORD *)v11; *(_DWORD *)v12; *(_DWORD *)v12 = unknown_libname_9(*(_DWORD *)v12, v7) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v12 + 16) == -6 )
      {
        *(_DWORD *)v11 = 0;
        sub_422B30("CSellMap::SendMove %p %p\n", v12[0]);
        sub_422D80(v8, a2, a3, a4);
        return;
      }
      (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)v12 + 48))(*(_DWORD *)v12, a5, a7);
    }
  }
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (004908E0) --------------------------------------------------------
void __userpurge sub_4908E0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // edx@7
  int v8; // eax@6
  int v9; // [sp+4h] [bp-10h]@3
  int v10; // [sp+8h] [bp-Ch]@3
  int v11; // [sp+Ch] [bp-8h]@3
  char v12[4]; // [sp+10h] [bp-4h]@3

  if ( a1 )
  {
    v9 = *(_DWORD *)a6 & 0xFF;
    v10 = *(_DWORD *)(a6 + 4) & 0xFF;
    v11 = CCellMap::GetTile(a1, (int)&v9);
    for ( *(_DWORD *)v12 = *(_DWORD *)v11; *(_DWORD *)v12; *(_DWORD *)v12 = unknown_libname_9(*(_DWORD *)v12, v7) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v12 + 16) == -6 )
      {
        *(_DWORD *)v11 = 0;
        sub_422B30("CSellMap::SendCreate %p %p\n", v12[0]);
        sub_422D80(v8, a2, a3, a4);
        return;
      }
      (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)v12 + 52))(*(_DWORD *)v12, a5, a7);
    }
  }
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00490990) --------------------------------------------------------
void __userpurge sub_490990(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // edx@7
  int v7; // eax@6
  int v8; // [sp+4h] [bp-10h]@3
  int v9; // [sp+8h] [bp-Ch]@3
  int v10; // [sp+Ch] [bp-8h]@3
  char v11[4]; // [sp+10h] [bp-4h]@3

  if ( a1 )
  {
    v8 = *(_DWORD *)a5 & 0xFF;
    v9 = *(_DWORD *)(a5 + 4) & 0xFF;
    v10 = CCellMap::GetTile(a1, (int)&v8);
    for ( *(_DWORD *)v11 = *(_DWORD *)v10; *(_DWORD *)v11; *(_DWORD *)v11 = unknown_libname_9(*(_DWORD *)v11, v6) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v11 + 16) == -6 )
      {
        *(_DWORD *)v10 = 0;
        sub_422B30("CSellMap::SendPacket %p %p\n", v11[0]);
        sub_422D80(v7, a2, a3, a4);
        return;
      }
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)v11 + 40))(*(_DWORD *)v11, a6);
    }
  }
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00490A40) --------------------------------------------------------
void __userpurge sub_490A40(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int *a6)
{
  int v6; // eax@6
  int *v7; // edx@7
  int v8; // eax@8
  int v9; // [sp+4h] [bp-10h]@3
  int v10; // [sp+8h] [bp-Ch]@3
  int v11; // [sp+Ch] [bp-8h]@3
  char v12[4]; // [sp+10h] [bp-4h]@3

  if ( a1 )
  {
    v9 = *(_DWORD *)a5 & 0xFF;
    v10 = *(_DWORD *)(a5 + 4) & 0xFF;
    v11 = CCellMap::GetTile(a1, (int)&v9);
    for ( *(_DWORD *)v12 = *(_DWORD *)v11; *(_DWORD *)v12; *(_DWORD *)v12 = unknown_libname_9(*(_DWORD *)v12, v7) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v12 + 16) == -6 )
      {
        *(_DWORD *)v11 = 0;
        sub_422B30("CSellMap::GetPlayerList %p %p\n", v12[0]);
        sub_422D80(v6, a2, a3, a4);
        return;
      }
      if ( (*(int (__thiscall **)(_DWORD))(**(_DWORD **)v12 + 60))(*(_DWORD *)v12) )
      {
        v8 = (int)CBaseList::Push(*a6, a2, a3, a4, *(int *)v12);
        v7 = a6;
        *a6 = v8;
      }
    }
  }
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00490B00) --------------------------------------------------------
void __userpurge sub_490B00(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int *a6)
{
  int v6; // eax@6
  int *v7; // edx@8
  int v8; // eax@9
  int v9; // [sp+4h] [bp-10h]@3
  int v10; // [sp+8h] [bp-Ch]@3
  int v11; // [sp+Ch] [bp-8h]@3
  char v12[4]; // [sp+10h] [bp-4h]@3

  if ( a1 )
  {
    v9 = *(_DWORD *)a5 & 0xFF;
    v10 = *(_DWORD *)(a5 + 4) & 0xFF;
    v11 = CCellMap::GetTile(a1, (int)&v9);
    for ( *(_DWORD *)v12 = *(_DWORD *)v11; *(_DWORD *)v12; *(_DWORD *)v12 = unknown_libname_9(*(_DWORD *)v12, v7) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v12 + 16) == -6 )
      {
        *(_DWORD *)v11 = 0;
        sub_422B30("CSellMap::GetPlayerMonsterList %p %p\n", v12[0]);
        sub_422D80(v6, a2, a3, a4);
        return;
      }
      if ( (*(int (__thiscall **)(_DWORD))(**(_DWORD **)v12 + 60))(*(_DWORD *)v12)
        || (*(int (__thiscall **)(_DWORD))(**(_DWORD **)v12 + 64))(*(_DWORD *)v12) )
      {
        v8 = (int)CBaseList::Push(*a6, a2, a3, a4, *(int *)v12);
        v7 = a6;
        *a6 = v8;
      }
    }
  }
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00490BD0) --------------------------------------------------------
signed int __userpurge sub_490BD0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // eax@6
  int v8; // edx@7
  int v9; // [sp+4h] [bp-14h]@8
  int v10; // [sp+8h] [bp-10h]@3
  int v11; // [sp+Ch] [bp-Ch]@3
  int v12; // [sp+10h] [bp-8h]@3
  char v13[4]; // [sp+14h] [bp-4h]@3

  if ( a1 )
  {
    v10 = *(_DWORD *)a5 & 0xFF;
    v11 = *(_DWORD *)(a5 + 4) & 0xFF;
    v12 = CCellMap::GetTile(a1, (int)&v10);
    for ( *(_DWORD *)v13 = *(_DWORD *)v12; *(_DWORD *)v13; *(_DWORD *)v13 = unknown_libname_9(*(_DWORD *)v13, v8) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v13 + 16) == -6 )
      {
        *(_DWORD *)v12 = 0;
        sub_422B30("CSellMap::GetClosestPlayer %p %p\n", v13[0]);
        sub_422D80(v7, a2, a3, a4);
        break;
      }
      if ( (*(int (__thiscall **)(_DWORD))(**(_DWORD **)v13 + 60))(*(_DWORD *)v13) )
      {
        v9 = *(_DWORD *)v13;
        if ( CChar::IsNormal(*(int *)v13) )
        {
          if ( !CChar::IsGState(v9, 8192) && *(_DWORD *)(v9 + 456) != 4 )
          {
            sub_423980(v9, a2, a3, a4, (volatile LONG *)(v9 + 356));
            *(_DWORD *)a6 = v9;
            return 1;
          }
        }
      }
    }
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00490CD0) --------------------------------------------------------
signed int __userpurge sub_490CD0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  signed int result; // eax@2
  int v8; // eax@6
  int v9; // edx@7
  int v10; // [sp+4h] [bp-14h]@8
  int v11; // [sp+8h] [bp-10h]@3
  int v12; // [sp+Ch] [bp-Ch]@3
  int v13; // [sp+10h] [bp-8h]@3
  char v14[4]; // [sp+14h] [bp-4h]@3

  if ( a1 )
  {
    v11 = *(_DWORD *)a5 & 0xFF;
    v12 = *(_DWORD *)(a5 + 4) & 0xFF;
    v13 = CCellMap::GetTile(a1, (int)&v11);
    for ( *(_DWORD *)v14 = *(_DWORD *)v13; *(_DWORD *)v14; *(_DWORD *)v14 = unknown_libname_9(*(_DWORD *)v14, v9) )
    {
      if ( *(_DWORD *)(*(_DWORD *)v14 + 16) == -6 )
      {
        *(_DWORD *)v13 = 0;
        sub_422B30("CSellMap::GetMonster %p %p\n", v14[0]);
        sub_422D80(v8, a2, a3, a4);
        break;
      }
      if ( (*(int (__thiscall **)(_DWORD))(**(_DWORD **)v14 + 64))(*(_DWORD *)v14) )
      {
        v10 = *(_DWORD *)v14;
        if ( CChar::IsNormal(*(int *)v14) )
        {
          v9 = *(_DWORD *)(v10 + 440);
          if ( a6 == *(_DWORD *)(v9 + 60) )
          {
            sub_423980(v10, a2, a3, a4, (volatile LONG *)(v10 + 352));
            *(_DWORD *)a7 = v10;
            return 1;
          }
        }
      }
    }
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00490DC0) --------------------------------------------------------
int __thiscall sub_490DC0(int this)
{
  int v2; // ST0C_4@1

  v2 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  memset((void *)(this + 8), 0, 0x4000u);
  return v2;
}

//----- (00490E00) --------------------------------------------------------
void __usercall CCellMap::GetPlayerList(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+4h] [bp-14h]@1
  int v5; // [sp+Ch] [bp-Ch]@4
  signed int i; // [sp+10h] [bp-8h]@1

  v4 = a1;
  for ( i = 0; i < 4096; ++i )
  {
    if ( *(_DWORD *)(v4 + 4 * i + 8) )
    {
      v5 = *(_DWORD *)(v4 + 4 * i + 8);
      if ( v5 )
        sub_490E70(v5, a2, a3, a4, 1);
    }
  }
}

//----- (00490E70) --------------------------------------------------------
int __userpurge sub_490E70<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_48FD60(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00490EA0) --------------------------------------------------------
signed int __usercall sub_490EA0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4)
{
  signed int result; // eax@2
  int v5; // [sp+4h] [bp-24h]@9
  int v6; // [sp+8h] [bp-20h]@5
  int v7; // [sp+14h] [bp-14h]@8
  int v8; // [sp+18h] [bp-10h]@4
  int v9; // [sp+1Ch] [bp-Ch]@3
  FILE *v10; // [sp+20h] [bp-8h]@1

  v10 = fopen((const char *)(a4 + 48), "rb");
  if ( v10 )
  {
    v9 = sub_491080(*(_DWORD *)(a4 + 32));
    if ( !v9 )
    {
      v8 = (int)sub_401000(0x4008u);
      if ( v8 )
        v6 = sub_490DC0(v8);
      else
        v6 = 0;
      dword_4E2738 = v6;
      v9 = dword_4E2738;
    }
    v7 = (int)sub_401000(0x10u);
    if ( v7 )
      v5 = sub_48FD20(v7, *(_DWORD *)(a4 + 40), *(_DWORD *)(a4 + 44));
    else
      v5 = 0;
    *(_DWORD *)(v9 + 4 * (*(_DWORD *)(a4 + 40) + (*(_DWORD *)(a4 + 44) << 6)) + 8) = v5;
    if ( sub_48FEC0((void *)v5) && CMFireFlowerExplosion::CMFireFlowerExplosion((void *)v5, v10) )
    {
      fclose(v10);
      result = 1;
    }
    else
    {
      sub_4328C0("Map loading is failed. (%s)", a4 + 48);
      fclose(v10);
      if ( v9 )
        sub_491010(v9, a1, a2, a3, 1);
      result = 0;
    }
  }
  else
  {
    sub_4328C0("CSMap::LoadMap() Can't read map(%s).", a4 + 48);
    result = 0;
  }
  return result;
}
// 4E2738: using guessed type int dword_4E2738;

//----- (00491010) --------------------------------------------------------
int __userpurge sub_491010<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CCellMap::GetPlayerList(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00491040) --------------------------------------------------------
void __usercall sub_491040(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  if ( dword_4E2738 )
  {
    if ( dword_4E2738 )
      sub_491010(dword_4E2738, a1, a2, a3, 1);
  }
}
// 4E2738: using guessed type int dword_4E2738;

//----- (00491080) --------------------------------------------------------
int __cdecl sub_491080(signed int a1)
{
  int result; // eax@2

  if ( a1 < 32 )
    result = dword_4E2738;
  else
    result = 0;
  return result;
}
// 4E2738: using guessed type int dword_4E2738;

//----- (004910A0) --------------------------------------------------------
int __thiscall sub_4910A0(void *this, int a2, int a3)
{
  int result; // eax@1
  int v4; // edx@1
  int v5; // ST04_4@5
  int j; // [sp+8h] [bp-10h]@3
  int i; // [sp+Ch] [bp-Ch]@1
  void *v8; // [sp+10h] [bp-8h]@1
  int v9; // [sp+14h] [bp-4h]@1

  v8 = this + 4 * ((*(_DWORD *)(a3 + 12) << 6) + *(_DWORD *)a3) + 8;
  v4 = *(_DWORD *)(a3 + 8) - *(_DWORD *)a3;
  result = 64 - v4;
  v9 = 64 - v4;
  for ( i = *(_DWORD *)(a3 + 12); i < *(_DWORD *)(a3 + 4); ++i )
  {
    for ( j = *(_DWORD *)a3; j < *(_DWORD *)(a3 + 8); ++j )
    {
      v5 = *(_DWORD *)v8;
      v8 = (char *)v8 + 4;
      sub_490070(v5, a2);
    }
    v8 = (char *)v8 + 4 * v9;
    result = i + 1;
  }
  return result;
}

//----- (00491150) --------------------------------------------------------
int __userpurge sub_491150<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int result; // eax@1
  int v7; // edx@1
  int v8; // ST04_4@5
  int j; // [sp+8h] [bp-10h]@3
  int i; // [sp+Ch] [bp-Ch]@1
  int v11; // [sp+10h] [bp-8h]@1
  int v12; // [sp+14h] [bp-4h]@1

  v11 = a1 + 4 * ((*(_DWORD *)(a6 + 12) << 6) + *(_DWORD *)a6) + 8;
  v7 = *(_DWORD *)(a6 + 8) - *(_DWORD *)a6;
  result = 64 - v7;
  v12 = 64 - v7;
  for ( i = *(_DWORD *)(a6 + 12); i < *(_DWORD *)(a6 + 4); ++i )
  {
    for ( j = *(_DWORD *)a6; j < *(_DWORD *)(a6 + 8); ++j )
    {
      v8 = *(_DWORD *)v11;
      v11 += 4;
      sub_490220(v8, a2, a3, a4, a5);
    }
    v11 += 4 * v12;
    result = i + 1;
  }
  return result;
}

//----- (00491200) --------------------------------------------------------
int __thiscall sub_491200(void *this, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // edx@1
  int v6; // ST08_4@5
  int j; // [sp+8h] [bp-10h]@3
  int i; // [sp+Ch] [bp-Ch]@1
  void *v9; // [sp+10h] [bp-8h]@1
  int v10; // [sp+14h] [bp-4h]@1

  v9 = this + 4 * ((*(_DWORD *)(a4 + 12) << 6) + *(_DWORD *)a4) + 8;
  v5 = *(_DWORD *)(a4 + 8) - *(_DWORD *)a4;
  result = 64 - v5;
  v10 = 64 - v5;
  for ( i = *(_DWORD *)(a4 + 12); i < *(_DWORD *)(a4 + 4); ++i )
  {
    for ( j = *(_DWORD *)a4; j < *(_DWORD *)(a4 + 8); ++j )
    {
      v6 = *(_DWORD *)v9;
      v9 = (char *)v9 + 4;
      sub_4902D0(v6, a2, a3);
    }
    v9 = (char *)v9 + 4 * v10;
    result = i + 1;
  }
  return result;
}

//----- (004912B0) --------------------------------------------------------
int __userpurge sub_4912B0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int result; // eax@1
  int v8; // edx@1
  int v9; // ST08_4@5
  int j; // [sp+8h] [bp-10h]@3
  int i; // [sp+Ch] [bp-Ch]@1
  int v12; // [sp+10h] [bp-8h]@1
  int v13; // [sp+14h] [bp-4h]@1

  v12 = a1 + 4 * ((*(_DWORD *)(a7 + 12) << 6) + *(_DWORD *)a7) + 8;
  v8 = *(_DWORD *)(a7 + 8) - *(_DWORD *)a7;
  result = 64 - v8;
  v13 = 64 - v8;
  for ( i = *(_DWORD *)(a7 + 12); i < *(_DWORD *)(a7 + 4); ++i )
  {
    for ( j = *(_DWORD *)a7; j < *(_DWORD *)(a7 + 8); ++j )
    {
      v9 = *(_DWORD *)v12;
      v12 += 4;
      CCellMap::ReadUnlock(v9, a2, a3, a4, a5, a6);
    }
    v12 += 4 * v13;
    result = i + 1;
  }
  return result;
}

//----- (00491360) --------------------------------------------------------
signed int __userpurge sub_491360<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // ST0C_4@3
  int v8; // eax@3
  int v9; // [sp+8h] [bp-Ch]@3
  int v10; // [sp+Ch] [bp-8h]@3
  int v11; // [sp+10h] [bp-4h]@1

  v11 = CSMap::_GetCellMap(a1, a6);
  if ( v11 )
  {
    v9 = *(_DWORD *)a6 & 0xFF;
    v10 = *(_DWORD *)(a6 + 4) & 0xFF;
    v7 = CCellMap::GetLock(v11, (int)&v9);
    sub_47E0D0((volatile LONG *)v7);
    v8 = CCellMap::GetTile(v11, (int)&v9);
    sub_496520(v8, a2, a3, a4, a5);
    sub_47E1C0((volatile LONG *)v7, a2, a3, a4);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004913E0) --------------------------------------------------------
signed int __userpurge sub_4913E0<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  signed int result; // eax@2
  int v7; // ST0C_4@3
  int v8; // eax@3
  int v9; // [sp+8h] [bp-Ch]@3
  int v10; // [sp+Ch] [bp-8h]@3
  int v11; // [sp+10h] [bp-4h]@1

  v11 = CSMap::_GetCellMap(a1, a6);
  if ( v11 )
  {
    v9 = *(_DWORD *)a6 & 0xFF;
    v10 = *(_DWORD *)(a6 + 4) & 0xFF;
    v7 = CCellMap::GetLock(v11, (int)&v9);
    sub_47E0D0((volatile LONG *)v7);
    v8 = CCellMap::GetTile(v11, (int)&v9);
    sub_496550((void *)v8, a5);
    sub_47E1C0((volatile LONG *)v7, a2, a3, a4);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00491460) --------------------------------------------------------
signed int __userpurge CSMap::ReadLock<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9, int a10)
{
  int v10; // edx@1
  int v12; // eax@4
  int v13; // eax@5
  int v14; // eax@15
  int v15; // eax@19
  int v16; // ST50_4@30
  int v17; // eax@30
  int v18; // ST50_4@38
  int v19; // eax@38
  int v20; // ST50_4@43
  int v21; // eax@43
  int v22; // ST50_4@48
  int v23; // eax@48
  int v24; // ST50_4@56
  int v25; // eax@56
  int v26; // ST50_4@61
  int v27; // eax@61
  int v28; // ST50_4@66
  int v29; // eax@66
  int v30; // ST50_4@75
  int v31; // eax@75
  int v32; // ST50_4@77
  int v33; // eax@77
  int v34; // ST50_4@79
  int v35; // eax@79
  int v36; // ST50_4@87
  int v37; // eax@87
  int v38; // ST50_4@92
  int v39; // eax@92
  int v40; // ST50_4@94
  int v41; // eax@94
  int v42; // ST50_4@96
  int v43; // eax@96
  int v44; // ST50_4@101
  int v45; // eax@101
  int v46; // ST50_4@109
  int v47; // eax@109
  int v48; // ST50_4@114
  int v49; // eax@114
  int v50; // ST50_4@116
  int v51; // eax@116
  int v52; // ST50_4@118
  int v53; // eax@118
  int v54; // ST50_4@123
  int v55; // eax@123
  int v56; // ST50_4@132
  int v57; // eax@132
  int v58; // ST50_4@134
  int v59; // eax@134
  int v60; // ST50_4@136
  int v61; // eax@136
  int v62; // ST50_4@144
  int v63; // eax@144
  int v64; // ST50_4@149
  int v65; // eax@149
  int v66; // ST50_4@151
  int v67; // eax@151
  int v68; // ST50_4@153
  int v69; // eax@153
  int v70; // ST50_4@158
  int v71; // eax@158
  int v72; // ST50_4@166
  int v73; // eax@166
  int v74; // ST50_4@171
  int v75; // eax@171
  int v76; // ST50_4@173
  int v77; // eax@173
  int v78; // ST50_4@175
  int v79; // eax@175
  int v80; // ST50_4@180
  int v81; // eax@180
  int v82; // edx@182
  void *v83; // [sp+0h] [bp-A4h]@1
  int v84; // [sp+4h] [bp-A0h]@7
  int v85; // [sp+8h] [bp-9Ch]@11
  int v86; // [sp+Ch] [bp-98h]@8
  int v87; // [sp+10h] [bp-94h]@12
  int v88; // [sp+14h] [bp-90h]@21
  int v89; // [sp+18h] [bp-8Ch]@13
  int v90; // [sp+1Ch] [bp-88h]@13
  int v91; // [sp+20h] [bp-84h]@13
  int v92; // [sp+24h] [bp-80h]@21
  int v93; // [sp+28h] [bp-7Ch]@21
  int v94; // [sp+2Ch] [bp-78h]@24
  int v95; // [sp+30h] [bp-74h]@8
  int v96; // [sp+34h] [bp-70h]@11
  int v97; // [sp+38h] [bp-6Ch]@8
  int v98; // [sp+3Ch] [bp-68h]@11
  int v99; // [sp+40h] [bp-64h]@1
  int v100; // [sp+44h] [bp-60h]@1
  int v101; // [sp+48h] [bp-5Ch]@1
  int v102; // [sp+4Ch] [bp-58h]@1
  int v103; // [sp+50h] [bp-54h]@4
  int v104; // [sp+54h] [bp-50h]@7
  int v105; // [sp+58h] [bp-4Ch]@12
  int v106; // [sp+5Ch] [bp-48h]@9
  int v107; // [sp+60h] [bp-44h]@11
  char v108[4]; // [sp+64h] [bp-40h]@13
  int v109; // [sp+70h] [bp-34h]@13
  int v110; // [sp+74h] [bp-30h]@21
  int v111; // [sp+78h] [bp-2Ch]@1
  int v112; // [sp+7Ch] [bp-28h]@1
  int v113; // [sp+80h] [bp-24h]@8
  int v114; // [sp+84h] [bp-20h]@11
  int v115; // [sp+88h] [bp-1Ch]@8
  int v116; // [sp+8Ch] [bp-18h]@11
  void *v117; // [sp+90h] [bp-14h]@22
  int v118; // [sp+94h] [bp-10h]@1
  int j; // [sp+98h] [bp-Ch]@28
  int i; // [sp+9Ch] [bp-8h]@26
  int v121; // [sp+A0h] [bp-4h]@2
  int v122; // [sp+B0h] [bp+Ch]@24
  int v123; // [sp+B4h] [bp+10h]@24

  v83 = a1;
  v10 = *(_DWORD *)(a5 + 328);
  v99 = *(_DWORD *)(a5 + 324);
  v100 = v10;
  v101 = a6 + *(_DWORD *)(a5 + 332);
  v102 = a7 + *(_DWORD *)(a5 + 336);
  v111 = v101 >> 5;
  v112 = v102 >> 5;
  v118 = sub_492570(a1, (int)&v99);
  if ( !v118 || (v121 = sub_492570(v83, (int)&v111), !v121) )
    return 0;
  v103 = a10 != 0 ? 100 : 64;
  v12 = abs(a6);
  if ( v12 > v103 || (v13 = abs(a7), v13 > v103) )
  {
    sub_432890("move hack PID(%d) Delta(%d,%d)", *(_DWORD *)(a5 + 452), a6, a7);
    std___Mpunct_wchar_t___do_frac_digits(a5);
    CPlayer::Write(a2, a3, a4, a5, 33, (unsigned int)"ddddw");
    return 0;
  }
  sub_492440((int)&v99, (int)&v104, 25);
  sub_492440((int)&v111, (int)&v84, 25);
  if ( a6 <= 0 )
  {
    v113 = v111;
    v115 = v99 + 1;
    v95 = v84;
    v97 = v106;
  }
  else
  {
    v113 = v99;
    v115 = v111 + 1;
    v95 = v104;
    v97 = v86;
  }
  if ( a7 <= 0 )
  {
    v114 = v100 + 1;
    v116 = v112;
    v96 = v105;
    v98 = v87;
  }
  else
  {
    v114 = v112 + 1;
    v116 = v100;
    v96 = v85;
    v98 = v107;
  }
  v90 = (unsigned __int8)v99;
  v91 = (unsigned __int8)v100;
  sub_492510((int)&v95, (int)v108);
  v89 = *(_DWORD *)v108 + (v109 << 6);
  if ( *(_DWORD *)v108 + (v109 << 6) < 0 || v89 > 4096 )
  {
    sub_422B30("CSMap::MovePlayer rtMap.left(%d) rtMap.bottom(%d) nIndex(%d) PID(%d) Name(%s)", v108[0]);
    v14 = GetTickCount();
    if ( dword_4E2754 < (unsigned int)v14 )
    {
      ++dword_4E2740;
      if ( dword_4E2740 < 5 )
        sub_422D80(v14, a2, a3, a4);
    }
    return 0;
  }
  sub_491200(v83, (int)&v95, (int)&v113, (int)v108);
  v15 = CCellMap::GetTile(v118, (int)&v90);
  if ( !sub_496550((void *)v15, a5) )
  {
    sub_4912B0((int)v83, a2, a3, a4, (int)&v95, (int)&v113, (int)v108);
    return 0;
  }
  CChar::SetXY(a5, (int)&v101);
  *(_DWORD *)(a5 + 340) += a8;
  CChar::SetDirection((void *)a5, a6, a7);
  v92 = (unsigned __int8)v111;
  v93 = (unsigned __int8)v112;
  v88 = CCellMap::GetTile(v121, (int)&v92);
  sub_496520(v88, a2, a3, a4, a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  v110 = (int)sub_44FCE0(a2, a3, a4, 55, (unsigned int)"d");
  if ( a10 )
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    v117 = sub_44FCE0(a2, a3, a4, (a9 != 0) + 101, (unsigned int)"dbbb");
    CPlayer::Send((void *)a5, a2, a3, a4, v117);
  }
  else
  {
    std___Mpunct_wchar_t___do_frac_digits(a5);
    v117 = sub_44FCE0(a2, a3, a4, (a9 != 0) + 34, (unsigned int)"dbbb");
  }
  CPlayer::GetGuildName(a5);
  CPlayer::GetGuildClassTitle(a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  v94 = (int)sub_44FCE0(a2, a3, a4, 50, (unsigned int)"dsbdddwdmbbIssdbd");
  v122 = v111 - v99;
  v123 = v112 - v100;
  if ( v111 != v99 )
    goto LABEL_69;
  if ( v123 )
  {
    if ( v123 > 0 )
    {
      for ( i = v107; i < v87; ++i )
      {
        for ( j = v104; j < v106; ++j )
        {
          v18 = v110;
          v19 = CSMap::_GetCellMap(v83, (int)&j);
          sub_490780(v19, a2, a3, a4, a5, (int)&j, v18);
        }
      }
      while ( i < v105 )
      {
        for ( j = v104; j < v106; ++j )
        {
          v20 = (int)v117;
          v21 = CSMap::_GetCellMap(v83, (int)&j);
          CCellMap::GetRWLockRect(v21, a2, a3, a4, a5, (int)&j, v20);
        }
        ++i;
      }
      while ( i < v85 )
      {
        for ( j = v104; j < v106; ++j )
        {
          v22 = v94;
          v23 = CSMap::_GetCellMap(v83, (int)&j);
          sub_4908E0(v23, a2, a3, a4, a5, (int)&j, v22);
        }
        ++i;
      }
      goto LABEL_182;
    }
    if ( v123 < 0 )
    {
      for ( i = v87; i < v107; ++i )
      {
        for ( j = v84; j < v86; ++j )
        {
          v24 = v94;
          v25 = CSMap::_GetCellMap(v83, (int)&j);
          sub_4908E0(v25, a2, a3, a4, a5, (int)&j, v24);
        }
      }
      while ( i < v85 )
      {
        for ( j = v84; j < v86; ++j )
        {
          v26 = (int)v117;
          v27 = CSMap::_GetCellMap(v83, (int)&j);
          CCellMap::GetRWLockRect(v27, a2, a3, a4, a5, (int)&j, v26);
        }
        ++i;
      }
      while ( i < v105 )
      {
        for ( j = v84; j < v86; ++j )
        {
          v28 = v110;
          v29 = CSMap::_GetCellMap(v83, (int)&j);
          sub_490780(v29, a2, a3, a4, a5, (int)&j, v28);
        }
        ++i;
      }
      goto LABEL_182;
    }
LABEL_69:
    if ( v122 > 0 )
    {
      if ( !v123 )
      {
        for ( i = v107; i < v105; ++i )
        {
          for ( j = v104; j < v84; ++j )
          {
            v30 = v110;
            v31 = CSMap::_GetCellMap(v83, (int)&j);
            sub_490780(v31, a2, a3, a4, a5, (int)&j, v30);
          }
          while ( j < v106 )
          {
            v32 = (int)v117;
            v33 = CSMap::_GetCellMap(v83, (int)&j);
            CCellMap::GetRWLockRect(v33, a2, a3, a4, a5, (int)&j, v32);
            ++j;
          }
          while ( j < v86 )
          {
            v34 = v94;
            v35 = CSMap::_GetCellMap(v83, (int)&j);
            sub_4908E0(v35, a2, a3, a4, a5, (int)&j, v34);
            ++j;
          }
        }
        goto LABEL_182;
      }
      if ( v123 > 0 )
      {
        for ( i = v107; i < v87; ++i )
        {
          for ( j = v104; j < v106; ++j )
          {
            v36 = v110;
            v37 = CSMap::_GetCellMap(v83, (int)&j);
            sub_490780(v37, a2, a3, a4, a5, (int)&j, v36);
          }
        }
        while ( i < v105 )
        {
          for ( j = v104; j < v84; ++j )
          {
            v38 = v110;
            v39 = CSMap::_GetCellMap(v83, (int)&j);
            sub_490780(v39, a2, a3, a4, a5, (int)&j, v38);
          }
          while ( j < v106 )
          {
            v40 = (int)v117;
            v41 = CSMap::_GetCellMap(v83, (int)&j);
            CCellMap::GetRWLockRect(v41, a2, a3, a4, a5, (int)&j, v40);
            ++j;
          }
          while ( j < v86 )
          {
            v42 = v94;
            v43 = CSMap::_GetCellMap(v83, (int)&j);
            sub_4908E0(v43, a2, a3, a4, a5, (int)&j, v42);
            ++j;
          }
          ++i;
        }
        while ( i < v85 )
        {
          for ( j = v84; j < v86; ++j )
          {
            v44 = v94;
            v45 = CSMap::_GetCellMap(v83, (int)&j);
            sub_4908E0(v45, a2, a3, a4, a5, (int)&j, v44);
          }
          ++i;
        }
        goto LABEL_182;
      }
      if ( v123 < 0 )
      {
        for ( i = v87; i < v107; ++i )
        {
          for ( j = v84; j < v86; ++j )
          {
            v46 = v94;
            v47 = CSMap::_GetCellMap(v83, (int)&j);
            sub_4908E0(v47, a2, a3, a4, a5, (int)&j, v46);
          }
        }
        while ( i < v85 )
        {
          for ( j = v104; j < v84; ++j )
          {
            v48 = v110;
            v49 = CSMap::_GetCellMap(v83, (int)&j);
            sub_490780(v49, a2, a3, a4, a5, (int)&j, v48);
          }
          while ( j < v106 )
          {
            v50 = (int)v117;
            v51 = CSMap::_GetCellMap(v83, (int)&j);
            CCellMap::GetRWLockRect(v51, a2, a3, a4, a5, (int)&j, v50);
            ++j;
          }
          while ( j < v86 )
          {
            v52 = v94;
            v53 = CSMap::_GetCellMap(v83, (int)&j);
            sub_4908E0(v53, a2, a3, a4, a5, (int)&j, v52);
            ++j;
          }
          ++i;
        }
        while ( i < v105 )
        {
          for ( j = v104; j < v106; ++j )
          {
            v54 = v110;
            v55 = CSMap::_GetCellMap(v83, (int)&j);
            sub_490780(v55, a2, a3, a4, a5, (int)&j, v54);
          }
          ++i;
        }
        goto LABEL_182;
      }
    }
    if ( v122 < 0 )
    {
      if ( v123 )
      {
        if ( v123 <= 0 )
        {
          if ( v123 < 0 )
          {
            for ( i = v87; i < v107; ++i )
            {
              for ( j = v84; j < v86; ++j )
              {
                v72 = v94;
                v73 = CSMap::_GetCellMap(v83, (int)&j);
                sub_4908E0(v73, a2, a3, a4, a5, (int)&j, v72);
              }
            }
            while ( i < v85 )
            {
              for ( j = v84; j < v104; ++j )
              {
                v74 = v94;
                v75 = CSMap::_GetCellMap(v83, (int)&j);
                sub_4908E0(v75, a2, a3, a4, a5, (int)&j, v74);
              }
              while ( j < v86 )
              {
                v76 = (int)v117;
                v77 = CSMap::_GetCellMap(v83, (int)&j);
                CCellMap::GetRWLockRect(v77, a2, a3, a4, a5, (int)&j, v76);
                ++j;
              }
              while ( j < v106 )
              {
                v78 = v110;
                v79 = CSMap::_GetCellMap(v83, (int)&j);
                sub_490780(v79, a2, a3, a4, a5, (int)&j, v78);
                ++j;
              }
              ++i;
            }
            while ( i < v105 )
            {
              for ( j = v104; j < v106; ++j )
              {
                v80 = v110;
                v81 = CSMap::_GetCellMap(v83, (int)&j);
                sub_490780(v81, a2, a3, a4, a5, (int)&j, v80);
              }
              ++i;
            }
          }
        }
        else
        {
          for ( i = v107; i < v87; ++i )
          {
            for ( j = v104; j < v106; ++j )
            {
              v62 = v110;
              v63 = CSMap::_GetCellMap(v83, (int)&j);
              sub_490780(v63, a2, a3, a4, a5, (int)&j, v62);
            }
          }
          while ( i < v105 )
          {
            for ( j = v84; j < v104; ++j )
            {
              v64 = v94;
              v65 = CSMap::_GetCellMap(v83, (int)&j);
              sub_4908E0(v65, a2, a3, a4, a5, (int)&j, v64);
            }
            while ( j < v86 )
            {
              v66 = (int)v117;
              v67 = CSMap::_GetCellMap(v83, (int)&j);
              CCellMap::GetRWLockRect(v67, a2, a3, a4, a5, (int)&j, v66);
              ++j;
            }
            while ( j < v106 )
            {
              v68 = v110;
              v69 = CSMap::_GetCellMap(v83, (int)&j);
              sub_490780(v69, a2, a3, a4, a5, (int)&j, v68);
              ++j;
            }
            ++i;
          }
          while ( i < v85 )
          {
            for ( j = v84; j < v86; ++j )
            {
              v70 = v94;
              v71 = CSMap::_GetCellMap(v83, (int)&j);
              sub_4908E0(v71, a2, a3, a4, a5, (int)&j, v70);
            }
            ++i;
          }
        }
      }
      else
      {
        for ( i = v87; i < v85; ++i )
        {
          for ( j = v84; j < v104; ++j )
          {
            v56 = v94;
            v57 = CSMap::_GetCellMap(v83, (int)&j);
            sub_4908E0(v57, a2, a3, a4, a5, (int)&j, v56);
          }
          while ( j < v86 )
          {
            v58 = (int)v117;
            v59 = CSMap::_GetCellMap(v83, (int)&j);
            CCellMap::GetRWLockRect(v59, a2, a3, a4, a5, (int)&j, v58);
            ++j;
          }
          while ( j < v106 )
          {
            v60 = v110;
            v61 = CSMap::_GetCellMap(v83, (int)&j);
            sub_490780(v61, a2, a3, a4, a5, (int)&j, v60);
            ++j;
          }
        }
      }
    }
    goto LABEL_182;
  }
  for ( i = v107; i < v105; ++i )
  {
    for ( j = v104; j < v106; ++j )
    {
      v16 = (int)v117;
      v17 = CSMap::_GetCellMap(v83, (int)&j);
      CCellMap::GetRWLockRect(v17, a2, a3, a4, a5, (int)&j, v16);
    }
  }
LABEL_182:
  v82 = *(_DWORD *)(v88 + 4);
  if ( v82 & 0x10000 )
  {
    CPortal::OpenPortal(a2, a3, a4, a5);
    sub_4912B0((int)v83, a2, a3, a4, (int)&v95, (int)&v113, (int)v108);
  }
  else
  {
    sub_4912B0((int)v83, a2, a3, a4, (int)&v95, (int)&v113, (int)v108);
  }
  CIOBuffer::Release(v110);
  CIOBuffer::Release(v94);
  CIOBuffer::Release((int)v117);
  return 1;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 4E2740: using guessed type int dword_4E2740;
// 4E2754: using guessed type int dword_4E2754;

//----- (00492440) --------------------------------------------------------
int __stdcall sub_492440(int a1, int a2, int a3)
{
  int result; // eax@13
  int v4; // [sp+0h] [bp-14h]@11
  int v5; // [sp+4h] [bp-10h]@8
  int v6; // [sp+8h] [bp-Ch]@5
  int v7; // [sp+Ch] [bp-8h]@2

  if ( *(_DWORD *)a1 - a3 >= 0 )
    v7 = *(_DWORD *)a1 - a3;
  else
    v7 = 0;
  *(_DWORD *)a2 = v7;
  if ( *(_DWORD *)(a1 + 4) - a3 >= 0 )
    v6 = *(_DWORD *)(a1 + 4) - a3;
  else
    v6 = 0;
  *(_DWORD *)(a2 + 12) = v6;
  if ( *(_DWORD *)a1 + a3 + 1 <= 16384 )
    v5 = *(_DWORD *)a1 + a3 + 1;
  else
    v5 = 16384;
  *(_DWORD *)(a2 + 8) = v5;
  if ( *(_DWORD *)(a1 + 4) + a3 + 1 <= 16384 )
    v4 = *(_DWORD *)(a1 + 4) + a3 + 1;
  else
    v4 = 16384;
  result = a2;
  *(_DWORD *)(a2 + 4) = v4;
  return result;
}

//----- (00492510) --------------------------------------------------------
int __stdcall sub_492510(int a1, int a2)
{
  int result; // eax@1

  *(_DWORD *)a2 = *(_DWORD *)a1 >> 8;
  *(_DWORD *)(a2 + 12) = *(_DWORD *)(a1 + 12) >> 8;
  *(_DWORD *)(a2 + 8) = ((*(_DWORD *)(a1 + 8) - 1) >> 8) + 1;
  result = a1;
  *(_DWORD *)(a2 + 4) = ((*(_DWORD *)(a1 + 4) - 1) >> 8) + 1;
  return result;
}

//----- (00492570) --------------------------------------------------------
int __thiscall sub_492570(void *this, int a2)
{
  int result; // eax@5

  if ( *(_DWORD *)a2 >= 0 && *(_DWORD *)a2 >> 8 < 64 && *(_DWORD *)(a2 + 4) >= 0 && *(_DWORD *)(a2 + 4) >> 8 < 64 )
    result = CSMap::_GetCellMap(this, a2);
  else
    result = 0;
  return result;
}

//----- (004925C0) --------------------------------------------------------
signed int __userpurge sub_4925C0<eax>(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // edx@1
  int v11; // eax@8
  int v12; // eax@15
  int v13; // eax@17
  int v14; // ST3C_4@23
  int v15; // eax@23
  int v16; // ST3C_4@31
  int v17; // eax@31
  int v18; // ST3C_4@36
  int v19; // eax@36
  int v20; // ST3C_4@41
  int v21; // eax@41
  int v22; // ST3C_4@49
  int v23; // eax@49
  int v24; // ST3C_4@54
  int v25; // eax@54
  int v26; // ST3C_4@59
  int v27; // eax@59
  int v28; // ST3C_4@68
  int v29; // eax@68
  int v30; // ST3C_4@70
  int v31; // eax@70
  int v32; // ST3C_4@72
  int v33; // eax@72
  int v34; // ST3C_4@80
  int v35; // eax@80
  int v36; // ST3C_4@85
  int v37; // eax@85
  int v38; // ST3C_4@87
  int v39; // eax@87
  int v40; // ST3C_4@89
  int v41; // eax@89
  int v42; // ST3C_4@94
  int v43; // eax@94
  int v44; // ST3C_4@102
  int v45; // eax@102
  int v46; // ST3C_4@107
  int v47; // eax@107
  int v48; // ST3C_4@109
  int v49; // eax@109
  int v50; // ST3C_4@111
  int v51; // eax@111
  int v52; // ST3C_4@116
  int v53; // eax@116
  int v54; // ST3C_4@125
  int v55; // eax@125
  int v56; // ST3C_4@127
  int v57; // eax@127
  int v58; // ST3C_4@129
  int v59; // eax@129
  int v60; // ST3C_4@137
  int v61; // eax@137
  int v62; // ST3C_4@142
  int v63; // eax@142
  int v64; // ST3C_4@144
  int v65; // eax@144
  int v66; // ST3C_4@146
  int v67; // eax@146
  int v68; // ST3C_4@151
  int v69; // eax@151
  int v70; // ST3C_4@159
  int v71; // eax@159
  int v72; // ST3C_4@164
  int v73; // eax@164
  int v74; // ST3C_4@166
  int v75; // eax@166
  int v76; // ST3C_4@168
  int v77; // eax@168
  int v78; // ST3C_4@173
  int v79; // eax@173
  void *v80; // [sp+0h] [bp-98h]@1
  int v81; // [sp+4h] [bp-94h]@9
  int v82; // [sp+8h] [bp-90h]@13
  int v83; // [sp+Ch] [bp-8Ch]@10
  int v84; // [sp+10h] [bp-88h]@14
  int v85; // [sp+14h] [bp-84h]@15
  int v86; // [sp+18h] [bp-80h]@15
  int v87; // [sp+1Ch] [bp-7Ch]@17
  int v88; // [sp+20h] [bp-78h]@17
  int v89; // [sp+24h] [bp-74h]@17
  int v90; // [sp+28h] [bp-70h]@10
  int v91; // [sp+2Ch] [bp-6Ch]@13
  int v92; // [sp+30h] [bp-68h]@10
  int v93; // [sp+34h] [bp-64h]@13
  int v94; // [sp+38h] [bp-60h]@1
  int v95; // [sp+3Ch] [bp-5Ch]@1
  int v96; // [sp+40h] [bp-58h]@1
  int v97; // [sp+44h] [bp-54h]@1
  int v98; // [sp+48h] [bp-50h]@9
  int v99; // [sp+4Ch] [bp-4Ch]@14
  int v100; // [sp+50h] [bp-48h]@11
  int v101; // [sp+54h] [bp-44h]@13
  char v102; // [sp+58h] [bp-40h]@15
  int v103; // [sp+68h] [bp-30h]@17
  int v104; // [sp+6Ch] [bp-2Ch]@1
  int v105; // [sp+70h] [bp-28h]@1
  int v106; // [sp+74h] [bp-24h]@10
  int v107; // [sp+78h] [bp-20h]@13
  int v108; // [sp+7Ch] [bp-1Ch]@10
  int v109; // [sp+80h] [bp-18h]@13
  int v110; // [sp+84h] [bp-14h]@17
  int v111; // [sp+88h] [bp-10h]@1
  int j; // [sp+8Ch] [bp-Ch]@21
  int i; // [sp+90h] [bp-8h]@19
  int v114; // [sp+94h] [bp-4h]@2
  int v115; // [sp+A4h] [bp+Ch]@17
  int v116; // [sp+A8h] [bp+10h]@17

  v80 = a1;
  v9 = *(_DWORD *)(a5 + 328);
  v94 = *(_DWORD *)(a5 + 324);
  v95 = v9;
  v96 = a6 + *(_DWORD *)(a5 + 332);
  v97 = a7 + *(_DWORD *)(a5 + 336);
  v104 = v96 >> 5;
  v105 = v97 >> 5;
  v111 = sub_492570(a1, (int)&v94);
  if ( !v111 || (v114 = sub_492570(v80, (int)&v104), !v114) )
    return 0;
  if ( a6 > 127 || a6 < -128 || a7 > 127 || a7 < -128 )
  {
    v11 = std___Mpunct_wchar_t___do_frac_digits(a5);
    sub_432890("invalid monster move(%d : %d, %d)", v11, a6, a7);
    return 0;
  }
  sub_492440((int)&v94, (int)&v98, 25);
  sub_492440((int)&v104, (int)&v81, 25);
  if ( a6 <= 0 )
  {
    v106 = v104;
    v108 = v94 + 1;
    v90 = v81;
    v92 = v100;
  }
  else
  {
    v106 = v94;
    v108 = v104 + 1;
    v90 = v98;
    v92 = v83;
  }
  if ( a7 <= 0 )
  {
    v107 = v95 + 1;
    v109 = v105;
    v91 = v99;
    v93 = v84;
  }
  else
  {
    v107 = v105 + 1;
    v109 = v95;
    v91 = v82;
    v93 = v101;
  }
  v85 = (unsigned __int8)v94;
  v86 = (unsigned __int8)v95;
  sub_492510((int)&v90, (int)&v102);
  sub_491200(v80, (int)&v90, (int)&v106, (int)&v102);
  v12 = CCellMap::GetTile(v111, (int)&v85);
  if ( !sub_496550((void *)v12, a5) )
  {
    sub_4912B0((int)v80, a2, a3, a4, (int)&v90, (int)&v106, (int)&v102);
    return 0;
  }
  CChar::SetXY(a5, (int)&v96);
  CChar::SetDirection((void *)a5, a6, a7);
  v87 = (unsigned __int8)v104;
  v88 = (unsigned __int8)v105;
  v13 = CCellMap::GetTile(v114, (int)&v87);
  sub_496520(v13, a2, a3, a4, a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  v103 = (int)sub_44FCE0(a2, a3, a4, 56, (unsigned int)"d");
  std___Mpunct_wchar_t___do_frac_digits(a5);
  v110 = (int)sub_44FCE0(a2, a3, a4, (a8 != 0) + 36, (unsigned int)"dbbb");
  (*(void (__thiscall **)(int))(*(_DWORD *)a5 + 240))(a5);
  (*(void (__thiscall **)(int))(*(_DWORD *)a5 + 224))(a5);
  CChar::GetMaxHP(a5);
  std___Mpunct_wchar_t___do_frac_digits(a5);
  v89 = (int)sub_44FCE0(a2, a3, a4, 51, (unsigned int)"wdddwdddIsbds");
  v115 = v104 - v94;
  v116 = v105 - v95;
  if ( v104 != v94 )
    goto LABEL_62;
  if ( v116 )
  {
    if ( v116 > 0 )
    {
      for ( i = v101; i < v84; ++i )
      {
        for ( j = v98; j < v100; ++j )
        {
          v16 = v103;
          v17 = CSMap::_GetCellMap(v80, (int)&j);
          sub_490990(v17, a2, a3, a4, (int)&j, v16);
        }
      }
      while ( i < v99 )
      {
        for ( j = v98; j < v100; ++j )
        {
          v18 = v110;
          v19 = CSMap::_GetCellMap(v80, (int)&j);
          sub_490990(v19, a2, a3, a4, (int)&j, v18);
        }
        ++i;
      }
      while ( i < v82 )
      {
        for ( j = v98; j < v100; ++j )
        {
          v20 = v89;
          v21 = CSMap::_GetCellMap(v80, (int)&j);
          sub_490990(v21, a2, a3, a4, (int)&j, v20);
        }
        ++i;
      }
      goto LABEL_175;
    }
    if ( v116 < 0 )
    {
      for ( i = v84; i < v101; ++i )
      {
        for ( j = v81; j < v83; ++j )
        {
          v22 = v89;
          v23 = CSMap::_GetCellMap(v80, (int)&j);
          sub_490990(v23, a2, a3, a4, (int)&j, v22);
        }
      }
      while ( i < v82 )
      {
        for ( j = v81; j < v83; ++j )
        {
          v24 = v110;
          v25 = CSMap::_GetCellMap(v80, (int)&j);
          sub_490990(v25, a2, a3, a4, (int)&j, v24);
        }
        ++i;
      }
      while ( i < v99 )
      {
        for ( j = v81; j < v83; ++j )
        {
          v26 = v103;
          v27 = CSMap::_GetCellMap(v80, (int)&j);
          sub_490990(v27, a2, a3, a4, (int)&j, v26);
        }
        ++i;
      }
      goto LABEL_175;
    }
LABEL_62:
    if ( v115 > 0 )
    {
      if ( !v116 )
      {
        for ( i = v101; i < v99; ++i )
        {
          for ( j = v98; j < v81; ++j )
          {
            v28 = v103;
            v29 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v29, a2, a3, a4, (int)&j, v28);
          }
          while ( j < v100 )
          {
            v30 = v110;
            v31 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v31, a2, a3, a4, (int)&j, v30);
            ++j;
          }
          while ( j < v83 )
          {
            v32 = v89;
            v33 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v33, a2, a3, a4, (int)&j, v32);
            ++j;
          }
        }
        goto LABEL_175;
      }
      if ( v116 > 0 )
      {
        for ( i = v101; i < v84; ++i )
        {
          for ( j = v98; j < v100; ++j )
          {
            v34 = v103;
            v35 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v35, a2, a3, a4, (int)&j, v34);
          }
        }
        while ( i < v99 )
        {
          for ( j = v98; j < v81; ++j )
          {
            v36 = v103;
            v37 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v37, a2, a3, a4, (int)&j, v36);
          }
          while ( j < v100 )
          {
            v38 = v110;
            v39 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v39, a2, a3, a4, (int)&j, v38);
            ++j;
          }
          while ( j < v83 )
          {
            v40 = v89;
            v41 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v41, a2, a3, a4, (int)&j, v40);
            ++j;
          }
          ++i;
        }
        while ( i < v82 )
        {
          for ( j = v81; j < v83; ++j )
          {
            v42 = v89;
            v43 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v43, a2, a3, a4, (int)&j, v42);
          }
          ++i;
        }
        goto LABEL_175;
      }
      if ( v116 < 0 )
      {
        for ( i = v84; i < v101; ++i )
        {
          for ( j = v81; j < v83; ++j )
          {
            v44 = v89;
            v45 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v45, a2, a3, a4, (int)&j, v44);
          }
        }
        while ( i < v82 )
        {
          for ( j = v98; j < v81; ++j )
          {
            v46 = v103;
            v47 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v47, a2, a3, a4, (int)&j, v46);
          }
          while ( j < v100 )
          {
            v48 = v110;
            v49 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v49, a2, a3, a4, (int)&j, v48);
            ++j;
          }
          while ( j < v83 )
          {
            v50 = v89;
            v51 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v51, a2, a3, a4, (int)&j, v50);
            ++j;
          }
          ++i;
        }
        while ( i < v99 )
        {
          for ( j = v98; j < v100; ++j )
          {
            v52 = v103;
            v53 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v53, a2, a3, a4, (int)&j, v52);
          }
          ++i;
        }
        goto LABEL_175;
      }
    }
    if ( v115 < 0 )
    {
      if ( v116 )
      {
        if ( v116 <= 0 )
        {
          if ( v116 < 0 )
          {
            for ( i = v84; i < v101; ++i )
            {
              for ( j = v81; j < v83; ++j )
              {
                v70 = v89;
                v71 = CSMap::_GetCellMap(v80, (int)&j);
                sub_490990(v71, a2, a3, a4, (int)&j, v70);
              }
            }
            while ( i < v82 )
            {
              for ( j = v81; j < v98; ++j )
              {
                v72 = v89;
                v73 = CSMap::_GetCellMap(v80, (int)&j);
                sub_490990(v73, a2, a3, a4, (int)&j, v72);
              }
              while ( j < v83 )
              {
                v74 = v110;
                v75 = CSMap::_GetCellMap(v80, (int)&j);
                sub_490990(v75, a2, a3, a4, (int)&j, v74);
                ++j;
              }
              while ( j < v100 )
              {
                v76 = v103;
                v77 = CSMap::_GetCellMap(v80, (int)&j);
                sub_490990(v77, a2, a3, a4, (int)&j, v76);
                ++j;
              }
              ++i;
            }
            while ( i < v99 )
            {
              for ( j = v98; j < v100; ++j )
              {
                v78 = v103;
                v79 = CSMap::_GetCellMap(v80, (int)&j);
                sub_490990(v79, a2, a3, a4, (int)&j, v78);
              }
              ++i;
            }
          }
        }
        else
        {
          for ( i = v101; i < v84; ++i )
          {
            for ( j = v98; j < v100; ++j )
            {
              v60 = v103;
              v61 = CSMap::_GetCellMap(v80, (int)&j);
              sub_490990(v61, a2, a3, a4, (int)&j, v60);
            }
          }
          while ( i < v99 )
          {
            for ( j = v81; j < v98; ++j )
            {
              v62 = v89;
              v63 = CSMap::_GetCellMap(v80, (int)&j);
              sub_490990(v63, a2, a3, a4, (int)&j, v62);
            }
            while ( j < v83 )
            {
              v64 = v110;
              v65 = CSMap::_GetCellMap(v80, (int)&j);
              sub_490990(v65, a2, a3, a4, (int)&j, v64);
              ++j;
            }
            while ( j < v100 )
            {
              v66 = v103;
              v67 = CSMap::_GetCellMap(v80, (int)&j);
              sub_490990(v67, a2, a3, a4, (int)&j, v66);
              ++j;
            }
            ++i;
          }
          while ( i < v82 )
          {
            for ( j = v81; j < v83; ++j )
            {
              v68 = v89;
              v69 = CSMap::_GetCellMap(v80, (int)&j);
              sub_490990(v69, a2, a3, a4, (int)&j, v68);
            }
            ++i;
          }
        }
      }
      else
      {
        for ( i = v84; i < v82; ++i )
        {
          for ( j = v81; j < v98; ++j )
          {
            v54 = v89;
            v55 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v55, a2, a3, a4, (int)&j, v54);
          }
          while ( j < v83 )
          {
            v56 = v110;
            v57 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v57, a2, a3, a4, (int)&j, v56);
            ++j;
          }
          while ( j < v100 )
          {
            v58 = v103;
            v59 = CSMap::_GetCellMap(v80, (int)&j);
            sub_490990(v59, a2, a3, a4, (int)&j, v58);
            ++j;
          }
        }
      }
    }
    goto LABEL_175;
  }
  for ( i = v101; i < v99; ++i )
  {
    for ( j = v98; j < v100; ++j )
    {
      v14 = v110;
      v15 = CSMap::_GetCellMap(v80, (int)&j);
      sub_490990(v15, a2, a3, a4, (int)&j, v14);
    }
  }
LABEL_175:
  sub_4912B0((int)v80, a2, a3, a4, (int)&v90, (int)&v106, (int)&v102);
  CIOBuffer::Release(v103);
  CIOBuffer::Release(v89);
  CIOBuffer::Release(v110);
  return 1;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43A200: using guessed type int __thiscall CChar::GetMaxHP(_DWORD);

//----- (00493390) --------------------------------------------------------
int __userpurge sub_493390<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // eax@5
  int v9; // [sp+0h] [bp-2Ch]@1
  int v10; // [sp+4h] [bp-28h]@1
  int v11; // [sp+8h] [bp-24h]@2
  int v12; // [sp+Ch] [bp-20h]@4
  int v13; // [sp+10h] [bp-1Ch]@1
  char v14; // [sp+14h] [bp-18h]@1
  int j; // [sp+24h] [bp-8h]@3
  int i; // [sp+28h] [bp-4h]@1

  v9 = a1;
  sub_492440(a6, (int)&v10, 25);
  sub_492510((int)&v10, (int)&v14);
  sub_4910A0((void *)v9, (int)&v10, (int)&v14);
  for ( i = v13; i < v11; ++i )
  {
    for ( j = v10; j < v12; ++j )
    {
      v7 = CSMap::_GetCellMap((void *)v9, (int)&j);
      sub_4908E0(v7, a2, a3, a4, a5, (int)&j, a7);
    }
  }
  return sub_491150(v9, a2, a3, a4, (int)&v10, (int)&v14);
}

//----- (00493440) --------------------------------------------------------
int __userpurge sub_493440<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // eax@5
  int v9; // [sp+0h] [bp-2Ch]@1
  int v10; // [sp+4h] [bp-28h]@1
  int v11; // [sp+8h] [bp-24h]@2
  int v12; // [sp+Ch] [bp-20h]@4
  int v13; // [sp+10h] [bp-1Ch]@1
  char v14; // [sp+14h] [bp-18h]@1
  int j; // [sp+24h] [bp-8h]@3
  int i; // [sp+28h] [bp-4h]@1

  v9 = a1;
  sub_492440(a5, (int)&v10, a7);
  sub_492510((int)&v10, (int)&v14);
  sub_4910A0((void *)v9, (int)&v10, (int)&v14);
  for ( i = v13; i < v11; ++i )
  {
    for ( j = v10; j < v12; ++j )
    {
      v7 = CSMap::_GetCellMap((void *)v9, (int)&j);
      sub_490990(v7, a2, a3, a4, (int)&j, a6);
    }
  }
  return sub_491150(v9, a2, a3, a4, (int)&v10, (int)&v14);
}

//----- (004934F0) --------------------------------------------------------
int __userpurge sub_4934F0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@5
  int v8; // [sp+0h] [bp-30h]@1
  int v9; // [sp+4h] [bp-2Ch]@1
  int v10; // [sp+8h] [bp-28h]@2
  int v11; // [sp+Ch] [bp-24h]@4
  int v12; // [sp+10h] [bp-20h]@1
  int v13; // [sp+14h] [bp-1Ch]@1
  char v14; // [sp+18h] [bp-18h]@1
  int j; // [sp+28h] [bp-8h]@3
  int i; // [sp+2Ch] [bp-4h]@1

  v8 = a1;
  v13 = 0;
  sub_492440(a5, (int)&v9, a6);
  sub_492510((int)&v9, (int)&v14);
  sub_4910A0((void *)v8, (int)&v9, (int)&v14);
  for ( i = v12; i < v10; ++i )
  {
    for ( j = v9; j < v11; ++j )
    {
      v6 = CSMap::_GetCellMap((void *)v8, (int)&j);
      sub_490A40(v6, a2, a3, a4, (int)&j, &v13);
    }
  }
  sub_491150(v8, a2, a3, a4, (int)&v9, (int)&v14);
  return v13;
}

//----- (004935A0) --------------------------------------------------------
int __userpurge sub_4935A0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@5
  int v8; // [sp+0h] [bp-30h]@1
  int v9; // [sp+4h] [bp-2Ch]@1
  int v10; // [sp+8h] [bp-28h]@2
  int v11; // [sp+Ch] [bp-24h]@4
  int v12; // [sp+10h] [bp-20h]@1
  int v13; // [sp+14h] [bp-1Ch]@1
  char v14; // [sp+18h] [bp-18h]@1
  int j; // [sp+28h] [bp-8h]@3
  int i; // [sp+2Ch] [bp-4h]@1

  v8 = a1;
  v13 = 0;
  sub_492440(a5, (int)&v9, a6);
  sub_492510((int)&v9, (int)&v14);
  sub_4910A0((void *)v8, (int)&v9, (int)&v14);
  for ( i = v12; i < v10; ++i )
  {
    for ( j = v9; j < v11; ++j )
    {
      v6 = CSMap::_GetCellMap((void *)v8, (int)&j);
      sub_490B00(v6, a2, a3, a4, (int)&j, &v13);
    }
  }
  sub_491150(v8, a2, a3, a4, (int)&v9, (int)&v14);
  return v13;
}

//----- (00493650) --------------------------------------------------------
int __userpurge sub_493650<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // eax@7
  int v8; // [sp+0h] [bp-38h]@1
  int i; // [sp+8h] [bp-30h]@1
  char v10; // [sp+Ch] [bp-2Ch]@1
  int v11; // [sp+1Ch] [bp-1Ch]@1
  char v12; // [sp+20h] [bp-18h]@1
  int k; // [sp+30h] [bp-8h]@5
  int j; // [sp+34h] [bp-4h]@3

  v8 = a1;
  v11 = 0;
  sub_492440(a5, (int)&v10, a6);
  sub_492510((int)&v10, (int)&v12);
  sub_4910A0((void *)v8, (int)&v10, (int)&v12);
  for ( i = 1; i <= a6; ++i )
  {
    for ( j = *(_DWORD *)(a5 + 4) - i; j <= i + *(_DWORD *)(a5 + 4); ++j )
    {
      for ( k = *(_DWORD *)a5 - i; k <= i + *(_DWORD *)a5; ++k )
      {
        v6 = CSMap::_GetCellMap((void *)v8, (int)&k);
        if ( sub_490BD0(v6, a2, a3, a4, (int)&k, (int)&v11) )
          goto LABEL_15;
        if ( j != *(_DWORD *)(a5 + 4) - i )
        {
          if ( j != i + *(_DWORD *)(a5 + 4) )
            k += 2 * i - 1;
        }
      }
    }
  }
LABEL_15:
  sub_491150(v8, a2, a3, a4, (int)&v10, (int)&v12);
  return v11;
}

//----- (00493770) --------------------------------------------------------
int __userpurge sub_493770<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // eax@7
  int v9; // [sp+0h] [bp-38h]@1
  int i; // [sp+8h] [bp-30h]@1
  char v11; // [sp+Ch] [bp-2Ch]@1
  char v12; // [sp+1Ch] [bp-1Ch]@1
  int k; // [sp+2Ch] [bp-Ch]@5
  int j; // [sp+30h] [bp-8h]@3
  int v15; // [sp+34h] [bp-4h]@1

  v9 = a1;
  v15 = 0;
  sub_492440(a5, (int)&v11, a7);
  sub_492510((int)&v11, (int)&v12);
  sub_4910A0((void *)v9, (int)&v11, (int)&v12);
  for ( i = 1; i <= a7; ++i )
  {
    for ( j = *(_DWORD *)(a5 + 4) - i; j <= i + *(_DWORD *)(a5 + 4); ++j )
    {
      for ( k = *(_DWORD *)a5 - i; k <= i + *(_DWORD *)a5; ++k )
      {
        v7 = CSMap::_GetCellMap((void *)v9, (int)&k);
        if ( sub_490CD0(v7, a2, a3, a4, (int)&k, a6, (int)&v15) )
          goto LABEL_15;
        if ( j != *(_DWORD *)(a5 + 4) - i )
        {
          if ( j != i + *(_DWORD *)(a5 + 4) )
            k += 2 * i - 1;
        }
      }
    }
  }
LABEL_15:
  sub_491150(v9, a2, a3, a4, (int)&v11, (int)&v12);
  return v15;
}

//----- (004938A0) --------------------------------------------------------
void __userpurge sub_4938A0(void *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // eax@8
  int v8; // [sp+4h] [bp-3Ch]@38
  int v9; // [sp+8h] [bp-38h]@38
  int v10; // [sp+Ch] [bp-34h]@38
  int v11; // [sp+10h] [bp-30h]@31
  int v12; // [sp+14h] [bp-2Ch]@31
  int v13; // [sp+18h] [bp-28h]@31
  int v14; // [sp+1Ch] [bp-24h]@39
  int v15; // [sp+20h] [bp-20h]@3
  int v16; // [sp+24h] [bp-1Ch]@3
  int v17; // [sp+28h] [bp-18h]@3
  int v18; // [sp+2Ch] [bp-14h]@3
  int v19; // [sp+30h] [bp-10h]@3
  int v20; // [sp+34h] [bp-Ch]@3
  int v21; // [sp+38h] [bp-8h]@1
  int v22; // [sp+3Ch] [bp-4h]@3

  v21 = sub_492570(a1, a7);
  if ( v21 )
  {
    v18 = 0;
    v16 = *(_DWORD *)a7 & 0xFF;
    v17 = *(_DWORD *)(a7 + 4) & 0xFF;
    v15 = CCellMap::GetLock(v21, (int)&v16);
    CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a5 + 1020), a2, a3, a4);
    sub_47E0D0((volatile LONG *)v15);
    v19 = CCellMap::GetTile(v21, (int)&v16);
    v20 = 0;
    v22 = 0;
    v18 = sub_4965B0((int *)v19, a2, a3, a4, a6);
    if ( v18 && !CBase::IsDeleted(v18) && sub_448870(a5 + 332, v18 + 60) <= 64 )
    {
      if ( *(_DWORD *)(v18 + 76)
        && (*(_DWORD *)(v18 + 72) || (v7 = std___Mpunct_wchar_t___do_frac_digits(a5), *(_DWORD *)(v18 + 76) != v7)) )
      {
        if ( *(_DWORD *)(v18 + 72) && *(_DWORD *)(v18 + 76) == *(_DWORD *)(a5 + 1016) )
        {
          v22 = CParty::FindParty(a2, a3, a4, *(_DWORD *)(v18 + 76));
          if ( v22 )
          {
            sub_496550((void *)v19, v18);
            sub_47E1C0((volatile LONG *)v15, a2, a3, a4);
            CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
            CParty::StoreItem(v22, a2, a3, a4, v18);
            v20 = 1;
            goto LABEL_19;
          }
        }
        else
        {
          CPlayer::Write(a2, a3, a4, a5, 67, (unsigned int)"b");
        }
      }
      else
      {
        CIOObject::AddRef(v18, a2, a3, a4);
        if ( CPlayer::_InsertItem((void *)a5, a2, a3, a4, 12, v18) == 1 )
        {
          sub_496550((void *)v19, v18);
          *(_DWORD *)(v18 + 72) = 0;
          *(_DWORD *)(v18 + 76) = 0;
          *(_DWORD *)(v18 + 68) = 0;
          *(_DWORD *)(v18 + 56) = 0;
          v20 = 1;
        }
        CIOObject::Release(v18, a2, a3, a4);
      }
    }
    sub_47E1C0((volatile LONG *)v15, a2, a3, a4);
    CIOCriticalSection::Leave(a5 + 1020, a2, a3, a4);
LABEL_19:
    if ( v20 )
    {
      if ( v22 )
      {
        CParty::DistributeItem(v22, a2, a3, a4, a5 + 332);
        CIOObject::Release(v22, a2, a3, a4);
      }
      else
      {
        if ( *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) >= 665 && *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) <= 668
          || *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) >= 802 && *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) <= 825
          || *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) >= 856 && *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) <= 867
          || *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) == 688 )
        {
          if ( abs(*(_DWORD *)(a5 + 332) - 57367) < 1000 )
          {
            if ( abs(*(_DWORD *)(a5 + 336) - 9077) < 1001 )
            {
              v11 = 1792;
              v12 = 284;
              v13 = (int)sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bsw");
              sub_493440(*(_DWORD *)(a5 + 320), a2, a3, a4, (int)&v11, v13, 32);
              CIOBuffer::Release(v13);
            }
          }
        }
        if ( *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) >= 673 && *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) <= 687
          || *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) >= 826 && *(_DWORD *)(*(_DWORD *)(v18 + 40) + 64) <= 855 )
        {
          if ( abs(*(_DWORD *)(a5 + 332) - 20284) < 1160 )
          {
            if ( abs(*(_DWORD *)(a5 + 336) - 67480) < 1212 )
            {
              v8 = 634;
              v9 = 2109;
              v10 = (int)sub_44FCE0(a2, a3, a4, 68, (unsigned int)"bsw");
              sub_493440(*(_DWORD *)(a5 + 320), a2, a3, a4, (int)&v8, v10, 38);
              CIOBuffer::Release(v10);
            }
          }
        }
      }
      v14 = (int)sub_44FCE0(a2, a3, a4, 59, (unsigned int)"d");
      sub_493440(*(_DWORD *)(a5 + 320), a2, a3, a4, a7, v14, 25);
      CIOBuffer::Release(v14);
    }
  }
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00493CD0) --------------------------------------------------------
void __userpurge sub_493CD0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+4h] [bp-4h]@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 28), a2, a3, a4);
  *(_DWORD *)(v5 + 20) = *(_DWORD *)(v5 + 24);
  switch ( *(_DWORD *)(v5 + 20) )
  {
    case 0:
      break;
    case 1:
      *(_DWORD *)(v5 + 24) = 2;
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v5 + 16), 22, (unsigned int)"bb");
      CIOObject::AddTimer(v5, a2, a3, a4, 100000, 0);
      break;
    case 2:
      *(_DWORD *)(v5 + 24) = 3;
      CNPCScenario::MirrorGState(a2, a3, a4, 1, 2);
      CNPCScenario::ThroneGState(a2, a3, a4, 1, 4);
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v5 + 16), 22, (unsigned int)"bb");
      CIOObject::AddTimer(v5, a2, a3, a4, 140000, 0);
      break;
    case 3:
      *(_DWORD *)(v5 + 24) = 4;
      CNPCScenario::ThroneGState(a2, a3, a4, 1, 8);
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v5 + 16), 22, (unsigned int)"bb");
      CIOObject::AddTimer(v5, a2, a3, a4, 30000, 0);
      break;
    case 4:
      *(_DWORD *)(v5 + 24) = 5;
      CPlayer::WriteInMap(a2, a3, a4, *(_DWORD *)(v5 + 16), 22, (unsigned int)"bb");
      CIOObject::AddTimer(v5, a2, a3, a4, 30000, 0);
      break;
    case 5:
      *(_DWORD *)(v5 + 24) = 0;
      *(_DWORD *)(v5 + 20) = 0;
      CMonsterTowerBoss::Create(a2, a3, a4);
      break;
    default:
      *(_DWORD *)(v5 + 24) = 0;
      *(_DWORD *)(v5 + 20) = 0;
      break;
  }
  CIOCriticalSection::Leave(v5 + 28, a2, a3, a4);
}

//----- (00493E80) --------------------------------------------------------
int __thiscall sub_493E80(void *this, int a2, int a3)
{
  *((_DWORD *)this + 4) = a2;
  *((_DWORD *)this + 6) = a3;
  return (*(int (__stdcall **)(_DWORD))(*(_DWORD *)this + 8))(0);
}

//----- (00493EB0) --------------------------------------------------------
int __usercall sub_493EB0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1
  int v6; // ST04_4@1

  v5 = a1;
  CIOCriticalSection::Enter((struct _RTL_CRITICAL_SECTION *)(a1 + 28), a2, a3, a4);
  v6 = *(_DWORD *)(v5 + 20);
  CIOCriticalSection::Leave(v5 + 28, a2, a3, a4);
  return v6;
}

//----- (00493EE0) --------------------------------------------------------
void *__thiscall sub_493EE0(void *this)
{
  void *v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+6h] [bp-2h]@1
  char v5; // [sp+7h] [bp-1h]@1

  v2 = this;
  v3 = _LocaleUpdate__GetLocaleT(&v5);
  sub_47A720(v2, (int)&v4, v3);
  return v2;
}
// 44B910: using guessed type int __thiscall _LocaleUpdate__GetLocaleT(_DWORD);

//----- (00493F10) --------------------------------------------------------
int __thiscall sub_493F10(int this)
{
  int v2; // ST00_4@1

  v2 = this;
  CIOObject::CIOObject(this);
  *(_DWORD *)v2 = &off_4C0934;
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)(v2 + 28));
  *(_DWORD *)(v2 + 24) = 0;
  *(_DWORD *)(v2 + 20) = 0;
  *(_DWORD *)(v2 + 16) = 0;
  return v2;
}
// 4C0934: using guessed type int (__stdcall *off_4C0934)(int);

//----- (00493F60) --------------------------------------------------------
int __userpurge sub_493F60<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_493F90(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00493F90) --------------------------------------------------------
int __usercall sub_493F90<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4C0934;
  CIOCriticalSection::_CIOCriticalSection(a1 + 28, a2, a3, a4);
  return std__locale__facet___facet(v5);
}
// 423960: using guessed type int __cdecl std__locale__facet___facet(_DWORD);
// 4C0934: using guessed type int (__stdcall *off_4C0934)(int);

//----- (00493FC0) --------------------------------------------------------
int __thiscall sub_493FC0(int this)
{
  return sub_493FE0(this);
}

//----- (00493FE0) --------------------------------------------------------
int __thiscall sub_493FE0(int this)
{
  return sub_494000(this);
}

//----- (00494000) --------------------------------------------------------
int __thiscall sub_494000(int this)
{
  int result; // eax@1
  int v2; // ST0C_4@1
  int v3; // ST08_4@1
  void *v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  char v7; // [sp+4h] [bp-Ch]@1
  char v8; // [sp+8h] [bp-8h]@1
  char v9; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)sub_430C20(this, &v9);
  v4 = sub_40F070(v2, &v8);
  sub_4940B0(v2, &v7, *(_DWORD *)v4, v3);
  v5 = sub_474590(*(_DWORD *)(v2 + 4));
  sub_44CD70(v5);
  v6 = sub_446FF0(*(_DWORD *)(v2 + 4));
  sub_44CD70(v6);
  result = sub_430F90(*(_DWORD *)(v2 + 4));
  sub_44CD70(result);
  sub_4338F0(*(_DWORD *)(v2 + 4), 1);
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  return result;
}

//----- (004940B0) --------------------------------------------------------
void *__thiscall sub_4940B0(int this, void *a2, int a3, char a4)
{
  void *v4; // eax@1
  void *v5; // eax@2
  void *result; // eax@3
  int v7; // eax@5
  int v8; // [sp+0h] [bp-14h]@1
  char v9; // [sp+4h] [bp-10h]@5
  char v10; // [sp+8h] [bp-Ch]@5
  char v11; // [sp+Ch] [bp-8h]@2
  char v12; // [sp+10h] [bp-4h]@1

  v8 = this;
  v4 = sub_40F070(this, &v12);
  if ( (unsigned __int8)unknown_libname_8(v4) && (v5 = sub_430C20(v8, &v11), (unsigned __int8)unknown_libname_8(v5)) )
  {
    sub_494150(v8);
    sub_40F070(v8, a2);
    result = a2;
  }
  else
  {
    while ( (unsigned __int8)sub_47D070(&a4) )
    {
      v7 = sub_446090(&a3, (int)&v10, 0);
      sub_44AF50((void *)v8, (int)&v9, *(_DWORD *)v7);
    }
    *(_DWORD *)a2 = a3;
    result = a2;
  }
  return result;
}
// 431370: using guessed type _DWORD __stdcall unknown_libname_8(_DWORD);
// 47D070: using guessed type _DWORD __stdcall sub_47D070(_DWORD);

//----- (00494150) --------------------------------------------------------
int __thiscall sub_494150(int this)
{
  int result; // eax@1
  int v2; // ST04_4@1
  int v3; // eax@1

  v2 = this;
  v3 = sub_478AB0(this);
  sub_4941B0(*(_DWORD *)v3);
  *(_DWORD *)sub_478AB0(v2) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)sub_418790(v2) = *(_DWORD *)(v2 + 4);
  result = CServer::SendAlive(v2);
  *(_DWORD *)result = *(_DWORD *)(v2 + 4);
  return result;
}
// 4941B0: using guessed type _DWORD __stdcall sub_4941B0(_DWORD);

//----- (004941B0) --------------------------------------------------------
int __stdcall sub_4941B0(int a1)
{
  int result; // eax@2
  int v2; // eax@3
  int i; // [sp+4h] [bp-4h]@1

  for ( i = a1; ; a1 = i )
  {
    result = *(_BYTE *)sub_431110(i);
    if ( result )
      break;
    v2 = sub_430F90(i);
    sub_4941B0(*(_DWORD *)v2);
    i = *(_DWORD *)sub_474590(i);
    sub_44CD70(a1);
    sub_4338F0(a1, 1);
  }
  return result;
}
// 4941B0: using guessed type _DWORD __stdcall sub_4941B0(_DWORD);

//----- (00494230) --------------------------------------------------------
signed int __stdcall sub_494230(int *a1)
{
  signed int result; // eax@2
  char *v2; // [sp+8h] [bp+8h]@8

  if ( *(_BYTE *)a1 )
  {
    do
    {
      if ( (signed int)*(_BYTE *)a1 >= 128 )
      {
        v2 = (char *)a1 + 1;
        if ( (signed int)(unsigned __int8)*v2 < 128 )
          return 0;
        a1 = (int *)(v2 + 1);
      }
      else
      {
        if ( (signed int)*(_BYTE *)a1 <= 32 || strchr("',\"", *(_BYTE *)a1) )
          return 0;
        a1 = (int *)((char *)a1 + 1);
      }
    }
    while ( *(_BYTE *)a1 );
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004942C0) --------------------------------------------------------
int __userpurge sub_4942C0<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v7; // ST0C_4@1

  v7 = a1;
  CIOSocket::CIOSocket(a1, a2, a3, a4, a5);
  *(_DWORD *)v7 = &off_4C0950;
  *(_DWORD *)(v7 + 108) = 0;
  *(_DWORD *)(v7 + 280) = InterlockedIncrement(&dword_4E2ED8);
  *(_DWORD *)(v7 + 124) = 0;
  *(_DWORD *)(v7 + 128) = 0;
  *(_DWORD *)(v7 + 132) = 0;
  *(_DWORD *)(v7 + 140) = *(_DWORD *)(a6 + 4);
  *(_DWORD *)(v7 + 136) = *(_WORD *)(a6 + 2);
  *(_DWORD *)(v7 + 120) = 0;
  *(_DWORD *)(v7 + 144) = 0;
  *(_DWORD *)(v7 + 152) = 0;
  *(_DWORD *)(v7 + 172) = 0;
  *(_DWORD *)(v7 + 160) = 0;
  *(_DWORD *)(v7 + 164) = 0;
  *(_DWORD *)(v7 + 168) = 0;
  memset((void *)(v7 + 176), 0, 0xBu);
  memset((void *)(v7 + 187), 0, 0x48u);
  *(_DWORD *)(v7 + 260) = 0;
  *(_DWORD *)(v7 + 268) = 1;
  *(_DWORD *)(v7 + 272) = 0;
  *(_DWORD *)(v7 + 264) = GetTickCount();
  return v7;
}
// 4C0950: using guessed type int (__stdcall *off_4C0950)(int);

//----- (00494400) --------------------------------------------------------
int __userpurge sub_494400<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_494430(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (00494430) --------------------------------------------------------
int __usercall sub_494430<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  *(_DWORD *)a1 = &off_4C0950;
  return CIOSocket::_CIOSocket(a1, a2, a3, a4);
}
// 4C0950: using guessed type int (__stdcall *off_4C0950)(int);

//----- (00494450) --------------------------------------------------------
void __usercall sub_494450(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST0C_4@1
  int v5; // ST08_4@1
  char *v6; // eax@1
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  v4 = a1;
  v5 = *(_DWORD *)(a1 + 136);
  v6 = inet_ntoa(*(struct in_addr *)(a1 + 140));
  sub_432860("new connection in_addr(%s) port(%d) socket(%p)", v6, v5, v4);
  sub_47E620(a2, a3, a4, v7);
  CIOSocket::OnCreate(v7, a2, a3, a4);
  if ( dword_4E118C < sub_47E700() )
  {
    if ( *(_DWORD *)(v7 + 140) != inet_addr("211.108.45.218") )
    {
      sub_4948C0(a2, a3, a4, v7, 45, (unsigned int)"b");
      sub_495B20(v7, a2, a3, a4, 6);
      CIOSocket::GracefulClose(v7, a2, a3, a4);
    }
  }
}
// 4E118C: using guessed type int dword_4E118C;

//----- (004944F0) --------------------------------------------------------
void __usercall sub_4944F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST14_4@2
  int v5; // ST10_4@2
  char *v6; // eax@2
  int v7; // ST14_4@8
  char *v8; // eax@8
  char v9; // ST1B_1@13
  int v10; // [sp+4h] [bp-1Ch]@1
  signed int v11; // [sp+8h] [bp-18h]@16
  int v12; // [sp+10h] [bp-10h]@6
  signed int v13; // [sp+14h] [bp-Ch]@6
  int i; // [sp+18h] [bp-8h]@3
  size_t v15; // [sp+1Ch] [bp-4h]@3

  v10 = a1;
  if ( *(_DWORD *)(a1 + 104) <= 65535 )
  {
    v15 = *(_DWORD *)(*(_DWORD *)(a1 + 92) + 8000);
    for ( i = *(_DWORD *)(a1 + 92); ; i += v13 )
    {
      if ( v15 < 3 )
      {
        CIOSocket::Read(v10, a2, a3, a4, v15);
        return;
      }
      v12 = *(_BYTE *)(i + 2);
      v13 = *(_WORD *)i;
      if ( v15 < v13 )
        break;
      if ( v13 < 3 )
      {
        sub_4328C0("invalid buffer size. (type:%d, size:%d, bit:%X)", v12, v13, *(_DWORD *)(v10 + 108));
        CIOSocket::Close(v10, a2, a3, a4);
        return;
      }
      v9 = *(_DWORD *)(v10 + 128)++ & 0x3F;
      sub_496B90(a2, a3, a4, v9, i + 2, v13 - 2);
      if ( *(_WORD *)dword_4E1174 & 0x4000 )
      {
        if ( *(_DWORD *)(v10 + 132) )
        {
          if ( v13 - 3 > 0 )
          {
            v11 = sub_497DA8((void *)(i + 3), (void *)(v13 - 3), (int)&unk_4E158E, (void *)(i + 3), v13 - 3);
            if ( v11 )
            {
              sub_4328C0("_HsCrypt_GetDecMsg() is Failed.  ErrorType(%d)", v11);
              sub_4948C0(a2, a3, a4, v10, 45, (unsigned int)"b");
              CIOSocket::Close(v10, a2, a3, a4);
              return;
            }
          }
        }
      }
      sub_494930(v10, a2, a3, a4, i);
      v15 -= v13;
    }
    if ( v13 <= 8000 )
    {
      CIOSocket::Read(v10, a2, a3, a4, v15);
    }
    else
    {
      v7 = CSocket::Id(v10);
      v8 = inet_ntoa(*(struct in_addr *)(v10 + 140));
      sub_432890(
        "exceed buffer size. (type %d) (size %d) (bit %X) (addr %s) (SID %x) ",
        v12,
        v13,
        *(_DWORD *)(v10 + 108),
        v8,
        v7);
      CIOSocket::Close(v10, a2, a3, a4);
    }
  }
  else
  {
    v4 = CSocket::Id(a1);
    v5 = *(_DWORD *)(v10 + 104);
    v6 = inet_ntoa(*(struct in_addr *)(v10 + 140));
    sub_432890("close pending socket (addr %s) (bytes %d) (id %x)", v6, v5, v4);
    CIOSocket::Close(v10, a2, a3, a4);
  }
}
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);

//----- (00494700) --------------------------------------------------------
void __usercall sub_494700(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = a1;
  sub_47E6B0(a2, a3, a4, a1);
  sub_495B20(v4, a2, a3, a4, 0);
  v5 = *(_DWORD *)(v4 + 120);
  if ( v5 )
  {
    CSocket::Lock(v4, a2, a3, a4);
    *(_DWORD *)(v4 + 120) = 0;
    CSocket::Unlock(v4, a2, a3, a4);
    sub_4239C0(v5, a2, a3, a4, v5 + 440);
  }
}

//----- (00494760) --------------------------------------------------------
int __usercall sub_494760<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST14_4@1
  char optval[2]; // [sp+4h] [bp-8h]@1
  __int16 v7; // [sp+6h] [bp-6h]@1
  SOCKET s; // [sp+8h] [bp-4h]@1

  v5 = a1;
  CSocket::Lock(a1, a2, a3, a4);
  s = InterlockedExchange((volatile LONG *)(v5 + 16), 0);
  CSocket::Unlock(v5, a2, a3, a4);
  strcpy(optval, "\x01");
  v7 = 0;
  setsockopt(s, 65535, 128, optval, 4);
  return closesocket(s);
}

//----- (004947C0) --------------------------------------------------------
void __usercall CSocket::_scalar_deleting_destructor_(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST08_4@1

  v4 = a1;
  CSocket::Lock(a1, a2, a3, a4);
  shutdown(*(_DWORD *)(v4 + 16), 2);
  CSocket::Unlock(v4, a2, a3, a4);
}

//----- (004947F0) --------------------------------------------------------
void __userpurge CSocket::_CSocket(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  signed int v6; // [sp+4h] [bp-4h]@4

  v5 = a1;
  if ( *(_WORD *)dword_4E1174 & 0x4000
    && *(_DWORD *)(a1 + 132)
    && *(_DWORD *)(a5 + 8000) != 3
    && (v6 = sub_497D5D(
               (void *)(a5 + 3),
               (void *)(*(_DWORD *)(a5 + 8000) - 3),
               (int)&unk_4E1368,
               (void *)(a5 + 3),
               *(_DWORD *)(a5 + 8000) - 3)) != 0 )
  {
    sub_4328C0("_HsCrypt_GetEncMsg() is Failed.  ErrorType(%d)", v6);
    sub_4948C0(a2, a3, a4, v5, 45, (unsigned int)"b");
    CIOSocket::Close(v5, a2, a3, a4);
  }
  else
  {
    sub_496B30(a2, a3, a4, *(_BYTE *)(v5 + 124), a5 + 2, *(_DWORD *)(a5 + 8000) - 2);
    CIOSocket::Write(v5, a2, a3, a4, a5);
  }
}

//----- (004948C0) --------------------------------------------------------
void __usercall sub_4948C0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, char a5, char a6)
{
  int v6; // ST08_4@1

  v6 = (int)CIOBuffer::Alloc();
  *(_BYTE *)(v6 + 2) = a5;
  *(_WORD *)v6 = (unsigned int)sub_496CF0(a1, a2, a3, (char *)(v6 + 3), (int)&a6) - v6;
  *(_DWORD *)(v6 + 8000) = *(_WORD *)v6;
  CSocket::_CSocket(a4, a1, a2, a3, v6);
}

//----- (00494930) --------------------------------------------------------
void __userpurge sub_494930(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // ST3C_4@22
  char *v6; // eax@22
  int v7; // ST3C_4@41
  char *v8; // eax@41
  int v9; // ST3C_4@83
  char *v10; // eax@83
  int v11; // ST3C_4@88
  char *v12; // eax@88
  int v13; // ST3C_4@98
  int v14; // ST38_4@98
  int v15; // ST34_4@98
  char *v16; // eax@98
  int v17; // [sp+8h] [bp-178h]@1
  char v18; // [sp+Ch] [bp-174h]@86
  char v19; // [sp+Dh] [bp-173h]@86
  __int16 v20; // [sp+41h] [bp-13Fh]@86
  char v21; // [sp+43h] [bp-13Dh]@86
  int v22; // [sp+44h] [bp-13Ch]@86
  char v23; // [sp+48h] [bp-138h]@81
  int v24; // [sp+49h] [bp-137h]@81
  int v25; // [sp+4Dh] [bp-133h]@81
  int v26; // [sp+51h] [bp-12Fh]@81
  int v27; // [sp+55h] [bp-12Bh]@81
  __int16 v28; // [sp+59h] [bp-127h]@81
  char v29; // [sp+5Bh] [bp-125h]@81
  int v30; // [sp+5Ch] [bp-124h]@81
  int v31; // [sp+64h] [bp-11Ch]@76
  int v32; // [sp+68h] [bp-118h]@76
  int v33; // [sp+70h] [bp-110h]@71
  int *v34; // [sp+74h] [bp-10Ch]@70
  int v35; // [sp+78h] [bp-108h]@63
  int v36; // [sp+84h] [bp-FCh]@58
  int v37; // [sp+8Ch] [bp-F4h]@49
  int *v38; // [sp+90h] [bp-F0h]@47
  char v39; // [sp+94h] [bp-ECh]@39
  int v40; // [sp+95h] [bp-EBh]@39
  int v41; // [sp+99h] [bp-E7h]@39
  int v42; // [sp+9Dh] [bp-E3h]@39
  int v43; // [sp+A1h] [bp-DFh]@39
  __int16 v44; // [sp+A5h] [bp-DBh]@39
  char v45; // [sp+A7h] [bp-D9h]@39
  int v46; // [sp+A8h] [bp-D8h]@39
  int v47; // [sp+ACh] [bp-D4h]@35
  int v48; // [sp+B4h] [bp-CCh]@35
  int v49; // [sp+B8h] [bp-C8h]@27
  int v50; // [sp+BCh] [bp-C4h]@27
  char v51; // [sp+C0h] [bp-C0h]@17
  char v52; // [sp+C1h] [bp-BFh]@17
  __int16 v53; // [sp+15Dh] [bp-23h]@17
  char v54; // [sp+15Fh] [bp-21h]@17
  int v55; // [sp+160h] [bp-20h]@1
  int v56; // [sp+164h] [bp-1Ch]@18
  DWORD v57; // [sp+168h] [bp-18h]@13
  int v58; // [sp+16Ch] [bp-14h]@3
  DWORD v59; // [sp+170h] [bp-10h]@3
  void *v60; // [sp+174h] [bp-Ch]@1
  int v61; // [sp+178h] [bp-8h]@1
  char v62[4]; // [sp+17Ch] [bp-4h]@1

  v55 = dword_4D9830;
  v17 = a1;
  v60 = (void *)(a5 + 3);
  v61 = a5 + *(_WORD *)a5;
  *(_DWORD *)v62 = *(_BYTE *)(a5 + 2);
  if ( *(_DWORD *)v62 >= 11 )
  {
    if ( *(_DWORD *)(a1 + 120) )
    {
      CPlayer::Process(*(_DWORD *)(a1 + 120), a2, a3, a4, *(int *)v62, (char *)v60, v61);
    }
    else
    {
LABEL_96:
      if ( !CSocket::IsSBit(a1, 6) )
      {
        v13 = CSocket::Id(v17);
        v14 = *(_DWORD *)(v17 + 120);
        v15 = *(_DWORD *)(v17 + 136);
        v16 = inet_ntoa(*(struct in_addr *)(v17 + 140));
        sub_432890(
          "Invalid state at CSocket::Process() Type(%d) UID(%d) Bit(%x) Addr(%s) Port(%d) Player(%p) SID(%x)",
          *(_DWORD *)v62,
          *(_DWORD *)(v17 + 152),
          *(_DWORD *)(v17 + 108),
          v16,
          v15,
          v14,
          v13);
      }
    }
  }
  else
  {
    switch ( *(_DWORD *)v62 )
    {
      case 5:
        InterlockedDecrement((volatile LONG *)(a1 + 172));
        sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"d");
        v59 = v58 - GetTickCount() - *(_DWORD *)(v17 + 144);
        if ( (signed int)v59 <= 10000 )
        {
          if ( (signed int)v59 < -10000 )
          {
            if ( (signed int)v59 < -30000 )
              CSocket::Id(v17);
            *(_DWORD *)(v17 + 144) += v59 + 10000;
          }
        }
        else
        {
          if ( (signed int)v59 <= 30000 )
          {
            *(_DWORD *)(v17 + 144) += 1000;
          }
          else
          {
            CSocket::Id(v17);
            sub_4948C0(a2, a3, a4, v17, 45, (unsigned int)"b");
            sub_495B20(v17, a2, a3, a4, 4);
          }
        }
        if ( *(_WORD *)dword_4E1174 & 0x2000 )
        {
          v57 = GetTickCount();
          if ( *(_DWORD *)(v17 + 272) )
          {
            if ( *(_DWORD *)(v17 + 264) - 115000 < v57 )
            {
              sub_4948C0(a2, a3, a4, v17, 45, (unsigned int)"b");
              sub_495B20(v17, a2, a3, a4, 1);
            }
          }
          if ( *(_DWORD *)(v17 + 264) < v57 )
          {
            v51 = 0;
            memset(&v52, 0, 0x9Cu);
            v53 = 0;
            v54 = 0;
            if ( *(_DWORD *)(v17 + 268) )
              v56 = AntiCpSvr_MakeReqMsg(*(_DWORD *)(v17 + 260), &v51, v17 + 187, 7);
            else
              v56 = AntiCpSvr_MakeReqMsg(*(_DWORD *)(v17 + 260), &v51, v17 + 187, 1);
            if ( !v56 || dword_4E1174[0] & 2 )
            {
              sub_4948C0(a2, (DWORD)&v55, a4, v17, 3, (unsigned int)"m");
              *(_DWORD *)(v17 + 264) = v57 + 120000;
              *(_DWORD *)(v17 + 272) = 1;
            }
            else
            {
              v5 = v56;
              v6 = inet_ntoa(*(struct in_addr *)(v17 + 140));
              sub_4328C0(
                "_AntiCpSvr_MakeReqMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                *(_DWORD *)(v17 + 152),
                v6,
                v5);
              sub_4948C0(a2, (DWORD)&v55, a4, v17, 45, (unsigned int)"b");
              sub_495B20(v17, a2, (DWORD)&v55, a4, 1);
            }
          }
        }
        break;
      case 8:
        if ( *(_DWORD *)(a1 + 108) & 0x43 )
          goto LABEL_96;
        sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"d");
        *(_DWORD *)(v17 + 144) = v50 - GetTickCount();
        v49 = sub_406E10(1, 63);
        *(_DWORD *)(v17 + 276) = sub_406E10(100000, 2000000000);
        if ( *(_WORD *)dword_4E1174 & 0x4000 )
        {
          sub_4948C0(a2, a3, a4, v17, 42, (unsigned int)"dbddddbbbmm");
          *(_DWORD *)(v17 + 132) = 1;
        }
        else
        {
          sub_4948C0(a2, a3, a4, v17, 42, (unsigned int)"dbddddbbb");
        }
        *(_DWORD *)(v17 + 128) = v49;
        *(_DWORD *)(v17 + 124) = v49;
        break;
      case 9:
        if ( *(_DWORD *)(a1 + 108) & 0x43 )
          goto LABEL_96;
        if ( *(_BYTE *)v60 )
        {
          v47 = *(_DWORD *)(a1 + 276) % (signed int)uValue + 9052;
          sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"bd");
          if ( v48 >= 9052 && v47 == v48 )
          {
            if ( *(_WORD *)dword_4E1174 & 0x2000 )
            {
              v39 = 0;
              v40 = 0;
              v41 = 0;
              v42 = 0;
              v43 = 0;
              v44 = 0;
              v45 = 0;
              v46 = AntiCpSvr_MakeGuidReqMsg(&v39, v17 + 187);
              if ( !v46 || dword_4E1174[0] & 2 )
              {
                sub_4948C0(a2, a3, a4, v17, 2, (unsigned int)"m");
              }
              else
              {
                v7 = v46;
                v8 = inet_ntoa(*(struct in_addr *)(v17 + 140));
                sub_4328C0(
                  "_AntiCpSvr_MakeGuidReqMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                  *(_DWORD *)(v17 + 152),
                  v8,
                  v7);
                sub_4948C0(a2, a3, a4, v17, 45, (unsigned int)"b");
                sub_495B20(v17, a2, a3, a4, 1);
              }
            }
          }
          else
          {
            sub_4948C0(a2, a3, a4, v17, 45, (unsigned int)"b");
            sub_495B20(v17, a2, a3, a4, 10);
          }
        }
        else
        {
          CIOSocket::Close(a1, a2, a3, a4);
        }
        break;
      case 2:
        if ( *(_DWORD *)(a1 + 108) & 0x43 )
          goto LABEL_96;
        if ( dword_4E1174[0] & 8 )
        {
          sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"ss");
          if ( sub_494230(v38) )
          {
            if ( *(_BYTE *)v37 )
            {
              CAuthSocket::Write(a2, a3, a4, 1, (unsigned int)"dssdw");
              sub_496CD0();
            }
            else
            {
              sub_4948C0(a2, a3, a4, v17, 43, (unsigned int)"b");
            }
          }
          else
          {
            sub_4948C0(a2, a3, a4, v17, 43, (unsigned int)"b");
          }
        }
        else
        {
          sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"ss");
          if ( sub_497B80(v38) )
          {
            CAuthSocket::Write(a2, a3, a4, 1, (unsigned int)"dssdw");
            sub_496CD0();
          }
          else
          {
            sub_4948C0(a2, a3, a4, v17, 43, (unsigned int)"b");
          }
        }
        break;
      case 4:
        if ( (*(_DWORD *)(a1 + 108) & 0x4E) != 2 )
          goto LABEL_96;
        v60 = sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"s");
        if ( sub_4979C0(v36) )
        {
          sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"bbbbbbbb");
          CDBSocket::Write(a2, a3, a4, 34, (unsigned int)"dsdbbbbbbbb");
        }
        else
        {
          sub_4948C0(a2, a3, a4, v17, 67, (unsigned int)"b");
        }
        break;
      case 7:
        if ( (*(_DWORD *)(a1 + 108) & 0x4E) != 2 )
          goto LABEL_96;
        sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"d");
        if ( v35 )
          CDBSocket::Write(a2, a3, a4, 0, (unsigned int)"ddd");
        break;
      case 6:
        if ( (*(_DWORD *)(a1 + 108) & 0x4E) != 2 )
          goto LABEL_96;
        if ( *(_WORD *)dword_4E1174 & 0x100 )
        {
          sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"bss");
          if ( sub_497B80(v34) && sub_4979C0(v33) )
          {
            sub_496CD0();
            CDBSocket::Write(a2, a3, a4, 52, (unsigned int)"dbdss");
          }
          else
          {
            sub_4948C0(a2, a3, a4, v17, 67, (unsigned int)"b");
          }
        }
        break;
      case 0xA:
        if ( (*(_DWORD *)(a1 + 108) & 0x4E) != 2 )
          goto LABEL_96;
        sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"dd");
        sub_495D30(v17, a2, a3, a4, v32, v31);
        break;
      case 0:
        if ( (*(_DWORD *)(a1 + 108) & 0x4E) != 2 )
          goto LABEL_96;
        sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"d");
        CDBSocket::Write(a2, a3, a4, 79, (unsigned int)"ddd");
        break;
      case 1:
        if ( *(_WORD *)dword_4E1174 & 0x2000 )
        {
          v23 = 0;
          v24 = 0;
          v25 = 0;
          v26 = 0;
          v27 = 0;
          v28 = 0;
          v29 = 0;
          sub_4975F0(a2, a3, a4, (char *)v60, v61, (unsigned int)"m");
          v30 = AntiCpSvr_AnalyzeGuidAckMsg(&v23, v17 + 187, v17 + 260);
          if ( v30 )
          {
            if ( !(dword_4E1174[0] & 2) )
            {
              v9 = v30;
              v10 = inet_ntoa(*(struct in_addr *)(v17 + 140));
              sub_4328C0(
                "_AntiCpSvr_AnalyzeGuidAckMsg(...) is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
                *(_DWORD *)(v17 + 152),
                v10,
                v9);
              sub_4948C0(a2, a3, a4, v17, 45, (unsigned int)"b");
              sub_495B20(v17, a2, a3, a4, 1);
            }
          }
        }
        break;
      case 3:
        if ( *(_WORD *)dword_4E1174 & 0x2000 )
        {
          v18 = 0;
          memset(&v19, 0, 0x34u);
          v20 = 0;
          v21 = 0;
          sub_4975F0(a2, (DWORD)&v22, a4, (char *)v60, v61, (unsigned int)"m");
          *(_DWORD *)(v17 + 272) = 0;
          v22 = AntiCpSvr_AnalyzeAckMsg(*(_DWORD *)(v17 + 260), &v18, v17 + 187);
          if ( !v22 || dword_4E1174[0] & 2 )
          {
            if ( *(_DWORD *)(v17 + 268) )
              *(_DWORD *)(v17 + 268) = 0;
          }
          else
          {
            v11 = v22;
            v12 = inet_ntoa(*(struct in_addr *)(v17 + 140));
            sub_4328C0(
              "_AntiCpSvr_AnalyzeAckMsg is failed. UID: (%d) IP(%s) ERROR TYPE (%d)",
              *(_DWORD *)(v17 + 152),
              v12,
              v11);
            sub_4948C0(a2, (DWORD)&v22, a4, v17, 45, (unsigned int)"b");
            sub_495B20(v17, a2, (DWORD)&v22, a4, 1);
          }
        }
        break;
      default:
        goto LABEL_96;
    }
  }
}
// 406E10: using guessed type _DWORD __cdecl sub_406E10(_DWORD, _DWORD);
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);
// 4B4008: using guessed type int __stdcall AntiCpSvr_MakeGuidReqMsg(_DWORD, _DWORD);
// 4B400C: using guessed type int __stdcall AntiCpSvr_MakeReqMsg(_DWORD, _DWORD, _DWORD, _DWORD);
// 4B4018: using guessed type int __stdcall AntiCpSvr_AnalyzeAckMsg(_DWORD, _DWORD, _DWORD);
// 4B401C: using guessed type int __stdcall AntiCpSvr_AnalyzeGuidAckMsg(_DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (00495770) --------------------------------------------------------
void __userpurge sub_495770(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, signed int a5, int a6, int a7, int a8, int a9, const void *a10)
{
  int v10; // eax@5
  int v11; // [sp+4h] [bp-4h]@1

  v11 = a1;
  if ( a5 == 1 )
  {
    CSocket::Lock(a1, a2, a3, a4);
    v10 = CSocket::IsSBit(v11, 6);
    if ( v10 )
    {
      CSocket::Id(v11);
      CAuthSocket::Write(a2, a3, a4, 2, (unsigned int)"dddwbdddb");
    }
    else
    {
      if ( *(_DWORD *)(v11 + 152) )
        sub_422D80(v10, a2, a3, a4);
      *(_DWORD *)(v11 + 152) = a6;
      *(_DWORD *)(v11 + 156) = a7 | (a9 != 0 ? 512 : 256);
      *(_DWORD *)(v11 + 160) = a8;
      time((time_t *)(v11 + 148));
      *(_DWORD *)(v11 + 164) = *(_DWORD *)(v11 + 148);
      memcpy((void *)(v11 + 176), a10, 0xAu);
      CDBSocket::Write(a2, a3, a4, 33, (unsigned int)"dd");
    }
    CSocket::Unlock(v11, a2, a3, a4);
  }
  else
  {
    if ( a5 > 1 && a5 <= 9 )
    {
      sub_4948C0(a2, a3, a4, a1, 43, (unsigned int)"b");
      sub_496CE0();
    }
    else
    {
      sub_4948C0(a2, a3, a4, a1, 43, (unsigned int)"b");
      sub_496CE0();
    }
  }
}
// 458680: using guessed type int __thiscall CSocket::Id(_DWORD);

//----- (004958F0) --------------------------------------------------------
void __userpurge sub_4958F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // [sp+0h] [bp-4h]@1

  v7 = a1;
  sub_496CD0();
  if ( dword_4E35B8 == 1 )
  {
    if ( dword_4E1174[0] & 4 )
      sub_4948C0(a2, a3, a4, v7, 98, (unsigned int)"bd");
  }
  sub_4948C0(a2, a3, a4, v7, 17, (unsigned int)"bdbm");
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00495980) --------------------------------------------------------
void __userpurge sub_495980(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  sub_4948C0(a2, a3, a4, a1, 68, (unsigned int)"bbww");
}

//----- (004959B0) --------------------------------------------------------
void __userpurge sub_4959B0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  sub_4948C0(a2, a3, a4, a1, 68, (unsigned int)"bwwd");
}

//----- (004959E0) --------------------------------------------------------
void __userpurge sub_4959E0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6)
{
  LONG v6; // eax@4
  int v7; // [sp+4h] [bp-Ch]@3
  unsigned __int8 v8; // [sp+Bh] [bp-5h]@3
  int v9; // [sp+Ch] [bp-4h]@2

  if ( a5 == 1 )
  {
    sub_497220(a2, a3, a4, a6, (unsigned int)"db");
    if ( v9 )
    {
      v7 = CItem::CreateItem(dword_4D6AC4[v8], 0, 1, -1);
      if ( v7 )
      {
        v6 = CItem::NewIID();
        (*(void (__thiscall **)(int, int, LONG))(*(_DWORD *)v7 + 116))(v7, v9, v6);
      }
    }
    CDBSocket::Write(a2, a3, a4, 33, (unsigned int)"dd");
  }
  else
  {
    sub_4948C0(a2, a3, a4, a1, 44, (unsigned int)"b");
  }
}
// 4D6AC4: using guessed type int dword_4D6AC4[];

//----- (00495A90) --------------------------------------------------------
void __userpurge sub_495A90(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  if ( a5 == 1 )
    goto LABEL_6;
  if ( a5 == 2 )
  {
    CAuthSocket::Write(a2, a3, a4, 11, (unsigned int)"bddbd");
LABEL_6:
    CDBSocket::Write(a2, a3, a4, 33, (unsigned int)"dd");
    return;
  }
  if ( a5 == 3 )
    sub_4948C0(a2, a3, a4, a1, 67, (unsigned int)"b");
}

//----- (00495B20) --------------------------------------------------------
void __userpurge sub_495B20(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-8h]@1
  int v6; // [sp+4h] [bp-4h]@3

  v5 = a1;
  CSocket::Lock(a1, a2, a3, a4);
  if ( *(_DWORD *)(v5 + 152) )
  {
    time(0);
    CAuthSocket::Write(a2, a3, a4, 2, (unsigned int)"dddwbdddb");
    *(_DWORD *)(v5 + 152) = 0;
  }
  sub_496CD0();
  v6 = *(_DWORD *)(v5 + 120);
  if ( v6 )
  {
    sub_423980(v6, a2, a3, a4, (volatile LONG *)(v6 + 352));
    CSocket::Unlock(v5, a2, a3, a4);
    CBase::Delete((void *)v6);
    sub_4239C0(v6, a2, a3, a4, v6 + 352);
  }
  else
  {
    CSocket::Unlock(v5, a2, a3, a4);
  }
}

//----- (00495C20) --------------------------------------------------------
void __usercall sub_495C20(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v4; // ST10_4@1

  v4 = a1;
  sub_4948C0(a2, a3, a4, a1, 45, (unsigned int)"b");
  sub_495B20(v4, a2, a3, a4, 3);
}

//----- (00495C50) --------------------------------------------------------
void __userpurge sub_495C50(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // [sp+0h] [bp-8Ch]@1
  char v8; // [sp+4h] [bp-88h]@2
  int v9; // [sp+88h] [bp-4h]@1

  v9 = dword_4D9830;
  v7 = a1;
  if ( a5 == 1 )
  {
    sprintf(&v8, "[Account Block] ID(%s), UID(%d)", a7, a6);
    sub_4948C0(a2, a3, a4, v7, 15, (unsigned int)"s");
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00495CC0) --------------------------------------------------------
void __userpurge sub_495CC0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7)
{
  int v7; // [sp+0h] [bp-8Ch]@1
  char v8; // [sp+4h] [bp-88h]@2
  int v9; // [sp+88h] [bp-4h]@1

  v9 = dword_4D9830;
  v7 = a1;
  if ( a5 == 1 )
  {
    sprintf(&v8, "[Account Free] ID(%s), UID(%d)", a7, a6);
    sub_4948C0(a2, a3, a4, v7, 15, (unsigned int)"s");
  }
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00495D30) --------------------------------------------------------
void __userpurge sub_495D30(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  bool v6; // ST28_4@9
  int v7; // [sp+0h] [bp-14h]@2
  int v8; // [sp+4h] [bp-10h]@1
  int v9; // [sp+8h] [bp-Ch]@1
  int v10; // [sp+10h] [bp-4h]@1

  v8 = a1;
  v10 = *(_DWORD *)(a1 + 120);
  CSocket::Lock(a1, a2, a3, a4);
  v9 = (int)sub_401000(0x690u);
  if ( v9 )
    v7 = CPlayer::CPlayer(v9, a2, a3, a4, v8, *(_DWORD *)(v8 + 152), a5);
  else
    v7 = 0;
  *(_DWORD *)(v8 + 120) = v7;
  sub_423980(*(_DWORD *)(v8 + 120), a2, a3, a4, (volatile LONG *)(*(_DWORD *)(v8 + 120) + 440));
  CSocket::Unlock(v8, a2, a3, a4);
  if ( v10 )
  {
    CBase::Delete((void *)v10);
    sub_4239C0(v10, a2, a3, a4, v10 + 440);
  }
  sub_496CD0();
  if ( a6 )
  {
    if ( !CGuild::IsLoad(a2, a3, a4, a6) )
      v6 = CAlliance::IsLoad(a2, a3, a4, a6) == 0;
  }
  CDBSocket::Write(a2, a3, a4, 1, (unsigned int)"ddddb");
}

//----- (00495E50) --------------------------------------------------------
void __userpurge CSocket::OnDelPlayer(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6)
{
  int v6; // [sp+0h] [bp-8h]@1
  int v7; // [sp+4h] [bp-4h]@2

  v6 = a1;
  if ( a5 == 1 )
  {
    CSocket::Lock(a1, a2, a3, a4);
    v7 = *(_DWORD *)(v6 + 120);
    if ( v7 )
    {
      sub_423980(v7, a2, a3, a4, (volatile LONG *)(v7 + 352));
      CSocket::Unlock(v6, a2, a3, a4);
      if ( CPlayer::OnLoadPlayer(v7, a2, a3, a4, a6) )
      {
        sub_496CD0();
        if ( dword_4E1178 & 0x100 )
          CAuthSocket::Write(a2, a3, a4, 15, (unsigned int)"dd");
      }
      else
      {
        sub_496CE0();
        sub_4948C0(a2, a3, a4, v6, 67, (unsigned int)"b");
      }
      sub_4239C0(v7, a2, a3, a4, v7 + 352);
    }
    else
    {
      CSocket::Unlock(v6, a2, a3, a4);
    }
  }
  else
  {
    sub_496CE0();
    sub_4948C0(a2, a3, a4, v6, 67, (unsigned int)"b");
  }
}
// 4E1178: using guessed type int dword_4E1178;

//----- (00495F90) --------------------------------------------------------
void __userpurge sub_495F90(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, int a6, int a7, int a8)
{
  int v8; // [sp+0h] [bp-8h]@1

  v8 = a1;
  if ( a5 == 2 )
  {
    CSocket::Lock(a1, a2, a3, a4);
    if ( CSocket::IsSBit(v8, 6) )
    {
      CSocket::Unlock(v8, a2, a3, a4);
    }
    else
    {
      CSocket::Unlock(v8, a2, a3, a4);
      CAuthSocket::Write(a2, a3, a4, 12, (unsigned int)"dbdss");
    }
  }
  else
  {
    sub_496CE0();
    sub_4948C0(a2, a3, a4, v8, 97, (unsigned int)"b");
  }
}

//----- (00496030) --------------------------------------------------------
void __userpurge sub_496030(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5, char *a6, int a7)
{
  LONG v7; // eax@6
  int v8; // [sp+0h] [bp-18h]@1
  signed int v9; // [sp+4h] [bp-14h]@4
  char *v10; // [sp+8h] [bp-10h]@4
  unsigned __int8 v11; // [sp+12h] [bp-6h]@4
  unsigned __int8 v12; // [sp+13h] [bp-5h]@5
  int v13; // [sp+14h] [bp-4h]@4
  char *v14; // [sp+24h] [bp+Ch]@4

  v8 = a1;
  if ( a5 == 1 )
  {
    CSocket::Lock(a1, a2, a3, a4);
    if ( CSocket::IsSBit(v8, 6) )
    {
      CSocket::Unlock(v8, a2, a3, a4);
    }
    else
    {
      v13 = *(_DWORD *)(v8 + 152);
      CSocket::Unlock(v8, a2, a3, a4);
      v14 = sub_497220(a2, a3, a4, a6, (unsigned int)"b");
      v10 = sub_497220(a2, a3, a4, &v14[v11], (unsigned int)"b");
      v9 = 0;
      while ( v9 < v12 )
      {
        v7 = CItem::NewIID();
        sub_44F9B0(v10, v7);
        ++v9;
        v10 += 26;
      }
      CDBSocket::Write(a2, a3, a4, 54, (unsigned int)"ddm");
    }
  }
  else
  {
    sub_496CE0();
    sub_4948C0(a2, a3, a4, v8, 97, (unsigned int)"b");
  }
}
// 44F9B0: using guessed type _DWORD __cdecl sub_44F9B0(_DWORD, _DWORD);

//----- (00496150) --------------------------------------------------------
void __userpurge sub_496150(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  if ( a5 == 1 )
  {
    sub_4948C0(a2, a3, a4, a1, 45, (unsigned int)"b");
    sub_495B20(v5, a2, a3, a4, 8);
  }
  else
  {
    sub_496CE0();
    sub_4948C0(a2, a3, a4, v5, 97, (unsigned int)"b");
  }
}

//----- (004961B0) --------------------------------------------------------
BOOL __usercall sub_4961B0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  int v4; // eax@1
  int v5; // eax@1
  int v6; // eax@1
  int v7; // eax@1
  LONG v8; // eax@1
  LONG v9; // eax@1

  CSocket::Lock((int)&unk_4E2EDC, a1, a2, a3);
  sub_47E480((int)&unk_4E2EDC);
  sub_47E320((int)&unk_4E2EDC, 0, " Running Thread : %d", dword_4E0FDC);
  v4 = sub_4962E0((int)&unk_4DA7B8);
  sub_47E320((int)&unk_4E2EDC, 0, " Pending DB Output : %d", v4);
  v5 = sub_4962E0((int)&unk_4DA6F0);
  sub_47E320((int)&unk_4E2EDC, 0, " Pending Auth Output : %d", v5);
  sub_47E320((int)&unk_4E2EDC, 0, " ====================");
  sub_47E320((int)&unk_4E2EDC, 0, " Change of Currency : %d", dword_4E2014);
  v6 = sub_47E710();
  sub_47E320((int)&unk_4E2EDC, 0, " Max. Connection : %d", v6);
  v7 = sub_47E700();
  sub_47E320((int)&unk_4E2EDC, 0, " Cur. Connection : %d", v7);
  v8 = CMonster::Size();
  sub_47E320((int)&unk_4E2EDC, 0, " Monster : %d", v8);
  v9 = CNPC::Size();
  sub_47E320((int)&unk_4E2EDC, 0, " NPC : %d", v9);
  CSocket::Unlock((int)&unk_4E2EDC, a1, a2, a3);
  return InvalidateRect(hWnd, 0, 1);
}

//----- (004962E0) --------------------------------------------------------
int __thiscall sub_4962E0(int this)
{
  return *(_DWORD *)(this + 104);
}

//----- (00496300) --------------------------------------------------------
void *__thiscall sub_496300(void *this)
{
  int v2; // [sp+4h] [bp-18h]@18
  signed int l; // [sp+8h] [bp-14h]@16
  signed int k; // [sp+Ch] [bp-10h]@14
  int v5; // [sp+10h] [bp-Ch]@5
  signed int j; // [sp+14h] [bp-8h]@3
  signed int i; // [sp+18h] [bp-4h]@1

  dword_4E35B0 = 6;
  dword_4E35AC = 11;
  dword_4E35A8 = 6;
  for ( i = 0; i < 10; ++i )
  {
    for ( j = 0; j < 21; ++j )
    {
      v5 = *(int *)((char *)&dword_4D8528[21 * i] + 4 * j);
      switch ( v5 )
      {
        case 100:
          *(int *)((char *)&dword_4E3260[21 * i] + 4 * j) = 6;
          break;
        case 50:
          *(int *)((char *)&dword_4E3260[21 * i] + 4 * j) = 5;
          break;
        case 25:
          *(int *)((char *)&dword_4E3260[21 * i] + 4 * j) = 4;
          break;
        default:
          *(int *)((char *)&dword_4E3260[21 * i] + 4 * j) = 3;
          break;
      }
    }
  }
  for ( k = 0; k < 10; ++k )
  {
    for ( l = 0; l < 21; ++l )
    {
      v2 = *(int *)((char *)&dword_4D8870[21 * k] + 4 * l);
      switch ( v2 )
      {
        case 100:
          *(int *)((char *)&dword_4E2F18[21 * k] + 4 * l) = 0;
          break;
        case 50:
          *(int *)((char *)&dword_4E2F18[21 * k] + 4 * l) = 1;
          break;
        case 25:
          *(int *)((char *)&dword_4E2F18[21 * k] + 4 * l) = 2;
          break;
        default:
          *(int *)((char *)&dword_4E2F18[21 * k] + 4 * l) = 3;
          break;
      }
    }
  }
  return this;
}
// 4D8528: using guessed type int dword_4D8528[];
// 4D8870: using guessed type int dword_4D8870[];
// 4E2F18: using guessed type int dword_4E2F18[];
// 4E3260: using guessed type int dword_4E3260[];
// 4E35A8: using guessed type int dword_4E35A8;
// 4E35AC: using guessed type int dword_4E35AC;
// 4E35B0: using guessed type int dword_4E35B0;

//----- (004964E0) --------------------------------------------------------
void *__thiscall sub_4964E0(void *this)
{
  void *result; // eax@1
  int v2; // ST04_4@3
  int i; // [sp+8h] [bp-4h]@1

  result = this;
  for ( i = *(_DWORD *)this; i; i = v2 )
  {
    v2 = *(_DWORD *)(i + 16);
    *(_DWORD *)(i + 16) = -6;
    result = (void *)CBase::Delete((void *)i);
  }
  return result;
}

//----- (00496520) --------------------------------------------------------
int __userpurge sub_496520<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int result; // eax@3
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  if ( *(_DWORD *)(a5 + 16) != -6 )
    sub_422D80(a5, a2, a3, a4);
  result = *(_DWORD *)v6;
  *(_DWORD *)(a5 + 16) = *(_DWORD *)v6;
  *(_DWORD *)v6 = a5;
  return result;
}

//----- (00496550) --------------------------------------------------------
signed int __thiscall sub_496550(void *this, int a2)
{
  void *i; // [sp+4h] [bp-8h]@1
  int v4; // [sp+8h] [bp-4h]@2

  for ( i = this; ; i = (void *)(v4 + 16) )
  {
    v4 = *(_DWORD *)i;
    if ( *(_DWORD *)i == a2 )
    {
      *(_DWORD *)i = unknown_libname_9(a2, *(_DWORD *)i);
      *(_DWORD *)(a2 + 16) = -6;
      return 1;
    }
    if ( !v4 )
      break;
  }
  return 0;
}
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (004965B0) --------------------------------------------------------
int __userpurge sub_4965B0<eax>(int *a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // eax@4
  int v6; // edx@5
  int *v8; // [sp+0h] [bp-Ch]@1
  int i; // [sp+8h] [bp-4h]@1

  v8 = a1;
  for ( i = *a1; i; i = unknown_libname_9(i, v6) )
  {
    if ( *(_DWORD *)(i + 16) == -6 )
    {
      *v8 = 0;
      sub_422B30("CTile::GetItem %p %p\n", i);
      sub_422D80(v5, a2, a3, a4);
      return 0;
    }
    if ( (*(int (__thiscall **)(int))(*(_DWORD *)i + 68))(i) && a5 == std___Mpunct_wchar_t___do_frac_digits(i) )
      return i;
  }
  return 0;
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 43E420: using guessed type int __fastcall unknown_libname_9(_DWORD, _DWORD);

//----- (00496640) --------------------------------------------------------
int __thiscall sub_496640(int this, int a2, int a3)
{
  int v4; // ST00_4@1

  v4 = this;
  CBase::CBase(this);
  *(_DWORD *)v4 = &off_4C0E08;
  sub_496CD0();
  *(_DWORD *)(v4 + 32) = a2;
  *(_DWORD *)(v4 + 36) = a3;
  return v4;
}
// 4C0E08: using guessed type int (__stdcall *off_4C0E08)(int);

//----- (00496690) --------------------------------------------------------
int __userpurge sub_496690<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, char a5)
{
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  CTables::CTables(a1, a2, a3, a4);
  if ( a5 & 1 )
    sub_401020(v6);
  return v6;
}

//----- (004966C0) --------------------------------------------------------
int __usercall CTables::CTables<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // ST00_4@1

  v5 = a1;
  *(_DWORD *)a1 = &off_4C0E08;
  CIOObject::Release(*(_DWORD *)(a1 + 32), a2, a3, a4);
  CIOObject::Release(*(_DWORD *)(v5 + 36), a2, a3, a4);
  return CBase::_CBase(v5, a2, a3, a4);
}
// 4C0E08: using guessed type int (__stdcall *off_4C0E08)(int);

//----- (00496700) --------------------------------------------------------
void __usercall sub_496700(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, int a4, int a5)
{
  int v5; // [sp+0h] [bp-Ch]@11
  int v6; // [sp+4h] [bp-8h]@10

  sub_460490(a1, a2, a3, a4, a5);
  if ( !CBase::IsDeleted(a4) )
  {
    if ( !CBase::IsDeleted(a5) )
    {
      if ( sub_448870(a4 + 332, a5 + 332) <= 64 )
      {
        if ( *(_DWORD *)(a4 + 1100) )
        {
          CPlayer::Write(a1, a2, a3, a5, 67, (unsigned int)"b");
        }
        else
        {
          if ( *(_DWORD *)(a5 + 1100) )
          {
            CPlayer::Write(a1, a2, a3, a4, 67, (unsigned int)"b");
          }
          else
          {
            CIOObject::AddRef(a4, a1, a2, a3);
            CIOObject::AddRef(a5, a1, a2, a3);
            v6 = (int)sub_401000(0x28u);
            if ( v6 )
              v5 = sub_496640(v6, a4, a5);
            else
              v5 = 0;
            *(_DWORD *)(a5 + 1100) = v5;
            *(_DWORD *)(a4 + 1100) = v5;
            std___Mpunct_wchar_t___do_frac_digits(a5);
            CPlayer::Write(a1, a2, a3, a4, 77, (unsigned int)"bd");
            std___Mpunct_wchar_t___do_frac_digits(a4);
            CPlayer::Write(a1, a2, a3, a5, 77, (unsigned int)"bd");
          }
        }
      }
      else
      {
        CPlayer::Write(a1, a2, a3, a4, 67, (unsigned int)"b");
        CPlayer::Write(a1, a2, a3, a5, 67, (unsigned int)"b");
      }
    }
  }
  sub_44D620(a1, a2, a3, a4, a5);
}
// 407760: using guessed type int __thiscall std___Mpunct_wchar_t___do_frac_digits(_DWORD);
// 40B2F0: using guessed type int __thiscall CBase::IsDeleted(_DWORD);

//----- (00496880) --------------------------------------------------------
int __usercall sub_496880<eax>(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  sub_460490(a2, a3, a4, *(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 36));
  if ( !sub_496CD0() )
  {
    CPlayer::_EndTrade(*(_DWORD *)(v5 + 32), a2, a3, a4, 2);
    CPlayer::_EndTrade(*(_DWORD *)(v5 + 36), a2, a3, a4, 2);
  }
  sub_44D620(a2, a3, a4, *(_DWORD *)(v5 + 32), *(_DWORD *)(v5 + 36));
  return CBase::OnDelete(v5, a2, a3, a4);
}

//----- (004968F0) --------------------------------------------------------
void __userpurge sub_4968F0(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  sub_460490(a2, a3, a4, *(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 36));
  if ( sub_496CD0() )
  {
    sub_44D620(a2, a3, a4, *(_DWORD *)(v5 + 32), *(_DWORD *)(v5 + 36));
  }
  else
  {
    if ( !sub_496CD0() )
    {
      CPlayer::_EndTrade(*(_DWORD *)(v5 + 32), a2, a3, a4, 3);
      CPlayer::_EndTrade(*(_DWORD *)(v5 + 36), a2, a3, a4, 3);
    }
    sub_44D620(a2, a3, a4, *(_DWORD *)(v5 + 32), *(_DWORD *)(v5 + 36));
    CBase::Delete((void *)v5);
  }
}

//----- (00496990) --------------------------------------------------------
void __userpurge sub_496990(int a1<ecx>, DWORD a2<ebx>, DWORD a3<edi>, DWORD a4<esi>, int a5)
{
  int v5; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = a1;
  sub_460490(a2, a3, a4, *(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 36));
  CPlayer::AddEState(a5, 4);
  v5 = CTrade::GetOther(v6, a5);
  CPlayer::Write(a2, a3, a4, v5, 67, (unsigned int)"b");
  if ( CPlayer::IsEState(*(_DWORD *)(v6 + 32), 4) && CPlayer::IsEState(*(_DWORD *)(v6 + 36), 4) )
  {
    if ( sub_448870(*(_DWORD *)(v6 + 32) + 332, *(_DWORD *)(v6 + 36) + 332) <= 64 )
    {
      if ( !sub_496CD0() )
      {
        sub_45FA10(a2, a3, a4, *(_DWORD *)(v6 + 32), *(_DWORD *)(v6 + 36));
        if ( CPlayer::_CheckTrade(*(_DWORD *)(v6 + 32)) && CPlayer::_CheckTrade(*(_DWORD *)(v6 + 36)) )
        {
          CPlayer::_TradeItem(*(_DWORD *)(v6 + 32), a2, a3, a4, *(void **)(v6 + 36));
          CPlayer::_TradeItem(*(_DWORD *)(v6 + 36), a2, a3, a4, *(void **)(v6 + 32));
          CPlayer::_EndTrade(*(_DWORD *)(v6 + 32), a2, a3, a4, 1);
          CPlayer::_EndTrade(*(_DWORD *)(v6 + 36), a2, a3, a4, 1);
        }
        else
        {
          CPlayer::_EndTrade(*(_DWORD *)(v6 + 32), a2, a3, a4, 2);
          CPlayer::_EndTrade(*(_DWORD *)(v6 + 36), a2, a3, a4, 2);
        }
        sub_45FA60(a2, a3, a4, *(_DWORD *)(v6 + 32), *(_DWORD *)(v6 + 36));
      }
    }
    sub_44D620(a2, a3, a4, *(_DWORD *)(v6 + 32), *(_DWORD *)(v6 + 36));
    CBase::Delete((void *)v6);
  }
  else
  {
    sub_44D620(a2, a3, a4, *(_DWORD *)(v6 + 32), *(_DWORD *)(v6 + 36));
  }
}

//----- (00496B30) --------------------------------------------------------
int __userpurge sub_496B30<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5, int a6)
{
  int result; // eax@1
  int v7; // [sp+0h] [bp-4h]@4

  result = a4;
  if ( a4 < 0 || a4 >= 64 )
    result = sub_422D80(a4, a1, a2, a3);
  v7 = a6 + a5;
  while ( a5 != v7 )
  {
    *(_BYTE *)a5 = *(&byte_4C0E50[256 * a4] + *(_BYTE *)a5);
    result = a5++ + 1;
  }
  return result;
}

//----- (00496B90) --------------------------------------------------------
int __userpurge sub_496B90<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char a4, int a5, int a6)
{
  int result; // eax@4
  int v7; // [sp+0h] [bp-4h]@3

  if ( a4 >= 64 )
    sub_422D80(a4, a1, a2, a3);
  v7 = a6 + a5;
  while ( 1 )
  {
    result = a5;
    if ( a5 == v7 )
      break;
    *(_BYTE *)a5 = *(&byte_4C7250[256 * a4] + *(_BYTE *)a5);
    ++a5;
  }
  return result;
}

//----- (00496BE0) --------------------------------------------------------
int __cdecl sub_496BE0()
{
  int result; // eax@1
  unsigned int v1; // eax@1
  signed int i; // [sp+0h] [bp-4h]@1
  signed int j; // [sp+0h] [bp-4h]@4

  v1 = time(0);
  srand(v1);
  result = time(0);
  dword_4E36C8[0] = result;
  for ( i = 1; i < 32; ++i )
  {
    dword_4E36C8[i] = 1103515245 * dword_4E36C4[i] + 12345;
    result = i + 1;
  }
  dword_4E36C0 = 2;
  for ( j = 0; j < 310; ++j )
    result = sub_496C70();
  return result;
}
// 4E36C4: using guessed type int dword_4E36C4[];
// 4E36C8: using guessed type int dword_4E36C8[];

//----- (00496C70) --------------------------------------------------------
unsigned int __cdecl sub_496C70()
{
  return (unsigned int)sub_496C80() >> 1;
}

//----- (00496C80) --------------------------------------------------------
int __cdecl sub_496C80()
{
  LONG v1; // eax@1

  v1 = InterlockedIncrement(&dword_4E36C0);
  dword_4E36C8[v1 & 0x1F] += dword_4E36C8[(v1 - 3) & 0x1F];
  return dword_4E36C8[v1 & 0x1F];
}
// 4E36C8: using guessed type int dword_4E36C8[];

//----- (00496CD0) --------------------------------------------------------
signed int __cdecl sub_496CD0()
{
  signed int result; // eax@2

  __asm { lock bts [ecx], edx }
  if ( _CF )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (00496CE0) --------------------------------------------------------
signed int __cdecl sub_496CE0()
{
  signed int result; // eax@2

  __asm { lock btr [ecx], edx }
  if ( _CF )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (00496CF0) --------------------------------------------------------
char *__userpurge sub_496CF0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, int a5)
{
  int v5; // ecx@9
  const void *v6; // ST18_4@12
  int v7; // ST14_4@12
  int v9; // [sp+4h] [bp-14h]@2
  char *v10; // [sp+10h] [bp-8h]@7
  int v11; // [sp+14h] [bp-4h]@1
  int v12; // [sp+24h] [bp+Ch]@1
  int v13; // [sp+24h] [bp+Ch]@12

  v12 = a5 + 4;
  v11 = *(_DWORD *)(v12 - 4);
  while ( 1 )
  {
    v9 = *(_BYTE *)v11++;
    switch ( v9 )
    {
      case 66:
      case 98:
        v12 += 4;
        *a4++ = *(_BYTE *)(v12 - 4);
        break;
      case 87:
      case 119:
        v12 += 4;
        *(_WORD *)a4 = *(_WORD *)(v12 - 4);
        a4 += 2;
        break;
      case 100:
        v12 += 4;
        *(_DWORD *)a4 = *(_DWORD *)(v12 - 4);
        a4 += 4;
        break;
      case 73:
        v12 += 8;
        *(_DWORD *)a4 = *(_DWORD *)(v12 - 8);
        *((_DWORD *)a4 + 1) = *(_DWORD *)(v12 - 4);
        a4 += 8;
        break;
      case 83:
      case 115:
        v12 += 4;
        v10 = *(char **)(v12 - 4);
        if ( v10 )
        {
          do
          {
            *a4 = *v10;
            v5 = *a4++;
            ++v10;
          }
          while ( v5 );
        }
        else
        {
          *a4++ = 0;
        }
        break;
      case 77:
      case 109:
        v13 = v12 + 4;
        v6 = *(const void **)(v13 - 4);
        v12 = v13 + 4;
        v7 = *(_DWORD *)(v12 - 4);
        memcpy(a4, v6, *(_DWORD *)(v12 - 4));
        a4 += v7;
        break;
      case 0:
        return a4;
      default:
        sub_422D80(v9, a1, a2, a3);
        break;
    }
  }
}

//----- (00496F10) --------------------------------------------------------
char *__usercall sub_496F10<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, char a5)
{
  return sub_496CF0(a1, a2, a3, a4, (int)&a5);
}

//----- (00496F40) --------------------------------------------------------
char *__userpurge sub_496F40<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, int a5)
{
  int v5; // edx@8
  int v6; // ecx@10
  int v7; // ecx@14
  void *v8; // ST20_4@17
  int v9; // ST1C_4@17
  int v10; // ST18_4@18
  int v11; // ST14_4@18
  int v13; // [sp+4h] [bp-1Ch]@2
  int v14; // [sp+18h] [bp-8h]@13
  int v15; // [sp+1Ch] [bp-4h]@1
  int v16; // [sp+2Ch] [bp+Ch]@1
  int v17; // [sp+2Ch] [bp+Ch]@17
  int v18; // [sp+2Ch] [bp+Ch]@18

  v16 = a5 + 4;
  v15 = *(_DWORD *)(v16 - 4);
  while ( 1 )
  {
    v13 = *(_BYTE *)v15++;
    switch ( v13 )
    {
      case 98:
        v16 += 4;
        **(_BYTE **)(v16 - 4) = *a4++;
        break;
      case 66:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = *a4++;
        break;
      case 119:
        v16 += 4;
        **(_WORD **)(v16 - 4) = *(_WORD *)a4;
        a4 += 2;
        break;
      case 87:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = *(_WORD *)a4;
        a4 += 2;
        break;
      case 100:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = *(_DWORD *)a4;
        a4 += 4;
        break;
      case 73:
        v16 += 4;
        v5 = *(_DWORD *)(v16 - 4);
        *(_DWORD *)v5 = *(_DWORD *)a4;
        *(_DWORD *)(v5 + 4) = *((_DWORD *)a4 + 1);
        a4 += 8;
        break;
      case 115:
        v16 += 4;
        **(_DWORD **)(v16 - 4) = a4;
        do
          v6 = *a4++;
        while ( v6 );
        break;
      case 83:
        v16 += 4;
        v14 = *(_DWORD *)(v16 - 4);
        do
        {
          *(_BYTE *)v14 = *a4;
          v7 = *(_BYTE *)v14++;
          ++a4;
        }
        while ( v7 );
        break;
      case 109:
        v17 = v16 + 4;
        v8 = *(void **)(v17 - 4);
        v16 = v17 + 4;
        v9 = *(_DWORD *)(v16 - 4);
        memcpy(v8, a4, *(_DWORD *)(v16 - 4));
        a4 += v9;
        break;
      case 77:
        v18 = v16 + 4;
        v10 = *(_DWORD *)(v18 - 4);
        v16 = v18 + 4;
        v11 = *(_DWORD *)(v16 - 4);
        *(_DWORD *)v10 = a4;
        a4 += v11;
        break;
      case 0:
        return a4;
      default:
        sub_422D80(v13, a1, a2, a3);
        break;
    }
  }
}

//----- (00497220) --------------------------------------------------------
char *__usercall sub_497220<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, char a5)
{
  return sub_496F40(a1, a2, a3, a4, (int)&a5);
}

//----- (00497250) --------------------------------------------------------
char *__userpurge sub_497250<eax>(DWORD ebx0<ebx>, DWORD edi0<edi>, DWORD esi0<esi>, char *a1, unsigned int a2, int a3)
{
  int v6; // edx@19
  int v7; // edx@26
  int v8; // edx@37
  char *v10; // [sp+0h] [bp-34h]@35
  char *v11; // [sp+4h] [bp-30h]@22
  int v12; // [sp+Ch] [bp-28h]@2
  size_t v13; // [sp+10h] [bp-24h]@43
  void *v14; // [sp+14h] [bp-20h]@43
  int v15; // [sp+18h] [bp-1Ch]@30
  int v16; // [sp+1Ch] [bp-18h]@30
  int v17; // [sp+24h] [bp-10h]@21
  int v18; // [sp+28h] [bp-Ch]@21
  int v19; // [sp+30h] [bp-4h]@1
  int v20; // [sp+44h] [bp+10h]@1
  int v21; // [sp+44h] [bp+10h]@21
  int v22; // [sp+44h] [bp+10h]@30
  int v23; // [sp+44h] [bp+10h]@43

  v20 = a3 + 4;
  v19 = *(_DWORD *)(v20 - 4);
  while ( 1 )
  {
LABEL_2:
    v12 = *(_BYTE *)v19++;
    switch ( v12 )
    {
      case 98:
        if ( (unsigned int)a1 < a2 )
        {
          v20 += 4;
          **(_BYTE **)(v20 - 4) = *a1++;
        }
        continue;
      case 66:
        if ( (unsigned int)a1 < a2 )
        {
          v20 += 4;
          **(_DWORD **)(v20 - 4) = *a1++;
        }
        continue;
      case 119:
        if ( (unsigned int)(a1 + 2) <= a2 )
        {
          v20 += 4;
          **(_WORD **)(v20 - 4) = *(_WORD *)a1;
          a1 += 2;
        }
        continue;
      case 87:
        if ( (unsigned int)(a1 + 2) <= a2 )
        {
          v20 += 4;
          **(_DWORD **)(v20 - 4) = *(_WORD *)a1;
          a1 += 2;
        }
        continue;
      case 100:
        if ( (unsigned int)(a1 + 4) <= a2 )
        {
          v20 += 4;
          **(_DWORD **)(v20 - 4) = *(_DWORD *)a1;
          a1 += 4;
        }
        continue;
      case 73:
        if ( (unsigned int)(a1 + 8) <= a2 )
        {
          v20 += 4;
          v6 = *(_DWORD *)(v20 - 4);
          *(_DWORD *)v6 = *(_DWORD *)a1;
          *(_DWORD *)(v6 + 4) = *((_DWORD *)a1 + 1);
          a1 += 8;
        }
        continue;
      case 115:
        v21 = v20 + 4;
        v18 = *(_DWORD *)(v21 - 4);
        v20 = v21 + 4;
        v17 = *(_DWORD *)(v20 - 4);
        *(_DWORD *)v18 = a1;
        if ( (unsigned int)&a1[v17] >= a2 )
          v11 = (char *)a2;
        else
          v11 = &a1[v17];
        while ( a1 != v11 )
        {
          v7 = *a1++;
          if ( !v7 )
            goto LABEL_2;
        }
        *(_DWORD *)v18 = &byte_4B437D;
        continue;
      case 83:
        v22 = v20 + 4;
        v15 = *(_DWORD *)(v22 - 4);
        v20 = v22 + 4;
        v16 = *(_DWORD *)(v20 - 4);
        if ( v16 <= 0 )
          sub_422D80(*(_DWORD *)(v20 - 4), ebx0, edi0, esi0);
        if ( a1 == (char *)a2 )
        {
          *(_BYTE *)v15 = 0;
          continue;
        }
        if ( (unsigned int)&a1[v16] >= a2 )
          v10 = (char *)a2;
        else
          v10 = &a1[v16];
        break;
      case 109:
        v23 = v20 + 4;
        v14 = *(void **)(v23 - 4);
        v20 = v23 + 4;
        v13 = *(_DWORD *)(v20 - 4);
        if ( (unsigned int)&a1[v13] <= a2 )
        {
          memcpy(v14, a1, v13);
          a1 += v13;
        }
        continue;
      case 0:
        return a1;
      default:
        sub_422D80(v12, ebx0, edi0, esi0);
        continue;
    }
    while ( 1 )
    {
      *(_BYTE *)v15 = *a1;
      v8 = *(_BYTE *)v15++;
      ++a1;
      if ( !v8 )
        break;
      if ( a1 == v10 )
      {
        *(_BYTE *)(v15 - 1) = 0;
        goto LABEL_2;
      }
    }
  }
}

//----- (004975F0) --------------------------------------------------------
char *__usercall sub_4975F0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>, char *a4, unsigned int a5, char a6)
{
  return sub_497250(a1, a2, a3, a4, a5, (int)&a6);
}

//----- (00497620) --------------------------------------------------------
int __stdcall sub_497620(int a1, int a2)
{
  int v2; // ecx@1

  do
  {
    *(_BYTE *)a2 = *(_BYTE *)a1;
    v2 = *(_BYTE *)a2++;
    ++a1;
  }
  while ( v2 );
  return a1;
}

//----- (00497660) --------------------------------------------------------
int __stdcall sub_497660(int a1, int a2)
{
  int v2; // ecx@1

  do
  {
    *(_BYTE *)a1 = *(_BYTE *)a2;
    v2 = *(_BYTE *)a1++;
    ++a2;
  }
  while ( v2 );
  return a1;
}

//----- (004976A0) --------------------------------------------------------
void __cdecl sub_4976A0()
{
  int v0; // [sp+0h] [bp-8h]@4
  signed int i; // [sp+4h] [bp-4h]@1

  for ( i = 0; i < 256; ++i )
  {
    if ( IsDBCSLeadByte(i) )
      LOBYTE(v0) = -1;
    else
      v0 = tolower(i) & 0x7F;
    byte_4E35C0[i] = v0;
  }
}

//----- (00497700) --------------------------------------------------------
int __stdcall sub_497700(int a1, int a2)
{
  char v2; // zf@2
  int v3; // ST04_4@3
  int v4; // ST00_4@3
  char v5; // zf@3
  int v7; // [sp+0h] [bp-Ch]@1
  int v8; // [sp+4h] [bp-8h]@1
  int v9; // [sp+4h] [bp-8h]@2

  while ( 1 )
  {
    while ( 1 )
    {
      v8 = *(_BYTE *)a1++;
      v7 = *(_BYTE *)a2++;
      if ( byte_4E35C0[v8] >= 0 )
        break;
      v2 = v8 == v7;
      v9 = v8 - v7;
      if ( v2 )
      {
        v3 = *(_BYTE *)a1++;
        v4 = *(_BYTE *)a2++;
        v5 = v3 == v4;
        v9 = v3 - v4;
        if ( v5 )
          continue;
      }
      return v9;
    }
    if ( byte_4E35C0[v8] != byte_4E35C0[v7] )
      break;
    if ( !v8 )
      return 0;
  }
  return byte_4E35C0[v8] - byte_4E35C0[v7];
}

//----- (004977B0) --------------------------------------------------------
signed int __stdcall sub_4977B0(int a1)
{
  signed int v2; // eax@25
  int v3; // [sp+Ch] [bp+8h]@12
  int v4; // [sp+Ch] [bp+8h]@25

  if ( !*(_BYTE *)a1 )
    return 0;
  if ( dword_4E35B8 )
  {
    if ( dword_4E35B8 == 1 )
    {
      while ( 1 )
      {
        if ( isalnum(*(_BYTE *)a1) || strchr(" \n", *(_BYTE *)a1) )
        {
          ++a1;
        }
        else
        {
          if ( (signed int)*(_BYTE *)a1 < 176 || (signed int)*(_BYTE *)a1 > 247 )
            return 0;
          v2 = *(_BYTE *)a1;
          v4 = a1 + 1;
          if ( v2 == 215 )
          {
            if ( (signed int)*(_BYTE *)v4 < 161 || (signed int)*(_BYTE *)v4 > 249 )
              return 0;
          }
          else
          {
            if ( (signed int)*(_BYTE *)v4 < 161 || (signed int)*(_BYTE *)v4 > 254 )
              return 0;
          }
          a1 = v4 + 1;
        }
        if ( !*(_BYTE *)a1 )
          return 1;
      }
    }
    if ( dword_4E35B8 != 2 )
      return 0;
    if ( !isalnum(*(_BYTE *)a1) && !strchr(" \n", *(_BYTE *)a1) )
      return 0;
  }
  else
  {
    do
    {
      if ( isalnum(*(_BYTE *)a1) || strchr(" \n", *(_BYTE *)a1) )
      {
        ++a1;
      }
      else
      {
        if ( (signed int)*(_BYTE *)a1 < 176 || (signed int)*(_BYTE *)a1 > 200 )
          return 0;
        v3 = a1 + 1;
        if ( (signed int)*(_BYTE *)v3 < 161 || (signed int)*(_BYTE *)v3 > 254 )
          return 0;
        a1 = v3 + 1;
      }
    }
    while ( *(_BYTE *)a1 );
  }
  return 1;
}
// 4E35B8: using guessed type int dword_4E35B8;

//----- (004979C0) --------------------------------------------------------
signed int __stdcall sub_4979C0(int a1)
{
  signed int v2; // edx@23
  int v3; // [sp+Ch] [bp+8h]@11
  int v4; // [sp+Ch] [bp+8h]@23

  if ( !*(_BYTE *)a1 )
    return 0;
  if ( dword_4E35B8 )
  {
    if ( dword_4E35B8 == 1 )
    {
      while ( 1 )
      {
        if ( isalnum(*(_BYTE *)a1) )
        {
          ++a1;
        }
        else
        {
          if ( (signed int)*(_BYTE *)a1 < 176 || (signed int)*(_BYTE *)a1 > 247 )
            return 0;
          v2 = *(_BYTE *)a1;
          v4 = a1 + 1;
          if ( v2 == 215 )
          {
            if ( (signed int)*(_BYTE *)v4 < 161 || (signed int)*(_BYTE *)v4 > 249 )
              return 0;
          }
          else
          {
            if ( (signed int)*(_BYTE *)v4 < 161 || (signed int)*(_BYTE *)v4 > 254 )
              return 0;
          }
          a1 = v4 + 1;
        }
        if ( !*(_BYTE *)a1 )
          return 1;
      }
    }
    if ( dword_4E35B8 != 2 )
      return 0;
    if ( !isalnum(*(_BYTE *)a1) )
      return 0;
  }
  else
  {
    do
    {
      if ( isalnum(*(_BYTE *)a1) )
      {
        ++a1;
      }
      else
      {
        if ( (signed int)*(_BYTE *)a1 < 176 || (signed int)*(_BYTE *)a1 > 200 )
          return 0;
        v3 = a1 + 1;
        if ( (signed int)*(_BYTE *)v3 < 161 || (signed int)*(_BYTE *)v3 > 254 )
          return 0;
        a1 = v3 + 1;
      }
    }
    while ( *(_BYTE *)a1 );
  }
  return 1;
}
// 4979C0: using guessed type _DWORD __stdcall sub_4979C0(_DWORD);
// 4E35B8: using guessed type int dword_4E35B8;

//----- (00497B80) --------------------------------------------------------
signed int __stdcall sub_497B80(int *a1)
{
  signed int result; // eax@2
  char *v2; // [sp+8h] [bp+8h]@4

  if ( *(_BYTE *)a1 )
  {
    do
    {
      if ( byte_4E35C0[*(_BYTE *)a1] >= 0 )
      {
        if ( !isalnum(*(_BYTE *)a1) && !strchr("_<>", *(_BYTE *)a1) )
          return 0;
        a1 = (int *)((char *)a1 + 1);
      }
      else
      {
        v2 = (char *)a1 + 1;
        if ( !*v2 )
          return 0;
        a1 = (int *)(v2 + 1);
      }
    }
    while ( *(_BYTE *)a1 );
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00497C20) --------------------------------------------------------
void *__cdecl sub_497C20(void *a1)
{
  CHAR *i; // [sp+0h] [bp-114h]@1
  CHAR Filename; // [sp+4h] [bp-110h]@1
  int v4; // [sp+110h] [bp-4h]@1

  v4 = dword_4D9830;
  GetModuleFileNameA(0, &Filename, 0x104u);
  for ( i = &Filename; *i; ++i )
  {
    if ( *i == 92 )
      *i = 47;
  }
  sub_40FD10(a1, &Filename);
  return a1;
}
// 4D9830: using guessed type int dword_4D9830;

//----- (00497CB0) --------------------------------------------------------
void *__thiscall sub_497CB0(void *this)
{
  void *v2; // ST04_4@1

  v2 = this;
  sub_4976A0();
  dword_4E3748 = GetACP();
  return v2;
}
// 4E3748: using guessed type int dword_4E3748;

//----- (00497CE0) --------------------------------------------------------
signed int __stdcall sub_497CE0(int a1)
{
  signed int result; // eax@2

  if ( a1 )
  {
    memset((void *)(a1 + 16), 0, 0x20Cu);
    memset((void *)(a1 + 566), 0, 0x20Cu);
    sub_49EFED(a1 + 16, a1, 16);
    sub_49F008(a1 + 566, a1, 16);
    result = 0;
  }
  else
  {
    result = 110594;
  }
  return result;
}

//----- (00497D5D) --------------------------------------------------------
signed int __stdcall sub_497D5D(void *a1, void *a2, int a3, void *a4, int a5)
{
  signed int result; // eax@6

  if ( a1 && a2 && a3 && a4 && a5 )
  {
    sub_49F030(a3, a4, a1, a2, (int)&unk_4CD658);
    result = 0;
  }
  else
  {
    result = 110595;
  }
  return result;
}

//----- (00497DA8) --------------------------------------------------------
signed int __stdcall sub_497DA8(void *a1, void *a2, int a3, void *a4, int a5)
{
  signed int result; // eax@6

  if ( a1 && a2 && a3 && a4 && a5 )
  {
    sub_49F10F(a3, a4, a1, a2, (int)&unk_4CD658);
    result = 0;
  }
  else
  {
    result = 110596;
  }
  return result;
}

//----- (00497DF3) --------------------------------------------------------
int __stdcall sub_497DF3(FILE *a1, signed int a2)
{
  int v3; // [sp+0h] [bp-4h]@2

  if ( a2 )
    v3 = a2 / 16;
  else
    v3 = 0;
  return fseek(a1, 16 * v3, 0);
}

//----- (004983BD) --------------------------------------------------------
signed int __userpurge sub_4983BD<eax>(int a1<eax>, FILE *a2, void *a3, size_t a4, int a5, int a6)
{
  void *v6; // esp@1
  signed int result; // eax@7
  char v8; // [sp-Ch] [bp-2038h]@1
  int v9; // [sp+0h] [bp-202Ch]@11
  int v10; // [sp+4h] [bp-2028h]@9
  int v11; // [sp+8h] [bp-2024h]@7
  int v12; // [sp+Ch] [bp-2020h]@1
  size_t v13; // [sp+10h] [bp-201Ch]@1
  char v14; // [sp+14h] [bp-2018h]@1
  char v15; // [sp+15h] [bp-2017h]@1
  __int16 v16; // [sp+1011h] [bp-101Bh]@1
  char v17; // [sp+1013h] [bp-1019h]@1
  char v18; // [sp+1014h] [bp-1018h]@1
  char v19; // [sp+1015h] [bp-1017h]@1
  __int16 v20; // [sp+2011h] [bp-1Bh]@1
  char v21; // [sp+2013h] [bp-19h]@1
  char *v22; // [sp+2014h] [bp-18h]@1
  int v23; // [sp+201Ch] [bp-10h]@1
  int (__cdecl *v24)(int, PVOID, int); // [sp+2020h] [bp-Ch]@1
  _UNKNOWN *v25; // [sp+2024h] [bp-8h]@1
  int v26; // [sp+2028h] [bp-4h]@1

  v25 = &unk_4CD678;
  v24 = _except_handler3;
  v23 = a1;
  v6 = alloca(8212);
  v22 = &v8;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  memset(&v15, 0, 0xFFCu);
  v16 = 0;
  v17 = 0;
  v18 = 0;
  memset(&v19, 0, 0xFFCu);
  v20 = 0;
  v21 = 0;
  v26 = 0;
  if ( a2 && a3 && a4 && a4 <= 0x1000 && a5 && a6 )
  {
    v13 = sub_4A17A2(&v14, 1u, a4, a2);
    if ( v13 )
    {
      v12 = sub_497D5D(&v14, (void *)v13, a6, &v18, 4096);
      if ( v12 )
      {
        v9 = 110626;
        v26 = -1;
        result = 110626;
      }
      else
      {
        memcpy(a3, &v18, v13);
        *(_DWORD *)a5 = v13;
        result = 0;
      }
    }
    else
    {
      v10 = 110625;
      v26 = -1;
      result = 110625;
    }
  }
  else
  {
    v11 = 110624;
    v26 = -1;
    result = 110624;
  }
  return result;
}

//----- (004988C1) --------------------------------------------------------
int __usercall sub_4988C1<eax>(int a1<ebp>)
{
  int result; // eax@2

  if ( *(_DWORD *)(a1 - 5512) )
  {
    result = fclose(*(FILE **)(a1 - 5512));
    *(_DWORD *)(a1 - 5512) = 0;
  }
  if ( *(_DWORD *)(a1 - 5516) )
  {
    result = fclose(*(FILE **)(a1 - 5516));
    *(_DWORD *)(a1 - 5516) = 0;
  }
  return result;
}

//----- (00498920) --------------------------------------------------------
int __cdecl sub_498920(int a1)
{
  int result; // eax@3
  unsigned int i; // [sp+4h] [bp-4h]@1

  for ( i = 4; i < 4 * *(_DWORD *)(a1 + 516); ++i )
  {
    *(_DWORD *)(a1 + 4 * i + 256) = dword_4D2308[*(_BYTE *)(a1 + 4 * i + 256)] ^ dword_4D1F08[(unsigned __int8)(*(_WORD *)(a1 + 4 * i + 256) >> 8)] ^ dword_4D1B08[(*(_DWORD *)(a1 + 4 * i + 256) >> 16) & 0xFF] ^ dword_4D1708[(unsigned __int16)(*(_DWORD *)(a1 + 4 * i + 256) >> 16) >> 16];
    result = i + 1;
  }
  return result;
}
// 4D1708: using guessed type int dword_4D1708[];
// 4D1B08: using guessed type int dword_4D1B08[];
// 4D1F08: using guessed type int dword_4D1F08[];
// 4D2308: using guessed type int dword_4D2308[];

//----- (004989CB) --------------------------------------------------------
__int16 __cdecl sub_4989CB(int a1, int a2, char a3, int a4)
{
  int v4; // eax@2
  int v5; // ST1C_4@5
  int v6; // ST20_4@5
  int v7; // ST24_4@5
  int v8; // ST28_4@5
  int v9; // ST1C_4@5
  int v10; // ST20_4@5
  int v11; // ST24_4@5
  int v12; // ST28_4@5
  int v13; // ST1C_4@5
  int v14; // ST20_4@5
  int v15; // ST24_4@5
  int v16; // ST28_4@5
  int v17; // ST1C_4@5
  int v18; // ST20_4@5
  int v19; // ST24_4@5
  int v20; // ST28_4@5
  int v21; // ST1C_4@5
  int v22; // ST20_4@5
  int v23; // ST24_4@5
  int v24; // ST28_4@5
  int v25; // ST1C_4@5
  int v26; // ST20_4@5
  int v27; // ST24_4@5
  int v28; // ST28_4@5
  int v29; // ST1C_4@5
  int v30; // ST20_4@5
  int v31; // ST24_4@5
  int v32; // ST28_4@5
  int v33; // ST1C_4@5
  int v34; // ST20_4@5
  int v35; // ST24_4@5
  int v36; // ST28_4@5
  int v37; // ST1C_4@5
  int v38; // ST20_4@5
  int v39; // ST24_4@5
  int v40; // ST28_4@5
  int v41; // ST1C_4@5
  int v42; // ST20_4@5
  int v43; // ST24_4@5
  int v44; // ST2C_4@6
  unsigned int v45; // ST30_4@6
  int v46; // ST1C_4@6
  int v47; // ST20_4@6
  int v48; // ST24_4@6
  int v49; // ST28_4@6
  int v50; // ST2C_4@6
  int v51; // ST30_4@6
  int v52; // ST1C_4@6
  int v53; // ST20_4@6
  int v54; // ST24_4@6
  int v55; // ST28_4@6
  int v56; // ST2C_4@6
  int v57; // ST30_4@6
  int v58; // ST1C_4@6
  int v59; // ST20_4@6
  int v60; // ST24_4@6
  int v61; // ST28_4@6
  int v62; // ST2C_4@6
  int v63; // ST30_4@6
  int v64; // ST1C_4@6
  int v65; // ST20_4@6
  int v66; // ST24_4@6
  int v67; // ST28_4@6
  int v68; // ST2C_4@6
  int v69; // ST30_4@6
  int v70; // ST1C_4@6
  int v71; // ST20_4@6
  int v72; // ST24_4@6
  int v73; // ST28_4@6
  int v74; // ST2C_4@6
  int v75; // ST30_4@6
  int v76; // ST1C_4@6
  int v77; // ST20_4@6
  int v78; // ST24_4@6
  int v79; // ST28_4@6
  int v80; // ST2C_4@6
  int v81; // ST30_4@6
  int v82; // ST1C_4@6
  int v83; // ST20_4@6
  int v84; // ST24_4@6
  int v85; // ST28_4@6
  int v86; // ST2C_4@6
  int v87; // ST30_4@6
  int v88; // ST1C_4@6
  int v89; // ST20_4@6
  int v90; // ST24_4@6
  int v91; // ST2C_4@7
  int v92; // ST30_4@7
  int v93; // ST34_4@7
  unsigned int v94; // ST38_4@7
  int v95; // ST1C_4@7
  int v96; // ST20_4@7
  int v97; // ST24_4@7
  int v98; // ST28_4@7
  int v99; // ST2C_4@7
  int v100; // ST30_4@7
  int v101; // ST34_4@7
  int v102; // ST38_4@7
  int v103; // ST1C_4@7
  int v104; // ST20_4@7
  int v105; // ST24_4@7
  int v106; // ST28_4@7
  int v107; // ST2C_4@7
  int v108; // ST30_4@7
  int v109; // ST34_4@7
  int v110; // ST38_4@7
  int v111; // ST1C_4@7
  int v112; // ST20_4@7
  int v113; // ST24_4@7
  int v114; // ST28_4@7
  int v115; // ST2C_4@7
  int v116; // ST30_4@7
  int v117; // ST34_4@7
  int v118; // ST38_4@7
  int v119; // ST1C_4@7
  int v120; // ST20_4@7
  int v121; // ST24_4@7
  int v122; // ST28_4@7
  int v123; // ST2C_4@7
  int v124; // ST30_4@7
  int v125; // ST34_4@7
  int v126; // ST38_4@7
  int v127; // ST1C_4@7
  int v128; // ST20_4@7
  int v129; // ST24_4@7
  int v130; // ST28_4@7
  int v131; // ST2C_4@7
  int v132; // ST30_4@7
  int v133; // ST34_4@7
  int v134; // ST38_4@7
  int v135; // ST1C_4@7
  int v136; // ST20_4@7
  int v137; // ST24_4@7
  int v138; // ST28_4@7
  int v139; // ST2C_4@7
  int v140; // ST30_4@7
  int v141; // ST34_4@7
  int v142; // ST38_4@7
  int v143; // ST1C_4@7
  int v144; // ST20_4@7
  int v145; // ST24_4@7
  int v146; // ST2C_4@12
  int v147; // ST1C_4@12
  int v148; // ST2C_4@12
  int v149; // ST2C_4@12
  int v150; // ST2C_4@12
  int v151; // ST2C_4@12
  int v152; // ST2C_4@12
  int v153; // ST20_4@12
  int v154; // ST2C_4@12
  int v155; // ST2C_4@12
  int v156; // ST2C_4@12
  int v157; // ST2C_4@12
  int v158; // ST24_4@12
  int v159; // ST2C_4@12
  int v160; // ST2C_4@12
  int v161; // ST2C_4@12
  int v162; // ST2C_4@12
  int v163; // ST28_4@12
  int v164; // ST2C_4@12
  int v165; // ST2C_4@12
  int v166; // ST2C_4@12
  int v167; // ST2C_4@12
  int v168; // ST1C_4@12
  int v169; // ST2C_4@12
  int v170; // ST2C_4@12
  int v171; // ST2C_4@12
  int v172; // ST2C_4@12
  int v173; // ST20_4@12
  int v174; // ST2C_4@12
  int v175; // ST2C_4@12
  int v176; // ST2C_4@12
  int v177; // ST2C_4@12
  int v178; // ST24_4@12
  int v179; // ST2C_4@12
  int v180; // ST2C_4@12
  int v181; // ST2C_4@12
  int v182; // ST2C_4@12
  int v183; // ST28_4@12
  int v184; // ST2C_4@12
  int v185; // ST2C_4@12
  int v186; // ST2C_4@12
  int v187; // ST2C_4@12
  int v188; // ST1C_4@12
  int v189; // ST2C_4@12
  int v190; // ST2C_4@12
  int v191; // ST2C_4@12
  int v192; // ST20_4@12
  int v193; // ST2C_4@13
  unsigned int v194; // ST30_4@13
  int v195; // ST1C_4@13
  int v196; // ST20_4@13
  int v197; // ST24_4@13
  int v198; // ST28_4@13
  int v199; // ST2C_4@13
  int v200; // ST30_4@13
  int v201; // ST34_4@13
  int v202; // ST1C_4@13
  int v203; // ST34_4@13
  int v204; // ST20_4@13
  int v205; // ST34_4@13
  int v206; // ST24_4@13
  int v207; // ST34_4@13
  int v208; // ST28_4@13
  int v209; // ST34_4@13
  int v210; // ST2C_4@13
  int v211; // ST34_4@13
  int v212; // ST30_4@13
  int v213; // ST34_4@13
  int v214; // ST1C_4@13
  int v215; // ST34_4@13
  int v216; // ST20_4@13
  int v217; // ST34_4@13
  int v218; // ST24_4@13
  int v219; // ST34_4@13
  int v220; // ST28_4@13
  int v221; // ST34_4@13
  int v222; // ST2C_4@13
  int v223; // ST34_4@13
  int v224; // ST30_4@13
  int v225; // ST34_4@13
  int v226; // ST1C_4@13
  int v227; // ST34_4@13
  int v228; // ST20_4@13
  int v229; // ST34_4@13
  int v230; // ST24_4@13
  int v231; // ST34_4@13
  int v232; // ST28_4@13
  int v233; // ST34_4@13
  int v234; // ST2C_4@13
  int v235; // ST34_4@13
  int v236; // ST30_4@13
  int v237; // ST34_4@13
  int v238; // ST1C_4@13
  int v239; // ST34_4@13
  int v240; // ST20_4@13
  int v241; // ST34_4@13
  int v242; // ST24_4@13
  int v243; // ST34_4@13
  int v244; // ST28_4@13
  int v245; // ST34_4@13
  int v246; // ST2C_4@13
  int v247; // ST34_4@13
  int v248; // ST30_4@13
  int v249; // ST34_4@13
  int v250; // ST1C_4@13
  int v251; // ST34_4@13
  int v252; // ST20_4@13
  int v253; // ST34_4@13
  int v254; // ST24_4@13
  int v255; // ST34_4@13
  int v256; // ST28_4@13
  int v257; // ST34_4@13
  int v258; // ST2C_4@13
  int v259; // ST34_4@13
  int v260; // ST30_4@13
  int v261; // ST34_4@13
  int v262; // ST1C_4@13
  int v263; // ST34_4@13
  int v264; // ST20_4@13
  int v265; // ST34_4@13
  int v266; // ST24_4@13
  int v267; // ST34_4@13
  int v268; // ST28_4@13
  int v269; // ST34_4@13
  int v270; // ST34_4@13
  int v271; // ST1C_4@13
  int v272; // ST20_4@13
  int v273; // ST24_4@13
  int v274; // ST2C_4@14
  int v275; // ST30_4@14
  int v276; // ST34_4@14
  unsigned int v277; // ST38_4@14
  int v278; // ST1C_4@14
  int v279; // ST20_4@14
  int v280; // ST24_4@14
  int v281; // ST28_4@14
  int v282; // ST2C_4@14
  int v283; // ST30_4@14
  int v284; // ST34_4@14
  int v285; // ST38_4@14
  int v286; // ST18_4@14
  int v287; // ST1C_4@14
  int v288; // ST18_4@14
  int v289; // ST20_4@14
  int v290; // ST18_4@14
  int v291; // ST24_4@14
  int v292; // ST18_4@14
  int v293; // ST28_4@14
  int v294; // ST18_4@14
  int v295; // ST2C_4@14
  int v296; // ST18_4@14
  int v297; // ST30_4@14
  int v298; // ST18_4@14
  int v299; // ST34_4@14
  int v300; // ST18_4@14
  int v301; // ST38_4@14
  int v302; // ST14_4@14
  int v303; // ST1C_4@14
  int v304; // ST14_4@14
  int v305; // ST20_4@14
  int v306; // ST14_4@14
  int v307; // ST24_4@14
  int v308; // ST14_4@14
  int v309; // ST28_4@14
  int v310; // ST14_4@14
  int v311; // ST2C_4@14
  int v312; // ST14_4@14
  int v313; // ST30_4@14
  int v314; // ST14_4@14
  int v315; // ST34_4@14
  int v316; // ST14_4@14
  int v317; // ST38_4@14
  int v318; // ST10_4@14
  int v319; // ST1C_4@14
  int v320; // ST10_4@14
  int v321; // ST20_4@14
  int v322; // ST10_4@14
  int v323; // ST24_4@14
  int v324; // ST10_4@14
  int v325; // ST28_4@14
  int v326; // ST10_4@14
  int v327; // ST2C_4@14
  int v328; // ST10_4@14
  int v329; // ST30_4@14
  int v330; // ST10_4@14
  int v331; // ST34_4@14
  int v332; // ST10_4@14
  int v333; // ST38_4@14
  int v334; // ST0C_4@14
  int v335; // ST1C_4@14
  int v336; // ST0C_4@14
  int v337; // ST20_4@14
  int v338; // ST0C_4@14
  int v339; // ST24_4@14
  int v340; // ST0C_4@14
  int v341; // ST28_4@14
  int v342; // ST0C_4@14
  int v343; // ST2C_4@14
  int v344; // ST0C_4@14
  int v345; // ST30_4@14
  int v346; // ST0C_4@14
  int v347; // ST34_4@14
  int v348; // ST0C_4@14
  int v349; // ST38_4@14
  int v350; // ST08_4@14
  int v351; // ST1C_4@14
  int v352; // ST08_4@14
  int v353; // ST20_4@14
  int v354; // ST08_4@14
  int v355; // ST24_4@14
  int v356; // ST08_4@14
  int v357; // ST28_4@14
  int v358; // ST08_4@14
  int v359; // ST2C_4@14
  int v360; // ST08_4@14
  int v361; // ST08_4@14
  int v362; // ST08_4@14
  int v363; // ST38_4@14
  int v364; // ST1C_4@14
  int v365; // ST20_4@14
  int v366; // ST24_4@14
  int v368; // [sp+1Ch] [bp-20h]@4
  int v369; // [sp+1Ch] [bp-20h]@11
  int v370; // [sp+20h] [bp-1Ch]@4
  int v371; // [sp+20h] [bp-1Ch]@11
  int v372; // [sp+24h] [bp-18h]@4
  int v373; // [sp+24h] [bp-18h]@11
  unsigned int v374; // [sp+28h] [bp-14h]@4
  unsigned int v375; // [sp+28h] [bp-14h]@11

  if ( a3 & 3 )
  {
    *(_BYTE *)(a4 + 520) = a3 & 3 | *(_BYTE *)(a4 + 520) & 0xFC;
    if ( *(_BYTE *)(a4 + 520) & 1 )
    {
      v368 = *(_DWORD *)a1;
      *(_DWORD *)a4 = *(_DWORD *)a1;
      v370 = *(_DWORD *)(a1 + 4);
      *(_DWORD *)(a4 + 4) = v370;
      v372 = *(_DWORD *)(a1 + 8);
      *(_DWORD *)(a4 + 8) = v372;
      v374 = *(_DWORD *)(a1 + 12);
      *(_DWORD *)(a4 + 12) = v374;
      switch ( a2 )
      {
        case 16:
          v5 = dword_4CD694 ^ dword_4CF308[v374 >> 24] ^ dword_4CEF08[(unsigned __int8)v374] ^ dword_4CEB08[(unsigned __int16)((_WORD)v374 >> 8)] ^ dword_4CE708[(v374 >> 16) & 0xFF] ^ v368;
          *(_DWORD *)(a4 + 16) = v5;
          v6 = v5 ^ v370;
          *(_DWORD *)(a4 + 20) = v6;
          v7 = v6 ^ v372;
          *(_DWORD *)(a4 + 24) = v7;
          v8 = v7 ^ v374;
          *(_DWORD *)(a4 + 28) = v8;
          v9 = dword_4CD698 ^ dword_4CF308[(unsigned int)v8 >> 24] ^ dword_4CEF08[(unsigned __int8)v8] ^ dword_4CEB08[(unsigned __int16)((_WORD)v8 >> 8)] ^ dword_4CE708[((unsigned int)v8 >> 16) & 0xFF] ^ v5;
          *(_DWORD *)(a4 + 32) = v9;
          v10 = v9 ^ v6;
          *(_DWORD *)(a4 + 36) = v10;
          v11 = v10 ^ v7;
          *(_DWORD *)(a4 + 40) = v11;
          v12 = v11 ^ v8;
          *(_DWORD *)(a4 + 44) = v12;
          v13 = dword_4CD69C ^ dword_4CF308[(unsigned int)v12 >> 24] ^ dword_4CEF08[(unsigned __int8)v12] ^ dword_4CEB08[(unsigned __int16)((_WORD)v12 >> 8)] ^ dword_4CE708[((unsigned int)v12 >> 16) & 0xFF] ^ v9;
          *(_DWORD *)(a4 + 48) = v13;
          v14 = v13 ^ v10;
          *(_DWORD *)(a4 + 52) = v14;
          v15 = v14 ^ v11;
          *(_DWORD *)(a4 + 56) = v15;
          v16 = v15 ^ v12;
          *(_DWORD *)(a4 + 60) = v16;
          v17 = dword_4CD6A0 ^ dword_4CF308[(unsigned int)v16 >> 24] ^ dword_4CEF08[(unsigned __int8)v16] ^ dword_4CEB08[(unsigned __int16)((_WORD)v16 >> 8)] ^ dword_4CE708[((unsigned int)v16 >> 16) & 0xFF] ^ v13;
          *(_DWORD *)(a4 + 64) = v17;
          v18 = v17 ^ v14;
          *(_DWORD *)(a4 + 68) = v18;
          v19 = v18 ^ v15;
          *(_DWORD *)(a4 + 72) = v19;
          v20 = v19 ^ v16;
          *(_DWORD *)(a4 + 76) = v20;
          v21 = dword_4CD6A4 ^ dword_4CF308[(unsigned int)v20 >> 24] ^ dword_4CEF08[(unsigned __int8)v20] ^ dword_4CEB08[(unsigned __int16)((_WORD)v20 >> 8)] ^ dword_4CE708[((unsigned int)v20 >> 16) & 0xFF] ^ v17;
          *(_DWORD *)(a4 + 80) = v21;
          v22 = v21 ^ v18;
          *(_DWORD *)(a4 + 84) = v22;
          v23 = v22 ^ v19;
          *(_DWORD *)(a4 + 88) = v23;
          v24 = v23 ^ v20;
          *(_DWORD *)(a4 + 92) = v24;
          v25 = dword_4CD6A8 ^ dword_4CF308[(unsigned int)v24 >> 24] ^ dword_4CEF08[(unsigned __int8)v24] ^ dword_4CEB08[(unsigned __int16)((_WORD)v24 >> 8)] ^ dword_4CE708[((unsigned int)v24 >> 16) & 0xFF] ^ v21;
          *(_DWORD *)(a4 + 96) = v25;
          v26 = v25 ^ v22;
          *(_DWORD *)(a4 + 100) = v26;
          v27 = v26 ^ v23;
          *(_DWORD *)(a4 + 104) = v27;
          v28 = v27 ^ v24;
          *(_DWORD *)(a4 + 108) = v28;
          v29 = dword_4CD6AC ^ dword_4CF308[(unsigned int)v28 >> 24] ^ dword_4CEF08[(unsigned __int8)v28] ^ dword_4CEB08[(unsigned __int16)((_WORD)v28 >> 8)] ^ dword_4CE708[((unsigned int)v28 >> 16) & 0xFF] ^ v25;
          *(_DWORD *)(a4 + 112) = v29;
          v30 = v29 ^ v26;
          *(_DWORD *)(a4 + 116) = v30;
          v31 = v30 ^ v27;
          *(_DWORD *)(a4 + 120) = v31;
          v32 = v31 ^ v28;
          *(_DWORD *)(a4 + 124) = v32;
          v33 = dword_4CD6B0 ^ dword_4CF308[(unsigned int)v32 >> 24] ^ dword_4CEF08[(unsigned __int8)v32] ^ dword_4CEB08[(unsigned __int16)((_WORD)v32 >> 8)] ^ dword_4CE708[((unsigned int)v32 >> 16) & 0xFF] ^ v29;
          *(_DWORD *)(a4 + 128) = v33;
          v34 = v33 ^ v30;
          *(_DWORD *)(a4 + 132) = v34;
          v35 = v34 ^ v31;
          *(_DWORD *)(a4 + 136) = v35;
          v36 = v35 ^ v32;
          *(_DWORD *)(a4 + 140) = v36;
          v37 = dword_4CD6B4 ^ dword_4CF308[(unsigned int)v36 >> 24] ^ dword_4CEF08[(unsigned __int8)v36] ^ dword_4CEB08[(unsigned __int16)((_WORD)v36 >> 8)] ^ dword_4CE708[((unsigned int)v36 >> 16) & 0xFF] ^ v33;
          *(_DWORD *)(a4 + 144) = v37;
          v38 = v37 ^ v34;
          *(_DWORD *)(a4 + 148) = v38;
          v39 = v38 ^ v35;
          *(_DWORD *)(a4 + 152) = v39;
          v40 = v39 ^ v36;
          *(_DWORD *)(a4 + 156) = v40;
          v41 = dword_4CD6B8 ^ dword_4CF308[(unsigned int)v40 >> 24] ^ dword_4CEF08[(unsigned __int8)v40] ^ dword_4CEB08[(unsigned __int16)((_WORD)v40 >> 8)] ^ dword_4CE708[((unsigned int)v40 >> 16) & 0xFF] ^ v37;
          *(_DWORD *)(a4 + 160) = v41;
          v42 = v41 ^ v38;
          *(_DWORD *)(a4 + 164) = v42;
          v43 = v42 ^ v39;
          *(_DWORD *)(a4 + 168) = v43;
          *(_DWORD *)(a4 + 172) = v43 ^ v40;
          *(_DWORD *)(a4 + 512) = 4;
          *(_DWORD *)(a4 + 516) = 10;
          goto LABEL_10;
        case 24:
          v44 = *(_DWORD *)(a1 + 16);
          *(_DWORD *)(a4 + 16) = v44;
          v45 = *(_DWORD *)(a1 + 20);
          *(_DWORD *)(a4 + 20) = v45;
          v46 = dword_4CD694 ^ dword_4CF308[v45 >> 24] ^ dword_4CEF08[(unsigned __int8)v45] ^ dword_4CEB08[(unsigned __int16)((_WORD)v45 >> 8)] ^ dword_4CE708[(v45 >> 16) & 0xFF] ^ v368;
          *(_DWORD *)(a4 + 24) = v46;
          v47 = v46 ^ v370;
          *(_DWORD *)(a4 + 28) = v47;
          v48 = v47 ^ v372;
          *(_DWORD *)(a4 + 32) = v48;
          v49 = v48 ^ v374;
          *(_DWORD *)(a4 + 36) = v49;
          v50 = v49 ^ v44;
          *(_DWORD *)(a4 + 40) = v50;
          v51 = v50 ^ v45;
          *(_DWORD *)(a4 + 44) = v51;
          v52 = dword_4CD698 ^ dword_4CF308[(unsigned int)v51 >> 24] ^ dword_4CEF08[(unsigned __int8)v51] ^ dword_4CEB08[(unsigned __int16)((_WORD)v51 >> 8)] ^ dword_4CE708[((unsigned int)v51 >> 16) & 0xFF] ^ v46;
          *(_DWORD *)(a4 + 48) = v52;
          v53 = v52 ^ v47;
          *(_DWORD *)(a4 + 52) = v53;
          v54 = v53 ^ v48;
          *(_DWORD *)(a4 + 56) = v54;
          v55 = v54 ^ v49;
          *(_DWORD *)(a4 + 60) = v55;
          v56 = v55 ^ v50;
          *(_DWORD *)(a4 + 64) = v56;
          v57 = v56 ^ v51;
          *(_DWORD *)(a4 + 68) = v57;
          v58 = dword_4CD69C ^ dword_4CF308[(unsigned int)v57 >> 24] ^ dword_4CEF08[(unsigned __int8)v57] ^ dword_4CEB08[(unsigned __int16)((_WORD)v57 >> 8)] ^ dword_4CE708[((unsigned int)v57 >> 16) & 0xFF] ^ v52;
          *(_DWORD *)(a4 + 72) = v58;
          v59 = v58 ^ v53;
          *(_DWORD *)(a4 + 76) = v59;
          v60 = v59 ^ v54;
          *(_DWORD *)(a4 + 80) = v60;
          v61 = v60 ^ v55;
          *(_DWORD *)(a4 + 84) = v61;
          v62 = v61 ^ v56;
          *(_DWORD *)(a4 + 88) = v62;
          v63 = v62 ^ v57;
          *(_DWORD *)(a4 + 92) = v63;
          v64 = dword_4CD6A0 ^ dword_4CF308[(unsigned int)v63 >> 24] ^ dword_4CEF08[(unsigned __int8)v63] ^ dword_4CEB08[(unsigned __int16)((_WORD)v63 >> 8)] ^ dword_4CE708[((unsigned int)v63 >> 16) & 0xFF] ^ v58;
          *(_DWORD *)(a4 + 96) = v64;
          v65 = v64 ^ v59;
          *(_DWORD *)(a4 + 100) = v65;
          v66 = v65 ^ v60;
          *(_DWORD *)(a4 + 104) = v66;
          v67 = v66 ^ v61;
          *(_DWORD *)(a4 + 108) = v67;
          v68 = v67 ^ v62;
          *(_DWORD *)(a4 + 112) = v68;
          v69 = v68 ^ v63;
          *(_DWORD *)(a4 + 116) = v69;
          v70 = dword_4CD6A4 ^ dword_4CF308[(unsigned int)v69 >> 24] ^ dword_4CEF08[(unsigned __int8)v69] ^ dword_4CEB08[(unsigned __int16)((_WORD)v69 >> 8)] ^ dword_4CE708[((unsigned int)v69 >> 16) & 0xFF] ^ v64;
          *(_DWORD *)(a4 + 120) = v70;
          v71 = v70 ^ v65;
          *(_DWORD *)(a4 + 124) = v71;
          v72 = v71 ^ v66;
          *(_DWORD *)(a4 + 128) = v72;
          v73 = v72 ^ v67;
          *(_DWORD *)(a4 + 132) = v73;
          v74 = v73 ^ v68;
          *(_DWORD *)(a4 + 136) = v74;
          v75 = v74 ^ v69;
          *(_DWORD *)(a4 + 140) = v75;
          v76 = dword_4CD6A8 ^ dword_4CF308[(unsigned int)v75 >> 24] ^ dword_4CEF08[(unsigned __int8)v75] ^ dword_4CEB08[(unsigned __int16)((_WORD)v75 >> 8)] ^ dword_4CE708[((unsigned int)v75 >> 16) & 0xFF] ^ v70;
          *(_DWORD *)(a4 + 144) = v76;
          v77 = v76 ^ v71;
          *(_DWORD *)(a4 + 148) = v77;
          v78 = v77 ^ v72;
          *(_DWORD *)(a4 + 152) = v78;
          v79 = v78 ^ v73;
          *(_DWORD *)(a4 + 156) = v79;
          v80 = v79 ^ v74;
          *(_DWORD *)(a4 + 160) = v80;
          v81 = v80 ^ v75;
          *(_DWORD *)(a4 + 164) = v81;
          v82 = dword_4CD6AC ^ dword_4CF308[(unsigned int)v81 >> 24] ^ dword_4CEF08[(unsigned __int8)v81] ^ dword_4CEB08[(unsigned __int16)((_WORD)v81 >> 8)] ^ dword_4CE708[((unsigned int)v81 >> 16) & 0xFF] ^ v76;
          *(_DWORD *)(a4 + 168) = v82;
          v83 = v82 ^ v77;
          *(_DWORD *)(a4 + 172) = v83;
          v84 = v83 ^ v78;
          *(_DWORD *)(a4 + 176) = v84;
          v85 = v84 ^ v79;
          *(_DWORD *)(a4 + 180) = v85;
          v86 = v85 ^ v80;
          *(_DWORD *)(a4 + 184) = v86;
          v87 = v86 ^ v81;
          *(_DWORD *)(a4 + 188) = v87;
          v88 = dword_4CD6B0 ^ dword_4CF308[(unsigned int)v87 >> 24] ^ dword_4CEF08[(unsigned __int8)v87] ^ dword_4CEB08[(unsigned __int16)((_WORD)v87 >> 8)] ^ dword_4CE708[((unsigned int)v87 >> 16) & 0xFF] ^ v82;
          *(_DWORD *)(a4 + 192) = v88;
          v89 = v88 ^ v83;
          *(_DWORD *)(a4 + 196) = v89;
          v90 = v89 ^ v84;
          *(_DWORD *)(a4 + 200) = v90;
          *(_DWORD *)(a4 + 204) = v90 ^ v85;
          *(_DWORD *)(a4 + 512) = 6;
          *(_DWORD *)(a4 + 516) = 12;
          goto LABEL_10;
        case 32:
          v91 = *(_DWORD *)(a1 + 16);
          *(_DWORD *)(a4 + 16) = v91;
          v92 = *(_DWORD *)(a1 + 20);
          *(_DWORD *)(a4 + 20) = v92;
          v93 = *(_DWORD *)(a1 + 24);
          *(_DWORD *)(a4 + 24) = v93;
          v94 = *(_DWORD *)(a1 + 28);
          *(_DWORD *)(a4 + 28) = v94;
          v95 = dword_4CD694 ^ dword_4CF308[v94 >> 24] ^ dword_4CEF08[(unsigned __int8)v94] ^ dword_4CEB08[(unsigned __int16)((_WORD)v94 >> 8)] ^ dword_4CE708[(v94 >> 16) & 0xFF] ^ v368;
          *(_DWORD *)(a4 + 32) = v95;
          v96 = v95 ^ v370;
          *(_DWORD *)(a4 + 36) = v96;
          v97 = v96 ^ v372;
          *(_DWORD *)(a4 + 40) = v97;
          v98 = v97 ^ v374;
          *(_DWORD *)(a4 + 44) = v98;
          v99 = dword_4CF308[(unsigned __int8)v98] ^ dword_4CEF08[(unsigned __int16)((_WORD)v98 >> 8)] ^ dword_4CEB08[((unsigned int)v98 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v98 >> 24] ^ v91;
          *(_DWORD *)(a4 + 48) = v99;
          v100 = v99 ^ v92;
          *(_DWORD *)(a4 + 52) = v100;
          v101 = v100 ^ v93;
          *(_DWORD *)(a4 + 56) = v101;
          v102 = v101 ^ v94;
          *(_DWORD *)(a4 + 60) = v102;
          v103 = dword_4CD698 ^ dword_4CF308[(unsigned int)v102 >> 24] ^ dword_4CEF08[(unsigned __int8)v102] ^ dword_4CEB08[(unsigned __int16)((_WORD)v102 >> 8)] ^ dword_4CE708[((unsigned int)v102 >> 16) & 0xFF] ^ v95;
          *(_DWORD *)(a4 + 64) = v103;
          v104 = v103 ^ v96;
          *(_DWORD *)(a4 + 68) = v104;
          v105 = v104 ^ v97;
          *(_DWORD *)(a4 + 72) = v105;
          v106 = v105 ^ v98;
          *(_DWORD *)(a4 + 76) = v106;
          v107 = dword_4CF308[(unsigned __int8)v106] ^ dword_4CEF08[(unsigned __int16)((_WORD)v106 >> 8)] ^ dword_4CEB08[((unsigned int)v106 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v106 >> 24] ^ v99;
          *(_DWORD *)(a4 + 80) = v107;
          v108 = v107 ^ v100;
          *(_DWORD *)(a4 + 84) = v108;
          v109 = v108 ^ v101;
          *(_DWORD *)(a4 + 88) = v109;
          v110 = v109 ^ v102;
          *(_DWORD *)(a4 + 92) = v110;
          v111 = dword_4CD69C ^ dword_4CF308[(unsigned int)v110 >> 24] ^ dword_4CEF08[(unsigned __int8)v110] ^ dword_4CEB08[(unsigned __int16)((_WORD)v110 >> 8)] ^ dword_4CE708[((unsigned int)v110 >> 16) & 0xFF] ^ v103;
          *(_DWORD *)(a4 + 96) = v111;
          v112 = v111 ^ v104;
          *(_DWORD *)(a4 + 100) = v112;
          v113 = v112 ^ v105;
          *(_DWORD *)(a4 + 104) = v113;
          v114 = v113 ^ v106;
          *(_DWORD *)(a4 + 108) = v114;
          v115 = dword_4CF308[(unsigned __int8)v114] ^ dword_4CEF08[(unsigned __int16)((_WORD)v114 >> 8)] ^ dword_4CEB08[((unsigned int)v114 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v114 >> 24] ^ v107;
          *(_DWORD *)(a4 + 112) = v115;
          v116 = v115 ^ v108;
          *(_DWORD *)(a4 + 116) = v116;
          v117 = v116 ^ v109;
          *(_DWORD *)(a4 + 120) = v117;
          v118 = v117 ^ v110;
          *(_DWORD *)(a4 + 124) = v118;
          v119 = dword_4CD6A0 ^ dword_4CF308[(unsigned int)v118 >> 24] ^ dword_4CEF08[(unsigned __int8)v118] ^ dword_4CEB08[(unsigned __int16)((_WORD)v118 >> 8)] ^ dword_4CE708[((unsigned int)v118 >> 16) & 0xFF] ^ v111;
          *(_DWORD *)(a4 + 128) = v119;
          v120 = v119 ^ v112;
          *(_DWORD *)(a4 + 132) = v120;
          v121 = v120 ^ v113;
          *(_DWORD *)(a4 + 136) = v121;
          v122 = v121 ^ v114;
          *(_DWORD *)(a4 + 140) = v122;
          v123 = dword_4CF308[(unsigned __int8)v122] ^ dword_4CEF08[(unsigned __int16)((_WORD)v122 >> 8)] ^ dword_4CEB08[((unsigned int)v122 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v122 >> 24] ^ v115;
          *(_DWORD *)(a4 + 144) = v123;
          v124 = v123 ^ v116;
          *(_DWORD *)(a4 + 148) = v124;
          v125 = v124 ^ v117;
          *(_DWORD *)(a4 + 152) = v125;
          v126 = v125 ^ v118;
          *(_DWORD *)(a4 + 156) = v126;
          v127 = dword_4CD6A4 ^ dword_4CF308[(unsigned int)v126 >> 24] ^ dword_4CEF08[(unsigned __int8)v126] ^ dword_4CEB08[(unsigned __int16)((_WORD)v126 >> 8)] ^ dword_4CE708[((unsigned int)v126 >> 16) & 0xFF] ^ v119;
          *(_DWORD *)(a4 + 160) = v127;
          v128 = v127 ^ v120;
          *(_DWORD *)(a4 + 164) = v128;
          v129 = v128 ^ v121;
          *(_DWORD *)(a4 + 168) = v129;
          v130 = v129 ^ v122;
          *(_DWORD *)(a4 + 172) = v130;
          v131 = dword_4CF308[(unsigned __int8)v130] ^ dword_4CEF08[(unsigned __int16)((_WORD)v130 >> 8)] ^ dword_4CEB08[((unsigned int)v130 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v130 >> 24] ^ v123;
          *(_DWORD *)(a4 + 176) = v131;
          v132 = v131 ^ v124;
          *(_DWORD *)(a4 + 180) = v132;
          v133 = v132 ^ v125;
          *(_DWORD *)(a4 + 184) = v133;
          v134 = v133 ^ v126;
          *(_DWORD *)(a4 + 188) = v134;
          v135 = dword_4CD6A8 ^ dword_4CF308[(unsigned int)v134 >> 24] ^ dword_4CEF08[(unsigned __int8)v134] ^ dword_4CEB08[(unsigned __int16)((_WORD)v134 >> 8)] ^ dword_4CE708[((unsigned int)v134 >> 16) & 0xFF] ^ v127;
          *(_DWORD *)(a4 + 192) = v135;
          v136 = v135 ^ v128;
          *(_DWORD *)(a4 + 196) = v136;
          v137 = v136 ^ v129;
          *(_DWORD *)(a4 + 200) = v137;
          v138 = v137 ^ v130;
          *(_DWORD *)(a4 + 204) = v138;
          v139 = dword_4CF308[(unsigned __int8)v138] ^ dword_4CEF08[(unsigned __int16)((_WORD)v138 >> 8)] ^ dword_4CEB08[((unsigned int)v138 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v138 >> 24] ^ v131;
          *(_DWORD *)(a4 + 208) = v139;
          v140 = v139 ^ v132;
          *(_DWORD *)(a4 + 212) = v140;
          v141 = v140 ^ v133;
          *(_DWORD *)(a4 + 216) = v141;
          v142 = v141 ^ v134;
          *(_DWORD *)(a4 + 220) = v142;
          v143 = dword_4CD6AC ^ dword_4CF308[(unsigned int)v142 >> 24] ^ dword_4CEF08[(unsigned __int8)v142] ^ dword_4CEB08[(unsigned __int16)((_WORD)v142 >> 8)] ^ dword_4CE708[((unsigned int)v142 >> 16) & 0xFF] ^ v135;
          *(_DWORD *)(a4 + 224) = v143;
          v144 = v143 ^ v136;
          *(_DWORD *)(a4 + 228) = v144;
          v145 = v144 ^ v137;
          *(_DWORD *)(a4 + 232) = v145;
          *(_DWORD *)(a4 + 236) = v145 ^ v138;
          *(_DWORD *)(a4 + 512) = 8;
          *(_DWORD *)(a4 + 516) = 14;
          goto LABEL_10;
        case 0:
          v4 = 4 * *(_DWORD *)(a4 + 512);
          break;
        default:
          *(_BYTE *)(a4 + 520) &= 0xFCu;
          LOWORD(v4) = 0;
          break;
      }
    }
    else
    {
LABEL_10:
      if ( *(_BYTE *)(a4 + 520) & 2 )
      {
        v369 = *(_DWORD *)a1;
        *(_DWORD *)(a4 + 256) = *(_DWORD *)a1;
        v371 = *(_DWORD *)(a1 + 4);
        *(_DWORD *)(a4 + 260) = v371;
        v373 = *(_DWORD *)(a1 + 8);
        *(_DWORD *)(a4 + 264) = v373;
        v375 = *(_DWORD *)(a1 + 12);
        *(_DWORD *)(a4 + 268) = v375;
        switch ( a2 )
        {
          case 16:
            v146 = dword_4CD694 ^ dword_4CF308[v375 >> 24] ^ dword_4CEF08[(unsigned __int8)v375] ^ dword_4CEB08[(unsigned __int16)((_WORD)v375 >> 8)] ^ dword_4CE708[(v375 >> 16) & 0xFF];
            v147 = v146 ^ v375 ^ v373 ^ v371 ^ v369;
            v148 = *(_DWORD *)(a4 + 256) ^ v146;
            *(_DWORD *)(a4 + 272) = dword_4D2308[(unsigned __int8)v148] ^ dword_4D1F08[(unsigned __int16)((_WORD)v148 >> 8)] ^ dword_4D1B08[((unsigned int)v148 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v148 >> 24];
            v149 = *(_DWORD *)(a4 + 260) ^ v148;
            *(_DWORD *)(a4 + 276) = dword_4D2308[(unsigned __int8)v149] ^ dword_4D1F08[(unsigned __int16)((_WORD)v149 >> 8)] ^ dword_4D1B08[((unsigned int)v149 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v149 >> 24];
            v150 = *(_DWORD *)(a4 + 264) ^ v149;
            *(_DWORD *)(a4 + 280) = dword_4D2308[(unsigned __int8)v150] ^ dword_4D1F08[(unsigned __int16)((_WORD)v150 >> 8)] ^ dword_4D1B08[((unsigned int)v150 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v150 >> 24];
            v151 = *(_DWORD *)(a4 + 268) ^ v150;
            *(_DWORD *)(a4 + 284) = dword_4D2308[(unsigned __int8)v151] ^ dword_4D1F08[(unsigned __int16)((_WORD)v151 >> 8)] ^ dword_4D1B08[((unsigned int)v151 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v151 >> 24];
            v152 = dword_4CD698 ^ dword_4CF308[(unsigned int)v147 >> 24] ^ dword_4CEF08[(unsigned __int8)v147] ^ dword_4CEB08[(unsigned __int16)((_WORD)v147 >> 8)] ^ dword_4CE708[((unsigned int)v147 >> 16) & 0xFF];
            v153 = v152 ^ v375 ^ v371;
            v154 = *(_DWORD *)(a4 + 272) ^ dword_4D2308[(unsigned __int8)v152] ^ dword_4D1F08[(unsigned __int16)((_WORD)v152 >> 8)] ^ dword_4D1B08[((unsigned int)v152 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v152 >> 24];
            *(_DWORD *)(a4 + 288) = v154;
            v155 = *(_DWORD *)(a4 + 276) ^ v154;
            *(_DWORD *)(a4 + 292) = v155;
            v156 = *(_DWORD *)(a4 + 280) ^ v155;
            *(_DWORD *)(a4 + 296) = v156;
            *(_DWORD *)(a4 + 300) = *(_DWORD *)(a4 + 284) ^ v156;
            v157 = dword_4CD69C ^ dword_4CF308[(unsigned int)v153 >> 24] ^ dword_4CEF08[(unsigned __int8)v153] ^ dword_4CEB08[(unsigned __int16)((_WORD)v153 >> 8)] ^ dword_4CE708[((unsigned int)v153 >> 16) & 0xFF];
            v158 = v157 ^ v375 ^ v373;
            v159 = *(_DWORD *)(a4 + 288) ^ dword_4D2308[(unsigned __int8)v157] ^ dword_4D1F08[(unsigned __int16)((_WORD)v157 >> 8)] ^ dword_4D1B08[((unsigned int)v157 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v157 >> 24];
            *(_DWORD *)(a4 + 304) = v159;
            v160 = *(_DWORD *)(a4 + 292) ^ v159;
            *(_DWORD *)(a4 + 308) = v160;
            v161 = *(_DWORD *)(a4 + 296) ^ v160;
            *(_DWORD *)(a4 + 312) = v161;
            *(_DWORD *)(a4 + 316) = *(_DWORD *)(a4 + 300) ^ v161;
            v162 = dword_4CD6A0 ^ dword_4CF308[(unsigned int)v158 >> 24] ^ dword_4CEF08[(unsigned __int8)v158] ^ dword_4CEB08[(unsigned __int16)((_WORD)v158 >> 8)] ^ dword_4CE708[((unsigned int)v158 >> 16) & 0xFF];
            v163 = v162 ^ v375;
            v164 = *(_DWORD *)(a4 + 304) ^ dword_4D2308[(unsigned __int8)v162] ^ dword_4D1F08[(unsigned __int16)((_WORD)v162 >> 8)] ^ dword_4D1B08[((unsigned int)v162 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v162 >> 24];
            *(_DWORD *)(a4 + 320) = v164;
            v165 = *(_DWORD *)(a4 + 308) ^ v164;
            *(_DWORD *)(a4 + 324) = v165;
            v166 = *(_DWORD *)(a4 + 312) ^ v165;
            *(_DWORD *)(a4 + 328) = v166;
            *(_DWORD *)(a4 + 332) = *(_DWORD *)(a4 + 316) ^ v166;
            v167 = dword_4CD6A4 ^ dword_4CF308[(unsigned int)v163 >> 24] ^ dword_4CEF08[(unsigned __int8)v163] ^ dword_4CEB08[(unsigned __int16)((_WORD)v163 >> 8)] ^ dword_4CE708[((unsigned int)v163 >> 16) & 0xFF];
            v168 = v167 ^ v147;
            v169 = *(_DWORD *)(a4 + 320) ^ dword_4D2308[(unsigned __int8)v167] ^ dword_4D1F08[(unsigned __int16)((_WORD)v167 >> 8)] ^ dword_4D1B08[((unsigned int)v167 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v167 >> 24];
            *(_DWORD *)(a4 + 336) = v169;
            v170 = *(_DWORD *)(a4 + 324) ^ v169;
            *(_DWORD *)(a4 + 340) = v170;
            v171 = *(_DWORD *)(a4 + 328) ^ v170;
            *(_DWORD *)(a4 + 344) = v171;
            *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 332) ^ v171;
            v172 = dword_4CD6A8 ^ dword_4CF308[(unsigned int)v168 >> 24] ^ dword_4CEF08[(unsigned __int8)v168] ^ dword_4CEB08[(unsigned __int16)((_WORD)v168 >> 8)] ^ dword_4CE708[((unsigned int)v168 >> 16) & 0xFF];
            v173 = v172 ^ v153;
            v174 = *(_DWORD *)(a4 + 336) ^ dword_4D2308[(unsigned __int8)v172] ^ dword_4D1F08[(unsigned __int16)((_WORD)v172 >> 8)] ^ dword_4D1B08[((unsigned int)v172 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v172 >> 24];
            *(_DWORD *)(a4 + 352) = v174;
            v175 = *(_DWORD *)(a4 + 340) ^ v174;
            *(_DWORD *)(a4 + 356) = v175;
            v176 = *(_DWORD *)(a4 + 344) ^ v175;
            *(_DWORD *)(a4 + 360) = v176;
            *(_DWORD *)(a4 + 364) = *(_DWORD *)(a4 + 348) ^ v176;
            v177 = dword_4CD6AC ^ dword_4CF308[(unsigned int)v173 >> 24] ^ dword_4CEF08[(unsigned __int8)v173] ^ dword_4CEB08[(unsigned __int16)((_WORD)v173 >> 8)] ^ dword_4CE708[((unsigned int)v173 >> 16) & 0xFF];
            v178 = v177 ^ v158;
            v179 = *(_DWORD *)(a4 + 352) ^ dword_4D2308[(unsigned __int8)v177] ^ dword_4D1F08[(unsigned __int16)((_WORD)v177 >> 8)] ^ dword_4D1B08[((unsigned int)v177 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v177 >> 24];
            *(_DWORD *)(a4 + 368) = v179;
            v180 = *(_DWORD *)(a4 + 356) ^ v179;
            *(_DWORD *)(a4 + 372) = v180;
            v181 = *(_DWORD *)(a4 + 360) ^ v180;
            *(_DWORD *)(a4 + 376) = v181;
            *(_DWORD *)(a4 + 380) = *(_DWORD *)(a4 + 364) ^ v181;
            v182 = dword_4CD6B0 ^ dword_4CF308[(unsigned int)v178 >> 24] ^ dword_4CEF08[(unsigned __int8)v178] ^ dword_4CEB08[(unsigned __int16)((_WORD)v178 >> 8)] ^ dword_4CE708[((unsigned int)v178 >> 16) & 0xFF];
            v183 = v182 ^ v163;
            v184 = *(_DWORD *)(a4 + 368) ^ dword_4D2308[(unsigned __int8)v182] ^ dword_4D1F08[(unsigned __int16)((_WORD)v182 >> 8)] ^ dword_4D1B08[((unsigned int)v182 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v182 >> 24];
            *(_DWORD *)(a4 + 384) = v184;
            v185 = *(_DWORD *)(a4 + 372) ^ v184;
            *(_DWORD *)(a4 + 388) = v185;
            v186 = *(_DWORD *)(a4 + 376) ^ v185;
            *(_DWORD *)(a4 + 392) = v186;
            *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 380) ^ v186;
            v187 = dword_4CD6B4 ^ dword_4CF308[(unsigned int)v183 >> 24] ^ dword_4CEF08[(unsigned __int8)v183] ^ dword_4CEB08[(unsigned __int16)((_WORD)v183 >> 8)] ^ dword_4CE708[((unsigned int)v183 >> 16) & 0xFF];
            v188 = v187 ^ v168;
            v189 = *(_DWORD *)(a4 + 384) ^ dword_4D2308[(unsigned __int8)v187] ^ dword_4D1F08[(unsigned __int16)((_WORD)v187 >> 8)] ^ dword_4D1B08[((unsigned int)v187 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v187 >> 24];
            *(_DWORD *)(a4 + 400) = v189;
            v190 = *(_DWORD *)(a4 + 388) ^ v189;
            *(_DWORD *)(a4 + 404) = v190;
            v191 = *(_DWORD *)(a4 + 392) ^ v190;
            *(_DWORD *)(a4 + 408) = v191;
            *(_DWORD *)(a4 + 412) = *(_DWORD *)(a4 + 396) ^ v191;
            v192 = dword_4CD6B8 ^ dword_4CF308[(unsigned int)v188 >> 24] ^ dword_4CEF08[(unsigned __int8)v188] ^ dword_4CEB08[(unsigned __int16)((_WORD)v188 >> 8)] ^ dword_4CE708[((unsigned int)v188 >> 16) & 0xFF] ^ v173;
            *(_DWORD *)(a4 + 416) = v183 ^ v178 ^ v192 ^ v188;
            *(_DWORD *)(a4 + 420) = v183 ^ v192;
            *(_DWORD *)(a4 + 424) = v192 ^ v188;
            *(_DWORD *)(a4 + 428) = v192;
            *(_DWORD *)(a4 + 512) = 4;
            *(_DWORD *)(a4 + 516) = 10;
            goto LABEL_17;
          case 24:
            v193 = *(_DWORD *)(a1 + 16);
            *(_DWORD *)(a4 + 272) = dword_4D2308[(unsigned __int8)v193] ^ dword_4D1F08[(unsigned __int16)*(_DWORD *)(a1 + 16) >> 8] ^ dword_4D1B08[(*(_DWORD *)(a1 + 16) >> 16) & 0xFF] ^ dword_4D1708[*(_DWORD *)(a1 + 16) >> 24];
            v194 = *(_DWORD *)(a1 + 20);
            *(_DWORD *)(a4 + 276) = dword_4D2308[(unsigned __int8)v194] ^ dword_4D1F08[(unsigned __int16)*(_DWORD *)(a1 + 20) >> 8] ^ dword_4D1B08[(*(_DWORD *)(a1 + 20) >> 16) & 0xFF] ^ dword_4D1708[*(_DWORD *)(a1 + 20) >> 24];
            v195 = dword_4CD694 ^ dword_4CF308[v194 >> 24] ^ dword_4CEF08[(unsigned __int8)v194] ^ dword_4CEB08[(unsigned __int16)((_WORD)v194 >> 8)] ^ dword_4CE708[(v194 >> 16) & 0xFF] ^ v369;
            *(_DWORD *)(a4 + 280) = dword_4D2308[(unsigned __int8)v195] ^ dword_4D1F08[(unsigned __int16)((_WORD)v195 >> 8)] ^ dword_4D1B08[((unsigned int)v195 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v195 >> 24];
            v196 = v195 ^ v371;
            *(_DWORD *)(a4 + 284) = dword_4D2308[(unsigned __int8)v196] ^ dword_4D1F08[(unsigned __int16)((_WORD)v196 >> 8)] ^ dword_4D1B08[((unsigned int)v196 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v196 >> 24];
            v197 = v196 ^ v373;
            *(_DWORD *)(a4 + 288) = dword_4D2308[(unsigned __int8)v197] ^ dword_4D1F08[(unsigned __int16)((_WORD)v197 >> 8)] ^ dword_4D1B08[((unsigned int)v197 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v197 >> 24];
            v198 = v197 ^ v375;
            *(_DWORD *)(a4 + 292) = dword_4D2308[(unsigned __int8)v198] ^ dword_4D1F08[(unsigned __int16)((_WORD)v198 >> 8)] ^ dword_4D1B08[((unsigned int)v198 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v198 >> 24];
            v199 = v198 ^ v193;
            *(_DWORD *)(a4 + 296) = dword_4D2308[(unsigned __int8)v199] ^ dword_4D1F08[(unsigned __int16)((_WORD)v199 >> 8)] ^ dword_4D1B08[((unsigned int)v199 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v199 >> 24];
            v200 = v199 ^ v194;
            *(_DWORD *)(a4 + 300) = dword_4D2308[(unsigned __int8)v200] ^ dword_4D1F08[(unsigned __int16)((_WORD)v200 >> 8)] ^ dword_4D1B08[((unsigned int)v200 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v200 >> 24];
            v201 = dword_4CD698 ^ dword_4CF308[(unsigned int)v200 >> 24] ^ dword_4CEF08[(unsigned __int8)v200] ^ dword_4CEB08[(unsigned __int16)((_WORD)v200 >> 8)] ^ dword_4CE708[((unsigned int)v200 >> 16) & 0xFF];
            v202 = v201 ^ v195;
            v203 = *(_DWORD *)(a4 + 280) ^ dword_4D2308[(unsigned __int8)v201] ^ dword_4D1F08[(unsigned __int16)((_WORD)v201 >> 8)] ^ dword_4D1B08[((unsigned int)v201 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v201 >> 24];
            *(_DWORD *)(a4 + 304) = v203;
            v204 = v202 ^ v196;
            v205 = *(_DWORD *)(a4 + 284) ^ v203;
            *(_DWORD *)(a4 + 308) = v205;
            v206 = v204 ^ v197;
            v207 = *(_DWORD *)(a4 + 288) ^ v205;
            *(_DWORD *)(a4 + 312) = v207;
            v208 = v206 ^ v198;
            v209 = *(_DWORD *)(a4 + 292) ^ v207;
            *(_DWORD *)(a4 + 316) = v209;
            v210 = v208 ^ v199;
            v211 = *(_DWORD *)(a4 + 296) ^ v209;
            *(_DWORD *)(a4 + 320) = v211;
            v212 = v210 ^ v200;
            *(_DWORD *)(a4 + 324) = *(_DWORD *)(a4 + 300) ^ v211;
            v213 = dword_4CD69C ^ dword_4CF308[(unsigned int)v212 >> 24] ^ dword_4CEF08[(unsigned __int8)v212] ^ dword_4CEB08[(unsigned __int16)((_WORD)v212 >> 8)] ^ dword_4CE708[((unsigned int)v212 >> 16) & 0xFF];
            v214 = v213 ^ v202;
            v215 = *(_DWORD *)(a4 + 304) ^ dword_4D2308[(unsigned __int8)v213] ^ dword_4D1F08[(unsigned __int16)((_WORD)v213 >> 8)] ^ dword_4D1B08[((unsigned int)v213 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v213 >> 24];
            *(_DWORD *)(a4 + 328) = v215;
            v216 = v214 ^ v204;
            v217 = *(_DWORD *)(a4 + 308) ^ v215;
            *(_DWORD *)(a4 + 332) = v217;
            v218 = v216 ^ v206;
            v219 = *(_DWORD *)(a4 + 312) ^ v217;
            *(_DWORD *)(a4 + 336) = v219;
            v220 = v218 ^ v208;
            v221 = *(_DWORD *)(a4 + 316) ^ v219;
            *(_DWORD *)(a4 + 340) = v221;
            v222 = v220 ^ v210;
            v223 = *(_DWORD *)(a4 + 320) ^ v221;
            *(_DWORD *)(a4 + 344) = v223;
            v224 = v222 ^ v212;
            *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 324) ^ v223;
            v225 = dword_4CD6A0 ^ dword_4CF308[(unsigned int)v224 >> 24] ^ dword_4CEF08[(unsigned __int8)v224] ^ dword_4CEB08[(unsigned __int16)((_WORD)v224 >> 8)] ^ dword_4CE708[((unsigned int)v224 >> 16) & 0xFF];
            v226 = v225 ^ v214;
            v227 = *(_DWORD *)(a4 + 328) ^ dword_4D2308[(unsigned __int8)v225] ^ dword_4D1F08[(unsigned __int16)((_WORD)v225 >> 8)] ^ dword_4D1B08[((unsigned int)v225 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v225 >> 24];
            *(_DWORD *)(a4 + 352) = v227;
            v228 = v226 ^ v216;
            v229 = *(_DWORD *)(a4 + 332) ^ v227;
            *(_DWORD *)(a4 + 356) = v229;
            v230 = v228 ^ v218;
            v231 = *(_DWORD *)(a4 + 336) ^ v229;
            *(_DWORD *)(a4 + 360) = v231;
            v232 = v230 ^ v220;
            v233 = *(_DWORD *)(a4 + 340) ^ v231;
            *(_DWORD *)(a4 + 364) = v233;
            v234 = v232 ^ v222;
            v235 = *(_DWORD *)(a4 + 344) ^ v233;
            *(_DWORD *)(a4 + 368) = v235;
            v236 = v234 ^ v224;
            *(_DWORD *)(a4 + 372) = *(_DWORD *)(a4 + 348) ^ v235;
            v237 = dword_4CD6A4 ^ dword_4CF308[(unsigned int)v236 >> 24] ^ dword_4CEF08[(unsigned __int8)v236] ^ dword_4CEB08[(unsigned __int16)((_WORD)v236 >> 8)] ^ dword_4CE708[((unsigned int)v236 >> 16) & 0xFF];
            v238 = v237 ^ v226;
            v239 = *(_DWORD *)(a4 + 352) ^ dword_4D2308[(unsigned __int8)v237] ^ dword_4D1F08[(unsigned __int16)((_WORD)v237 >> 8)] ^ dword_4D1B08[((unsigned int)v237 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v237 >> 24];
            *(_DWORD *)(a4 + 376) = v239;
            v240 = v238 ^ v228;
            v241 = *(_DWORD *)(a4 + 356) ^ v239;
            *(_DWORD *)(a4 + 380) = v241;
            v242 = v240 ^ v230;
            v243 = *(_DWORD *)(a4 + 360) ^ v241;
            *(_DWORD *)(a4 + 384) = v243;
            v244 = v242 ^ v232;
            v245 = *(_DWORD *)(a4 + 364) ^ v243;
            *(_DWORD *)(a4 + 388) = v245;
            v246 = v244 ^ v234;
            v247 = *(_DWORD *)(a4 + 368) ^ v245;
            *(_DWORD *)(a4 + 392) = v247;
            v248 = v246 ^ v236;
            *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 372) ^ v247;
            v249 = dword_4CD6A8 ^ dword_4CF308[(unsigned int)v248 >> 24] ^ dword_4CEF08[(unsigned __int8)v248] ^ dword_4CEB08[(unsigned __int16)((_WORD)v248 >> 8)] ^ dword_4CE708[((unsigned int)v248 >> 16) & 0xFF];
            v250 = v249 ^ v238;
            v251 = *(_DWORD *)(a4 + 376) ^ dword_4D2308[(unsigned __int8)v249] ^ dword_4D1F08[(unsigned __int16)((_WORD)v249 >> 8)] ^ dword_4D1B08[((unsigned int)v249 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v249 >> 24];
            *(_DWORD *)(a4 + 400) = v251;
            v252 = v250 ^ v240;
            v253 = *(_DWORD *)(a4 + 380) ^ v251;
            *(_DWORD *)(a4 + 404) = v253;
            v254 = v252 ^ v242;
            v255 = *(_DWORD *)(a4 + 384) ^ v253;
            *(_DWORD *)(a4 + 408) = v255;
            v256 = v254 ^ v244;
            v257 = *(_DWORD *)(a4 + 388) ^ v255;
            *(_DWORD *)(a4 + 412) = v257;
            v258 = v256 ^ v246;
            v259 = *(_DWORD *)(a4 + 392) ^ v257;
            *(_DWORD *)(a4 + 416) = v259;
            v260 = v258 ^ v248;
            *(_DWORD *)(a4 + 420) = *(_DWORD *)(a4 + 396) ^ v259;
            v261 = dword_4CD6AC ^ dword_4CF308[(unsigned int)v260 >> 24] ^ dword_4CEF08[(unsigned __int8)v260] ^ dword_4CEB08[(unsigned __int16)((_WORD)v260 >> 8)] ^ dword_4CE708[((unsigned int)v260 >> 16) & 0xFF];
            v262 = v261 ^ v250;
            v263 = *(_DWORD *)(a4 + 400) ^ dword_4D2308[(unsigned __int8)v261] ^ dword_4D1F08[(unsigned __int16)((_WORD)v261 >> 8)] ^ dword_4D1B08[((unsigned int)v261 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v261 >> 24];
            *(_DWORD *)(a4 + 424) = v263;
            v264 = v262 ^ v252;
            v265 = *(_DWORD *)(a4 + 404) ^ v263;
            *(_DWORD *)(a4 + 428) = v265;
            v266 = v264 ^ v254;
            v267 = *(_DWORD *)(a4 + 408) ^ v265;
            *(_DWORD *)(a4 + 432) = v267;
            v268 = v266 ^ v256;
            v269 = *(_DWORD *)(a4 + 412) ^ v267;
            *(_DWORD *)(a4 + 436) = v269;
            v270 = *(_DWORD *)(a4 + 416) ^ v269;
            *(_DWORD *)(a4 + 440) = v270;
            *(_DWORD *)(a4 + 444) = *(_DWORD *)(a4 + 420) ^ v270;
            v271 = dword_4CD6B0 ^ dword_4CF308[(v268 ^ v258 ^ (unsigned int)v260) >> 24] ^ dword_4CEF08[(unsigned __int8)(v268 ^ (_BYTE)v258 ^ (_BYTE)v260)] ^ dword_4CEB08[(unsigned __int16)(v268 ^ (_WORD)v258 ^ (_WORD)v260) >> 8] ^ dword_4CE708[((v268 ^ v258 ^ (unsigned int)v260) >> 16) & 0xFF] ^ v262;
            *(_DWORD *)(a4 + 448) = v271;
            v272 = v271 ^ v264;
            *(_DWORD *)(a4 + 452) = v272;
            v273 = v272 ^ v266;
            *(_DWORD *)(a4 + 456) = v273;
            *(_DWORD *)(a4 + 460) = v273 ^ v268;
            *(_DWORD *)(a4 + 512) = 6;
            *(_DWORD *)(a4 + 516) = 12;
            goto LABEL_17;
          case 32:
            v274 = *(_DWORD *)(a1 + 16);
            *(_DWORD *)(a4 + 272) = dword_4D2308[(unsigned __int8)v274] ^ dword_4D1F08[(unsigned __int16)*(_DWORD *)(a1 + 16) >> 8] ^ dword_4D1B08[(*(_DWORD *)(a1 + 16) >> 16) & 0xFF] ^ dword_4D1708[*(_DWORD *)(a1 + 16) >> 24];
            v275 = *(_DWORD *)(a1 + 20);
            *(_DWORD *)(a4 + 276) = dword_4D2308[(unsigned __int8)v275] ^ dword_4D1F08[(unsigned __int16)*(_DWORD *)(a1 + 20) >> 8] ^ dword_4D1B08[(*(_DWORD *)(a1 + 20) >> 16) & 0xFF] ^ dword_4D1708[*(_DWORD *)(a1 + 20) >> 24];
            v276 = *(_DWORD *)(a1 + 24);
            *(_DWORD *)(a4 + 280) = dword_4D2308[(unsigned __int8)v276] ^ dword_4D1F08[(unsigned __int16)*(_DWORD *)(a1 + 24) >> 8] ^ dword_4D1B08[(*(_DWORD *)(a1 + 24) >> 16) & 0xFF] ^ dword_4D1708[*(_DWORD *)(a1 + 24) >> 24];
            v277 = *(_DWORD *)(a1 + 28);
            *(_DWORD *)(a4 + 284) = dword_4D2308[(unsigned __int8)v277] ^ dword_4D1F08[(unsigned __int16)*(_DWORD *)(a1 + 28) >> 8] ^ dword_4D1B08[(*(_DWORD *)(a1 + 28) >> 16) & 0xFF] ^ dword_4D1708[*(_DWORD *)(a1 + 28) >> 24];
            v278 = dword_4CD694 ^ dword_4CF308[v277 >> 24] ^ dword_4CEF08[(unsigned __int8)v277] ^ dword_4CEB08[(unsigned __int16)((_WORD)v277 >> 8)] ^ dword_4CE708[(v277 >> 16) & 0xFF] ^ v369;
            *(_DWORD *)(a4 + 288) = dword_4D2308[(unsigned __int8)v278] ^ dword_4D1F08[(unsigned __int16)((_WORD)v278 >> 8)] ^ dword_4D1B08[((unsigned int)v278 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v278 >> 24];
            v279 = v278 ^ v371;
            *(_DWORD *)(a4 + 292) = dword_4D2308[(unsigned __int8)v279] ^ dword_4D1F08[(unsigned __int16)((_WORD)v279 >> 8)] ^ dword_4D1B08[((unsigned int)v279 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v279 >> 24];
            v280 = v279 ^ v373;
            *(_DWORD *)(a4 + 296) = dword_4D2308[(unsigned __int8)v280] ^ dword_4D1F08[(unsigned __int16)((_WORD)v280 >> 8)] ^ dword_4D1B08[((unsigned int)v280 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v280 >> 24];
            v281 = v280 ^ v375;
            *(_DWORD *)(a4 + 300) = dword_4D2308[(unsigned __int8)v281] ^ dword_4D1F08[(unsigned __int16)((_WORD)v281 >> 8)] ^ dword_4D1B08[((unsigned int)v281 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v281 >> 24];
            v282 = dword_4CF308[(unsigned __int8)v281] ^ dword_4CEF08[(unsigned __int16)((_WORD)v281 >> 8)] ^ dword_4CEB08[((unsigned int)v281 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v281 >> 24] ^ v274;
            *(_DWORD *)(a4 + 304) = dword_4D2308[(unsigned __int8)v282] ^ dword_4D1F08[(unsigned __int16)((_WORD)v282 >> 8)] ^ dword_4D1B08[((unsigned int)v282 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v282 >> 24];
            v283 = v282 ^ v275;
            *(_DWORD *)(a4 + 308) = dword_4D2308[(unsigned __int8)v283] ^ dword_4D1F08[(unsigned __int16)((_WORD)v283 >> 8)] ^ dword_4D1B08[((unsigned int)v283 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v283 >> 24];
            v284 = v283 ^ v276;
            *(_DWORD *)(a4 + 312) = dword_4D2308[(unsigned __int8)v284] ^ dword_4D1F08[(unsigned __int16)((_WORD)v284 >> 8)] ^ dword_4D1B08[((unsigned int)v284 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v284 >> 24];
            v285 = v284 ^ v277;
            *(_DWORD *)(a4 + 316) = dword_4D2308[(unsigned __int8)v285] ^ dword_4D1F08[(unsigned __int16)((_WORD)v285 >> 8)] ^ dword_4D1B08[((unsigned int)v285 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v285 >> 24];
            v286 = dword_4CD698 ^ dword_4CF308[(unsigned int)v285 >> 24] ^ dword_4CEF08[(unsigned __int8)v285] ^ dword_4CEB08[(unsigned __int16)((_WORD)v285 >> 8)] ^ dword_4CE708[((unsigned int)v285 >> 16) & 0xFF];
            v287 = v286 ^ v278;
            v288 = *(_DWORD *)(a4 + 288) ^ dword_4D2308[(unsigned __int8)v286] ^ dword_4D1F08[(unsigned __int16)((_WORD)v286 >> 8)] ^ dword_4D1B08[((unsigned int)v286 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v286 >> 24];
            *(_DWORD *)(a4 + 320) = v288;
            v289 = v287 ^ v279;
            v290 = *(_DWORD *)(a4 + 292) ^ v288;
            *(_DWORD *)(a4 + 324) = v290;
            v291 = v289 ^ v280;
            v292 = *(_DWORD *)(a4 + 296) ^ v290;
            *(_DWORD *)(a4 + 328) = v292;
            v293 = v291 ^ v281;
            *(_DWORD *)(a4 + 332) = *(_DWORD *)(a4 + 300) ^ v292;
            v294 = dword_4CF308[(unsigned __int8)v293] ^ dword_4CEF08[(unsigned __int16)((_WORD)v293 >> 8)] ^ dword_4CEB08[((unsigned int)v293 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v293 >> 24];
            v295 = v294 ^ v282;
            v296 = *(_DWORD *)(a4 + 304) ^ dword_4D2308[(unsigned __int8)v294] ^ dword_4D1F08[(unsigned __int16)((_WORD)v294 >> 8)] ^ dword_4D1B08[((unsigned int)v294 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v294 >> 24];
            *(_DWORD *)(a4 + 336) = v296;
            v297 = v295 ^ v283;
            v298 = *(_DWORD *)(a4 + 308) ^ v296;
            *(_DWORD *)(a4 + 340) = v298;
            v299 = v297 ^ v284;
            v300 = *(_DWORD *)(a4 + 312) ^ v298;
            *(_DWORD *)(a4 + 344) = v300;
            v301 = v299 ^ v285;
            *(_DWORD *)(a4 + 348) = *(_DWORD *)(a4 + 316) ^ v300;
            v302 = dword_4CD69C ^ dword_4CF308[(unsigned int)v301 >> 24] ^ dword_4CEF08[(unsigned __int8)v301] ^ dword_4CEB08[(unsigned __int16)((_WORD)v301 >> 8)] ^ dword_4CE708[((unsigned int)v301 >> 16) & 0xFF];
            v303 = v302 ^ v287;
            v304 = *(_DWORD *)(a4 + 320) ^ dword_4D2308[(unsigned __int8)v302] ^ dword_4D1F08[(unsigned __int16)((_WORD)v302 >> 8)] ^ dword_4D1B08[((unsigned int)v302 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v302 >> 24];
            *(_DWORD *)(a4 + 352) = v304;
            v305 = v303 ^ v289;
            v306 = *(_DWORD *)(a4 + 324) ^ v304;
            *(_DWORD *)(a4 + 356) = v306;
            v307 = v305 ^ v291;
            v308 = *(_DWORD *)(a4 + 328) ^ v306;
            *(_DWORD *)(a4 + 360) = v308;
            v309 = v307 ^ v293;
            *(_DWORD *)(a4 + 364) = *(_DWORD *)(a4 + 332) ^ v308;
            v310 = dword_4CF308[(unsigned __int8)v309] ^ dword_4CEF08[(unsigned __int16)((_WORD)v309 >> 8)] ^ dword_4CEB08[((unsigned int)v309 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v309 >> 24];
            v311 = v310 ^ v295;
            v312 = *(_DWORD *)(a4 + 336) ^ dword_4D2308[(unsigned __int8)v310] ^ dword_4D1F08[(unsigned __int16)((_WORD)v310 >> 8)] ^ dword_4D1B08[((unsigned int)v310 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v310 >> 24];
            *(_DWORD *)(a4 + 368) = v312;
            v313 = v311 ^ v297;
            v314 = *(_DWORD *)(a4 + 340) ^ v312;
            *(_DWORD *)(a4 + 372) = v314;
            v315 = v313 ^ v299;
            v316 = *(_DWORD *)(a4 + 344) ^ v314;
            *(_DWORD *)(a4 + 376) = v316;
            v317 = v315 ^ v301;
            *(_DWORD *)(a4 + 380) = *(_DWORD *)(a4 + 348) ^ v316;
            v318 = dword_4CD6A0 ^ dword_4CF308[(unsigned int)v317 >> 24] ^ dword_4CEF08[(unsigned __int8)v317] ^ dword_4CEB08[(unsigned __int16)((_WORD)v317 >> 8)] ^ dword_4CE708[((unsigned int)v317 >> 16) & 0xFF];
            v319 = v318 ^ v303;
            v320 = *(_DWORD *)(a4 + 352) ^ dword_4D2308[(unsigned __int8)v318] ^ dword_4D1F08[(unsigned __int16)((_WORD)v318 >> 8)] ^ dword_4D1B08[((unsigned int)v318 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v318 >> 24];
            *(_DWORD *)(a4 + 384) = v320;
            v321 = v319 ^ v305;
            v322 = *(_DWORD *)(a4 + 356) ^ v320;
            *(_DWORD *)(a4 + 388) = v322;
            v323 = v321 ^ v307;
            v324 = *(_DWORD *)(a4 + 360) ^ v322;
            *(_DWORD *)(a4 + 392) = v324;
            v325 = v323 ^ v309;
            *(_DWORD *)(a4 + 396) = *(_DWORD *)(a4 + 364) ^ v324;
            v326 = dword_4CF308[(unsigned __int8)v325] ^ dword_4CEF08[(unsigned __int16)((_WORD)v325 >> 8)] ^ dword_4CEB08[((unsigned int)v325 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v325 >> 24];
            v327 = v326 ^ v311;
            v328 = *(_DWORD *)(a4 + 368) ^ dword_4D2308[(unsigned __int8)v326] ^ dword_4D1F08[(unsigned __int16)((_WORD)v326 >> 8)] ^ dword_4D1B08[((unsigned int)v326 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v326 >> 24];
            *(_DWORD *)(a4 + 400) = v328;
            v329 = v327 ^ v313;
            v330 = *(_DWORD *)(a4 + 372) ^ v328;
            *(_DWORD *)(a4 + 404) = v330;
            v331 = v329 ^ v315;
            v332 = *(_DWORD *)(a4 + 376) ^ v330;
            *(_DWORD *)(a4 + 408) = v332;
            v333 = v331 ^ v317;
            *(_DWORD *)(a4 + 412) = *(_DWORD *)(a4 + 380) ^ v332;
            v334 = dword_4CD6A4 ^ dword_4CF308[(unsigned int)v333 >> 24] ^ dword_4CEF08[(unsigned __int8)v333] ^ dword_4CEB08[(unsigned __int16)((_WORD)v333 >> 8)] ^ dword_4CE708[((unsigned int)v333 >> 16) & 0xFF];
            v335 = v334 ^ v319;
            v336 = *(_DWORD *)(a4 + 384) ^ dword_4D2308[(unsigned __int8)v334] ^ dword_4D1F08[(unsigned __int16)((_WORD)v334 >> 8)] ^ dword_4D1B08[((unsigned int)v334 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v334 >> 24];
            *(_DWORD *)(a4 + 416) = v336;
            v337 = v335 ^ v321;
            v338 = *(_DWORD *)(a4 + 388) ^ v336;
            *(_DWORD *)(a4 + 420) = v338;
            v339 = v337 ^ v323;
            v340 = *(_DWORD *)(a4 + 392) ^ v338;
            *(_DWORD *)(a4 + 424) = v340;
            v341 = v339 ^ v325;
            *(_DWORD *)(a4 + 428) = *(_DWORD *)(a4 + 396) ^ v340;
            v342 = dword_4CF308[(unsigned __int8)v341] ^ dword_4CEF08[(unsigned __int16)((_WORD)v341 >> 8)] ^ dword_4CEB08[((unsigned int)v341 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v341 >> 24];
            v343 = v342 ^ v327;
            v344 = *(_DWORD *)(a4 + 400) ^ dword_4D2308[(unsigned __int8)v342] ^ dword_4D1F08[(unsigned __int16)((_WORD)v342 >> 8)] ^ dword_4D1B08[((unsigned int)v342 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v342 >> 24];
            *(_DWORD *)(a4 + 432) = v344;
            v345 = v343 ^ v329;
            v346 = *(_DWORD *)(a4 + 404) ^ v344;
            *(_DWORD *)(a4 + 436) = v346;
            v347 = v345 ^ v331;
            v348 = *(_DWORD *)(a4 + 408) ^ v346;
            *(_DWORD *)(a4 + 440) = v348;
            v349 = v347 ^ v333;
            *(_DWORD *)(a4 + 444) = *(_DWORD *)(a4 + 412) ^ v348;
            v350 = dword_4CD6A8 ^ dword_4CF308[(unsigned int)v349 >> 24] ^ dword_4CEF08[(unsigned __int8)v349] ^ dword_4CEB08[(unsigned __int16)((_WORD)v349 >> 8)] ^ dword_4CE708[((unsigned int)v349 >> 16) & 0xFF];
            v351 = v350 ^ v335;
            v352 = *(_DWORD *)(a4 + 416) ^ dword_4D2308[(unsigned __int8)v350] ^ dword_4D1F08[(unsigned __int16)((_WORD)v350 >> 8)] ^ dword_4D1B08[((unsigned int)v350 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v350 >> 24];
            *(_DWORD *)(a4 + 448) = v352;
            v353 = v351 ^ v337;
            v354 = *(_DWORD *)(a4 + 420) ^ v352;
            *(_DWORD *)(a4 + 452) = v354;
            v355 = v353 ^ v339;
            v356 = *(_DWORD *)(a4 + 424) ^ v354;
            *(_DWORD *)(a4 + 456) = v356;
            v357 = v355 ^ v341;
            *(_DWORD *)(a4 + 460) = *(_DWORD *)(a4 + 428) ^ v356;
            v358 = dword_4CF308[(unsigned __int8)v357] ^ dword_4CEF08[(unsigned __int16)((_WORD)v357 >> 8)] ^ dword_4CEB08[((unsigned int)v357 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v357 >> 24];
            v359 = v358 ^ v343;
            v360 = *(_DWORD *)(a4 + 432) ^ dword_4D2308[(unsigned __int8)v358] ^ dword_4D1F08[(unsigned __int16)((_WORD)v358 >> 8)] ^ dword_4D1B08[((unsigned int)v358 >> 16) & 0xFF] ^ dword_4D1708[(unsigned int)v358 >> 24];
            *(_DWORD *)(a4 + 464) = v360;
            v361 = *(_DWORD *)(a4 + 436) ^ v360;
            *(_DWORD *)(a4 + 468) = v361;
            v362 = *(_DWORD *)(a4 + 440) ^ v361;
            *(_DWORD *)(a4 + 472) = v362;
            v363 = v359 ^ v345 ^ v347 ^ v349;
            *(_DWORD *)(a4 + 476) = *(_DWORD *)(a4 + 444) ^ v362;
            v364 = dword_4CD6AC ^ dword_4CF308[(unsigned int)v363 >> 24] ^ dword_4CEF08[(unsigned __int8)v363] ^ dword_4CEB08[(unsigned __int16)((_WORD)v363 >> 8)] ^ dword_4CE708[((unsigned int)v363 >> 16) & 0xFF] ^ v351;
            *(_DWORD *)(a4 + 480) = v364;
            v365 = v364 ^ v353;
            *(_DWORD *)(a4 + 484) = v365;
            v366 = v365 ^ v355;
            *(_DWORD *)(a4 + 488) = v366;
            *(_DWORD *)(a4 + 492) = v366 ^ v357;
            *(_DWORD *)(a4 + 512) = 8;
            *(_DWORD *)(a4 + 516) = 14;
            goto LABEL_17;
          case 0:
            v4 = 4 * *(_DWORD *)(a4 + 512);
            break;
          default:
            *(_BYTE *)(a4 + 520) &= 0xFCu;
            LOWORD(v4) = 0;
            break;
        }
      }
      else
      {
LABEL_17:
        LOWORD(v4) = 1;
      }
    }
  }
  else
  {
    LOWORD(v4) = 0;
  }
  return v4;
}
// 4CD694: using guessed type int dword_4CD694;
// 4CD698: using guessed type int dword_4CD698;
// 4CD69C: using guessed type int dword_4CD69C;
// 4CD6A0: using guessed type int dword_4CD6A0;
// 4CD6A4: using guessed type int dword_4CD6A4;
// 4CD6A8: using guessed type int dword_4CD6A8;
// 4CD6AC: using guessed type int dword_4CD6AC;
// 4CD6B0: using guessed type int dword_4CD6B0;
// 4CD6B4: using guessed type int dword_4CD6B4;
// 4CD6B8: using guessed type int dword_4CD6B8;
// 4CE708: using guessed type int dword_4CE708[];
// 4CEB08: using guessed type int dword_4CEB08[];
// 4CEF08: using guessed type int dword_4CEF08[];
// 4CF308: using guessed type int dword_4CF308[];
// 4D1708: using guessed type int dword_4D1708[];
// 4D1B08: using guessed type int dword_4D1B08[];
// 4D1F08: using guessed type int dword_4D1F08[];
// 4D2308: using guessed type int dword_4D2308[];

//----- (0049C998) --------------------------------------------------------
signed __int16 __cdecl sub_49C998(int a1, int a2, int a3)
{
  int v4; // ST08_4@9
  int v5; // ST0C_4@9
  int v6; // ST10_4@9
  int v7; // ST14_4@9
  int v8; // ST08_4@10
  int v9; // ST0C_4@10
  int v10; // ST10_4@10
  int v11; // ST14_4@10
  int v12; // ST08_4@11
  int v13; // ST0C_4@11
  int v14; // ST10_4@11
  int v15; // ST14_4@11
  int v16; // ST18_4@11
  int v17; // ST1C_4@11
  int v18; // ST20_4@11
  int v19; // ST24_4@11
  int v20; // ST08_4@11
  int v21; // ST0C_4@11
  int v22; // ST10_4@11
  int v23; // ST14_4@11
  int v24; // ST18_4@11
  int v25; // ST1C_4@11
  int v26; // ST20_4@11
  int v27; // ST24_4@11
  int v28; // ST08_4@11
  int v29; // ST0C_4@11
  int v30; // ST10_4@11
  int v31; // ST14_4@11
  int v32; // ST18_4@11
  int v33; // ST1C_4@11
  int v34; // ST20_4@11
  int v35; // ST24_4@11
  int v36; // ST08_4@11
  int v37; // ST0C_4@11
  int v38; // ST10_4@11
  int v39; // ST14_4@11
  int v40; // ST18_4@11
  int v41; // ST1C_4@11
  int v42; // ST20_4@11
  int v43; // ST24_4@11
  int v44; // ST08_4@11
  int v45; // ST0C_4@11
  int v46; // ST10_4@11
  int v47; // ST14_4@11
  int v48; // [sp+0h] [bp-28h]@5
  int v49; // [sp+14h] [bp-14h]@5
  int v50; // [sp+18h] [bp-10h]@5
  int v51; // [sp+1Ch] [bp-Ch]@5
  int v52; // [sp+20h] [bp-8h]@5
  int v53; // [sp+24h] [bp-4h]@5

  if ( !(*(_BYTE *)(a3 + 520) & 1) )
    return 0;
  if ( !(*(_BYTE *)(a3 + 520) & 1) )
  {
    sub_498920(a3);
    *(_BYTE *)(a3 + 520) ^= 3u;
  }
  v49 = *(_DWORD *)a3 ^ *(_DWORD *)a1;
  v50 = *(_DWORD *)(a3 + 4) ^ *(_DWORD *)(a1 + 4);
  v51 = *(_DWORD *)(a3 + 8) ^ *(_DWORD *)(a1 + 8);
  v52 = *(_DWORD *)(a3 + 12) ^ *(_DWORD *)(a1 + 12);
  v53 = a3 + 4 * (4 * *(_DWORD *)(a3 + 516) - 36);
  v48 = *(_DWORD *)(a3 + 516);
  if ( v48 != 10 )
  {
    if ( v48 != 12 )
    {
      if ( v48 != 14 )
        goto LABEL_12;
      v4 = dword_4CE308[(unsigned __int8)v52] ^ dword_4CDF08[(unsigned __int16)((_WORD)v51 >> 8)] ^ dword_4CDB08[((unsigned int)v50 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v49 >> 24] ^ *(_DWORD *)(v53 - 64);
      v5 = dword_4CE308[(unsigned __int8)v49] ^ dword_4CDF08[(unsigned __int16)((_WORD)v52 >> 8)] ^ dword_4CDB08[((unsigned int)v51 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v50 >> 24] ^ *(_DWORD *)(v53 - 60);
      v6 = dword_4CE308[(unsigned __int8)v50] ^ dword_4CDF08[(unsigned __int16)((_WORD)v49 >> 8)] ^ dword_4CDB08[((unsigned int)v52 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v51 >> 24] ^ *(_DWORD *)(v53 - 56);
      v7 = dword_4CE308[(unsigned __int8)v51] ^ dword_4CDF08[(unsigned __int16)((_WORD)v50 >> 8)] ^ dword_4CDB08[((unsigned int)v49 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v52 >> 24] ^ *(_DWORD *)(v53 - 52);
      v49 = dword_4CE308[(unsigned __int8)v7] ^ dword_4CDF08[(unsigned __int16)((_WORD)v6 >> 8)] ^ dword_4CDB08[((unsigned int)v5 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v4 >> 24] ^ *(_DWORD *)(v53 - 48);
      v50 = dword_4CE308[(unsigned __int8)v4] ^ dword_4CDF08[(unsigned __int16)((_WORD)v7 >> 8)] ^ dword_4CDB08[((unsigned int)v6 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v5 >> 24] ^ *(_DWORD *)(v53 - 44);
      v51 = dword_4CE308[(unsigned __int8)v5] ^ dword_4CDF08[(unsigned __int16)((_WORD)v4 >> 8)] ^ dword_4CDB08[((unsigned int)v7 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v6 >> 24] ^ *(_DWORD *)(v53 - 40);
      v52 = dword_4CE308[(unsigned __int8)v6] ^ dword_4CDF08[(unsigned __int16)((_WORD)v5 >> 8)] ^ dword_4CDB08[((unsigned int)v4 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v7 >> 24] ^ *(_DWORD *)(v53 - 36);
    }
    v8 = dword_4CE308[(unsigned __int8)v52] ^ dword_4CDF08[(unsigned __int16)((_WORD)v51 >> 8)] ^ dword_4CDB08[((unsigned int)v50 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v49 >> 24] ^ *(_DWORD *)(v53 - 32);
    v9 = dword_4CE308[(unsigned __int8)v49] ^ dword_4CDF08[(unsigned __int16)((_WORD)v52 >> 8)] ^ dword_4CDB08[((unsigned int)v51 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v50 >> 24] ^ *(_DWORD *)(v53 - 28);
    v10 = dword_4CE308[(unsigned __int8)v50] ^ dword_4CDF08[(unsigned __int16)((_WORD)v49 >> 8)] ^ dword_4CDB08[((unsigned int)v52 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v51 >> 24] ^ *(_DWORD *)(v53 - 24);
    v11 = dword_4CE308[(unsigned __int8)v51] ^ dword_4CDF08[(unsigned __int16)((_WORD)v50 >> 8)] ^ dword_4CDB08[((unsigned int)v49 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v52 >> 24] ^ *(_DWORD *)(v53 - 20);
    v49 = dword_4CE308[(unsigned __int8)v11] ^ dword_4CDF08[(unsigned __int16)((_WORD)v10 >> 8)] ^ dword_4CDB08[((unsigned int)v9 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v8 >> 24] ^ *(_DWORD *)(v53 - 16);
    v50 = dword_4CE308[(unsigned __int8)v8] ^ dword_4CDF08[(unsigned __int16)((_WORD)v11 >> 8)] ^ dword_4CDB08[((unsigned int)v10 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v9 >> 24] ^ *(_DWORD *)(v53 - 12);
    v51 = dword_4CE308[(unsigned __int8)v9] ^ dword_4CDF08[(unsigned __int16)((_WORD)v8 >> 8)] ^ dword_4CDB08[((unsigned int)v11 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v10 >> 24] ^ *(_DWORD *)(v53 - 8);
    v52 = dword_4CE308[(unsigned __int8)v10] ^ dword_4CDF08[(unsigned __int16)((_WORD)v9 >> 8)] ^ dword_4CDB08[((unsigned int)v8 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v11 >> 24] ^ *(_DWORD *)(v53 - 4);
  }
  v12 = dword_4CE308[(unsigned __int8)v52] ^ dword_4CDF08[(unsigned __int16)((_WORD)v51 >> 8)] ^ dword_4CDB08[((unsigned int)v50 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v49 >> 24] ^ *(_DWORD *)v53;
  v13 = dword_4CE308[(unsigned __int8)v49] ^ dword_4CDF08[(unsigned __int16)((_WORD)v52 >> 8)] ^ dword_4CDB08[((unsigned int)v51 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v50 >> 24] ^ *(_DWORD *)(v53 + 4);
  v14 = dword_4CE308[(unsigned __int8)v50] ^ dword_4CDF08[(unsigned __int16)((_WORD)v49 >> 8)] ^ dword_4CDB08[((unsigned int)v52 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v51 >> 24] ^ *(_DWORD *)(v53 + 8);
  v15 = dword_4CE308[(unsigned __int8)v51] ^ dword_4CDF08[(unsigned __int16)((_WORD)v50 >> 8)] ^ dword_4CDB08[((unsigned int)v49 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v52 >> 24] ^ *(_DWORD *)(v53 + 12);
  v16 = dword_4CE308[(unsigned __int8)v15] ^ dword_4CDF08[(unsigned __int16)((_WORD)v14 >> 8)] ^ dword_4CDB08[((unsigned int)v13 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v12 >> 24] ^ *(_DWORD *)(v53 + 16);
  v17 = dword_4CE308[(unsigned __int8)v12] ^ dword_4CDF08[(unsigned __int16)((_WORD)v15 >> 8)] ^ dword_4CDB08[((unsigned int)v14 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v13 >> 24] ^ *(_DWORD *)(v53 + 20);
  v18 = dword_4CE308[(unsigned __int8)v13] ^ dword_4CDF08[(unsigned __int16)((_WORD)v12 >> 8)] ^ dword_4CDB08[((unsigned int)v15 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v14 >> 24] ^ *(_DWORD *)(v53 + 24);
  v19 = dword_4CE308[(unsigned __int8)v14] ^ dword_4CDF08[(unsigned __int16)((_WORD)v13 >> 8)] ^ dword_4CDB08[((unsigned int)v12 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v15 >> 24] ^ *(_DWORD *)(v53 + 28);
  v20 = dword_4CE308[(unsigned __int8)v19] ^ dword_4CDF08[(unsigned __int16)((_WORD)v18 >> 8)] ^ dword_4CDB08[((unsigned int)v17 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v16 >> 24] ^ *(_DWORD *)(v53 + 32);
  v21 = dword_4CE308[(unsigned __int8)v16] ^ dword_4CDF08[(unsigned __int16)((_WORD)v19 >> 8)] ^ dword_4CDB08[((unsigned int)v18 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v17 >> 24] ^ *(_DWORD *)(v53 + 36);
  v22 = dword_4CE308[(unsigned __int8)v17] ^ dword_4CDF08[(unsigned __int16)((_WORD)v16 >> 8)] ^ dword_4CDB08[((unsigned int)v19 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v18 >> 24] ^ *(_DWORD *)(v53 + 40);
  v23 = dword_4CE308[(unsigned __int8)v18] ^ dword_4CDF08[(unsigned __int16)((_WORD)v17 >> 8)] ^ dword_4CDB08[((unsigned int)v16 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v19 >> 24] ^ *(_DWORD *)(v53 + 44);
  v24 = dword_4CE308[(unsigned __int8)v23] ^ dword_4CDF08[(unsigned __int16)((_WORD)v22 >> 8)] ^ dword_4CDB08[((unsigned int)v21 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v20 >> 24] ^ *(_DWORD *)(v53 + 48);
  v25 = dword_4CE308[(unsigned __int8)v20] ^ dword_4CDF08[(unsigned __int16)((_WORD)v23 >> 8)] ^ dword_4CDB08[((unsigned int)v22 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v21 >> 24] ^ *(_DWORD *)(v53 + 52);
  v26 = dword_4CE308[(unsigned __int8)v21] ^ dword_4CDF08[(unsigned __int16)((_WORD)v20 >> 8)] ^ dword_4CDB08[((unsigned int)v23 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v22 >> 24] ^ *(_DWORD *)(v53 + 56);
  v27 = dword_4CE308[(unsigned __int8)v22] ^ dword_4CDF08[(unsigned __int16)((_WORD)v21 >> 8)] ^ dword_4CDB08[((unsigned int)v20 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v23 >> 24] ^ *(_DWORD *)(v53 + 60);
  v28 = dword_4CE308[(unsigned __int8)v27] ^ dword_4CDF08[(unsigned __int16)((_WORD)v26 >> 8)] ^ dword_4CDB08[((unsigned int)v25 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v24 >> 24] ^ *(_DWORD *)(v53 + 64);
  v29 = dword_4CE308[(unsigned __int8)v24] ^ dword_4CDF08[(unsigned __int16)((_WORD)v27 >> 8)] ^ dword_4CDB08[((unsigned int)v26 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v25 >> 24] ^ *(_DWORD *)(v53 + 68);
  v30 = dword_4CE308[(unsigned __int8)v25] ^ dword_4CDF08[(unsigned __int16)((_WORD)v24 >> 8)] ^ dword_4CDB08[((unsigned int)v27 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v26 >> 24] ^ *(_DWORD *)(v53 + 72);
  v31 = dword_4CE308[(unsigned __int8)v26] ^ dword_4CDF08[(unsigned __int16)((_WORD)v25 >> 8)] ^ dword_4CDB08[((unsigned int)v24 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v27 >> 24] ^ *(_DWORD *)(v53 + 76);
  v32 = dword_4CE308[(unsigned __int8)v31] ^ dword_4CDF08[(unsigned __int16)((_WORD)v30 >> 8)] ^ dword_4CDB08[((unsigned int)v29 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v28 >> 24] ^ *(_DWORD *)(v53 + 80);
  v33 = dword_4CE308[(unsigned __int8)v28] ^ dword_4CDF08[(unsigned __int16)((_WORD)v31 >> 8)] ^ dword_4CDB08[((unsigned int)v30 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v29 >> 24] ^ *(_DWORD *)(v53 + 84);
  v34 = dword_4CE308[(unsigned __int8)v29] ^ dword_4CDF08[(unsigned __int16)((_WORD)v28 >> 8)] ^ dword_4CDB08[((unsigned int)v31 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v30 >> 24] ^ *(_DWORD *)(v53 + 88);
  v35 = dword_4CE308[(unsigned __int8)v30] ^ dword_4CDF08[(unsigned __int16)((_WORD)v29 >> 8)] ^ dword_4CDB08[((unsigned int)v28 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v31 >> 24] ^ *(_DWORD *)(v53 + 92);
  v36 = dword_4CE308[(unsigned __int8)v35] ^ dword_4CDF08[(unsigned __int16)((_WORD)v34 >> 8)] ^ dword_4CDB08[((unsigned int)v33 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v32 >> 24] ^ *(_DWORD *)(v53 + 96);
  v37 = dword_4CE308[(unsigned __int8)v32] ^ dword_4CDF08[(unsigned __int16)((_WORD)v35 >> 8)] ^ dword_4CDB08[((unsigned int)v34 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v33 >> 24] ^ *(_DWORD *)(v53 + 100);
  v38 = dword_4CE308[(unsigned __int8)v33] ^ dword_4CDF08[(unsigned __int16)((_WORD)v32 >> 8)] ^ dword_4CDB08[((unsigned int)v35 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v34 >> 24] ^ *(_DWORD *)(v53 + 104);
  v39 = dword_4CE308[(unsigned __int8)v34] ^ dword_4CDF08[(unsigned __int16)((_WORD)v33 >> 8)] ^ dword_4CDB08[((unsigned int)v32 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v35 >> 24] ^ *(_DWORD *)(v53 + 108);
  v40 = dword_4CE308[(unsigned __int8)v39] ^ dword_4CDF08[(unsigned __int16)((_WORD)v38 >> 8)] ^ dword_4CDB08[((unsigned int)v37 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v36 >> 24] ^ *(_DWORD *)(v53 + 112);
  v41 = dword_4CE308[(unsigned __int8)v36] ^ dword_4CDF08[(unsigned __int16)((_WORD)v39 >> 8)] ^ dword_4CDB08[((unsigned int)v38 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v37 >> 24] ^ *(_DWORD *)(v53 + 116);
  v42 = dword_4CE308[(unsigned __int8)v37] ^ dword_4CDF08[(unsigned __int16)((_WORD)v36 >> 8)] ^ dword_4CDB08[((unsigned int)v39 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v38 >> 24] ^ *(_DWORD *)(v53 + 120);
  v43 = dword_4CE308[(unsigned __int8)v38] ^ dword_4CDF08[(unsigned __int16)((_WORD)v37 >> 8)] ^ dword_4CDB08[((unsigned int)v36 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v39 >> 24] ^ *(_DWORD *)(v53 + 124);
  v44 = dword_4CE308[(unsigned __int8)v43] ^ dword_4CDF08[(unsigned __int16)((_WORD)v42 >> 8)] ^ dword_4CDB08[((unsigned int)v41 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v40 >> 24] ^ *(_DWORD *)(v53 + 128);
  v45 = dword_4CE308[(unsigned __int8)v40] ^ dword_4CDF08[(unsigned __int16)((_WORD)v43 >> 8)] ^ dword_4CDB08[((unsigned int)v42 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v41 >> 24] ^ *(_DWORD *)(v53 + 132);
  v46 = dword_4CE308[(unsigned __int8)v41] ^ dword_4CDF08[(unsigned __int16)((_WORD)v40 >> 8)] ^ dword_4CDB08[((unsigned int)v43 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v42 >> 24] ^ *(_DWORD *)(v53 + 136);
  v47 = dword_4CE308[(unsigned __int8)v42] ^ dword_4CDF08[(unsigned __int16)((_WORD)v41 >> 8)] ^ dword_4CDB08[((unsigned int)v40 >> 16) & 0xFF] ^ dword_4CD708[(unsigned int)v43 >> 24] ^ *(_DWORD *)(v53 + 140);
  v49 = dword_4CF308[(unsigned __int8)v47] ^ dword_4CEF08[(unsigned __int16)((_WORD)v46 >> 8)] ^ dword_4CEB08[((unsigned int)v45 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v44 >> 24] ^ *(_DWORD *)(v53 + 144);
  v50 = dword_4CF308[(unsigned __int8)v44] ^ dword_4CEF08[(unsigned __int16)((_WORD)v47 >> 8)] ^ dword_4CEB08[((unsigned int)v46 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v45 >> 24] ^ *(_DWORD *)(v53 + 148);
  v51 = dword_4CF308[(unsigned __int8)v45] ^ dword_4CEF08[(unsigned __int16)((_WORD)v44 >> 8)] ^ dword_4CEB08[((unsigned int)v47 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v46 >> 24] ^ *(_DWORD *)(v53 + 152);
  v52 = dword_4CF308[(unsigned __int8)v46] ^ dword_4CEF08[(unsigned __int16)((_WORD)v45 >> 8)] ^ dword_4CEB08[((unsigned int)v44 >> 16) & 0xFF] ^ dword_4CE708[(unsigned int)v47 >> 24] ^ *(_DWORD *)(v53 + 156);
LABEL_12:
  *(_DWORD *)a2 = v49;
  *(_DWORD *)(a2 + 4) = v50;
  *(_DWORD *)(a2 + 8) = v51;
  *(_DWORD *)(a2 + 12) = v52;
  return 1;
}
// 4CD708: using guessed type int dword_4CD708[];
// 4CDB08: using guessed type int dword_4CDB08[];
// 4CDF08: using guessed type int dword_4CDF08[];
// 4CE308: using guessed type int dword_4CE308[];
// 4CE708: using guessed type int dword_4CE708[];
// 4CEB08: using guessed type int dword_4CEB08[];
// 4CEF08: using guessed type int dword_4CEF08[];
// 4CF308: using guessed type int dword_4CF308[];

//----- (0049DCC7) --------------------------------------------------------
signed __int16 __cdecl sub_49DCC7(int a1, int a2, int a3)
{
  int v4; // ST08_4@9
  int v5; // ST0C_4@9
  int v6; // ST10_4@9
  int v7; // ST14_4@9
  int v8; // ST08_4@10
  int v9; // ST0C_4@10
  int v10; // ST10_4@10
  int v11; // ST14_4@10
  int v12; // ST08_4@11
  int v13; // ST0C_4@11
  int v14; // ST10_4@11
  int v15; // ST14_4@11
  int v16; // ST18_4@11
  int v17; // ST1C_4@11
  int v18; // ST20_4@11
  int v19; // ST24_4@11
  int v20; // ST08_4@11
  int v21; // ST0C_4@11
  int v22; // ST10_4@11
  int v23; // ST14_4@11
  int v24; // ST18_4@11
  int v25; // ST1C_4@11
  int v26; // ST20_4@11
  int v27; // ST24_4@11
  int v28; // ST08_4@11
  int v29; // ST0C_4@11
  int v30; // ST10_4@11
  int v31; // ST14_4@11
  int v32; // ST18_4@11
  int v33; // ST1C_4@11
  int v34; // ST20_4@11
  int v35; // ST24_4@11
  int v36; // ST08_4@11
  int v37; // ST0C_4@11
  int v38; // ST10_4@11
  int v39; // ST14_4@11
  int v40; // ST18_4@11
  int v41; // ST1C_4@11
  int v42; // ST20_4@11
  int v43; // ST24_4@11
  int v44; // ST08_4@11
  int v45; // ST0C_4@11
  int v46; // ST10_4@11
  int v47; // ST14_4@11
  int v48; // [sp+0h] [bp-28h]@5
  int v49; // [sp+14h] [bp-14h]@5
  int v50; // [sp+18h] [bp-10h]@5
  int v51; // [sp+1Ch] [bp-Ch]@5
  int v52; // [sp+20h] [bp-8h]@5
  int v53; // [sp+24h] [bp-4h]@1

  v53 = a3 + 16 * *(_DWORD *)(a3 + 516) + 256;
  if ( !(*(_BYTE *)(a3 + 520) & 2) )
    return 0;
  if ( !(*(_BYTE *)(a3 + 520) & 2) )
  {
    sub_498920(a3);
    *(_BYTE *)(a3 + 520) ^= 3u;
  }
  v49 = *(_DWORD *)v53 ^ *(_DWORD *)a1;
  v50 = *(_DWORD *)(v53 + 4) ^ *(_DWORD *)(a1 + 4);
  v51 = *(_DWORD *)(v53 + 8) ^ *(_DWORD *)(a1 + 8);
  v52 = *(_DWORD *)(v53 + 12) ^ *(_DWORD *)(a1 + 12);
  v48 = *(_DWORD *)(a3 + 516);
  if ( v48 != 10 )
  {
    if ( v48 != 12 )
    {
      if ( v48 != 14 )
        goto LABEL_12;
      v4 = dword_4D0308[(unsigned __int8)v50] ^ dword_4CFF08[(unsigned __int16)((_WORD)v51 >> 8)] ^ dword_4CFB08[((unsigned int)v52 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v49 >> 24] ^ *(_DWORD *)(a3 + 464);
      v5 = dword_4D0308[(unsigned __int8)v51] ^ dword_4CFF08[(unsigned __int16)((_WORD)v52 >> 8)] ^ dword_4CFB08[((unsigned int)v49 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v50 >> 24] ^ *(_DWORD *)(a3 + 468);
      v6 = dword_4D0308[(unsigned __int8)v52] ^ dword_4CFF08[(unsigned __int16)((_WORD)v49 >> 8)] ^ dword_4CFB08[((unsigned int)v50 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v51 >> 24] ^ *(_DWORD *)(a3 + 472);
      v7 = dword_4D0308[(unsigned __int8)v49] ^ dword_4CFF08[(unsigned __int16)((_WORD)v50 >> 8)] ^ dword_4CFB08[((unsigned int)v51 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v52 >> 24] ^ *(_DWORD *)(a3 + 476);
      v49 = dword_4D0308[(unsigned __int8)v5] ^ dword_4CFF08[(unsigned __int16)((_WORD)v6 >> 8)] ^ dword_4CFB08[((unsigned int)v7 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v4 >> 24] ^ *(_DWORD *)(a3 + 448);
      v50 = dword_4D0308[(unsigned __int8)v6] ^ dword_4CFF08[(unsigned __int16)((_WORD)v7 >> 8)] ^ dword_4CFB08[((unsigned int)v4 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v5 >> 24] ^ *(_DWORD *)(a3 + 452);
      v51 = dword_4D0308[(unsigned __int8)v7] ^ dword_4CFF08[(unsigned __int16)((_WORD)v4 >> 8)] ^ dword_4CFB08[((unsigned int)v5 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v6 >> 24] ^ *(_DWORD *)(a3 + 456);
      v52 = dword_4D0308[(unsigned __int8)v4] ^ dword_4CFF08[(unsigned __int16)((_WORD)v5 >> 8)] ^ dword_4CFB08[((unsigned int)v6 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v7 >> 24] ^ *(_DWORD *)(a3 + 460);
    }
    v8 = dword_4D0308[(unsigned __int8)v50] ^ dword_4CFF08[(unsigned __int16)((_WORD)v51 >> 8)] ^ dword_4CFB08[((unsigned int)v52 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v49 >> 24] ^ *(_DWORD *)(a3 + 432);
    v9 = dword_4D0308[(unsigned __int8)v51] ^ dword_4CFF08[(unsigned __int16)((_WORD)v52 >> 8)] ^ dword_4CFB08[((unsigned int)v49 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v50 >> 24] ^ *(_DWORD *)(a3 + 436);
    v10 = dword_4D0308[(unsigned __int8)v52] ^ dword_4CFF08[(unsigned __int16)((_WORD)v49 >> 8)] ^ dword_4CFB08[((unsigned int)v50 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v51 >> 24] ^ *(_DWORD *)(a3 + 440);
    v11 = dword_4D0308[(unsigned __int8)v49] ^ dword_4CFF08[(unsigned __int16)((_WORD)v50 >> 8)] ^ dword_4CFB08[((unsigned int)v51 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v52 >> 24] ^ *(_DWORD *)(a3 + 444);
    v49 = dword_4D0308[(unsigned __int8)v9] ^ dword_4CFF08[(unsigned __int16)((_WORD)v10 >> 8)] ^ dword_4CFB08[((unsigned int)v11 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v8 >> 24] ^ *(_DWORD *)(a3 + 416);
    v50 = dword_4D0308[(unsigned __int8)v10] ^ dword_4CFF08[(unsigned __int16)((_WORD)v11 >> 8)] ^ dword_4CFB08[((unsigned int)v8 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v9 >> 24] ^ *(_DWORD *)(a3 + 420);
    v51 = dword_4D0308[(unsigned __int8)v11] ^ dword_4CFF08[(unsigned __int16)((_WORD)v8 >> 8)] ^ dword_4CFB08[((unsigned int)v9 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v10 >> 24] ^ *(_DWORD *)(a3 + 424);
    v52 = dword_4D0308[(unsigned __int8)v8] ^ dword_4CFF08[(unsigned __int16)((_WORD)v9 >> 8)] ^ dword_4CFB08[((unsigned int)v10 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v11 >> 24] ^ *(_DWORD *)(a3 + 428);
  }
  v12 = dword_4D0308[(unsigned __int8)v50] ^ dword_4CFF08[(unsigned __int16)((_WORD)v51 >> 8)] ^ dword_4CFB08[((unsigned int)v52 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v49 >> 24] ^ *(_DWORD *)(a3 + 400);
  v13 = dword_4D0308[(unsigned __int8)v51] ^ dword_4CFF08[(unsigned __int16)((_WORD)v52 >> 8)] ^ dword_4CFB08[((unsigned int)v49 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v50 >> 24] ^ *(_DWORD *)(a3 + 404);
  v14 = dword_4D0308[(unsigned __int8)v52] ^ dword_4CFF08[(unsigned __int16)((_WORD)v49 >> 8)] ^ dword_4CFB08[((unsigned int)v50 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v51 >> 24] ^ *(_DWORD *)(a3 + 408);
  v15 = dword_4D0308[(unsigned __int8)v49] ^ dword_4CFF08[(unsigned __int16)((_WORD)v50 >> 8)] ^ dword_4CFB08[((unsigned int)v51 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v52 >> 24] ^ *(_DWORD *)(a3 + 412);
  v16 = dword_4D0308[(unsigned __int8)v13] ^ dword_4CFF08[(unsigned __int16)((_WORD)v14 >> 8)] ^ dword_4CFB08[((unsigned int)v15 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v12 >> 24] ^ *(_DWORD *)(a3 + 384);
  v17 = dword_4D0308[(unsigned __int8)v14] ^ dword_4CFF08[(unsigned __int16)((_WORD)v15 >> 8)] ^ dword_4CFB08[((unsigned int)v12 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v13 >> 24] ^ *(_DWORD *)(a3 + 388);
  v18 = dword_4D0308[(unsigned __int8)v15] ^ dword_4CFF08[(unsigned __int16)((_WORD)v12 >> 8)] ^ dword_4CFB08[((unsigned int)v13 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v14 >> 24] ^ *(_DWORD *)(a3 + 392);
  v19 = dword_4D0308[(unsigned __int8)v12] ^ dword_4CFF08[(unsigned __int16)((_WORD)v13 >> 8)] ^ dword_4CFB08[((unsigned int)v14 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v15 >> 24] ^ *(_DWORD *)(a3 + 396);
  v20 = dword_4D0308[(unsigned __int8)v17] ^ dword_4CFF08[(unsigned __int16)((_WORD)v18 >> 8)] ^ dword_4CFB08[((unsigned int)v19 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v16 >> 24] ^ *(_DWORD *)(a3 + 368);
  v21 = dword_4D0308[(unsigned __int8)v18] ^ dword_4CFF08[(unsigned __int16)((_WORD)v19 >> 8)] ^ dword_4CFB08[((unsigned int)v16 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v17 >> 24] ^ *(_DWORD *)(a3 + 372);
  v22 = dword_4D0308[(unsigned __int8)v19] ^ dword_4CFF08[(unsigned __int16)((_WORD)v16 >> 8)] ^ dword_4CFB08[((unsigned int)v17 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v18 >> 24] ^ *(_DWORD *)(a3 + 376);
  v23 = dword_4D0308[(unsigned __int8)v16] ^ dword_4CFF08[(unsigned __int16)((_WORD)v17 >> 8)] ^ dword_4CFB08[((unsigned int)v18 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v19 >> 24] ^ *(_DWORD *)(a3 + 380);
  v24 = dword_4D0308[(unsigned __int8)v21] ^ dword_4CFF08[(unsigned __int16)((_WORD)v22 >> 8)] ^ dword_4CFB08[((unsigned int)v23 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v20 >> 24] ^ *(_DWORD *)(a3 + 352);
  v25 = dword_4D0308[(unsigned __int8)v22] ^ dword_4CFF08[(unsigned __int16)((_WORD)v23 >> 8)] ^ dword_4CFB08[((unsigned int)v20 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v21 >> 24] ^ *(_DWORD *)(a3 + 356);
  v26 = dword_4D0308[(unsigned __int8)v23] ^ dword_4CFF08[(unsigned __int16)((_WORD)v20 >> 8)] ^ dword_4CFB08[((unsigned int)v21 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v22 >> 24] ^ *(_DWORD *)(a3 + 360);
  v27 = dword_4D0308[(unsigned __int8)v20] ^ dword_4CFF08[(unsigned __int16)((_WORD)v21 >> 8)] ^ dword_4CFB08[((unsigned int)v22 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v23 >> 24] ^ *(_DWORD *)(a3 + 364);
  v28 = dword_4D0308[(unsigned __int8)v25] ^ dword_4CFF08[(unsigned __int16)((_WORD)v26 >> 8)] ^ dword_4CFB08[((unsigned int)v27 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v24 >> 24] ^ *(_DWORD *)(a3 + 336);
  v29 = dword_4D0308[(unsigned __int8)v26] ^ dword_4CFF08[(unsigned __int16)((_WORD)v27 >> 8)] ^ dword_4CFB08[((unsigned int)v24 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v25 >> 24] ^ *(_DWORD *)(a3 + 340);
  v30 = dword_4D0308[(unsigned __int8)v27] ^ dword_4CFF08[(unsigned __int16)((_WORD)v24 >> 8)] ^ dword_4CFB08[((unsigned int)v25 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v26 >> 24] ^ *(_DWORD *)(a3 + 344);
  v31 = dword_4D0308[(unsigned __int8)v24] ^ dword_4CFF08[(unsigned __int16)((_WORD)v25 >> 8)] ^ dword_4CFB08[((unsigned int)v26 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v27 >> 24] ^ *(_DWORD *)(a3 + 348);
  v32 = dword_4D0308[(unsigned __int8)v29] ^ dword_4CFF08[(unsigned __int16)((_WORD)v30 >> 8)] ^ dword_4CFB08[((unsigned int)v31 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v28 >> 24] ^ *(_DWORD *)(a3 + 320);
  v33 = dword_4D0308[(unsigned __int8)v30] ^ dword_4CFF08[(unsigned __int16)((_WORD)v31 >> 8)] ^ dword_4CFB08[((unsigned int)v28 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v29 >> 24] ^ *(_DWORD *)(a3 + 324);
  v34 = dword_4D0308[(unsigned __int8)v31] ^ dword_4CFF08[(unsigned __int16)((_WORD)v28 >> 8)] ^ dword_4CFB08[((unsigned int)v29 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v30 >> 24] ^ *(_DWORD *)(a3 + 328);
  v35 = dword_4D0308[(unsigned __int8)v28] ^ dword_4CFF08[(unsigned __int16)((_WORD)v29 >> 8)] ^ dword_4CFB08[((unsigned int)v30 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v31 >> 24] ^ *(_DWORD *)(a3 + 332);
  v36 = dword_4D0308[(unsigned __int8)v33] ^ dword_4CFF08[(unsigned __int16)((_WORD)v34 >> 8)] ^ dword_4CFB08[((unsigned int)v35 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v32 >> 24] ^ *(_DWORD *)(a3 + 304);
  v37 = dword_4D0308[(unsigned __int8)v34] ^ dword_4CFF08[(unsigned __int16)((_WORD)v35 >> 8)] ^ dword_4CFB08[((unsigned int)v32 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v33 >> 24] ^ *(_DWORD *)(a3 + 308);
  v38 = dword_4D0308[(unsigned __int8)v35] ^ dword_4CFF08[(unsigned __int16)((_WORD)v32 >> 8)] ^ dword_4CFB08[((unsigned int)v33 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v34 >> 24] ^ *(_DWORD *)(a3 + 312);
  v39 = dword_4D0308[(unsigned __int8)v32] ^ dword_4CFF08[(unsigned __int16)((_WORD)v33 >> 8)] ^ dword_4CFB08[((unsigned int)v34 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v35 >> 24] ^ *(_DWORD *)(a3 + 316);
  v40 = dword_4D0308[(unsigned __int8)v37] ^ dword_4CFF08[(unsigned __int16)((_WORD)v38 >> 8)] ^ dword_4CFB08[((unsigned int)v39 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v36 >> 24] ^ *(_DWORD *)(a3 + 288);
  v41 = dword_4D0308[(unsigned __int8)v38] ^ dword_4CFF08[(unsigned __int16)((_WORD)v39 >> 8)] ^ dword_4CFB08[((unsigned int)v36 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v37 >> 24] ^ *(_DWORD *)(a3 + 292);
  v42 = dword_4D0308[(unsigned __int8)v39] ^ dword_4CFF08[(unsigned __int16)((_WORD)v36 >> 8)] ^ dword_4CFB08[((unsigned int)v37 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v38 >> 24] ^ *(_DWORD *)(a3 + 296);
  v43 = dword_4D0308[(unsigned __int8)v36] ^ dword_4CFF08[(unsigned __int16)((_WORD)v37 >> 8)] ^ dword_4CFB08[((unsigned int)v38 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v39 >> 24] ^ *(_DWORD *)(a3 + 300);
  v44 = dword_4D0308[(unsigned __int8)v41] ^ dword_4CFF08[(unsigned __int16)((_WORD)v42 >> 8)] ^ dword_4CFB08[((unsigned int)v43 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v40 >> 24] ^ *(_DWORD *)(a3 + 272);
  v45 = dword_4D0308[(unsigned __int8)v42] ^ dword_4CFF08[(unsigned __int16)((_WORD)v43 >> 8)] ^ dword_4CFB08[((unsigned int)v40 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v41 >> 24] ^ *(_DWORD *)(a3 + 276);
  v46 = dword_4D0308[(unsigned __int8)v43] ^ dword_4CFF08[(unsigned __int16)((_WORD)v40 >> 8)] ^ dword_4CFB08[((unsigned int)v41 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v42 >> 24] ^ *(_DWORD *)(a3 + 280);
  v47 = dword_4D0308[(unsigned __int8)v40] ^ dword_4CFF08[(unsigned __int16)((_WORD)v41 >> 8)] ^ dword_4CFB08[((unsigned int)v42 >> 16) & 0xFF] ^ dword_4CF708[(unsigned int)v43 >> 24] ^ *(_DWORD *)(a3 + 284);
  v49 = dword_4D1308[(unsigned __int8)v45] ^ dword_4D0F08[(unsigned __int16)((_WORD)v46 >> 8)] ^ dword_4D0B08[((unsigned int)v47 >> 16) & 0xFF] ^ dword_4D0708[(unsigned int)v44 >> 24] ^ *(_DWORD *)(a3 + 256);
  v50 = dword_4D1308[(unsigned __int8)v46] ^ dword_4D0F08[(unsigned __int16)((_WORD)v47 >> 8)] ^ dword_4D0B08[((unsigned int)v44 >> 16) & 0xFF] ^ dword_4D0708[(unsigned int)v45 >> 24] ^ *(_DWORD *)(a3 + 260);
  v51 = dword_4D1308[(unsigned __int8)v47] ^ dword_4D0F08[(unsigned __int16)((_WORD)v44 >> 8)] ^ dword_4D0B08[((unsigned int)v45 >> 16) & 0xFF] ^ dword_4D0708[(unsigned int)v46 >> 24] ^ *(_DWORD *)(a3 + 264);
  v52 = dword_4D1308[(unsigned __int8)v44] ^ dword_4D0F08[(unsigned __int16)((_WORD)v45 >> 8)] ^ dword_4D0B08[((unsigned int)v46 >> 16) & 0xFF] ^ dword_4D0708[(unsigned int)v47 >> 24] ^ *(_DWORD *)(a3 + 268);
LABEL_12:
  *(_DWORD *)a2 = v49;
  *(_DWORD *)(a2 + 4) = v50;
  *(_DWORD *)(a2 + 8) = v51;
  *(_DWORD *)(a2 + 12) = v52;
  return 1;
}
// 4CF708: using guessed type int dword_4CF708[];
// 4CFB08: using guessed type int dword_4CFB08[];
// 4CFF08: using guessed type int dword_4CFF08[];
// 4D0308: using guessed type int dword_4D0308[];
// 4D0708: using guessed type int dword_4D0708[];
// 4D0B08: using guessed type int dword_4D0B08[];
// 4D0F08: using guessed type int dword_4D0F08[];
// 4D1308: using guessed type int dword_4D1308[];

//----- (0049EFED) --------------------------------------------------------
__int16 __cdecl sub_49EFED(int a1, int a2, int a3)
{
  return sub_4989CB(a2, a3, 1, a1);
}

//----- (0049F008) --------------------------------------------------------
__int16 __cdecl sub_49F008(int a1, int a2, int a3)
{
  return sub_4989CB(a2, a3, 2, a1);
}

//----- (0049F030) --------------------------------------------------------
void *__cdecl sub_49F030(int a1, void *a2, void *a3, void *a4, int a5)
{
  void *result; // eax@1
  char *v6; // [sp+0h] [bp-28h]@1
  int i; // [sp+4h] [bp-24h]@5
  char v8; // [sp+8h] [bp-20h]@3
  char v9[16]; // [sp+18h] [bp-10h]@3

  result = a4;
  v6 = (char *)a4 - 16;
  while ( (signed int)v6 >= 0 )
  {
    memcpy(v9, a3, 0x10u);
    sub_49C998((int)v9, (int)&v8, a1);
    memcpy(a2, &v8, 0x10u);
    v6 -= 16;
    result = (char *)a3 + 16;
    a3 = (char *)a3 + 16;
    a2 = (char *)a2 + 16;
  }
  if ( v6 != (char *)-16 )
  {
    memcpy(v9, a3, (size_t)(v6 + 16));
    for ( i = 0; i < (signed int)(v6 + 16); ++i )
      v9[i] ^= *(_BYTE *)(i + a5);
    result = memcpy(a2, v9, (size_t)(v6 + 16));
  }
  return result;
}
// 49F030: using guessed type char var_10[16];

//----- (0049F10F) --------------------------------------------------------
void *__cdecl sub_49F10F(int a1, void *a2, void *a3, void *a4, int a5)
{
  void *result; // eax@1
  char *v6; // [sp+0h] [bp-28h]@1
  int i; // [sp+4h] [bp-24h]@5
  char v8; // [sp+8h] [bp-20h]@3
  char v9[16]; // [sp+18h] [bp-10h]@3

  result = a4;
  v6 = (char *)a4 - 16;
  while ( (signed int)v6 >= 0 )
  {
    memcpy(v9, a3, 0x10u);
    sub_49DCC7((int)v9, (int)&v8, a1);
    memcpy(a2, &v8, 0x10u);
    v6 -= 16;
    result = (char *)a3 + 16;
    a3 = (char *)a3 + 16;
    a2 = (char *)a2 + 16;
  }
  if ( v6 != (char *)-16 )
  {
    memcpy(v9, a3, (size_t)(v6 + 16));
    for ( i = 0; i < (signed int)(v6 + 16); ++i )
      v9[i] ^= *(_BYTE *)(i + a5);
    result = memcpy(a2, v9, (size_t)(v6 + 16));
  }
  return result;
}
// 49F10F: using guessed type char var_10[16];

//----- (0049F1EE) --------------------------------------------------------
void __cdecl sub_49F1EE()
{
  int (__stdcall **v0)(int); // [sp+0h] [bp-50h]@1
  char v1; // [sp+28h] [bp-28h]@1
  int v2; // [sp+4Ch] [bp-4h]@1

  sub_40FD10(&v1, "invalid string position");
  v2 = 0;
  sub_40F580(&v0, (int)&v1);
  v0 = &std__out_of_range___vftable_;
  _CxxThrowException(&v0, &exception___RTTI_Complete_Object_Locator_[6].pClassDescriptor);
}
// 4A23A3: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 4D2724: using guessed type int (__stdcall *std__out_of_range___vftable_)(int);
// 4D3C78: using guessed type RTTICompleteObjectLocator exception___RTTI Complete Object Locator_[12];

//----- (0049F22E) --------------------------------------------------------
void *__thiscall sub_49F22E(void *this, int a2)
{
  void *v3; // esi@1

  v3 = this;
  exception__exception(a2);
  *(_DWORD *)v3 = &std__logic_error___vftable_;
  sub_40F730((char *)v3 + 12, a2 + 12);
  return v3;
}
// 4A243F: using guessed type _DWORD __stdcall exception__exception(_DWORD);
// 4D270C: using guessed type int (__stdcall *std__logic_error___vftable_)(int);

//----- (0049F271) --------------------------------------------------------
void *__thiscall sub_49F271(void *this, int a2)
{
  void *v3; // esi@1

  v3 = this;
  sub_49F22E(this, a2);
  *(_DWORD *)v3 = &std__out_of_range___vftable_;
  return v3;
}
// 4D2724: using guessed type int (__stdcall *std__out_of_range___vftable_)(int);

//----- (0049F289) --------------------------------------------------------
void __cdecl sub_49F289()
{
  int (__stdcall **v0)(int); // [sp+0h] [bp-50h]@1
  char v1; // [sp+28h] [bp-28h]@1
  int v2; // [sp+4Ch] [bp-4h]@1

  sub_40FD10(&v1, "string too long");
  v2 = 0;
  sub_40F580(&v0, (int)&v1);
  v0 = &std__length_error___vftable_;
  _CxxThrowException(&v0, &unk_4D3D84);
}
// 4A23A3: using guessed type _DWORD __stdcall _CxxThrowException(_DWORD, _DWORD);
// 4D2718: using guessed type int (__stdcall *std__length_error___vftable_)(int);

//----- (0049F65E) --------------------------------------------------------
void __thiscall sub_49F65E(void *this)
{
  if ( this != (void *)dword_4D9830 )
    report_failure(this);
}
// 49F62D: using guessed type void __thiscall report_failure(void *this);
// 4D9830: using guessed type int dword_4D9830;

//----- (004A0647) --------------------------------------------------------
int __cdecl sub_4A0647(int a1)
{
  int result; // eax@1

  result = dword_4E3750;
  dword_4E3750 = a1;
  return result;
}
// 4E3750: using guessed type int dword_4E3750;

//----- (004A0FE3) --------------------------------------------------------
int __cdecl sub_4A0FE3(const void *a1, size_t a2, size_t a3, FILE *a4)
{
  _lock_file(a4);
  fwrite(a1, a2, a3, a4);
  return _unlock_file(a4);
}
// 4A32C0: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 4A3312: using guessed type _DWORD __cdecl _unlock_file(_DWORD);

//----- (004A1236) --------------------------------------------------------
int __cdecl sub_4A1236()
{
  return flsall(1);
}
// 4A1111: using guessed type _DWORD __cdecl flsall(_DWORD);

//----- (004A17A2) --------------------------------------------------------
int __cdecl sub_4A17A2(void *a1, size_t a2, size_t a3, FILE *a4)
{
  _lock_file(a4);
  fread(a1, a2, a3, a4);
  return _unlock_file(a4);
}
// 4A32C0: using guessed type _DWORD __cdecl _lock_file(_DWORD);
// 4A3312: using guessed type _DWORD __cdecl _unlock_file(_DWORD);

//----- (004A2489) --------------------------------------------------------
void __thiscall sub_4A2489(int this)
{
  char v1; // zf@1

  v1 = *(_DWORD *)(this + 8) == 0;
  *(_DWORD *)this = &exception___vftable_;
  if ( !v1 )
    free(*(void **)(this + 4));
}
// 4D2AA0: using guessed type int (__stdcall *exception___vftable_)(char);

//----- (004A24AC) --------------------------------------------------------
int __thiscall sub_4A24AC(int this, char a2)
{
  int v2; // esi@1

  v2 = this;
  sub_4A2489(this);
  if ( a2 & 1 )
    sub_401020(v2);
  return v2;
}

//----- (004A7BF9) --------------------------------------------------------
void __cdecl sub_4A7BF9()
{
  char *i; // [sp+Ch] [bp-1Ch]@1

  for ( i = (char *)&exception___RTTI_Complete_Object_Locator_[1].offset;
        (unsigned int)i < (unsigned int)&exception___RTTI_Complete_Object_Locator_[1].offset;
        i += 4 )
  {
    if ( *(_DWORD *)i )
      (*(void (**)(void))i)();
  }
}
// 4D3C78: using guessed type RTTICompleteObjectLocator exception___RTTI Complete Object Locator_[12];

//----- (004A7C3D) --------------------------------------------------------
void __cdecl sub_4A7C3D()
{
  char *i; // [sp+Ch] [bp-1Ch]@1

  for ( i = (char *)&exception___RTTI_Complete_Object_Locator_[1].pTypeDescriptor;
        (unsigned int)i < (unsigned int)&exception___RTTI_Complete_Object_Locator_[1].pTypeDescriptor;
        i += 4 )
  {
    if ( *(_DWORD *)i )
      (*(void (**)(void))i)();
  }
}
// 4D3C78: using guessed type RTTICompleteObjectLocator exception___RTTI Complete Object Locator_[12];

//----- (004A89F9) --------------------------------------------------------
void __cdecl sub_4A89F9()
{
  if ( off_4DA1C8 )
  {
    off_4DA1C8();
    JUMPOUT(*(int *)unk_4A8A14);
  }
  terminate();
}
// 4A8A14: using guessed type int unk_4A8A14();
// 4DA1C8: using guessed type int (*off_4DA1C8)(void);

//----- (004A8ACA) --------------------------------------------------------
int __cdecl sub_4A8ACA()
{
  lpfn = (FARPROC)SetUnhandledExceptionFilter(__CxxUnhandledExceptionFilter);
  return 0;
}

//----- (004A8ADD) --------------------------------------------------------
LPTOP_LEVEL_EXCEPTION_FILTER __cdecl sub_4A8ADD()
{
  return SetUnhandledExceptionFilter((LPTOP_LEVEL_EXCEPTION_FILTER)lpfn);
}

//----- (004AA18E) --------------------------------------------------------
int __cdecl sub_4AA18E(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_4DA3E0);
}
// 4AA036: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (004AA1A4) --------------------------------------------------------
int __cdecl sub_4AA1A4(int a1, int a2)
{
  return _ld12cvt(a1, a2, &unk_4DA3F8);
}
// 4AA036: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (004AA1BA) --------------------------------------------------------
int __cdecl sub_4AA1BA(int a1, int a2)
{
  char v3; // [sp+0h] [bp-14h]@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+10h] [bp-4h]@1

  v5 = dword_4D9830;
  __strgtold12(&v4, &v3, a2, 0, 0, 0, 0);
  return sub_4AA18E((int)&v4, a1);
}
// 4AAC97: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004AA1F7) --------------------------------------------------------
int __cdecl sub_4AA1F7(int a1, int a2)
{
  char v3; // [sp+0h] [bp-14h]@1
  char v4; // [sp+4h] [bp-10h]@1
  int v5; // [sp+10h] [bp-4h]@1

  v5 = dword_4D9830;
  __strgtold12(&v4, &v3, a2, 0, 0, 0, 0);
  return sub_4AA1A4((int)&v4, a1);
}
// 4AAC97: using guessed type _DWORD __cdecl __strgtold12(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 4D9830: using guessed type int dword_4D9830;

//----- (004ABF6A) --------------------------------------------------------
void __usercall sub_4ABF6A(int this<ecx>, int a2<ebp>)
{
  sub_4A2489(*(_DWORD *)(a2 - 16));
}

//----- (004ABF7C) --------------------------------------------------------
int __usercall sub_4ABF7C<eax>(int this<ecx>, int a2<ebp>)
{
  return sub_40F780(a2 - 40);
}

//----- (004ABF90) --------------------------------------------------------
int __usercall sub_4ABF90<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CAuthSocket::CAuthSocket(&unk_4DA6F0, a1, a2, a3);
  return atexit((void (__cdecl *)())sub_4B2FC0);
}

//----- (004ABFB0) --------------------------------------------------------
int __cdecl sub_4ABFB0()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA75C);
  return atexit(sub_4B2FE0);
}
// 4DA75C: using guessed type int dword_4DA75C;

//----- (004ABFD0) --------------------------------------------------------
int __cdecl sub_4ABFD0()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA764);
  return atexit(sub_4B2FD0);
}
// 4DA764: using guessed type int dword_4DA764;

//----- (004ABFF0) --------------------------------------------------------
int __cdecl sub_4ABFF0()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA770);
  return atexit(sub_4B2FF0);
}
// 4DA770: using guessed type int dword_4DA770;

//----- (004AC010) --------------------------------------------------------
int __cdecl sub_4AC010()
{
  CCalendar::CCalendar((int)&unk_4DA798);
  return atexit(sub_4B3000);
}

//----- (004AC030) --------------------------------------------------------
int __usercall sub_4AC030<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CDBSocket::CDBSocket(&unk_4DA7B8, a1, a2, a3);
  return atexit((void (__cdecl *)())sub_4B3010);
}

//----- (004AC050) --------------------------------------------------------
int __cdecl sub_4AC050()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4DA824);
  return atexit(sub_4B3020);
}
// 4DA824: using guessed type int dword_4DA824;

//----- (004AC070) --------------------------------------------------------
int __cdecl sub_4AC070()
{
  return CFindPath::NODE::NODE((int)&unk_4E0908, -1, -1);
}

//----- (004AC090) --------------------------------------------------------
int __cdecl sub_4AC090()
{
  CMemoryPool_CAuthPacket::_CPool::CPool(&dword_4E0900);
  return atexit(sub_4B3030);
}
// 4E0900: using guessed type int dword_4E0900;

//----- (004AC0B0) --------------------------------------------------------
int __cdecl sub_4AC0B0()
{
  sub_4105A0(&unk_4E094C);
  return atexit(sub_4B3040);
}

//----- (004AC0D0) --------------------------------------------------------
int __cdecl sub_4AC0D0()
{
  sub_4107A0(&unk_4E0958);
  return atexit(sub_4B3050);
}

//----- (004AC0F0) --------------------------------------------------------
int __cdecl sub_4AC0F0()
{
  sub_418A00(&unk_4E0968);
  return atexit(sub_4B3060);
}

//----- (004AC110) --------------------------------------------------------
int __cdecl sub_4AC110()
{
  sub_418A00(&unk_4E0974);
  return atexit(sub_4B3070);
}

//----- (004AC130) --------------------------------------------------------
int __cdecl sub_4AC130()
{
  sub_47DD40((int)&unk_4E0980);
  return atexit((void (__cdecl *)())sub_4B3080);
}

//----- (004AC150) --------------------------------------------------------
int __cdecl sub_4AC150()
{
  sub_41D000(&unk_4E09A4);
  return atexit(sub_4B3090);
}

//----- (004AC170) --------------------------------------------------------
int __cdecl sub_4AC170()
{
  sub_47DD40((int)&unk_4E09B0);
  return atexit((void (__cdecl *)())sub_4B30A0);
}

//----- (004AC190) --------------------------------------------------------
int __cdecl sub_4AC190()
{
  sub_41D030(&unk_4E09C8);
  return atexit(sub_4B30B0);
}

//----- (004AC1B0) --------------------------------------------------------
int __cdecl sub_4AC1B0()
{
  sub_47DD40((int)&unk_4E09D4);
  return atexit((void (__cdecl *)())sub_4B30C0);
}

//----- (004AC1D0) --------------------------------------------------------
int __cdecl sub_4AC1D0()
{
  sub_420920(&unk_4E09F0);
  return atexit(sub_4B30D0);
}

//----- (004AC1F0) --------------------------------------------------------
int __cdecl sub_4AC1F0()
{
  int v1; // [sp+0h] [bp-170h]@1
  int v2; // [sp+4h] [bp-16Ch]@1
  int v3; // [sp+8h] [bp-168h]@1
  int v4; // [sp+Ch] [bp-164h]@1
  int v5; // [sp+10h] [bp-160h]@1
  int v6; // [sp+14h] [bp-15Ch]@1
  int v7; // [sp+18h] [bp-158h]@1
  int v8; // [sp+1Ch] [bp-154h]@1
  int v9; // [sp+20h] [bp-150h]@1
  int v10; // [sp+24h] [bp-14Ch]@1
  char v11[4]; // [sp+28h] [bp-148h]@1
  int v12; // [sp+2Ch] [bp-144h]@1
  int v13; // [sp+30h] [bp-140h]@1
  int v14; // [sp+34h] [bp-13Ch]@1
  int v15; // [sp+38h] [bp-138h]@1
  int v16; // [sp+3Ch] [bp-134h]@1
  int v17; // [sp+40h] [bp-130h]@1
  int v18; // [sp+44h] [bp-12Ch]@1
  int v19; // [sp+48h] [bp-128h]@1
  int v20; // [sp+4Ch] [bp-124h]@1
  int v21; // [sp+50h] [bp-120h]@1
  int v22; // [sp+54h] [bp-11Ch]@1
  int v23; // [sp+58h] [bp-118h]@1
  int v24; // [sp+5Ch] [bp-114h]@1
  int v25; // [sp+60h] [bp-110h]@1
  int v26; // [sp+64h] [bp-10Ch]@1
  int v27; // [sp+68h] [bp-108h]@1
  int v28; // [sp+6Ch] [bp-104h]@1
  int v29; // [sp+70h] [bp-100h]@1
  int v30; // [sp+74h] [bp-FCh]@1
  int v31; // [sp+78h] [bp-F8h]@1
  int v32; // [sp+7Ch] [bp-F4h]@1
  int v33; // [sp+80h] [bp-F0h]@1
  int v34; // [sp+84h] [bp-ECh]@1
  int v35; // [sp+88h] [bp-E8h]@1
  int v36; // [sp+8Ch] [bp-E4h]@1
  int v37; // [sp+90h] [bp-E0h]@1
  int v38; // [sp+94h] [bp-DCh]@1
  int v39; // [sp+98h] [bp-D8h]@1
  int v40; // [sp+9Ch] [bp-D4h]@1
  int v41; // [sp+A0h] [bp-D0h]@1
  int v42; // [sp+A4h] [bp-CCh]@1
  int v43; // [sp+A8h] [bp-C8h]@1
  int v44; // [sp+ACh] [bp-C4h]@1
  int v45; // [sp+B0h] [bp-C0h]@1
  int v46; // [sp+B4h] [bp-BCh]@1
  int v47; // [sp+B8h] [bp-B8h]@1
  int v48; // [sp+BCh] [bp-B4h]@1
  char v49[4]; // [sp+C0h] [bp-B0h]@1
  int v50; // [sp+C4h] [bp-ACh]@1
  char v51[4]; // [sp+C8h] [bp-A8h]@1
  int v52; // [sp+CCh] [bp-A4h]@1
  int v53; // [sp+D0h] [bp-A0h]@1
  int v54; // [sp+D4h] [bp-9Ch]@1
  int v55; // [sp+D8h] [bp-98h]@1
  int v56; // [sp+DCh] [bp-94h]@1
  int v57; // [sp+E0h] [bp-90h]@1
  int v58; // [sp+E4h] [bp-8Ch]@1
  int v59; // [sp+E8h] [bp-88h]@1
  int v60; // [sp+ECh] [bp-84h]@1
  int v61; // [sp+F0h] [bp-80h]@1
  int v62; // [sp+F4h] [bp-7Ch]@1
  int v63; // [sp+F8h] [bp-78h]@1
  int v64; // [sp+FCh] [bp-74h]@1
  int v65; // [sp+100h] [bp-70h]@1
  int v66; // [sp+104h] [bp-6Ch]@1
  int v67; // [sp+108h] [bp-68h]@1
  int v68; // [sp+10Ch] [bp-64h]@1
  int v69; // [sp+110h] [bp-60h]@1
  int v70; // [sp+114h] [bp-5Ch]@1
  int v71; // [sp+118h] [bp-58h]@1
  int v72; // [sp+11Ch] [bp-54h]@1
  int v73; // [sp+120h] [bp-50h]@1
  int v74; // [sp+124h] [bp-4Ch]@1
  char v75[4]; // [sp+128h] [bp-48h]@1
  int v76; // [sp+12Ch] [bp-44h]@1
  int v77; // [sp+130h] [bp-40h]@1
  int v78; // [sp+134h] [bp-3Ch]@1
  int v79; // [sp+138h] [bp-38h]@1
  int v80; // [sp+13Ch] [bp-34h]@1
  int v81; // [sp+140h] [bp-30h]@1
  int v82; // [sp+144h] [bp-2Ch]@1
  int v83; // [sp+148h] [bp-28h]@1
  int v84; // [sp+14Ch] [bp-24h]@1
  int v85; // [sp+150h] [bp-20h]@1
  int v86; // [sp+154h] [bp-1Ch]@1
  int v87; // [sp+158h] [bp-18h]@1
  int v88; // [sp+15Ch] [bp-14h]@1
  int v89; // [sp+160h] [bp-10h]@1
  int v90; // [sp+164h] [bp-Ch]@1
  int v91; // [sp+168h] [bp-8h]@1
  int v92; // [sp+16Ch] [bp-4h]@1

  v92 = 0;
  v91 = (int)"weapon";
  sub_420990((int)&unk_4E0A00, (int)&v91, (int)&v92);
  v90 = 1;
  v89 = (int)"defense";
  sub_420990((int)&unk_4E0A08, (int)&v89, (int)&v90);
  v88 = 2;
  v87 = (int)"ornament";
  sub_420990((int)&unk_4E0A10, (int)&v87, (int)&v88);
  v86 = 3;
  v85 = (int)"general";
  sub_420990((int)&unk_4E0A18, (int)&v85, (int)&v86);
  v84 = 4;
  v83 = (int)"quest";
  sub_420990((int)&unk_4E0A20, (int)&v83, (int)&v84);
  v82 = 5;
  v81 = (int)"money";
  sub_420990((int)&unk_4E0A28, (int)&v81, (int)&v82);
  v80 = 0;
  v79 = (int)"sword";
  sub_420990((int)&unk_4E0A30, (int)&v79, (int)&v80);
  v78 = 1;
  v77 = (int)"wand";
  sub_420990((int)&unk_4E0A38, (int)&v77, (int)&v78);
  v76 = 2;
  *(_DWORD *)v75 = "bow";
  sub_420990((int)&unk_4E0A40, (int)v75, (int)&v76);
  v74 = 3;
  v73 = (int)"shield";
  sub_420990((int)&unk_4E0A48, (int)&v73, (int)&v74);
  v72 = 4;
  v71 = (int)"helmet";
  sub_420990((int)&unk_4E0A50, (int)&v71, (int)&v72);
  v70 = 5;
  v69 = (int)"upperarmor";
  sub_420990((int)&unk_4E0A58, (int)&v69, (int)&v70);
  v68 = 6;
  v67 = (int)"lowerarmor";
  sub_420990((int)&unk_4E0A60, (int)&v67, (int)&v68);
  v66 = 7;
  v65 = (int)"gauntlet";
  sub_420990((int)&unk_4E0A68, (int)&v65, (int)&v66);
  v64 = 8;
  v63 = (int)"boots";
  sub_420990((int)&unk_4E0A70, (int)&v63, (int)&v64);
  v62 = 9;
  v61 = (int)"ring";
  sub_420990((int)&unk_4E0A78, (int)&v61, (int)&v62);
  v60 = 10;
  v59 = (int)"necklace";
  sub_420990((int)&unk_4E0A80, (int)&v59, (int)&v60);
  v58 = 11;
  v57 = (int)"trinket";
  sub_420990((int)&unk_4E0A88, (int)&v57, (int)&v58);
  v56 = 12;
  v55 = (int)"refresh";
  sub_420990((int)&unk_4E0A90, (int)&v55, (int)&v56);
  v54 = 13;
  v53 = (int)"charm";
  sub_420990((int)&unk_4E0A98, (int)&v53, (int)&v54);
  v52 = 14;
  *(_DWORD *)v51 = "gem";
  sub_420990((int)&unk_4E0AA0, (int)v51, (int)&v52);
  v50 = 15;
  *(_DWORD *)v49 = "etc";
  sub_420990((int)&unk_4E0AA8, (int)v49, (int)&v50);
  v48 = 16;
  v47 = (int)"coin";
  sub_420990((int)&unk_4E0AB0, (int)&v47, (int)&v48);
  v46 = 17;
  v45 = (int)"common";
  sub_420990((int)&unk_4E0AB8, (int)&v45, (int)&v46);
  v44 = 18;
  v43 = (int)"repair";
  sub_420990((int)&unk_4E0AC0, (int)&v43, (int)&v44);
  v42 = 0;
  v41 = (int)"knight";
  sub_420990((int)&unk_4E0AC8, (int)&v41, (int)&v42);
  v40 = 1;
  v39 = (int)"mage";
  sub_420990((int)&unk_4E0AD0, (int)&v39, (int)&v40);
  v38 = 2;
  v37 = (int)"archer";
  sub_420990((int)&unk_4E0AD8, (int)&v37, (int)&v38);
  v36 = 3;
  v35 = (int)"warrior";
  sub_420990((int)&unk_4E0AE0, (int)&v35, (int)&v36);
  v34 = 4;
  v33 = (int)"assassin";
  sub_420990((int)&unk_4E0AE8, (int)&v33, (int)&v34);
  v32 = 5;
  v31 = (int)"talisman";
  sub_420990((int)&unk_4E0AF0, (int)&v31, (int)&v32);
  v30 = 6;
  v29 = (int)"spiritknight";
  sub_420990((int)&unk_4E0AF8, (int)&v29, (int)&v30);
  v28 = 7;
  v27 = (int)"monk";
  sub_420990((int)&unk_4E0B00, (int)&v27, (int)&v28);
  v26 = 7;
  v25 = (int)"hp";
  sub_420990((int)&unk_4E0B08, (int)&v25, (int)&v26);
  v24 = 8;
  v23 = (int)"mp";
  sub_420990((int)&unk_4E0B10, (int)&v23, (int)&v24);
  v22 = 27;
  v21 = (int)"xattack";
  sub_420990((int)&unk_4E0B18, (int)&v21, (int)&v22);
  v20 = 28;
  v19 = (int)"xmagic";
  sub_420990((int)&unk_4E0B20, (int)&v19, (int)&v20);
  v18 = 9;
  v17 = (int)"xhit";
  sub_420990((int)&unk_4E0B28, (int)&v17, (int)&v18);
  v16 = 15;
  v15 = (int)"xdefense";
  sub_420990((int)&unk_4E0B30, (int)&v15, (int)&v16);
  v14 = 10;
  v13 = (int)"xdodge";
  sub_420990((int)&unk_4E0B38, (int)&v13, (int)&v14);
  v12 = -1;
  *(_DWORD *)v11 = "all";
  sub_420990((int)&unk_4E0B40, (int)v11, (int)&v12);
  v10 = 6;
  v9 = (int)"transform";
  sub_420990((int)&unk_4E0B48, (int)&v9, (int)&v10);
  v8 = 19;
  v7 = (int)"cocoon";
  sub_420990((int)&unk_4E0B50, (int)&v7, (int)&v8);
  v6 = 20;
  v5 = (int)"mask";
  sub_420990((int)&unk_4E0B58, (int)&v5, (int)&v6);
  v4 = 21;
  v3 = (int)"sword2h";
  sub_420990((int)&unk_4E0B60, (int)&v3, (int)&v4);
  v2 = 22;
  v1 = (int)"standard";
  return sub_420990((int)&unk_4E0B68, (int)&v1, (int)&v2);
}

//----- (004AC930) --------------------------------------------------------
int __cdecl sub_4AC930()
{
  CIOException::CInit::CInit(&unk_4E0DB4);
  return atexit(sub_4B30E0);
}

//----- (004AC950) --------------------------------------------------------
int __cdecl sub_4AC950()
{
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)&unk_4E0FE8);
  return atexit((void (__cdecl *)())sub_4B30F0);
}

//----- (004AC970) --------------------------------------------------------
int __cdecl sub_4AC970()
{
  return atexit(sub_4B3100);
}

//----- (004AC990) --------------------------------------------------------
int __cdecl sub_4AC990()
{
  sub_425830(&unk_4E100C);
  return atexit(sub_4B3110);
}

//----- (004AC9B0) --------------------------------------------------------
int __cdecl sub_4AC9B0()
{
  CIOSocket::CIOTimerInstance::CIOTimerInstance((int)&unk_4E1020);
  return atexit(sub_4B3120);
}

//----- (004AC9D0) --------------------------------------------------------
int __cdecl sub_4AC9D0()
{
  return sub_423F60((int)dword_4E1030, 8, 16, (void (__thiscall *)(_DWORD))CIOBuffer::CSlot::CSlot);
}

//----- (004AC9F0) --------------------------------------------------------
int __cdecl sub_4AC9F0()
{
  sub_42F980(&unk_4E10B4);
  return atexit(sub_4B3130);
}

//----- (004ACA10) --------------------------------------------------------
int __cdecl sub_4ACA10()
{
  sub_42F9D0(&unk_4E10C0);
  return atexit(sub_4B3140);
}

//----- (004ACA30) --------------------------------------------------------
int __cdecl sub_4ACA30()
{
  sub_42FA10(&unk_4E10CC);
  return atexit(sub_4B3150);
}

//----- (004ACA50) --------------------------------------------------------
int __cdecl sub_4ACA50()
{
  sub_47DD40((int)&unk_4E10D8);
  return atexit((void (__cdecl *)())sub_4B3160);
}

//----- (004ACA70) --------------------------------------------------------
int __cdecl sub_4ACA70()
{
  sub_432030(&unk_4E10F0);
  return atexit(sub_4B3170);
}

//----- (004ACA90) --------------------------------------------------------
int __cdecl sub_4ACA90()
{
  sub_4320A0(&unk_4E10FC);
  return atexit(sub_4B3180);
}

//----- (004ACAB0) --------------------------------------------------------
int __fastcall sub_4ACAB0(int a1, int a2)
{
  return std__ios_base__ios_base(&unk_4E1108, a2);
}
// 40BB30: using guessed type int __fastcall std__ios_base__ios_base(_DWORD, _DWORD);

//----- (004ACAC0) --------------------------------------------------------
void *__cdecl sub_4ACAC0()
{
  return sub_4324B0(&unk_4E110C);
}

//----- (004ACAD0) --------------------------------------------------------
int __cdecl sub_4ACAD0()
{
  sub_47E220((int)&unk_4E1128);
  return atexit((void (__cdecl *)())sub_4B3190);
}

//----- (004ACAF0) --------------------------------------------------------
int __cdecl sub_4ACAF0()
{
  return atexit(sub_4B31A0);
}

//----- (004ACB10) --------------------------------------------------------
int __cdecl sub_4ACB10()
{
  sub_433B90(&unk_4E1194);
  return atexit(sub_4B31B0);
}

//----- (004ACB30) --------------------------------------------------------
int __cdecl sub_4ACB30()
{
  sub_433B90(&unk_4E11B0);
  return atexit(sub_4B31C0);
}

//----- (004ACB50) --------------------------------------------------------
int __cdecl sub_4ACB50()
{
  sub_433B90(&unk_4E11CC);
  return atexit(sub_4B31D0);
}

//----- (004ACB70) --------------------------------------------------------
int __cdecl sub_4ACB70()
{
  sub_433B90(&unk_4E11E8);
  return atexit(sub_4B31E0);
}

//----- (004ACB90) --------------------------------------------------------
int __cdecl sub_4ACB90()
{
  sub_433B90(&unk_4E1204);
  return atexit(sub_4B31F0);
}

//----- (004ACBB0) --------------------------------------------------------
int __cdecl sub_4ACBB0()
{
  sub_433B90(&unk_4E1220);
  return atexit(sub_4B3200);
}

//----- (004ACBD0) --------------------------------------------------------
int __cdecl sub_4ACBD0()
{
  sub_433B90(&unk_4E123C);
  return atexit(sub_4B3210);
}

//----- (004ACBF0) --------------------------------------------------------
int __cdecl sub_4ACBF0()
{
  sub_433BC0(&unk_4E1258);
  return atexit(sub_4B3220);
}

//----- (004ACC10) --------------------------------------------------------
int __cdecl sub_4ACC10()
{
  sub_433B90(&unk_4E1264);
  return atexit(sub_4B3230);
}

//----- (004ACC30) --------------------------------------------------------
void *__cdecl sub_4ACC30()
{
  return CMemory::CInit::CInit(&unk_4E1808);
}

//----- (004ACC40) --------------------------------------------------------
DWORD __cdecl sub_4ACC40()
{
  DWORD result; // eax@1

  result = GetTickCount();
  dword_4E181C = result;
  return result;
}
// 4E181C: using guessed type int dword_4E181C;

//----- (004ACC50) --------------------------------------------------------
int __cdecl sub_4ACC50()
{
  sub_447760(&unk_4E1820);
  return atexit(sub_4B3240);
}

//----- (004ACC70) --------------------------------------------------------
int __cdecl sub_4ACC70()
{
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)&unk_4E182C);
  return atexit((void (__cdecl *)())sub_4B3250);
}

//----- (004ACC90) --------------------------------------------------------
int __cdecl sub_4ACC90()
{
  sub_447790(&unk_4E184C);
  return atexit(sub_4B3260);
}

//----- (004ACCB0) --------------------------------------------------------
int __cdecl sub_4ACCB0()
{
  sub_47DD40((int)&unk_4E1858);
  return atexit((void (__cdecl *)())sub_4B3270);
}

//----- (004ACCD0) --------------------------------------------------------
int __cdecl sub_4ACCD0()
{
  sub_4477C0(&unk_4E1870);
  return atexit(sub_4B3280);
}

//----- (004ACCF0) --------------------------------------------------------
int __cdecl sub_4ACCF0()
{
  sub_47DD40((int)&unk_4E187C);
  return atexit((void (__cdecl *)())sub_4B3290);
}

//----- (004ACD10) --------------------------------------------------------
int __cdecl sub_4ACD10()
{
  sub_4382D0((int)&unk_4E1898);
  return atexit((void (__cdecl *)())sub_4B32A0);
}

//----- (004ACD30) --------------------------------------------------------
int __cdecl sub_4ACD30()
{
  sub_423F60((int)&unk_4E18F0, 32, 2, (void (__thiscall *)(_DWORD))CIOCriticalSection::CIOCriticalSection);
  return atexit(sub_4B32B0);
}

//----- (004ACD60) --------------------------------------------------------
int __cdecl sub_4ACD60()
{
  CMonsterObject::CMonsterObject((int)&unk_4E1930);
  return atexit(sub_4B32D0);
}

//----- (004ACD80) --------------------------------------------------------
int __cdecl sub_4ACD80()
{
  CMonsterObject::CMonsterObject((int)&unk_4E1998);
  return atexit(sub_4B32E0);
}

//----- (004ACDA0) --------------------------------------------------------
int __cdecl sub_4ACDA0()
{
  CMonsterObject::CMonsterObject((int)&unk_4E1A00);
  return atexit(sub_4B32F0);
}

//----- (004ACDC0) --------------------------------------------------------
int __cdecl sub_4ACDC0()
{
  sub_44B880(&unk_4E1A9C);
  return atexit(sub_4B3300);
}

//----- (004ACDE0) --------------------------------------------------------
int __cdecl sub_4ACDE0()
{
  sub_44B8B0(&unk_4E1AA8);
  return atexit(sub_4B3310);
}

//----- (004ACE00) --------------------------------------------------------
int __cdecl sub_4ACE00()
{
  sub_44B8E0(&unk_4E1AB4);
  return atexit(sub_4B3320);
}

//----- (004ACE20) --------------------------------------------------------
int __cdecl sub_4ACE20()
{
  sub_47DD40((int)&unk_4E1AC0);
  return atexit((void (__cdecl *)())sub_4B3330);
}

//----- (004ACE40) --------------------------------------------------------
int __cdecl sub_4ACE40()
{
  CNPCObject::CNPCObject((int)&unk_4E1AD8);
  return atexit(sub_4B3340);
}

//----- (004ACE60) --------------------------------------------------------
int __cdecl sub_4ACE60()
{
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)&unk_4E1B38);
  return atexit((void (__cdecl *)())sub_4B3350);
}

//----- (004ACE80) --------------------------------------------------------
int __cdecl sub_4ACE80()
{
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)&unk_4E1B58);
  return atexit((void (__cdecl *)())sub_4B3360);
}

//----- (004ACEA0) --------------------------------------------------------
int __cdecl sub_4ACEA0()
{
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)&unk_4E1B78);
  return atexit((void (__cdecl *)())sub_4B3370);
}

//----- (004ACEC0) --------------------------------------------------------
int __cdecl sub_4ACEC0()
{
  sub_44CD40(&unk_4E1B9C);
  return atexit(sub_4B3380);
}

//----- (004ACEE0) --------------------------------------------------------
int __cdecl sub_4ACEE0()
{
  int v1; // [sp+0h] [bp-390h]@1
  int v2; // [sp+4h] [bp-38Ch]@1
  int v3; // [sp+8h] [bp-388h]@1
  int v4; // [sp+Ch] [bp-384h]@1
  int v5; // [sp+10h] [bp-380h]@1
  int v6; // [sp+14h] [bp-37Ch]@1
  int v7; // [sp+18h] [bp-378h]@1
  int v8; // [sp+1Ch] [bp-374h]@1
  int v9; // [sp+20h] [bp-370h]@1
  int v10; // [sp+24h] [bp-36Ch]@1
  int v11; // [sp+28h] [bp-368h]@1
  int v12; // [sp+2Ch] [bp-364h]@1
  int v13; // [sp+30h] [bp-360h]@1
  int v14; // [sp+34h] [bp-35Ch]@1
  int v15; // [sp+38h] [bp-358h]@1
  int v16; // [sp+3Ch] [bp-354h]@1
  int v17; // [sp+40h] [bp-350h]@1
  int v18; // [sp+44h] [bp-34Ch]@1
  int v19; // [sp+48h] [bp-348h]@1
  int v20; // [sp+4Ch] [bp-344h]@1
  int v21; // [sp+50h] [bp-340h]@1
  int v22; // [sp+54h] [bp-33Ch]@1
  int v23; // [sp+58h] [bp-338h]@1
  int v24; // [sp+5Ch] [bp-334h]@1
  int v25; // [sp+60h] [bp-330h]@1
  int v26; // [sp+64h] [bp-32Ch]@1
  int v27; // [sp+68h] [bp-328h]@1
  int v28; // [sp+6Ch] [bp-324h]@1
  int v29; // [sp+70h] [bp-320h]@1
  int v30; // [sp+74h] [bp-31Ch]@1
  int v31; // [sp+78h] [bp-318h]@1
  int v32; // [sp+7Ch] [bp-314h]@1
  char v33[4]; // [sp+80h] [bp-310h]@1
  int v34; // [sp+84h] [bp-30Ch]@1
  int v35; // [sp+88h] [bp-308h]@1
  int v36; // [sp+8Ch] [bp-304h]@1
  int v37; // [sp+90h] [bp-300h]@1
  int v38; // [sp+94h] [bp-2FCh]@1
  char v39[4]; // [sp+98h] [bp-2F8h]@1
  int v40; // [sp+9Ch] [bp-2F4h]@1
  int v41; // [sp+A0h] [bp-2F0h]@1
  int v42; // [sp+A4h] [bp-2ECh]@1
  int v43; // [sp+A8h] [bp-2E8h]@1
  int v44; // [sp+ACh] [bp-2E4h]@1
  int v45; // [sp+B0h] [bp-2E0h]@1
  int v46; // [sp+B4h] [bp-2DCh]@1
  int v47; // [sp+B8h] [bp-2D8h]@1
  int v48; // [sp+BCh] [bp-2D4h]@1
  int v49; // [sp+C0h] [bp-2D0h]@1
  int v50; // [sp+C4h] [bp-2CCh]@1
  int v51; // [sp+C8h] [bp-2C8h]@1
  int v52; // [sp+CCh] [bp-2C4h]@1
  int v53; // [sp+D0h] [bp-2C0h]@1
  int v54; // [sp+D4h] [bp-2BCh]@1
  int v55; // [sp+D8h] [bp-2B8h]@1
  int v56; // [sp+DCh] [bp-2B4h]@1
  int v57; // [sp+E0h] [bp-2B0h]@1
  int v58; // [sp+E4h] [bp-2ACh]@1
  int v59; // [sp+E8h] [bp-2A8h]@1
  int v60; // [sp+ECh] [bp-2A4h]@1
  int v61; // [sp+F0h] [bp-2A0h]@1
  int v62; // [sp+F4h] [bp-29Ch]@1
  int v63; // [sp+F8h] [bp-298h]@1
  int v64; // [sp+FCh] [bp-294h]@1
  int v65; // [sp+100h] [bp-290h]@1
  int v66; // [sp+104h] [bp-28Ch]@1
  int v67; // [sp+108h] [bp-288h]@1
  int v68; // [sp+10Ch] [bp-284h]@1
  int v69; // [sp+110h] [bp-280h]@1
  int v70; // [sp+114h] [bp-27Ch]@1
  int v71; // [sp+118h] [bp-278h]@1
  int v72; // [sp+11Ch] [bp-274h]@1
  char v73[4]; // [sp+120h] [bp-270h]@1
  int v74; // [sp+124h] [bp-26Ch]@1
  int v75; // [sp+128h] [bp-268h]@1
  int v76; // [sp+12Ch] [bp-264h]@1
  int v77; // [sp+130h] [bp-260h]@1
  int v78; // [sp+134h] [bp-25Ch]@1
  int v79; // [sp+138h] [bp-258h]@1
  int v80; // [sp+13Ch] [bp-254h]@1
  int v81; // [sp+140h] [bp-250h]@1
  int v82; // [sp+144h] [bp-24Ch]@1
  int v83; // [sp+148h] [bp-248h]@1
  int v84; // [sp+14Ch] [bp-244h]@1
  int v85; // [sp+150h] [bp-240h]@1
  int v86; // [sp+154h] [bp-23Ch]@1
  int v87; // [sp+158h] [bp-238h]@1
  int v88; // [sp+15Ch] [bp-234h]@1
  int v89; // [sp+160h] [bp-230h]@1
  int v90; // [sp+164h] [bp-22Ch]@1
  int v91; // [sp+168h] [bp-228h]@1
  int v92; // [sp+16Ch] [bp-224h]@1
  int v93; // [sp+170h] [bp-220h]@1
  int v94; // [sp+174h] [bp-21Ch]@1
  int v95; // [sp+178h] [bp-218h]@1
  int v96; // [sp+17Ch] [bp-214h]@1
  int v97; // [sp+180h] [bp-210h]@1
  int v98; // [sp+184h] [bp-20Ch]@1
  int v99; // [sp+188h] [bp-208h]@1
  int v100; // [sp+18Ch] [bp-204h]@1
  int v101; // [sp+190h] [bp-200h]@1
  int v102; // [sp+194h] [bp-1FCh]@1
  int v103; // [sp+198h] [bp-1F8h]@1
  int v104; // [sp+19Ch] [bp-1F4h]@1
  int v105; // [sp+1A0h] [bp-1F0h]@1
  int v106; // [sp+1A4h] [bp-1ECh]@1
  int v107; // [sp+1A8h] [bp-1E8h]@1
  int v108; // [sp+1ACh] [bp-1E4h]@1
  int v109; // [sp+1B0h] [bp-1E0h]@1
  int v110; // [sp+1B4h] [bp-1DCh]@1
  char v111[4]; // [sp+1B8h] [bp-1D8h]@1
  int v112; // [sp+1BCh] [bp-1D4h]@1
  int v113; // [sp+1C0h] [bp-1D0h]@1
  int v114; // [sp+1C4h] [bp-1CCh]@1
  int v115; // [sp+1C8h] [bp-1C8h]@1
  int v116; // [sp+1CCh] [bp-1C4h]@1
  char v117[4]; // [sp+1D0h] [bp-1C0h]@1
  int v118; // [sp+1D4h] [bp-1BCh]@1
  int v119; // [sp+1D8h] [bp-1B8h]@1
  int v120; // [sp+1DCh] [bp-1B4h]@1
  int v121; // [sp+1E0h] [bp-1B0h]@1
  int v122; // [sp+1E4h] [bp-1ACh]@1
  int v123; // [sp+1E8h] [bp-1A8h]@1
  int v124; // [sp+1ECh] [bp-1A4h]@1
  int v125; // [sp+1F0h] [bp-1A0h]@1
  int v126; // [sp+1F4h] [bp-19Ch]@1
  int v127; // [sp+1F8h] [bp-198h]@1
  int v128; // [sp+1FCh] [bp-194h]@1
  int v129; // [sp+200h] [bp-190h]@1
  int v130; // [sp+204h] [bp-18Ch]@1
  int v131; // [sp+208h] [bp-188h]@1
  int v132; // [sp+20Ch] [bp-184h]@1
  char v133[4]; // [sp+210h] [bp-180h]@1
  int v134; // [sp+214h] [bp-17Ch]@1
  int v135; // [sp+218h] [bp-178h]@1
  int v136; // [sp+21Ch] [bp-174h]@1
  int v137; // [sp+220h] [bp-170h]@1
  int v138; // [sp+224h] [bp-16Ch]@1
  int v139; // [sp+228h] [bp-168h]@1
  int v140; // [sp+22Ch] [bp-164h]@1
  int v141; // [sp+230h] [bp-160h]@1
  int v142; // [sp+234h] [bp-15Ch]@1
  int v143; // [sp+238h] [bp-158h]@1
  int v144; // [sp+23Ch] [bp-154h]@1
  int v145; // [sp+240h] [bp-150h]@1
  int v146; // [sp+244h] [bp-14Ch]@1
  int v147; // [sp+248h] [bp-148h]@1
  int v148; // [sp+24Ch] [bp-144h]@1
  char v149[4]; // [sp+250h] [bp-140h]@1
  int v150; // [sp+254h] [bp-13Ch]@1
  int v151; // [sp+258h] [bp-138h]@1
  int v152; // [sp+25Ch] [bp-134h]@1
  int v153; // [sp+260h] [bp-130h]@1
  int v154; // [sp+264h] [bp-12Ch]@1
  int v155; // [sp+268h] [bp-128h]@1
  int v156; // [sp+26Ch] [bp-124h]@1
  char v157[4]; // [sp+270h] [bp-120h]@1
  int v158; // [sp+274h] [bp-11Ch]@1
  int v159; // [sp+278h] [bp-118h]@1
  int v160; // [sp+27Ch] [bp-114h]@1
  int v161; // [sp+280h] [bp-110h]@1
  int v162; // [sp+284h] [bp-10Ch]@1
  int v163; // [sp+288h] [bp-108h]@1
  int v164; // [sp+28Ch] [bp-104h]@1
  int v165; // [sp+290h] [bp-100h]@1
  int v166; // [sp+294h] [bp-FCh]@1
  int v167; // [sp+298h] [bp-F8h]@1
  int v168; // [sp+29Ch] [bp-F4h]@1
  int v169; // [sp+2A0h] [bp-F0h]@1
  int v170; // [sp+2A4h] [bp-ECh]@1
  int v171; // [sp+2A8h] [bp-E8h]@1
  int v172; // [sp+2ACh] [bp-E4h]@1
  int v173; // [sp+2B0h] [bp-E0h]@1
  int v174; // [sp+2B4h] [bp-DCh]@1
  int v175; // [sp+2B8h] [bp-D8h]@1
  int v176; // [sp+2BCh] [bp-D4h]@1
  int v177; // [sp+2C0h] [bp-D0h]@1
  int v178; // [sp+2C4h] [bp-CCh]@1
  int v179; // [sp+2C8h] [bp-C8h]@1
  int v180; // [sp+2CCh] [bp-C4h]@1
  int v181; // [sp+2D0h] [bp-C0h]@1
  int v182; // [sp+2D4h] [bp-BCh]@1
  int v183; // [sp+2D8h] [bp-B8h]@1
  int v184; // [sp+2DCh] [bp-B4h]@1
  int v185; // [sp+2E0h] [bp-B0h]@1
  int v186; // [sp+2E4h] [bp-ACh]@1
  int v187; // [sp+2E8h] [bp-A8h]@1
  int v188; // [sp+2ECh] [bp-A4h]@1
  int v189; // [sp+2F0h] [bp-A0h]@1
  int v190; // [sp+2F4h] [bp-9Ch]@1
  int v191; // [sp+2F8h] [bp-98h]@1
  int v192; // [sp+2FCh] [bp-94h]@1
  int v193; // [sp+300h] [bp-90h]@1
  int v194; // [sp+304h] [bp-8Ch]@1
  int v195; // [sp+308h] [bp-88h]@1
  int v196; // [sp+30Ch] [bp-84h]@1
  char v197[4]; // [sp+310h] [bp-80h]@1
  int v198; // [sp+314h] [bp-7Ch]@1
  int v199; // [sp+318h] [bp-78h]@1
  int v200; // [sp+31Ch] [bp-74h]@1
  int v201; // [sp+320h] [bp-70h]@1
  int v202; // [sp+324h] [bp-6Ch]@1
  char v203[4]; // [sp+328h] [bp-68h]@1
  int v204; // [sp+32Ch] [bp-64h]@1
  char v205[4]; // [sp+330h] [bp-60h]@1
  int v206; // [sp+334h] [bp-5Ch]@1
  char v207[4]; // [sp+338h] [bp-58h]@1
  int v208; // [sp+33Ch] [bp-54h]@1
  char v209[4]; // [sp+340h] [bp-50h]@1
  int v210; // [sp+344h] [bp-4Ch]@1
  char v211[4]; // [sp+348h] [bp-48h]@1
  int v212; // [sp+34Ch] [bp-44h]@1
  int v213; // [sp+350h] [bp-40h]@1
  int v214; // [sp+354h] [bp-3Ch]@1
  int v215; // [sp+358h] [bp-38h]@1
  int v216; // [sp+35Ch] [bp-34h]@1
  int v217; // [sp+360h] [bp-30h]@1
  int v218; // [sp+364h] [bp-2Ch]@1
  char v219[4]; // [sp+368h] [bp-28h]@1
  int v220; // [sp+36Ch] [bp-24h]@1
  int v221; // [sp+370h] [bp-20h]@1
  int v222; // [sp+374h] [bp-1Ch]@1
  char v223[4]; // [sp+378h] [bp-18h]@1
  int v224; // [sp+37Ch] [bp-14h]@1
  int v225; // [sp+380h] [bp-10h]@1
  int v226; // [sp+384h] [bp-Ch]@1
  int v227; // [sp+388h] [bp-8h]@1
  int v228; // [sp+38Ch] [bp-4h]@1

  v228 = 1;
  v227 = (int)"name";
  sub_420990((int)&unk_4E1BA8, (int)&v227, (int)&v228);
  v226 = 2;
  v225 = (int)"index";
  sub_420990((int)&unk_4E1BB0, (int)&v225, (int)&v226);
  v224 = 3;
  *(_DWORD *)v223 = "map";
  sub_420990((int)&unk_4E1BB8, (int)v223, (int)&v224);
  v222 = 4;
  v221 = (int)"area";
  sub_420990((int)&unk_4E1BC0, (int)&v221, (int)&v222);
  v220 = 5;
  *(_DWORD *)v219 = "max";
  sub_420990((int)&unk_4E1BC8, (int)v219, (int)&v220);
  v218 = 6;
  v217 = (int)"rect";
  sub_420990((int)&unk_4E1BD0, (int)&v217, (int)&v218);
  v216 = 7;
  v215 = (int)"level";
  sub_420990((int)&unk_4E1BD8, (int)&v215, (int)&v216);
  v214 = 8;
  v213 = (int)"race";
  sub_420990((int)&unk_4E1BE0, (int)&v213, (int)&v214);
  v212 = 9;
  *(_DWORD *)v211 = "str";
  sub_420990((int)&unk_4E1BE8, (int)v211, (int)&v212);
  v210 = 10;
  *(_DWORD *)v209 = "hth";
  sub_420990((int)&unk_4E1BF0, (int)v209, (int)&v210);
  v208 = 11;
  *(_DWORD *)v207 = "int";
  sub_420990((int)&unk_4E1BF8, (int)v207, (int)&v208);
  v206 = 12;
  *(_DWORD *)v205 = "wis";
  sub_420990((int)&unk_4E1C00, (int)v205, (int)&v206);
  v204 = 13;
  *(_DWORD *)v203 = "dex";
  sub_420990((int)&unk_4E1C08, (int)v203, (int)&v204);
  v202 = 14;
  v201 = (int)"hp";
  sub_420990((int)&unk_4E1C10, (int)&v201, (int)&v202);
  v200 = 15;
  v199 = (int)"mp";
  sub_420990((int)&unk_4E1C18, (int)&v199, (int)&v200);
  v198 = 16;
  *(_DWORD *)v197 = "hit";
  sub_420990((int)&unk_4E1C20, (int)v197, (int)&v198);
  v196 = 17;
  v195 = (int)"dodge";
  sub_420990((int)&unk_4E1C28, (int)&v195, (int)&v196);
  v194 = 18;
  v193 = (int)"attack";
  sub_420990((int)&unk_4E1C30, (int)&v193, (int)&v194);
  v192 = 19;
  v191 = (int)"magic";
  sub_420990((int)&unk_4E1C38, (int)&v191, (int)&v192);
  v190 = 20;
  v189 = (int)"defense";
  sub_420990((int)&unk_4E1C40, (int)&v189, (int)&v190);
  v188 = 21;
  v187 = (int)"absorb";
  sub_420990((int)&unk_4E1C48, (int)&v187, (int)&v188);
  v186 = 22;
  v185 = (int)"aspeed";
  sub_420990((int)&unk_4E1C50, (int)&v185, (int)&v186);
  v184 = 23;
  v183 = (int)"mspeed";
  sub_420990((int)&unk_4E1C58, (int)&v183, (int)&v184);
  v182 = 24;
  v181 = (int)"resist";
  sub_420990((int)&unk_4E1C60, (int)&v181, (int)&v182);
  v180 = 25;
  v179 = (int)"resistfire";
  sub_420990((int)&unk_4E1C68, (int)&v179, (int)&v180);
  v178 = 26;
  v177 = (int)"resistice";
  sub_420990((int)&unk_4E1C70, (int)&v177, (int)&v178);
  v176 = 27;
  v175 = (int)"resistlitning";
  sub_420990((int)&unk_4E1C78, (int)&v175, (int)&v176);
  v174 = 28;
  v173 = (int)"resistcurse";
  sub_420990((int)&unk_4E1C80, (int)&v173, (int)&v174);
  v172 = 29;
  v171 = (int)"resistpalsy";
  sub_420990((int)&unk_4E1C88, (int)&v171, (int)&v172);
  v170 = 30;
  v169 = (int)"kind";
  sub_420990((int)&unk_4E1C90, (int)&v169, (int)&v170);
  v168 = 31;
  v167 = (int)"xy";
  sub_420990((int)&unk_4E1C98, (int)&v167, (int)&v168);
  v166 = 32;
  v165 = (int)"filename";
  sub_420990((int)&unk_4E1CA0, (int)&v165, (int)&v166);
  v164 = 33;
  v163 = (int)"ai";
  sub_420990((int)&unk_4E1CA8, (int)&v163, (int)&v164);
  v162 = 34;
  v161 = (int)"range";
  sub_420990((int)&unk_4E1CB0, (int)&v161, (int)&v162);
  v160 = 35;
  v159 = (int)"sight";
  sub_420990((int)&unk_4E1CB8, (int)&v159, (int)&v160);
  v158 = 36;
  *(_DWORD *)v157 = "exp";
  sub_420990((int)&unk_4E1CC0, (int)v157, (int)&v158);
  v156 = 37;
  v155 = (int)"itemgroup";
  sub_420990((int)&unk_4E1CC8, (int)&v155, (int)&v156);
  v154 = 38;
  v153 = (int)"class";
  sub_420990((int)&unk_4E1CD0, (int)&v153, (int)&v154);
  v152 = 39;
  v151 = (int)"limit";
  sub_420990((int)&unk_4E1CD8, (int)&v151, (int)&v152);
  v150 = 40;
  *(_DWORD *)v149 = "buy";
  sub_420990((int)&unk_4E1CE0, (int)v149, (int)&v150);
  v148 = 41;
  v147 = (int)"endurance";
  sub_420990((int)&unk_4E1CE8, (int)&v147, (int)&v148);
  v146 = 42;
  v145 = (int)"specialty";
  sub_420990((int)&unk_4E1CF0, (int)&v145, (int)&v146);
  v144 = 43;
  v143 = (int)"teleport";
  sub_420990((int)&unk_4E1CF8, (int)&v143, (int)&v144);
  v142 = 44;
  v141 = (int)"image";
  sub_420990((int)&unk_4E1D00, (int)&v141, (int)&v142);
  v140 = 45;
  v139 = (int)"action";
  sub_420990((int)&unk_4E1D08, (int)&v139, (int)&v140);
  v138 = 46;
  v137 = (int)"refresh";
  sub_420990((int)&unk_4E1D10, (int)&v137, (int)&v138);
  v136 = 47;
  v135 = (int)"wear";
  sub_420990((int)&unk_4E1D18, (int)&v135, (int)&v136);
  v134 = 48;
  *(_DWORD *)v133 = "use";
  sub_420990((int)&unk_4E1D20, (int)v133, (int)&v134);
  v132 = 49;
  v131 = (int)"plural";
  sub_420990((int)&unk_4E1D28, (int)&v131, (int)&v132);
  v130 = 50;
  v129 = (int)"item";
  sub_420990((int)&unk_4E1D30, (int)&v129, (int)&v130);
  v128 = 51;
  v127 = (int)"group";
  sub_420990((int)&unk_4E1D38, (int)&v127, (int)&v128);
  v126 = 52;
  v125 = (int)"money";
  sub_420990((int)&unk_4E1D40, (int)&v125, (int)&v126);
  v124 = 53;
  v123 = (int)"move";
  sub_420990((int)&unk_4E1D48, (int)&v123, (int)&v124);
  v122 = 54;
  v121 = (int)"html";
  sub_420990((int)&unk_4E1D50, (int)&v121, (int)&v122);
  v120 = 55;
  v119 = (int)"shape";
  sub_420990((int)&unk_4E1D58, (int)&v119, (int)&v120);
  v118 = 56;
  *(_DWORD *)v117 = "dir";
  sub_420990((int)&unk_4E1D60, (int)v117, (int)&v118);
  v116 = 57;
  v115 = (int)"desc";
  sub_420990((int)&unk_4E1D68, (int)&v115, (int)&v116);
  v114 = 58;
  v113 = (int)"sell";
  sub_420990((int)&unk_4E1D70, (int)&v113, (int)&v114);
  v112 = 59;
  *(_DWORD *)v111 = "pre";
  sub_420990((int)&unk_4E1D78, (int)v111, (int)&v112);
  v110 = 60;
  v109 = (int)"delay";
  sub_420990((int)&unk_4E1D80, (int)&v109, (int)&v110);
  v108 = 61;
  v107 = (int)"lasttime";
  sub_420990((int)&unk_4E1D88, (int)&v107, (int)&v108);
  v106 = 62;
  v105 = (int)"value1";
  sub_420990((int)&unk_4E1D90, (int)&v105, (int)&v106);
  v104 = 63;
  v103 = (int)"value2";
  sub_420990((int)&unk_4E1D98, (int)&v103, (int)&v104);
  v102 = 64;
  v101 = (int)"case";
  sub_420990((int)&unk_4E1DA0, (int)&v101, (int)&v102);
  v100 = 65;
  v99 = (int)"if";
  sub_420990((int)&unk_4E1DA8, (int)&v99, (int)&v100);
  v98 = 66;
  v97 = (int)"then";
  sub_420990((int)&unk_4E1DB0, (int)&v97, (int)&v98);
  v96 = 67;
  v95 = (int)"else";
  sub_420990((int)&unk_4E1DB8, (int)&v95, (int)&v96);
  v94 = 68;
  v93 = (int)"reward";
  sub_420990((int)&unk_4E1DC0, (int)&v93, (int)&v94);
  v92 = 69;
  v91 = (int)"party";
  sub_420990((int)&unk_4E1DC8, (int)&v91, (int)&v92);
  v90 = 70;
  v89 = (int)"quest";
  sub_420990((int)&unk_4E1DD0, (int)&v89, (int)&v90);
  v88 = 71;
  v87 = (int)"contribute";
  sub_420990((int)&unk_4E1DD8, (int)&v87, (int)&v88);
  v86 = 72;
  v85 = (int)"supoint";
  sub_420990((int)&unk_4E1DE0, (int)&v85, (int)&v86);
  v84 = 73;
  v83 = (int)"save";
  sub_420990((int)&unk_4E1DE8, (int)&v83, (int)&v84);
  v82 = 74;
  v81 = (int)"clear";
  sub_420990((int)&unk_4E1DF0, (int)&v81, (int)&v82);
  v80 = 75;
  v79 = (int)"notclear";
  sub_420990((int)&unk_4E1DF8, (int)&v79, (int)&v80);
  v78 = 76;
  v77 = (int)"link";
  sub_420990((int)&unk_4E1E00, (int)&v77, (int)&v78);
  v76 = 77;
  v75 = (int)"in";
  sub_420990((int)&unk_4E1E08, (int)&v75, (int)&v76);
  v74 = 78;
  *(_DWORD *)v73 = "out";
  sub_420990((int)&unk_4E1E10, (int)v73, (int)&v74);
  v72 = 79;
  v71 = (int)"linked";
  sub_420990((int)&unk_4E1E18, (int)&v71, (int)&v72);
  v70 = 80;
  v69 = (int)"droprate";
  sub_420990((int)&unk_4E1E20, (int)&v69, (int)&v70);
  v68 = 81;
  v67 = (int)"maxlevel";
  sub_420990((int)&unk_4E1E28, (int)&v67, (int)&v68);
  v66 = 82;
  v65 = (int)"charming";
  sub_420990((int)&unk_4E1E30, (int)&v65, (int)&v66);
  v64 = 83;
  v63 = (int)"setgem";
  sub_420990((int)&unk_4E1E38, (int)&v63, (int)&v64);
  v62 = 84;
  v61 = (int)"repair";
  sub_420990((int)&unk_4E1E40, (int)&v61, (int)&v62);
  v60 = 85;
  v59 = (int)"gstate";
  sub_420990((int)&unk_4E1E48, (int)&v59, (int)&v60);
  v58 = 86;
  v57 = (int)"cooltime";
  sub_420990((int)&unk_4E1E50, (int)&v57, (int)&v58);
  v56 = 87;
  v55 = (int)"cycle";
  sub_420990((int)&unk_4E1E58, (int)&v55, (int)&v56);
  v54 = 88;
  v53 = (int)"changeprefix";
  sub_420990((int)&unk_4E1E60, (int)&v53, (int)&v54);
  v52 = 89;
  v51 = (int)"buff";
  sub_420990((int)&unk_4E1E68, (int)&v51, (int)&v52);
  v50 = 90;
  v49 = (int)"cocoon";
  sub_420990((int)&unk_4E1E70, (int)&v49, (int)&v50);
  v48 = 91;
  v47 = (int)"imageex";
  sub_420990((int)&unk_4E1E78, (int)&v47, (int)&v48);
  v46 = 92;
  v45 = (int)"itemrand";
  sub_420990((int)&unk_4E1E80, (int)&v45, (int)&v46);
  v44 = 93;
  v43 = (int)"guide";
  sub_420990((int)&unk_4E1E88, (int)&v43, (int)&v44);
  v42 = 94;
  v41 = (int)"redistribute";
  sub_420990((int)&unk_4E1E90, (int)&v41, (int)&v42);
  v40 = 95;
  *(_DWORD *)v39 = "cid";
  sub_420990((int)&unk_4E1E98, (int)v39, (int)&v40);
  v38 = 96;
  v37 = (int)"warrelation";
  sub_420990((int)&unk_4E1EA0, (int)&v37, (int)&v38);
  v36 = 97;
  v35 = (int)"rage";
  sub_420990((int)&unk_4E1EA8, (int)&v35, (int)&v36);
  v34 = 98;
  *(_DWORD *)v33 = "pay";
  sub_420990((int)&unk_4E1EB0, (int)v33, (int)&v34);
  v32 = 99;
  v31 = (int)"protect";
  sub_420990((int)&unk_4E1EB8, (int)&v31, (int)&v32);
  v30 = 100;
  v29 = (int)"revival";
  sub_420990((int)&unk_4E1EC0, (int)&v29, (int)&v30);
  v28 = 101;
  v27 = (int)"code";
  sub_420990((int)&unk_4E1EC8, (int)&v27, (int)&v28);
  v26 = 102;
  v25 = (int)"stbuff";
  sub_420990((int)&unk_4E1ED0, (int)&v25, (int)&v26);
  v24 = 103;
  v23 = (int)"from";
  sub_420990((int)&unk_4E1ED8, (int)&v23, (int)&v24);
  v22 = 104;
  v21 = (int)"to";
  sub_420990((int)&unk_4E1EE0, (int)&v21, (int)&v22);
  v20 = 105;
  v19 = (int)"maxprotect";
  sub_420990((int)&unk_4E1EE8, (int)&v19, (int)&v20);
  v18 = 106;
  v17 = (int)"effect";
  sub_420990((int)&unk_4E1EF0, (int)&v17, (int)&v18);
  v16 = 107;
  v15 = (int)"skill";
  sub_420990((int)&unk_4E1EF8, (int)&v15, (int)&v16);
  v14 = 108;
  v13 = (int)"scenario";
  sub_420990((int)&unk_4E1F00, (int)&v13, (int)&v14);
  v12 = 109;
  v11 = (int)"country";
  sub_420990((int)&unk_4E1F08, (int)&v11, (int)&v12);
  v10 = 110;
  v9 = (int)"bstate";
  sub_420990((int)&unk_4E1F10, (int)&v9, (int)&v10);
  v8 = 111;
  v7 = (int)"citem";
  sub_420990((int)&unk_4E1F18, (int)&v7, (int)&v8);
  v6 = 112;
  v5 = (int)"SkillInfo";
  sub_420990((int)&unk_4E1F20, (int)&v5, (int)&v6);
  v4 = 113;
  v3 = (int)"sgxy";
  sub_420990((int)&unk_4E1F28, (int)&v3, (int)&v4);
  v2 = 114;
  v1 = (int)"sgdir";
  return sub_420990((int)&unk_4E1F30, (int)&v1, (int)&v2);
}

//----- (004AE1D0) --------------------------------------------------------
int __cdecl sub_4AE1D0()
{
  sub_44CD90(&unk_4E1F38);
  return atexit(sub_4B3390);
}

//----- (004AE1F0) --------------------------------------------------------
int __cdecl sub_4AE1F0()
{
  int v1; // [sp+0h] [bp-E0h]@41
  void *v2; // [sp+4h] [bp-DCh]@38
  void *v3; // [sp+8h] [bp-D8h]@35
  int v4; // [sp+Ch] [bp-D4h]@32
  int v5; // [sp+10h] [bp-D0h]@29
  int v6; // [sp+14h] [bp-CCh]@26
  int v7; // [sp+18h] [bp-C8h]@23
  int v8; // [sp+1Ch] [bp-C4h]@20
  int v9; // [sp+20h] [bp-C0h]@17
  int v10; // [sp+24h] [bp-BCh]@14
  int v11; // [sp+28h] [bp-B8h]@11
  int v12; // [sp+2Ch] [bp-B4h]@8
  int v13; // [sp+30h] [bp-B0h]@5
  int v14; // [sp+34h] [bp-ACh]@2
  int v15; // [sp+38h] [bp-A8h]@43
  int v16; // [sp+3Ch] [bp-A4h]@40
  int v17; // [sp+40h] [bp-A0h]@43
  int v18; // [sp+44h] [bp-9Ch]@40
  void *v19; // [sp+48h] [bp-98h]@37
  void *v20; // [sp+4Ch] [bp-94h]@40
  int v21; // [sp+50h] [bp-90h]@37
  void *v22; // [sp+54h] [bp-8Ch]@34
  void *v23; // [sp+58h] [bp-88h]@37
  int v24; // [sp+5Ch] [bp-84h]@34
  int v25; // [sp+60h] [bp-80h]@31
  int v26; // [sp+64h] [bp-7Ch]@34
  int v27; // [sp+68h] [bp-78h]@31
  int v28; // [sp+6Ch] [bp-74h]@28
  int v29; // [sp+70h] [bp-70h]@31
  int v30; // [sp+74h] [bp-6Ch]@28
  int v31; // [sp+78h] [bp-68h]@25
  int v32; // [sp+7Ch] [bp-64h]@28
  char v33[4]; // [sp+80h] [bp-60h]@25
  int v34; // [sp+84h] [bp-5Ch]@22
  int v35; // [sp+88h] [bp-58h]@25
  int v36; // [sp+8Ch] [bp-54h]@22
  int v37; // [sp+90h] [bp-50h]@19
  int v38; // [sp+94h] [bp-4Ch]@22
  int v39; // [sp+98h] [bp-48h]@19
  int v40; // [sp+9Ch] [bp-44h]@16
  int v41; // [sp+A0h] [bp-40h]@19
  int v42; // [sp+A4h] [bp-3Ch]@16
  int v43; // [sp+A8h] [bp-38h]@13
  int v44; // [sp+ACh] [bp-34h]@16
  int v45; // [sp+B0h] [bp-30h]@13
  int v46; // [sp+B4h] [bp-2Ch]@10
  int v47; // [sp+B8h] [bp-28h]@13
  int v48; // [sp+BCh] [bp-24h]@10
  int v49; // [sp+C0h] [bp-20h]@7
  int v50; // [sp+C4h] [bp-1Ch]@10
  int v51; // [sp+C8h] [bp-18h]@7
  int v52; // [sp+CCh] [bp-14h]@4
  int v53; // [sp+D0h] [bp-10h]@7
  int v54; // [sp+D4h] [bp-Ch]@4
  int v55; // [sp+D8h] [bp-8h]@1
  int v56; // [sp+DCh] [bp-4h]@4

  v55 = (int)sub_401000(0xB4u);
  if ( v55 )
    v14 = CInitMap::CInitMap(v55);
  else
    v14 = 0;
  v56 = v14;
  v54 = (int)"initmap";
  sub_420990((int)&unk_4E1F48, (int)&v54, (int)&v56);
  v52 = (int)sub_401000(0x14Cu);
  if ( v52 )
    v13 = CInitMonster::CInitMonster(v52);
  else
    v13 = 0;
  v53 = v13;
  v51 = (int)"monster";
  sub_420990((int)&unk_4E1F50, (int)&v51, (int)&v53);
  v49 = (int)sub_401000(0x58u);
  if ( v49 )
    v12 = sub_4382D0(v49);
  else
    v12 = 0;
  v50 = v12;
  v48 = (int)"genmonster";
  sub_420990((int)&unk_4E1F58, (int)&v48, (int)&v50);
  v46 = (int)sub_401000(0xB8u);
  if ( v46 )
    v11 = CInitItem::CInitItem(v46);
  else
    v11 = 0;
  v47 = v11;
  v45 = (int)"item";
  sub_420990((int)&unk_4E1F60, (int)&v45, (int)&v47);
  v43 = (int)sub_401000(0x38u);
  if ( v43 )
    v10 = CPrefix::CPrefix(v43);
  else
    v10 = 0;
  v44 = v10;
  v42 = (int)"prefix";
  sub_420990((int)&unk_4E1F68, (int)&v42, (int)&v44);
  v40 = (int)sub_401000(0x34u);
  if ( v40 )
    v9 = CGroup::CGroup(v40);
  else
    v9 = 0;
  v41 = v9;
  v39 = (int)"group";
  sub_420990((int)&unk_4E1F70, (int)&v39, (int)&v41);
  v37 = (int)sub_401000(0x34u);
  if ( v37 )
    v8 = CItemGroup::CItemGroup(v37);
  else
    v8 = 0;
  v38 = v8;
  v36 = (int)"itemgroup";
  sub_420990((int)&unk_4E1F78, (int)&v36, (int)&v38);
  v34 = (int)sub_401000(0x28u);
  if ( v34 )
    v7 = CInitNPC::CInitNPC(v34);
  else
    v7 = 0;
  v35 = v7;
  *(_DWORD *)v33 = "npc";
  sub_420990((int)&unk_4E1F80, (int)v33, (int)&v35);
  v31 = (int)sub_401000(0xB4u);
  if ( v31 )
    v6 = CGenNPC::CGenNPC(v31);
  else
    v6 = 0;
  v32 = v6;
  v30 = (int)"gennpc";
  sub_420990((int)&unk_4E1F88, (int)&v30, (int)&v32);
  v28 = (int)sub_401000(0x60u);
  if ( v28 )
    v5 = sub_47EDE0(v28);
  else
    v5 = 0;
  v29 = v5;
  v27 = (int)"skill";
  sub_420990((int)&unk_4E1F90, (int)&v27, (int)&v29);
  v25 = (int)sub_401000(0x38u);
  if ( v25 )
    v4 = CQuest::CQuest(v25);
  else
    v4 = 0;
  v26 = v4;
  v24 = (int)"quest";
  sub_420990((int)&unk_4E1F98, (int)&v24, (int)&v26);
  v22 = sub_401000(0x34u);
  if ( v22 )
    v3 = CGoto::CGoto(v22);
  else
    v3 = 0;
  v23 = v3;
  v21 = (int)"goto";
  sub_420990((int)&unk_4E1FA0, (int)&v21, (int)&v23);
  v19 = sub_401000(0x48u);
  if ( v19 )
    v2 = CPortal::CPortal(v19);
  else
    v2 = 0;
  v20 = v2;
  v18 = (int)"portal";
  sub_420990((int)&unk_4E1FA8, (int)&v18, (int)&v20);
  v16 = (int)sub_401000(0x34u);
  if ( v16 )
    v1 = CGoods::CGoods(v16);
  else
    v1 = 0;
  v17 = v1;
  v15 = (int)"goods";
  return sub_420990((int)&unk_4E1FB0, (int)&v15, (int)&v17);
}

//----- (004AE6A0) --------------------------------------------------------
DWORD __cdecl sub_4AE6A0()
{
  DWORD result; // eax@1

  result = GetTickCount();
  dword_4E1FC0 = result;
  return result;
}
// 4E1FC0: using guessed type int dword_4E1FC0;

//----- (004AE6B0) --------------------------------------------------------
int __cdecl sub_4AE6B0()
{
  sub_44FB90(&unk_4E1FC4);
  return atexit(sub_4B33A0);
}

//----- (004AE6D0) --------------------------------------------------------
int __cdecl sub_4AE6D0()
{
  CIOCriticalSection::CIOCriticalSection((struct _RTL_CRITICAL_SECTION *)&unk_4E1FD0);
  return atexit((void (__cdecl *)())sub_4B33B0);
}

//----- (004AE6F0) --------------------------------------------------------
DWORD __cdecl sub_4AE6F0()
{
  DWORD result; // eax@1

  result = GetTickCount();
  dword_4E201C = result;
  return result;
}
// 4E201C: using guessed type int dword_4E201C;

//----- (004AE700) --------------------------------------------------------
int __cdecl sub_4AE700()
{
  sub_47A6F0(&unk_4E2020);
  return atexit(sub_4B33C0);
}

//----- (004AE720) --------------------------------------------------------
int __cdecl sub_4AE720()
{
  sub_47DD40((int)&unk_4E202C);
  return atexit((void (__cdecl *)())sub_4B33D0);
}

//----- (004AE740) --------------------------------------------------------
int __cdecl sub_4AE740()
{
  sub_47A760(&unk_4E2044);
  return atexit(sub_4B33E0);
}

//----- (004AE760) --------------------------------------------------------
int __cdecl sub_4AE760()
{
  sub_47DD40((int)&unk_4E2050);
  return atexit((void (__cdecl *)())sub_4B33F0);
}

//----- (004AE780) --------------------------------------------------------
int __cdecl sub_4AE780()
{
  sub_47A6F0(&unk_4E2068);
  return atexit(sub_4B3400);
}

//----- (004AE7A0) --------------------------------------------------------
int __cdecl sub_4AE7A0()
{
  sub_423F60((int)&unk_4E2078, 32, 2, (void (__thiscall *)(_DWORD))CIOCriticalSection::CIOCriticalSection);
  return atexit(sub_4B3410);
}

//----- (004AE7D0) --------------------------------------------------------
int __cdecl sub_4AE7D0()
{
  sub_47DD40((int)&unk_4E20B8);
  return atexit((void (__cdecl *)())sub_4B3430);
}

//----- (004AE7F0) --------------------------------------------------------
int __cdecl sub_4AE7F0()
{
  sub_47A790(&unk_4E20D0);
  return atexit(sub_4B3440);
}

//----- (004AE810) --------------------------------------------------------
int __cdecl sub_4AE810()
{
  sub_47DD40((int)&unk_4E20DC);
  return atexit((void (__cdecl *)())sub_4B3450);
}

//----- (004AE830) --------------------------------------------------------
int __cdecl sub_4AE830()
{
  sub_47A8B0((int)&unk_4E20F4);
  return atexit(sub_4B3460);
}

//----- (004AE850) --------------------------------------------------------
int __cdecl sub_4AE850()
{
  sub_47DAA0(&unk_4E210C);
  return atexit(sub_4B3470);
}

//----- (004AE870) --------------------------------------------------------
int __cdecl sub_4AE870()
{
  sub_47DD40((int)&unk_4E2118);
  return atexit((void (__cdecl *)())sub_4B3480);
}

//----- (004AE890) --------------------------------------------------------
int __cdecl sub_4AE890()
{
  sub_47EBE0(&unk_4E214C);
  return atexit(sub_4B3490);
}

//----- (004AE8B0) --------------------------------------------------------
int __cdecl sub_4AE8B0()
{
  sub_47EC80((int)&unk_4E2158);
  return atexit(sub_4B34A0);
}

//----- (004AE8D0) --------------------------------------------------------
int __cdecl sub_4AE8D0()
{
  sub_47DD40((int)&unk_4E2170);
  return atexit((void (__cdecl *)())sub_4B34B0);
}

//----- (004AE8F0) --------------------------------------------------------
int __cdecl sub_4AE8F0()
{
  sub_48D680(&unk_4E218C);
  return atexit(sub_4B34C0);
}

//----- (004AE910) --------------------------------------------------------
int __cdecl sub_4AE910()
{
  sub_48D680(&unk_4E2198);
  return atexit(sub_4B34D0);
}

//----- (004AE930) --------------------------------------------------------
int __cdecl sub_4AE930()
{
  int v1; // [sp+0h] [bp-980h]@455
  int v2; // [sp+4h] [bp-97Ch]@452
  int v3; // [sp+8h] [bp-978h]@449
  int v4; // [sp+Ch] [bp-974h]@446
  int v5; // [sp+10h] [bp-970h]@443
  int v6; // [sp+14h] [bp-96Ch]@440
  int v7; // [sp+18h] [bp-968h]@437
  int v8; // [sp+1Ch] [bp-964h]@434
  int v9; // [sp+20h] [bp-960h]@431
  int v10; // [sp+24h] [bp-95Ch]@428
  int v11; // [sp+28h] [bp-958h]@425
  int v12; // [sp+2Ch] [bp-954h]@422
  int v13; // [sp+30h] [bp-950h]@419
  int v14; // [sp+34h] [bp-94Ch]@416
  int v15; // [sp+38h] [bp-948h]@413
  int v16; // [sp+3Ch] [bp-944h]@410
  int v17; // [sp+40h] [bp-940h]@407
  int v18; // [sp+44h] [bp-93Ch]@404
  int v19; // [sp+48h] [bp-938h]@401
  int v20; // [sp+4Ch] [bp-934h]@398
  int v21; // [sp+50h] [bp-930h]@395
  int v22; // [sp+54h] [bp-92Ch]@392
  int v23; // [sp+58h] [bp-928h]@389
  int v24; // [sp+5Ch] [bp-924h]@386
  int v25; // [sp+60h] [bp-920h]@383
  int v26; // [sp+64h] [bp-91Ch]@380
  int v27; // [sp+68h] [bp-918h]@377
  int v28; // [sp+6Ch] [bp-914h]@374
  int v29; // [sp+70h] [bp-910h]@371
  int v30; // [sp+74h] [bp-90Ch]@368
  int v31; // [sp+78h] [bp-908h]@365
  int v32; // [sp+7Ch] [bp-904h]@362
  int v33; // [sp+80h] [bp-900h]@359
  int v34; // [sp+84h] [bp-8FCh]@356
  int v35; // [sp+88h] [bp-8F8h]@353
  int v36; // [sp+8Ch] [bp-8F4h]@350
  int v37; // [sp+90h] [bp-8F0h]@347
  int v38; // [sp+94h] [bp-8ECh]@344
  int v39; // [sp+98h] [bp-8E8h]@341
  int v40; // [sp+9Ch] [bp-8E4h]@338
  int v41; // [sp+A0h] [bp-8E0h]@335
  int v42; // [sp+A4h] [bp-8DCh]@332
  int v43; // [sp+A8h] [bp-8D8h]@329
  int v44; // [sp+ACh] [bp-8D4h]@326
  int v45; // [sp+B0h] [bp-8D0h]@323
  int v46; // [sp+B4h] [bp-8CCh]@320
  int v47; // [sp+B8h] [bp-8C8h]@317
  int v48; // [sp+BCh] [bp-8C4h]@314
  int v49; // [sp+C0h] [bp-8C0h]@311
  int v50; // [sp+C4h] [bp-8BCh]@308
  int v51; // [sp+C8h] [bp-8B8h]@305
  int v52; // [sp+CCh] [bp-8B4h]@302
  int v53; // [sp+D0h] [bp-8B0h]@299
  int v54; // [sp+D4h] [bp-8ACh]@296
  int v55; // [sp+D8h] [bp-8A8h]@293
  int v56; // [sp+DCh] [bp-8A4h]@290
  int v57; // [sp+E0h] [bp-8A0h]@287
  int v58; // [sp+E4h] [bp-89Ch]@284
  int v59; // [sp+E8h] [bp-898h]@281
  int v60; // [sp+ECh] [bp-894h]@278
  int v61; // [sp+F0h] [bp-890h]@275
  int v62; // [sp+F4h] [bp-88Ch]@272
  int v63; // [sp+F8h] [bp-888h]@269
  int v64; // [sp+FCh] [bp-884h]@266
  int v65; // [sp+100h] [bp-880h]@263
  int v66; // [sp+104h] [bp-87Ch]@260
  int v67; // [sp+108h] [bp-878h]@257
  int v68; // [sp+10Ch] [bp-874h]@254
  int v69; // [sp+110h] [bp-870h]@251
  int v70; // [sp+114h] [bp-86Ch]@248
  int v71; // [sp+118h] [bp-868h]@245
  int v72; // [sp+11Ch] [bp-864h]@242
  int v73; // [sp+120h] [bp-860h]@239
  int v74; // [sp+124h] [bp-85Ch]@236
  int v75; // [sp+128h] [bp-858h]@233
  int v76; // [sp+12Ch] [bp-854h]@230
  int v77; // [sp+130h] [bp-850h]@227
  int v78; // [sp+134h] [bp-84Ch]@224
  int v79; // [sp+138h] [bp-848h]@221
  int v80; // [sp+13Ch] [bp-844h]@218
  int v81; // [sp+140h] [bp-840h]@215
  int v82; // [sp+144h] [bp-83Ch]@212
  int v83; // [sp+148h] [bp-838h]@209
  int v84; // [sp+14Ch] [bp-834h]@206
  int v85; // [sp+150h] [bp-830h]@203
  int v86; // [sp+154h] [bp-82Ch]@200
  int v87; // [sp+158h] [bp-828h]@197
  int v88; // [sp+15Ch] [bp-824h]@194
  int v89; // [sp+160h] [bp-820h]@191
  int v90; // [sp+164h] [bp-81Ch]@188
  int v91; // [sp+168h] [bp-818h]@185
  int v92; // [sp+16Ch] [bp-814h]@182
  int v93; // [sp+170h] [bp-810h]@179
  int v94; // [sp+174h] [bp-80Ch]@176
  int v95; // [sp+178h] [bp-808h]@173
  int v96; // [sp+17Ch] [bp-804h]@170
  int v97; // [sp+180h] [bp-800h]@167
  int v98; // [sp+184h] [bp-7FCh]@164
  int v99; // [sp+188h] [bp-7F8h]@161
  int v100; // [sp+18Ch] [bp-7F4h]@158
  int v101; // [sp+190h] [bp-7F0h]@155
  int v102; // [sp+194h] [bp-7ECh]@152
  int v103; // [sp+198h] [bp-7E8h]@149
  int v104; // [sp+19Ch] [bp-7E4h]@146
  int v105; // [sp+1A0h] [bp-7E0h]@143
  int v106; // [sp+1A4h] [bp-7DCh]@140
  int v107; // [sp+1A8h] [bp-7D8h]@137
  int v108; // [sp+1ACh] [bp-7D4h]@134
  int v109; // [sp+1B0h] [bp-7D0h]@131
  int v110; // [sp+1B4h] [bp-7CCh]@128
  int v111; // [sp+1B8h] [bp-7C8h]@125
  int v112; // [sp+1BCh] [bp-7C4h]@122
  int v113; // [sp+1C0h] [bp-7C0h]@119
  int v114; // [sp+1C4h] [bp-7BCh]@116
  int v115; // [sp+1C8h] [bp-7B8h]@113
  int v116; // [sp+1CCh] [bp-7B4h]@110
  int v117; // [sp+1D0h] [bp-7B0h]@107
  int v118; // [sp+1D4h] [bp-7ACh]@104
  int v119; // [sp+1D8h] [bp-7A8h]@101
  int v120; // [sp+1DCh] [bp-7A4h]@98
  int v121; // [sp+1E0h] [bp-7A0h]@95
  int v122; // [sp+1E4h] [bp-79Ch]@92
  int v123; // [sp+1E8h] [bp-798h]@89
  int v124; // [sp+1ECh] [bp-794h]@86
  int v125; // [sp+1F0h] [bp-790h]@83
  int v126; // [sp+1F4h] [bp-78Ch]@80
  int v127; // [sp+1F8h] [bp-788h]@77
  int v128; // [sp+1FCh] [bp-784h]@74
  int v129; // [sp+200h] [bp-780h]@71
  int v130; // [sp+204h] [bp-77Ch]@68
  int v131; // [sp+208h] [bp-778h]@65
  int v132; // [sp+20Ch] [bp-774h]@62
  int v133; // [sp+210h] [bp-770h]@59
  int v134; // [sp+214h] [bp-76Ch]@56
  int v135; // [sp+218h] [bp-768h]@53
  int v136; // [sp+21Ch] [bp-764h]@50
  int v137; // [sp+220h] [bp-760h]@47
  int v138; // [sp+224h] [bp-75Ch]@44
  int v139; // [sp+228h] [bp-758h]@41
  int v140; // [sp+22Ch] [bp-754h]@38
  int v141; // [sp+230h] [bp-750h]@35
  int v142; // [sp+234h] [bp-74Ch]@32
  int v143; // [sp+238h] [bp-748h]@29
  int v144; // [sp+23Ch] [bp-744h]@26
  int v145; // [sp+240h] [bp-740h]@23
  int v146; // [sp+244h] [bp-73Ch]@20
  int v147; // [sp+248h] [bp-738h]@17
  int v148; // [sp+24Ch] [bp-734h]@14
  int v149; // [sp+250h] [bp-730h]@11
  int v150; // [sp+254h] [bp-72Ch]@8
  int v151; // [sp+258h] [bp-728h]@5
  int v152; // [sp+25Ch] [bp-724h]@2
  int v153; // [sp+260h] [bp-720h]@457
  int v154; // [sp+264h] [bp-71Ch]@454
  int v155; // [sp+268h] [bp-718h]@457
  int v156; // [sp+26Ch] [bp-714h]@454
  int v157; // [sp+270h] [bp-710h]@451
  int v158; // [sp+274h] [bp-70Ch]@454
  int v159; // [sp+278h] [bp-708h]@451
  int v160; // [sp+27Ch] [bp-704h]@448
  int v161; // [sp+280h] [bp-700h]@451
  int v162; // [sp+284h] [bp-6FCh]@448
  int v163; // [sp+288h] [bp-6F8h]@445
  int v164; // [sp+28Ch] [bp-6F4h]@448
  int v165; // [sp+290h] [bp-6F0h]@445
  int v166; // [sp+294h] [bp-6ECh]@442
  int v167; // [sp+298h] [bp-6E8h]@445
  int v168; // [sp+29Ch] [bp-6E4h]@442
  int v169; // [sp+2A0h] [bp-6E0h]@439
  int v170; // [sp+2A4h] [bp-6DCh]@442
  int v171; // [sp+2A8h] [bp-6D8h]@439
  int v172; // [sp+2ACh] [bp-6D4h]@436
  int v173; // [sp+2B0h] [bp-6D0h]@439
  int v174; // [sp+2B4h] [bp-6CCh]@436
  int v175; // [sp+2B8h] [bp-6C8h]@433
  int v176; // [sp+2BCh] [bp-6C4h]@436
  int v177; // [sp+2C0h] [bp-6C0h]@433
  int v178; // [sp+2C4h] [bp-6BCh]@430
  int v179; // [sp+2C8h] [bp-6B8h]@433
  int v180; // [sp+2CCh] [bp-6B4h]@430
  int v181; // [sp+2D0h] [bp-6B0h]@427
  int v182; // [sp+2D4h] [bp-6ACh]@430
  int v183; // [sp+2D8h] [bp-6A8h]@427
  int v184; // [sp+2DCh] [bp-6A4h]@424
  int v185; // [sp+2E0h] [bp-6A0h]@427
  int v186; // [sp+2E4h] [bp-69Ch]@424
  int v187; // [sp+2E8h] [bp-698h]@421
  int v188; // [sp+2ECh] [bp-694h]@424
  int v189; // [sp+2F0h] [bp-690h]@421
  int v190; // [sp+2F4h] [bp-68Ch]@418
  int v191; // [sp+2F8h] [bp-688h]@421
  int v192; // [sp+2FCh] [bp-684h]@418
  int v193; // [sp+300h] [bp-680h]@415
  int v194; // [sp+304h] [bp-67Ch]@418
  int v195; // [sp+308h] [bp-678h]@415
  int v196; // [sp+30Ch] [bp-674h]@412
  int v197; // [sp+310h] [bp-670h]@415
  int v198; // [sp+314h] [bp-66Ch]@412
  int v199; // [sp+318h] [bp-668h]@409
  int v200; // [sp+31Ch] [bp-664h]@412
  int v201; // [sp+320h] [bp-660h]@409
  int v202; // [sp+324h] [bp-65Ch]@406
  int v203; // [sp+328h] [bp-658h]@409
  int v204; // [sp+32Ch] [bp-654h]@406
  int v205; // [sp+330h] [bp-650h]@403
  int v206; // [sp+334h] [bp-64Ch]@406
  int v207; // [sp+338h] [bp-648h]@403
  int v208; // [sp+33Ch] [bp-644h]@400
  int v209; // [sp+340h] [bp-640h]@403
  int v210; // [sp+344h] [bp-63Ch]@400
  int v211; // [sp+348h] [bp-638h]@397
  int v212; // [sp+34Ch] [bp-634h]@400
  int v213; // [sp+350h] [bp-630h]@397
  int v214; // [sp+354h] [bp-62Ch]@394
  int v215; // [sp+358h] [bp-628h]@397
  int v216; // [sp+35Ch] [bp-624h]@394
  int v217; // [sp+360h] [bp-620h]@391
  int v218; // [sp+364h] [bp-61Ch]@394
  int v219; // [sp+368h] [bp-618h]@391
  int v220; // [sp+36Ch] [bp-614h]@388
  int v221; // [sp+370h] [bp-610h]@391
  int v222; // [sp+374h] [bp-60Ch]@388
  int v223; // [sp+378h] [bp-608h]@385
  int v224; // [sp+37Ch] [bp-604h]@388
  int v225; // [sp+380h] [bp-600h]@385
  int v226; // [sp+384h] [bp-5FCh]@382
  int v227; // [sp+388h] [bp-5F8h]@385
  int v228; // [sp+38Ch] [bp-5F4h]@382
  int v229; // [sp+390h] [bp-5F0h]@379
  int v230; // [sp+394h] [bp-5ECh]@382
  int v231; // [sp+398h] [bp-5E8h]@379
  int v232; // [sp+39Ch] [bp-5E4h]@376
  int v233; // [sp+3A0h] [bp-5E0h]@379
  int v234; // [sp+3A4h] [bp-5DCh]@376
  int v235; // [sp+3A8h] [bp-5D8h]@373
  int v236; // [sp+3ACh] [bp-5D4h]@376
  int v237; // [sp+3B0h] [bp-5D0h]@373
  int v238; // [sp+3B4h] [bp-5CCh]@370
  int v239; // [sp+3B8h] [bp-5C8h]@373
  int v240; // [sp+3BCh] [bp-5C4h]@370
  int v241; // [sp+3C0h] [bp-5C0h]@367
  int v242; // [sp+3C4h] [bp-5BCh]@370
  int v243; // [sp+3C8h] [bp-5B8h]@367
  int v244; // [sp+3CCh] [bp-5B4h]@364
  int v245; // [sp+3D0h] [bp-5B0h]@367
  int v246; // [sp+3D4h] [bp-5ACh]@364
  int v247; // [sp+3D8h] [bp-5A8h]@361
  int v248; // [sp+3DCh] [bp-5A4h]@364
  int v249; // [sp+3E0h] [bp-5A0h]@361
  int v250; // [sp+3E4h] [bp-59Ch]@358
  int v251; // [sp+3E8h] [bp-598h]@361
  int v252; // [sp+3ECh] [bp-594h]@358
  int v253; // [sp+3F0h] [bp-590h]@355
  int v254; // [sp+3F4h] [bp-58Ch]@358
  int v255; // [sp+3F8h] [bp-588h]@355
  int v256; // [sp+3FCh] [bp-584h]@352
  int v257; // [sp+400h] [bp-580h]@355
  int v258; // [sp+404h] [bp-57Ch]@352
  int v259; // [sp+408h] [bp-578h]@349
  int v260; // [sp+40Ch] [bp-574h]@352
  int v261; // [sp+410h] [bp-570h]@349
  int v262; // [sp+414h] [bp-56Ch]@346
  int v263; // [sp+418h] [bp-568h]@349
  int v264; // [sp+41Ch] [bp-564h]@346
  int v265; // [sp+420h] [bp-560h]@343
  int v266; // [sp+424h] [bp-55Ch]@346
  int v267; // [sp+428h] [bp-558h]@343
  int v268; // [sp+42Ch] [bp-554h]@340
  int v269; // [sp+430h] [bp-550h]@343
  int v270; // [sp+434h] [bp-54Ch]@340
  int v271; // [sp+438h] [bp-548h]@337
  int v272; // [sp+43Ch] [bp-544h]@340
  int v273; // [sp+440h] [bp-540h]@337
  int v274; // [sp+444h] [bp-53Ch]@334
  int v275; // [sp+448h] [bp-538h]@337
  int v276; // [sp+44Ch] [bp-534h]@334
  int v277; // [sp+450h] [bp-530h]@331
  int v278; // [sp+454h] [bp-52Ch]@334
  int v279; // [sp+458h] [bp-528h]@331
  int v280; // [sp+45Ch] [bp-524h]@328
  int v281; // [sp+460h] [bp-520h]@331
  int v282; // [sp+464h] [bp-51Ch]@328
  int v283; // [sp+468h] [bp-518h]@325
  int v284; // [sp+46Ch] [bp-514h]@328
  int v285; // [sp+470h] [bp-510h]@325
  int v286; // [sp+474h] [bp-50Ch]@322
  int v287; // [sp+478h] [bp-508h]@325
  int v288; // [sp+47Ch] [bp-504h]@322
  int v289; // [sp+480h] [bp-500h]@319
  int v290; // [sp+484h] [bp-4FCh]@322
  int v291; // [sp+488h] [bp-4F8h]@319
  int v292; // [sp+48Ch] [bp-4F4h]@316
  int v293; // [sp+490h] [bp-4F0h]@319
  int v294; // [sp+494h] [bp-4ECh]@316
  int v295; // [sp+498h] [bp-4E8h]@313
  int v296; // [sp+49Ch] [bp-4E4h]@316
  int v297; // [sp+4A0h] [bp-4E0h]@313
  int v298; // [sp+4A4h] [bp-4DCh]@310
  int v299; // [sp+4A8h] [bp-4D8h]@313
  int v300; // [sp+4ACh] [bp-4D4h]@310
  int v301; // [sp+4B0h] [bp-4D0h]@307
  int v302; // [sp+4B4h] [bp-4CCh]@310
  int v303; // [sp+4B8h] [bp-4C8h]@307
  int v304; // [sp+4BCh] [bp-4C4h]@304
  int v305; // [sp+4C0h] [bp-4C0h]@307
  int v306; // [sp+4C4h] [bp-4BCh]@304
  int v307; // [sp+4C8h] [bp-4B8h]@301
  int v308; // [sp+4CCh] [bp-4B4h]@304
  int v309; // [sp+4D0h] [bp-4B0h]@301
  int v310; // [sp+4D4h] [bp-4ACh]@298
  int v311; // [sp+4D8h] [bp-4A8h]@301
  int v312; // [sp+4DCh] [bp-4A4h]@298
  int v313; // [sp+4E0h] [bp-4A0h]@295
  int v314; // [sp+4E4h] [bp-49Ch]@298
  int v315; // [sp+4E8h] [bp-498h]@295
  int v316; // [sp+4ECh] [bp-494h]@292
  int v317; // [sp+4F0h] [bp-490h]@295
  int v318; // [sp+4F4h] [bp-48Ch]@292
  int v319; // [sp+4F8h] [bp-488h]@289
  int v320; // [sp+4FCh] [bp-484h]@292
  int v321; // [sp+500h] [bp-480h]@289
  int v322; // [sp+504h] [bp-47Ch]@286
  int v323; // [sp+508h] [bp-478h]@289
  int v324; // [sp+50Ch] [bp-474h]@286
  int v325; // [sp+510h] [bp-470h]@283
  int v326; // [sp+514h] [bp-46Ch]@286
  int v327; // [sp+518h] [bp-468h]@283
  int v328; // [sp+51Ch] [bp-464h]@280
  int v329; // [sp+520h] [bp-460h]@283
  int v330; // [sp+524h] [bp-45Ch]@280
  int v331; // [sp+528h] [bp-458h]@277
  int v332; // [sp+52Ch] [bp-454h]@280
  int v333; // [sp+530h] [bp-450h]@277
  int v334; // [sp+534h] [bp-44Ch]@274
  int v335; // [sp+538h] [bp-448h]@277
  int v336; // [sp+53Ch] [bp-444h]@274
  int v337; // [sp+540h] [bp-440h]@271
  int v338; // [sp+544h] [bp-43Ch]@274
  int v339; // [sp+548h] [bp-438h]@271
  int v340; // [sp+54Ch] [bp-434h]@268
  int v341; // [sp+550h] [bp-430h]@271
  int v342; // [sp+554h] [bp-42Ch]@268
  int v343; // [sp+558h] [bp-428h]@265
  int v344; // [sp+55Ch] [bp-424h]@268
  int v345; // [sp+560h] [bp-420h]@265
  int v346; // [sp+564h] [bp-41Ch]@262
  int v347; // [sp+568h] [bp-418h]@265
  int v348; // [sp+56Ch] [bp-414h]@262
  int v349; // [sp+570h] [bp-410h]@259
  int v350; // [sp+574h] [bp-40Ch]@262
  int v351; // [sp+578h] [bp-408h]@259
  int v352; // [sp+57Ch] [bp-404h]@256
  int v353; // [sp+580h] [bp-400h]@259
  int v354; // [sp+584h] [bp-3FCh]@256
  int v355; // [sp+588h] [bp-3F8h]@253
  int v356; // [sp+58Ch] [bp-3F4h]@256
  int v357; // [sp+590h] [bp-3F0h]@253
  int v358; // [sp+594h] [bp-3ECh]@250
  int v359; // [sp+598h] [bp-3E8h]@253
  int v360; // [sp+59Ch] [bp-3E4h]@250
  int v361; // [sp+5A0h] [bp-3E0h]@247
  int v362; // [sp+5A4h] [bp-3DCh]@250
  int v363; // [sp+5A8h] [bp-3D8h]@247
  int v364; // [sp+5ACh] [bp-3D4h]@244
  int v365; // [sp+5B0h] [bp-3D0h]@247
  int v366; // [sp+5B4h] [bp-3CCh]@244
  int v367; // [sp+5B8h] [bp-3C8h]@241
  int v368; // [sp+5BCh] [bp-3C4h]@244
  int v369; // [sp+5C0h] [bp-3C0h]@241
  int v370; // [sp+5C4h] [bp-3BCh]@238
  int v371; // [sp+5C8h] [bp-3B8h]@241
  int v372; // [sp+5CCh] [bp-3B4h]@238
  int v373; // [sp+5D0h] [bp-3B0h]@235
  int v374; // [sp+5D4h] [bp-3ACh]@238
  int v375; // [sp+5D8h] [bp-3A8h]@235
  int v376; // [sp+5DCh] [bp-3A4h]@232
  int v377; // [sp+5E0h] [bp-3A0h]@235
  int v378; // [sp+5E4h] [bp-39Ch]@232
  int v379; // [sp+5E8h] [bp-398h]@229
  int v380; // [sp+5ECh] [bp-394h]@232
  int v381; // [sp+5F0h] [bp-390h]@229
  int v382; // [sp+5F4h] [bp-38Ch]@226
  int v383; // [sp+5F8h] [bp-388h]@229
  int v384; // [sp+5FCh] [bp-384h]@226
  int v385; // [sp+600h] [bp-380h]@223
  int v386; // [sp+604h] [bp-37Ch]@226
  int v387; // [sp+608h] [bp-378h]@223
  int v388; // [sp+60Ch] [bp-374h]@220
  int v389; // [sp+610h] [bp-370h]@223
  int v390; // [sp+614h] [bp-36Ch]@220
  int v391; // [sp+618h] [bp-368h]@217
  int v392; // [sp+61Ch] [bp-364h]@220
  int v393; // [sp+620h] [bp-360h]@217
  int v394; // [sp+624h] [bp-35Ch]@214
  int v395; // [sp+628h] [bp-358h]@217
  int v396; // [sp+62Ch] [bp-354h]@214
  int v397; // [sp+630h] [bp-350h]@211
  int v398; // [sp+634h] [bp-34Ch]@214
  int v399; // [sp+638h] [bp-348h]@211
  int v400; // [sp+63Ch] [bp-344h]@208
  int v401; // [sp+640h] [bp-340h]@211
  int v402; // [sp+644h] [bp-33Ch]@208
  int v403; // [sp+648h] [bp-338h]@205
  int v404; // [sp+64Ch] [bp-334h]@208
  int v405; // [sp+650h] [bp-330h]@205
  int v406; // [sp+654h] [bp-32Ch]@202
  int v407; // [sp+658h] [bp-328h]@205
  int v408; // [sp+65Ch] [bp-324h]@202
  int v409; // [sp+660h] [bp-320h]@199
  int v410; // [sp+664h] [bp-31Ch]@202
  int v411; // [sp+668h] [bp-318h]@199
  int v412; // [sp+66Ch] [bp-314h]@196
  int v413; // [sp+670h] [bp-310h]@199
  int v414; // [sp+674h] [bp-30Ch]@196
  int v415; // [sp+678h] [bp-308h]@193
  int v416; // [sp+67Ch] [bp-304h]@196
  int v417; // [sp+680h] [bp-300h]@193
  int v418; // [sp+684h] [bp-2FCh]@190
  int v419; // [sp+688h] [bp-2F8h]@193
  int v420; // [sp+68Ch] [bp-2F4h]@190
  int v421; // [sp+690h] [bp-2F0h]@187
  int v422; // [sp+694h] [bp-2ECh]@190
  int v423; // [sp+698h] [bp-2E8h]@187
  int v424; // [sp+69Ch] [bp-2E4h]@184
  int v425; // [sp+6A0h] [bp-2E0h]@187
  int v426; // [sp+6A4h] [bp-2DCh]@184
  int v427; // [sp+6A8h] [bp-2D8h]@181
  int v428; // [sp+6ACh] [bp-2D4h]@184
  int v429; // [sp+6B0h] [bp-2D0h]@181
  int v430; // [sp+6B4h] [bp-2CCh]@178
  int v431; // [sp+6B8h] [bp-2C8h]@181
  int v432; // [sp+6BCh] [bp-2C4h]@178
  int v433; // [sp+6C0h] [bp-2C0h]@175
  int v434; // [sp+6C4h] [bp-2BCh]@178
  int v435; // [sp+6C8h] [bp-2B8h]@175
  int v436; // [sp+6CCh] [bp-2B4h]@172
  int v437; // [sp+6D0h] [bp-2B0h]@175
  int v438; // [sp+6D4h] [bp-2ACh]@172
  int v439; // [sp+6D8h] [bp-2A8h]@169
  int v440; // [sp+6DCh] [bp-2A4h]@172
  int v441; // [sp+6E0h] [bp-2A0h]@169
  int v442; // [sp+6E4h] [bp-29Ch]@166
  int v443; // [sp+6E8h] [bp-298h]@169
  int v444; // [sp+6ECh] [bp-294h]@166
  int v445; // [sp+6F0h] [bp-290h]@163
  int v446; // [sp+6F4h] [bp-28Ch]@166
  int v447; // [sp+6F8h] [bp-288h]@163
  int v448; // [sp+6FCh] [bp-284h]@160
  int v449; // [sp+700h] [bp-280h]@163
  int v450; // [sp+704h] [bp-27Ch]@160
  int v451; // [sp+708h] [bp-278h]@157
  int v452; // [sp+70Ch] [bp-274h]@160
  int v453; // [sp+710h] [bp-270h]@157
  int v454; // [sp+714h] [bp-26Ch]@154
  int v455; // [sp+718h] [bp-268h]@157
  int v456; // [sp+71Ch] [bp-264h]@154
  int v457; // [sp+720h] [bp-260h]@151
  int v458; // [sp+724h] [bp-25Ch]@154
  int v459; // [sp+728h] [bp-258h]@151
  int v460; // [sp+72Ch] [bp-254h]@148
  int v461; // [sp+730h] [bp-250h]@151
  int v462; // [sp+734h] [bp-24Ch]@148
  int v463; // [sp+738h] [bp-248h]@145
  int v464; // [sp+73Ch] [bp-244h]@148
  int v465; // [sp+740h] [bp-240h]@145
  int v466; // [sp+744h] [bp-23Ch]@142
  int v467; // [sp+748h] [bp-238h]@145
  int v468; // [sp+74Ch] [bp-234h]@142
  int v469; // [sp+750h] [bp-230h]@139
  int v470; // [sp+754h] [bp-22Ch]@142
  int v471; // [sp+758h] [bp-228h]@139
  int v472; // [sp+75Ch] [bp-224h]@136
  int v473; // [sp+760h] [bp-220h]@139
  int v474; // [sp+764h] [bp-21Ch]@136
  int v475; // [sp+768h] [bp-218h]@133
  int v476; // [sp+76Ch] [bp-214h]@136
  int v477; // [sp+770h] [bp-210h]@133
  int v478; // [sp+774h] [bp-20Ch]@130
  int v479; // [sp+778h] [bp-208h]@133
  int v480; // [sp+77Ch] [bp-204h]@130
  int v481; // [sp+780h] [bp-200h]@127
  int v482; // [sp+784h] [bp-1FCh]@130
  int v483; // [sp+788h] [bp-1F8h]@127
  int v484; // [sp+78Ch] [bp-1F4h]@124
  int v485; // [sp+790h] [bp-1F0h]@127
  int v486; // [sp+794h] [bp-1ECh]@124
  int v487; // [sp+798h] [bp-1E8h]@121
  int v488; // [sp+79Ch] [bp-1E4h]@124
  int v489; // [sp+7A0h] [bp-1E0h]@121
  int v490; // [sp+7A4h] [bp-1DCh]@118
  int v491; // [sp+7A8h] [bp-1D8h]@121
  int v492; // [sp+7ACh] [bp-1D4h]@118
  int v493; // [sp+7B0h] [bp-1D0h]@115
  int v494; // [sp+7B4h] [bp-1CCh]@118
  int v495; // [sp+7B8h] [bp-1C8h]@115
  int v496; // [sp+7BCh] [bp-1C4h]@112
  int v497; // [sp+7C0h] [bp-1C0h]@115
  int v498; // [sp+7C4h] [bp-1BCh]@112
  int v499; // [sp+7C8h] [bp-1B8h]@109
  int v500; // [sp+7CCh] [bp-1B4h]@112
  int v501; // [sp+7D0h] [bp-1B0h]@109
  int v502; // [sp+7D4h] [bp-1ACh]@106
  int v503; // [sp+7D8h] [bp-1A8h]@109
  int v504; // [sp+7DCh] [bp-1A4h]@106
  int v505; // [sp+7E0h] [bp-1A0h]@103
  int v506; // [sp+7E4h] [bp-19Ch]@106
  int v507; // [sp+7E8h] [bp-198h]@103
  int v508; // [sp+7ECh] [bp-194h]@100
  int v509; // [sp+7F0h] [bp-190h]@103
  int v510; // [sp+7F4h] [bp-18Ch]@100
  int v511; // [sp+7F8h] [bp-188h]@97
  int v512; // [sp+7FCh] [bp-184h]@100
  int v513; // [sp+800h] [bp-180h]@97
  int v514; // [sp+804h] [bp-17Ch]@94
  int v515; // [sp+808h] [bp-178h]@97
  int v516; // [sp+80Ch] [bp-174h]@94
  int v517; // [sp+810h] [bp-170h]@91
  int v518; // [sp+814h] [bp-16Ch]@94
  int v519; // [sp+818h] [bp-168h]@91
  int v520; // [sp+81Ch] [bp-164h]@88
  int v521; // [sp+820h] [bp-160h]@91
  int v522; // [sp+824h] [bp-15Ch]@88
  int v523; // [sp+828h] [bp-158h]@85
  int v524; // [sp+82Ch] [bp-154h]@88
  int v525; // [sp+830h] [bp-150h]@85
  int v526; // [sp+834h] [bp-14Ch]@82
  int v527; // [sp+838h] [bp-148h]@85
  int v528; // [sp+83Ch] [bp-144h]@82
  int v529; // [sp+840h] [bp-140h]@79
  int v530; // [sp+844h] [bp-13Ch]@82
  int v531; // [sp+848h] [bp-138h]@79
  int v532; // [sp+84Ch] [bp-134h]@76
  int v533; // [sp+850h] [bp-130h]@79
  int v534; // [sp+854h] [bp-12Ch]@76
  int v535; // [sp+858h] [bp-128h]@73
  int v536; // [sp+85Ch] [bp-124h]@76
  int v537; // [sp+860h] [bp-120h]@73
  int v538; // [sp+864h] [bp-11Ch]@70
  int v539; // [sp+868h] [bp-118h]@73
  int v540; // [sp+86Ch] [bp-114h]@70
  int v541; // [sp+870h] [bp-110h]@67
  int v542; // [sp+874h] [bp-10Ch]@70
  int v543; // [sp+878h] [bp-108h]@67
  int v544; // [sp+87Ch] [bp-104h]@64
  int v545; // [sp+880h] [bp-100h]@67
  int v546; // [sp+884h] [bp-FCh]@64
  int v547; // [sp+888h] [bp-F8h]@61
  int v548; // [sp+88Ch] [bp-F4h]@64
  int v549; // [sp+890h] [bp-F0h]@61
  int v550; // [sp+894h] [bp-ECh]@58
  int v551; // [sp+898h] [bp-E8h]@61
  int v552; // [sp+89Ch] [bp-E4h]@58
  int v553; // [sp+8A0h] [bp-E0h]@55
  int v554; // [sp+8A4h] [bp-DCh]@58
  int v555; // [sp+8A8h] [bp-D8h]@55
  int v556; // [sp+8ACh] [bp-D4h]@52
  int v557; // [sp+8B0h] [bp-D0h]@55
  int v558; // [sp+8B4h] [bp-CCh]@52
  int v559; // [sp+8B8h] [bp-C8h]@49
  int v560; // [sp+8BCh] [bp-C4h]@52
  int v561; // [sp+8C0h] [bp-C0h]@49
  int v562; // [sp+8C4h] [bp-BCh]@46
  int v563; // [sp+8C8h] [bp-B8h]@49
  int v564; // [sp+8CCh] [bp-B4h]@46
  int v565; // [sp+8D0h] [bp-B0h]@43
  int v566; // [sp+8D4h] [bp-ACh]@46
  int v567; // [sp+8D8h] [bp-A8h]@43
  int v568; // [sp+8DCh] [bp-A4h]@40
  int v569; // [sp+8E0h] [bp-A0h]@43
  int v570; // [sp+8E4h] [bp-9Ch]@40
  int v571; // [sp+8E8h] [bp-98h]@37
  int v572; // [sp+8ECh] [bp-94h]@40
  int v573; // [sp+8F0h] [bp-90h]@37
  int v574; // [sp+8F4h] [bp-8Ch]@34
  int v575; // [sp+8F8h] [bp-88h]@37
  int v576; // [sp+8FCh] [bp-84h]@34
  int v577; // [sp+900h] [bp-80h]@31
  int v578; // [sp+904h] [bp-7Ch]@34
  int v579; // [sp+908h] [bp-78h]@31
  int v580; // [sp+90Ch] [bp-74h]@28
  int v581; // [sp+910h] [bp-70h]@31
  int v582; // [sp+914h] [bp-6Ch]@28
  int v583; // [sp+918h] [bp-68h]@25
  int v584; // [sp+91Ch] [bp-64h]@28
  int v585; // [sp+920h] [bp-60h]@25
  int v586; // [sp+924h] [bp-5Ch]@22
  int v587; // [sp+928h] [bp-58h]@25
  int v588; // [sp+92Ch] [bp-54h]@22
  int v589; // [sp+930h] [bp-50h]@19
  int v590; // [sp+934h] [bp-4Ch]@22
  int v591; // [sp+938h] [bp-48h]@19
  int v592; // [sp+93Ch] [bp-44h]@16
  int v593; // [sp+940h] [bp-40h]@19
  int v594; // [sp+944h] [bp-3Ch]@16
  int v595; // [sp+948h] [bp-38h]@13
  int v596; // [sp+94Ch] [bp-34h]@16
  int v597; // [sp+950h] [bp-30h]@13
  int v598; // [sp+954h] [bp-2Ch]@10
  int v599; // [sp+958h] [bp-28h]@13
  int v600; // [sp+95Ch] [bp-24h]@10
  int v601; // [sp+960h] [bp-20h]@7
  int v602; // [sp+964h] [bp-1Ch]@10
  int v603; // [sp+968h] [bp-18h]@7
  int v604; // [sp+96Ch] [bp-14h]@4
  int v605; // [sp+970h] [bp-10h]@7
  int v606; // [sp+974h] [bp-Ch]@4
  int v607; // [sp+978h] [bp-8h]@1
  int v608; // [sp+97Ch] [bp-4h]@4

  v607 = (int)sub_401000(0x4Cu);
  if ( v607 )
    v152 = sub_48DCD0(v607);
  else
    v152 = 0;
  v608 = v152;
  v606 = 0;
  sub_420990((int)dword_4E21A8, (int)&v606, (int)&v608);
  v604 = (int)sub_401000(0x4Cu);
  if ( v604 )
    v151 = sub_48DCF0(v604);
  else
    v151 = 0;
  v605 = v151;
  v603 = 1;
  sub_420990((int)&unk_4E21B0, (int)&v603, (int)&v605);
  v601 = (int)sub_401000(0x4Cu);
  if ( v601 )
    v150 = sub_48DD10(v601);
  else
    v150 = 0;
  v602 = v150;
  v600 = 2;
  sub_420990((int)&unk_4E21B8, (int)&v600, (int)&v602);
  v598 = (int)sub_401000(0x4Cu);
  if ( v598 )
    v149 = sub_48DDD0(v598);
  else
    v149 = 0;
  v599 = v149;
  v597 = 3;
  sub_420990((int)&unk_4E21C0, (int)&v597, (int)&v599);
  v595 = (int)sub_401000(0x4Cu);
  if ( v595 )
    v148 = sub_48DEC0(v595);
  else
    v148 = 0;
  v596 = v148;
  v594 = 4;
  sub_420990((int)&unk_4E21C8, (int)&v594, (int)&v596);
  v592 = (int)sub_401000(0x4Cu);
  if ( v592 )
    v147 = sub_48E030(v592);
  else
    v147 = 0;
  v593 = v147;
  v591 = 5;
  sub_420990((int)&unk_4E21D0, (int)&v591, (int)&v593);
  v589 = (int)sub_401000(0x4Cu);
  if ( v589 )
    v146 = CIceRequiem::GetAddValueType(v589);
  else
    v146 = 0;
  v590 = v146;
  v588 = 6;
  sub_420990((int)&unk_4E21D8, (int)&v588, (int)&v590);
  v586 = (int)sub_401000(0x4Cu);
  if ( v586 )
    v145 = sub_48E080(v586);
  else
    v145 = 0;
  v587 = v145;
  v585 = 7;
  sub_420990((int)&unk_4E21E0, (int)&v585, (int)&v587);
  v583 = (int)sub_401000(0x4Cu);
  if ( v583 )
    v144 = sub_48DF20(v583);
  else
    v144 = 0;
  v584 = v144;
  v582 = 8;
  sub_420990((int)&unk_4E21E8, (int)&v582, (int)&v584);
  v580 = (int)sub_401000(0x4Cu);
  if ( v580 )
    v143 = CUpConCen::CUpConCen(v580);
  else
    v143 = 0;
  v581 = v143;
  v579 = 9;
  sub_420990((int)&unk_4E21F0, (int)&v579, (int)&v581);
  v577 = (int)sub_401000(0x4Cu);
  if ( v577 )
    v142 = CHealingAnyQuick::CHealingAnyQuick(v577);
  else
    v142 = 0;
  v578 = v142;
  v576 = 10;
  sub_420990((int)&unk_4E21F8, (int)&v576, (int)&v578);
  v574 = (int)sub_401000(0x4Cu);
  if ( v574 )
    v141 = sub_48E910(v574);
  else
    v141 = 0;
  v575 = v141;
  v573 = 11;
  sub_420990((int)&unk_4E2200, (int)&v573, (int)&v575);
  v571 = (int)sub_401000(0x4Cu);
  if ( v571 )
    v140 = sub_48E930(v571);
  else
    v140 = 0;
  v572 = v140;
  v570 = 12;
  sub_420990((int)&unk_4E2208, (int)&v570, (int)&v572);
  v568 = (int)sub_401000(0x4Cu);
  if ( v568 )
    v139 = CPullSwing::GetSpendMP(v568);
  else
    v139 = 0;
  v569 = v139;
  v567 = 13;
  sub_420990((int)&unk_4E2210, (int)&v567, (int)&v569);
  v565 = (int)sub_401000(0x4Cu);
  if ( v565 )
    v138 = CHealingGreatRe::CHealingGreatRe(v565);
  else
    v138 = 0;
  v566 = v138;
  v564 = 14;
  sub_420990((int)&unk_4E2218, (int)&v564, (int)&v566);
  v562 = (int)sub_401000(0x4Cu);
  if ( v562 )
    v137 = CUpFatal::CUpFatal(v562);
  else
    v137 = 0;
  v563 = v137;
  v561 = 15;
  sub_420990((int)&unk_4E2220, (int)&v561, (int)&v563);
  v559 = (int)sub_401000(0x4Cu);
  if ( v559 )
    v136 = CThunder::GetHit(v559);
  else
    v136 = 0;
  v560 = v136;
  v558 = 16;
  sub_420990((int)&unk_4E2228, (int)&v558, (int)&v560);
  v556 = (int)sub_401000(0x4Cu);
  if ( v556 )
    v135 = CShot::CShot(v556);
  else
    v135 = 0;
  v557 = v135;
  v555 = 17;
  sub_420990((int)&unk_4E2230, (int)&v555, (int)&v557);
  v553 = (int)sub_401000(0x4Cu);
  if ( v553 )
    v134 = CRevival::CRevival(v553);
  else
    v134 = 0;
  v554 = v134;
  v552 = 18;
  sub_420990((int)&unk_4E2238, (int)&v552, (int)&v554);
  v550 = (int)sub_401000(0x4Cu);
  if ( v550 )
    v133 = sub_48F4A0(v550);
  else
    v133 = 0;
  v551 = v133;
  v549 = 19;
  sub_420990((int)&unk_4E2240, (int)&v549, (int)&v551);
  v547 = (int)sub_401000(0x4Cu);
  if ( v547 )
    v132 = sub_48EA50(v547);
  else
    v132 = 0;
  v548 = v132;
  v546 = 20;
  sub_420990((int)&unk_4E2248, (int)&v546, (int)&v548);
  v544 = (int)sub_401000(0x4Cu);
  if ( v544 )
    v131 = CUpEvade::CUpEvade(v544);
  else
    v131 = 0;
  v545 = v131;
  v543 = 21;
  sub_420990((int)&unk_4E2250, (int)&v543, (int)&v545);
  v541 = (int)sub_401000(0x4Cu);
  if ( v541 )
    v130 = CShot::GetHostility(v541);
  else
    v130 = 0;
  v542 = v130;
  v540 = 22;
  sub_420990((int)&unk_4E2258, (int)&v540, (int)&v542);
  v538 = (int)sub_401000(0x4Cu);
  if ( v538 )
    v129 = sub_48F4E0(v538);
  else
    v129 = 0;
  v539 = v129;
  v537 = 23;
  sub_420990((int)&unk_4E2260, (int)&v537, (int)&v539);
  v535 = (int)sub_401000(0x4Cu);
  if ( v535 )
    v128 = sub_48F360(v535);
  else
    v128 = 0;
  v536 = v128;
  v534 = 24;
  sub_420990((int)&unk_4E2268, (int)&v534, (int)&v536);
  v532 = (int)sub_401000(0x4Cu);
  if ( v532 )
    v127 = sub_48DD70(v532);
  else
    v127 = 0;
  v533 = v127;
  v531 = 25;
  sub_420990((int)&unk_4E2270, (int)&v531, (int)&v533);
  v529 = (int)sub_401000(0x4Cu);
  if ( v529 )
    v126 = sub_48EFD0(v529);
  else
    v126 = 0;
  v530 = v126;
  v528 = 26;
  sub_420990((int)&unk_4E2278, (int)&v528, (int)&v530);
  v526 = (int)sub_401000(0x4Cu);
  if ( v526 )
    v125 = sub_48F500(v526);
  else
    v125 = 0;
  v527 = v125;
  v525 = 27;
  sub_420990((int)&unk_4E2280, (int)&v525, (int)&v527);
  v523 = (int)sub_401000(0x4Cu);
  if ( v523 )
    v124 = sub_48F520(v523);
  else
    v124 = 0;
  v524 = v124;
  v522 = 28;
  sub_420990((int)&unk_4E2288, (int)&v522, (int)&v524);
  v520 = (int)sub_401000(0x4Cu);
  if ( v520 )
    v123 = sub_48F540(v520);
  else
    v123 = 0;
  v521 = v123;
  v519 = 29;
  sub_420990((int)&unk_4E2290, (int)&v519, (int)&v521);
  v517 = (int)sub_401000(0x4Cu);
  if ( v517 )
    v122 = CMeditation::CMeditation(v517);
  else
    v122 = 0;
  v518 = v122;
  v516 = 30;
  sub_420990((int)&unk_4E2298, (int)&v516, (int)&v518);
  v514 = (int)sub_401000(0x4Cu);
  if ( v514 )
    v121 = sub_48F560(v514);
  else
    v121 = 0;
  v515 = v121;
  v513 = 31;
  sub_420990((int)&unk_4E22A0, (int)&v513, (int)&v515);
  v511 = (int)sub_401000(0x4Cu);
  if ( v511 )
    v120 = sub_48F580(v511);
  else
    v120 = 0;
  v512 = v120;
  v510 = 32;
  sub_420990((int)&unk_4E22A8, (int)&v510, (int)&v512);
  v508 = (int)sub_401000(0x4Cu);
  if ( v508 )
    v119 = sub_48EFF0(v508);
  else
    v119 = 0;
  v509 = v119;
  v507 = 33;
  sub_420990((int)&unk_4E22B0, (int)&v507, (int)&v509);
  v505 = (int)sub_401000(0x4Cu);
  if ( v505 )
    v118 = CWildAccuracy::CWildAccuracy(v505);
  else
    v118 = 0;
  v506 = v118;
  v504 = 34;
  sub_420990((int)&unk_4E22B8, (int)&v504, (int)&v506);
  v502 = (int)sub_401000(0x4Cu);
  if ( v502 )
    v117 = CIceStorm::CIceStorm(v502);
  else
    v117 = 0;
  v503 = v117;
  v501 = 35;
  sub_420990((int)&unk_4E22C0, (int)&v501, (int)&v503);
  v499 = (int)sub_401000(0x4Cu);
  if ( v499 )
    v116 = CExplosiveBurst::GetAddValueType(v499);
  else
    v116 = 0;
  v500 = v116;
  v498 = 36;
  sub_420990((int)&unk_4E22C8, (int)&v498, (int)&v500);
  v496 = (int)sub_401000(0x4Cu);
  if ( v496 )
    v115 = sub_48DCB0(v496);
  else
    v115 = 0;
  v497 = v115;
  v495 = 62;
  sub_420990((int)&unk_4E22D0, (int)&v495, (int)&v497);
  v493 = (int)sub_401000(0x4Cu);
  if ( v493 )
    v114 = sub_48EA50(v493);
  else
    v114 = 0;
  v494 = v114;
  v492 = 80;
  sub_420990((int)&unk_4E22D8, (int)&v492, (int)&v494);
  v490 = (int)sub_401000(0x4Cu);
  if ( v490 )
    v113 = sub_48EA50(v490);
  else
    v113 = 0;
  v491 = v113;
  v489 = 81;
  sub_420990((int)&unk_4E22E0, (int)&v489, (int)&v491);
  v487 = (int)sub_401000(0x4Cu);
  if ( v487 )
    v112 = sub_48DCD0(v487);
  else
    v112 = 0;
  v488 = v112;
  v486 = 65536;
  sub_420990((int)&unk_4E22E8, (int)&v486, (int)&v488);
  v484 = (int)sub_401000(0x4Cu);
  if ( v484 )
    v111 = sub_48DCF0(v484);
  else
    v111 = 0;
  v485 = v111;
  v483 = 65537;
  sub_420990((int)&unk_4E22F0, (int)&v483, (int)&v485);
  v481 = (int)sub_401000(0x4Cu);
  if ( v481 )
    v110 = CNegative::GetSpendMP(v481);
  else
    v110 = 0;
  v482 = v110;
  v480 = 65538;
  sub_420990((int)&unk_4E22F8, (int)&v480, (int)&v482);
  v478 = (int)sub_401000(0x4Cu);
  if ( v478 )
    v109 = CTranscendental::CTranscendental(v478);
  else
    v109 = 0;
  v479 = v109;
  v477 = 65539;
  sub_420990((int)&unk_4E2300, (int)&v477, (int)&v479);
  v475 = (int)sub_401000(0x4Cu);
  if ( v475 )
    v108 = CUpperSlash::GetAttack(v475);
  else
    v108 = 0;
  v476 = v108;
  v474 = 65540;
  sub_420990((int)&unk_4E2308, (int)&v474, (int)&v476);
  v472 = (int)sub_401000(0x4Cu);
  if ( v472 )
    v107 = CUpFatal3::CUpFatal3(v472);
  else
    v107 = 0;
  v473 = v107;
  v471 = 65541;
  sub_420990((int)&unk_4E2310, (int)&v471, (int)&v473);
  v469 = (int)sub_401000(0x4Cu);
  if ( v469 )
    v106 = CFireEruption::CFireEruption(v469);
  else
    v106 = 0;
  v470 = v106;
  v468 = 65544;
  sub_420990((int)&unk_4E2318, (int)&v468, (int)&v470);
  v466 = (int)sub_401000(0x4Cu);
  if ( v466 )
    v105 = CUpperSlash::GetHostility(v466);
  else
    v105 = 0;
  v467 = v105;
  v465 = 65545;
  sub_420990((int)&unk_4E2320, (int)&v465, (int)&v467);
  v463 = (int)sub_401000(0x4Cu);
  if ( v463 )
    v104 = CIce::GetSpendMP(v463);
  else
    v104 = 0;
  v464 = v104;
  v462 = 65546;
  sub_420990((int)&unk_4E2328, (int)&v462, (int)&v464);
  v460 = (int)sub_401000(0x4Cu);
  if ( v460 )
    v103 = sub_48E910(v460);
  else
    v103 = 0;
  v461 = v103;
  v459 = 65547;
  sub_420990((int)&unk_4E2330, (int)&v459, (int)&v461);
  v457 = (int)sub_401000(0x4Cu);
  if ( v457 )
    v102 = sub_48E9B0(v457);
  else
    v102 = 0;
  v458 = v102;
  v456 = 65548;
  sub_420990((int)&unk_4E2338, (int)&v456, (int)&v458);
  v454 = (int)sub_401000(0x4Cu);
  if ( v454 )
    v101 = sub_48E9D0(v454);
  else
    v101 = 0;
  v455 = v101;
  v453 = 65549;
  sub_420990((int)&unk_4E2340, (int)&v453, (int)&v455);
  v451 = (int)sub_401000(0x4Cu);
  if ( v451 )
    v100 = sub_48E9F0(v451);
  else
    v100 = 0;
  v452 = v100;
  v450 = 65550;
  sub_420990((int)&unk_4E2348, (int)&v450, (int)&v452);
  v448 = (int)sub_401000(0x4Cu);
  if ( v448 )
    v99 = sub_48E990(v448);
  else
    v99 = 0;
  v449 = v99;
  v447 = 65551;
  sub_420990((int)&unk_4E2350, (int)&v447, (int)&v449);
  v445 = (int)sub_401000(0x4Cu);
  if ( v445 )
    v98 = sub_48EA70(v445);
  else
    v98 = 0;
  v446 = v98;
  v444 = 65552;
  sub_420990((int)&unk_4E2358, (int)&v444, (int)&v446);
  v442 = (int)sub_401000(0x4Cu);
  if ( v442 )
    v97 = CHealing::CHealing(v442);
  else
    v97 = 0;
  v443 = v97;
  v441 = 65553;
  sub_420990((int)&unk_4E2360, (int)&v441, (int)&v443);
  v439 = (int)sub_401000(0x4Cu);
  if ( v439 )
    v96 = CHealing::CHealing(v439);
  else
    v96 = 0;
  v440 = v96;
  v438 = 65554;
  sub_420990((int)&unk_4E2368, (int)&v438, (int)&v440);
  v436 = (int)sub_401000(0x4Cu);
  if ( v436 )
    v95 = CHealing::CHealing(v436);
  else
    v95 = 0;
  v437 = v95;
  v435 = 65555;
  sub_420990((int)&unk_4E2370, (int)&v435, (int)&v437);
  v433 = (int)sub_401000(0x4Cu);
  if ( v433 )
    v94 = CHealing::CHealing(v433);
  else
    v94 = 0;
  v434 = v94;
  v432 = 65556;
  sub_420990((int)&unk_4E2378, (int)&v432, (int)&v434);
  v430 = (int)sub_401000(0x4Cu);
  if ( v430 )
    v93 = CHealing::CHealing(v430);
  else
    v93 = 0;
  v431 = v93;
  v429 = 65557;
  sub_420990((int)&unk_4E2380, (int)&v429, (int)&v431);
  v427 = (int)sub_401000(0x4Cu);
  if ( v427 )
    v92 = sub_48E810(v427);
  else
    v92 = 0;
  v428 = v92;
  v426 = 65558;
  sub_420990((int)&unk_4E2388, (int)&v426, (int)&v428);
  v424 = (int)sub_401000(0x4Cu);
  if ( v424 )
    v91 = sub_48E4C0(v424);
  else
    v91 = 0;
  v425 = v91;
  v423 = 65559;
  sub_420990((int)&unk_4E2390, (int)&v423, (int)&v425);
  v421 = (int)sub_401000(0x4Cu);
  if ( v421 )
    v90 = sub_48E680(v421);
  else
    v90 = 0;
  v422 = v90;
  v420 = 65560;
  sub_420990((int)&unk_4E2398, (int)&v420, (int)&v422);
  v418 = (int)sub_401000(0x4Cu);
  if ( v418 )
    v89 = sub_48E5C0(v418);
  else
    v89 = 0;
  v419 = v89;
  v417 = 65561;
  sub_420990((int)&unk_4E23A0, (int)&v417, (int)&v419);
  v415 = (int)sub_401000(0x4Cu);
  if ( v415 )
    v88 = CMShock::GetSpendMP(v415);
  else
    v88 = 0;
  v416 = v88;
  v414 = 65562;
  sub_420990((int)&unk_4E23A8, (int)&v414, (int)&v416);
  v412 = (int)sub_401000(0x4Cu);
  if ( v412 )
    v87 = CHealingAny::CHealingAny(v412);
  else
    v87 = 0;
  v413 = v87;
  v411 = 65563;
  sub_420990((int)&unk_4E23B0, (int)&v411, (int)&v413);
  v409 = (int)sub_401000(0x4Cu);
  if ( v409 )
    v86 = CUpperSmash::GetSpendMP(v409);
  else
    v86 = 0;
  v410 = v86;
  v408 = 65564;
  sub_420990((int)&unk_4E23B8, (int)&v408, (int)&v410);
  v406 = (int)sub_401000(0x4Cu);
  if ( v406 )
    v85 = sub_48E890(v406);
  else
    v85 = 0;
  v407 = v85;
  v405 = 65565;
  sub_420990((int)&unk_4E23C0, (int)&v405, (int)&v407);
  v403 = (int)sub_401000(0x4Cu);
  if ( v403 )
    v84 = CMeditation::CMeditation(v403);
  else
    v84 = 0;
  v404 = v84;
  v402 = 65566;
  sub_420990((int)&unk_4E23C8, (int)&v402, (int)&v404);
  v400 = (int)sub_401000(0x4Cu);
  if ( v400 )
    v83 = sub_48E500(v400);
  else
    v83 = 0;
  v401 = v83;
  v399 = 65567;
  sub_420990((int)&unk_4E23D0, (int)&v399, (int)&v401);
  v397 = (int)sub_401000(0x4Cu);
  if ( v397 )
    v82 = CUpperSlash::CUpperSlash(v397);
  else
    v82 = 0;
  v398 = v82;
  v396 = 65568;
  sub_420990((int)&unk_4E23D8, (int)&v396, (int)&v398);
  v394 = (int)sub_401000(0x4Cu);
  if ( v394 )
    v81 = CFlameArrow::CFlameArrow(v394);
  else
    v81 = 0;
  v395 = v81;
  v393 = 65569;
  sub_420990((int)&unk_4E23E0, (int)&v393, (int)&v395);
  v391 = (int)sub_401000(0x4Cu);
  if ( v391 )
    v80 = sub_48EA90(v391);
  else
    v80 = 0;
  v392 = v80;
  v390 = 65570;
  sub_420990((int)&unk_4E23E8, (int)&v390, (int)&v392);
  v388 = (int)sub_401000(0x4Cu);
  if ( v388 )
    v79 = sub_48E850(v388);
  else
    v79 = 0;
  v389 = v79;
  v387 = 65571;
  sub_420990((int)&unk_4E23F0, (int)&v387, (int)&v389);
  v385 = (int)sub_401000(0x4Cu);
  if ( v385 )
    v78 = sub_48E5E0(v385);
  else
    v78 = 0;
  v386 = v78;
  v384 = 65572;
  sub_420990((int)&unk_4E23F8, (int)&v384, (int)&v386);
  v382 = (int)sub_401000(0x4Cu);
  if ( v382 )
    v77 = sub_48E600(v382);
  else
    v77 = 0;
  v383 = v77;
  v381 = 65573;
  sub_420990((int)&unk_4E2400, (int)&v381, (int)&v383);
  v379 = (int)sub_401000(0x4Cu);
  if ( v379 )
    v76 = CResurrection::CResurrection(v379);
  else
    v76 = 0;
  v380 = v76;
  v378 = 65574;
  sub_420990((int)&unk_4E2408, (int)&v378, (int)&v380);
  v376 = (int)sub_401000(0x4Cu);
  if ( v376 )
    v75 = CReincarnate::CReincarnate(v376);
  else
    v75 = 0;
  v377 = v75;
  v375 = 65575;
  sub_420990((int)&unk_4E2410, (int)&v375, (int)&v377);
  v373 = (int)sub_401000(0x4Cu);
  if ( v373 )
    v74 = sub_48E350(v373);
  else
    v74 = 0;
  v374 = v74;
  v372 = 65576;
  sub_420990((int)&unk_4E2418, (int)&v372, (int)&v374);
  v370 = (int)sub_401000(0x4Cu);
  if ( v370 )
    v73 = sub_48E620(v370);
  else
    v73 = 0;
  v371 = v73;
  v369 = 65577;
  sub_420990((int)&unk_4E2420, (int)&v369, (int)&v371);
  v367 = (int)sub_401000(0x4Cu);
  if ( v367 )
    v72 = sub_48E520(v367);
  else
    v72 = 0;
  v368 = v72;
  v366 = 65578;
  sub_420990((int)&unk_4E2428, (int)&v366, (int)&v368);
  v364 = (int)sub_401000(0x4Cu);
  if ( v364 )
    v71 = sub_48E6C0(v364);
  else
    v71 = 0;
  v365 = v71;
  v363 = 65579;
  sub_420990((int)&unk_4E2430, (int)&v363, (int)&v365);
  v361 = (int)sub_401000(0x4Cu);
  if ( v361 )
    v70 = sub_48E650(v361);
  else
    v70 = 0;
  v362 = v70;
  v360 = 65580;
  sub_420990((int)&unk_4E2438, (int)&v360, (int)&v362);
  v358 = (int)sub_401000(0x4Cu);
  if ( v358 )
    v69 = CSpiritBlast::CSpiritBlast(v358);
  else
    v69 = 0;
  v359 = v69;
  v357 = 65581;
  sub_420990((int)&unk_4E2440, (int)&v357, (int)&v359);
  v355 = (int)sub_401000(0x4Cu);
  if ( v355 )
    v68 = CFlameArrow::GetAttack(v355);
  else
    v68 = 0;
  v356 = v68;
  v354 = 65582;
  sub_420990((int)&unk_4E2448, (int)&v354, (int)&v356);
  v352 = (int)sub_401000(0x4Cu);
  if ( v352 )
    v67 = sub_48E540(v352);
  else
    v67 = 0;
  v353 = v67;
  v351 = 65583;
  sub_420990((int)&unk_4E2450, (int)&v351, (int)&v353);
  v349 = (int)sub_401000(0x4Cu);
  if ( v349 )
    v66 = CMagic::CMagic(v349);
  else
    v66 = 0;
  v350 = v66;
  v348 = 65584;
  sub_420990((int)&unk_4E2458, (int)&v348, (int)&v350);
  v346 = (int)sub_401000(0x4Cu);
  if ( v346 )
    v65 = CProtect::CProtect(v346);
  else
    v65 = 0;
  v347 = v65;
  v345 = 65585;
  sub_420990((int)&unk_4E2460, (int)&v345, (int)&v347);
  v343 = (int)sub_401000(0x4Cu);
  if ( v343 )
    v64 = CSilenceArrow::CSilenceArrow(v343);
  else
    v64 = 0;
  v344 = v64;
  v342 = 65586;
  sub_420990((int)&unk_4E2468, (int)&v342, (int)&v344);
  v340 = (int)sub_401000(0x4Cu);
  if ( v340 )
    v63 = CUpReinforceVitality::CUpReinforceVitality(v340);
  else
    v63 = 0;
  v341 = v63;
  v339 = 65587;
  sub_420990((int)&unk_4E2470, (int)&v339, (int)&v341);
  v337 = (int)sub_401000(0x4Cu);
  if ( v337 )
    v62 = sub_48F150(v337);
  else
    v62 = 0;
  v338 = v62;
  v336 = 65588;
  sub_420990((int)&unk_4E2478, (int)&v336, (int)&v338);
  v334 = (int)sub_401000(0x4Cu);
  if ( v334 )
    v61 = CVitalityDrain::CVitalityDrain(v334);
  else
    v61 = 0;
  v335 = v61;
  v333 = 65589;
  sub_420990((int)&unk_4E2480, (int)&v333, (int)&v335);
  v331 = (int)sub_401000(0x4Cu);
  if ( v331 )
    v60 = CFrostBlast::CFrostBlast(v331);
  else
    v60 = 0;
  v332 = v60;
  v330 = 65590;
  sub_420990((int)&unk_4E2488, (int)&v330, (int)&v332);
  v328 = (int)sub_401000(0x4Cu);
  if ( v328 )
    v59 = sub_48E8B0(v328);
  else
    v59 = 0;
  v329 = v59;
  v327 = 65591;
  sub_420990((int)&unk_4E2490, (int)&v327, (int)&v329);
  v325 = (int)sub_401000(0x4Cu);
  if ( v325 )
    v58 = CHealingParty::CHealingParty(v325);
  else
    v58 = 0;
  v326 = v58;
  v324 = 65592;
  sub_420990((int)&unk_4E2498, (int)&v324, (int)&v326);
  v322 = (int)sub_401000(0x4Cu);
  if ( v322 )
    v57 = sub_48EBE0(v322);
  else
    v57 = 0;
  v323 = v57;
  v321 = 65593;
  sub_420990((int)&unk_4E24A0, (int)&v321, (int)&v323);
  v319 = (int)sub_401000(0x4Cu);
  if ( v319 )
    v56 = sub_48EC00(v319);
  else
    v56 = 0;
  v320 = v56;
  v318 = 65594;
  sub_420990((int)&unk_4E24A8, (int)&v318, (int)&v320);
  v316 = (int)sub_401000(0x4Cu);
  if ( v316 )
    v55 = sub_48E8F0(v316);
  else
    v55 = 0;
  v317 = v55;
  v315 = 65595;
  sub_420990((int)&unk_4E24B0, (int)&v315, (int)&v317);
  v313 = (int)sub_401000(0x4Cu);
  if ( v313 )
    v54 = CHealingParty::CHealingParty(v313);
  else
    v54 = 0;
  v314 = v54;
  v312 = 65596;
  sub_420990((int)&unk_4E24B8, (int)&v312, (int)&v314);
  v310 = (int)sub_401000(0x4Cu);
  if ( v310 )
    v53 = CMPoisonCloud::GetResistNum(v310);
  else
    v53 = 0;
  v311 = v53;
  v309 = 65597;
  sub_420990((int)&unk_4E24C0, (int)&v309, (int)&v311);
  v307 = (int)sub_401000(0x4Cu);
  if ( v307 )
    v52 = sub_48DCB0(v307);
  else
    v52 = 0;
  v308 = v52;
  v306 = 65598;
  sub_420990((int)&unk_4E24C8, (int)&v306, (int)&v308);
  v304 = (int)sub_401000(0x4Cu);
  if ( v304 )
    v51 = sub_48EA50(v304);
  else
    v51 = 0;
  v305 = v51;
  v303 = 65616;
  sub_420990((int)&unk_4E24D0, (int)&v303, (int)&v305);
  v301 = (int)sub_401000(0x4Cu);
  if ( v301 )
    v50 = sub_48EA50(v301);
  else
    v50 = 0;
  v302 = v50;
  v300 = 65617;
  sub_420990((int)&unk_4E24D8, (int)&v300, (int)&v302);
  v298 = (int)sub_401000(0x4Cu);
  if ( v298 )
    v49 = sub_48DCD0(v298);
  else
    v49 = 0;
  v299 = v49;
  v297 = 131072;
  sub_420990((int)&unk_4E24E0, (int)&v297, (int)&v299);
  v295 = (int)sub_401000(0x4Cu);
  if ( v295 )
    v48 = sub_48DCF0(v295);
  else
    v48 = 0;
  v296 = v48;
  v294 = 131073;
  sub_420990((int)&unk_4E24E8, (int)&v294, (int)&v296);
  v292 = (int)sub_401000(0x4Cu);
  if ( v292 )
    v47 = sub_48DD30(v292);
  else
    v47 = 0;
  v293 = v47;
  v291 = 131074;
  sub_420990((int)&unk_4E24F0, (int)&v291, (int)&v293);
  v289 = (int)sub_401000(0x4Cu);
  if ( v289 )
    v46 = sub_48DE30(v289);
  else
    v46 = 0;
  v290 = v46;
  v288 = 131075;
  sub_420990((int)&unk_4E24F8, (int)&v288, (int)&v290);
  v286 = (int)sub_401000(0x4Cu);
  if ( v286 )
    v45 = sub_48DF80(v286);
  else
    v45 = 0;
  v287 = v45;
  v285 = 131076;
  sub_420990((int)&unk_4E2500, (int)&v285, (int)&v287);
  v283 = (int)sub_401000(0x4Cu);
  if ( v283 )
    v44 = sub_48DD50(v283);
  else
    v44 = 0;
  v284 = v44;
  v282 = 131077;
  sub_420990((int)&unk_4E2508, (int)&v282, (int)&v284);
  v280 = (int)sub_401000(0x4Cu);
  if ( v280 )
    v43 = sub_48DFF0(v280);
  else
    v43 = 0;
  v281 = v43;
  v279 = 131078;
  sub_420990((int)&unk_4E2510, (int)&v279, (int)&v281);
  v277 = (int)sub_401000(0x4Cu);
  if ( v277 )
    v42 = CIceRequiem::CIceRequiem(v277);
  else
    v42 = 0;
  v278 = v42;
  v276 = 131079;
  sub_420990((int)&unk_4E2518, (int)&v276, (int)&v278);
  v274 = (int)sub_401000(0x4Cu);
  if ( v274 )
    v41 = CPoisonCloud::CPoisonCloud(v274);
  else
    v41 = 0;
  v275 = v41;
  v273 = 131080;
  sub_420990((int)&unk_4E2520, (int)&v273, (int)&v275);
  v271 = (int)sub_401000(0x4Cu);
  if ( v271 )
    v40 = sub_48E230(v271);
  else
    v40 = 0;
  v272 = v40;
  v270 = 131081;
  sub_420990((int)&unk_4E2528, (int)&v270, (int)&v272);
  v268 = (int)sub_401000(0x4Cu);
  if ( v268 )
    v39 = CHealingInstance::GetSpendMP(v268);
  else
    v39 = 0;
  v269 = v39;
  v267 = 131082;
  sub_420990((int)&unk_4E2530, (int)&v267, (int)&v269);
  v265 = (int)sub_401000(0x4Cu);
  if ( v265 )
    v38 = sub_48E910(v265);
  else
    v38 = 0;
  v266 = v38;
  v264 = 131083;
  sub_420990((int)&unk_4E2538, (int)&v264, (int)&v266);
  v262 = (int)sub_401000(0x4Cu);
  if ( v262 )
    v37 = sub_48E930(v262);
  else
    v37 = 0;
  v263 = v37;
  v261 = 131084;
  sub_420990((int)&unk_4E2540, (int)&v261, (int)&v263);
  v259 = (int)sub_401000(0x4Cu);
  if ( v259 )
    v36 = CHealingInstance::CHealingInstance(v259);
  else
    v36 = 0;
  v260 = v36;
  v258 = 131085;
  sub_420990((int)&unk_4E2548, (int)&v258, (int)&v260);
  v256 = (int)sub_401000(0x4Cu);
  if ( v256 )
    v35 = sub_48E250(v256);
  else
    v35 = 0;
  v257 = v35;
  v255 = 131086;
  sub_420990((int)&unk_4E2550, (int)&v255, (int)&v257);
  v253 = (int)sub_401000(0x4Cu);
  if ( v253 )
    v34 = CUpFatal2::CUpFatal2(v253);
  else
    v34 = 0;
  v254 = v34;
  v252 = 131087;
  sub_420990((int)&unk_4E2558, (int)&v252, (int)&v254);
  v250 = (int)sub_401000(0x4Cu);
  if ( v250 )
    v33 = sub_48E2B0(v250);
  else
    v33 = 0;
  v251 = v33;
  v249 = 131088;
  sub_420990((int)&unk_4E2560, (int)&v249, (int)&v251);
  v247 = (int)sub_401000(0x4Cu);
  if ( v247 )
    v32 = CUpFire::CUpFire(v247);
  else
    v32 = 0;
  v248 = v32;
  v246 = 131089;
  sub_420990((int)dword_4E2568, (int)&v246, (int)&v248);
  v244 = (int)sub_401000(0x4Cu);
  if ( v244 )
    v31 = CFatalChance::CFatalChance(v244);
  else
    v31 = 0;
  v245 = v31;
  v243 = 131090;
  sub_420990((int)&unk_4E2570, (int)&v243, (int)&v245);
  v241 = (int)sub_401000(0x4Cu);
  if ( v241 )
    v30 = CUpBlockShield::CUpBlockShield(v241);
  else
    v30 = 0;
  v242 = v30;
  v240 = 131091;
  sub_420990((int)&unk_4E2578, (int)&v240, (int)&v242);
  v238 = (int)sub_401000(0x4Cu);
  if ( v238 )
    v29 = CManaBurn::GetSpendMP(v238);
  else
    v29 = 0;
  v239 = v29;
  v237 = 131092;
  sub_420990((int)&unk_4E2580, (int)&v237, (int)&v239);
  v235 = (int)sub_401000(0x4Cu);
  if ( v235 )
    v28 = sub_48E330(v235);
  else
    v28 = 0;
  v236 = v28;
  v234 = 131093;
  sub_420990((int)&unk_4E2588, (int)&v234, (int)&v236);
  v232 = (int)sub_401000(0x4Cu);
  if ( v232 )
    v27 = CUpRFEvade::CUpRFEvade(v232);
  else
    v27 = 0;
  v233 = v27;
  v231 = 131094;
  sub_420990((int)&unk_4E2590, (int)&v231, (int)&v233);
  v229 = (int)sub_401000(0x4Cu);
  if ( v229 )
    v26 = CStoneShield::CStoneShield(v229);
  else
    v26 = 0;
  v230 = v26;
  v228 = 131095;
  sub_420990((int)&unk_4E2598, (int)&v228, (int)&v230);
  v226 = (int)sub_401000(0x4Cu);
  if ( v226 )
    v25 = sub_48F3C0(v226);
  else
    v25 = 0;
  v227 = v25;
  v225 = 131096;
  sub_420990((int)&unk_4E25A0, (int)&v225, (int)&v227);
  v223 = (int)sub_401000(0x4Cu);
  if ( v223 )
    v24 = sub_48F3E0(v223);
  else
    v24 = 0;
  v224 = v24;
  v222 = 131097;
  sub_420990((int)&unk_4E25A8, (int)&v222, (int)&v224);
  v220 = (int)sub_401000(0x4Cu);
  if ( v220 )
    v23 = sub_48F400(v220);
  else
    v23 = 0;
  v221 = v23;
  v219 = 131098;
  sub_420990((int)&unk_4E25B0, (int)&v219, (int)&v221);
  v217 = (int)sub_401000(0x4Cu);
  if ( v217 )
    v22 = CPoisonArrow::CPoisonArrow(v217);
  else
    v22 = 0;
  v218 = v22;
  v216 = 131099;
  sub_420990((int)&unk_4E25B8, (int)&v216, (int)&v218);
  v214 = (int)sub_401000(0x4Cu);
  if ( v214 )
    v21 = sub_48F420(v214);
  else
    v21 = 0;
  v215 = v21;
  v213 = 131100;
  sub_420990((int)&unk_4E25C0, (int)&v213, (int)&v215);
  v211 = (int)sub_401000(0x4Cu);
  if ( v211 )
    v20 = sub_48F460(v211);
  else
    v20 = 0;
  v212 = v20;
  v210 = 131101;
  sub_420990((int)&unk_4E25C8, (int)&v210, (int)&v212);
  v208 = (int)sub_401000(0x4Cu);
  if ( v208 )
    v19 = CMeditation::CMeditation(v208);
  else
    v19 = 0;
  v209 = v19;
  v207 = 131102;
  sub_420990((int)&unk_4E25D0, (int)&v207, (int)&v209);
  v205 = (int)sub_401000(0x4Cu);
  if ( v205 )
    v18 = sub_48F480(v205);
  else
    v18 = 0;
  v206 = v18;
  v204 = 131103;
  sub_420990((int)&unk_4E25D8, (int)&v204, (int)&v206);
  v202 = (int)sub_401000(0x4Cu);
  if ( v202 )
    v17 = sub_48E950(v202);
  else
    v17 = 0;
  v203 = v17;
  v201 = 131104;
  sub_420990((int)&unk_4E25E0, (int)&v201, (int)&v203);
  v199 = (int)sub_401000(0x4Cu);
  if ( v199 )
    v16 = CHaste::GetSpendMP(v199);
  else
    v16 = 0;
  v200 = v16;
  v198 = 131105;
  sub_420990((int)&unk_4E25E8, (int)&v198, (int)&v200);
  v196 = (int)sub_401000(0x4Cu);
  if ( v196 )
    v15 = sub_48F200(v196);
  else
    v15 = 0;
  v197 = v15;
  v195 = 131106;
  sub_420990((int)&unk_4E25F0, (int)&v195, (int)&v197);
  v193 = (int)sub_401000(0x4Cu);
  if ( v193 )
    v14 = sub_48F220(v193);
  else
    v14 = 0;
  v194 = v14;
  v192 = 131107;
  sub_420990((int)&unk_4E25F8, (int)&v192, (int)&v194);
  v190 = (int)sub_401000(0x4Cu);
  if ( v190 )
    v13 = sub_48F240(v190);
  else
    v13 = 0;
  v191 = v13;
  v189 = 131108;
  sub_420990((int)&unk_4E2600, (int)&v189, (int)&v191);
  v187 = (int)sub_401000(0x4Cu);
  if ( v187 )
    v12 = sub_48F260(v187);
  else
    v12 = 0;
  v188 = v12;
  v186 = 131109;
  sub_420990((int)&unk_4E2608, (int)&v186, (int)&v188);
  v184 = (int)sub_401000(0x4Cu);
  if ( v184 )
    v11 = sub_48F280(v184);
  else
    v11 = 0;
  v185 = v11;
  v183 = 131110;
  sub_420990((int)&unk_4E2610, (int)&v183, (int)&v185);
  v181 = (int)sub_401000(0x4Cu);
  if ( v181 )
    v10 = sub_48F2A0(v181);
  else
    v10 = 0;
  v182 = v10;
  v180 = 131111;
  sub_420990((int)&unk_4E2618, (int)&v180, (int)&v182);
  v178 = (int)sub_401000(0x4Cu);
  if ( v178 )
    v9 = sub_48F2C0(v178);
  else
    v9 = 0;
  v179 = v9;
  v177 = 131112;
  sub_420990((int)&unk_4E2620, (int)&v177, (int)&v179);
  v175 = (int)sub_401000(0x4Cu);
  if ( v175 )
    v8 = sub_48F2E0(v175);
  else
    v8 = 0;
  v176 = v8;
  v174 = 131113;
  sub_420990((int)&unk_4E2628, (int)&v174, (int)&v176);
  v172 = (int)sub_401000(0x4Cu);
  if ( v172 )
    v7 = CFire::CFire(v172);
  else
    v7 = 0;
  v173 = v7;
  v171 = 131114;
  sub_420990((int)&unk_4E2630, (int)&v171, (int)&v173);
  v169 = (int)sub_401000(0x4Cu);
  if ( v169 )
    v6 = sub_48F300(v169);
  else
    v6 = 0;
  v170 = v6;
  v168 = 131115;
  sub_420990((int)&unk_4E2638, (int)&v168, (int)&v170);
  v166 = (int)sub_401000(0x4Cu);
  if ( v166 )
    v5 = sub_48F320(v166);
  else
    v5 = 0;
  v167 = v5;
  v165 = 131116;
  sub_420990((int)&unk_4E2640, (int)&v165, (int)&v167);
  v163 = (int)sub_401000(0x4Cu);
  if ( v163 )
    v4 = sub_48F340(v163);
  else
    v4 = 0;
  v164 = v4;
  v162 = 131117;
  sub_420990((int)&unk_4E2648, (int)&v162, (int)&v164);
  v160 = (int)sub_401000(0x4Cu);
  if ( v160 )
    v3 = sub_48DCB0(v160);
  else
    v3 = 0;
  v161 = v3;
  v159 = 131134;
  sub_420990((int)&unk_4E2650, (int)&v159, (int)&v161);
  v157 = (int)sub_401000(0x4Cu);
  if ( v157 )
    v2 = sub_48EA50(v157);
  else
    v2 = 0;
  v158 = v2;
  v156 = 131152;
  sub_420990((int)&unk_4E2658, (int)&v156, (int)&v158);
  v154 = (int)sub_401000(0x4Cu);
  if ( v154 )
    v1 = sub_48EA50(v154);
  else
    v1 = 0;
  v155 = v1;
  v153 = 131153;
  return sub_420990((int)&unk_4E2660, (int)&v153, (int)&v155);
}
// 4E2568: using guessed type int dword_4E2568[];

//----- (004B23C0) --------------------------------------------------------
void *__cdecl sub_4B23C0()
{
  void *result; // eax@25
  int v1; // [sp+0h] [bp-48h]@26
  int v2; // [sp+4h] [bp-44h]@23
  int v3; // [sp+8h] [bp-40h]@20
  int v4; // [sp+Ch] [bp-3Ch]@17
  int v5; // [sp+10h] [bp-38h]@14
  int v6; // [sp+14h] [bp-34h]@11
  int v7; // [sp+18h] [bp-30h]@8
  int v8; // [sp+1Ch] [bp-2Ch]@5
  int v9; // [sp+20h] [bp-28h]@2
  int v10; // [sp+28h] [bp-20h]@22
  int v11; // [sp+2Ch] [bp-1Ch]@19
  int v12; // [sp+30h] [bp-18h]@16
  int v13; // [sp+34h] [bp-14h]@13
  int v14; // [sp+38h] [bp-10h]@10
  int v15; // [sp+3Ch] [bp-Ch]@7
  int v16; // [sp+40h] [bp-8h]@4
  int v17; // [sp+44h] [bp-4h]@1

  v17 = (int)sub_401000(0x4Cu);
  if ( v17 )
    v9 = sub_48F5A0(v17);
  else
    v9 = 0;
  dword_4E2668[0] = v9;
  v16 = (int)sub_401000(0x4Cu);
  if ( v16 )
    v8 = CManaBurn::CManaBurn(v16);
  else
    v8 = 0;
  dword_4E266C = v8;
  v15 = (int)sub_401000(0x4Cu);
  if ( v15 )
    v7 = CMeshChance::CMeshChance(v15);
  else
    v7 = 0;
  dword_4E2670 = v7;
  v14 = (int)sub_401000(0x4Cu);
  if ( v14 )
    v6 = CMeshStr::CMeshStr(v14);
  else
    v6 = 0;
  dword_4E2674 = v6;
  v13 = (int)sub_401000(0x4Cu);
  if ( v13 )
    v5 = CMeshHth::CMeshHth(v13);
  else
    v5 = 0;
  dword_4E2678 = v5;
  v12 = (int)sub_401000(0x4Cu);
  if ( v12 )
    v4 = CMeshDex::CMeshDex(v12);
  else
    v4 = 0;
  dword_4E267C = v4;
  v11 = (int)sub_401000(0x4Cu);
  if ( v11 )
    v3 = CMeshInt::CMeshInt(v11);
  else
    v3 = 0;
  dword_4E2680 = v3;
  v10 = (int)sub_401000(0x4Cu);
  if ( v10 )
    v2 = CMeshWis::CMeshWis(v10);
  else
    v2 = 0;
  dword_4E2684 = v2;
  result = sub_401000(0x4Cu);
  if ( result )
  {
    result = (void *)CMeshDefense::CMeshDefense((int)result);
    v1 = (int)result;
  }
  else
  {
    v1 = 0;
  }
  dword_4E2688 = v1;
  return result;
}
// 4E2668: using guessed type int dword_4E2668[];
// 4E266C: using guessed type int dword_4E266C;
// 4E2670: using guessed type int dword_4E2670;
// 4E2674: using guessed type int dword_4E2674;
// 4E2678: using guessed type int dword_4E2678;
// 4E267C: using guessed type int dword_4E267C;
// 4E2680: using guessed type int dword_4E2680;
// 4E2684: using guessed type int dword_4E2684;
// 4E2688: using guessed type int dword_4E2688;

//----- (004B2580) --------------------------------------------------------
void *__cdecl sub_4B2580()
{
  void *result; // eax@121
  int v1; // [sp+0h] [bp-148h]@122
  int v2; // [sp+4h] [bp-144h]@119
  int v3; // [sp+8h] [bp-140h]@116
  int v4; // [sp+Ch] [bp-13Ch]@113
  int v5; // [sp+10h] [bp-138h]@110
  int v6; // [sp+14h] [bp-134h]@107
  int v7; // [sp+18h] [bp-130h]@104
  int v8; // [sp+1Ch] [bp-12Ch]@101
  int v9; // [sp+20h] [bp-128h]@98
  int v10; // [sp+24h] [bp-124h]@95
  int v11; // [sp+28h] [bp-120h]@92
  int v12; // [sp+2Ch] [bp-11Ch]@89
  int v13; // [sp+30h] [bp-118h]@86
  int v14; // [sp+34h] [bp-114h]@83
  int v15; // [sp+38h] [bp-110h]@80
  int v16; // [sp+3Ch] [bp-10Ch]@77
  int v17; // [sp+40h] [bp-108h]@74
  int v18; // [sp+44h] [bp-104h]@71
  int v19; // [sp+48h] [bp-100h]@68
  int v20; // [sp+4Ch] [bp-FCh]@65
  int v21; // [sp+50h] [bp-F8h]@62
  int v22; // [sp+54h] [bp-F4h]@59
  int v23; // [sp+58h] [bp-F0h]@56
  int v24; // [sp+5Ch] [bp-ECh]@53
  int v25; // [sp+60h] [bp-E8h]@50
  int v26; // [sp+64h] [bp-E4h]@47
  int v27; // [sp+68h] [bp-E0h]@44
  int v28; // [sp+6Ch] [bp-DCh]@41
  int v29; // [sp+70h] [bp-D8h]@38
  int v30; // [sp+74h] [bp-D4h]@35
  int v31; // [sp+78h] [bp-D0h]@32
  int v32; // [sp+7Ch] [bp-CCh]@29
  int v33; // [sp+80h] [bp-C8h]@26
  int v34; // [sp+84h] [bp-C4h]@23
  int v35; // [sp+88h] [bp-C0h]@20
  int v36; // [sp+8Ch] [bp-BCh]@17
  int v37; // [sp+90h] [bp-B8h]@14
  int v38; // [sp+94h] [bp-B4h]@11
  int v39; // [sp+98h] [bp-B0h]@8
  int v40; // [sp+9Ch] [bp-ACh]@5
  int v41; // [sp+A0h] [bp-A8h]@2
  int v42; // [sp+A8h] [bp-A0h]@118
  int v43; // [sp+ACh] [bp-9Ch]@115
  int v44; // [sp+B0h] [bp-98h]@112
  int v45; // [sp+B4h] [bp-94h]@109
  int v46; // [sp+B8h] [bp-90h]@106
  int v47; // [sp+BCh] [bp-8Ch]@103
  int v48; // [sp+C0h] [bp-88h]@100
  int v49; // [sp+C4h] [bp-84h]@97
  int v50; // [sp+C8h] [bp-80h]@94
  int v51; // [sp+CCh] [bp-7Ch]@91
  int v52; // [sp+D0h] [bp-78h]@88
  int v53; // [sp+D4h] [bp-74h]@85
  int v54; // [sp+D8h] [bp-70h]@82
  int v55; // [sp+DCh] [bp-6Ch]@79
  int v56; // [sp+E0h] [bp-68h]@76
  int v57; // [sp+E4h] [bp-64h]@73
  int v58; // [sp+E8h] [bp-60h]@70
  int v59; // [sp+ECh] [bp-5Ch]@67
  int v60; // [sp+F0h] [bp-58h]@64
  int v61; // [sp+F4h] [bp-54h]@61
  int v62; // [sp+F8h] [bp-50h]@58
  int v63; // [sp+FCh] [bp-4Ch]@55
  int v64; // [sp+100h] [bp-48h]@52
  int v65; // [sp+104h] [bp-44h]@49
  int v66; // [sp+108h] [bp-40h]@46
  int v67; // [sp+10Ch] [bp-3Ch]@43
  int v68; // [sp+110h] [bp-38h]@40
  int v69; // [sp+114h] [bp-34h]@37
  int v70; // [sp+118h] [bp-30h]@34
  int v71; // [sp+11Ch] [bp-2Ch]@31
  int v72; // [sp+120h] [bp-28h]@28
  int v73; // [sp+124h] [bp-24h]@25
  int v74; // [sp+128h] [bp-20h]@22
  int v75; // [sp+12Ch] [bp-1Ch]@19
  int v76; // [sp+130h] [bp-18h]@16
  int v77; // [sp+134h] [bp-14h]@13
  int v78; // [sp+138h] [bp-10h]@10
  int v79; // [sp+13Ch] [bp-Ch]@7
  int v80; // [sp+140h] [bp-8h]@4
  int v81; // [sp+144h] [bp-4h]@1

  v81 = (int)sub_401000(0x4Cu);
  if ( v81 )
    v41 = CVanishConfi::CVanishConfi(v81);
  else
    v41 = 0;
  dword_4E2690[0] = v41;
  v80 = (int)sub_401000(0x4Cu);
  if ( v80 )
    v40 = sub_48F6F0(v80);
  else
    v40 = 0;
  dword_4E2694 = v40;
  v79 = (int)sub_401000(0x4Cu);
  if ( v79 )
    v39 = sub_48F990(v79);
  else
    v39 = 0;
  dword_4E2698 = v39;
  v78 = (int)sub_401000(0x4Cu);
  if ( v78 )
    v38 = CBerserk::CBerserk(v78);
  else
    v38 = 0;
  dword_4E269C = v38;
  v77 = (int)sub_401000(0x4Cu);
  if ( v77 )
    v37 = CResistFire::CResistFire(v77);
  else
    v37 = 0;
  dword_4E26A0 = v37;
  v76 = (int)sub_401000(0x4Cu);
  if ( v76 )
    v36 = CResistCurse::CResistCurse(v76);
  else
    v36 = 0;
  dword_4E26A4 = v36;
  v75 = (int)sub_401000(0x4Cu);
  if ( v75 )
    v35 = CResistPalsy::GetSpendMP(v75);
  else
    v35 = 0;
  dword_4E26A8 = v35;
  v74 = (int)sub_401000(0x4Cu);
  if ( v74 )
    v34 = CResistPalsy::CResistPalsy(v74);
  else
    v34 = 0;
  dword_4E26AC = v34;
  v73 = (int)sub_401000(0x4Cu);
  if ( v73 )
    v33 = CSkillSelfBuff::CSkillSelfBuff(v73);
  else
    v33 = 0;
  dword_4E26B0 = v33;
  v72 = (int)sub_401000(0x4Cu);
  if ( v72 )
    v32 = sub_48F870(v72);
  else
    v32 = 0;
  dword_4E26B4 = v32;
  v71 = (int)sub_401000(0x4Cu);
  if ( v71 )
    v31 = sub_48F910(v71);
  else
    v31 = 0;
  dword_4E26B8 = v31;
  v70 = (int)sub_401000(0x4Cu);
  if ( v70 )
    v30 = CChantBattle::CChantBattle(v70);
  else
    v30 = 0;
  dword_4E26BC = v30;
  v69 = (int)sub_401000(0x4Cu);
  if ( v69 )
    v29 = sub_48F970(v69);
  else
    v29 = 0;
  dword_4E26C0 = v29;
  v68 = (int)sub_401000(0x4Cu);
  if ( v68 )
    v28 = CEmergencyEscape::CEmergencyEscape(v68);
  else
    v28 = 0;
  dword_4E26C4 = v28;
  v67 = (int)sub_401000(0x4Cu);
  if ( v67 )
    v27 = sub_48EA50(v67);
  else
    v27 = 0;
  dword_4E26C8 = v27;
  v66 = (int)sub_401000(0x4Cu);
  if ( v66 )
    v26 = sub_48F990(v66);
  else
    v26 = 0;
  dword_4E26CC = v26;
  v65 = (int)sub_401000(0x4Cu);
  if ( v65 )
    v25 = sub_48F990(v65);
  else
    v25 = 0;
  dword_4E26D0 = v25;
  v64 = (int)sub_401000(0x4Cu);
  if ( v64 )
    v24 = sub_48F9B0(v64);
  else
    v24 = 0;
  dword_4E26D4 = v24;
  v63 = (int)sub_401000(0x4Cu);
  if ( v63 )
    v23 = sub_48F9D0(v63);
  else
    v23 = 0;
  dword_4E26D8 = v23;
  v62 = (int)sub_401000(0x4Cu);
  if ( v62 )
    v22 = CTFury::CTFury(v62);
  else
    v22 = 0;
  dword_4E26DC = v22;
  v61 = (int)sub_401000(0x4Cu);
  if ( v61 )
    v21 = sub_48FA30(v61);
  else
    v21 = 0;
  dword_4E26E0 = v21;
  v60 = (int)sub_401000(0x4Cu);
  if ( v60 )
    v20 = sub_48F990(v60);
  else
    v20 = 0;
  dword_4E26E4 = v20;
  v59 = (int)sub_401000(0x4Cu);
  if ( v59 )
    v19 = sub_48FA70(v59);
  else
    v19 = 0;
  dword_4E26E8 = v19;
  v58 = (int)sub_401000(0x4Cu);
  if ( v58 )
    v18 = sub_48FA90(v58);
  else
    v18 = 0;
  dword_4E26EC = v18;
  v57 = (int)sub_401000(0x4Cu);
  if ( v57 )
    v17 = sub_48EA50(v57);
  else
    v17 = 0;
  dword_4E26F0 = v17;
  v56 = (int)sub_401000(0x4Cu);
  if ( v56 )
    v16 = CDoFury::CDoFury(v56);
  else
    v16 = 0;
  dword_4E26F4 = v16;
  v55 = (int)sub_401000(0x4Cu);
  if ( v55 )
    v15 = sub_48FAF0(v55);
  else
    v15 = 0;
  dword_4E26F8 = v15;
  v54 = (int)sub_401000(0x4Cu);
  if ( v54 )
    v14 = sub_48FB10(v54);
  else
    v14 = 0;
  dword_4E26FC = v14;
  v53 = (int)sub_401000(0x4Cu);
  if ( v53 )
    v13 = sub_48FB30(v53);
  else
    v13 = 0;
  dword_4E2700 = v13;
  v52 = (int)sub_401000(0x4Cu);
  if ( v52 )
    v12 = sub_48FB50(v52);
  else
    v12 = 0;
  dword_4E2704 = v12;
  v51 = (int)sub_401000(0x4Cu);
  if ( v51 )
    v11 = sub_48FB70(v51);
  else
    v11 = 0;
  dword_4E2708 = v11;
  v50 = (int)sub_401000(0x4Cu);
  if ( v50 )
    v10 = sub_48FB90(v50);
  else
    v10 = 0;
  dword_4E270C = v10;
  v49 = (int)sub_401000(0x4Cu);
  if ( v49 )
    v9 = sub_48FBB0(v49);
  else
    v9 = 0;
  dword_4E2710 = v9;
  v48 = (int)sub_401000(0x4Cu);
  if ( v48 )
    v8 = sub_48FBD0(v48);
  else
    v8 = 0;
  dword_4E2714 = v8;
  v47 = (int)sub_401000(0x4Cu);
  if ( v47 )
    v7 = sub_48FBF0(v47);
  else
    v7 = 0;
  dword_4E2718 = v7;
  v46 = (int)sub_401000(0x4Cu);
  if ( v46 )
    v6 = sub_48F990(v46);
  else
    v6 = 0;
  dword_4E271C = v6;
  v45 = (int)sub_401000(0x4Cu);
  if ( v45 )
    v5 = CDoOverrun::GetAddValueType(v45);
  else
    v5 = 0;
  dword_4E2720 = v5;
  v44 = (int)sub_401000(0x4Cu);
  if ( v44 )
    v4 = sub_48FC60(v44);
  else
    v4 = 0;
  dword_4E2724 = v4;
  v43 = (int)sub_401000(0x4Cu);
  if ( v43 )
    v3 = sub_48FC90(v43);
  else
    v3 = 0;
  dword_4E2728 = v3;
  v42 = (int)sub_401000(0x4Cu);
  if ( v42 )
    v2 = sub_48FCB0(v42);
  else
    v2 = 0;
  dword_4E272C = v2;
  result = sub_401000(0x50u);
  if ( result )
  {
    result = (void *)sub_48FCE0((int)result);
    v1 = (int)result;
  }
  else
  {
    v1 = 0;
  }
  dword_4E2730 = v1;
  return result;
}
// 4E2690: using guessed type int dword_4E2690[];
// 4E2694: using guessed type int dword_4E2694;
// 4E2698: using guessed type int dword_4E2698;
// 4E269C: using guessed type int dword_4E269C;
// 4E26A0: using guessed type int dword_4E26A0;
// 4E26A4: using guessed type int dword_4E26A4;
// 4E26A8: using guessed type int dword_4E26A8;
// 4E26AC: using guessed type int dword_4E26AC;
// 4E26B0: using guessed type int dword_4E26B0;
// 4E26B4: using guessed type int dword_4E26B4;
// 4E26B8: using guessed type int dword_4E26B8;
// 4E26BC: using guessed type int dword_4E26BC;
// 4E26C0: using guessed type int dword_4E26C0;
// 4E26C4: using guessed type int dword_4E26C4;
// 4E26C8: using guessed type int dword_4E26C8;
// 4E26CC: using guessed type int dword_4E26CC;
// 4E26D0: using guessed type int dword_4E26D0;
// 4E26D4: using guessed type int dword_4E26D4;
// 4E26D8: using guessed type int dword_4E26D8;
// 4E26DC: using guessed type int dword_4E26DC;
// 4E26E0: using guessed type int dword_4E26E0;
// 4E26E4: using guessed type int dword_4E26E4;
// 4E26E8: using guessed type int dword_4E26E8;
// 4E26EC: using guessed type int dword_4E26EC;
// 4E26F0: using guessed type int dword_4E26F0;
// 4E26F4: using guessed type int dword_4E26F4;
// 4E26F8: using guessed type int dword_4E26F8;
// 4E26FC: using guessed type int dword_4E26FC;
// 4E2700: using guessed type int dword_4E2700;
// 4E2704: using guessed type int dword_4E2704;
// 4E2708: using guessed type int dword_4E2708;
// 4E270C: using guessed type int dword_4E270C;
// 4E2710: using guessed type int dword_4E2710;
// 4E2714: using guessed type int dword_4E2714;
// 4E2718: using guessed type int dword_4E2718;
// 4E271C: using guessed type int dword_4E271C;
// 4E2720: using guessed type int dword_4E2720;
// 4E2724: using guessed type int dword_4E2724;
// 4E2728: using guessed type int dword_4E2728;
// 4E272C: using guessed type int dword_4E272C;
// 4E2730: using guessed type int dword_4E2730;

//----- (004B2F00) --------------------------------------------------------
DWORD __cdecl sub_4B2F00()
{
  DWORD result; // eax@1

  result = GetTickCount();
  dword_4E2744 = result;
  return result;
}
// 4E2744: using guessed type int dword_4E2744;

//----- (004B2F10) --------------------------------------------------------
int __cdecl sub_4B2F10()
{
  sub_493EE0(&unk_4E2748);
  return atexit(sub_4B34E0);
}

//----- (004B2F30) --------------------------------------------------------
DWORD __cdecl sub_4B2F30()
{
  DWORD result; // eax@1

  result = GetTickCount();
  dword_4E2754 = result;
  return result;
}
// 4E2754: using guessed type int dword_4E2754;

//----- (004B2F40) --------------------------------------------------------
int __cdecl sub_4B2F40()
{
  sub_423F60((int)&unk_4E2758, 60, 32, sub_493F10);
  return atexit(sub_4B34F0);
}

//----- (004B2F70) --------------------------------------------------------
int __cdecl sub_4B2F70()
{
  sub_47E220((int)&unk_4E2EDC);
  return atexit((void (__cdecl *)())sub_4B3510);
}

//----- (004B2F90) --------------------------------------------------------
int __cdecl sub_4B2F90()
{
  sub_496300(&unk_4E35B4);
  return atexit(sub_4B3520);
}

//----- (004B2FB0) --------------------------------------------------------
void *__cdecl sub_4B2FB0()
{
  return sub_497CB0(&unk_4E374C);
}

//----- (004B2FC0) --------------------------------------------------------
int __usercall sub_4B2FC0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return CAuthSocket::_CAuthSocket((int)&unk_4DA6F0, a1, a2, a3);
}

//----- (004B2FD0) --------------------------------------------------------
LONG __cdecl sub_4B2FD0()
{
  return CMemoryPool_CAuthPacket::_CPool::_CPool();
}

//----- (004B2FE0) --------------------------------------------------------
LONG __cdecl sub_4B2FE0()
{
  return CMemoryPool_CSkill::_CPool::_CPool();
}

//----- (004B2FF0) --------------------------------------------------------
LONG __cdecl sub_4B2FF0()
{
  return CMemoryPool_CBaseList::_CPool::_CPool();
}

//----- (004B3000) --------------------------------------------------------
int __cdecl sub_4B3000()
{
  return CCalendar::_CCalendar(&unk_4DA798);
}

//----- (004B3010) --------------------------------------------------------
int __usercall sub_4B3010<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return CDBSocket::_CDBSocket(&unk_4DA7B8, a1, a2, a3);
}

//----- (004B3020) --------------------------------------------------------
LONG __cdecl sub_4B3020()
{
  return CMemoryPool_CDBPacket::_CPool::_CPool();
}

//----- (004B3030) --------------------------------------------------------
LONG __cdecl sub_4B3030()
{
  return CMemoryPool_CFindPath::NODE::_CPool::_CPool();
}

//----- (004B3040) --------------------------------------------------------
int __cdecl sub_4B3040()
{
  return sub_410880((int)&unk_4E094C);
}

//----- (004B3050) --------------------------------------------------------
int __cdecl sub_4B3050()
{
  return sub_472990((int)&unk_4E0958);
}

//----- (004B3060) --------------------------------------------------------
int __cdecl sub_4B3060()
{
  return sub_418A30((int)&unk_4E0968);
}

//----- (004B3070) --------------------------------------------------------
int __cdecl sub_4B3070()
{
  return sub_418A30((int)&unk_4E0974);
}

//----- (004B3080) --------------------------------------------------------
BOOL __usercall sub_4B3080<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E0980, a1, a2, a3);
}

//----- (004B3090) --------------------------------------------------------
int __cdecl sub_4B3090()
{
  return sub_41D060((int)&unk_4E09A4);
}

//----- (004B30A0) --------------------------------------------------------
BOOL __usercall sub_4B30A0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E09B0, a1, a2, a3);
}

//----- (004B30B0) --------------------------------------------------------
int __cdecl sub_4B30B0()
{
  return sub_41D1F0((int)&unk_4E09C8);
}

//----- (004B30C0) --------------------------------------------------------
BOOL __usercall sub_4B30C0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E09D4, a1, a2, a3);
}

//----- (004B30D0) --------------------------------------------------------
int __cdecl sub_4B30D0()
{
  return sub_4209C0((int)&unk_4E09F0);
}

//----- (004B30E0) --------------------------------------------------------
void __cdecl sub_4B30E0()
{
  CIOException::CInit::_CInit();
}

//----- (004B30F0) --------------------------------------------------------
void __usercall sub_4B30F0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CIOCriticalSection::_CIOCriticalSection((int)&unk_4E0FE8, a1, a2, a3);
}

//----- (004B3100) --------------------------------------------------------
int __cdecl sub_4B3100()
{
  return CIOSocket::CInit::_CInit();
}

//----- (004B3110) --------------------------------------------------------
int __cdecl sub_4B3110()
{
  return sub_4258D0((int)&unk_4E100C);
}

//----- (004B3120) --------------------------------------------------------
int __cdecl sub_4B3120()
{
  return CIOSocket::CIOTimerInstance::_CIOTimerInstance(&unk_4E1020);
}

//----- (004B3130) --------------------------------------------------------
int __cdecl sub_4B3130()
{
  return sub_42FA40((int)&unk_4E10B4);
}

//----- (004B3140) --------------------------------------------------------
int __cdecl sub_4B3140()
{
  return sub_42FBD0((int)&unk_4E10C0);
}

//----- (004B3150) --------------------------------------------------------
int __cdecl sub_4B3150()
{
  return sub_42FD60((int)&unk_4E10CC);
}

//----- (004B3160) --------------------------------------------------------
BOOL __usercall sub_4B3160<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E10D8, a1, a2, a3);
}

//----- (004B3170) --------------------------------------------------------
int __cdecl sub_4B3170()
{
  return sub_4320D0((int)&unk_4E10F0);
}

//----- (004B3180) --------------------------------------------------------
int __cdecl sub_4B3180()
{
  return sub_432260((int)&unk_4E10FC);
}

//----- (004B3190) --------------------------------------------------------
void __usercall sub_4B3190(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  sub_47E270((int)&unk_4E1128, a1, a2, a3);
}

//----- (004B31A0) --------------------------------------------------------
int __cdecl sub_4B31A0()
{
  return CLog::CInit::_CInit();
}

//----- (004B31B0) --------------------------------------------------------
int __cdecl sub_4B31B0()
{
  return sub_40F780((int)&unk_4E1194);
}

//----- (004B31C0) --------------------------------------------------------
int __cdecl sub_4B31C0()
{
  return sub_40F780((int)&unk_4E11B0);
}

//----- (004B31D0) --------------------------------------------------------
int __cdecl sub_4B31D0()
{
  return sub_40F780((int)&unk_4E11CC);
}

//----- (004B31E0) --------------------------------------------------------
int __cdecl sub_4B31E0()
{
  return sub_40F780((int)&unk_4E11E8);
}

//----- (004B31F0) --------------------------------------------------------
int __cdecl sub_4B31F0()
{
  return sub_40F780((int)&unk_4E1204);
}

//----- (004B3200) --------------------------------------------------------
int __cdecl sub_4B3200()
{
  return sub_40F780((int)&unk_4E1220);
}

//----- (004B3210) --------------------------------------------------------
int __cdecl sub_4B3210()
{
  return sub_40F780((int)&unk_4E123C);
}

//----- (004B3220) --------------------------------------------------------
int __cdecl sub_4B3220()
{
  return sub_433BF0((int)&unk_4E1258);
}

//----- (004B3230) --------------------------------------------------------
int __cdecl sub_4B3230()
{
  return sub_40F780((int)&unk_4E1264);
}

//----- (004B3240) --------------------------------------------------------
int __cdecl sub_4B3240()
{
  return sub_4477F0((int)&unk_4E1820);
}

//----- (004B3250) --------------------------------------------------------
void __usercall sub_4B3250(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CIOCriticalSection::_CIOCriticalSection((int)&unk_4E182C, a1, a2, a3);
}

//----- (004B3260) --------------------------------------------------------
int __cdecl sub_4B3260()
{
  return sub_447980((int)&unk_4E184C);
}

//----- (004B3270) --------------------------------------------------------
BOOL __usercall sub_4B3270<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E1858, a1, a2, a3);
}

//----- (004B3280) --------------------------------------------------------
int __cdecl sub_4B3280()
{
  return sub_447A70((int)&unk_4E1870);
}

//----- (004B3290) --------------------------------------------------------
BOOL __usercall sub_4B3290<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E187C, a1, a2, a3);
}

//----- (004B32A0) --------------------------------------------------------
int __usercall sub_4B32A0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return CGenMonster::_CGenMonster((int)&unk_4E1898, a1, a2, a3);
}

//----- (004B32B0) --------------------------------------------------------
int __cdecl sub_4B32B0()
{
  return sub_4370E0((int)&unk_4E18F0, 32, 2, (int (__thiscall *)(_DWORD))CIOCriticalSection::_CIOCriticalSection);
}

//----- (004B32D0) --------------------------------------------------------
int __cdecl sub_4B32D0()
{
  return CNPCObject::_CNPCObject(&unk_4E1930);
}

//----- (004B32E0) --------------------------------------------------------
int __cdecl sub_4B32E0()
{
  return CNPCObject::_CNPCObject(&unk_4E1998);
}

//----- (004B32F0) --------------------------------------------------------
int __cdecl sub_4B32F0()
{
  return CNPCObject::_CNPCObject(&unk_4E1A00);
}

//----- (004B3300) --------------------------------------------------------
int __cdecl sub_4B3300()
{
  return sub_44B920((int)&unk_4E1A9C);
}

//----- (004B3310) --------------------------------------------------------
int __cdecl sub_4B3310()
{
  return sub_44BB90((int)&unk_4E1AA8);
}

//----- (004B3320) --------------------------------------------------------
int __cdecl sub_4B3320()
{
  return sub_44BE00((int)&unk_4E1AB4);
}

//----- (004B3330) --------------------------------------------------------
BOOL __usercall sub_4B3330<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E1AC0, a1, a2, a3);
}

//----- (004B3340) --------------------------------------------------------
int __cdecl sub_4B3340()
{
  return CNPCObject::_CNPCObject(&unk_4E1AD8);
}

//----- (004B3350) --------------------------------------------------------
void __usercall sub_4B3350(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CIOCriticalSection::_CIOCriticalSection((int)&unk_4E1B38, a1, a2, a3);
}

//----- (004B3360) --------------------------------------------------------
void __usercall sub_4B3360(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CIOCriticalSection::_CIOCriticalSection((int)&unk_4E1B58, a1, a2, a3);
}

//----- (004B3370) --------------------------------------------------------
void __usercall sub_4B3370(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CIOCriticalSection::_CIOCriticalSection((int)&unk_4E1B78, a1, a2, a3);
}

//----- (004B3380) --------------------------------------------------------
int __cdecl sub_4B3380()
{
  return sub_44CEE0((int)&unk_4E1B9C);
}

//----- (004B3390) --------------------------------------------------------
int __cdecl sub_4B3390()
{
  return sub_44D150((int)&unk_4E1F38);
}

//----- (004B33A0) --------------------------------------------------------
int __cdecl sub_4B33A0()
{
  return sub_44FBF0((int)&unk_4E1FC4);
}

//----- (004B33B0) --------------------------------------------------------
void __usercall sub_4B33B0(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  CIOCriticalSection::_CIOCriticalSection((int)&unk_4E1FD0, a1, a2, a3);
}

//----- (004B33C0) --------------------------------------------------------
int __cdecl sub_4B33C0()
{
  return sub_47A8D0((int)&unk_4E2020);
}

//----- (004B33D0) --------------------------------------------------------
BOOL __usercall sub_4B33D0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E202C, a1, a2, a3);
}

//----- (004B33E0) --------------------------------------------------------
int __cdecl sub_4B33E0()
{
  return sub_47A9C0((int)&unk_4E2044);
}

//----- (004B33F0) --------------------------------------------------------
BOOL __usercall sub_4B33F0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E2050, a1, a2, a3);
}

//----- (004B3400) --------------------------------------------------------
int __cdecl sub_4B3400()
{
  return sub_47A8D0((int)&unk_4E2068);
}

//----- (004B3410) --------------------------------------------------------
int __cdecl sub_4B3410()
{
  return sub_4370E0((int)&unk_4E2078, 32, 2, (int (__thiscall *)(_DWORD))CIOCriticalSection::_CIOCriticalSection);
}

//----- (004B3430) --------------------------------------------------------
BOOL __usercall sub_4B3430<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E20B8, a1, a2, a3);
}

//----- (004B3440) --------------------------------------------------------
int __cdecl sub_4B3440()
{
  return sub_472990((int)&unk_4E20D0);
}

//----- (004B3450) --------------------------------------------------------
BOOL __usercall sub_4B3450<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E20DC, a1, a2, a3);
}

//----- (004B3460) --------------------------------------------------------
int __cdecl sub_4B3460()
{
  return CIOSocket::CIOTimerInstance::_CIOTimerInstance(&unk_4E20F4);
}

//----- (004B3470) --------------------------------------------------------
int __cdecl sub_4B3470()
{
  return sub_47DAD0((int)&unk_4E210C);
}

//----- (004B3480) --------------------------------------------------------
BOOL __usercall sub_4B3480<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E2118, a1, a2, a3);
}

//----- (004B3490) --------------------------------------------------------
int __cdecl sub_4B3490()
{
  return sub_47ECF0((int)&unk_4E214C);
}

//----- (004B34A0) --------------------------------------------------------
int __cdecl sub_4B34A0()
{
  return sub_47ECD0(&unk_4E2158);
}

//----- (004B34B0) --------------------------------------------------------
BOOL __usercall sub_4B34B0<eax>(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  return sub_47DDA0((int)&unk_4E2170, a1, a2, a3);
}

//----- (004B34C0) --------------------------------------------------------
int __cdecl sub_4B34C0()
{
  return sub_4808E0((int)&unk_4E218C);
}

//----- (004B34D0) --------------------------------------------------------
int __cdecl sub_4B34D0()
{
  return sub_4808E0((int)&unk_4E2198);
}

//----- (004B34E0) --------------------------------------------------------
int __cdecl sub_4B34E0()
{
  return sub_493FC0((int)&unk_4E2748);
}

//----- (004B34F0) --------------------------------------------------------
int __cdecl sub_4B34F0()
{
  return sub_4370E0((int)&unk_4E2758, 60, 32, (int (__thiscall *)(_DWORD))sub_493F90);
}

//----- (004B3510) --------------------------------------------------------
void __usercall sub_4B3510(DWORD a1<ebx>, DWORD a2<edi>, DWORD a3<esi>)
{
  sub_47E270((int)&unk_4E2EDC, a1, a2, a3);
}

//----- (004B3520) --------------------------------------------------------
int __cdecl sub_4B3520()
{
  return std___Init_locks____Init_locks(&unk_4E35B4);
}
// 401130: using guessed type int __thiscall std___Init_locks____Init_locks(_DWORD);

#error "There were 1 decompilation failure(s) on 3373 function(s)"
